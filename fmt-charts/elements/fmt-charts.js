(()=>{"use strict";var e,_={},h={};function n(e){var a=h[e];if(void 0!==a)return a.exports;var r=h[e]={exports:{}};return _[e](r,r.exports,n),r.exports}n.m=_,e=[],n.O=(a,r,u,t)=>{if(!r){var s=1/0;for(f=0;f<e.length;f++){for(var[r,u,t]=e[f],o=!0,l=0;l<r.length;l++)(!1&t||s>=t)&&Object.keys(n.O).every(i=>n.O[i](r[l]))?r.splice(l--,1):(o=!1,t<s&&(s=t));if(o){e.splice(f--,1);var c=u();void 0!==c&&(a=c)}}return a}t=t||0;for(var f=e.length;f>0&&e[f-1][2]>t;f--)e[f]=e[f-1];e[f]=[r,u,t]},n.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return n.d(a,{a}),a},n.d=(e,a)=>{for(var r in a)n.o(a,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},n.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={666:0};n.O.j=u=>0===e[u];var a=(u,t)=>{var l,c,[f,s,o]=t,v=0;if(f.some(d=>0!==e[d])){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(o)var b=o(n)}for(u&&u(t);v<f.length;v++)n.o(e,c=f[v])&&e[c]&&e[c][0](),e[c]=0;return n.O(b)},r=self.webpackChunkfmt_charts=self.webpackChunkfmt_charts||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))})()})();
(self.webpackChunkfmt_charts=self.webpackChunkfmt_charts||[]).push([[179],{133:(Ph,v,re)=>{"use strict";function ne(k){return"function"==typeof k}function g(k){const L=k(W=>{Error.call(W),W.stack=(new Error).stack});return L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L}const m=g(k=>function(L){k(this),this.message=L?`${L.length} errors occurred during unsubscription:\n${L.map((W,se)=>`${se+1}) ${W.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=L});function b(k,E){if(k){const L=k.indexOf(E);0<=L&&k.splice(L,1)}}class y{constructor(E){this.initialTeardown=E,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let E;if(!this.closed){this.closed=!0;const{_parentage:L}=this;if(L)if(this._parentage=null,Array.isArray(L))for(const me of L)me.remove(this);else L.remove(this);const{initialTeardown:W}=this;if(ne(W))try{W()}catch(me){E=me instanceof m?me.errors:[me]}const{_finalizers:se}=this;if(se){this._finalizers=null;for(const me of se)try{n(me)}catch(Le){E=E??[],Le instanceof m?E=[...E,...Le.errors]:E.push(Le)}}if(E)throw new m(E)}}add(E){var L;if(E&&E!==this)if(this.closed)n(E);else{if(E instanceof y){if(E.closed||E._hasParent(this))return;E._addParent(this)}(this._finalizers=null!==(L=this._finalizers)&&void 0!==L?L:[]).push(E)}}_hasParent(E){const{_parentage:L}=this;return L===E||Array.isArray(L)&&L.includes(E)}_addParent(E){const{_parentage:L}=this;this._parentage=Array.isArray(L)?(L.push(E),L):L?[L,E]:E}_removeParent(E){const{_parentage:L}=this;L===E?this._parentage=null:Array.isArray(L)&&b(L,E)}remove(E){const{_finalizers:L}=this;L&&b(L,E),E instanceof y&&E._removeParent(this)}}y.EMPTY=(()=>{const k=new y;return k.closed=!0,k})();const e=y.EMPTY;function r(k){return k instanceof y||k&&"closed"in k&&ne(k.remove)&&ne(k.add)&&ne(k.unsubscribe)}function n(k){ne(k)?k():k.unsubscribe()}const a={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},t={setTimeout(k,E,...L){const{delegate:W}=t;return W?.setTimeout?W.setTimeout(k,E,...L):setTimeout(k,E,...L)},clearTimeout(k){const{delegate:E}=t;return(E?.clearTimeout||clearTimeout)(k)},delegate:void 0};function p(k){t.setTimeout(()=>{const{onUnhandledError:E}=a;if(!E)throw k;E(k)})}function s(){}const i=l("C",void 0,void 0);function l(k,E,L){return{kind:k,value:E,error:L}}let h=null;function d(k){if(a.useDeprecatedSynchronousErrorHandling){const E=!h;if(E&&(h={errorThrown:!1,error:null}),k(),E){const{errorThrown:L,error:W}=h;if(h=null,L)throw W}}else k()}class x extends y{constructor(E){super(),this.isStopped=!1,E?(this.destination=E,r(E)&&E.add(this)):this.destination=R}static create(E,L,W){return new w(E,L,W)}next(E){this.isStopped?S(function c(k){return l("N",k,void 0)}(E),this):this._next(E)}error(E){this.isStopped?S(function f(k){return l("E",void 0,k)}(E),this):(this.isStopped=!0,this._error(E))}complete(){this.isStopped?S(i,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(E){this.destination.next(E)}_error(E){try{this.destination.error(E)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const u=Function.prototype.bind;function T(k,E){return u.call(k,E)}class _{constructor(E){this.partialObserver=E}next(E){const{partialObserver:L}=this;if(L.next)try{L.next(E)}catch(W){M(W)}}error(E){const{partialObserver:L}=this;if(L.error)try{L.error(E)}catch(W){M(W)}else M(E)}complete(){const{partialObserver:E}=this;if(E.complete)try{E.complete()}catch(L){M(L)}}}class w extends x{constructor(E,L,W){let se;if(super(),ne(E)||!E)se={next:E??void 0,error:L??void 0,complete:W??void 0};else{let me;this&&a.useDeprecatedNextContext?(me=Object.create(E),me.unsubscribe=()=>this.unsubscribe(),se={next:E.next&&T(E.next,me),error:E.error&&T(E.error,me),complete:E.complete&&T(E.complete,me)}):se=E}this.destination=new _(se)}}function M(k){a.useDeprecatedSynchronousErrorHandling?function o(k){a.useDeprecatedSynchronousErrorHandling&&h&&(h.errorThrown=!0,h.error=k)}(k):p(k)}function S(k,E){const{onStoppedNotification:L}=a;L&&t.setTimeout(()=>L(k,E))}const R={closed:!0,next:s,error:function I(k){throw k},complete:s},O="function"==typeof Symbol&&Symbol.observable||"@@observable";function C(k){return k}let z=(()=>{class k{constructor(L){L&&(this._subscribe=L)}lift(L){const W=new k;return W.source=this,W.operator=L,W}subscribe(L,W,se){const me=function J(k){return k&&k instanceof x||function G(k){return k&&ne(k.next)&&ne(k.error)&&ne(k.complete)}(k)&&r(k)}(L)?L:new w(L,W,se);return d(()=>{const{operator:Le,source:He}=this;me.add(Le?Le.call(me,He):He?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(L){try{return this._subscribe(L)}catch(W){L.error(W)}}forEach(L,W){return new(W=Y(W))((se,me)=>{const Le=new w({next:He=>{try{L(He)}catch(ot){me(ot),Le.unsubscribe()}},error:me,complete:se});this.subscribe(Le)})}_subscribe(L){var W;return null===(W=this.source)||void 0===W?void 0:W.subscribe(L)}[O](){return this}pipe(...L){return function B(k){return 0===k.length?C:1===k.length?k[0]:function(L){return k.reduce((W,se)=>se(W),L)}}(L)(this)}toPromise(L){return new(L=Y(L))((W,se)=>{let me;this.subscribe(Le=>me=Le,Le=>se(Le),()=>W(me))})}}return k.create=E=>new k(E),k})();function Y(k){var E;return null!==(E=k??a.Promise)&&void 0!==E?E:Promise}const te=g(k=>function(){k(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let X=(()=>{class k extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(L){const W=new K(this,this);return W.operator=L,W}_throwIfClosed(){if(this.closed)throw new te}next(L){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const W of this.currentObservers)W.next(L)}})}error(L){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=L;const{observers:W}=this;for(;W.length;)W.shift().error(L)}})}complete(){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:L}=this;for(;L.length;)L.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var L;return(null===(L=this.observers)||void 0===L?void 0:L.length)>0}_trySubscribe(L){return this._throwIfClosed(),super._trySubscribe(L)}_subscribe(L){return this._throwIfClosed(),this._checkFinalizedStatuses(L),this._innerSubscribe(L)}_innerSubscribe(L){const{hasError:W,isStopped:se,observers:me}=this;return W||se?e:(this.currentObservers=null,me.push(L),new y(()=>{this.currentObservers=null,b(me,L)}))}_checkFinalizedStatuses(L){const{hasError:W,thrownError:se,isStopped:me}=this;W?L.error(se):me&&L.complete()}asObservable(){const L=new z;return L.source=this,L}}return k.create=(E,L)=>new K(E,L),k})();class K extends X{constructor(E,L){super(),this.destination=E,this.source=L}next(E){var L,W;null===(W=null===(L=this.destination)||void 0===L?void 0:L.next)||void 0===W||W.call(L,E)}error(E){var L,W;null===(W=null===(L=this.destination)||void 0===L?void 0:L.error)||void 0===W||W.call(L,E)}complete(){var E,L;null===(L=null===(E=this.destination)||void 0===E?void 0:E.complete)||void 0===L||L.call(E)}_subscribe(E){var L,W;return null!==(W=null===(L=this.source)||void 0===L?void 0:L.subscribe(E))&&void 0!==W?W:e}}function U(k){return E=>{if(function ae(k){return ne(k?.lift)}(E))return E.lift(function(L){try{return k(L,this)}catch(W){this.error(W)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(k,E,L,W,se){return new q(k,E,L,W,se)}class q extends x{constructor(E,L,W,se,me,Le){super(E),this.onFinalize=me,this.shouldUnsubscribe=Le,this._next=L?function(He){try{L(He)}catch(ot){E.error(ot)}}:super._next,this._error=se?function(He){try{se(He)}catch(ot){E.error(ot)}finally{this.unsubscribe()}}:super._error,this._complete=W?function(){try{W()}catch(He){E.error(He)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var E;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:L}=this;super.unsubscribe(),!L&&(null===(E=this.onFinalize)||void 0===E||E.call(this))}}}function ie(k,E){return U((L,W)=>{let se=0;L.subscribe(V(W,me=>{W.next(k.call(E,me,se++))}))})}function be(k,E,L,W){return new(L||(L=Promise))(function(me,Le){function He($t){try{wt(W.next($t))}catch(gn){Le(gn)}}function ot($t){try{wt(W.throw($t))}catch(gn){Le(gn)}}function wt($t){$t.done?me($t.value):function se(me){return me instanceof L?me:new L(function(Le){Le(me)})}($t.value).then(He,ot)}wt((W=W.apply(k,E||[])).next())})}function Ie(k){return this instanceof Ie?(this.v=k,this):new Ie(k)}function De(k,E,L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,W=L.apply(k,E||[]),me=[];return se={},Le("next"),Le("throw"),Le("return"),se[Symbol.asyncIterator]=function(){return this},se;function Le(Fn){W[Fn]&&(se[Fn]=function(tr){return new Promise(function(Sr,Wr){me.push([Fn,tr,Sr,Wr])>1||He(Fn,tr)})})}function He(Fn,tr){try{!function ot(Fn){Fn.value instanceof Ie?Promise.resolve(Fn.value.v).then(wt,$t):gn(me[0][2],Fn)}(W[Fn](tr))}catch(Sr){gn(me[0][3],Sr)}}function wt(Fn){He("next",Fn)}function $t(Fn){He("throw",Fn)}function gn(Fn,tr){Fn(tr),me.shift(),me.length&&He(me[0][0],me[0][1])}}function Ue(k){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var L,E=k[Symbol.asyncIterator];return E?E.call(k):(k=function Ee(k){var E="function"==typeof Symbol&&Symbol.iterator,L=E&&k[E],W=0;if(L)return L.call(k);if(k&&"number"==typeof k.length)return{next:function(){return k&&W>=k.length&&(k=void 0),{value:k&&k[W++],done:!k}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}(k),L={},W("next"),W("throw"),W("return"),L[Symbol.asyncIterator]=function(){return this},L);function W(me){L[me]=k[me]&&function(Le){return new Promise(function(He,ot){!function se(me,Le,He,ot){Promise.resolve(ot).then(function(wt){me({value:wt,done:He})},Le)}(He,ot,(Le=k[me](Le)).done,Le.value)})}}}const lt=k=>k&&"number"==typeof k.length&&"function"!=typeof k;function mt(k){return ne(k?.then)}function Tt(k){return ne(k[O])}function It(k){return Symbol.asyncIterator&&ne(k?.[Symbol.asyncIterator])}function Ct(k){return new TypeError(`You provided ${null!==k&&"object"==typeof k?"an invalid object":`'${k}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const at=function ct(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function St(k){return ne(k?.[at])}function Xt(k){return De(this,arguments,function*(){const L=k.getReader();try{for(;;){const{value:W,done:se}=yield Ie(L.read());if(se)return yield Ie(void 0);yield yield Ie(W)}}finally{L.releaseLock()}})}function tn(k){return ne(k?.getReader)}function hn(k){if(k instanceof z)return k;if(null!=k){if(Tt(k))return function cn(k){return new z(E=>{const L=k[O]();if(ne(L.subscribe))return L.subscribe(E);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(k);if(lt(k))return function yn(k){return new z(E=>{for(let L=0;L<k.length&&!E.closed;L++)E.next(k[L]);E.complete()})}(k);if(mt(k))return function en(k){return new z(E=>{k.then(L=>{E.closed||(E.next(L),E.complete())},L=>E.error(L)).then(null,p)})}(k);if(It(k))return tt(k);if(St(k))return function Xe(k){return new z(E=>{for(const L of k)if(E.next(L),E.closed)return;E.complete()})}(k);if(tn(k))return function ye(k){return tt(Xt(k))}(k)}throw Ct(k)}function tt(k){return new z(E=>{(function ke(k,E){var L,W,se,me;return be(this,void 0,void 0,function*(){try{for(L=Ue(k);!(W=yield L.next()).done;)if(E.next(W.value),E.closed)return}catch(Le){se={error:Le}}finally{try{W&&!W.done&&(me=L.return)&&(yield me.call(L))}finally{if(se)throw se.error}}E.complete()})})(k,E).catch(L=>E.error(L))})}function Ve(k,E,L,W=0,se=!1){const me=E.schedule(function(){L(),se?k.add(this.schedule(null,W)):this.unsubscribe()},W);if(k.add(me),!se)return me}function nt(k,E,L=1/0){return ne(E)?nt((W,se)=>ie((me,Le)=>E(W,me,se,Le))(hn(k(W,se))),L):("number"==typeof E&&(L=E),U((W,se)=>function Je(k,E,L,W,se,me,Le,He){const ot=[];let wt=0,$t=0,gn=!1;const Fn=()=>{gn&&!ot.length&&!wt&&E.complete()},tr=Wr=>wt<W?Sr(Wr):ot.push(Wr),Sr=Wr=>{me&&E.next(Wr),wt++;let pi=!1;hn(L(Wr,$t++)).subscribe(V(E,Mi=>{se?.(Mi),me?tr(Mi):E.next(Mi)},()=>{pi=!0},void 0,()=>{if(pi)try{for(wt--;ot.length&&wt<W;){const Mi=ot.shift();Le?Ve(E,Le,()=>Sr(Mi)):Sr(Mi)}Fn()}catch(Mi){E.error(Mi)}}))};return k.subscribe(V(E,tr,()=>{gn=!0,Fn()})),()=>{He?.()}}(W,se,k,L)))}const vt=new z(k=>k.complete());function ft(k){return k[k.length-1]}function Bt(k,E=0){return U((L,W)=>{L.subscribe(V(W,se=>Ve(W,k,()=>W.next(se),E),()=>Ve(W,k,()=>W.complete(),E),se=>Ve(W,k,()=>W.error(se),E)))})}function Pe(k,E=0){return U((L,W)=>{W.add(k.schedule(()=>L.subscribe(W),E))})}function Yt(k,E){if(!k)throw new Error("Iterable cannot be null");return new z(L=>{Ve(L,E,()=>{const W=k[Symbol.asyncIterator]();Ve(L,E,()=>{W.next().then(se=>{se.done?L.complete():L.next(se.value)})},0,!0)})})}function Un(...k){const E=function Wt(k){return function Vt(k){return k&&ne(k.schedule)}(ft(k))?k.pop():void 0}(k),L=function Pt(k,E){return"number"==typeof ft(k)?k.pop():E}(k,1/0),W=k;return W.length?1===W.length?hn(W[0]):function Ke(k=1/0){return nt(C,k)}(L)(function Mn(k,E){return E?function Kt(k,E){if(null!=k){if(Tt(k))return function et(k,E){return hn(k).pipe(Pe(E),Bt(E))}(k,E);if(lt(k))return function xt(k,E){return new z(L=>{let W=0;return E.schedule(function(){W===k.length?L.complete():(L.next(k[W++]),L.closed||this.schedule())})})}(k,E);if(mt(k))return function dt(k,E){return hn(k).pipe(Pe(E),Bt(E))}(k,E);if(It(k))return Yt(k,E);if(St(k))return function Rt(k,E){return new z(L=>{let W;return Ve(L,E,()=>{W=k[at](),Ve(L,E,()=>{let se,me;try{({value:se,done:me}=W.next())}catch(Le){return void L.error(Le)}me?L.complete():L.next(se)},0,!0)}),()=>ne(W?.return)&&W.return()})}(k,E);if(tn(k))return function nn(k,E){return Yt(Xt(k),E)}(k,E)}throw Ct(k)}(k,E):hn(k)}(W,E)):vt}function un(k,E,...L){if(!0===E)return void k();if(!1===E)return;const W=new w({next:()=>{W.unsubscribe(),k()}});return E(...L).subscribe(W)}function an(k){for(let E in k)if(k[E]===an)return E;throw Error("Could not find renamed property on target object.")}function pn(k){if("string"==typeof k)return k;if(Array.isArray(k))return"["+k.map(pn).join(", ")+"]";if(null==k)return""+k;if(k.overriddenName)return`${k.overriddenName}`;if(k.name)return`${k.name}`;const E=k.toString();if(null==E)return""+E;const L=E.indexOf("\n");return-1===L?E:E.substring(0,L)}function Sn(k,E){return null==k||""===k?null===E?"":E:null==E||""===E?k:k+" "+E}const Nn=an({__forward_ref__:an});function Kn(k){return k.__forward_ref__=Kn,k.toString=function(){return pn(this())},k}function Bn(k){return function cr(k){return"function"==typeof k&&k.hasOwnProperty(Nn)&&k.__forward_ref__===Kn}(k)?k():k}class Qn extends Error{constructor(E,L){super(function qr(k,E){return`NG0${Math.abs(k)}${E?": "+E.trim():""}`}(E,L)),this.code=E}}function sr(k){return"string"==typeof k?k:null==k?"":String(k)}function Ar(k,E){throw new Qn(-201,!1)}function Gn(k,E){null==k&&function zn(k,E,L,W){throw new Error(`ASSERTION ERROR: ${k}`+(null==W?"":` [Expected=> ${L} ${W} ${E} <=Actual]`))}(E,k,null,"!=")}function Dn(k){return{token:k.token,providedIn:k.providedIn||null,factory:k.factory,value:void 0}}function rr(k){return{providers:k.providers||[],imports:k.imports||[]}}function ar(k){return vr(k,Rr)||vr(k,$r)}function vr(k,E){return k.hasOwnProperty(E)?k[E]:null}function Or(k){return k&&(k.hasOwnProperty(Ur)||k.hasOwnProperty(gi))?k[Ur]:null}const Rr=an({\u0275prov:an}),Ur=an({\u0275inj:an}),$r=an({ngInjectableDef:an}),gi=an({ngInjectorDef:an});var ai=(()=>((ai=ai||{})[ai.Default=0]="Default",ai[ai.Host=1]="Host",ai[ai.Self=2]="Self",ai[ai.SkipSelf=4]="SkipSelf",ai[ai.Optional=8]="Optional",ai))();let Wi;function ui(k){const E=Wi;return Wi=k,E}function mi(k,E,L){const W=ar(k);return W&&"root"==W.providedIn?void 0===W.value?W.value=W.factory():W.value:L&ai.Optional?null:void 0!==E?E:void Ar(pn(k))}function Wa(k){return{toString:k}.toString()}var Xa=(()=>((Xa=Xa||{})[Xa.OnPush=0]="OnPush",Xa[Xa.Default=1]="Default",Xa))(),ua=(()=>{return(k=ua||(ua={}))[k.Emulated=0]="Emulated",k[k.None=2]="None",k[k.ShadowDom=3]="ShadowDom",ua;var k})();const sa=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Fo={},Xi=[],zo=an({\u0275cmp:an}),es=an({\u0275dir:an}),cs=an({\u0275pipe:an}),Lo=an({\u0275mod:an}),Ua=an({\u0275fac:an}),Co=an({__NG_ELEMENT_ID__:an});let kl=0;function fl(k){return Wa(()=>{const L=!0===k.standalone,W={},se={type:k.type,providersResolver:null,decls:k.decls,vars:k.vars,factory:null,template:k.template||null,consts:k.consts||null,ngContentSelectors:k.ngContentSelectors,hostBindings:k.hostBindings||null,hostVars:k.hostVars||0,hostAttrs:k.hostAttrs||null,contentQueries:k.contentQueries||null,declaredInputs:W,inputs:null,outputs:null,exportAs:k.exportAs||null,onPush:k.changeDetection===Xa.OnPush,directiveDefs:null,pipeDefs:null,standalone:L,dependencies:L&&k.dependencies||null,getStandaloneInjector:null,selectors:k.selectors||Xi,viewQuery:k.viewQuery||null,features:k.features||null,data:k.data||{},encapsulation:k.encapsulation||ua.Emulated,id:"c"+kl++,styles:k.styles||Xi,_:null,setInput:null,schemas:k.schemas||null,tView:null},me=k.dependencies,Le=k.features;return se.inputs=ml(k.inputs,W),se.outputs=ml(k.outputs),Le&&Le.forEach(He=>He(se)),se.directiveDefs=me?()=>("function"==typeof me?me():me).map(hl).filter($s):null,se.pipeDefs=me?()=>("function"==typeof me?me():me).map(po).filter($s):null,se})}function hl(k){return pa(k)||ho(k)}function $s(k){return null!==k}function Os(k){return Wa(()=>({type:k.type,bootstrap:k.bootstrap||Xi,declarations:k.declarations||Xi,imports:k.imports||Xi,exports:k.exports||Xi,transitiveCompileScopes:null,schemas:k.schemas||null,id:k.id||null}))}function ml(k,E){if(null==k)return Fo;const L={};for(const W in k)if(k.hasOwnProperty(W)){let se=k[W],me=se;Array.isArray(se)&&(me=se[1],se=se[0]),L[se]=W,E&&(E[se]=me)}return L}const fs=fl;function pa(k){return k[zo]||null}function ho(k){return k[es]||null}function po(k){return k[cs]||null}function Ki(k){return Array.isArray(k)&&"object"==typeof k[1]}function ra(k){return Array.isArray(k)&&!0===k[1]}function go(k){return 0!=(8&k.flags)}function io(k){return 2==(2&k.flags)}function xa(k){return null!==k.template}function xo(k){return 0!=(256&k[2])}function bi(k,E){return k.hasOwnProperty(Ua)?k[Ua]:null}class dr{constructor(E,L,W){this.previousValue=E,this.currentValue=L,this.firstChange=W}isFirstChange(){return this.firstChange}}function wi(){return Gr}function Gr(k){return k.type.prototype.ngOnChanges&&(k.setInput=ki),ii}function ii(){const k=aa(this),E=k?.current;if(E){const L=k.previous;if(L===Fo)k.previous=E;else for(let W in E)L[W]=E[W];k.current=null,this.ngOnChanges(E)}}function ki(k,E,L,W){const se=aa(k)||function Vr(k,E){return k[Zi]=E}(k,{previous:Fo,current:null}),me=se.current||(se.current={}),Le=se.previous,He=this.declaredInputs[L],ot=Le[He];me[He]=new dr(ot&&ot.currentValue,E,Le===Fo),k[W]=E}wi.ngInherit=!0;const Zi="__ngSimpleChanges__";function aa(k){return k[Zi]||null}function ka(k){for(;Array.isArray(k);)k=k[0];return k}function Ri(k,E){return ka(E[k.index])}function rs(k,E){return k.data[E]}function Oa(k,E){const L=E[k];return Ki(L)?L:L[0]}function Bo(k){return 4==(4&k[2])}function Na(k){return 64==(64&k[2])}function Sa(k,E){return null==E?null:k[E]}function Ko(k){k[18]=0}function Js(k,E){k[5]+=E;let L=k,W=k[3];for(;null!==W&&(1===E&&1===L[5]||-1===E&&0===L[5]);)W[5]+=E,L=W,W=W[3]}const $i={lFrame:we(null),bindingsEnabled:!0};function Li(){return $i.bindingsEnabled}function Yr(){return $i.lFrame.lView}function da(){return $i.lFrame.tView}function Vo(){let k=Al();for(;null!==k&&64===k.type;)k=k.parent;return k}function Al(){return $i.lFrame.currentTNode}function _a(k,E){const L=$i.lFrame;L.currentTNode=k,L.isParent=E}function ol(){return $i.lFrame.isParent}function Qs(){$i.lFrame.isParent=!1}function El(){return $i.lFrame.bindingIndex++}function is(k,E){const L=$i.lFrame;L.bindingIndex=L.bindingRootIndex=k,uu(E)}function uu(k){$i.lFrame.currentDirectiveIndex=k}function P(){return $i.lFrame.currentQueryIndex}function N(k){$i.lFrame.currentQueryIndex=k}function j(k){const E=k[1];return 2===E.type?E.declTNode:1===E.type?k[6]:null}function Z(k,E,L){if(L&ai.SkipSelf){let se=E,me=k;for(;!(se=se.parent,null!==se||L&ai.Host||(se=j(me),null===se||(me=me[15],10&se.type))););if(null===se)return!1;E=se,k=me}const W=$i.lFrame=ge();return W.currentTNode=E,W.lView=k,!0}function ce(k){const E=ge(),L=k[1];$i.lFrame=E,E.currentTNode=L.firstChild,E.lView=k,E.tView=L,E.contextLView=k,E.bindingIndex=L.bindingStartIndex,E.inI18n=!1}function ge(){const k=$i.lFrame,E=null===k?null:k.child;return null===E?we(k):E}function we(k){const E={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:k,child:null,inI18n:!1};return null!==k&&(k.child=E),E}function Se(){const k=$i.lFrame;return $i.lFrame=k.parent,k.currentTNode=null,k.lView=null,k}const Oe=Se;function $e(){const k=Se();k.isParent=!0,k.tView=null,k.selectedIndex=-1,k.contextLView=null,k.elementDepthCount=0,k.currentDirectiveIndex=-1,k.currentNamespace=null,k.bindingRootIndex=-1,k.bindingIndex=-1,k.currentQueryIndex=0}function Et(){return $i.lFrame.selectedIndex}function Ft(k){$i.lFrame.selectedIndex=k}function Dt(){const k=$i.lFrame;return rs(k.tView,k.selectedIndex)}function En(k,E){for(let L=E.directiveStart,W=E.directiveEnd;L<W;L++){const me=k.data[L].type.prototype,{ngAfterContentInit:Le,ngAfterContentChecked:He,ngAfterViewInit:ot,ngAfterViewChecked:wt,ngOnDestroy:$t}=me;Le&&(k.contentHooks||(k.contentHooks=[])).push(-L,Le),He&&((k.contentHooks||(k.contentHooks=[])).push(L,He),(k.contentCheckHooks||(k.contentCheckHooks=[])).push(L,He)),ot&&(k.viewHooks||(k.viewHooks=[])).push(-L,ot),wt&&((k.viewHooks||(k.viewHooks=[])).push(L,wt),(k.viewCheckHooks||(k.viewCheckHooks=[])).push(L,wt)),null!=$t&&(k.destroyHooks||(k.destroyHooks=[])).push(L,$t)}}function qn(k,E,L){gr(k,E,3,L)}function Vn(k,E,L,W){(3&k[2])===L&&gr(k,E,L,W)}function pr(k,E){let L=k[2];(3&L)===E&&(L&=2047,L+=1,k[2]=L)}function gr(k,E,L,W){const me=W??-1,Le=E.length-1;let He=0;for(let ot=void 0!==W?65535&k[18]:0;ot<Le;ot++)if("number"==typeof E[ot+1]){if(He=E[ot],null!=W&&He>=W)break}else E[ot]<0&&(k[18]+=65536),(He<me||-1==me)&&(Er(k,L,E,ot),k[18]=(4294901760&k[18])+ot+2),ot++}function Er(k,E,L,W){const se=L[W]<0,me=L[W+1],He=k[se?-L[W]:L[W]];if(se){if(k[2]>>11<k[18]>>16&&(3&k[2])===E){k[2]+=2048;try{me.call(He)}finally{}}}else try{me.call(He)}finally{}}class Jr{constructor(E,L,W){this.factory=E,this.resolving=!1,this.canSeeViewProviders=L,this.injectImpl=W}}function Ji(k,E,L){let W=0;for(;W<L.length;){const se=L[W];if("number"==typeof se){if(0!==se)break;W++;const me=L[W++],Le=L[W++],He=L[W++];k.setAttribute(E,Le,He,me)}else{const me=se,Le=L[++W];qi(me)?k.setProperty(E,me,Le):k.setAttribute(E,me,Le),W++}}return W}function _i(k){return 3===k||4===k||6===k}function qi(k){return 64===k.charCodeAt(0)}function Vi(k,E){if(null!==E&&0!==E.length)if(null===k||0===k.length)k=E.slice();else{let L=-1;for(let W=0;W<E.length;W++){const se=E[W];"number"==typeof se?L=se:0===L||oa(k,L,se,null,-1===L||2===L?E[++W]:null)}}return k}function oa(k,E,L,W,se){let me=0,Le=k.length;if(-1===E)Le=-1;else for(;me<k.length;){const He=k[me++];if("number"==typeof He){if(He===E){Le=-1;break}if(He>E){Le=me-1;break}}}for(;me<k.length;){const He=k[me];if("number"==typeof He)break;if(He===L){if(null===W)return void(null!==se&&(k[me+1]=se));if(W===k[me+1])return void(k[me+2]=se)}me++,null!==W&&me++,null!==se&&me++}-1!==Le&&(k.splice(Le,0,E),me=Le+1),k.splice(me++,0,L),null!==W&&k.splice(me++,0,W),null!==se&&k.splice(me++,0,se)}function Gi(k){return-1!==k}function ta(k){return 32767&k}function $a(k,E){let L=function Da(k){return k>>16}(k),W=E;for(;L>0;)W=W[15],L--;return W}let bo=!0;function vo(k){const E=bo;return bo=k,E}let ks=0;const no={};function el(k,E){const L=cu(k,E);if(-1!==L)return L;const W=E[1];W.firstCreatePass&&(k.injectorIndex=E.length,Cl(W.data,k),Cl(E,null),Cl(W.blueprint,null));const se=zl(k,E),me=k.injectorIndex;if(Gi(se)){const Le=ta(se),He=$a(se,E),ot=He[1].data;for(let wt=0;wt<8;wt++)E[me+wt]=He[Le+wt]|ot[Le+wt]}return E[me+8]=se,me}function Cl(k,E){k.push(0,0,0,0,0,0,0,0,E)}function cu(k,E){return-1===k.injectorIndex||k.parent&&k.parent.injectorIndex===k.injectorIndex||null===E[k.injectorIndex+8]?-1:k.injectorIndex}function zl(k,E){if(k.parent&&-1!==k.parent.injectorIndex)return k.parent.injectorIndex;let L=0,W=null,se=E;for(;null!==se;){if(W=Of(se),null===W)return-1;if(L++,se=se[15],-1!==W.injectorIndex)return W.injectorIndex|L<<16}return-1}function Nl(k,E,L){!function js(k,E,L){let W;"string"==typeof L?W=L.charCodeAt(0)||0:L.hasOwnProperty(Co)&&(W=L[Co]),null==W&&(W=L[Co]=ks++);const se=255&W;E.data[k+(se>>5)]|=1<<se}(k,E,L)}function Gl(k,E,L){if(L&ai.Optional)return k;Ar()}function Eu(k,E,L,W){if(L&ai.Optional&&void 0===W&&(W=null),0==(L&(ai.Self|ai.Host))){const se=k[9],me=ui(void 0);try{return se?se.get(E,W,L&ai.Optional):mi(E,W,L&ai.Optional)}finally{ui(me)}}return Gl(W,0,L)}function tl(k,E,L,W=ai.Default,se){if(null!==k){if(1024&E[2]){const Le=function Rh(k,E,L,W,se){let me=k,Le=E;for(;null!==me&&null!==Le&&1024&Le[2]&&!(256&Le[2]);){const He=Su(me,Le,L,W|ai.Self,no);if(He!==no)return He;let ot=me.parent;if(!ot){const wt=Le[21];if(wt){const $t=wt.get(L,no,W);if($t!==no)return $t}ot=Of(Le),Le=Le[15]}me=ot}return se}(k,E,L,W,no);if(Le!==no)return Le}const me=Su(k,E,L,W,no);if(me!==no)return me}return Eu(E,L,W,se)}function Su(k,E,L,W,se){const me=function xc(k){if("string"==typeof k)return k.charCodeAt(0)||0;const E=k.hasOwnProperty(Co)?k[Co]:void 0;return"number"==typeof E?E>=0?255&E:Uu:E}(L);if("function"==typeof me){if(!Z(E,k,W))return W&ai.Host?Gl(se,0,W):Eu(E,L,W,se);try{const Le=me(W);if(null!=Le||W&ai.Optional)return Le;Ar()}finally{Oe()}}else if("number"==typeof me){let Le=null,He=cu(k,E),ot=-1,wt=W&ai.Host?E[16][6]:null;for((-1===He||W&ai.SkipSelf)&&(ot=-1===He?zl(k,E):E[He+8],-1!==ot&&Gs(W,!1)?(Le=E[1],He=ta(ot),E=$a(ot,E)):He=-1);-1!==He;){const $t=E[1];if(Pf(me,He,$t.data)){const gn=Eo(He,E,L,Le,W,wt);if(gn!==no)return gn}ot=E[He+8],-1!==ot&&Gs(W,E[1].data[He+8]===wt)&&Pf(me,He,E)?(Le=$t,He=ta(ot),E=$a(ot,E)):He=-1}}return se}function Eo(k,E,L,W,se,me){const Le=E[1],He=Le.data[k+8],$t=ms(He,Le,L,null==W?io(He)&&bo:W!=Le&&0!=(3&He.type),se&ai.Host&&me===He);return null!==$t?as(E,Le,$t,He):no}function ms(k,E,L,W,se){const me=k.providerIndexes,Le=E.data,He=1048575&me,ot=k.directiveStart,$t=me>>20,Fn=se?He+$t:k.directiveEnd;for(let tr=W?He:He+$t;tr<Fn;tr++){const Sr=Le[tr];if(tr<ot&&L===Sr||tr>=ot&&Sr.type===L)return tr}if(se){const tr=Le[ot];if(tr&&xa(tr)&&tr.type===L)return ot}return null}function as(k,E,L,W){let se=k[L];const me=E.data;if(function vi(k){return k instanceof Jr}(se)){const Le=se;Le.resolving&&function jr(k,E){const L=E?`. Dependency path: ${E.join(" > ")} > ${k}`:"";throw new Qn(-200,`Circular dependency in DI detected for ${k}${L}`)}(function hr(k){return"function"==typeof k?k.name||k.toString():"object"==typeof k&&null!=k&&"function"==typeof k.type?k.type.name||k.type.toString():sr(k)}(me[L]));const He=vo(Le.canSeeViewProviders);Le.resolving=!0;const ot=Le.injectImpl?ui(Le.injectImpl):null;Z(k,W,ai.Default);try{se=k[L]=Le.factory(void 0,me,k,W),E.firstCreatePass&&L>=W.directiveStart&&function vn(k,E,L){const{ngOnChanges:W,ngOnInit:se,ngDoCheck:me}=E.type.prototype;if(W){const Le=Gr(E);(L.preOrderHooks||(L.preOrderHooks=[])).push(k,Le),(L.preOrderCheckHooks||(L.preOrderCheckHooks=[])).push(k,Le)}se&&(L.preOrderHooks||(L.preOrderHooks=[])).push(0-k,se),me&&((L.preOrderHooks||(L.preOrderHooks=[])).push(k,me),(L.preOrderCheckHooks||(L.preOrderCheckHooks=[])).push(k,me))}(L,me[L],E)}finally{null!==ot&&ui(ot),vo(He),Le.resolving=!1,Oe()}}return se}function Pf(k,E,L){return!!(L[E+(k>>5)]&1<<k)}function Gs(k,E){return!(k&ai.Self||k&ai.Host&&E)}class Yl{constructor(E,L){this._tNode=E,this._lView=L}get(E,L,W){return tl(this._tNode,this._lView,E,W,L)}}function Uu(){return new Yl(Vo(),Yr())}function Of(k){const E=k[1],L=E.type;return 2===L?E.declTNode:1===L?k[6]:null}const _c="__parameters__";function qu(k,E,L){return Wa(()=>{const W=function Jc(k){return function(...L){if(k){const W=k(...L);for(const se in W)this[se]=W[se]}}}(E);function se(...me){if(this instanceof se)return W.apply(this,me),this;const Le=new se(...me);return He.annotation=Le,He;function He(ot,wt,$t){const gn=ot.hasOwnProperty(_c)?ot[_c]:Object.defineProperty(ot,_c,{value:[]})[_c];for(;gn.length<=$t;)gn.push(null);return(gn[$t]=gn[$t]||[]).push(Le),ot}}return L&&(se.prototype=Object.create(L.prototype)),se.prototype.ngMetadataName=k,se.annotationCls=se,se})}class la{constructor(E,L){this._desc=E,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof L?this.__NG_ELEMENT_ID__=L:void 0!==L&&(this.\u0275prov=Dn({token:this,providedIn:L.providedIn||"root",factory:L.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yl(k,E){void 0===E&&(E=k);for(let L=0;L<k.length;L++){let W=k[L];Array.isArray(W)?(E===k&&(E=k.slice(0,L)),yl(W,E)):E!==k&&E.push(W)}return E}function fu(k,E){k.forEach(L=>Array.isArray(L)?fu(L,E):E(L))}function rp(k,E,L){E>=k.length?k.push(L):k.splice(E,0,L)}function Rf(k,E){return E>=k.length-1?k.pop():k.splice(E,1)[0]}function Wu(k,E){const L=[];for(let W=0;W<k;W++)L.push(E);return L}const Zu={},xl="__NG_DI_FLAG__",zf="ngTempTokenPath",W0=/\n/gm,Hh="__source";let Xl;function Mc(k){const E=Xl;return Xl=k,E}function Z0(k,E=ai.Default){if(void 0===Xl)throw new Qn(-203,!1);return null===Xl?mi(k,void 0,E):Xl.get(k,E&ai.Optional?null:void 0,E)}function ao(k,E=ai.Default){return(function Br(){return Wi}()||Z0)(Bn(k),E)}function Gh(k){const E=[];for(let L=0;L<k.length;L++){const W=Bn(k[L]);if(Array.isArray(W)){if(0===W.length)throw new Qn(900,!1);let se,me=ai.Default;for(let Le=0;Le<W.length;Le++){const He=W[Le],ot=$0(He);"number"==typeof ot?-1===ot?se=He.token:me|=ot:se=He}E.push(ao(se,me))}else E.push(ao(W))}return E}function $l(k,E){return k[xl]=E,k.prototype[xl]=E,k}function $0(k){return k[xl]}const Nf=$l(qu("Optional"),8),Bf=$l(qu("SkipSelf"),4);let Vf;const eo=new la("ENVIRONMENT_INITIALIZER"),Ep=new la("INJECTOR",-1),$f=new la("INJECTOR_DEF_TYPES");class Qu{get(E,L=Zu){if(L===Zu){const W=new Error(`NullInjectorError: No provider for ${pn(E)}!`);throw W.name="NullInjectorError",W}return L}}function yg(...k){return{\u0275providers:Sp(0,k)}}function Sp(k,...E){const L=[],W=new Set;let se;return fu(E,me=>{const Le=me;ud(Le,L,[],W)&&(se||(se=[]),se.push(Le))}),void 0!==se&&Cp(se,L),L}function Cp(k,E){for(let L=0;L<k.length;L++){const{providers:se}=k[L];fu(se,me=>{E.push(me)})}}function ud(k,E,L,W){if(!(k=Bn(k)))return!1;let se=null,me=Or(k);const Le=!me&&pa(k);if(me||Le){if(Le&&!Le.standalone)return!1;se=k}else{const ot=k.ngModule;if(me=Or(ot),!me)return!1;se=ot}const He=W.has(se);if(Le){if(He)return!1;if(W.add(se),Le.dependencies){const ot="function"==typeof Le.dependencies?Le.dependencies():Le.dependencies;for(const wt of ot)ud(wt,E,L,W)}}else{if(!me)return!1;{if(null!=me.imports&&!He){let wt;W.add(se);try{fu(me.imports,$t=>{ud($t,E,L,W)&&(wt||(wt=[]),wt.push($t))})}finally{}void 0!==wt&&Cp(wt,E)}if(!He){const wt=bi(se)||(()=>new se);E.push({provide:se,useFactory:wt,deps:Xi},{provide:$f,useValue:se,multi:!0},{provide:eo,useValue:()=>ao(se),multi:!0})}const ot=me.providers;null==ot||He||fu(ot,$t=>{E.push($t)})}}return se!==k&&void 0!==k.providers}const xg=an({provide:String,useValue:an});function cd(k){return null!==k&&"object"==typeof k&&xg in k}function Cu(k){return"function"==typeof k}const Cc=new la("Set Injector scope."),Kl={},dd={};let Du;function mf(){return void 0===Du&&(Du=new Qu),Du}class Do{}class To extends Do{constructor(E,L,W,se){super(),this.parent=L,this.source=W,this.scopes=se,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zo(E,Le=>this.processProvider(Le)),this.records.set(Ep,ec(void 0,this)),se.has("environment")&&this.records.set(Do,ec(void 0,this));const me=this.records.get(Cc);null!=me&&"string"==typeof me.value&&this.scopes.add(me.value),this.injectorDefTypes=new Set(this.get($f.multi,Xi,ai.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const E of this._ngOnDestroyHooks)E.ngOnDestroy();for(const E of this._onDestroyHooks)E()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(E){this._onDestroyHooks.push(E)}runInContext(E){this.assertNotDestroyed();const L=Mc(this),W=ui(void 0);try{return E()}finally{Mc(L),ui(W)}}get(E,L=Zu,W=ai.Default){this.assertNotDestroyed();const se=Mc(this),me=ui(void 0);try{if(!(W&ai.SkipSelf)){let He=this.records.get(E);if(void 0===He){const ot=function nc(k){return"function"==typeof k||"object"==typeof k&&k instanceof la}(E)&&ar(E);He=ot&&this.injectableDefInScope(ot)?ec(Kf(E),Kl):null,this.records.set(E,He)}if(null!=He)return this.hydrate(E,He)}return(W&ai.Self?mf():this.parent).get(E,L=W&ai.Optional&&L===Zu?null:L)}catch(Le){if("NullInjectorError"===Le.name){if((Le[zf]=Le[zf]||[]).unshift(pn(E)),se)throw Le;return function Yh(k,E,L,W){const se=k[zf];throw E[Hh]&&se.unshift(E[Hh]),k.message=function af(k,E,L,W=null){k=k&&"\n"===k.charAt(0)&&"\u0275"==k.charAt(1)?k.slice(2):k;let se=pn(E);if(Array.isArray(E))se=E.map(pn).join(" -> ");else if("object"==typeof E){let me=[];for(let Le in E)if(E.hasOwnProperty(Le)){let He=E[Le];me.push(Le+":"+("string"==typeof He?JSON.stringify(He):pn(He)))}se=`{${me.join(", ")}}`}return`${L}${W?"("+W+")":""}[${se}]: ${k.replace(W0,"\n  ")}`}("\n"+k.message,se,L,W),k.ngTokenPath=se,k[zf]=null,k}(Le,E,"R3InjectorError",this.source)}throw Le}finally{ui(me),Mc(se)}}resolveInjectorInitializers(){const E=Mc(this),L=ui(void 0);try{const W=this.get(eo.multi,Xi,ai.Self);for(const se of W)se()}finally{Mc(E),ui(L)}}toString(){const E=[],L=this.records;for(const W of L.keys())E.push(pn(W));return`R3Injector[${E.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Qn(205,!1)}processProvider(E){let L=Cu(E=Bn(E))?E:Bn(E&&E.provide);const W=function Ip(k){return cd(k)?ec(void 0,k.useValue):ec(pd(k),Kl)}(E);if(Cu(E)||!0!==E.multi)this.records.get(L);else{let se=this.records.get(L);se||(se=ec(void 0,Kl,!0),se.factory=()=>Gh(se.multi),this.records.set(L,se)),L=E,se.multi.push(E)}this.records.set(L,W)}hydrate(E,L){return L.value===Kl&&(L.value=dd,L.value=L.factory()),"object"==typeof L.value&&L.value&&function tc(k){return null!==k&&"object"==typeof k&&"function"==typeof k.ngOnDestroy}(L.value)&&this._ngOnDestroyHooks.add(L.value),L.value}injectableDefInScope(E){if(!E.providedIn)return!1;const L=Bn(E.providedIn);return"string"==typeof L?"any"===L||this.scopes.has(L):this.injectorDefTypes.has(L)}}function Kf(k){const E=ar(k),L=null!==E?E.factory:bi(k);if(null!==L)return L;if(k instanceof la)throw new Qn(204,!1);if(k instanceof Function)return function Lp(k){const E=k.length;if(E>0)throw Wu(E,"?"),new Qn(204,!1);const L=function xr(k){const E=k&&(k[Rr]||k[$r]);if(E){const L=function Ir(k){if(k.hasOwnProperty("name"))return k.name;const E=(""+k).match(/^function\s*([^\s(]+)/);return null===E?"":E[1]}(k);return console.warn(`DEPRECATED: DI is instantiating a token "${L}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${L}" class.`),E}return null}(k);return null!==L?()=>L.factory(k):()=>new k}(k);throw new Qn(204,!1)}function pd(k,E,L){let W;if(Cu(k)){const se=Bn(k);return bi(se)||Kf(se)}if(cd(k))W=()=>Bn(k.useValue);else if(function hd(k){return!(!k||!k.useFactory)}(k))W=()=>k.useFactory(...Gh(k.deps||[]));else if(function fd(k){return!(!k||!k.useExisting)}(k))W=()=>ao(Bn(k.useExisting));else{const se=Bn(k&&(k.useClass||k.provide));if(!function gd(k){return!!k.deps}(k))return bi(se)||Kf(se);W=()=>new se(...Gh(k.deps))}return W}function ec(k,E,L=!1){return{factory:k,value:E,multi:L?[]:void 0}}function Pp(k){return!!k.\u0275providers}function Zo(k,E){for(const L of k)Array.isArray(L)?Zo(L,E):Pp(L)?Zo(L.\u0275providers,E):E(L)}class Jl{}class Dc{resolveComponentFactory(E){throw function Jf(k){const E=Error(`No component factory found for ${pn(k)}. Did you add it to @NgModule.entryComponents?`);return E.ngComponent=k,E}(E)}}let dl=(()=>{class k{}return k.NULL=new Dc,k})();function Rp(){return rc(Vo(),Yr())}function rc(k,E){return new Lc(Ri(k,E))}let Lc=(()=>{class k{constructor(L){this.nativeElement=L}}return k.__NG_ELEMENT_ID__=Rp,k})();function Ss(k){return k instanceof Lc?k.nativeElement:k}class md{}let A=(()=>{class k{}return k.__NG_ELEMENT_ID__=()=>function F(){const k=Yr(),L=Oa(Vo().index,k);return(Ki(L)?L:k)[11]}(),k})(),$=(()=>{class k{}return k.\u0275prov=Dn({token:k,providedIn:"root",factory:()=>null}),k})();class ue{constructor(E){this.full=E,this.major=E.split(".")[0],this.minor=E.split(".")[1],this.patch=E.split(".").slice(2).join(".")}}const xe=new ue("14.1.3"),Me={};function fi(k){return k.ngOriginalError}class Ti{constructor(){this._console=console}handleError(E){const L=this._findOriginalError(E);this._console.error("ERROR",E),L&&this._console.error("ORIGINAL ERROR",L)}_findOriginalError(E){let L=E&&fi(E);for(;L&&fi(L);)L=fi(L);return L||null}}const Ui=new Map;let Ra=0;const bs="__ngContext__";function fo(k,E){Ki(E)?(k[bs]=E[20],function uo(k){Ui.set(k[20],k)}(E)):k[bs]=E}function _s(k){const E=k[bs];return"number"==typeof E?function Mo(k){return Ui.get(k)||null}(E):E||null}function Xo(k){const E=_s(k);return E?Ki(E)?E:E.lView:null}const Ka=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(sa))();var Ns=(()=>((Ns=Ns||{})[Ns.Important=1]="Important",Ns[Ns.DashCase=2]="DashCase",Ns))();function mu(k,E){return undefined(k,E)}function Lu(k){const E=k[3];return ra(E)?E[3]:E}function Pc(k){return vu(k[13])}function Pu(k){return vu(k[4])}function vu(k){for(;null!==k&&!ra(k);)k=k[4];return k}function yu(k,E,L,W,se){if(null!=W){let me,Le=!1;ra(W)?me=W:Ki(W)&&(Le=!0,W=W[0]);const He=ka(W);0===k&&null!==L?null==se?Np(E,L,He):Ou(E,L,He,se||null,!0):1===k&&null!==L?Ou(E,L,He,se||null,!0):2===k?function Vc(k,E,L){const W=sh(k,E);W&&function Bp(k,E,L,W){k.removeChild(E,L,W)}(k,W,E,L)}(E,He,Le):3===k&&E.destroyNode(He),null!=me&&function Af(k,E,L,W,se){const me=L[7];me!==ka(L)&&yu(E,k,W,me,se);for(let He=10;He<L.length;He++){const ot=L[He];Ru(ot[1],ot,k,E,W,me)}}(E,k,me,L,se)}}function Rc(k,E,L){return k.createElement(E,L)}function oc(k,E){const L=k[9],W=L.indexOf(E),se=E[3];512&E[2]&&(E[2]&=-513,Js(se,-1)),L.splice(W,1)}function Nc(k,E){if(k.length<=10)return;const L=10+E,W=k[L];if(W){const se=W[17];null!==se&&se!==k&&oc(se,W),E>0&&(k[L-1][4]=W[4]);const me=Rf(k,10+E);!function wf(k,E){Ru(k,E,E[11],2,null,null),E[0]=null,E[6]=null}(W[1],W);const Le=me[19];null!==Le&&Le.detachView(me[1]),W[3]=null,W[4]=null,W[2]&=-65}return W}function sc(k,E){if(!(128&E[2])){const L=E[11];L.destroyNode&&Ru(k,E,L,3,null,null),function rh(k){let E=k[13];if(!E)return lc(k[1],k);for(;E;){let L=null;if(Ki(E))L=E[13];else{const W=E[10];W&&(L=W)}if(!L){for(;E&&!E[4]&&E!==k;)Ki(E)&&lc(E[1],E),E=E[3];null===E&&(E=k),Ki(E)&&lc(E[1],E),L=E&&E[4]}E=L}}(E)}}function lc(k,E){if(!(128&E[2])){E[2]&=-65,E[2]|=128,function zp(k,E){let L;if(null!=k&&null!=(L=k.destroyHooks))for(let W=0;W<L.length;W+=2){const se=E[L[W]];if(!(se instanceof Jr)){const me=L[W+1];if(Array.isArray(me))for(let Le=0;Le<me.length;Le+=2){const He=se[me[Le]],ot=me[Le+1];try{ot.call(He)}finally{}}else try{me.call(se)}finally{}}}}(k,E),function Bc(k,E){const L=k.cleanup,W=E[7];let se=-1;if(null!==L)for(let me=0;me<L.length-1;me+=2)if("string"==typeof L[me]){const Le=L[me+1],He="function"==typeof Le?Le(E):ka(E[Le]),ot=W[se=L[me+2]],wt=L[me+3];"boolean"==typeof wt?He.removeEventListener(L[me],ot,wt):wt>=0?W[se=wt]():W[se=-wt].unsubscribe(),me+=2}else{const Le=W[se=L[me+1]];L[me].call(Le)}if(null!==W){for(let me=se+1;me<W.length;me++)(0,W[me])();E[7]=null}}(k,E),1===E[1].type&&E[11].destroy();const L=E[17];if(null!==L&&ra(E[3])){L!==E[3]&&oc(L,E);const W=E[19];null!==W&&W.detachView(k)}!function co(k){Ui.delete(k[20])}(E)}}function ih(k,E,L){return function ah(k,E,L){let W=E;for(;null!==W&&40&W.type;)W=(E=W).parent;if(null===W)return L[0];if(2&W.flags){const se=k.data[W.directiveStart].encapsulation;if(se===ua.None||se===ua.Emulated)return null}return Ri(W,L)}(k,E.parent,L)}function Ou(k,E,L,W,se){k.insertBefore(E,L,W,se)}function Np(k,E,L){k.appendChild(E,L)}function oh(k,E,L,W,se){null!==W?Ou(k,E,L,W,se):Np(k,E,L)}function sh(k,E){return k.parentNode(E)}function Go(k,E,L){return Vp(k,E,L)}let Vp=function Il(k,E,L){return 40&k.type?Ri(k,L):null};function kf(k,E,L,W){const se=ih(k,W,E),me=E[11],He=Go(W.parent||E[6],W,E);if(null!=se)if(Array.isArray(L))for(let ot=0;ot<L.length;ot++)oh(me,se,L[ot],He,!1);else oh(me,se,L,He,!1)}function uc(k,E){if(null!==E){const L=E.type;if(3&L)return Ri(E,k);if(4&L)return jc(-1,k[E.index]);if(8&L){const W=E.child;if(null!==W)return uc(k,W);{const se=k[E.index];return ra(se)?jc(-1,se):ka(se)}}if(32&L)return mu(E,k)()||ka(k[E.index]);{const W=jl(k,E);return null!==W?Array.isArray(W)?W[0]:uc(Lu(k[16]),W):uc(k,E.next)}}return null}function jl(k,E){return null!==E?k[16][6].projection[E.projection]:null}function jc(k,E){const L=10+k+1;if(L<E.length){const W=E[L],se=W[1].firstChild;if(null!==se)return uc(W,se)}return E[7]}function Uc(k,E,L,W,se,me,Le){for(;null!=L;){const He=W[L.index],ot=L.type;if(Le&&0===E&&(He&&fo(ka(He),W),L.flags|=4),64!=(64&L.flags))if(8&ot)Uc(k,E,L.child,W,se,me,!1),yu(E,k,se,He,me);else if(32&ot){const wt=mu(L,W);let $t;for(;$t=wt();)yu(E,k,se,$t,me);yu(E,k,se,He,me)}else 16&ot?yd(k,E,W,L,se,me):yu(E,k,se,He,me);L=Le?L.projectionNext:L.next}}function Ru(k,E,L,W,se,me){Uc(L,W,k.firstChild,E,se,me,!1)}function yd(k,E,L,W,se,me){const Le=L[16],ot=Le[6].projection[W.projection];if(Array.isArray(ot))for(let wt=0;wt<ot.length;wt++)yu(E,k,se,ot[wt],me);else Uc(k,E,ot,Le[3],se,me,!0)}function xd(k,E,L){k.setAttribute(E,"style",L)}function uh(k,E,L){""===L?k.removeAttribute(E,"class"):k.setAttribute(E,"class",L)}function bd(k,E,L){let W=k.length;for(;;){const se=k.indexOf(E,L);if(-1===se)return se;if(0===se||k.charCodeAt(se-1)<=32){const me=E.length;if(se+me===W||k.charCodeAt(se+me)<=32)return se}L=se+1}}const cl="ng-template";function ch(k,E,L){let W=0;for(;W<k.length;){let se=k[W++];if(L&&"class"===se){if(se=k[W],-1!==bd(se.toLowerCase(),E,0))return!0}else if(1===se){for(;W<k.length&&"string"==typeof(se=k[W++]);)if(se.toLowerCase()===E)return!0;return!1}}return!1}function _d(k){return 4===k.type&&k.value!==cl}function nu(k,E,L){return E===(4!==k.type||L?k.value:cl)}function _g(k,E,L){let W=4;const se=k.attrs||[],me=function qc(k){for(let E=0;E<k.length;E++)if(_i(k[E]))return E;return k.length}(se);let Le=!1;for(let He=0;He<E.length;He++){const ot=E[He];if("number"!=typeof ot){if(!Le)if(4&W){if(W=2|1&W,""!==ot&&!nu(k,ot,L)||""===ot&&1===E.length){if(wl(W))return!1;Le=!0}}else{const wt=8&W?ot:E[++He];if(8&W&&null!==k.attrs){if(!ch(k.attrs,wt,L)){if(wl(W))return!1;Le=!0}continue}const gn=cc(8&W?"class":ot,se,_d(k),L);if(-1===gn){if(wl(W))return!1;Le=!0;continue}if(""!==wt){let Fn;Fn=gn>me?"":se[gn+1].toLowerCase();const tr=8&W?Fn:null;if(tr&&-1!==bd(tr,wt,0)||2&W&&wt!==Fn){if(wl(W))return!1;Le=!0}}}}else{if(!Le&&!wl(W)&&!wl(ot))return!1;if(Le&&wl(ot))continue;Le=!1,W=ot|1&W}}return wl(W)||Le}function wl(k){return 0==(1&k)}function cc(k,E,L,W){if(null===E)return-1;let se=0;if(W||!L){let me=!1;for(;se<E.length;){const Le=E[se];if(Le===k)return se;if(3===Le||6===Le)me=!0;else{if(1===Le||2===Le){let He=E[++se];for(;"string"==typeof He;)He=E[++se];continue}if(4===Le)break;if(0===Le){se+=4;continue}}se+=me?1:2}return-1}return function Gc(k,E){let L=k.indexOf(4);if(L>-1)for(L++;L<k.length;){const W=k[L];if("number"==typeof W)return-1;if(W===E)return L;L++}return-1}(E,k)}function fc(k,E,L=!1){for(let W=0;W<E.length;W++)if(_g(k,E[W],L))return!0;return!1}function Hp(k,E){e:for(let L=0;L<E.length;L++){const W=E[L];if(k.length===W.length){for(let se=0;se<k.length;se++)if(k[se]!==W[se])continue e;return!0}}return!1}function wd(k,E){return k?":not("+E.trim()+")":E}function qp(k){let E=k[0],L=1,W=2,se="",me=!1;for(;L<k.length;){let Le=k[L];if("string"==typeof Le)if(2&W){const He=k[++L];se+="["+Le+(He.length>0?'="'+He+'"':"")+"]"}else 8&W?se+="."+Le:4&W&&(se+=" "+Le);else""!==se&&!wl(Le)&&(E+=wd(me,se),se=""),W=Le,me=me||!wl(W);L++}return""!==se&&(E+=wd(me,se)),E}const wa={};function Md(k,E,L,W){if(!W)if(3==(3&E[2])){const me=k.preOrderCheckHooks;null!==me&&qn(E,me,L)}else{const me=k.preOrderHooks;null!==me&&Vn(E,me,0,L)}Ft(L)}function Yc(k,E=null,L=null,W){const se=Cd(k,E,L,W);return se.resolveInjectorInitializers(),se}function Cd(k,E=null,L=null,W,se=new Set){const me=[L||Xi,yg(k)];return W=W||("object"==typeof k?void 0:pn(k)),new To(me,E||mf(),W||null,se)}let Pl=(()=>{class k{static create(L,W){if(Array.isArray(L))return Yc({name:""},W,L,"");{const se=L.name??"";return Yc({name:se},L.parent,L.providers,se)}}}return k.THROW_IF_NOT_FOUND=Zu,k.NULL=new Qu,k.\u0275prov=Dn({token:k,providedIn:"any",factory:()=>ao(Ep)}),k.__NG_ELEMENT_ID__=-1,k})();function Ga(k,E=ai.Default){const L=Yr();return null===L?ao(k,E):tl(Vo(),L,Bn(k),E)}function Hv(k,E){const L=k.contentQueries;if(null!==L)for(let W=0;W<L.length;W+=2){const se=L[W],me=L[W+1];if(-1!==me){const Le=k.data[me];N(se),Le.contentQueries(2,E[me],me)}}}function e0(k,E,L,W,se,me,Le,He,ot,wt,$t){const gn=E.blueprint.slice();return gn[0]=se,gn[2]=76|W,(null!==$t||k&&1024&k[2])&&(gn[2]|=1024),Ko(gn),gn[3]=gn[15]=k,gn[8]=L,gn[10]=Le||k&&k[10],gn[11]=He||k&&k[11],gn[12]=ot||k&&k[12]||null,gn[9]=wt||k&&k[9]||null,gn[6]=me,gn[20]=function yo(){return Ra++}(),gn[21]=$t,gn[16]=2==E.type?k[16]:gn,gn}function dh(k,E,L,W,se){let me=k.data[E];if(null===me)me=function Bg(k,E,L,W,se){const me=Al(),Le=ol(),ot=k.data[E]=function T_(k,E,L,W,se,me){return{type:L,index:W,insertBeforeIndex:null,injectorIndex:E?E.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:se,attrs:me,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:E,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,Le?me:me&&me.parent,L,E,W,se);return null===k.firstChild&&(k.firstChild=ot),null!==me&&(Le?null==me.child&&null!==ot.parent&&(me.child=ot):null===me.next&&(me.next=ot)),ot}(k,E,L,W,se),function Au(){return $i.lFrame.inI18n}()&&(me.flags|=64);else if(64&me.type){me.type=L,me.value=W,me.attrs=se;const Le=function Ca(){const k=$i.lFrame,E=k.currentTNode;return k.isParent?E:E.parent}();me.injectorIndex=null===Le?-1:Le.injectorIndex}return _a(me,!0),me}function ph(k,E,L,W){if(0===L)return-1;const se=E.length;for(let me=0;me<L;me++)E.push(W),k.blueprint.push(W),k.data.push(null);return se}function t0(k,E,L){ce(E);try{const W=k.viewQuery;null!==W&&Zg(1,W,L);const se=k.template;null!==se&&qv(k,E,se,1,L),k.firstCreatePass&&(k.firstCreatePass=!1),k.staticContentQueries&&Hv(k,E),k.staticViewQueries&&Zg(2,k.viewQuery,L);const me=k.components;null!==me&&function x_(k,E){for(let L=0;L<E.length;L++)B_(k,E[L])}(E,me)}catch(W){throw k.firstCreatePass&&(k.incompleteFirstPass=!0,k.firstCreatePass=!1),W}finally{E[2]&=-5,$e()}}function Ld(k,E,L,W){const se=E[2];if(128!=(128&se)){ce(E);try{Ko(E),function lu(k){return $i.lFrame.bindingIndex=k}(k.bindingStartIndex),null!==L&&qv(k,E,L,2,W);const Le=3==(3&se);if(Le){const wt=k.preOrderCheckHooks;null!==wt&&qn(E,wt,null)}else{const wt=k.preOrderHooks;null!==wt&&Vn(E,wt,0,null),pr(E,0)}if(function z_(k){for(let E=Pc(k);null!==E;E=Pu(E)){if(!E[2])continue;const L=E[9];for(let W=0;W<L.length;W++){const se=L[W],me=se[3];0==(512&se[2])&&Js(me,1),se[2]|=512}}}(E),function F_(k){for(let E=Pc(k);null!==E;E=Pu(E))for(let L=10;L<E.length;L++){const W=E[L],se=W[1];Na(W)&&Ld(se,W,se.template,W[8])}}(E),null!==k.contentQueries&&Hv(k,E),Le){const wt=k.contentCheckHooks;null!==wt&&qn(E,wt)}else{const wt=k.contentHooks;null!==wt&&Vn(E,wt,1),pr(E,1)}!function v_(k,E){const L=k.hostBindingOpCodes;if(null!==L)try{for(let W=0;W<L.length;W++){const se=L[W];if(se<0)Ft(~se);else{const me=se,Le=L[++W],He=L[++W];is(Le,me),He(2,E[me])}}}finally{Ft(-1)}}(k,E);const He=k.components;null!==He&&function y_(k,E){for(let L=0;L<E.length;L++)N_(k,E[L])}(E,He);const ot=k.viewQuery;if(null!==ot&&Zg(2,ot,W),Le){const wt=k.viewCheckHooks;null!==wt&&qn(E,wt)}else{const wt=k.viewHooks;null!==wt&&Vn(E,wt,2),pr(E,2)}!0===k.firstUpdatePass&&(k.firstUpdatePass=!1),E[2]&=-41,512&E[2]&&(E[2]&=-513,Js(E[3],-1))}finally{$e()}}}function b_(k,E,L,W){const se=E[10],Le=Bo(E);try{!Le&&se.begin&&se.begin(),Le&&t0(k,E,W),Ld(k,E,L,W)}finally{!Le&&se.end&&se.end()}}function qv(k,E,L,W,se){const me=Et(),Le=2&W;try{Ft(-1),Le&&E.length>22&&Md(k,E,22,!1),L(W,se)}finally{Ft(me)}}function Yv(k){const E=k.tView;return null===E||E.incompleteFirstPass?k.tView=Ug(1,null,k.template,k.decls,k.vars,k.directiveDefs,k.pipeDefs,k.viewQuery,k.schemas,k.consts):E}function Ug(k,E,L,W,se,me,Le,He,ot,wt){const $t=22+W,gn=$t+se,Fn=function __(k,E){const L=[];for(let W=0;W<E;W++)L.push(W<k?null:wa);return L}($t,gn),tr="function"==typeof wt?wt():wt;return Fn[1]={type:k,blueprint:Fn,template:L,queries:null,viewQuery:He,declTNode:E,data:Fn.slice().fill(null,$t),bindingStartIndex:$t,expandoStartIndex:gn,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof me?me():me,pipeRegistry:"function"==typeof Le?Le():Le,firstChild:null,schemas:ot,consts:tr,incompleteFirstPass:!1}}function Wv(k,E,L,W){const se=function a1(k){return k[7]||(k[7]=[])}(E);null===L?se.push(W):(se.push(L),k.firstCreatePass&&function o1(k){return k.cleanup||(k.cleanup=[])}(k).push(W,se.length-1))}function Zv(k,E,L){for(let W in k)if(k.hasOwnProperty(W)){const se=k[W];(L=null===L?{}:L).hasOwnProperty(W)?L[W].push(E,se):L[W]=[E,se]}return L}function Xv(k,E){const W=E.directiveEnd,se=k.data,me=E.attrs,Le=[];let He=null,ot=null;for(let wt=E.directiveStart;wt<W;wt++){const $t=se[wt],gn=$t.inputs,Fn=null===me||_d(E)?null:R_(gn,me);Le.push(Fn),He=Zv(gn,wt,He),ot=Zv($t.outputs,wt,ot)}null!==He&&(He.hasOwnProperty("class")&&(E.flags|=16),He.hasOwnProperty("style")&&(E.flags|=32)),E.initialInputs=Le,E.inputs=He,E.outputs=ot}function $v(k,E){const L=Oa(E,k);16&L[2]||(L[2]|=32)}function Kv(k,E,L,W,se,me){const Le=me.hostBindings;if(Le){let He=k.hostBindingOpCodes;null===He&&(He=k.hostBindingOpCodes=[]);const ot=~E.index;(function E_(k){let E=k.length;for(;E>0;){const L=k[--E];if("number"==typeof L&&L<0)return L}return 0})(He)!=ot&&He.push(ot),He.push(W,se,Le)}}function Jv(k,E){null!==k.hostBindings&&k.hostBindings(1,E)}function Qv(k,E){E.flags|=2,(k.components||(k.components=[])).push(E.index)}function I_(k,E,L){if(L){if(E.exportAs)for(let W=0;W<E.exportAs.length;W++)L[E.exportAs[W]]=k;xa(E)&&(L[""]=k)}}function e1(k,E,L){k.flags|=1,k.directiveStart=E,k.directiveEnd=E+L,k.providerIndexes=E}function t1(k,E,L,W,se){k.data[W]=se;const me=se.factory||(se.factory=bi(se.type)),Le=new Jr(me,xa(se),Ga);k.blueprint[W]=Le,L[W]=Le,Kv(k,E,0,W,ph(k,L,se.hostVars,wa),se)}function P_(k,E,L){const W=Ri(E,k),se=Yv(L),me=k[10],Le=n0(k,e0(k,se,null,L.onPush?32:16,W,E,me,me.createRenderer(W,L),null,null,null));k[E.index]=Le}function Fu(k,E,L,W,se,me){const Le=Ri(k,E);!function qg(k,E,L,W,se,me,Le){if(null==me)k.removeAttribute(E,se,L);else{const He=null==Le?sr(me):Le(me,W||"",se);k.setAttribute(E,se,He,L)}}(E[11],Le,me,k.value,L,W,se)}function O_(k,E,L,W,se,me){const Le=me[E];if(null!==Le){const He=W.setInput;for(let ot=0;ot<Le.length;){const wt=Le[ot++],$t=Le[ot++],gn=Le[ot++];null!==He?W.setInput(L,gn,wt,$t):L[$t]=gn}}}function R_(k,E){let L=null,W=0;for(;W<E.length;){const se=E[W];if(0!==se)if(5!==se){if("number"==typeof se)break;k.hasOwnProperty(se)&&(null===L&&(L=[]),L.push(se,k[se],E[W+1])),W+=2}else W+=2;else W+=4}return L}function N_(k,E){const L=Oa(E,k);if(Na(L)){const W=L[1];48&L[2]?Ld(W,L,W.template,L[8]):L[5]>0&&Gg(L)}}function Gg(k){for(let W=Pc(k);null!==W;W=Pu(W))for(let se=10;se<W.length;se++){const me=W[se];if(Na(me))if(512&me[2]){const Le=me[1];Ld(Le,me,Le.template,me[8])}else me[5]>0&&Gg(me)}const L=k[1].components;if(null!==L)for(let W=0;W<L.length;W++){const se=Oa(L[W],k);Na(se)&&se[5]>0&&Gg(se)}}function B_(k,E){const L=Oa(E,k),W=L[1];(function j_(k,E){for(let L=E.length;L<k.blueprint.length;L++)E.push(k.blueprint[L])})(W,L),t0(W,L,L[8])}function n0(k,E){return k[13]?k[14][4]=E:k[13]=E,k[14]=E,E}function Wg(k,E,L){const W=E[10];W.begin&&W.begin();try{Ld(k,E,k.template,L)}catch(se){throw function l1(k,E){const L=k[9],W=L?L.get(Ti,null):null;W&&W.handleError(E)}(E,se),se}finally{W.end&&W.end()}}function i1(k){!function r1(k){for(let E=0;E<k.components.length;E++){const L=k.components[E],W=Xo(L);if(null!==W){const se=W[1];b_(se,W,se.template,L)}}}(k[8])}function Zg(k,E,L){N(0),E(k,L)}const U_=(()=>Promise.resolve(null))();function Xg(k,E,L,W,se){for(let me=0;me<L.length;){const Le=L[me++],He=L[me++],ot=E[Le],wt=k.data[Le];null!==wt.setInput?wt.setInput(ot,se,W,He):ot[He]=se}}function r0(k,E,L){let W=L?k.styles:null,se=L?k.classes:null,me=0;if(null!==E)for(let Le=0;Le<E.length;Le++){const He=E[Le];"number"==typeof He?me=He:1==me?se=Sn(se,He):2==me&&(W=Sn(W,He+": "+E[++Le]+";"))}L?k.styles=W:k.stylesWithoutHost=W,L?k.classes=se:k.classesWithoutHost=se}function a0(k,E,L,W,se=!1){for(;null!==L;){const me=E[L.index];if(null!==me&&W.push(ka(me)),ra(me))for(let He=10;He<me.length;He++){const ot=me[He],wt=ot[1].firstChild;null!==wt&&a0(ot[1],ot,wt,W)}const Le=L.type;if(8&Le)a0(k,E,L.child,W);else if(32&Le){const He=mu(L,E);let ot;for(;ot=He();)W.push(ot)}else if(16&Le){const He=jl(E,L);if(Array.isArray(He))W.push(...He);else{const ot=Lu(E[16]);a0(ot[1],ot,He,W,!0)}}L=se?L.projectionNext:L.next}return W}class Id{constructor(E,L){this._lView=E,this._cdRefInjectingView=L,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const E=this._lView,L=E[1];return a0(L,E,L.firstChild,[])}get context(){return this._lView[8]}set context(E){this._lView[8]=E}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const E=this._lView[3];if(ra(E)){const L=E[8],W=L?L.indexOf(this):-1;W>-1&&(Nc(E,W),Rf(L,W))}this._attachedToViewContainer=!1}sc(this._lView[1],this._lView)}onDestroy(E){Wv(this._lView[1],this._lView,null,E)}markForCheck(){!function Yg(k){for(;k;){k[2]|=32;const E=Lu(k);if(xo(k)&&!E)return k;k=E}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Wg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Qn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Tf(k,E){Ru(k,E,E[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(E){if(this._attachedToViewContainer)throw new Qn(902,!1);this._appRef=E}}class H_ extends Id{constructor(E){super(E),this._view=E}detectChanges(){i1(this._view)}checkNoChanges(){}get context(){return null}}class $g extends dl{constructor(E){super(),this.ngModule=E}resolveComponentFactory(E){const L=pa(E);return new Pd(L,this.ngModule)}}function u1(k){const E=[];for(let L in k)k.hasOwnProperty(L)&&E.push({propName:k[L],templateName:L});return E}class G_{constructor(E,L){this.injector=E,this.parentInjector=L}get(E,L,W){const se=this.injector.get(E,Me,W);return se!==Me||L===Me?se:this.parentInjector.get(E,L,W)}}class Pd extends Jl{constructor(E,L){super(),this.componentDef=E,this.ngModule=L,this.componentType=E.type,this.selector=function Gp(k){return k.map(qp).join(",")}(E.selectors),this.ngContentSelectors=E.ngContentSelectors?E.ngContentSelectors:[],this.isBoundToModule=!!L}get inputs(){return u1(this.componentDef.inputs)}get outputs(){return u1(this.componentDef.outputs)}create(E,L,W,se){let me=(se=se||this.ngModule)instanceof Do?se:se?.injector;me&&null!==this.componentDef.getStandaloneInjector&&(me=this.componentDef.getStandaloneInjector(me)||me);const Le=me?new G_(E,me):E,He=Le.get(md,null);if(null===He)throw new Qn(407,!1);const ot=Le.get($,null),wt=He.createRenderer(null,this.componentDef),$t=this.componentDef.selectors[0][0]||"div",gn=W?function w_(k,E,L){return k.selectRootElement(E,L===ua.ShadowDom)}(wt,W,this.componentDef.encapsulation):Rc(He.createRenderer(null,this.componentDef),$t,function q_(k){const E=k.toLowerCase();return"svg"===E?"svg":"math"===E?"math":null}($t)),Fn=this.componentDef.onPush?288:272,tr=function $_(k,E){return{components:[],scheduler:k||Ka,clean:U_,playerHandler:E||null,flags:0}}(),Sr=Ug(0,null,null,1,0,null,null,null,null,null),Wr=e0(null,Sr,tr,Fn,null,null,He,wt,ot,Le,null);let pi,Mi;ce(Wr);try{const Yi=function Z_(k,E,L,W,se,me){const Le=L[1];L[22]=k;const ot=dh(Le,22,2,"#host",null),wt=ot.mergedAttrs=E.hostAttrs;null!==wt&&(r0(ot,wt,!0),null!==k&&(Ji(se,k,wt),null!==ot.classes&&uh(se,k,ot.classes),null!==ot.styles&&xd(se,k,ot.styles)));const $t=W.createRenderer(k,E),gn=e0(L,Yv(E),null,E.onPush?32:16,L[22],ot,W,$t,me||null,null,null);return Le.firstCreatePass&&(Nl(el(ot,L),Le,E.type),Qv(Le,ot),e1(ot,L.length,1)),n0(L,gn),L[22]=gn}(gn,this.componentDef,Wr,He,wt);if(gn)if(W)Ji(wt,gn,["ng-version",xe.full]);else{const{attrs:ti,classes:Qi}=function Td(k){const E=[],L=[];let W=1,se=2;for(;W<k.length;){let me=k[W];if("string"==typeof me)2===se?""!==me&&E.push(me,k[++W]):8===se&&L.push(me);else{if(!wl(se))break;se=me}W++}return{attrs:E,classes:L}}(this.componentDef.selectors[0]);ti&&Ji(wt,gn,ti),Qi&&Qi.length>0&&uh(wt,gn,Qi.join(" "))}if(Mi=rs(Sr,22),void 0!==L){const ti=Mi.projection=[];for(let Qi=0;Qi<this.ngContentSelectors.length;Qi++){const Ja=L[Qi];ti.push(null!=Ja?Array.from(Ja):null)}}pi=function X_(k,E,L,W,se){const me=L[1],Le=function A_(k,E,L){const W=Vo();k.firstCreatePass&&(L.providersResolver&&L.providersResolver(L),t1(k,W,E,ph(k,E,1,null),L),Xv(k,W));const se=as(E,k,W.directiveStart,W);fo(se,E);const me=Ri(W,E);return me&&fo(me,E),se}(me,L,E);if(W.components.push(Le),k[8]=Le,null!==se)for(const ot of se)ot(Le,E);if(E.contentQueries){const ot=Vo();E.contentQueries(1,Le,ot.directiveStart)}const He=Vo();return!me.firstCreatePass||null===E.hostBindings&&null===E.hostAttrs||(Ft(He.index),Kv(L[1],He,0,He.directiveStart,He.directiveEnd,E),Jv(E,Le)),Le}(Yi,this.componentDef,Wr,tr,[K_]),t0(Sr,Wr,null)}finally{$e()}return new W_(this.componentType,pi,rc(Mi,Wr),Wr,Mi)}}class W_ extends class vf{}{constructor(E,L,W,se,me){super(),this.location=W,this._rootLView=se,this._tNode=me,this.instance=L,this.hostView=this.changeDetectorRef=new H_(se),this.componentType=E}setInput(E,L){const W=this._tNode.inputs;let se;if(null!==W&&(se=W[E])){const me=this._rootLView;Xg(me[1],me,se,E,L),$v(me,this._tNode.index)}}get injector(){return new Yl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(E){this.hostView.onDestroy(E)}}function K_(){const k=Vo();En(Yr()[1],k)}let o0=null;function Sf(){if(!o0){const k=sa.Symbol;if(k&&k.iterator)o0=k.iterator;else{const E=Object.getOwnPropertyNames(Map.prototype);for(let L=0;L<E.length;++L){const W=E[L];"entries"!==W&&"size"!==W&&Map.prototype[W]===Map.prototype.entries&&(o0=W)}}}return o0}function Od(k){return!!Jg(k)&&(Array.isArray(k)||!(k instanceof Map)&&Sf()in k)}function Jg(k){return null!==k&&("function"==typeof k||"object"==typeof k)}function pl(k,E,L){return!Object.is(k[E],L)&&(k[E]=L,!0)}function Qg(k,E,L,W){const se=Yr();return pl(se,El(),E)&&(da(),Fu(Dt(),se,k,E,L,W)),Qg}function l0(k,E,L){const W=Yr();return pl(W,El(),E)&&function Vl(k,E,L,W,se,me,Le,He){const ot=Ri(E,L);let $t,wt=E.inputs;!He&&null!=wt&&($t=wt[W])?(Xg(k,L,$t,W,se),io(E)&&$v(L,E.index)):3&E.type&&(W=function M_(k){return"class"===k?"className":"for"===k?"htmlFor":"formaction"===k?"formAction":"innerHtml"===k?"innerHTML":"readonly"===k?"readOnly":"tabindex"===k?"tabIndex":k}(W),se=null!=Le?Le(se,E.value||"",W):se,me.setProperty(ot,W,se))}(da(),Dt(),W,k,E,W[11],L,!1),l0}function em(k,E,L,W,se){const Le=se?"class":"style";Xg(k,L,E.inputs[Le],Le,W)}function Fd(k,E,L,W){const se=Yr(),me=da(),Le=22+k,He=se[11],ot=se[Le]=Rc(He,E,function Zt(){return $i.lFrame.currentNamespace}()),wt=me.firstCreatePass?function p2(k,E,L,W,se,me,Le){const He=E.consts,wt=dh(E,k,2,se,Sa(He,me));return function Hg(k,E,L,W){let se=!1;if(Li()){const me=function D_(k,E,L){const W=k.directiveRegistry;let se=null;if(W)for(let me=0;me<W.length;me++){const Le=W[me];fc(L,Le.selectors,!1)&&(se||(se=[]),Nl(el(L,E),k,Le.type),xa(Le)?(Qv(k,L),se.unshift(Le)):se.push(Le))}return se}(k,E,L),Le=null===W?null:{"":-1};if(null!==me){se=!0,e1(L,k.data.length,me.length);for(let $t=0;$t<me.length;$t++){const gn=me[$t];gn.providersResolver&&gn.providersResolver(gn)}let He=!1,ot=!1,wt=ph(k,E,me.length,null);for(let $t=0;$t<me.length;$t++){const gn=me[$t];L.mergedAttrs=Vi(L.mergedAttrs,gn.hostAttrs),t1(k,L,E,wt,gn),I_(wt,gn,Le),null!==gn.contentQueries&&(L.flags|=8),(null!==gn.hostBindings||null!==gn.hostAttrs||0!==gn.hostVars)&&(L.flags|=128);const Fn=gn.type.prototype;!He&&(Fn.ngOnChanges||Fn.ngOnInit||Fn.ngDoCheck)&&((k.preOrderHooks||(k.preOrderHooks=[])).push(L.index),He=!0),!ot&&(Fn.ngOnChanges||Fn.ngDoCheck)&&((k.preOrderCheckHooks||(k.preOrderCheckHooks=[])).push(L.index),ot=!0),wt++}Xv(k,L)}Le&&function L_(k,E,L){if(E){const W=k.localNames=[];for(let se=0;se<E.length;se+=2){const me=L[E[se+1]];if(null==me)throw new Qn(-301,!1);W.push(E[se],me)}}}(L,W,Le)}return L.mergedAttrs=Vi(L.mergedAttrs,L.attrs),se}(E,L,wt,Sa(He,Le)),null!==wt.attrs&&r0(wt,wt.attrs,!1),null!==wt.mergedAttrs&&r0(wt,wt.mergedAttrs,!0),null!==E.queries&&E.queries.elementStart(E,wt),wt}(Le,me,se,0,E,L,W):me.data[Le];_a(wt,!0);const $t=wt.mergedAttrs;null!==$t&&Ji(He,ot,$t);const gn=wt.classes;null!==gn&&uh(He,ot,gn);const Fn=wt.styles;return null!==Fn&&xd(He,ot,Fn),64!=(64&wt.flags)&&kf(me,se,ot,wt),0===function Ul(){return $i.lFrame.elementDepthCount}()&&fo(ot,se),function Io(){$i.lFrame.elementDepthCount++}(),function Ha(k){return 1==(1&k.flags)}(wt)&&(function jg(k,E,L){!Li()||(function S_(k,E,L,W){const se=L.directiveStart,me=L.directiveEnd;k.firstCreatePass||el(L,E),fo(W,E);const Le=L.initialInputs;for(let He=se;He<me;He++){const ot=k.data[He],wt=xa(ot);wt&&P_(E,L,ot);const $t=as(E,k,He,L);fo($t,E),null!==Le&&O_(0,He-se,$t,ot,0,Le),wt&&(Oa(L.index,E)[8]=$t)}}(k,E,L,Ri(L,E)),128==(128&L.flags)&&function C_(k,E,L){const W=L.directiveStart,se=L.directiveEnd,me=L.index,Le=function Vu(){return $i.lFrame.currentDirectiveIndex}();try{Ft(me);for(let He=W;He<se;He++){const ot=k.data[He],wt=E[He];uu(He),(null!==ot.hostBindings||0!==ot.hostVars||null!==ot.hostAttrs)&&Jv(ot,wt)}}finally{Ft(-1),uu(Le)}}(k,E,L))}(me,se,wt),function Gv(k,E,L){if(go(E)){const se=E.directiveEnd;for(let me=E.directiveStart;me<se;me++){const Le=k.data[me];Le.contentQueries&&Le.contentQueries(1,L[me],me)}}}(me,wt,se)),null!==W&&function Vg(k,E,L=Ri){const W=E.localNames;if(null!==W){let se=E.index+1;for(let me=0;me<W.length;me+=2){const Le=W[me+1],He=-1===Le?L(E,k):k[Le];k[se++]=He}}}(se,wt),Fd}function zd(){let k=Vo();ol()?Qs():(k=k.parent,_a(k,!1));const E=k;!function al(){$i.lFrame.elementDepthCount--}();const L=da();return L.firstCreatePass&&(En(L,k),go(k)&&L.queries.elementEnd(k)),null!=E.classesWithoutHost&&function yi(k){return 0!=(16&k.flags)}(E)&&em(L,E,Yr(),E.classesWithoutHost,!0),null!=E.stylesWithoutHost&&function ci(k){return 0!=(32&k.flags)}(E)&&em(L,E,Yr(),E.stylesWithoutHost,!1),zd}function tm(k,E,L,W){return Fd(k,E,L,W),zd(),tm}function im(k){return!!k&&"function"==typeof k.then}const v2=function w1(k){return!!k&&"function"==typeof k.subscribe};function b2(k,E){let L=null;const W=function Hc(k){const E=k.attrs;if(null!=E){const L=E.indexOf(5);if(0==(1&L))return E[L+1]}return null}(k);for(let se=0;se<E.length;se++){const me=E[se];if("*"!==me){if(null===W?fc(k,me,!0):Hp(W,me))return se}else L=se}return L}const Ah="en-US";let Ty=Ah;function cm(k,E,L,W,se){if(k=Bn(k),Array.isArray(k))for(let me=0;me<k.length;me++)cm(k[me],E,L,W,se);else{const me=da(),Le=Yr();let He=Cu(k)?k:Bn(k.provide),ot=pd(k);const wt=Vo(),$t=1048575&wt.providerIndexes,gn=wt.directiveStart,Fn=wt.providerIndexes>>20;if(Cu(k)||!k.multi){const tr=new Jr(ot,se,Ga),Sr=hm(He,E,se?$t:$t+Fn,gn);-1===Sr?(Nl(el(wt,Le),me,He),fm(me,k,E.length),E.push(He),wt.directiveStart++,wt.directiveEnd++,se&&(wt.providerIndexes+=1048576),L.push(tr),Le.push(tr)):(L[Sr]=tr,Le[Sr]=tr)}else{const tr=hm(He,E,$t+Fn,gn),Sr=hm(He,E,$t,$t+Fn),Wr=tr>=0&&L[tr],pi=Sr>=0&&L[Sr];if(se&&!pi||!se&&!Wr){Nl(el(wt,Le),me,He);const Mi=function n3(k,E,L,W,se){const me=new Jr(k,L,Ga);return me.multi=[],me.index=E,me.componentProviders=0,Zy(me,se,W&&!L),me}(se?t3:e3,L.length,se,W,ot);!se&&pi&&(L[Sr].providerFactory=Mi),fm(me,k,E.length,0),E.push(He),wt.directiveStart++,wt.directiveEnd++,se&&(wt.providerIndexes+=1048576),L.push(Mi),Le.push(Mi)}else fm(me,k,tr>-1?tr:Sr,Zy(L[se?Sr:tr],ot,!se&&W));!se&&W&&pi&&L[Sr].componentProviders++}}}function fm(k,E,L,W){const se=Cu(E),me=function Dp(k){return!!k.useClass}(E);if(se||me){const ot=(me?Bn(E.useClass):E).prototype.ngOnDestroy;if(ot){const wt=k.destroyHooks||(k.destroyHooks=[]);if(!se&&E.multi){const $t=wt.indexOf(L);-1===$t?wt.push(L,[W,ot]):wt[$t+1].push(W,ot)}else wt.push(L,ot)}}}function Zy(k,E,L){return L&&k.componentProviders++,k.multi.push(E)-1}function hm(k,E,L,W){for(let se=L;se<W;se++)if(E[se]===k)return se;return-1}function e3(k,E,L,W){return dm(this.multi,[])}function t3(k,E,L,W){const se=this.multi;let me;if(this.providerFactory){const Le=this.providerFactory.componentProviders,He=as(L,L[1],this.providerFactory.index,W);me=He.slice(0,Le),dm(se,me);for(let ot=Le;ot<He.length;ot++)me.push(He[ot])}else me=[],dm(se,me);return me}function dm(k,E){for(let L=0;L<k.length;L++)E.push((0,k[L])());return E}function Xy(k,E=[]){return L=>{L.providersResolver=(W,se)=>function Qw(k,E,L){const W=da();if(W.firstCreatePass){const se=xa(k);cm(L,W.data,W.blueprint,se,!0),cm(E,W.data,W.blueprint,se,!1)}}(W,se?se(k):k,E)}}class Sh{}class $y extends Sh{constructor(E,L){super(),this._parent=L,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $g(this);const W=function ko(k,E){const L=k[Lo]||null;if(!L&&!0===E)throw new Error(`Type ${pn(k)} does not have '\u0275mod' property.`);return L}(E);this._bootstrapComponents=function zs(k){return k instanceof Function?k():k}(W.bootstrap),this._r3Injector=Cd(E,L,[{provide:Sh,useValue:this},{provide:dl,useValue:this.componentFactoryResolver}],pn(E),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(E)}get injector(){return this._r3Injector}destroy(){const E=this._r3Injector;!E.destroyed&&E.destroy(),this.destroyCbs.forEach(L=>L()),this.destroyCbs=null}onDestroy(E){this.destroyCbs.push(E)}}class pm extends class r3{}{constructor(E){super(),this.moduleType=E}create(E){return new $y(this.moduleType,E)}}function mm(k){return E=>{setTimeout(k,void 0,E)}}const Ia=class P3 extends X{constructor(E=!1){super(),this.__isAsync=E}emit(E){super.next(E)}subscribe(E,L,W){let se=E,me=L||(()=>null),Le=W;if(E&&"object"==typeof E){const ot=E;se=ot.next?.bind(ot),me=ot.error?.bind(ot),Le=ot.complete?.bind(ot)}this.__isAsync&&(me=mm(me),se&&(se=mm(se)),Le&&(Le=mm(Le)));const He=super.subscribe({next:se,error:me,complete:Le});return E instanceof y&&E.add(He),He}};function O3(){return this._results[Sf()]()}class vm{constructor(E=!1){this._emitDistinctChangesOnly=E,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const L=Sf(),W=vm.prototype;W[L]||(W[L]=O3)}get changes(){return this._changes||(this._changes=new Ia)}get(E){return this._results[E]}map(E){return this._results.map(E)}filter(E){return this._results.filter(E)}find(E){return this._results.find(E)}reduce(E,L){return this._results.reduce(E,L)}forEach(E){this._results.forEach(E)}some(E){return this._results.some(E)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(E,L){const W=this;W.dirty=!1;const se=yl(E);(this._changesDetected=!function V0(k,E,L){if(k.length!==E.length)return!1;for(let W=0;W<k.length;W++){let se=k[W],me=E[W];if(L&&(se=L(se),me=L(me)),me!==se)return!1}return!0}(W._results,se,L))&&(W._results=se,W.length=se.length,W.last=se[this.length-1],W.first=se[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pc=(()=>{class k{}return k.__NG_ELEMENT_ID__=z3,k})();const R3=pc,F3=class extends R3{constructor(E,L,W){super(),this._declarationLView=E,this._declarationTContainer=L,this.elementRef=W}createEmbeddedView(E,L){const W=this._declarationTContainer.tViews,se=e0(this._declarationLView,W,E,16,null,W.declTNode,null,null,null,null,L||null);se[17]=this._declarationLView[this._declarationTContainer.index];const Le=this._declarationLView[19];return null!==Le&&(se[19]=Le.createEmbeddedView(W)),t0(W,se,E),new Id(se)}};function z3(){return p0(Vo(),Yr())}function p0(k,E){return 4&k.type?new F3(E,k,rc(k,E)):null}let ju=(()=>{class k{}return k.__NG_ELEMENT_ID__=N3,k})();function N3(){return fx(Vo(),Yr())}const B3=ju,ux=class extends B3{constructor(E,L,W){super(),this._lContainer=E,this._hostTNode=L,this._hostLView=W}get element(){return rc(this._hostTNode,this._hostLView)}get injector(){return new Yl(this._hostTNode,this._hostLView)}get parentInjector(){const E=zl(this._hostTNode,this._hostLView);if(Gi(E)){const L=$a(E,this._hostLView),W=ta(E);return new Yl(L[1].data[W+8],L)}return new Yl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(E){const L=cx(this._lContainer);return null!==L&&L[E]||null}get length(){return this._lContainer.length-10}createEmbeddedView(E,L,W){let se,me;"number"==typeof W?se=W:null!=W&&(se=W.index,me=W.injector);const Le=E.createEmbeddedView(L||{},me);return this.insert(Le,se),Le}createComponent(E,L,W,se,me){const Le=E&&!function ef(k){return"function"==typeof k}(E);let He;if(Le)He=L;else{const gn=L||{};He=gn.index,W=gn.injector,se=gn.projectableNodes,me=gn.environmentInjector||gn.ngModuleRef}const ot=Le?E:new Pd(pa(E)),wt=W||this.parentInjector;if(!me&&null==ot.ngModule){const Fn=(Le?wt:this.parentInjector).get(Do,null);Fn&&(me=Fn)}const $t=ot.create(wt,se,void 0,me);return this.insert($t.hostView,He),$t}insert(E,L){const W=E._lView,se=W[1];if(function ps(k){return ra(k[3])}(W)){const $t=this.indexOf(E);if(-1!==$t)this.detach($t);else{const gn=W[3],Fn=new ux(gn,gn[6],gn[3]);Fn.detach(Fn.indexOf(E))}}const me=this._adjustIndex(L),Le=this._lContainer;!function Fc(k,E,L,W){const se=10+W,me=L.length;W>0&&(L[se-1][4]=E),W<me-10?(E[4]=L[se],rp(L,10+W,E)):(L.push(E),E[4]=null),E[3]=L;const Le=E[17];null!==Le&&L!==Le&&function zc(k,E){const L=k[9];E[16]!==E[3][3][16]&&(k[2]=!0),null===L?k[9]=[E]:L.push(E)}(Le,E);const He=E[19];null!==He&&He.insertView(k),E[2]|=64}(se,W,Le,me);const He=jc(me,Le),ot=W[11],wt=sh(ot,Le[7]);return null!==wt&&function nh(k,E,L,W,se,me){W[0]=se,W[6]=E,Ru(k,W,L,1,se,me)}(se,Le[6],ot,W,wt,He),E.attachToViewContainerRef(),rp(ym(Le),me,E),E}move(E,L){return this.insert(E,L)}indexOf(E){const L=cx(this._lContainer);return null!==L?L.indexOf(E):-1}remove(E){const L=this._adjustIndex(E,-1),W=Nc(this._lContainer,L);W&&(Rf(ym(this._lContainer),L),sc(W[1],W))}detach(E){const L=this._adjustIndex(E,-1),W=Nc(this._lContainer,L);return W&&null!=Rf(ym(this._lContainer),L)?new Id(W):null}_adjustIndex(E,L=0){return E??this.length+L}};function cx(k){return k[8]}function ym(k){return k[8]||(k[8]=[])}function fx(k,E){let L;const W=E[k.index];if(ra(W))L=W;else{let se;if(8&k.type)se=ka(W);else{const me=E[11];se=me.createComment("");const Le=Ri(k,E);Ou(me,sh(me,Le),se,function Mf(k,E){return k.nextSibling(E)}(me,Le),!1)}E[k.index]=L=function n1(k,E,L,W){return new Array(k,!0,!1,E,null,0,W,L,null,null)}(W,E,se,k),n0(E,L)}return new ux(L,k,E)}class xm{constructor(E){this.queryList=E,this.matches=null}clone(){return new xm(this.queryList)}setDirty(){this.queryList.setDirty()}}class bm{constructor(E=[]){this.queries=E}createEmbeddedView(E){const L=E.queries;if(null!==L){const W=null!==E.contentQueries?E.contentQueries[0]:L.length,se=[];for(let me=0;me<W;me++){const Le=L.getByIndex(me);se.push(this.queries[Le.indexInDeclarationView].clone())}return new bm(se)}return null}insertView(E){this.dirtyQueriesWithMatches(E)}detachView(E){this.dirtyQueriesWithMatches(E)}dirtyQueriesWithMatches(E){for(let L=0;L<this.queries.length;L++)null!==xx(E,L).matches&&this.queries[L].setDirty()}}class hx{constructor(E,L,W=null){this.predicate=E,this.flags=L,this.read=W}}class _m{constructor(E=[]){this.queries=E}elementStart(E,L){for(let W=0;W<this.queries.length;W++)this.queries[W].elementStart(E,L)}elementEnd(E){for(let L=0;L<this.queries.length;L++)this.queries[L].elementEnd(E)}embeddedTView(E){let L=null;for(let W=0;W<this.length;W++){const se=null!==L?L.length:0,me=this.getByIndex(W).embeddedTView(E,se);me&&(me.indexInDeclarationView=W,null!==L?L.push(me):L=[me])}return null!==L?new _m(L):null}template(E,L){for(let W=0;W<this.queries.length;W++)this.queries[W].template(E,L)}getByIndex(E){return this.queries[E]}get length(){return this.queries.length}track(E){this.queries.push(E)}}class wm{constructor(E,L=-1){this.metadata=E,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=L}elementStart(E,L){this.isApplyingToNode(L)&&this.matchTNode(E,L)}elementEnd(E){this._declarationNodeIndex===E.index&&(this._appliesToNextNode=!1)}template(E,L){this.elementStart(E,L)}embeddedTView(E,L){return this.isApplyingToNode(E)?(this.crossesNgTemplate=!0,this.addMatch(-E.index,L),new wm(this.metadata)):null}isApplyingToNode(E){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const L=this._declarationNodeIndex;let W=E.parent;for(;null!==W&&8&W.type&&W.index!==L;)W=W.parent;return L===(null!==W?W.index:-1)}return this._appliesToNextNode}matchTNode(E,L){const W=this.metadata.predicate;if(Array.isArray(W))for(let se=0;se<W.length;se++){const me=W[se];this.matchTNodeWithReadOption(E,L,U3(L,me)),this.matchTNodeWithReadOption(E,L,ms(L,E,me,!1,!1))}else W===pc?4&L.type&&this.matchTNodeWithReadOption(E,L,-1):this.matchTNodeWithReadOption(E,L,ms(L,E,W,!1,!1))}matchTNodeWithReadOption(E,L,W){if(null!==W){const se=this.metadata.read;if(null!==se)if(se===Lc||se===ju||se===pc&&4&L.type)this.addMatch(L.index,-2);else{const me=ms(L,E,se,!1,!1);null!==me&&this.addMatch(L.index,me)}else this.addMatch(L.index,W)}}addMatch(E,L){null===this.matches?this.matches=[E,L]:this.matches.push(E,L)}}function U3(k,E){const L=k.localNames;if(null!==L)for(let W=0;W<L.length;W+=2)if(L[W]===E)return L[W+1];return null}function q3(k,E,L,W){return-1===L?function H3(k,E){return 11&k.type?rc(k,E):4&k.type?p0(k,E):null}(E,k):-2===L?function G3(k,E,L){return L===Lc?rc(E,k):L===pc?p0(E,k):L===ju?fx(E,k):void 0}(k,E,W):as(k,k[1],L,E)}function dx(k,E,L,W){const se=E[19].queries[W];if(null===se.matches){const me=k.data,Le=L.matches,He=[];for(let ot=0;ot<Le.length;ot+=2){const wt=Le[ot];He.push(wt<0?null:q3(E,me[wt],Le[ot+1],L.metadata.read))}se.matches=He}return se.matches}function Tm(k,E,L,W){const se=k.queries.getByIndex(L),me=se.matches;if(null!==me){const Le=dx(k,E,se,L);for(let He=0;He<me.length;He+=2){const ot=me[He];if(ot>0)W.push(Le[He/2]);else{const wt=me[He+1],$t=E[-ot];for(let gn=10;gn<$t.length;gn++){const Fn=$t[gn];Fn[17]===Fn[3]&&Tm(Fn[1],Fn,wt,W)}if(null!==$t[9]){const gn=$t[9];for(let Fn=0;Fn<gn.length;Fn++){const tr=gn[Fn];Tm(tr[1],tr,wt,W)}}}}}return W}function px(k){const E=Yr(),L=da(),W=P();N(W+1);const se=xx(L,W);if(k.dirty&&Bo(E)===(2==(2&se.metadata.flags))){if(null===se.matches)k.reset([]);else{const me=se.crossesNgTemplate?Tm(L,E,W,[]):dx(L,E,se,W);k.reset(me,Ss),k.notifyOnChanges()}return!0}return!1}function gx(k,E,L){const W=da();W.firstCreatePass&&(function yx(k,E,L){null===k.queries&&(k.queries=new _m),k.queries.track(new wm(E,L))}(W,new hx(k,E,L),-1),2==(2&E)&&(W.staticViewQueries=!0)),function vx(k,E,L){const W=new vm(4==(4&L));Wv(k,E,W,W.destroy),null===E[19]&&(E[19]=new bm),E[19].queries.push(new xm(W))}(W,Yr(),E)}function xx(k,E){return k.queries.getByIndex(E)}function m0(...k){}const Nx=new la("Application Initializer");let v0=(()=>{class k{constructor(L){this.appInits=L,this.resolve=m0,this.reject=m0,this.initialized=!1,this.done=!1,this.donePromise=new Promise((W,se)=>{this.resolve=W,this.reject=se})}runInitializers(){if(this.initialized)return;const L=[],W=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let se=0;se<this.appInits.length;se++){const me=this.appInits[se]();if(im(me))L.push(me);else if(v2(me)){const Le=new Promise((He,ot)=>{me.subscribe({complete:He,error:ot})});L.push(Le)}}Promise.all(L).then(()=>{W()}).catch(se=>{this.reject(se)}),0===L.length&&W(),this.initialized=!0}}return k.\u0275fac=function(L){return new(L||k)(ao(Nx,8))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Wd=new la("AppId",{providedIn:"root",factory:function Bx(){return`${Sm()}${Sm()}${Sm()}`}});function Sm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jx=new la("Platform Initializer"),Vx=new la("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),g5=new la("appBootstrapListener"),gc=new la("LocaleId",{providedIn:"root",factory:()=>function X0(k,E=ai.Default){return"number"!=typeof E&&(E=0|(E.optional&&8)|(E.host&&1)|(E.self&&2)|(E.skipSelf&&4)),ao(k,E)}(gc,ai.Optional|ai.SkipSelf)||function m5(){return typeof $localize<"u"&&$localize.locale||Ah}()}),_5=(()=>Promise.resolve(0))();function Cm(k){typeof Zone>"u"?_5.then(()=>{k&&k.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",k)}class il{constructor({enableLongStackTrace:E=!1,shouldCoalesceEventChangeDetection:L=!1,shouldCoalesceRunChangeDetection:W=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ia(!1),this.onMicrotaskEmpty=new Ia(!1),this.onStable=new Ia(!1),this.onError=new Ia(!1),typeof Zone>"u")throw new Qn(908,!1);Zone.assertZonePatched();const se=this;if(se._nesting=0,se._outer=se._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const me=Zone.AsyncStackTaggingZoneSpec;se._inner=se._inner.fork(new me("Angular"))}Zone.TaskTrackingZoneSpec&&(se._inner=se._inner.fork(new Zone.TaskTrackingZoneSpec)),E&&Zone.longStackTraceZoneSpec&&(se._inner=se._inner.fork(Zone.longStackTraceZoneSpec)),se.shouldCoalesceEventChangeDetection=!W&&L,se.shouldCoalesceRunChangeDetection=W,se.lastRequestAnimationFrameId=-1,se.nativeRequestAnimationFrame=function w5(){let k=sa.requestAnimationFrame,E=sa.cancelAnimationFrame;if(typeof Zone<"u"&&k&&E){const L=k[Zone.__symbol__("OriginalDelegate")];L&&(k=L);const W=E[Zone.__symbol__("OriginalDelegate")];W&&(E=W)}return{nativeRequestAnimationFrame:k,nativeCancelAnimationFrame:E}}().nativeRequestAnimationFrame,function k5(k){const E=()=>{!function M5(k){k.isCheckStableRunning||-1!==k.lastRequestAnimationFrameId||(k.lastRequestAnimationFrameId=k.nativeRequestAnimationFrame.call(sa,()=>{k.fakeTopEventTask||(k.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{k.lastRequestAnimationFrameId=-1,Lm(k),k.isCheckStableRunning=!0,Dm(k),k.isCheckStableRunning=!1},void 0,()=>{},()=>{})),k.fakeTopEventTask.invoke()}),Lm(k))}(k)};k._inner=k._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(L,W,se,me,Le,He)=>{try{return qx(k),L.invokeTask(se,me,Le,He)}finally{(k.shouldCoalesceEventChangeDetection&&"eventTask"===me.type||k.shouldCoalesceRunChangeDetection)&&E(),Gx(k)}},onInvoke:(L,W,se,me,Le,He,ot)=>{try{return qx(k),L.invoke(se,me,Le,He,ot)}finally{k.shouldCoalesceRunChangeDetection&&E(),Gx(k)}},onHasTask:(L,W,se,me)=>{L.hasTask(se,me),W===se&&("microTask"==me.change?(k._hasPendingMicrotasks=me.microTask,Lm(k),Dm(k)):"macroTask"==me.change&&(k.hasPendingMacrotasks=me.macroTask))},onHandleError:(L,W,se,me)=>(L.handleError(se,me),k.runOutsideAngular(()=>k.onError.emit(me)),!1)})}(se)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!il.isInAngularZone())throw new Qn(909,!1)}static assertNotInAngularZone(){if(il.isInAngularZone())throw new Qn(909,!1)}run(E,L,W){return this._inner.run(E,L,W)}runTask(E,L,W,se){const me=this._inner,Le=me.scheduleEventTask("NgZoneEvent: "+se,E,T5,m0,m0);try{return me.runTask(Le,L,W)}finally{me.cancelTask(Le)}}runGuarded(E,L,W){return this._inner.runGuarded(E,L,W)}runOutsideAngular(E){return this._outer.run(E)}}const T5={};function Dm(k){if(0==k._nesting&&!k.hasPendingMicrotasks&&!k.isStable)try{k._nesting++,k.onMicrotaskEmpty.emit(null)}finally{if(k._nesting--,!k.hasPendingMicrotasks)try{k.runOutsideAngular(()=>k.onStable.emit(null))}finally{k.isStable=!0}}}function Lm(k){k.hasPendingMicrotasks=!!(k._hasPendingMicrotasks||(k.shouldCoalesceEventChangeDetection||k.shouldCoalesceRunChangeDetection)&&-1!==k.lastRequestAnimationFrameId)}function qx(k){k._nesting++,k.isStable&&(k.isStable=!1,k.onUnstable.emit(null))}function Gx(k){k._nesting--,Dm(k)}class A5{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ia,this.onMicrotaskEmpty=new Ia,this.onStable=new Ia,this.onError=new Ia}run(E,L,W){return E.apply(L,W)}runGuarded(E,L,W){return E.apply(L,W)}runOutsideAngular(E){return E()}runTask(E,L,W,se){return E.apply(L,W)}}const Yx=new la(""),y0=new la("");let Om,Im=(()=>{class k{constructor(L,W,se){this._ngZone=L,this.registry=W,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Om||(function E5(k){Om=k}(se),se.addToWindow(W)),this._watchAngularEvents(),L.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{il.assertNotInAngularZone(),Cm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cm(()=>{for(;0!==this._callbacks.length;){let L=this._callbacks.pop();clearTimeout(L.timeoutId),L.doneCb(this._didWork)}this._didWork=!1});else{let L=this.getPendingTasks();this._callbacks=this._callbacks.filter(W=>!W.updateCb||!W.updateCb(L)||(clearTimeout(W.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(L=>({source:L.source,creationLocation:L.creationLocation,data:L.data})):[]}addCallback(L,W,se){let me=-1;W&&W>0&&(me=setTimeout(()=>{this._callbacks=this._callbacks.filter(Le=>Le.timeoutId!==me),L(this._didWork,this.getPendingTasks())},W)),this._callbacks.push({doneCb:L,timeoutId:me,updateCb:se})}whenStable(L,W,se){if(se&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(L,W,se),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(L){this.registry.registerApplication(L,this)}unregisterApplication(L){this.registry.unregisterApplication(L)}findProviders(L,W,se){return[]}}return k.\u0275fac=function(L){return new(L||k)(ao(il),ao(Pm),ao(y0))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})(),Pm=(()=>{class k{constructor(){this._applications=new Map}registerApplication(L,W){this._applications.set(L,W)}unregisterApplication(L){this._applications.delete(L)}unregisterAllApplications(){this._applications.clear()}getTestability(L){return this._applications.get(L)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(L,W=!0){return Om?.findTestabilityInTree(this,L,W)??null}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=Dn({token:k,factory:k.\u0275fac,providedIn:"platform"}),k})(),$c=null;const Wx=new la("AllowMultipleToken"),Rm=new la("PlatformDestroyListeners");function Xx(k,E,L=[]){const W=`Platform: ${E}`,se=new la(W);return(me=[])=>{let Le=Fm();if(!Le||Le.injector.get(Wx,!1)){const He=[...L,...me,{provide:se,useValue:!0}];k?k(He):function D5(k){if($c&&!$c.get(Wx,!1))throw new Qn(400,!1);$c=k;const E=k.get(Kx);(function Zx(k){const E=k.get(jx,null);E&&E.forEach(L=>L())})(k)}(function $x(k=[],E){return Pl.create({name:E,providers:[{provide:Cc,useValue:"platform"},{provide:Rm,useValue:new Set([()=>$c=null])},...k]})}(He,W))}return function I5(k){const E=Fm();if(!E)throw new Qn(401,!1);return E}()}}function Fm(){return $c?.get(Kx)??null}let Kx=(()=>{class k{constructor(L){this._injector=L,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(L,W){const se=function P5(k,E){let L;return L="noop"===k?new A5:("zone.js"===k?void 0:k)||new il(E),L}(W?.ngZone,function Jx(k){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!k||!k.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!k||!k.ngZoneRunCoalescing)||!1}}(W)),me=[{provide:il,useValue:se}];return se.run(()=>{const Le=Pl.create({providers:me,parent:this.injector,name:L.moduleType.name}),He=L.create(Le),ot=He.injector.get(Ti,null);if(!ot)throw new Qn(402,!1);return se.runOutsideAngular(()=>{const wt=se.onError.subscribe({next:$t=>{ot.handleError($t)}});He.onDestroy(()=>{b0(this._modules,He),wt.unsubscribe()})}),function Qx(k,E,L){try{const W=L();return im(W)?W.catch(se=>{throw E.runOutsideAngular(()=>k.handleError(se)),se}):W}catch(W){throw E.runOutsideAngular(()=>k.handleError(W)),W}}(ot,se,()=>{const wt=He.injector.get(v0);return wt.runInitializers(),wt.donePromise.then(()=>(function My(k){Gn(k,"Expected localeId to be defined"),"string"==typeof k&&(Ty=k.toLowerCase().replace(/_/g,"-"))}(He.injector.get(gc,Ah)||Ah),this._moduleDoBootstrap(He),He))})})}bootstrapModule(L,W=[]){const se=eb({},W);return function S5(k,E,L){const W=new pm(L);return Promise.resolve(W)}(0,0,L).then(me=>this.bootstrapModuleFactory(me,se))}_moduleDoBootstrap(L){const W=L.injector.get(x0);if(L._bootstrapComponents.length>0)L._bootstrapComponents.forEach(se=>W.bootstrap(se));else{if(!L.instance.ngDoBootstrap)throw new Qn(403,!1);L.instance.ngDoBootstrap(W)}this._modules.push(L)}onDestroy(L){this._destroyListeners.push(L)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Qn(404,!1);this._modules.slice().forEach(W=>W.destroy()),this._destroyListeners.forEach(W=>W());const L=this._injector.get(Rm,null);L&&(L.forEach(W=>W()),L.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return k.\u0275fac=function(L){return new(L||k)(ao(Pl))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac,providedIn:"platform"}),k})();function eb(k,E){return Array.isArray(E)?E.reduce(eb,k):{...k,...E}}let x0=(()=>{class k{constructor(L,W,se){this._zone=L,this._injector=W,this._exceptionHandler=se,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const me=new z(He=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{He.next(this._stable),He.complete()})}),Le=new z(He=>{let ot;this._zone.runOutsideAngular(()=>{ot=this._zone.onStable.subscribe(()=>{il.assertNotInAngularZone(),Cm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,He.next(!0))})})});const wt=this._zone.onUnstable.subscribe(()=>{il.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{He.next(!1)}))});return()=>{ot.unsubscribe(),wt.unsubscribe()}});this.isStable=Un(me,Le.pipe(function Tn(k={}){const{connector:E=(()=>new X),resetOnError:L=!0,resetOnComplete:W=!0,resetOnRefCountZero:se=!0}=k;return me=>{let Le,He,ot,wt=0,$t=!1,gn=!1;const Fn=()=>{He?.unsubscribe(),He=void 0},tr=()=>{Fn(),Le=ot=void 0,$t=gn=!1},Sr=()=>{const Wr=Le;tr(),Wr?.unsubscribe()};return U((Wr,pi)=>{wt++,!gn&&!$t&&Fn();const Mi=ot=ot??E();pi.add(()=>{wt--,0===wt&&!gn&&!$t&&(He=un(Sr,se))}),Mi.subscribe(pi),!Le&&wt>0&&(Le=new w({next:Yi=>Mi.next(Yi),error:Yi=>{gn=!0,Fn(),He=un(tr,L,Yi),Mi.error(Yi)},complete:()=>{$t=!0,Fn(),He=un(tr,W),Mi.complete()}}),hn(Wr).subscribe(Le))})(me)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(L,W){const se=L instanceof Jl;if(!this._injector.get(v0).done)throw!se&&function Yd(k){const E=pa(k)||ho(k)||po(k);return null!==E&&E.standalone}(L),new Qn(405,false);let Le;Le=se?L:this._injector.get(dl).resolveComponentFactory(L),this.componentTypes.push(Le.componentType);const He=function C5(k){return k.isBoundToModule}(Le)?void 0:this._injector.get(Sh),wt=Le.create(Pl.NULL,[],W||Le.selector,He),$t=wt.location.nativeElement,gn=wt.injector.get(Yx,null);return gn?.registerApplication($t),wt.onDestroy(()=>{this.detachView(wt.hostView),b0(this.components,wt),gn?.unregisterApplication($t)}),this._loadComponent(wt),wt}tick(){if(this._runningTick)throw new Qn(101,!1);try{this._runningTick=!0;for(let L of this._views)L.detectChanges()}catch(L){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(L))}finally{this._runningTick=!1}}attachView(L){const W=L;this._views.push(W),W.attachToAppRef(this)}detachView(L){const W=L;b0(this._views,W),W.detachFromAppRef()}_loadComponent(L){this.attachView(L.hostView),this.tick(),this.components.push(L),this._injector.get(g5,[]).concat(this._bootstrapListeners).forEach(se=>se(L))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(L=>L()),this._views.slice().forEach(L=>L.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(L){return this._destroyListeners.push(L),()=>b0(this._destroyListeners,L)}destroy(){if(this._destroyed)throw new Qn(406,!1);const L=this._injector;L.destroy&&!L.destroyed&&L.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return k.\u0275fac=function(L){return new(L||k)(ao(il),ao(Do),ao(Ti))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function b0(k,E){const L=k.indexOf(E);L>-1&&k.splice(L,1)}let nb=!0,ab=(()=>{class k{}return k.__NG_ELEMENT_ID__=F5,k})();function F5(k){return function z5(k,E,L){if(io(k)&&!L){const W=Oa(k.index,E);return new Id(W,W)}return 47&k.type?new Id(E[16],E):null}(Vo(),Yr(),16==(16&k))}class lb{constructor(){}supports(E){return Od(E)}create(E){return new H5(E)}}const U5=(k,E)=>E;class H5{constructor(E){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=E||U5}forEachItem(E){let L;for(L=this._itHead;null!==L;L=L._next)E(L)}forEachOperation(E){let L=this._itHead,W=this._removalsHead,se=0,me=null;for(;L||W;){const Le=!W||L&&L.currentIndex<cb(W,se,me)?L:W,He=cb(Le,se,me),ot=Le.currentIndex;if(Le===W)se--,W=W._nextRemoved;else if(L=L._next,null==Le.previousIndex)se++;else{me||(me=[]);const wt=He-se,$t=ot-se;if(wt!=$t){for(let Fn=0;Fn<wt;Fn++){const tr=Fn<me.length?me[Fn]:me[Fn]=0,Sr=tr+Fn;$t<=Sr&&Sr<wt&&(me[Fn]=tr+1)}me[Le.previousIndex]=$t-wt}}He!==ot&&E(Le,He,ot)}}forEachPreviousItem(E){let L;for(L=this._previousItHead;null!==L;L=L._nextPrevious)E(L)}forEachAddedItem(E){let L;for(L=this._additionsHead;null!==L;L=L._nextAdded)E(L)}forEachMovedItem(E){let L;for(L=this._movesHead;null!==L;L=L._nextMoved)E(L)}forEachRemovedItem(E){let L;for(L=this._removalsHead;null!==L;L=L._nextRemoved)E(L)}forEachIdentityChange(E){let L;for(L=this._identityChangesHead;null!==L;L=L._nextIdentityChange)E(L)}diff(E){if(null==E&&(E=[]),!Od(E))throw new Qn(900,!1);return this.check(E)?this:null}onDestroy(){}check(E){this._reset();let se,me,Le,L=this._itHead,W=!1;if(Array.isArray(E)){this.length=E.length;for(let He=0;He<this.length;He++)me=E[He],Le=this._trackByFn(He,me),null!==L&&Object.is(L.trackById,Le)?(W&&(L=this._verifyReinsertion(L,me,Le,He)),Object.is(L.item,me)||this._addIdentityChange(L,me)):(L=this._mismatch(L,me,Le,He),W=!0),L=L._next}else se=0,function o2(k,E){if(Array.isArray(k))for(let L=0;L<k.length;L++)E(k[L]);else{const L=k[Sf()]();let W;for(;!(W=L.next()).done;)E(W.value)}}(E,He=>{Le=this._trackByFn(se,He),null!==L&&Object.is(L.trackById,Le)?(W&&(L=this._verifyReinsertion(L,He,Le,se)),Object.is(L.item,He)||this._addIdentityChange(L,He)):(L=this._mismatch(L,He,Le,se),W=!0),L=L._next,se++}),this.length=se;return this._truncate(L),this.collection=E,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let E;for(E=this._previousItHead=this._itHead;null!==E;E=E._next)E._nextPrevious=E._next;for(E=this._additionsHead;null!==E;E=E._nextAdded)E.previousIndex=E.currentIndex;for(this._additionsHead=this._additionsTail=null,E=this._movesHead;null!==E;E=E._nextMoved)E.previousIndex=E.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(E,L,W,se){let me;return null===E?me=this._itTail:(me=E._prev,this._remove(E)),null!==(E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(W,null))?(Object.is(E.item,L)||this._addIdentityChange(E,L),this._reinsertAfter(E,me,se)):null!==(E=null===this._linkedRecords?null:this._linkedRecords.get(W,se))?(Object.is(E.item,L)||this._addIdentityChange(E,L),this._moveAfter(E,me,se)):E=this._addAfter(new q5(L,W),me,se),E}_verifyReinsertion(E,L,W,se){let me=null===this._unlinkedRecords?null:this._unlinkedRecords.get(W,null);return null!==me?E=this._reinsertAfter(me,E._prev,se):E.currentIndex!=se&&(E.currentIndex=se,this._addToMoves(E,se)),E}_truncate(E){for(;null!==E;){const L=E._next;this._addToRemovals(this._unlink(E)),E=L}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(E,L,W){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(E);const se=E._prevRemoved,me=E._nextRemoved;return null===se?this._removalsHead=me:se._nextRemoved=me,null===me?this._removalsTail=se:me._prevRemoved=se,this._insertAfter(E,L,W),this._addToMoves(E,W),E}_moveAfter(E,L,W){return this._unlink(E),this._insertAfter(E,L,W),this._addToMoves(E,W),E}_addAfter(E,L,W){return this._insertAfter(E,L,W),this._additionsTail=null===this._additionsTail?this._additionsHead=E:this._additionsTail._nextAdded=E,E}_insertAfter(E,L,W){const se=null===L?this._itHead:L._next;return E._next=se,E._prev=L,null===se?this._itTail=E:se._prev=E,null===L?this._itHead=E:L._next=E,null===this._linkedRecords&&(this._linkedRecords=new ub),this._linkedRecords.put(E),E.currentIndex=W,E}_remove(E){return this._addToRemovals(this._unlink(E))}_unlink(E){null!==this._linkedRecords&&this._linkedRecords.remove(E);const L=E._prev,W=E._next;return null===L?this._itHead=W:L._next=W,null===W?this._itTail=L:W._prev=L,E}_addToMoves(E,L){return E.previousIndex===L||(this._movesTail=null===this._movesTail?this._movesHead=E:this._movesTail._nextMoved=E),E}_addToRemovals(E){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ub),this._unlinkedRecords.put(E),E.currentIndex=null,E._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=E,E._prevRemoved=null):(E._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=E),E}_addIdentityChange(E,L){return E.item=L,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=E:this._identityChangesTail._nextIdentityChange=E,E}}class q5{constructor(E,L){this.item=E,this.trackById=L,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class G5{constructor(){this._head=null,this._tail=null}add(E){null===this._head?(this._head=this._tail=E,E._nextDup=null,E._prevDup=null):(this._tail._nextDup=E,E._prevDup=this._tail,E._nextDup=null,this._tail=E)}get(E,L){let W;for(W=this._head;null!==W;W=W._nextDup)if((null===L||L<=W.currentIndex)&&Object.is(W.trackById,E))return W;return null}remove(E){const L=E._prevDup,W=E._nextDup;return null===L?this._head=W:L._nextDup=W,null===W?this._tail=L:W._prevDup=L,null===this._head}}class ub{constructor(){this.map=new Map}put(E){const L=E.trackById;let W=this.map.get(L);W||(W=new G5,this.map.set(L,W)),W.add(E)}get(E,L){const se=this.map.get(E);return se?se.get(E,L):null}remove(E){const L=E.trackById;return this.map.get(L).remove(E)&&this.map.delete(L),E}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cb(k,E,L){const W=k.previousIndex;if(null===W)return W;let se=0;return L&&W<L.length&&(se=L[W]),W+E+se}class fb{constructor(){}supports(E){return E instanceof Map||Jg(E)}create(){return new Y5}}class Y5{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(E){let L;for(L=this._mapHead;null!==L;L=L._next)E(L)}forEachPreviousItem(E){let L;for(L=this._previousMapHead;null!==L;L=L._nextPrevious)E(L)}forEachChangedItem(E){let L;for(L=this._changesHead;null!==L;L=L._nextChanged)E(L)}forEachAddedItem(E){let L;for(L=this._additionsHead;null!==L;L=L._nextAdded)E(L)}forEachRemovedItem(E){let L;for(L=this._removalsHead;null!==L;L=L._nextRemoved)E(L)}diff(E){if(E){if(!(E instanceof Map||Jg(E)))throw new Qn(900,!1)}else E=new Map;return this.check(E)?this:null}onDestroy(){}check(E){this._reset();let L=this._mapHead;if(this._appendAfter=null,this._forEach(E,(W,se)=>{if(L&&L.key===se)this._maybeAddToChanges(L,W),this._appendAfter=L,L=L._next;else{const me=this._getOrCreateRecordForKey(se,W);L=this._insertBeforeOrAppend(L,me)}}),L){L._prev&&(L._prev._next=null),this._removalsHead=L;for(let W=L;null!==W;W=W._nextRemoved)W===this._mapHead&&(this._mapHead=null),this._records.delete(W.key),W._nextRemoved=W._next,W.previousValue=W.currentValue,W.currentValue=null,W._prev=null,W._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(E,L){if(E){const W=E._prev;return L._next=E,L._prev=W,E._prev=L,W&&(W._next=L),E===this._mapHead&&(this._mapHead=L),this._appendAfter=E,E}return this._appendAfter?(this._appendAfter._next=L,L._prev=this._appendAfter):this._mapHead=L,this._appendAfter=L,null}_getOrCreateRecordForKey(E,L){if(this._records.has(E)){const se=this._records.get(E);this._maybeAddToChanges(se,L);const me=se._prev,Le=se._next;return me&&(me._next=Le),Le&&(Le._prev=me),se._next=null,se._prev=null,se}const W=new W5(E);return this._records.set(E,W),W.currentValue=L,this._addToAdditions(W),W}_reset(){if(this.isDirty){let E;for(this._previousMapHead=this._mapHead,E=this._previousMapHead;null!==E;E=E._next)E._nextPrevious=E._next;for(E=this._changesHead;null!==E;E=E._nextChanged)E.previousValue=E.currentValue;for(E=this._additionsHead;null!=E;E=E._nextAdded)E.previousValue=E.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(E,L){Object.is(L,E.currentValue)||(E.previousValue=E.currentValue,E.currentValue=L,this._addToChanges(E))}_addToAdditions(E){null===this._additionsHead?this._additionsHead=this._additionsTail=E:(this._additionsTail._nextAdded=E,this._additionsTail=E)}_addToChanges(E){null===this._changesHead?this._changesHead=this._changesTail=E:(this._changesTail._nextChanged=E,this._changesTail=E)}_forEach(E,L){E instanceof Map?E.forEach(L):Object.keys(E).forEach(W=>L(E[W],W))}}class W5{constructor(E){this.key=E,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hb(){return new Zd([new lb])}let Zd=(()=>{class k{constructor(L){this.factories=L}static create(L,W){if(null!=W){const se=W.factories.slice();L=L.concat(se)}return new k(L)}static extend(L){return{provide:k,useFactory:W=>k.create(L,W||hb()),deps:[[k,new Bf,new Nf]]}}find(L){const W=this.factories.find(se=>se.supports(L));if(null!=W)return W;throw new Qn(901,!1)}}return k.\u0275prov=Dn({token:k,providedIn:"root",factory:hb}),k})();function db(){return new Lh([new fb])}let Lh=(()=>{class k{constructor(L){this.factories=L}static create(L,W){if(W){const se=W.factories.slice();L=L.concat(se)}return new k(L)}static extend(L){return{provide:k,useFactory:W=>k.create(L,W||db()),deps:[[k,new Bf,new Nf]]}}find(L){const W=this.factories.find(se=>se.supports(L));if(W)return W;throw new Qn(901,!1)}}return k.\u0275prov=Dn({token:k,providedIn:"root",factory:db}),k})();const $5=Xx(null,"core",[]);let K5=(()=>{class k{constructor(L){}}return k.\u0275fac=function(L){return new(L||k)(ao(x0))},k.\u0275mod=Os({type:k}),k.\u0275inj=rr({}),k})(),T0=null;function Xd(){return T0}const vc=new la("DocumentToken");let Tb=(()=>{class k{constructor(L,W,se,me){this._iterableDiffers=L,this._keyValueDiffers=W,this._ngEl=se,this._renderer=me,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(L){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof L?L.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(L){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof L?L.split(/\s+/):L,this._rawClass&&(Od(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const L=this._iterableDiffer.diff(this._rawClass);L&&this._applyIterableChanges(L)}else if(this._keyValueDiffer){const L=this._keyValueDiffer.diff(this._rawClass);L&&this._applyKeyValueChanges(L)}}_applyKeyValueChanges(L){L.forEachAddedItem(W=>this._toggleClass(W.key,W.currentValue)),L.forEachChangedItem(W=>this._toggleClass(W.key,W.currentValue)),L.forEachRemovedItem(W=>{W.previousValue&&this._toggleClass(W.key,!1)})}_applyIterableChanges(L){L.forEachAddedItem(W=>{if("string"!=typeof W.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${pn(W.item)}`);this._toggleClass(W.item,!0)}),L.forEachRemovedItem(W=>this._toggleClass(W.item,!1))}_applyClasses(L){L&&(Array.isArray(L)||L instanceof Set?L.forEach(W=>this._toggleClass(W,!0)):Object.keys(L).forEach(W=>this._toggleClass(W,!!L[W])))}_removeClasses(L){L&&(Array.isArray(L)||L instanceof Set?L.forEach(W=>this._toggleClass(W,!1)):Object.keys(L).forEach(W=>this._toggleClass(W,!1)))}_toggleClass(L,W){(L=L.trim())&&L.split(/\s+/g).forEach(se=>{W?this._renderer.addClass(this._ngEl.nativeElement,se):this._renderer.removeClass(this._ngEl.nativeElement,se)})}}return k.\u0275fac=function(L){return new(L||k)(Ga(Zd),Ga(Lh),Ga(Lc),Ga(A))},k.\u0275dir=fs({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})(),Cb=(()=>{class k{constructor(L,W,se){this._ngEl=L,this._differs=W,this._renderer=se,this._ngStyle=null,this._differ=null}set ngStyle(L){this._ngStyle=L,!this._differ&&L&&(this._differ=this._differs.find(L).create())}ngDoCheck(){if(this._differ){const L=this._differ.diff(this._ngStyle);L&&this._applyChanges(L)}}_setStyle(L,W){const[se,me]=L.split("."),Le=-1===se.indexOf("-")?void 0:Ns.DashCase;null!=W?this._renderer.setStyle(this._ngEl.nativeElement,se,me?`${W}${me}`:W,Le):this._renderer.removeStyle(this._ngEl.nativeElement,se,Le)}_applyChanges(L){L.forEachRemovedItem(W=>this._setStyle(W.key,null)),L.forEachAddedItem(W=>this._setStyle(W.key,W.currentValue)),L.forEachChangedItem(W=>this._setStyle(W.key,W.currentValue))}}return k.\u0275fac=function(L){return new(L||k)(Ga(Lc),Ga(Lh),Ga(A))},k.\u0275dir=fs({type:k,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),k})(),Jd=(()=>{class k{}return k.\u0275fac=function(L){return new(L||k)},k.\u0275mod=Os({type:k}),k.\u0275inj=rr({}),k})();class ev extends class wM extends class eT{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Q5(k){T0||(T0=k)}(new ev)}onAndCancel(E,L,W){return E.addEventListener(L,W,!1),()=>{E.removeEventListener(L,W,!1)}}dispatchEvent(E,L){E.dispatchEvent(L)}remove(E){E.parentNode&&E.parentNode.removeChild(E)}createElement(E,L){return(L=L||this.getDefaultDocument()).createElement(E)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(E){return E.nodeType===Node.ELEMENT_NODE}isShadowRoot(E){return E instanceof DocumentFragment}getGlobalEventTarget(E,L){return"window"===L?window:"document"===L?E:"body"===L?E.body:null}getBaseHref(E){const L=function TM(){return Qd=Qd||document.querySelector("base"),Qd?Qd.getAttribute("href"):null}();return null==L?null:function MM(k){P0=P0||document.createElement("a"),P0.setAttribute("href",k);const E=P0.pathname;return"/"===E.charAt(0)?E:`/${E}`}(L)}resetBaseElement(){Qd=null}getUserAgent(){return window.navigator.userAgent}getCookie(E){return function BT(k,E){E=encodeURIComponent(E);for(const L of k.split(";")){const W=L.indexOf("="),[se,me]=-1==W?[L,""]:[L.slice(0,W),L.slice(W+1)];if(se.trim()===E)return decodeURIComponent(me)}return null}(document.cookie,E)}}let P0,Qd=null;const Pb=new la("TRANSITION_ID"),AM=[{provide:Nx,useFactory:function kM(k,E,L){return()=>{L.get(v0).donePromise.then(()=>{const W=Xd(),se=E.querySelectorAll(`style[ng-transition="${k}"]`);for(let me=0;me<se.length;me++)W.remove(se[me])})}},deps:[Pb,vc,Pl],multi:!0}];let SM=(()=>{class k{build(){return new XMLHttpRequest}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})();const O0=new la("EventManagerPlugins");let R0=(()=>{class k{constructor(L,W){this._zone=W,this._eventNameToPlugin=new Map,L.forEach(se=>se.manager=this),this._plugins=L.slice().reverse()}addEventListener(L,W,se){return this._findPluginFor(W).addEventListener(L,W,se)}addGlobalEventListener(L,W,se){return this._findPluginFor(W).addGlobalEventListener(L,W,se)}getZone(){return this._zone}_findPluginFor(L){const W=this._eventNameToPlugin.get(L);if(W)return W;const se=this._plugins;for(let me=0;me<se.length;me++){const Le=se[me];if(Le.supports(L))return this._eventNameToPlugin.set(L,Le),Le}throw new Error(`No event manager plugin found for event ${L}`)}}return k.\u0275fac=function(L){return new(L||k)(ao(O0),ao(il))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})();class Ob{constructor(E){this._doc=E}addGlobalEventListener(E,L,W){const se=Xd().getGlobalEventTarget(this._doc,E);if(!se)throw new Error(`Unsupported event target ${se} for event ${L}`);return this.addEventListener(se,L,W)}}let Rb=(()=>{class k{constructor(){this._stylesSet=new Set}addStyles(L){const W=new Set;L.forEach(se=>{this._stylesSet.has(se)||(this._stylesSet.add(se),W.add(se))}),this.onStylesAdded(W)}onStylesAdded(L){}getAllStyles(){return Array.from(this._stylesSet)}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})(),ep=(()=>{class k extends Rb{constructor(L){super(),this._doc=L,this._hostNodes=new Map,this._hostNodes.set(L.head,[])}_addStylesToHost(L,W,se){L.forEach(me=>{const Le=this._doc.createElement("style");Le.textContent=me,se.push(W.appendChild(Le))})}addHost(L){const W=[];this._addStylesToHost(this._stylesSet,L,W),this._hostNodes.set(L,W)}removeHost(L){const W=this._hostNodes.get(L);W&&W.forEach(Fb),this._hostNodes.delete(L)}onStylesAdded(L){this._hostNodes.forEach((W,se)=>{this._addStylesToHost(L,se,W)})}ngOnDestroy(){this._hostNodes.forEach(L=>L.forEach(Fb))}}return k.\u0275fac=function(L){return new(L||k)(ao(vc))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})();function Fb(k){Xd().remove(k)}const tv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nv=/%COMP%/g;function F0(k,E,L){for(let W=0;W<E.length;W++){let se=E[W];Array.isArray(se)?F0(k,se,L):(se=se.replace(nv,k),L.push(se))}return L}function Bb(k){return E=>{if("__ngUnwrap__"===E)return k;!1===k(E)&&(E.preventDefault(),E.returnValue=!1)}}let rv=(()=>{class k{constructor(L,W,se){this.eventManager=L,this.sharedStylesHost=W,this.appId=se,this.rendererByCompId=new Map,this.defaultRenderer=new iv(L)}createRenderer(L,W){if(!L||!W)return this.defaultRenderer;switch(W.encapsulation){case ua.Emulated:{let se=this.rendererByCompId.get(W.id);return se||(se=new OM(this.eventManager,this.sharedStylesHost,W,this.appId),this.rendererByCompId.set(W.id,se)),se.applyToHost(L),se}case 1:case ua.ShadowDom:return new RM(this.eventManager,this.sharedStylesHost,L,W);default:if(!this.rendererByCompId.has(W.id)){const se=F0(W.id,W.styles,[]);this.sharedStylesHost.addStyles(se),this.rendererByCompId.set(W.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return k.\u0275fac=function(L){return new(L||k)(ao(R0),ao(ep),ao(Wd))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})();class iv{constructor(E){this.eventManager=E,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(E,L){return L?document.createElementNS(tv[L]||L,E):document.createElement(E)}createComment(E){return document.createComment(E)}createText(E){return document.createTextNode(E)}appendChild(E,L){(Vb(E)?E.content:E).appendChild(L)}insertBefore(E,L,W){E&&(Vb(E)?E.content:E).insertBefore(L,W)}removeChild(E,L){E&&E.removeChild(L)}selectRootElement(E,L){let W="string"==typeof E?document.querySelector(E):E;if(!W)throw new Error(`The selector "${E}" did not match any elements`);return L||(W.textContent=""),W}parentNode(E){return E.parentNode}nextSibling(E){return E.nextSibling}setAttribute(E,L,W,se){if(se){L=se+":"+L;const me=tv[se];me?E.setAttributeNS(me,L,W):E.setAttribute(L,W)}else E.setAttribute(L,W)}removeAttribute(E,L,W){if(W){const se=tv[W];se?E.removeAttributeNS(se,L):E.removeAttribute(`${W}:${L}`)}else E.removeAttribute(L)}addClass(E,L){E.classList.add(L)}removeClass(E,L){E.classList.remove(L)}setStyle(E,L,W,se){se&(Ns.DashCase|Ns.Important)?E.style.setProperty(L,W,se&Ns.Important?"important":""):E.style[L]=W}removeStyle(E,L,W){W&Ns.DashCase?E.style.removeProperty(L):E.style[L]=""}setProperty(E,L,W){E[L]=W}setValue(E,L){E.nodeValue=L}listen(E,L,W){return"string"==typeof E?this.eventManager.addGlobalEventListener(E,L,Bb(W)):this.eventManager.addEventListener(E,L,Bb(W))}}function Vb(k){return"TEMPLATE"===k.tagName&&void 0!==k.content}class OM extends iv{constructor(E,L,W,se){super(E),this.component=W;const me=F0(se+"-"+W.id,W.styles,[]);L.addStyles(me),this.contentAttr=function LM(k){return"_ngcontent-%COMP%".replace(nv,k)}(se+"-"+W.id),this.hostAttr=function IM(k){return"_nghost-%COMP%".replace(nv,k)}(se+"-"+W.id)}applyToHost(E){super.setAttribute(E,this.hostAttr,"")}createElement(E,L){const W=super.createElement(E,L);return super.setAttribute(W,this.contentAttr,""),W}}class RM extends iv{constructor(E,L,W,se){super(E),this.sharedStylesHost=L,this.hostEl=W,this.shadowRoot=W.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const me=F0(se.id,se.styles,[]);for(let Le=0;Le<me.length;Le++){const He=document.createElement("style");He.textContent=me[Le],this.shadowRoot.appendChild(He)}}nodeOrShadowRoot(E){return E===this.hostEl?this.shadowRoot:E}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(E,L){return super.appendChild(this.nodeOrShadowRoot(E),L)}insertBefore(E,L,W){return super.insertBefore(this.nodeOrShadowRoot(E),L,W)}removeChild(E,L){return super.removeChild(this.nodeOrShadowRoot(E),L)}parentNode(E){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(E)))}}let FM=(()=>{class k extends Ob{constructor(L){super(L)}supports(L){return!0}addEventListener(L,W,se){return L.addEventListener(W,se,!1),()=>this.removeEventListener(L,W,se)}removeEventListener(L,W,se){return L.removeEventListener(W,se)}}return k.\u0275fac=function(L){return new(L||k)(ao(vc))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})();const Ub=["alt","control","meta","shift"],NM={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hb={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},BM={alt:k=>k.altKey,control:k=>k.ctrlKey,meta:k=>k.metaKey,shift:k=>k.shiftKey};let jM=(()=>{class k extends Ob{constructor(L){super(L)}supports(L){return null!=k.parseEventName(L)}addEventListener(L,W,se){const me=k.parseEventName(W),Le=k.eventCallback(me.fullKey,se,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xd().onAndCancel(L,me.domEventName,Le))}static parseEventName(L){const W=L.toLowerCase().split("."),se=W.shift();if(0===W.length||"keydown"!==se&&"keyup"!==se)return null;const me=k._normalizeKey(W.pop());let Le="";if(Ub.forEach(ot=>{const wt=W.indexOf(ot);wt>-1&&(W.splice(wt,1),Le+=ot+".")}),Le+=me,0!=W.length||0===me.length)return null;const He={};return He.domEventName=se,He.fullKey=Le,He}static getEventFullKey(L){let W="",se=function VM(k){let E=k.key;if(null==E){if(E=k.keyIdentifier,null==E)return"Unidentified";E.startsWith("U+")&&(E=String.fromCharCode(parseInt(E.substring(2),16)),3===k.location&&Hb.hasOwnProperty(E)&&(E=Hb[E]))}return NM[E]||E}(L);return se=se.toLowerCase()," "===se?se="space":"."===se&&(se="dot"),Ub.forEach(me=>{me!=se&&(0,BM[me])(L)&&(W+=me+".")}),W+=se,W}static eventCallback(L,W,se){return me=>{k.getEventFullKey(me)===L&&se.runGuarded(()=>W(me))}}static _normalizeKey(L){return"esc"===L?"escape":L}}return k.\u0275fac=function(L){return new(L||k)(ao(vc))},k.\u0275prov=Dn({token:k,factory:k.\u0275fac}),k})();const GM=Xx($5,"browser",[{provide:Vx,useValue:"browser"},{provide:jx,useValue:function UM(){ev.makeCurrent()},multi:!0},{provide:vc,useFactory:function qM(){return function hu(k){Vf=k}(document),document},deps:[]}]),Gb=new la(""),Yb=[{provide:y0,useClass:class EM{addToWindow(E){sa.getAngularTestability=(W,se=!0)=>{const me=E.findTestabilityInTree(W,se);if(null==me)throw new Error("Could not find testability for element.");return me},sa.getAllAngularTestabilities=()=>E.getAllTestabilities(),sa.getAllAngularRootElements=()=>E.getAllRootElements(),sa.frameworkStabilizers||(sa.frameworkStabilizers=[]),sa.frameworkStabilizers.push(W=>{const se=sa.getAllAngularTestabilities();let me=se.length,Le=!1;const He=function(ot){Le=Le||ot,me--,0==me&&W(Le)};se.forEach(function(ot){ot.whenStable(He)})})}findTestabilityInTree(E,L,W){return null==L?null:E.getTestability(L)??(W?Xd().isShadowRoot(L)?this.findTestabilityInTree(E,L.host,!0):this.findTestabilityInTree(E,L.parentElement,!0):null)}},deps:[]},{provide:Yx,useClass:Im,deps:[il,Pm,y0]},{provide:Im,useClass:Im,deps:[il,Pm,y0]}],Wb=[{provide:Cc,useValue:"root"},{provide:Ti,useFactory:function HM(){return new Ti},deps:[]},{provide:O0,useClass:FM,multi:!0,deps:[vc,il,Vx]},{provide:O0,useClass:jM,multi:!0,deps:[vc]},{provide:rv,useClass:rv,deps:[R0,ep,Wd]},{provide:md,useExisting:rv},{provide:Rb,useExisting:ep},{provide:ep,useClass:ep,deps:[vc]},{provide:R0,useClass:R0,deps:[O0,il]},{provide:class _M{},useClass:SM,deps:[]},[]];let YM=(()=>{class k{constructor(L){}static withServerTransition(L){return{ngModule:k,providers:[{provide:Wd,useValue:L.appId},{provide:Pb,useExisting:Wd},AM]}}}return k.\u0275fac=function(L){return new(L||k)(ao(Gb,12))},k.\u0275mod=Os({type:k}),k.\u0275inj=rr({providers:[...Wb,...Yb],imports:[Jd,K5]}),k})();typeof window<"u"&&window;const $b={now:()=>($b.delegate||Date).now(),delegate:void 0};class n4 extends X{constructor(E=1/0,L=1/0,W=$b){super(),this._bufferSize=E,this._windowTime=L,this._timestampProvider=W,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=L===1/0,this._bufferSize=Math.max(1,E),this._windowTime=Math.max(1,L)}next(E){const{isStopped:L,_buffer:W,_infiniteTimeWindow:se,_timestampProvider:me,_windowTime:Le}=this;L||(W.push(E),!se&&W.push(me.now()+Le)),this._trimBuffer(),super.next(E)}_subscribe(E){this._throwIfClosed(),this._trimBuffer();const L=this._innerSubscribe(E),{_infiniteTimeWindow:W,_buffer:se}=this,me=se.slice();for(let Le=0;Le<me.length&&!E.closed;Le+=W?1:2)E.next(me[Le]);return this._checkFinalizedStatuses(E),L}_trimBuffer(){const{_bufferSize:E,_timestampProvider:L,_buffer:W,_infiniteTimeWindow:se}=this,me=(se?1:2)*E;if(E<1/0&&me<W.length&&W.splice(0,W.length-me),!se){const Le=L.now();let He=0;for(let ot=1;ot<W.length&&W[ot]<=Le;ot+=2)He=ot;He&&W.splice(0,He+1)}}}const z0={schedule(k,E){const L=setTimeout(k,E);return()=>clearTimeout(L)},scheduleBeforeRender(k){if(typeof window>"u")return z0.schedule(k,0);if(typeof window.requestAnimationFrame>"u")return z0.schedule(k,16);const E=window.requestAnimationFrame(k);return()=>window.cancelAnimationFrame(E)}};let sv;function h4(k,E,L){let W=L;return function a4(k){return!!k&&k.nodeType===Node.ELEMENT_NODE}(k)&&E.some((se,me)=>!("*"===se||!function s4(k,E){if(!sv){const L=Element.prototype;sv=L.matches||L.matchesSelector||L.mozMatchesSelector||L.msMatchesSelector||L.oMatchesSelector||L.webkitMatchesSelector}return k.nodeType===Node.ELEMENT_NODE&&sv.call(k,E)}(k,se)||(W=me,0))),W}class p4{constructor(E,L){this.componentFactory=L.get(dl).resolveComponentFactory(E)}create(E){return new g4(this.componentFactory,E)}}class g4{constructor(E,L){this.componentFactory=E,this.injector=L,this.eventEmitters=new n4(1),this.events=this.eventEmitters.pipe(function r4(k,E){return U((L,W)=>{let se=null,me=0,Le=!1;const He=()=>Le&&!se&&W.complete();L.subscribe(V(W,ot=>{se?.unsubscribe();let wt=0;const $t=me++;hn(k(ot,$t)).subscribe(se=V(W,gn=>W.next(E?E(ot,gn,$t,wt++):gn),()=>{se=null,He()}))},()=>{Le=!0,He()}))})}(W=>Un(...W))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:W})=>W)),this.ngZone=this.injector.get(il),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(E){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(E)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=z0.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(E){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(E):this.componentRef.instance[E])}setInputValue(E,L){this.runInZone(()=>{null!==this.componentRef?function l4(k,E){return k===E||k!=k&&E!=E}(L,this.getInputValue(E))&&(void 0!==L||!this.unchangedInputs.has(E))||(this.recordInputChange(E,L),this.unchangedInputs.delete(E),this.hasInputChanges=!0,this.componentRef.instance[E]=L,this.scheduleDetectChanges()):this.initialInputValues.set(E,L)})}initializeComponent(E){const L=Pl.create({providers:[],parent:this.injector}),W=function f4(k,E){const L=k.childNodes,W=E.map(()=>[]);let se=-1;E.some((me,Le)=>"*"===me&&(se=Le,!0));for(let me=0,Le=L.length;me<Le;++me){const He=L[me],ot=h4(He,E,se);-1!==ot&&W[ot].push(He)}return W}(E,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(L,W,E),this.viewChangeDetectorRef=this.componentRef.injector.get(ab),this.implementsOnChanges=function o4(k){return"function"==typeof k}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(x0).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:E})=>{this.initialInputValues.has(E)&&this.setInputValue(E,this.initialInputValues.get(E))}),this.initialInputValues.clear()}initializeOutputs(E){const L=this.componentFactory.outputs.map(({propName:W,templateName:se})=>E.instance[W].pipe(ie(Le=>({name:se,value:Le}))));this.eventEmitters.next(L)}callNgOnChanges(E){if(!this.implementsOnChanges||null===this.inputChanges)return;const L=this.inputChanges;this.inputChanges=null,E.instance.ngOnChanges(L)}markViewForCheck(E){this.hasInputChanges&&(this.hasInputChanges=!1,E.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=z0.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(E,L){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const W=this.inputChanges[E];if(W)return void(W.currentValue=L);const se=this.unchangedInputs.has(E),me=se?void 0:this.getInputValue(E);this.inputChanges[E]=new dr(me,L,se)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(E){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(E):E()}}class m4 extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function v4(k,E){const L=function c4(k,E){return E.get(dl).resolveComponentFactory(k).inputs}(k,E.injector),W=E.strategyFactory||new p4(k,E.injector),se=function u4(k){const E={};return k.forEach(({propName:L,templateName:W})=>{E[function i4(k){return k.replace(/[A-Z]/g,E=>`-${E.toLowerCase()}`)}(W)]=L}),E}(L);class me extends m4{constructor(He){super(),this.injector=He}get ngElementStrategy(){if(!this._ngElementStrategy){const He=this._ngElementStrategy=W.create(this.injector||E.injector);L.forEach(({propName:ot})=>{if(!this.hasOwnProperty(ot))return;const wt=this[ot];delete this[ot],He.setInputValue(ot,wt)})}return this._ngElementStrategy}attributeChangedCallback(He,ot,wt,$t){this.ngElementStrategy.setInputValue(se[He],wt)}connectedCallback(){let He=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),He=!0),this.ngElementStrategy.connect(this),He||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(He=>{const ot=new CustomEvent(He.name,{detail:He.value});this.dispatchEvent(ot)})}}return me.observedAttributes=Object.keys(se),L.forEach(({propName:Le})=>{Object.defineProperty(me.prototype,Le,{get(){return this.ngElementStrategy.getInputValue(Le)},set(He){this.ngElementStrategy.setInputValue(Le,He)},configurable:!0,enumerable:!0})}),me}const y4=["plot"],x4=["*"];class ro{static setModuleName(E){ro.moduleName=E}static getModuleName(){return ro.moduleName}static setPlotly(E){if("object"==typeof E&&"function"!=typeof E.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");ro.plotly=E}static insert(E){return-1===ro.instances.indexOf(E)&&ro.instances.push(E),E}static remove(E){const L=ro.instances.indexOf(E);L>=0&&(ro.instances.splice(L,1),ro.plotly.purge(E))}getInstanceByDivId(E){for(const L of ro.instances)if(L&&L.id===E)return L}getPlotly(){return be(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(typeof ro.plotly>"u")throw new Error("ViaCDN"===ro.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return ro.plotly}waitFor(E){return new Promise(L=>{const W=()=>{E()?L():setTimeout(W,10)};W()})}newPlot(E,L,W,se,me){return be(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),me){const Le={data:L,layout:W,config:se,frames:me};return this._getPlotly().newPlot(E,Le).then(()=>ro.insert(E))}return this._getPlotly().newPlot(E,L,W,se).then(()=>ro.insert(E))})}plot(E,L,W,se,me){if(me){const Le={data:L,layout:W,config:se,frames:me};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(E,Le):this._getPlotly().newPlot(E,Le)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(E,L,W,se):this._getPlotly().newPlot(E,L,W,se)}update(E,L,W,se,me){if(me){const Le={data:L,layout:W,config:se,frames:me};return this._getPlotly().react(E,Le)}return this._getPlotly().react(E,L,W,se)}resize(E){return this._getPlotly().Plots.resize(E)}}ro.\u0275fac=function(E){return new(E||ro)},ro.instances=[],ro.plotly=void 0,ro.moduleName=void 0,ro.\u0275prov=Dn({factory:function(){return new ro},token:ro,providedIn:"root"});let b4=(()=>{class k{constructor(L,W,se){this.plotly=L,this.iterableDiffers=W,this.keyValueDiffers=se,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new Ia,this.update=new Ia,this.purge=new Ia,this.error=new Ia,this.afterExport=new Ia,this.afterPlot=new Ia,this.animated=new Ia,this.animatingFrame=new Ia,this.animationInterrupted=new Ia,this.autoSize=new Ia,this.beforeExport=new Ia,this.buttonClicked=new Ia,this.click=new Ia,this.plotlyClick=new Ia,this.clickAnnotation=new Ia,this.deselect=new Ia,this.doubleClick=new Ia,this.framework=new Ia,this.hover=new Ia,this.legendClick=new Ia,this.legendDoubleClick=new Ia,this.react=new Ia,this.relayout=new Ia,this.restyle=new Ia,this.redraw=new Ia,this.selected=new Ia,this.selecting=new Ia,this.sliderChange=new Ia,this.sliderEnd=new Ia,this.sliderStart=new Ia,this.transitioning=new Ia,this.transitionInterrupted=new Ia,this.unhover=new Ia,this.relayouting=new Ia,this.treemapclick=new Ia,this.sunburstclick=new Ia,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const L=this.createFigure();this.initialized.emit(L)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const L=this.createFigure();this.purge.emit(L),ro.remove(this.plotlyInstance)}ngOnChanges(L){let W=!1;const se=L.revision;se&&!se.isFirstChange()&&(W=!0);const me=L.debug;me&&!me.isFirstChange()&&(W=!0),W&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let L=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(L=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(L=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),L&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let L=[this.defaultClassName];return Array.isArray(this.className)?L=L.concat(this.className):this.className&&L.push(this.className),L.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(L=>{this.plotlyInstance=L,this.getWindow().gd=this.debug?L:void 0,this.eventNames.forEach(W=>{const se=`plotly_${W.toLowerCase()}`;L.on(se,me=>this[W].emit(me))}),L.on("plotly_click",W=>{this.click.emit(W),this.plotlyClick.emit(W)}),this.updateWindowResizeHandler()},L=>{console.error("Error while plotting:",L),this.error.emit(L)})}createFigure(){const L=this.plotlyInstance;return{data:L.data,layout:L.layout,frames:L._transitionData?L._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const W=new Error("Plotly component wasn't initialized");throw this.error.emit(W),W}const L=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,L,this.config,this.frames).then(()=>{const W=this.createFigure();this.update.emit(W)},W=>{console.error("Error while updating plot:",W),this.error.emit(W)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(L,W){const se=Object.assign({},W,{uid:""});return JSON.stringify(se)}}return k.\u0275fac=function(L){return new(L||k)(Ga(ro),Ga(Zd),Ga(Lh))},k.\u0275cmp=fl({type:k,selectors:[["plotly-plot"]],viewQuery:function(L,W){if(1&L&&gx(y4,7),2&L){let se;px(se=function mx(){return function W3(k,E){return k[19].queries[E].queryList}(Yr(),P())}())&&(W.plotEl=se.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[Xy([ro]),wi],ngContentSelectors:x4,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(L,W){1&L&&(function S1(k){const E=Yr()[16][6];if(!E.projection){const W=E.projection=Wu(k?k.length:1,null),se=W.slice();let me=E.child;for(;null!==me;){const Le=k?b2(me,k):0;null!==Le&&(se[Le]?se[Le].projectionNext=me:W[Le]=me,se[Le]=me),me=me.next}}}(),Fd(0,"div",0,1),function C1(k,E=0,L){const W=Yr(),se=da(),me=dh(se,22+k,16,null,L||null);null===me.projection&&(me.projection=E),Qs(),64!=(64&me.flags)&&function vd(k,E,L){yd(E[11],0,E,L,ih(k,L,E),Go(L.parent||E[6],L,E))}(se,W,me)}(2),zd()),2&L&&(l0("ngClass",W.getClassName())("ngStyle",W.style),Qg("id",W.divId))},dependencies:[Tb,Cb],encapsulation:2}),k})(),Ih=(()=>{class k{constructor(){}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275mod=Os({type:k}),k.\u0275inj=rr({providers:[ro],imports:[Jd]}),k})(),Kb=(()=>{class k{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");ro.setPlotly(k.plotlyjs)}isValid(){return void 0!==k.plotlyjs&&("function"==typeof k.plotlyjs.plot||"function"==typeof k.plotlyjs.newPlot)}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275mod=Os({type:k}),k.\u0275inj=rr({providers:[ro],imports:[Jd,Ih,Ih]}),k.plotlyjs={},k})(),_4=(()=>{class k{constructor(){this.data=[{type:"sankey",orientation:"h",node:{pad:15,thickness:30,line:{color:"black",width:.5},label:["A1","A2","B1","B2","C1","C2"],color:["blue","blue","blue","blue","blue","blue"]},link:{source:[0,1,0,2,3,3],target:[2,3,3,4,4,5],value:[8,4,2,8,4,2]}}],this.layout={title:"Basic Sankey",font:{size:10}}}ngOnInit(){}}return k.\u0275fac=function(L){return new(L||k)},k.\u0275cmp=fl({type:k,selectors:[["app-sankey"]],decls:3,vars:2,consts:[[3,"data","layout"]],template:function(L,W){1&L&&(Fd(0,"p"),function ey(k,E=""){const L=Yr(),W=da(),se=k+22,me=W.firstCreatePass?dh(W,se,1,E,null):W.data[se],Le=L[se]=function Oc(k,E){return k.createText(E)}(L[11],E);kf(W,L,Le,me),_a(me,!1)}(1,"sankey works!"),zd(),tm(2,"plotly-plot",0)),2&L&&(function ru(k){Md(da(),Yr(),Et()+k,!1)}(2),l0("data",W.data)("layout",W.layout))},dependencies:[b4]}),k})();var w4=re(102);Kb.plotlyjs=w4;let T4=(()=>{class k{constructor(L){this.injector=L}ngDoBootstrap(){const L=[{componet:_4,name:"fmt-sankey"}];for(const W of L){const se=v4(W.componet,{injector:this.injector});customElements.define(W.name,se)}}}return k.\u0275fac=function(L){return new(L||k)(ao(Pl))},k.\u0275mod=Os({type:k}),k.\u0275inj=rr({imports:[YM,Kb]}),k})();(function R5(){nb=!1})(),GM().bootstrapModule(T4).catch(k=>console.error(k))},102:Ph=>{Ph.exports=function v(re,ne,g){function m(e,r){if(!ne[e]){if(!re[e]){if(b)return b(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var t=ne[e]={exports:{}};re[e][0].call(t.exports,function(p){return m(re[e][1][p]||p)},t,t.exports,v,re,ne,g)}return ne[e].exports}for(var b=void 0,y=0;y<g.length;y++)m(g[y]);return m}({1:[function(v,re,ne){"use strict";var g=v("../src/lib"),m={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var b in m){var y=b.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");g.addStyleRule(y,m[b])}},{"../src/lib":515}],2:[function(v,re,ne){"use strict";re.exports=v("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(v,re,ne){"use strict";re.exports=v("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(v,re,ne){"use strict";re.exports=v("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(v,re,ne){"use strict";re.exports=v("../src/traces/box")},{"../src/traces/box":688}],6:[function(v,re,ne){"use strict";re.exports=v("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(v,re,ne){"use strict";re.exports=v("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(v,re,ne){"use strict";re.exports=v("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(v,re,ne){"use strict";re.exports=v("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(v,re,ne){"use strict";re.exports=v("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(v,re,ne){"use strict";re.exports=v("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(v,re,ne){"use strict";re.exports=v("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(v,re,ne){"use strict";re.exports=v("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(v,re,ne){"use strict";re.exports=v("../src/core")},{"../src/core":493}],15:[function(v,re,ne){"use strict";re.exports=v("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(v,re,ne){"use strict";re.exports=v("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(v,re,ne){"use strict";re.exports=v("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(v,re,ne){"use strict";re.exports=v("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(v,re,ne){"use strict";re.exports=v("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(v,re,ne){"use strict";re.exports=v("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(v,re,ne){"use strict";re.exports=v("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(v,re,ne){"use strict";re.exports=v("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(v,re,ne){"use strict";re.exports=v("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(v,re,ne){"use strict";re.exports=v("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(v,re,ne){"use strict";re.exports=v("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(v,re,ne){"use strict";re.exports=v("../src/traces/image")},{"../src/traces/image":861}],27:[function(v,re,ne){"use strict";var g=v("./core");g.register([v("./bar"),v("./box"),v("./heatmap"),v("./histogram"),v("./histogram2d"),v("./histogram2dcontour"),v("./contour"),v("./scatterternary"),v("./violin"),v("./funnel"),v("./waterfall"),v("./image"),v("./pie"),v("./sunburst"),v("./treemap"),v("./icicle"),v("./funnelarea"),v("./scatter3d"),v("./surface"),v("./isosurface"),v("./volume"),v("./mesh3d"),v("./cone"),v("./streamtube"),v("./scattergeo"),v("./choropleth"),v("./scattergl"),v("./splom"),v("./pointcloud"),v("./heatmapgl"),v("./parcoords"),v("./parcats"),v("./scattermapbox"),v("./choroplethmapbox"),v("./densitymapbox"),v("./sankey"),v("./indicator"),v("./table"),v("./carpet"),v("./scattercarpet"),v("./contourcarpet"),v("./ohlc"),v("./candlestick"),v("./scatterpolar"),v("./scatterpolargl"),v("./barpolar"),v("./scattersmith"),v("./aggregate"),v("./filter"),v("./groupby"),v("./sort"),v("./calendars")]),re.exports=g},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(v,re,ne){"use strict";re.exports=v("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(v,re,ne){"use strict";re.exports=v("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(v,re,ne){"use strict";re.exports=v("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(v,re,ne){"use strict";re.exports=v("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(v,re,ne){"use strict";re.exports=v("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(v,re,ne){"use strict";re.exports=v("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(v,re,ne){"use strict";re.exports=v("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(v,re,ne){"use strict";re.exports=v("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(v,re,ne){"use strict";re.exports=v("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(v,re,ne){"use strict";re.exports=v("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(v,re,ne){"use strict";re.exports=v("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(v,re,ne){"use strict";re.exports=v("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(v,re,ne){"use strict";re.exports=v("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(v,re,ne){"use strict";re.exports=v("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(v,re,ne){"use strict";re.exports=v("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(v,re,ne){"use strict";re.exports=v("../src/traces/table")},{"../src/traces/table":1082}],52:[function(v,re,ne){"use strict";re.exports=v("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(v,re,ne){"use strict";re.exports=v("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(v,re,ne){"use strict";re.exports=v("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(v,re,ne){"use strict";re.exports=v("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(v,re,ne){var g,m;g=this,m=function(g,m,b,y,e){"use strict";function r(oe){return oe.target.depth}function n(oe,le){return oe.sourceLinks.length?oe.depth:le-1}function a(oe){return function(){return oe}}e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(oe){return typeof oe}:function(oe){return oe&&"function"==typeof Symbol&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe};function p(oe,le){return i(oe.source,le.source)||oe.index-le.index}function s(oe,le){return i(oe.target,le.target)||oe.index-le.index}function i(oe,le){return oe.partOfCycle===le.partOfCycle?oe.y0-le.y0:"top"===oe.circularLinkType||"bottom"===le.circularLinkType?-1:1}function f(oe){return oe.value}function c(oe){return(oe.y0+oe.y1)/2}function l(oe){return c(oe.source)}function h(oe){return c(oe.target)}function d(oe){return oe.index}function o(oe){return oe.nodes}function x(oe){return oe.links}function u(oe,le){var de=oe.get(le);if(!de)throw new Error("missing: "+le);return de}function T(oe,le){return le(oe)}function _(oe,le,de){var fe=0;if(null===de){for(var be=[],he=0;he<oe.links.length;he++){var _e=oe.links[he],Ce=_e.source.index,Ee=_e.target.index;be[Ce]||(be[Ce]=[]),be[Ee]||(be[Ee]=[]),-1===be[Ce].indexOf(Ee)&&be[Ce].push(Ee)}var Ae=e(be);Ae.sort(function(Te,Ie){return Te.length-Ie.length});var ze={};for(he=0;he<Ae.length;he++){var ve=Ae[he].slice(-2);ze[ve[0]]||(ze[ve[0]]={}),ze[ve[0]][ve[1]]=!0}oe.links.forEach(function(Te){var Ie=Te.target.index,De=Te.source.index;Ie===De||ze[De]&&ze[De][Ie]?(Te.circular=!0,Te.circularLinkID=fe,fe+=1):Te.circular=!1})}else oe.links.forEach(function(Te){Te.source[de]<Te.target[de]?Te.circular=!1:(Te.circular=!0,Te.circularLinkID=fe,fe+=1)})}function w(oe,le){var de=0,fe=0;oe.links.forEach(function(be){be.circular&&(be.circularLinkType=be.source.circularLinkType||be.target.circularLinkType?be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:de<fe?"top":"bottom","top"==be.circularLinkType?de+=1:fe+=1,oe.nodes.forEach(function(he){T(he,le)!=T(be.source,le)&&T(he,le)!=T(be.target,le)||(he.circularLinkType=be.circularLinkType)}))}),oe.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),ee(be,le)&&(be.circularLinkType=be.source.circularLinkType))})}function M(oe){var le=Math.abs(oe.y1-oe.y0),de=Math.abs(oe.target.x0-oe.source.x1);return Math.atan(de/le)}function I(oe,le){var de=0;oe.sourceLinks.forEach(function(be){de=be.circular&&!ee(be,le)?de+1:de});var fe=0;return oe.targetLinks.forEach(function(be){fe=be.circular&&!ee(be,le)?fe+1:fe}),de+fe}function S(oe){var de=0;oe.source.sourceLinks.forEach(function(he){de=he.circular?de+1:de});var be=0;return oe.target.targetLinks.forEach(function(he){be=he.circular?be+1:be}),!(de>1||be>1)}function R(oe,le,de){return oe.sort(C),oe.forEach(function(fe,be){var he,_e,Ce=0;if(ee(fe,de)&&S(fe))fe.circularPathData.verticalBuffer=Ce+fe.width/2;else{for(var Ee=0;Ee<be;Ee++)if(!((he=oe[be]).source.column<(_e=oe[Ee]).target.column||he.target.column>_e.source.column)){var Ae=oe[Ee].circularPathData.verticalBuffer+oe[Ee].width/2+le;Ce=Ae>Ce?Ae:Ce}fe.circularPathData.verticalBuffer=Ce+fe.width/2}}),oe}function O(oe,le,de,fe){var be=m.min(oe.links,function(he){return he.source.y0});oe.links.forEach(function(he){he.circular&&(he.circularPathData={})}),R(oe.links.filter(function(he){return"top"==he.circularLinkType}),le,fe),R(oe.links.filter(function(he){return"bottom"==he.circularLinkType}),le,fe),oe.links.forEach(function(he){if(he.circular){if(he.circularPathData.arcRadius=he.width+10,he.circularPathData.leftNodeBuffer=5,he.circularPathData.rightNodeBuffer=5,he.circularPathData.sourceWidth=he.source.x1-he.source.x0,he.circularPathData.sourceX=he.source.x0+he.circularPathData.sourceWidth,he.circularPathData.targetX=he.target.x0,he.circularPathData.sourceY=he.y0,he.circularPathData.targetY=he.y1,ee(he,fe)&&S(he))he.circularPathData.leftSmallArcRadius=10+he.width/2,he.circularPathData.leftLargeArcRadius=10+he.width/2,he.circularPathData.rightSmallArcRadius=10+he.width/2,he.circularPathData.rightLargeArcRadius=10+he.width/2,"bottom"==he.circularLinkType?(he.circularPathData.verticalFullExtent=he.source.y1+25+he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.rightLargeArcRadius):(he.circularPathData.verticalFullExtent=he.source.y0-25-he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.rightLargeArcRadius);else{var _e=he.source.column,Ce=he.circularLinkType,Ee=oe.links.filter(function(ve){return ve.source.column==_e&&ve.circularLinkType==Ce});Ee.sort("bottom"==he.circularLinkType?B:D);var Ae=0;Ee.forEach(function(ve,Te){ve.circularLinkID==he.circularLinkID&&(he.circularPathData.leftSmallArcRadius=10+he.width/2+Ae,he.circularPathData.leftLargeArcRadius=10+he.width/2+Te*le+Ae),Ae+=ve.width}),_e=he.target.column,(Ee=oe.links.filter(function(ve){return ve.target.column==_e&&ve.circularLinkType==Ce})).sort("bottom"==he.circularLinkType?Y:z),Ae=0,Ee.forEach(function(ve,Te){ve.circularLinkID==he.circularLinkID&&(he.circularPathData.rightSmallArcRadius=10+he.width/2+Ae,he.circularPathData.rightLargeArcRadius=10+he.width/2+Te*le+Ae),Ae+=ve.width}),"bottom"==he.circularLinkType?(he.circularPathData.verticalFullExtent=Math.max(de,he.source.y1,he.target.y1)+25+he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent-he.circularPathData.rightLargeArcRadius):(he.circularPathData.verticalFullExtent=be-25-he.circularPathData.verticalBuffer,he.circularPathData.verticalLeftInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.leftLargeArcRadius,he.circularPathData.verticalRightInnerExtent=he.circularPathData.verticalFullExtent+he.circularPathData.rightLargeArcRadius)}he.circularPathData.leftInnerExtent=he.circularPathData.sourceX+he.circularPathData.leftNodeBuffer,he.circularPathData.rightInnerExtent=he.circularPathData.targetX-he.circularPathData.rightNodeBuffer,he.circularPathData.leftFullExtent=he.circularPathData.sourceX+he.circularPathData.leftLargeArcRadius+he.circularPathData.leftNodeBuffer,he.circularPathData.rightFullExtent=he.circularPathData.targetX-he.circularPathData.rightLargeArcRadius-he.circularPathData.rightNodeBuffer}if(he.circular)he.path="top"==(ve=he).circularLinkType?"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 0 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY-ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 0 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 0 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY-ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 0 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY:"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 1 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY+ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 1 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 1 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY+ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 1 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY;else{var ze=y.linkHorizontal().source(function(ve){return[ve.source.x0+(ve.source.x1-ve.source.x0),ve.y0]}).target(function(ve){return[ve.target.x0,ve.y1]});he.path=ze(he)}var ve})}function C(oe,le){return G(oe)==G(le)?"bottom"==oe.circularLinkType?B(oe,le):D(oe,le):G(le)-G(oe)}function D(oe,le){return oe.y0-le.y0}function B(oe,le){return le.y0-oe.y0}function z(oe,le){return oe.y1-le.y1}function Y(oe,le){return le.y1-oe.y1}function G(oe){return oe.target.column-oe.source.column}function J(oe){return oe.target.x0-oe.source.x1}function te(oe,le){var de=M(oe),fe=J(le)/Math.tan(de);return"up"==H(oe)?oe.y1+fe:oe.y1-fe}function X(oe,le){var de=M(oe),fe=J(le)/Math.tan(de);return"up"==H(oe)?oe.y1-fe:oe.y1+fe}function K(oe,le,de,fe){oe.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var he=be.source.column+1,_e=be.target.column-1,Ce=1,Ee=_e-he+1;for(Ce=1;he<=_e;he++,Ce++)oe.nodes.forEach(function(Ae){if(Ae.column==he){var ze,ve=Ce/(Ee+1),Te=Math.pow(1-ve,3),Ie=3*ve*Math.pow(1-ve,2),De=3*Math.pow(ve,2)*(1-ve),Fe=Math.pow(ve,3),Ue=Te*be.y0+Ie*be.y0+De*be.y1+Fe*be.y1,qe=Ue-be.width/2,je=Ue+be.width/2;qe>Ae.y0&&qe<Ae.y1?(ze=Ae.y1-qe+10,Ae=U(Ae,ze="bottom"==Ae.circularLinkType?ze:-ze,le,de),oe.nodes.forEach(function(rt){T(rt,fe)!=T(Ae,fe)&&rt.column==Ae.column&&ae(Ae,rt)&&U(rt,ze,le,de)})):(je>Ae.y0&&je<Ae.y1||qe<Ae.y0&&je>Ae.y1)&&(Ae=U(Ae,ze=je-Ae.y0+10,le,de),oe.nodes.forEach(function(rt){T(rt,fe)!=T(Ae,fe)&&rt.column==Ae.column&&rt.y0<Ae.y1&&rt.y1>Ae.y1&&U(rt,ze,le,de)}))}})}})}function ae(oe,le){return oe.y0>le.y0&&oe.y0<le.y1||oe.y1>le.y0&&oe.y1<le.y1||oe.y0<le.y0&&oe.y1>le.y1}function U(oe,le,de,fe){return oe.y0+le>=de&&oe.y1+le<=fe&&(oe.y0=oe.y0+le,oe.y1=oe.y1+le,oe.targetLinks.forEach(function(be){be.y1=be.y1+le}),oe.sourceLinks.forEach(function(be){be.y0=be.y0+le})),oe}function V(oe,le,de,fe){oe.nodes.forEach(function(be){fe&&be.y+(be.y1-be.y0)>le&&(be.y=be.y-(be.y+(be.y1-be.y0)-le));var he=oe.links.filter(function(Ee){return T(Ee.source,de)==T(be,de)}),_e=he.length;_e>1&&he.sort(function(Ee,Ae){if(!Ee.circular&&!Ae.circular){if(Ee.target.column==Ae.target.column||!ie(Ee,Ae))return Ee.y1-Ae.y1;if(Ee.target.column>Ae.target.column){var ze=X(Ae,Ee);return Ee.y1-ze}if(Ae.target.column>Ee.target.column)return X(Ee,Ae)-Ae.y1}return Ee.circular&&!Ae.circular?"top"==Ee.circularLinkType?-1:1:Ae.circular&&!Ee.circular?"top"==Ae.circularLinkType?1:-1:Ee.circular&&Ae.circular?Ee.circularLinkType===Ae.circularLinkType&&"top"==Ee.circularLinkType?Ee.target.column===Ae.target.column?Ee.target.y1-Ae.target.y1:Ae.target.column-Ee.target.column:Ee.circularLinkType===Ae.circularLinkType&&"bottom"==Ee.circularLinkType?Ee.target.column===Ae.target.column?Ae.target.y1-Ee.target.y1:Ee.target.column-Ae.target.column:"top"==Ee.circularLinkType?-1:1:void 0});var Ce=be.y0;he.forEach(function(Ee){Ee.y0=Ce+Ee.width/2,Ce+=Ee.width}),he.forEach(function(Ee,Ae){if("bottom"==Ee.circularLinkType){for(var ze=Ae+1,ve=0;ze<_e;ze++)ve+=he[ze].width;Ee.y0=be.y1-ve-Ee.width/2}})})}function q(oe,le,de){oe.nodes.forEach(function(fe){var be=oe.links.filter(function(Ce){return T(Ce.target,de)==T(fe,de)}),he=be.length;he>1&&be.sort(function(Ce,Ee){if(!Ce.circular&&!Ee.circular){if(Ce.source.column==Ee.source.column||!ie(Ce,Ee))return Ce.y0-Ee.y0;if(Ee.source.column<Ce.source.column){var Ae=te(Ee,Ce);return Ce.y0-Ae}if(Ce.source.column<Ee.source.column)return te(Ce,Ee)-Ee.y0}return Ce.circular&&!Ee.circular?"top"==Ce.circularLinkType?-1:1:Ee.circular&&!Ce.circular?"top"==Ee.circularLinkType?1:-1:Ce.circular&&Ee.circular?Ce.circularLinkType===Ee.circularLinkType&&"top"==Ce.circularLinkType?Ce.source.column===Ee.source.column?Ce.source.y1-Ee.source.y1:Ce.source.column-Ee.source.column:Ce.circularLinkType===Ee.circularLinkType&&"bottom"==Ce.circularLinkType?Ce.source.column===Ee.source.column?Ce.source.y1-Ee.source.y1:Ee.source.column-Ce.source.column:"top"==Ce.circularLinkType?-1:1:void 0});var _e=fe.y0;be.forEach(function(Ce){Ce.y1=_e+Ce.width/2,_e+=Ce.width}),be.forEach(function(Ce,Ee){if("bottom"==Ce.circularLinkType){for(var Ae=Ee+1,ze=0;Ae<he;Ae++)ze+=be[Ae].width;Ce.y1=fe.y1-ze-Ce.width/2}})})}function ie(oe,le){return H(oe)==H(le)}function H(oe){return oe.y0-oe.y1>0?"up":"down"}function ee(oe,le){return T(oe.source,le)==T(oe.target,le)}function Q(oe,le,de){var fe=oe.nodes,be=oe.links,he=!1,_e=!1;if(be.forEach(function(Ae){"top"==Ae.circularLinkType?he=!0:"bottom"==Ae.circularLinkType&&(_e=!0)}),0==he||0==_e){var Ce=m.min(fe,function(Ae){return Ae.y0}),Ee=(de-le)/(m.max(fe,function(Ae){return Ae.y1})-Ce);fe.forEach(function(Ae){var ze=(Ae.y1-Ae.y0)*Ee;Ae.y0=(Ae.y0-Ce)*Ee,Ae.y1=Ae.y0+ze}),be.forEach(function(Ae){Ae.y0=(Ae.y0-Ce)*Ee,Ae.y1=(Ae.y1-Ce)*Ee,Ae.width=Ae.width*Ee})}}g.sankeyCircular=function(){var oe,le,de=0,fe=0,be=1,he=1,_e=24,Ce=d,Ee=n,Ae=o,ze=x,ve=32,Te=2,Ie=null;function De(){var Ne={nodes:Ae.apply(null,arguments),links:ze.apply(null,arguments)};Fe(Ne),_(Ne,0,Ie),Ue(Ne),qe(Ne),w(Ne,Ce),je(Ne,ve,Ce),rt(Ne);for(var Be=4,We=0;We<Be;We++)V(Ne,he,Ce),q(Ne,0,Ce),K(Ne,fe,he,Ce),V(Ne,he,Ce),q(Ne,0,Ce);return Q(Ne,fe,he),O(Ne,Te,he,Ce),Ne}function Fe(Ne){Ne.nodes.forEach(function(We,Ye){We.index=Ye,We.sourceLinks=[],We.targetLinks=[]});var Be=b.map(Ne.nodes,Ce);return Ne.links.forEach(function(We,Ye){We.index=Ye;var lt=We.source,mt=We.target;"object"!==(void 0===lt?"undefined":t(lt))&&(lt=We.source=u(Be,lt)),"object"!==(void 0===mt?"undefined":t(mt))&&(mt=We.target=u(Be,mt)),lt.sourceLinks.push(We),mt.targetLinks.push(We)}),Ne}function Ue(Ne){Ne.nodes.forEach(function(Be){Be.partOfCycle=!1,Be.value=Math.max(m.sum(Be.sourceLinks,f),m.sum(Be.targetLinks,f)),Be.sourceLinks.forEach(function(We){We.circular&&(Be.partOfCycle=!0,Be.circularLinkType=We.circularLinkType)}),Be.targetLinks.forEach(function(We){We.circular&&(Be.partOfCycle=!0,Be.circularLinkType=We.circularLinkType)})})}function qe(Ne){var Be,We,Ye;for(Be=Ne.nodes,We=[],Ye=0;Be.length;++Ye,Be=We,We=[])Be.forEach(function(lt){lt.depth=Ye,lt.sourceLinks.forEach(function(mt){We.indexOf(mt.target)<0&&!mt.circular&&We.push(mt.target)})});for(Be=Ne.nodes,We=[],Ye=0;Be.length;++Ye,Be=We,We=[])Be.forEach(function(lt){lt.height=Ye,lt.targetLinks.forEach(function(mt){We.indexOf(mt.source)<0&&!mt.circular&&We.push(mt.source)})});Ne.nodes.forEach(function(lt){lt.column=Math.floor(Ee.call(null,lt,Ye))})}function je(Ne,Be,We){var Ye=b.nest().key(function(Ct){return Ct.column}).sortKeys(m.ascending).entries(Ne.nodes).map(function(Ct){return Ct.values});(function(Ct){if(le){var ct=1/0;Ye.forEach(function(tn){var hn=he*le/(tn.length+1);ct=hn<ct?hn:ct}),oe=ct}var at=m.min(Ye,function(tn){return(he-fe-(tn.length-1)*oe)/m.sum(tn,f)});at*=.3,Ne.links.forEach(function(tn){tn.width=tn.value*at});var tn,hn,cn,yn,en,Xe,St=(hn=0,cn=0,yn=0,en=0,Xe=m.max((tn=Ne).nodes,function(tt){return tt.column}),tn.links.forEach(function(tt){tt.circular&&("top"==tt.circularLinkType?hn+=tt.width:cn+=tt.width,0==tt.target.column&&(en+=tt.width),tt.source.column==Xe&&(yn+=tt.width))}),{top:hn=hn>0?hn+25+10:hn,bottom:cn=cn>0?cn+25+10:cn,left:en=en>0?en+25+10:en,right:yn=yn>0?yn+25+10:yn}),Xt=function(tn,hn){var cn=m.max(tn.nodes,function(ye){return ye.column}),yn=be-de,en=he-fe,Xe=yn/(yn+hn.right+hn.left),tt=en/(en+hn.top+hn.bottom);return de=de*Xe+hn.left,be=0==hn.right?be:be*Xe,fe=fe*tt+hn.top,he*=tt,tn.nodes.forEach(function(ye){ye.x0=de+ye.column*((be-de-_e)/cn),ye.x1=ye.x0+_e}),tt}(Ne,St);at*=Xt,Ne.links.forEach(function(tn){tn.width=tn.value*at}),Ye.forEach(function(tn){var hn=tn.length;tn.forEach(function(cn,yn){cn.depth==Ye.length-1&&1==hn||0==cn.depth&&1==hn?(cn.y0=he/2-cn.value*at,cn.y1=cn.y0+cn.value*at):cn.partOfCycle?0==I(cn,Ct)?(cn.y0=he/2+yn,cn.y1=cn.y0+cn.value*at):"top"==cn.circularLinkType?(cn.y0=fe+yn,cn.y1=cn.y0+cn.value*at):(cn.y0=he-cn.value*at-yn,cn.y1=cn.y0+cn.value*at):0==St.top||0==St.bottom?(cn.y0=(he-fe)/hn*yn,cn.y1=cn.y0+cn.value*at):(cn.y0=(he-fe)/2-hn/2+yn,cn.y1=cn.y0+cn.value*at)})})})(We),It();for(var lt=1,mt=Be;mt>0;--mt)Tt(lt*=.99,We),It();function Tt(Ct,ct){var at=Ye.length;Ye.forEach(function(St){var Xt=St.length,tn=St[0].depth;St.forEach(function(hn){var cn;if((hn.sourceLinks.length||hn.targetLinks.length)&&!(hn.partOfCycle&&I(hn,ct)>0))if(0==tn&&1==Xt)hn.y0=he/2-(cn=hn.y1-hn.y0)/2,hn.y1=he/2+cn/2;else if(tn==at-1&&1==Xt)hn.y0=he/2-(cn=hn.y1-hn.y0)/2,hn.y1=he/2+cn/2;else{var yn=m.mean(hn.sourceLinks,h),en=m.mean(hn.targetLinks,l),Xe=((yn&&en?(yn+en)/2:yn||en)-c(hn))*Ct;hn.y0+=Xe,hn.y1+=Xe}})})}function It(){Ye.forEach(function(Ct){var ct,at,St,Xt=fe,tn=Ct.length;for(Ct.sort(i),St=0;St<tn;++St)(at=Xt-(ct=Ct[St]).y0)>0&&(ct.y0+=at,ct.y1+=at),Xt=ct.y1+oe;if((at=Xt-oe-he)>0)for(Xt=ct.y0-=at,ct.y1-=at,St=tn-2;St>=0;--St)(at=(ct=Ct[St]).y1+oe-Xt)>0&&(ct.y0-=at,ct.y1-=at),Xt=ct.y0})}}function rt(Ne){Ne.nodes.forEach(function(Be){Be.sourceLinks.sort(s),Be.targetLinks.sort(p)}),Ne.nodes.forEach(function(Be){var We=Be.y0,Ye=We,lt=Be.y1,mt=lt;Be.sourceLinks.forEach(function(Tt){Tt.circular?(Tt.y0=lt-Tt.width/2,lt-=Tt.width):(Tt.y0=We+Tt.width/2,We+=Tt.width)}),Be.targetLinks.forEach(function(Tt){Tt.circular?(Tt.y1=mt-Tt.width/2,mt-=Tt.width):(Tt.y1=Ye+Tt.width/2,Ye+=Tt.width)})})}return De.nodeId=function(Ne){return arguments.length?(Ce="function"==typeof Ne?Ne:a(Ne),De):Ce},De.nodeAlign=function(Ne){return arguments.length?(Ee="function"==typeof Ne?Ne:a(Ne),De):Ee},De.nodeWidth=function(Ne){return arguments.length?(_e=+Ne,De):_e},De.nodePadding=function(Ne){return arguments.length?(oe=+Ne,De):oe},De.nodes=function(Ne){return arguments.length?(Ae="function"==typeof Ne?Ne:a(Ne),De):Ae},De.links=function(Ne){return arguments.length?(ze="function"==typeof Ne?Ne:a(Ne),De):ze},De.size=function(Ne){return arguments.length?(de=fe=0,be=+Ne[0],he=+Ne[1],De):[be-de,he-fe]},De.extent=function(Ne){return arguments.length?(de=+Ne[0][0],be=+Ne[1][0],fe=+Ne[0][1],he=+Ne[1][1],De):[[de,fe],[be,he]]},De.iterations=function(Ne){return arguments.length?(ve=+Ne,De):ve},De.circularLinkGap=function(Ne){return arguments.length?(Te=+Ne,De):Te},De.nodePaddingRatio=function(Ne){return arguments.length?(le=+Ne,De):le},De.sortNodes=function(Ne){return arguments.length?(Ie=Ne,De):Ie},De.update=function(Ne){return w(Ne,Ce),rt(Ne),Ne.links.forEach(function(Be){Be.circular&&(Be.circularLinkType=Be.y0+Be.y1<he?"top":"bottom",Be.source.circularLinkType=Be.circularLinkType,Be.target.circularLinkType=Be.circularLinkType)}),V(Ne,he,Ce,!1),q(Ne,0,Ce),O(Ne,Te,he,Ce),Ne},De},g.sankeyCenter=function(oe){return oe.targetLinks.length?oe.depth:oe.sourceLinks.length?m.min(oe.sourceLinks,r)-1:0},g.sankeyLeft=function(oe){return oe.depth},g.sankeyRight=function(oe,le){return le-1-oe.height},g.sankeyJustify=n,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-array"),v("d3-collection"),v("d3-shape"),v("elementary-circuits-directed-graph")):m(g.d3=g.d3||{},g.d3,g.d3,g.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(v,re,ne){var g,m;g=this,m=function(g,m,b,y){"use strict";function e(T){return T.target.depth}function r(T,_){return T.sourceLinks.length?T.depth:_-1}function n(T){return function(){return T}}function a(T,_){return p(T.source,_.source)||T.index-_.index}function t(T,_){return p(T.target,_.target)||T.index-_.index}function p(T,_){return T.y0-_.y0}function s(T){return T.value}function i(T){return(T.y0+T.y1)/2}function f(T){return i(T.source)*T.value}function c(T){return i(T.target)*T.value}function l(T){return T.index}function h(T){return T.nodes}function d(T){return T.links}function o(T,_){var w=T.get(_);if(!w)throw new Error("missing: "+_);return w}function x(T){return[T.source.x1,T.y0]}function u(T){return[T.target.x0,T.y1]}g.sankey=function(){var T=0,_=0,w=1,M=1,I=24,S=8,R=l,O=r,C=h,D=d,B=32;function z(){var K={nodes:C.apply(null,arguments),links:D.apply(null,arguments)};return Y(K),G(K),J(K),te(K),X(K),K}function Y(K){K.nodes.forEach(function(U,V){U.index=V,U.sourceLinks=[],U.targetLinks=[]});var ae=b.map(K.nodes,R);K.links.forEach(function(U,V){U.index=V;var q=U.source,ie=U.target;"object"!=typeof q&&(q=U.source=o(ae,q)),"object"!=typeof ie&&(ie=U.target=o(ae,ie)),q.sourceLinks.push(U),ie.targetLinks.push(U)})}function G(K){K.nodes.forEach(function(ae){ae.value=Math.max(m.sum(ae.sourceLinks,s),m.sum(ae.targetLinks,s))})}function J(K){var ae,U,V;for(ae=K.nodes,U=[],V=0;ae.length;++V,ae=U,U=[])ae.forEach(function(ie){ie.depth=V,ie.sourceLinks.forEach(function(H){U.indexOf(H.target)<0&&U.push(H.target)})});for(ae=K.nodes,U=[],V=0;ae.length;++V,ae=U,U=[])ae.forEach(function(ie){ie.height=V,ie.targetLinks.forEach(function(H){U.indexOf(H.source)<0&&U.push(H.source)})});var q=(w-T-I)/(V-1);K.nodes.forEach(function(ie){ie.x1=(ie.x0=T+Math.max(0,Math.min(V-1,Math.floor(O.call(null,ie,V))))*q)+I})}function te(K){var ae=b.nest().key(function(ee){return ee.x0}).sortKeys(m.ascending).entries(K.nodes).map(function(ee){return ee.values});(function(){var ee=m.max(ae,function(le){return le.length}),Q=2/3*(M-_)/(ee-1);S>Q&&(S=Q);var oe=m.min(ae,function(le){return(M-_-(le.length-1)*S)/m.sum(le,s)});ae.forEach(function(le){le.forEach(function(de,fe){de.y1=(de.y0=fe)+de.value*oe})}),K.links.forEach(function(le){le.width=le.value*oe})})(),H();for(var U=1,V=B;V>0;--V)ie(U*=.99),H(),q(U),H();function q(ee){ae.forEach(function(Q){Q.forEach(function(oe){if(oe.targetLinks.length){var le=(m.sum(oe.targetLinks,f)/m.sum(oe.targetLinks,s)-i(oe))*ee;oe.y0+=le,oe.y1+=le}})})}function ie(ee){ae.slice().reverse().forEach(function(Q){Q.forEach(function(oe){if(oe.sourceLinks.length){var le=(m.sum(oe.sourceLinks,c)/m.sum(oe.sourceLinks,s)-i(oe))*ee;oe.y0+=le,oe.y1+=le}})})}function H(){ae.forEach(function(ee){var Q,oe,le,de=_,fe=ee.length;for(ee.sort(p),le=0;le<fe;++le)(oe=de-(Q=ee[le]).y0)>0&&(Q.y0+=oe,Q.y1+=oe),de=Q.y1+S;if((oe=de-S-M)>0)for(de=Q.y0-=oe,Q.y1-=oe,le=fe-2;le>=0;--le)(oe=(Q=ee[le]).y1+S-de)>0&&(Q.y0-=oe,Q.y1-=oe),de=Q.y0})}}function X(K){K.nodes.forEach(function(ae){ae.sourceLinks.sort(t),ae.targetLinks.sort(a)}),K.nodes.forEach(function(ae){var U=ae.y0,V=U;ae.sourceLinks.forEach(function(q){q.y0=U+q.width/2,U+=q.width}),ae.targetLinks.forEach(function(q){q.y1=V+q.width/2,V+=q.width})})}return z.update=function(K){return X(K),K},z.nodeId=function(K){return arguments.length?(R="function"==typeof K?K:n(K),z):R},z.nodeAlign=function(K){return arguments.length?(O="function"==typeof K?K:n(K),z):O},z.nodeWidth=function(K){return arguments.length?(I=+K,z):I},z.nodePadding=function(K){return arguments.length?(S=+K,z):S},z.nodes=function(K){return arguments.length?(C="function"==typeof K?K:n(K),z):C},z.links=function(K){return arguments.length?(D="function"==typeof K?K:n(K),z):D},z.size=function(K){return arguments.length?(T=_=0,w=+K[0],M=+K[1],z):[w-T,M-_]},z.extent=function(K){return arguments.length?(T=+K[0][0],w=+K[1][0],_=+K[0][1],M=+K[1][1],z):[[T,_],[w,M]]},z.iterations=function(K){return arguments.length?(B=+K,z):B},z},g.sankeyCenter=function(T){return T.targetLinks.length?T.depth:T.sourceLinks.length?m.min(T.sourceLinks,e)-1:0},g.sankeyLeft=function(T){return T.depth},g.sankeyRight=function(T,_){return _-1-T.height},g.sankeyJustify=r,g.sankeyLinkHorizontal=function(){return y.linkHorizontal().source(x).target(u)},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-array"),v("d3-collection"),v("d3-shape")):m(g.d3=g.d3||{},g.d3,g.d3,g.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(v,re,ne){(function(){var g={version:"3.8.0"},m=[].slice,b=function(pe){return m.call(pe)},y=self.document;function e(pe){return pe&&(pe.ownerDocument||pe.document||pe).documentElement}function r(pe){return pe&&(pe.ownerDocument&&pe.ownerDocument.defaultView||pe.document&&pe||pe.defaultView)}if(y)try{b(y.documentElement.childNodes)}catch{b=function(P){for(var N=P.length,j=new Array(N);N--;)j[N]=P[N];return j}}if(Date.now||(Date.now=function(){return+new Date}),y)try{y.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,a=n.setAttribute,t=n.setAttributeNS,p=this.CSSStyleDeclaration.prototype,s=p.setProperty;n.setAttribute=function(P,N){a.call(this,P,N+"")},n.setAttributeNS=function(P,N,j){t.call(this,P,N,j+"")},p.setProperty=function(P,N,j){s.call(this,P,N+"",j)}}function i(pe,P){return pe<P?-1:pe>P?1:pe>=P?0:NaN}function f(pe){return null===pe?NaN:+pe}function c(pe){return!isNaN(pe)}function l(pe){return{left:function(P,N,j,Z){for(arguments.length<3&&(j=0),arguments.length<4&&(Z=P.length);j<Z;){var ce=j+Z>>>1;pe(P[ce],N)<0?j=ce+1:Z=ce}return j},right:function(P,N,j,Z){for(arguments.length<3&&(j=0),arguments.length<4&&(Z=P.length);j<Z;){var ce=j+Z>>>1;pe(P[ce],N)>0?Z=ce:j=ce+1}return j}}}g.ascending=i,g.descending=function(pe,P){return P<pe?-1:P>pe?1:P>=pe?0:NaN},g.min=function(pe,P){var N,j,Z=-1,ce=pe.length;if(1===arguments.length){for(;++Z<ce;)if(null!=(j=pe[Z])&&j>=j){N=j;break}for(;++Z<ce;)null!=(j=pe[Z])&&N>j&&(N=j)}else{for(;++Z<ce;)if(null!=(j=P.call(pe,pe[Z],Z))&&j>=j){N=j;break}for(;++Z<ce;)null!=(j=P.call(pe,pe[Z],Z))&&N>j&&(N=j)}return N},g.max=function(pe,P){var N,j,Z=-1,ce=pe.length;if(1===arguments.length){for(;++Z<ce;)if(null!=(j=pe[Z])&&j>=j){N=j;break}for(;++Z<ce;)null!=(j=pe[Z])&&j>N&&(N=j)}else{for(;++Z<ce;)if(null!=(j=P.call(pe,pe[Z],Z))&&j>=j){N=j;break}for(;++Z<ce;)null!=(j=P.call(pe,pe[Z],Z))&&j>N&&(N=j)}return N},g.extent=function(pe,P){var N,j,Z,ce=-1,ge=pe.length;if(1===arguments.length){for(;++ce<ge;)if(null!=(j=pe[ce])&&j>=j){N=Z=j;break}for(;++ce<ge;)null!=(j=pe[ce])&&(N>j&&(N=j),Z<j&&(Z=j))}else{for(;++ce<ge;)if(null!=(j=P.call(pe,pe[ce],ce))&&j>=j){N=Z=j;break}for(;++ce<ge;)null!=(j=P.call(pe,pe[ce],ce))&&(N>j&&(N=j),Z<j&&(Z=j))}return[N,Z]},g.sum=function(pe,P){var N,j=0,Z=pe.length,ce=-1;if(1===arguments.length)for(;++ce<Z;)c(N=+pe[ce])&&(j+=N);else for(;++ce<Z;)c(N=+P.call(pe,pe[ce],ce))&&(j+=N);return j},g.mean=function(pe,P){var N,j=0,Z=pe.length,ce=-1,ge=Z;if(1===arguments.length)for(;++ce<Z;)c(N=f(pe[ce]))?j+=N:--ge;else for(;++ce<Z;)c(N=f(P.call(pe,pe[ce],ce)))?j+=N:--ge;if(ge)return j/ge},g.quantile=function(pe,P){var N=(pe.length-1)*P+1,j=Math.floor(N),Z=+pe[j-1],ce=N-j;return ce?Z+ce*(pe[j]-Z):Z},g.median=function(pe,P){var N,j=[],Z=pe.length,ce=-1;if(1===arguments.length)for(;++ce<Z;)c(N=f(pe[ce]))&&j.push(N);else for(;++ce<Z;)c(N=f(P.call(pe,pe[ce],ce)))&&j.push(N);if(j.length)return g.quantile(j.sort(i),.5)},g.variance=function(pe,P){var N,j,Z=pe.length,ce=0,ge=0,we=-1,Se=0;if(1===arguments.length)for(;++we<Z;)c(N=f(pe[we]))&&(ge+=(j=N-ce)*(N-(ce+=j/++Se)));else for(;++we<Z;)c(N=f(P.call(pe,pe[we],we)))&&(ge+=(j=N-ce)*(N-(ce+=j/++Se)));if(Se>1)return ge/(Se-1)},g.deviation=function(){var pe=g.variance.apply(this,arguments);return pe&&Math.sqrt(pe)};var h=l(i);function d(pe){return pe.length}g.bisectLeft=h.left,g.bisect=g.bisectRight=h.right,g.bisector=function(pe){return l(1===pe.length?function(P,N){return i(pe(P),N)}:pe)},g.shuffle=function(pe,P,N){(ce=arguments.length)<3&&(N=pe.length,ce<2&&(P=0));for(var j,Z,ce=N-P;ce;)Z=Math.random()*ce--|0,j=pe[ce+P],pe[ce+P]=pe[Z+P],pe[Z+P]=j;return pe},g.permute=function(pe,P){for(var N=P.length,j=new Array(N);N--;)j[N]=pe[P[N]];return j},g.pairs=function(pe){for(var P=0,N=pe.length-1,j=pe[0],Z=new Array(N<0?0:N);P<N;)Z[P]=[j,j=pe[++P]];return Z},g.transpose=function(pe){if(!(Z=pe.length))return[];for(var P=-1,N=g.min(pe,d),j=new Array(N);++P<N;)for(var Z,ce=-1,ge=j[P]=new Array(Z);++ce<Z;)ge[ce]=pe[ce][P];return j},g.zip=function(){return g.transpose(arguments)},g.keys=function(pe){var P=[];for(var N in pe)P.push(N);return P},g.values=function(pe){var P=[];for(var N in pe)P.push(pe[N]);return P},g.entries=function(pe){var P=[];for(var N in pe)P.push({key:N,value:pe[N]});return P},g.merge=function(pe){for(var P,N,j,Z=pe.length,ce=-1,ge=0;++ce<Z;)ge+=pe[ce].length;for(N=new Array(ge);--Z>=0;)for(P=(j=pe[Z]).length;--P>=0;)N[--ge]=j[P];return N};var o=Math.abs;function x(pe){for(var P=1;pe*P%1;)P*=10;return P}function u(pe,P){for(var N in P)Object.defineProperty(pe.prototype,N,{value:P[N],enumerable:!1})}function T(){this._=Object.create(null)}function _(pe){return"__proto__"==(pe+="")||"\0"===pe[0]?"\0"+pe:pe}function w(pe){return"\0"===(pe+="")[0]?pe.slice(1):pe}function M(pe){return _(pe)in this._}function I(pe){return(pe=_(pe))in this._&&delete this._[pe]}function S(){var pe=[];for(var P in this._)pe.push(w(P));return pe}function R(){var pe=0;for(var P in this._)++pe;return pe}function O(){for(var pe in this._)return!1;return!0}function C(){this._=Object.create(null)}function D(pe){return pe}function B(pe,P,N){return function(){var j=N.apply(P,arguments);return j===P?pe:j}}function z(pe,P){if(P in pe)return P;P=P.charAt(0).toUpperCase()+P.slice(1);for(var N=0,j=Y.length;N<j;++N){var Z=Y[N]+P;if(Z in pe)return Z}}g.range=function(pe,P,N){if(arguments.length<3&&(N=1,arguments.length<2&&(P=pe,pe=0)),(P-pe)/N==1/0)throw new Error("infinite range");var j,Z=[],ce=x(o(N)),ge=-1;if(pe*=ce,P*=ce,(N*=ce)<0)for(;(j=pe+N*++ge)>P;)Z.push(j/ce);else for(;(j=pe+N*++ge)<P;)Z.push(j/ce);return Z},g.map=function(pe,P){var N=new T;if(pe instanceof T)pe.forEach(function(we,Se){N.set(we,Se)});else if(Array.isArray(pe)){var j,Z=-1,ce=pe.length;if(1===arguments.length)for(;++Z<ce;)N.set(Z,pe[Z]);else for(;++Z<ce;)N.set(P.call(pe,j=pe[Z],Z),j)}else for(var ge in pe)N.set(ge,pe[ge]);return N},u(T,{has:M,get:function(pe){return this._[_(pe)]},set:function(pe,P){return this._[_(pe)]=P},remove:I,keys:S,values:function(){var pe=[];for(var P in this._)pe.push(this._[P]);return pe},entries:function(){var pe=[];for(var P in this._)pe.push({key:w(P),value:this._[P]});return pe},size:R,empty:O,forEach:function(pe){for(var P in this._)pe.call(this,w(P),this._[P])}}),g.nest=function(){var pe,P,N={},j=[],Z=[];function ce(ge,we,Se){if(Se>=j.length)return P?P.call(N,we):pe?we.sort(pe):we;for(var Oe,$e,it,pt,Et=-1,Ft=we.length,Dt=j[Se++],zt=new T;++Et<Ft;)(pt=zt.get(Oe=Dt($e=we[Et])))?pt.push($e):zt.set(Oe,[$e]);return ge?($e=ge(),it=function(Lt,Gt){$e.set(Lt,ce(ge,Gt,Se))}):($e={},it=function(Lt,Gt){$e[Lt]=ce(ge,Gt,Se)}),zt.forEach(it),$e}return N.map=function(ge,we){return ce(we,ge,0)},N.entries=function(ge){return function we(Se,Oe){if(Oe>=j.length)return Se;var $e=[],it=Z[Oe++];return Se.forEach(function(pt,Et){$e.push({key:pt,values:we(Et,Oe)})}),it?$e.sort(function(pt,Et){return it(pt.key,Et.key)}):$e}(ce(g.map,ge,0),0)},N.key=function(ge){return j.push(ge),N},N.sortKeys=function(ge){return Z[j.length-1]=ge,N},N.sortValues=function(ge){return pe=ge,N},N.rollup=function(ge){return P=ge,N},N},g.set=function(pe){var P=new C;if(pe)for(var N=0,j=pe.length;N<j;++N)P.add(pe[N]);return P},u(C,{has:M,add:function(pe){return this._[_(pe+="")]=!0,pe},remove:I,values:S,size:R,empty:O,forEach:function(pe){for(var P in this._)pe.call(this,w(P))}}),g.behavior={},g.rebind=function(pe,P){for(var N,j=1,Z=arguments.length;++j<Z;)pe[N=arguments[j]]=B(pe,P,P[N]);return pe};var Y=["webkit","ms","moz","Moz","o","O"];function G(){}function J(){}function te(pe){var P=[],N=new T;function j(){for(var Z,ce=P,ge=-1,we=ce.length;++ge<we;)(Z=ce[ge].on)&&Z.apply(this,arguments);return pe}return j.on=function(Z,ce){var ge,we=N.get(Z);return arguments.length<2?we&&we.on:(we&&(we.on=null,P=P.slice(0,ge=P.indexOf(we)).concat(P.slice(ge+1)),N.remove(Z)),ce&&P.push(N.set(Z,{on:ce})),pe)},j}function X(){g.event.preventDefault()}function K(){for(var pe,P=g.event;pe=P.sourceEvent;)P=pe;return P}function ae(pe){for(var P=new J,N=0,j=arguments.length;++N<j;)P[arguments[N]]=te(P);return P.of=function(Z,ce){return function(ge){try{var we=ge.sourceEvent=g.event;ge.target=pe,g.event=ge,P[ge.type].apply(Z,ce)}finally{g.event=we}}},P}g.dispatch=function(){for(var pe=new J,P=-1,N=arguments.length;++P<N;)pe[arguments[P]]=te(pe);return pe},J.prototype.on=function(pe,P){var N=pe.indexOf("."),j="";if(N>=0&&(j=pe.slice(N+1),pe=pe.slice(0,N)),pe)return arguments.length<2?this[pe].on(j):this[pe].on(j,P);if(2===arguments.length){if(null==P)for(pe in this)this.hasOwnProperty(pe)&&this[pe].on(j,null);return this}},g.event=null,g.requote=function(pe){return pe.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(pe,P){pe.__proto__=P}:function(pe,P){for(var N in P)pe[N]=P[N]};function q(pe){return V(pe,Q),pe}var ie=function(pe,P){return P.querySelector(pe)},H=function(pe,P){return P.querySelectorAll(pe)},ee=function(pe,P){var N=pe.matches||pe[z(pe,"matchesSelector")];return(ee=function(j,Z){return N.call(j,Z)})(pe,P)};"function"==typeof Sizzle&&(ie=function(pe,P){return Sizzle(pe,P)[0]||null},H=Sizzle,ee=Sizzle.matchesSelector),g.selection=function(){return g.select(y.documentElement)};var Q=g.selection.prototype=[];function oe(pe){return"function"==typeof pe?pe:function(){return ie(pe,this)}}function le(pe){return"function"==typeof pe?pe:function(){return H(pe,this)}}Q.select=function(pe){var P,N,j,Z,ce=[];pe=oe(pe);for(var ge=-1,we=this.length;++ge<we;){ce.push(P=[]),P.parentNode=(j=this[ge]).parentNode;for(var Se=-1,Oe=j.length;++Se<Oe;)(Z=j[Se])?(P.push(N=pe.call(Z,Z.__data__,Se,ge)),N&&"__data__"in Z&&(N.__data__=Z.__data__)):P.push(null)}return q(ce)},Q.selectAll=function(pe){var P,N,j=[];pe=le(pe);for(var Z=-1,ce=this.length;++Z<ce;)for(var ge=this[Z],we=-1,Se=ge.length;++we<Se;)(N=ge[we])&&(j.push(P=b(pe.call(N,N.__data__,we,Z))),P.parentNode=N);return q(j)};var de="http://www.w3.org/1999/xhtml",fe={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function be(pe,P){return pe=g.ns.qualify(pe),null==P?pe.local?function(){this.removeAttributeNS(pe.space,pe.local)}:function(){this.removeAttribute(pe)}:"function"==typeof P?pe.local?function(){var N=P.apply(this,arguments);null==N?this.removeAttributeNS(pe.space,pe.local):this.setAttributeNS(pe.space,pe.local,N)}:function(){var N=P.apply(this,arguments);null==N?this.removeAttribute(pe):this.setAttribute(pe,N)}:pe.local?function(){this.setAttributeNS(pe.space,pe.local,P)}:function(){this.setAttribute(pe,P)}}function he(pe){return pe.trim().replace(/\s+/g," ")}function _e(pe){return new RegExp("(?:^|\\s+)"+g.requote(pe)+"(?:\\s+|$)","g")}function Ce(pe){return(pe+"").trim().split(/^|\s+/)}function Ee(pe,P){var N=(pe=Ce(pe).map(Ae)).length;return"function"==typeof P?function(){for(var j=-1,Z=P.apply(this,arguments);++j<N;)pe[j](this,Z)}:function(){for(var j=-1;++j<N;)pe[j](this,P)}}function Ae(pe){var P=_e(pe);return function(N,j){if(Z=N.classList)return j?Z.add(pe):Z.remove(pe);var Z=N.getAttribute("class")||"";j?(P.lastIndex=0,P.test(Z)||N.setAttribute("class",he(Z+" "+pe))):N.setAttribute("class",he(Z.replace(P," ")))}}function ze(pe,P,N){return null==P?function(){this.style.removeProperty(pe)}:"function"==typeof P?function(){var j=P.apply(this,arguments);null==j?this.style.removeProperty(pe):this.style.setProperty(pe,j,N)}:function(){this.style.setProperty(pe,P,N)}}function ve(pe,P){return null==P?function(){delete this[pe]}:"function"==typeof P?function(){var N=P.apply(this,arguments);null==N?delete this[pe]:this[pe]=N}:function(){this[pe]=P}}function Te(pe){return"function"==typeof pe?pe:(pe=g.ns.qualify(pe)).local?function(){return this.ownerDocument.createElementNS(pe.space,pe.local)}:function(){var P=this.ownerDocument,N=this.namespaceURI;return N===de&&P.documentElement.namespaceURI===de?P.createElement(pe):P.createElementNS(N,pe)}}function Ie(){var pe=this.parentNode;pe&&pe.removeChild(this)}function De(pe){return{__data__:pe}}function Fe(pe){return function(){return ee(this,pe)}}function Ue(pe){return arguments.length||(pe=i),function(P,N){return P&&N?pe(P.__data__,N.__data__):!P-!N}}function qe(pe,P){for(var N=0,j=pe.length;N<j;N++)for(var Z,ce=pe[N],ge=0,we=ce.length;ge<we;ge++)(Z=ce[ge])&&P(Z,ge,N);return pe}function je(pe){return V(pe,rt),pe}g.ns={prefix:fe,qualify:function(pe){var P=pe.indexOf(":"),N=pe;return P>=0&&"xmlns"!==(N=pe.slice(0,P))&&(pe=pe.slice(P+1)),fe.hasOwnProperty(N)?{space:fe[N],local:pe}:pe}},Q.attr=function(pe,P){if(arguments.length<2){if("string"==typeof pe){var N=this.node();return(pe=g.ns.qualify(pe)).local?N.getAttributeNS(pe.space,pe.local):N.getAttribute(pe)}for(P in pe)this.each(be(P,pe[P]));return this}return this.each(be(pe,P))},Q.classed=function(pe,P){if(arguments.length<2){if("string"==typeof pe){var N=this.node(),j=(pe=Ce(pe)).length,Z=-1;if(P=N.classList){for(;++Z<j;)if(!P.contains(pe[Z]))return!1}else for(P=N.getAttribute("class");++Z<j;)if(!_e(pe[Z]).test(P))return!1;return!0}for(P in pe)this.each(Ee(P,pe[P]));return this}return this.each(Ee(pe,P))},Q.style=function(pe,P,N){var j=arguments.length;if(j<3){if("string"!=typeof pe){for(N in j<2&&(P=""),pe)this.each(ze(N,pe[N],P));return this}if(j<2){var Z=this.node();return r(Z).getComputedStyle(Z,null).getPropertyValue(pe)}N=""}return this.each(ze(pe,P,N))},Q.property=function(pe,P){if(arguments.length<2){if("string"==typeof pe)return this.node()[pe];for(P in pe)this.each(ve(P,pe[P]));return this}return this.each(ve(pe,P))},Q.text=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var P=pe.apply(this,arguments);this.textContent=P??""}:null==pe?function(){this.textContent=""}:function(){this.textContent=pe}):this.node().textContent},Q.html=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var P=pe.apply(this,arguments);this.innerHTML=P??""}:null==pe?function(){this.innerHTML=""}:function(){this.innerHTML=pe}):this.node().innerHTML},Q.append=function(pe){return pe=Te(pe),this.select(function(){return this.appendChild(pe.apply(this,arguments))})},Q.insert=function(pe,P){return pe=Te(pe),P=oe(P),this.select(function(){return this.insertBefore(pe.apply(this,arguments),P.apply(this,arguments)||null)})},Q.remove=function(){return this.each(Ie)},Q.data=function(pe,P){var N,j,Z=-1,ce=this.length;if(!arguments.length){for(pe=new Array(ce=(N=this[0]).length);++Z<ce;)(j=N[Z])&&(pe[Z]=j.__data__);return pe}function ge($e,it){var pt,Et,Ft,Dt=$e.length,zt=it.length,Lt=Math.min(Dt,zt),Gt=new Array(zt),Ut=new Array(zt),Zt=new Array(Dt);if(P){var vn,En=new T,qn=new Array(Dt);for(pt=-1;++pt<Dt;)(Et=$e[pt])&&(En.has(vn=P.call(Et,Et.__data__,pt))?Zt[pt]=Et:En.set(vn,Et),qn[pt]=vn);for(pt=-1;++pt<zt;)(Et=En.get(vn=P.call(it,Ft=it[pt],pt)))?!0!==Et&&(Gt[pt]=Et,Et.__data__=Ft):Ut[pt]=De(Ft),En.set(vn,!0);for(pt=-1;++pt<Dt;)pt in qn&&!0!==En.get(qn[pt])&&(Zt[pt]=$e[pt])}else{for(pt=-1;++pt<Lt;)Ft=it[pt],(Et=$e[pt])?(Et.__data__=Ft,Gt[pt]=Et):Ut[pt]=De(Ft);for(;pt<zt;++pt)Ut[pt]=De(it[pt]);for(;pt<Dt;++pt)Zt[pt]=$e[pt]}Ut.update=Gt,Ut.parentNode=Gt.parentNode=Zt.parentNode=$e.parentNode,we.push(Ut),Se.push(Gt),Oe.push(Zt)}var we=je([]),Se=q([]),Oe=q([]);if("function"==typeof pe)for(;++Z<ce;)ge(N=this[Z],pe.call(N,N.parentNode.__data__,Z));else for(;++Z<ce;)ge(N=this[Z],pe);return Se.enter=function(){return we},Se.exit=function(){return Oe},Se},Q.datum=function(pe){return arguments.length?this.property("__data__",pe):this.property("__data__")},Q.filter=function(pe){var P,N,j,Z=[];"function"!=typeof pe&&(pe=Fe(pe));for(var ce=0,ge=this.length;ce<ge;ce++){Z.push(P=[]),P.parentNode=(N=this[ce]).parentNode;for(var we=0,Se=N.length;we<Se;we++)(j=N[we])&&pe.call(j,j.__data__,we,ce)&&P.push(j)}return q(Z)},Q.order=function(){for(var pe=-1,P=this.length;++pe<P;)for(var N,j=this[pe],Z=j.length-1,ce=j[Z];--Z>=0;)(N=j[Z])&&(ce&&ce!==N.nextSibling&&ce.parentNode.insertBefore(N,ce),ce=N);return this},Q.sort=function(pe){pe=Ue.apply(this,arguments);for(var P=-1,N=this.length;++P<N;)this[P].sort(pe);return this.order()},Q.each=function(pe){return qe(this,function(P,N,j){pe.call(P,P.__data__,N,j)})},Q.call=function(pe){var P=b(arguments);return pe.apply(P[0]=this,P),this},Q.empty=function(){return!this.node()},Q.node=function(){for(var pe=0,P=this.length;pe<P;pe++)for(var N=this[pe],j=0,Z=N.length;j<Z;j++){var ce=N[j];if(ce)return ce}return null},Q.size=function(){var pe=0;return qe(this,function(){++pe}),pe};var rt=[];function Ne(pe){var P,N;return function(j,Z,ce){var ge,we=pe[ce].update,Se=we.length;for(ce!=N&&(N=ce,P=0),Z>=P&&(P=Z+1);!(ge=we[P])&&++P<Se;);return ge}}function Be(pe,P,N){var j="__on"+pe,Z=pe.indexOf("."),ce=Ye;Z>0&&(pe=pe.slice(0,Z));var ge=We.get(pe);function we(){var Se=this[j];Se&&(this.removeEventListener(pe,Se,Se.$),delete this[j])}return ge&&(pe=ge,ce=lt),Z?P?function(){var Se=ce(P,b(arguments));we.call(this),this.addEventListener(pe,this[j]=Se,Se.$=N),Se._=P}:we:P?G:function(){var Se,Oe=new RegExp("^__on([^.]+)"+g.requote(pe)+"$");for(var $e in this)if(Se=$e.match(Oe)){var it=this[$e];this.removeEventListener(Se[1],it,it.$),delete this[$e]}}}g.selection.enter=je,g.selection.enter.prototype=rt,rt.append=Q.append,rt.empty=Q.empty,rt.node=Q.node,rt.call=Q.call,rt.size=Q.size,rt.select=function(pe){for(var P,N,j,Z,ce,ge=[],we=-1,Se=this.length;++we<Se;){j=(Z=this[we]).update,ge.push(P=[]),P.parentNode=Z.parentNode;for(var Oe=-1,$e=Z.length;++Oe<$e;)(ce=Z[Oe])?(P.push(j[Oe]=N=pe.call(Z.parentNode,ce.__data__,Oe,we)),N.__data__=ce.__data__):P.push(null)}return q(ge)},rt.insert=function(pe,P){return arguments.length<2&&(P=Ne(this)),Q.insert.call(this,pe,P)},g.select=function(pe){var P;return"string"==typeof pe?(P=[ie(pe,y)]).parentNode=y.documentElement:(P=[pe]).parentNode=e(pe),q([P])},g.selectAll=function(pe){var P;return"string"==typeof pe?(P=b(H(pe,y))).parentNode=y.documentElement:(P=b(pe)).parentNode=null,q([P])},Q.on=function(pe,P,N){var j=arguments.length;if(j<3){if("string"!=typeof pe){for(N in j<2&&(P=!1),pe)this.each(Be(N,pe[N],P));return this}if(j<2)return(j=this.node()["__on"+pe])&&j._;N=!1}return this.each(Be(pe,P,N))};var We=g.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ye(pe,P){return function(N){var j=g.event;g.event=N,P[0]=this.__data__;try{pe.apply(this,P)}finally{g.event=j}}}function lt(pe,P){var N=Ye(pe,P);return function(j){var Z=j.relatedTarget;Z&&(Z===this||8&Z.compareDocumentPosition(this))||N.call(this,j)}}y&&We.forEach(function(pe){"on"+pe in y&&We.remove(pe)});var mt,Tt=0;function It(pe){var P=".dragsuppress-"+ ++Tt,N="click"+P,j=g.select(r(pe)).on("touchmove"+P,X).on("dragstart"+P,X).on("selectstart"+P,X);if(null==mt&&(mt=!("onselectstart"in pe)&&z(pe.style,"userSelect")),mt){var Z=e(pe).style,ce=Z[mt];Z[mt]="none"}return function(ge){if(j.on(P,null),mt&&(Z[mt]=ce),ge){var we=function(){j.on(N,null)};j.on(N,function(){X(),we()},!0),setTimeout(we,0)}}}g.mouse=function(pe){return ct(pe,K())};var Ct=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ct(pe,P){P.changedTouches&&(P=P.changedTouches[0]);var N=pe.ownerSVGElement||pe;if(N.createSVGPoint){var j=N.createSVGPoint();if(Ct<0){var Z=r(pe);if(Z.scrollX||Z.scrollY){var ce=(N=g.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ct=!(ce.f||ce.e),N.remove()}}return Ct?(j.x=P.pageX,j.y=P.pageY):(j.x=P.clientX,j.y=P.clientY),[(j=j.matrixTransform(pe.getScreenCTM().inverse())).x,j.y]}var ge=pe.getBoundingClientRect();return[P.clientX-ge.left-pe.clientLeft,P.clientY-ge.top-pe.clientTop]}function at(){return g.event.changedTouches[0].identifier}g.touch=function(pe,P,N){if(arguments.length<3&&(N=P,P=K().changedTouches),P)for(var j,Z=0,ce=P.length;Z<ce;++Z)if((j=P[Z]).identifier===N)return ct(pe,j)},g.behavior.drag=function(){var pe=ae(Z,"drag","dragstart","dragend"),P=null,N=ce(G,g.mouse,r,"mousemove","mouseup"),j=ce(at,g.touch,D,"touchmove","touchend");function Z(){this.on("mousedown.drag",N).on("touchstart.drag",j)}function ce(ge,we,Se,Oe,$e){return function(){var it,pt=this,Et=g.event.target.correspondingElement||g.event.target,Ft=pt.parentNode,Dt=pe.of(pt,arguments),zt=0,Lt=ge(),Gt=".drag"+(null==Lt?"":"-"+Lt),Ut=g.select(Se(Et)).on(Oe+Gt,En).on($e+Gt,qn),Zt=It(Et),vn=we(Ft,Lt);function En(){var Vn,pr,gr=we(Ft,Lt);gr&&(zt|=(Vn=gr[0]-vn[0])|(pr=gr[1]-vn[1]),vn=gr,Dt({type:"drag",x:gr[0]+it[0],y:gr[1]+it[1],dx:Vn,dy:pr}))}function qn(){we(Ft,Lt)&&(Ut.on(Oe+Gt,null).on($e+Gt,null),Zt(zt),Dt({type:"dragend"}))}it=P?[(it=P.apply(pt,arguments)).x-vn[0],it.y-vn[1]]:[0,0],Dt({type:"dragstart"})}}return Z.origin=function(ge){return arguments.length?(P=ge,Z):P},g.rebind(Z,pe,"on")},g.touches=function(pe,P){return arguments.length<2&&(P=K().touches),P?b(P).map(function(N){var j=ct(pe,N);return j.identifier=N.identifier,j}):[]};var St=1e-6,Xt=Math.PI,tn=2*Xt,hn=tn-St,cn=Xt/2,yn=Xt/180,en=180/Xt;function Xe(pe){return pe>1?cn:pe<-1?-cn:Math.asin(pe)}function tt(pe){return((pe=Math.exp(pe))+1/pe)/2}var ye=Math.SQRT2;g.interpolateZoom=function(pe,P){var N,j,Z=pe[0],ce=pe[1],ge=pe[2],Oe=P[2],$e=P[0]-Z,it=P[1]-ce,pt=$e*$e+it*it;if(pt<1e-12)j=Math.log(Oe/ge)/ye,N=function(Gt){return[Z+Gt*$e,ce+Gt*it,ge*Math.exp(ye*Gt*j)]};else{var Et=Math.sqrt(pt),Ft=(Oe*Oe-ge*ge+4*pt)/(2*ge*2*Et),Dt=(Oe*Oe-ge*ge-4*pt)/(2*Oe*2*Et),zt=Math.log(Math.sqrt(Ft*Ft+1)-Ft),Lt=Math.log(Math.sqrt(Dt*Dt+1)-Dt);j=(Lt-zt)/ye,N=function(Gt){var Ut,qn,Zt=Gt*j,vn=tt(zt),En=ge/(2*Et)*(vn*(Ut=ye*Zt+zt,((Ut=Math.exp(2*Ut))-1)/(Ut+1))-(qn=zt,((qn=Math.exp(qn))-1/qn)/2));return[Z+En*$e,ce+En*it,ge*vn/tt(ye*Zt+zt)]}}return N.duration=1e3*j,N},g.behavior.zoom=function(){var pe,P,N,j,Z,ce,ge,we,Se,Oe={x:0,y:0,k:1},$e=[960,500],it=Je,pt=250,Et=0,Ft="mousedown.zoom",Dt="mousemove.zoom",zt="mouseup.zoom",Lt="touchstart.zoom",Gt=ae(Ut,"zoomstart","zoom","zoomend");function Ut(or){or.on(Ft,yr).on(Ve+".zoom",vi).on("dblclick.zoom",Fi).on(Lt,Jr)}function Zt(or){return[(or[0]-Oe.x)/Oe.k,(or[1]-Oe.y)/Oe.k]}function vn(or){Oe.k=Math.max(it[0],Math.min(it[1],or))}function En(or,zr){var yi;Oe.x+=or[0]-(zr=[(yi=zr)[0]*Oe.k+Oe.x,yi[1]*Oe.k+Oe.y])[0],Oe.y+=or[1]-zr[1]}function qn(or,zr,yi,ci){or.__chart__={x:Oe.x,y:Oe.y,k:Oe.k},vn(Math.pow(2,ci)),En(P=zr,yi),or=g.select(or),pt>0&&(or=or.transition().duration(pt)),or.call(Ut.event)}function Vn(){ge&&ge.domain(ce.range().map(function(or){return(or-Oe.x)/Oe.k}).map(ce.invert)),Se&&Se.domain(we.range().map(function(or){return(or-Oe.y)/Oe.k}).map(we.invert))}function pr(or){Et++||or({type:"zoomstart"})}function gr(or){Vn(),or({type:"zoom",scale:Oe.k,translate:[Oe.x,Oe.y]})}function Er(or){--Et||(or({type:"zoomend"}),P=null)}function yr(){var or=this,zr=Gt.of(or,arguments),yi=0,ci=g.select(r(or)).on(Dt,Ji).on(zt,_i),Si=Zt(g.mouse(or)),ji=It(or);function Ji(){yi=1,En(g.mouse(or),Si),gr(zr)}function _i(){ci.on(Dt,null).on(zt,null),ji(yi),Er(zr)}Al.call(or),pr(zr)}function Jr(){var or,zr=this,yi=Gt.of(zr,arguments),ci={},Si=0,ji=".zoom-"+g.event.changedTouches[0].identifier,Ji="touchmove"+ji,_i="touchend"+ji,qi=[],Vi=g.select(zr),oa=It(zr);function Gi(){var bo=g.touches(zr);return or=Oe.k,bo.forEach(function(vo){vo.identifier in ci&&(ci[vo.identifier]=Zt(vo))}),bo}function ta(){var bo=g.event.target;g.select(bo).on(Ji,Da).on(_i,$a),qi.push(bo);for(var vo=g.event.changedTouches,so=0,_o=vo.length;so<_o;++so)ci[vo[so].identifier]=null;var lo=Gi(),ks=Date.now();if(1===lo.length){if(ks-Z<500){var no=lo[0];qn(zr,no,ci[no.identifier],Math.floor(Math.log(Oe.k)/Math.LN2)+1),X()}Z=ks}else if(lo.length>1){var js=lo[1],el=(no=lo[0])[0]-js[0],Cl=no[1]-js[1];Si=el*el+Cl*Cl}}function Da(){var bo,vo,so,_o,lo=g.touches(zr);Al.call(zr);for(var ks=0,no=lo.length;ks<no;++ks,_o=null)if(_o=ci[(so=lo[ks]).identifier]){if(vo)break;bo=so,vo=_o}if(_o){var js=(js=so[0]-bo[0])*js+(js=so[1]-bo[1])*js,el=Si&&Math.sqrt(js/Si);bo=[(bo[0]+so[0])/2,(bo[1]+so[1])/2],vo=[(vo[0]+_o[0])/2,(vo[1]+_o[1])/2],vn(el*or)}Z=null,En(bo,vo),gr(yi)}function $a(){if(g.event.touches.length){for(var bo=g.event.changedTouches,vo=0,so=bo.length;vo<so;++vo)delete ci[bo[vo].identifier];for(var _o in ci)return void Gi()}g.selectAll(qi).on(ji,null),Vi.on(Ft,yr).on(Lt,Jr),oa(),Er(yi)}ta(),pr(yi),Vi.on(Ft,null).on(Lt,ta)}function vi(){var or=Gt.of(this,arguments);j?clearTimeout(j):(Al.call(this),pe=Zt(P=N||g.mouse(this)),pr(or)),j=setTimeout(function(){j=null,Er(or)},50),X(),vn(Math.pow(2,.002*ke())*Oe.k),En(P,pe),gr(or)}function Fi(){var or=g.mouse(this),zr=Math.log(Oe.k)/Math.LN2;qn(this,or,Zt(or),g.event.shiftKey?Math.ceil(zr)-1:Math.floor(zr)+1)}return Ve||(Ve="onwheel"in y?(ke=function(){return-g.event.deltaY*(g.event.deltaMode?120:1)},"wheel"):"onmousewheel"in y?(ke=function(){return g.event.wheelDelta},"mousewheel"):(ke=function(){return-g.event.detail},"MozMousePixelScroll")),Ut.event=function(or){or.each(function(){var zr=Gt.of(this,arguments),yi=Oe;ol?g.select(this).transition().each("start.zoom",function(){Oe=this.__chart__||{x:0,y:0,k:1},pr(zr)}).tween("zoom:zoom",function(){var ci=$e[0],ji=P?P[0]:ci/2,Ji=P?P[1]:$e[1]/2,_i=g.interpolateZoom([(ji-Oe.x)/Oe.k,(Ji-Oe.y)/Oe.k,ci/Oe.k],[(ji-yi.x)/yi.k,(Ji-yi.y)/yi.k,ci/yi.k]);return function(qi){var Vi=_i(qi),oa=ci/Vi[2];this.__chart__=Oe={x:ji-Vi[0]*oa,y:Ji-Vi[1]*oa,k:oa},gr(zr)}}).each("interrupt.zoom",function(){Er(zr)}).each("end.zoom",function(){Er(zr)}):(this.__chart__=Oe,pr(zr),gr(zr),Er(zr))})},Ut.translate=function(or){return arguments.length?(Oe={x:+or[0],y:+or[1],k:Oe.k},Vn(),Ut):[Oe.x,Oe.y]},Ut.scale=function(or){return arguments.length?(Oe={x:Oe.x,y:Oe.y,k:null},vn(+or),Vn(),Ut):Oe.k},Ut.scaleExtent=function(or){return arguments.length?(it=null==or?Je:[+or[0],+or[1]],Ut):it},Ut.center=function(or){return arguments.length?(N=or&&[+or[0],+or[1]],Ut):N},Ut.size=function(or){return arguments.length?($e=or&&[+or[0],+or[1]],Ut):$e},Ut.duration=function(or){return arguments.length?(pt=+or,Ut):pt},Ut.x=function(or){return arguments.length?(ge=or,ce=or.copy(),Oe={x:0,y:0,k:1},Ut):ge},Ut.y=function(or){return arguments.length?(Se=or,we=or.copy(),Oe={x:0,y:0,k:1},Ut):Se},g.rebind(Ut,Gt,"on")};var ke,Ve,Je=[0,1/0];function nt(){}function Ke(pe,P,N){return this instanceof Ke?(this.h=+pe,this.s=+P,void(this.l=+N)):arguments.length<2?pe instanceof Ke?new Ke(pe.h,pe.s,pe.l):Un(""+pe,Tn,Ke):new Ke(pe,P,N)}g.color=nt,nt.prototype.toString=function(){return this.rgb()+""},g.hsl=Ke;var vt=Ke.prototype=new nt;function gt(pe,P,N){var j,Z;function ce(ge){return Math.round(255*((we=ge)>360?we-=360:we<0&&(we+=360),we<60?j+(Z-j)*we/60:we<180?Z:we<240?j+(Z-j)*(240-we)/60:j));var we}return pe=isNaN(pe)?0:(pe%=360)<0?pe+360:pe,P=isNaN(P)||P<0?0:P>1?1:P,j=2*(N=N<0?0:N>1?1:N)-(Z=N<=.5?N*(1+P):N+P-N*P),new Rt(ce(pe+120),ce(pe),ce(pe-120))}function Ot(pe,P,N){return this instanceof Ot?(this.h=+pe,this.c=+P,void(this.l=+N)):arguments.length<2?pe instanceof Ot?new Ot(pe.h,pe.c,pe.l):Pe(pe instanceof bt?pe.l:(pe=un((pe=g.rgb(pe)).r,pe.g,pe.b)).l,pe.a,pe.b):new Ot(pe,P,N)}vt.brighter=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new Ke(this.h,this.s,this.l/pe)},vt.darker=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new Ke(this.h,this.s,pe*this.l)},vt.rgb=function(){return gt(this.h,this.s,this.l)},g.hcl=Ot;var Vt=Ot.prototype=new nt;function ft(pe,P,N){return isNaN(pe)&&(pe=0),isNaN(P)&&(P=0),new bt(N,Math.cos(pe*=yn)*P,Math.sin(pe)*P)}function bt(pe,P,N){return this instanceof bt?(this.l=+pe,this.a=+P,void(this.b=+N)):arguments.length<2?pe instanceof bt?new bt(pe.l,pe.a,pe.b):pe instanceof Ot?ft(pe.h,pe.c,pe.l):un((pe=Rt(pe)).r,pe.g,pe.b):new bt(pe,P,N)}Vt.brighter=function(pe){return new Ot(this.h,this.c,Math.min(100,this.l+Wt*(arguments.length?pe:1)))},Vt.darker=function(pe){return new Ot(this.h,this.c,Math.max(0,this.l-Wt*(arguments.length?pe:1)))},Vt.rgb=function(){return ft(this.h,this.c,this.l).rgb()},g.lab=bt;var Wt=18,Pt=bt.prototype=new nt;function Bt(pe,P,N){var j=(pe+16)/116,Z=j+P/500,ce=j-N/200;return new Rt(xt(3.2404542*(Z=.95047*et(Z))-1.5371385*(j=1*et(j))-.4985314*(ce=1.08883*et(ce))),xt(-.969266*Z+1.8760108*j+.041556*ce),xt(.0556434*Z-.2040259*j+1.0572252*ce))}function Pe(pe,P,N){return pe>0?new Ot(Math.atan2(N,P)*en,Math.sqrt(P*P+N*N),pe):new Ot(NaN,NaN,pe)}function et(pe){return pe>.206893034?pe*pe*pe:(pe-4/29)/7.787037}function dt(pe){return pe>.008856?Math.pow(pe,1/3):7.787037*pe+4/29}function xt(pe){return Math.round(255*(pe<=.00304?12.92*pe:1.055*Math.pow(pe,1/2.4)-.055))}function Rt(pe,P,N){return this instanceof Rt?(this.r=~~pe,this.g=~~P,void(this.b=~~N)):arguments.length<2?pe instanceof Rt?new Rt(pe.r,pe.g,pe.b):Un(""+pe,Rt,gt):new Rt(pe,P,N)}function Yt(pe){return new Rt(pe>>16,pe>>8&255,255&pe)}function nn(pe){return Yt(pe)+""}Pt.brighter=function(pe){return new bt(Math.min(100,this.l+Wt*(arguments.length?pe:1)),this.a,this.b)},Pt.darker=function(pe){return new bt(Math.max(0,this.l-Wt*(arguments.length?pe:1)),this.a,this.b)},Pt.rgb=function(){return Bt(this.l,this.a,this.b)},g.rgb=Rt;var Kt=Rt.prototype=new nt;function Mn(pe){return pe<16?"0"+Math.max(0,pe).toString(16):Math.min(255,pe).toString(16)}function Un(pe,P,N){var j,Z,ce,ge=0,we=0,Se=0;if(j=/([a-z]+)\((.*)\)/.exec(pe=pe.toLowerCase()))switch(Z=j[2].split(","),j[1]){case"hsl":return N(parseFloat(Z[0]),parseFloat(Z[1])/100,parseFloat(Z[2])/100);case"rgb":return P(fn(Z[0]),fn(Z[1]),fn(Z[2]))}return(ce=pn.get(pe))?P(ce.r,ce.g,ce.b):(null==pe||"#"!==pe.charAt(0)||isNaN(ce=parseInt(pe.slice(1),16))||(4===pe.length?(ge=(3840&ce)>>4,ge|=ge>>4,we=240&ce,we|=we>>4,Se=15&ce,Se|=Se<<4):7===pe.length&&(ge=(16711680&ce)>>16,we=(65280&ce)>>8,Se=255&ce)),P(ge,we,Se))}function Tn(pe,P,N){var j,Z,ce=Math.min(pe/=255,P/=255,N/=255),ge=Math.max(pe,P,N),we=ge-ce,Se=(ge+ce)/2;return we?(Z=Se<.5?we/(ge+ce):we/(2-ge-ce),j=pe==ge?(P-N)/we+(P<N?6:0):P==ge?(N-pe)/we+2:(pe-P)/we+4,j*=60):(j=NaN,Z=Se>0&&Se<1?0:j),new Ke(j,Z,Se)}function un(pe,P,N){var j=dt((.4124564*(pe=an(pe))+.3575761*(P=an(P))+.1804375*(N=an(N)))/.95047),Z=dt((.2126729*pe+.7151522*P+.072175*N)/1);return bt(116*Z-16,500*(j-Z),200*(Z-dt((.0193339*pe+.119192*P+.9503041*N)/1.08883)))}function an(pe){return(pe/=255)<=.04045?pe/12.92:Math.pow((pe+.055)/1.055,2.4)}function fn(pe){var P=parseFloat(pe);return"%"===pe.charAt(pe.length-1)?Math.round(2.55*P):P}Kt.brighter=function(pe){pe=Math.pow(.7,arguments.length?pe:1);var P=this.r,N=this.g,j=this.b,Z=30;return P||N||j?(P&&P<Z&&(P=Z),N&&N<Z&&(N=Z),j&&j<Z&&(j=Z),new Rt(Math.min(255,P/pe),Math.min(255,N/pe),Math.min(255,j/pe))):new Rt(Z,Z,Z)},Kt.darker=function(pe){return new Rt((pe=Math.pow(.7,arguments.length?pe:1))*this.r,pe*this.g,pe*this.b)},Kt.hsl=function(){return Tn(this.r,this.g,this.b)},Kt.toString=function(){return"#"+Mn(this.r)+Mn(this.g)+Mn(this.b)};var pn=g.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Sn(pe){return"function"==typeof pe?pe:function(){return pe}}function Nn(pe){return function(P,N,j){return 2===arguments.length&&"function"==typeof N&&(j=N,N=null),Kn(P,N,pe,j)}}function Kn(pe,P,N,j){var $e,Z={},ce=g.dispatch("beforesend","progress","load","error"),ge={},we=new XMLHttpRequest,Se=null;function Oe(){var $e,pt,Et,it=we.status;if(!it&&((Et=(pt=we).responseType)&&"text"!==Et?pt.response:pt.responseText)||it>=200&&it<300||304===it){try{$e=N.call(Z,we)}catch(pt){return void ce.error.call(Z,pt)}ce.load.call(Z,$e)}else ce.error.call(Z,we)}return self.XDomainRequest&&!("withCredentials"in we)&&/^(http(s)?:)?\/\//.test(pe)&&(we=new XDomainRequest),"onload"in we?we.onload=we.onerror=Oe:we.onreadystatechange=function(){we.readyState>3&&Oe()},we.onprogress=function($e){var it=g.event;g.event=$e;try{ce.progress.call(Z,we)}finally{g.event=it}},Z.header=function($e,it){return $e=($e+"").toLowerCase(),arguments.length<2?ge[$e]:(null==it?delete ge[$e]:ge[$e]=it+"",Z)},Z.mimeType=function($e){return arguments.length?(P=null==$e?null:$e+"",Z):P},Z.responseType=function($e){return arguments.length?(Se=$e,Z):Se},Z.response=function($e){return N=$e,Z},["get","post"].forEach(function($e){Z[$e]=function(){return Z.send.apply(Z,[$e].concat(b(arguments)))}}),Z.send=function($e,it,pt){if(2===arguments.length&&"function"==typeof it&&(pt=it,it=null),we.open($e,pe,!0),null==P||"accept"in ge||(ge.accept=P+",*/*"),we.setRequestHeader)for(var Et in ge)we.setRequestHeader(Et,ge[Et]);return null!=P&&we.overrideMimeType&&we.overrideMimeType(P),null!=Se&&(we.responseType=Se),null!=pt&&Z.on("error",pt).on("load",function(Ft){pt(null,Ft)}),ce.beforesend.call(Z,we),we.send(it??null),Z},Z.abort=function(){return we.abort(),Z},g.rebind(Z,ce,"on"),null==j?Z:Z.get(1===($e=j).length?function(it,pt){$e(null==it?pt:null)}:$e)}pn.forEach(function(pe,P){pn.set(pe,Yt(P))}),g.functor=Sn,g.xhr=Nn(D),g.dsv=function(pe,P){var N=new RegExp('["'+pe+"\n]"),j=pe.charCodeAt(0);function Z(Oe,$e,it){arguments.length<3&&(it=$e,$e=null);var pt=Kn(Oe,P,null==$e?ce:ge($e),it);return pt.row=function(Et){return arguments.length?pt.response(null==($e=Et)?ce:ge(Et)):$e},pt}function ce(Oe){return Z.parse(Oe.responseText)}function ge(Oe){return function($e){return Z.parse($e.responseText,Oe)}}function we(Oe){return Oe.map(Se).join(pe)}function Se(Oe){return N.test(Oe)?'"'+Oe.replace(/\"/g,'""')+'"':Oe}return Z.parse=function(Oe,$e){var it;return Z.parseRows(Oe,function(pt,Et){if(it)return it(pt,Et-1);var Ft=function(Dt){for(var zt={},Lt=pt.length,Gt=0;Gt<Lt;++Gt)zt[pt[Gt]]=Dt[Gt];return zt};it=$e?function(Dt,zt){return $e(Ft(Dt),zt)}:Ft})},Z.parseRows=function(Oe,$e){var it,pt,Et={},Ft={},Dt=[],zt=Oe.length,Lt=0,Gt=0;function Ut(){if(Lt>=zt)return Ft;if(pt)return pt=!1,Et;var vn=Lt;if(34===Oe.charCodeAt(vn)){for(var En=vn;En++<zt;)if(34===Oe.charCodeAt(En)){if(34!==Oe.charCodeAt(En+1))break;++En}return Lt=En+2,13===(qn=Oe.charCodeAt(En+1))?(pt=!0,10===Oe.charCodeAt(En+2)&&++Lt):10===qn&&(pt=!0),Oe.slice(vn+1,En).replace(/""/g,'"')}for(;Lt<zt;){var qn,Vn=1;if(10===(qn=Oe.charCodeAt(Lt++)))pt=!0;else if(13===qn)pt=!0,10===Oe.charCodeAt(Lt)&&(++Lt,++Vn);else if(qn!==j)continue;return Oe.slice(vn,Lt-Vn)}return Oe.slice(vn)}for(;(it=Ut())!==Ft;){for(var Zt=[];it!==Et&&it!==Ft;)Zt.push(it),it=Ut();$e&&null==(Zt=$e(Zt,Gt++))||Dt.push(Zt)}return Dt},Z.format=function(Oe){if(Array.isArray(Oe[0]))return Z.formatRows(Oe);var $e=new C,it=[];return Oe.forEach(function(pt){for(var Et in pt)$e.has(Et)||it.push($e.add(Et))}),[it.map(Se).join(pe)].concat(Oe.map(function(pt){return it.map(function(Et){return Se(pt[Et])}).join(pe)})).join("\n")},Z.formatRows=function(Oe){return Oe.map(we).join("\n")},Z},g.csv=g.dsv(",","text/csv"),g.tsv=g.dsv("\t","text/tab-separated-values");var Bn,cr,Lr,Qn,qr=this[z(this,"requestAnimationFrame")]||function(pe){setTimeout(pe,17)};function sr(pe,P,N){var j=arguments.length;j<2&&(P=0),j<3&&(N=Date.now());var ce={c:pe,t:N+P,n:null};return cr?cr.n=ce:Bn=ce,cr=ce,Lr||(Qn=clearTimeout(Qn),Lr=1,qr(hr)),ce}function hr(){var pe=jr(),P=di()-pe;P>24?(isFinite(P)&&(clearTimeout(Qn),Qn=setTimeout(hr,P)),Lr=0):(Lr=1,qr(hr))}function jr(){for(var pe=Date.now(),P=Bn;P;)pe>=P.t&&P.c(pe-P.t)&&(P.c=null),P=P.n;return pe}function di(){for(var pe,P=Bn,N=1/0;P;)P.c?(P.t<N&&(N=P.t),P=(pe=P).n):P=pe?pe.n=P.n:Bn=P.n;return cr=pe,N}function Jn(pe){return pe[0]}function Ar(pe){return pe[1]}function mr(pe){for(var P,N,j,Z=pe.length,ce=[0,1],ge=2,we=2;we<Z;we++){for(;ge>1&&((N=pe[ce[ge-1]])[0]-(P=pe[ce[ge-2]])[0])*((j=pe[we])[1]-P[1])-(N[1]-P[1])*(j[0]-P[0])<=0;)--ge;ce[ge++]=we}return ce.slice(0,ge)}function lr(pe,P){return pe[0]-P[0]||pe[1]-P[1]}g.timer=function(){sr.apply(this,arguments)},g.timer.flush=function(){jr(),di()},g.round=function(pe,P){return P?Math.round(pe*(P=Math.pow(10,P)))/P:Math.round(pe)},g.geom={},g.geom.hull=function(pe){var P=Jn,N=Ar;if(arguments.length)return j(pe);function j(Z){if(Z.length<3)return[];var ce,ge=Sn(P),we=Sn(N),Se=Z.length,Oe=[],$e=[];for(ce=0;ce<Se;ce++)Oe.push([+ge.call(this,Z[ce],ce),+we.call(this,Z[ce],ce),ce]);for(Oe.sort(lr),ce=0;ce<Se;ce++)$e.push([Oe[ce][0],-Oe[ce][1]]);var it=mr(Oe),pt=mr($e),Et=pt[0]===it[0],Ft=pt[pt.length-1]===it[it.length-1],Dt=[];for(ce=it.length-1;ce>=0;--ce)Dt.push(Z[Oe[it[ce]][2]]);for(ce=+Et;ce<pt.length-Ft;++ce)Dt.push(Z[Oe[pt[ce]][2]]);return Dt}return j.x=function(Z){return arguments.length?(P=Z,j):P},j.y=function(Z){return arguments.length?(N=Z,j):N},j},g.geom.polygon=function(pe){return V(pe,ri),pe};var ri=g.geom.polygon.prototype=[];function si(pe,P,N){return(N[0]-P[0])*(pe[1]-P[1])<(N[1]-P[1])*(pe[0]-P[0])}function Tr(pe,P,N,j){var Z=pe[0],ce=N[0],ge=P[0]-Z,we=j[0]-ce,Se=pe[1],Oe=N[1],$e=P[1]-Se,it=j[1]-Oe,pt=(we*(Se-Oe)-it*(Z-ce))/(it*ge-we*$e);return[Z+pt*ge,Se+pt*$e]}function Zr(pe){var P=pe[0],N=pe[pe.length-1];return!(P[0]-N[0]||P[1]-N[1])}ri.area=function(){for(var pe,P=-1,N=this.length,j=this[N-1],Z=0;++P<N;)Z+=(pe=j)[1]*(j=this[P])[0]-pe[0]*j[1];return.5*Z},ri.centroid=function(pe){var P,N,j=-1,Z=this.length,ce=0,ge=0,we=this[Z-1];for(arguments.length||(pe=-1/(6*this.area()));++j<Z;)ce+=((P=we)[0]+(we=this[j])[0])*(N=P[0]*we[1]-we[0]*P[1]),ge+=(P[1]+we[1])*N;return[ce*pe,ge*pe]},ri.clip=function(pe){for(var P,N,j,Z,ce,ge,we=Zr(pe),Se=-1,Oe=this.length-Zr(this),$e=this[Oe-1];++Se<Oe;){for(P=pe.slice(),pe.length=0,Z=this[Se],ce=P[(j=P.length-we)-1],N=-1;++N<j;)si(ge=P[N],$e,Z)?(si(ce,$e,Z)||pe.push(Tr(ce,ge,$e,Z)),pe.push(ge)):si(ce,$e,Z)&&pe.push(Tr(ce,ge,$e,Z)),ce=ge;we&&pe.push(pe[0]),$e=Z}return pe};var Ii,dn,Cn,jt,bn,An=[],$n=[];function Gn(){Br(this),this.edge=this.site=this.circle=null}function zn(pe){var P=An.pop()||new Gn;return P.site=pe,P}function Hn(pe){Ir(pe),Cn.remove(pe),An.push(pe),Br(pe)}function Ln(pe){var P=pe.circle,N=P.x,j=P.cy,Z={x:N,y:j},ce=pe.P,ge=pe.N,we=[pe];Hn(pe);for(var Se=ce;Se.circle&&o(N-Se.circle.x)<St&&o(j-Se.circle.cy)<St;)ce=Se.P,we.unshift(Se),Hn(Se),Se=ce;we.unshift(Se),Ir(Se);for(var Oe=ge;Oe.circle&&o(N-Oe.circle.x)<St&&o(j-Oe.circle.cy)<St;)ge=Oe.N,we.push(Oe),Hn(Oe),Oe=ge;we.push(Oe),Ir(Oe);var $e,it=we.length;for($e=1;$e<it;++$e)gi((Oe=we[$e]).edge,(Se=we[$e-1]).site,Oe.site,Z);(Oe=we[it-1]).edge=Ur((Se=we[0]).site,Oe.site,null,Z),xr(Se),xr(Oe)}function On(pe){for(var P,N,j,Z,ce=pe.x,ge=pe.y,we=Cn._;we;)if((j=Dn(we,ge)-ce)>St)we=we.L;else{if(!((Z=ce-Yn(we,ge))>St)){j>-St?(P=we.P,N=we):Z>-St?(P=we,N=we.N):P=N=we;break}if(!we.R){P=we;break}we=we.R}var Se=zn(pe);if(Cn.insert(P,Se),P||N){if(P===N)return Ir(P),N=zn(P.site),Cn.insert(Se,N),Se.edge=N.edge=Ur(P.site,Se.site),xr(P),void xr(N);if(N){Ir(P),Ir(N);var Oe=P.site,$e=Oe.x,it=Oe.y,pt=pe.x-$e,Et=pe.y-it,Ft=N.site,Dt=Ft.x-$e,zt=Ft.y-it,Lt=2*(pt*zt-Et*Dt),Gt=pt*pt+Et*Et,Ut=Dt*Dt+zt*zt,Zt={x:(zt*Gt-Et*Ut)/Lt+$e,y:(pt*Ut-Dt*Gt)/Lt+it};gi(N.edge,Oe,Ft,Zt),Se.edge=Ur(Oe,pe,null,Zt),N.edge=Ur(pe,Ft,null,Zt),xr(P),xr(N)}else Se.edge=Ur(P.site,Se.site)}}function Dn(pe,P){var N=pe.site,j=N.x,Z=N.y,ce=Z-P;if(!ce)return j;var ge=pe.P;if(!ge)return-1/0;var we=(N=ge.site).x,Se=N.y,Oe=Se-P;if(!Oe)return we;var $e=we-j,it=1/ce-1/Oe,pt=$e/Oe;return it?(-pt+Math.sqrt(pt*pt-2*it*($e*$e/(-2*Oe)-Se+Oe/2+Z-ce/2)))/it+j:(j+we)/2}function Yn(pe,P){var N=pe.N;if(N)return Dn(N,P);var j=pe.site;return j.y===P?j.x:1/0}function rr(pe){this.site=pe,this.edges=[]}function ar(pe,P){return P.angle-pe.angle}function vr(){Br(this),this.x=this.y=this.arc=this.site=this.cy=null}function xr(pe){var P=pe.P,N=pe.N;if(P&&N){var j=P.site,Z=pe.site,ce=N.site;if(j!==ce){var ge=Z.x,we=Z.y,Se=j.x-ge,Oe=j.y-we,$e=ce.x-ge,it=2*(Se*(zt=ce.y-we)-Oe*$e);if(!(it>=-1e-12)){var pt=Se*Se+Oe*Oe,Et=$e*$e+zt*zt,Ft=(zt*pt-Oe*Et)/it,Dt=(Se*Et-$e*pt)/it,zt=Dt+we,Lt=$n.pop()||new vr;Lt.arc=pe,Lt.site=Z,Lt.x=Ft+ge,Lt.y=zt+Math.sqrt(Ft*Ft+Dt*Dt),Lt.cy=zt,pe.circle=Lt;for(var Gt=null,Ut=bn._;Ut;)if(Lt.y<Ut.y||Lt.y===Ut.y&&Lt.x<=Ut.x){if(!Ut.L){Gt=Ut.P;break}Ut=Ut.L}else{if(!Ut.R){Gt=Ut;break}Ut=Ut.R}bn.insert(Gt,Lt),Gt||(jt=Lt)}}}}function Ir(pe){var P=pe.circle;P&&(P.P||(jt=P.N),bn.remove(P),$n.push(P),Br(P),pe.circle=null)}function Or(pe,P){var N=pe.b;if(N)return!0;var j,Z,ce=pe.a,ge=P[0][0],we=P[1][0],Se=P[0][1],Oe=P[1][1],$e=pe.l,it=pe.r,pt=$e.x,Et=$e.y,Ft=it.x,Dt=it.y,zt=(pt+Ft)/2;if(Dt===Et){if(zt<ge||zt>=we)return;if(pt>Ft){if(ce){if(ce.y>=Oe)return}else ce={x:zt,y:Se};N={x:zt,y:Oe}}else{if(ce){if(ce.y<Se)return}else ce={x:zt,y:Oe};N={x:zt,y:Se}}}else if(Z=(Et+Dt)/2-(j=(pt-Ft)/(Dt-Et))*zt,j<-1||j>1)if(pt>Ft){if(ce){if(ce.y>=Oe)return}else ce={x:(Se-Z)/j,y:Se};N={x:(Oe-Z)/j,y:Oe}}else{if(ce){if(ce.y<Se)return}else ce={x:(Oe-Z)/j,y:Oe};N={x:(Se-Z)/j,y:Se}}else if(Et<Dt){if(ce){if(ce.x>=we)return}else ce={x:ge,y:j*ge+Z};N={x:we,y:j*we+Z}}else{if(ce){if(ce.x<ge)return}else ce={x:we,y:j*we+Z};N={x:ge,y:j*ge+Z}}return pe.a=ce,pe.b=N,!0}function Rr(pe,P){this.l=pe,this.r=P,this.a=this.b=null}function Ur(pe,P,N,j){var Z=new Rr(pe,P);return Ii.push(Z),N&&gi(Z,pe,P,N),j&&gi(Z,P,pe,j),dn[pe.i].edges.push(new ai(Z,pe,P)),dn[P.i].edges.push(new ai(Z,P,pe)),Z}function $r(pe,P,N){var j=new Rr(pe,null);return j.a=P,j.b=N,Ii.push(j),j}function gi(pe,P,N,j){pe.a||pe.b?pe.l===N?pe.b=j:pe.a=j:(pe.a=j,pe.l=P,pe.r=N)}function ai(pe,P,N){var j=pe.a,Z=pe.b;this.edge=pe,this.site=P,this.angle=N?Math.atan2(N.y-P.y,N.x-P.x):pe.l===P?Math.atan2(Z.x-j.x,j.y-Z.y):Math.atan2(j.x-Z.x,Z.y-j.y)}function Wi(){this._=null}function Br(pe){pe.U=pe.C=pe.L=pe.R=pe.P=pe.N=null}function ui(pe,P){var N=P,j=P.R,Z=N.U;Z?Z.L===N?Z.L=j:Z.R=j:pe._=j,j.U=Z,N.U=j,N.R=j.L,N.R&&(N.R.U=N),j.L=N}function mi(pe,P){var N=P,j=P.L,Z=N.U;Z?Z.L===N?Z.L=j:Z.R=j:pe._=j,j.U=Z,N.U=j,N.L=j.R,N.L&&(N.L.U=N),j.R=N}function ya(pe){for(;pe.L;)pe=pe.L;return pe}function Wa(pe,P){var N,j,Z,ce=pe.sort(Xa).pop();for(Ii=[],dn=new Array(pe.length),Cn=new Wi,bn=new Wi;;)if(Z=jt,ce&&(!Z||ce.y<Z.y||ce.y===Z.y&&ce.x<Z.x))ce.x===N&&ce.y===j||(dn[ce.i]=new rr(ce),On(ce),N=ce.x,j=ce.y),ce=pe.pop();else{if(!Z)break;Ln(Z.arc)}P&&(function(we){for(var Se,Oe,$e,it,pt,Et=Ii,Ft=(Oe=we[0][0],$e=we[0][1],it=we[1][0],pt=we[1][1],function(zt){var Lt,Gt=zt.a,Ut=zt.b,Zt=Gt.x,vn=Gt.y,En=0,qn=1,Vn=Ut.x-Zt,pr=Ut.y-vn;if(Lt=Oe-Zt,Vn||!(Lt>0)){if(Lt/=Vn,Vn<0){if(Lt<En)return;Lt<qn&&(qn=Lt)}else if(Vn>0){if(Lt>qn)return;Lt>En&&(En=Lt)}if(Lt=it-Zt,Vn||!(Lt<0)){if(Lt/=Vn,Vn<0){if(Lt>qn)return;Lt>En&&(En=Lt)}else if(Vn>0){if(Lt<En)return;Lt<qn&&(qn=Lt)}if(Lt=$e-vn,pr||!(Lt>0)){if(Lt/=pr,pr<0){if(Lt<En)return;Lt<qn&&(qn=Lt)}else if(pr>0){if(Lt>qn)return;Lt>En&&(En=Lt)}if(Lt=pt-vn,pr||!(Lt<0)){if(Lt/=pr,pr<0){if(Lt>qn)return;Lt>En&&(En=Lt)}else if(pr>0){if(Lt<En)return;Lt<qn&&(qn=Lt)}return En>0&&(zt.a={x:Zt+En*Vn,y:vn+En*pr}),qn<1&&(zt.b={x:Zt+qn*Vn,y:vn+qn*pr}),zt}}}}}),Dt=Et.length;Dt--;)(!Or(Se=Et[Dt],we)||!Ft(Se)||o(Se.a.x-Se.b.x)<St&&o(Se.a.y-Se.b.y)<St)&&(Se.a=Se.b=null,Et.splice(Dt,1))}(P),function(we){for(var Se,Oe,$e,it,pt,Et,Ft,Dt,zt,Lt,Gt=we[0][0],Ut=we[1][0],Zt=we[0][1],vn=we[1][1],En=dn,qn=En.length;qn--;)if((pt=En[qn])&&pt.prepare())for(Dt=(Ft=pt.edges).length,Et=0;Et<Dt;)$e=(Lt=Ft[Et].end()).x,it=Lt.y,Se=(zt=Ft[++Et%Dt].start()).x,Oe=zt.y,(o($e-Se)>St||o(it-Oe)>St)&&(Ft.splice(Et,0,new ai($r(pt.site,Lt,o($e-Gt)<St&&vn-it>St?{x:Gt,y:o(Se-Gt)<St?Oe:vn}:o(it-vn)<St&&Ut-$e>St?{x:o(Oe-vn)<St?Se:Ut,y:vn}:o($e-Ut)<St&&it-Zt>St?{x:Ut,y:o(Se-Ut)<St?Oe:Zt}:o(it-Zt)<St&&$e-Gt>St?{x:o(Oe-Zt)<St?Se:Gt,y:Zt}:null),pt.site,null)),++Dt)}(P));var ge={cells:dn,edges:Ii};return Cn=bn=Ii=dn=null,ge}function Xa(pe,P){return P.y-pe.y||P.x-pe.x}rr.prototype.prepare=function(){for(var pe,P=this.edges,N=P.length;N--;)(pe=P[N].edge).b&&pe.a||P.splice(N,1);return P.sort(ar),P.length},ai.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Wi.prototype={insert:function(pe,P){var N,j,Z;if(pe){if(P.P=pe,P.N=pe.N,pe.N&&(pe.N.P=P),pe.N=P,pe.R){for(pe=pe.R;pe.L;)pe=pe.L;pe.L=P}else pe.R=P;N=pe}else this._?(pe=ya(this._),P.P=null,P.N=pe,pe.P=pe.L=P,N=pe):(P.P=P.N=null,this._=P,N=null);for(P.L=P.R=null,P.U=N,P.C=!0,pe=P;N&&N.C;)N===(j=N.U).L?(Z=j.R)&&Z.C?(N.C=Z.C=!1,j.C=!0,pe=j):(pe===N.R&&(ui(this,N),N=(pe=N).U),N.C=!1,j.C=!0,mi(this,j)):(Z=j.L)&&Z.C?(N.C=Z.C=!1,j.C=!0,pe=j):(pe===N.L&&(mi(this,N),N=(pe=N).U),N.C=!1,j.C=!0,ui(this,j)),N=pe.U;this._.C=!1},remove:function(pe){pe.N&&(pe.N.P=pe.P),pe.P&&(pe.P.N=pe.N),pe.N=pe.P=null;var P,N,j,Z=pe.U,ce=pe.L,ge=pe.R;if(N=ce?ge?ya(ge):ce:ge,Z?Z.L===pe?Z.L=N:Z.R=N:this._=N,ce&&ge?(j=N.C,N.C=pe.C,N.L=ce,ce.U=N,N!==ge?(Z=N.U,N.U=pe.U,Z.L=pe=N.R,N.R=ge,ge.U=N):(N.U=Z,Z=N,pe=N.R)):(j=pe.C,pe=N),pe&&(pe.U=Z),!j)if(pe&&pe.C)pe.C=!1;else{do{if(pe===this._)break;if(pe===Z.L){if((P=Z.R).C&&(P.C=!1,Z.C=!0,ui(this,Z),P=Z.R),P.L&&P.L.C||P.R&&P.R.C){P.R&&P.R.C||(P.L.C=!1,P.C=!0,mi(this,P),P=Z.R),P.C=Z.C,Z.C=P.R.C=!1,ui(this,Z),pe=this._;break}}else if((P=Z.L).C&&(P.C=!1,Z.C=!0,mi(this,Z),P=Z.L),P.L&&P.L.C||P.R&&P.R.C){P.L&&P.L.C||(P.R.C=!1,P.C=!0,ui(this,P),P=Z.L),P.C=Z.C,Z.C=P.L.C=!1,mi(this,Z),pe=this._;break}P.C=!0,pe=Z,Z=Z.U}while(!pe.C);pe&&(pe.C=!1)}}},g.geom.voronoi=function(pe){var P=Jn,N=Ar,j=P,Z=N,ce=ws;if(pe)return ge(pe);function ge(Se){var Oe=new Array(Se.length),$e=ce[0][0],it=ce[0][1],pt=ce[1][0],Et=ce[1][1];return Wa(we(Se),ce).cells.forEach(function(Ft,Dt){var zt=Ft.edges,Lt=Ft.site;(Oe[Dt]=zt.length?zt.map(function(Gt){var Ut=Gt.start();return[Ut.x,Ut.y]}):Lt.x>=$e&&Lt.x<=pt&&Lt.y>=it&&Lt.y<=Et?[[$e,Et],[pt,Et],[pt,it],[$e,it]]:[]).point=Se[Dt]}),Oe}function we(Se){return Se.map(function(Oe,$e){return{x:Math.round(j(Oe,$e)/St)*St,y:Math.round(Z(Oe,$e)/St)*St,i:$e}})}return ge.links=function(Se){return Wa(we(Se)).edges.filter(function(Oe){return Oe.l&&Oe.r}).map(function(Oe){return{source:Se[Oe.l.i],target:Se[Oe.r.i]}})},ge.triangles=function(Se){var Oe=[];return Wa(we(Se)).cells.forEach(function($e,it){for(var pt,Et,Ft,Dt,zt=$e.site,Lt=$e.edges.sort(ar),Gt=-1,Ut=Lt.length,Zt=Lt[Ut-1].edge,vn=Zt.l===zt?Zt.r:Zt.l;++Gt<Ut;)pt=vn,vn=(Zt=Lt[Gt].edge).l===zt?Zt.r:Zt.l,it<pt.i&&it<vn.i&&((Et=zt).x-(Dt=vn).x)*((Ft=pt).y-Et.y)-(Et.x-Ft.x)*(Dt.y-Et.y)<0&&Oe.push([Se[it],Se[pt.i],Se[vn.i]])}),Oe},ge.x=function(Se){return arguments.length?(j=Sn(P=Se),ge):P},ge.y=function(Se){return arguments.length?(Z=Sn(N=Se),ge):N},ge.clipExtent=function(Se){return arguments.length?(ce=Se??ws,ge):ce===ws?null:ce},ge.size=function(Se){return arguments.length?ge.clipExtent(Se&&[[0,0],Se]):ce===ws?null:ce&&ce[1]},ge};var ws=[[-1e6,-1e6],[1e6,1e6]];function Va(pe){return pe.x}function ua(pe){return pe.y}function sa(pe,P,N,j,Z,ce){if(!pe(P,N,j,Z,ce)){var ge=.5*(N+Z),we=.5*(j+ce),Se=P.nodes;Se[0]&&sa(pe,Se[0],N,j,ge,we),Se[1]&&sa(pe,Se[1],ge,j,Z,we),Se[2]&&sa(pe,Se[2],N,we,ge,ce),Se[3]&&sa(pe,Se[3],ge,we,Z,ce)}}function Ta(pe,P,N,j,Z,ce,ge){var we,Se=1/0;return function Oe($e,it,pt,Et,Ft){if(!(it>ce||pt>ge||Et<j||Ft<Z)){if(Dt=$e.point){var Dt,zt=P-$e.x,Lt=N-$e.y,Gt=zt*zt+Lt*Lt;if(Gt<Se){var Ut=Math.sqrt(Se=Gt);j=P-Ut,Z=N-Ut,ce=P+Ut,ge=N+Ut,we=Dt}}for(var Zt=$e.nodes,vn=.5*(it+Et),En=.5*(pt+Ft),qn=(N>=En)<<1|P>=vn,Vn=qn+4;qn<Vn;++qn)if($e=Zt[3&qn])switch(3&qn){case 0:Oe($e,it,pt,vn,En);break;case 1:Oe($e,vn,pt,Et,En);break;case 2:Oe($e,it,En,vn,Ft);break;case 3:Oe($e,vn,En,Et,Ft)}}}(pe,j,Z,ce,ge),we}function Ts(pe,P){pe=g.rgb(pe),P=g.rgb(P);var N=pe.r,j=pe.g,Z=pe.b,ce=P.r-N,ge=P.g-j,we=P.b-Z;return function(Se){return"#"+Mn(Math.round(N+ce*Se))+Mn(Math.round(j+ge*Se))+Mn(Math.round(Z+we*Se))}}function Fo(pe,P){var N,j={},Z={};for(N in pe)N in P?j[N]=Lo(pe[N],P[N]):Z[N]=pe[N];for(N in P)N in pe||(Z[N]=P[N]);return function(ce){for(N in j)Z[N]=j[N](ce);return Z}}function Xi(pe,P){return pe=+pe,P=+P,function(N){return pe*(1-N)+P*N}}function zo(pe,P){var N,j,Z,ce=es.lastIndex=cs.lastIndex=0,ge=-1,we=[],Se=[];for(pe+="",P+="";(N=es.exec(pe))&&(j=cs.exec(P));)(Z=j.index)>ce&&(Z=P.slice(ce,Z),we[ge]?we[ge]+=Z:we[++ge]=Z),(N=N[0])===(j=j[0])?we[ge]?we[ge]+=j:we[++ge]=j:(we[++ge]=null,Se.push({i:ge,x:Xi(N,j)})),ce=cs.lastIndex;return ce<P.length&&(Z=P.slice(ce),we[ge]?we[ge]+=Z:we[++ge]=Z),we.length<2?Se[0]?(P=Se[0].x,function(Oe){return P(Oe)+""}):function(){return P}:(P=Se.length,function(Oe){for(var $e,it=0;it<P;++it)we[($e=Se[it]).i]=$e.x(Oe);return we.join("")})}g.geom.delaunay=function(pe){return g.geom.voronoi().triangles(pe)},g.geom.quadtree=function(pe,P,N,j,Z){var ce,ge=Jn,we=Ar;if(ce=arguments.length)return ge=Va,we=ua,3===ce&&(Z=N,j=P,N=P=0),Se(pe);function Se(Oe){var $e,it,pt,Et,Ft,Dt,zt,Lt,Gt,Ut=Sn(ge),Zt=Sn(we);if(null!=P)Dt=P,zt=N,Lt=j,Gt=Z;else if(Lt=Gt=-(Dt=zt=1/0),it=[],pt=[],Ft=Oe.length,ce)for(Et=0;Et<Ft;++Et)($e=Oe[Et]).x<Dt&&(Dt=$e.x),$e.y<zt&&(zt=$e.y),$e.x>Lt&&(Lt=$e.x),$e.y>Gt&&(Gt=$e.y),it.push($e.x),pt.push($e.y);else for(Et=0;Et<Ft;++Et){var vn=+Ut($e=Oe[Et],Et),En=+Zt($e,Et);vn<Dt&&(Dt=vn),En<zt&&(zt=En),vn>Lt&&(Lt=vn),En>Gt&&(Gt=En),it.push(vn),pt.push(En)}var qn=Lt-Dt,Vn=Gt-zt;function pr(yr,Jr,vi,Fi,or,zr,yi,ci){if(!isNaN(vi)&&!isNaN(Fi))if(yr.leaf){var Si=yr.x,ji=yr.y;if(null!=Si)if(o(Si-vi)+o(ji-Fi)<.01)gr(yr,Jr,vi,Fi,or,zr,yi,ci);else{var Ji=yr.point;yr.x=yr.y=yr.point=null,gr(yr,Ji,Si,ji,or,zr,yi,ci),gr(yr,Jr,vi,Fi,or,zr,yi,ci)}else yr.x=vi,yr.y=Fi,yr.point=Jr}else gr(yr,Jr,vi,Fi,or,zr,yi,ci)}function gr(yr,Jr,vi,Fi,or,zr,yi,ci){var Si=.5*(or+yi),ji=.5*(zr+ci),Ji=vi>=Si,_i=Fi>=ji,qi=_i<<1|Ji;yr.leaf=!1,Ji?or=Si:yi=Si,_i?zr=ji:ci=ji,pr(yr=yr.nodes[qi]||(yr.nodes[qi]={leaf:!0,nodes:[],point:null,x:null,y:null}),Jr,vi,Fi,or,zr,yi,ci)}qn>Vn?Gt=zt+qn:Lt=Dt+Vn;var Er={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(yr){pr(Er,yr,+Ut(yr,++Et),+Zt(yr,Et),Dt,zt,Lt,Gt)},visit:function(yr){sa(yr,Er,Dt,zt,Lt,Gt)},find:function(yr){return Ta(Er,yr[0],yr[1],Dt,zt,Lt,Gt)}};if(Et=-1,null==P){for(;++Et<Ft;)pr(Er,Oe[Et],it[Et],pt[Et],Dt,zt,Lt,Gt);--Et}else Oe.forEach(Er.add);return it=pt=Oe=$e=null,Er}return Se.x=function(Oe){return arguments.length?(ge=Oe,Se):ge},Se.y=function(Oe){return arguments.length?(we=Oe,Se):we},Se.extent=function(Oe){return arguments.length?(null==Oe?P=N=j=Z=null:(P=+Oe[0][0],N=+Oe[0][1],j=+Oe[1][0],Z=+Oe[1][1]),Se):null==P?null:[[P,N],[j,Z]]},Se.size=function(Oe){return arguments.length?(null==Oe?P=N=j=Z=null:(P=N=0,j=+Oe[0],Z=+Oe[1]),Se):null==P?null:[j-P,Z-N]},Se},g.interpolateRgb=Ts,g.interpolateObject=Fo,g.interpolateNumber=Xi,g.interpolateString=zo;var es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cs=new RegExp(es.source,"g");function Lo(pe,P){for(var N,j=g.interpolators.length;--j>=0&&!(N=g.interpolators[j](pe,P)););return N}function Ua(pe,P){var N,j=[],Z=[],ce=pe.length,ge=P.length,we=Math.min(pe.length,P.length);for(N=0;N<we;++N)j.push(Lo(pe[N],P[N]));for(;N<ce;++N)Z[N]=pe[N];for(;N<ge;++N)Z[N]=P[N];return function(Se){for(N=0;N<we;++N)Z[N]=j[N](Se);return Z}}g.interpolate=Lo,g.interpolators=[function(pe,P){var N=typeof P;return("string"===N?pn.has(P.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(P)?Ts:zo:P instanceof nt?Ts:Array.isArray(P)?Ua:"object"===N&&isNaN(P)?Fo:Xi)(pe,P)}],g.interpolateArray=Ua;var Co=function(){return D},kl=g.map({linear:Co,poly:function(pe){return function(P){return Math.pow(P,pe)}},quad:function(){return Os},cubic:function(){return Rl},sin:function(){return fs},exp:function(){return oo},circle:function(){return pa},elastic:function(pe,P){var N;return arguments.length<2&&(P=.45),arguments.length?N=P/tn*Math.asin(1/pe):(pe=1,N=P/4),function(j){return 1+pe*Math.pow(2,-10*j)*Math.sin((j-N)*tn/P)}},back:function(pe){return pe||(pe=1.70158),function(P){return P*P*((pe+1)*P-pe)}},bounce:function(){return ho}}),fl=g.map({in:D,out:hl,"in-out":$s,"out-in":function(pe){return $s(hl(pe))}});function Fa(pe){return function(P){return P<=0?0:P>=1?1:pe(P)}}function hl(pe){return function(P){return 1-pe(1-P)}}function $s(pe){return function(P){return.5*(P<.5?pe(2*P):2-pe(2-2*P))}}function Os(pe){return pe*pe}function Rl(pe){return pe*pe*pe}function ml(pe){if(pe<=0)return 0;if(pe>=1)return 1;var P=pe*pe,N=P*pe;return 4*(pe<.5?N:3*(pe-P)+N-.75)}function fs(pe){return 1-Math.cos(pe*cn)}function oo(pe){return Math.pow(2,10*(pe-1))}function pa(pe){return 1-Math.sqrt(1-pe*pe)}function ho(pe){return pe<1/2.75?7.5625*pe*pe:pe<2/2.75?7.5625*(pe-=1.5/2.75)*pe+.75:pe<2.5/2.75?7.5625*(pe-=2.25/2.75)*pe+.9375:7.5625*(pe-=2.625/2.75)*pe+.984375}function po(pe,P){return P-=pe,function(N){return Math.round(pe+P*N)}}function ko(pe){var P,N,j,Z=[pe.a,pe.b],ce=[pe.c,pe.d],ge=hi(Z),we=No(Z,ce),Se=hi(((P=ce)[0]+=(j=-we)*(N=Z)[0],P[1]+=j*N[1],P))||0;Z[0]*ce[1]<ce[0]*Z[1]&&(Z[0]*=-1,Z[1]*=-1,ge*=-1,we*=-1),this.rotate=(ge?Math.atan2(Z[1],Z[0]):Math.atan2(-ce[0],ce[1]))*en,this.translate=[pe.e,pe.f],this.scale=[ge,Se],this.skew=Se?Math.atan2(we,Se)*en:0}function No(pe,P){return pe[0]*P[0]+pe[1]*P[1]}function hi(pe){var P=Math.sqrt(No(pe,pe));return P&&(pe[0]/=P,pe[1]/=P),P}g.ease=function(pe){var P=pe.indexOf("-"),N=P>=0?pe.slice(0,P):pe,j=P>=0?pe.slice(P+1):"in";return N=kl.get(N)||Co,Fa((j=fl.get(j)||D)(N.apply(null,m.call(arguments,1))))},g.interpolateHcl=function(pe,P){pe=g.hcl(pe),P=g.hcl(P);var N=pe.h,j=pe.c,Z=pe.l,ce=P.h-N,ge=P.c-j,we=P.l-Z;return isNaN(ge)&&(ge=0,j=isNaN(j)?P.c:j),isNaN(ce)?(ce=0,N=isNaN(N)?P.h:N):ce>180?ce-=360:ce<-180&&(ce+=360),function(Se){return ft(N+ce*Se,j+ge*Se,Z+we*Se)+""}},g.interpolateHsl=function(pe,P){pe=g.hsl(pe),P=g.hsl(P);var N=pe.h,j=pe.s,Z=pe.l,ce=P.h-N,ge=P.s-j,we=P.l-Z;return isNaN(ge)&&(ge=0,j=isNaN(j)?P.s:j),isNaN(ce)?(ce=0,N=isNaN(N)?P.h:N):ce>180?ce-=360:ce<-180&&(ce+=360),function(Se){return gt(N+ce*Se,j+ge*Se,Z+we*Se)+""}},g.interpolateLab=function(pe,P){pe=g.lab(pe),P=g.lab(P);var N=pe.l,j=pe.a,Z=pe.b,ce=P.l-N,ge=P.a-j,we=P.b-Z;return function(Se){return Bt(N+ce*Se,j+ge*Se,Z+we*Se)+""}},g.interpolateRound=po,g.transform=function(pe){var P=y.createElementNS(g.ns.prefix.svg,"g");return(g.transform=function(N){if(null!=N){P.setAttribute("transform",N);var j=P.transform.baseVal.consolidate()}return new ko(j?j.matrix:na)})(pe)},ko.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var na={a:1,b:0,c:0,d:1,e:0,f:0};function Ma(pe){return pe.length?pe.pop()+",":""}function Ao(pe,P){var Z,ce,ge,N=[],j=[];return pe=g.transform(pe),P=g.transform(P),function(Z,ce,ge,we){if(Z[0]!==ce[0]||Z[1]!==ce[1]){var Se=ge.push("translate(",null,",",null,")");we.push({i:Se-4,x:Xi(Z[0],ce[0])},{i:Se-2,x:Xi(Z[1],ce[1])})}else(ce[0]||ce[1])&&ge.push("translate("+ce+")")}(pe.translate,P.translate,N,j),ge=N,(Z=pe.rotate)!==(ce=P.rotate)?(Z-ce>180?ce+=360:ce-Z>180&&(Z+=360),j.push({i:ge.push(Ma(ge)+"rotate(",null,")")-2,x:Xi(Z,ce)})):ce&&ge.push(Ma(ge)+"rotate("+ce+")"),function(Z,ce,ge,we){Z!==ce?we.push({i:ge.push(Ma(ge)+"skewX(",null,")")-2,x:Xi(Z,ce)}):ce&&ge.push(Ma(ge)+"skewX("+ce+")")}(pe.skew,P.skew,N,j),function(Z,ce,ge,we){if(Z[0]!==ce[0]||Z[1]!==ce[1]){var Se=ge.push(Ma(ge)+"scale(",null,",",null,")");we.push({i:Se-4,x:Xi(Z[0],ce[0])},{i:Se-2,x:Xi(Z[1],ce[1])})}else 1===ce[0]&&1===ce[1]||ge.push(Ma(ge)+"scale("+ce+")")}(pe.scale,P.scale,N,j),pe=P=null,function(Z){for(var ce,ge=-1,we=j.length;++ge<we;)N[(ce=j[ge]).i]=ce.x(Z);return N.join("")}}function Rs(pe,P){return P=(P-=pe=+pe)||1/P,function(N){return(N-pe)/P}}function Qa(pe,P){return P=(P-=pe=+pe)||1/P,function(N){return Math.max(0,Math.min(1,(N-pe)/P))}}function ga(pe){for(var P=pe.source,N=pe.target,j=function(ge,we){if(ge===we)return ge;for(var Se=Ge(ge),Oe=Ge(we),$e=Se.pop(),it=Oe.pop(),pt=null;$e===it;)pt=$e,$e=Se.pop(),it=Oe.pop();return pt}(P,N),Z=[P];P!==j;)Z.push(P=P.parent);for(var ce=Z.length;N!==j;)Z.splice(ce,0,N),N=N.parent;return Z}function Ge(pe){for(var P=[],N=pe.parent;null!=N;)P.push(pe),pe=N,N=N.parent;return P.push(pe),P}function Qe(pe){pe.fixed|=2}function ut(pe){pe.fixed&=-7}function ht(pe){pe.fixed|=4,pe.px=pe.x,pe.py=pe.y}function kt(pe){pe.fixed&=-5}g.interpolateTransform=Ao,g.layout={},g.layout.bundle=function(){return function(pe){for(var P=[],N=-1,j=pe.length;++N<j;)P.push(ga(pe[N]));return P}},g.layout.chord=function(){var pe,P,N,j,Z,ce,ge,we={},Se=0;function Oe(){var it,pt,Et,Ft,Dt,zt={},Lt=[],Gt=g.range(j),Ut=[];for(pe=[],P=[],it=0,Ft=-1;++Ft<j;){for(pt=0,Dt=-1;++Dt<j;)pt+=N[Ft][Dt];Lt.push(pt),Ut.push(g.range(j)),it+=pt}for(Z&&Gt.sort(function(Er,yr){return Z(Lt[Er],Lt[yr])}),ce&&Ut.forEach(function(Er,yr){Er.sort(function(Jr,vi){return ce(N[yr][Jr],N[yr][vi])})}),it=(tn-Se*j)/it,pt=0,Ft=-1;++Ft<j;){for(Et=pt,Dt=-1;++Dt<j;){var Zt=Gt[Ft],vn=Ut[Zt][Dt],En=N[Zt][vn],qn=pt,Vn=pt+=En*it;zt[Zt+"-"+vn]={index:Zt,subindex:vn,startAngle:qn,endAngle:Vn,value:En}}P[Zt]={index:Zt,startAngle:Et,endAngle:pt,value:Lt[Zt]},pt+=Se}for(Ft=-1;++Ft<j;)for(Dt=Ft-1;++Dt<j;){var pr=zt[Ft+"-"+Dt],gr=zt[Dt+"-"+Ft];(pr.value||gr.value)&&pe.push(pr.value<gr.value?{source:gr,target:pr}:{source:pr,target:gr})}ge&&$e()}function $e(){pe.sort(function(it,pt){return ge((it.source.value+it.target.value)/2,(pt.source.value+pt.target.value)/2)})}return we.matrix=function(it){return arguments.length?(j=(N=it)&&N.length,pe=P=null,we):N},we.padding=function(it){return arguments.length?(Se=it,pe=P=null,we):Se},we.sortGroups=function(it){return arguments.length?(Z=it,pe=P=null,we):Z},we.sortSubgroups=function(it){return arguments.length?(ce=it,pe=null,we):ce},we.sortChords=function(it){return arguments.length?(ge=it,pe&&$e(),we):ge},we.chords=function(){return pe||Oe(),pe},we.groups=function(){return P||Oe(),P},we},g.layout.force=function(){var pe,P,N,j,Z,ce,ge={},we=g.dispatch("start","tick","end"),Se=[1,1],Oe=.9,$e=Mt,it=Nt,pt=-30,Et=ln,Ft=.1,Dt=.64,zt=[],Lt=[];function Gt(Zt){return function(vn,En,qn,Vn){if(vn.point!==Zt){var pr=vn.cx-Zt.x,gr=vn.cy-Zt.y,Er=Vn-En,yr=pr*pr+gr*gr;if(Er*Er/Dt<yr){if(yr<Et){var Jr=vn.charge/yr;Zt.px-=pr*Jr,Zt.py-=gr*Jr}return!0}vn.point&&yr&&yr<Et&&(Zt.px-=pr*(Jr=vn.pointCharge/yr),Zt.py-=gr*Jr)}return!vn.charge}}function Ut(Zt){Zt.px=g.event.x,Zt.py=g.event.y,ge.resume()}return ge.tick=function(){if((N*=.99)<.005)return pe=null,we.end({type:"end",alpha:N=0}),!0;var Zt,vn,En,qn,Vn,pr,gr,Er,yr,Jr=zt.length,vi=Lt.length;for(vn=0;vn<vi;++vn)qn=(En=Lt[vn]).source,(pr=(Er=(Vn=En.target).x-qn.x)*Er+(yr=Vn.y-qn.y)*yr)&&(Er*=pr=N*Z[vn]*((pr=Math.sqrt(pr))-j[vn])/pr,yr*=pr,Vn.x-=Er*(gr=qn.weight+Vn.weight?qn.weight/(qn.weight+Vn.weight):.5),Vn.y-=yr*gr,qn.x+=Er*(gr=1-gr),qn.y+=yr*gr);if((gr=N*Ft)&&(Er=Se[0]/2,yr=Se[1]/2,vn=-1,gr))for(;++vn<Jr;)(En=zt[vn]).x+=(Er-En.x)*gr,En.y+=(yr-En.y)*gr;if(pt)for(function Fi(or,zr,yi){var ci=0,Si=0;if(or.charge=0,!or.leaf)for(var ji,Ji=or.nodes,_i=Ji.length,qi=-1;++qi<_i;)null!=(ji=Ji[qi])&&(Fi(ji,zr,yi),or.charge+=ji.charge,ci+=ji.charge*ji.cx,Si+=ji.charge*ji.cy);if(or.point){or.leaf||(or.point.x+=Math.random()-.5,or.point.y+=Math.random()-.5);var Vi=zr*yi[or.point.index];or.charge+=or.pointCharge=Vi,ci+=Vi*or.point.x,Si+=Vi*or.point.y}or.cx=ci/or.charge,or.cy=Si/or.charge}(Zt=g.geom.quadtree(zt),N,ce),vn=-1;++vn<Jr;)(En=zt[vn]).fixed||Zt.visit(Gt(En));for(vn=-1;++vn<Jr;)(En=zt[vn]).fixed?(En.x=En.px,En.y=En.py):(En.x-=(En.px-(En.px=En.x))*Oe,En.y-=(En.py-(En.py=En.y))*Oe);we.tick({type:"tick",alpha:N})},ge.nodes=function(Zt){return arguments.length?(zt=Zt,ge):zt},ge.links=function(Zt){return arguments.length?(Lt=Zt,ge):Lt},ge.size=function(Zt){return arguments.length?(Se=Zt,ge):Se},ge.linkDistance=function(Zt){return arguments.length?($e="function"==typeof Zt?Zt:+Zt,ge):$e},ge.distance=ge.linkDistance,ge.linkStrength=function(Zt){return arguments.length?(it="function"==typeof Zt?Zt:+Zt,ge):it},ge.friction=function(Zt){return arguments.length?(Oe=+Zt,ge):Oe},ge.charge=function(Zt){return arguments.length?(pt="function"==typeof Zt?Zt:+Zt,ge):pt},ge.chargeDistance=function(Zt){return arguments.length?(Et=Zt*Zt,ge):Math.sqrt(Et)},ge.gravity=function(Zt){return arguments.length?(Ft=+Zt,ge):Ft},ge.theta=function(Zt){return arguments.length?(Dt=Zt*Zt,ge):Math.sqrt(Dt)},ge.alpha=function(Zt){return arguments.length?(Zt=+Zt,N?Zt>0?N=Zt:(pe.c=null,pe.t=NaN,pe=null,we.end({type:"end",alpha:N=0})):Zt>0&&(we.start({type:"start",alpha:N=Zt}),pe=sr(ge.tick)),ge):N},ge.start=function(){var Zt,vn,En,qn=zt.length,Vn=Lt.length,pr=Se[0],gr=Se[1];for(Zt=0;Zt<qn;++Zt)(En=zt[Zt]).index=Zt,En.weight=0;for(Zt=0;Zt<Vn;++Zt)"number"==typeof(En=Lt[Zt]).source&&(En.source=zt[En.source]),"number"==typeof En.target&&(En.target=zt[En.target]),++En.source.weight,++En.target.weight;for(Zt=0;Zt<qn;++Zt)En=zt[Zt],isNaN(En.x)&&(En.x=Er("x",pr)),isNaN(En.y)&&(En.y=Er("y",gr)),isNaN(En.px)&&(En.px=En.x),isNaN(En.py)&&(En.py=En.y);if(j=[],"function"==typeof $e)for(Zt=0;Zt<Vn;++Zt)j[Zt]=+$e.call(this,Lt[Zt],Zt);else for(Zt=0;Zt<Vn;++Zt)j[Zt]=$e;if(Z=[],"function"==typeof it)for(Zt=0;Zt<Vn;++Zt)Z[Zt]=+it.call(this,Lt[Zt],Zt);else for(Zt=0;Zt<Vn;++Zt)Z[Zt]=it;if(ce=[],"function"==typeof pt)for(Zt=0;Zt<qn;++Zt)ce[Zt]=+pt.call(this,zt[Zt],Zt);else for(Zt=0;Zt<qn;++Zt)ce[Zt]=pt;function Er(yr,Jr){if(!vn){for(vn=new Array(qn),zr=0;zr<qn;++zr)vn[zr]=[];for(zr=0;zr<Vn;++zr){var vi=Lt[zr];vn[vi.source.index].push(vi.target),vn[vi.target.index].push(vi.source)}}for(var Fi,or=vn[Zt],zr=-1,yi=or.length;++zr<yi;)if(!isNaN(Fi=or[zr][yr]))return Fi;return Math.random()*Jr}return ge.resume()},ge.resume=function(){return ge.alpha(.1)},ge.stop=function(){return ge.alpha(0)},ge.drag=function(){if(P||(P=g.behavior.drag().origin(D).on("dragstart.force",Qe).on("drag.force",Ut).on("dragend.force",ut)),!arguments.length)return P;this.on("mouseover.force",ht).on("mouseout.force",kt).call(P)},g.rebind(ge,we,"on")};var Mt=20,Nt=1,ln=1/0;function sn(pe,P){return g.rebind(pe,P,"sort","children","value"),pe.nodes=pe,pe.links=jn,pe}function rn(pe,P){for(var N=[pe];null!=(pe=N.pop());)if(P(pe),(Z=pe.children)&&(j=Z.length))for(var j,Z;--j>=0;)N.push(Z[j])}function mn(pe,P){for(var N=[pe],j=[];null!=(pe=N.pop());)if(j.push(pe),(ce=pe.children)&&(Z=ce.length))for(var Z,ce,ge=-1;++ge<Z;)N.push(ce[ge]);for(;null!=(pe=j.pop());)P(pe)}function kn(pe){return pe.children}function In(pe){return pe.value}function Rn(pe,P){return P.value-pe.value}function jn(pe){return g.merge(pe.map(function(P){return(P.children||[]).map(function(N){return{source:P,target:N}})}))}g.layout.hierarchy=function(){var pe=Rn,P=kn,N=In;function j(Z){var ce,ge=[Z],we=[];for(Z.depth=0;null!=(ce=ge.pop());)if(we.push(ce),(Oe=P.call(j,ce,ce.depth))&&(Se=Oe.length)){for(var Se,Oe,$e;--Se>=0;)ge.push($e=Oe[Se]),$e.parent=ce,$e.depth=ce.depth+1;N&&(ce.value=0),ce.children=Oe}else N&&(ce.value=+N.call(j,ce,ce.depth)||0),delete ce.children;return mn(Z,function(it){var pt,Et;pe&&(pt=it.children)&&pt.sort(pe),N&&(Et=it.parent)&&(Et.value+=it.value)}),we}return j.sort=function(Z){return arguments.length?(pe=Z,j):pe},j.children=function(Z){return arguments.length?(P=Z,j):P},j.value=function(Z){return arguments.length?(N=Z,j):N},j.revalue=function(Z){return N&&(rn(Z,function(ce){ce.children&&(ce.value=0)}),mn(Z,function(ce){var ge;ce.children||(ce.value=+N.call(j,ce,ce.depth)||0),(ge=ce.parent)&&(ge.value+=ce.value)})),Z},j},g.layout.partition=function(){var pe=g.layout.hierarchy(),P=[1,1];function N(j,Z){var ce=pe.call(this,j,Z);return function ge(we,Se,Oe,$e){var it=we.children;if(we.x=Se,we.y=we.depth*$e,we.dx=Oe,we.dy=$e,it&&(pt=it.length)){var pt,Et,Ft,Dt=-1;for(Oe=we.value?Oe/we.value:0;++Dt<pt;)ge(Et=it[Dt],Se,Ft=Et.value*Oe,$e),Se+=Ft}}(ce[0],0,P[0],P[1]/function ge(we){var Se=we.children,Oe=0;if(Se&&($e=Se.length))for(var $e,it=-1;++it<$e;)Oe=Math.max(Oe,ge(Se[it]));return 1+Oe}(ce[0])),ce}return N.size=function(j){return arguments.length?(P=j,N):P},sn(N,pe)},g.layout.pie=function(){var pe=Number,P=br,N=0,j=tn,Z=0;function ce(ge){var we,Se=ge.length,Oe=ge.map(function(Gt,Ut){return+pe.call(ce,Gt,Ut)}),$e=+("function"==typeof N?N.apply(this,arguments):N),it=("function"==typeof j?j.apply(this,arguments):j)-$e,pt=Math.min(Math.abs(it)/Se,+("function"==typeof Z?Z.apply(this,arguments):Z)),Et=pt*(it<0?-1:1),Ft=g.sum(Oe),Dt=Ft?(it-Se*Et)/Ft:0,zt=g.range(Se),Lt=[];return null!=P&&zt.sort(P===br?function(Gt,Ut){return Oe[Ut]-Oe[Gt]}:function(Gt,Ut){return P(ge[Gt],ge[Ut])}),zt.forEach(function(Gt){Lt[Gt]={data:ge[Gt],value:we=Oe[Gt],startAngle:$e,endAngle:$e+=we*Dt+Et,padAngle:pt}}),Lt}return ce.value=function(ge){return arguments.length?(pe=ge,ce):pe},ce.sort=function(ge){return arguments.length?(P=ge,ce):P},ce.startAngle=function(ge){return arguments.length?(N=ge,ce):N},ce.endAngle=function(ge){return arguments.length?(j=ge,ce):j},ce.padAngle=function(ge){return arguments.length?(Z=ge,ce):Z},ce};var br={};function Cr(pe){return pe.x}function Hr(pe){return pe.y}function Kr(pe,P,N){pe.y0=P,pe.y=N}g.layout.stack=function(){var pe=D,P=Oi,N=zi,j=Kr,Z=Cr,ce=Hr;function ge(we,Se){if(!(pt=we.length))return we;var Oe=we.map(function(Gt,Ut){return pe.call(ge,Gt,Ut)}),$e=Oe.map(function(Gt){return Gt.map(function(Ut,Zt){return[Z.call(ge,Ut,Zt),ce.call(ge,Ut,Zt)]})}),it=P.call(ge,$e,Se);Oe=g.permute(Oe,it),$e=g.permute($e,it);var pt,Et,Ft,Dt,zt=N.call(ge,$e,Se),Lt=Oe[0].length;for(Ft=0;Ft<Lt;++Ft)for(j.call(ge,Oe[0][Ft],Dt=zt[Ft],$e[0][Ft][1]),Et=1;Et<pt;++Et)j.call(ge,Oe[Et][Ft],Dt+=$e[Et-1][Ft][1],$e[Et][Ft][1]);return we}return ge.values=function(we){return arguments.length?(pe=we,ge):pe},ge.order=function(we){return arguments.length?(P="function"==typeof we?we:oi.get(we)||Oi,ge):P},ge.offset=function(we){return arguments.length?(N="function"==typeof we?we:Xr.get(we)||zi,ge):N},ge.x=function(we){return arguments.length?(Z=we,ge):Z},ge.y=function(we){return arguments.length?(ce=we,ge):ce},ge.out=function(we){return arguments.length?(j=we,ge):j},ge};var oi=g.map({"inside-out":function(pe){var P,N,j=pe.length,Z=pe.map(Ea),ce=pe.map(Ki),ge=g.range(j).sort(function(it,pt){return Z[it]-Z[pt]}),we=0,Se=0,Oe=[],$e=[];for(P=0;P<j;++P)N=ge[P],we<Se?(we+=ce[N],Oe.push(N)):(Se+=ce[N],$e.push(N));return $e.reverse().concat(Oe)},reverse:function(pe){return g.range(pe.length).reverse()},default:Oi}),Xr=g.map({silhouette:function(pe){var P,N,j,Z=pe.length,ce=pe[0].length,ge=[],we=0,Se=[];for(N=0;N<ce;++N){for(P=0,j=0;P<Z;P++)j+=pe[P][N][1];j>we&&(we=j),ge.push(j)}for(N=0;N<ce;++N)Se[N]=(we-ge[N])/2;return Se},wiggle:function(pe){var P,N,j,Z,ce,ge,we,Se,Oe,$e=pe.length,it=pe[0],pt=it.length,Et=[];for(Et[0]=Se=Oe=0,N=1;N<pt;++N){for(P=0,Z=0;P<$e;++P)Z+=pe[P][N][1];for(P=0,ce=0,we=it[N][0]-it[N-1][0];P<$e;++P){for(j=0,ge=(pe[P][N][1]-pe[P][N-1][1])/(2*we);j<P;++j)ge+=(pe[j][N][1]-pe[j][N-1][1])/we;ce+=ge*pe[P][N][1]}Et[N]=Se-=Z?ce/Z*we:0,Se<Oe&&(Oe=Se)}for(N=0;N<pt;++N)Et[N]-=Oe;return Et},expand:function(pe){var P,N,j,Z=pe.length,ce=pe[0].length,ge=1/Z,we=[];for(N=0;N<ce;++N){for(P=0,j=0;P<Z;P++)j+=pe[P][N][1];if(j)for(P=0;P<Z;P++)pe[P][N][1]/=j;else for(P=0;P<Z;P++)pe[P][N][1]=ge}for(N=0;N<ce;++N)we[N]=0;return we},zero:zi});function Oi(pe){return g.range(pe.length)}function zi(pe){for(var P=-1,N=pe[0].length,j=[];++P<N;)j[P]=0;return j}function Ea(pe){for(var P,N=1,j=0,Z=pe[0][1],ce=pe.length;N<ce;++N)(P=pe[N][1])>Z&&(j=N,Z=P);return j}function Ki(pe){return pe.reduce(ra,0)}function ra(pe,P){return pe+P[1]}function go(pe,P){return io(pe,Math.ceil(Math.log(P.length)/Math.LN2+1))}function io(pe,P){for(var N=-1,j=+pe[0],Z=(pe[1]-j)/P,ce=[];++N<=P;)ce[N]=Z*N+j;return ce}function Ha(pe){return[g.min(pe),g.max(pe)]}function xa(pe,P){return pe.value-P.value}function xo(pe,P){var N=pe._pack_next;pe._pack_next=P,P._pack_prev=pe,P._pack_next=N,N._pack_prev=P}function Yo(pe,P){pe._pack_next=P,P._pack_prev=pe}function ts(pe,P){var N=P.x-pe.x,j=P.y-pe.y,Z=pe.r+P.r;return.999*Z*Z>N*N+j*j}function ns(pe){if((P=pe.children)&&(Se=P.length)){var P,N,j,Z,ce,ge,we,Se,Oe=1/0,$e=-1/0,it=1/0,pt=-1/0;if(P.forEach(hs),(N=P[0]).x=-N.r,N.y=0,Ut(N),Se>1&&((j=P[1]).x=j.r,j.y=0,Ut(j),Se>2))for(ba(N,j,Z=P[2]),Ut(Z),xo(N,Z),N._pack_prev=Z,xo(Z,j),j=N._pack_next,ce=3;ce<Se;ce++){ba(N,j,Z=P[ce]);var Et=0,Ft=1,Dt=1;for(ge=j._pack_next;ge!==j;ge=ge._pack_next,Ft++)if(ts(ge,Z)){Et=1;break}if(1==Et)for(we=N._pack_prev;we!==ge._pack_prev&&!ts(we,Z);we=we._pack_prev,Dt++);Et?(Ft<Dt||Ft==Dt&&j.r<N.r?Yo(N,j=ge):Yo(N=we,j),ce--):(xo(N,Z),j=Z,Ut(Z))}var zt=(Oe+$e)/2,Lt=(it+pt)/2,Gt=0;for(ce=0;ce<Se;ce++)(Z=P[ce]).x-=zt,Z.y-=Lt,Gt=Math.max(Gt,Z.r+Math.sqrt(Z.x*Z.x+Z.y*Z.y));pe.r=Gt,P.forEach(ds)}function Ut(Zt){Oe=Math.min(Zt.x-Zt.r,Oe),$e=Math.max(Zt.x+Zt.r,$e),it=Math.min(Zt.y-Zt.r,it),pt=Math.max(Zt.y+Zt.r,pt)}}function hs(pe){pe._pack_next=pe._pack_prev=pe}function ds(pe){delete pe._pack_next,delete pe._pack_prev}function ba(pe,P,N){var j=pe.r+N.r,Z=P.x-pe.x,ce=P.y-pe.y;if(j&&(Z||ce)){var ge=P.r+N.r,we=Z*Z+ce*ce,Se=.5+((j*=j)-(ge*=ge))/(2*we),Oe=Math.sqrt(Math.max(0,2*ge*(j+we)-(j-=we)*j-ge*ge))/(2*we);N.x=pe.x+Se*Z+Oe*ce,N.y=pe.y+Se*ce-Oe*Z}else N.x=pe.x+j,N.y=pe.y}function _t(pe,P){return pe.parent==P.parent?1:2}function Ht(pe){var P=pe.children;return P.length?P[0]:pe.t}function _n(pe){var P,N=pe.children;return(P=N.length)?N[P-1]:pe.t}function Jt(pe,P,N){var j=N/(P.i-pe.i);P.c-=j,P.s+=N,pe.c+=j,P.z+=N,P.m+=N}function wn(pe,P,N){return pe.a.parent===P.parent?pe.a:N}function Xn(pe){return{x:pe.x,y:pe.y,dx:pe.dx,dy:pe.dy}}function er(pe,P){var N=pe.x+P[3],j=pe.y+P[0],Z=pe.dx-P[1]-P[3],ce=pe.dy-P[0]-P[2];return Z<0&&(N+=Z/2,Z=0),ce<0&&(j+=ce/2,ce=0),{x:N,y:j,dx:Z,dy:ce}}function fr(pe){var P=pe[0],N=pe[pe.length-1];return P<N?[P,N]:[N,P]}function Mr(pe){return pe.rangeExtent?pe.rangeExtent():fr(pe.range())}function _r(pe,P,N,j){var Z=N(pe[0],pe[1]),ce=j(P[0],P[1]);return function(ge){return ce(Z(ge))}}function Dr(pe,P){var N,j=0,Z=pe.length-1,ce=pe[j],ge=pe[Z];return ge<ce&&(N=j,j=Z,Z=N,N=ce,ce=ge,ge=N),pe[j]=P.floor(ce),pe[Z]=P.ceil(ge),pe}function Fr(pe){return pe?{floor:function(P){return Math.floor(P/pe)*pe},ceil:function(P){return Math.ceil(P/pe)*pe}}:wr}g.layout.histogram=function(){var pe=!0,P=Number,N=Ha,j=go;function Z(ce,ge){for(var we,Se,Oe=[],$e=ce.map(P,this),it=N.call(this,$e,ge),pt=j.call(this,it,$e,ge),Et=(ge=-1,$e.length),Ft=pt.length-1,Dt=pe?1:1/Et;++ge<Ft;)(we=Oe[ge]=[]).dx=pt[ge+1]-(we.x=pt[ge]),we.y=0;if(Ft>0)for(ge=-1;++ge<Et;)(Se=$e[ge])>=it[0]&&Se<=it[1]&&((we=Oe[g.bisect(pt,Se,1,Ft)-1]).y+=Dt,we.push(ce[ge]));return Oe}return Z.value=function(ce){return arguments.length?(P=ce,Z):P},Z.range=function(ce){return arguments.length?(N=Sn(ce),Z):N},Z.bins=function(ce){return arguments.length?(j="number"==typeof ce?function(ge){return io(ge,ce)}:Sn(ce),Z):j},Z.frequency=function(ce){return arguments.length?(pe=!!ce,Z):pe},Z},g.layout.pack=function(){var pe,P=g.layout.hierarchy().sort(xa),N=0,j=[1,1];function Z(ce,ge){var we=P.call(this,ce,ge),Se=we[0],Oe=j[0],$e=j[1],it=null==pe?Math.sqrt:"function"==typeof pe?pe:function(){return pe};if(Se.x=Se.y=0,mn(Se,function(Et){Et.r=+it(Et.value)}),mn(Se,ns),N){var pt=N*(pe?1:Math.max(2*Se.r/Oe,2*Se.r/$e))/2;mn(Se,function(Et){Et.r+=pt}),mn(Se,ns),mn(Se,function(Et){Et.r-=pt})}return function Et(Ft,Dt,zt,Lt){var Gt=Ft.children;if(Ft.x=Dt+=Lt*Ft.x,Ft.y=zt+=Lt*Ft.y,Ft.r*=Lt,Gt)for(var Ut=-1,Zt=Gt.length;++Ut<Zt;)Et(Gt[Ut],Dt,zt,Lt)}(Se,Oe/2,$e/2,pe?1:1/Math.max(2*Se.r/Oe,2*Se.r/$e)),we}return Z.size=function(ce){return arguments.length?(j=ce,Z):j},Z.radius=function(ce){return arguments.length?(pe=null==ce||"function"==typeof ce?ce:+ce,Z):pe},Z.padding=function(ce){return arguments.length?(N=+ce,Z):N},sn(Z,P)},g.layout.tree=function(){var pe=g.layout.hierarchy().sort(null).value(null),P=_t,N=[1,1],j=null;function Z(Se,Oe){var $e=pe.call(this,Se,Oe),it=$e[0],pt=function(Ut){for(var Zt,vn={A:null,children:[Ut]},En=[vn];null!=(Zt=En.pop());)for(var qn,Vn=Zt.children,pr=0,gr=Vn.length;pr<gr;++pr)En.push((Vn[pr]=qn={_:Vn[pr],parent:Zt,children:(qn=Vn[pr].children)&&qn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:pr}).a=qn);return vn.children[0]}(it);if(mn(pt,ce),pt.parent.m=-pt.z,rn(pt,ge),j)rn(it,we);else{var Et=it,Ft=it,Dt=it;rn(it,function(Ut){Ut.x<Et.x&&(Et=Ut),Ut.x>Ft.x&&(Ft=Ut),Ut.depth>Dt.depth&&(Dt=Ut)});var zt=P(Et,Ft)/2-Et.x,Lt=N[0]/(Ft.x+P(Ft,Et)/2+zt),Gt=N[1]/(Dt.depth||1);rn(it,function(Ut){Ut.x=(Ut.x+zt)*Lt,Ut.y=Ut.depth*Gt})}return $e}function ce(Se){var Oe=Se.children,$e=Se.parent.children,it=Se.i?$e[Se.i-1]:null;if(Oe.length){!function(Et){for(var Ft,Dt=0,zt=0,Lt=Et.children,Gt=Lt.length;--Gt>=0;)(Ft=Lt[Gt]).z+=Dt,Ft.m+=Dt,Dt+=Ft.s+(zt+=Ft.c)}(Se);var pt=(Oe[0].z+Oe[Oe.length-1].z)/2;it?(Se.z=it.z+P(Se._,it._),Se.m=Se.z-pt):Se.z=pt}else it&&(Se.z=it.z+P(Se._,it._));Se.parent.A=function(Et,Ft,Dt){if(Ft){for(var zt,Lt=Et,Gt=Et,Ut=Ft,Zt=Lt.parent.children[0],vn=Lt.m,En=Gt.m,qn=Ut.m,Vn=Zt.m;Ut=_n(Ut),Lt=Ht(Lt),Ut&&Lt;)Zt=Ht(Zt),(Gt=_n(Gt)).a=Et,(zt=Ut.z+qn-Lt.z-vn+P(Ut._,Lt._))>0&&(Jt(wn(Ut,Et,Dt),Et,zt),vn+=zt,En+=zt),qn+=Ut.m,vn+=Lt.m,Vn+=Zt.m,En+=Gt.m;Ut&&!_n(Gt)&&(Gt.t=Ut,Gt.m+=qn-En),Lt&&!Ht(Zt)&&(Zt.t=Lt,Zt.m+=vn-Vn,Dt=Et)}return Dt}(Se,it,Se.parent.A||$e[0])}function ge(Se){Se._.x=Se.z+Se.parent.m,Se.m+=Se.parent.m}function we(Se){Se.x*=N[0],Se.y=Se.depth*N[1]}return Z.separation=function(Se){return arguments.length?(P=Se,Z):P},Z.size=function(Se){return arguments.length?(j=null==(N=Se)?we:null,Z):j?null:N},Z.nodeSize=function(Se){return arguments.length?(j=null==(N=Se)?null:we,Z):j?N:null},sn(Z,pe)},g.layout.cluster=function(){var pe=g.layout.hierarchy().sort(null).value(null),P=_t,N=[1,1],j=!1;function Z(ce,ge){var we,Se=pe.call(this,ce,ge),Oe=Se[0],$e=0;mn(Oe,function(Dt){var Lt,zt=Dt.children;zt&&zt.length?(Dt.x=(Lt=zt).reduce(function(Gt,Ut){return Gt+Ut.x},0)/Lt.length,Dt.y=function(Lt){return 1+g.max(Lt,function(Gt){return Gt.y})}(zt)):(Dt.x=we?$e+=P(Dt,we):0,Dt.y=0,we=Dt)});var it=function Dt(zt){var Lt=zt.children;return Lt&&Lt.length?Dt(Lt[0]):zt}(Oe),pt=function Dt(zt){var Lt,Gt=zt.children;return Gt&&(Lt=Gt.length)?Dt(Gt[Lt-1]):zt}(Oe),Et=it.x-P(it,pt)/2,Ft=pt.x+P(pt,it)/2;return mn(Oe,j?function(Dt){Dt.x=(Dt.x-Oe.x)*N[0],Dt.y=(Oe.y-Dt.y)*N[1]}:function(Dt){Dt.x=(Dt.x-Et)/(Ft-Et)*N[0],Dt.y=(1-(Oe.y?Dt.y/Oe.y:1))*N[1]}),Se}return Z.separation=function(ce){return arguments.length?(P=ce,Z):P},Z.size=function(ce){return arguments.length?(j=null==(N=ce),Z):j?null:N},Z.nodeSize=function(ce){return arguments.length?(j=null!=(N=ce),Z):j?N:null},sn(Z,pe)},g.layout.treemap=function(){var pe,P=g.layout.hierarchy(),N=Math.round,j=[1,1],Z=null,ce=Xn,ge=!1,we="squarify",Se=.5*(1+Math.sqrt(5));function Oe(Dt,zt){for(var Lt,Gt,Ut=-1,Zt=Dt.length;++Ut<Zt;)Gt=(Lt=Dt[Ut]).value*(zt<0?0:zt),Lt.area=isNaN(Gt)||Gt<=0?0:Gt}function $e(Dt){var zt=Dt.children;if(zt&&zt.length){var Lt,Gt,Ut,Zt=ce(Dt),vn=[],En=zt.slice(),qn=1/0,Vn="slice"===we?Zt.dx:"dice"===we?Zt.dy:"slice-dice"===we?1&Dt.depth?Zt.dy:Zt.dx:Math.min(Zt.dx,Zt.dy);for(Oe(En,Zt.dx*Zt.dy/Dt.value),vn.area=0;(Ut=En.length)>0;)vn.push(Lt=En[Ut-1]),vn.area+=Lt.area,"squarify"!==we||(Gt=pt(vn,Vn))<=qn?(En.pop(),qn=Gt):(vn.area-=vn.pop().area,Et(vn,Vn,Zt,!1),Vn=Math.min(Zt.dx,Zt.dy),vn.length=vn.area=0,qn=1/0);vn.length&&(Et(vn,Vn,Zt,!0),vn.length=vn.area=0),zt.forEach($e)}}function it(Dt){var zt=Dt.children;if(zt&&zt.length){var Lt,Gt=ce(Dt),Ut=zt.slice(),Zt=[];for(Oe(Ut,Gt.dx*Gt.dy/Dt.value),Zt.area=0;Lt=Ut.pop();)Zt.push(Lt),Zt.area+=Lt.area,null!=Lt.z&&(Et(Zt,Lt.z?Gt.dx:Gt.dy,Gt,!Ut.length),Zt.length=Zt.area=0);zt.forEach(it)}}function pt(Dt,zt){for(var Lt,Gt=Dt.area,Ut=0,Zt=1/0,vn=-1,En=Dt.length;++vn<En;)(Lt=Dt[vn].area)&&(Lt<Zt&&(Zt=Lt),Lt>Ut&&(Ut=Lt));return zt*=zt,(Gt*=Gt)?Math.max(zt*Ut*Se/Gt,Gt/(zt*Zt*Se)):1/0}function Et(Dt,zt,Lt,Gt){var Ut,Zt=-1,vn=Dt.length,En=Lt.x,qn=Lt.y,Vn=zt?N(Dt.area/zt):0;if(zt==Lt.dx){for((Gt||Vn>Lt.dy)&&(Vn=Lt.dy);++Zt<vn;)(Ut=Dt[Zt]).x=En,Ut.y=qn,Ut.dy=Vn,En+=Ut.dx=Math.min(Lt.x+Lt.dx-En,Vn?N(Ut.area/Vn):0);Ut.z=!0,Ut.dx+=Lt.x+Lt.dx-En,Lt.y+=Vn,Lt.dy-=Vn}else{for((Gt||Vn>Lt.dx)&&(Vn=Lt.dx);++Zt<vn;)(Ut=Dt[Zt]).x=En,Ut.y=qn,Ut.dx=Vn,qn+=Ut.dy=Math.min(Lt.y+Lt.dy-qn,Vn?N(Ut.area/Vn):0);Ut.z=!1,Ut.dy+=Lt.y+Lt.dy-qn,Lt.x+=Vn,Lt.dx-=Vn}}function Ft(Dt){var zt=pe||P(Dt),Lt=zt[0];return Lt.x=Lt.y=0,Lt.value?(Lt.dx=j[0],Lt.dy=j[1]):Lt.dx=Lt.dy=0,pe&&P.revalue(Lt),Oe([Lt],Lt.dx*Lt.dy/Lt.value),(pe?it:$e)(Lt),ge&&(pe=zt),zt}return Ft.size=function(Dt){return arguments.length?(j=Dt,Ft):j},Ft.padding=function(Dt){if(!arguments.length)return Z;function zt(Ut){var Zt=Dt.call(Ft,Ut,Ut.depth);return null==Zt?Xn(Ut):er(Ut,"number"==typeof Zt?[Zt,Zt,Zt,Zt]:Zt)}function Lt(Ut){return er(Ut,Dt)}var Gt;return ce=null==(Z=Dt)?Xn:"function"==(Gt=typeof Dt)?zt:("number"===Gt&&(Dt=[Dt,Dt,Dt,Dt]),Lt),Ft},Ft.round=function(Dt){return arguments.length?(N=Dt?Math.round:Number,Ft):N!=Number},Ft.sticky=function(Dt){return arguments.length?(ge=Dt,pe=null,Ft):ge},Ft.ratio=function(Dt){return arguments.length?(Se=Dt,Ft):Se},Ft.mode=function(Dt){return arguments.length?(we=Dt+"",Ft):we},sn(Ft,P)},g.random={normal:function(pe,P){var N=arguments.length;return N<2&&(P=1),N<1&&(pe=0),function(){var j,Z,ce;do{ce=(j=2*Math.random()-1)*j+(Z=2*Math.random()-1)*Z}while(!ce||ce>1);return pe+P*j*Math.sqrt(-2*Math.log(ce)/ce)}},logNormal:function(){var pe=g.random.normal.apply(g,arguments);return function(){return Math.exp(pe())}},bates:function(pe){var P=g.random.irwinHall(pe);return function(){return P()/pe}},irwinHall:function(pe){return function(){for(var P=0,N=0;N<pe;N++)P+=Math.random();return P}}},g.scale={};var wr={floor:D,ceil:D};function Nr(pe,P,N,j){var Z=[],ce=[],ge=0,we=Math.min(pe.length,P.length)-1;for(pe[we]<pe[0]&&(pe=pe.slice().reverse(),P=P.slice().reverse());++ge<=we;)Z.push(N(pe[ge-1],pe[ge])),ce.push(j(P[ge-1],P[ge]));return function(Se){var Oe=g.bisect(pe,Se,1,we)-1;return ce[Oe](Z[Oe](Se))}}function ni(pe,P){return g.rebind(pe,P,"range","rangeRound","interpolate","clamp")}function li(pe,P){return Dr(pe,Fr(bi(pe,P)[2])),Dr(pe,Fr(bi(pe,P)[2])),pe}function bi(pe,P){null==P&&(P=10);var N=fr(pe),j=N[1]-N[0],Z=Math.pow(10,Math.floor(Math.log(j/P)/Math.LN10)),ce=P/j*Z;return ce<=.15?Z*=10:ce<=.35?Z*=5:ce<=.75&&(Z*=2),N[0]=Math.ceil(N[0]/Z)*Z,N[1]=Math.floor(N[1]/Z)*Z+.5*Z,N[2]=Z,N}function dr(pe,P){return g.range.apply(g,bi(pe,P))}g.scale.linear=function(){return function pe(P,N,j,Z){var ce,ge;function we(){var Oe=Math.min(P.length,N.length)>2?Nr:_r,$e=Z?Qa:Rs;return ce=Oe(P,N,$e,j),ge=Oe(N,P,$e,Lo),Se}function Se(Oe){return ce(Oe)}return Se.invert=function(Oe){return ge(Oe)},Se.domain=function(Oe){return arguments.length?(P=Oe.map(Number),we()):P},Se.range=function(Oe){return arguments.length?(N=Oe,we()):N},Se.rangeRound=function(Oe){return Se.range(Oe).interpolate(po)},Se.clamp=function(Oe){return arguments.length?(Z=Oe,we()):Z},Se.interpolate=function(Oe){return arguments.length?(j=Oe,we()):j},Se.ticks=function(Oe){return dr(P,Oe)},Se.tickFormat=function(Oe,$e){return d3_scale_linearTickFormat(P,Oe,$e)},Se.nice=function(Oe){return li(P,Oe),we()},Se.copy=function(){return pe(P,N,j,Z)},we()}([0,1],[0,1],Lo,!1)},g.scale.log=function(){return function pe(P,N,j,Z){function ce(Se){return(j?Math.log(Se<0?0:Se):-Math.log(Se>0?0:-Se))/Math.log(N)}function ge(Se){return j?Math.pow(N,Se):-Math.pow(N,-Se)}function we(Se){return P(ce(Se))}return we.invert=function(Se){return ge(P.invert(Se))},we.domain=function(Se){return arguments.length?(j=Se[0]>=0,P.domain((Z=Se.map(Number)).map(ce)),we):Z},we.base=function(Se){return arguments.length?(N=+Se,P.domain(Z.map(ce)),we):N},we.nice=function(){var Se=Dr(Z.map(ce),j?Math:wi);return P.domain(Se),Z=Se.map(ge),we},we.ticks=function(){var Se=fr(Z),Oe=[],$e=Se[0],it=Se[1],pt=Math.floor(ce($e)),Et=Math.ceil(ce(it)),Ft=N%1?2:N;if(isFinite(Et-pt)){if(j){for(;pt<Et;pt++)for(var Dt=1;Dt<Ft;Dt++)Oe.push(ge(pt)*Dt);Oe.push(ge(pt))}else for(Oe.push(ge(pt));pt++<Et;)for(Dt=Ft-1;Dt>0;Dt--)Oe.push(ge(pt)*Dt);for(pt=0;Oe[pt]<$e;pt++);for(Et=Oe.length;Oe[Et-1]>it;Et--);Oe=Oe.slice(pt,Et)}return Oe},we.copy=function(){return pe(P.copy(),N,j,Z)},ni(we,P)}(g.scale.linear().domain([0,1]),10,!0,[1,10])};var wi={floor:function(pe){return-Math.ceil(-pe)},ceil:function(pe){return-Math.floor(-pe)}};function Gr(pe){return function(P){return P<0?-Math.pow(-P,pe):Math.pow(P,pe)}}g.scale.pow=function(){return function pe(P,N,j){var Z=Gr(N),ce=Gr(1/N);function ge(we){return P(Z(we))}return ge.invert=function(we){return ce(P.invert(we))},ge.domain=function(we){return arguments.length?(P.domain((j=we.map(Number)).map(Z)),ge):j},ge.ticks=function(we){return dr(j,we)},ge.tickFormat=function(we,Se){return d3_scale_linearTickFormat(j,we,Se)},ge.nice=function(we){return ge.domain(li(j,we))},ge.exponent=function(we){return arguments.length?(Z=Gr(N=we),ce=Gr(1/N),P.domain(j.map(Z)),ge):N},ge.copy=function(){return pe(P.copy(),N,j)},ni(ge,P)}(g.scale.linear(),1,[0,1])},g.scale.sqrt=function(){return g.scale.pow().exponent(.5)},g.scale.ordinal=function(){return function pe(P,N){var j,Z,ce;function ge(Se){return Z[((j.get(Se)||("range"===N.t?j.set(Se,P.push(Se)):NaN))-1)%Z.length]}function we(Se,Oe){return g.range(P.length).map(function($e){return Se+Oe*$e})}return ge.domain=function(Se){if(!arguments.length)return P;P=[],j=new T;for(var Oe,$e=-1,it=Se.length;++$e<it;)j.has(Oe=Se[$e])||j.set(Oe,P.push(Oe));return ge[N.t].apply(ge,N.a)},ge.range=function(Se){return arguments.length?(Z=Se,ce=0,N={t:"range",a:arguments},ge):Z},ge.rangePoints=function(Se,Oe){arguments.length<2&&(Oe=0);var $e=Se[0],it=Se[1],pt=P.length<2?($e=($e+it)/2,0):(it-$e)/(P.length-1+Oe);return Z=we($e+pt*Oe/2,pt),ce=0,N={t:"rangePoints",a:arguments},ge},ge.rangeRoundPoints=function(Se,Oe){arguments.length<2&&(Oe=0);var $e=Se[0],it=Se[1],pt=P.length<2?($e=it=Math.round(($e+it)/2),0):(it-$e)/(P.length-1+Oe)|0;return Z=we($e+Math.round(pt*Oe/2+(it-$e-(P.length-1+Oe)*pt)/2),pt),ce=0,N={t:"rangeRoundPoints",a:arguments},ge},ge.rangeBands=function(Se,Oe,$e){arguments.length<2&&(Oe=0),arguments.length<3&&($e=Oe);var it=Se[1]<Se[0],pt=Se[it-0],Ft=(Se[1-it]-pt)/(P.length-Oe+2*$e);return Z=we(pt+Ft*$e,Ft),it&&Z.reverse(),ce=Ft*(1-Oe),N={t:"rangeBands",a:arguments},ge},ge.rangeRoundBands=function(Se,Oe,$e){arguments.length<2&&(Oe=0),arguments.length<3&&($e=Oe);var it=Se[1]<Se[0],pt=Se[it-0],Et=Se[1-it],Ft=Math.floor((Et-pt)/(P.length-Oe+2*$e));return Z=we(pt+Math.round((Et-pt-(P.length-Oe)*Ft)/2),Ft),it&&Z.reverse(),ce=Math.round(Ft*(1-Oe)),N={t:"rangeRoundBands",a:arguments},ge},ge.rangeBand=function(){return ce},ge.rangeExtent=function(){return fr(N.a[0])},ge.copy=function(){return pe(P,N)},ge.domain(P)}([],{t:"range",a:[[]]})},g.scale.category10=function(){return g.scale.ordinal().range(ii)},g.scale.category20=function(){return g.scale.ordinal().range(ki)},g.scale.category20b=function(){return g.scale.ordinal().range(Zi)},g.scale.category20c=function(){return g.scale.ordinal().range(aa)};var ii=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nn),ki=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nn),Zi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nn),aa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nn);function Vr(){return 0}g.scale.quantile=function(){return function pe(P,N){var j;function Z(){var ge=0,we=N.length;for(j=[];++ge<we;)j[ge-1]=g.quantile(P,ge/we);return ce}function ce(ge){if(!isNaN(ge=+ge))return N[g.bisect(j,ge)]}return ce.domain=function(ge){return arguments.length?(P=ge.map(f).filter(c).sort(i),Z()):P},ce.range=function(ge){return arguments.length?(N=ge,Z()):N},ce.quantiles=function(){return j},ce.invertExtent=function(ge){return(ge=N.indexOf(ge))<0?[NaN,NaN]:[ge>0?j[ge-1]:P[0],ge<j.length?j[ge]:P[P.length-1]]},ce.copy=function(){return pe(P,N)},Z()}([],[])},g.scale.quantize=function(){return function pe(P,N,j){var Z,ce;function ge(Se){return j[Math.max(0,Math.min(ce,Math.floor(Z*(Se-P))))]}function we(){return Z=j.length/(N-P),ce=j.length-1,ge}return ge.domain=function(Se){return arguments.length?(P=+Se[0],N=+Se[Se.length-1],we()):[P,N]},ge.range=function(Se){return arguments.length?(j=Se,we()):j},ge.invertExtent=function(Se){return[Se=(Se=j.indexOf(Se))<0?NaN:Se/Z+P,Se+1/Z]},ge.copy=function(){return pe(P,N,j)},we()}(0,1,[0,1])},g.scale.threshold=function(){return function pe(P,N){function j(Z){if(Z<=Z)return N[g.bisect(P,Z)]}return j.domain=function(Z){return arguments.length?(P=Z,j):P},j.range=function(Z){return arguments.length?(N=Z,j):N},j.invertExtent=function(Z){return Z=N.indexOf(Z),[P[Z-1],P[Z]]},j.copy=function(){return pe(P,N)},j}([.5],[0,1])},g.scale.identity=function(){return function pe(P){function N(j){return+j}return N.invert=N,N.domain=N.range=function(j){return arguments.length?(P=j.map(N),N):P},N.ticks=function(j){return dr(P,j)},N.tickFormat=function(j,Z){return d3_scale_linearTickFormat(P,j,Z)},N.copy=function(){return pe(P)},N}([0,1])},g.svg={},g.svg.arc=function(){var pe=ia,P=Ei,N=Vr,j=ca,Z=fa,ce=ea,ge=za;function we(){var Oe=Math.max(0,+pe.apply(this,arguments)),$e=Math.max(0,+P.apply(this,arguments)),it=Z.apply(this,arguments)-cn,pt=ce.apply(this,arguments)-cn,Et=Math.abs(pt-it),Ft=it>pt?0:1;if($e<Oe&&(Dt=$e,$e=Oe,Oe=Dt),Et>=hn)return Se($e,Ft)+(Oe?Se(Oe,1-Ft):"")+"Z";var Dt,zt,Lt,Gt,Ut,Zt,vn,En,qn,Vn,pr,gr,Er=0,yr=0,Jr=[];if((Gt=(+ge.apply(this,arguments)||0)/2)&&(Lt=j===ca?Math.sqrt(Oe*Oe+$e*$e):+j.apply(this,arguments),Ft||(yr*=-1),$e&&(yr=Xe(Lt/$e*Math.sin(Gt))),Oe&&(Er=Xe(Lt/Oe*Math.sin(Gt)))),$e){Ut=$e*Math.cos(it+yr),Zt=$e*Math.sin(it+yr),vn=$e*Math.cos(pt-yr),En=$e*Math.sin(pt-yr);var vi=Math.abs(pt-it-2*yr)<=Xt?0:1;if(yr&&Ai(Ut,Zt,vn,En)===Ft^vi){var Fi=(it+pt)/2;Ut=$e*Math.cos(Fi),Zt=$e*Math.sin(Fi),vn=En=null}}else Ut=Zt=0;if(Oe){qn=Oe*Math.cos(pt-Er),Vn=Oe*Math.sin(pt-Er),pr=Oe*Math.cos(it+Er),gr=Oe*Math.sin(it+Er);var or=Math.abs(it-pt+2*Er)<=Xt?0:1;if(Er&&Ai(qn,Vn,pr,gr)===1-Ft^or){var zr=(it+pt)/2;qn=Oe*Math.cos(zr),Vn=Oe*Math.sin(zr),pr=gr=null}}else qn=Vn=0;if(Et>St&&(Dt=Math.min(Math.abs($e-Oe)/2,+N.apply(this,arguments)))>.001){zt=Oe<$e^Ft?0:1;var yi=Dt,ci=Dt;if(Et<Xt){var Si=null==pr?[qn,Vn]:null==vn?[Ut,Zt]:Tr([Ut,Zt],[pr,gr],[vn,En],[qn,Vn]),ji=Ut-Si[0],Ji=Zt-Si[1],_i=vn-Si[0],qi=En-Si[1],Vi=1/Math.sin(Math.acos((ji*_i+Ji*qi)/(Math.sqrt(ji*ji+Ji*Ji)*Math.sqrt(_i*_i+qi*qi)))/2),oa=Math.sqrt(Si[0]*Si[0]+Si[1]*Si[1]);ci=Math.min(Dt,(Oe-oa)/(Vi-1)),yi=Math.min(Dt,($e-oa)/(Vi+1))}if(null!=vn){var Gi=qa(null==pr?[qn,Vn]:[pr,gr],[Ut,Zt],$e,yi,Ft),ta=qa([vn,En],[qn,Vn],$e,yi,Ft);Dt===yi?Jr.push("M",Gi[0],"A",yi,",",yi," 0 0,",zt," ",Gi[1],"A",$e,",",$e," 0 ",1-Ft^Ai(Gi[1][0],Gi[1][1],ta[1][0],ta[1][1]),",",Ft," ",ta[1],"A",yi,",",yi," 0 0,",zt," ",ta[0]):Jr.push("M",Gi[0],"A",yi,",",yi," 0 1,",zt," ",ta[0])}else Jr.push("M",Ut,",",Zt);if(null!=pr){var Da=qa([Ut,Zt],[pr,gr],Oe,-ci,Ft),$a=qa([qn,Vn],null==vn?[Ut,Zt]:[vn,En],Oe,-ci,Ft);Dt===ci?Jr.push("L",$a[0],"A",ci,",",ci," 0 0,",zt," ",$a[1],"A",Oe,",",Oe," 0 ",Ft^Ai($a[1][0],$a[1][1],Da[1][0],Da[1][1]),",",1-Ft," ",Da[1],"A",ci,",",ci," 0 0,",zt," ",Da[0]):Jr.push("L",$a[0],"A",ci,",",ci," 0 0,",zt," ",Da[0])}else Jr.push("L",qn,",",Vn)}else Jr.push("M",Ut,",",Zt),null!=vn&&Jr.push("A",$e,",",$e," 0 ",vi,",",Ft," ",vn,",",En),Jr.push("L",qn,",",Vn),null!=pr&&Jr.push("A",Oe,",",Oe," 0 ",or,",",1-Ft," ",pr,",",gr);return Jr.push("Z"),Jr.join("")}function Se(Oe,$e){return"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,"+$e+" 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,"+$e+" 0,"+Oe}return we.innerRadius=function(Oe){return arguments.length?(pe=Sn(Oe),we):pe},we.outerRadius=function(Oe){return arguments.length?(P=Sn(Oe),we):P},we.cornerRadius=function(Oe){return arguments.length?(N=Sn(Oe),we):N},we.padRadius=function(Oe){return arguments.length?(j=Oe==ca?ca:Sn(Oe),we):j},we.startAngle=function(Oe){return arguments.length?(Z=Sn(Oe),we):Z},we.endAngle=function(Oe){return arguments.length?(ce=Sn(Oe),we):ce},we.padAngle=function(Oe){return arguments.length?(ge=Sn(Oe),we):ge},we.centroid=function(){var Oe=(+pe.apply(this,arguments)+ +P.apply(this,arguments))/2,$e=(+Z.apply(this,arguments)+ +ce.apply(this,arguments))/2-cn;return[Math.cos($e)*Oe,Math.sin($e)*Oe]},we};var ca="auto";function ia(pe){return pe.innerRadius}function Ei(pe){return pe.outerRadius}function fa(pe){return pe.startAngle}function ea(pe){return pe.endAngle}function za(pe){return pe&&pe.padAngle}function Ai(pe,P,N,j){return(pe-N)*P-(P-j)*pe>0?0:1}function qa(pe,P,N,j,Z){var ce=pe[0]-P[0],ge=pe[1]-P[1],we=(Z?j:-j)/Math.sqrt(ce*ce+ge*ge),Se=we*ge,Oe=-we*ce,$e=pe[0]+Se,it=pe[1]+Oe,pt=P[0]+Se,Et=P[1]+Oe,Ft=($e+pt)/2,Dt=(it+Et)/2,zt=pt-$e,Lt=Et-it,Gt=zt*zt+Lt*Lt,Ut=N-j,Zt=$e*Et-pt*it,vn=(Lt<0?-1:1)*Math.sqrt(Math.max(0,Ut*Ut*Gt-Zt*Zt)),En=(Zt*Lt-zt*vn)/Gt,qn=(-Zt*zt-Lt*vn)/Gt,Vn=(Zt*Lt+zt*vn)/Gt,pr=(-Zt*zt+Lt*vn)/Gt,gr=En-Ft,Er=qn-Dt,yr=Vn-Ft,Jr=pr-Dt;return gr*gr+Er*Er>yr*yr+Jr*Jr&&(En=Vn,qn=pr),[[En-Se,qn-Oe],[En*N/Ut,qn*N/Ut]]}function ka(){return!0}function Ks(pe){var P=Jn,N=Ar,j=ka,Z=$o,ce=Z.key,ge=.7;function we(Se){var Oe,$e=[],it=[],pt=-1,Et=Se.length,Ft=Sn(P),Dt=Sn(N);function zt(){$e.push("M",Z(pe(it),ge))}for(;++pt<Et;)j.call(this,Oe=Se[pt],pt)?it.push([+Ft.call(this,Oe,pt),+Dt.call(this,Oe,pt)]):it.length&&(zt(),it=[]);return it.length&&zt(),$e.length?$e.join(""):null}return we.x=function(Se){return arguments.length?(P=Se,we):P},we.y=function(Se){return arguments.length?(N=Se,we):N},we.defined=function(Se){return arguments.length?(j=Se,we):j},we.interpolate=function(Se){return arguments.length?(ce="function"==typeof Se?Z=Se:(Z=Hs.get(Se)||$o).key,we):ce},we.tension=function(Se){return arguments.length?(ge=Se,we):ge},we}g.svg.line=function(){return Ks(D)};var Hs=g.map({linear:$o,"linear-closed":Ri,step:function(pe){for(var P=0,N=pe.length,j=pe[0],Z=[j[0],",",j[1]];++P<N;)Z.push("H",(j[0]+(j=pe[P])[0])/2,"V",j[1]);return N>1&&Z.push("H",j[0]),Z.join("")},"step-before":mo,"step-after":rs,basis:Bo,"basis-open":function(pe){if(pe.length<4)return $o(pe);for(var P,N=[],j=-1,Z=pe.length,ce=[0],ge=[0];++j<3;)ce.push((P=pe[j])[0]),ge.push(P[1]);for(N.push(Na(Ko,ce)+","+Na(Ko,ge)),--j;++j<Z;)P=pe[j],ce.shift(),ce.push(P[0]),ge.shift(),ge.push(P[1]),Js(N,ce,ge);return N.join("")},"basis-closed":function(pe){for(var P,N,j=-1,Z=pe.length,ce=Z+4,ge=[],we=[];++j<4;)ge.push((N=pe[j%Z])[0]),we.push(N[1]);for(P=[Na(Ko,ge),",",Na(Ko,we)],--j;++j<ce;)N=pe[j%Z],ge.shift(),ge.push(N[0]),we.shift(),we.push(N[1]),Js(P,ge,we);return P.join("")},bundle:function(pe,P){var N=pe.length-1;if(N)for(var j,Z,ce=pe[0][0],ge=pe[0][1],we=pe[N][0]-ce,Se=pe[N][1]-ge,Oe=-1;++Oe<=N;)(j=pe[Oe])[0]=P*j[0]+(1-P)*(ce+(Z=Oe/N)*we),j[1]=P*j[1]+(1-P)*(ge+Z*Se);return Bo(pe)},cardinal:function(pe,P){return pe.length<3?$o(pe):pe[0]+Aa(pe,Oa(pe,P))},"cardinal-open":function(pe,P){return pe.length<4?$o(pe):pe[1]+Aa(pe.slice(1,-1),Oa(pe,P))},"cardinal-closed":function(pe,P){return pe.length<3?Ri(pe):pe[0]+Aa((pe.push(pe[0]),pe),Oa([pe[pe.length-2]].concat(pe,[pe[1]]),P))},monotone:function(pe){return pe.length<3?$o(pe):pe[0]+Aa(pe,function(P){for(var N,j,Z,ce,ge=[],we=function($e){for(var it=0,pt=$e.length-1,Et=[],Ft=$e[0],Dt=$e[1],zt=Et[0]=$i(Ft,Dt);++it<pt;)Et[it]=(zt+(zt=$i(Ft=Dt,Dt=$e[it+1])))/2;return Et[it]=zt,Et}(P),Se=-1,Oe=P.length-1;++Se<Oe;)N=$i(P[Se],P[Se+1]),o(N)<St?we[Se]=we[Se+1]=0:(ce=(j=we[Se]/N)*j+(Z=we[Se+1]/N)*Z)>9&&(ce=3*N/Math.sqrt(ce),we[Se]=ce*j,we[Se+1]=ce*Z);for(Se=-1;++Se<=Oe;)ce=(P[Math.min(Oe,Se+1)][0]-P[Math.max(0,Se-1)][0])/(6*(1+we[Se]*we[Se])),ge.push([ce||0,we[Se]*ce||0]);return ge}(pe))}});function $o(pe){return pe.length>1?pe.join("L"):pe+"Z"}function Ri(pe){return pe.join("L")+"Z"}function mo(pe){for(var P=0,N=pe.length,j=pe[0],Z=[j[0],",",j[1]];++P<N;)Z.push("V",(j=pe[P])[1],"H",j[0]);return Z.join("")}function rs(pe){for(var P=0,N=pe.length,j=pe[0],Z=[j[0],",",j[1]];++P<N;)Z.push("H",(j=pe[P])[0],"V",j[1]);return Z.join("")}function Aa(pe,P){if(P.length<1||pe.length!=P.length&&pe.length!=P.length+2)return $o(pe);var N=pe.length!=P.length,j="",Z=pe[0],ce=pe[1],ge=P[0],we=ge,Se=1;if(N&&(j+="Q"+(ce[0]-2*ge[0]/3)+","+(ce[1]-2*ge[1]/3)+","+ce[0]+","+ce[1],Z=pe[1],Se=2),P.length>1){ce=pe[Se],Se++,j+="C"+(Z[0]+ge[0])+","+(Z[1]+ge[1])+","+(ce[0]-(we=P[1])[0])+","+(ce[1]-we[1])+","+ce[0]+","+ce[1];for(var Oe=2;Oe<P.length;Oe++,Se++)j+="S"+((ce=pe[Se])[0]-(we=P[Oe])[0])+","+(ce[1]-we[1])+","+ce[0]+","+ce[1]}if(N){var $e=pe[Se];j+="Q"+(ce[0]+2*we[0]/3)+","+(ce[1]+2*we[1]/3)+","+$e[0]+","+$e[1]}return j}function Oa(pe,P){for(var N,j=[],Z=(1-P)/2,ce=pe[0],ge=pe[1],we=1,Se=pe.length;++we<Se;)N=ce,ce=ge,j.push([Z*((ge=pe[we])[0]-N[0]),Z*(ge[1]-N[1])]);return j}function Bo(pe){if(pe.length<3)return $o(pe);var P=1,N=pe.length,j=pe[0],Z=j[0],ce=j[1],ge=[Z,Z,Z,(j=pe[1])[0]],we=[ce,ce,ce,j[1]],Se=[Z,",",ce,"L",Na(Ko,ge),",",Na(Ko,we)];for(pe.push(pe[N-1]);++P<=N;)j=pe[P],ge.shift(),ge.push(j[0]),we.shift(),we.push(j[1]),Js(Se,ge,we);return pe.pop(),Se.push("L",j),Se.join("")}function Na(pe,P){return pe[0]*P[0]+pe[1]*P[1]+pe[2]*P[2]+pe[3]*P[3]}Hs.forEach(function(pe,P){P.key=pe,P.closed=/-closed$/.test(pe)});var ps=[0,2/3,1/3,0],Sa=[0,1/3,2/3,0],Ko=[0,1/6,2/3,1/6];function Js(pe,P,N){pe.push("C",Na(ps,P),",",Na(ps,N),",",Na(Sa,P),",",Na(Sa,N),",",Na(Ko,P),",",Na(Ko,N))}function $i(pe,P){return(P[1]-pe[1])/(P[0]-pe[0])}function Fl(pe){for(var P,N,j,Z=-1,ce=pe.length;++Z<ce;)N=(P=pe[Z])[0],j=P[1]-cn,P[0]=N*Math.cos(j),P[1]=N*Math.sin(j);return pe}function jo(pe){var P=Jn,N=Jn,j=0,Z=Ar,ce=ka,ge=$o,we=ge.key,Se=ge,Oe="L",$e=.7;function it(pt){var Et,Ft,Dt,zt=[],Lt=[],Gt=[],Ut=-1,Zt=pt.length,vn=Sn(P),En=Sn(j),qn=P===N?function(){return Ft}:Sn(N),Vn=j===Z?function(){return Dt}:Sn(Z);function pr(){zt.push("M",ge(pe(Gt),$e),Oe,Se(pe(Lt.reverse()),$e),"Z")}for(;++Ut<Zt;)ce.call(this,Et=pt[Ut],Ut)?(Lt.push([Ft=+vn.call(this,Et,Ut),Dt=+En.call(this,Et,Ut)]),Gt.push([+qn.call(this,Et,Ut),+Vn.call(this,Et,Ut)])):Lt.length&&(pr(),Lt=[],Gt=[]);return Lt.length&&pr(),zt.length?zt.join(""):null}return it.x=function(pt){return arguments.length?(P=N=pt,it):N},it.x0=function(pt){return arguments.length?(P=pt,it):P},it.x1=function(pt){return arguments.length?(N=pt,it):N},it.y=function(pt){return arguments.length?(j=Z=pt,it):Z},it.y0=function(pt){return arguments.length?(j=pt,it):j},it.y1=function(pt){return arguments.length?(Z=pt,it):Z},it.defined=function(pt){return arguments.length?(ce=pt,it):ce},it.interpolate=function(pt){return arguments.length?(we="function"==typeof pt?ge=pt:(ge=Hs.get(pt)||$o).key,Se=ge.reverse||ge,Oe=ge.closed?"M":"L",it):we},it.tension=function(pt){return arguments.length?($e=pt,it):$e},it}function Ul(pe){return pe.source}function Io(pe){return pe.target}function al(pe){return pe.radius}function Li(pe){return[pe.x,pe.y]}function Hi(pe){return function(){var P=pe.apply(this,arguments),N=P[0],j=P[1]-cn;return[N*Math.cos(j),N*Math.sin(j)]}}function Hl(){return 64}function Yr(){return"circle"}function da(pe){var P=Math.sqrt(pe/Xt);return"M0,"+P+"A"+P+","+P+" 0 1,1 0,"+-P+"A"+P+","+P+" 0 1,1 0,"+P+"Z"}g.svg.line.radial=function(){var pe=Ks(Fl);return pe.radius=pe.x,delete pe.x,pe.angle=pe.y,delete pe.y,pe},mo.reverse=rs,rs.reverse=mo,g.svg.area=function(){return jo(D)},g.svg.area.radial=function(){var pe=jo(Fl);return pe.radius=pe.x,delete pe.x,pe.innerRadius=pe.x0,delete pe.x0,pe.outerRadius=pe.x1,delete pe.x1,pe.angle=pe.y,delete pe.y,pe.startAngle=pe.y0,delete pe.y0,pe.endAngle=pe.y1,delete pe.y1,pe},g.svg.chord=function(){var pe=Ul,P=Io,N=al,j=fa,Z=ea;function ce(Oe,$e){var it,pt,Et=ge(this,pe,Oe,$e),Ft=ge(this,P,Oe,$e);return"M"+Et.p0+we(Et.r,Et.p1,Et.a1-Et.a0)+((it=Et).a0==(pt=Ft).a0&&it.a1==pt.a1?Se(0,0,0,Et.p0):Se(0,0,0,Ft.p0)+we(Ft.r,Ft.p1,Ft.a1-Ft.a0)+Se(0,0,0,Et.p0))+"Z"}function ge(Oe,$e,it,pt){var Et=$e.call(Oe,it,pt),Ft=N.call(Oe,Et,pt),Dt=j.call(Oe,Et,pt)-cn,zt=Z.call(Oe,Et,pt)-cn;return{r:Ft,a0:Dt,a1:zt,p0:[Ft*Math.cos(Dt),Ft*Math.sin(Dt)],p1:[Ft*Math.cos(zt),Ft*Math.sin(zt)]}}function we(Oe,$e,it){return"A"+Oe+","+Oe+" 0 "+ +(it>Xt)+",1 "+$e}function Se(Oe,$e,it,pt){return"Q 0,0 "+pt}return ce.radius=function(Oe){return arguments.length?(N=Sn(Oe),ce):N},ce.source=function(Oe){return arguments.length?(pe=Sn(Oe),ce):pe},ce.target=function(Oe){return arguments.length?(P=Sn(Oe),ce):P},ce.startAngle=function(Oe){return arguments.length?(j=Sn(Oe),ce):j},ce.endAngle=function(Oe){return arguments.length?(Z=Sn(Oe),ce):Z},ce},g.svg.diagonal=function(){var pe=Ul,P=Io,N=Li;function j(Z,ce){var ge=pe.call(this,Z,ce),we=P.call(this,Z,ce),Se=(ge.y+we.y)/2,Oe=[ge,{x:ge.x,y:Se},{x:we.x,y:Se},we];return"M"+(Oe=Oe.map(N))[0]+"C"+Oe[1]+" "+Oe[2]+" "+Oe[3]}return j.source=function(Z){return arguments.length?(pe=Sn(Z),j):pe},j.target=function(Z){return arguments.length?(P=Sn(Z),j):P},j.projection=function(Z){return arguments.length?(N=Z,j):N},j},g.svg.diagonal.radial=function(){var pe=g.svg.diagonal(),P=Li,N=pe.projection;return pe.projection=function(j){return arguments.length?N(Hi(P=j)):P},pe},g.svg.symbol=function(){var pe=Yr,P=Hl;function N(j,Z){return(Fs.get(pe.call(this,j,Z))||da)(P.call(this,j,Z))}return N.type=function(j){return arguments.length?(pe=Sn(j),N):pe},N.size=function(j){return arguments.length?(P=Sn(j),N):P},N};var Fs=g.map({circle:da,cross:function(pe){var P=Math.sqrt(pe/5)/2;return"M"+-3*P+","+-P+"H"+-P+"V"+-3*P+"H"+P+"V"+-P+"H"+3*P+"V"+P+"H"+P+"V"+3*P+"H"+-P+"V"+P+"H"+-3*P+"Z"},diamond:function(pe){var P=Math.sqrt(pe/(2*Vo)),N=P*Vo;return"M0,"+-P+"L"+N+",0 0,"+P+" "+-N+",0Z"},square:function(pe){var P=Math.sqrt(pe)/2;return"M"+-P+","+-P+"L"+P+","+-P+" "+P+","+P+" "+-P+","+P+"Z"},"triangle-down":function(pe){var P=Math.sqrt(pe/qs),N=P*qs/2;return"M0,"+N+"L"+P+","+-N+" "+-P+","+-N+"Z"},"triangle-up":function(pe){var P=Math.sqrt(pe/qs),N=P*qs/2;return"M0,"+-N+"L"+P+","+N+" "+-P+","+N+"Z"}});g.svg.symbolTypes=Fs.keys();var qs=Math.sqrt(3),Vo=Math.tan(30*yn);Q.transition=function(pe){for(var P,N,j=ol||++vl,Z=Wo(pe),ce=[],ge=Qs||{time:Date.now(),ease:ml,delay:0,duration:250},we=-1,Se=this.length;++we<Se;){ce.push(P=[]);for(var Oe=this[we],$e=-1,it=Oe.length;++$e<it;)(N=Oe[$e])&&gs(N,$e,Z,j,ge),P.push(N)}return _a(ce,Z,j)},Q.interrupt=function(pe){return this.each(null==pe?Al:Ca(Wo(pe)))};var Al=Ca(Wo());function Ca(pe){return function(){var P,N,j;(P=this[pe])&&(j=P[N=P.active])&&(j.timer.c=null,j.timer.t=NaN,--P.count?delete P[N]:delete this[pe],P.active+=.5,j.event&&j.event.interrupt.call(this,this.__data__,j.index))}}function _a(pe,P,N){return V(pe,Po),pe.namespace=P,pe.id=N,pe}var ol,Qs,Po=[],vl=0;function ql(pe,P,N,j){var Z=pe.id,ce=pe.namespace;return qe(pe,"function"==typeof N?function(ge,we,Se){ge[ce][Z].tween.set(P,j(N.call(ge,ge.__data__,we,Se)))}:(N=j(N),function(ge){ge[ce][Z].tween.set(P,N)}))}function sl(pe){return null==pe&&(pe=""),function(){this.textContent=pe}}function Wo(pe){return null==pe?"__transition__":"__transition_"+pe+"__"}function gs(pe,P,N,j,Z){var ce,ge,we,Se,Oe,$e=pe[N]||(pe[N]={active:0,count:0}),it=$e[j];function pt(Ft){var Dt=$e.active,zt=$e[Dt];for(var Lt in zt&&(zt.timer.c=null,zt.timer.t=NaN,--$e.count,delete $e[Dt],zt.event&&zt.event.interrupt.call(pe,pe.__data__,zt.index)),$e)if(+Lt<j){var Gt=$e[Lt];Gt.timer.c=null,Gt.timer.t=NaN,--$e.count,delete $e[Lt]}ge.c=Et,sr(function(){return ge.c&&Et(Ft||1)&&(ge.c=null,ge.t=NaN),1},0,ce),$e.active=j,it.event&&it.event.start.call(pe,pe.__data__,P),Oe=[],it.tween.forEach(function(Ut,Zt){(Zt=Zt.call(pe,pe.__data__,P))&&Oe.push(Zt)}),Se=it.ease,we=it.duration}function Et(Ft){for(var Dt=Ft/we,zt=Se(Dt),Lt=Oe.length;Lt>0;)Oe[--Lt].call(pe,zt);if(Dt>=1)return it.event&&it.event.end.call(pe,pe.__data__,P),--$e.count?delete $e[j]:delete pe[N],1}it||(ge=sr(function(Ft){var Dt=it.delay;if(ge.t=Dt+ce,Dt<=Ft)return pt(Ft-Dt);ge.c=pt},0,ce=Z.time),it=$e[j]={tween:new T,time:ce,timer:ge,delay:Z.delay,duration:Z.duration,ease:Z.ease,index:P},Z=null,++$e.count)}Po.call=Q.call,Po.empty=Q.empty,Po.node=Q.node,Po.size=Q.size,g.transition=function(pe,P){return pe&&pe.transition?ol?pe.transition(P):pe:g.selection().transition(pe)},g.transition.prototype=Po,Po.select=function(pe){var P,N,j,Z=this.id,ce=this.namespace,ge=[];pe=oe(pe);for(var we=-1,Se=this.length;++we<Se;){ge.push(P=[]);for(var Oe=this[we],$e=-1,it=Oe.length;++$e<it;)(j=Oe[$e])&&(N=pe.call(j,j.__data__,$e,we))?("__data__"in j&&(N.__data__=j.__data__),gs(N,$e,ce,Z,j[ce][Z]),P.push(N)):P.push(null)}return _a(ge,ce,Z)},Po.selectAll=function(pe){var P,N,j,Z,ce,ge=this.id,we=this.namespace,Se=[];pe=le(pe);for(var Oe=-1,$e=this.length;++Oe<$e;)for(var it=this[Oe],pt=-1,Et=it.length;++pt<Et;)if(j=it[pt]){ce=j[we][ge],N=pe.call(j,j.__data__,pt,Oe),Se.push(P=[]);for(var Ft=-1,Dt=N.length;++Ft<Dt;)(Z=N[Ft])&&gs(Z,Ft,we,ge,ce),P.push(Z)}return _a(Se,we,ge)},Po.filter=function(pe){var P,N,j=[];"function"!=typeof pe&&(pe=Fe(pe));for(var Z=0,ce=this.length;Z<ce;Z++){j.push(P=[]);for(var ge,we=0,Se=(ge=this[Z]).length;we<Se;we++)(N=ge[we])&&pe.call(N,N.__data__,we,Z)&&P.push(N)}return _a(j,this.namespace,this.id)},Po.tween=function(pe,P){var N=this.id,j=this.namespace;return arguments.length<2?this.node()[j][N].tween.get(pe):qe(this,null==P?function(Z){Z[j][N].tween.remove(pe)}:function(Z){Z[j][N].tween.set(pe,P)})},Po.attr=function(pe,P){if(arguments.length<2){for(P in pe)this.attr(P,pe[P]);return this}var N="transform"==pe?Ao:Lo,j=g.ns.qualify(pe);function Z(){this.removeAttribute(j)}function ce(){this.removeAttributeNS(j.space,j.local)}function ge(Se){return null==Se?Z:(Se+="",function(){var Oe,$e=this.getAttribute(j);return $e!==Se&&(Oe=N($e,Se),function(it){this.setAttribute(j,Oe(it))})})}function we(Se){return null==Se?ce:(Se+="",function(){var Oe,$e=this.getAttributeNS(j.space,j.local);return $e!==Se&&(Oe=N($e,Se),function(it){this.setAttributeNS(j.space,j.local,Oe(it))})})}return ql(this,"attr."+pe,P,j.local?we:ge)},Po.attrTween=function(pe,P){var N=g.ns.qualify(pe);return this.tween("attr."+pe,N.local?function(j,Z){var ce=P.call(this,j,Z,this.getAttributeNS(N.space,N.local));return ce&&function(ge){this.setAttributeNS(N.space,N.local,ce(ge))}}:function(j,Z){var ce=P.call(this,j,Z,this.getAttribute(N));return ce&&function(ge){this.setAttribute(N,ce(ge))}})},Po.style=function(pe,P,N){var j=arguments.length;if(j<3){if("string"!=typeof pe){for(N in j<2&&(P=""),pe)this.style(N,pe[N],P);return this}N=""}function Z(){this.style.removeProperty(pe)}function ce(ge){return null==ge?Z:(ge+="",function(){var we,Se=r(this).getComputedStyle(this,null).getPropertyValue(pe);return Se!==ge&&(we=Lo(Se,ge),function(Oe){this.style.setProperty(pe,we(Oe),N)})})}return ql(this,"style."+pe,P,ce)},Po.styleTween=function(pe,P,N){function j(Z,ce){var ge=P.call(this,Z,ce,r(this).getComputedStyle(this,null).getPropertyValue(pe));return ge&&function(we){this.style.setProperty(pe,ge(we),N)}}return arguments.length<3&&(N=""),this.tween("style."+pe,j)},Po.text=function(pe){return ql(this,"text",pe,sl)},Po.remove=function(){var pe=this.namespace;return this.each("end.transition",function(){var P;this[pe].count<2&&(P=this.parentNode)&&P.removeChild(this)})},Po.ease=function(pe){var P=this.id,N=this.namespace;return arguments.length<1?this.node()[N][P].ease:("function"!=typeof pe&&(pe=g.ease.apply(g,arguments)),qe(this,function(j){j[N][P].ease=pe}))},Po.delay=function(pe){var P=this.id,N=this.namespace;return arguments.length<1?this.node()[N][P].delay:qe(this,"function"==typeof pe?function(j,Z,ce){j[N][P].delay=+pe.call(j,j.__data__,Z,ce)}:(pe=+pe,function(j){j[N][P].delay=pe}))},Po.duration=function(pe){var P=this.id,N=this.namespace;return arguments.length<1?this.node()[N][P].duration:qe(this,"function"==typeof pe?function(j,Z,ce){j[N][P].duration=Math.max(1,pe.call(j,j.__data__,Z,ce))}:(pe=Math.max(1,pe),function(j){j[N][P].duration=pe}))},Po.each=function(pe,P){var N=this.id,j=this.namespace;if(arguments.length<2){var Z=Qs,ce=ol;try{ol=N,qe(this,function(ge,we,Se){Qs=ge[j][N],pe.call(ge,ge.__data__,we,Se)})}finally{Qs=Z,ol=ce}}else qe(this,function(ge){var we=ge[j][N];(we.event||(we.event=g.dispatch("start","end","interrupt"))).on(pe,P)});return this},Po.transition=function(){for(var pe,P,N,j=this.id,Z=++vl,ce=this.namespace,ge=[],we=0,Se=this.length;we<Se;we++){ge.push(pe=[]);for(var Oe,$e=0,it=(Oe=this[we]).length;$e<it;$e++)(P=Oe[$e])&&gs(P,$e,ce,Z,{time:(N=P[ce][j]).time,ease:N.ease,delay:N.delay+N.duration,duration:N.duration}),pe.push(P)}return _a(ge,ce,Z)},g.svg.axis=function(){var pe,P=g.scale.linear(),N=lu,j=6,Z=6,ce=3,ge=[10],we=null;function Se(Oe){Oe.each(function(){var $e,it=g.select(this),pt=this.__chart__||P,Et=this.__chart__=P.copy(),Ft=we??(Et.ticks?Et.ticks.apply(Et,ge):Et.domain()),Dt=pe??(Et.tickFormat?Et.tickFormat.apply(Et,ge):D),zt=it.selectAll(".tick").data(Ft,Et),Lt=zt.enter().insert("g",".domain").attr("class","tick").style("opacity",St),Gt=g.transition(zt.exit()).style("opacity",St).remove(),Ut=g.transition(zt.order()).style("opacity",1),Zt=Math.max(j,0)+ce,vn=Mr(Et),En=it.selectAll(".domain").data([0]),qn=(En.enter().append("path").attr("class","domain"),g.transition(En));Lt.append("line"),Lt.append("text");var Vn,pr,gr,Er,yr=Lt.select("line"),Jr=Ut.select("line"),vi=zt.select("text").text(Dt),Fi=Lt.select("text"),or=Ut.select("text"),zr="top"===N||"left"===N?-1:1;if("bottom"===N||"top"===N?($e=Ms,Vn="x",gr="y",pr="x2",Er="y2",vi.attr("dy",zr<0?"0em":".71em").style("text-anchor","middle"),qn.attr("d","M"+vn[0]+","+zr*Z+"V0H"+vn[1]+"V"+zr*Z)):($e=Au,Vn="y",gr="x",pr="y2",Er="x2",vi.attr("dy",".32em").style("text-anchor",zr<0?"end":"start"),qn.attr("d","M"+zr*Z+","+vn[0]+"H0V"+vn[1]+"H"+zr*Z)),yr.attr(Er,zr*j),Fi.attr(gr,zr*Zt),Jr.attr(pr,0).attr(Er,zr*j),or.attr(Vn,0).attr(gr,zr*Zt),Et.rangeBand){var yi=Et,ci=yi.rangeBand()/2;pt=Et=function(Si){return yi(Si)+ci}}else pt.rangeBand?pt=Et:Gt.call($e,Et,pt);Lt.call($e,pt,Et),Ut.call($e,Et,Et)})}return Se.scale=function(Oe){return arguments.length?(P=Oe,Se):P},Se.orient=function(Oe){return arguments.length?(N=Oe in El?Oe+"":lu,Se):N},Se.ticks=function(){return arguments.length?(ge=b(arguments),Se):ge},Se.tickValues=function(Oe){return arguments.length?(we=Oe,Se):we},Se.tickFormat=function(Oe){return arguments.length?(pe=Oe,Se):pe},Se.tickSize=function(Oe){var $e=arguments.length;return $e?(j=+Oe,Z=+arguments[$e-1],Se):j},Se.innerTickSize=function(Oe){return arguments.length?(j=+Oe,Se):j},Se.outerTickSize=function(Oe){return arguments.length?(Z=+Oe,Se):Z},Se.tickPadding=function(Oe){return arguments.length?(ce=+Oe,Se):ce},Se.tickSubdivide=function(){return arguments.length&&Se},Se};var lu="bottom",El={top:1,right:1,bottom:1,left:1};function Ms(pe,P,N){pe.attr("transform",function(j){var Z=P(j);return"translate("+(isFinite(Z)?Z:N(j))+",0)"})}function Au(pe,P,N){pe.attr("transform",function(j){var Z=P(j);return"translate(0,"+(isFinite(Z)?Z:N(j))+")"})}g.svg.brush=function(){var pe,P,N=ae($e,"brushstart","brush","brushend"),j=null,Z=null,ce=[0,0],ge=[0,0],we=!0,Se=!0,Oe=is[0];function $e(Dt){Dt.each(function(){var zt=g.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ft).on("touchstart.brush",Ft),Lt=zt.selectAll(".background").data([0]);Lt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),zt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Gt=zt.selectAll(".resize").data(Oe,D);Gt.exit().remove(),Gt.enter().append("g").attr("class",function(En){return"resize "+En}).style("cursor",function(En){return Sl[En]}).append("rect").attr("x",function(En){return/[ew]$/.test(En)?-3:null}).attr("y",function(En){return/^[ns]/.test(En)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Gt.style("display",$e.empty()?"none":null);var Ut,Zt=g.transition(zt),vn=g.transition(Lt);j&&(Ut=Mr(j),vn.attr("x",Ut[0]).attr("width",Ut[1]-Ut[0]),pt(Zt)),Z&&(Ut=Mr(Z),vn.attr("y",Ut[0]).attr("height",Ut[1]-Ut[0]),Et(Zt)),it(Zt)})}function it(Dt){Dt.selectAll(".resize").attr("transform",function(zt){return"translate("+ce[+/e$/.test(zt)]+","+ge[+/^s/.test(zt)]+")"})}function pt(Dt){Dt.select(".extent").attr("x",ce[0]),Dt.selectAll(".extent,.n>rect,.s>rect").attr("width",ce[1]-ce[0])}function Et(Dt){Dt.select(".extent").attr("y",ge[0]),Dt.selectAll(".extent,.e>rect,.w>rect").attr("height",ge[1]-ge[0])}function Ft(){var Dt,zt,Lt=this,Gt=g.select(g.event.target),Ut=N.of(Lt,arguments),Zt=g.select(Lt),vn=Gt.datum(),En=!/^(n|s)$/.test(vn)&&j,qn=!/^(e|w)$/.test(vn)&&Z,Vn=Gt.classed("extent"),pr=It(Lt),gr=g.mouse(Lt),Er=g.select(r(Lt)).on("keydown.brush",vi).on("keyup.brush",Fi);if(g.event.changedTouches?Er.on("touchmove.brush",or).on("touchend.brush",yi):Er.on("mousemove.brush",or).on("mouseup.brush",yi),Zt.interrupt().selectAll("*").interrupt(),Vn)gr[0]=ce[0]-gr[0],gr[1]=ge[0]-gr[1];else if(vn){var yr=+/w$/.test(vn),Jr=+/^n/.test(vn);zt=[ce[1-yr]-gr[0],ge[1-Jr]-gr[1]],gr[0]=ce[yr],gr[1]=ge[Jr]}else g.event.altKey&&(Dt=gr.slice());function vi(){32==g.event.keyCode&&(Vn||(Dt=null,gr[0]-=ce[1],gr[1]-=ge[1],Vn=2),X())}function Fi(){32==g.event.keyCode&&2==Vn&&(gr[0]+=ce[1],gr[1]+=ge[1],Vn=0,X())}function or(){var ci=g.mouse(Lt),Si=!1;zt&&(ci[0]+=zt[0],ci[1]+=zt[1]),Vn||(g.event.altKey?(Dt||(Dt=[(ce[0]+ce[1])/2,(ge[0]+ge[1])/2]),gr[0]=ce[+(ci[0]<Dt[0])],gr[1]=ge[+(ci[1]<Dt[1])]):Dt=null),En&&zr(ci,j,0)&&(pt(Zt),Si=!0),qn&&zr(ci,Z,1)&&(Et(Zt),Si=!0),Si&&(it(Zt),Ut({type:"brush",mode:Vn?"move":"resize"}))}function zr(ci,Si,ji){var Ji,_i,qi=Mr(Si),Vi=qi[0],oa=qi[1],Gi=gr[ji],ta=ji?ge:ce,Da=ta[1]-ta[0];if(Vn&&(Vi-=Gi,oa-=Da+Gi),Ji=(ji?Se:we)?Math.max(Vi,Math.min(oa,ci[ji])):ci[ji],Vn?_i=(Ji+=Gi)+Da:(Dt&&(Gi=Math.max(Vi,Math.min(oa,2*Dt[ji]-Ji))),Gi<Ji?(_i=Ji,Ji=Gi):_i=Gi),ta[0]!=Ji||ta[1]!=_i)return ji?P=null:pe=null,ta[0]=Ji,ta[1]=_i,!0}function yi(){or(),Zt.style("pointer-events","all").selectAll(".resize").style("display",$e.empty()?"none":null),g.select("body").style("cursor",null),Er.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),pr(),Ut({type:"brushend"})}Zt.style("pointer-events","none").selectAll(".resize").style("display",null),g.select("body").style("cursor",Gt.style("cursor")),Ut({type:"brushstart"}),or()}return $e.event=function(Dt){Dt.each(function(){var zt=N.of(this,arguments),Lt={x:ce,y:ge,i:pe,j:P},Gt=this.__chart__||Lt;this.__chart__=Lt,ol?g.select(this).transition().each("start.brush",function(){pe=Gt.i,P=Gt.j,ce=Gt.x,ge=Gt.y,zt({type:"brushstart"})}).tween("brush:brush",function(){var Ut=Ua(ce,Lt.x),Zt=Ua(ge,Lt.y);return pe=P=null,function(vn){ce=Lt.x=Ut(vn),ge=Lt.y=Zt(vn),zt({type:"brush",mode:"resize"})}}).each("end.brush",function(){pe=Lt.i,P=Lt.j,zt({type:"brush",mode:"resize"}),zt({type:"brushend"})}):(zt({type:"brushstart"}),zt({type:"brush",mode:"resize"}),zt({type:"brushend"}))})},$e.x=function(Dt){return arguments.length?(Oe=is[!(j=Dt)<<1|!Z],$e):j},$e.y=function(Dt){return arguments.length?(Oe=is[!j<<1|!(Z=Dt)],$e):Z},$e.clamp=function(Dt){return arguments.length?(j&&Z?(we=!!Dt[0],Se=!!Dt[1]):j?we=!!Dt:Z&&(Se=!!Dt),$e):j&&Z?[we,Se]:j?we:Z?Se:null},$e.extent=function(Dt){var zt,Lt,Gt,Ut,Zt;return arguments.length?(j&&(zt=Dt[0],Lt=Dt[1],Z&&(zt=zt[0],Lt=Lt[0]),pe=[zt,Lt],j.invert&&(zt=j(zt),Lt=j(Lt)),Lt<zt&&(Zt=zt,zt=Lt,Lt=Zt),zt==ce[0]&&Lt==ce[1]||(ce=[zt,Lt])),Z&&(Gt=Dt[0],Ut=Dt[1],j&&(Gt=Gt[1],Ut=Ut[1]),P=[Gt,Ut],Z.invert&&(Gt=Z(Gt),Ut=Z(Ut)),Ut<Gt&&(Zt=Gt,Gt=Ut,Ut=Zt),Gt==ge[0]&&Ut==ge[1]||(ge=[Gt,Ut])),$e):(j&&(pe?(zt=pe[0],Lt=pe[1]):(zt=ce[0],Lt=ce[1],j.invert&&(zt=j.invert(zt),Lt=j.invert(Lt)),Lt<zt&&(Zt=zt,zt=Lt,Lt=Zt))),Z&&(P?(Gt=P[0],Ut=P[1]):(Gt=ge[0],Ut=ge[1],Z.invert&&(Gt=Z.invert(Gt),Ut=Z.invert(Ut)),Ut<Gt&&(Zt=Gt,Gt=Ut,Ut=Zt))),j&&Z?[[zt,Gt],[Lt,Ut]]:j?[zt,Lt]:Z&&[Gt,Ut])},$e.clear=function(){return $e.empty()||(ce=[0,0],ge=[0,0],pe=P=null),$e},$e.empty=function(){return!!j&&ce[0]==ce[1]||!!Z&&ge[0]==ge[1]},g.rebind($e,N,"on")};var Sl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},is=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Vu(pe){return JSON.parse(pe.responseText)}function uu(pe){var P=y.createRange();return P.selectNode(y.body),P.createContextualFragment(pe.responseText)}g.text=Nn(function(pe){return pe.responseText}),g.json=function(pe,P){return Kn(pe,"application/json",Vu,P)},g.html=function(pe,P){return Kn(pe,"text/html",uu,P)},g.xml=Nn(function(pe){return pe.responseXML}),"object"==typeof re&&re.exports?re.exports=g:this.d3=g}).apply(self)},{}],59:[function(v,re,ne){"use strict";re.exports=v("./quad")},{"./quad":60}],60:[function(v,re,ne){"use strict";var g=v("binary-search-bounds"),m=v("clamp"),b=v("parse-rect"),y=v("array-bounds"),e=v("pick-by-alias"),r=v("defined"),n=v("flatten-vertex-data"),a=v("is-obj"),t=v("dtype"),p=v("math-log2");function s(i,f){for(var c=f[0],l=f[1],h=1/(f[2]-c),d=1/(f[3]-l),o=new Array(i.length),x=0,u=i.length/2;x<u;x++)o[2*x]=m((i[2*x]-c)*h,0,1),o[2*x+1]=m((i[2*x+1]-l)*d,0,1);return o}re.exports=function(i,f){f||(f={}),i=n(i,"float64"),f=e(f,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=r(f.maxDepth,255),l=r(f.bounds,y(i,2));l[0]===l[2]&&l[2]++,l[1]===l[3]&&l[3]++;var h,d=s(i,l),o=i.length>>>1;f.dtype||(f.dtype="array"),"string"==typeof f.dtype?h=new(t(f.dtype))(o):f.dtype&&(h=f.dtype,Array.isArray(h)&&(h.length=o));for(var x=0;x<o;++x)h[x]=x;var u=[],T=[],_=[],w=[];!function z(Y,G,J,te,X,K){if(!te.length)return null;var ae=u[X]||(u[X]=[]),U=_[X]||(_[X]=[]),V=T[X]||(T[X]=[]),q=ae.length;if(++X>c||K>1073741824){for(var ie=0;ie<te.length;ie++)ae.push(te[ie]),U.push(K),V.push(null,null,null,null);return q}if(ae.push(te[0]),U.push(K),te.length<=1)return V.push(null,null,null,null),q;for(var H=.5*J,ee=Y+H,Q=G+H,oe=[],le=[],de=[],fe=[],be=1,he=te.length;be<he;be++){var _e=te[be],Ee=d[2*_e+1];d[2*_e]<ee?Ee<Q?oe.push(_e):le.push(_e):Ee<Q?de.push(_e):fe.push(_e)}return V.push(z(Y,G,H,oe,X,K<<=2),z(Y,Q,H,le,X,K+1),z(ee,G,H,de,X,K+2),z(ee,Q,H,fe,X,K+3)),q}(0,0,1,h,0,1);for(var M=0,I=0;I<u.length;I++){var S=u[I];if(h.set)h.set(S,M);else for(var R=0,O=S.length;R<O;R++)h[R+M]=S[R];var C=M+u[I].length;w[I]=[M,C],M=C}return h.range=function(){for(var z,Y=[],G=arguments.length;G--;)Y[G]=arguments[G];if(a(Y[Y.length-1])){var J=Y.pop();Y.length||null==J.x&&null==J.l&&null==J.left||(Y=[J],z={}),z=e(J,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};Y.length||(Y=l);var le,te=b.apply(void 0,Y),X=[Math.min(te.x,te.x+te.width),Math.min(te.y,te.y+te.height),Math.max(te.x,te.x+te.width),Math.max(te.y,te.y+te.height)],K=X[0],ae=X[1],U=X[2],V=X[3],q=s([K,ae,U,V],l),ie=q[0],H=q[1],ee=q[2],Q=q[3],oe=r(z.level,u.length);if(null!=z.d&&("number"==typeof z.d?le=[z.d,z.d]:z.d.length&&(le=z.d),oe=Math.min(Math.max(Math.ceil(-p(Math.abs(le[0])/(l[2]-l[0]))),Math.ceil(-p(Math.abs(le[1])/(l[3]-l[1])))),oe)),oe=Math.min(oe,u.length),z.lod)return D(ie,H,ee,Q,oe);var de=[];function fe(he,_e,Ce,Ee,Ae,ze){if(null!==Ae&&null!==ze&&!(ie>he+Ce||H>_e+Ce||ee<he||Q<_e||Ee>=oe||Ae===ze)){var ve=u[Ee];void 0===ze&&(ze=ve.length);for(var Te=Ae;Te<ze;Te++){var Ie=ve[Te],De=i[2*Ie],Fe=i[2*Ie+1];De>=K&&De<=U&&Fe>=ae&&Fe<=V&&de.push(Ie)}var Ue=T[Ee],qe=Ue[4*Ae+0],je=Ue[4*Ae+1],rt=Ue[4*Ae+2],Ne=Ue[4*Ae+3],Be=be(Ue,Ae+1),We=.5*Ce,Ye=Ee+1;fe(he,_e,We,Ye,qe,je||rt||Ne||Be),fe(he,_e+We,We,Ye,je,rt||Ne||Be),fe(he+We,_e,We,Ye,rt,Ne||Be),fe(he+We,_e+We,We,Ye,Ne,Be)}}function be(he,_e){for(var Ce=null,Ee=0;null===Ce;)if(Ce=he[4*_e+Ee],++Ee>he.length)return null;return Ce}return fe(0,0,1,0,0,1),de},h;function D(z,Y,G,J,te){for(var X=[],K=0;K<te;K++){var ae=_[K],U=w[K][0],V=B(z,Y,K),q=B(G,J,K),ie=g.ge(ae,V),H=g.gt(ae,q,ie,ae.length-1);X[K]=[ie+U,H+U]}return X}function B(z,Y,G){for(var J=1,te=.5,X=.5,K=.5,ae=0;ae<G;ae++)J<<=2,J+=z<te?Y<X?0:1:Y<X?2:3,K*=.5,te+=z<te?-K:K,X+=Y<X?-K:K;return J}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(v,re,ne){"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var g=v("@turf/meta");function m(e){var r=0;if(e&&e.length>0){r+=Math.abs(b(e[0]));for(var n=1;n<e.length;n++)r-=Math.abs(b(e[n]))}return r}function b(e){var r,n,a,t,p,s,i=0,f=e.length;if(f>2){for(s=0;s<f;s++)s===f-2?(a=f-2,t=f-1,p=0):s===f-1?(a=f-1,t=0,p=1):(a=s,t=s+1,p=s+2),r=e[a],n=e[t],i+=(y(e[p][0])-y(r[0]))*Math.sin(y(n[1]));i=6378137*i*6378137/2}return i}function y(e){return e*Math.PI/180}ne.default=function(e){return g.geomReduce(e,function(r,n){return r+function(a){var t,p=0;switch(a.type){case"Polygon":return m(a.coordinates);case"MultiPolygon":for(t=0;t<a.coordinates.length;t++)p+=m(a.coordinates[t]);return p;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(n)},0)}},{"@turf/meta":63}],62:[function(v,re,ne){"use strict";function g(f,c,l){void 0===l&&(l={});var h={type:"Feature"};return(0===l.id||l.id)&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.properties=c||{},h.geometry=f,h}function m(f,c,l){if(void 0===l&&(l={}),!f)throw new Error("coordinates is required");if(!Array.isArray(f))throw new Error("coordinates must be an Array");if(f.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(f[0])||!i(f[1]))throw new Error("coordinates must contain numbers");return g({type:"Point",coordinates:f},c,l)}function b(f,c,l){void 0===l&&(l={});for(var h=0,d=f;h<d.length;h++){var o=d[h];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<o[o.length-1].length;x++)if(o[o.length-1][x]!==o[0][x])throw new Error("First and last Position are not equivalent.")}return g({type:"Polygon",coordinates:f},c,l)}function y(f,c,l){if(void 0===l&&(l={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");return g({type:"LineString",coordinates:f},c,l)}function e(f,c){void 0===c&&(c={});var l={type:"FeatureCollection"};return c.id&&(l.id=c.id),c.bbox&&(l.bbox=c.bbox),l.features=f,l}function r(f,c,l){return void 0===l&&(l={}),g({type:"MultiLineString",coordinates:f},c,l)}function n(f,c,l){return void 0===l&&(l={}),g({type:"MultiPoint",coordinates:f},c,l)}function a(f,c,l){return void 0===l&&(l={}),g({type:"MultiPolygon",coordinates:f},c,l)}function t(f,c){void 0===c&&(c="kilometers");var l=ne.factors[c];if(!l)throw new Error(c+" units is invalid");return f*l}function p(f,c){void 0===c&&(c="kilometers");var l=ne.factors[c];if(!l)throw new Error(c+" units is invalid");return f/l}function s(f){return f%(2*Math.PI)*180/Math.PI}function i(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)}Object.defineProperty(ne,"__esModule",{value:!0}),ne.earthRadius=6371008.8,ne.factors={centimeters:100*ne.earthRadius,centimetres:100*ne.earthRadius,degrees:ne.earthRadius/111325,feet:3.28084*ne.earthRadius,inches:39.37*ne.earthRadius,kilometers:ne.earthRadius/1e3,kilometres:ne.earthRadius/1e3,meters:ne.earthRadius,metres:ne.earthRadius,miles:ne.earthRadius/1609.344,millimeters:1e3*ne.earthRadius,millimetres:1e3*ne.earthRadius,nauticalmiles:ne.earthRadius/1852,radians:1,yards:1.0936*ne.earthRadius},ne.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ne.earthRadius,yards:1.0936133},ne.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ne.feature=g,ne.geometry=function(f,c,l){switch(void 0===l&&(l={}),f){case"Point":return m(c).geometry;case"LineString":return y(c).geometry;case"Polygon":return b(c).geometry;case"MultiPoint":return n(c).geometry;case"MultiLineString":return r(c).geometry;case"MultiPolygon":return a(c).geometry;default:throw new Error(f+" is invalid")}},ne.point=m,ne.points=function(f,c,l){return void 0===l&&(l={}),e(f.map(function(h){return m(h,c)}),l)},ne.polygon=b,ne.polygons=function(f,c,l){return void 0===l&&(l={}),e(f.map(function(h){return b(h,c)}),l)},ne.lineString=y,ne.lineStrings=function(f,c,l){return void 0===l&&(l={}),e(f.map(function(h){return y(h,c)}),l)},ne.featureCollection=e,ne.multiLineString=r,ne.multiPoint=n,ne.multiPolygon=a,ne.geometryCollection=function(f,c,l){return void 0===l&&(l={}),g({type:"GeometryCollection",geometries:f},c,l)},ne.round=function(f,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,c||0);return Math.round(f*l)/l},ne.radiansToLength=t,ne.lengthToRadians=p,ne.lengthToDegrees=function(f,c){return s(p(f,c))},ne.bearingToAzimuth=function(f){var c=f%360;return c<0&&(c+=360),c},ne.radiansToDegrees=s,ne.degreesToRadians=function(f){return f%360*Math.PI/180},ne.convertLength=function(f,c,l){if(void 0===c&&(c="kilometers"),void 0===l&&(l="kilometers"),!(f>=0))throw new Error("length must be a positive number");return t(p(f,c),l)},ne.convertArea=function(f,c,l){if(void 0===c&&(c="meters"),void 0===l&&(l="kilometers"),!(f>=0))throw new Error("area must be a positive number");var h=ne.areaFactors[c];if(!h)throw new Error("invalid original units");var d=ne.areaFactors[l];if(!d)throw new Error("invalid final units");return f/h*d},ne.isNumber=i,ne.isObject=function(f){return!!f&&f.constructor===Object},ne.validateBBox=function(f){if(!f)throw new Error("bbox is required");if(!Array.isArray(f))throw new Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw new Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},ne.validateId=function(f){if(!f)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof f))throw new Error("id must be a number or a string")}},{}],63:[function(v,re,ne){"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var g=v("@turf/helpers");function m(t,p,s){if(null!==t)for(var i,f,c,l,h,d,o,x,u=0,T=0,_=t.type,w="FeatureCollection"===_,M="Feature"===_,I=w?t.features.length:1,S=0;S<I;S++){h=(x=!!(o=w?t.features[S].geometry:M?t.geometry:t)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var R=0;R<h;R++){var O=0,C=0;if(null!==(l=x?o.geometries[R]:o)){d=l.coordinates;var D=l.type;switch(u=!s||"Polygon"!==D&&"MultiPolygon"!==D?0:1,D){case null:break;case"Point":if(!1===p(d,T,S,O,C))return!1;T++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<d.length;i++){if(!1===p(d[i],T,S,O,C))return!1;T++,"MultiPoint"===D&&O++}"LineString"===D&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<d.length;i++){for(f=0;f<d[i].length-u;f++){if(!1===p(d[i][f],T,S,O,C))return!1;T++}"MultiLineString"===D&&O++,"Polygon"===D&&C++}"Polygon"===D&&O++;break;case"MultiPolygon":for(i=0;i<d.length;i++){for(C=0,f=0;f<d[i].length;f++){for(c=0;c<d[i][f].length-u;c++){if(!1===p(d[i][f][c],T,S,O,C))return!1;T++}C++}O++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(!1===m(l.geometries[i],p,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(t,p){var s;switch(t.type){case"FeatureCollection":for(s=0;s<t.features.length&&!1!==p(t.features[s].properties,s);s++);break;case"Feature":p(t.properties,0)}}function y(t,p){if("Feature"===t.type)p(t,0);else if("FeatureCollection"===t.type)for(var s=0;s<t.features.length&&!1!==p(t.features[s],s);s++);}function e(t,p){var s,i,f,c,l,h,d,o,x,u,T=0,_="FeatureCollection"===t.type,w="Feature"===t.type,M=_?t.features.length:1;for(s=0;s<M;s++){for(o=_?t.features[s].properties:w?t.properties:{},x=_?t.features[s].bbox:w?t.bbox:void 0,u=_?t.features[s].id:w?t.id:void 0,l=(d=!!(h=_?t.features[s].geometry:w?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1,f=0;f<l;f++)if(null!==(c=d?h.geometries[f]:h))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===p(c,T,o,x,u))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===p(c.geometries[i],T,o,x,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===p(null,T,o,x,u))return!1;T++}}function r(t,p){e(t,function(s,i,f,c,l){var h,d=null===s?null:s.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return!1!==p(g.feature(s,f,{bbox:c,id:l}),i,0)&&void 0}switch(d){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var o=0;o<s.coordinates.length;o++)if(!1===p(g.feature({type:h,coordinates:s.coordinates[o]},f),i,o))return!1})}function n(t,p){r(t,function(s,i,f){var c=0;if(s.geometry){var l=s.geometry.type;if("Point"!==l&&"MultiPoint"!==l){var h,d=0,o=0,x=0;return!1!==m(s,function(u,T,_,w,M){if(void 0===h||i>d||w>o||M>x)return h=u,d=i,o=w,x=M,void(c=0);var I=g.lineString([h,u],s.properties);if(!1===p(I,i,f,M,c))return!1;c++,h=u})&&void 0}}})}function a(t,p){if(!t)throw new Error("geojson is required");r(t,function(s,i,f){if(null!==s.geometry){var l=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===p(s,i,f,0,0))return!1;break;case"Polygon":for(var h=0;h<l.length;h++)if(!1===p(g.lineString(l[h],s.properties),i,f,h))return!1}}})}ne.coordEach=m,ne.coordReduce=function(t,p,s,i){var f=s;return m(t,function(c,l,h,d,o){f=0===l&&void 0===s?c:p(f,c,l,h,d,o)},i),f},ne.propEach=b,ne.propReduce=function(t,p,s){var i=s;return b(t,function(f,c){i=0===c&&void 0===s?f:p(i,f,c)}),i},ne.featureEach=y,ne.featureReduce=function(t,p,s){var i=s;return y(t,function(f,c){i=0===c&&void 0===s?f:p(i,f,c)}),i},ne.coordAll=function(t){var p=[];return m(t,function(s){p.push(s)}),p},ne.geomEach=e,ne.geomReduce=function(t,p,s){var i=s;return e(t,function(f,c,l,h,d){i=0===c&&void 0===s?f:p(i,f,c,l,h,d)}),i},ne.flattenEach=r,ne.flattenReduce=function(t,p,s){var i=s;return r(t,function(f,c,l){i=0===c&&0===l&&void 0===s?f:p(i,f,c,l)}),i},ne.segmentEach=n,ne.segmentReduce=function(t,p,s){var i=s,f=!1;return n(t,function(c,l,h,d,o){i=!1===f&&void 0===s?c:p(i,c,l,h,d,o),f=!0}),i},ne.lineEach=a,ne.lineReduce=function(t,p,s){var i=s;return a(t,function(f,c,l,h){i=0===c&&void 0===s?f:p(i,f,c,l,h)}),i},ne.findSegment=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var s,i=p.featureIndex||0,f=p.multiFeatureIndex||0,c=p.geometryIndex||0,l=p.segmentIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,s=t.features[i].geometry;break;case"Feature":h=h||t.properties,s=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=t;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=d.length+l-1),g.lineString([d[l],d[l+1]],h,p);case"Polygon":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l-1),g.lineString([d[c][l],d[c][l+1]],h,p);case"MultiLineString":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l-1),g.lineString([d[f][l],d[f][l+1]],h,p);case"MultiPolygon":return f<0&&(f=d.length+f),c<0&&(c=d[f].length+c),l<0&&(l=d[f][c].length-l-1),g.lineString([d[f][c][l],d[f][c][l+1]],h,p)}throw new Error("geojson is invalid")},ne.findPoint=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var s,i=p.featureIndex||0,f=p.multiFeatureIndex||0,c=p.geometryIndex||0,l=p.coordIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,s=t.features[i].geometry;break;case"Feature":h=h||t.properties,s=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=t;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":return g.point(d,h,p);case"MultiPoint":return f<0&&(f=d.length+f),g.point(d[f],h,p);case"LineString":return l<0&&(l=d.length+l),g.point(d[l],h,p);case"Polygon":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l),g.point(d[c][l],h,p);case"MultiLineString":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l),g.point(d[f][l],h,p);case"MultiPolygon":return f<0&&(f=d.length+f),c<0&&(c=d[f].length+c),l<0&&(l=d[f][c].length-l),g.point(d[f][c][l],h,p)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(v,re,ne){"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var g=v("@turf/meta");function m(b){var y=[1/0,1/0,-1/0,-1/0];return g.coordEach(b,function(e){y[0]>e[0]&&(y[0]=e[0]),y[1]>e[1]&&(y[1]=e[1]),y[2]<e[0]&&(y[2]=e[0]),y[3]<e[1]&&(y[3]=e[1])}),y}m.default=m,ne.default=m},{"@turf/meta":66}],65:[function(v,re,ne){arguments[4][62][0].apply(ne,arguments)},{dup:62}],66:[function(v,re,ne){arguments[4][63][0].apply(ne,arguments)},{"@turf/helpers":65,dup:63}],67:[function(v,re,ne){"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var g=v("@turf/meta"),m=v("@turf/helpers");ne.default=function(b,y){void 0===y&&(y={});var e=0,r=0,n=0;return g.coordEach(b,function(a){e+=a[0],r+=a[1],n++}),m.point([e/n,r/n],y.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(v,re,ne){"use strict";function g(f,c,l){void 0===l&&(l={});var h={type:"Feature"};return(0===l.id||l.id)&&(h.id=l.id),l.bbox&&(h.bbox=l.bbox),h.properties=c||{},h.geometry=f,h}function m(f,c,l){return void 0===l&&(l={}),g({type:"Point",coordinates:f},c,l)}function b(f,c,l){void 0===l&&(l={});for(var h=0,d=f;h<d.length;h++){var o=d[h];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<o[o.length-1].length;x++)if(o[o.length-1][x]!==o[0][x])throw new Error("First and last Position are not equivalent.")}return g({type:"Polygon",coordinates:f},c,l)}function y(f,c,l){if(void 0===l&&(l={}),f.length<2)throw new Error("coordinates must be an array of two or more positions");return g({type:"LineString",coordinates:f},c,l)}function e(f,c){void 0===c&&(c={});var l={type:"FeatureCollection"};return c.id&&(l.id=c.id),c.bbox&&(l.bbox=c.bbox),l.features=f,l}function r(f,c,l){return void 0===l&&(l={}),g({type:"MultiLineString",coordinates:f},c,l)}function n(f,c,l){return void 0===l&&(l={}),g({type:"MultiPoint",coordinates:f},c,l)}function a(f,c,l){return void 0===l&&(l={}),g({type:"MultiPolygon",coordinates:f},c,l)}function t(f,c){void 0===c&&(c="kilometers");var l=ne.factors[c];if(!l)throw new Error(c+" units is invalid");return f*l}function p(f,c){void 0===c&&(c="kilometers");var l=ne.factors[c];if(!l)throw new Error(c+" units is invalid");return f/l}function s(f){return f%(2*Math.PI)*180/Math.PI}function i(f){return!isNaN(f)&&null!==f&&!Array.isArray(f)&&!/^\s*$/.test(f)}Object.defineProperty(ne,"__esModule",{value:!0}),ne.earthRadius=6371008.8,ne.factors={centimeters:100*ne.earthRadius,centimetres:100*ne.earthRadius,degrees:ne.earthRadius/111325,feet:3.28084*ne.earthRadius,inches:39.37*ne.earthRadius,kilometers:ne.earthRadius/1e3,kilometres:ne.earthRadius/1e3,meters:ne.earthRadius,metres:ne.earthRadius,miles:ne.earthRadius/1609.344,millimeters:1e3*ne.earthRadius,millimetres:1e3*ne.earthRadius,nauticalmiles:ne.earthRadius/1852,radians:1,yards:ne.earthRadius/1.0936},ne.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ne.earthRadius,yards:1/1.0936},ne.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ne.feature=g,ne.geometry=function(f,c,l){switch(void 0===l&&(l={}),f){case"Point":return m(c).geometry;case"LineString":return y(c).geometry;case"Polygon":return b(c).geometry;case"MultiPoint":return n(c).geometry;case"MultiLineString":return r(c).geometry;case"MultiPolygon":return a(c).geometry;default:throw new Error(f+" is invalid")}},ne.point=m,ne.points=function(f,c,l){return void 0===l&&(l={}),e(f.map(function(h){return m(h,c)}),l)},ne.polygon=b,ne.polygons=function(f,c,l){return void 0===l&&(l={}),e(f.map(function(h){return b(h,c)}),l)},ne.lineString=y,ne.lineStrings=function(f,c,l){return void 0===l&&(l={}),e(f.map(function(h){return y(h,c)}),l)},ne.featureCollection=e,ne.multiLineString=r,ne.multiPoint=n,ne.multiPolygon=a,ne.geometryCollection=function(f,c,l){return void 0===l&&(l={}),g({type:"GeometryCollection",geometries:f},c,l)},ne.round=function(f,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var l=Math.pow(10,c||0);return Math.round(f*l)/l},ne.radiansToLength=t,ne.lengthToRadians=p,ne.lengthToDegrees=function(f,c){return s(p(f,c))},ne.bearingToAzimuth=function(f){var c=f%360;return c<0&&(c+=360),c},ne.radiansToDegrees=s,ne.degreesToRadians=function(f){return f%360*Math.PI/180},ne.convertLength=function(f,c,l){if(void 0===c&&(c="kilometers"),void 0===l&&(l="kilometers"),!(f>=0))throw new Error("length must be a positive number");return t(p(f,c),l)},ne.convertArea=function(f,c,l){if(void 0===c&&(c="meters"),void 0===l&&(l="kilometers"),!(f>=0))throw new Error("area must be a positive number");var h=ne.areaFactors[c];if(!h)throw new Error("invalid original units");var d=ne.areaFactors[l];if(!d)throw new Error("invalid final units");return f/h*d},ne.isNumber=i,ne.isObject=function(f){return!!f&&f.constructor===Object},ne.validateBBox=function(f){if(!f)throw new Error("bbox is required");if(!Array.isArray(f))throw new Error("bbox must be an Array");if(4!==f.length&&6!==f.length)throw new Error("bbox must be an Array of 4 or 6 numbers");f.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},ne.validateId=function(f){if(!f)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof f))throw new Error("id must be a number or a string")},ne.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},ne.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},ne.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},ne.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},ne.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},ne.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},ne.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(v,re,ne){"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var g=v("@turf/helpers");function m(t,p,s){if(null!==t)for(var i,f,c,l,h,d,o,x,u=0,T=0,_=t.type,w="FeatureCollection"===_,M="Feature"===_,I=w?t.features.length:1,S=0;S<I;S++){h=(x=!!(o=w?t.features[S].geometry:M?t.geometry:t)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var R=0;R<h;R++){var O=0,C=0;if(null!==(l=x?o.geometries[R]:o)){d=l.coordinates;var D=l.type;switch(u=!s||"Polygon"!==D&&"MultiPolygon"!==D?0:1,D){case null:break;case"Point":if(!1===p(d,T,S,O,C))return!1;T++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<d.length;i++){if(!1===p(d[i],T,S,O,C))return!1;T++,"MultiPoint"===D&&O++}"LineString"===D&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<d.length;i++){for(f=0;f<d[i].length-u;f++){if(!1===p(d[i][f],T,S,O,C))return!1;T++}"MultiLineString"===D&&O++,"Polygon"===D&&C++}"Polygon"===D&&O++;break;case"MultiPolygon":for(i=0;i<d.length;i++){for(C=0,f=0;f<d[i].length;f++){for(c=0;c<d[i][f].length-u;c++){if(!1===p(d[i][f][c],T,S,O,C))return!1;T++}C++}O++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(!1===m(l.geometries[i],p,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(t,p){var s;switch(t.type){case"FeatureCollection":for(s=0;s<t.features.length&&!1!==p(t.features[s].properties,s);s++);break;case"Feature":p(t.properties,0)}}function y(t,p){if("Feature"===t.type)p(t,0);else if("FeatureCollection"===t.type)for(var s=0;s<t.features.length&&!1!==p(t.features[s],s);s++);}function e(t,p){var s,i,f,c,l,h,d,o,x,u,T=0,_="FeatureCollection"===t.type,w="Feature"===t.type,M=_?t.features.length:1;for(s=0;s<M;s++){for(o=_?t.features[s].properties:w?t.properties:{},x=_?t.features[s].bbox:w?t.bbox:void 0,u=_?t.features[s].id:w?t.id:void 0,l=(d=!!(h=_?t.features[s].geometry:w?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1,f=0;f<l;f++)if(null!==(c=d?h.geometries[f]:h))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===p(c,T,o,x,u))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===p(c.geometries[i],T,o,x,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===p(null,T,o,x,u))return!1;T++}}function r(t,p){e(t,function(s,i,f,c,l){var h,d=null===s?null:s.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return!1!==p(g.feature(s,f,{bbox:c,id:l}),i,0)&&void 0}switch(d){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var o=0;o<s.coordinates.length;o++)if(!1===p(g.feature({type:h,coordinates:s.coordinates[o]},f),i,o))return!1})}function n(t,p){r(t,function(s,i,f){var c=0;if(s.geometry){var l=s.geometry.type;if("Point"!==l&&"MultiPoint"!==l){var h,d=0,o=0,x=0;return!1!==m(s,function(u,T,_,w,M){if(void 0===h||i>d||w>o||M>x)return h=u,d=i,o=w,x=M,void(c=0);var I=g.lineString([h,u],s.properties);if(!1===p(I,i,f,M,c))return!1;c++,h=u})&&void 0}}})}function a(t,p){if(!t)throw new Error("geojson is required");r(t,function(s,i,f){if(null!==s.geometry){var l=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===p(s,i,f,0,0))return!1;break;case"Polygon":for(var h=0;h<l.length;h++)if(!1===p(g.lineString(l[h],s.properties),i,f,h))return!1}}})}ne.coordEach=m,ne.coordReduce=function(t,p,s,i){var f=s;return m(t,function(c,l,h,d,o){f=0===l&&void 0===s?c:p(f,c,l,h,d,o)},i),f},ne.propEach=b,ne.propReduce=function(t,p,s){var i=s;return b(t,function(f,c){i=0===c&&void 0===s?f:p(i,f,c)}),i},ne.featureEach=y,ne.featureReduce=function(t,p,s){var i=s;return y(t,function(f,c){i=0===c&&void 0===s?f:p(i,f,c)}),i},ne.coordAll=function(t){var p=[];return m(t,function(s){p.push(s)}),p},ne.geomEach=e,ne.geomReduce=function(t,p,s){var i=s;return e(t,function(f,c,l,h,d){i=0===c&&void 0===s?f:p(i,f,c,l,h,d)}),i},ne.flattenEach=r,ne.flattenReduce=function(t,p,s){var i=s;return r(t,function(f,c,l){i=0===c&&0===l&&void 0===s?f:p(i,f,c,l)}),i},ne.segmentEach=n,ne.segmentReduce=function(t,p,s){var i=s,f=!1;return n(t,function(c,l,h,d,o){i=!1===f&&void 0===s?c:p(i,c,l,h,d,o),f=!0}),i},ne.lineEach=a,ne.lineReduce=function(t,p,s){var i=s;return a(t,function(f,c,l,h){i=0===c&&void 0===s?f:p(i,f,c,l,h)}),i},ne.findSegment=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var s,i=p.featureIndex||0,f=p.multiFeatureIndex||0,c=p.geometryIndex||0,l=p.segmentIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,s=t.features[i].geometry;break;case"Feature":h=h||t.properties,s=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=t;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=d.length+l-1),g.lineString([d[l],d[l+1]],h,p);case"Polygon":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l-1),g.lineString([d[c][l],d[c][l+1]],h,p);case"MultiLineString":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l-1),g.lineString([d[f][l],d[f][l+1]],h,p);case"MultiPolygon":return f<0&&(f=d.length+f),c<0&&(c=d[f].length+c),l<0&&(l=d[f][c].length-l-1),g.lineString([d[f][c][l],d[f][c][l+1]],h,p)}throw new Error("geojson is invalid")},ne.findPoint=function(t,p){if(!g.isObject(p=p||{}))throw new Error("options is invalid");var s,i=p.featureIndex||0,f=p.multiFeatureIndex||0,c=p.geometryIndex||0,l=p.coordIndex||0,h=p.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),h=h||t.features[i].properties,s=t.features[i].geometry;break;case"Feature":h=h||t.properties,s=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=t;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var d=s.coordinates;switch(s.type){case"Point":return g.point(d,h,p);case"MultiPoint":return f<0&&(f=d.length+f),g.point(d[f],h,p);case"LineString":return l<0&&(l=d.length+l),g.point(d[l],h,p);case"Polygon":return c<0&&(c=d.length+c),l<0&&(l=d[c].length+l),g.point(d[c][l],h,p);case"MultiLineString":return f<0&&(f=d.length+f),l<0&&(l=d[f].length+l),g.point(d[f][l],h,p);case"MultiPolygon":return f<0&&(f=d.length+f),c<0&&(c=d[f].length+c),l<0&&(l=d[f][c].length-l),g.point(d[f][c][l],h,p)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(v,re,ne){re.exports=function(g){var m=0,b=0,y=0,e=0;return g.map(function(r){var n=(r=r.slice())[0],a=n.toUpperCase();if(n!=a)switch(r[0]=a,n){case"a":r[6]+=y,r[7]+=e;break;case"v":r[1]+=e;break;case"h":r[1]+=y;break;default:for(var t=1;t<r.length;)r[t++]+=y,r[t++]+=e}switch(a){case"Z":y=m,e=b;break;case"H":y=r[1];break;case"V":e=r[1];break;case"M":y=m=r[1],e=b=r[2];break;default:y=r[r.length-2],e=r[r.length-1]}return r})}},{}],71:[function(v,re,ne){"use strict";re.exports=function(g,m){if(!g||null==g.length)throw Error("Argument should be an array");m=null==m?1:Math.floor(m);for(var b=Array(2*m),y=0;y<m;y++){for(var e=-1/0,r=1/0,n=y,a=g.length;n<a;n+=m)g[n]>e&&(e=g[n]),g[n]<r&&(r=g[n]);b[y]=r,b[m+y]=e}return b}},{}],72:[function(v,re,ne){"use strict";re.exports=function(g,m,b){if("function"==typeof Array.prototype.findIndex)return g.findIndex(m,b);if("function"!=typeof m)throw new TypeError("predicate must be a function");var y=Object(g),e=y.length;if(0===e)return-1;for(var r=0;r<e;r++)if(m.call(b,y[r],r,y))return r;return-1}},{}],73:[function(v,re,ne){"use strict";var g=v("array-bounds");re.exports=function(m,b,y){if(!m||null==m.length)throw Error("Argument should be an array");null==b&&(b=1),null==y&&(y=g(m,b));for(var e=0;e<b;e++){var r=y[b+e],n=y[e],a=e,t=m.length;if(r===1/0&&n===-1/0)for(a=e;a<t;a+=b)m[a]=m[a]===r?1:m[a]===n?0:.5;else if(r===1/0)for(a=e;a<t;a+=b)m[a]=m[a]===r?1:0;else if(n===-1/0)for(a=e;a<t;a+=b)m[a]=m[a]===n?0:1;else{var p=r-n;for(a=e;a<t;a+=b)isNaN(m[a])||(m[a]=0===p?.5:(m[a]-n)/p)}}return m}},{"array-bounds":71}],74:[function(v,re,ne){re.exports=function(g,m){var b="number"==typeof g,y="number"==typeof m;b&&!y?(m=g,g=0):b||y||(g=0,m=0);var e=(m|=0)-(g|=0);if(e<0)throw new Error("array length must be positive");for(var r=new Array(e),n=0,a=g;n<e;n++,a++)r[n]=a;return r}},{}],75:[function(v,re,ne){(function(g){(function(){"use strict";var m=v("object-assign");function b(w,M){if(w===M)return 0;for(var I=w.length,S=M.length,R=0,O=Math.min(I,S);R<O;++R)if(w[R]!==M[R]){I=w[R],S=M[R];break}return I<S?-1:S<I?1:0}function y(w){return g.Buffer&&"function"==typeof g.Buffer.isBuffer?g.Buffer.isBuffer(w):!(null==w||!w._isBuffer)}var e=v("util/"),r=Object.prototype.hasOwnProperty,n=Array.prototype.slice,a="foo"===function(){}.name;function t(w){return Object.prototype.toString.call(w)}function p(w){return!y(w)&&"function"==typeof g.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(w):!!w&&(w instanceof DataView||!!(w.buffer&&w.buffer instanceof ArrayBuffer)))}var s=re.exports=d,i=/\s*function\s+([^\(\s]*)\s*/;function f(w){if(e.isFunction(w)){if(a)return w.name;var M=w.toString().match(i);return M&&M[1]}}function c(w,M){return"string"==typeof w?w.length<M?w:w.slice(0,M):w}function l(w){if(a||!e.isFunction(w))return e.inspect(w);var M=f(w);return"[Function"+(M?": "+M:"")+"]"}function h(w,M,I,S,R){throw new s.AssertionError({message:I,actual:w,expected:M,operator:S,stackStartFunction:R})}function d(w,M){w||h(w,!0,M,"==",s.ok)}function o(w,M,I,S){if(w===M)return!0;if(y(w)&&y(M))return 0===b(w,M);if(e.isDate(w)&&e.isDate(M))return w.getTime()===M.getTime();if(e.isRegExp(w)&&e.isRegExp(M))return w.source===M.source&&w.global===M.global&&w.multiline===M.multiline&&w.lastIndex===M.lastIndex&&w.ignoreCase===M.ignoreCase;if(null!==w&&"object"==typeof w||null!==M&&"object"==typeof M){if(p(w)&&p(M)&&t(w)===t(M)&&!(w instanceof Float32Array||w instanceof Float64Array))return 0===b(new Uint8Array(w.buffer),new Uint8Array(M.buffer));if(y(w)!==y(M))return!1;var R=(S=S||{actual:[],expected:[]}).actual.indexOf(w);return-1!==R&&R===S.expected.indexOf(M)||(S.actual.push(w),S.expected.push(M),function(O,C,D,B){if(null==O||null==C)return!1;if(e.isPrimitive(O)||e.isPrimitive(C))return O===C;if(D&&Object.getPrototypeOf(O)!==Object.getPrototypeOf(C))return!1;var z=x(O),Y=x(C);if(z&&!Y||!z&&Y)return!1;if(z)return o(O=n.call(O),C=n.call(C),D);var G,J,te=_(O),X=_(C);if(te.length!==X.length)return!1;for(te.sort(),X.sort(),J=te.length-1;J>=0;J--)if(te[J]!==X[J])return!1;for(J=te.length-1;J>=0;J--)if(!o(O[G=te[J]],C[G],D,B))return!1;return!0}(w,M,I,S))}return I?w===M:w==M}function x(w){return"[object Arguments]"==Object.prototype.toString.call(w)}function u(w,M){if(!w||!M)return!1;if("[object RegExp]"==Object.prototype.toString.call(M))return M.test(w);try{if(w instanceof M)return!0}catch{}return!Error.isPrototypeOf(M)&&!0===M.call({},w)}function T(w,M,I,S){var R;if("function"!=typeof M)throw new TypeError('"block" argument must be a function');"string"==typeof I&&(S=I,I=null),R=function(D){var B;try{D()}catch(z){B=z}return B}(M),S=(I&&I.name?" ("+I.name+").":".")+(S?" "+S:"."),w&&!R&&h(R,I,"Missing expected exception"+S);var O="string"==typeof S,C=!w&&R&&!I;if((!w&&e.isError(R)&&O&&u(R,I)||C)&&h(R,I,"Got unwanted exception"+S),w&&R&&I&&!u(R,I)||!w&&R)throw R}s.AssertionError=function(w){this.name="AssertionError",this.actual=w.actual,this.expected=w.expected,this.operator=w.operator,w.message?(this.message=w.message,this.generatedMessage=!1):(this.message=c(l(this.actual),128)+" "+this.operator+" "+c(l(this.expected),128),this.generatedMessage=!0);var M=w.stackStartFunction||h;if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var I=new Error;if(I.stack){var S=I.stack,R=f(M),O=S.indexOf("\n"+R);if(O>=0){var C=S.indexOf("\n",O+1);S=S.substring(C+1)}this.stack=S}}},e.inherits(s.AssertionError,Error),s.fail=h,s.ok=d,s.equal=function(w,M,I){w!=M&&h(w,M,I,"==",s.equal)},s.notEqual=function(w,M,I){w==M&&h(w,M,I,"!=",s.notEqual)},s.deepEqual=function(w,M,I){o(w,M,!1)||h(w,M,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(w,M,I){o(w,M,!0)||h(w,M,I,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(w,M,I){o(w,M,!1)&&h(w,M,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function w(M,I,S){o(M,I,!0)&&h(M,I,S,"notDeepStrictEqual",w)},s.strictEqual=function(w,M,I){w!==M&&h(w,M,I,"===",s.strictEqual)},s.notStrictEqual=function(w,M,I){w===M&&h(w,M,I,"!==",s.notStrictEqual)},s.throws=function(w,M,I){T(!0,w,M,I)},s.doesNotThrow=function(w,M,I){T(!1,w,M,I)},s.ifError=function(w){if(w)throw w},s.strict=m(function w(M,I){M||h(M,!0,I,"==",w)},s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var _=Object.keys||function(w){var M=[];for(var I in w)r.call(w,I)&&M.push(I);return M}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(v,re,ne){re.exports="function"==typeof Object.create?function(g,m){g.super_=m,g.prototype=Object.create(m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}})}:function(g,m){g.super_=m;var b=function(){};b.prototype=m.prototype,g.prototype=new b,g.prototype.constructor=g}},{}],77:[function(v,re,ne){re.exports=function(g){return g&&"object"==typeof g&&"function"==typeof g.copy&&"function"==typeof g.fill&&"function"==typeof g.readUInt8}},{}],78:[function(v,re,ne){(function(g,m){(function(){var b=/%[sdj%]/g;ne.format=function(O){if(!h(O)){for(var C=[],D=0;D<arguments.length;D++)C.push(r(arguments[D]));return C.join(" ")}D=1;for(var B=arguments,z=B.length,Y=String(O).replace(b,function(J){if("%%"===J)return"%";if(D>=z)return J;switch(J){case"%s":return String(B[D++]);case"%d":return Number(B[D++]);case"%j":try{return JSON.stringify(B[D++])}catch{return"[Circular]"}default:return J}}),G=B[D];D<z;G=B[++D])c(G)||!x(G)?Y+=" "+G:Y+=" "+r(G);return Y},ne.deprecate=function(O,C){if(d(m.process))return function(){return ne.deprecate(O,C).apply(this,arguments)};if(!0===g.noDeprecation)return O;var D=!1;return function(){if(!D){if(g.throwDeprecation)throw new Error(C);g.traceDeprecation?console.trace(C):console.error(C),D=!0}return O.apply(this,arguments)}};var y,e={};function r(O,C){var D={seen:[],stylize:a};return arguments.length>=3&&(D.depth=arguments[2]),arguments.length>=4&&(D.colors=arguments[3]),f(C)?D.showHidden=C:C&&ne._extend(D,C),d(D.showHidden)&&(D.showHidden=!1),d(D.depth)&&(D.depth=2),d(D.colors)&&(D.colors=!1),d(D.customInspect)&&(D.customInspect=!0),D.colors&&(D.stylize=n),t(D,O,D.depth)}function n(O,C){var D=r.styles[C];return D?"\x1b["+r.colors[D][0]+"m"+O+"\x1b["+r.colors[D][1]+"m":O}function a(O,C){return O}function t(O,C,D){if(O.customInspect&&C&&_(C.inspect)&&C.inspect!==ne.inspect&&(!C.constructor||C.constructor.prototype!==C)){var B=C.inspect(D,O);return h(B)||(B=t(O,B,D)),B}var z=function(U,V){if(d(V))return U.stylize("undefined","undefined");if(h(V)){var q="'"+JSON.stringify(V).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return U.stylize(q,"string")}return l(V)?U.stylize(""+V,"number"):f(V)?U.stylize(""+V,"boolean"):c(V)?U.stylize("null","null"):void 0}(O,C);if(z)return z;var V,Y=Object.keys(C),G=(V={},Y.forEach(function(q,ie){V[q]=!0}),V);if(O.showHidden&&(Y=Object.getOwnPropertyNames(C)),T(C)&&(Y.indexOf("message")>=0||Y.indexOf("description")>=0))return p(C);if(0===Y.length){if(_(C))return O.stylize("[Function"+(C.name?": "+C.name:"")+"]","special");if(o(C))return O.stylize(RegExp.prototype.toString.call(C),"regexp");if(u(C))return O.stylize(Date.prototype.toString.call(C),"date");if(T(C))return p(C)}var te,X="",K=!1,ae=["{","}"];return i(C)&&(K=!0,ae=["[","]"]),_(C)&&(X=" [Function"+(C.name?": "+C.name:"")+"]"),o(C)&&(X=" "+RegExp.prototype.toString.call(C)),u(C)&&(X=" "+Date.prototype.toUTCString.call(C)),T(C)&&(X=" "+p(C)),0!==Y.length||K&&0!=C.length?D<0?o(C)?O.stylize(RegExp.prototype.toString.call(C),"regexp"):O.stylize("[Object]","special"):(O.seen.push(C),te=K?function(U,V,q,ie,H){for(var ee=[],Q=0,oe=V.length;Q<oe;++Q)R(V,String(Q))?ee.push(s(U,V,q,ie,String(Q),!0)):ee.push("");return H.forEach(function(le){le.match(/^\d+$/)||ee.push(s(U,V,q,ie,le,!0))}),ee}(O,C,D,G,Y):Y.map(function(U){return s(O,C,D,G,U,K)}),O.seen.pop(),function(U,V,q){return U.reduce(function(ie,H){return H.indexOf("\n"),ie+H.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?q[0]+(""===V?"":V+"\n ")+" "+U.join(",\n  ")+" "+q[1]:q[0]+V+" "+U.join(", ")+" "+q[1]}(te,X,ae)):ae[0]+X+ae[1]}function p(O){return"["+Error.prototype.toString.call(O)+"]"}function s(O,C,D,B,z,Y){var G,J,te;if((te=Object.getOwnPropertyDescriptor(C,z)||{value:C[z]}).get?J=O.stylize(te.set?"[Getter/Setter]":"[Getter]","special"):te.set&&(J=O.stylize("[Setter]","special")),R(B,z)||(G="["+z+"]"),J||(O.seen.indexOf(te.value)<0?(J=c(D)?t(O,te.value,null):t(O,te.value,D-1)).indexOf("\n")>-1&&(J=Y?J.split("\n").map(function(X){return"  "+X}).join("\n").substr(2):"\n"+J.split("\n").map(function(X){return"   "+X}).join("\n")):J=O.stylize("[Circular]","special")),d(G)){if(Y&&z.match(/^\d+$/))return J;(G=JSON.stringify(""+z)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(G=G.substr(1,G.length-2),G=O.stylize(G,"name")):(G=G.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),G=O.stylize(G,"string"))}return G+": "+J}function i(O){return Array.isArray(O)}function f(O){return"boolean"==typeof O}function c(O){return null===O}function l(O){return"number"==typeof O}function h(O){return"string"==typeof O}function d(O){return void 0===O}function o(O){return x(O)&&"[object RegExp]"===w(O)}function x(O){return"object"==typeof O&&null!==O}function u(O){return x(O)&&"[object Date]"===w(O)}function T(O){return x(O)&&("[object Error]"===w(O)||O instanceof Error)}function _(O){return"function"==typeof O}function w(O){return Object.prototype.toString.call(O)}function M(O){return O<10?"0"+O.toString(10):O.toString(10)}ne.debuglog=function(O){if(d(y)&&(y=g.env.NODE_DEBUG||""),O=O.toUpperCase(),!e[O])if(new RegExp("\\b"+O+"\\b","i").test(y)){var C=g.pid;e[O]=function(){var D=ne.format.apply(ne,arguments);console.error("%s %d: %s",O,C,D)}}else e[O]=function(){};return e[O]},ne.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ne.isArray=i,ne.isBoolean=f,ne.isNull=c,ne.isNullOrUndefined=function(O){return null==O},ne.isNumber=l,ne.isString=h,ne.isSymbol=function(O){return"symbol"==typeof O},ne.isUndefined=d,ne.isRegExp=o,ne.isObject=x,ne.isDate=u,ne.isError=T,ne.isFunction=_,ne.isPrimitive=function(O){return null===O||"boolean"==typeof O||"number"==typeof O||"string"==typeof O||"symbol"==typeof O||void 0===O},ne.isBuffer=v("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(){var O=new Date,C=[M(O.getHours()),M(O.getMinutes()),M(O.getSeconds())].join(":");return[O.getDate(),I[O.getMonth()],C].join(" ")}function R(O,C){return Object.prototype.hasOwnProperty.call(O,C)}ne.log=function(){console.log("%s - %s",S(),ne.format.apply(ne,arguments))},ne.inherits=v("inherits"),ne._extend=function(O,C){if(!C||!x(C))return O;for(var D=Object.keys(C),B=D.length;B--;)O[D[B]]=C[D[B]];return O}}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(v,re,ne){"use strict";ne.byteLength=function(t){var p=n(t),i=p[1];return 3*(p[0]+i)/4-i},ne.toByteArray=function(t){var p,s,u,i=n(t),f=i[0],c=i[1],l=new b(3*(f+(u=c))/4-u),h=0,d=c>0?f-4:f;for(s=0;s<d;s+=4)p=m[t.charCodeAt(s)]<<18|m[t.charCodeAt(s+1)]<<12|m[t.charCodeAt(s+2)]<<6|m[t.charCodeAt(s+3)],l[h++]=p>>16&255,l[h++]=p>>8&255,l[h++]=255&p;return 2===c&&(p=m[t.charCodeAt(s)]<<2|m[t.charCodeAt(s+1)]>>4,l[h++]=255&p),1===c&&(p=m[t.charCodeAt(s)]<<10|m[t.charCodeAt(s+1)]<<4|m[t.charCodeAt(s+2)]>>2,l[h++]=p>>8&255,l[h++]=255&p),l},ne.fromByteArray=function(t){for(var p,s=t.length,i=s%3,f=[],c=0,l=s-i;c<l;c+=16383)f.push(a(t,c,c+16383>l?l:c+16383));return 1===i?f.push(g[(p=t[s-1])>>2]+g[p<<4&63]+"=="):2===i&&f.push(g[(p=(t[s-2]<<8)+t[s-1])>>10]+g[p>>4&63]+g[p<<2&63]+"="),f.join("")};for(var g=[],m=[],b=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=y.length;e<r;++e)g[e]=y[e],m[y.charCodeAt(e)]=e;function n(t){var p=t.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=t.indexOf("=");return-1===s&&(s=p),[s,s===p?0:4-s%4]}function a(t,p,s){for(var f,c=[],l=p;l<s;l+=3)c.push(g[(f=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(255&t[l+2]))>>18&63]+g[f>>12&63]+g[f>>6&63]+g[63&f]);return c.join("")}m["-".charCodeAt(0)]=62,m["_".charCodeAt(0)]=63},{}],80:[function(v,re,ne){"use strict";function g(n,a,t,p,s){for(var i=s+1;p<=s;){var f=p+s>>>1,c=n[f];(void 0!==t?t(c,a):c-a)>=0?(i=f,s=f-1):p=f+1}return i}function m(n,a,t,p,s){for(var i=s+1;p<=s;){var f=p+s>>>1,c=n[f];(void 0!==t?t(c,a):c-a)>0?(i=f,s=f-1):p=f+1}return i}function b(n,a,t,p,s){for(var i=p-1;p<=s;){var f=p+s>>>1,c=n[f];(void 0!==t?t(c,a):c-a)<0?(i=f,p=f+1):s=f-1}return i}function y(n,a,t,p,s){for(var i=p-1;p<=s;){var f=p+s>>>1,c=n[f];(void 0!==t?t(c,a):c-a)<=0?(i=f,p=f+1):s=f-1}return i}function e(n,a,t,p,s){for(;p<=s;){var i=p+s>>>1,f=n[i],c=void 0!==t?t(f,a):f-a;if(0===c)return i;c<=0?p=i+1:s=i-1}return-1}function r(n,a,t,p,s,i){return"function"==typeof t?i(n,a,t,void 0===p?0:0|p,void 0===s?n.length-1:0|s):i(n,a,void 0,void 0===t?0:0|t,void 0===p?n.length-1:0|p)}re.exports={ge:function(n,a,t,p,s){return r(n,a,t,p,s,g)},gt:function(n,a,t,p,s){return r(n,a,t,p,s,m)},lt:function(n,a,t,p,s){return r(n,a,t,p,s,b)},le:function(n,a,t,p,s){return r(n,a,t,p,s,y)},eq:function(n,a,t,p,s){return r(n,a,t,p,s,e)}}},{}],81:[function(v,re,ne){"use strict";function g(b){var y=32;return(b&=-b)&&y--,65535&b&&(y-=16),16711935&b&&(y-=8),252645135&b&&(y-=4),858993459&b&&(y-=2),1431655765&b&&(y-=1),y}ne.INT_BITS=32,ne.INT_MAX=2147483647,ne.INT_MIN=-1<<31,ne.sign=function(b){return(b>0)-(b<0)},ne.abs=function(b){var y=b>>31;return(b^y)-y},ne.min=function(b,y){return y^(b^y)&-(b<y)},ne.max=function(b,y){return b^(b^y)&-(b<y)},ne.isPow2=function(b){return!(b&b-1||!b)},ne.log2=function(b){var y,e;return y=(b>65535)<<4,y|=e=((b>>>=y)>255)<<3,y|=e=((b>>>=e)>15)<<2,(y|=e=((b>>>=e)>3)<<1)|(b>>>=e)>>1},ne.log10=function(b){return b>=1e9?9:b>=1e8?8:b>=1e7?7:b>=1e6?6:b>=1e5?5:b>=1e4?4:b>=1e3?3:b>=100?2:b>=10?1:0},ne.popCount=function(b){return 16843009*((b=(858993459&(b-=b>>>1&1431655765))+(b>>>2&858993459))+(b>>>4)&252645135)>>>24},ne.countTrailingZeros=g,ne.nextPow2=function(b){return b+=0===b,--b,b|=b>>>1,b|=b>>>2,b|=b>>>4,1+((b|=b>>>8)|b>>>16)},ne.prevPow2=function(b){return b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,(b|=b>>>16)-(b>>>1)},ne.parity=function(b){return b^=b>>>16,b^=b>>>8,b^=b>>>4,27030>>>(b&=15)&1};var m=new Array(256);(function(b){for(var y=0;y<256;++y){var e=y,r=y,n=7;for(e>>>=1;e;e>>>=1)r<<=1,r|=1&e,--n;b[y]=r<<n&255}})(m),ne.reverse=function(b){return m[255&b]<<24|m[b>>>8&255]<<16|m[b>>>16&255]<<8|m[b>>>24&255]},ne.interleave2=function(b,y){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y&=65535)|y<<8))|y<<4))|y<<2))|y<<1))<<1},ne.deinterleave2=function(b,y){return(b=65535&((b=16711935&((b=252645135&((b=858993459&((b=b>>>y&1431655765)|b>>>1))|b>>>2))|b>>>4))|b>>>16))<<16>>16},ne.interleave3=function(b,y,e){return b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2),(b|=(y=1227133513&((y=3272356035&((y=251719695&((y=4278190335&((y&=1023)|y<<16))|y<<8))|y<<4))|y<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},ne.deinterleave3=function(b,y){return(b=1023&((b=4278190335&((b=251719695&((b=3272356035&((b=b>>>y&1227133513)|b>>>2))|b>>>4))|b>>>8))|b>>>16))<<22>>22},ne.nextCombination=function(b){var y=b|b-1;return y+1|(~y&-~y)-1>>>g(b)+1}},{}],82:[function(v,re,ne){"use strict";var g=v("clamp");re.exports=function(e,r){r||(r={});var n,a,t,p,s,i,c,h,d,o=r.cutoff??.25,x=r.radius??8,u=r.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!r.width||!r.height)throw Error("For raw data width and height should be provided by options");n=r.width,a=r.height,p=e,i=r.stride?r.stride:Math.floor(e.length/n/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(p=(c=e).getContext("2d").getImageData(0,0,n=c.width,a=c.height).data,i=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(p=e.getImageData(0,0,n=(c=e.canvas).width,a=c.height).data,i=4):window.ImageData&&e instanceof window.ImageData&&(n=e.width,a=e.height,p=e.data,i=4);if(t=Math.max(n,a),window.Uint8ClampedArray&&p instanceof window.Uint8ClampedArray||window.Uint8Array&&p instanceof window.Uint8Array)for(s=p,p=Array(n*a),h=0,d=s.length;h<d;h++)p[h]=s[h*i+u]/255;else if(1!==i)throw Error("Raw data can have only 1 value per pixel");var T=Array(n*a),_=Array(n*a),w=Array(t),M=Array(t),I=Array(t+1),S=Array(t);for(h=0,d=n*a;h<d;h++){var R=p[h];T[h]=1===R?0:0===R?m:Math.pow(Math.max(0,.5-R),2),_[h]=1===R?m:0===R?0:Math.pow(Math.max(0,R-.5),2)}b(T,n,a,w,M,S,I),b(_,n,a,w,M,S,I);var O=window.Float32Array?new Float32Array(n*a):new Array(n*a);for(h=0,d=n*a;h<d;h++)O[h]=g(1-((T[h]-_[h])/x+o),0,1);return O};var m=1e20;function b(e,r,n,a,t,p,s){for(var i=0;i<r;i++){for(var f=0;f<n;f++)a[f]=e[f*r+i];for(y(a,t,p,s,n),f=0;f<n;f++)e[f*r+i]=t[f]}for(f=0;f<n;f++){for(i=0;i<r;i++)a[i]=e[f*r+i];for(y(a,t,p,s,r),i=0;i<r;i++)e[f*r+i]=Math.sqrt(t[i])}}function y(e,r,n,a,t){n[0]=0,a[0]=-m,a[1]=+m;for(var p=1,s=0;p<t;p++){for(var i=(e[p]+p*p-(e[n[s]]+n[s]*n[s]))/(2*p-2*n[s]);i<=a[s];)s--,i=(e[p]+p*p-(e[n[s]]+n[s]*n[s]))/(2*p-2*n[s]);n[++s]=p,a[s]=i,a[s+1]=+m}for(p=0,s=0;p<t;p++){for(;a[s+1]<p;)s++;r[p]=(p-n[s])*(p-n[s])+e[n[s]]}}},{clamp:86}],83:[function(v,re,ne){},{}],84:[function(v,re,ne){"use strict";var g,m="object"==typeof Reflect?Reflect:null,b=m&&"function"==typeof m.apply?m.apply:function(l,h,d){return Function.prototype.apply.call(l,h,d)};g=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)};var y=Number.isNaN||function(l){return l!=l};function e(){e.init.call(this)}re.exports=e,re.exports.once=function(l,h){return new Promise(function(d,o){function x(){void 0!==u&&l.removeListener("error",u),d([].slice.call(arguments))}var u;"error"!==h&&(u=function(T){l.removeListener(h,x),o(T)},l.once("error",u)),l.once(h,x)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function n(l){if("function"!=typeof l)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function a(l){return void 0===l._maxListeners?e.defaultMaxListeners:l._maxListeners}function t(l,h,d,o){var x,u,T;if(n(d),void 0===(u=l._events)?(u=l._events=Object.create(null),l._eventsCount=0):(void 0!==u.newListener&&(l.emit("newListener",h,d.listener?d.listener:d),u=l._events),T=u[h]),void 0===T)T=u[h]=d,++l._eventsCount;else if("function"==typeof T?T=u[h]=o?[d,T]:[T,d]:o?T.unshift(d):T.push(d),(x=a(l))>0&&T.length>x&&!T.warned){T.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=l,w.type=h,w.count=T.length,console&&console.warn&&console.warn(w)}return l}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(l,h,d){var o={fired:!1,wrapFn:void 0,target:l,type:h,listener:d},x=p.bind(o);return x.listener=d,o.wrapFn=x,x}function i(l,h,d){var o=l._events;if(void 0===o)return[];var x=o[h];return void 0===x?[]:"function"==typeof x?d?[x.listener||x]:[x]:d?function(u){for(var T=new Array(u.length),_=0;_<T.length;++_)T[_]=u[_].listener||u[_];return T}(x):c(x,x.length)}function f(l){var h=this._events;if(void 0!==h){var d=h[l];if("function"==typeof d)return 1;if(void 0!==d)return d.length}return 0}function c(l,h){for(var d=new Array(h),o=0;o<h;++o)d[o]=l[o];return d}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(l){if("number"!=typeof l||l<0||y(l))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");r=l}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(l){if("number"!=typeof l||l<0||y(l))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},e.prototype.getMaxListeners=function(){return a(this)},e.prototype.emit=function(l){for(var h=[],d=1;d<arguments.length;d++)h.push(arguments[d]);var o="error"===l,x=this._events;if(void 0!==x)o=o&&void 0===x.error;else if(!o)return!1;if(o){var u;if(h.length>0&&(u=h[0]),u instanceof Error)throw u;var T=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw T.context=u,T}var _=x[l];if(void 0===_)return!1;if("function"==typeof _)b(_,this,h);else{var w=_.length,M=c(_,w);for(d=0;d<w;++d)b(M[d],this,h)}return!0},e.prototype.on=e.prototype.addListener=function(l,h){return t(this,l,h,!1)},e.prototype.prependListener=function(l,h){return t(this,l,h,!0)},e.prototype.once=function(l,h){return n(h),this.on(l,s(this,l,h)),this},e.prototype.prependOnceListener=function(l,h){return n(h),this.prependListener(l,s(this,l,h)),this},e.prototype.off=e.prototype.removeListener=function(l,h){var d,o,x,u,T;if(n(h),void 0===(o=this._events))return this;if(void 0===(d=o[l]))return this;if(d===h||d.listener===h)0==--this._eventsCount?this._events=Object.create(null):(delete o[l],o.removeListener&&this.emit("removeListener",l,d.listener||h));else if("function"!=typeof d){for(x=-1,u=d.length-1;u>=0;u--)if(d[u]===h||d[u].listener===h){T=d[u].listener,x=u;break}if(x<0)return this;0===x?d.shift():function(_,w){for(;w+1<_.length;w++)_[w]=_[w+1];_.pop()}(d,x),1===d.length&&(o[l]=d[0]),void 0!==o.removeListener&&this.emit("removeListener",l,T||h)}return this},e.prototype.removeAllListeners=function(l){var h,d,o;if(void 0===(d=this._events))return this;if(void 0===d.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==d[l]&&(0==--this._eventsCount?this._events=Object.create(null):delete d[l]),this;if(0===arguments.length){var x,u=Object.keys(d);for(o=0;o<u.length;++o)"removeListener"!==(x=u[o])&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(h=d[l]))this.removeListener(l,h);else if(void 0!==h)for(o=h.length-1;o>=0;o--)this.removeListener(l,h[o]);return this},e.prototype.listeners=function(l){return i(this,l,!0)},e.prototype.rawListeners=function(l){return i(this,l,!1)},e.listenerCount=function(l,h){return"function"==typeof l.listenerCount?l.listenerCount(h):f.call(l,h)},e.prototype.listenerCount=f,e.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},{}],85:[function(v,re,ne){(function(g){(function(){"use strict";var m=v("base64-js"),b=v("ieee754");function y(U){if(U>2147483647)throw new RangeError('The value "'+U+'" is invalid for option "size"');var V=new Uint8Array(U);return V.__proto__=e.prototype,V}function e(U,V,q){if("number"==typeof U){if("string"==typeof V)throw new TypeError('The "string" argument must be of type string. Received type number');return a(U)}return r(U,V,q)}function r(U,V,q){if("string"==typeof U)return function(ee,Q){if("string"==typeof Q&&""!==Q||(Q="utf8"),!e.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);var oe=0|s(ee,Q),le=y(oe),de=le.write(ee,Q);return de!==oe&&(le=le.slice(0,de)),le}(U,V);if(ArrayBuffer.isView(U))return t(U);if(null==U)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(K(U,ArrayBuffer)||U&&K(U.buffer,ArrayBuffer))return function(ee,Q,oe){if(Q<0||ee.byteLength<Q)throw new RangeError('"offset" is outside of buffer bounds');if(ee.byteLength<Q+(oe||0))throw new RangeError('"length" is outside of buffer bounds');var le;return(le=void 0===Q&&void 0===oe?new Uint8Array(ee):void 0===oe?new Uint8Array(ee,Q):new Uint8Array(ee,Q,oe)).__proto__=e.prototype,le}(U,V,q);if("number"==typeof U)throw new TypeError('The "value" argument must not be of type number. Received type number');var ie=U.valueOf&&U.valueOf();if(null!=ie&&ie!==U)return e.from(ie,V,q);var H=function(ee){if(e.isBuffer(ee)){var Q=0|p(ee.length),oe=y(Q);return 0===oe.length||ee.copy(oe,0,0,Q),oe}return void 0!==ee.length?"number"!=typeof ee.length||ae(ee.length)?y(0):t(ee):"Buffer"===ee.type&&Array.isArray(ee.data)?t(ee.data):void 0}(U);if(H)return H;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof U[Symbol.toPrimitive])return e.from(U[Symbol.toPrimitive]("string"),V,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}function n(U){if("number"!=typeof U)throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function a(U){return n(U),y(U<0?0:0|p(U))}function t(U){for(var V=U.length<0?0:0|p(U.length),q=y(V),ie=0;ie<V;ie+=1)q[ie]=255&U[ie];return q}function p(U){if(U>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|U}function s(U,V){if(e.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||K(U,ArrayBuffer))return U.byteLength;if("string"!=typeof U)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);var q=U.length,ie=arguments.length>2&&!0===arguments[2];if(!ie&&0===q)return 0;for(var H=!1;;)switch(V){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return J(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*q;case"hex":return q>>>1;case"base64":return te(U).length;default:if(H)return ie?-1:J(U).length;V=(""+V).toLowerCase(),H=!0}}function i(U,V,q){var ie=!1;if((void 0===V||V<0)&&(V=0),V>this.length||((void 0===q||q>this.length)&&(q=this.length),q<=0)||(q>>>=0)<=(V>>>=0))return"";for(U||(U="utf8");;)switch(U){case"hex":return S(this,V,q);case"utf8":case"utf-8":return w(this,V,q);case"ascii":return M(this,V,q);case"latin1":case"binary":return I(this,V,q);case"base64":return _(this,V,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,V,q);default:if(ie)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),ie=!0}}function f(U,V,q){var ie=U[V];U[V]=U[q],U[q]=ie}function c(U,V,q,ie,H){if(0===U.length)return-1;if("string"==typeof q?(ie=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),ae(q=+q)&&(q=H?0:U.length-1),q<0&&(q=U.length+q),q>=U.length){if(H)return-1;q=U.length-1}else if(q<0){if(!H)return-1;q=0}if("string"==typeof V&&(V=e.from(V,ie)),e.isBuffer(V))return 0===V.length?-1:l(U,V,q,ie,H);if("number"==typeof V)return V&=255,"function"==typeof Uint8Array.prototype.indexOf?H?Uint8Array.prototype.indexOf.call(U,V,q):Uint8Array.prototype.lastIndexOf.call(U,V,q):l(U,[V],q,ie,H);throw new TypeError("val must be string, number or Buffer")}function l(U,V,q,ie,H){var ee,Q=1,oe=U.length,le=V.length;if(void 0!==ie&&("ucs2"===(ie=String(ie).toLowerCase())||"ucs-2"===ie||"utf16le"===ie||"utf-16le"===ie)){if(U.length<2||V.length<2)return-1;Q=2,oe/=2,le/=2,q/=2}function de(_e,Ce){return 1===Q?_e[Ce]:_e.readUInt16BE(Ce*Q)}if(H){var fe=-1;for(ee=q;ee<oe;ee++)if(de(U,ee)===de(V,-1===fe?0:ee-fe)){if(-1===fe&&(fe=ee),ee-fe+1===le)return fe*Q}else-1!==fe&&(ee-=ee-fe),fe=-1}else for(q+le>oe&&(q=oe-le),ee=q;ee>=0;ee--){for(var be=!0,he=0;he<le;he++)if(de(U,ee+he)!==de(V,he)){be=!1;break}if(be)return ee}return-1}function h(U,V,q,ie){q=Number(q)||0;var H=U.length-q;ie?(ie=Number(ie))>H&&(ie=H):ie=H;var ee=V.length;ie>ee/2&&(ie=ee/2);for(var Q=0;Q<ie;++Q){var oe=parseInt(V.substr(2*Q,2),16);if(ae(oe))return Q;U[q+Q]=oe}return Q}function d(U,V,q,ie){return X(J(V,U.length-q),U,q,ie)}function o(U,V,q,ie){return X(function(H){for(var ee=[],Q=0;Q<H.length;++Q)ee.push(255&H.charCodeAt(Q));return ee}(V),U,q,ie)}function x(U,V,q,ie){return o(U,V,q,ie)}function u(U,V,q,ie){return X(te(V),U,q,ie)}function T(U,V,q,ie){return X(function(H,ee){for(var Q,oe,de=[],fe=0;fe<H.length&&!((ee-=2)<0);++fe)oe=(Q=H.charCodeAt(fe))>>8,de.push(Q%256),de.push(oe);return de}(V,U.length-q),U,q,ie)}function _(U,V,q){return m.fromByteArray(0===V&&q===U.length?U:U.slice(V,q))}function w(U,V,q){q=Math.min(U.length,q);for(var ie=[],H=V;H<q;){var ee,Q,oe,le,de=U[H],fe=null,be=de>239?4:de>223?3:de>191?2:1;if(H+be<=q)switch(be){case 1:de<128&&(fe=de);break;case 2:128==(192&(ee=U[H+1]))&&(le=(31&de)<<6|63&ee)>127&&(fe=le);break;case 3:Q=U[H+2],128==(192&(ee=U[H+1]))&&128==(192&Q)&&(le=(15&de)<<12|(63&ee)<<6|63&Q)>2047&&(le<55296||le>57343)&&(fe=le);break;case 4:Q=U[H+2],oe=U[H+3],128==(192&(ee=U[H+1]))&&128==(192&Q)&&128==(192&oe)&&(le=(15&de)<<18|(63&ee)<<12|(63&Q)<<6|63&oe)>65535&&le<1114112&&(fe=le)}null===fe?(fe=65533,be=1):fe>65535&&(ie.push((fe-=65536)>>>10&1023|55296),fe=56320|1023&fe),ie.push(fe),H+=be}return function(he){var _e=he.length;if(_e<=4096)return String.fromCharCode.apply(String,he);for(var Ce="",Ee=0;Ee<_e;)Ce+=String.fromCharCode.apply(String,he.slice(Ee,Ee+=4096));return Ce}(ie)}function M(U,V,q){var ie="";q=Math.min(U.length,q);for(var H=V;H<q;++H)ie+=String.fromCharCode(127&U[H]);return ie}function I(U,V,q){var ie="";q=Math.min(U.length,q);for(var H=V;H<q;++H)ie+=String.fromCharCode(U[H]);return ie}function S(U,V,q){var ie=U.length;(!V||V<0)&&(V=0),(!q||q<0||q>ie)&&(q=ie);for(var H="",ee=V;ee<q;++ee)H+=G(U[ee]);return H}function R(U,V,q){for(var ie=U.slice(V,q),H="",ee=0;ee<ie.length;ee+=2)H+=String.fromCharCode(ie[ee]+256*ie[ee+1]);return H}function O(U,V,q){if(U%1!=0||U<0)throw new RangeError("offset is not uint");if(U+V>q)throw new RangeError("Trying to access beyond buffer length")}function C(U,V,q,ie,H,ee){if(!e.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>H||V<ee)throw new RangeError('"value" argument is out of bounds');if(q+ie>U.length)throw new RangeError("Index out of range")}function D(U,V,q,ie,H,ee){if(q+ie>U.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function B(U,V,q,ie,H){return V=+V,q>>>=0,H||D(U,0,q,4),b.write(U,V,q,ie,23,4),q+4}function z(U,V,q,ie,H){return V=+V,q>>>=0,H||D(U,0,q,8),b.write(U,V,q,ie,52,8),q+8}ne.Buffer=e,ne.SlowBuffer=function(U){return+U!=U&&(U=0),e.alloc(+U)},ne.INSPECT_MAX_BYTES=50,ne.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var U=new Uint8Array(1);return U.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===U.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(U,V,q){return r(U,V,q)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(U,V,q){return H=V,ee=q,n(ie=U),ie<=0?y(ie):void 0!==H?"string"==typeof ee?y(ie).fill(H,ee):y(ie).fill(H):y(ie);var ie,H,ee},e.allocUnsafe=function(U){return a(U)},e.allocUnsafeSlow=function(U){return a(U)},e.isBuffer=function(U){return null!=U&&!0===U._isBuffer&&U!==e.prototype},e.compare=function(U,V){if(K(U,Uint8Array)&&(U=e.from(U,U.offset,U.byteLength)),K(V,Uint8Array)&&(V=e.from(V,V.offset,V.byteLength)),!e.isBuffer(U)||!e.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===V)return 0;for(var q=U.length,ie=V.length,H=0,ee=Math.min(q,ie);H<ee;++H)if(U[H]!==V[H]){q=U[H],ie=V[H];break}return q<ie?-1:ie<q?1:0},e.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(U,V){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(0===U.length)return e.alloc(0);var q;if(void 0===V)for(V=0,q=0;q<U.length;++q)V+=U[q].length;var ie=e.allocUnsafe(V),H=0;for(q=0;q<U.length;++q){var ee=U[q];if(K(ee,Uint8Array)&&(ee=e.from(ee)),!e.isBuffer(ee))throw new TypeError('"list" argument must be an Array of Buffers');ee.copy(ie,H),H+=ee.length}return ie},e.byteLength=s,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var U=this.length;if(U%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var V=0;V<U;V+=2)f(this,V,V+1);return this},e.prototype.swap32=function(){var U=this.length;if(U%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var V=0;V<U;V+=4)f(this,V,V+3),f(this,V+1,V+2);return this},e.prototype.swap64=function(){var U=this.length;if(U%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var V=0;V<U;V+=8)f(this,V,V+7),f(this,V+1,V+6),f(this,V+2,V+5),f(this,V+3,V+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var U=this.length;return 0===U?"":0===arguments.length?w(this,0,U):i.apply(this,arguments)},e.prototype.equals=function(U){if(!e.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U||0===e.compare(this,U)},e.prototype.inspect=function(){var U="",V=ne.INSPECT_MAX_BYTES;return U=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(U+=" ... "),"<Buffer "+U+">"},e.prototype.compare=function(U,V,q,ie,H){if(K(U,Uint8Array)&&(U=e.from(U,U.offset,U.byteLength)),!e.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(void 0===V&&(V=0),void 0===q&&(q=U?U.length:0),void 0===ie&&(ie=0),void 0===H&&(H=this.length),V<0||q>U.length||ie<0||H>this.length)throw new RangeError("out of range index");if(ie>=H&&V>=q)return 0;if(ie>=H)return-1;if(V>=q)return 1;if(this===U)return 0;for(var ee=(H>>>=0)-(ie>>>=0),Q=(q>>>=0)-(V>>>=0),oe=Math.min(ee,Q),le=this.slice(ie,H),de=U.slice(V,q),fe=0;fe<oe;++fe)if(le[fe]!==de[fe]){ee=le[fe],Q=de[fe];break}return ee<Q?-1:Q<ee?1:0},e.prototype.includes=function(U,V,q){return-1!==this.indexOf(U,V,q)},e.prototype.indexOf=function(U,V,q){return c(this,U,V,q,!0)},e.prototype.lastIndexOf=function(U,V,q){return c(this,U,V,q,!1)},e.prototype.write=function(U,V,q,ie){if(void 0===V)ie="utf8",q=this.length,V=0;else if(void 0===q&&"string"==typeof V)ie=V,q=this.length,V=0;else{if(!isFinite(V))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");V>>>=0,isFinite(q)?(q>>>=0,void 0===ie&&(ie="utf8")):(ie=q,q=void 0)}var H=this.length-V;if((void 0===q||q>H)&&(q=H),U.length>0&&(q<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");for(var ee=!1;;)switch(ie){case"hex":return h(this,U,V,q);case"utf8":case"utf-8":return d(this,U,V,q);case"ascii":return o(this,U,V,q);case"latin1":case"binary":return x(this,U,V,q);case"base64":return u(this,U,V,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,U,V,q);default:if(ee)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),ee=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(U,V){var q=this.length;(U=~~U)<0?(U+=q)<0&&(U=0):U>q&&(U=q),(V=void 0===V?q:~~V)<0?(V+=q)<0&&(V=0):V>q&&(V=q),V<U&&(V=U);var ie=this.subarray(U,V);return ie.__proto__=e.prototype,ie},e.prototype.readUIntLE=function(U,V,q){U>>>=0,V>>>=0,q||O(U,V,this.length);for(var ie=this[U],H=1,ee=0;++ee<V&&(H*=256);)ie+=this[U+ee]*H;return ie},e.prototype.readUIntBE=function(U,V,q){U>>>=0,V>>>=0,q||O(U,V,this.length);for(var ie=this[U+--V],H=1;V>0&&(H*=256);)ie+=this[U+--V]*H;return ie},e.prototype.readUInt8=function(U,V){return U>>>=0,V||O(U,1,this.length),this[U]},e.prototype.readUInt16LE=function(U,V){return U>>>=0,V||O(U,2,this.length),this[U]|this[U+1]<<8},e.prototype.readUInt16BE=function(U,V){return U>>>=0,V||O(U,2,this.length),this[U]<<8|this[U+1]},e.prototype.readUInt32LE=function(U,V){return U>>>=0,V||O(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+16777216*this[U+3]},e.prototype.readUInt32BE=function(U,V){return U>>>=0,V||O(U,4,this.length),16777216*this[U]+(this[U+1]<<16|this[U+2]<<8|this[U+3])},e.prototype.readIntLE=function(U,V,q){U>>>=0,V>>>=0,q||O(U,V,this.length);for(var ie=this[U],H=1,ee=0;++ee<V&&(H*=256);)ie+=this[U+ee]*H;return ie>=(H*=128)&&(ie-=Math.pow(2,8*V)),ie},e.prototype.readIntBE=function(U,V,q){U>>>=0,V>>>=0,q||O(U,V,this.length);for(var ie=V,H=1,ee=this[U+--ie];ie>0&&(H*=256);)ee+=this[U+--ie]*H;return ee>=(H*=128)&&(ee-=Math.pow(2,8*V)),ee},e.prototype.readInt8=function(U,V){return U>>>=0,V||O(U,1,this.length),128&this[U]?-1*(255-this[U]+1):this[U]},e.prototype.readInt16LE=function(U,V){U>>>=0,V||O(U,2,this.length);var q=this[U]|this[U+1]<<8;return 32768&q?4294901760|q:q},e.prototype.readInt16BE=function(U,V){U>>>=0,V||O(U,2,this.length);var q=this[U+1]|this[U]<<8;return 32768&q?4294901760|q:q},e.prototype.readInt32LE=function(U,V){return U>>>=0,V||O(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},e.prototype.readInt32BE=function(U,V){return U>>>=0,V||O(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},e.prototype.readFloatLE=function(U,V){return U>>>=0,V||O(U,4,this.length),b.read(this,U,!0,23,4)},e.prototype.readFloatBE=function(U,V){return U>>>=0,V||O(U,4,this.length),b.read(this,U,!1,23,4)},e.prototype.readDoubleLE=function(U,V){return U>>>=0,V||O(U,8,this.length),b.read(this,U,!0,52,8)},e.prototype.readDoubleBE=function(U,V){return U>>>=0,V||O(U,8,this.length),b.read(this,U,!1,52,8)},e.prototype.writeUIntLE=function(U,V,q,ie){U=+U,V>>>=0,q>>>=0,ie||C(this,U,V,q,Math.pow(2,8*q)-1,0);var H=1,ee=0;for(this[V]=255&U;++ee<q&&(H*=256);)this[V+ee]=U/H&255;return V+q},e.prototype.writeUIntBE=function(U,V,q,ie){U=+U,V>>>=0,q>>>=0,ie||C(this,U,V,q,Math.pow(2,8*q)-1,0);var H=q-1,ee=1;for(this[V+H]=255&U;--H>=0&&(ee*=256);)this[V+H]=U/ee&255;return V+q},e.prototype.writeUInt8=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,1,255,0),this[V]=255&U,V+1},e.prototype.writeUInt16LE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,2,65535,0),this[V]=255&U,this[V+1]=U>>>8,V+2},e.prototype.writeUInt16BE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,2,65535,0),this[V]=U>>>8,this[V+1]=255&U,V+2},e.prototype.writeUInt32LE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,4,4294967295,0),this[V+3]=U>>>24,this[V+2]=U>>>16,this[V+1]=U>>>8,this[V]=255&U,V+4},e.prototype.writeUInt32BE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,4,4294967295,0),this[V]=U>>>24,this[V+1]=U>>>16,this[V+2]=U>>>8,this[V+3]=255&U,V+4},e.prototype.writeIntLE=function(U,V,q,ie){if(U=+U,V>>>=0,!ie){var H=Math.pow(2,8*q-1);C(this,U,V,q,H-1,-H)}var ee=0,Q=1,oe=0;for(this[V]=255&U;++ee<q&&(Q*=256);)U<0&&0===oe&&0!==this[V+ee-1]&&(oe=1),this[V+ee]=(U/Q>>0)-oe&255;return V+q},e.prototype.writeIntBE=function(U,V,q,ie){if(U=+U,V>>>=0,!ie){var H=Math.pow(2,8*q-1);C(this,U,V,q,H-1,-H)}var ee=q-1,Q=1,oe=0;for(this[V+ee]=255&U;--ee>=0&&(Q*=256);)U<0&&0===oe&&0!==this[V+ee+1]&&(oe=1),this[V+ee]=(U/Q>>0)-oe&255;return V+q},e.prototype.writeInt8=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,1,127,-128),U<0&&(U=255+U+1),this[V]=255&U,V+1},e.prototype.writeInt16LE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,2,32767,-32768),this[V]=255&U,this[V+1]=U>>>8,V+2},e.prototype.writeInt16BE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,2,32767,-32768),this[V]=U>>>8,this[V+1]=255&U,V+2},e.prototype.writeInt32LE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,4,2147483647,-2147483648),this[V]=255&U,this[V+1]=U>>>8,this[V+2]=U>>>16,this[V+3]=U>>>24,V+4},e.prototype.writeInt32BE=function(U,V,q){return U=+U,V>>>=0,q||C(this,U,V,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[V]=U>>>24,this[V+1]=U>>>16,this[V+2]=U>>>8,this[V+3]=255&U,V+4},e.prototype.writeFloatLE=function(U,V,q){return B(this,U,V,!0,q)},e.prototype.writeFloatBE=function(U,V,q){return B(this,U,V,!1,q)},e.prototype.writeDoubleLE=function(U,V,q){return z(this,U,V,!0,q)},e.prototype.writeDoubleBE=function(U,V,q){return z(this,U,V,!1,q)},e.prototype.copy=function(U,V,q,ie){if(!e.isBuffer(U))throw new TypeError("argument should be a Buffer");if(q||(q=0),ie||0===ie||(ie=this.length),V>=U.length&&(V=U.length),V||(V=0),ie>0&&ie<q&&(ie=q),ie===q||0===U.length||0===this.length)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),U.length-V<ie-q&&(ie=U.length-V+q);var H=ie-q;if(this===U&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(V,q,ie);else if(this===U&&q<V&&V<ie)for(var ee=H-1;ee>=0;--ee)U[ee+V]=this[ee+q];else Uint8Array.prototype.set.call(U,this.subarray(q,ie),V);return H},e.prototype.fill=function(U,V,q,ie){if("string"==typeof U){if("string"==typeof V?(ie=V,V=0,q=this.length):"string"==typeof q&&(ie=q,q=this.length),void 0!==ie&&"string"!=typeof ie)throw new TypeError("encoding must be a string");if("string"==typeof ie&&!e.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(1===U.length){var H=U.charCodeAt(0);("utf8"===ie&&H<128||"latin1"===ie)&&(U=H)}}else"number"==typeof U&&(U&=255);if(V<0||this.length<V||this.length<q)throw new RangeError("Out of range index");if(q<=V)return this;var ee;if(V>>>=0,q=void 0===q?this.length:q>>>0,U||(U=0),"number"==typeof U)for(ee=V;ee<q;++ee)this[ee]=U;else{var Q=e.isBuffer(U)?U:e.from(U,ie),oe=Q.length;if(0===oe)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(ee=0;ee<q-V;++ee)this[ee+V]=Q[ee%oe]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function G(U){return U<16?"0"+U.toString(16):U.toString(16)}function J(U,V){var q;V=V||1/0;for(var ie=U.length,H=null,ee=[],Q=0;Q<ie;++Q){if((q=U.charCodeAt(Q))>55295&&q<57344){if(!H){if(q>56319){(V-=3)>-1&&ee.push(239,191,189);continue}if(Q+1===ie){(V-=3)>-1&&ee.push(239,191,189);continue}H=q;continue}if(q<56320){(V-=3)>-1&&ee.push(239,191,189),H=q;continue}q=65536+(H-55296<<10|q-56320)}else H&&(V-=3)>-1&&ee.push(239,191,189);if(H=null,q<128){if((V-=1)<0)break;ee.push(q)}else if(q<2048){if((V-=2)<0)break;ee.push(q>>6|192,63&q|128)}else if(q<65536){if((V-=3)<0)break;ee.push(q>>12|224,q>>6&63|128,63&q|128)}else{if(!(q<1114112))throw new Error("Invalid code point");if((V-=4)<0)break;ee.push(q>>18|240,q>>12&63|128,q>>6&63|128,63&q|128)}}return ee}function te(U){return m.toByteArray(function(V){if((V=(V=V.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;V.length%4!=0;)V+="=";return V}(U))}function X(U,V,q,ie){for(var H=0;H<ie&&!(H+q>=V.length||H>=U.length);++H)V[H+q]=U[H];return H}function K(U,V){return U instanceof V||null!=U&&null!=U.constructor&&null!=U.constructor.name&&U.constructor.name===V.name}function ae(U){return U!=U}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(v,re,ne){re.exports=function(g,m,b){return m<b?g<m?m:g>b?b:g:g<b?b:g>m?m:g}},{}],87:[function(v,re,ne){"use strict";var g=v("clamp");function m(b,y){null==y&&(y=!0);var e=b[0],r=b[1],n=b[2],a=b[3];return null==a&&(a=y?1:255),y&&(e*=255,r*=255,n*=255,a*=255),16777216*(e=255&g(e,0,255))+((r=255&g(r,0,255))<<16)+((n=255&g(n,0,255))<<8)+(255&g(a,0,255))}re.exports=m,re.exports.to=m,re.exports.from=function(b,y){var e=(b=+b)>>>24,r=(16711680&b)>>>16,n=(65280&b)>>>8,a=255&b;return!1===y?[e,r,n,a]:[e/255,r/255,n/255,a/255]}},{clamp:86}],88:[function(v,re,ne){"use strict";re.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(v,re,ne){"use strict";var g=v("color-rgba"),m=v("clamp"),b=v("dtype");re.exports=function(y,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var a,r=new(b(e))(4),n="uint8"!==e&&"uint8_clamped"!==e;return y.length&&"string"!=typeof y||((y=g(y))[0]/=255,y[1]/=255,y[2]/=255),(a=y)instanceof Uint8Array||a instanceof Uint8ClampedArray||Array.isArray(a)&&(a[0]>1||0===a[0])&&(a[1]>1||0===a[1])&&(a[2]>1||0===a[2])&&(!a[3]||a[3]>1)?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=null!=y[3]?y[3]:255,n&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(n?(r[0]=y[0],r[1]=y[1],r[2]=y[2],r[3]=null!=y[3]?y[3]:1):(r[0]=m(Math.floor(255*y[0]),0,255),r[1]=m(Math.floor(255*y[1]),0,255),r[2]=m(Math.floor(255*y[2]),0,255),r[3]=null==y[3]?255:m(Math.floor(255*y[3]),0,255)),r)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(v,re,ne){(function(g){(function(){"use strict";var m=v("color-name"),b=v("is-plain-obj"),y=v("defined");re.exports=function(r){var n,a,t=[],p=1;if("string"==typeof r)if(m[r])t=m[r].slice(),a="rgb";else if("transparent"===r)p=0,a="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var s=(c=r.slice(1)).length;p=1,s<=4?(t=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===s&&(p=parseInt(c[3]+c[3],16)/255)):(t=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===s&&(p=parseInt(c[6]+c[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),a="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var i=n[1],f="rgb"===i,c=i.replace(/a$/,"");a=c,s="cmyk"===c?4:"gray"===c?1:3,t=n[2].trim().split(/\s*,\s*/).map(function(h,d){if(/%$/.test(h))return d===s?parseFloat(h)/100:"rgb"===c?255*parseFloat(h)/100:parseFloat(h);if("h"===c[d]){if(/deg$/.test(h))return parseFloat(h);if(void 0!==e[h])return e[h]}return parseFloat(h)}),i===c&&t.push(1),p=f||void 0===t[s]?1:t[s],t=t.slice(0,s)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),a=r.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(r))if(b(r)){var l=y(r.r,r.red,r.R,null);null!==l?(a="rgb",t=[l,y(r.g,r.green,r.G),y(r.b,r.blue,r.B)]):(a="hsl",t=[y(r.h,r.hue,r.H),y(r.s,r.saturation,r.S),y(r.l,r.lightness,r.L,r.b,r.brightness)]),p=y(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(p/=100)}else(Array.isArray(r)||g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(t=[r[0],r[1],r[2]],a="rgb",p=4===r.length?r[3]:1);else a="rgb",t=[r>>>16,(65280&r)>>>8,255&r];return{space:a,values:t,alpha:p}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(v,re,ne){"use strict";var g=v("color-parse"),m=v("color-space/hsl"),b=v("clamp");re.exports=function(y){var e,r=g(y);return r.space?((e=Array(3))[0]=b(r.values[0],0,255),e[1]=b(r.values[1],0,255),e[2]=b(r.values[2],0,255),"h"===r.space[0]&&(e=m.rgb(e)),e.push(b(r.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(v,re,ne){"use strict";var g=v("./rgb");re.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(m){var b,y,e,r,n,a=m[0]/360,t=m[1]/100,p=m[2]/100;if(0===t)return[n=255*p,n,n];b=2*p-(y=p<.5?p*(1+t):p+t-p*t),r=[0,0,0];for(var s=0;s<3;s++)(e=a+1/3*-(s-1))<0?e++:e>1&&e--,r[s]=255*(n=6*e<1?b+6*(y-b)*e:2*e<1?y:3*e<2?b+(y-b)*(2/3-e)*6:b);return r}},g.hsl=function(m){var b,y,e=m[0]/255,r=m[1]/255,n=m[2]/255,a=Math.min(e,r,n),t=Math.max(e,r,n),p=t-a;return t===a?b=0:e===t?b=(r-n)/p:r===t?b=2+(n-e)/p:n===t&&(b=4+(e-r)/p),(b=Math.min(60*b,360))<0&&(b+=360),y=(a+t)/2,[b,100*(t===a?0:y<=.5?p/(t+a):p/(2-t-a)),100*y]}},{"./rgb":93}],93:[function(v,re,ne){"use strict";re.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(v,re,ne){re.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(v,re,ne){re.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(v,re,ne){re.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(v,re,ne){re.exports=["normal","italic","oblique"]},{}],98:[function(v,re,ne){re.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(v,re,ne){"use strict";re.exports={parse:v("./parse"),stringify:v("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(v,re,ne){"use strict";var g=v("css-font-size-keywords");re.exports={isSize:function(m){return/^[\d\.]/.test(m)||-1!==m.indexOf("/")||-1!==g.indexOf(m)}}},{"css-font-size-keywords":95}],101:[function(v,re,ne){"use strict";var g=v("unquote"),m=v("css-global-keywords"),b=v("css-system-font-keywords"),y=v("css-font-weight-keywords"),e=v("css-font-style-keywords"),r=v("css-font-stretch-keywords"),n=v("string-split-by"),a=v("./lib/util").isSize;re.exports=p;var t=p.cache={};function p(i){if("string"!=typeof i)throw new Error("Font argument must be a string.");if(t[i])return t[i];if(""===i)throw new Error("Cannot parse an empty string.");if(-1!==b.indexOf(i))return t[i]={system:i};for(var f,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},l=n(i,/\s+/);f=l.shift();){if(-1!==m.indexOf(f))return["style","variant","weight","stretch"].forEach(function(d){c[d]=f}),t[i]=c;if(-1===e.indexOf(f))if("normal"!==f&&"small-caps"!==f)if(-1===r.indexOf(f)){if(-1===y.indexOf(f)){if(a(f)){var h=n(f,"/");if(c.size=h[0],null!=h[1]?c.lineHeight=s(h[1]):"/"===l[0]&&(l.shift(),c.lineHeight=s(l.shift())),!l.length)throw new Error("Missing required font-family.");return c.family=n(l.join(" "),/\s*,\s*/).map(g),t[i]=c}throw new Error("Unknown or unsupported font token: "+f)}c.weight=f}else c.stretch=f;else c.variant=f;else c.style=f}throw new Error("Missing required font-size.")}function s(i){var f=parseFloat(i);return f.toString()===i?f:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(v,re,ne){"use strict";var g=v("pick-by-alias"),m=v("./lib/util").isSize,b=f(v("css-global-keywords")),y=f(v("css-system-font-keywords")),e=f(v("css-font-weight-keywords")),r=f(v("css-font-style-keywords")),n=f(v("css-font-stretch-keywords")),a={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},s="serif";function i(c,l){if(c&&!l[c]&&!b[c])throw Error("Unknown keyword `"+c+"`");return c}function f(c){for(var l={},h=0;h<c.length;h++)l[c[h]]=1;return l}re.exports=function(c){if((c=g(c,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return c.system&&i(c.system,y),c.system;if(i(c.style,r),i(c.variant,a),i(c.weight,e),i(c.stretch,n),null==c.size&&(c.size="1rem"),"number"==typeof c.size&&(c.size+="px"),!m)throw Error("Bad size value `"+c.size+"`");c.family||(c.family=s),Array.isArray(c.family)&&(c.family.length||(c.family=[s]),c.family=c.family.map(function(h){return t[h]?h:'"'+h+'"'}).join(", "));var l=[];return l.push(c.style),c.variant!==c.style&&l.push(c.variant),c.weight!==c.variant&&c.weight!==c.style&&l.push(c.weight),c.stretch!==c.weight&&c.stretch!==c.variant&&c.stretch!==c.style&&l.push(c.stretch),l.push(c.size+(null==c.lineHeight||"normal"===c.lineHeight||c.lineHeight+""=="1"?"":"/"+c.lineHeight)),l.push(c.family),l.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(v,re,ne){re.exports=["inherit","initial","unset"]},{}],104:[function(v,re,ne){re.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(v,re,ne){"use strict";var g,m=v("type/value/is"),b=v("type/value/ensure"),y=v("type/plain-function/ensure"),e=v("es5-ext/object/copy"),r=v("es5-ext/object/normalize-options"),n=v("es5-ext/object/map"),a=Function.prototype.bind,t=Object.defineProperty,p=Object.prototype.hasOwnProperty;g=function(s,i,f){var c,l=b(i)&&y(i.value);return delete(c=e(i)).writable,delete c.value,c.get=function(){return!f.overwriteDefinition&&p.call(this,s)?l:(i.value=a.call(l,f.resolveContext?f.resolveContext(this):this),t(this,s,i),this[s])},c},re.exports=function(s){var i=r(arguments[1]);return m(i.resolveContext)&&y(i.resolveContext),n(s,function(f,c){return g(c,f,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(v,re,ne){"use strict";var g=v("type/value/is"),m=v("type/plain-function/is"),b=v("es5-ext/object/assign"),y=v("es5-ext/object/normalize-options"),e=v("es5-ext/string/#/contains");(re.exports=function(r,n){var a,t,p,s,i;return arguments.length<2||"string"!=typeof r?(s=n,n=r,r=null):s=arguments[2],g(r)?(a=e.call(r,"c"),t=e.call(r,"e"),p=e.call(r,"w")):(a=p=!0,t=!1),i={value:n,configurable:a,enumerable:t,writable:p},s?b(y(s),i):i}).gs=function(r,n,a){var t,p,s,i;return"string"!=typeof r?(s=a,a=n,n=r,r=null):s=arguments[3],g(n)?m(n)?g(a)?m(a)||(s=a,a=void 0):a=void 0:(s=n,n=a=void 0):n=void 0,g(r)?(t=e.call(r,"c"),p=e.call(r,"e")):(t=!0,p=!1),i={get:n,set:a,configurable:t,enumerable:p},s?b(y(s),i):i}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(v,re,ne){var m;m=function(g){"use strict";function m(O,C){return O<C?-1:O>C?1:O>=C?0:NaN}function b(O){var C;return 1===O.length&&(C=O,O=function(D,B){return m(C(D),B)}),{left:function(D,B,z,Y){for(null==z&&(z=0),null==Y&&(Y=D.length);z<Y;){var G=z+Y>>>1;O(D[G],B)<0?z=G+1:Y=G}return z},right:function(D,B,z,Y){for(null==z&&(z=0),null==Y&&(Y=D.length);z<Y;){var G=z+Y>>>1;O(D[G],B)>0?Y=G:z=G+1}return z}}}var y=b(m),e=y.right,r=y.left;function n(O,C){return[O,C]}function a(O){return null===O?NaN:+O}function t(O,C){var D,B,z=O.length,Y=0,G=-1,J=0,te=0;if(null==C)for(;++G<z;)isNaN(D=a(O[G]))||(te+=(B=D-J)*(D-(J+=B/++Y)));else for(;++G<z;)isNaN(D=a(C(O[G],G,O)))||(te+=(B=D-J)*(D-(J+=B/++Y)));if(Y>1)return te/(Y-1)}function p(O,C){var D=t(O,C);return D&&Math.sqrt(D)}function s(O,C){var D,B,z,Y=O.length,G=-1;if(null==C){for(;++G<Y;)if(null!=(D=O[G])&&D>=D)for(B=z=D;++G<Y;)null!=(D=O[G])&&(B>D&&(B=D),z<D&&(z=D))}else for(;++G<Y;)if(null!=(D=C(O[G],G,O))&&D>=D)for(B=z=D;++G<Y;)null!=(D=C(O[G],G,O))&&(B>D&&(B=D),z<D&&(z=D));return[B,z]}var i=Array.prototype,f=i.slice,c=i.map;function l(O){return function(){return O}}function h(O){return O}function d(O,C,D){O=+O,C=+C,D=(z=arguments.length)<2?(C=O,O=0,1):z<3?1:+D;for(var B=-1,z=0|Math.max(0,Math.ceil((C-O)/D)),Y=new Array(z);++B<z;)Y[B]=O+B*D;return Y}var o=Math.sqrt(50),x=Math.sqrt(10),u=Math.sqrt(2);function T(O,C,D){var B=(C-O)/Math.max(0,D),z=Math.floor(Math.log(B)/Math.LN10),Y=B/Math.pow(10,z);return z>=0?(Y>=o?10:Y>=x?5:Y>=u?2:1)*Math.pow(10,z):-Math.pow(10,-z)/(Y>=o?10:Y>=x?5:Y>=u?2:1)}function _(O,C,D){var B=Math.abs(C-O)/Math.max(0,D),z=Math.pow(10,Math.floor(Math.log(B)/Math.LN10)),Y=B/z;return Y>=o?z*=10:Y>=x?z*=5:Y>=u&&(z*=2),C<O?-z:z}function w(O){return Math.ceil(Math.log(O.length)/Math.LN2)+1}function M(O,C,D){if(null==D&&(D=a),B=O.length){if((C=+C)<=0||B<2)return+D(O[0],0,O);if(C>=1)return+D(O[B-1],B-1,O);var B,z=(B-1)*C,Y=Math.floor(z),G=+D(O[Y],Y,O);return G+(+D(O[Y+1],Y+1,O)-G)*(z-Y)}}function I(O,C){var D,B,z=O.length,Y=-1;if(null==C){for(;++Y<z;)if(null!=(D=O[Y])&&D>=D)for(B=D;++Y<z;)null!=(D=O[Y])&&B>D&&(B=D)}else for(;++Y<z;)if(null!=(D=C(O[Y],Y,O))&&D>=D)for(B=D;++Y<z;)null!=(D=C(O[Y],Y,O))&&B>D&&(B=D);return B}function S(O){if(!(z=O.length))return[];for(var C=-1,D=I(O,R),B=new Array(D);++C<D;)for(var z,Y=-1,G=B[C]=new Array(z);++Y<z;)G[Y]=O[Y][C];return B}function R(O){return O.length}g.bisect=e,g.bisectRight=e,g.bisectLeft=r,g.ascending=m,g.bisector=b,g.cross=function(O,C,D){var B,z,Y,G,J=O.length,te=C.length,X=new Array(J*te);for(null==D&&(D=n),B=Y=0;B<J;++B)for(G=O[B],z=0;z<te;++z,++Y)X[Y]=D(G,C[z]);return X},g.descending=function(O,C){return C<O?-1:C>O?1:C>=O?0:NaN},g.deviation=p,g.extent=s,g.histogram=function(){var O=h,C=s,D=w;function B(z){var Y,G,J=z.length,te=new Array(J);for(Y=0;Y<J;++Y)te[Y]=O(z[Y],Y,z);var X=C(te),K=X[0],ae=X[1],U=D(te,K,ae);Array.isArray(U)||(U=_(K,ae,U),U=d(Math.ceil(K/U)*U,ae,U));for(var V=U.length;U[0]<=K;)U.shift(),--V;for(;U[V-1]>ae;)U.pop(),--V;var q,ie=new Array(V+1);for(Y=0;Y<=V;++Y)(q=ie[Y]=[]).x0=Y>0?U[Y-1]:K,q.x1=Y<V?U[Y]:ae;for(Y=0;Y<J;++Y)K<=(G=te[Y])&&G<=ae&&ie[e(U,G,0,V)].push(z[Y]);return ie}return B.value=function(z){return arguments.length?(O="function"==typeof z?z:l(z),B):O},B.domain=function(z){return arguments.length?(C="function"==typeof z?z:l([z[0],z[1]]),B):C},B.thresholds=function(z){return arguments.length?(D="function"==typeof z?z:Array.isArray(z)?l(f.call(z)):l(z),B):D},B},g.thresholdFreedmanDiaconis=function(O,C,D){return O=c.call(O,a).sort(m),Math.ceil((D-C)/(2*(M(O,.75)-M(O,.25))*Math.pow(O.length,-1/3)))},g.thresholdScott=function(O,C,D){return Math.ceil((D-C)/(3.5*p(O)*Math.pow(O.length,-1/3)))},g.thresholdSturges=w,g.max=function(O,C){var D,B,z=O.length,Y=-1;if(null==C){for(;++Y<z;)if(null!=(D=O[Y])&&D>=D)for(B=D;++Y<z;)null!=(D=O[Y])&&D>B&&(B=D)}else for(;++Y<z;)if(null!=(D=C(O[Y],Y,O))&&D>=D)for(B=D;++Y<z;)null!=(D=C(O[Y],Y,O))&&D>B&&(B=D);return B},g.mean=function(O,C){var D,B=O.length,z=B,Y=-1,G=0;if(null==C)for(;++Y<B;)isNaN(D=a(O[Y]))?--z:G+=D;else for(;++Y<B;)isNaN(D=a(C(O[Y],Y,O)))?--z:G+=D;if(z)return G/z},g.median=function(O,C){var D,B=O.length,z=-1,Y=[];if(null==C)for(;++z<B;)isNaN(D=a(O[z]))||Y.push(D);else for(;++z<B;)isNaN(D=a(C(O[z],z,O)))||Y.push(D);return M(Y.sort(m),.5)},g.merge=function(O){for(var C,D,B,z=O.length,Y=-1,G=0;++Y<z;)G+=O[Y].length;for(D=new Array(G);--z>=0;)for(C=(B=O[z]).length;--C>=0;)D[--G]=B[C];return D},g.min=I,g.pairs=function(O,C){null==C&&(C=n);for(var D=0,B=O.length-1,z=O[0],Y=new Array(B<0?0:B);D<B;)Y[D]=C(z,z=O[++D]);return Y},g.permute=function(O,C){for(var D=C.length,B=new Array(D);D--;)B[D]=O[C[D]];return B},g.quantile=M,g.range=d,g.scan=function(O,C){if(D=O.length){var D,B,z=0,Y=0,G=O[Y];for(null==C&&(C=m);++z<D;)(C(B=O[z],G)<0||0!==C(G,G))&&(G=B,Y=z);return 0===C(G,G)?Y:void 0}},g.shuffle=function(O,C,D){for(var B,z,Y=(D??O.length)-(C=null==C?0:+C);Y;)z=Math.random()*Y--|0,B=O[Y+C],O[Y+C]=O[z+C],O[z+C]=B;return O},g.sum=function(O,C){var D,B=O.length,z=-1,Y=0;if(null==C)for(;++z<B;)(D=+O[z])&&(Y+=D);else for(;++z<B;)(D=+C(O[z],z,O))&&(Y+=D);return Y},g.ticks=function(O,C,D){var B,z,Y,G,J=-1;if(D=+D,(O=+O)==(C=+C)&&D>0)return[O];if((B=C<O)&&(z=O,O=C,C=z),0===(G=T(O,C,D))||!isFinite(G))return[];if(G>0)for(O=Math.ceil(O/G),C=Math.floor(C/G),Y=new Array(z=Math.ceil(C-O+1));++J<z;)Y[J]=(O+J)*G;else for(O=Math.floor(O*G),C=Math.ceil(C*G),Y=new Array(z=Math.ceil(O-C+1));++J<z;)Y[J]=(O-J)/G;return B&&Y.reverse(),Y},g.tickIncrement=T,g.tickStep=_,g.transpose=S,g.variance=t,g.zip=function(){return S(arguments)},Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:this.d3=this.d3||{})},{}],108:[function(v,re,ne){var m;m=function(g){"use strict";function m(){}function b(s,i){var f=new m;if(s instanceof m)s.each(function(o,x){f.set(x,o)});else if(Array.isArray(s)){var c,l=-1,h=s.length;if(null==i)for(;++l<h;)f.set(l,s[l]);else for(;++l<h;)f.set(i(c=s[l],l,s),c)}else if(s)for(var d in s)f.set(d,s[d]);return f}function y(){return{}}function e(s,i,f){s[i]=f}function r(){return b()}function n(s,i,f){s.set(i,f)}function a(){}m.prototype=b.prototype={constructor:m,has:function(s){return"$"+s in this},get:function(s){return this["$"+s]},set:function(s,i){return this["$"+s]=i,this},remove:function(s){var i="$"+s;return i in this&&delete this[i]},clear:function(){for(var s in this)"$"===s[0]&&delete this[s]},keys:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(i.slice(1));return s},values:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(this[i]);return s},entries:function(){var s=[];for(var i in this)"$"===i[0]&&s.push({key:i.slice(1),value:this[i]});return s},size:function(){var s=0;for(var i in this)"$"===i[0]&&++s;return s},empty:function(){for(var s in this)if("$"===s[0])return!1;return!0},each:function(s){for(var i in this)"$"===i[0]&&s(this[i],i.slice(1),this)}};var t=b.prototype;function p(s,i){var f=new a;if(s instanceof a)s.each(function(h){f.add(h)});else if(s){var c=-1,l=s.length;if(null==i)for(;++c<l;)f.add(s[c]);else for(;++c<l;)f.add(i(s[c],c,s))}return f}a.prototype=p.prototype={constructor:a,has:t.has,add:function(s){return this["$"+(s+="")]=s,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each},g.nest=function(){var s,i,f,c=[],l=[];function h(d,o,x,u){if(o>=c.length)return null!=s&&d.sort(s),null!=i?i(d):d;for(var T,_,w,M=-1,I=d.length,S=c[o++],R=b(),O=x();++M<I;)(w=R.get(T=S(_=d[M])+""))?w.push(_):R.set(T,[_]);return R.each(function(C,D){u(O,D,h(C,o,x,u))}),O}return f={object:function(d){return h(d,0,y,e)},map:function(d){return h(d,0,r,n)},entries:function(d){return function o(x,u){if(++u>c.length)return x;var T,_=l[u-1];return null!=i&&u>=c.length?T=x.entries():(T=[],x.each(function(w,M){T.push({key:M,values:o(w,u)})})),null!=_?T.sort(function(w,M){return _(w.key,M.key)}):T}(h(d,0,r,n),0)},key:function(d){return c.push(d),f},sortKeys:function(d){return l[c.length-1]=d,f},sortValues:function(d){return s=d,f},rollup:function(d){return i=d,f}}},g.set=p,g.map=b,g.keys=function(s){var i=[];for(var f in s)i.push(f);return i},g.values=function(s){var i=[];for(var f in s)i.push(s[f]);return i},g.entries=function(s){var i=[];for(var f in s)i.push({key:f,value:s[f]});return i},Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:this.d3=this.d3||{})},{}],109:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";function m(ve,Te,Ie){ve.prototype=Te.prototype=Ie,Ie.constructor=ve}function b(ve,Te){var Ie=Object.create(ve.prototype);for(var De in Te)Ie[De]=Te[De];return Ie}function y(){}var e="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,t=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),p=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),s=new RegExp("^rgba\\("+[e,e,e,r]+"\\)$"),i=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),f=new RegExp("^hsl\\("+[r,n,n]+"\\)$"),c=new RegExp("^hsla\\("+[r,n,n,r]+"\\)$"),l={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function h(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function o(ve){var Te,Ie;return ve=(ve+"").trim().toLowerCase(),(Te=a.exec(ve))?(Ie=Te[1].length,Te=parseInt(Te[1],16),6===Ie?x(Te):3===Ie?new w(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):8===Ie?u(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):4===Ie?u(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=t.exec(ve))?new w(Te[1],Te[2],Te[3],1):(Te=p.exec(ve))?new w(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=s.exec(ve))?u(Te[1],Te[2],Te[3],Te[4]):(Te=i.exec(ve))?u(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=f.exec(ve))?R(Te[1],Te[2]/100,Te[3]/100,1):(Te=c.exec(ve))?R(Te[1],Te[2]/100,Te[3]/100,Te[4]):l.hasOwnProperty(ve)?x(l[ve]):"transparent"===ve?new w(NaN,NaN,NaN,0):null}function x(ve){return new w(ve>>16&255,ve>>8&255,255&ve,1)}function u(ve,Te,Ie,De){return De<=0&&(ve=Te=Ie=NaN),new w(ve,Te,Ie,De)}function T(ve){return ve instanceof y||(ve=o(ve)),ve?new w((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new w}function _(ve,Te,Ie,De){return 1===arguments.length?T(ve):new w(ve,Te,Ie,De??1)}function w(ve,Te,Ie,De){this.r=+ve,this.g=+Te,this.b=+Ie,this.opacity=+De}function M(){return"#"+S(this.r)+S(this.g)+S(this.b)}function I(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ve?")":", "+ve+")")}function S(ve){return((ve=Math.max(0,Math.min(255,Math.round(ve)||0)))<16?"0":"")+ve.toString(16)}function R(ve,Te,Ie,De){return De<=0?ve=Te=Ie=NaN:Ie<=0||Ie>=1?ve=Te=NaN:Te<=0&&(ve=NaN),new D(ve,Te,Ie,De)}function O(ve){if(ve instanceof D)return new D(ve.h,ve.s,ve.l,ve.opacity);if(ve instanceof y||(ve=o(ve)),!ve)return new D;if(ve instanceof D)return ve;var Te=(ve=ve.rgb()).r/255,Ie=ve.g/255,De=ve.b/255,Fe=Math.min(Te,Ie,De),Ue=Math.max(Te,Ie,De),qe=NaN,je=Ue-Fe,rt=(Ue+Fe)/2;return je?(qe=Te===Ue?(Ie-De)/je+6*(Ie<De):Ie===Ue?(De-Te)/je+2:(Te-Ie)/je+4,je/=rt<.5?Ue+Fe:2-Ue-Fe,qe*=60):je=rt>0&&rt<1?0:qe,new D(qe,je,rt,ve.opacity)}function C(ve,Te,Ie,De){return 1===arguments.length?O(ve):new D(ve,Te,Ie,De??1)}function D(ve,Te,Ie,De){this.h=+ve,this.s=+Te,this.l=+Ie,this.opacity=+De}function B(ve,Te,Ie){return 255*(ve<60?Te+(Ie-Te)*ve/60:ve<180?Ie:ve<240?Te+(Ie-Te)*(240-ve)/60:Te)}m(y,o,{copy:function(ve){return Object.assign(new this.constructor,this,ve)},displayable:function(){return this.rgb().displayable()},hex:h,formatHex:h,formatHsl:function(){return O(this).formatHsl()},formatRgb:d,toString:d}),m(w,_,b(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new w(this.r*ve,this.g*ve,this.b*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new w(this.r*ve,this.g*ve,this.b*ve,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:I,toString:I})),m(D,C,b(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new D(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new D(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=this.h%360+360*(this.h<0),Te=isNaN(ve)||isNaN(this.s)?0:this.s,Ie=this.l,De=Ie+(Ie<.5?Ie:1-Ie)*Te,Fe=2*Ie-De;return new w(B(ve>=240?ve-240:ve+120,Fe,De),B(ve,Fe,De),B(ve<120?ve+240:ve-120,Fe,De),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ve?")":", "+ve+")")}}));var z=Math.PI/180,Y=180/Math.PI,G=6/29,J=3*G*G;function te(ve){if(ve instanceof K)return new K(ve.l,ve.a,ve.b,ve.opacity);if(ve instanceof ee)return Q(ve);ve instanceof w||(ve=T(ve));var Te,Ie,De=q(ve.r),Fe=q(ve.g),Ue=q(ve.b),qe=ae((.2225045*De+.7168786*Fe+.0606169*Ue)/1);return De===Fe&&Fe===Ue?Te=Ie=qe:(Te=ae((.4360747*De+.3850649*Fe+.1430804*Ue)/.96422),Ie=ae((.0139322*De+.0971045*Fe+.7141733*Ue)/.82521)),new K(116*qe-16,500*(Te-qe),200*(qe-Ie),ve.opacity)}function X(ve,Te,Ie,De){return 1===arguments.length?te(ve):new K(ve,Te,Ie,De??1)}function K(ve,Te,Ie,De){this.l=+ve,this.a=+Te,this.b=+Ie,this.opacity=+De}function ae(ve){return ve>.008856451679035631?Math.pow(ve,1/3):ve/J+4/29}function U(ve){return ve>G?ve*ve*ve:J*(ve-4/29)}function V(ve){return 255*(ve<=.0031308?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055)}function q(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function ie(ve){if(ve instanceof ee)return new ee(ve.h,ve.c,ve.l,ve.opacity);if(ve instanceof K||(ve=te(ve)),0===ve.a&&0===ve.b)return new ee(NaN,0<ve.l&&ve.l<100?0:NaN,ve.l,ve.opacity);var Te=Math.atan2(ve.b,ve.a)*Y;return new ee(Te<0?Te+360:Te,Math.sqrt(ve.a*ve.a+ve.b*ve.b),ve.l,ve.opacity)}function H(ve,Te,Ie,De){return 1===arguments.length?ie(ve):new ee(ve,Te,Ie,De??1)}function ee(ve,Te,Ie,De){this.h=+ve,this.c=+Te,this.l=+Ie,this.opacity=+De}function Q(ve){if(isNaN(ve.h))return new K(ve.l,0,0,ve.opacity);var Te=ve.h*z;return new K(ve.l,Math.cos(Te)*ve.c,Math.sin(Te)*ve.c,ve.opacity)}m(K,X,b(y,{brighter:function(ve){return new K(this.l+18*(ve??1),this.a,this.b,this.opacity)},darker:function(ve){return new K(this.l-18*(ve??1),this.a,this.b,this.opacity)},rgb:function(){var ve=(this.l+16)/116,Te=isNaN(this.a)?ve:ve+this.a/500,Ie=isNaN(this.b)?ve:ve-this.b/200;return new w(V(3.1338561*(Te=.96422*U(Te))-1.6168667*(ve=1*U(ve))-.4906146*(Ie=.82521*U(Ie))),V(-.9787684*Te+1.9161415*ve+.033454*Ie),V(.0719453*Te-.2289914*ve+1.4052427*Ie),this.opacity)}})),m(ee,H,b(y,{brighter:function(ve){return new ee(this.h,this.c,this.l+18*(ve??1),this.opacity)},darker:function(ve){return new ee(this.h,this.c,this.l-18*(ve??1),this.opacity)},rgb:function(){return Q(this).rgb()}}));var le=1.78277,de=-.29227,fe=-.90649,be=1.97294,he=be*fe,_e=be*le,Ce=le*de- -.14861*fe;function Ee(ve){if(ve instanceof ze)return new ze(ve.h,ve.s,ve.l,ve.opacity);ve instanceof w||(ve=T(ve));var Ie=ve.g/255,De=ve.b/255,Fe=(Ce*De+he*(ve.r/255)-_e*Ie)/(Ce+he-_e),Ue=De-Fe,qe=(be*(Ie-Fe)-de*Ue)/fe,je=Math.sqrt(qe*qe+Ue*Ue)/(be*Fe*(1-Fe)),rt=je?Math.atan2(qe,Ue)*Y-120:NaN;return new ze(rt<0?rt+360:rt,je,Fe,ve.opacity)}function Ae(ve,Te,Ie,De){return 1===arguments.length?Ee(ve):new ze(ve,Te,Ie,De??1)}function ze(ve,Te,Ie,De){this.h=+ve,this.s=+Te,this.l=+Ie,this.opacity=+De}m(ze,Ae,b(y,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new ze(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new ze(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=isNaN(this.h)?0:(this.h+120)*z,Te=+this.l,Ie=isNaN(this.s)?0:this.s*Te*(1-Te),De=Math.cos(ve),Fe=Math.sin(ve);return new w(255*(Te+Ie*(-.14861*De+le*Fe)),255*(Te+Ie*(de*De+fe*Fe)),255*(Te+Ie*(be*De)),this.opacity)}})),g.color=o,g.cubehelix=Ae,g.gray=function(ve,Te){return new K(ve,0,0,Te??1)},g.hcl=H,g.hsl=C,g.lab=X,g.lch=function(ve,Te,Ie,De){return 1===arguments.length?ie(ve):new ee(Ie,Te,ve,De??1)},g.rgb=_,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).d3=g.d3||{})},{}],110:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";var m={value:function(){}};function b(){for(var a,t=0,p=arguments.length,s={};t<p;++t){if(!(a=arguments[t]+"")||a in s||/[\s.]/.test(a))throw new Error("illegal type: "+a);s[a]=[]}return new y(s)}function y(a){this._=a}function e(a,t){return a.trim().split(/^|\s+/).map(function(p){var s="",i=p.indexOf(".");if(i>=0&&(s=p.slice(i+1),p=p.slice(0,i)),p&&!t.hasOwnProperty(p))throw new Error("unknown type: "+p);return{type:p,name:s}})}function r(a,t){for(var p,s=0,i=a.length;s<i;++s)if((p=a[s]).name===t)return p.value}function n(a,t,p){for(var s=0,i=a.length;s<i;++s)if(a[s].name===t){a[s]=m,a=a.slice(0,s).concat(a.slice(s+1));break}return null!=p&&a.push({name:t,value:p}),a}y.prototype=b.prototype={constructor:y,on:function(a,t){var p,s=this._,i=e(a+"",s),f=-1,c=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++f<c;)if(p=(a=i[f]).type)s[p]=n(s[p],a.name,t);else if(null==t)for(p in s)s[p]=n(s[p],a.name,null);return this}for(;++f<c;)if((p=(a=i[f]).type)&&(p=r(s[p],a.name)))return p},copy:function(){var a={},t=this._;for(var p in t)a[p]=t[p].slice();return new y(a)},call:function(a,t){if((p=arguments.length-2)>0)for(var p,s,i=new Array(p),f=0;f<p;++f)i[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(f=0,p=(s=this._[a]).length;f<p;++f)s[f].value.apply(t,i)},apply:function(a,t,p){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var s=this._[a],i=0,f=s.length;i<f;++i)s[i].value.apply(t,p)}},g.dispatch=b,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).d3=g.d3||{})},{}],111:[function(v,re,ne){var g,m;g=this,m=function(g,m,b,y,e){"use strict";function r(l){return function(){return l}}function n(){return 1e-6*(Math.random()-.5)}function a(l){return l.x+l.vx}function t(l){return l.y+l.vy}function p(l){return l.index}function s(l,h){var d=l.get(h);if(!d)throw new Error("missing: "+h);return d}function i(l){return l.x}function f(l){return l.y}var c=Math.PI*(3-Math.sqrt(5));g.forceCenter=function(l,h){var d;function o(){var x,u,T=d.length,_=0,w=0;for(x=0;x<T;++x)_+=(u=d[x]).x,w+=u.y;for(_=_/T-l,w=w/T-h,x=0;x<T;++x)(u=d[x]).x-=_,u.y-=w}return null==l&&(l=0),null==h&&(h=0),o.initialize=function(x){d=x},o.x=function(x){return arguments.length?(l=+x,o):l},o.y=function(x){return arguments.length?(h=+x,o):h},o},g.forceCollide=function(l){var h,d,o=1,x=1;function u(){for(var w,M,I,S,R,O,C,D=h.length,B=0;B<x;++B)for(M=m.quadtree(h,a,t).visitAfter(T),w=0;w<D;++w)C=(O=d[(I=h[w]).index])*O,S=I.x+I.vx,R=I.y+I.vy,M.visit(z);function z(Y,G,J,te,X){var K=Y.data,ae=Y.r,U=O+ae;if(!K)return G>S+U||te<S-U||J>R+U||X<R-U;if(K.index>I.index){var V=S-K.x-K.vx,q=R-K.y-K.vy,ie=V*V+q*q;ie<U*U&&(0===V&&(ie+=(V=n())*V),0===q&&(ie+=(q=n())*q),ie=(U-(ie=Math.sqrt(ie)))/ie*o,I.vx+=(V*=ie)*(U=(ae*=ae)/(C+ae)),I.vy+=(q*=ie)*U,K.vx-=V*(U=1-U),K.vy-=q*U)}}}function T(w){if(w.data)return w.r=d[w.data.index];for(var M=w.r=0;M<4;++M)w[M]&&w[M].r>w.r&&(w.r=w[M].r)}function _(){if(h){var w,M,I=h.length;for(d=new Array(I),w=0;w<I;++w)d[(M=h[w]).index]=+l(M,w,h)}}return"function"!=typeof l&&(l=r(null==l?1:+l)),u.initialize=function(w){h=w,_()},u.iterations=function(w){return arguments.length?(x=+w,u):x},u.strength=function(w){return arguments.length?(o=+w,u):o},u.radius=function(w){return arguments.length?(l="function"==typeof w?w:r(+w),_(),u):l},u},g.forceLink=function(l){var h,d,o,x,u,T=p,_=function(C){return 1/Math.min(x[C.source.index],x[C.target.index])},w=r(30),M=1;function I(C){for(var D=0,B=l.length;D<M;++D)for(var z,Y,G,J,te,X,K,ae=0;ae<B;++ae)Y=(z=l[ae]).source,J=(G=z.target).x+G.vx-Y.x-Y.vx||n(),te=G.y+G.vy-Y.y-Y.vy||n(),J*=X=((X=Math.sqrt(J*J+te*te))-d[ae])/X*C*h[ae],te*=X,G.vx-=J*(K=u[ae]),G.vy-=te*K,Y.vx+=J*(K=1-K),Y.vy+=te*K}function S(){if(o){var C,D,B=o.length,z=l.length,Y=b.map(o,T);for(C=0,x=new Array(B);C<z;++C)(D=l[C]).index=C,"object"!=typeof D.source&&(D.source=s(Y,D.source)),"object"!=typeof D.target&&(D.target=s(Y,D.target)),x[D.source.index]=(x[D.source.index]||0)+1,x[D.target.index]=(x[D.target.index]||0)+1;for(C=0,u=new Array(z);C<z;++C)u[C]=x[(D=l[C]).source.index]/(x[D.source.index]+x[D.target.index]);h=new Array(z),R(),d=new Array(z),O()}}function R(){if(o)for(var C=0,D=l.length;C<D;++C)h[C]=+_(l[C],C,l)}function O(){if(o)for(var C=0,D=l.length;C<D;++C)d[C]=+w(l[C],C,l)}return null==l&&(l=[]),I.initialize=function(C){o=C,S()},I.links=function(C){return arguments.length?(l=C,S(),I):l},I.id=function(C){return arguments.length?(T=C,I):T},I.iterations=function(C){return arguments.length?(M=+C,I):M},I.strength=function(C){return arguments.length?(_="function"==typeof C?C:r(+C),R(),I):_},I.distance=function(C){return arguments.length?(w="function"==typeof C?C:r(+C),O(),I):w},I},g.forceManyBody=function(){var l,h,d,o,x=r(-30),u=1,T=1/0,_=.81;function w(R){var O,C=l.length,D=m.quadtree(l,i,f).visitAfter(I);for(d=R,O=0;O<C;++O)h=l[O],D.visit(S)}function M(){if(l){var R,O,C=l.length;for(o=new Array(C),R=0;R<C;++R)o[(O=l[R]).index]=+x(O,R,l)}}function I(R){var O,C,D,B,z,Y=0,G=0;if(R.length){for(D=B=z=0;z<4;++z)(O=R[z])&&(C=Math.abs(O.value))&&(Y+=O.value,G+=C,D+=C*O.x,B+=C*O.y);R.x=D/G,R.y=B/G}else{(O=R).x=O.data.x,O.y=O.data.y;do{Y+=o[O.data.index]}while(O=O.next)}R.value=Y}function S(R,O,C,D){if(!R.value)return!0;var B=R.x-h.x,z=R.y-h.y,Y=D-O,G=B*B+z*z;if(Y*Y/_<G)return G<T&&(0===B&&(G+=(B=n())*B),0===z&&(G+=(z=n())*z),G<u&&(G=Math.sqrt(u*G)),h.vx+=B*R.value*d/G,h.vy+=z*R.value*d/G),!0;if(!(R.length||G>=T)){(R.data!==h||R.next)&&(0===B&&(G+=(B=n())*B),0===z&&(G+=(z=n())*z),G<u&&(G=Math.sqrt(u*G)));do{R.data!==h&&(h.vx+=B*(Y=o[R.data.index]*d/G),h.vy+=z*Y)}while(R=R.next)}}return w.initialize=function(R){l=R,M()},w.strength=function(R){return arguments.length?(x="function"==typeof R?R:r(+R),M(),w):x},w.distanceMin=function(R){return arguments.length?(u=R*R,w):Math.sqrt(u)},w.distanceMax=function(R){return arguments.length?(T=R*R,w):Math.sqrt(T)},w.theta=function(R){return arguments.length?(_=R*R,w):Math.sqrt(_)},w},g.forceRadial=function(l,h,d){var o,x,u,T=r(.1);function _(M){for(var I=0,S=o.length;I<S;++I){var R=o[I],O=R.x-h||1e-6,C=R.y-d||1e-6,D=Math.sqrt(O*O+C*C),B=(u[I]-D)*x[I]*M/D;R.vx+=O*B,R.vy+=C*B}}function w(){if(o){var M,I=o.length;for(x=new Array(I),u=new Array(I),M=0;M<I;++M)u[M]=+l(o[M],M,o),x[M]=isNaN(u[M])?0:+T(o[M],M,o)}}return"function"!=typeof l&&(l=r(+l)),null==h&&(h=0),null==d&&(d=0),_.initialize=function(M){o=M,w()},_.strength=function(M){return arguments.length?(T="function"==typeof M?M:r(+M),w(),_):T},_.radius=function(M){return arguments.length?(l="function"==typeof M?M:r(+M),w(),_):l},_.x=function(M){return arguments.length?(h=+M,_):h},_.y=function(M){return arguments.length?(d=+M,_):d},_},g.forceSimulation=function(l){var h,d=1,o=.001,x=1-Math.pow(o,1/300),u=0,T=.6,_=b.map(),w=e.timer(I),M=y.dispatch("tick","end");function I(){S(),M.call("tick",h),d<o&&(w.stop(),M.call("end",h))}function S(C){var D,B,z=l.length;void 0===C&&(C=1);for(var Y=0;Y<C;++Y)for(d+=(u-d)*x,_.each(function(G){G(d)}),D=0;D<z;++D)null==(B=l[D]).fx?B.x+=B.vx*=T:(B.x=B.fx,B.vx=0),null==B.fy?B.y+=B.vy*=T:(B.y=B.fy,B.vy=0);return h}function R(){for(var C,D=0,B=l.length;D<B;++D){if((C=l[D]).index=D,null!=C.fx&&(C.x=C.fx),null!=C.fy&&(C.y=C.fy),isNaN(C.x)||isNaN(C.y)){var z=10*Math.sqrt(D),Y=D*c;C.x=z*Math.cos(Y),C.y=z*Math.sin(Y)}(isNaN(C.vx)||isNaN(C.vy))&&(C.vx=C.vy=0)}}function O(C){return C.initialize&&C.initialize(l),C}return null==l&&(l=[]),R(),h={tick:S,restart:function(){return w.restart(I),h},stop:function(){return w.stop(),h},nodes:function(C){return arguments.length?(l=C,R(),_.each(O),h):l},alpha:function(C){return arguments.length?(d=+C,h):d},alphaMin:function(C){return arguments.length?(o=+C,h):o},alphaDecay:function(C){return arguments.length?(x=+C,h):+x},alphaTarget:function(C){return arguments.length?(u=+C,h):u},velocityDecay:function(C){return arguments.length?(T=1-C,h):1-T},force:function(C,D){return arguments.length>1?(null==D?_.remove(C):_.set(C,O(D)),h):_.get(C)},find:function(C,D,B){var z,Y,G,J,te,X=0,K=l.length;for(null==B?B=1/0:B*=B,X=0;X<K;++X)(G=(z=C-(J=l[X]).x)*z+(Y=D-J.y)*Y)<B&&(te=J,B=G);return te},on:function(C,D){return arguments.length>1?(M.on(C,D),h):M.on(C)}}},g.forceX=function(l){var h,d,o,x=r(.1);function u(_){for(var w,M=0,I=h.length;M<I;++M)(w=h[M]).vx+=(o[M]-w.x)*d[M]*_}function T(){if(h){var _,w=h.length;for(d=new Array(w),o=new Array(w),_=0;_<w;++_)d[_]=isNaN(o[_]=+l(h[_],_,h))?0:+x(h[_],_,h)}}return"function"!=typeof l&&(l=r(null==l?0:+l)),u.initialize=function(_){h=_,T()},u.strength=function(_){return arguments.length?(x="function"==typeof _?_:r(+_),T(),u):x},u.x=function(_){return arguments.length?(l="function"==typeof _?_:r(+_),T(),u):l},u},g.forceY=function(l){var h,d,o,x=r(.1);function u(_){for(var w,M=0,I=h.length;M<I;++M)(w=h[M]).vy+=(o[M]-w.y)*d[M]*_}function T(){if(h){var _,w=h.length;for(d=new Array(w),o=new Array(w),_=0;_<w;++_)d[_]=isNaN(o[_]=+l(h[_],_,h))?0:+x(h[_],_,h)}}return"function"!=typeof l&&(l=r(null==l?0:+l)),u.initialize=function(_){h=_,T()},u.strength=function(_){return arguments.length?(x="function"==typeof _?_:r(+_),T(),u):x},u.y=function(_){return arguments.length?(l="function"==typeof _?_:r(+_),T(),u):l},u},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-quadtree"),v("d3-collection"),v("d3-dispatch"),v("d3-timer")):m(g.d3=g.d3||{},g.d3,g.d3,g.d3,g.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";function m(h,d){if((o=(h=d?h.toExponential(d-1):h.toExponential()).indexOf("e"))<0)return null;var o,x=h.slice(0,o);return[x.length>1?x[0]+x.slice(2):x,+h.slice(o+1)]}function b(h){return(h=m(Math.abs(h)))?h[1]:NaN}var y,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(h){if(!(d=e.exec(h)))throw new Error("invalid format: "+h);var d;return new n({fill:d[1],align:d[2],sign:d[3],symbol:d[4],zero:d[5],width:d[6],comma:d[7],precision:d[8]&&d[8].slice(1),trim:d[9],type:d[10]})}function n(h){this.fill=void 0===h.fill?" ":h.fill+"",this.align=void 0===h.align?">":h.align+"",this.sign=void 0===h.sign?"-":h.sign+"",this.symbol=void 0===h.symbol?"":h.symbol+"",this.zero=!!h.zero,this.width=void 0===h.width?void 0:+h.width,this.comma=!!h.comma,this.precision=void 0===h.precision?void 0:+h.precision,this.trim=!!h.trim,this.type=void 0===h.type?"":h.type+""}function a(h,d){var o=m(h,d);if(!o)return h+"";var x=o[0],u=o[1];return u<0?"0."+new Array(-u).join("0")+x:x.length>u+1?x.slice(0,u+1)+"."+x.slice(u+1):x+new Array(u-x.length+2).join("0")}r.prototype=n.prototype,n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var t={"%":function(h,d){return(100*h).toFixed(d)},b:function(h){return Math.round(h).toString(2)},c:function(h){return h+""},d:function(h){return Math.abs(h=Math.round(h))>=1e21?h.toLocaleString("en").replace(/,/g,""):h.toString(10)},e:function(h,d){return h.toExponential(d)},f:function(h,d){return h.toFixed(d)},g:function(h,d){return h.toPrecision(d)},o:function(h){return Math.round(h).toString(8)},p:function(h,d){return a(100*h,d)},r:a,s:function(h,d){var o=m(h,d);if(!o)return h+"";var x=o[0],u=o[1],T=u-(y=3*Math.max(-8,Math.min(8,Math.floor(u/3))))+1,_=x.length;return T===_?x:T>_?x+new Array(T-_+1).join("0"):T>0?x.slice(0,T)+"."+x.slice(T):"0."+new Array(1-T).join("0")+m(h,Math.max(0,d+T-1))[0]},X:function(h){return Math.round(h).toString(16).toUpperCase()},x:function(h){return Math.round(h).toString(16)}};function p(h){return h}var s,i=Array.prototype.map,f=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function c(h){var d,o,O,x=void 0===h.grouping||void 0===h.thousands?p:(d=i.call(h.grouping,Number),o=h.thousands+"",function(O,C){for(var D=O.length,B=[],z=0,Y=d[0],G=0;D>0&&Y>0&&(G+Y+1>C&&(Y=Math.max(1,C-G)),B.push(O.substring(D-=Y,D+Y)),!((G+=Y+1)>C));)Y=d[z=(z+1)%d.length];return B.reverse().join(o)}),u=void 0===h.currency?"":h.currency[0]+"",T=void 0===h.currency?"":h.currency[1]+"",_=void 0===h.decimal?".":h.decimal+"",w=void 0===h.numerals?p:(O=i.call(h.numerals,String),function(C){return C.replace(/[0-9]/g,function(D){return O[+D]})}),M=void 0===h.percent?"%":h.percent+"",I=void 0===h.minus?"-":h.minus+"",S=void 0===h.nan?"NaN":h.nan+"";function R(O){var C=(O=r(O)).fill,D=O.align,B=O.sign,z=O.symbol,Y=O.zero,G=O.width,J=O.comma,te=O.precision,X=O.trim,K=O.type;"n"===K?(J=!0,K="g"):t[K]||(void 0===te&&(te=12),X=!0,K="g"),(Y||"0"===C&&"="===D)&&(Y=!0,C="0",D="=");var ae="$"===z?u:"#"===z&&/[boxX]/.test(K)?"0"+K.toLowerCase():"",U="$"===z?T:/[%p]/.test(K)?M:"",V=t[K],q=/[defgprs%]/.test(K);function ie(H){var ee,Q,oe,le=ae,de=U;if("c"===K)de=V(H)+de,H="";else{var fe=(H=+H)<0||1/H<0;if(H=isNaN(H)?S:V(Math.abs(H),te),X&&(H=function(_e){e:for(var Ce,Ee=_e.length,Ae=1,ze=-1;Ae<Ee;++Ae)switch(_e[Ae]){case".":ze=Ce=Ae;break;case"0":0===ze&&(ze=Ae),Ce=Ae;break;default:if(!+_e[Ae])break e;ze>0&&(ze=0)}return ze>0?_e.slice(0,ze)+_e.slice(Ce+1):_e}(H)),fe&&0==+H&&"+"!==B&&(fe=!1),le=(fe?"("===B?B:I:"-"===B||"("===B?"":B)+le,de=("s"===K?f[8+y/3]:"")+de+(fe&&"("===B?")":""),q)for(ee=-1,Q=H.length;++ee<Q;)if(48>(oe=H.charCodeAt(ee))||oe>57){de=(46===oe?_+H.slice(ee+1):H.slice(ee))+de,H=H.slice(0,ee);break}}J&&!Y&&(H=x(H,1/0));var be=le.length+H.length+de.length,he=be<G?new Array(G-be+1).join(C):"";switch(J&&Y&&(H=x(he+H,he.length?G-de.length:1/0),he=""),D){case"<":H=le+H+de+he;break;case"=":H=le+he+H+de;break;case"^":H=he.slice(0,be=he.length>>1)+le+H+de+he.slice(be);break;default:H=he+le+H+de}return w(H)}return te=void 0===te?6:/[gprs]/.test(K)?Math.max(1,Math.min(21,te)):Math.max(0,Math.min(20,te)),ie.toString=function(){return O+""},ie}return{format:R,formatPrefix:function(O,C){var D=R(((O=r(O)).type="f",O)),B=3*Math.max(-8,Math.min(8,Math.floor(b(C)/3))),z=Math.pow(10,-B),Y=f[8+B/3];return function(G){return D(z*G)+Y}}}}function l(h){return s=c(h),g.format=s.format,g.formatPrefix=s.formatPrefix,s}l({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),g.FormatSpecifier=n,g.formatDefaultLocale=l,g.formatLocale=c,g.formatSpecifier=r,g.precisionFixed=function(h){return Math.max(0,-b(Math.abs(h)))},g.precisionPrefix=function(h,d){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(b(d)/3)))-b(Math.abs(h)))},g.precisionRound=function(h,d){return h=Math.abs(h),d=Math.abs(d)-h,Math.max(0,b(d)-b(h))+1},Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=typeof globalThis<"u"?globalThis:g||self).d3=g.d3||{})},{}],113:[function(v,re,ne){var g,m;g=this,m=function(g,m,b){"use strict";var y=Math.abs,e=Math.atan,r=Math.atan2,n=Math.cos,a=Math.exp,t=Math.floor,p=Math.log,s=Math.max,i=Math.min,f=Math.pow,c=Math.round,l=Math.sign||function(Ge){return Ge>0?1:Ge<0?-1:0},h=Math.sin,d=Math.tan,o=1e-6,x=Math.PI,u=x/2,T=x/4,_=Math.SQRT1_2,w=D(2),M=D(x),I=2*x,S=180/x,R=x/180;function O(Ge){return Ge>1?u:Ge<-1?-u:Math.asin(Ge)}function C(Ge){return Ge>1?0:Ge<-1?x:Math.acos(Ge)}function D(Ge){return Ge>0?Math.sqrt(Ge):0}function B(Ge){return(a(Ge)-a(-Ge))/2}function z(Ge){return(a(Ge)+a(-Ge))/2}function Y(Ge){var Qe=d(Ge/2),ut=2*p(n(Ge/2))/(Qe*Qe);function ht(kt,Mt){var Nt=n(kt),ln=n(Mt),sn=h(Mt),rn=ln*Nt,mn=-((1-rn?p((1+rn)/2)/(1-rn):-.5)+ut/(1+rn));return[mn*ln*h(kt),mn*sn]}return ht.invert=function(kt,Mt){var Nt,ln=D(kt*kt+Mt*Mt),sn=-Ge/2,rn=50;if(!ln)return[0,0];do{var mn=sn/2,kn=n(mn),In=h(mn),Rn=In/kn,jn=-p(y(kn));sn-=Nt=(2/Rn*jn-ut*Rn-ln)/(-jn/(In*In)+1-ut/(2*kn*kn))*(kn<0?.7:1)}while(y(Nt)>o&&--rn>0);var br=h(sn);return[r(kt*br,ln*n(sn)),O(Mt*br/ln)]},ht}function G(Ge,Qe){var kt,ut=n(Qe),ht=(kt=C(ut*n(Ge/=2)))?kt/Math.sin(kt):1;return[2*ut*h(Ge)*ht,h(Qe)*ht]}function J(Ge){var Qe=h(Ge),ut=n(Ge),ht=Ge>=0?1:-1,kt=d(ht*Ge),Mt=(1+Qe-ut)/2;function Nt(ln,sn){var rn=n(sn),mn=n(ln/=2);return[(1+rn)*h(ln),(ht*sn>-r(mn,kt)-.001?0:10*-ht)+Mt+h(sn)*ut-(1+rn)*Qe*mn]}return Nt.invert=function(ln,sn){var rn=0,mn=0,kn=50;do{var In=n(rn),Rn=h(rn),jn=n(mn),br=h(mn),Cr=1+jn,Hr=Cr*Rn-ln,Kr=Mt+br*ut-Cr*Qe*In-sn,oi=Cr*In/2,Xr=-Rn*br,Oi=Qe*Cr*Rn/2,zi=ut*jn+Qe*In*br,Ea=Xr*Oi-zi*oi,Ki=(Kr*Xr-Hr*zi)/Ea/2,ra=(Hr*Oi-Kr*oi)/Ea;y(ra)>2&&(ra/=2),rn-=Ki,mn-=ra}while((y(Ki)>o||y(ra)>o)&&--kn>0);return ht*mn>-r(n(rn),kt)-.001?[2*rn,mn]:null},Nt}function te(Ge,Qe){var ut=d(Qe/2),ht=D(1-ut*ut),kt=1+ht*n(Ge/=2),Mt=h(Ge)*ht/kt,Nt=ut/kt,ln=Mt*Mt,sn=Nt*Nt;return[4/3*Mt*(3+ln-3*sn),4/3*Nt*(3+3*ln-sn)]}G.invert=function(Ge,Qe){if(!(Ge*Ge+4*Qe*Qe>x*x+o)){var ut=Ge,ht=Qe,kt=25;do{var Mt,Nt=h(ut),ln=h(ut/2),sn=n(ut/2),rn=h(ht),mn=n(ht),kn=h(2*ht),In=rn*rn,Rn=mn*mn,jn=ln*ln,br=1-Rn*sn*sn,Cr=br?C(mn*sn)*D(Mt=1/br):Mt=0,Hr=2*Cr*mn*ln-Ge,Kr=Cr*rn-Qe,oi=Mt*(Rn*jn+Cr*mn*sn*In),Xr=Mt*(.5*Nt*kn-2*Cr*rn*ln),Oi=.25*Mt*(kn*ln-Cr*rn*Rn*Nt),zi=Mt*(In*sn+Cr*jn*mn),Ea=Xr*Oi-zi*oi;if(!Ea)break;var Ki=(Kr*Xr-Hr*zi)/Ea,ra=(Hr*Oi-Kr*oi)/Ea;ut-=Ki,ht-=ra}while((y(Ki)>o||y(ra)>o)&&--kt>0);return[ut,ht]}},te.invert=function(Ge,Qe){if(Qe*=3/8,!(Ge*=3/8)&&y(Qe)>1)return null;var rn,ut=1+Ge*Ge+Qe*Qe,ht=D((ut-D(ut*ut-4*Qe*Qe))/2),kt=O(ht)/3,Mt=ht?(rn=y(Qe/ht),p(rn+D(rn*rn-1))/3):function(rn){return p(rn+D(rn*rn+1))}(y(Ge))/3,Nt=n(kt),ln=z(Mt),sn=ln*ln-Nt*Nt;return[2*l(Ge)*r(B(Mt)*Nt,.25-sn),2*l(Qe)*r(ln*h(kt),.25+sn)]};var X=D(8),K=p(1+w);function ae(Ge,Qe){var ut=y(Qe);return ut<T?[Ge,p(d(T+Qe/2))]:[Ge*n(ut)*(2*w-1/h(ut)),l(Qe)*(2*w*(ut-T)-p(d(ut/2)))]}function U(Ge){var Qe=2*x/Ge;function ut(ht,kt){var Mt=m.geoAzimuthalEquidistantRaw(ht,kt);if(y(ht)>u){var Nt=r(Mt[1],Mt[0]),ln=D(Mt[0]*Mt[0]+Mt[1]*Mt[1]),sn=Qe*c((Nt-u)/Qe)+u,rn=r(h(Nt-=sn),2-n(Nt));Nt=sn+O(x/ln*h(rn))-rn,Mt[0]=ln*n(Nt),Mt[1]=ln*h(Nt)}return Mt}return ut.invert=function(ht,kt){var Mt=D(ht*ht+kt*kt);if(Mt>u){var Nt=r(kt,ht),ln=Qe*c((Nt-u)/Qe)+u,sn=Nt>ln?-1:1,rn=Mt*n(ln-Nt),mn=1/d(sn*C((rn-x)/D(x*(x-2*rn)+Mt*Mt)));Nt=ln+2*e((mn+sn*D(mn*mn-3))/3),ht=Mt*n(Nt),kt=Mt*h(Nt)}return m.geoAzimuthalEquidistantRaw.invert(ht,kt)},ut}function V(Ge,Qe){if(arguments.length<2&&(Qe=Ge),1===Qe)return m.geoAzimuthalEqualAreaRaw;if(Qe===1/0)return q;function ut(ht,kt){var Mt=m.geoAzimuthalEqualAreaRaw(ht/Qe,kt);return Mt[0]*=Ge,Mt}return ut.invert=function(ht,kt){var Mt=m.geoAzimuthalEqualAreaRaw.invert(ht/Ge,kt);return Mt[0]*=Qe,Mt},ut}function q(Ge,Qe){return[Ge*n(Qe)/n(Qe/=2),2*h(Qe)]}function ie(Ge,Qe,ut){var ht,kt,Mt,Nt=100;ut=void 0===ut?0:+ut,Qe=+Qe;do{(kt=Ge(ut))===(Mt=Ge(ut+o))&&(Mt=kt+o),ut-=ht=-1*o*(kt-Qe)/(kt-Mt)}while(Nt-- >0&&y(ht)>o);return Nt<0?NaN:ut}function H(Ge,Qe,ut){return void 0===Qe&&(Qe=40),void 0===ut&&(ut=1e-12),function(ht,kt,Mt,Nt){var ln,sn,rn;Mt=void 0===Mt?0:+Mt,Nt=void 0===Nt?0:+Nt;for(var mn=0;mn<Qe;mn++){var kn=Ge(Mt,Nt),In=kn[0]-ht,Rn=kn[1]-kt;if(y(In)<ut&&y(Rn)<ut)break;var jn=In*In+Rn*Rn;if(jn>ln)Mt-=sn/=2,Nt-=rn/=2;else{ln=jn;var br=(Mt>0?-1:1)*ut,Cr=(Nt>0?-1:1)*ut,Hr=Ge(Mt+br,Nt),Kr=Ge(Mt,Nt+Cr),oi=(Hr[0]-kn[0])/br,Xr=(Hr[1]-kn[1])/br,Oi=(Kr[0]-kn[0])/Cr,zi=(Kr[1]-kn[1])/Cr,Ea=zi*oi-Xr*Oi,Ki=(y(Ea)<.5?.5:1)/Ea;if(Mt+=sn=(Rn*Oi-In*zi)*Ki,Nt+=rn=(In*Xr-Rn*oi)*Ki,y(sn)<ut&&y(rn)<ut)break}}return[Mt,Nt]}}function ee(){var Ge=V(1.68,2);function Qe(ut,ht){if(ut+ht<-1.4){var kt=(ut-ht+1.6)*(ut+ht+1.4)/8;ut+=kt,ht-=.8*kt*h(ht+x/2)}var Mt=Ge(ut,ht),Nt=(1-n(ut*ht))/12;return Mt[1]<0&&(Mt[0]*=1+Nt),Mt[1]>0&&(Mt[1]*=1+Nt/1.5*Mt[0]*Mt[0]),Mt}return Qe.invert=H(Qe),Qe}function Q(Ge,Qe){var ut,ht=Ge*h(Qe),kt=30;do{Qe-=ut=(Qe+h(Qe)-ht)/(1+n(Qe))}while(y(ut)>o&&--kt>0);return Qe/2}function oe(Ge,Qe,ut){function ht(kt,Mt){return[Ge*kt*n(Mt=Q(ut,Mt)),Qe*h(Mt)]}return ht.invert=function(kt,Mt){return Mt=O(Mt/Qe),[kt/(Ge*n(Mt)),O((2*Mt+h(2*Mt))/ut)]},ht}ae.invert=function(Ge,Qe){if((ht=y(Qe))<K)return[Ge,2*e(a(Qe))-u];var ut,ht,kt=T,Mt=25;do{var Nt=n(kt/2),ln=d(kt/2);kt-=ut=(X*(kt-T)-p(ln)-ht)/(X-Nt*Nt/(2*ln))}while(y(ut)>1e-12&&--Mt>0);return[Ge/(n(kt)*(X-1/h(kt))),l(Qe)*kt]},q.invert=function(Ge,Qe){var ut=2*O(Qe/2);return[Ge*n(ut/2)/n(ut),ut]};var le=oe(w/u,w,x),de=2.00276;function be(Ge,Qe){var ut=Q(x,Qe);return[de*Ge/(1/n(Qe)+1.11072/n(ut)),(Qe+w*h(ut))/de]}function he(Ge){var Qe=0,ut=m.geoProjectionMutator(Ge),ht=ut(Qe);return ht.parallel=function(kt){return arguments.length?ut(Qe=kt*R):Qe*S},ht}function _e(Ge,Qe){return[Ge*n(Qe),Qe]}function Ce(Ge){if(!Ge)return _e;var Qe=1/d(Ge);function ut(ht,kt){var Mt=Qe+Ge-kt,Nt=Mt&&ht*n(kt)/Mt;return[Mt*h(Nt),Qe-Mt*n(Nt)]}return ut.invert=function(ht,kt){var Mt=D(ht*ht+(kt=Qe-kt)*kt),Nt=Qe+Ge-Mt;return[Mt/n(Nt)*r(ht,kt),Nt]},ut}function Ee(Ge){function Qe(ut,ht){var kt=u-ht,Mt=kt&&ut*Ge*h(kt)/kt;return[kt*h(Mt)/Ge,u-kt*n(Mt)]}return Qe.invert=function(ut,ht){var kt=ut*Ge,Mt=u-ht,Nt=D(kt*kt+Mt*Mt),ln=r(kt,Mt);return[(Nt?Nt/h(Nt):1)*ln/Ge,u-Nt]},Qe}be.invert=function(Ge,Qe){var ut,ht,kt=de*Qe,Mt=Qe<0?-T:T,Nt=25;do{ht=kt-w*h(Mt),Mt-=ut=(h(2*Mt)+2*Mt-x*h(ht))/(2*n(2*Mt)+2+x*n(ht)*w*n(Mt))}while(y(ut)>o&&--Nt>0);return ht=kt-w*h(Mt),[Ge*(1/n(ht)+1.11072/n(Mt))/de,ht]},_e.invert=function(Ge,Qe){return[Ge/n(Qe),Qe]};var Ae=oe(1,4/x,x);function ze(Ge,Qe,ut,ht,kt,Mt){var Nt,ln=n(Mt);if(y(Ge)>1||y(Mt)>1)Nt=C(ut*kt+Qe*ht*ln);else{var sn=h(Ge/2),rn=h(Mt/2);Nt=2*O(D(sn*sn+Qe*ht*rn*rn))}return y(Nt)>o?[Nt,r(ht*h(Mt),Qe*kt-ut*ht*ln)]:[0,0]}function ve(Ge,Qe,ut){return C((Ge*Ge+Qe*Qe-ut*ut)/(2*Ge*Qe))}function Te(Ge){return Ge-2*x*t((Ge+x)/(2*x))}function Ie(Ge,Qe,ut){for(var ht,kt=[[Ge[0],Ge[1],h(Ge[1]),n(Ge[1])],[Qe[0],Qe[1],h(Qe[1]),n(Qe[1])],[ut[0],ut[1],h(ut[1]),n(ut[1])]],Mt=kt[2],Nt=0;Nt<3;++Nt,Mt=ht)Mt.v=ze((ht=kt[Nt])[1]-Mt[1],Mt[3],Mt[2],ht[3],ht[2],ht[0]-Mt[0]),Mt.point=[0,0];var ln=ve(kt[0].v[0],kt[2].v[0],kt[1].v[0]),sn=ve(kt[0].v[0],kt[1].v[0],kt[2].v[0]),rn=x-ln;kt[2].point[1]=0,kt[0].point[0]=-(kt[1].point[0]=kt[0].v[0]/2);var mn=[kt[2].point[0]=kt[0].point[0]+kt[2].v[0]*n(ln),2*(kt[0].point[1]=kt[1].point[1]=kt[2].v[0]*h(ln))];return function(kn,In){var Rn,jn=h(In),br=n(In),Cr=new Array(3);for(Rn=0;Rn<3;++Rn){var Hr=kt[Rn];if(Cr[Rn]=ze(In-Hr[1],Hr[3],Hr[2],br,jn,kn-Hr[0]),!Cr[Rn][0])return Hr.point;Cr[Rn][1]=Te(Cr[Rn][1]-Hr.v[1])}var Kr=mn.slice();for(Rn=0;Rn<3;++Rn){var Xr=ve(kt[Rn].v[0],Cr[Rn][0],Cr[2==Rn?0:Rn+1][0]);Cr[Rn][1]<0&&(Xr=-Xr),Rn?1==Rn?(Kr[0]-=Cr[Rn][0]*n(Xr=sn-Xr),Kr[1]-=Cr[Rn][0]*h(Xr)):(Kr[0]+=Cr[Rn][0]*n(Xr=rn-Xr),Kr[1]+=Cr[Rn][0]*h(Xr)):(Kr[0]+=Cr[Rn][0]*n(Xr),Kr[1]-=Cr[Rn][0]*h(Xr))}return Kr[0]/=3,Kr[1]/=3,Kr}}function De(Ge){return Ge[0]*=R,Ge[1]*=R,Ge}function Fe(Ge,Qe,ut){var ht=m.geoCentroid({type:"MultiPoint",coordinates:[Ge,Qe,ut]}),kt=[-ht[0],-ht[1]],Mt=m.geoRotation(kt),Nt=Ie(De(Mt(Ge)),De(Mt(Qe)),De(Mt(ut)));Nt.invert=H(Nt);var ln=m.geoProjection(Nt).rotate(kt),sn=ln.center;return delete ln.rotate,ln.center=function(rn){return arguments.length?sn(Mt(rn)):Mt.invert(sn())},ln.clipAngle(90)}function Ue(Ge,Qe){var ut=D(1-h(Qe));return[2/M*Ge*ut,M*(1-ut)]}function qe(Ge){var Qe=d(Ge);function ut(ht,kt){return[ht,(ht?ht/h(ht):1)*(h(kt)*n(ht)-Qe*n(kt))]}return ut.invert=Qe?function(ht,kt){ht&&(kt*=h(ht)/ht);var Mt=n(ht);return[ht,2*r(D(Mt*Mt+Qe*Qe-kt*kt)-Mt,Qe-kt)]}:function(ht,kt){return[ht,O(ht?kt*d(ht)/ht:kt)]},ut}Ue.invert=function(Ge,Qe){var ut=(ut=Qe/M-1)*ut;return[ut>0?Ge*D(x/ut)/2:0,O(1-ut)]};var je=D(3);function rt(Ge,Qe){return[je*Ge*(2*n(2*Qe/3)-1)/M,je*M*h(Qe/3)]}function Ne(Ge){var Qe=n(Ge);function ut(ht,kt){return[ht*Qe,h(kt)/Qe]}return ut.invert=function(ht,kt){return[ht/Qe,O(kt*Qe)]},ut}function Be(Ge){var Qe=n(Ge);function ut(ht,kt){return[ht*Qe,(1+Qe)*d(kt/2)]}return ut.invert=function(ht,kt){return[ht/Qe,2*e(kt/(1+Qe))]},ut}function We(Ge,Qe){var ut=D(8/(3*x));return[ut*Ge*(1-y(Qe)/x),ut*Qe]}function Ye(Ge,Qe){var ut=D(4-3*h(y(Qe)));return[2/D(6*x)*Ge*ut,l(Qe)*D(2*x/3)*(2-ut)]}function lt(Ge,Qe){var ut=D(x*(4+x));return[2/ut*Ge*(1+D(1-4*Qe*Qe/(x*x))),4/ut*Qe]}function mt(Ge,Qe){var ut=(2+u)*h(Qe);Qe/=2;for(var ht=0,kt=1/0;ht<10&&y(kt)>o;ht++){var Mt=n(Qe);Qe-=kt=(Qe+h(Qe)*(Mt+2)-ut)/(2*Mt*(1+Mt))}return[2/D(x*(4+x))*Ge*(1+n(Qe)),2*D(x/(4+x))*h(Qe)]}function Tt(Ge,Qe){return[Ge*(1+n(Qe))/D(2+x),2*Qe/D(2+x)]}function It(Ge,Qe){for(var ut=(1+u)*h(Qe),ht=0,kt=1/0;ht<10&&y(kt)>o;ht++)Qe-=kt=(Qe+h(Qe)-ut)/(1+n(Qe));return ut=D(2+x),[Ge*(1+n(Qe))/ut,2*Qe/ut]}rt.invert=function(Ge,Qe){var ut=3*O(Qe/(je*M));return[M*Ge/(je*(2*n(2*ut/3)-1)),ut]},We.invert=function(Ge,Qe){var ut=D(8/(3*x)),ht=Qe/ut;return[Ge/(ut*(1-y(ht)/x)),ht]},Ye.invert=function(Ge,Qe){var ut=2-y(Qe)/D(2*x/3);return[Ge*D(6*x)/(2*ut),l(Qe)*O((4-ut*ut)/3)]},lt.invert=function(Ge,Qe){var ut=D(x*(4+x))/2;return[Ge*ut/(1+D(1-Qe*Qe*(4+x)/(4*x))),Qe*ut/2]},mt.invert=function(Ge,Qe){var ut=Qe*D((4+x)/x)/2,ht=O(ut),kt=n(ht);return[Ge/(2/D(x*(4+x))*(1+kt)),O((ht+ut*(kt+2))/(2+u))]},Tt.invert=function(Ge,Qe){var ut=D(2+x),ht=Qe*ut/2;return[ut*Ge/(1+n(ht)),ht]},It.invert=function(Ge,Qe){var ut=1+u,ht=D(ut/2);return[2*Ge*ht/(1+n(Qe*=ht)),O((Qe+h(Qe))/ut)]};var Ct=3+2*w;function ct(Ge,Qe){var ut=h(Ge/=2),ht=n(Ge),kt=D(n(Qe)),Mt=n(Qe/=2),Nt=h(Qe)/(Mt+w*ht*kt),ln=D(2/(1+Nt*Nt)),sn=D((w*Mt+(ht+ut)*kt)/(w*Mt+(ht-ut)*kt));return[Ct*(ln*(sn-1/sn)-2*p(sn)),Ct*(ln*Nt*(sn+1/sn)-2*e(Nt))]}ct.invert=function(Ge,Qe){if(!(ut=te.invert(Ge/1.2,1.065*Qe)))return null;var ut,ht=ut[0],kt=ut[1],Mt=20;Ge/=Ct,Qe/=Ct;do{var Nt=ht/2,ln=kt/2,sn=h(Nt),rn=n(Nt),mn=h(ln),kn=n(ln),In=n(kt),Rn=D(In),jn=mn/(kn+w*rn*Rn),br=jn*jn,Cr=D(2/(1+br)),Hr=(w*kn+(rn+sn)*Rn)/(w*kn+(rn-sn)*Rn),Kr=D(Hr),oi=Kr-1/Kr,Xr=Kr+1/Kr,Oi=Cr*oi-2*p(Kr)-Ge,zi=Cr*jn*Xr-2*e(jn)-Qe,Ea=mn&&_*Rn*sn*br/mn,Ki=(w*rn*kn+Rn)/(2*(kn+w*rn*Rn)*(kn+w*rn*Rn)*Rn),ra=-.5*jn*Cr*Cr*Cr,go=ra*Ea,io=ra*Ki,Ha=(Ha=2*kn+w*Rn*(rn-sn))*Ha*Kr,xa=(w*rn*kn*Rn+In)/Ha,xo=-w*sn*mn/(Rn*Ha),Yo=oi*go-2*xa/Kr+Cr*(xa+xa/Hr),ts=oi*io-2*xo/Kr+Cr*(xo+xo/Hr),ns=jn*Xr*go-2*Ea/(1+br)+Cr*Xr*Ea+Cr*jn*(xa-xa/Hr),hs=jn*Xr*io-2*Ki/(1+br)+Cr*Xr*Ki+Cr*jn*(xo-xo/Hr),ds=ts*ns-hs*Yo;if(!ds)break;var ba=(zi*ts-Oi*hs)/ds,_t=(Oi*ns-zi*Yo)/ds;ht-=ba,kt=s(-u,i(u,kt-_t))}while((y(ba)>o||y(_t)>o)&&--Mt>0);return y(y(kt)-u)<o?[0,kt]:Mt&&[ht,kt]};var at=n(35*R);function St(Ge,Qe){var ut=d(Qe/2);return[Ge*at*D(1-ut*ut),(1+at)*ut]}function Xt(Ge,Qe){var ut=Qe/2,ht=n(ut);return[2*Ge/M*n(Qe)*ht*ht,M*d(ut)]}function tn(Ge){var Qe=1-Ge,ut=kt(x,0)[0]-kt(-x,0)[0],ht=D(2*(kt(0,u)[1]-kt(0,-u)[1])/ut);function kt(ln,sn){var rn=n(sn),mn=h(sn);return[rn/(Qe+Ge*rn)*ln,Qe*sn+Ge*mn]}function Mt(ln,sn){var rn=kt(ln,sn);return[rn[0]*ht,rn[1]/ht]}function Nt(ln){return Mt(0,ln)[1]}return Mt.invert=function(ln,sn){var rn=ie(Nt,sn);return[ln/ht*(Ge+Qe/n(rn)),rn]},Mt}function hn(Ge){return[Ge[0]/2,O(d(Ge[1]/2*R))*S]}function cn(Ge){return[2*Ge[0],2*e(h(Ge[1]*R))*S]}function yn(Ge,Qe){var ut=2*x/Qe,ht=Ge*Ge;function kt(Mt,Nt){var ln=m.geoAzimuthalEquidistantRaw(Mt,Nt),sn=ln[0],rn=ln[1],mn=sn*sn+rn*rn;if(mn>ht){var kn=D(mn),In=r(rn,sn),Rn=ut*c(In/ut),jn=In-Rn,br=Ge*n(jn),Cr=(Ge*h(jn)-jn*h(br))/(u-br),Hr=en(jn,Cr),Kr=(x-Ge)/Xe(Hr,br,x);sn=kn;var oi,Xr=50;do{sn-=oi=(Ge+Xe(Hr,br,sn)*Kr-kn)/(Hr(sn)*Kr)}while(y(oi)>o&&--Xr>0);rn=jn*h(sn),sn<u&&(rn-=Cr*(sn-u));var Oi=h(Rn),zi=n(Rn);ln[0]=sn*zi-rn*Oi,ln[1]=sn*Oi+rn*zi}return ln}return kt.invert=function(Mt,Nt){var ln=Mt*Mt+Nt*Nt;if(ln>ht){var sn=D(ln),rn=r(Nt,Mt),mn=ut*c(rn/ut),kn=rn-mn;Mt=sn*n(kn),Nt=sn*h(kn);for(var In=Mt-u,Rn=h(Mt),jn=Nt/Rn,br=Mt<u?1/0:0,Cr=10;;){var Hr=Ge*h(jn),Kr=Ge*n(jn),oi=h(Kr),Xr=u-Kr,Oi=(Hr-jn*oi)/Xr,zi=en(jn,Oi);if(y(br)<1e-12||!--Cr)break;jn-=br=(jn*Rn-Oi*In-Nt)/(Rn-2*In*(Xr*(Kr+jn*Hr*n(Kr)-oi)-Hr*(Hr-jn*oi))/(Xr*Xr))}Mt=(sn=Ge+Xe(zi,Kr,Mt)*(x-Ge)/Xe(zi,Kr,x))*n(rn=mn+jn),Nt=sn*h(rn)}return m.geoAzimuthalEquidistantRaw.invert(Mt,Nt)},kt}function en(Ge,Qe){return function(ut){var ht=Ge*n(ut);return ut<u&&(ht-=Qe),D(1+ht*ht)}}function Xe(Ge,Qe,ut){for(var ht=(ut-Qe)/50,kt=Ge(Qe)+Ge(ut),Mt=1,Nt=Qe;Mt<50;++Mt)kt+=2*Ge(Nt+=ht);return.5*kt*ht}function tt(Ge,Qe,ut,ht,kt,Mt,Nt,ln){function sn(rn,mn){if(!mn)return[Ge*rn/x,0];var kn=mn*mn,In=Ge+kn*(Qe+kn*(ut+kn*ht)),Rn=mn*(kt-1+kn*(Mt-ln+kn*Nt)),jn=(In*In+Rn*Rn)/(2*Rn),br=rn*O(In/jn)/x;return[jn*h(br),mn*(1+kn*ln)+jn*(1-n(br))]}return arguments.length<8&&(ln=0),sn.invert=function(rn,mn){var kn,In,Rn=x*rn/Ge,jn=mn,br=50;do{var Cr=jn*jn,Hr=Ge+Cr*(Qe+Cr*(ut+Cr*ht)),Kr=jn*(kt-1+Cr*(Mt-ln+Cr*Nt)),oi=Hr*Hr+Kr*Kr,Xr=2*Kr,Oi=oi/Xr,zi=Oi*Oi,Ea=O(Hr/Oi)/x,Ki=Rn*Ea,ra=Hr*Hr,go=(2*Qe+Cr*(4*ut+6*Cr*ht))*jn,io=kt+Cr*(3*Mt+5*Cr*Nt),Ha=(2*(Hr*go+Kr*(io-1))*Xr-oi*(2*(io-1)))/(Xr*Xr),xa=n(Ki),xo=h(Ki),Yo=Oi*xa,ts=Oi*xo,ns=Rn/x*(1/D(1-ra/zi))*(go*Oi-Hr*Ha)/zi,hs=ts-rn,ds=jn*(1+Cr*ln)+Oi-Yo-mn,ba=Ha*xo+Yo*ns,_t=Yo*Ea,Ht=1+Ha-(Ha*xa-ts*ns),_n=ts*Ea,Jt=ba*_n-Ht*_t;if(!Jt)break;Rn-=kn=(ds*ba-hs*Ht)/Jt,jn-=In=(hs*_n-ds*_t)/Jt}while((y(kn)>o||y(In)>o)&&--br>0);return[Rn,jn]},sn}St.invert=function(Ge,Qe){var ut=Qe/(1+at);return[Ge&&Ge/(at*D(1-ut*ut)),2*e(ut)]},Xt.invert=function(Ge,Qe){var ut=e(Qe/M),ht=n(ut),kt=2*ut;return[Ge*M/2/(n(kt)*ht*ht),kt]};var ye=tt(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),ke=tt(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ve=tt(5/6*x,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Je(Ge,Qe){var ut=Ge*Ge,ht=Qe*Qe;return[Ge*(1-.162388*ht)*(.87-952426e-9*ut*ut),Qe*(1+ht/12)]}Je.invert=function(Ge,Qe){var ut,ht=Ge,kt=Qe,Mt=50;do{var Nt=kt*kt;kt-=ut=(kt*(1+Nt/12)-Qe)/(1+Nt/4)}while(y(ut)>o&&--Mt>0);Mt=50,Ge/=1-.162388*Nt;do{var ln=(ln=ht*ht)*ln;ht-=ut=(ht*(.87-952426e-9*ln)-Ge)/(.87-.00476213*ln)}while(y(ut)>o&&--Mt>0);return[ht,kt]};var nt=tt(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ke(Ge){var Qe=Ge(u,0)[0]-Ge(-u,0)[0];function ut(ht,kt){var Mt=ht>0?-.5:.5,Nt=Ge(ht+Mt*x,kt);return Nt[0]-=Mt*Qe,Nt}return Ge.invert&&(ut.invert=function(ht,kt){var Mt=ht>0?-.5:.5,Nt=Ge.invert(ht+Mt*Qe,kt),ln=Nt[0]-Mt*x;return ln<-x?ln+=2*x:ln>x&&(ln-=2*x),Nt[0]=ln,Nt}),ut}function vt(Ge,Qe){var ut=l(Ge),ht=l(Qe),kt=n(Qe),Mt=n(Ge)*kt,Nt=h(Ge)*kt,ln=h(ht*Qe);Ge=y(r(Nt,ln)),Qe=O(Mt),y(Ge-u)>o&&(Ge%=u);var sn=function(rn,mn){if(mn===u)return[0,0];var kn,In,Rn=h(mn),jn=Rn*Rn,br=jn*jn,Cr=1+br,Hr=1+3*br,Kr=1-br,oi=O(1/D(Cr)),Xr=Kr+jn*Cr*oi,Oi=(1-Rn)/Xr,zi=D(Oi),Ea=Oi*Cr,Ki=D(Ea),ra=zi*Kr;if(0===rn)return[0,-(ra+jn*Ki)];var go,io=n(mn),Ha=1/io,xa=2*Rn*io,xo=(-Xr*io-(-3*jn+oi*Hr)*xa*(1-Rn))/(Xr*Xr),Yo=-Ha*xa,ts=-Ha*(jn*Cr*xo+Oi*Hr*xa),ns=-2*Ha*(Kr*(.5*xo/zi)-2*jn*zi*xa),hs=4*rn/x;if(rn>.222*x||mn<x/4&&rn>.175*x){if(kn=(ra+jn*D(Ea*(1+br)-ra*ra))/(1+br),rn>x/4)return[kn,kn];var ds=kn,ba=.5*kn;kn=.5*(ba+ds),In=50;do{var Ht=kn*(ns+Yo*D(Ea-kn*kn))+ts*O(kn/Ki)-hs;if(!Ht)break;Ht<0?ba=kn:ds=kn,kn=.5*(ba+ds)}while(y(ds-ba)>o&&--In>0)}else{kn=o,In=25;do{var _n=kn*kn,Jt=D(Ea-_n),wn=ns+Yo*Jt,Xn=kn*wn+ts*O(kn/Ki)-hs;kn-=go=Jt?Xn/(wn+(ts-Yo*_n)/Jt):0}while(y(go)>o&&--In>0)}return[kn,-ra-jn*D(Ea-kn*kn)]}(Ge>x/4?u-Ge:Ge,Qe);return Ge>x/4&&(ln=sn[0],sn[0]=-sn[1],sn[1]=-ln),sn[0]*=ut,sn[1]*=-ht,sn}function gt(Ge,Qe){var ut,ht,kt,Mt,Nt,ln;if(Qe<o)return[(Mt=h(Ge))-(ut=Qe*(Ge-Mt*(ht=n(Ge)))/4)*ht,ht+ut*Mt,1-Qe*Mt*Mt/2,Ge-ut];if(Qe>=1-o)return ut=(1-Qe)/4,kt=1/(ht=z(Ge)),[(Mt=((ln=a(2*(ln=Ge)))-1)/(ln+1))+ut*((Nt=ht*B(Ge))-Ge)/(ht*ht),kt-ut*Mt*kt*(Nt-Ge),kt+ut*Mt*kt*(Nt+Ge),2*e(a(Ge))-u+ut*(Nt-Ge)/ht];var sn=[1,0,0,0,0,0,0,0,0],rn=[D(Qe),0,0,0,0,0,0,0,0],mn=0;for(ht=D(1-Qe),Nt=1;y(rn[mn]/sn[mn])>o&&mn<8;)ut=sn[mn++],rn[mn]=(ut-ht)/2,sn[mn]=(ut+ht)/2,ht=D(ut*ht),Nt*=2;kt=Nt*sn[mn]*Ge;do{kt=(O(Mt=rn[mn]*h(ht=kt)/sn[mn])+kt)/2}while(--mn);return[h(kt),Mt=n(kt),Mt/n(kt-ht),kt]}function Ot(Ge,Qe){if(!Qe)return Ge;if(1===Qe)return p(d(Ge/2+T));for(var ut=1,ht=D(1-Qe),kt=D(Qe),Mt=0;y(kt)>o;Mt++){if(Ge%x){var Nt=e(ht*d(Ge)/ut);Nt<0&&(Nt+=x),Ge+=Nt+~~(Ge/x)*x}else Ge+=Ge;kt=(ut+ht)/2,ht=D(ut*ht),kt=((ut=kt)-ht)/2}return Ge/(f(2,Mt)*ut)}function Vt(Ge,Qe){var rn,mn,kn,In,Rn,ut=(w-1)/(w+1),ht=D(1-ut*ut),kt=Ot(u,ht*ht),Mt=p(d(x/4+y(Qe)/2)),Nt=a(-1*Mt)/D(ut),ln=(rn=Nt*n(-1*Ge),In=(mn=Nt*h(-1*Ge))+1,[.5*((rn>=0?u:-u)-r(Rn=1-(kn=rn*rn)-mn*mn,2*rn)),-.25*p(Rn*Rn+4*kn)+.5*p(In*In+kn)]),sn=function(rn,mn,kn){var In=y(rn),Rn=B(y(mn));if(In){var jn=1/h(In),br=1/(d(In)*d(In)),Cr=-(br+kn*(Rn*Rn*jn*jn)-1+kn),Hr=(-Cr+D(Cr*Cr-(kn-1)*br*4))/2;return[Ot(e(1/D(Hr)),kn)*l(rn),Ot(e(D((Hr/br-1)/kn)),1-kn)*l(mn)]}return[0,Ot(e(Rn),1-kn)*l(mn)]}(ln[0],ln[1],ht*ht);return[-sn[1],(Qe>=0?1:-1)*(.5*kt-sn[0])]}function ft(Ge){var Qe=h(Ge),ut=n(Ge),ht=bt(Ge);function kt(Mt,Nt){var ln=ht(Mt,Nt);Mt=ln[0];var sn=h(Nt=ln[1]),rn=n(Nt),mn=n(Mt),kn=C(Qe*sn+ut*rn*mn),In=h(kn),Rn=y(In)>o?kn/In:1;return[Rn*ut*h(Mt),(y(Mt)>u?Rn:-Rn)*(Qe*rn-ut*sn*mn)]}return ht.invert=bt(-Ge),kt.invert=function(Mt,Nt){var ln=D(Mt*Mt+Nt*Nt),sn=-h(ln),rn=n(ln),mn=ln*rn,kn=-Nt*sn,In=ln*Qe,Rn=D(mn*mn+kn*kn-In*In),jn=r(mn*In+kn*Rn,kn*In-mn*Rn),br=(ln>u?-1:1)*r(Mt*sn,ln*n(jn)*rn+Nt*h(jn)*sn);return ht.invert(br,jn)},kt}function bt(Ge){var Qe=h(Ge),ut=n(Ge);return function(ht,kt){var Mt=n(kt),Nt=n(ht)*Mt,ln=h(ht)*Mt,sn=h(kt);return[r(ln,Nt*ut-sn*Qe),O(sn*ut+Nt*Qe)]}}vt.invert=function(Ge,Qe){y(Ge)>1&&(Ge=2*l(Ge)-Ge),y(Qe)>1&&(Qe=2*l(Qe)-Qe);var ut=l(Ge),ht=l(Qe),kt=-ut*Ge,Mt=-ht*Qe,Nt=Mt/kt<1,ln=function(kn,In){for(var Rn=0,jn=1,br=.5,Cr=50;;){var Hr=br*br,Kr=D(br),oi=O(1/D(1+Hr)),Xr=1-Hr+br*(1+Hr)*oi,Oi=(1-Kr)/Xr,zi=D(Oi),Ea=Oi*(1+Hr),Ki=zi*(1-Hr),ra=D(Ea-kn*kn),go=In+Ki+br*ra;if(y(jn-Rn)<1e-12||0==--Cr||0===go)break;go>0?Rn=br:jn=br,br=.5*(Rn+jn)}if(!Cr)return null;var io=O(Kr),Ha=n(io),xa=1/Ha,xo=2*Kr*Ha,Yo=(-Xr*Ha-(-3*br+oi*(1+3*Hr))*xo*(1-Kr))/(Xr*Xr);return[x/4*(kn*(-2*xa*(.5*Yo/zi*(1-Hr)-2*br*zi*xo)+-xa*xo*ra)+-xa*(br*(1+Hr)*Yo+Oi*(1+3*Hr)*xo)*O(kn/D(Ea))),io]}(Nt?Mt:kt,Nt?kt:Mt),sn=ln[0],rn=ln[1],mn=n(rn);return Nt&&(sn=-u-sn),[ut*(r(h(sn)*mn,-h(rn))+x),ht*O(n(sn)*mn)]},Vt.invert=function(Ge,Qe){var ut,ht,kt,Mt,Nt,ln,Rn,jn,br,sn=(w-1)/(w+1),rn=D(1-sn*sn),kn=(ht=-Ge,kt=rn*rn,(ut=.5*Ot(u,rn*rn)-Qe)?(Mt=gt(ut,kt),ht?(ln=(Nt=gt(ht,1-kt))[1]*Nt[1]+kt*Mt[0]*Mt[0]*Nt[0]*Nt[0],[[Mt[0]*Nt[2]/ln,Mt[1]*Mt[2]*Nt[0]*Nt[1]/ln],[Mt[1]*Nt[1]/ln,-Mt[0]*Mt[2]*Nt[0]*Nt[2]/ln],[Mt[2]*Nt[1]*Nt[2]/ln,-kt*Mt[0]*Mt[1]*Nt[0]/ln]]):[[Mt[0],0],[Mt[1],0],[Mt[2],0]]):[[0,(Nt=gt(ht,1-kt))[0]/Nt[1]],[1/Nt[1],0],[Nt[2]/Nt[1],0]]),In=[((Rn=kn[0])[0]*(jn=kn[1])[0]+Rn[1]*jn[1])/(br=jn[0]*jn[0]+jn[1]*jn[1]),(Rn[1]*jn[0]-Rn[0]*jn[1])/br];return[r(In[1],In[0])/-1,2*e(a(-.5*p(sn*In[0]*In[0]+sn*In[1]*In[1])))-u]};var Wt=O(1-1/3)*S,Pt=Ne(0);function Bt(Ge){var Qe=Wt*R,ut=Ue(x,Qe)[0]-Ue(-x,Qe)[0],ht=Pt(0,Qe)[1],kt=Ue(0,Qe)[1],Mt=M-kt,Nt=I/Ge,ln=4/I,sn=ht+Mt*Mt*4/I;function rn(mn,kn){var In,Rn=y(kn);if(Rn>Qe){var jn=i(Ge-1,s(0,t((mn+x)/Nt)));(In=Ue(mn+=x*(Ge-1)/Ge-jn*Nt,Rn))[0]=In[0]*I/ut-I*(Ge-1)/(2*Ge)+jn*I/Ge,In[1]=ht+4*(In[1]-kt)*Mt/I,kn<0&&(In[1]=-In[1])}else In=Pt(mn,kn);return In[0]*=ln,In[1]/=sn,In}return rn.invert=function(mn,kn){mn/=ln;var In=y(kn*=sn);if(In>ht){var Rn=i(Ge-1,s(0,t((mn+x)/Nt))),jn=Ue.invert(mn=(mn+x*(Ge-1)/Ge-Rn*Nt)*ut/I,.25*(In-ht)*I/Mt+kt);return jn[0]-=x*(Ge-1)/Ge-Rn*Nt,kn<0&&(jn[1]=-jn[1]),jn}return Pt.invert(mn,kn)},rn}function Pe(Ge,Qe){return[Ge,1&Qe?90-o:Wt]}function et(Ge,Qe){return[Ge,1&Qe?-90+o:-Wt]}function dt(Ge){return[Ge[0]*(1-o),Ge[1]]}function xt(Ge){var Qe,ut=1+Ge,ht=O(h(1/ut)),kt=2*D(x/(Qe=x+4*ht*ut)),Mt=.5*kt*(ut+D(Ge*(2+Ge))),Nt=Ge*Ge,ln=ut*ut;function sn(rn,mn){var kn,In,Rn=1-h(mn);if(Rn&&Rn<2){var jn,br=u-mn,Cr=25;do{var Hr=h(br),Kr=n(br),oi=ht+r(Hr,ut-Kr),Xr=1+ln-2*ut*Kr;br-=jn=(br-Nt*ht-ut*Hr+Xr*oi-.5*Rn*Qe)/(2*ut*Hr*oi)}while(y(jn)>1e-12&&--Cr>0);kn=kt*D(Xr),In=rn*oi/x}else kn=kt*(Ge+Rn),In=rn*ht/x;return[kn*h(In),Mt-kn*n(In)]}return sn.invert=function(rn,mn){var kn=rn*rn+(mn-=Mt)*mn,In=(1+ln-kn/(kt*kt))/(2*ut),Rn=C(In),jn=h(Rn),br=ht+r(jn,ut-In);return[O(rn/D(kn))*x/br,O(1-2*(Rn-Nt*ht-ut*jn+(1+ln-2*ut*In)*br)/Qe)]},sn}function Rt(Ge,Qe){return Qe>-.7109889596207567?((Ge=le(Ge,Qe))[1]+=.0528035274542,Ge):_e(Ge,Qe)}function Yt(Ge,Qe){return y(Qe)>.7109889596207567?((Ge=le(Ge,Qe))[1]-=Qe>0?.0528035274542:-.0528035274542,Ge):_e(Ge,Qe)}function nn(Ge,Qe,ut,ht){var kt=D(4*x/(2*ut+(1+Ge-Qe/2)*h(2*ut)+(Ge+Qe)/2*h(4*ut)+Qe/2*h(6*ut))),Mt=D(ht*h(ut)*D((1+Ge*n(2*ut)+Qe*n(4*ut))/(1+Ge+Qe))),Nt=ut*sn(1);function ln(kn){return D(1+Ge*n(2*kn)+Qe*n(4*kn))}function sn(kn){var In=kn*ut;return(2*In+(1+Ge-Qe/2)*h(2*In)+(Ge+Qe)/2*h(4*In)+Qe/2*h(6*In))/ut}function rn(kn){return ln(kn)*h(kn)}var mn=function(kn,In){var Rn=ut*ie(sn,Nt*h(In)/ut,In/x);isNaN(Rn)&&(Rn=ut*l(In));var jn=kt*ln(Rn);return[jn*Mt*kn/x*n(Rn),jn/Mt*h(Rn)]};return mn.invert=function(kn,In){var Rn=ie(rn,In*Mt/kt);return[kn*x/(n(Rn)*kt*Mt*ln(Rn)),O(ut*sn(Rn/ut)/Nt)]},0===ut&&(kt=D(ht/x),(mn=function(kn,In){return[kn*kt,h(In)/kt]}).invert=function(kn,In){return[kn/kt,O(In*kt)]}),mn}function Mn(Ge,Qe,ut){function ht(Rn){return Ge+(1-Ge)*f(1-f(Rn,Qe),1/Qe)}function kt(Rn){return function Kt(Ge,Qe,ut,ht,kt){void 0===ht&&(ht=1e-8),void 0===kt&&(kt=20);var Mt=Ge(Qe),Nt=Ge(.5*(Qe+ut)),ln=Ge(ut);return function sn(rn,mn,kn,In,Rn,jn,br,Cr,Hr,Kr,oi){if(oi.nanEncountered)return NaN;var Xr,Oi,zi,Ea,Ki,ra,go,io,Ha,xa;if(Oi=rn(mn+.25*(Xr=kn-mn)),zi=rn(kn-.25*Xr),isNaN(Oi))oi.nanEncountered=!0;else{if(!isNaN(zi))return xa=((ra=(Ea=Xr*(In+4*Oi+Rn)/12)+(Ki=Xr*(Rn+4*zi+jn)/12))-br)/15,Kr>Hr?(oi.maxDepthCount++,ra+xa):Math.abs(xa)<Cr?ra+xa:(io=sn(rn,mn,go=mn+.5*Xr,In,Oi,Rn,Ea,.5*Cr,Hr,Kr+1,oi),isNaN(io)?(oi.nanEncountered=!0,NaN):(Ha=sn(rn,go,kn,Rn,zi,jn,Ki,.5*Cr,Hr,Kr+1,oi),isNaN(Ha)?(oi.nanEncountered=!0,NaN):io+Ha));oi.nanEncountered=!0}}(Ge,Qe,ut,Mt,Nt,ln,(Mt+4*Nt+ln)*(ut-Qe)/6,ht,kt,1,{maxDepthCount:0,nanEncountered:!1})}(ht,0,Rn,1e-4)}for(var Mt=1/kt(1),ln=(1+1e-8)*Mt,sn=[],rn=0;rn<=1e3;rn++)sn.push(kt(rn/1e3)*ln);function mn(Rn){var jn=0,br=1e3,Cr=500;do{sn[Cr]>Rn?br=Cr:jn=Cr,Cr=jn+br>>1}while(Cr>jn);var Hr=sn[Cr+1]-sn[Cr];return Hr&&(Hr=(Rn-sn[Cr+1])/Hr),(Cr+1+Hr)/1e3}var kn=2*mn(1)/x*Mt/ut,In=function(Rn,jn){var br=mn(y(h(jn))),Cr=ht(br)*Rn;return br/=kn,[Cr,jn>=0?br:-br]};return In.invert=function(Rn,jn){var br;return y(jn*=kn)<1&&(br=l(jn)*O(kt(y(jn))*Mt)),[Rn/ht(y(jn)),br]},In}function Un(Ge,Qe){return y(Ge[0]-Qe[0])<o&&y(Ge[1]-Qe[1])<o}function Tn(Ge,Qe){for(var ut,ht,kt,Mt=-1,Nt=Ge.length,ln=Ge[0],sn=[];++Mt<Nt;){ht=((ut=Ge[Mt])[0]-ln[0])/Qe,kt=(ut[1]-ln[1])/Qe;for(var rn=0;rn<Qe;++rn)sn.push([ln[0]+rn*ht,ln[1]+rn*kt]);ln=ut}return sn.push(ut),sn}function un(Ge){var Qe,ut,kt,Mt,ln,sn=[],rn=Ge[0].length;for(ln=0;ln<rn;++ln)ut=(Qe=Ge[0][ln])[0][0],sn.push(Tn([[ut+o,Qe[0][1]+o],[ut+o,(kt=Qe[1][1])-o],[(Mt=Qe[2][0])-o,kt-o],[Mt-o,Qe[2][1]+o]],30));for(ln=Ge[1].length-1;ln>=0;--ln)ut=(Qe=Ge[1][ln])[0][0],sn.push(Tn([[(Mt=Qe[2][0])-o,Qe[2][1]-o],[Mt-o,(kt=Qe[1][1])+o],[ut+o,kt+o],[ut+o,Qe[0][1]-o]],30));return{type:"Polygon",coordinates:[b.merge(sn)]}}function an(Ge,Qe,ut){var ht,kt;function Mt(sn,rn){for(var mn=rn<0?-1:1,kn=Qe[+(rn<0)],In=0,Rn=kn.length-1;In<Rn&&sn>kn[In][2][0];++In);var jn=Ge(sn-kn[In][1][0],rn);return jn[0]+=Ge(kn[In][1][0],mn*rn>mn*kn[In][0][1]?kn[In][0][1]:rn)[0],jn}ut?Mt.invert=ut(Mt):Ge.invert&&(Mt.invert=function(sn,rn){for(var mn=kt[+(rn<0)],kn=Qe[+(rn<0)],In=0,Rn=mn.length;In<Rn;++In){var jn=mn[In];if(jn[0][0]<=sn&&sn<jn[1][0]&&jn[0][1]<=rn&&rn<jn[1][1]){var br=Ge.invert(sn-Ge(kn[In][1][0],0)[0],rn);return br[0]+=kn[In][1][0],Un(Mt(br[0],br[1]),[sn,rn])?br:null}}});var Nt=m.geoProjection(Mt),ln=Nt.stream;return Nt.stream=function(sn){var rn=Nt.rotate(),mn=ln(sn),kn=(Nt.rotate([0,0]),ln(sn));return Nt.rotate(rn),mn.sphere=function(){m.geoStream(ht,kn)},mn},Nt.lobes=function(sn){return arguments.length?(ht=un(sn),Qe=sn.map(function(rn){return rn.map(function(mn){return[[mn[0][0]*R,mn[0][1]*R],[mn[1][0]*R,mn[1][1]*R],[mn[2][0]*R,mn[2][1]*R]]})}),kt=Qe.map(function(rn){return rn.map(function(mn){var kn,In=Ge(mn[0][0],mn[0][1])[0],Rn=Ge(mn[2][0],mn[2][1])[0],jn=Ge(mn[1][0],mn[0][1])[1],br=Ge(mn[1][0],mn[1][1])[1];return jn>br&&(kn=jn,jn=br,br=kn),[[In,jn],[Rn,br]]})}),Nt):Qe.map(function(rn){return rn.map(function(mn){return[[mn[0][0]*S,mn[0][1]*S],[mn[1][0]*S,mn[1][1]*S],[mn[2][0]*S,mn[2][1]*S]]})})},null!=Qe&&Nt.lobes(Qe),Nt}Rt.invert=function(Ge,Qe){return Qe>-.7109889596207567?le.invert(Ge,Qe-.0528035274542):_e.invert(Ge,Qe)},Yt.invert=function(Ge,Qe){return y(Qe)>.7109889596207567?le.invert(Ge,Qe+(Qe>0?.0528035274542:-.0528035274542)):_e.invert(Ge,Qe)};var fn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],pn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Sn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Nn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Kn=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Bn=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function cr(Ge,Qe){return[3/I*Ge*D(x*x/3-Qe*Qe),Qe]}function Lr(Ge){function Qe(ut,ht){if(y(y(ht)-u)<o)return[0,ht<0?-2:2];var kt=h(ht),Mt=f((1+kt)/(1-kt),Ge/2),Nt=.5*(Mt+1/Mt)+n(ut*=Ge);return[2*h(ut)/Nt,(Mt-1/Mt)/Nt]}return Qe.invert=function(ut,ht){var kt=y(ht);if(y(kt-2)<o)return ut?null:[0,l(ht)*u];if(kt>2)return null;var Mt=(ut/=2)*ut,Nt=(ht/=2)*ht,ln=2*ht/(1+Mt+Nt);return ln=f((1+ln)/(1-ln),1/Ge),[r(2*ut,1-Mt-Nt)/Ge,O((ln-1)/(ln+1))]},Qe}cr.invert=function(Ge,Qe){return[I/3*Ge/D(x*x/3-Qe*Qe),Qe]};var Qn=x/w;function qr(Ge,Qe){return[Ge*(1+D(n(Qe)))/2,Qe/(n(Qe/2)*n(Ge/6))]}function sr(Ge,Qe){var ut=Ge*Ge,ht=Qe*Qe;return[Ge*(.975534+ht*(-.0143059*ut-.119161+-.0547009*ht)),Qe*(1.00384+ut*(.0802894+-.02855*ht+199025e-9*ut)+ht*(.0998909+-.0491032*ht))]}function hr(Ge,Qe){return[h(Ge)/n(Qe),d(Qe)*n(Ge)]}function jr(Ge){var Qe=n(Ge),ut=d(T+Ge/2);function ht(kt,Mt){var Nt=Mt-Ge,ln=y(Nt)<o?kt*Qe:y(ln=T+Mt/2)<o||y(y(ln)-u)<o?0:kt*Nt/p(d(ln)/ut);return[ln,Nt]}return ht.invert=function(kt,Mt){var Nt,ln=Mt+Ge;return[y(Mt)<o?kt/Qe:y(Nt=T+ln/2)<o||y(y(Nt)-u)<o?0:kt*p(d(Nt)/ut)/Mt,ln]},ht}function di(Ge,Qe){return[Ge,1.25*p(d(T+.4*Qe))]}function Jn(Ge){var Qe=Ge.length-1;function ut(ht,kt){for(var Mt,Nt=n(kt),ln=2/(1+Nt*n(ht)),sn=ln*Nt*h(ht),rn=ln*h(kt),mn=Qe,kn=Ge[mn],In=kn[0],Rn=kn[1];--mn>=0;)In=(kn=Ge[mn])[0]+sn*(Mt=In)-rn*Rn,Rn=kn[1]+sn*Rn+rn*Mt;return[In=sn*(Mt=In)-rn*Rn,Rn=sn*Rn+rn*Mt]}return ut.invert=function(ht,kt){var Mt=20,Nt=ht,ln=kt;do{for(var sn,rn=Qe,mn=Ge[rn],kn=mn[0],In=mn[1],Rn=0,jn=0;--rn>=0;)Rn=kn+Nt*(sn=Rn)-ln*jn,jn=In+Nt*jn+ln*sn,kn=(mn=Ge[rn])[0]+Nt*(sn=kn)-ln*In,In=mn[1]+Nt*In+ln*sn;var br,Cr,Hr=(Rn=kn+Nt*(sn=Rn)-ln*jn)*Rn+(jn=In+Nt*jn+ln*sn)*jn;Nt-=br=((kn=Nt*(sn=kn)-ln*In-ht)*Rn+(In=Nt*In+ln*sn-kt)*jn)/Hr,ln-=Cr=(In*Rn-kn*jn)/Hr}while(y(br)+y(Cr)>1e-12&&--Mt>0);if(Mt){var Kr=D(Nt*Nt+ln*ln),oi=2*e(.5*Kr),Xr=h(oi);return[r(Nt*Xr,Kr*n(oi)),Kr?O(ln*Xr/Kr):0]}},ut}qr.invert=function(Ge,Qe){var ut=y(Ge),ht=y(Qe),kt=o,Mt=u;ht<Qn?Mt*=ht/Qn:kt+=6*C(Qn/ht);for(var Nt=0;Nt<25;Nt++){var ln=h(Mt),sn=D(n(Mt)),rn=h(Mt/2),mn=n(Mt/2),kn=h(kt/6),In=n(kt/6),Rn=.5*kt*(1+sn)-ut,jn=Mt/(mn*In)-ht,br=sn?-.25*kt*ln/sn:0,Cr=.5*(1+sn),Hr=(1+.5*Mt*rn/mn)/(mn*In),Kr=Mt/mn*(kn/6)/(In*In),oi=br*Kr-Hr*Cr,Xr=(Rn*Kr-jn*Cr)/oi,Oi=(jn*br-Rn*Hr)/oi;if(Mt-=Xr,kt-=Oi,y(Xr)<o&&y(Oi)<o)break}return[Ge<0?-kt:kt,Qe<0?-Mt:Mt]},sr.invert=function(Ge,Qe){var ut=l(Ge)*x,ht=Qe/2,kt=50;do{var Mt=ut*ut,Nt=ht*ht,ln=ut*ht,sn=ut*(.975534+Nt*(-.0143059*Mt-.119161+-.0547009*Nt))-Ge,rn=ht*(1.00384+Mt*(.0802894+-.02855*Nt+199025e-9*Mt)+Nt*(.0998909+-.0491032*Nt))-Qe,mn=.975534-Nt*(.119161+3*Mt*.0143059+.0547009*Nt),kn=-ln*(.238322+.2188036*Nt+.0286118*Mt),In=ln*(.1605788+7961e-7*Mt+-.0571*Nt),Rn=1.00384+Mt*(.0802894+199025e-9*Mt)+Nt*(3*(.0998909-.02855*Mt)-.245516*Nt),jn=kn*In-Rn*mn,br=(rn*kn-sn*Rn)/jn,Cr=(sn*In-rn*mn)/jn;ut-=br,ht-=Cr}while((y(br)>o||y(Cr)>o)&&--kt>0);return kt&&[ut,ht]},hr.invert=function(Ge,Qe){var ut=Ge*Ge,ht=Qe*Qe+1,kt=ut+ht,Mt=Ge?_*D((kt-D(kt*kt-4*ut))/ut):1/D(ht);return[O(Ge*Mt),l(Qe)*C(Mt)]},di.invert=function(Ge,Qe){return[Ge,2.5*e(a(.8*Qe))-.625*x]};var Ar=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],mr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],lr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ri=[[.9245,0],[0,0],[.01943,0]],si=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Tr(Ge,Qe){var ut=m.geoProjection(Jn(Ge)).rotate(Qe).clipAngle(90),ht=m.geoRotation(Qe),kt=ut.center;return delete ut.rotate,ut.center=function(Mt){return arguments.length?kt(ht(Mt)):ht.invert(kt())},ut}var Zr=D(6),Ii=D(7);function dn(Ge,Qe){var ut=O(7*h(Qe)/(3*Zr));return[Zr*Ge*(2*n(2*ut/3)-1)/Ii,9*h(ut/3)/Ii]}function Cn(Ge,Qe){for(var ut,ht=(1+_)*h(Qe),kt=Qe,Mt=0;Mt<25&&(kt-=ut=(h(kt/2)+h(kt)-ht)/(.5*n(kt/2)+n(kt)),!(y(ut)<o));Mt++);return[Ge*(1+2*n(kt)/n(kt/2))/(3*w),2*D(3)*h(kt/2)/D(2+w)]}function jt(Ge,Qe){for(var ut,ht=D(6/(4+x)),kt=(1+x/4)*h(Qe),Mt=Qe/2,Nt=0;Nt<25&&(Mt-=ut=(Mt/2+h(Mt)-kt)/(.5+n(Mt)),!(y(ut)<o));Nt++);return[ht*(.5+n(Mt))*Ge/1.5,ht*Mt]}function bn(Ge,Qe){var ut=Qe*Qe,ht=ut*ut,kt=ut*ht;return[Ge*(.84719-.13063*ut+kt*kt*(.05494*ut-.04515-.02326*ht+.00331*kt)),Qe*(1.01183+ht*ht*(.01926*ut-.02625-.00396*ht))]}function An(Ge,Qe){return[Ge*(1+n(Qe))/2,2*(Qe-d(Qe/2))]}dn.invert=function(Ge,Qe){var ut=3*O(Qe*Ii/9);return[Ge*Ii/(Zr*(2*n(2*ut/3)-1)),O(3*h(ut)*Zr/7)]},Cn.invert=function(Ge,Qe){var ut=Qe*D(2+w)/(2*D(3)),ht=2*O(ut);return[3*w*Ge/(1+2*n(ht)/n(ht/2)),O((ut+h(ht))/(1+_))]},jt.invert=function(Ge,Qe){var ut=D(6/(4+x)),ht=Qe/ut;return y(y(ht)-u)<o&&(ht=ht<0?-u:u),[1.5*Ge/(ut*(.5+n(ht))),O((ht/2+h(ht))/(1+x/4))]},bn.invert=function(Ge,Qe){var ut,ht,kt,Mt,Nt=Qe,ln=25;do{Nt-=ut=(Nt*(1.01183+(kt=(ht=Nt*Nt)*ht)*kt*(.01926*ht-.02625-.00396*kt))-Qe)/(1.01183+kt*kt*(.21186*ht-.23625+-.05148*kt))}while(y(ut)>1e-12&&--ln>0);return[Ge/(.84719-.13063*(ht=Nt*Nt)+(Mt=ht*(kt=ht*ht))*Mt*(.05494*ht-.04515-.02326*kt+.00331*Mt)),Nt]},An.invert=function(Ge,Qe){for(var ut=Qe/2,ht=0,kt=1/0;ht<10&&y(kt)>o;++ht){var Mt=n(Qe/2);Qe-=kt=(Qe-d(Qe/2)-ut)/(1-.5/(Mt*Mt))}return[2*Ge/(1+n(Qe)),Qe]};var $n=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Gn(Ge,Qe){var ut=h(Qe),ht=n(Qe),kt=l(Ge);if(0===Ge||y(Qe)===u)return[0,Qe];if(0===Qe)return[Ge,0];if(y(Ge)===u)return[Ge*ht,u*ut];var Mt=x/(2*Ge)-2*Ge/x,Nt=2*Qe/x,ln=(1-Nt*Nt)/(ut-Nt),sn=Mt*Mt,rn=ln*ln,mn=1+sn/rn,kn=1+rn/sn,In=(Mt*ut/ln-Mt/2)/mn,Rn=(rn*ut/sn+ln/2)/kn,jn=Rn*Rn-(rn*ut*ut/sn+ln*ut-1)/kn;return[u*(In+D(In*In+ht*ht/mn)*kt),u*(Rn+D(jn<0?0:jn)*l(-Qe*Mt)*kt)]}function zn(Ge,Qe){var ut=Qe*Qe;return[Ge,Qe*(1.0148+ut*ut*(.23185+ut*(.02406*ut-.14499)))]}function Hn(Ge,Qe){if(y(Qe)<o)return[Ge,0];var ut=d(Qe),ht=Ge*h(Qe);return[h(ht)/ut,Qe+(1-n(ht))/ut]}function On(Ge,Qe){return[Ge[0]*Qe[0]+Ge[1]*Qe[3],Ge[0]*Qe[1]+Ge[1]*Qe[4],Ge[0]*Qe[2]+Ge[1]*Qe[5]+Ge[2],Ge[3]*Qe[0]+Ge[4]*Qe[3],Ge[3]*Qe[1]+Ge[4]*Qe[4],Ge[3]*Qe[2]+Ge[4]*Qe[5]+Ge[5]]}function Dn(Ge,Qe){return[Ge[0]-Qe[0],Ge[1]-Qe[1]]}function Yn(Ge){return D(Ge[0]*Ge[0]+Ge[1]*Ge[1])}function rr(Ge,Qe,ut){function ht(Nt,ln){var sn,rn=Qe(Nt,ln),mn=rn.project([Nt*S,ln*S]);return(sn=rn.transform)?[sn[0]*mn[0]+sn[1]*mn[1]+sn[2],-(sn[3]*mn[0]+sn[4]*mn[1]+sn[5])]:(mn[1]=-mn[1],mn)}(function Nt(ln,sn){if(ln.edges=function(jn){for(var br=jn.length,Cr=[],Hr=jn[br-1],Kr=0;Kr<br;++Kr)Cr.push([Hr,Hr=jn[Kr]]);return Cr}(ln.face),sn.face){var rn=ln.shared=function(jn,br){for(var Cr,Hr,Kr=jn.length,oi=null,Xr=0;Xr<Kr;++Xr){Cr=jn[Xr];for(var Oi=br.length;--Oi>=0;)if(Cr[0]===(Hr=br[Oi])[0]&&Cr[1]===Hr[1]){if(oi)return[oi,Cr];oi=Cr}}}(ln.face,sn.face),mn=function Ln(Ge,Qe){var Nt,ln,ut=Dn(Ge[1],Ge[0]),ht=Dn(Qe[1],Qe[0]),kt=r((Nt=ut)[0]*(ln=ht)[1]-Nt[1]*ln[0],Nt[0]*ln[0]+Nt[1]*ln[1]),Mt=Yn(ut)/Yn(ht);return On([1,0,Ge[0][0],0,1,Ge[0][1]],On([Mt,0,0,0,Mt,0],On([n(kt),h(kt),0,-h(kt),n(kt),0],[1,0,-Qe[0][0],0,1,-Qe[0][1]])))}(rn.map(sn.project),rn.map(ln.project));ln.transform=sn.transform?On(sn.transform,mn):mn;for(var kn=sn.edges,In=0,Rn=kn.length;In<Rn;++In)ar(rn[0],kn[In][1])&&ar(rn[1],kn[In][0])&&(kn[In]=ln),ar(rn[0],kn[In][0])&&ar(rn[1],kn[In][1])&&(kn[In]=ln);for(In=0,Rn=(kn=ln.edges).length;In<Rn;++In)ar(rn[0],kn[In][0])&&ar(rn[1],kn[In][1])&&(kn[In]=sn),ar(rn[0],kn[In][1])&&ar(rn[1],kn[In][0])&&(kn[In]=sn)}else ln.transform=sn.transform;return ln.children&&ln.children.forEach(function(jn){Nt(jn,ln)}),ln})(Ge,{transform:null}),vr(Ge)&&(ht.invert=function(Nt,ln){var sn=function rn(mn,kn){var oi,Xr,In=mn.project.invert,Rn=mn.transform,jn=kn;if(Rn&&(jn=[(Rn=[(Xr=1/((oi=Rn)[0]*oi[4]-oi[1]*oi[3]))*oi[4],-Xr*oi[1],Xr*(oi[1]*oi[5]-oi[2]*oi[4]),-Xr*oi[3],Xr*oi[0],Xr*(oi[2]*oi[3]-oi[0]*oi[5])])[0]*jn[0]+Rn[1]*jn[1]+Rn[2],Rn[3]*jn[0]+Rn[4]*jn[1]+Rn[5]]),In&&mn===function(oi){return Qe(oi[0]*R,oi[1]*R)}(br=In(jn)))return br;for(var br,Cr=mn.children,Hr=0,Kr=Cr&&Cr.length;Hr<Kr;++Hr)if(br=rn(Cr[Hr],kn))return br}(Ge,[Nt,-ln]);return sn&&(sn[0]*=R,sn[1]*=R,sn)});var kt=m.geoProjection(ht),Mt=kt.stream;return kt.stream=function(Nt){var ln=kt.rotate(),sn=Mt(Nt),rn=(kt.rotate([0,0]),Mt(Nt));return kt.rotate(ln),sn.sphere=function(){rn.polygonStart(),rn.lineStart(),function mn(kn,In,Rn){var jn,br,Cr=In.edges,Hr=Cr.length,Kr={type:"MultiPoint",coordinates:In.face},oi=In.face.filter(function(go){return 90!==y(go[1])}),Xr=m.geoBounds({type:"MultiPoint",coordinates:oi}),Oi=!1,zi=-1,Ea=Xr[1][0]-Xr[0][0],Ki=180===Ea||360===Ea?[(Xr[0][0]+Xr[1][0])/2,(Xr[0][1]+Xr[1][1])/2]:m.geoCentroid(Kr);if(Rn)for(;++zi<Hr&&Cr[zi]!==Rn;);++zi;for(var ra=0;ra<Hr;++ra)br=Cr[(ra+zi)%Hr],Array.isArray(br)?(Oi||(kn.point((jn=m.geoInterpolate(br[0],Ki)(o))[0],jn[1]),Oi=!0),kn.point((jn=m.geoInterpolate(br[1],Ki)(o))[0],jn[1])):(Oi=!1,br!==Rn&&mn(kn,br,In))}(rn,Ge),rn.lineEnd(),rn.polygonEnd()},sn},kt.angle(null==ut?-30:ut*S)}function ar(Ge,Qe){return Ge&&Qe&&Ge[0]===Qe[0]&&Ge[1]===Qe[1]}function vr(Ge){return Ge.project.invert||Ge.children&&Ge.children.some(vr)}Gn.invert=function(Ge,Qe){var ut=(Ge/=u)*Ge,ht=ut+(Qe/=u)*Qe,kt=x*x;return[Ge?(ht-1+D((1-ht)*(1-ht)+4*ut))/(2*Ge)*u:0,ie(function(Mt){return ht*(x*h(Mt)-2*Mt)*x+4*Mt*Mt*(Qe-h(Mt))+2*x*Mt-kt*Qe},0)]},zn.invert=function(Ge,Qe){Qe>1.790857183?Qe=1.790857183:Qe<-1.790857183&&(Qe=-1.790857183);var ut,ht=Qe;do{var kt=ht*ht;ht-=ut=(ht*(1.0148+kt*kt*(.23185+kt*(.02406*kt-.14499)))-Qe)/(1.0148+kt*kt*(5*.23185+kt*(.21654*kt-1.01493)))}while(y(ut)>o);return[Ge,ht]},Hn.invert=function(Ge,Qe){if(y(Qe)<o)return[Ge,0];var ut,ht=Ge*Ge+Qe*Qe,kt=.5*Qe,Mt=10;do{var Nt=d(kt),ln=1/n(kt),sn=ht-2*Qe*kt+kt*kt;kt-=ut=(Nt*sn+2*(kt-Qe))/(2+sn*ln*ln+2*(kt-Qe)*Nt)}while(y(ut)>o&&--Mt>0);return Nt=d(kt),[(y(Qe)<y(kt+1/Nt)?O(Ge*Nt):l(Qe)*l(Ge)*(C(y(Ge*Nt))+u))/h(kt),kt]};var xr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Ir=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ge){return Ge.map(function(Qe){return xr[Qe]})}),Or=2/D(3);function Rr(Ge,Qe){var ut=Ue(Ge,Qe);return[ut[0]*Or,ut[1]]}function Ur(Ge,Qe){for(var ut=0,ht=Ge.length,kt=0;ut<ht;++ut)kt+=Ge[ut]*Qe[ut];return kt}function $r(Ge){return[r(Ge[1],Ge[0])*S,O(s(-1,i(1,Ge[2])))*S]}function gi(Ge){var Qe=Ge[0]*R,ut=Ge[1]*R,ht=n(ut);return[ht*n(Qe),ht*h(Qe),h(ut)]}function ai(){}function Wi(Ge,Qe){return{type:"FeatureCollection",features:Ge.features.map(function(ut){return Br(ut,Qe)})}}function Br(Ge,Qe){return{type:"Feature",id:Ge.id,properties:Ge.properties,geometry:ui(Ge.geometry,Qe)}}function ui(Ge,Qe){if(!Ge)return null;if("GeometryCollection"===Ge.type)return kt=Qe,{type:"GeometryCollection",geometries:Ge.geometries.map(function(Mt){return ui(Mt,kt)})};var kt,ut;switch(Ge.type){case"Point":case"MultiPoint":ut=Wa;break;case"LineString":case"MultiLineString":ut=Xa;break;case"Polygon":case"MultiPolygon":case"Sphere":ut=ws;break;default:return null}return m.geoStream(Ge,Qe(ut)),ut.result()}Rr.invert=function(Ge,Qe){return Ue.invert(Ge/Or,Qe)};var mi=[],ya=[],Wa={point:function(Ge,Qe){mi.push([Ge,Qe])},result:function(){var Ge=mi.length?mi.length<2?{type:"Point",coordinates:mi[0]}:{type:"MultiPoint",coordinates:mi}:null;return mi=[],Ge}},Xa={lineStart:ai,point:function(Ge,Qe){mi.push([Ge,Qe])},lineEnd:function(){mi.length&&(ya.push(mi),mi=[])},result:function(){var Ge=ya.length?ya.length<2?{type:"LineString",coordinates:ya[0]}:{type:"MultiLineString",coordinates:ya}:null;return ya=[],Ge}},ws={polygonStart:ai,lineStart:ai,point:function(Ge,Qe){mi.push([Ge,Qe])},lineEnd:function(){var Ge=mi.length;if(Ge){do{mi.push(mi[0].slice())}while(++Ge<4);ya.push(mi),mi=[]}},polygonEnd:ai,result:function(){if(!ya.length)return null;var Ge=[],Qe=[];return ya.forEach(function(ut){!function(ht){if((kt=ht.length)<4)return!1;for(var kt,Mt=0,Nt=ht[kt-1][1]*ht[0][0]-ht[kt-1][0]*ht[0][1];++Mt<kt;)Nt+=ht[Mt-1][1]*ht[Mt][0]-ht[Mt-1][0]*ht[Mt][1];return Nt<=0}(ut)?Qe.push(ut):Ge.push([ut])}),Qe.forEach(function(ut){var ht=ut[0];Ge.some(function(kt){if(function(Mt,Nt){for(var ln=Nt[0],sn=Nt[1],rn=!1,mn=0,kn=Mt.length,In=kn-1;mn<kn;In=mn++){var Rn=Mt[mn],jn=Rn[0],br=Rn[1],Cr=Mt[In],Kr=Cr[1];br>sn^Kr>sn&&ln<(Cr[0]-jn)*(sn-br)/(Kr-br)+jn&&(rn=!rn)}return rn}(kt[0],ht))return kt.push(ut),!0})||Ge.push([ut])}),ya=[],Ge.length?Ge.length>1?{type:"MultiPolygon",coordinates:Ge}:{type:"Polygon",coordinates:Ge[0]}:null}};function Va(Ge){var Qe=Ge(u,0)[0]-Ge(-u,0)[0];function ut(ht,kt){var Mt=y(ht)<u,Nt=Ge(Mt?ht:ht>0?ht-x:ht+x,kt),ln=(Nt[0]-Nt[1])*_,sn=(Nt[0]+Nt[1])*_;if(Mt)return[ln,sn];var rn=Qe*_,mn=ln>0^sn>0?-1:1;return[mn*ln-l(sn)*rn,mn*sn-l(ln)*rn]}return Ge.invert&&(ut.invert=function(ht,kt){var Mt=(ht+kt)*_,Nt=(kt-ht)*_,ln=y(Mt)<.5*Qe&&y(Nt)<.5*Qe;if(!ln){var sn=Qe*_,rn=Mt>0^Nt>0?-1:1,mn=-rn*ht+(Nt>0?1:-1)*sn,kn=-rn*kt+(Mt>0?1:-1)*sn;Mt=(-mn-kn)*_,Nt=(mn-kn)*_}var In=Ge.invert(Mt,Nt);return ln||(In[0]+=Mt>0?x:-x),In}),m.geoProjection(ut).rotate([-90,-90,45]).clipAngle(179.999)}function ua(){return Va(Vt).scale(111.48)}function sa(Ge){var Qe=h(Ge);function ut(ht,kt){var Mt=Qe?d(ht*Qe/2)/Qe:ht/2;if(!kt)return[2*Mt,-Ge];var Nt=2*e(Mt*h(kt)),ln=1/d(kt);return[h(Nt)*ln,kt+(1-n(Nt))*ln-Ge]}return ut.invert=function(ht,kt){if(y(kt+=Ge)<o)return[Qe?2*e(Qe*ht/2)/Qe:ht,0];var Mt,Nt=ht*ht+kt*kt,ln=0,sn=10;do{var rn=d(ln),mn=1/n(ln),kn=Nt-2*kt*ln+ln*ln;ln-=Mt=(rn*kn+2*(ln-kt))/(2+kn*mn*mn+2*(ln-kt)*rn)}while(y(Mt)>o&&--sn>0);var In=ht*(rn=d(ln)),Rn=d(y(kt)<y(ln+1/rn)?.5*O(In):.5*C(In)+x/4)/h(ln);return[Qe?2*e(Qe*Rn)/Qe:2*Rn,ln]},ut}var Ta=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Ts(Ge,Qe){var ut,ht=i(18,36*y(Qe)/x),kt=t(ht),Mt=ht-kt,Nt=(ut=Ta[kt])[0],ln=ut[1],sn=(ut=Ta[++kt])[0],rn=ut[1],mn=(ut=Ta[i(19,++kt)])[0],kn=ut[1];return[Ge*(sn+Mt*(mn-Nt)/2+Mt*Mt*(mn-2*sn+Nt)/2),(Qe>0?u:-u)*(rn+Mt*(kn-ln)/2+Mt*Mt*(kn-2*rn+ln)/2)]}function Fo(Ge,Qe){var ut=function(Nt){function ln(sn,rn){var mn=n(rn),kn=(Nt-1)/(Nt-mn*n(sn));return[kn*mn*h(sn),kn*h(rn)]}return ln.invert=function(sn,rn){var mn=sn*sn+rn*rn,kn=D(mn),In=(Nt-D(1-mn*(Nt+1)/(Nt-1)))/((Nt-1)/kn+kn/(Nt-1));return[r(sn*In,kn*D(1-In*In)),kn?O(rn*In/kn):0]},ln}(Ge);if(!Qe)return ut;var ht=n(Qe),kt=h(Qe);function Mt(Nt,ln){var sn=ut(Nt,ln),rn=sn[1],mn=rn*kt/(Ge-1)+ht;return[sn[0]*ht/mn,rn/mn]}return Mt.invert=function(Nt,ln){var sn=(Ge-1)/(Ge-1-ln*kt);return ut.invert(sn*Nt,sn*ln*ht)},Mt}Ta.forEach(function(Ge){Ge[1]*=1.0144}),Ts.invert=function(Ge,Qe){var ut=Qe/u,ht=90*ut,kt=i(18,y(ht/5)),Mt=s(0,t(kt));do{var Nt=Ta[Mt][1],ln=Ta[Mt+1][1],sn=Ta[i(19,Mt+2)][1],rn=sn-Nt,mn=sn-2*ln+Nt,kn=2*(y(ut)-ln)/rn,In=mn/rn,Rn=kn*(1-In*kn*(1-2*In*kn));if(Rn>=0||1===Mt){ht=(Qe>=0?5:-5)*(Rn+kt);var jn,br=50;do{Rn=(kt=i(18,y(ht)/5))-(Mt=t(kt)),Nt=Ta[Mt][1],ln=Ta[Mt+1][1],sn=Ta[i(19,Mt+2)][1],ht-=(jn=(Qe>=0?u:-u)*(ln+Rn*(sn-Nt)/2+Rn*Rn*(sn-2*ln+Nt)/2)-Qe)*S}while(y(jn)>1e-12&&--br>0);break}}while(--Mt>=0);var Cr=Ta[Mt][0],Hr=Ta[Mt+1][0],Kr=Ta[i(19,Mt+2)][0];return[Ge/(Hr+Rn*(Kr-Cr)/2+Rn*Rn*(Kr-2*Hr+Cr)/2),ht*R]};var Xi=-179.9999,zo=179.9999,es=-89.9999;function cs(Ge){return Ge.length>0}function Lo(Ge){return-90===Ge||90===Ge?[0,Ge]:[-180,(Qe=Ge,Math.floor(1e4*Qe)/1e4)];var Qe}function Ua(Ge){var Qe=Ge[0],ut=Ge[1],ht=!1;return Qe<=Xi?(Qe=-180,ht=!0):Qe>=zo&&(Qe=180,ht=!0),ut<=es?(ut=-90,ht=!0):ut>=89.9999&&(ut=90,ht=!0),ht?[Qe,ut]:Ge}function Co(Ge){return Ge.map(Ua)}function kl(Ge,Qe,ut){for(var ht=0,kt=Ge.length;ht<kt;++ht){var Mt=Ge[ht].slice();ut.push({index:-1,polygon:Qe,ring:Mt});for(var Nt=0,ln=Mt.length;Nt<ln;++Nt){var sn=Mt[Nt],rn=sn[0],mn=sn[1];if(rn<=Xi||rn>=zo||mn<=es||mn>=89.9999){Mt[Nt]=Ua(sn);for(var kn=Nt+1;kn<ln;++kn){var In=Mt[kn],Rn=In[0],jn=In[1];if(Rn>Xi&&Rn<zo&&jn>es&&jn<89.9999)break}if(kn===Nt+1)continue;if(Nt){var br={index:-1,polygon:Qe,ring:Mt.slice(0,Nt+1)};br.ring[br.ring.length-1]=Lo(mn),ut[ut.length-1]=br}else ut.pop();if(kn>=ln)break;ut.push({index:-1,polygon:Qe,ring:Mt=Mt.slice(kn-1)}),Mt[0]=Lo(Mt[0][1]),Nt=-1,ln=Mt.length}}}}function fl(Ge){var Qe,ut,ht,kt,Mt,Nt,ln=Ge.length,sn={},rn={};for(Qe=0;Qe<ln;++Qe)(ht=(ut=Ge[Qe]).ring[0])[0]!==(Mt=ut.ring[ut.ring.length-1])[0]||ht[1]!==Mt[1]?(ut.index=Qe,sn[ht]=rn[Mt]=ut):(ut.polygon.push(ut.ring),Ge[Qe]=null);for(Qe=0;Qe<ln;++Qe)if(ut=Ge[Qe]){if(kt=rn[ht=ut.ring[0]],Nt=sn[Mt=ut.ring[ut.ring.length-1]],delete sn[ht],delete rn[Mt],ht[0]===Mt[0]&&ht[1]===Mt[1]){ut.polygon.push(ut.ring);continue}kt?(delete rn[ht],delete sn[kt.ring[0]],kt.ring.pop(),Ge[kt.index]=null,ut={index:-1,polygon:kt.polygon,ring:kt.ring.concat(ut.ring)},kt===Nt?ut.polygon.push(ut.ring):(ut.index=ln++,Ge.push(sn[ut.ring[0]]=rn[ut.ring[ut.ring.length-1]]=ut))):Nt?(delete sn[Mt],delete rn[Nt.ring[Nt.ring.length-1]],ut.ring.pop(),ut={index:ln++,polygon:Nt.polygon,ring:ut.ring.concat(Nt.ring)},Ge[Nt.index]=null,Ge.push(sn[ut.ring[0]]=rn[ut.ring[ut.ring.length-1]]=ut)):(ut.ring.push(ut.ring[0]),ut.polygon.push(ut.ring))}}function Fa(Ge){var Qe={type:"Feature",geometry:hl(Ge.geometry)};return null!=Ge.id&&(Qe.id=Ge.id),null!=Ge.bbox&&(Qe.bbox=Ge.bbox),null!=Ge.properties&&(Qe.properties=Ge.properties),Qe}function hl(Ge){if(null==Ge)return Ge;var Qe,ut,ht,kt;switch(Ge.type){case"GeometryCollection":Qe={type:"GeometryCollection",geometries:Ge.geometries.map(hl)};break;case"Point":Qe={type:"Point",coordinates:Ua(Ge.coordinates)};break;case"MultiPoint":case"LineString":Qe={type:Ge.type,coordinates:Co(Ge.coordinates)};break;case"MultiLineString":Qe={type:"MultiLineString",coordinates:Ge.coordinates.map(Co)};break;case"Polygon":var Mt=[];kl(Ge.coordinates,Mt,ut=[]),fl(ut),Qe={type:"Polygon",coordinates:Mt};break;case"MultiPolygon":ut=[],ht=-1,kt=Ge.coordinates.length;for(var Nt=new Array(kt);++ht<kt;)kl(Ge.coordinates[ht],Nt[ht]=[],ut);fl(ut),Qe={type:"MultiPolygon",coordinates:Nt.filter(cs)};break;default:return Ge}return null!=Ge.bbox&&(Qe.bbox=Ge.bbox),Qe}function $s(Ge,Qe){var ut=d(Qe/2),ht=h(T*ut);return[Ge*(.74482-.34588*ht*ht),1.70711*ut]}function Os(Ge,Qe,ut){var ht=m.geoInterpolate(Qe,ut),kt=ht(.5),Mt=m.geoRotation([-kt[0],-kt[1]])(Qe),Nt=ht.distance/2,ln=-O(h(Mt[1]*R)/h(Nt)),sn=[-kt[0],-kt[1],-(Mt[0]>0?x-ln:ln)*S],rn=m.geoProjection(Ge(Nt)).rotate(sn),mn=m.geoRotation(sn),kn=rn.center;return delete rn.rotate,rn.center=function(In){return arguments.length?kn(mn(In)):mn.invert(kn())},rn.clipAngle(90)}function Rl(Ge){var Qe=n(Ge);function ut(ht,kt){var Mt=m.geoGnomonicRaw(ht,kt);return Mt[0]*=Qe,Mt}return ut.invert=function(ht,kt){return m.geoGnomonicRaw.invert(ht/Qe,kt)},ut}function ml(Ge,Qe){return Os(Rl,Ge,Qe)}function fs(Ge){if(!(Ge*=2))return m.geoAzimuthalEquidistantRaw;var Qe=-Ge/2,ut=-Qe,ht=Ge*Ge,kt=d(ut),Mt=.5/h(ut);function Nt(ln,sn){var rn=C(n(sn)*n(ln-Qe)),mn=C(n(sn)*n(ln-ut));return[((rn*=rn)-(mn*=mn))/(2*Ge),(sn<0?-1:1)*D(4*ht*mn-(ht-rn+mn)*(ht-rn+mn))/(2*Ge)]}return Nt.invert=function(ln,sn){var rn,mn,kn=sn*sn,In=n(D(kn+(rn=ln+Qe)*rn)),Rn=n(D(kn+(rn=ln+ut)*rn));return[r(mn=In-Rn,rn=(In+Rn)*kt),(sn<0?-1:1)*C(D(rn*rn+mn*mn)*Mt)]},Nt}function oo(Ge,Qe){return Os(fs,Ge,Qe)}function pa(Ge,Qe){if(y(Qe)<o)return[Ge,0];var ut=y(Qe/u),ht=O(ut);if(y(Ge)<o||y(y(Qe)-u)<o)return[0,l(Qe)*x*d(ht/2)];var kt=n(ht),Mt=y(x/Ge-Ge/x)/2,Nt=Mt*Mt,ln=kt/(ut+kt-1),sn=ln*(2/ut-1),rn=sn*sn,mn=rn+Nt,kn=ln-rn,In=Nt+ln;return[l(Ge)*x*(Mt*kn+D(Nt*kn*kn-mn*(ln*ln-rn)))/mn,l(Qe)*x*(sn*In-Mt*D((Nt+1)*mn-In*In))/mn]}function ho(Ge,Qe){if(y(Qe)<o)return[Ge,0];var ut=y(Qe/u),ht=O(ut);if(y(Ge)<o||y(y(Qe)-u)<o)return[0,l(Qe)*x*d(ht/2)];var kt=n(ht),Mt=y(x/Ge-Ge/x)/2,Nt=Mt*Mt,ln=kt*(D(1+Nt)-Mt*kt)/(1+Nt*ut*ut);return[l(Ge)*x*ln,l(Qe)*x*D(1-ln*(2*Mt+ln))]}function po(Ge,Qe){if(y(Qe)<o)return[Ge,0];var ut=Qe/u,ht=O(ut);if(y(Ge)<o||y(y(Qe)-u)<o)return[0,x*d(ht/2)];var kt=(x/Ge-Ge/x)/2,Mt=ut/(1+n(ht));return[x*(l(Ge)*D(kt*kt+1-Mt*Mt)-kt),x*Mt]}function ko(Ge,Qe){if(!Qe)return[Ge,0];var ut=y(Qe);if(!Ge||ut===u)return[0,Qe];var ht=ut/u,kt=ht*ht,Mt=(8*ht-kt*(kt+2)-5)/(2*kt*(ht-1)),Nt=Mt*Mt,ln=ht*Mt,sn=kt+Nt+2*ln,rn=ht+3*Mt,mn=Ge/u,kn=mn+1/mn,In=l(y(Ge)-u)*D(kn*kn-4),Rn=In*In,jn=(In*(sn+Nt-1)+2*D(sn*(kt+Nt*Rn-1)+(1-kt)*(kt*(rn*rn+4*Nt)+12*ln*Nt+4*Nt*Nt)))/(4*sn+Rn);return[l(Ge)*u*jn,l(Qe)*u*D(1+In*y(jn)-jn*jn)]}function No(Ge,Qe,ut,ht){var kt=x/3;Ge=s(Ge,o),Qe=s(Qe,o),Ge=i(Ge,u),Qe=i(Qe,x-o),ut=s(ut,0),ut=i(ut,100-o);var Mt=(ht=s(ht,o))/100,Nt=C((ut/100+1)*n(kt))/kt,ln=h(Ge)/h(Nt*u),sn=Qe/x,rn=D(Mt*h(Ge/2)/h(Qe/2));return function(mn,kn,In,Rn,jn){function br(Cr,Hr){var Kr=In*h(Rn*Hr),oi=D(1-Kr*Kr),Xr=D(2/(1+oi*n(Cr*=jn)));return[mn*oi*Xr*h(Cr),kn*Kr*Xr]}return br.invert=function(Cr,Hr){var Kr=Cr/mn,oi=Hr/kn,Xr=D(Kr*Kr+oi*oi),Oi=2*O(Xr/2);return[r(Cr*d(Oi),mn*Xr)/jn,Xr&&O(Hr*h(Oi)/(kn*In*Xr))/Rn]},br}(rn/D(sn*ln*Nt),1/(rn*D(sn*ln*Nt)),ln,Nt,sn)}function hi(){var Ge=65*R,Qe=60*R,ut=20,ht=200,kt=m.geoProjectionMutator(No),Mt=kt(Ge,Qe,ut,ht);return Mt.poleline=function(Nt){return arguments.length?kt(Ge=+Nt*R,Qe,ut,ht):Ge*S},Mt.parallels=function(Nt){return arguments.length?kt(Ge,Qe=+Nt*R,ut,ht):Qe*S},Mt.inflation=function(Nt){return arguments.length?kt(Ge,Qe,ut=+Nt,ht):ut},Mt.ratio=function(Nt){return arguments.length?kt(Ge,Qe,ut,ht=+Nt):ht},Mt.scale(163.775)}$s.invert=function(Ge,Qe){var ut=Qe/1.70711,ht=h(T*ut);return[Ge/(.74482-.34588*ht*ht),2*e(ut)]},pa.invert=function(Ge,Qe){if(y(Qe)<o)return[Ge,0];if(y(Ge)<o)return[0,u*h(2*e(Qe/x))];var ut=(Ge/=x)*Ge,ht=(Qe/=x)*Qe,kt=ut+ht,Mt=kt*kt,Nt=-y(Qe)*(1+kt),ln=Nt-2*ht+ut,sn=-2*Nt+1+2*ht+Mt,rn=ht/sn+(2*ln*ln*ln/(sn*sn*sn)-9*Nt*ln/(sn*sn))/27,mn=(Nt-ln*ln/(3*sn))/sn,kn=2*D(-mn/3),In=C(3*rn/(mn*kn))/3;return[x*(kt-1+D(1+2*(ut-ht)+Mt))/(2*Ge),l(Qe)*x*(-kn*n(In+x/3)-ln/(3*sn))]},ho.invert=function(Ge,Qe){if(!Ge)return[0,u*h(2*e(Qe/x))];var ut=y(Ge/x),ht=(1-ut*ut-(Qe/=x)*Qe)/(2*ut),kt=D(ht*ht+1);return[l(Ge)*x*(kt-ht),l(Qe)*u*h(2*r(D((1-2*ht*ut)*(ht+kt)-ut),D(kt+ht+ut)))]},po.invert=function(Ge,Qe){if(!Qe)return[Ge,0];var ut=Qe/x,ht=(x*x*(1-ut*ut)-Ge*Ge)/(2*x*Ge);return[Ge?x*(l(Ge)*D(ht*ht+1)-ht):0,u*h(2*e(ut))]},ko.invert=function(Ge,Qe){var ut;if(!Ge||!Qe)return[Ge,Qe];Qe/=x;var ht=l(Ge)*Ge/u,kt=(ht*ht-1+4*Qe*Qe)/y(ht),Mt=kt*kt,Nt=2*Qe,ln=50;do{var sn=Nt*Nt,rn=(8*Nt-sn*(sn+2)-5)/(2*sn*(Nt-1)),mn=(3*Nt-sn*Nt-10)/(2*sn*Nt),kn=rn*rn,In=Nt*rn,Rn=Nt+rn,jn=Rn*Rn,br=Nt+3*rn,Cr=-2*Rn*(4*In*kn+(1-4*sn+3*sn*sn)*(1+mn)+kn*(14*sn-6-Mt+(8*sn-8-2*Mt)*mn)+In*(12*sn-8+(10*sn-10-Mt)*mn)),Hr=D(jn*(sn+kn*Mt-1)+(1-sn)*(sn*(br*br+4*kn)+kn*(12*In+4*kn)));Nt-=ut=(kt*(jn+kn-1)+2*Hr-ht*(4*jn+Mt))/(kt*(2*rn*mn+2*Rn*(1+mn))+Cr/Hr-8*Rn*(kt*(-1+kn+jn)+2*Hr)*(1+mn)/(Mt+4*jn))}while(ut>o&&--ln>0);return[l(Ge)*(D(kt*kt+4)+kt)*x/4,u*Nt]};var na=4*x+3*D(3),Ma=2*D(2*x*D(3)/na),Ao=oe(Ma*D(3)/x,Ma,na/6);function Rs(Ge,Qe){return[Ge*D(1-3*Qe*Qe/(x*x)),Qe]}function Qa(Ge,Qe){var ut=n(Qe),ht=n(Ge)*ut,kt=1-ht,Mt=n(Ge=r(h(Ge)*ut,-h(Qe))),Nt=h(Ge);return[Nt*(ut=D(1-ht*ht))-Mt*kt,-Mt*ut-Nt*kt]}function ga(Ge,Qe){var ut=G(Ge,Qe);return[(ut[0]+Ge/u)/2,(ut[1]+Qe)/2]}Rs.invert=function(Ge,Qe){return[Ge/D(1-3*Qe*Qe/(x*x)),Qe]},Qa.invert=function(Ge,Qe){var ut=(Ge*Ge+Qe*Qe)/-2,ht=D(-ut*(2+ut)),kt=Qe*ut+Ge*ht,Mt=Ge*ut-Qe*ht,Nt=D(Mt*Mt+kt*kt);return[r(ht*kt,Nt*(1+ut)),Nt?-O(ht*Mt/Nt):0]},ga.invert=function(Ge,Qe){var ut=Ge,ht=Qe,kt=25;do{var Mt,Nt=n(ht),ln=h(ht),sn=h(2*ht),rn=ln*ln,mn=Nt*Nt,kn=h(ut),In=n(ut/2),Rn=h(ut/2),jn=Rn*Rn,br=1-mn*In*In,Cr=br?C(Nt*In)*D(Mt=1/br):Mt=0,Hr=.5*(2*Cr*Nt*Rn+ut/u)-Ge,Kr=.5*(Cr*ln+ht)-Qe,oi=.5*Mt*(mn*jn+Cr*Nt*In*rn)+.5/u,Xr=Mt*(kn*sn/4-Cr*ln*Rn),Oi=.125*Mt*(sn*Rn-Cr*ln*mn*kn),zi=.5*Mt*(rn*In+Cr*jn*Nt)+.5,Ea=Xr*Oi-zi*oi,Ki=(Kr*Xr-Hr*zi)/Ea,ra=(Hr*Oi-Kr*oi)/Ea;ut-=Ki,ht-=ra}while((y(Ki)>o||y(ra)>o)&&--kt>0);return[ut,ht]},g.geoNaturalEarth=m.geoNaturalEarth1,g.geoNaturalEarthRaw=m.geoNaturalEarth1Raw,g.geoAiry=function(){var Ge=u,Qe=m.geoProjectionMutator(Y),ut=Qe(Ge);return ut.radius=function(ht){return arguments.length?Qe(Ge=ht*R):Ge*S},ut.scale(179.976).clipAngle(147)},g.geoAiryRaw=Y,g.geoAitoff=function(){return m.geoProjection(G).scale(152.63)},g.geoAitoffRaw=G,g.geoArmadillo=function(){var Ge=20*R,Qe=Ge>=0?1:-1,ut=d(Qe*Ge),ht=m.geoProjectionMutator(J),kt=ht(Ge),Mt=kt.stream;return kt.parallel=function(Nt){return arguments.length?(ut=d((Qe=(Ge=Nt*R)>=0?1:-1)*Ge),ht(Ge)):Ge*S},kt.stream=function(Nt){var ln=kt.rotate(),sn=Mt(Nt),rn=(kt.rotate([0,0]),Mt(Nt)),mn=kt.precision();return kt.rotate(ln),sn.sphere=function(){rn.polygonStart(),rn.lineStart();for(var kn=-180*Qe;Qe*kn<180;kn+=90*Qe)rn.point(kn,90*Qe);if(Ge)for(;Qe*(kn-=3*Qe*mn)>=-180;)rn.point(kn,Qe*-r(n(kn*R/2),ut)*S);rn.lineEnd(),rn.polygonEnd()},sn},kt.scale(218.695).center([0,28.0974])},g.geoArmadilloRaw=J,g.geoAugust=function(){return m.geoProjection(te).scale(66.1603)},g.geoAugustRaw=te,g.geoBaker=function(){return m.geoProjection(ae).scale(112.314)},g.geoBakerRaw=ae,g.geoBerghaus=function(){var Ge=5,Qe=m.geoProjectionMutator(U),ut=Qe(Ge),ht=ut.stream,kt=-n(.01*R),Mt=h(.01*R);return ut.lobes=function(Nt){return arguments.length?Qe(Ge=+Nt):Ge},ut.stream=function(Nt){var ln=ut.rotate(),sn=ht(Nt),rn=(ut.rotate([0,0]),ht(Nt));return ut.rotate(ln),sn.sphere=function(){rn.polygonStart(),rn.lineStart();for(var mn=0,kn=360/Ge,In=2*x/Ge,Rn=90-180/Ge,jn=u;mn<Ge;++mn,Rn-=kn,jn-=In)rn.point(r(Mt*n(jn),kt)*S,O(Mt*h(jn))*S),Rn<-90?(rn.point(-90,-180-Rn-.01),rn.point(-90,-180-Rn+.01)):(rn.point(90,Rn+.01),rn.point(90,Rn-.01));rn.lineEnd(),rn.polygonEnd()},sn},ut.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},g.geoBerghausRaw=U,g.geoBertin1953=function(){return m.geoProjection(ee()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},g.geoBertin1953Raw=ee,g.geoBoggs=function(){return m.geoProjection(be).scale(160.857)},g.geoBoggsRaw=be,g.geoBonne=function(){return he(Ce).scale(123.082).center([0,26.1441]).parallel(45)},g.geoBonneRaw=Ce,g.geoBottomley=function(){var Ge=.5,Qe=m.geoProjectionMutator(Ee),ut=Qe(Ge);return ut.fraction=function(ht){return arguments.length?Qe(Ge=+ht):Ge},ut.scale(158.837)},g.geoBottomleyRaw=Ee,g.geoBromley=function(){return m.geoProjection(Ae).scale(152.63)},g.geoBromleyRaw=Ae,g.geoChamberlin=Fe,g.geoChamberlinRaw=Ie,g.geoChamberlinAfrica=function(){return Fe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},g.geoCollignon=function(){return m.geoProjection(Ue).scale(95.6464).center([0,30])},g.geoCollignonRaw=Ue,g.geoCraig=function(){return he(qe).scale(249.828).clipAngle(90)},g.geoCraigRaw=qe,g.geoCraster=function(){return m.geoProjection(rt).scale(156.19)},g.geoCrasterRaw=rt,g.geoCylindricalEqualArea=function(){return he(Ne).parallel(38.58).scale(195.044)},g.geoCylindricalEqualAreaRaw=Ne,g.geoCylindricalStereographic=function(){return he(Be).scale(124.75)},g.geoCylindricalStereographicRaw=Be,g.geoEckert1=function(){return m.geoProjection(We).scale(165.664)},g.geoEckert1Raw=We,g.geoEckert2=function(){return m.geoProjection(Ye).scale(165.664)},g.geoEckert2Raw=Ye,g.geoEckert3=function(){return m.geoProjection(lt).scale(180.739)},g.geoEckert3Raw=lt,g.geoEckert4=function(){return m.geoProjection(mt).scale(180.739)},g.geoEckert4Raw=mt,g.geoEckert5=function(){return m.geoProjection(Tt).scale(173.044)},g.geoEckert5Raw=Tt,g.geoEckert6=function(){return m.geoProjection(It).scale(173.044)},g.geoEckert6Raw=It,g.geoEisenlohr=function(){return m.geoProjection(ct).scale(62.5271)},g.geoEisenlohrRaw=ct,g.geoFahey=function(){return m.geoProjection(St).scale(137.152)},g.geoFaheyRaw=St,g.geoFoucaut=function(){return m.geoProjection(Xt).scale(135.264)},g.geoFoucautRaw=Xt,g.geoFoucautSinusoidal=function(){var Ge=.5,Qe=m.geoProjectionMutator(tn),ut=Qe(Ge);return ut.alpha=function(ht){return arguments.length?Qe(Ge=+ht):Ge},ut.scale(168.725)},g.geoFoucautSinusoidalRaw=tn,g.geoGilbert=function(Ge){null==Ge&&(Ge=m.geoOrthographic);var Qe=Ge(),ut=m.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function ht(Mt){return Qe(hn(Mt))}function kt(Mt){ht[Mt]=function(){return arguments.length?(Qe[Mt].apply(Qe,arguments),ht):Qe[Mt]()}}return Qe.invert&&(ht.invert=function(Mt){return cn(Qe.invert(Mt))}),ht.stream=function(Mt){var Nt=Qe.stream(Mt),ln=ut.stream({point:function(sn,rn){Nt.point(sn/2,O(d(-rn/2*R))*S)},lineStart:function(){Nt.lineStart()},lineEnd:function(){Nt.lineEnd()},polygonStart:function(){Nt.polygonStart()},polygonEnd:function(){Nt.polygonEnd()}});return ln.sphere=Nt.sphere,ln},ht.rotate=function(Mt){return arguments.length?(ut.rotate(Mt),ht):ut.rotate()},ht.center=function(Mt){return arguments.length?(Qe.center(hn(Mt)),ht):cn(Qe.center())},kt("angle"),kt("clipAngle"),kt("clipExtent"),kt("fitExtent"),kt("fitHeight"),kt("fitSize"),kt("fitWidth"),kt("scale"),kt("translate"),kt("precision"),ht.scale(249.5)},g.geoGingery=function(){var Ge=6,Qe=30*R,ut=n(Qe),ht=h(Qe),kt=m.geoProjectionMutator(yn),Mt=kt(Qe,Ge),Nt=Mt.stream,ln=-n(.01*R),sn=h(.01*R);return Mt.radius=function(rn){return arguments.length?(ut=n(Qe=rn*R),ht=h(Qe),kt(Qe,Ge)):Qe*S},Mt.lobes=function(rn){return arguments.length?kt(Qe,Ge=+rn):Ge},Mt.stream=function(rn){var mn=Mt.rotate(),kn=Nt(rn),In=(Mt.rotate([0,0]),Nt(rn));return Mt.rotate(mn),kn.sphere=function(){In.polygonStart(),In.lineStart();for(var Rn=0,jn=2*x/Ge,br=0;Rn<Ge;++Rn,br-=jn)In.point(r(sn*n(br),ln)*S,O(sn*h(br))*S),In.point(r(ht*n(br-jn/2),ut)*S,O(ht*h(br-jn/2))*S);In.lineEnd(),In.polygonEnd()},kn},Mt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},g.geoGingeryRaw=yn,g.geoGinzburg4=function(){return m.geoProjection(ye).scale(149.995)},g.geoGinzburg4Raw=ye,g.geoGinzburg5=function(){return m.geoProjection(ke).scale(153.93)},g.geoGinzburg5Raw=ke,g.geoGinzburg6=function(){return m.geoProjection(Ve).scale(130.945)},g.geoGinzburg6Raw=Ve,g.geoGinzburg8=function(){return m.geoProjection(Je).scale(131.747)},g.geoGinzburg8Raw=Je,g.geoGinzburg9=function(){return m.geoProjection(nt).scale(131.087)},g.geoGinzburg9Raw=nt,g.geoGringorten=function(){return m.geoProjection(Ke(vt)).scale(239.75)},g.geoGringortenRaw=vt,g.geoGuyou=function(){return m.geoProjection(Ke(Vt)).scale(151.496)},g.geoGuyouRaw=Vt,g.geoHammer=function(){var Ge=2,Qe=m.geoProjectionMutator(V),ut=Qe(Ge);return ut.coefficient=function(ht){return arguments.length?Qe(Ge=+ht):Ge},ut.scale(169.529)},g.geoHammerRaw=V,g.geoHammerRetroazimuthal=function(){var Ge=0,Qe=m.geoProjectionMutator(ft),ut=Qe(Ge),ht=ut.rotate,kt=ut.stream,Mt=m.geoCircle();return ut.parallel=function(Nt){if(!arguments.length)return Ge*S;var ln=ut.rotate();return Qe(Ge=Nt*R).rotate(ln)},ut.rotate=function(Nt){return arguments.length?(ht.call(ut,[Nt[0],Nt[1]-Ge*S]),Mt.center([-Nt[0],-Nt[1]]),ut):((Nt=ht.call(ut))[1]+=Ge*S,Nt)},ut.stream=function(Nt){return(Nt=kt(Nt)).sphere=function(){Nt.polygonStart();var ln,sn=Mt.radius(89.99)().coordinates[0],rn=sn.length-1,mn=-1;for(Nt.lineStart();++mn<rn;)Nt.point((ln=sn[mn])[0],ln[1]);for(Nt.lineEnd(),rn=(sn=Mt.radius(90.01)().coordinates[0]).length-1,Nt.lineStart();--mn>=0;)Nt.point((ln=sn[mn])[0],ln[1]);Nt.lineEnd(),Nt.polygonEnd()},Nt},ut.scale(79.4187).parallel(45).clipAngle(179.999)},g.geoHammerRetroazimuthalRaw=ft,g.geoHealpix=function(){var Ge=4,Qe=m.geoProjectionMutator(Bt),ut=Qe(Ge),ht=ut.stream;return ut.lobes=function(kt){return arguments.length?Qe(Ge=+kt):Ge},ut.stream=function(kt){var Mt=ut.rotate(),Nt=ht(kt),ln=(ut.rotate([0,0]),ht(kt));return ut.rotate(Mt),Nt.sphere=function(){var sn,rn;m.geoStream((rn=[].concat(b.range(-180,180+(sn=180/Ge)/2,sn).map(Pe),b.range(180,-180-sn/2,-sn).map(et)),{type:"Polygon",coordinates:[180===sn?rn.map(dt):rn]}),ln)},Nt},ut.scale(239.75)},g.geoHealpixRaw=Bt,g.geoHill=function(){var Ge=1,Qe=m.geoProjectionMutator(xt),ut=Qe(Ge);return ut.ratio=function(ht){return arguments.length?Qe(Ge=+ht):Ge},ut.scale(167.774).center([0,18.67])},g.geoHillRaw=xt,g.geoHomolosine=function(){return m.geoProjection(Yt).scale(152.63)},g.geoHomolosineRaw=Yt,g.geoHufnagel=function(){var Ge=1,Qe=0,ut=45*R,ht=2,kt=m.geoProjectionMutator(nn),Mt=kt(Ge,Qe,ut,ht);return Mt.a=function(Nt){return arguments.length?kt(Ge=+Nt,Qe,ut,ht):Ge},Mt.b=function(Nt){return arguments.length?kt(Ge,Qe=+Nt,ut,ht):Qe},Mt.psiMax=function(Nt){return arguments.length?kt(Ge,Qe,ut=+Nt*R,ht):ut*S},Mt.ratio=function(Nt){return arguments.length?kt(Ge,Qe,ut,ht=+Nt):ht},Mt.scale(180.739)},g.geoHufnagelRaw=nn,g.geoHyperelliptical=function(){var Ge=0,Qe=2.5,ut=1.183136,ht=m.geoProjectionMutator(Mn),kt=ht(Ge,Qe,ut);return kt.alpha=function(Mt){return arguments.length?ht(Ge=+Mt,Qe,ut):Ge},kt.k=function(Mt){return arguments.length?ht(Ge,Qe=+Mt,ut):Qe},kt.gamma=function(Mt){return arguments.length?ht(Ge,Qe,ut=+Mt):ut},kt.scale(152.63)},g.geoHyperellipticalRaw=Mn,g.geoInterrupt=an,g.geoInterruptedBoggs=function(){return an(be,fn).scale(160.857)},g.geoInterruptedHomolosine=function(){return an(Yt,pn).scale(152.63)},g.geoInterruptedMollweide=function(){return an(le,Sn).scale(169.529)},g.geoInterruptedMollweideHemispheres=function(){return an(le,Nn).scale(169.529).rotate([20,0])},g.geoInterruptedSinuMollweide=function(){return an(Rt,Kn,H).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},g.geoInterruptedSinusoidal=function(){return an(_e,Bn).scale(152.63).rotate([-20,0])},g.geoKavrayskiy7=function(){return m.geoProjection(cr).scale(158.837)},g.geoKavrayskiy7Raw=cr,g.geoLagrange=function(){var Ge=.5,Qe=m.geoProjectionMutator(Lr),ut=Qe(Ge);return ut.spacing=function(ht){return arguments.length?Qe(Ge=+ht):Ge},ut.scale(124.75)},g.geoLagrangeRaw=Lr,g.geoLarrivee=function(){return m.geoProjection(qr).scale(97.2672)},g.geoLarriveeRaw=qr,g.geoLaskowski=function(){return m.geoProjection(sr).scale(139.98)},g.geoLaskowskiRaw=sr,g.geoLittrow=function(){return m.geoProjection(hr).scale(144.049).clipAngle(89.999)},g.geoLittrowRaw=hr,g.geoLoximuthal=function(){return he(jr).parallel(40).scale(158.837)},g.geoLoximuthalRaw=jr,g.geoMiller=function(){return m.geoProjection(di).scale(108.318)},g.geoMillerRaw=di,g.geoModifiedStereographic=Tr,g.geoModifiedStereographicRaw=Jn,g.geoModifiedStereographicAlaska=function(){return Tr(Ar,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},g.geoModifiedStereographicGs48=function(){return Tr(mr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},g.geoModifiedStereographicGs50=function(){return Tr(lr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},g.geoModifiedStereographicMiller=function(){return Tr(ri,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},g.geoModifiedStereographicLee=function(){return Tr(si,[165,10]).scale(250).clipAngle(130).center([-165,-10])},g.geoMollweide=function(){return m.geoProjection(le).scale(169.529)},g.geoMollweideRaw=le,g.geoMtFlatPolarParabolic=function(){return m.geoProjection(dn).scale(164.859)},g.geoMtFlatPolarParabolicRaw=dn,g.geoMtFlatPolarQuartic=function(){return m.geoProjection(Cn).scale(188.209)},g.geoMtFlatPolarQuarticRaw=Cn,g.geoMtFlatPolarSinusoidal=function(){return m.geoProjection(jt).scale(166.518)},g.geoMtFlatPolarSinusoidalRaw=jt,g.geoNaturalEarth2=function(){return m.geoProjection(bn).scale(175.295)},g.geoNaturalEarth2Raw=bn,g.geoNellHammer=function(){return m.geoProjection(An).scale(152.63)},g.geoNellHammerRaw=An,g.geoInterruptedQuarticAuthalic=function(){return an(V(1/0),$n).rotate([20,0]).scale(152.63)},g.geoNicolosi=function(){return m.geoProjection(Gn).scale(127.267)},g.geoNicolosiRaw=Gn,g.geoPatterson=function(){return m.geoProjection(zn).scale(139.319)},g.geoPattersonRaw=zn,g.geoPolyconic=function(){return m.geoProjection(Hn).scale(103.74)},g.geoPolyconicRaw=Hn,g.geoPolyhedral=rr,g.geoPolyhedralButterfly=function(Ge){Ge=Ge||function(ut){var ht=m.geoCentroid({type:"MultiPoint",coordinates:ut});return m.geoGnomonic().scale(1).translate([0,0]).rotate([-ht[0],-ht[1]])};var Qe=Ir.map(function(ut){return{face:ut,project:Ge(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,ht){var kt=Qe[ut];kt&&(kt.children||(kt.children=[])).push(Qe[ht])}),rr(Qe[0],function(ut,ht){return Qe[ut<-x/2?ht<0?6:4:ut<0?ht<0?2:0:ut<x/2?ht<0?3:1:ht<0?7:5]}).angle(-30).scale(101.858).center([0,45])},g.geoPolyhedralCollignon=function(Ge){Ge=Ge||function(ut){var ht=m.geoCentroid({type:"MultiPoint",coordinates:ut});return m.geoProjection(Rr).translate([0,0]).scale(1).rotate(ht[1]>0?[-ht[0],0]:[180-ht[0],180])};var Qe=Ir.map(function(ut){return{face:ut,project:Ge(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,ht){var kt=Qe[ut];kt&&(kt.children||(kt.children=[])).push(Qe[ht])}),rr(Qe[0],function(ut,ht){return Qe[ut<-x/2?ht<0?6:4:ut<0?ht<0?2:0:ut<x/2?ht<0?3:1:ht<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},g.geoPolyhedralWaterman=function(Ge){Ge=Ge||function(Mt){var Nt=6===Mt.length?m.geoCentroid({type:"MultiPoint",coordinates:Mt}):Mt[0];return m.geoGnomonic().scale(1).translate([0,0]).rotate([-Nt[0],-Nt[1]])};var Qe=Ir.map(function(Mt){for(var Nt,ln=Mt.map(gi),sn=ln.length,rn=ln[sn-1],mn=[],kn=0;kn<sn;++kn)mn.push($r([.9486832980505138*rn[0]+.31622776601683794*(Nt=ln[kn])[0],.9486832980505138*rn[1]+.31622776601683794*Nt[1],.9486832980505138*rn[2]+.31622776601683794*Nt[2]]),$r([.9486832980505138*Nt[0]+.31622776601683794*rn[0],.9486832980505138*Nt[1]+.31622776601683794*rn[1],.9486832980505138*Nt[2]+.31622776601683794*rn[2]])),rn=Nt;return mn}),ut=[],ht=[-1,0,0,1,0,1,4,5];Qe.forEach(function(Mt,Nt){for(var ln,sn,rn=Ir[Nt],mn=rn.length,kn=ut[Nt]=[],In=0;In<mn;++In)Qe.push([rn[In],Mt[(2*In+2)%(2*mn)],Mt[(2*In+1)%(2*mn)]]),ht.push(Nt),kn.push((ln=gi(Mt[(2*In+2)%(2*mn)]),sn=gi(Mt[(2*In+1)%(2*mn)]),[ln[1]*sn[2]-ln[2]*sn[1],ln[2]*sn[0]-ln[0]*sn[2],ln[0]*sn[1]-ln[1]*sn[0]]))});var kt=Qe.map(function(Mt){return{project:Ge(Mt),face:Mt}});return ht.forEach(function(Mt,Nt){var ln=kt[Mt];ln&&(ln.children||(ln.children=[])).push(kt[Nt])}),rr(kt[0],function(Mt,Nt){var ln=n(Nt),sn=[ln*n(Mt),ln*h(Mt),h(Nt)],rn=Mt<-x/2?Nt<0?6:4:Mt<0?Nt<0?2:0:Mt<x/2?Nt<0?3:1:Nt<0?7:5,mn=ut[rn];return kt[Ur(mn[0],sn)<0?8+3*rn:Ur(mn[1],sn)<0?8+3*rn+1:Ur(mn[2],sn)<0?8+3*rn+2:rn]}).angle(-30).scale(110.625).center([0,45])},g.geoProject=function(Ge,Qe){var ut,ht=Qe.stream;if(!ht)throw new Error("invalid projection");switch(Ge&&Ge.type){case"Feature":ut=Br;break;case"FeatureCollection":ut=Wi;break;default:ut=ui}return ut(Ge,ht)},g.geoGringortenQuincuncial=function(){return Va(vt).scale(176.423)},g.geoPeirceQuincuncial=ua,g.geoPierceQuincuncial=ua,g.geoQuantize=function(Ge,Qe){if(!(0<=(Qe=+Qe)&&Qe<=20))throw new Error("invalid digits");function ut(rn){var mn=rn.length,kn=2,In=new Array(mn);for(In[0]=+rn[0].toFixed(Qe),In[1]=+rn[1].toFixed(Qe);kn<mn;)In[kn]=rn[kn],++kn;return In}function ht(rn){return rn.map(ut)}function kt(rn){for(var mn=ut(rn[0]),kn=[mn],In=1;In<rn.length;In++){var Rn=ut(rn[In]);(Rn.length>2||Rn[0]!=mn[0]||Rn[1]!=mn[1])&&(kn.push(Rn),mn=Rn)}return 1===kn.length&&rn.length>1&&kn.push(ut(rn[rn.length-1])),kn}function Mt(rn){return rn.map(kt)}function Nt(rn){if(null==rn)return rn;var mn;switch(rn.type){case"GeometryCollection":mn={type:"GeometryCollection",geometries:rn.geometries.map(Nt)};break;case"Point":mn={type:"Point",coordinates:ut(rn.coordinates)};break;case"MultiPoint":mn={type:rn.type,coordinates:ht(rn.coordinates)};break;case"LineString":mn={type:rn.type,coordinates:kt(rn.coordinates)};break;case"MultiLineString":case"Polygon":mn={type:rn.type,coordinates:Mt(rn.coordinates)};break;case"MultiPolygon":mn={type:"MultiPolygon",coordinates:rn.coordinates.map(Mt)};break;default:return rn}return null!=rn.bbox&&(mn.bbox=rn.bbox),mn}function ln(rn){var mn={type:"Feature",properties:rn.properties,geometry:Nt(rn.geometry)};return null!=rn.id&&(mn.id=rn.id),null!=rn.bbox&&(mn.bbox=rn.bbox),mn}if(null!=Ge)switch(Ge.type){case"Feature":return ln(Ge);case"FeatureCollection":var sn={type:"FeatureCollection",features:Ge.features.map(ln)};return null!=Ge.bbox&&(sn.bbox=Ge.bbox),sn;default:return Nt(Ge)}return Ge},g.geoQuincuncial=Va,g.geoRectangularPolyconic=function(){return he(sa).scale(131.215)},g.geoRectangularPolyconicRaw=sa,g.geoRobinson=function(){return m.geoProjection(Ts).scale(152.63)},g.geoRobinsonRaw=Ts,g.geoSatellite=function(){var Ge=2,Qe=0,ut=m.geoProjectionMutator(Fo),ht=ut(Ge,Qe);return ht.distance=function(kt){return arguments.length?ut(Ge=+kt,Qe):Ge},ht.tilt=function(kt){return arguments.length?ut(Ge,Qe=kt*R):Qe*S},ht.scale(432.147).clipAngle(C(1/Ge)*S-1e-6)},g.geoSatelliteRaw=Fo,g.geoSinuMollweide=function(){return m.geoProjection(Rt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},g.geoSinuMollweideRaw=Rt,g.geoSinusoidal=function(){return m.geoProjection(_e).scale(152.63)},g.geoSinusoidalRaw=_e,g.geoStitch=function(Ge){if(null==Ge)return Ge;switch(Ge.type){case"Feature":return Fa(Ge);case"FeatureCollection":var Qe={type:"FeatureCollection",features:Ge.features.map(Fa)};return null!=Ge.bbox&&(Qe.bbox=Ge.bbox),Qe;default:return hl(Ge)}},g.geoTimes=function(){return m.geoProjection($s).scale(146.153)},g.geoTimesRaw=$s,g.geoTwoPointAzimuthal=ml,g.geoTwoPointAzimuthalRaw=Rl,g.geoTwoPointAzimuthalUsa=function(){return ml([-158,21.5],[-77,39]).clipAngle(60).scale(400)},g.geoTwoPointEquidistant=oo,g.geoTwoPointEquidistantRaw=fs,g.geoTwoPointEquidistantUsa=function(){return oo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},g.geoVanDerGrinten=function(){return m.geoProjection(pa).scale(79.4183)},g.geoVanDerGrintenRaw=pa,g.geoVanDerGrinten2=function(){return m.geoProjection(ho).scale(79.4183)},g.geoVanDerGrinten2Raw=ho,g.geoVanDerGrinten3=function(){return m.geoProjection(po).scale(79.4183)},g.geoVanDerGrinten3Raw=po,g.geoVanDerGrinten4=function(){return m.geoProjection(ko).scale(127.16)},g.geoVanDerGrinten4Raw=ko,g.geoWagner=hi,g.geoWagner7=function(){return hi().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},g.geoWagnerRaw=No,g.geoWagner4=function(){return m.geoProjection(Ao).scale(176.84)},g.geoWagner4Raw=Ao,g.geoWagner6=function(){return m.geoProjection(Rs).scale(152.63)},g.geoWagner6Raw=Rs,g.geoWiechel=function(){return m.geoProjection(Qa).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},g.geoWiechelRaw=Qa,g.geoWinkel3=function(){return m.geoProjection(ga).scale(158.837)},g.geoWinkel3Raw=ga,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-geo"),v("d3-array")):m(g.d3=g.d3||{},g.d3,g.d3)},{"d3-array":107,"d3-geo":114}],114:[function(v,re,ne){var g,m;g=this,m=function(g,m){"use strict";function b(){return new y}function y(){this.reset()}y.prototype={constructor:y,reset:function(){this.s=this.t=0},add:function(_t){r(e,_t,this.t),r(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new y;function r(_t,Ht,_n){var Jt=_t.s=Ht+_n,wn=Jt-Ht;_t.t=Ht-(Jt-wn)+(_n-wn)}var n=1e-6,a=Math.PI,t=a/2,p=a/4,s=2*a,i=180/a,f=a/180,c=Math.abs,l=Math.atan,h=Math.atan2,d=Math.cos,o=Math.ceil,x=Math.exp,u=Math.log,T=Math.pow,_=Math.sin,w=Math.sign||function(_t){return _t>0?1:_t<0?-1:0},M=Math.sqrt,I=Math.tan;function S(_t){return _t>1?0:_t<-1?a:Math.acos(_t)}function R(_t){return _t>1?t:_t<-1?-t:Math.asin(_t)}function O(_t){return(_t=_(_t/2))*_t}function C(){}function D(_t,Ht){_t&&z.hasOwnProperty(_t.type)&&z[_t.type](_t,Ht)}var B={Feature:function(_t,Ht){D(_t.geometry,Ht)},FeatureCollection:function(_t,Ht){for(var _n=_t.features,Jt=-1,wn=_n.length;++Jt<wn;)D(_n[Jt].geometry,Ht)}},z={Sphere:function(_t,Ht){Ht.sphere()},Point:function(_t,Ht){Ht.point((_t=_t.coordinates)[0],_t[1],_t[2])},MultiPoint:function(_t,Ht){for(var _n=_t.coordinates,Jt=-1,wn=_n.length;++Jt<wn;)Ht.point((_t=_n[Jt])[0],_t[1],_t[2])},LineString:function(_t,Ht){Y(_t.coordinates,Ht,0)},MultiLineString:function(_t,Ht){for(var _n=_t.coordinates,Jt=-1,wn=_n.length;++Jt<wn;)Y(_n[Jt],Ht,0)},Polygon:function(_t,Ht){G(_t.coordinates,Ht)},MultiPolygon:function(_t,Ht){for(var _n=_t.coordinates,Jt=-1,wn=_n.length;++Jt<wn;)G(_n[Jt],Ht)},GeometryCollection:function(_t,Ht){for(var _n=_t.geometries,Jt=-1,wn=_n.length;++Jt<wn;)D(_n[Jt],Ht)}};function Y(_t,Ht,_n){var Jt,wn=-1,Xn=_t.length-_n;for(Ht.lineStart();++wn<Xn;)Ht.point((Jt=_t[wn])[0],Jt[1],Jt[2]);Ht.lineEnd()}function G(_t,Ht){var _n=-1,Jt=_t.length;for(Ht.polygonStart();++_n<Jt;)Y(_t[_n],Ht,1);Ht.polygonEnd()}function J(_t,Ht){_t&&B.hasOwnProperty(_t.type)?B[_t.type](_t,Ht):D(_t,Ht)}var te,X,K,ae,U,V=b(),q=b(),ie={point:C,lineStart:C,lineEnd:C,polygonStart:function(){V.reset(),ie.lineStart=H,ie.lineEnd=ee},polygonEnd:function(){var _t=+V;q.add(_t<0?s+_t:_t),this.lineStart=this.lineEnd=this.point=C},sphere:function(){q.add(s)}};function H(){ie.point=Q}function ee(){oe(te,X)}function Q(_t,Ht){ie.point=oe,te=_t,X=Ht,K=_t*=f,ae=d(Ht=(Ht*=f)/2+p),U=_(Ht)}function oe(_t,Ht){var _n=(_t*=f)-K,Jt=_n>=0?1:-1,wn=Jt*_n,Xn=d(Ht=(Ht*=f)/2+p),er=_(Ht),fr=U*er,Mr=ae*Xn+fr*d(wn),_r=fr*Jt*_(wn);V.add(h(_r,Mr)),K=_t,ae=Xn,U=er}function le(_t){return[h(_t[1],_t[0]),R(_t[2])]}function de(_t){var Ht=_t[0],_n=_t[1],Jt=d(_n);return[Jt*d(Ht),Jt*_(Ht),_(_n)]}function fe(_t,Ht){return _t[0]*Ht[0]+_t[1]*Ht[1]+_t[2]*Ht[2]}function be(_t,Ht){return[_t[1]*Ht[2]-_t[2]*Ht[1],_t[2]*Ht[0]-_t[0]*Ht[2],_t[0]*Ht[1]-_t[1]*Ht[0]]}function he(_t,Ht){_t[0]+=Ht[0],_t[1]+=Ht[1],_t[2]+=Ht[2]}function _e(_t,Ht){return[_t[0]*Ht,_t[1]*Ht,_t[2]*Ht]}function Ce(_t){var Ht=M(_t[0]*_t[0]+_t[1]*_t[1]+_t[2]*_t[2]);_t[0]/=Ht,_t[1]/=Ht,_t[2]/=Ht}var Ee,Ae,ze,ve,Te,Ie,De,Fe,Ue,qe,je,rt,Ne,Be,We,Ye,lt,mt,Tt,It,Ct,ct,at,St,Xt,tn,hn=b(),cn={point:yn,lineStart:Xe,lineEnd:tt,polygonStart:function(){cn.point=ye,cn.lineStart=ke,cn.lineEnd=Ve,hn.reset(),ie.polygonStart()},polygonEnd:function(){ie.polygonEnd(),cn.point=yn,cn.lineStart=Xe,cn.lineEnd=tt,V<0?(Ee=-(ze=180),Ae=-(ve=90)):hn>n?ve=90:hn<-n&&(Ae=-90),qe[0]=Ee,qe[1]=ze},sphere:function(){Ee=-(ze=180),Ae=-(ve=90)}};function yn(_t,Ht){Ue.push(qe=[Ee=_t,ze=_t]),Ht<Ae&&(Ae=Ht),Ht>ve&&(ve=Ht)}function en(_t,Ht){var _n=de([_t*f,Ht*f]);if(Fe){var Jt=be(Fe,_n),wn=be([Jt[1],-Jt[0],0],Jt);Ce(wn),wn=le(wn);var Xn,er=_t-Te,fr=er>0?1:-1,Mr=wn[0]*i*fr,_r=c(er)>180;_r^(fr*Te<Mr&&Mr<fr*_t)?(Xn=wn[1]*i)>ve&&(ve=Xn):_r^(fr*Te<(Mr=(Mr+360)%360-180)&&Mr<fr*_t)?(Xn=-wn[1]*i)<Ae&&(Ae=Xn):(Ht<Ae&&(Ae=Ht),Ht>ve&&(ve=Ht)),_r?_t<Te?Je(Ee,_t)>Je(Ee,ze)&&(ze=_t):Je(_t,ze)>Je(Ee,ze)&&(Ee=_t):ze>=Ee?(_t<Ee&&(Ee=_t),_t>ze&&(ze=_t)):_t>Te?Je(Ee,_t)>Je(Ee,ze)&&(ze=_t):Je(_t,ze)>Je(Ee,ze)&&(Ee=_t)}else Ue.push(qe=[Ee=_t,ze=_t]);Ht<Ae&&(Ae=Ht),Ht>ve&&(ve=Ht),Fe=_n,Te=_t}function Xe(){cn.point=en}function tt(){qe[0]=Ee,qe[1]=ze,cn.point=yn,Fe=null}function ye(_t,Ht){if(Fe){var _n=_t-Te;hn.add(c(_n)>180?_n+(_n>0?360:-360):_n)}else Ie=_t,De=Ht;ie.point(_t,Ht),en(_t,Ht)}function ke(){ie.lineStart()}function Ve(){ye(Ie,De),ie.lineEnd(),c(hn)>n&&(Ee=-(ze=180)),qe[0]=Ee,qe[1]=ze,Fe=null}function Je(_t,Ht){return(Ht-=_t)<0?Ht+360:Ht}function nt(_t,Ht){return _t[0]-Ht[0]}function Ke(_t,Ht){return _t[0]<=_t[1]?_t[0]<=Ht&&Ht<=_t[1]:Ht<_t[0]||_t[1]<Ht}var vt={sphere:C,point:gt,lineStart:Vt,lineEnd:Wt,polygonStart:function(){vt.lineStart=Pt,vt.lineEnd=Bt},polygonEnd:function(){vt.lineStart=Vt,vt.lineEnd=Wt}};function gt(_t,Ht){_t*=f;var _n=d(Ht*=f);Ot(_n*d(_t),_n*_(_t),_(Ht))}function Ot(_t,Ht,_n){++je,Ne+=(_t-Ne)/je,Be+=(Ht-Be)/je,We+=(_n-We)/je}function Vt(){vt.point=ft}function ft(_t,Ht){_t*=f;var _n=d(Ht*=f);St=_n*d(_t),Xt=_n*_(_t),tn=_(Ht),vt.point=bt,Ot(St,Xt,tn)}function bt(_t,Ht){_t*=f;var _n=d(Ht*=f),Jt=_n*d(_t),wn=_n*_(_t),Xn=_(Ht),er=h(M((er=Xt*Xn-tn*wn)*er+(er=tn*Jt-St*Xn)*er+(er=St*wn-Xt*Jt)*er),St*Jt+Xt*wn+tn*Xn);rt+=er,Ye+=er*(St+(St=Jt)),lt+=er*(Xt+(Xt=wn)),mt+=er*(tn+(tn=Xn)),Ot(St,Xt,tn)}function Wt(){vt.point=gt}function Pt(){vt.point=Pe}function Bt(){et(ct,at),vt.point=gt}function Pe(_t,Ht){ct=_t,at=Ht,_t*=f,Ht*=f,vt.point=et;var _n=d(Ht);St=_n*d(_t),Xt=_n*_(_t),tn=_(Ht),Ot(St,Xt,tn)}function et(_t,Ht){_t*=f;var _n=d(Ht*=f),Jt=_n*d(_t),wn=_n*_(_t),Xn=_(Ht),er=Xt*Xn-tn*wn,fr=tn*Jt-St*Xn,Mr=St*wn-Xt*Jt,_r=M(er*er+fr*fr+Mr*Mr),Dr=R(_r),Fr=_r&&-Dr/_r;Tt+=Fr*er,It+=Fr*fr,Ct+=Fr*Mr,rt+=Dr,Ye+=Dr*(St+(St=Jt)),lt+=Dr*(Xt+(Xt=wn)),mt+=Dr*(tn+(tn=Xn)),Ot(St,Xt,tn)}function dt(_t){return function(){return _t}}function xt(_t,Ht){function _n(Jt,wn){return Jt=_t(Jt,wn),Ht(Jt[0],Jt[1])}return _t.invert&&Ht.invert&&(_n.invert=function(Jt,wn){return(Jt=Ht.invert(Jt,wn))&&_t.invert(Jt[0],Jt[1])}),_n}function Rt(_t,Ht){return[c(_t)>a?_t+Math.round(-_t/s)*s:_t,Ht]}function Yt(_t,Ht,_n){return(_t%=s)?Ht||_n?xt(Kt(_t),Mn(Ht,_n)):Kt(_t):Ht||_n?Mn(Ht,_n):Rt}function nn(_t){return function(Ht,_n){return[(Ht+=_t)>a?Ht-s:Ht<-a?Ht+s:Ht,_n]}}function Kt(_t){var Ht=nn(_t);return Ht.invert=nn(-_t),Ht}function Mn(_t,Ht){var _n=d(_t),Jt=_(_t),wn=d(Ht),Xn=_(Ht);function er(fr,Mr){var _r=d(Mr),Dr=d(fr)*_r,Fr=_(fr)*_r,wr=_(Mr),Nr=wr*_n+Dr*Jt;return[h(Fr*wn-Nr*Xn,Dr*_n-wr*Jt),R(Nr*wn+Fr*Xn)]}return er.invert=function(fr,Mr){var _r=d(Mr),Dr=d(fr)*_r,Fr=_(fr)*_r,wr=_(Mr),Nr=wr*wn-Fr*Xn;return[h(Fr*wn+wr*Xn,Dr*_n+Nr*Jt),R(Nr*_n-Dr*Jt)]},er}function Un(_t){function Ht(_n){return(_n=_t(_n[0]*f,_n[1]*f))[0]*=i,_n[1]*=i,_n}return _t=Yt(_t[0]*f,_t[1]*f,_t.length>2?_t[2]*f:0),Ht.invert=function(_n){return(_n=_t.invert(_n[0]*f,_n[1]*f))[0]*=i,_n[1]*=i,_n},Ht}function Tn(_t,Ht,_n,Jt,wn,Xn){if(_n){var er=d(Ht),fr=_(Ht),Mr=Jt*_n;null==wn?(wn=Ht+Jt*s,Xn=Ht-Mr/2):(wn=un(er,wn),Xn=un(er,Xn),(Jt>0?wn<Xn:wn>Xn)&&(wn+=Jt*s));for(var _r,Dr=wn;Jt>0?Dr>Xn:Dr<Xn;Dr-=Mr)_r=le([er,-fr*d(Dr),-fr*_(Dr)]),_t.point(_r[0],_r[1])}}function un(_t,Ht){(Ht=de(Ht))[0]-=_t,Ce(Ht);var _n=S(-Ht[1]);return((-Ht[2]<0?-_n:_n)+s-n)%s}function an(){var _t,Ht=[];return{point:function(_n,Jt,wn){_t.push([_n,Jt,wn])},lineStart:function(){Ht.push(_t=[])},lineEnd:C,rejoin:function(){Ht.length>1&&Ht.push(Ht.pop().concat(Ht.shift()))},result:function(){var _n=Ht;return Ht=[],_t=null,_n}}}function fn(_t,Ht){return c(_t[0]-Ht[0])<n&&c(_t[1]-Ht[1])<n}function pn(_t,Ht,_n,Jt){this.x=_t,this.z=Ht,this.o=_n,this.e=Jt,this.v=!1,this.n=this.p=null}function Sn(_t,Ht,_n,Jt,wn){var Xn,er,fr=[],Mr=[];if(_t.forEach(function(ni){if(!((li=ni.length-1)<=0)){var li,bi,dr=ni[0],wi=ni[li];if(fn(dr,wi)){if(!dr[2]&&!wi[2]){for(wn.lineStart(),Xn=0;Xn<li;++Xn)wn.point((dr=ni[Xn])[0],dr[1]);return void wn.lineEnd()}wi[0]+=2*n}fr.push(bi=new pn(dr,ni,null,!0)),Mr.push(bi.o=new pn(dr,null,bi,!1)),fr.push(bi=new pn(wi,ni,null,!1)),Mr.push(bi.o=new pn(wi,null,bi,!0))}}),fr.length){for(Mr.sort(Ht),Nn(fr),Nn(Mr),Xn=0,er=Mr.length;Xn<er;++Xn)Mr[Xn].e=_n=!_n;for(var _r,Dr,Fr=fr[0];;){for(var wr=Fr,Nr=!0;wr.v;)if((wr=wr.n)===Fr)return;_r=wr.z,wn.lineStart();do{if(wr.v=wr.o.v=!0,wr.e){if(Nr)for(Xn=0,er=_r.length;Xn<er;++Xn)wn.point((Dr=_r[Xn])[0],Dr[1]);else Jt(wr.x,wr.n.x,1,wn);wr=wr.n}else{if(Nr)for(Xn=(_r=wr.p.z).length-1;Xn>=0;--Xn)wn.point((Dr=_r[Xn])[0],Dr[1]);else Jt(wr.x,wr.p.x,-1,wn);wr=wr.p}_r=(wr=wr.o).z,Nr=!Nr}while(!wr.v);wn.lineEnd()}}}function Nn(_t){if(Ht=_t.length){for(var Ht,_n,Jt=0,wn=_t[0];++Jt<Ht;)wn.n=_n=_t[Jt],_n.p=wn,wn=_n;wn.n=_n=_t[0],_n.p=wn}}Rt.invert=Rt;var Kn=b();function Bn(_t){return c(_t[0])<=a?_t[0]:w(_t[0])*((c(_t[0])+a)%s-a)}function cr(_t,Ht){var _n=Bn(Ht),Jt=Ht[1],wn=_(Jt),Xn=[_(_n),-d(_n),0],er=0,fr=0;Kn.reset(),1===wn?Jt=t+n:-1===wn&&(Jt=-t-n);for(var Mr=0,_r=_t.length;Mr<_r;++Mr)if(Fr=(Dr=_t[Mr]).length)for(var Dr,Fr,wr=Dr[Fr-1],Nr=Bn(wr),ni=wr[1]/2+p,li=_(ni),bi=d(ni),dr=0;dr<Fr;++dr,Nr=Gr,li=ki,bi=Zi,wr=wi){var wi=Dr[dr],Gr=Bn(wi),ii=wi[1]/2+p,ki=_(ii),Zi=d(ii),aa=Gr-Nr,Vr=aa>=0?1:-1,ca=Vr*aa,ia=ca>a,Ei=li*ki;if(Kn.add(h(Ei*Vr*_(ca),bi*Zi+Ei*d(ca))),er+=ia?aa+Vr*s:aa,ia^Nr>=_n^Gr>=_n){var fa=be(de(wr),de(wi));Ce(fa);var ea=be(Xn,fa);Ce(ea);var za=(ia^aa>=0?-1:1)*R(ea[2]);(Jt>za||Jt===za&&(fa[0]||fa[1]))&&(fr+=ia^aa>=0?1:-1)}}return(er<-n||er<n&&Kn<-n)^1&fr}function Lr(_t,Ht,_n,Jt){return function(wn){var Xn,er,fr,Mr=Ht(wn),_r=an(),Dr=Ht(_r),Fr=!1,wr={point:Nr,lineStart:li,lineEnd:bi,polygonStart:function(){wr.point=dr,wr.lineStart=wi,wr.lineEnd=Gr,er=[],Xn=[]},polygonEnd:function(){wr.point=Nr,wr.lineStart=li,wr.lineEnd=bi,er=m.merge(er);var ii=cr(Xn,Jt);er.length?(Fr||(wn.polygonStart(),Fr=!0),Sn(er,qr,ii,_n,wn)):ii&&(Fr||(wn.polygonStart(),Fr=!0),wn.lineStart(),_n(null,null,1,wn),wn.lineEnd()),Fr&&(wn.polygonEnd(),Fr=!1),er=Xn=null},sphere:function(){wn.polygonStart(),wn.lineStart(),_n(null,null,1,wn),wn.lineEnd(),wn.polygonEnd()}};function Nr(ii,ki){_t(ii,ki)&&wn.point(ii,ki)}function ni(ii,ki){Mr.point(ii,ki)}function li(){wr.point=ni,Mr.lineStart()}function bi(){wr.point=Nr,Mr.lineEnd()}function dr(ii,ki){fr.push([ii,ki]),Dr.point(ii,ki)}function wi(){Dr.lineStart(),fr=[]}function Gr(){dr(fr[0][0],fr[0][1]),Dr.lineEnd();var ii,ki,Zi,aa,Vr=Dr.clean(),ca=_r.result(),ia=ca.length;if(fr.pop(),Xn.push(fr),fr=null,ia)if(1&Vr){if((ki=(Zi=ca[0]).length-1)>0){for(Fr||(wn.polygonStart(),Fr=!0),wn.lineStart(),ii=0;ii<ki;++ii)wn.point((aa=Zi[ii])[0],aa[1]);wn.lineEnd()}}else ia>1&&2&Vr&&ca.push(ca.pop().concat(ca.shift())),er.push(ca.filter(Qn))}return wr}}function Qn(_t){return _t.length>1}function qr(_t,Ht){return((_t=_t.x)[0]<0?_t[1]-t-n:t-_t[1])-((Ht=Ht.x)[0]<0?Ht[1]-t-n:t-Ht[1])}var sr=Lr(function(){return!0},function(_t){var Ht,_n=NaN,Jt=NaN,wn=NaN;return{lineStart:function(){_t.lineStart(),Ht=1},point:function(Xn,er){var _r,Dr,Fr,wr,Nr,ni,li,fr=Xn>0?a:-a,Mr=c(Xn-_n);c(Mr-a)<n?(_t.point(_n,Jt=(Jt+er)/2>0?t:-t),_t.point(wn,Jt),_t.lineEnd(),_t.lineStart(),_t.point(fr,Jt),_t.point(Xn,Jt),Ht=0):wn!==fr&&Mr>=a&&(c(_n-wn)<n&&(_n-=wn*n),c(Xn-fr)<n&&(Xn-=fr*n),Dr=Jt,wr=er,li=_((_r=_n)-(Fr=Xn)),Jt=c(li)>n?l((_(Dr)*(ni=d(wr))*_(Fr)-_(wr)*(Nr=d(Dr))*_(_r))/(Nr*ni*li)):(Dr+wr)/2,_t.point(wn,Jt),_t.lineEnd(),_t.lineStart(),_t.point(fr,Jt),Ht=0),_t.point(_n=Xn,Jt=er),wn=fr},lineEnd:function(){_t.lineEnd(),_n=Jt=NaN},clean:function(){return 2-Ht}}},function(_t,Ht,_n,Jt){var wn;if(null==_t)Jt.point(-a,wn=_n*t),Jt.point(0,wn),Jt.point(a,wn),Jt.point(a,0),Jt.point(a,-wn),Jt.point(0,-wn),Jt.point(-a,-wn),Jt.point(-a,0),Jt.point(-a,wn);else if(c(_t[0]-Ht[0])>n){var Xn=_t[0]<Ht[0]?a:-a;Jt.point(-Xn,wn=_n*Xn/2),Jt.point(0,wn),Jt.point(Xn,wn)}else Jt.point(Ht[0],Ht[1])},[-a,-t]);function hr(_t){var Ht=d(_t),_n=6*f,Jt=Ht>0,wn=c(Ht)>n;function Xn(Mr,_r){return d(Mr)*d(_r)>Ht}function er(Mr,_r,Dr){var Fr=[1,0,0],wr=be(de(Mr),de(_r)),Nr=fe(wr,wr),ni=wr[0],li=Nr-ni*ni;if(!li)return!Dr&&Mr;var bi=Ht*Nr/li,dr=-Ht*ni/li,wi=be(Fr,wr),Gr=_e(Fr,bi);he(Gr,_e(wr,dr));var ii=wi,ki=fe(Gr,ii),Zi=fe(ii,ii),aa=ki*ki-Zi*(fe(Gr,Gr)-1);if(!(aa<0)){var Vr=M(aa),ca=_e(ii,(-ki-Vr)/Zi);if(he(ca,Gr),ca=le(ca),!Dr)return ca;var ia,Ei=Mr[0],fa=_r[0],ea=Mr[1],za=_r[1];fa<Ei&&(ia=Ei,Ei=fa,fa=ia);var Ai=fa-Ei,qa=c(Ai-a)<n;if(!qa&&za<ea&&(ia=ea,ea=za,za=ia),qa||Ai<n?qa?ea+za>0^ca[1]<(c(ca[0]-Ei)<n?ea:za):ea<=ca[1]&&ca[1]<=za:Ai>a^(Ei<=ca[0]&&ca[0]<=fa)){var ka=_e(ii,(-ki+Vr)/Zi);return he(ka,Gr),[ca,le(ka)]}}}function fr(Mr,_r){var Dr=Jt?_t:a-_t,Fr=0;return Mr<-Dr?Fr|=1:Mr>Dr&&(Fr|=2),_r<-Dr?Fr|=4:_r>Dr&&(Fr|=8),Fr}return Lr(Xn,function(Mr){var _r,Dr,Fr,wr,Nr;return{lineStart:function(){wr=Fr=!1,Nr=1},point:function(ni,li){var bi,dr=[ni,li],wi=Xn(ni,li),Gr=Jt?wi?0:fr(ni,li):wi?fr(ni+(ni<0?a:-a),li):0;if(!_r&&(wr=Fr=wi)&&Mr.lineStart(),wi!==Fr&&(!(bi=er(_r,dr))||fn(_r,bi)||fn(dr,bi))&&(dr[2]=1),wi!==Fr)Nr=0,wi?(Mr.lineStart(),bi=er(dr,_r),Mr.point(bi[0],bi[1])):(bi=er(_r,dr),Mr.point(bi[0],bi[1],2),Mr.lineEnd()),_r=bi;else if(wn&&_r&&Jt^wi){var ii;Gr&Dr||!(ii=er(dr,_r,!0))||(Nr=0,Jt?(Mr.lineStart(),Mr.point(ii[0][0],ii[0][1]),Mr.point(ii[1][0],ii[1][1]),Mr.lineEnd()):(Mr.point(ii[1][0],ii[1][1]),Mr.lineEnd(),Mr.lineStart(),Mr.point(ii[0][0],ii[0][1],3)))}!wi||_r&&fn(_r,dr)||Mr.point(dr[0],dr[1]),_r=dr,Fr=wi,Dr=Gr},lineEnd:function(){Fr&&Mr.lineEnd(),_r=null},clean:function(){return Nr|(wr&&Fr)<<1}}},function(Mr,_r,Dr,Fr){Tn(Fr,_t,_n,Dr,Mr,_r)},Jt?[0,-_t]:[-a,_t-a])}function jr(_t,Ht,_n,Jt){function wn(_r,Dr){return _t<=_r&&_r<=_n&&Ht<=Dr&&Dr<=Jt}function Xn(_r,Dr,Fr,wr){var Nr=0,ni=0;if(null==_r||(Nr=er(_r,Fr))!==(ni=er(Dr,Fr))||Mr(_r,Dr)<0^Fr>0)do{wr.point(0===Nr||3===Nr?_t:_n,Nr>1?Jt:Ht)}while((Nr=(Nr+Fr+4)%4)!==ni);else wr.point(Dr[0],Dr[1])}function er(_r,Dr){return c(_r[0]-_t)<n?Dr>0?0:3:c(_r[0]-_n)<n?Dr>0?2:1:c(_r[1]-Ht)<n?Dr>0?1:0:Dr>0?3:2}function fr(_r,Dr){return Mr(_r.x,Dr.x)}function Mr(_r,Dr){var Fr=er(_r,1),wr=er(Dr,1);return Fr!==wr?Fr-wr:0===Fr?Dr[1]-_r[1]:1===Fr?_r[0]-Dr[0]:2===Fr?_r[1]-Dr[1]:Dr[0]-_r[0]}return function(_r){var Dr,Fr,wr,Nr,ni,li,bi,dr,wi,Gr,ii,ki=_r,Zi=an(),aa={point:Vr,lineStart:function(){aa.point=ca,Fr&&Fr.push(wr=[]),Gr=!0,wi=!1,bi=dr=NaN},lineEnd:function(){Dr&&(ca(Nr,ni),li&&wi&&Zi.rejoin(),Dr.push(Zi.result())),aa.point=Vr,wi&&ki.lineEnd()},polygonStart:function(){ki=Zi,Dr=[],Fr=[],ii=!0},polygonEnd:function(){var ia=function(){for(var ea=0,za=0,Ai=Fr.length;za<Ai;++za)for(var qa,ka,Ks=Fr[za],Hs=1,$o=Ks.length,Ri=Ks[0],mo=Ri[0],rs=Ri[1];Hs<$o;++Hs)qa=mo,ka=rs,mo=(Ri=Ks[Hs])[0],rs=Ri[1],ka<=Jt?rs>Jt&&(mo-qa)*(Jt-ka)>(rs-ka)*(_t-qa)&&++ea:rs<=Jt&&(mo-qa)*(Jt-ka)<(rs-ka)*(_t-qa)&&--ea;return ea}(),Ei=ii&&ia,fa=(Dr=m.merge(Dr)).length;(Ei||fa)&&(_r.polygonStart(),Ei&&(_r.lineStart(),Xn(null,null,1,_r),_r.lineEnd()),fa&&Sn(Dr,fr,ia,Xn,_r),_r.polygonEnd()),ki=_r,Dr=Fr=wr=null}};function Vr(ia,Ei){wn(ia,Ei)&&ki.point(ia,Ei)}function ca(ia,Ei){var fa=wn(ia,Ei);if(Fr&&wr.push([ia,Ei]),Gr)Nr=ia,ni=Ei,li=fa,Gr=!1,fa&&(ki.lineStart(),ki.point(ia,Ei));else if(fa&&wi)ki.point(ia,Ei);else{var ea=[bi=Math.max(-1e9,Math.min(1e9,bi)),dr=Math.max(-1e9,Math.min(1e9,dr))],za=[ia=Math.max(-1e9,Math.min(1e9,ia)),Ei=Math.max(-1e9,Math.min(1e9,Ei))];!function(Ai,qa,ka,Ks,Hs,$o){var Ri,mo=Ai[0],rs=Ai[1],Aa=0,Oa=1,Bo=qa[0]-mo,Na=qa[1]-rs;if(Ri=ka-mo,Bo||!(Ri>0)){if(Ri/=Bo,Bo<0){if(Ri<Aa)return;Ri<Oa&&(Oa=Ri)}else if(Bo>0){if(Ri>Oa)return;Ri>Aa&&(Aa=Ri)}if(Ri=Hs-mo,Bo||!(Ri<0)){if(Ri/=Bo,Bo<0){if(Ri>Oa)return;Ri>Aa&&(Aa=Ri)}else if(Bo>0){if(Ri<Aa)return;Ri<Oa&&(Oa=Ri)}if(Ri=Ks-rs,Na||!(Ri>0)){if(Ri/=Na,Na<0){if(Ri<Aa)return;Ri<Oa&&(Oa=Ri)}else if(Na>0){if(Ri>Oa)return;Ri>Aa&&(Aa=Ri)}if(Ri=$o-rs,Na||!(Ri<0)){if(Ri/=Na,Na<0){if(Ri>Oa)return;Ri>Aa&&(Aa=Ri)}else if(Na>0){if(Ri<Aa)return;Ri<Oa&&(Oa=Ri)}return Aa>0&&(Ai[0]=mo+Aa*Bo,Ai[1]=rs+Aa*Na),Oa<1&&(qa[0]=mo+Oa*Bo,qa[1]=rs+Oa*Na),!0}}}}}(ea,za,_t,Ht,_n,Jt)?fa&&(ki.lineStart(),ki.point(ia,Ei),ii=!1):(wi||(ki.lineStart(),ki.point(ea[0],ea[1])),ki.point(za[0],za[1]),fa||ki.lineEnd(),ii=!1)}bi=ia,dr=Ei,wi=fa}return aa}}var di,Jn,Ar,mr=b(),lr={sphere:C,point:C,lineStart:function(){lr.point=si,lr.lineEnd=ri},lineEnd:C,polygonStart:C,polygonEnd:C};function ri(){lr.point=lr.lineEnd=C}function si(_t,Ht){di=_t*=f,Jn=_(Ht*=f),Ar=d(Ht),lr.point=Tr}function Tr(_t,Ht){_t*=f;var _n=_(Ht*=f),Jt=d(Ht),wn=c(_t-di),Xn=d(wn),er=Jt*_(wn),fr=Ar*_n-Jn*Jt*Xn,Mr=Jn*_n+Ar*Jt*Xn;mr.add(h(M(er*er+fr*fr),Mr)),di=_t,Jn=_n,Ar=Jt}function Zr(_t){return mr.reset(),J(_t,lr),+mr}var Ii=[null,null],dn={type:"LineString",coordinates:Ii};function Cn(_t,Ht){return Ii[0]=_t,Ii[1]=Ht,Zr(dn)}var jt={Feature:function(_t,Ht){return An(_t.geometry,Ht)},FeatureCollection:function(_t,Ht){for(var _n=_t.features,Jt=-1,wn=_n.length;++Jt<wn;)if(An(_n[Jt].geometry,Ht))return!0;return!1}},bn={Sphere:function(){return!0},Point:function(_t,Ht){return $n(_t.coordinates,Ht)},MultiPoint:function(_t,Ht){for(var _n=_t.coordinates,Jt=-1,wn=_n.length;++Jt<wn;)if($n(_n[Jt],Ht))return!0;return!1},LineString:function(_t,Ht){return Gn(_t.coordinates,Ht)},MultiLineString:function(_t,Ht){for(var _n=_t.coordinates,Jt=-1,wn=_n.length;++Jt<wn;)if(Gn(_n[Jt],Ht))return!0;return!1},Polygon:function(_t,Ht){return zn(_t.coordinates,Ht)},MultiPolygon:function(_t,Ht){for(var _n=_t.coordinates,Jt=-1,wn=_n.length;++Jt<wn;)if(zn(_n[Jt],Ht))return!0;return!1},GeometryCollection:function(_t,Ht){for(var _n=_t.geometries,Jt=-1,wn=_n.length;++Jt<wn;)if(An(_n[Jt],Ht))return!0;return!1}};function An(_t,Ht){return!(!_t||!bn.hasOwnProperty(_t.type))&&bn[_t.type](_t,Ht)}function $n(_t,Ht){return 0===Cn(_t,Ht)}function Gn(_t,Ht){for(var _n,Jt,wn,Xn=0,er=_t.length;Xn<er;Xn++){if(0===(Jt=Cn(_t[Xn],Ht))||Xn>0&&(wn=Cn(_t[Xn],_t[Xn-1]))>0&&_n<=wn&&Jt<=wn&&(_n+Jt-wn)*(1-Math.pow((_n-Jt)/wn,2))<1e-12*wn)return!0;_n=Jt}return!1}function zn(_t,Ht){return!!cr(_t.map(Hn),Ln(Ht))}function Hn(_t){return(_t=_t.map(Ln)).pop(),_t}function Ln(_t){return[_t[0]*f,_t[1]*f]}function On(_t,Ht,_n){var Jt=m.range(_t,Ht-n,_n).concat(Ht);return function(wn){return Jt.map(function(Xn){return[wn,Xn]})}}function Dn(_t,Ht,_n){var Jt=m.range(_t,Ht-n,_n).concat(Ht);return function(wn){return Jt.map(function(Xn){return[Xn,wn]})}}function Yn(){var _t,Ht,_n,Jt,wn,Xn,er,fr,Mr,_r,Dr,Fr,wr=10,Nr=wr,ni=90,li=360,bi=2.5;function dr(){return{type:"MultiLineString",coordinates:wi()}}function wi(){return m.range(o(Jt/ni)*ni,_n,ni).map(Dr).concat(m.range(o(fr/li)*li,er,li).map(Fr)).concat(m.range(o(Ht/wr)*wr,_t,wr).filter(function(Gr){return c(Gr%ni)>n}).map(Mr)).concat(m.range(o(Xn/Nr)*Nr,wn,Nr).filter(function(Gr){return c(Gr%li)>n}).map(_r))}return dr.lines=function(){return wi().map(function(Gr){return{type:"LineString",coordinates:Gr}})},dr.outline=function(){return{type:"Polygon",coordinates:[Dr(Jt).concat(Fr(er).slice(1),Dr(_n).reverse().slice(1),Fr(fr).reverse().slice(1))]}},dr.extent=function(Gr){return arguments.length?dr.extentMajor(Gr).extentMinor(Gr):dr.extentMinor()},dr.extentMajor=function(Gr){return arguments.length?(fr=+Gr[0][1],er=+Gr[1][1],(Jt=+Gr[0][0])>(_n=+Gr[1][0])&&(Gr=Jt,Jt=_n,_n=Gr),fr>er&&(Gr=fr,fr=er,er=Gr),dr.precision(bi)):[[Jt,fr],[_n,er]]},dr.extentMinor=function(Gr){return arguments.length?(Xn=+Gr[0][1],wn=+Gr[1][1],(Ht=+Gr[0][0])>(_t=+Gr[1][0])&&(Gr=Ht,Ht=_t,_t=Gr),Xn>wn&&(Gr=Xn,Xn=wn,wn=Gr),dr.precision(bi)):[[Ht,Xn],[_t,wn]]},dr.step=function(Gr){return arguments.length?dr.stepMajor(Gr).stepMinor(Gr):dr.stepMinor()},dr.stepMajor=function(Gr){return arguments.length?(ni=+Gr[0],li=+Gr[1],dr):[ni,li]},dr.stepMinor=function(Gr){return arguments.length?(wr=+Gr[0],Nr=+Gr[1],dr):[wr,Nr]},dr.precision=function(Gr){return arguments.length?(bi=+Gr,Mr=On(Xn,wn,90),_r=Dn(Ht,_t,bi),Dr=On(fr,er,90),Fr=Dn(Jt,_n,bi),dr):bi},dr.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function rr(_t){return _t}var ar,vr,xr,Ir,Or=b(),Rr=b(),Ur={point:C,lineStart:C,lineEnd:C,polygonStart:function(){Ur.lineStart=$r,Ur.lineEnd=Wi},polygonEnd:function(){Ur.lineStart=Ur.lineEnd=Ur.point=C,Or.add(c(Rr)),Rr.reset()},result:function(){var _t=Or/2;return Or.reset(),_t}};function $r(){Ur.point=gi}function gi(_t,Ht){Ur.point=ai,ar=xr=_t,vr=Ir=Ht}function ai(_t,Ht){Rr.add(Ir*_t-xr*Ht),xr=_t,Ir=Ht}function Wi(){ai(ar,vr)}var Xa,ws,Va,ua,Br=1/0,ui=Br,mi=-Br,ya=mi,Wa={point:function(_t,Ht){_t<Br&&(Br=_t),_t>mi&&(mi=_t),Ht<ui&&(ui=Ht),Ht>ya&&(ya=Ht)},lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C,result:function(){var _t=[[Br,ui],[mi,ya]];return mi=ya=-(ui=Br=1/0),_t}},sa=0,Ta=0,Ts=0,Fo=0,Xi=0,zo=0,es=0,cs=0,Lo=0,Ua={point:Co,lineStart:kl,lineEnd:hl,polygonStart:function(){Ua.lineStart=$s,Ua.lineEnd=Os},polygonEnd:function(){Ua.point=Co,Ua.lineStart=kl,Ua.lineEnd=hl},result:function(){var _t=Lo?[es/Lo,cs/Lo]:zo?[Fo/zo,Xi/zo]:Ts?[sa/Ts,Ta/Ts]:[NaN,NaN];return sa=Ta=Ts=Fo=Xi=zo=es=cs=Lo=0,_t}};function Co(_t,Ht){sa+=_t,Ta+=Ht,++Ts}function kl(){Ua.point=fl}function fl(_t,Ht){Ua.point=Fa,Co(Va=_t,ua=Ht)}function Fa(_t,Ht){var _n=_t-Va,Jt=Ht-ua,wn=M(_n*_n+Jt*Jt);Fo+=wn*(Va+_t)/2,Xi+=wn*(ua+Ht)/2,zo+=wn,Co(Va=_t,ua=Ht)}function hl(){Ua.point=Co}function $s(){Ua.point=Rl}function Os(){ml(Xa,ws)}function Rl(_t,Ht){Ua.point=ml,Co(Xa=Va=_t,ws=ua=Ht)}function ml(_t,Ht){var _n=_t-Va,Jt=Ht-ua,wn=M(_n*_n+Jt*Jt);Fo+=wn*(Va+_t)/2,Xi+=wn*(ua+Ht)/2,zo+=wn,es+=(wn=ua*_t-Va*Ht)*(Va+_t),cs+=wn*(ua+Ht),Lo+=3*wn,Co(Va=_t,ua=Ht)}function fs(_t){this._context=_t}fs.prototype={_radius:4.5,pointRadius:function(_t){return this._radius=_t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(_t,Ht){switch(this._point){case 0:this._context.moveTo(_t,Ht),this._point=1;break;case 1:this._context.lineTo(_t,Ht);break;default:this._context.moveTo(_t+this._radius,Ht),this._context.arc(_t,Ht,this._radius,0,s)}},result:C};var oo,pa,ho,po,ko,No=b(),hi={point:C,lineStart:function(){hi.point=na},lineEnd:function(){oo&&Ma(pa,ho),hi.point=C},polygonStart:function(){oo=!0},polygonEnd:function(){oo=null},result:function(){var _t=+No;return No.reset(),_t}};function na(_t,Ht){hi.point=Ma,pa=po=_t,ho=ko=Ht}function Ma(_t,Ht){No.add(M((po-=_t)*po+(ko-=Ht)*ko)),po=_t,ko=Ht}function Ao(){this._string=[]}function Rs(_t){return"m0,"+_t+"a"+_t+","+_t+" 0 1,1 0,"+-2*_t+"a"+_t+","+_t+" 0 1,1 0,"+2*_t+"z"}function Qa(_t){return function(Ht){var _n=new ga;for(var Jt in _t)_n[Jt]=_t[Jt];return _n.stream=Ht,_n}}function ga(){}function Ge(_t,Ht,_n){var Jt=_t.clipExtent&&_t.clipExtent();return _t.scale(150).translate([0,0]),null!=Jt&&_t.clipExtent(null),J(_n,_t.stream(Wa)),Ht(Wa.result()),null!=Jt&&_t.clipExtent(Jt),_t}function Qe(_t,Ht,_n){return Ge(_t,function(Jt){var wn=Ht[1][0]-Ht[0][0],Xn=Ht[1][1]-Ht[0][1],er=Math.min(wn/(Jt[1][0]-Jt[0][0]),Xn/(Jt[1][1]-Jt[0][1])),fr=+Ht[0][0]+(wn-er*(Jt[1][0]+Jt[0][0]))/2,Mr=+Ht[0][1]+(Xn-er*(Jt[1][1]+Jt[0][1]))/2;_t.scale(150*er).translate([fr,Mr])},_n)}function ut(_t,Ht,_n){return Qe(_t,[[0,0],Ht],_n)}function ht(_t,Ht,_n){return Ge(_t,function(Jt){var wn=+Ht,Xn=wn/(Jt[1][0]-Jt[0][0]),er=(wn-Xn*(Jt[1][0]+Jt[0][0]))/2,fr=-Xn*Jt[0][1];_t.scale(150*Xn).translate([er,fr])},_n)}function kt(_t,Ht,_n){return Ge(_t,function(Jt){var wn=+Ht,Xn=wn/(Jt[1][1]-Jt[0][1]),er=-Xn*Jt[0][0],fr=(wn-Xn*(Jt[1][1]+Jt[0][1]))/2;_t.scale(150*Xn).translate([er,fr])},_n)}Ao.prototype={_radius:4.5,_circle:Rs(4.5),pointRadius:function(_t){return(_t=+_t)!==this._radius&&(this._radius=_t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(_t,Ht){switch(this._point){case 0:this._string.push("M",_t,",",Ht),this._point=1;break;case 1:this._string.push("L",_t,",",Ht);break;default:null==this._circle&&(this._circle=Rs(this._radius)),this._string.push("M",_t,",",Ht,this._circle)}},result:function(){if(this._string.length){var _t=this._string.join("");return this._string=[],_t}return null}},ga.prototype={constructor:ga,point:function(_t,Ht){this.stream.point(_t,Ht)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Mt=d(30*f);function Nt(_t,Ht){return+Ht?function(_n,Jt){function wn(Xn,er,fr,Mr,_r,Dr,Fr,wr,Nr,ni,li,bi,dr,wi){var Gr=Fr-Xn,ii=wr-er,ki=Gr*Gr+ii*ii;if(ki>4*Jt&&dr--){var Zi=Mr+ni,aa=_r+li,Vr=Dr+bi,ca=M(Zi*Zi+aa*aa+Vr*Vr),ia=R(Vr/=ca),Ei=c(c(Vr)-1)<n||c(fr-Nr)<n?(fr+Nr)/2:h(aa,Zi),fa=_n(Ei,ia),ea=fa[0],za=fa[1],Ai=ea-Xn,qa=za-er,ka=ii*Ai-Gr*qa;(ka*ka/ki>Jt||c((Gr*Ai+ii*qa)/ki-.5)>.3||Mr*ni+_r*li+Dr*bi<Mt)&&(wn(Xn,er,fr,Mr,_r,Dr,ea,za,Ei,Zi/=ca,aa/=ca,Vr,dr,wi),wi.point(ea,za),wn(ea,za,Ei,Zi,aa,Vr,Fr,wr,Nr,ni,li,bi,dr,wi))}}return function(Xn){var er,fr,Mr,_r,Dr,Fr,wr,Nr,ni,li,bi,dr,wi={point:Gr,lineStart:ii,lineEnd:Zi,polygonStart:function(){Xn.polygonStart(),wi.lineStart=aa},polygonEnd:function(){Xn.polygonEnd(),wi.lineStart=ii}};function Gr(ia,Ei){ia=_n(ia,Ei),Xn.point(ia[0],ia[1])}function ii(){Nr=NaN,wi.point=ki,Xn.lineStart()}function ki(ia,Ei){var fa=de([ia,Ei]),ea=_n(ia,Ei);wn(Nr,ni,wr,li,bi,dr,Nr=ea[0],ni=ea[1],wr=ia,li=fa[0],bi=fa[1],dr=fa[2],16,Xn),Xn.point(Nr,ni)}function Zi(){wi.point=Gr,Xn.lineEnd()}function aa(){ii(),wi.point=Vr,wi.lineEnd=ca}function Vr(ia,Ei){ki(er=ia,Ei),fr=Nr,Mr=ni,_r=li,Dr=bi,Fr=dr,wi.point=ki}function ca(){wn(Nr,ni,wr,li,bi,dr,fr,Mr,er,_r,Dr,Fr,16,Xn),wi.lineEnd=Zi,Zi()}return wi}}(_t,Ht):(_n=_t,Qa({point:function(Jt,wn){Jt=_n(Jt,wn),this.stream.point(Jt[0],Jt[1])}}));var _n}var ln=Qa({point:function(_t,Ht){this.stream.point(_t*f,Ht*f)}});function sn(_t,Ht,_n,Jt,wn){function Xn(er,fr){return[Ht+_t*(er*=Jt),_n-_t*(fr*=wn)]}return Xn.invert=function(er,fr){return[(er-Ht)/_t*Jt,(_n-fr)/_t*wn]},Xn}function rn(_t,Ht,_n,Jt,wn,Xn){var er=d(Xn),fr=_(Xn),Mr=er*_t,_r=fr*_t,Dr=er/_t,Fr=fr/_t,wr=(fr*_n-er*Ht)/_t,Nr=(fr*Ht+er*_n)/_t;function ni(li,bi){return[Mr*(li*=Jt)-_r*(bi*=wn)+Ht,_n-_r*li-Mr*bi]}return ni.invert=function(li,bi){return[Jt*(Dr*li-Fr*bi+wr),wn*(Nr-Fr*li-Dr*bi)]},ni}function mn(_t){return kn(function(){return _t})()}function kn(_t){var Ht,_n,Jt,wn,Xn,er,fr,Mr,_r,Dr,Fr=150,wr=480,Nr=250,ni=0,li=0,bi=0,dr=0,wi=0,Gr=0,ii=1,ki=1,Zi=null,aa=sr,Vr=null,ca=rr,ia=.5;function Ei(Ai){return Mr(Ai[0]*f,Ai[1]*f)}function fa(Ai){return(Ai=Mr.invert(Ai[0],Ai[1]))&&[Ai[0]*i,Ai[1]*i]}function ea(){var Ai=rn(Fr,0,0,ii,ki,Gr).apply(null,Ht(ni,li)),qa=(Gr?rn:sn)(Fr,wr-Ai[0],Nr-Ai[1],ii,ki,Gr);return _n=Yt(bi,dr,wi),fr=xt(Ht,qa),Mr=xt(_n,fr),er=Nt(fr,ia),za()}function za(){return _r=Dr=null,Ei}return Ei.stream=function(Ai){return _r&&Dr===Ai?_r:_r=ln((qa=_n,Qa({point:function(ka,Ks){var Hs=qa(ka,Ks);return this.stream.point(Hs[0],Hs[1])}}))(aa(er(ca(Dr=Ai)))));var qa},Ei.preclip=function(Ai){return arguments.length?(aa=Ai,Zi=void 0,za()):aa},Ei.postclip=function(Ai){return arguments.length?(ca=Ai,Vr=Jt=wn=Xn=null,za()):ca},Ei.clipAngle=function(Ai){return arguments.length?(aa=+Ai?hr(Zi=Ai*f):(Zi=null,sr),za()):Zi*i},Ei.clipExtent=function(Ai){return arguments.length?(ca=null==Ai?(Vr=Jt=wn=Xn=null,rr):jr(Vr=+Ai[0][0],Jt=+Ai[0][1],wn=+Ai[1][0],Xn=+Ai[1][1]),za()):null==Vr?null:[[Vr,Jt],[wn,Xn]]},Ei.scale=function(Ai){return arguments.length?(Fr=+Ai,ea()):Fr},Ei.translate=function(Ai){return arguments.length?(wr=+Ai[0],Nr=+Ai[1],ea()):[wr,Nr]},Ei.center=function(Ai){return arguments.length?(ni=Ai[0]%360*f,li=Ai[1]%360*f,ea()):[ni*i,li*i]},Ei.rotate=function(Ai){return arguments.length?(bi=Ai[0]%360*f,dr=Ai[1]%360*f,wi=Ai.length>2?Ai[2]%360*f:0,ea()):[bi*i,dr*i,wi*i]},Ei.angle=function(Ai){return arguments.length?(Gr=Ai%360*f,ea()):Gr*i},Ei.reflectX=function(Ai){return arguments.length?(ii=Ai?-1:1,ea()):ii<0},Ei.reflectY=function(Ai){return arguments.length?(ki=Ai?-1:1,ea()):ki<0},Ei.precision=function(Ai){return arguments.length?(er=Nt(fr,ia=Ai*Ai),za()):M(ia)},Ei.fitExtent=function(Ai,qa){return Qe(Ei,Ai,qa)},Ei.fitSize=function(Ai,qa){return ut(Ei,Ai,qa)},Ei.fitWidth=function(Ai,qa){return ht(Ei,Ai,qa)},Ei.fitHeight=function(Ai,qa){return kt(Ei,Ai,qa)},function(){return Ht=_t.apply(this,arguments),Ei.invert=Ht.invert&&fa,ea()}}function In(_t){var Ht=0,_n=a/3,Jt=kn(_t),wn=Jt(Ht,_n);return wn.parallels=function(Xn){return arguments.length?Jt(Ht=Xn[0]*f,_n=Xn[1]*f):[Ht*i,_n*i]},wn}function Rn(_t,Ht){var _n=_(_t),Jt=(_n+_(Ht))/2;if(c(Jt)<n)return function(fr){var Mr=d(fr);function _r(Dr,Fr){return[Dr*Mr,_(Fr)/Mr]}return _r.invert=function(Dr,Fr){return[Dr/Mr,R(Fr*Mr)]},_r}(_t);var wn=1+_n*(2*Jt-_n),Xn=M(wn)/Jt;function er(fr,Mr){var _r=M(wn-2*Jt*_(Mr))/Jt;return[_r*_(fr*=Jt),Xn-_r*d(fr)]}return er.invert=function(fr,Mr){var _r=Xn-Mr,Dr=h(fr,c(_r))*w(_r);return _r*Jt<0&&(Dr-=a*w(fr)*w(_r)),[Dr/Jt,R((wn-(fr*fr+_r*_r)*Jt*Jt)/(2*Jt))]},er}function jn(){return In(Rn).scale(155.424).center([0,33.6442])}function br(){return jn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Cr(_t){return function(Ht,_n){var Jt=d(Ht),wn=d(_n),Xn=_t(Jt*wn);return[Xn*wn*_(Ht),Xn*_(_n)]}}function Hr(_t){return function(Ht,_n){var Jt=M(Ht*Ht+_n*_n),wn=_t(Jt),Xn=_(wn),er=d(wn);return[h(Ht*Xn,Jt*er),R(Jt&&_n*Xn/Jt)]}}var Kr=Cr(function(_t){return M(2/(1+_t))});Kr.invert=Hr(function(_t){return 2*R(_t/2)});var oi=Cr(function(_t){return(_t=S(_t))&&_t/_(_t)});function Xr(_t,Ht){return[_t,u(I((t+Ht)/2))]}function Oi(_t){var Ht,_n,Jt,wn=mn(_t),Xn=wn.center,er=wn.scale,fr=wn.translate,Mr=wn.clipExtent,_r=null;function Dr(){var Fr=a*er(),wr=wn(Un(wn.rotate()).invert([0,0]));return Mr(null==_r?[[wr[0]-Fr,wr[1]-Fr],[wr[0]+Fr,wr[1]+Fr]]:_t===Xr?[[Math.max(wr[0]-Fr,_r),Ht],[Math.min(wr[0]+Fr,_n),Jt]]:[[_r,Math.max(wr[1]-Fr,Ht)],[_n,Math.min(wr[1]+Fr,Jt)]])}return wn.scale=function(Fr){return arguments.length?(er(Fr),Dr()):er()},wn.translate=function(Fr){return arguments.length?(fr(Fr),Dr()):fr()},wn.center=function(Fr){return arguments.length?(Xn(Fr),Dr()):Xn()},wn.clipExtent=function(Fr){return arguments.length?(null==Fr?_r=Ht=_n=Jt=null:(_r=+Fr[0][0],Ht=+Fr[0][1],_n=+Fr[1][0],Jt=+Fr[1][1]),Dr()):null==_r?null:[[_r,Ht],[_n,Jt]]},Dr()}function zi(_t){return I((t+_t)/2)}function Ea(_t,Ht){var _n=d(_t),Jt=_t===Ht?_(_t):u(_n/d(Ht))/u(zi(Ht)/zi(_t)),wn=_n*T(zi(_t),Jt)/Jt;if(!Jt)return Xr;function Xn(er,fr){wn>0?fr<-t+n&&(fr=-t+n):fr>t-n&&(fr=t-n);var Mr=wn/T(zi(fr),Jt);return[Mr*_(Jt*er),wn-Mr*d(Jt*er)]}return Xn.invert=function(er,fr){var Mr=wn-fr,_r=w(Jt)*M(er*er+Mr*Mr),Dr=h(er,c(Mr))*w(Mr);return Mr*Jt<0&&(Dr-=a*w(er)*w(Mr)),[Dr/Jt,2*l(T(wn/_r,1/Jt))-t]},Xn}function Ki(_t,Ht){return[_t,Ht]}function ra(_t,Ht){var _n=d(_t),Jt=_t===Ht?_(_t):(_n-d(Ht))/(Ht-_t),wn=_n/Jt+_t;if(c(Jt)<n)return Ki;function Xn(er,fr){var Mr=wn-fr,_r=Jt*er;return[Mr*_(_r),wn-Mr*d(_r)]}return Xn.invert=function(er,fr){var Mr=wn-fr,_r=h(er,c(Mr))*w(Mr);return Mr*Jt<0&&(_r-=a*w(er)*w(Mr)),[_r/Jt,wn-w(Jt)*M(er*er+Mr*Mr)]},Xn}oi.invert=Hr(function(_t){return _t}),Xr.invert=function(_t,Ht){return[_t,2*l(x(Ht))-t]},Ki.invert=Ki;var go=1.340264,io=-.081106,Ha=893e-6,xa=.003796,xo=M(3)/2;function Yo(_t,Ht){var _n=R(xo*_(Ht)),Jt=_n*_n,wn=Jt*Jt*Jt;return[_t*d(_n)/(xo*(go+3*io*Jt+wn*(7*Ha+9*xa*Jt))),_n*(go+io*Jt+wn*(Ha+xa*Jt))]}function ts(_t,Ht){var _n=d(Ht),Jt=d(_t)*_n;return[_n*_(_t)/Jt,_(Ht)/Jt]}function ns(_t,Ht){var _n=Ht*Ht,Jt=_n*_n;return[_t*(.8707-.131979*_n+Jt*(Jt*(.003971*_n-.001529*Jt)-.013791)),Ht*(1.007226+_n*(.015085+Jt*(.028874*_n-.044475-.005916*Jt)))]}function hs(_t,Ht){return[d(Ht)*_(_t),_(Ht)]}function ds(_t,Ht){var _n=d(Ht),Jt=1+d(_t)*_n;return[_n*_(_t)/Jt,_(Ht)/Jt]}function ba(_t,Ht){return[u(I((t+Ht)/2)),-_t]}Yo.invert=function(_t,Ht){for(var _n,Jt=Ht,wn=Jt*Jt,Xn=wn*wn*wn,er=0;er<12&&(Xn=(wn=(Jt-=_n=(Jt*(go+io*wn+Xn*(Ha+xa*wn))-Ht)/(go+3*io*wn+Xn*(7*Ha+9*xa*wn)))*Jt)*wn*wn,!(c(_n)<1e-12));++er);return[xo*_t*(go+3*io*wn+Xn*(7*Ha+9*xa*wn))/d(Jt),R(_(Jt)/xo)]},ts.invert=Hr(l),ns.invert=function(_t,Ht){var _n,Jt=Ht,wn=25;do{var Xn=Jt*Jt,er=Xn*Xn;Jt-=_n=(Jt*(1.007226+Xn*(.015085+er*(.028874*Xn-.044475-.005916*er)))-Ht)/(1.007226+Xn*(.045255+er*(.259866*Xn-.311325-.005916*11*er)))}while(c(_n)>n&&--wn>0);return[_t/(.8707+(Xn=Jt*Jt)*(Xn*(Xn*Xn*Xn*(.003971-.001529*Xn)-.013791)-.131979)),Jt]},hs.invert=Hr(R),ds.invert=Hr(function(_t){return 2*l(_t)}),ba.invert=function(_t,Ht){return[-Ht,2*l(x(_t))-t]},g.geoAlbers=br,g.geoAlbersUsa=function(){var _t,Ht,_n,Jt,wn,Xn,er=br(),fr=jn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Mr=jn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_r={point:function(wr,Nr){Xn=[wr,Nr]}};function Dr(wr){var Nr=wr[0],ni=wr[1];return Xn=null,_n.point(Nr,ni),Xn||(Jt.point(Nr,ni),Xn)||(wn.point(Nr,ni),Xn)}function Fr(){return _t=Ht=null,Dr}return Dr.invert=function(wr){var Nr=er.scale(),ni=er.translate(),li=(wr[0]-ni[0])/Nr,bi=(wr[1]-ni[1])/Nr;return(bi>=.12&&bi<.234&&li>=-.425&&li<-.214?fr:bi>=.166&&bi<.234&&li>=-.214&&li<-.115?Mr:er).invert(wr)},Dr.stream=function(wr){return _t&&Ht===wr?_t:(Nr=[er.stream(Ht=wr),fr.stream(wr),Mr.stream(wr)],ni=Nr.length,_t={point:function(li,bi){for(var dr=-1;++dr<ni;)Nr[dr].point(li,bi)},sphere:function(){for(var li=-1;++li<ni;)Nr[li].sphere()},lineStart:function(){for(var li=-1;++li<ni;)Nr[li].lineStart()},lineEnd:function(){for(var li=-1;++li<ni;)Nr[li].lineEnd()},polygonStart:function(){for(var li=-1;++li<ni;)Nr[li].polygonStart()},polygonEnd:function(){for(var li=-1;++li<ni;)Nr[li].polygonEnd()}});var Nr,ni},Dr.precision=function(wr){return arguments.length?(er.precision(wr),fr.precision(wr),Mr.precision(wr),Fr()):er.precision()},Dr.scale=function(wr){return arguments.length?(er.scale(wr),fr.scale(.35*wr),Mr.scale(wr),Dr.translate(er.translate())):er.scale()},Dr.translate=function(wr){if(!arguments.length)return er.translate();var Nr=er.scale(),ni=+wr[0],li=+wr[1];return _n=er.translate(wr).clipExtent([[ni-.455*Nr,li-.238*Nr],[ni+.455*Nr,li+.238*Nr]]).stream(_r),Jt=fr.translate([ni-.307*Nr,li+.201*Nr]).clipExtent([[ni-.425*Nr+n,li+.12*Nr+n],[ni-.214*Nr-n,li+.234*Nr-n]]).stream(_r),wn=Mr.translate([ni-.205*Nr,li+.212*Nr]).clipExtent([[ni-.214*Nr+n,li+.166*Nr+n],[ni-.115*Nr-n,li+.234*Nr-n]]).stream(_r),Fr()},Dr.fitExtent=function(wr,Nr){return Qe(Dr,wr,Nr)},Dr.fitSize=function(wr,Nr){return ut(Dr,wr,Nr)},Dr.fitWidth=function(wr,Nr){return ht(Dr,wr,Nr)},Dr.fitHeight=function(wr,Nr){return kt(Dr,wr,Nr)},Dr.scale(1070)},g.geoArea=function(_t){return q.reset(),J(_t,ie),2*q},g.geoAzimuthalEqualArea=function(){return mn(Kr).scale(124.75).clipAngle(179.999)},g.geoAzimuthalEqualAreaRaw=Kr,g.geoAzimuthalEquidistant=function(){return mn(oi).scale(79.4188).clipAngle(179.999)},g.geoAzimuthalEquidistantRaw=oi,g.geoBounds=function(_t){var Ht,_n,Jt,wn,Xn,er,fr;if(ve=ze=-(Ee=Ae=1/0),Ue=[],J(_t,cn),_n=Ue.length){for(Ue.sort(nt),Ht=1,Xn=[Jt=Ue[0]];Ht<_n;++Ht)Ke(Jt,(wn=Ue[Ht])[0])||Ke(Jt,wn[1])?(Je(Jt[0],wn[1])>Je(Jt[0],Jt[1])&&(Jt[1]=wn[1]),Je(wn[0],Jt[1])>Je(Jt[0],Jt[1])&&(Jt[0]=wn[0])):Xn.push(Jt=wn);for(er=-1/0,Ht=0,Jt=Xn[_n=Xn.length-1];Ht<=_n;Jt=wn,++Ht)(fr=Je(Jt[1],(wn=Xn[Ht])[0]))>er&&(er=fr,Ee=wn[0],ze=Jt[1])}return Ue=qe=null,Ee===1/0||Ae===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ee,Ae],[ze,ve]]},g.geoCentroid=function(_t){je=rt=Ne=Be=We=Ye=lt=mt=Tt=It=Ct=0,J(_t,vt);var Ht=Tt,_n=It,Jt=Ct,wn=Ht*Ht+_n*_n+Jt*Jt;return wn<1e-12&&(Ht=Ye,_n=lt,Jt=mt,rt<n&&(Ht=Ne,_n=Be,Jt=We),(wn=Ht*Ht+_n*_n+Jt*Jt)<1e-12)?[NaN,NaN]:[h(_n,Ht)*i,R(Jt/M(wn))*i]},g.geoCircle=function(){var _t,Ht,_n=dt([0,0]),Jt=dt(90),wn=dt(6),Xn={point:function(fr,Mr){_t.push(fr=Ht(fr,Mr)),fr[0]*=i,fr[1]*=i}};function er(){var fr=_n.apply(this,arguments),Mr=Jt.apply(this,arguments)*f,_r=wn.apply(this,arguments)*f;return _t=[],Ht=Yt(-fr[0]*f,-fr[1]*f,0).invert,Tn(Xn,Mr,_r,1),fr={type:"Polygon",coordinates:[_t]},_t=Ht=null,fr}return er.center=function(fr){return arguments.length?(_n="function"==typeof fr?fr:dt([+fr[0],+fr[1]]),er):_n},er.radius=function(fr){return arguments.length?(Jt="function"==typeof fr?fr:dt(+fr),er):Jt},er.precision=function(fr){return arguments.length?(wn="function"==typeof fr?fr:dt(+fr),er):wn},er},g.geoClipAntimeridian=sr,g.geoClipCircle=hr,g.geoClipExtent=function(){var _t,Ht,_n,Jt=0,wn=0,Xn=960,er=500;return _n={stream:function(fr){return _t&&Ht===fr?_t:_t=jr(Jt,wn,Xn,er)(Ht=fr)},extent:function(fr){return arguments.length?(Jt=+fr[0][0],wn=+fr[0][1],Xn=+fr[1][0],er=+fr[1][1],_t=Ht=null,_n):[[Jt,wn],[Xn,er]]}}},g.geoClipRectangle=jr,g.geoConicConformal=function(){return In(Ea).scale(109.5).parallels([30,30])},g.geoConicConformalRaw=Ea,g.geoConicEqualArea=jn,g.geoConicEqualAreaRaw=Rn,g.geoConicEquidistant=function(){return In(ra).scale(131.154).center([0,13.9389])},g.geoConicEquidistantRaw=ra,g.geoContains=function(_t,Ht){return(_t&&jt.hasOwnProperty(_t.type)?jt[_t.type]:An)(_t,Ht)},g.geoDistance=Cn,g.geoEqualEarth=function(){return mn(Yo).scale(177.158)},g.geoEqualEarthRaw=Yo,g.geoEquirectangular=function(){return mn(Ki).scale(152.63)},g.geoEquirectangularRaw=Ki,g.geoGnomonic=function(){return mn(ts).scale(144.049).clipAngle(60)},g.geoGnomonicRaw=ts,g.geoGraticule=Yn,g.geoGraticule10=function(){return Yn()()},g.geoIdentity=function(){var _t,Ht,_n,Jt,wn,Xn,er,fr=1,Mr=0,_r=0,Dr=1,Fr=1,wr=0,Nr=null,ni=1,li=1,bi=Qa({point:function(ii,ki){var Zi=Gr([ii,ki]);this.stream.point(Zi[0],Zi[1])}}),dr=rr;function wi(){return ni=fr*Dr,li=fr*Fr,Xn=er=null,Gr}function Gr(ii){var ki=ii[0]*ni,Zi=ii[1]*li;if(wr){var aa=Zi*_t-ki*Ht;ki=ki*_t+Zi*Ht,Zi=aa}return[ki+Mr,Zi+_r]}return Gr.invert=function(ii){var ki=ii[0]-Mr,Zi=ii[1]-_r;if(wr){var aa=Zi*_t+ki*Ht;ki=ki*_t-Zi*Ht,Zi=aa}return[ki/ni,Zi/li]},Gr.stream=function(ii){return Xn&&er===ii?Xn:Xn=bi(dr(er=ii))},Gr.postclip=function(ii){return arguments.length?(dr=ii,Nr=_n=Jt=wn=null,wi()):dr},Gr.clipExtent=function(ii){return arguments.length?(dr=null==ii?(Nr=_n=Jt=wn=null,rr):jr(Nr=+ii[0][0],_n=+ii[0][1],Jt=+ii[1][0],wn=+ii[1][1]),wi()):null==Nr?null:[[Nr,_n],[Jt,wn]]},Gr.scale=function(ii){return arguments.length?(fr=+ii,wi()):fr},Gr.translate=function(ii){return arguments.length?(Mr=+ii[0],_r=+ii[1],wi()):[Mr,_r]},Gr.angle=function(ii){return arguments.length?(Ht=_(wr=ii%360*f),_t=d(wr),wi()):wr*i},Gr.reflectX=function(ii){return arguments.length?(Dr=ii?-1:1,wi()):Dr<0},Gr.reflectY=function(ii){return arguments.length?(Fr=ii?-1:1,wi()):Fr<0},Gr.fitExtent=function(ii,ki){return Qe(Gr,ii,ki)},Gr.fitSize=function(ii,ki){return ut(Gr,ii,ki)},Gr.fitWidth=function(ii,ki){return ht(Gr,ii,ki)},Gr.fitHeight=function(ii,ki){return kt(Gr,ii,ki)},Gr},g.geoInterpolate=function(_t,Ht){var _n=_t[0]*f,Jt=_t[1]*f,wn=Ht[0]*f,Xn=Ht[1]*f,er=d(Jt),fr=_(Jt),Mr=d(Xn),_r=_(Xn),Dr=er*d(_n),Fr=er*_(_n),wr=Mr*d(wn),Nr=Mr*_(wn),ni=2*R(M(O(Xn-Jt)+er*Mr*O(wn-_n))),li=_(ni),bi=ni?function(dr){var wi=_(dr*=ni)/li,Gr=_(ni-dr)/li,ii=Gr*Dr+wi*wr,ki=Gr*Fr+wi*Nr,Zi=Gr*fr+wi*_r;return[h(ki,ii)*i,h(Zi,M(ii*ii+ki*ki))*i]}:function(){return[_n*i,Jt*i]};return bi.distance=ni,bi},g.geoLength=Zr,g.geoMercator=function(){return Oi(Xr).scale(961/s)},g.geoMercatorRaw=Xr,g.geoNaturalEarth1=function(){return mn(ns).scale(175.295)},g.geoNaturalEarth1Raw=ns,g.geoOrthographic=function(){return mn(hs).scale(249.5).clipAngle(90+n)},g.geoOrthographicRaw=hs,g.geoPath=function(_t,Ht){var _n,Jt,wn=4.5;function Xn(er){return er&&("function"==typeof wn&&Jt.pointRadius(+wn.apply(this,arguments)),J(er,_n(Jt))),Jt.result()}return Xn.area=function(er){return J(er,_n(Ur)),Ur.result()},Xn.measure=function(er){return J(er,_n(hi)),hi.result()},Xn.bounds=function(er){return J(er,_n(Wa)),Wa.result()},Xn.centroid=function(er){return J(er,_n(Ua)),Ua.result()},Xn.projection=function(er){return arguments.length?(_n=null==er?(_t=null,rr):(_t=er).stream,Xn):_t},Xn.context=function(er){return arguments.length?(Jt=null==er?(Ht=null,new Ao):new fs(Ht=er),"function"!=typeof wn&&Jt.pointRadius(wn),Xn):Ht},Xn.pointRadius=function(er){return arguments.length?(wn="function"==typeof er?er:(Jt.pointRadius(+er),+er),Xn):wn},Xn.projection(_t).context(Ht)},g.geoProjection=mn,g.geoProjectionMutator=kn,g.geoRotation=Un,g.geoStereographic=function(){return mn(ds).scale(250).clipAngle(142)},g.geoStereographicRaw=ds,g.geoStream=J,g.geoTransform=function(_t){return{stream:Qa(_t)}},g.geoTransverseMercator=function(){var _t=Oi(ba),Ht=_t.center,_n=_t.rotate;return _t.center=function(Jt){return arguments.length?Ht([-Jt[1],Jt[0]]):[(Jt=Ht())[1],-Jt[0]]},_t.rotate=function(Jt){return arguments.length?_n([Jt[0],Jt[1],Jt.length>2?Jt[2]+90:90]):[(Jt=_n())[0],Jt[1],Jt[2]-90]},_n([0,0,90]).scale(159.155)},g.geoTransverseMercatorRaw=ba,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-array")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-array":107}],115:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";function m(fe,be){return fe.parent===be.parent?1:2}function b(fe,be){return fe+be.x}function y(fe,be){return Math.max(fe,be.y)}function e(fe){var be=0,he=fe.children,_e=he&&he.length;if(_e)for(;--_e>=0;)be+=he[_e].value;else be=1;fe.value=be}function r(fe,be){var he,_e,Ce,Ee,Ae,ze=new p(fe),ve=+fe.value&&(ze.value=fe.value),Te=[ze];for(null==be&&(be=n);he=Te.pop();)if(ve&&(he.value=+he.data.value),(Ce=be(he.data))&&(Ae=Ce.length))for(he.children=new Array(Ae),Ee=Ae-1;Ee>=0;--Ee)Te.push(_e=he.children[Ee]=new p(Ce[Ee])),_e.parent=he,_e.depth=he.depth+1;return ze.eachBefore(t)}function n(fe){return fe.children}function a(fe){fe.data=fe.data.data}function t(fe){var be=0;do{fe.height=be}while((fe=fe.parent)&&fe.height<++be)}function p(fe){this.data=fe,this.depth=this.height=0,this.parent=null}p.prototype=r.prototype={constructor:p,count:function(){return this.eachAfter(e)},each:function(fe){var be,he,_e,Ce,Ee=this,Ae=[Ee];do{for(be=Ae.reverse(),Ae=[];Ee=be.pop();)if(fe(Ee),he=Ee.children)for(_e=0,Ce=he.length;_e<Ce;++_e)Ae.push(he[_e])}while(Ae.length);return this},eachAfter:function(fe){for(var be,he,_e,Ce=this,Ee=[Ce],Ae=[];Ce=Ee.pop();)if(Ae.push(Ce),be=Ce.children)for(he=0,_e=be.length;he<_e;++he)Ee.push(be[he]);for(;Ce=Ae.pop();)fe(Ce);return this},eachBefore:function(fe){for(var be,he,_e=this,Ce=[_e];_e=Ce.pop();)if(fe(_e),be=_e.children)for(he=be.length-1;he>=0;--he)Ce.push(be[he]);return this},sum:function(fe){return this.eachAfter(function(be){for(var he=+fe(be.data)||0,_e=be.children,Ce=_e&&_e.length;--Ce>=0;)he+=_e[Ce].value;be.value=he})},sort:function(fe){return this.eachBefore(function(be){be.children&&be.children.sort(fe)})},path:function(fe){for(var be=this,he=function(Ee,Ae){if(Ee===Ae)return Ee;var ze=Ee.ancestors(),ve=Ae.ancestors(),Te=null;for(Ee=ze.pop(),Ae=ve.pop();Ee===Ae;)Te=Ee,Ee=ze.pop(),Ae=ve.pop();return Te}(be,fe),_e=[be];be!==he;)_e.push(be=be.parent);for(var Ce=_e.length;fe!==he;)_e.splice(Ce,0,fe),fe=fe.parent;return _e},ancestors:function(){for(var fe=this,be=[fe];fe=fe.parent;)be.push(fe);return be},descendants:function(){var fe=[];return this.each(function(be){fe.push(be)}),fe},leaves:function(){var fe=[];return this.eachBefore(function(be){be.children||fe.push(be)}),fe},links:function(){var fe=this,be=[];return fe.each(function(he){he!==fe&&be.push({source:he.parent,target:he})}),be},copy:function(){return r(this).eachBefore(a)}};var s=Array.prototype.slice;function i(fe){for(var be,he,_e=0,Ce=(fe=function(Ae){for(var ze,ve,Te=Ae.length;Te;)ve=Math.random()*Te--|0,ze=Ae[Te],Ae[Te]=Ae[ve],Ae[ve]=ze;return Ae}(s.call(fe))).length,Ee=[];_e<Ce;)be=fe[_e],he&&l(he,be)?++_e:(he=d(Ee=f(Ee,be)),_e=0);return he}function f(fe,be){var he,_e;if(h(be,fe))return[be];for(he=0;he<fe.length;++he)if(c(be,fe[he])&&h(o(fe[he],be),fe))return[fe[he],be];for(he=0;he<fe.length-1;++he)for(_e=he+1;_e<fe.length;++_e)if(c(o(fe[he],fe[_e]),be)&&c(o(fe[he],be),fe[_e])&&c(o(fe[_e],be),fe[he])&&h(x(fe[he],fe[_e],be),fe))return[fe[he],fe[_e],be];throw new Error}function c(fe,be){var he=fe.r-be.r,_e=be.x-fe.x,Ce=be.y-fe.y;return he<0||he*he<_e*_e+Ce*Ce}function l(fe,be){var he=fe.r-be.r+1e-6,_e=be.x-fe.x,Ce=be.y-fe.y;return he>0&&he*he>_e*_e+Ce*Ce}function h(fe,be){for(var he=0;he<be.length;++he)if(!l(fe,be[he]))return!1;return!0}function d(fe){switch(fe.length){case 1:return{x:(be=fe[0]).x,y:be.y,r:be.r};case 2:return o(fe[0],fe[1]);case 3:return x(fe[0],fe[1],fe[2])}var be}function o(fe,be){var he=fe.x,_e=fe.y,Ce=fe.r,Ee=be.x,Ae=be.y,ze=be.r,ve=Ee-he,Te=Ae-_e,Ie=ze-Ce,De=Math.sqrt(ve*ve+Te*Te);return{x:(he+Ee+ve/De*Ie)/2,y:(_e+Ae+Te/De*Ie)/2,r:(De+Ce+ze)/2}}function x(fe,be,he){var _e=fe.x,Ce=fe.y,Ee=fe.r,Ae=be.x,ze=be.y,ve=be.r,Te=he.x,Ie=he.y,De=he.r,Fe=_e-Ae,Ue=_e-Te,qe=Ce-ze,je=Ce-Ie,rt=ve-Ee,Ne=De-Ee,Be=_e*_e+Ce*Ce-Ee*Ee,We=Be-Ae*Ae-ze*ze+ve*ve,Ye=Be-Te*Te-Ie*Ie+De*De,lt=Ue*qe-Fe*je,mt=(qe*Ye-je*We)/(2*lt)-_e,Tt=(je*rt-qe*Ne)/lt,It=(Ue*We-Fe*Ye)/(2*lt)-Ce,Ct=(Fe*Ne-Ue*rt)/lt,ct=Tt*Tt+Ct*Ct-1,at=2*(Ee+mt*Tt+It*Ct),St=mt*mt+It*It-Ee*Ee,Xt=-(ct?(at+Math.sqrt(at*at-4*ct*St))/(2*ct):St/at);return{x:_e+mt+Tt*Xt,y:Ce+It+Ct*Xt,r:Xt}}function u(fe,be,he){var _e,Ce,Ee,Ae,ze=fe.x-be.x,ve=fe.y-be.y,Te=ze*ze+ve*ve;Te?(Ce=be.r+he.r,Ae=fe.r+he.r,(Ce*=Ce)>(Ae*=Ae)?(_e=(Te+Ae-Ce)/(2*Te),Ee=Math.sqrt(Math.max(0,Ae/Te-_e*_e)),he.x=fe.x-_e*ze-Ee*ve,he.y=fe.y-_e*ve+Ee*ze):(_e=(Te+Ce-Ae)/(2*Te),Ee=Math.sqrt(Math.max(0,Ce/Te-_e*_e)),he.x=be.x+_e*ze-Ee*ve,he.y=be.y+_e*ve+Ee*ze)):(he.x=be.x+he.r,he.y=be.y)}function T(fe,be){var he=fe.r+be.r-1e-6,_e=be.x-fe.x,Ce=be.y-fe.y;return he>0&&he*he>_e*_e+Ce*Ce}function _(fe){var be=fe._,he=fe.next._,_e=be.r+he.r,Ce=(be.x*he.r+he.x*be.r)/_e,Ee=(be.y*he.r+he.y*be.r)/_e;return Ce*Ce+Ee*Ee}function w(fe){this._=fe,this.next=null,this.previous=null}function M(fe){if(!(Ce=fe.length))return 0;var be,he,_e,Ce,Ee,Ae,ze,ve,Te,Ie,De;if((be=fe[0]).x=0,be.y=0,!(Ce>1))return be.r;if(be.x=-(he=fe[1]).r,he.x=be.r,he.y=0,!(Ce>2))return be.r+he.r;u(he,be,_e=fe[2]),be=new w(be),he=new w(he),_e=new w(_e),be.next=_e.previous=he,he.next=be.previous=_e,_e.next=he.previous=be;e:for(ze=3;ze<Ce;++ze){u(be._,he._,_e=fe[ze]),_e=new w(_e),ve=he.next,Te=be.previous,Ie=he._.r,De=be._.r;do{if(Ie<=De){if(T(ve._,_e._)){be.next=he=ve,he.previous=be,--ze;continue e}Ie+=ve._.r,ve=ve.next}else{if(T(Te._,_e._)){(be=Te).next=he,he.previous=be,--ze;continue e}De+=Te._.r,Te=Te.previous}}while(ve!==Te.next);for(_e.previous=be,_e.next=he,be.next=he.previous=he=_e,Ee=_(be);(_e=_e.next)!==he;)(Ae=_(_e))<Ee&&(be=_e,Ee=Ae);he=be.next}for(be=[he._],_e=he;(_e=_e.next)!==he;)be.push(_e._);for(_e=i(be),ze=0;ze<Ce;++ze)(be=fe[ze]).x-=_e.x,be.y-=_e.y;return _e.r}function I(fe){return null==fe?null:S(fe)}function S(fe){if("function"!=typeof fe)throw new Error;return fe}function R(){return 0}function O(fe){return function(){return fe}}function C(fe){return Math.sqrt(fe.value)}function D(fe){return function(be){be.children||(be.r=Math.max(0,+fe(be)||0))}}function B(fe,be){return function(he){if(_e=he.children){var _e,Ce,Ee,Ae=_e.length,ze=fe(he)*be||0;if(ze)for(Ce=0;Ce<Ae;++Ce)_e[Ce].r+=ze;if(Ee=M(_e),ze)for(Ce=0;Ce<Ae;++Ce)_e[Ce].r-=ze;he.r=Ee+ze}}}function z(fe){return function(be){var he=be.parent;be.r*=fe,he&&(be.x=he.x+fe*be.x,be.y=he.y+fe*be.y)}}function Y(fe){fe.x0=Math.round(fe.x0),fe.y0=Math.round(fe.y0),fe.x1=Math.round(fe.x1),fe.y1=Math.round(fe.y1)}function G(fe,be,he,_e,Ce){for(var Ee,Ae=fe.children,ze=-1,ve=Ae.length,Te=fe.value&&(_e-be)/fe.value;++ze<ve;)(Ee=Ae[ze]).y0=he,Ee.y1=Ce,Ee.x0=be,Ee.x1=be+=Ee.value*Te}var J={depth:-1},te={};function X(fe){return fe.id}function K(fe){return fe.parentId}function ae(fe,be){return fe.parent===be.parent?1:2}function U(fe){var be=fe.children;return be?be[0]:fe.t}function V(fe){var be=fe.children;return be?be[be.length-1]:fe.t}function q(fe,be,he){var _e=he/(be.i-fe.i);be.c-=_e,be.s+=he,fe.c+=_e,be.z+=he,be.m+=he}function ie(fe,be,he){return fe.a.parent===be.parent?fe.a:he}function H(fe,be){this._=fe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=be}function ee(fe,be,he,_e,Ce){for(var Ee,Ae=fe.children,ze=-1,ve=Ae.length,Te=fe.value&&(Ce-he)/fe.value;++ze<ve;)(Ee=Ae[ze]).x0=be,Ee.x1=_e,Ee.y0=he,Ee.y1=he+=Ee.value*Te}H.prototype=Object.create(p.prototype);var Q=(1+Math.sqrt(5))/2;function oe(fe,be,he,_e,Ce,Ee){for(var Ae,ze,ve,Te,Ie,De,Fe,Ue,qe,je,rt,Ne=[],Be=be.children,We=0,Ye=0,lt=Be.length,mt=be.value;We<lt;){ve=Ce-he,Te=Ee-_e;do{Ie=Be[Ye++].value}while(!Ie&&Ye<lt);for(De=Fe=Ie,rt=Ie*Ie*(je=Math.max(Te/ve,ve/Te)/(mt*fe)),qe=Math.max(Fe/rt,rt/De);Ye<lt;++Ye){if(Ie+=ze=Be[Ye].value,ze<De&&(De=ze),ze>Fe&&(Fe=ze),rt=Ie*Ie*je,(Ue=Math.max(Fe/rt,rt/De))>qe){Ie-=ze;break}qe=Ue}Ne.push(Ae={value:Ie,dice:ve<Te,children:Be.slice(We,Ye)}),Ae.dice?G(Ae,he,_e,Ce,mt?_e+=Te*Ie/mt:Ee):ee(Ae,he,_e,mt?he+=ve*Ie/mt:Ce,Ee),mt-=Ie,We=Ye}return Ne}var le=function fe(be){function he(_e,Ce,Ee,Ae,ze){oe(be,_e,Ce,Ee,Ae,ze)}return he.ratio=function(_e){return fe((_e=+_e)>1?_e:1)},he}(Q),de=function fe(be){function he(_e,Ce,Ee,Ae,ze){if((ve=_e._squarify)&&ve.ratio===be)for(var ve,Te,Ie,De,Fe,Ue=-1,qe=ve.length,je=_e.value;++Ue<qe;){for(Ie=(Te=ve[Ue]).children,De=Te.value=0,Fe=Ie.length;De<Fe;++De)Te.value+=Ie[De].value;Te.dice?G(Te,Ce,Ee,Ae,Ee+=(ze-Ee)*Te.value/je):ee(Te,Ce,Ee,Ce+=(Ae-Ce)*Te.value/je,ze),je-=Te.value}else _e._squarify=ve=oe(be,_e,Ce,Ee,Ae,ze),ve.ratio=be}return he.ratio=function(_e){return fe((_e=+_e)>1?_e:1)},he}(Q);g.cluster=function(){var fe=m,be=1,he=1,_e=!1;function Ce(Ee){var Ae,ze=0;Ee.eachAfter(function(Fe){var qe,Ue=Fe.children;Ue?(Fe.x=(qe=Ue).reduce(b,0)/qe.length,Fe.y=function(qe){return 1+qe.reduce(y,0)}(Ue)):(Fe.x=Ae?ze+=fe(Fe,Ae):0,Fe.y=0,Ae=Fe)});var ve=function(Fe){for(var Ue;Ue=Fe.children;)Fe=Ue[0];return Fe}(Ee),Te=function(Fe){for(var Ue;Ue=Fe.children;)Fe=Ue[Ue.length-1];return Fe}(Ee),Ie=ve.x-fe(ve,Te)/2,De=Te.x+fe(Te,ve)/2;return Ee.eachAfter(_e?function(Fe){Fe.x=(Fe.x-Ee.x)*be,Fe.y=(Ee.y-Fe.y)*he}:function(Fe){Fe.x=(Fe.x-Ie)/(De-Ie)*be,Fe.y=(1-(Ee.y?Fe.y/Ee.y:1))*he})}return Ce.separation=function(Ee){return arguments.length?(fe=Ee,Ce):fe},Ce.size=function(Ee){return arguments.length?(_e=!1,be=+Ee[0],he=+Ee[1],Ce):_e?null:[be,he]},Ce.nodeSize=function(Ee){return arguments.length?(_e=!0,be=+Ee[0],he=+Ee[1],Ce):_e?[be,he]:null},Ce},g.hierarchy=r,g.pack=function(){var fe=null,be=1,he=1,_e=R;function Ce(Ee){return Ee.x=be/2,Ee.y=he/2,fe?Ee.eachBefore(D(fe)).eachAfter(B(_e,.5)).eachBefore(z(1)):Ee.eachBefore(D(C)).eachAfter(B(R,1)).eachAfter(B(_e,Ee.r/Math.min(be,he))).eachBefore(z(Math.min(be,he)/(2*Ee.r))),Ee}return Ce.radius=function(Ee){return arguments.length?(fe=I(Ee),Ce):fe},Ce.size=function(Ee){return arguments.length?(be=+Ee[0],he=+Ee[1],Ce):[be,he]},Ce.padding=function(Ee){return arguments.length?(_e="function"==typeof Ee?Ee:O(+Ee),Ce):_e},Ce},g.packEnclose=i,g.packSiblings=function(fe){return M(fe),fe},g.partition=function(){var fe=1,be=1,he=0,_e=!1;function Ce(Ee){var ze,ve,Ae=Ee.height+1;return Ee.x0=Ee.y0=he,Ee.x1=fe,Ee.y1=be/Ae,Ee.eachBefore((ze=be,ve=Ae,function(Te){Te.children&&G(Te,Te.x0,ze*(Te.depth+1)/ve,Te.x1,ze*(Te.depth+2)/ve);var Ie=Te.x0,De=Te.y0,Fe=Te.x1-he,Ue=Te.y1-he;Fe<Ie&&(Ie=Fe=(Ie+Fe)/2),Ue<De&&(De=Ue=(De+Ue)/2),Te.x0=Ie,Te.y0=De,Te.x1=Fe,Te.y1=Ue})),_e&&Ee.eachBefore(Y),Ee}return Ce.round=function(Ee){return arguments.length?(_e=!!Ee,Ce):_e},Ce.size=function(Ee){return arguments.length?(fe=+Ee[0],be=+Ee[1],Ce):[fe,be]},Ce.padding=function(Ee){return arguments.length?(he=+Ee,Ce):he},Ce},g.stratify=function(){var fe=X,be=K;function he(_e){var Ce,Ee,Ae,ze,ve,Te,Ie,De=_e.length,Fe=new Array(De),Ue={};for(Ee=0;Ee<De;++Ee)ve=Fe[Ee]=new p(Ce=_e[Ee]),null!=(Te=fe(Ce,Ee,_e))&&(Te+="")&&(Ue[Ie="$"+(ve.id=Te)]=Ie in Ue?te:ve);for(Ee=0;Ee<De;++Ee)if(ve=Fe[Ee],null!=(Te=be(_e[Ee],Ee,_e))&&(Te+="")){if(!(ze=Ue["$"+Te]))throw new Error("missing: "+Te);if(ze===te)throw new Error("ambiguous: "+Te);ze.children?ze.children.push(ve):ze.children=[ve],ve.parent=ze}else{if(Ae)throw new Error("multiple roots");Ae=ve}if(!Ae)throw new Error("no root");if(Ae.parent=J,Ae.eachBefore(function(qe){qe.depth=qe.parent.depth+1,--De}).eachBefore(t),Ae.parent=null,De>0)throw new Error("cycle");return Ae}return he.id=function(_e){return arguments.length?(fe=S(_e),he):fe},he.parentId=function(_e){return arguments.length?(be=S(_e),he):be},he},g.tree=function(){var fe=ae,be=1,he=1,_e=null;function Ce(ve){var Te=function(Ne){for(var Be,We,Ye,lt,mt,Tt=new H(Ne,0),It=[Tt];Be=It.pop();)if(Ye=Be._.children)for(Be.children=new Array(mt=Ye.length),lt=mt-1;lt>=0;--lt)It.push(We=Be.children[lt]=new H(Ye[lt],lt)),We.parent=Be;return(Tt.parent=new H(null,0)).children=[Tt],Tt}(ve);if(Te.eachAfter(Ee),Te.parent.m=-Te.z,Te.eachBefore(Ae),_e)ve.eachBefore(ze);else{var Ie=ve,De=ve,Fe=ve;ve.eachBefore(function(Ne){Ne.x<Ie.x&&(Ie=Ne),Ne.x>De.x&&(De=Ne),Ne.depth>Fe.depth&&(Fe=Ne)});var Ue=Ie===De?1:fe(Ie,De)/2,qe=Ue-Ie.x,je=be/(De.x+Ue+qe),rt=he/(Fe.depth||1);ve.eachBefore(function(Ne){Ne.x=(Ne.x+qe)*je,Ne.y=Ne.depth*rt})}return ve}function Ee(ve){var Te=ve.children,Ie=ve.parent.children,De=ve.i?Ie[ve.i-1]:null;if(Te){!function(Ue){for(var qe,je=0,rt=0,Ne=Ue.children,Be=Ne.length;--Be>=0;)(qe=Ne[Be]).z+=je,qe.m+=je,je+=qe.s+(rt+=qe.c)}(ve);var Fe=(Te[0].z+Te[Te.length-1].z)/2;De?(ve.z=De.z+fe(ve._,De._),ve.m=ve.z-Fe):ve.z=Fe}else De&&(ve.z=De.z+fe(ve._,De._));ve.parent.A=function(Ue,qe,je){if(qe){for(var rt,Ne=Ue,Be=Ue,We=qe,Ye=Ne.parent.children[0],lt=Ne.m,mt=Be.m,Tt=We.m,It=Ye.m;We=V(We),Ne=U(Ne),We&&Ne;)Ye=U(Ye),(Be=V(Be)).a=Ue,(rt=We.z+Tt-Ne.z-lt+fe(We._,Ne._))>0&&(q(ie(We,Ue,je),Ue,rt),lt+=rt,mt+=rt),Tt+=We.m,lt+=Ne.m,It+=Ye.m,mt+=Be.m;We&&!V(Be)&&(Be.t=We,Be.m+=Tt-mt),Ne&&!U(Ye)&&(Ye.t=Ne,Ye.m+=lt-It,je=Ue)}return je}(ve,De,ve.parent.A||Ie[0])}function Ae(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function ze(ve){ve.x*=be,ve.y=ve.depth*he}return Ce.separation=function(ve){return arguments.length?(fe=ve,Ce):fe},Ce.size=function(ve){return arguments.length?(_e=!1,be=+ve[0],he=+ve[1],Ce):_e?null:[be,he]},Ce.nodeSize=function(ve){return arguments.length?(_e=!0,be=+ve[0],he=+ve[1],Ce):_e?[be,he]:null},Ce},g.treemap=function(){var fe=le,be=!1,he=1,_e=1,Ce=[0],Ee=R,Ae=R,ze=R,ve=R,Te=R;function Ie(Fe){return Fe.x0=Fe.y0=0,Fe.x1=he,Fe.y1=_e,Fe.eachBefore(De),Ce=[0],be&&Fe.eachBefore(Y),Fe}function De(Fe){var Ue=Ce[Fe.depth],qe=Fe.x0+Ue,je=Fe.y0+Ue,rt=Fe.x1-Ue,Ne=Fe.y1-Ue;rt<qe&&(qe=rt=(qe+rt)/2),Ne<je&&(je=Ne=(je+Ne)/2),Fe.x0=qe,Fe.y0=je,Fe.x1=rt,Fe.y1=Ne,Fe.children&&(Ue=Ce[Fe.depth+1]=Ee(Fe)/2,qe+=Te(Fe)-Ue,je+=Ae(Fe)-Ue,(rt-=ze(Fe)-Ue)<qe&&(qe=rt=(qe+rt)/2),(Ne-=ve(Fe)-Ue)<je&&(je=Ne=(je+Ne)/2),fe(Fe,qe,je,rt,Ne))}return Ie.round=function(Fe){return arguments.length?(be=!!Fe,Ie):be},Ie.size=function(Fe){return arguments.length?(he=+Fe[0],_e=+Fe[1],Ie):[he,_e]},Ie.tile=function(Fe){return arguments.length?(fe=S(Fe),Ie):fe},Ie.padding=function(Fe){return arguments.length?Ie.paddingInner(Fe).paddingOuter(Fe):Ie.paddingInner()},Ie.paddingInner=function(Fe){return arguments.length?(Ee="function"==typeof Fe?Fe:O(+Fe),Ie):Ee},Ie.paddingOuter=function(Fe){return arguments.length?Ie.paddingTop(Fe).paddingRight(Fe).paddingBottom(Fe).paddingLeft(Fe):Ie.paddingTop()},Ie.paddingTop=function(Fe){return arguments.length?(Ae="function"==typeof Fe?Fe:O(+Fe),Ie):Ae},Ie.paddingRight=function(Fe){return arguments.length?(ze="function"==typeof Fe?Fe:O(+Fe),Ie):ze},Ie.paddingBottom=function(Fe){return arguments.length?(ve="function"==typeof Fe?Fe:O(+Fe),Ie):ve},Ie.paddingLeft=function(Fe){return arguments.length?(Te="function"==typeof Fe?Fe:O(+Fe),Ie):Te},Ie},g.treemapBinary=function(fe,be,he,_e,Ce){var Ee,Ae,ze=fe.children,ve=ze.length,Te=new Array(ve+1);for(Te[0]=Ae=Ee=0;Ee<ve;++Ee)Te[Ee+1]=Ae+=ze[Ee].value;!function Ie(De,Fe,Ue,qe,je,rt,Ne){if(De>=Fe-1){var Be=ze[De];return Be.x0=qe,Be.y0=je,Be.x1=rt,void(Be.y1=Ne)}for(var We=Te[De],Ye=Ue/2+We,lt=De+1,mt=Fe-1;lt<mt;){var Tt=lt+mt>>>1;Te[Tt]<Ye?lt=Tt+1:mt=Tt}Ye-Te[lt-1]<Te[lt]-Ye&&De+1<lt&&--lt;var It=Te[lt]-We,Ct=Ue-It;if(rt-qe>Ne-je){var ct=(qe*Ct+rt*It)/Ue;Ie(De,lt,It,qe,je,ct,Ne),Ie(lt,Fe,Ct,ct,je,rt,Ne)}else{var at=(je*Ct+Ne*It)/Ue;Ie(De,lt,It,qe,je,rt,at),Ie(lt,Fe,Ct,qe,at,rt,Ne)}}(0,ve,fe.value,be,he,_e,Ce)},g.treemapDice=G,g.treemapResquarify=de,g.treemapSlice=ee,g.treemapSliceDice=function(fe,be,he,_e,Ce){(1&fe.depth?ee:G)(fe,be,he,_e,Ce)},g.treemapSquarify=le,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).d3=g.d3||{})},{}],116:[function(v,re,ne){var g,m;g=this,m=function(g,m){"use strict";function b(Q,oe,le,de,fe){var be=Q*Q,he=be*Q;return((1-3*Q+3*be-he)*oe+(4-6*be+3*he)*le+(1+3*Q+3*be-3*he)*de+he*fe)/6}function y(Q){var oe=Q.length-1;return function(le){var de=le<=0?le=0:le>=1?(le=1,oe-1):Math.floor(le*oe),fe=Q[de],be=Q[de+1];return b((le-de/oe)*oe,de>0?Q[de-1]:2*fe-be,fe,be,de<oe-1?Q[de+2]:2*be-fe)}}function e(Q){var oe=Q.length;return function(le){var de=Math.floor(((le%=1)<0?++le:le)*oe);return b((le-de/oe)*oe,Q[(de+oe-1)%oe],Q[de%oe],Q[(de+1)%oe],Q[(de+2)%oe])}}function r(Q){return function(){return Q}}function n(Q,oe){return function(le){return Q+le*oe}}function a(Q,oe){var le=oe-Q;return le?n(Q,le>180||le<-180?le-360*Math.round(le/360):le):r(isNaN(Q)?oe:Q)}function p(Q,oe){var le=oe-Q;return le?n(Q,le):r(isNaN(Q)?oe:Q)}var s=function Q(oe){var le=function t(Q){return 1==(Q=+Q)?p:function(oe,le){return le-oe?(de=oe,fe=le,be=Q,de=Math.pow(de,be),fe=Math.pow(fe,be)-de,be=1/be,function(he){return Math.pow(de+he*fe,be)}):r(isNaN(oe)?le:oe);var de,fe,be}}(oe);function de(fe,be){var he=le((fe=m.rgb(fe)).r,(be=m.rgb(be)).r),_e=le(fe.g,be.g),Ce=le(fe.b,be.b),Ee=p(fe.opacity,be.opacity);return function(Ae){return fe.r=he(Ae),fe.g=_e(Ae),fe.b=Ce(Ae),fe.opacity=Ee(Ae),fe+""}}return de.gamma=Q,de}(1);function i(Q){return function(oe){var le,de,fe=oe.length,be=new Array(fe),he=new Array(fe),_e=new Array(fe);for(le=0;le<fe;++le)de=m.rgb(oe[le]),be[le]=de.r||0,he[le]=de.g||0,_e[le]=de.b||0;return be=Q(be),he=Q(he),_e=Q(_e),de.opacity=1,function(Ce){return de.r=be(Ce),de.g=he(Ce),de.b=_e(Ce),de+""}}}var f=i(y),c=i(e);function l(Q,oe){oe||(oe=[]);var le,de=Q?Math.min(oe.length,Q.length):0,fe=oe.slice();return function(be){for(le=0;le<de;++le)fe[le]=Q[le]*(1-be)+oe[le]*be;return fe}}function h(Q){return ArrayBuffer.isView(Q)&&!(Q instanceof DataView)}function d(Q,oe){var le,de=oe?oe.length:0,fe=Q?Math.min(de,Q.length):0,be=new Array(fe),he=new Array(de);for(le=0;le<fe;++le)be[le]=M(Q[le],oe[le]);for(;le<de;++le)he[le]=oe[le];return function(_e){for(le=0;le<fe;++le)he[le]=be[le](_e);return he}}function o(Q,oe){var le=new Date;return Q=+Q,oe=+oe,function(de){return le.setTime(Q*(1-de)+oe*de),le}}function x(Q,oe){return Q=+Q,oe=+oe,function(le){return Q*(1-le)+oe*le}}function u(Q,oe){var le,de={},fe={};for(le in null!==Q&&"object"==typeof Q||(Q={}),null!==oe&&"object"==typeof oe||(oe={}),oe)le in Q?de[le]=M(Q[le],oe[le]):fe[le]=oe[le];return function(be){for(le in de)fe[le]=de[le](be);return fe}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(T.source,"g");function w(Q,oe){var le,de,fe,Ee,be=T.lastIndex=_.lastIndex=0,he=-1,_e=[],Ce=[];for(Q+="",oe+="";(le=T.exec(Q))&&(de=_.exec(oe));)(fe=de.index)>be&&(fe=oe.slice(be,fe),_e[he]?_e[he]+=fe:_e[++he]=fe),(le=le[0])===(de=de[0])?_e[he]?_e[he]+=de:_e[++he]=de:(_e[++he]=null,Ce.push({i:he,x:x(le,de)})),be=_.lastIndex;return be<oe.length&&(fe=oe.slice(be),_e[he]?_e[he]+=fe:_e[++he]=fe),_e.length<2?Ce[0]?(Ee=Ce[0].x,function(Ae){return Ee(Ae)+""}):function(Ee){return function(){return Ee}}(oe):(oe=Ce.length,function(Ee){for(var Ae,ze=0;ze<oe;++ze)_e[(Ae=Ce[ze]).i]=Ae.x(Ee);return _e.join("")})}function M(Q,oe){var le,de=typeof oe;return null==oe||"boolean"===de?r(oe):("number"===de?x:"string"===de?(le=m.color(oe))?(oe=le,s):w:oe instanceof m.color?s:oe instanceof Date?o:h(oe)?l:Array.isArray(oe)?d:"function"!=typeof oe.valueOf&&"function"!=typeof oe.toString||isNaN(oe)?u:x)(Q,oe)}var I,S,R,O,C=180/Math.PI,D={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B(Q,oe,le,de,fe,be){var he,_e,Ce;return(he=Math.sqrt(Q*Q+oe*oe))&&(Q/=he,oe/=he),(Ce=Q*le+oe*de)&&(le-=Q*Ce,de-=oe*Ce),(_e=Math.sqrt(le*le+de*de))&&(le/=_e,de/=_e,Ce/=_e),Q*de<oe*le&&(Q=-Q,oe=-oe,Ce=-Ce,he=-he),{translateX:fe,translateY:be,rotate:Math.atan2(oe,Q)*C,skewX:Math.atan(Ce)*C,scaleX:he,scaleY:_e}}function z(Q,oe,le,de){function fe(be){return be.length?be.pop()+" ":""}return function(be,he){var Ee,Ae,ze,_e=[],Ce=[];return be=Q(be),he=Q(he),function(Ee,Ae,ze,ve,Te,Ie){if(Ee!==ze||Ae!==ve){var De=Te.push("translate(",null,oe,null,le);Ie.push({i:De-4,x:x(Ee,ze)},{i:De-2,x:x(Ae,ve)})}else(ze||ve)&&Te.push("translate("+ze+oe+ve+le)}(be.translateX,be.translateY,he.translateX,he.translateY,_e,Ce),ze=_e,(Ee=be.rotate)!==(Ae=he.rotate)?(Ee-Ae>180?Ae+=360:Ae-Ee>180&&(Ee+=360),Ce.push({i:ze.push(fe(ze)+"rotate(",null,de)-2,x:x(Ee,Ae)})):Ae&&ze.push(fe(ze)+"rotate("+Ae+de),function(Ee,Ae,ze,ve){Ee!==Ae?ve.push({i:ze.push(fe(ze)+"skewX(",null,de)-2,x:x(Ee,Ae)}):Ae&&ze.push(fe(ze)+"skewX("+Ae+de)}(be.skewX,he.skewX,_e,Ce),function(Ee,Ae,ze,ve,Te,Ie){if(Ee!==ze||Ae!==ve){var De=Te.push(fe(Te)+"scale(",null,",",null,")");Ie.push({i:De-4,x:x(Ee,ze)},{i:De-2,x:x(Ae,ve)})}else 1===ze&&1===ve||Te.push(fe(Te)+"scale("+ze+","+ve+")")}(be.scaleX,be.scaleY,he.scaleX,he.scaleY,_e,Ce),be=he=null,function(Ee){for(var Ae,ze=-1,ve=Ce.length;++ze<ve;)_e[(Ae=Ce[ze]).i]=Ae.x(Ee);return _e.join("")}}}var Y=z(function(Q){return"none"===Q?D:(I||(I=document.createElement("DIV"),S=document.documentElement,R=document.defaultView),I.style.transform=Q,Q=R.getComputedStyle(S.appendChild(I),null).getPropertyValue("transform"),S.removeChild(I),B(+(Q=Q.slice(7,-1).split(","))[0],+Q[1],+Q[2],+Q[3],+Q[4],+Q[5]))},"px, ","px)","deg)"),G=z(function(Q){return null==Q?D:(O||(O=document.createElementNS("http://www.w3.org/2000/svg","g")),O.setAttribute("transform",Q),(Q=O.transform.baseVal.consolidate())?B((Q=Q.matrix).a,Q.b,Q.c,Q.d,Q.e,Q.f):D)},", ",")",")"),J=Math.SQRT2;function te(Q){return((Q=Math.exp(Q))+1/Q)/2}function X(Q){return function(oe,le){var de=Q((oe=m.hsl(oe)).h,(le=m.hsl(le)).h),fe=p(oe.s,le.s),be=p(oe.l,le.l),he=p(oe.opacity,le.opacity);return function(_e){return oe.h=de(_e),oe.s=fe(_e),oe.l=be(_e),oe.opacity=he(_e),oe+""}}}var K=X(a),ae=X(p);function U(Q){return function(oe,le){var de=Q((oe=m.hcl(oe)).h,(le=m.hcl(le)).h),fe=p(oe.c,le.c),be=p(oe.l,le.l),he=p(oe.opacity,le.opacity);return function(_e){return oe.h=de(_e),oe.c=fe(_e),oe.l=be(_e),oe.opacity=he(_e),oe+""}}}var V=U(a),q=U(p);function ie(Q){return function oe(le){function de(fe,be){var he=Q((fe=m.cubehelix(fe)).h,(be=m.cubehelix(be)).h),_e=p(fe.s,be.s),Ce=p(fe.l,be.l),Ee=p(fe.opacity,be.opacity);return function(Ae){return fe.h=he(Ae),fe.s=_e(Ae),fe.l=Ce(Math.pow(Ae,le)),fe.opacity=Ee(Ae),fe+""}}return le=+le,de.gamma=oe,de}(1)}var H=ie(a),ee=ie(p);g.interpolate=M,g.interpolateArray=function(Q,oe){return(h(oe)?l:d)(Q,oe)},g.interpolateBasis=y,g.interpolateBasisClosed=e,g.interpolateCubehelix=H,g.interpolateCubehelixLong=ee,g.interpolateDate=o,g.interpolateDiscrete=function(Q){var oe=Q.length;return function(le){return Q[Math.max(0,Math.min(oe-1,Math.floor(le*oe)))]}},g.interpolateHcl=V,g.interpolateHclLong=q,g.interpolateHsl=K,g.interpolateHslLong=ae,g.interpolateHue=function(Q,oe){var le=a(+Q,+oe);return function(de){var fe=le(de);return fe-360*Math.floor(fe/360)}},g.interpolateLab=function(Q,oe){var le=p((Q=m.lab(Q)).l,(oe=m.lab(oe)).l),de=p(Q.a,oe.a),fe=p(Q.b,oe.b),be=p(Q.opacity,oe.opacity);return function(he){return Q.l=le(he),Q.a=de(he),Q.b=fe(he),Q.opacity=be(he),Q+""}},g.interpolateNumber=x,g.interpolateNumberArray=l,g.interpolateObject=u,g.interpolateRgb=s,g.interpolateRgbBasis=f,g.interpolateRgbBasisClosed=c,g.interpolateRound=function(Q,oe){return Q=+Q,oe=+oe,function(le){return Math.round(Q*(1-le)+oe*le)}},g.interpolateString=w,g.interpolateTransformCss=Y,g.interpolateTransformSvg=G,g.interpolateZoom=function(Q,oe){var le,de,fe=Q[0],be=Q[1],he=Q[2],Ee=oe[2],Ae=oe[0]-fe,ze=oe[1]-be,ve=Ae*Ae+ze*ze;if(ve<1e-12)de=Math.log(Ee/he)/J,le=function(qe){return[fe+qe*Ae,be+qe*ze,he*Math.exp(J*qe*de)]};else{var Te=Math.sqrt(ve),Ie=(Ee*Ee-he*he+4*ve)/(2*he*2*Te),De=(Ee*Ee-he*he-4*ve)/(2*Ee*2*Te),Fe=Math.log(Math.sqrt(Ie*Ie+1)-Ie),Ue=Math.log(Math.sqrt(De*De+1)-De);de=(Ue-Fe)/J,le=function(qe){var je,We,rt=qe*de,Ne=te(Fe),Be=he/(2*Te)*(Ne*(je=J*rt+Fe,((je=Math.exp(2*je))-1)/(je+1))-(We=Fe,((We=Math.exp(We))-1/We)/2));return[fe+Be*Ae,be+Be*ze,he*Ne/te(J*rt+Fe)]}}return le.duration=1e3*de,le},g.piecewise=function(Q,oe){for(var le=0,de=oe.length-1,fe=oe[0],be=new Array(de<0?0:de);le<de;)be[le]=Q(fe,fe=oe[++le]);return function(he){var _e=Math.max(0,Math.min(de-1,Math.floor(he*=de)));return be[_e](he-_e)}},g.quantize=function(Q,oe){for(var le=new Array(oe),de=0;de<oe;++de)le[de]=Q(de/(oe-1));return le},Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-color")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-color":109}],117:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";var m=Math.PI,b=2*m,y=b-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function r(){return new e}e.prototype=r.prototype={constructor:e,moveTo:function(n,a){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,a){this._+="L"+(this._x1=+n)+","+(this._y1=+a)},quadraticCurveTo:function(n,a,t,p){this._+="Q"+ +n+","+ +a+","+(this._x1=+t)+","+(this._y1=+p)},bezierCurveTo:function(n,a,t,p,s,i){this._+="C"+ +n+","+ +a+","+ +t+","+ +p+","+(this._x1=+s)+","+(this._y1=+i)},arcTo:function(n,a,t,p,s){var i=this._x1,f=this._y1,c=(t=+t)-(n=+n),l=(p=+p)-(a=+a),h=i-n,d=f-a,o=h*h+d*d;if((s=+s)<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=n)+","+(this._y1=a);else if(o>1e-6)if(Math.abs(d*c-l*h)>1e-6&&s){var x=t-i,u=p-f,T=c*c+l*l,_=x*x+u*u,w=Math.sqrt(T),M=Math.sqrt(o),I=s*Math.tan((m-Math.acos((T+o-_)/(2*w*M)))/2),S=I/M,R=I/w;Math.abs(S-1)>1e-6&&(this._+="L"+(n+S*h)+","+(a+S*d)),this._+="A"+s+","+s+",0,0,"+ +(d*x>h*u)+","+(this._x1=n+R*c)+","+(this._y1=a+R*l)}else this._+="L"+(this._x1=n)+","+(this._y1=a)},arc:function(n,a,t,p,s,i){n=+n,a=+a,i=!!i;var f=(t=+t)*Math.cos(p),c=t*Math.sin(p),l=n+f,h=a+c,d=1^i,o=i?p-s:s-p;if(t<0)throw new Error("negative radius: "+t);null===this._x1?this._+="M"+l+","+h:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+l+","+h),t&&(o<0&&(o=o%b+b),o>y?this._+="A"+t+","+t+",0,1,"+d+","+(n-f)+","+(a-c)+"A"+t+","+t+",0,1,"+d+","+(this._x1=l)+","+(this._y1=h):o>1e-6&&(this._+="A"+t+","+t+",0,"+ +(o>=m)+","+d+","+(this._x1=n+t*Math.cos(s))+","+(this._y1=a+t*Math.sin(s))))},rect:function(n,a,t,p){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+a)+"h"+ +t+"v"+ +p+"h"+-t+"Z"},toString:function(){return this._}},g.path=r,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).d3=g.d3||{})},{}],118:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";function m(p,s,i,f){if(isNaN(s)||isNaN(i))return p;var c,l,h,d,o,x,u,T,_,w=p._root,M={data:f},I=p._x0,S=p._y0,R=p._x1,O=p._y1;if(!w)return p._root=M,p;for(;w.length;)if((x=s>=(l=(I+R)/2))?I=l:R=l,(u=i>=(h=(S+O)/2))?S=h:O=h,c=w,!(w=w[T=u<<1|x]))return c[T]=M,p;if(d=+p._x.call(null,w.data),o=+p._y.call(null,w.data),s===d&&i===o)return M.next=w,c?c[T]=M:p._root=M,p;do{c=c?c[T]=new Array(4):p._root=new Array(4),(x=s>=(l=(I+R)/2))?I=l:R=l,(u=i>=(h=(S+O)/2))?S=h:O=h}while((T=u<<1|x)==(_=(o>=h)<<1|d>=l));return c[_]=w,c[T]=M,p}function b(p,s,i,f,c){this.node=p,this.x0=s,this.y0=i,this.x1=f,this.y1=c}function y(p){return p[0]}function e(p){return p[1]}function r(p,s,i){var f=new n(s??y,i??e,NaN,NaN,NaN,NaN);return null==p?f:f.addAll(p)}function n(p,s,i,f,c,l){this._x=p,this._y=s,this._x0=i,this._y0=f,this._x1=c,this._y1=l,this._root=void 0}function a(p){for(var s={data:p.data},i=s;p=p.next;)i=i.next={data:p.data};return s}var t=r.prototype=n.prototype;t.copy=function(){var p,s,i=new n(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root;if(!f)return i;if(!f.length)return i._root=a(f),i;for(p=[{source:f,target:i._root=new Array(4)}];f=p.pop();)for(var c=0;c<4;++c)(s=f.source[c])&&(s.length?p.push({source:s,target:f.target[c]=new Array(4)}):f.target[c]=a(s));return i},t.add=function(p){var s=+this._x.call(null,p),i=+this._y.call(null,p);return m(this.cover(s,i),s,i,p)},t.addAll=function(p){var s,i,f,c,l=p.length,h=new Array(l),d=new Array(l),o=1/0,x=1/0,u=-1/0,T=-1/0;for(i=0;i<l;++i)isNaN(f=+this._x.call(null,s=p[i]))||isNaN(c=+this._y.call(null,s))||(h[i]=f,d[i]=c,f<o&&(o=f),f>u&&(u=f),c<x&&(x=c),c>T&&(T=c));if(o>u||x>T)return this;for(this.cover(o,x).cover(u,T),i=0;i<l;++i)m(this,h[i],d[i],p[i]);return this},t.cover=function(p,s){if(isNaN(p=+p)||isNaN(s=+s))return this;var i=this._x0,f=this._y0,c=this._x1,l=this._y1;if(isNaN(i))c=(i=Math.floor(p))+1,l=(f=Math.floor(s))+1;else{for(var h,d,o=c-i,x=this._root;i>p||p>=c||f>s||s>=l;)switch(d=(s<f)<<1|p<i,(h=new Array(4))[d]=x,x=h,o*=2,d){case 0:c=i+o,l=f+o;break;case 1:i=c-o,l=f+o;break;case 2:c=i+o,f=l-o;break;case 3:i=c-o,f=l-o}this._root&&this._root.length&&(this._root=x)}return this._x0=i,this._y0=f,this._x1=c,this._y1=l,this},t.data=function(){var p=[];return this.visit(function(s){if(!s.length)do{p.push(s.data)}while(s=s.next)}),p},t.extent=function(p){return arguments.length?this.cover(+p[0][0],+p[0][1]).cover(+p[1][0],+p[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},t.find=function(p,s,i){var f,c,l,h,d,o,x,u=this._x0,T=this._y0,_=this._x1,w=this._y1,M=[],I=this._root;for(I&&M.push(new b(I,u,T,_,w)),null==i?i=1/0:(u=p-i,T=s-i,_=p+i,w=s+i,i*=i);o=M.pop();)if(!(!(I=o.node)||(c=o.x0)>_||(l=o.y0)>w||(h=o.x1)<u||(d=o.y1)<T))if(I.length){var S=(c+h)/2,R=(l+d)/2;M.push(new b(I[3],S,R,h,d),new b(I[2],c,R,S,d),new b(I[1],S,l,h,R),new b(I[0],c,l,S,R)),(x=(s>=R)<<1|p>=S)&&(o=M[M.length-1],M[M.length-1]=M[M.length-1-x],M[M.length-1-x]=o)}else{var O=p-+this._x.call(null,I.data),C=s-+this._y.call(null,I.data),D=O*O+C*C;if(D<i){var B=Math.sqrt(i=D);u=p-B,T=s-B,_=p+B,w=s+B,f=I.data}}return f},t.remove=function(p){if(isNaN(l=+this._x.call(null,p))||isNaN(h=+this._y.call(null,p)))return this;var s,i,f,c,l,h,d,o,x,u,T,_,w=this._root,M=this._x0,I=this._y0,S=this._x1,R=this._y1;if(!w)return this;if(w.length)for(;;){if((x=l>=(d=(M+S)/2))?M=d:S=d,(u=h>=(o=(I+R)/2))?I=o:R=o,s=w,!(w=w[T=u<<1|x]))return this;if(!w.length)break;(s[T+1&3]||s[T+2&3]||s[T+3&3])&&(i=s,_=T)}for(;w.data!==p;)if(f=w,!(w=w.next))return this;return(c=w.next)&&delete w.next,f?(c?f.next=c:delete f.next,this):s?(c?s[T]=c:delete s[T],(w=s[0]||s[1]||s[2]||s[3])&&w===(s[3]||s[2]||s[1]||s[0])&&!w.length&&(i?i[_]=w:this._root=w),this):(this._root=c,this)},t.removeAll=function(p){for(var s=0,i=p.length;s<i;++s)this.remove(p[s]);return this},t.root=function(){return this._root},t.size=function(){var p=0;return this.visit(function(s){if(!s.length)do{++p}while(s=s.next)}),p},t.visit=function(p){var s,i,f,c,l,h,d=[],o=this._root;for(o&&d.push(new b(o,this._x0,this._y0,this._x1,this._y1));s=d.pop();)if(!p(o=s.node,f=s.x0,c=s.y0,l=s.x1,h=s.y1)&&o.length){var x=(f+l)/2,u=(c+h)/2;(i=o[3])&&d.push(new b(i,x,u,l,h)),(i=o[2])&&d.push(new b(i,f,u,x,h)),(i=o[1])&&d.push(new b(i,x,c,l,u)),(i=o[0])&&d.push(new b(i,f,c,x,u))}return this},t.visitAfter=function(p){var s,i=[],f=[];for(this._root&&i.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));s=i.pop();){var c=s.node;if(c.length){var l,h=s.x0,d=s.y0,o=s.x1,x=s.y1,u=(h+o)/2,T=(d+x)/2;(l=c[0])&&i.push(new b(l,h,d,u,T)),(l=c[1])&&i.push(new b(l,u,d,o,T)),(l=c[2])&&i.push(new b(l,h,T,u,x)),(l=c[3])&&i.push(new b(l,u,T,o,x))}f.push(s)}for(;s=f.pop();)p(s.node,s.x0,s.y0,s.x1,s.y1);return this},t.x=function(p){return arguments.length?(this._x=p,this):this._x},t.y=function(p){return arguments.length?(this._y=p,this):this._y},g.quadtree=r,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).d3=g.d3||{})},{}],119:[function(v,re,ne){var g,m;g=this,m=function(g,m){"use strict";function b(Pe){return function(){return Pe}}var y=Math.abs,e=Math.atan2,r=Math.cos,n=Math.max,a=Math.min,t=Math.sin,p=Math.sqrt,s=Math.PI,i=s/2,f=2*s;function c(Pe){return Pe>1?0:Pe<-1?s:Math.acos(Pe)}function l(Pe){return Pe>=1?i:Pe<=-1?-i:Math.asin(Pe)}function h(Pe){return Pe.innerRadius}function d(Pe){return Pe.outerRadius}function o(Pe){return Pe.startAngle}function x(Pe){return Pe.endAngle}function u(Pe){return Pe&&Pe.padAngle}function T(Pe,et,dt,xt,Rt,Yt,nn,Kt){var Mn=dt-Pe,Un=xt-et,Tn=nn-Rt,un=Kt-Yt,an=un*Mn-Tn*Un;if(!(an*an<1e-12))return[Pe+(an=(Tn*(et-Yt)-un*(Pe-Rt))/an)*Mn,et+an*Un]}function _(Pe,et,dt,xt,Rt,Yt,nn){var Kt=Pe-dt,Mn=et-xt,Un=(nn?Yt:-Yt)/p(Kt*Kt+Mn*Mn),Tn=Un*Mn,un=-Un*Kt,an=Pe+Tn,fn=et+un,pn=dt+Tn,Sn=xt+un,Nn=(an+pn)/2,Kn=(fn+Sn)/2,Bn=pn-an,cr=Sn-fn,Lr=Bn*Bn+cr*cr,Qn=Rt-Yt,qr=an*Sn-pn*fn,sr=(cr<0?-1:1)*p(n(0,Qn*Qn*Lr-qr*qr)),hr=(qr*cr-Bn*sr)/Lr,jr=(-qr*Bn-cr*sr)/Lr,di=(qr*cr+Bn*sr)/Lr,Jn=(-qr*Bn+cr*sr)/Lr,Ar=hr-Nn,mr=jr-Kn,lr=di-Nn,ri=Jn-Kn;return Ar*Ar+mr*mr>lr*lr+ri*ri&&(hr=di,jr=Jn),{cx:hr,cy:jr,x01:-Tn,y01:-un,x11:hr*(Rt/Qn-1),y11:jr*(Rt/Qn-1)}}function w(Pe){this._context=Pe}function M(Pe){return new w(Pe)}function I(Pe){return Pe[0]}function S(Pe){return Pe[1]}function R(){var Pe=I,et=S,dt=b(!0),xt=null,Rt=M,Yt=null;function nn(Kt){var Mn,Un,Tn,un=Kt.length,an=!1;for(null==xt&&(Yt=Rt(Tn=m.path())),Mn=0;Mn<=un;++Mn)!(Mn<un&&dt(Un=Kt[Mn],Mn,Kt))===an&&((an=!an)?Yt.lineStart():Yt.lineEnd()),an&&Yt.point(+Pe(Un,Mn,Kt),+et(Un,Mn,Kt));if(Tn)return Yt=null,Tn+""||null}return nn.x=function(Kt){return arguments.length?(Pe="function"==typeof Kt?Kt:b(+Kt),nn):Pe},nn.y=function(Kt){return arguments.length?(et="function"==typeof Kt?Kt:b(+Kt),nn):et},nn.defined=function(Kt){return arguments.length?(dt="function"==typeof Kt?Kt:b(!!Kt),nn):dt},nn.curve=function(Kt){return arguments.length?(Rt=Kt,null!=xt&&(Yt=Rt(xt)),nn):Rt},nn.context=function(Kt){return arguments.length?(null==Kt?xt=Yt=null:Yt=Rt(xt=Kt),nn):xt},nn}function O(){var Pe=I,et=null,dt=b(0),xt=S,Rt=b(!0),Yt=null,nn=M,Kt=null;function Mn(Tn){var un,an,fn,pn,Sn,Nn=Tn.length,Kn=!1,Bn=new Array(Nn),cr=new Array(Nn);for(null==Yt&&(Kt=nn(Sn=m.path())),un=0;un<=Nn;++un){if(!(un<Nn&&Rt(pn=Tn[un],un,Tn))===Kn)if(Kn=!Kn)an=un,Kt.areaStart(),Kt.lineStart();else{for(Kt.lineEnd(),Kt.lineStart(),fn=un-1;fn>=an;--fn)Kt.point(Bn[fn],cr[fn]);Kt.lineEnd(),Kt.areaEnd()}Kn&&(Bn[un]=+Pe(pn,un,Tn),cr[un]=+dt(pn,un,Tn),Kt.point(et?+et(pn,un,Tn):Bn[un],xt?+xt(pn,un,Tn):cr[un]))}if(Sn)return Kt=null,Sn+""||null}function Un(){return R().defined(Rt).curve(nn).context(Yt)}return Mn.x=function(Tn){return arguments.length?(Pe="function"==typeof Tn?Tn:b(+Tn),et=null,Mn):Pe},Mn.x0=function(Tn){return arguments.length?(Pe="function"==typeof Tn?Tn:b(+Tn),Mn):Pe},Mn.x1=function(Tn){return arguments.length?(et=null==Tn?null:"function"==typeof Tn?Tn:b(+Tn),Mn):et},Mn.y=function(Tn){return arguments.length?(dt="function"==typeof Tn?Tn:b(+Tn),xt=null,Mn):dt},Mn.y0=function(Tn){return arguments.length?(dt="function"==typeof Tn?Tn:b(+Tn),Mn):dt},Mn.y1=function(Tn){return arguments.length?(xt=null==Tn?null:"function"==typeof Tn?Tn:b(+Tn),Mn):xt},Mn.lineX0=Mn.lineY0=function(){return Un().x(Pe).y(dt)},Mn.lineY1=function(){return Un().x(Pe).y(xt)},Mn.lineX1=function(){return Un().x(et).y(dt)},Mn.defined=function(Tn){return arguments.length?(Rt="function"==typeof Tn?Tn:b(!!Tn),Mn):Rt},Mn.curve=function(Tn){return arguments.length?(nn=Tn,null!=Yt&&(Kt=nn(Yt)),Mn):nn},Mn.context=function(Tn){return arguments.length?(null==Tn?Yt=Kt=null:Kt=nn(Yt=Tn),Mn):Yt},Mn}function C(Pe,et){return et<Pe?-1:et>Pe?1:et>=Pe?0:NaN}function D(Pe){return Pe}w.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Pe,et):this._context.moveTo(Pe,et);break;case 1:this._point=2;default:this._context.lineTo(Pe,et)}}};var B=Y(M);function z(Pe){this._curve=Pe}function Y(Pe){function et(dt){return new z(Pe(dt))}return et._curve=Pe,et}function G(Pe){var et=Pe.curve;return Pe.angle=Pe.x,delete Pe.x,Pe.radius=Pe.y,delete Pe.y,Pe.curve=function(dt){return arguments.length?et(Y(dt)):et()._curve},Pe}function J(){return G(R().curve(B))}function te(){var Pe=O().curve(B),et=Pe.curve,dt=Pe.lineX0,xt=Pe.lineX1,Rt=Pe.lineY0,Yt=Pe.lineY1;return Pe.angle=Pe.x,delete Pe.x,Pe.startAngle=Pe.x0,delete Pe.x0,Pe.endAngle=Pe.x1,delete Pe.x1,Pe.radius=Pe.y,delete Pe.y,Pe.innerRadius=Pe.y0,delete Pe.y0,Pe.outerRadius=Pe.y1,delete Pe.y1,Pe.lineStartAngle=function(){return G(dt())},delete Pe.lineX0,Pe.lineEndAngle=function(){return G(xt())},delete Pe.lineX1,Pe.lineInnerRadius=function(){return G(Rt())},delete Pe.lineY0,Pe.lineOuterRadius=function(){return G(Yt())},delete Pe.lineY1,Pe.curve=function(nn){return arguments.length?et(Y(nn)):et()._curve},Pe}function X(Pe,et){return[(et=+et)*Math.cos(Pe-=Math.PI/2),et*Math.sin(Pe)]}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Pe,et){this._curve.point(et*Math.sin(Pe),et*-Math.cos(Pe))}};var K=Array.prototype.slice;function ae(Pe){return Pe.source}function U(Pe){return Pe.target}function V(Pe){var et=ae,dt=U,xt=I,Rt=S,Yt=null;function nn(){var Kt,Mn=K.call(arguments),Un=et.apply(this,Mn),Tn=dt.apply(this,Mn);if(Yt||(Yt=Kt=m.path()),Pe(Yt,+xt.apply(this,(Mn[0]=Un,Mn)),+Rt.apply(this,Mn),+xt.apply(this,(Mn[0]=Tn,Mn)),+Rt.apply(this,Mn)),Kt)return Yt=null,Kt+""||null}return nn.source=function(Kt){return arguments.length?(et=Kt,nn):et},nn.target=function(Kt){return arguments.length?(dt=Kt,nn):dt},nn.x=function(Kt){return arguments.length?(xt="function"==typeof Kt?Kt:b(+Kt),nn):xt},nn.y=function(Kt){return arguments.length?(Rt="function"==typeof Kt?Kt:b(+Kt),nn):Rt},nn.context=function(Kt){return arguments.length?(Yt=Kt??null,nn):Yt},nn}function q(Pe,et,dt,xt,Rt){Pe.moveTo(et,dt),Pe.bezierCurveTo(et=(et+xt)/2,dt,et,Rt,xt,Rt)}function ie(Pe,et,dt,xt,Rt){Pe.moveTo(et,dt),Pe.bezierCurveTo(et,dt=(dt+Rt)/2,xt,dt,xt,Rt)}function H(Pe,et,dt,xt,Rt){var Yt=X(et,dt),nn=X(et,dt=(dt+Rt)/2),Kt=X(xt,dt),Mn=X(xt,Rt);Pe.moveTo(Yt[0],Yt[1]),Pe.bezierCurveTo(nn[0],nn[1],Kt[0],Kt[1],Mn[0],Mn[1])}var ee={draw:function(Pe,et){var dt=Math.sqrt(et/s);Pe.moveTo(dt,0),Pe.arc(0,0,dt,0,f)}},Q={draw:function(Pe,et){var dt=Math.sqrt(et/5)/2;Pe.moveTo(-3*dt,-dt),Pe.lineTo(-dt,-dt),Pe.lineTo(-dt,-3*dt),Pe.lineTo(dt,-3*dt),Pe.lineTo(dt,-dt),Pe.lineTo(3*dt,-dt),Pe.lineTo(3*dt,dt),Pe.lineTo(dt,dt),Pe.lineTo(dt,3*dt),Pe.lineTo(-dt,3*dt),Pe.lineTo(-dt,dt),Pe.lineTo(-3*dt,dt),Pe.closePath()}},oe=Math.sqrt(1/3),le=2*oe,de={draw:function(Pe,et){var dt=Math.sqrt(et/le),xt=dt*oe;Pe.moveTo(0,-dt),Pe.lineTo(xt,0),Pe.lineTo(0,dt),Pe.lineTo(-xt,0),Pe.closePath()}},fe=Math.sin(s/10)/Math.sin(7*s/10),be=Math.sin(f/10)*fe,he=-Math.cos(f/10)*fe,_e={draw:function(Pe,et){var dt=Math.sqrt(.8908130915292852*et),xt=be*dt,Rt=he*dt;Pe.moveTo(0,-dt),Pe.lineTo(xt,Rt);for(var Yt=1;Yt<5;++Yt){var nn=f*Yt/5,Kt=Math.cos(nn),Mn=Math.sin(nn);Pe.lineTo(Mn*dt,-Kt*dt),Pe.lineTo(Kt*xt-Mn*Rt,Mn*xt+Kt*Rt)}Pe.closePath()}},Ce={draw:function(Pe,et){var dt=Math.sqrt(et),xt=-dt/2;Pe.rect(xt,xt,dt,dt)}},Ee=Math.sqrt(3),Ae={draw:function(Pe,et){var dt=-Math.sqrt(et/(3*Ee));Pe.moveTo(0,2*dt),Pe.lineTo(-Ee*dt,-dt),Pe.lineTo(Ee*dt,-dt),Pe.closePath()}},ze=-.5,ve=Math.sqrt(3)/2,Te=1/Math.sqrt(12),Ie=3*(Te/2+1),De={draw:function(Pe,et){var dt=Math.sqrt(et/Ie),xt=dt/2,Rt=dt*Te,Yt=xt,nn=dt*Te+dt,Kt=-Yt,Mn=nn;Pe.moveTo(xt,Rt),Pe.lineTo(Yt,nn),Pe.lineTo(Kt,Mn),Pe.lineTo(ze*xt-ve*Rt,ve*xt+ze*Rt),Pe.lineTo(ze*Yt-ve*nn,ve*Yt+ze*nn),Pe.lineTo(ze*Kt-ve*Mn,ve*Kt+ze*Mn),Pe.lineTo(ze*xt+ve*Rt,ze*Rt-ve*xt),Pe.lineTo(ze*Yt+ve*nn,ze*nn-ve*Yt),Pe.lineTo(ze*Kt+ve*Mn,ze*Mn-ve*Kt),Pe.closePath()}},Fe=[ee,Q,de,Ce,_e,Ae,De];function Ue(){}function qe(Pe,et,dt){Pe._context.bezierCurveTo((2*Pe._x0+Pe._x1)/3,(2*Pe._y0+Pe._y1)/3,(Pe._x0+2*Pe._x1)/3,(Pe._y0+2*Pe._y1)/3,(Pe._x0+4*Pe._x1+et)/6,(Pe._y0+4*Pe._y1+dt)/6)}function je(Pe){this._context=Pe}function rt(Pe){this._context=Pe}function Ne(Pe){this._context=Pe}function Be(Pe,et){this._basis=new je(Pe),this._beta=et}je.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Pe,et):this._context.moveTo(Pe,et);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qe(this,Pe,et)}this._x0=this._x1,this._x1=Pe,this._y0=this._y1,this._y1=et}},rt.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1,this._x2=Pe,this._y2=et;break;case 1:this._point=2,this._x3=Pe,this._y3=et;break;case 2:this._point=3,this._x4=Pe,this._y4=et,this._context.moveTo((this._x0+4*this._x1+Pe)/6,(this._y0+4*this._y1+et)/6);break;default:qe(this,Pe,et)}this._x0=this._x1,this._x1=Pe,this._y0=this._y1,this._y1=et}},Ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var dt=(this._x0+4*this._x1+Pe)/6,xt=(this._y0+4*this._y1+et)/6;this._line?this._context.lineTo(dt,xt):this._context.moveTo(dt,xt);break;case 3:this._point=4;default:qe(this,Pe,et)}this._x0=this._x1,this._x1=Pe,this._y0=this._y1,this._y1=et}},Be.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Pe=this._x,et=this._y,dt=Pe.length-1;if(dt>0)for(var xt,Rt=Pe[0],Yt=et[0],nn=Pe[dt]-Rt,Kt=et[dt]-Yt,Mn=-1;++Mn<=dt;)this._basis.point(this._beta*Pe[Mn]+(1-this._beta)*(Rt+(xt=Mn/dt)*nn),this._beta*et[Mn]+(1-this._beta)*(Yt+xt*Kt));this._x=this._y=null,this._basis.lineEnd()},point:function(Pe,et){this._x.push(+Pe),this._y.push(+et)}};var We=function Pe(et){function dt(xt){return 1===et?new je(xt):new Be(xt,et)}return dt.beta=function(xt){return Pe(+xt)},dt}(.85);function Ye(Pe,et,dt){Pe._context.bezierCurveTo(Pe._x1+Pe._k*(Pe._x2-Pe._x0),Pe._y1+Pe._k*(Pe._y2-Pe._y0),Pe._x2+Pe._k*(Pe._x1-et),Pe._y2+Pe._k*(Pe._y1-dt),Pe._x2,Pe._y2)}function lt(Pe,et){this._context=Pe,this._k=(1-et)/6}lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ye(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Pe,et):this._context.moveTo(Pe,et);break;case 1:this._point=2,this._x1=Pe,this._y1=et;break;case 2:this._point=3;default:Ye(this,Pe,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Pe,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var mt=function Pe(et){function dt(xt){return new lt(xt,et)}return dt.tension=function(xt){return Pe(+xt)},dt}(0);function Tt(Pe,et){this._context=Pe,this._k=(1-et)/6}Tt.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1,this._x3=Pe,this._y3=et;break;case 1:this._point=2,this._context.moveTo(this._x4=Pe,this._y4=et);break;case 2:this._point=3,this._x5=Pe,this._y5=et;break;default:Ye(this,Pe,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Pe,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var It=function Pe(et){function dt(xt){return new Tt(xt,et)}return dt.tension=function(xt){return Pe(+xt)},dt}(0);function Ct(Pe,et){this._context=Pe,this._k=(1-et)/6}Ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,Pe,et)}this._x0=this._x1,this._x1=this._x2,this._x2=Pe,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var ct=function Pe(et){function dt(xt){return new Ct(xt,et)}return dt.tension=function(xt){return Pe(+xt)},dt}(0);function at(Pe,et,dt){var xt=Pe._x1,Rt=Pe._y1,Yt=Pe._x2,nn=Pe._y2;if(Pe._l01_a>1e-12){var Kt=2*Pe._l01_2a+3*Pe._l01_a*Pe._l12_a+Pe._l12_2a,Mn=3*Pe._l01_a*(Pe._l01_a+Pe._l12_a);xt=(xt*Kt-Pe._x0*Pe._l12_2a+Pe._x2*Pe._l01_2a)/Mn,Rt=(Rt*Kt-Pe._y0*Pe._l12_2a+Pe._y2*Pe._l01_2a)/Mn}if(Pe._l23_a>1e-12){var Un=2*Pe._l23_2a+3*Pe._l23_a*Pe._l12_a+Pe._l12_2a,Tn=3*Pe._l23_a*(Pe._l23_a+Pe._l12_a);Yt=(Yt*Un+Pe._x1*Pe._l23_2a-et*Pe._l12_2a)/Tn,nn=(nn*Un+Pe._y1*Pe._l23_2a-dt*Pe._l12_2a)/Tn}Pe._context.bezierCurveTo(xt,Rt,Yt,nn,Pe._x2,Pe._y2)}function St(Pe,et){this._context=Pe,this._alpha=et}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){if(Pe=+Pe,et=+et,this._point){var dt=this._x2-Pe,xt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+xt*xt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Pe,et):this._context.moveTo(Pe,et);break;case 1:this._point=2;break;case 2:this._point=3;default:at(this,Pe,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Pe,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var Xt=function Pe(et){function dt(xt){return et?new St(xt,et):new lt(xt,0)}return dt.alpha=function(xt){return Pe(+xt)},dt}(.5);function tn(Pe,et){this._context=Pe,this._alpha=et}tn.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Pe,et){if(Pe=+Pe,et=+et,this._point){var dt=this._x2-Pe,xt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+xt*xt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Pe,this._y3=et;break;case 1:this._point=2,this._context.moveTo(this._x4=Pe,this._y4=et);break;case 2:this._point=3,this._x5=Pe,this._y5=et;break;default:at(this,Pe,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Pe,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var hn=function Pe(et){function dt(xt){return et?new tn(xt,et):new Tt(xt,0)}return dt.alpha=function(xt){return Pe(+xt)},dt}(.5);function cn(Pe,et){this._context=Pe,this._alpha=et}cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){if(Pe=+Pe,et=+et,this._point){var dt=this._x2-Pe,xt=this._y2-et;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+xt*xt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:at(this,Pe,et)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Pe,this._y0=this._y1,this._y1=this._y2,this._y2=et}};var yn=function Pe(et){function dt(xt){return et?new cn(xt,et):new Ct(xt,0)}return dt.alpha=function(xt){return Pe(+xt)},dt}(.5);function en(Pe){this._context=Pe}function Xe(Pe){return Pe<0?-1:1}function tt(Pe,et,dt){var xt=Pe._x1-Pe._x0,Rt=et-Pe._x1,Yt=(Pe._y1-Pe._y0)/(xt||Rt<0&&-0),nn=(dt-Pe._y1)/(Rt||xt<0&&-0),Kt=(Yt*Rt+nn*xt)/(xt+Rt);return(Xe(Yt)+Xe(nn))*Math.min(Math.abs(Yt),Math.abs(nn),.5*Math.abs(Kt))||0}function ye(Pe,et){var dt=Pe._x1-Pe._x0;return dt?(3*(Pe._y1-Pe._y0)/dt-et)/2:et}function ke(Pe,et,dt){var xt=Pe._x0,Yt=Pe._x1,nn=Pe._y1,Kt=(Yt-xt)/3;Pe._context.bezierCurveTo(xt+Kt,Pe._y0+Kt*et,Yt-Kt,nn-Kt*dt,Yt,nn)}function Ve(Pe){this._context=Pe}function Je(Pe){this._context=new nt(Pe)}function nt(Pe){this._context=Pe}function Ke(Pe){this._context=Pe}function vt(Pe){var et,dt,xt=Pe.length-1,Rt=new Array(xt),Yt=new Array(xt),nn=new Array(xt);for(Rt[0]=0,Yt[0]=2,nn[0]=Pe[0]+2*Pe[1],et=1;et<xt-1;++et)Rt[et]=1,Yt[et]=4,nn[et]=4*Pe[et]+2*Pe[et+1];for(Rt[xt-1]=2,Yt[xt-1]=7,nn[xt-1]=8*Pe[xt-1]+Pe[xt],et=1;et<xt;++et)Yt[et]-=dt=Rt[et]/Yt[et-1],nn[et]-=dt*nn[et-1];for(Rt[xt-1]=nn[xt-1]/Yt[xt-1],et=xt-2;et>=0;--et)Rt[et]=(nn[et]-Rt[et+1])/Yt[et];for(Yt[xt-1]=(Pe[xt]+Rt[xt-1])/2,et=0;et<xt-1;++et)Yt[et]=2*Pe[et+1]-Rt[et+1];return[Rt,Yt]}function gt(Pe,et){this._context=Pe,this._t=et}function Ot(Pe,et){if((Rt=Pe.length)>1)for(var dt,xt,Rt,Yt=1,nn=Pe[et[0]],Kt=nn.length;Yt<Rt;++Yt)for(xt=nn,nn=Pe[et[Yt]],dt=0;dt<Kt;++dt)nn[dt][1]+=nn[dt][0]=isNaN(xt[dt][1])?xt[dt][0]:xt[dt][1]}function Vt(Pe){for(var et=Pe.length,dt=new Array(et);--et>=0;)dt[et]=et;return dt}function ft(Pe,et){return Pe[et]}function bt(Pe){var et=Pe.map(Wt);return Vt(Pe).sort(function(dt,xt){return et[dt]-et[xt]})}function Wt(Pe){for(var et,dt=-1,xt=0,Rt=Pe.length,Yt=-1/0;++dt<Rt;)(et=+Pe[dt][1])>Yt&&(Yt=et,xt=dt);return xt}function Pt(Pe){var et=Pe.map(Bt);return Vt(Pe).sort(function(dt,xt){return et[dt]-et[xt]})}function Bt(Pe){for(var et,dt=0,xt=-1,Rt=Pe.length;++xt<Rt;)(et=+Pe[xt][1])&&(dt+=et);return dt}en.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Pe,et){Pe=+Pe,et=+et,this._point?this._context.lineTo(Pe,et):(this._point=1,this._context.moveTo(Pe,et))}},Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ke(this,this._t0,ye(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Pe,et){var dt=NaN;if(et=+et,(Pe=+Pe)!==this._x1||et!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Pe,et):this._context.moveTo(Pe,et);break;case 1:this._point=2;break;case 2:this._point=3,ke(this,ye(this,dt=tt(this,Pe,et)),dt);break;default:ke(this,this._t0,dt=tt(this,Pe,et))}this._x0=this._x1,this._x1=Pe,this._y0=this._y1,this._y1=et,this._t0=dt}}},(Je.prototype=Object.create(Ve.prototype)).point=function(Pe,et){Ve.prototype.point.call(this,et,Pe)},nt.prototype={moveTo:function(Pe,et){this._context.moveTo(et,Pe)},closePath:function(){this._context.closePath()},lineTo:function(Pe,et){this._context.lineTo(et,Pe)},bezierCurveTo:function(Pe,et,dt,xt,Rt,Yt){this._context.bezierCurveTo(et,Pe,xt,dt,Yt,Rt)}},Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Pe=this._x,et=this._y,dt=Pe.length;if(dt)if(this._line?this._context.lineTo(Pe[0],et[0]):this._context.moveTo(Pe[0],et[0]),2===dt)this._context.lineTo(Pe[1],et[1]);else for(var xt=vt(Pe),Rt=vt(et),Yt=0,nn=1;nn<dt;++Yt,++nn)this._context.bezierCurveTo(xt[0][Yt],Rt[0][Yt],xt[1][Yt],Rt[1][Yt],Pe[nn],et[nn]);(this._line||0!==this._line&&1===dt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Pe,et){this._x.push(+Pe),this._y.push(+et)}},gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Pe,et){switch(Pe=+Pe,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(Pe,et):this._context.moveTo(Pe,et);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,et),this._context.lineTo(Pe,et);else{var dt=this._x*(1-this._t)+Pe*this._t;this._context.lineTo(dt,this._y),this._context.lineTo(dt,et)}}this._x=Pe,this._y=et}},g.arc=function(){var Pe=h,et=d,dt=b(0),xt=null,Rt=o,Yt=x,nn=u,Kt=null;function Mn(){var Un,Tn,un=+Pe.apply(this,arguments),an=+et.apply(this,arguments),fn=Rt.apply(this,arguments)-i,pn=Yt.apply(this,arguments)-i,Sn=y(pn-fn),Nn=pn>fn;if(Kt||(Kt=Un=m.path()),an<un&&(Tn=an,an=un,un=Tn),an>1e-12)if(Sn>f-1e-12)Kt.moveTo(an*r(fn),an*t(fn)),Kt.arc(0,0,an,fn,pn,!Nn),un>1e-12&&(Kt.moveTo(un*r(pn),un*t(pn)),Kt.arc(0,0,un,pn,fn,Nn));else{var Kn,Bn,cr=fn,Lr=pn,Qn=fn,qr=pn,sr=Sn,hr=Sn,jr=nn.apply(this,arguments)/2,di=jr>1e-12&&(xt?+xt.apply(this,arguments):p(un*un+an*an)),Jn=a(y(an-un)/2,+dt.apply(this,arguments)),Ar=Jn,mr=Jn;if(di>1e-12){var lr=l(di/un*t(jr)),ri=l(di/an*t(jr));(sr-=2*lr)>1e-12?(Qn+=lr*=Nn?1:-1,qr-=lr):(sr=0,Qn=qr=(fn+pn)/2),(hr-=2*ri)>1e-12?(cr+=ri*=Nn?1:-1,Lr-=ri):(hr=0,cr=Lr=(fn+pn)/2)}var si=an*r(cr),Tr=an*t(cr),Zr=un*r(qr),Ii=un*t(qr);if(Jn>1e-12){var dn,Cn=an*r(Lr),jt=an*t(Lr),bn=un*r(Qn),An=un*t(Qn);if(Sn<s&&(dn=T(si,Tr,bn,An,Cn,jt,Zr,Ii))){var $n=si-dn[0],Gn=Tr-dn[1],zn=Cn-dn[0],Hn=jt-dn[1],Ln=1/t(c(($n*zn+Gn*Hn)/(p($n*$n+Gn*Gn)*p(zn*zn+Hn*Hn)))/2),On=p(dn[0]*dn[0]+dn[1]*dn[1]);Ar=a(Jn,(un-On)/(Ln-1)),mr=a(Jn,(an-On)/(Ln+1))}}hr>1e-12?mr>1e-12?(Kn=_(bn,An,si,Tr,an,mr,Nn),Bn=_(Cn,jt,Zr,Ii,an,mr,Nn),Kt.moveTo(Kn.cx+Kn.x01,Kn.cy+Kn.y01),mr<Jn?Kt.arc(Kn.cx,Kn.cy,mr,e(Kn.y01,Kn.x01),e(Bn.y01,Bn.x01),!Nn):(Kt.arc(Kn.cx,Kn.cy,mr,e(Kn.y01,Kn.x01),e(Kn.y11,Kn.x11),!Nn),Kt.arc(0,0,an,e(Kn.cy+Kn.y11,Kn.cx+Kn.x11),e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),!Nn),Kt.arc(Bn.cx,Bn.cy,mr,e(Bn.y11,Bn.x11),e(Bn.y01,Bn.x01),!Nn))):(Kt.moveTo(si,Tr),Kt.arc(0,0,an,cr,Lr,!Nn)):Kt.moveTo(si,Tr),un>1e-12&&sr>1e-12?Ar>1e-12?(Kn=_(Zr,Ii,Cn,jt,un,-Ar,Nn),Bn=_(si,Tr,bn,An,un,-Ar,Nn),Kt.lineTo(Kn.cx+Kn.x01,Kn.cy+Kn.y01),Ar<Jn?Kt.arc(Kn.cx,Kn.cy,Ar,e(Kn.y01,Kn.x01),e(Bn.y01,Bn.x01),!Nn):(Kt.arc(Kn.cx,Kn.cy,Ar,e(Kn.y01,Kn.x01),e(Kn.y11,Kn.x11),!Nn),Kt.arc(0,0,un,e(Kn.cy+Kn.y11,Kn.cx+Kn.x11),e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),Nn),Kt.arc(Bn.cx,Bn.cy,Ar,e(Bn.y11,Bn.x11),e(Bn.y01,Bn.x01),!Nn))):Kt.arc(0,0,un,qr,Qn,Nn):Kt.lineTo(Zr,Ii)}else Kt.moveTo(0,0);if(Kt.closePath(),Un)return Kt=null,Un+""||null}return Mn.centroid=function(){var Un=(+Pe.apply(this,arguments)+ +et.apply(this,arguments))/2,Tn=(+Rt.apply(this,arguments)+ +Yt.apply(this,arguments))/2-s/2;return[r(Tn)*Un,t(Tn)*Un]},Mn.innerRadius=function(Un){return arguments.length?(Pe="function"==typeof Un?Un:b(+Un),Mn):Pe},Mn.outerRadius=function(Un){return arguments.length?(et="function"==typeof Un?Un:b(+Un),Mn):et},Mn.cornerRadius=function(Un){return arguments.length?(dt="function"==typeof Un?Un:b(+Un),Mn):dt},Mn.padRadius=function(Un){return arguments.length?(xt=null==Un?null:"function"==typeof Un?Un:b(+Un),Mn):xt},Mn.startAngle=function(Un){return arguments.length?(Rt="function"==typeof Un?Un:b(+Un),Mn):Rt},Mn.endAngle=function(Un){return arguments.length?(Yt="function"==typeof Un?Un:b(+Un),Mn):Yt},Mn.padAngle=function(Un){return arguments.length?(nn="function"==typeof Un?Un:b(+Un),Mn):nn},Mn.context=function(Un){return arguments.length?(Kt=Un??null,Mn):Kt},Mn},g.area=O,g.areaRadial=te,g.curveBasis=function(Pe){return new je(Pe)},g.curveBasisClosed=function(Pe){return new rt(Pe)},g.curveBasisOpen=function(Pe){return new Ne(Pe)},g.curveBundle=We,g.curveCardinal=mt,g.curveCardinalClosed=It,g.curveCardinalOpen=ct,g.curveCatmullRom=Xt,g.curveCatmullRomClosed=hn,g.curveCatmullRomOpen=yn,g.curveLinear=M,g.curveLinearClosed=function(Pe){return new en(Pe)},g.curveMonotoneX=function(Pe){return new Ve(Pe)},g.curveMonotoneY=function(Pe){return new Je(Pe)},g.curveNatural=function(Pe){return new Ke(Pe)},g.curveStep=function(Pe){return new gt(Pe,.5)},g.curveStepAfter=function(Pe){return new gt(Pe,1)},g.curveStepBefore=function(Pe){return new gt(Pe,0)},g.line=R,g.lineRadial=J,g.linkHorizontal=function(){return V(q)},g.linkRadial=function(){var Pe=V(H);return Pe.angle=Pe.x,delete Pe.x,Pe.radius=Pe.y,delete Pe.y,Pe},g.linkVertical=function(){return V(ie)},g.pie=function(){var Pe=D,et=C,dt=null,xt=b(0),Rt=b(f),Yt=b(0);function nn(Kt){var Mn,Un,Tn,un,an,fn=Kt.length,pn=0,Sn=new Array(fn),Nn=new Array(fn),Kn=+xt.apply(this,arguments),Bn=Math.min(f,Math.max(-f,Rt.apply(this,arguments)-Kn)),cr=Math.min(Math.abs(Bn)/fn,Yt.apply(this,arguments)),Lr=cr*(Bn<0?-1:1);for(Mn=0;Mn<fn;++Mn)(an=Nn[Sn[Mn]=Mn]=+Pe(Kt[Mn],Mn,Kt))>0&&(pn+=an);for(null!=et?Sn.sort(function(Qn,qr){return et(Nn[Qn],Nn[qr])}):null!=dt&&Sn.sort(function(Qn,qr){return dt(Kt[Qn],Kt[qr])}),Mn=0,Tn=pn?(Bn-fn*Lr)/pn:0;Mn<fn;++Mn,Kn=un)un=Kn+((an=Nn[Un=Sn[Mn]])>0?an*Tn:0)+Lr,Nn[Un]={data:Kt[Un],index:Mn,value:an,startAngle:Kn,endAngle:un,padAngle:cr};return Nn}return nn.value=function(Kt){return arguments.length?(Pe="function"==typeof Kt?Kt:b(+Kt),nn):Pe},nn.sortValues=function(Kt){return arguments.length?(et=Kt,dt=null,nn):et},nn.sort=function(Kt){return arguments.length?(dt=Kt,et=null,nn):dt},nn.startAngle=function(Kt){return arguments.length?(xt="function"==typeof Kt?Kt:b(+Kt),nn):xt},nn.endAngle=function(Kt){return arguments.length?(Rt="function"==typeof Kt?Kt:b(+Kt),nn):Rt},nn.padAngle=function(Kt){return arguments.length?(Yt="function"==typeof Kt?Kt:b(+Kt),nn):Yt},nn},g.pointRadial=X,g.radialArea=te,g.radialLine=J,g.stack=function(){var Pe=b([]),et=Vt,dt=Ot,xt=ft;function Rt(Yt){var nn,Kt,Mn=Pe.apply(this,arguments),Un=Yt.length,Tn=Mn.length,un=new Array(Tn);for(nn=0;nn<Tn;++nn){for(var an,fn=Mn[nn],pn=un[nn]=new Array(Un),Sn=0;Sn<Un;++Sn)pn[Sn]=an=[0,+xt(Yt[Sn],fn,Sn,Yt)],an.data=Yt[Sn];pn.key=fn}for(nn=0,Kt=et(un);nn<Tn;++nn)un[Kt[nn]].index=nn;return dt(un,Kt),un}return Rt.keys=function(Yt){return arguments.length?(Pe="function"==typeof Yt?Yt:b(K.call(Yt)),Rt):Pe},Rt.value=function(Yt){return arguments.length?(xt="function"==typeof Yt?Yt:b(+Yt),Rt):xt},Rt.order=function(Yt){return arguments.length?(et=null==Yt?Vt:"function"==typeof Yt?Yt:b(K.call(Yt)),Rt):et},Rt.offset=function(Yt){return arguments.length?(dt=Yt??Ot,Rt):dt},Rt},g.stackOffsetDiverging=function(Pe,et){if((Kt=Pe.length)>0)for(var dt,xt,Rt,Yt,nn,Kt,Mn=0,Un=Pe[et[0]].length;Mn<Un;++Mn)for(Yt=nn=0,dt=0;dt<Kt;++dt)(Rt=(xt=Pe[et[dt]][Mn])[1]-xt[0])>0?(xt[0]=Yt,xt[1]=Yt+=Rt):Rt<0?(xt[1]=nn,xt[0]=nn+=Rt):(xt[0]=0,xt[1]=Rt)},g.stackOffsetExpand=function(Pe,et){if((xt=Pe.length)>0){for(var dt,xt,Rt,Yt=0,nn=Pe[0].length;Yt<nn;++Yt){for(Rt=dt=0;dt<xt;++dt)Rt+=Pe[dt][Yt][1]||0;if(Rt)for(dt=0;dt<xt;++dt)Pe[dt][Yt][1]/=Rt}Ot(Pe,et)}},g.stackOffsetNone=Ot,g.stackOffsetSilhouette=function(Pe,et){if((dt=Pe.length)>0){for(var dt,xt=0,Rt=Pe[et[0]],Yt=Rt.length;xt<Yt;++xt){for(var nn=0,Kt=0;nn<dt;++nn)Kt+=Pe[nn][xt][1]||0;Rt[xt][1]+=Rt[xt][0]=-Kt/2}Ot(Pe,et)}},g.stackOffsetWiggle=function(Pe,et){if((Rt=Pe.length)>0&&(xt=(dt=Pe[et[0]]).length)>0){for(var dt,xt,Rt,Yt=0,nn=1;nn<xt;++nn){for(var Kt=0,Mn=0,Un=0;Kt<Rt;++Kt){for(var Tn=Pe[et[Kt]],un=Tn[nn][1]||0,an=(un-(Tn[nn-1][1]||0))/2,fn=0;fn<Kt;++fn){var pn=Pe[et[fn]];an+=(pn[nn][1]||0)-(pn[nn-1][1]||0)}Mn+=un,Un+=an*un}dt[nn-1][1]+=dt[nn-1][0]=Yt,Mn&&(Yt-=Un/Mn)}dt[nn-1][1]+=dt[nn-1][0]=Yt,Ot(Pe,et)}},g.stackOrderAppearance=bt,g.stackOrderAscending=Pt,g.stackOrderDescending=function(Pe){return Pt(Pe).reverse()},g.stackOrderInsideOut=function(Pe){var et,dt,xt=Pe.length,Rt=Pe.map(Bt),Yt=bt(Pe),nn=0,Kt=0,Mn=[],Un=[];for(et=0;et<xt;++et)dt=Yt[et],nn<Kt?(nn+=Rt[dt],Mn.push(dt)):(Kt+=Rt[dt],Un.push(dt));return Un.reverse().concat(Mn)},g.stackOrderNone=Vt,g.stackOrderReverse=function(Pe){return Vt(Pe).reverse()},g.symbol=function(){var Pe=b(ee),et=b(64),dt=null;function xt(){var Rt;if(dt||(dt=Rt=m.path()),Pe.apply(this,arguments).draw(dt,+et.apply(this,arguments)),Rt)return dt=null,Rt+""||null}return xt.type=function(Rt){return arguments.length?(Pe="function"==typeof Rt?Rt:b(Rt),xt):Pe},xt.size=function(Rt){return arguments.length?(et="function"==typeof Rt?Rt:b(+Rt),xt):et},xt.context=function(Rt){return arguments.length?(dt=Rt??null,xt):dt},xt},g.symbolCircle=ee,g.symbolCross=Q,g.symbolDiamond=de,g.symbolSquare=Ce,g.symbolStar=_e,g.symbolTriangle=Ae,g.symbolWye=De,g.symbols=Fe,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-path")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-path":117}],120:[function(v,re,ne){var g,m;g=this,m=function(g,m){"use strict";function b(ct){if(0<=ct.y&&ct.y<100){var at=new Date(-1,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L);return at.setFullYear(ct.y),at}return new Date(ct.y,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L)}function y(ct){if(0<=ct.y&&ct.y<100){var at=new Date(Date.UTC(-1,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L));return at.setUTCFullYear(ct.y),at}return new Date(Date.UTC(ct.y,ct.m,ct.d,ct.H,ct.M,ct.S,ct.L))}function e(ct,at,St){return{y:ct,m:at,d:St,H:0,M:0,S:0,L:0}}function r(ct){var at=ct.dateTime,St=ct.date,Xt=ct.time,tn=ct.periods,hn=ct.days,cn=ct.shortDays,yn=ct.months,en=ct.shortMonths,Xe=c(tn),tt=l(tn),ye=c(hn),ke=l(hn),Ve=c(cn),Je=l(cn),nt=c(yn),Ke=l(yn),vt=c(en),gt=l(en),Ot={a:function(Bt){return cn[Bt.getDay()]},A:function(Bt){return hn[Bt.getDay()]},b:function(Bt){return en[Bt.getMonth()]},B:function(Bt){return yn[Bt.getMonth()]},c:null,d:te,e:te,f:V,H:X,I:K,j:ae,L:U,m:q,M:ie,p:function(Bt){return tn[+(Bt.getHours()>=12)]},q:function(Bt){return 1+~~(Bt.getMonth()/3)},Q:lt,s:mt,S:H,u:ee,U:Q,V:oe,w:le,W:de,x:null,X:null,y:fe,Y:be,Z:he,"%":Ye},Vt={a:function(Bt){return cn[Bt.getUTCDay()]},A:function(Bt){return hn[Bt.getUTCDay()]},b:function(Bt){return en[Bt.getUTCMonth()]},B:function(Bt){return yn[Bt.getUTCMonth()]},c:null,d:_e,e:_e,f:ve,H:Ce,I:Ee,j:Ae,L:ze,m:Te,M:Ie,p:function(Bt){return tn[+(Bt.getUTCHours()>=12)]},q:function(Bt){return 1+~~(Bt.getUTCMonth()/3)},Q:lt,s:mt,S:De,u:Fe,U:Ue,V:qe,w:je,W:rt,x:null,X:null,y:Ne,Y:Be,Z:We,"%":Ye},ft={a:function(Bt,Pe,et){var dt=Ve.exec(Pe.slice(et));return dt?(Bt.w=Je[dt[0].toLowerCase()],et+dt[0].length):-1},A:function(Bt,Pe,et){var dt=ye.exec(Pe.slice(et));return dt?(Bt.w=ke[dt[0].toLowerCase()],et+dt[0].length):-1},b:function(Bt,Pe,et){var dt=vt.exec(Pe.slice(et));return dt?(Bt.m=gt[dt[0].toLowerCase()],et+dt[0].length):-1},B:function(Bt,Pe,et){var dt=nt.exec(Pe.slice(et));return dt?(Bt.m=Ke[dt[0].toLowerCase()],et+dt[0].length):-1},c:function(Bt,Pe,et){return Pt(Bt,at,Pe,et)},d:S,e:S,f:z,H:O,I:O,j:R,L:B,m:I,M:C,p:function(Bt,Pe,et){var dt=Xe.exec(Pe.slice(et));return dt?(Bt.p=tt[dt[0].toLowerCase()],et+dt[0].length):-1},q:M,Q:G,s:J,S:D,u:d,U:o,V:x,w:h,W:u,x:function(Bt,Pe,et){return Pt(Bt,St,Pe,et)},X:function(Bt,Pe,et){return Pt(Bt,Xt,Pe,et)},y:_,Y:T,Z:w,"%":Y};function bt(Bt,Pe){return function(et){var dt,xt,Rt,Yt=[],nn=-1,Kt=0,Mn=Bt.length;for(et instanceof Date||(et=new Date(+et));++nn<Mn;)37===Bt.charCodeAt(nn)&&(Yt.push(Bt.slice(Kt,nn)),null!=(xt=a[dt=Bt.charAt(++nn)])?dt=Bt.charAt(++nn):xt="e"===dt?" ":"0",(Rt=Pe[dt])&&(dt=Rt(et,xt)),Yt.push(dt),Kt=nn+1);return Yt.push(Bt.slice(Kt,nn)),Yt.join("")}}function Wt(Bt,Pe){return function(et){var dt,xt,Rt=e(1900,void 0,1);if(Pt(Rt,Bt,et+="",0)!=et.length)return null;if("Q"in Rt)return new Date(Rt.Q);if("s"in Rt)return new Date(1e3*Rt.s+("L"in Rt?Rt.L:0));if(Pe&&!("Z"in Rt)&&(Rt.Z=0),"p"in Rt&&(Rt.H=Rt.H%12+12*Rt.p),void 0===Rt.m&&(Rt.m="q"in Rt?Rt.q:0),"V"in Rt){if(Rt.V<1||Rt.V>53)return null;"w"in Rt||(Rt.w=1),"Z"in Rt?(xt=(dt=y(e(Rt.y,0,1))).getUTCDay(),dt=xt>4||0===xt?m.utcMonday.ceil(dt):m.utcMonday(dt),dt=m.utcDay.offset(dt,7*(Rt.V-1)),Rt.y=dt.getUTCFullYear(),Rt.m=dt.getUTCMonth(),Rt.d=dt.getUTCDate()+(Rt.w+6)%7):(xt=(dt=b(e(Rt.y,0,1))).getDay(),dt=xt>4||0===xt?m.timeMonday.ceil(dt):m.timeMonday(dt),dt=m.timeDay.offset(dt,7*(Rt.V-1)),Rt.y=dt.getFullYear(),Rt.m=dt.getMonth(),Rt.d=dt.getDate()+(Rt.w+6)%7)}else("W"in Rt||"U"in Rt)&&("w"in Rt||(Rt.w="u"in Rt?Rt.u%7:"W"in Rt?1:0),xt="Z"in Rt?y(e(Rt.y,0,1)).getUTCDay():b(e(Rt.y,0,1)).getDay(),Rt.m=0,Rt.d="W"in Rt?(Rt.w+6)%7+7*Rt.W-(xt+5)%7:Rt.w+7*Rt.U-(xt+6)%7);return"Z"in Rt?(Rt.H+=Rt.Z/100|0,Rt.M+=Rt.Z%100,y(Rt)):b(Rt)}}function Pt(Bt,Pe,et,dt){for(var xt,Rt,Yt=0,nn=Pe.length,Kt=et.length;Yt<nn;){if(dt>=Kt)return-1;if(37===(xt=Pe.charCodeAt(Yt++))){if(xt=Pe.charAt(Yt++),!(Rt=ft[xt in a?Pe.charAt(Yt++):xt])||(dt=Rt(Bt,et,dt))<0)return-1}else if(xt!=et.charCodeAt(dt++))return-1}return dt}return Ot.x=bt(St,Ot),Ot.X=bt(Xt,Ot),Ot.c=bt(at,Ot),Vt.x=bt(St,Vt),Vt.X=bt(Xt,Vt),Vt.c=bt(at,Vt),{format:function(Bt){var Pe=bt(Bt+="",Ot);return Pe.toString=function(){return Bt},Pe},parse:function(Bt){var Pe=Wt(Bt+="",!1);return Pe.toString=function(){return Bt},Pe},utcFormat:function(Bt){var Pe=bt(Bt+="",Vt);return Pe.toString=function(){return Bt},Pe},utcParse:function(Bt){var Pe=Wt(Bt+="",!0);return Pe.toString=function(){return Bt},Pe}}}var n,a={"-":"",_:" ",0:"0"},t=/^\s*\d+/,p=/^%/,s=/[\\^$*+?|[\]().{}]/g;function i(ct,at,St){var Xt=ct<0?"-":"",tn=(Xt?-ct:ct)+"",hn=tn.length;return Xt+(hn<St?new Array(St-hn+1).join(at)+tn:tn)}function f(ct){return ct.replace(s,"\\$&")}function c(ct){return new RegExp("^(?:"+ct.map(f).join("|")+")","i")}function l(ct){for(var at={},St=-1,Xt=ct.length;++St<Xt;)at[ct[St].toLowerCase()]=St;return at}function h(ct,at,St){var Xt=t.exec(at.slice(St,St+1));return Xt?(ct.w=+Xt[0],St+Xt[0].length):-1}function d(ct,at,St){var Xt=t.exec(at.slice(St,St+1));return Xt?(ct.u=+Xt[0],St+Xt[0].length):-1}function o(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.U=+Xt[0],St+Xt[0].length):-1}function x(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.V=+Xt[0],St+Xt[0].length):-1}function u(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.W=+Xt[0],St+Xt[0].length):-1}function T(ct,at,St){var Xt=t.exec(at.slice(St,St+4));return Xt?(ct.y=+Xt[0],St+Xt[0].length):-1}function _(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.y=+Xt[0]+(+Xt[0]>68?1900:2e3),St+Xt[0].length):-1}function w(ct,at,St){var Xt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(at.slice(St,St+6));return Xt?(ct.Z=Xt[1]?0:-(Xt[2]+(Xt[3]||"00")),St+Xt[0].length):-1}function M(ct,at,St){var Xt=t.exec(at.slice(St,St+1));return Xt?(ct.q=3*Xt[0]-3,St+Xt[0].length):-1}function I(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.m=Xt[0]-1,St+Xt[0].length):-1}function S(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.d=+Xt[0],St+Xt[0].length):-1}function R(ct,at,St){var Xt=t.exec(at.slice(St,St+3));return Xt?(ct.m=0,ct.d=+Xt[0],St+Xt[0].length):-1}function O(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.H=+Xt[0],St+Xt[0].length):-1}function C(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.M=+Xt[0],St+Xt[0].length):-1}function D(ct,at,St){var Xt=t.exec(at.slice(St,St+2));return Xt?(ct.S=+Xt[0],St+Xt[0].length):-1}function B(ct,at,St){var Xt=t.exec(at.slice(St,St+3));return Xt?(ct.L=+Xt[0],St+Xt[0].length):-1}function z(ct,at,St){var Xt=t.exec(at.slice(St,St+6));return Xt?(ct.L=Math.floor(Xt[0]/1e3),St+Xt[0].length):-1}function Y(ct,at,St){var Xt=p.exec(at.slice(St,St+1));return Xt?St+Xt[0].length:-1}function G(ct,at,St){var Xt=t.exec(at.slice(St));return Xt?(ct.Q=+Xt[0],St+Xt[0].length):-1}function J(ct,at,St){var Xt=t.exec(at.slice(St));return Xt?(ct.s=+Xt[0],St+Xt[0].length):-1}function te(ct,at){return i(ct.getDate(),at,2)}function X(ct,at){return i(ct.getHours(),at,2)}function K(ct,at){return i(ct.getHours()%12||12,at,2)}function ae(ct,at){return i(1+m.timeDay.count(m.timeYear(ct),ct),at,3)}function U(ct,at){return i(ct.getMilliseconds(),at,3)}function V(ct,at){return U(ct,at)+"000"}function q(ct,at){return i(ct.getMonth()+1,at,2)}function ie(ct,at){return i(ct.getMinutes(),at,2)}function H(ct,at){return i(ct.getSeconds(),at,2)}function ee(ct){var at=ct.getDay();return 0===at?7:at}function Q(ct,at){return i(m.timeSunday.count(m.timeYear(ct)-1,ct),at,2)}function oe(ct,at){var St=ct.getDay();return ct=St>=4||0===St?m.timeThursday(ct):m.timeThursday.ceil(ct),i(m.timeThursday.count(m.timeYear(ct),ct)+(4===m.timeYear(ct).getDay()),at,2)}function le(ct){return ct.getDay()}function de(ct,at){return i(m.timeMonday.count(m.timeYear(ct)-1,ct),at,2)}function fe(ct,at){return i(ct.getFullYear()%100,at,2)}function be(ct,at){return i(ct.getFullYear()%1e4,at,4)}function he(ct){var at=ct.getTimezoneOffset();return(at>0?"-":(at*=-1,"+"))+i(at/60|0,"0",2)+i(at%60,"0",2)}function _e(ct,at){return i(ct.getUTCDate(),at,2)}function Ce(ct,at){return i(ct.getUTCHours(),at,2)}function Ee(ct,at){return i(ct.getUTCHours()%12||12,at,2)}function Ae(ct,at){return i(1+m.utcDay.count(m.utcYear(ct),ct),at,3)}function ze(ct,at){return i(ct.getUTCMilliseconds(),at,3)}function ve(ct,at){return ze(ct,at)+"000"}function Te(ct,at){return i(ct.getUTCMonth()+1,at,2)}function Ie(ct,at){return i(ct.getUTCMinutes(),at,2)}function De(ct,at){return i(ct.getUTCSeconds(),at,2)}function Fe(ct){var at=ct.getUTCDay();return 0===at?7:at}function Ue(ct,at){return i(m.utcSunday.count(m.utcYear(ct)-1,ct),at,2)}function qe(ct,at){var St=ct.getUTCDay();return ct=St>=4||0===St?m.utcThursday(ct):m.utcThursday.ceil(ct),i(m.utcThursday.count(m.utcYear(ct),ct)+(4===m.utcYear(ct).getUTCDay()),at,2)}function je(ct){return ct.getUTCDay()}function rt(ct,at){return i(m.utcMonday.count(m.utcYear(ct)-1,ct),at,2)}function Ne(ct,at){return i(ct.getUTCFullYear()%100,at,2)}function Be(ct,at){return i(ct.getUTCFullYear()%1e4,at,4)}function We(){return"+0000"}function Ye(){return"%"}function lt(ct){return+ct}function mt(ct){return Math.floor(+ct/1e3)}function Tt(ct){return n=r(ct),g.timeFormat=n.format,g.timeParse=n.parse,g.utcFormat=n.utcFormat,g.utcParse=n.utcParse,n}Tt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var It=Date.prototype.toISOString?function(ct){return ct.toISOString()}:g.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Ct=+new Date("2000-01-01T00:00:00.000Z")?function(ct){var at=new Date(ct);return isNaN(at)?null:at}:g.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");g.isoFormat=It,g.isoParse=Ct,g.timeFormatDefaultLocale=Tt,g.timeFormatLocale=r,Object.defineProperty(g,"__esModule",{value:!0})},"object"==typeof ne&&void 0!==re?m(ne,v("d3-time")):m((g=g||self).d3=g.d3||{},g.d3)},{"d3-time":121}],121:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";var m=new Date,b=new Date;function y(Te,Ie,De,Fe){function Ue(qe){return Te(qe=0===arguments.length?new Date:new Date(+qe)),qe}return Ue.floor=function(qe){return Te(qe=new Date(+qe)),qe},Ue.ceil=function(qe){return Te(qe=new Date(qe-1)),Ie(qe,1),Te(qe),qe},Ue.round=function(qe){var je=Ue(qe),rt=Ue.ceil(qe);return qe-je<rt-qe?je:rt},Ue.offset=function(qe,je){return Ie(qe=new Date(+qe),null==je?1:Math.floor(je)),qe},Ue.range=function(qe,je,rt){var Ne,Be=[];if(qe=Ue.ceil(qe),rt=null==rt?1:Math.floor(rt),!(qe<je&&rt>0))return Be;do{Be.push(Ne=new Date(+qe)),Ie(qe,rt),Te(qe)}while(Ne<qe&&qe<je);return Be},Ue.filter=function(qe){return y(function(je){if(je>=je)for(;Te(je),!qe(je);)je.setTime(je-1)},function(je,rt){if(je>=je)if(rt<0)for(;++rt<=0;)for(;Ie(je,-1),!qe(je););else for(;--rt>=0;)for(;Ie(je,1),!qe(je););})},De&&(Ue.count=function(qe,je){return m.setTime(+qe),b.setTime(+je),Te(m),Te(b),Math.floor(De(m,b))},Ue.every=function(qe){return qe=Math.floor(qe),isFinite(qe)&&qe>0?qe>1?Ue.filter(Fe?function(je){return Fe(je)%qe==0}:function(je){return Ue.count(0,je)%qe==0}):Ue:null}),Ue}var e=y(function(){},function(Te,Ie){Te.setTime(+Te+Ie)},function(Te,Ie){return Ie-Te});e.every=function(Te){return Te=Math.floor(Te),isFinite(Te)&&Te>0?Te>1?y(function(Ie){Ie.setTime(Math.floor(Ie/Te)*Te)},function(Ie,De){Ie.setTime(+Ie+De*Te)},function(Ie,De){return(De-Ie)/Te}):e:null};var r=e.range,n=y(function(Te){Te.setTime(Te-Te.getMilliseconds())},function(Te,Ie){Te.setTime(+Te+1e3*Ie)},function(Te,Ie){return(Ie-Te)/1e3},function(Te){return Te.getUTCSeconds()}),a=n.range,t=y(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds())},function(Te,Ie){Te.setTime(+Te+6e4*Ie)},function(Te,Ie){return(Ie-Te)/6e4},function(Te){return Te.getMinutes()}),p=t.range,s=y(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds()-6e4*Te.getMinutes())},function(Te,Ie){Te.setTime(+Te+36e5*Ie)},function(Te,Ie){return(Ie-Te)/36e5},function(Te){return Te.getHours()}),i=s.range,f=y(function(Te){Te.setHours(0,0,0,0)},function(Te,Ie){Te.setDate(Te.getDate()+Ie)},function(Te,Ie){return(Ie-Te-6e4*(Ie.getTimezoneOffset()-Te.getTimezoneOffset()))/864e5},function(Te){return Te.getDate()-1}),c=f.range;function l(Te){return y(function(Ie){Ie.setDate(Ie.getDate()-(Ie.getDay()+7-Te)%7),Ie.setHours(0,0,0,0)},function(Ie,De){Ie.setDate(Ie.getDate()+7*De)},function(Ie,De){return(De-Ie-6e4*(De.getTimezoneOffset()-Ie.getTimezoneOffset()))/6048e5})}var h=l(0),d=l(1),o=l(2),x=l(3),u=l(4),T=l(5),_=l(6),w=h.range,M=d.range,I=o.range,S=x.range,R=u.range,O=T.range,C=_.range,D=y(function(Te){Te.setDate(1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setMonth(Te.getMonth()+Ie)},function(Te,Ie){return Ie.getMonth()-Te.getMonth()+12*(Ie.getFullYear()-Te.getFullYear())},function(Te){return Te.getMonth()}),B=D.range,z=y(function(Te){Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Ie){Te.setFullYear(Te.getFullYear()+Ie)},function(Te,Ie){return Ie.getFullYear()-Te.getFullYear()},function(Te){return Te.getFullYear()});z.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?y(function(Ie){Ie.setFullYear(Math.floor(Ie.getFullYear()/Te)*Te),Ie.setMonth(0,1),Ie.setHours(0,0,0,0)},function(Ie,De){Ie.setFullYear(Ie.getFullYear()+De*Te)}):null};var Y=z.range,G=y(function(Te){Te.setUTCSeconds(0,0)},function(Te,Ie){Te.setTime(+Te+6e4*Ie)},function(Te,Ie){return(Ie-Te)/6e4},function(Te){return Te.getUTCMinutes()}),J=G.range,te=y(function(Te){Te.setUTCMinutes(0,0,0)},function(Te,Ie){Te.setTime(+Te+36e5*Ie)},function(Te,Ie){return(Ie-Te)/36e5},function(Te){return Te.getUTCHours()}),X=te.range,K=y(function(Te){Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCDate(Te.getUTCDate()+Ie)},function(Te,Ie){return(Ie-Te)/864e5},function(Te){return Te.getUTCDate()-1}),ae=K.range;function U(Te){return y(function(Ie){Ie.setUTCDate(Ie.getUTCDate()-(Ie.getUTCDay()+7-Te)%7),Ie.setUTCHours(0,0,0,0)},function(Ie,De){Ie.setUTCDate(Ie.getUTCDate()+7*De)},function(Ie,De){return(De-Ie)/6048e5})}var V=U(0),q=U(1),ie=U(2),H=U(3),ee=U(4),Q=U(5),oe=U(6),le=V.range,de=q.range,fe=ie.range,be=H.range,he=ee.range,_e=Q.range,Ce=oe.range,Ee=y(function(Te){Te.setUTCDate(1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCMonth(Te.getUTCMonth()+Ie)},function(Te,Ie){return Ie.getUTCMonth()-Te.getUTCMonth()+12*(Ie.getUTCFullYear()-Te.getUTCFullYear())},function(Te){return Te.getUTCMonth()}),Ae=Ee.range,ze=y(function(Te){Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Ie){Te.setUTCFullYear(Te.getUTCFullYear()+Ie)},function(Te,Ie){return Ie.getUTCFullYear()-Te.getUTCFullYear()},function(Te){return Te.getUTCFullYear()});ze.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?y(function(Ie){Ie.setUTCFullYear(Math.floor(Ie.getUTCFullYear()/Te)*Te),Ie.setUTCMonth(0,1),Ie.setUTCHours(0,0,0,0)},function(Ie,De){Ie.setUTCFullYear(Ie.getUTCFullYear()+De*Te)}):null};var ve=ze.range;g.timeDay=f,g.timeDays=c,g.timeFriday=T,g.timeFridays=O,g.timeHour=s,g.timeHours=i,g.timeInterval=y,g.timeMillisecond=e,g.timeMilliseconds=r,g.timeMinute=t,g.timeMinutes=p,g.timeMonday=d,g.timeMondays=M,g.timeMonth=D,g.timeMonths=B,g.timeSaturday=_,g.timeSaturdays=C,g.timeSecond=n,g.timeSeconds=a,g.timeSunday=h,g.timeSundays=w,g.timeThursday=u,g.timeThursdays=R,g.timeTuesday=o,g.timeTuesdays=I,g.timeWednesday=x,g.timeWednesdays=S,g.timeWeek=h,g.timeWeeks=w,g.timeYear=z,g.timeYears=Y,g.utcDay=K,g.utcDays=ae,g.utcFriday=Q,g.utcFridays=_e,g.utcHour=te,g.utcHours=X,g.utcMillisecond=e,g.utcMilliseconds=r,g.utcMinute=G,g.utcMinutes=J,g.utcMonday=q,g.utcMondays=de,g.utcMonth=Ee,g.utcMonths=Ae,g.utcSaturday=oe,g.utcSaturdays=Ce,g.utcSecond=n,g.utcSeconds=a,g.utcSunday=V,g.utcSundays=le,g.utcThursday=ee,g.utcThursdays=he,g.utcTuesday=ie,g.utcTuesdays=fe,g.utcWednesday=H,g.utcWednesdays=be,g.utcWeek=V,g.utcWeeks=le,g.utcYear=ze,g.utcYears=ve,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).d3=g.d3||{})},{}],122:[function(v,re,ne){arguments[4][121][0].apply(ne,arguments)},{dup:121}],123:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";var m,b,y=0,e=0,r=0,n=0,a=0,t=0,p="object"==typeof performance&&performance.now?performance:Date,s="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(u){setTimeout(u,17)};function i(){return a||(s(f),a=p.now()+t)}function f(){a=0}function c(){this._call=this._time=this._next=null}function l(u,T,_){var w=new c;return w.restart(u,T,_),w}function h(){i(),++y;for(var u,T=m;T;)(u=a-T._time)>=0&&T._call.call(null,u),T=T._next;--y}function d(){a=(n=p.now())+t,y=e=0;try{h()}finally{y=0,function(){for(var u,T,_=m,w=1/0;_;)_._call?(w>_._time&&(w=_._time),u=_,_=_._next):(T=_._next,_._next=null,_=u?u._next=T:m=T);b=u,x(w)}(),a=0}}function o(){var u=p.now(),T=u-n;T>1e3&&(t-=T,n=u)}function x(u){y||(e&&(e=clearTimeout(e)),u-a>24?(u<1/0&&(e=setTimeout(d,u-p.now()-t)),r&&(r=clearInterval(r))):(r||(n=p.now(),r=setInterval(o,1e3)),y=1,s(d)))}c.prototype=l.prototype={constructor:c,restart:function(u,T,_){if("function"!=typeof u)throw new TypeError("callback is not a function");_=(null==_?i():+_)+(null==T?0:+T),this._next||b===this||(b?b._next=this:m=this,b=this),this._call=u,this._time=_,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}},g.interval=function(u,T,_){var w=new c,M=T;return null==T?(w.restart(u,T,_),w):(T=+T,_=null==_?i():+_,w.restart(function I(S){S+=M,w.restart(I,M+=T,_),u(S)},T,_),w)},g.now=i,g.timeout=function(u,T,_){var w=new c;return w.restart(function(M){w.stop(),u(M+T)},T=null==T?0:+T,_),w},g.timer=l,g.timerFlush=h,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).d3=g.d3||{})},{}],124:[function(v,re,ne){re.exports=function(){for(var g=0;g<arguments.length;g++)if(void 0!==arguments[g])return arguments[g]}},{}],125:[function(v,re,ne){"use strict";re.exports=b;var g=(b.canvas=document.createElement("canvas")).getContext("2d"),m=y([32,126]);function b(e,r){Array.isArray(e)&&(e=e.join(", "));var n,a={},t=16,p=.05;r&&(2===r.length&&"number"==typeof r[0]?n=y(r):Array.isArray(r)?n=r:(r.o?n=y(r.o):r.pairs&&(n=r.pairs),r.fontSize&&(t=r.fontSize),null!=r.threshold&&(p=r.threshold))),n||(n=m),g.font=t+"px "+e;for(var s=0;s<n.length;s++){var i=n[s],f=g.measureText(i[0]).width+g.measureText(i[1]).width,c=g.measureText(i).width;Math.abs(f-c)>t*p&&(a[i]=(c-f)/t*1e3)}return a}function y(e){for(var r=[],n=e[0];n<=e[1];n++)for(var a=String.fromCharCode(n),t=e[0];t<e[1];t++){var p=a+String.fromCharCode(t);r.push(p)}return r}b.createPairs=y,b.ascii=m},{}],126:[function(v,re,ne){var g=v("abs-svg-path"),m=v("normalize-svg-path"),b={M:"moveTo",C:"bezierCurveTo"};re.exports=function(y,e){y.beginPath(),m(g(e)).forEach(function(r){var n=r[0],a=r.slice(1);y[b[n]].apply(y,a)}),y.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(v,re,ne){re.exports=function(g){switch(g){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(v,re,ne){"use strict";re.exports=function(g,m){switch(void 0===m&&(m=0),typeof g){case"number":if(g>0)return function(b,y){var e,r;for(e=new Array(b),r=0;r<b;++r)e[r]=y;return e}(0|g,m);break;case"object":if("number"==typeof g.length)return function b(y,e,r){var n=0|y[r];if(n<=0)return[];var a,t=new Array(n);if(r===y.length-1)for(a=0;a<n;++a)t[a]=e;else for(a=0;a<n;++a)t[a]=b(y,e,r+1);return t}(g,m,0)}return[]}},{}],129:[function(v,re,ne){"use strict";function g(R,O,C){C=C||2;var D,B,z,Y,G,J,te,X=O&&O.length,K=X?O[0]*C:R.length,ae=m(R,0,K,C,!0),U=[];if(!ae||ae.next===ae.prev)return U;if(X&&(ae=function(q,ie,H,ee){var Q,oe,fe,be=[];for(Q=0,oe=ie.length;Q<oe;Q++)(fe=m(q,ie[Q]*ee,Q<oe-1?ie[Q+1]*ee:q.length,ee,!1))===fe.next&&(fe.steiner=!0),be.push(f(fe));for(be.sort(t),Q=0;Q<be.length;Q++)p(be[Q],H),H=b(H,H.next);return H}(R,O,ae,C)),R.length>80*C){D=z=R[0],B=Y=R[1];for(var V=C;V<K;V+=C)(G=R[V])<D&&(D=G),(J=R[V+1])<B&&(B=J),G>z&&(z=G),J>Y&&(Y=J);te=0!==(te=Math.max(z-D,Y-B))?1/te:0}return y(ae,U,C,D,B,te),U}function m(R,O,C,D,B){var z,Y;if(B===S(R,O,C,D)>0)for(z=O;z<C;z+=D)Y=w(z,R[z],R[z+1],Y);else for(z=C-D;z>=O;z-=D)Y=w(z,R[z],R[z+1],Y);return Y&&d(Y,Y.next)&&(M(Y),Y=Y.next),Y}function b(R,O){if(!R)return R;O||(O=R);var C,D=R;do{if(C=!1,D.steiner||!d(D,D.next)&&0!==h(D.prev,D,D.next))D=D.next;else{if(M(D),(D=O=D.prev)===D.next)break;C=!0}}while(C||D!==O);return O}function y(R,O,C,D,B,z,Y){if(R){!Y&&z&&function(X,K,ae,U){var V=X;do{null===V.z&&(V.z=i(V.x,V.y,K,ae,U)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next}while(V!==X);V.prevZ.nextZ=null,V.prevZ=null,function(q){var ie,H,ee,Q,oe,le,de,fe,be=1;do{for(H=q,q=null,oe=null,le=0;H;){for(le++,ee=H,de=0,ie=0;ie<be&&(de++,ee=ee.nextZ);ie++);for(fe=be;de>0||fe>0&&ee;)0!==de&&(0===fe||!ee||H.z<=ee.z)?(Q=H,H=H.nextZ,de--):(Q=ee,ee=ee.nextZ,fe--),oe?oe.nextZ=Q:q=Q,Q.prevZ=oe,oe=Q;H=ee}oe.nextZ=null,be*=2}while(le>1)}(V)}(R,D,B,z);for(var G,J,te=R;R.prev!==R.next;)if(G=R.prev,J=R.next,z?r(R,D,B,z):e(R))O.push(G.i/C),O.push(R.i/C),O.push(J.i/C),M(R),R=J.next,te=J.next;else if((R=J)===te){Y?1===Y?y(R=n(b(R),O,C),O,C,D,B,z,2):2===Y&&a(R,O,C,D,B,z):y(b(R),O,C,D,B,z,1);break}}}function e(R){var O=R.prev,C=R,D=R.next;if(h(O,C,D)>=0)return!1;for(var B=R.next.next;B!==R.prev;){if(c(O.x,O.y,C.x,C.y,D.x,D.y,B.x,B.y)&&h(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function r(R,O,C,D){var B=R.prev,z=R,Y=R.next;if(h(B,z,Y)>=0)return!1;for(var te=B.x>z.x?B.x>Y.x?B.x:Y.x:z.x>Y.x?z.x:Y.x,X=B.y>z.y?B.y>Y.y?B.y:Y.y:z.y>Y.y?z.y:Y.y,K=i(B.x<z.x?B.x<Y.x?B.x:Y.x:z.x<Y.x?z.x:Y.x,B.y<z.y?B.y<Y.y?B.y:Y.y:z.y<Y.y?z.y:Y.y,O,C,D),ae=i(te,X,O,C,D),U=R.prevZ,V=R.nextZ;U&&U.z>=K&&V&&V.z<=ae;){if(U!==R.prev&&U!==R.next&&c(B.x,B.y,z.x,z.y,Y.x,Y.y,U.x,U.y)&&h(U.prev,U,U.next)>=0||(U=U.prevZ,V!==R.prev&&V!==R.next&&c(B.x,B.y,z.x,z.y,Y.x,Y.y,V.x,V.y)&&h(V.prev,V,V.next)>=0))return!1;V=V.nextZ}for(;U&&U.z>=K;){if(U!==R.prev&&U!==R.next&&c(B.x,B.y,z.x,z.y,Y.x,Y.y,U.x,U.y)&&h(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;V&&V.z<=ae;){if(V!==R.prev&&V!==R.next&&c(B.x,B.y,z.x,z.y,Y.x,Y.y,V.x,V.y)&&h(V.prev,V,V.next)>=0)return!1;V=V.nextZ}return!0}function n(R,O,C){var D=R;do{var B=D.prev,z=D.next.next;!d(B,z)&&o(B,D,D.next,z)&&T(B,z)&&T(z,B)&&(O.push(B.i/C),O.push(D.i/C),O.push(z.i/C),M(D),M(D.next),D=R=z),D=D.next}while(D!==R);return b(D)}function a(R,O,C,D,B,z){var Y=R;do{for(var G=Y.next.next;G!==Y.prev;){if(Y.i!==G.i&&l(Y,G)){var J=_(Y,G);return Y=b(Y,Y.next),J=b(J,J.next),y(Y,O,C,D,B,z),void y(J,O,C,D,B,z)}G=G.next}Y=Y.next}while(Y!==R)}function t(R,O){return R.x-O.x}function p(R,O){if(O=function(D,B){var z,Y=B,G=D.x,J=D.y,te=-1/0;do{if(J<=Y.y&&J>=Y.next.y&&Y.next.y!==Y.y){var X=Y.x+(J-Y.y)*(Y.next.x-Y.x)/(Y.next.y-Y.y);if(X<=G&&X>te){if(te=X,X===G){if(J===Y.y)return Y;if(J===Y.next.y)return Y.next}z=Y.x<Y.next.x?Y:Y.next}}Y=Y.next}while(Y!==B);if(!z)return null;if(G===te)return z;var K,ae=z,U=z.x,V=z.y,q=1/0;Y=z;do{G>=Y.x&&Y.x>=U&&G!==Y.x&&c(J<V?G:te,J,U,V,J<V?te:G,J,Y.x,Y.y)&&(K=Math.abs(J-Y.y)/(G-Y.x),T(Y,D)&&(K<q||K===q&&(Y.x>z.x||Y.x===z.x&&s(z,Y)))&&(z=Y,q=K)),Y=Y.next}while(Y!==ae);return z}(R,O)){var C=_(O,R);b(O,O.next),b(C,C.next)}}function s(R,O){return h(R.prev,R,O.prev)<0&&h(O.next,R,R.next)<0}function i(R,O,C,D,B){return(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-C)*B)|R<<8))|R<<4))|R<<2))|R<<1))|(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-D)*B)|O<<8))|O<<4))|O<<2))|O<<1))<<1}function f(R){var O=R,C=R;do{(O.x<C.x||O.x===C.x&&O.y<C.y)&&(C=O),O=O.next}while(O!==R);return C}function c(R,O,C,D,B,z,Y,G){return(B-Y)*(O-G)-(R-Y)*(z-G)>=0&&(R-Y)*(D-G)-(C-Y)*(O-G)>=0&&(C-Y)*(z-G)-(B-Y)*(D-G)>=0}function l(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!function(C,D){var B=C;do{if(B.i!==C.i&&B.next.i!==C.i&&B.i!==D.i&&B.next.i!==D.i&&o(B,B.next,C,D))return!0;B=B.next}while(B!==C);return!1}(R,O)&&(T(R,O)&&T(O,R)&&function(C,D){var B=C,z=!1,Y=(C.x+D.x)/2,G=(C.y+D.y)/2;do{B.y>G!=B.next.y>G&&B.next.y!==B.y&&Y<(B.next.x-B.x)*(G-B.y)/(B.next.y-B.y)+B.x&&(z=!z),B=B.next}while(B!==C);return z}(R,O)&&(h(R.prev,R,O.prev)||h(R,O.prev,O))||d(R,O)&&h(R.prev,R,R.next)>0&&h(O.prev,O,O.next)>0)}function h(R,O,C){return(O.y-R.y)*(C.x-O.x)-(O.x-R.x)*(C.y-O.y)}function d(R,O){return R.x===O.x&&R.y===O.y}function o(R,O,C,D){var B=u(h(R,O,C)),z=u(h(R,O,D)),Y=u(h(C,D,R)),G=u(h(C,D,O));return B!==z&&Y!==G||!(0!==B||!x(R,C,O))||!(0!==z||!x(R,D,O))||!(0!==Y||!x(C,R,D))||!(0!==G||!x(C,O,D))}function x(R,O,C){return O.x<=Math.max(R.x,C.x)&&O.x>=Math.min(R.x,C.x)&&O.y<=Math.max(R.y,C.y)&&O.y>=Math.min(R.y,C.y)}function u(R){return R>0?1:R<0?-1:0}function T(R,O){return h(R.prev,R,R.next)<0?h(R,O,R.next)>=0&&h(R,R.prev,O)>=0:h(R,O,R.prev)<0||h(R,R.next,O)<0}function _(R,O){var C=new I(R.i,R.x,R.y),D=new I(O.i,O.x,O.y),B=R.next,z=O.prev;return R.next=O,O.prev=R,C.next=B,B.prev=C,D.next=C,C.prev=D,z.next=D,D.prev=z,D}function w(R,O,C,D){var B=new I(R,O,C);return D?(B.next=D.next,B.prev=D,D.next.prev=B,D.next=B):(B.prev=B,B.next=B),B}function M(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,C){this.i=R,this.x=O,this.y=C,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(R,O,C,D){for(var B=0,z=O,Y=C-D;z<C;z+=D)B+=(R[Y]-R[z])*(R[z+1]+R[Y+1]),Y=z;return B}re.exports=g,re.exports.default=g,g.deviation=function(R,O,C,D){var B=O&&O.length,Y=Math.abs(S(R,0,B?O[0]*C:R.length,C));if(B)for(var G=0,J=O.length;G<J;G++)Y-=Math.abs(S(R,O[G]*C,G<J-1?O[G+1]*C:R.length,C));var K=0;for(G=0;G<D.length;G+=3){var ae=D[G]*C,U=D[G+1]*C,V=D[G+2]*C;K+=Math.abs((R[ae]-R[V])*(R[U+1]-R[ae+1])-(R[ae]-R[U])*(R[V+1]-R[ae+1]))}return 0===Y&&0===K?0:Math.abs((K-Y)/Y)},g.flatten=function(R){for(var O=R[0][0].length,C={vertices:[],holes:[],dimensions:O},D=0,B=0;B<R.length;B++){for(var z=0;z<R[B].length;z++)for(var Y=0;Y<O;Y++)C.vertices.push(R[B][z][Y]);B>0&&C.holes.push(D+=R[B-1].length)}return C}},{}],130:[function(v,re,ne){var g=v("strongly-connected-components");re.exports=function(m,b){var y,e=[],r=[],n=[],a={},t=[];function p(o){var x,u,T=!1;for(r.push(o),n[o]=!0,x=0;x<t[o].length;x++)(u=t[o][x])===y?(s(y,r),T=!0):n[u]||(T=p(u));if(T)!function w(M){n[M]=!1,a.hasOwnProperty(M)&&Object.keys(a[M]).forEach(function(I){delete a[M][I],n[I]&&w(I)})}(o);else for(x=0;x<t[o].length;x++){var _=a[u=t[o][x]];_||(a[u]=_={}),_[u]=!0}return r.pop(),T}function s(o,x){var u=[].concat(x).concat(o);b?b(p):e.push(u)}function i(o){!function(I){for(var S=0;S<m.length;S++)S<I&&(m[S]=[]),m[S]=m[S].filter(function(R){return R>=I})}(o);for(var x,u=g(m).components.filter(function(I){return I.length>1}),T=1/0,_=0;_<u.length;_++)for(var w=0;w<u[_].length;w++)u[_][w]<T&&(T=u[_][w],x=_);var M=u[x];return!!M&&{leastVertex:T,adjList:m.map(function(I,S){return-1===M.indexOf(S)?[]:I.filter(function(R){return-1!==M.indexOf(R)})})}}y=0;for(var f=m.length;y<f;){var c=i(y);if(y=c.leastVertex,t=c.adjList){for(var l=0;l<t.length;l++)for(var h=0;h<t[l].length;h++){var d=t[l][h];n[+d]=!1,a[d]={}}p(y),y+=1}else y=f}return b?void 0:e}},{"strongly-connected-components":307}],131:[function(v,re,ne){"use strict";var g=v("../../object/valid-value");re.exports=function(){return g(this).length=0,this}},{"../../object/valid-value":162}],132:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?Array.from:v("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(v,re,ne){"use strict";re.exports=function(){var g,m,b=Array.from;return"function"==typeof b&&(m=b(g=["raz","dwa"]),Boolean(m&&m!==g&&"dwa"===m[1]))}},{}],134:[function(v,re,ne){"use strict";var g=v("es6-symbol").iterator,m=v("../../function/is-arguments"),b=v("../../function/is-function"),y=v("../../number/to-pos-integer"),e=v("../../object/valid-callable"),r=v("../../object/valid-value"),n=v("../../object/is-value"),a=v("../../string/is-string"),t=Array.isArray,p=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;re.exports=function(f){var c,l,h,d,o,x,u,T,_,w,M=arguments[1],I=arguments[2];if(f=Object(r(f)),n(M)&&e(M),this&&this!==Array&&b(this))c=this;else{if(!M){if(m(f))return 1!==(o=f.length)?Array.apply(null,f):((d=new Array(1))[0]=f[0],d);if(t(f)){for(d=new Array(o=f.length),l=0;l<o;++l)d[l]=f[l];return d}}d=[]}if(!t(f))if(void 0!==(_=f[g])){for(u=e(_).call(f),c&&(d=new c),T=u.next(),l=0;!T.done;)w=M?p.call(M,I,T.value,l):T.value,c?(s.value=w,i(d,l,s)):d[l]=w,T=u.next(),++l;o=l}else if(a(f)){for(o=f.length,c&&(d=new c),l=0,h=0;l<o;++l)w=f[l],l+1<o&&(x=w.charCodeAt(0))>=55296&&x<=56319&&(w+=f[++l]),w=M?p.call(M,I,w,h):w,c?(s.value=w,i(d,h,s)):d[h]=w,++h;o=h}if(void 0===o)for(o=y(f.length),c&&(d=new c(o)),l=0;l<o;++l)w=M?p.call(M,I,f[l],l):f[l],c?(s.value=w,i(d,l,s)):d[l]=w;return c&&(s.value=null,d.length=o),d}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(v,re,ne){"use strict";var g=Object.prototype.toString,m=g.call(function(){return arguments}());re.exports=function(b){return g.call(b)===m}},{}],136:[function(v,re,ne){"use strict";var g=Object.prototype.toString,m=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);re.exports=function(b){return"function"==typeof b&&m(g.call(b))}},{}],137:[function(v,re,ne){"use strict";re.exports=function(){}},{}],138:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?Math.sign:v("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(v,re,ne){"use strict";re.exports=function(){var g=Math.sign;return"function"==typeof g&&1===g(10)&&-1===g(-20)}},{}],140:[function(v,re,ne){"use strict";re.exports=function(g){return g=Number(g),isNaN(g)||0===g?g:g>0?1:-1}},{}],141:[function(v,re,ne){"use strict";var g=v("../math/sign"),m=Math.abs,b=Math.floor;re.exports=function(y){return isNaN(y)?0:0!==(y=Number(y))&&isFinite(y)?g(y)*b(m(y)):y}},{"../math/sign":138}],142:[function(v,re,ne){"use strict";var g=v("./to-integer"),m=Math.max;re.exports=function(b){return m(0,g(b))}},{"./to-integer":141}],143:[function(v,re,ne){"use strict";var g=v("./valid-callable"),m=v("./valid-value"),b=Function.prototype.bind,y=Function.prototype.call,e=Object.keys,r=Object.prototype.propertyIsEnumerable;re.exports=function(n,a){return function(t,p){var s,i=arguments[2],f=arguments[3];return t=Object(m(t)),g(p),s=e(t),f&&s.sort("function"==typeof f?b.call(f,t):void 0),"function"!=typeof n&&(n=s[n]),y.call(n,s,function(c,l){return r.call(t,c)?y.call(p,i,t[c],c,t,l):a})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?Object.assign:v("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(v,re,ne){"use strict";re.exports=function(){var g,m=Object.assign;return"function"==typeof m&&(m(g={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),g.foo+g.bar+g.trzy==="razdwatrzy")}},{}],146:[function(v,re,ne){"use strict";var g=v("../keys"),m=v("../valid-value"),b=Math.max;re.exports=function(y,e){var r,n,a,t=b(arguments.length,2);for(y=Object(m(y)),a=function(p){try{y[p]=e[p]}catch(s){r||(r=s)}},n=1;n<t;++n)g(e=arguments[n]).forEach(a);if(void 0!==r)throw r;return y}},{"../keys":152,"../valid-value":162}],147:[function(v,re,ne){"use strict";var g=v("../array/from"),m=v("./assign"),b=v("./valid-value");re.exports=function(y){var e=Object(b(y)),r=arguments[1],n=Object(arguments[2]);if(e!==y&&!r)return e;var a={};return r?g(r,function(t){(n.ensure||t in y)&&(a[t]=y[t])}):m(a,y),a}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(v,re,ne){"use strict";var g,m,b,y,e=Object.create;v("./set-prototype-of/is-implemented")()||(g=v("./set-prototype-of/shim")),re.exports=g?1!==g.level?e:(m={},b={},y={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(r){b[r]="__proto__"!==r?y:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(m,b),Object.defineProperty(g,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(r,n){return e(null===r?m:r,n)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(v,re,ne){"use strict";re.exports=v("./_iterate")("forEach")},{"./_iterate":143}],150:[function(v,re,ne){"use strict";var g=v("./is-value"),m={function:!0,object:!0};re.exports=function(b){return g(b)&&m[typeof b]||!1}},{"./is-value":151}],151:[function(v,re,ne){"use strict";var g=v("../function/noop")();re.exports=function(m){return m!==g&&null!==m}},{"../function/noop":137}],152:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?Object.keys:v("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(v,re,ne){"use strict";re.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(v,re,ne){"use strict";var g=v("../is-value"),m=Object.keys;re.exports=function(b){return m(g(b)?Object(b):b)}},{"../is-value":151}],155:[function(v,re,ne){"use strict";var g=v("./valid-callable"),m=v("./for-each"),b=Function.prototype.call;re.exports=function(y,e){var r={},n=arguments[2];return g(e),m(y,function(a,t,p,s){r[t]=b.call(e,n,a,t,p,s)}),r}},{"./for-each":149,"./valid-callable":160}],156:[function(v,re,ne){"use strict";var g=v("./is-value"),m=Array.prototype.forEach,b=Object.create,y=function(e,r){var n;for(n in e)r[n]=e[n]};re.exports=function(e){var r=b(null);return m.call(arguments,function(n){g(n)&&y(Object(n),r)}),r}},{"./is-value":151}],157:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?Object.setPrototypeOf:v("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(v,re,ne){"use strict";var g=Object.create,m=Object.getPrototypeOf,b={};re.exports=function(){var y=Object.setPrototypeOf;return"function"==typeof y&&m(y((arguments[0]||g)(null),b))===b}},{}],159:[function(v,re,ne){"use strict";var g,n,a,t,m=v("../is-object"),b=v("../valid-value"),y=Object.prototype.isPrototypeOf,e=Object.defineProperty,r={configurable:!0,enumerable:!1,writable:!0,value:void 0};g=function(n,a){if(b(n),null===a||m(a))return n;throw new TypeError("Prototype must be null or an object")},re.exports=(n=function(){var n,a=Object.create(null),t={},p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(p){try{(n=p.set).call(a,t)}catch{}if(Object.getPrototypeOf(a)===t)return{set:n,level:2}}return a.__proto__=t,Object.getPrototypeOf(a)===t?{level:2}:((a={}).__proto__=t,Object.getPrototypeOf(a)===t&&{level:1})}(),n?(2===n.level?n.set?(t=n.set,a=function(p,s){return t.call(g(p,s),s),p}):a=function(p,s){return g(p,s).__proto__=s,p}:a=function p(s,i){var f;return g(s,i),(f=y.call(p.nullPolyfill,s))&&delete p.nullPolyfill.__proto__,null===i&&(i=p.nullPolyfill),s.__proto__=i,f&&e(p.nullPolyfill,"__proto__",r),s},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null),v("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(v,re,ne){"use strict";re.exports=function(g){if("function"!=typeof g)throw new TypeError(g+" is not a function");return g}},{}],161:[function(v,re,ne){"use strict";var g=v("./is-object");re.exports=function(m){if(!g(m))throw new TypeError(m+" is not an Object");return m}},{"./is-object":150}],162:[function(v,re,ne){"use strict";var g=v("./is-value");re.exports=function(m){if(!g(m))throw new TypeError("Cannot use null or undefined");return m}},{"./is-value":151}],163:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?String.prototype.contains:v("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(v,re,ne){"use strict";var g="razdwatrzy";re.exports=function(){return"function"==typeof g.contains&&!0===g.contains("dwa")&&!1===g.contains("foo")}},{}],165:[function(v,re,ne){"use strict";var g=String.prototype.indexOf;re.exports=function(m){return g.call(this,m,arguments[1])>-1}},{}],166:[function(v,re,ne){"use strict";var g=Object.prototype.toString,m=g.call("");re.exports=function(b){return"string"==typeof b||b&&"object"==typeof b&&(b instanceof String||g.call(b)===m)||!1}},{}],167:[function(v,re,ne){"use strict";var g=Object.create(null),m=Math.random;re.exports=function(){var b;do{b=m().toString(36).slice(2)}while(g[b]);return b}},{}],168:[function(v,re,ne){"use strict";var g,m=v("es5-ext/object/set-prototype-of"),b=v("es5-ext/string/#/contains"),y=v("d"),e=v("es6-symbol"),r=v("./"),n=Object.defineProperty;g=re.exports=function(a,t){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");r.call(this,a),t=t?b.call(t,"key+value")?"key+value":b.call(t,"key")?"key":"value":"value",n(this,"__kind__",y("",t))},m&&m(g,r),delete g.prototype.constructor,g.prototype=Object.create(r.prototype,{_resolve:y(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})}),n(g.prototype,e.toStringTag,y("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(v,re,ne){"use strict";var g=v("es5-ext/function/is-arguments"),m=v("es5-ext/object/valid-callable"),b=v("es5-ext/string/is-string"),y=v("./get"),e=Array.isArray,r=Function.prototype.call,n=Array.prototype.some;re.exports=function(a,t){var p,s,i,f,c,l,h,d,o=arguments[2];if(e(a)||g(a)?p="array":b(a)?p="string":a=y(a),m(t),i=function(){f=!0},"array"!==p)if("string"!==p)for(s=a.next();!s.done;){if(r.call(t,o,s.value,i),f)return;s=a.next()}else for(l=a.length,c=0;c<l&&(h=a[c],c+1<l&&(d=h.charCodeAt(0))>=55296&&d<=56319&&(h+=a[++c]),r.call(t,o,h,i),!f);++c);else n.call(a,function(x){return r.call(t,o,x,i),f})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(v,re,ne){"use strict";var g=v("es5-ext/function/is-arguments"),m=v("es5-ext/string/is-string"),b=v("./array"),y=v("./string"),e=v("./valid-iterable"),r=v("es6-symbol").iterator;re.exports=function(n){return"function"==typeof e(n)[r]?n[r]():g(n)?new b(n):m(n)?new y(n):new b(n)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(v,re,ne){"use strict";var g,m=v("es5-ext/array/#/clear"),b=v("es5-ext/object/assign"),y=v("es5-ext/object/valid-callable"),e=v("es5-ext/object/valid-value"),r=v("d"),n=v("d/auto-bind"),a=v("es6-symbol"),t=Object.defineProperty,p=Object.defineProperties;re.exports=g=function(s,i){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");p(this,{__list__:r("w",e(s)),__context__:r("w",i),__nextIndex__:r("w",0)}),i&&(y(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete g.prototype.constructor,p(g.prototype,b({_next:r(function(){var s;if(this.__list__)return this.__redo__&&void 0!==(s=this.__redo__.shift())?s:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:r(function(){return this._createResult(this._next())}),_createResult:r(function(s){return void 0===s?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:r(function(s){return this.__list__[s]}),_unBind:r(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:r(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},n({_onAdd:r(function(s){s>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,f){i>=s&&(this.__redo__[f]=++i)},this),this.__redo__.push(s)):t(this,"__redo__",r("c",[s])))}),_onDelete:r(function(s){var i;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(s))&&this.__redo__.splice(i,1),this.__redo__.forEach(function(f,c){f>s&&(this.__redo__[c]=--f)},this)))}),_onClear:r(function(){this.__redo__&&m.call(this.__redo__),this.__nextIndex__=0})}))),t(g.prototype,a.iterator,r(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(v,re,ne){"use strict";var g=v("es5-ext/function/is-arguments"),m=v("es5-ext/object/is-value"),b=v("es5-ext/string/is-string"),y=v("es6-symbol").iterator,e=Array.isArray;re.exports=function(r){return!(!m(r)||!e(r)&&!b(r)&&!g(r)&&"function"!=typeof r[y])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(v,re,ne){"use strict";var g,m=v("es5-ext/object/set-prototype-of"),b=v("d"),y=v("es6-symbol"),e=v("./"),r=Object.defineProperty;g=re.exports=function(n){if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");n=String(n),e.call(this,n),r(this,"__length__",b("",n.length))},m&&m(g,e),delete g.prototype.constructor,g.prototype=Object.create(e.prototype,{_next:b(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:b(function(n){var a,t=this.__list__[n];return this.__nextIndex__===this.__length__?t:(a=t.charCodeAt(0))>=55296&&a<=56319?t+this.__list__[this.__nextIndex__++]:t})}),r(g.prototype,y.toStringTag,b("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(v,re,ne){"use strict";var g=v("./is-iterable");re.exports=function(m){if(!g(m))throw new TypeError(m+" is not iterable");return m}},{"./is-iterable":172}],175:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?v("ext/global-this").Symbol:v("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(v,re,ne){"use strict";var g=v("ext/global-this"),m={object:!0,symbol:!0};re.exports=function(){var b,y=g.Symbol;if("function"!=typeof y)return!1;b=y("test symbol");try{String(b)}catch{return!1}return!!m[typeof y.iterator]&&!!m[typeof y.toPrimitive]&&!!m[typeof y.toStringTag]}},{"ext/global-this":188}],177:[function(v,re,ne){"use strict";re.exports=function(g){return!!g&&("symbol"==typeof g||!!g.constructor&&"Symbol"===g.constructor.name&&"Symbol"===g[g.constructor.toStringTag])}},{}],178:[function(v,re,ne){"use strict";var g=v("d"),b=Object.defineProperty,y=Object.prototype,e=(0,Object.create)(null);re.exports=function(r){for(var n,a,t=0;e[r+(t||"")];)++t;return e[r+=t||""]=!0,b(y,n="@@"+r,g.gs(null,function(p){a||(a=!0,b(this,n,g(p)),a=!1)})),n}},{d:106}],179:[function(v,re,ne){"use strict";var g=v("d"),m=v("ext/global-this").Symbol;re.exports=function(b){return Object.defineProperties(b,{hasInstance:g("",m&&m.hasInstance||b("hasInstance")),isConcatSpreadable:g("",m&&m.isConcatSpreadable||b("isConcatSpreadable")),iterator:g("",m&&m.iterator||b("iterator")),match:g("",m&&m.match||b("match")),replace:g("",m&&m.replace||b("replace")),search:g("",m&&m.search||b("search")),species:g("",m&&m.species||b("species")),split:g("",m&&m.split||b("split")),toPrimitive:g("",m&&m.toPrimitive||b("toPrimitive")),toStringTag:g("",m&&m.toStringTag||b("toStringTag")),unscopables:g("",m&&m.unscopables||b("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(v,re,ne){"use strict";var g=v("d"),m=v("../../../validate-symbol"),b=Object.create(null);re.exports=function(y){return Object.defineProperties(y,{for:g(function(e){return b[e]?b[e]:b[e]=y(String(e))}),keyFor:g(function(e){var r;for(r in m(e),b)if(b[r]===e)return r})})}},{"../../../validate-symbol":182,d:106}],181:[function(v,re,ne){"use strict";var g,m,b,y=v("d"),e=v("./validate-symbol"),r=v("ext/global-this").Symbol,n=v("./lib/private/generate-name"),a=v("./lib/private/setup/standard-symbols"),t=v("./lib/private/setup/symbol-registry"),p=Object.create,s=Object.defineProperties,i=Object.defineProperty;if("function"==typeof r)try{String(r()),b=!0}catch{}else r=null;m=function(f){if(this instanceof m)throw new TypeError("Symbol is not a constructor");return g(f)},re.exports=g=function f(c){var l;if(this instanceof f)throw new TypeError("Symbol is not a constructor");return b?r(c):(l=p(m.prototype),c=void 0===c?"":String(c),s(l,{__description__:y("",c),__name__:y("",n(c))}))},a(g),t(g),s(m.prototype,{constructor:y(g),toString:y("",function(){return this.__name__})}),s(g.prototype,{toString:y(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:y(function(){return e(this)})}),i(g.prototype,g.toPrimitive,y("",function(){var f=e(this);return"symbol"==typeof f?f:f.toString()})),i(g.prototype,g.toStringTag,y("c","Symbol")),i(m.prototype,g.toStringTag,y("c",g.prototype[g.toStringTag])),i(m.prototype,g.toPrimitive,y("c",g.prototype[g.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(v,re,ne){"use strict";var g=v("./is-symbol");re.exports=function(m){if(!g(m))throw new TypeError(m+" is not a symbol");return m}},{"./is-symbol":177}],183:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?WeakMap:v("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(v,re,ne){"use strict";re.exports=function(){var g,m;if("function"!=typeof WeakMap)return!1;try{g=new WeakMap([[m={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(g)&&"function"==typeof g.set&&g.set({},1)===g&&"function"==typeof g.delete&&"function"==typeof g.has&&"one"===g.get(m)}},{}],185:[function(v,re,ne){"use strict";re.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(v,re,ne){"use strict";var g,m=v("es5-ext/object/is-value"),b=v("es5-ext/object/set-prototype-of"),y=v("es5-ext/object/valid-object"),e=v("es5-ext/object/valid-value"),r=v("es5-ext/string/random-uniq"),n=v("d"),a=v("es6-iterator/get"),t=v("es6-iterator/for-of"),p=v("es6-symbol").toStringTag,s=v("./is-native-implemented"),i=Array.isArray,f=Object.defineProperty,c=Object.prototype.hasOwnProperty,l=Object.getPrototypeOf;re.exports=g=function(){var h,d=arguments[0];if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");return h=s&&b&&WeakMap!==g?b(new WeakMap,l(this)):this,m(d)&&(i(d)||(d=a(d))),f(h,"__weakMapData__",n("c","$weakMap$"+r())),d&&t(d,function(o){e(o),h.set(o[0],o[1])}),h},s&&(b&&b(g,WeakMap),g.prototype=Object.create(WeakMap.prototype,{constructor:n(g)})),Object.defineProperties(g.prototype,{delete:n(function(h){return!!c.call(y(h),this.__weakMapData__)&&(delete h[this.__weakMapData__],!0)}),get:n(function(h){if(c.call(y(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:n(function(h){return c.call(y(h),this.__weakMapData__)}),set:n(function(h,d){return f(y(h),this.__weakMapData__,n("c",d)),this}),toString:n(function(){return"[object WeakMap]"})}),f(g.prototype,p,n("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(v,re,ne){var g=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};re.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return g()}try{return __global__||g()}finally{delete Object.prototype.__global__}}()},{}],188:[function(v,re,ne){"use strict";re.exports=v("./is-implemented")()?globalThis:v("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(v,re,ne){"use strict";re.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(v,re,ne){"use strict";var g=v("is-string-blank");re.exports=function(m){var b=typeof m;if("string"===b){var y=m;if(0==(m=+m)&&g(y))return!1}else if("number"!==b)return!1;return m-m<1}},{"is-string-blank":237}],191:[function(v,re,ne){var g=v("dtype");re.exports=function(m,b,y){if(!m)throw new TypeError("must specify data as first parameter");if(y=0|+(y||0),Array.isArray(m)&&m[0]&&"number"==typeof m[0][0]){var e,r,n,a,t=m[0].length,p=m.length*t;b&&"string"!=typeof b||(b=new(g(b||"float32"))(p+y));var s=b.length-y;if(p!==s)throw new Error("source length "+p+" ("+t+"x"+m.length+") does not match destination length "+s);for(e=0,n=y;e<m.length;e++)for(r=0;r<t;r++)b[n++]=null===m[e][r]?NaN:m[e][r]}else if(b&&"string"!=typeof b)b.set(m,y);else{var i=g(b||"float32");if(Array.isArray(m)||"array"===b)for(e=0,n=y,a=(b=new i(m.length+y)).length;n<a;n++,e++)b[n]=null===m[e]?NaN:m[e];else 0===y?b=new i(m):(b=new i(m.length+y)).set(m,y)}return b}},{dtype:127}],192:[function(v,re,ne){"use strict";var g=v("css-font/stringify"),m=[32,126];re.exports=function(b){var y=(b=b||{}).shape?b.shape:b.canvas?[b.canvas.width,b.canvas.height]:[512,512],e=b.canvas||document.createElement("canvas"),r=b.font,n="number"==typeof b.step?[b.step,b.step]:b.step||[32,32],a=b.chars||m;if(r&&"string"!=typeof r&&(r=g(r)),Array.isArray(a)){if(2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]){for(var t=[],p=a[0],s=0;p<=a[1];p++)t[s++]=String.fromCharCode(p);a=t}}else a=String(a).split("");y=y.slice(),e.width=y[0],e.height=y[1];var i=e.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.font=r,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var f=n[0]/2,c=n[1]/2;for(p=0;p<a.length;p++)i.fillText(a[p],f,c),(f+=n[0])>y[0]-n[0]/2&&(f=n[0]/2,c+=n[1]);return e}},{"css-font/stringify":102}],193:[function(v,re,ne){"use strict";function g(e,r){r||(r={}),("string"==typeof e||Array.isArray(e))&&(r.family=e);var n=Array.isArray(r.family)?r.family.join(", "):r.family;if(!n)throw Error("`family` must be defined");var a=r.size||r.fontSize||r.em||48,p=(e=[r.style||r.fontStyle||"",r.weight||r.fontWeight||"",a].join(" ")+"px "+n,r.origin||"top");if(g.cache[n]&&a<=g.cache[n].em)return m(g.cache[n],p);var s=r.canvas||g.canvas,i=s.getContext("2d"),f={upper:void 0!==r.upper?r.upper:"H",lower:void 0!==r.lower?r.lower:"x",descent:void 0!==r.descent?r.descent:"p",ascent:void 0!==r.ascent?r.ascent:"h",tittle:void 0!==r.tittle?r.tittle:"i",overshoot:void 0!==r.overshoot?r.overshoot:"O"},c=Math.ceil(1.5*a);s.height=c,s.width=.5*c,i.font=e;var l={top:0};i.clearRect(0,0,c,c),i.textBaseline="top",i.fillStyle="black",i.fillText("H",0,0);var h=b(i.getImageData(0,0,c,c));i.clearRect(0,0,c,c),i.textBaseline="bottom",i.fillText("H",0,c);var d=b(i.getImageData(0,0,c,c));l.lineHeight=l.bottom=c-d+h,i.clearRect(0,0,c,c),i.textBaseline="alphabetic",i.fillText("H",0,c);var o=c-b(i.getImageData(0,0,c,c))-1+h;l.baseline=l.alphabetic=o,i.clearRect(0,0,c,c),i.textBaseline="middle",i.fillText("H",0,.5*c);var x=b(i.getImageData(0,0,c,c));l.median=l.middle=c-x-1+h-.5*c,i.clearRect(0,0,c,c),i.textBaseline="hanging",i.fillText("H",0,.5*c);var u=b(i.getImageData(0,0,c,c));l.hanging=c-u-1+h-.5*c,i.clearRect(0,0,c,c),i.textBaseline="ideographic",i.fillText("H",0,c);var T=b(i.getImageData(0,0,c,c));if(l.ideographic=c-T-1+h,f.upper&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(f.upper,0,0),l.upper=b(i.getImageData(0,0,c,c)),l.capHeight=l.baseline-l.upper),f.lower&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(f.lower,0,0),l.lower=b(i.getImageData(0,0,c,c)),l.xHeight=l.baseline-l.lower),f.tittle&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(f.tittle,0,0),l.tittle=b(i.getImageData(0,0,c,c))),f.ascent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(f.ascent,0,0),l.ascent=b(i.getImageData(0,0,c,c))),f.descent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(f.descent,0,0),l.descent=y(i.getImageData(0,0,c,c))),f.overshoot){i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(f.overshoot,0,0);var _=y(i.getImageData(0,0,c,c));l.overshoot=_-o}for(var w in l)l[w]/=a;return l.em=a,g.cache[n]=l,m(l,p)}function m(e,r){var n={};for(var a in"string"==typeof r&&(r=e[r]),e)"em"!==a&&(n[a]=e[a]-r);return n}function b(e){for(var r=e.height,n=e.data,a=3;a<n.length;a+=4)if(0!==n[a])return Math.floor(.25*(a-3)/r)}function y(e){for(var r=e.height,n=e.data,a=n.length-1;a>0;a-=4)if(0!==n[a])return Math.floor(.25*(a-3)/r)}re.exports=g,g.canvas=document.createElement("canvas"),g.cache={}},{}],194:[function(v,re,ne){re.exports=function(g,m){if("string"!=typeof g)throw new TypeError("must specify type string");if(m=m||{},typeof document>"u"&&!m.canvas)return null;var b=m.canvas||document.createElement("canvas");"number"==typeof m.width&&(b.width=m.width),"number"==typeof m.height&&(b.height=m.height);var y,e=m;try{var r=[g];0===g.indexOf("webgl")&&r.push("experimental-"+g);for(var n=0;n<r.length;n++)if(y=b.getContext(r[n],e))return y}catch{y=null}return y||null}},{}],195:[function(v,re,ne){re.exports=function(g,m){var b=m[0],y=m[1],e=m[2],r=m[3],n=m[4],a=m[5],t=m[6],p=m[7],s=m[8],i=m[9],f=m[10],c=m[11],l=m[12],h=m[13],d=m[14],o=m[15];return g[0]=a*(f*o-c*d)-i*(t*o-p*d)+h*(t*c-p*f),g[1]=-(y*(f*o-c*d)-i*(e*o-r*d)+h*(e*c-r*f)),g[2]=y*(t*o-p*d)-a*(e*o-r*d)+h*(e*p-r*t),g[3]=-(y*(t*c-p*f)-a*(e*c-r*f)+i*(e*p-r*t)),g[4]=-(n*(f*o-c*d)-s*(t*o-p*d)+l*(t*c-p*f)),g[5]=b*(f*o-c*d)-s*(e*o-r*d)+l*(e*c-r*f),g[6]=-(b*(t*o-p*d)-n*(e*o-r*d)+l*(e*p-r*t)),g[7]=b*(t*c-p*f)-n*(e*c-r*f)+s*(e*p-r*t),g[8]=n*(i*o-c*h)-s*(a*o-p*h)+l*(a*c-p*i),g[9]=-(b*(i*o-c*h)-s*(y*o-r*h)+l*(y*c-r*i)),g[10]=b*(a*o-p*h)-n*(y*o-r*h)+l*(y*p-r*a),g[11]=-(b*(a*c-p*i)-n*(y*c-r*i)+s*(y*p-r*a)),g[12]=-(n*(i*d-f*h)-s*(a*d-t*h)+l*(a*f-t*i)),g[13]=b*(i*d-f*h)-s*(y*d-e*h)+l*(y*f-e*i),g[14]=-(b*(a*d-t*h)-n*(y*d-e*h)+l*(y*t-e*a)),g[15]=b*(a*f-t*i)-n*(y*f-e*i)+s*(y*t-e*a),g}},{}],196:[function(v,re,ne){re.exports=function(g){var m=new Float32Array(16);return m[0]=g[0],m[1]=g[1],m[2]=g[2],m[3]=g[3],m[4]=g[4],m[5]=g[5],m[6]=g[6],m[7]=g[7],m[8]=g[8],m[9]=g[9],m[10]=g[10],m[11]=g[11],m[12]=g[12],m[13]=g[13],m[14]=g[14],m[15]=g[15],m}},{}],197:[function(v,re,ne){re.exports=function(g,m){return g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=m[6],g[7]=m[7],g[8]=m[8],g[9]=m[9],g[10]=m[10],g[11]=m[11],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15],g}},{}],198:[function(v,re,ne){re.exports=function(){var g=new Float32Array(16);return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],199:[function(v,re,ne){re.exports=function(g){var m=g[0],b=g[1],y=g[2],e=g[3],r=g[4],n=g[5],a=g[6],t=g[7],p=g[8],s=g[9],i=g[10],f=g[11],c=g[12],l=g[13],h=g[14],d=g[15];return(m*n-b*r)*(i*d-f*h)-(m*a-y*r)*(s*d-f*l)+(m*t-e*r)*(s*h-i*l)+(b*a-y*n)*(p*d-f*c)-(b*t-e*n)*(p*h-i*c)+(y*t-e*a)*(p*l-s*c)}},{}],200:[function(v,re,ne){re.exports=function(g,m){var b=m[0],y=m[1],e=m[2],r=m[3],n=b+b,a=y+y,t=e+e,p=b*n,s=y*n,i=y*a,f=e*n,c=e*a,l=e*t,h=r*n,d=r*a,o=r*t;return g[0]=1-i-l,g[1]=s+o,g[2]=f-d,g[3]=0,g[4]=s-o,g[5]=1-p-l,g[6]=c+h,g[7]=0,g[8]=f+d,g[9]=c-h,g[10]=1-p-i,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],201:[function(v,re,ne){re.exports=function(g,m,b){var y,e,r,n=b[0],a=b[1],t=b[2],p=Math.sqrt(n*n+a*a+t*t);return Math.abs(p)<1e-6?null:(n*=p=1/p,a*=p,t*=p,y=Math.sin(m),e=Math.cos(m),g[0]=n*n*(r=1-e)+e,g[1]=a*n*r+t*y,g[2]=t*n*r-a*y,g[3]=0,g[4]=n*a*r-t*y,g[5]=a*a*r+e,g[6]=t*a*r+n*y,g[7]=0,g[8]=n*t*r+a*y,g[9]=a*t*r-n*y,g[10]=t*t*r+e,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g)}},{}],202:[function(v,re,ne){re.exports=function(g,m,b){var y=m[0],e=m[1],r=m[2],n=m[3],a=y+y,t=e+e,p=r+r,s=y*a,i=y*t,f=y*p,c=e*t,l=e*p,h=r*p,d=n*a,o=n*t,x=n*p;return g[0]=1-(c+h),g[1]=i+x,g[2]=f-o,g[3]=0,g[4]=i-x,g[5]=1-(s+h),g[6]=l+d,g[7]=0,g[8]=f+o,g[9]=l-d,g[10]=1-(s+c),g[11]=0,g[12]=b[0],g[13]=b[1],g[14]=b[2],g[15]=1,g}},{}],203:[function(v,re,ne){re.exports=function(g,m){return g[0]=m[0],g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=m[1],g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=m[2],g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],204:[function(v,re,ne){re.exports=function(g,m){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=m[0],g[13]=m[1],g[14]=m[2],g[15]=1,g}},{}],205:[function(v,re,ne){re.exports=function(g,m){var b=Math.sin(m),y=Math.cos(m);return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=y,g[6]=b,g[7]=0,g[8]=0,g[9]=-b,g[10]=y,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],206:[function(v,re,ne){re.exports=function(g,m){var b=Math.sin(m),y=Math.cos(m);return g[0]=y,g[1]=0,g[2]=-b,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=b,g[9]=0,g[10]=y,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],207:[function(v,re,ne){re.exports=function(g,m){var b=Math.sin(m),y=Math.cos(m);return g[0]=y,g[1]=b,g[2]=0,g[3]=0,g[4]=-b,g[5]=y,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],208:[function(v,re,ne){re.exports=function(g,m,b,y,e,r,n){var a=1/(b-m),t=1/(e-y),p=1/(r-n);return g[0]=2*r*a,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*r*t,g[6]=0,g[7]=0,g[8]=(b+m)*a,g[9]=(e+y)*t,g[10]=(n+r)*p,g[11]=-1,g[12]=0,g[13]=0,g[14]=n*r*2*p,g[15]=0,g}},{}],209:[function(v,re,ne){re.exports=function(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}},{}],210:[function(v,re,ne){re.exports={create:v("./create"),clone:v("./clone"),copy:v("./copy"),identity:v("./identity"),transpose:v("./transpose"),invert:v("./invert"),adjoint:v("./adjoint"),determinant:v("./determinant"),multiply:v("./multiply"),translate:v("./translate"),scale:v("./scale"),rotate:v("./rotate"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),fromRotation:v("./fromRotation"),fromRotationTranslation:v("./fromRotationTranslation"),fromScaling:v("./fromScaling"),fromTranslation:v("./fromTranslation"),fromXRotation:v("./fromXRotation"),fromYRotation:v("./fromYRotation"),fromZRotation:v("./fromZRotation"),fromQuat:v("./fromQuat"),frustum:v("./frustum"),perspective:v("./perspective"),perspectiveFromFieldOfView:v("./perspectiveFromFieldOfView"),ortho:v("./ortho"),lookAt:v("./lookAt"),str:v("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(v,re,ne){re.exports=function(g,m){var b=m[0],y=m[1],e=m[2],r=m[3],n=m[4],a=m[5],t=m[6],p=m[7],s=m[8],i=m[9],f=m[10],c=m[11],l=m[12],h=m[13],d=m[14],o=m[15],x=b*a-y*n,u=b*t-e*n,T=b*p-r*n,_=y*t-e*a,w=y*p-r*a,M=e*p-r*t,I=s*h-i*l,S=s*d-f*l,R=s*o-c*l,O=i*d-f*h,C=i*o-c*h,D=f*o-c*d,B=x*D-u*C+T*O+_*R-w*S+M*I;return B?(g[0]=(a*D-t*C+p*O)*(B=1/B),g[1]=(e*C-y*D-r*O)*B,g[2]=(h*M-d*w+o*_)*B,g[3]=(f*w-i*M-c*_)*B,g[4]=(t*R-n*D-p*S)*B,g[5]=(b*D-e*R+r*S)*B,g[6]=(d*T-l*M-o*u)*B,g[7]=(s*M-f*T+c*u)*B,g[8]=(n*C-a*R+p*I)*B,g[9]=(y*R-b*C-r*I)*B,g[10]=(l*w-h*T+o*x)*B,g[11]=(i*T-s*w-c*x)*B,g[12]=(a*S-n*O-t*I)*B,g[13]=(b*O-y*S+e*I)*B,g[14]=(h*u-l*_-d*x)*B,g[15]=(s*_-i*u+f*x)*B,g):null}},{}],212:[function(v,re,ne){var g=v("./identity");re.exports=function(m,b,y,e){var r,n,a,t,p,s,i,f,c,l,h=b[0],d=b[1],o=b[2],x=e[0],u=e[1],T=e[2],_=y[0],w=y[1],M=y[2];return Math.abs(h-_)<1e-6&&Math.abs(d-w)<1e-6&&Math.abs(o-M)<1e-6?g(m):(i=h-_,f=d-w,c=o-M,r=u*(c*=l=1/Math.sqrt(i*i+f*f+c*c))-T*(f*=l),n=T*(i*=l)-x*c,a=x*f-u*i,(l=Math.sqrt(r*r+n*n+a*a))?(r*=l=1/l,n*=l,a*=l):(r=0,n=0,a=0),t=f*a-c*n,p=c*r-i*a,s=i*n-f*r,(l=Math.sqrt(t*t+p*p+s*s))?(t*=l=1/l,p*=l,s*=l):(t=0,p=0,s=0),m[0]=r,m[1]=t,m[2]=i,m[3]=0,m[4]=n,m[5]=p,m[6]=f,m[7]=0,m[8]=a,m[9]=s,m[10]=c,m[11]=0,m[12]=-(r*h+n*d+a*o),m[13]=-(t*h+p*d+s*o),m[14]=-(i*h+f*d+c*o),m[15]=1,m)}},{"./identity":209}],213:[function(v,re,ne){re.exports=function(g,m,b){var y=m[0],e=m[1],r=m[2],n=m[3],a=m[4],t=m[5],p=m[6],s=m[7],i=m[8],f=m[9],c=m[10],l=m[11],h=m[12],d=m[13],o=m[14],x=m[15],u=b[0],T=b[1],_=b[2],w=b[3];return g[0]=u*y+T*a+_*i+w*h,g[1]=u*e+T*t+_*f+w*d,g[2]=u*r+T*p+_*c+w*o,g[3]=u*n+T*s+_*l+w*x,g[4]=(u=b[4])*y+(T=b[5])*a+(_=b[6])*i+(w=b[7])*h,g[5]=u*e+T*t+_*f+w*d,g[6]=u*r+T*p+_*c+w*o,g[7]=u*n+T*s+_*l+w*x,g[8]=(u=b[8])*y+(T=b[9])*a+(_=b[10])*i+(w=b[11])*h,g[9]=u*e+T*t+_*f+w*d,g[10]=u*r+T*p+_*c+w*o,g[11]=u*n+T*s+_*l+w*x,g[12]=(u=b[12])*y+(T=b[13])*a+(_=b[14])*i+(w=b[15])*h,g[13]=u*e+T*t+_*f+w*d,g[14]=u*r+T*p+_*c+w*o,g[15]=u*n+T*s+_*l+w*x,g}},{}],214:[function(v,re,ne){re.exports=function(g,m,b,y,e,r,n){var a=1/(m-b),t=1/(y-e),p=1/(r-n);return g[0]=-2*a,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*t,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*p,g[11]=0,g[12]=(m+b)*a,g[13]=(e+y)*t,g[14]=(n+r)*p,g[15]=1,g}},{}],215:[function(v,re,ne){re.exports=function(g,m,b,y,e){var r=1/Math.tan(m/2),n=1/(y-e);return g[0]=r/b,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=r,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=(e+y)*n,g[11]=-1,g[12]=0,g[13]=0,g[14]=2*e*y*n,g[15]=0,g}},{}],216:[function(v,re,ne){re.exports=function(g,m,b,y){var e=Math.tan(m.upDegrees*Math.PI/180),r=Math.tan(m.downDegrees*Math.PI/180),n=Math.tan(m.leftDegrees*Math.PI/180),a=Math.tan(m.rightDegrees*Math.PI/180),t=2/(n+a),p=2/(e+r);return g[0]=t,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=p,g[6]=0,g[7]=0,g[8]=-(n-a)*t*.5,g[9]=(e-r)*p*.5,g[10]=y/(b-y),g[11]=-1,g[12]=0,g[13]=0,g[14]=y*b/(b-y),g[15]=0,g}},{}],217:[function(v,re,ne){re.exports=function(g,m,b,y){var e,r,n,a,t,p,s,i,f,c,l,h,d,o,x,u,T,_,w,M,I,S,R,O,C=y[0],D=y[1],B=y[2],z=Math.sqrt(C*C+D*D+B*B);return Math.abs(z)<1e-6?null:(C*=z=1/z,D*=z,B*=z,e=Math.sin(b),r=Math.cos(b),t=m[1],p=m[2],s=m[3],f=m[5],c=m[6],l=m[7],d=m[9],o=m[10],x=m[11],w=C*D*(n=1-r)-B*e,M=D*D*n+r,I=B*D*n+C*e,S=C*B*n+D*e,R=D*B*n-C*e,O=B*B*n+r,g[0]=(a=m[0])*(u=C*C*n+r)+(i=m[4])*(T=D*C*n+B*e)+(h=m[8])*(_=B*C*n-D*e),g[1]=t*u+f*T+d*_,g[2]=p*u+c*T+o*_,g[3]=s*u+l*T+x*_,g[4]=a*w+i*M+h*I,g[5]=t*w+f*M+d*I,g[6]=p*w+c*M+o*I,g[7]=s*w+l*M+x*I,g[8]=a*S+i*R+h*O,g[9]=t*S+f*R+d*O,g[10]=p*S+c*R+o*O,g[11]=s*S+l*R+x*O,m!==g&&(g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g)}},{}],218:[function(v,re,ne){re.exports=function(g,m,b){var y=Math.sin(b),e=Math.cos(b),r=m[4],n=m[5],a=m[6],t=m[7],p=m[8],s=m[9],i=m[10],f=m[11];return m!==g&&(g[0]=m[0],g[1]=m[1],g[2]=m[2],g[3]=m[3],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g[4]=r*e+p*y,g[5]=n*e+s*y,g[6]=a*e+i*y,g[7]=t*e+f*y,g[8]=p*e-r*y,g[9]=s*e-n*y,g[10]=i*e-a*y,g[11]=f*e-t*y,g}},{}],219:[function(v,re,ne){re.exports=function(g,m,b){var y=Math.sin(b),e=Math.cos(b),r=m[0],n=m[1],a=m[2],t=m[3],p=m[8],s=m[9],i=m[10],f=m[11];return m!==g&&(g[4]=m[4],g[5]=m[5],g[6]=m[6],g[7]=m[7],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g[0]=r*e-p*y,g[1]=n*e-s*y,g[2]=a*e-i*y,g[3]=t*e-f*y,g[8]=r*y+p*e,g[9]=n*y+s*e,g[10]=a*y+i*e,g[11]=t*y+f*e,g}},{}],220:[function(v,re,ne){re.exports=function(g,m,b){var y=Math.sin(b),e=Math.cos(b),r=m[0],n=m[1],a=m[2],t=m[3],p=m[4],s=m[5],i=m[6],f=m[7];return m!==g&&(g[8]=m[8],g[9]=m[9],g[10]=m[10],g[11]=m[11],g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15]),g[0]=r*e+p*y,g[1]=n*e+s*y,g[2]=a*e+i*y,g[3]=t*e+f*y,g[4]=p*e-r*y,g[5]=s*e-n*y,g[6]=i*e-a*y,g[7]=f*e-t*y,g}},{}],221:[function(v,re,ne){re.exports=function(g,m,b){var y=b[0],e=b[1],r=b[2];return g[0]=m[0]*y,g[1]=m[1]*y,g[2]=m[2]*y,g[3]=m[3]*y,g[4]=m[4]*e,g[5]=m[5]*e,g[6]=m[6]*e,g[7]=m[7]*e,g[8]=m[8]*r,g[9]=m[9]*r,g[10]=m[10]*r,g[11]=m[11]*r,g[12]=m[12],g[13]=m[13],g[14]=m[14],g[15]=m[15],g}},{}],222:[function(v,re,ne){re.exports=function(g){return"mat4("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+", "+g[6]+", "+g[7]+", "+g[8]+", "+g[9]+", "+g[10]+", "+g[11]+", "+g[12]+", "+g[13]+", "+g[14]+", "+g[15]+")"}},{}],223:[function(v,re,ne){re.exports=function(g,m,b){var y,e,r,n,a,t,p,s,i,f,c,l,h=b[0],d=b[1],o=b[2];return m===g?(g[12]=m[0]*h+m[4]*d+m[8]*o+m[12],g[13]=m[1]*h+m[5]*d+m[9]*o+m[13],g[14]=m[2]*h+m[6]*d+m[10]*o+m[14],g[15]=m[3]*h+m[7]*d+m[11]*o+m[15]):(e=m[1],r=m[2],n=m[3],a=m[4],t=m[5],p=m[6],s=m[7],i=m[8],f=m[9],c=m[10],l=m[11],g[0]=y=m[0],g[1]=e,g[2]=r,g[3]=n,g[4]=a,g[5]=t,g[6]=p,g[7]=s,g[8]=i,g[9]=f,g[10]=c,g[11]=l,g[12]=y*h+a*d+i*o+m[12],g[13]=e*h+t*d+f*o+m[13],g[14]=r*h+p*d+c*o+m[14],g[15]=n*h+s*d+l*o+m[15]),g}},{}],224:[function(v,re,ne){re.exports=function(g,m){if(g===m){var b=m[1],y=m[2],e=m[3],r=m[6],n=m[7],a=m[11];g[1]=m[4],g[2]=m[8],g[3]=m[12],g[4]=b,g[6]=m[9],g[7]=m[13],g[8]=y,g[9]=r,g[11]=m[14],g[12]=e,g[13]=n,g[14]=a}else g[0]=m[0],g[1]=m[4],g[2]=m[8],g[3]=m[12],g[4]=m[1],g[5]=m[5],g[6]=m[9],g[7]=m[13],g[8]=m[2],g[9]=m[6],g[10]=m[10],g[11]=m[14],g[12]=m[3],g[13]=m[7],g[14]=m[11],g[15]=m[15];return g}},{}],225:[function(v,re,ne){"use strict";var g=v("css-font"),m=v("pick-by-alias"),b=v("regl"),y=v("gl-util/context"),e=v("es6-weak-map"),r=v("color-normalize"),n=v("font-atlas"),a=v("typedarray-pool"),t=v("parse-rect"),p=v("is-plain-obj"),s=v("parse-unit"),i=v("to-px"),f=v("detect-kerning"),c=v("object-assign"),l=v("font-measure"),h=v("flatten-vertex-data"),d=v("bit-twiddle").nextPow2,o=new e,x=!1;if(document.body){var u=document.body.appendChild(document.createElement("div"));u.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(u).fontStretch&&(x=!0),document.body.removeChild(u)}var T=function(_){var w;this.gl="function"==typeof(w=_)&&w._gl&&w.prop&&w.texture&&w.buffer?(_={regl:_}).regl._gl:y(_),this.shader=o.get(this.gl),this.regl=this.shader?this.shader.regl:_.regl||b({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),o.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(p(_)?_:{})};T.prototype.createShader=function(){var _=this.regl,w=_({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:_.prop("count"),offset:_.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:_.this("sizeBuffer")},width:{offset:0,stride:8,buffer:_.this("sizeBuffer")},char:_.this("charBuffer"),position:_.this("position")},uniforms:{atlasSize:function(M,I){return[I.atlas.width,I.atlas.height]},atlasDim:function(M,I){return[I.atlas.cols,I.atlas.rows]},atlas:function(M,I){return I.atlas.texture},charStep:function(M,I){return I.atlas.step},em:function(M,I){return I.atlas.em},color:_.prop("color"),opacity:_.prop("opacity"),viewport:_.this("viewportArray"),scale:_.this("scale"),align:_.prop("align"),baseline:_.prop("baseline"),translate:_.this("translate"),positionOffset:_.prop("positionOffset")},primitive:"points",viewport:_.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:_,draw:w,atlas:{}}},T.prototype.update=function(_){var w=this;if("string"==typeof _)_={text:_};else if(!_)return;null!=(_=m(_,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(_.opacity)?_.opacity.map(function(Te){return parseFloat(Te)}):parseFloat(_.opacity)),null!=_.viewport&&(this.viewport=t(_.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=_.kerning&&(this.kerning=_.kerning),null!=_.offset&&("number"==typeof _.offset&&(_.offset=[_.offset,0]),this.positionOffset=h(_.offset)),_.direction&&(this.direction=_.direction),_.range&&(this.range=_.range,this.scale=[1/(_.range[2]-_.range[0]),1/(_.range[3]-_.range[1])],this.translate=[-_.range[0],-_.range[1]]),_.scale&&(this.scale=_.scale),_.translate&&(this.translate=_.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||_.font||(_.font=T.baseFontSize+"px sans-serif");var M,I=!1,S=!1;if(_.font&&(Array.isArray(_.font)?_.font:[_.font]).forEach(function(Te,Ie){if("string"==typeof Te)try{Te=g.parse(Te)}catch{Te=g.parse(T.baseFontSize+"px "+Te)}else Te=g.parse(g.stringify(Te));var De=g.stringify({size:T.baseFontSize,family:Te.family,stretch:x?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style}),Fe=s(Te.size),Ue=Math.round(Fe[0]*i(Fe[1]));if(Ue!==w.fontSize[Ie]&&(S=!0,w.fontSize[Ie]=Ue),!(w.font[Ie]&&De==w.font[Ie].baseString||(I=!0,w.font[Ie]=T.fonts[De],w.font[Ie]))){var qe=Te.family.join(", "),je=[Te.style];Te.style!=Te.variant&&je.push(Te.variant),Te.variant!=Te.weight&&je.push(Te.weight),x&&Te.weight!=Te.stretch&&je.push(Te.stretch),w.font[Ie]={baseString:De,family:qe,weight:Te.weight,stretch:Te.stretch,style:Te.style,variant:Te.variant,width:{},kerning:{},metrics:l(qe,{origin:"top",fontSize:T.baseFontSize,fontStyle:je.join(" ")})},T.fonts[De]=w.font[Ie]}}),(I||S)&&this.font.forEach(function(Te,Ie){var De=g.stringify({size:w.fontSize[Ie],family:Te.family,stretch:x?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style});w.fontAtlas[Ie]=w.shader.atlas[De],w.fontAtlas[Ie]||(w.shader.atlas[De]=w.fontAtlas[Ie]={fontString:De,step:2*Math.ceil(w.fontSize[Ie]*Te.metrics.bottom*.5),em:w.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}),null==_.text&&(_.text=w.text)}),"string"==typeof _.text&&_.position&&_.position.length>2){for(var R=Array(.5*_.position.length),O=0;O<R.length;O++)R[O]=_.text;_.text=R}if(null!=_.text||I){if(this.textOffsets=[0],Array.isArray(_.text)){this.count=_.text[0].length,this.counts=[this.count];for(var C=1;C<_.text.length;C++)this.textOffsets[C]=this.textOffsets[C-1]+_.text[C-1].length,this.count+=_.text[C].length,this.counts.push(_.text[C].length);this.text=_.text.join("")}else this.text=_.text,this.count=this.text.length,this.counts=[this.count];M=[],this.font.forEach(function(Te,Ie){T.atlasContext.font=Te.baseString;for(var De=w.fontAtlas[Ie],Fe=0;Fe<w.text.length;Fe++){var Ue=w.text.charAt(Fe);if(null==De.ids[Ue]&&(De.ids[Ue]=De.chars.length,De.chars.push(Ue),M.push(Ue)),null==Te.width[Ue]&&(Te.width[Ue]=T.atlasContext.measureText(Ue).width/T.baseFontSize,w.kerning)){var qe=[];for(var je in Te.width)qe.push(je+Ue,Ue+je);c(Te.kerning,f(Te.family,{pairs:qe}))}}})}if(_.position)if(_.position.length>2){for(var D=!_.position[0].length,B=a.mallocFloat(2*this.count),z=0,Y=0;z<this.counts.length;z++){var G=this.counts[z];if(D)for(var J=0;J<G;J++)B[Y++]=_.position[2*z],B[Y++]=_.position[2*z+1];else for(var te=0;te<G;te++)B[Y++]=_.position[z][0],B[Y++]=_.position[z][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),a.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:_.position};if(_.text||I){var X=a.mallocUint8(this.count),K=a.mallocFloat(2*this.count);this.textWidth=[];for(var ae=0,U=0;ae<this.counts.length;ae++){for(var V=this.counts[ae],q=this.font[ae]||this.font[0],ie=this.fontAtlas[ae]||this.fontAtlas[0],H=0;H<V;H++){var ee=this.text.charAt(U),Q=this.text.charAt(U-1);if(X[U]=ie.ids[ee],K[2*U]=q.width[ee],H){var de=K[2*U-1]+.5*K[2*U-2]+.5*K[2*U];if(this.kerning){var fe=q.kerning[Q+ee];fe&&(de+=.001*fe)}K[2*U+1]=de}else K[2*U+1]=.5*K[2*U];U++}this.textWidth.push(K.length?.5*K[2*U-2]+K[2*U-1]:0)}_.align||(_.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:K,type:"float",usage:"stream"}),a.freeUint8(X),a.freeFloat(K),M.length&&this.font.forEach(function(Te,Ie){var De=w.fontAtlas[Ie],Fe=De.step,Ue=Math.floor(T.maxAtlasSize/Fe),qe=Math.min(Ue,De.chars.length),je=Math.ceil(De.chars.length/qe),rt=d(qe*Fe),Ne=d(je*Fe);De.width=rt,De.height=Ne,De.rows=je,De.cols=qe,De.em&&De.texture({data:n({canvas:T.atlasCanvas,font:De.fontString,chars:De.chars,shape:[rt,Ne],step:[Fe,Fe]})})})}if(_.align&&(this.align=_.align,this.alignOffset=this.textWidth.map(function(Te,Ie){var De=Array.isArray(w.align)?w.align.length>1?w.align[Ie]:w.align[0]:w.align;if("number"==typeof De)return De;switch(De){case"right":case"end":return-Te;case"center":case"centre":case"middle":return.5*-Te}return 0})),null==this.baseline&&null==_.baseline&&(_.baseline=0),null!=_.baseline&&(this.baseline=_.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Te,Ie){var De=(w.font[Ie]||w.font[0]).metrics,Fe=0;return-1*((Fe+=.5*De.bottom)+("number"==typeof Te?Te-De.baseline:-De[Te]))})),null!=_.color)if(_.color||(_.color="transparent"),"string"!=typeof _.color&&isNaN(_.color)){var be;if("number"==typeof _.color[0]&&_.color.length>this.counts.length){var he=_.color.length;be=a.mallocUint8(he);for(var _e=(_.color.subarray||_.color.slice).bind(_.color),Ce=0;Ce<he;Ce+=4)be.set(r(_e(Ce,Ce+4),"uint8"),Ce)}else{var Ee=_.color.length;be=a.mallocUint8(4*Ee);for(var Ae=0;Ae<Ee;Ae++)be.set(r(_.color[Ae]||0,"uint8"),4*Ae)}this.color=be}else this.color=r(_.color,"uint8");if(_.position||_.text||_.color||_.baseline||_.align||_.font||_.offset||_.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ze=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ze);for(var ve=0;ve<this.batch.length;ve++)this.batch[ve]={count:this.counts.length>1?this.counts[ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ve,4*ve+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ve]:this.opacity,baseline:null!=this.baselineOffset[ve]?this.baselineOffset[ve]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ve]?this.alignOffset[ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ve,2*ve+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},T.prototype.destroy=function(){},T.prototype.kerning=!0,T.prototype.position={constant:new Float32Array(2)},T.prototype.translate=null,T.prototype.scale=null,T.prototype.font=null,T.prototype.text="",T.prototype.positionOffset=[0,0],T.prototype.opacity=1,T.prototype.color=new Uint8Array([0,0,0,255]),T.prototype.alignOffset=[0,0],T.maxAtlasSize=1024,T.atlasCanvas=document.createElement("canvas"),T.atlasContext=T.atlasCanvas.getContext("2d",{alpha:!1}),T.baseFontSize=64,T.fonts={},re.exports=T},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(v,re,ne){(function(g){(function(){"use strict";var m=v("pick-by-alias");function b(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*g.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*g.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}function y(r){return"function"==typeof r.getContext&&"width"in r&&"height"in r}function e(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}re.exports=function(r){var n,t;if(r?"string"==typeof r&&(r={container:r}):r={},(r=y(r)||"string"==typeof(n=r).nodeName&&"function"==typeof n.appendChild&&"function"==typeof n.getBoundingClientRect?{container:r}:"function"==typeof(t=r).drawArrays||"function"==typeof t.drawElements?{gl:r}:m(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(r.pixelRatio=g.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if("string"==typeof r.container){var a=document.querySelector(r.container);if(!a)throw Error("Element "+r.container+" is not found");r.container=a}y(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=e(),r.container.appendChild(r.canvas),b(r))}else if(!r.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");r.container=document.body||document.documentElement,r.canvas=e(),r.container.appendChild(r.canvas),b(r)}return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(t){try{r.gl=r.canvas.getContext(t,r.attrs)}catch{}return r.gl}),r.gl}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(v,re,ne){re.exports=function(g){"string"==typeof g&&(g=[g]);for(var m=[].slice.call(arguments,1),b=[],y=0;y<g.length-1;y++)b.push(g[y],m[y]||"");return b.push(g[y]),b.join("")}},{}],228:[function(v,re,ne){(function(g){(function(){"use strict";var m,b=v("is-browser");m="function"==typeof g.matchMedia?!g.matchMedia("(hover: none)").matches:b,re.exports=m}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(v,re,ne){"use strict";var g=v("is-browser");re.exports=g&&function(){var m=!1;try{var b=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,b),window.removeEventListener("test",null,b)}catch{m=!1}return m}()},{"is-browser":232}],230:[function(v,re,ne){ne.read=function(g,m,b,y,e){var r,n,a=8*e-y-1,t=(1<<a)-1,p=t>>1,s=-7,i=b?e-1:0,f=b?-1:1,c=g[m+i];for(i+=f,r=c&(1<<-s)-1,c>>=-s,s+=a;s>0;r=256*r+g[m+i],i+=f,s-=8);for(n=r&(1<<-s)-1,r>>=-s,s+=y;s>0;n=256*n+g[m+i],i+=f,s-=8);if(0===r)r=1-p;else{if(r===t)return n?NaN:1/0*(c?-1:1);n+=Math.pow(2,y),r-=p}return(c?-1:1)*n*Math.pow(2,r-y)},ne.write=function(g,m,b,y,e,r){var n,a,t,p=8*r-e-1,s=(1<<p)-1,i=s>>1,f=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=y?0:r-1,l=y?1:-1,h=m<0||0===m&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(a=isNaN(m)?1:0,n=s):(n=Math.floor(Math.log(m)/Math.LN2),m*(t=Math.pow(2,-n))<1&&(n--,t*=2),(m+=n+i>=1?f/t:f*Math.pow(2,1-i))*t>=2&&(n++,t/=2),n+i>=s?(a=0,n=s):n+i>=1?(a=(m*t-1)*Math.pow(2,e),n+=i):(a=m*Math.pow(2,i-1)*Math.pow(2,e),n=0));e>=8;g[b+c]=255&a,c+=l,a/=256,e-=8);for(n=n<<e|a,p+=e;p>0;g[b+c]=255&n,c+=l,n/=256,p-=8);g[b+c-l]|=128*h}},{}],231:[function(v,re,ne){re.exports="function"==typeof Object.create?function(g,m){m&&(g.super_=m,g.prototype=Object.create(m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,m){if(m){g.super_=m;var b=function(){};b.prototype=m.prototype,g.prototype=new b,g.prototype.constructor=g}}},{}],232:[function(v,re,ne){re.exports=!0},{}],233:[function(v,re,ne){"use strict";re.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(v,re,ne){"use strict";re.exports=b,re.exports.isMobile=b,re.exports.default=b;var g=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function b(y){y||(y={});var e=y.ua;if(e||typeof navigator>"u"||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=y.tablet?m.test(e):g.test(e);return!r&&y.tablet&&y.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},{}],235:[function(v,re,ne){"use strict";re.exports=function(g){var m=typeof g;return null!==g&&("object"===m||"function"===m)}},{}],236:[function(v,re,ne){"use strict";var g=Object.prototype.toString;re.exports=function(m){var b;return"[object Object]"===g.call(m)&&(null===(b=Object.getPrototypeOf(m))||b===Object.getPrototypeOf({}))}},{}],237:[function(v,re,ne){"use strict";re.exports=function(g){for(var m,b=g.length,y=0;y<b;y++)if(((m=g.charCodeAt(y))<9||m>13)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(m<8192||m>8205)&&8232!==m&&8233!==m&&8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],238:[function(v,re,ne){"use strict";re.exports=function(g){return"string"==typeof g&&(g=g.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(g)&&/[\dz]$/i.test(g)&&g.length>4))}},{}],239:[function(v,re,ne){var g,m;g=this,m=function(){"use strict";var g,m,b;function y(e,r){if(g)if(m){var n="var sharedChunk = {}; ("+g+")(sharedChunk); ("+m+")(sharedChunk);",a={};g(a),(b=r(a)).workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}else m=r;else g=r}return y(0,function(e){function r(A,F){return A(F={exports:{}},F.exports),F.exports}var n=a;function a(A,F,$,ue){this.cx=3*A,this.bx=3*($-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*F,this.by=3*(ue-F)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=ue,this.p2x=$,this.p2y=ue}a.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},a.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},a.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},a.prototype.solveCurveX=function(A,F){var $,ue,xe,Me,Re;for(void 0===F&&(F=1e-6),xe=A,Re=0;Re<8;Re++){if(Me=this.sampleCurveX(xe)-A,Math.abs(Me)<F)return xe;var Ze=this.sampleCurveDerivativeX(xe);if(Math.abs(Ze)<1e-6)break;xe-=Me/Ze}if((xe=A)<($=0))return $;if(xe>(ue=1))return ue;for(;$<ue;){if(Me=this.sampleCurveX(xe),Math.abs(Me-A)<F)return xe;A>Me?$=xe:ue=xe,xe=.5*(ue-$)+$}return xe},a.prototype.solve=function(A,F){return this.sampleCurveY(this.solveCurveX(A,F))};var t=p;function p(A,F){this.x=A,this.y=F}function s(A,F,$,ue){var xe=new n(A,F,$,ue);return function(Me){return xe.solve(Me)}}p.prototype={clone:function(){return new p(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,F){return this.clone()._rotateAround(A,F)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var F=A.x-this.x,$=A.y-this.y;return F*F+$*$},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,F){return Math.atan2(this.x*F-this.y*A,this.x*A+this.y*F)},_matMult:function(A){var $=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=$,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var F=Math.cos(A),$=Math.sin(A),xe=$*this.x+F*this.y;return this.x=F*this.x-$*this.y,this.y=xe,this},_rotateAround:function(A,F){var $=Math.cos(A),ue=Math.sin(A),Me=F.y+ue*(this.x-F.x)+$*(this.y-F.y);return this.x=F.x+$*(this.x-F.x)-ue*(this.y-F.y),this.y=Me,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(A){return A instanceof p?A:Array.isArray(A)?new p(A[0],A[1]):A};var i=s(.25,.1,.25,1);function f(A,F,$){return Math.min($,Math.max(F,A))}function c(A,F,$){var ue=$-F,xe=((A-F)%ue+ue)%ue+F;return xe===F?$:xe}function l(A){for(var F=[],$=arguments.length-1;$-- >0;)F[$]=arguments[$+1];for(var ue=0,xe=F;ue<xe.length;ue+=1){var Me=xe[ue];for(var Re in Me)A[Re]=Me[Re]}return A}var h=1;function d(){return h++}function o(){return function A(F){return F?(F^16*Math.random()>>F/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function x(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function u(A,F){A.forEach(function($){F[$]&&(F[$]=F[$].bind(F))})}function T(A,F){return-1!==A.indexOf(F,A.length-F.length)}function _(A,F,$){var ue={};for(var xe in A)ue[xe]=F.call($||this,A[xe],xe,A);return ue}function w(A,F,$){var ue={};for(var xe in A)F.call($||this,A[xe],xe,A)&&(ue[xe]=A[xe]);return ue}function M(A){return Array.isArray(A)?A.map(M):"object"==typeof A&&A?_(A,M):A}var I={};function S(A){I[A]||(typeof console<"u"&&console.warn(A),I[A]=!0)}function R(A,F,$){return($.y-A.y)*(F.x-A.x)>(F.y-A.y)*($.x-A.x)}function O(A){for(var F=0,$=0,ue=A.length,xe=ue-1,Me=void 0,Re=void 0;$<ue;xe=$++)F+=((Re=A[xe]).x-(Me=A[$]).x)*(Me.y+Re.y);return F}function C(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function D(A){var F={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ue,xe,Me,Re){var Ze=Me||Re;return F[xe]=!Ze||Ze.toLowerCase(),""}),F["max-age"]){var $=parseInt(F["max-age"],10);isNaN($)?delete F["max-age"]:F["max-age"]=$}return F}var B=null;function z(A){if(null==B){var F=A.navigator?A.navigator.userAgent:null;B=!!A.safari||!(!F||!(/\b(iPad|iPhone|iPod)\b/.test(F)||F.match("Safari")&&!F.match("Chrome")))}return B}function Y(A){try{var F=self[A];return F.setItem("_mapbox_test_",1),F.removeItem("_mapbox_test_"),!0}catch{return!1}}var G,J,te,X,K=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),ae=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,U=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,V={now:K,frame:function(A){var F=ae(A);return{cancel:function(){return U(F)}}},getImageData:function(A,F){void 0===F&&(F=0);var $=self.document.createElement("canvas"),ue=$.getContext("2d");if(!ue)throw new Error("failed to create canvas 2d context");return $.width=A.width,$.height=A.height,ue.drawImage(A,0,0,A.width,A.height),ue.getImageData(-F,-F,A.width+2*F,A.height+2*F)},resolveURL:function(A){return G||(G=self.document.createElement("a")),G.href=A,G.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==J&&(J=self.matchMedia("(prefers-reduced-motion: reduce)")),J.matches)}},q={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ie={supported:!1,testSupport:function(A){H||!X||(ee?Q(A):te=A)}},H=!1,ee=!1;function Q(A){var F=A.createTexture();A.bindTexture(A.TEXTURE_2D,F);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,X),A.isContextLost())return;ie.supported=!0}catch{}A.deleteTexture(F),H=!0}self.document&&((X=self.document.createElement("img")).onload=function(){te&&Q(te),te=null,ee=!0},X.onerror=function(){H=!0,te=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var oe="01",le=function(A,F){this._transformRequestFn=A,this._customAccessToken=F,this._createSkuToken()};function de(A){return 0===A.indexOf("mapbox:")}le.prototype._createSkuToken=function(){var A=function(){for(var F="",$=0;$<10;$++)F+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",oe,F].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},le.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},le.prototype.transformRequest=function(A,F){return this._transformRequestFn&&this._transformRequestFn(A,F)||{url:A}},le.prototype.normalizeStyleURL=function(A,F){if(!de(A))return A;var $=_e(A);return $.path="/styles/v1"+$.path,this._makeAPIURL($,this._customAccessToken||F)},le.prototype.normalizeGlyphsURL=function(A,F){if(!de(A))return A;var $=_e(A);return $.path="/fonts/v1"+$.path,this._makeAPIURL($,this._customAccessToken||F)},le.prototype.normalizeSourceURL=function(A,F){if(!de(A))return A;var $=_e(A);return $.path="/v4/"+$.authority+".json",$.params.push("secure"),this._makeAPIURL($,this._customAccessToken||F)},le.prototype.normalizeSpriteURL=function(A,F,$,ue){var xe=_e(A);return de(A)?(xe.path="/styles/v1"+xe.path+"/sprite"+F+$,this._makeAPIURL(xe,this._customAccessToken||ue)):(xe.path+=""+F+$,Ce(xe))},le.prototype.normalizeTileURL=function(A,F){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!de(A))return A;var $=_e(A);$.path=$.path.replace(/(\.(png|jpg)\d*)(?=$)/,(V.devicePixelRatio>=2||512===F?"@2x":"")+(ie.supported?".webp":"$1")),$.path=$.path.replace(/^.+\/v4\//,"/"),$.path="/v4"+$.path;var Me=this._customAccessToken||function(Re){for(var Ze=0,st=Re;Ze<st.length;Ze+=1){var yt=st[Ze].match(/^access_token=(.*)$/);if(yt)return yt[1]}return null}($.params)||q.ACCESS_TOKEN;return q.REQUIRE_ACCESS_TOKEN&&Me&&this._skuToken&&$.params.push("sku="+this._skuToken),this._makeAPIURL($,Me)},le.prototype.canonicalizeTileURL=function(A,F){var $=_e(A);if(!$.path.match(/(^\/v4\/)/)||!$.path.match(/\.[\w]+$/))return A;var ue="mapbox://tiles/";ue+=$.path.replace("/v4/","");var xe=$.params;return F&&(xe=xe.filter(function(Me){return!Me.match(/^access_token=/)})),xe.length&&(ue+="?"+xe.join("&")),ue},le.prototype.canonicalizeTileset=function(A,F){for(var $=!!F&&de(F),ue=[],xe=0,Me=A.tiles||[];xe<Me.length;xe+=1){var Re=Me[xe];be(Re)?ue.push(this.canonicalizeTileURL(Re,$)):ue.push(Re)}return ue},le.prototype._makeAPIURL=function(A,F){var $="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ue=_e(q.API_URL);if(A.protocol=ue.protocol,A.authority=ue.authority,"/"!==ue.path&&(A.path=""+ue.path+A.path),!q.REQUIRE_ACCESS_TOKEN)return Ce(A);if(!(F=F||q.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+$);if("s"===F[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+$);return A.params=A.params.filter(function(xe){return-1===xe.indexOf("access_token")}),A.params.push("access_token="+F),Ce(A)};var fe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function be(A){return fe.test(A)}var he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _e(A){var F=A.match(he);if(!F)throw new Error("Unable to parse URL object");return{protocol:F[1],authority:F[2],path:F[3]||"/",params:F[4]?F[4].split("&"):[]}}function Ce(A){var F=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+F}function Ee(A){if(!A)return null;var $=A.split(".");if(!$||3!==$.length)return null;try{return JSON.parse(decodeURIComponent(self.atob($[1]).split("").map(function(ue){return"%"+("00"+ue.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ae=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ae.prototype.getStorageKey=function(A){var ue,$=Ee(q.ACCESS_TOKEN);return ue=$&&$.u?self.btoa(encodeURIComponent($.u).replace(/%([0-9A-F]{2})/g,function(xe,Me){return String.fromCharCode(Number("0x"+Me))})):q.ACCESS_TOKEN||"",A?"mapbox.eventData."+A+":"+ue:"mapbox.eventData:"+ue},Ae.prototype.fetchEventData=function(){var A=Y("localStorage"),F=this.getStorageKey(),$=this.getStorageKey("uuid");if(A)try{var ue=self.localStorage.getItem(F);ue&&(this.eventData=JSON.parse(ue));var xe=self.localStorage.getItem($);xe&&(this.anonId=xe)}catch{S("Unable to read from LocalStorage")}},Ae.prototype.saveEventData=function(){var A=Y("localStorage"),F=this.getStorageKey(),$=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem($,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(F,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},Ae.prototype.processRequests=function(A){},Ae.prototype.postEvent=function(A,F,$,ue){var xe=this;if(q.EVENTS_URL){var Me=_e(q.EVENTS_URL);Me.params.push("access_token="+(ue||q.ACCESS_TOKEN||""));var Re={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:oe,userId:this.anonId},Ze=F?l(Re,F):Re,st={url:Ce(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ze])};this.pendingRequest=Xt(st,function(yt){xe.pendingRequest=null,$(yt),xe.saveEventData(),xe.processRequests(ue)})}},Ae.prototype.queueRequest=function(A,F){this.queue.push(A),this.processRequests(F)};var ze,ve,Te=function(A){function F(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.postMapLoadEvent=function($,ue,xe,Me){this.skuToken=xe,(q.EVENTS_URL&&Me||q.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(Re){return de(Re)||be(Re)}))&&this.queueRequest({id:ue,timestamp:Date.now()},Me)},F.prototype.processRequests=function($){var ue=this;if(!this.pendingRequest&&0!==this.queue.length){var xe=this.queue.shift(),Me=xe.id,Re=xe.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=o()),this.postEvent(Re,{skuToken:this.skuToken},function(Ze){Ze||Me&&(ue.success[Me]=!0)},$))}},F}(Ae),Ie=new(function(A){function F($){A.call(this,"appUserTurnstile"),this._customAccessToken=$}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.postTurnstileEvent=function($,ue){q.EVENTS_URL&&q.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(xe){return de(xe)||be(xe)})&&this.queueRequest(Date.now(),ue)},F.prototype.processRequests=function($){var ue=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var xe=Ee(q.ACCESS_TOKEN),Me=xe?xe.u:q.ACCESS_TOKEN,Re=Me!==this.eventData.tokenU;x(this.anonId)||(this.anonId=o(),Re=!0);var Ze=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),yt=new Date(Ze),At=(Ze-this.eventData.lastSuccess)/864e5;Re=Re||At>=1||At<-1||st.getDate()!==yt.getDate()}else Re=!0;if(!Re)return this.processRequests();this.postEvent(Ze,{"enabled.telemetry":!1},function(qt){qt||(ue.eventData.lastSuccess=Ze,ue.eventData.tokenU=Me)},$)}},F}(Ae)),De=Ie.postTurnstileEvent.bind(Ie),Fe=new Te,Ue=Fe.postMapLoadEvent.bind(Fe),qe=500,je=50;function rt(){self.caches&&!ze&&(ze=self.caches.open("mapbox-tiles"))}function Be(A){var F=A.indexOf("?");return F<0?A:A.slice(0,F)}var Ye,lt=1/0;function mt(){return null==Ye&&(Ye=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ye}var Tt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Tt);var It=function(A){function F($,ue,xe){401===ue&&be(xe)&&($+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,$),this.status=ue,this.url=xe,this.name=this.constructor.name,this.message=$}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},F}(Error),Ct=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ct(A,F){var $,ue=new self.AbortController,xe=new self.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Ct(),signal:ue.signal}),Me=!1,Re=!1,Ze=($=xe.url).indexOf("sku=")>0&&be($);"json"===A.type&&xe.headers.set("Accept","application/json");var st=function(At,qt,on){if(!Re){if(At&&"SecurityError"!==At.message&&S(At),qt&&on)return yt(qt);var Qt=Date.now();self.fetch(xe).then(function(xn){if(xn.ok){var Pn=Ze?xn.clone():null;return yt(xn,Pn,Qt)}return F(new It(xn.statusText,xn.status,A.url))}).catch(function(xn){20!==xn.code&&F(new Error(xn.message))})}},yt=function(At,qt,on){("arrayBuffer"===A.type?At.arrayBuffer():"json"===A.type?At.json():At.text()).then(function(Qt){Re||(qt&&on&&function Ne(A,F,$){if(rt(),ze){var ue={status:F.status,statusText:F.statusText,headers:new self.Headers};F.headers.forEach(function(Me,Re){return ue.headers.set(Re,Me)});var xe=D(F.headers.get("Cache-Control")||"");xe["no-store"]||(xe["max-age"]&&ue.headers.set("Expires",new Date($+1e3*xe["max-age"]).toUTCString()),new Date(ue.headers.get("Expires")).getTime()-$<42e4||function(Me,Re){if(void 0===ve)try{new Response(new ReadableStream),ve=!0}catch{ve=!1}ve?Re(Me.body):Me.blob().then(Re)}(F,function(Me){var Re=new self.Response(Me,ue);rt(),ze&&ze.then(function(Ze){return Ze.put(Be(A.url),Re)}).catch(function(Ze){return S(Ze.message)})}))}}(xe,qt,on),Me=!0,F(null,Qt,At.headers.get("Cache-Control"),At.headers.get("Expires")))}).catch(function(Qt){Re||F(new Error(Qt.message))})};return Ze?function We(A,F){if(rt(),!ze)return F(null);var $=Be(A.url);ze.then(function(ue){ue.match($).then(function(xe){var Me=function(Re){if(!Re)return!1;var Ze=new Date(Re.headers.get("Expires")||0),st=D(Re.headers.get("Cache-Control")||"");return Ze>Date.now()&&!st["no-cache"]}(xe);ue.delete($),Me&&ue.put($,xe.clone()),F(null,xe,Me)}).catch(F)}).catch(F)}(xe,st):st(null,null),{cancel:function(){Re=!0,Me||ue.abort()}}}var tn,hn,at=function(A,F){if(!(/^file:/.test($=A.url)||/^file:/.test(Ct())&&!/^\w+:/.test($))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ct(A,F);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,F,void 0,!0)}var $;return function(ue,xe){var Me=new self.XMLHttpRequest;for(var Re in Me.open(ue.method||"GET",ue.url,!0),"arrayBuffer"===ue.type&&(Me.responseType="arraybuffer"),ue.headers)Me.setRequestHeader(Re,ue.headers[Re]);return"json"===ue.type&&(Me.responseType="text",Me.setRequestHeader("Accept","application/json")),Me.withCredentials="include"===ue.credentials,Me.onerror=function(){xe(new Error(Me.statusText))},Me.onload=function(){if((Me.status>=200&&Me.status<300||0===Me.status)&&null!==Me.response){var Ze=Me.response;if("json"===ue.type)try{Ze=JSON.parse(Me.response)}catch(st){return xe(st)}xe(null,Ze,Me.getResponseHeader("Cache-Control"),Me.getResponseHeader("Expires"))}else xe(new It(Me.statusText,Me.status,ue.url))},Me.send(ue.body),{cancel:function(){return Me.abort()}}}(A,F)},St=function(A,F){return at(l(A,{type:"arrayBuffer"}),F)},Xt=function(A,F){return at(l(A,{method:"POST"}),F)};tn=[],hn=0;var cn=function(A,F){if(ie.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),hn>=q.MAX_PARALLEL_IMAGE_REQUESTS){var $={requestParameters:A,callback:F,cancelled:!1,cancel:function(){this.cancelled=!0}};return tn.push($),$}hn++;var ue=!1,xe=function(){if(!ue)for(ue=!0,hn--;tn.length&&hn<q.MAX_PARALLEL_IMAGE_REQUESTS;){var Re=tn.shift();Re.cancelled||(Re.cancel=cn(Re.requestParameters,Re.callback).cancel)}},Me=St(A,function(Re,Ze,st,yt){var qt,on;xe(),Re?F(Re):Ze&&(mt()?(qt=F,on=new self.Blob([new Uint8Array(Ze)],{type:"image/png"}),self.createImageBitmap(on).then(function(Qt){qt(null,Qt)}).catch(function(Qt){qt(new Error("Could not load image because of "+Qt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(At,qt,on,Qt){var xn=new self.Image,Pn=self.URL;xn.onload=function(){qt(null,xn),Pn.revokeObjectURL(xn.src)},xn.onerror=function(){return qt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Zn=new self.Blob([new Uint8Array(At)],{type:"image/png"});xn.cacheControl=on,xn.expires=Qt,xn.src=At.byteLength?Pn.createObjectURL(Zn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ze,F,st,yt))});return{cancel:function(){Me.cancel(),xe()}}};function yn(A,F,$){$[A]&&-1!==$[A].indexOf(F)||($[A]=$[A]||[],$[A].push(F))}function en(A,F,$){if($&&$[A]){var ue=$[A].indexOf(F);-1!==ue&&$[A].splice(ue,1)}}var Xe=function(A,F){void 0===F&&(F={}),l(this,F),this.type=A},tt=function(A){function F($,ue){void 0===ue&&(ue={}),A.call(this,"error",l({error:$},ue))}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F}(Xe),ye=function(){};ye.prototype.on=function(A,F){return this._listeners=this._listeners||{},yn(A,F,this._listeners),this},ye.prototype.off=function(A,F){return en(A,F,this._listeners),en(A,F,this._oneTimeListeners),this},ye.prototype.once=function(A,F){return this._oneTimeListeners=this._oneTimeListeners||{},yn(A,F,this._oneTimeListeners),this},ye.prototype.fire=function(A,F){"string"==typeof A&&(A=new Xe(A,F||{}));var $=A.type;if(this.listens($)){A.target=this;for(var ue=0,xe=this._listeners&&this._listeners[$]?this._listeners[$].slice():[];ue<xe.length;ue+=1)xe[ue].call(this,A);for(var Me=0,Re=this._oneTimeListeners&&this._oneTimeListeners[$]?this._oneTimeListeners[$].slice():[];Me<Re.length;Me+=1){var Ze=Re[Me];en($,Ze,this._oneTimeListeners),Ze.call(this,A)}var st=this._eventedParent;st&&(l(A,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),st.fire(A))}else A instanceof tt&&console.error(A.error);return this},ye.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},ye.prototype.setEventedParent=function(A,F){return this._eventedParent=A,this._eventedParentData=F,this};var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ve=function(A,F,$,ue){this.message=(A?A+": ":"")+$,ue&&(this.identifier=ue),null!=F&&F.__line__&&(this.line=F.__line__)};function Je(A){var $=A.value;return $?[new Ve(A.key,$,"constants have been deprecated as of v8")]:[]}function nt(A){for(var F=[],$=arguments.length-1;$-- >0;)F[$]=arguments[$+1];for(var ue=0,xe=F;ue<xe.length;ue+=1){var Me=xe[ue];for(var Re in Me)A[Re]=Me[Re]}return A}function Ke(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function vt(A){if(Array.isArray(A))return A.map(vt);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var F={};for(var $ in A)F[$]=vt(A[$]);return F}return Ke(A)}var gt=function(A){function F($,ue){A.call(this,ue),this.message=ue,this.key=$}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F}(Error),Ot=function(A,F){void 0===F&&(F=[]),this.parent=A,this.bindings={};for(var $=0,ue=F;$<ue.length;$+=1){var xe=ue[$];this.bindings[xe[0]]=xe[1]}};Ot.prototype.concat=function(A){return new Ot(this,A)},Ot.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},Ot.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Vt={kind:"null"},ft={kind:"number"},bt={kind:"string"},Wt={kind:"boolean"},Pt={kind:"color"},Bt={kind:"object"},Pe={kind:"value"},et={kind:"collator"},dt={kind:"formatted"},xt={kind:"resolvedImage"};function Rt(A,F){return{kind:"array",itemType:A,N:F}}function Yt(A){if("array"===A.kind){var F=Yt(A.itemType);return"number"==typeof A.N?"array<"+F+", "+A.N+">":"value"===A.itemType.kind?"array":"array<"+F+">"}return A.kind}var nn=[Vt,ft,bt,Wt,Pt,dt,Bt,Rt(Pe),xt];function Kt(A,F){if("error"===F.kind)return null;if("array"===A.kind){if("array"===F.kind&&(0===F.N&&"value"===F.itemType.kind||!Kt(A.itemType,F.itemType))&&("number"!=typeof A.N||A.N===F.N))return null}else{if(A.kind===F.kind)return null;if("value"===A.kind)for(var $=0,ue=nn;$<ue.length;$+=1)if(!Kt(ue[$],F))return null}return"Expected "+Yt(A)+" but found "+Yt(F)+" instead."}function Mn(A,F){return F.some(function($){return $.kind===A.kind})}function Un(A,F){return F.some(function($){return"null"===$?null===A:"array"===$?Array.isArray(A):"object"===$?A&&!Array.isArray(A)&&"object"==typeof A:$===typeof A})}var Tn=r(function(A,F){var $={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ue(st){return(st=Math.round(st))<0?0:st>255?255:st}function Me(st){return ue("%"===st[st.length-1]?parseFloat(st)/100*255:parseInt(st))}function Re(st){return function xe(st){return st<0?0:st>1?1:st}("%"===st[st.length-1]?parseFloat(st)/100:parseFloat(st))}function Ze(st,yt,At){return At<0?At+=1:At>1&&(At-=1),6*At<1?st+(yt-st)*At*6:2*At<1?yt:3*At<2?st+(yt-st)*(2/3-At)*6:st}try{F.parseCSSColor=function(st){var yt,At=st.replace(/ /g,"").toLowerCase();if(At in $)return $[At].slice();if("#"===At[0])return 4===At.length?(yt=parseInt(At.substr(1),16))>=0&&yt<=4095?[(3840&yt)>>4|(3840&yt)>>8,240&yt|(240&yt)>>4,15&yt|(15&yt)<<4,1]:null:7===At.length&&(yt=parseInt(At.substr(1),16))>=0&&yt<=16777215?[(16711680&yt)>>16,(65280&yt)>>8,255&yt,1]:null;var qt=At.indexOf("("),on=At.indexOf(")");if(-1!==qt&&on+1===At.length){var Qt=At.substr(0,qt),xn=At.substr(qt+1,on-(qt+1)).split(","),Pn=1;switch(Qt){case"rgba":if(4!==xn.length)return null;Pn=Re(xn.pop());case"rgb":return 3!==xn.length?null:[Me(xn[0]),Me(xn[1]),Me(xn[2]),Pn];case"hsla":if(4!==xn.length)return null;Pn=Re(xn.pop());case"hsl":if(3!==xn.length)return null;var Zn=(parseFloat(xn[0])%360+360)%360/360,Wn=Re(xn[1]),nr=Re(xn[2]),ir=nr<=.5?nr*(Wn+1):nr+Wn-nr*Wn,ur=2*nr-ir;return[ue(255*Ze(ur,ir,Zn+1/3)),ue(255*Ze(ur,ir,Zn)),ue(255*Ze(ur,ir,Zn-1/3)),Pn];default:return null}}return null}}catch{}}).parseCSSColor,un=function(A,F,$,ue){void 0===ue&&(ue=1),this.r=A,this.g=F,this.b=$,this.a=ue};un.parse=function(A){if(A){if(A instanceof un)return A;if("string"==typeof A){var F=Tn(A);if(F)return new un(F[0]/255*F[3],F[1]/255*F[3],F[2]/255*F[3],F[3])}}},un.prototype.toString=function(){var A=this.toArray(),$=A[1],ue=A[2],xe=A[3];return"rgba("+Math.round(A[0])+","+Math.round($)+","+Math.round(ue)+","+xe+")"},un.prototype.toArray=function(){var ue=this.a;return 0===ue?[0,0,0,0]:[255*this.r/ue,255*this.g/ue,255*this.b/ue,ue]},un.black=new un(0,0,0,1),un.white=new un(1,1,1,1),un.transparent=new un(0,0,0,0),un.red=new un(1,0,0,1);var an=function(A,F,$){this.sensitivity=A?F?"variant":"case":F?"accent":"base",this.locale=$,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};an.prototype.compare=function(A,F){return this.collator.compare(A,F)},an.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var fn=function(A,F,$,ue,xe){this.text=A,this.image=F,this.scale=$,this.fontStack=ue,this.textColor=xe},pn=function(A){this.sections=A};pn.fromString=function(A){return new pn([new fn(A,null,null,null,null)])},pn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(A){return 0!==A.text.length||A.image&&0!==A.image.name.length})},pn.factory=function(A){return A instanceof pn?A:pn.fromString(A)},pn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(A){return A.text}).join("")},pn.prototype.serialize=function(){for(var A=["format"],F=0,$=this.sections;F<$.length;F+=1){var ue=$[F];if(ue.image)A.push(["image",ue.image.name]);else{A.push(ue.text);var xe={};ue.fontStack&&(xe["text-font"]=["literal",ue.fontStack.split(",")]),ue.scale&&(xe["font-scale"]=ue.scale),ue.textColor&&(xe["text-color"]=["rgba"].concat(ue.textColor.toArray())),A.push(xe)}}return A};var Sn=function(A){this.name=A.name,this.available=A.available};function Nn(A,F,$,ue){return"number"==typeof A&&A>=0&&A<=255&&"number"==typeof F&&F>=0&&F<=255&&"number"==typeof $&&$>=0&&$<=255?void 0===ue||"number"==typeof ue&&ue>=0&&ue<=1?null:"Invalid rgba value ["+[A,F,$,ue].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ue?[A,F,$,ue]:[A,F,$]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Kn(A){if(null===A||"string"==typeof A||"boolean"==typeof A||"number"==typeof A||A instanceof un||A instanceof an||A instanceof pn||A instanceof Sn)return!0;if(Array.isArray(A)){for(var F=0,$=A;F<$.length;F+=1)if(!Kn($[F]))return!1;return!0}if("object"==typeof A){for(var ue in A)if(!Kn(A[ue]))return!1;return!0}return!1}function Bn(A){if(null===A)return Vt;if("string"==typeof A)return bt;if("boolean"==typeof A)return Wt;if("number"==typeof A)return ft;if(A instanceof un)return Pt;if(A instanceof an)return et;if(A instanceof pn)return dt;if(A instanceof Sn)return xt;if(Array.isArray(A)){for(var F,$=A.length,ue=0,xe=A;ue<xe.length;ue+=1){var Me=Bn(xe[ue]);if(F){if(F===Me)continue;F=Pe;break}F=Me}return Rt(F||Pe,$)}return Bt}function cr(A){var F=typeof A;return null===A?"":"string"===F||"number"===F||"boolean"===F?String(A):A instanceof un||A instanceof pn||A instanceof Sn?A.toString():JSON.stringify(A)}Sn.prototype.toString=function(){return this.name},Sn.fromString=function(A){return A?new Sn({name:A,available:!1}):null},Sn.prototype.serialize=function(){return["image",this.name]};var Lr=function(A,F){this.type=A,this.value=F};Lr.parse=function(A,F){if(2!==A.length)return F.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!Kn(A[1]))return F.error("invalid value");var $=A[1],ue=Bn($),xe=F.expectedType;return"array"!==ue.kind||0!==ue.N||!xe||"array"!==xe.kind||"number"==typeof xe.N&&0!==xe.N||(ue=xe),new Lr(ue,$)},Lr.prototype.evaluate=function(){return this.value},Lr.prototype.eachChild=function(){},Lr.prototype.outputDefined=function(){return!0},Lr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof un?["rgba"].concat(this.value.toArray()):this.value instanceof pn?this.value.serialize():this.value};var Qn=function(A){this.name="ExpressionEvaluationError",this.message=A};Qn.prototype.toJSON=function(){return this.message};var qr={string:bt,number:ft,boolean:Wt,object:Bt},sr=function(A,F){this.type=A,this.args=F};sr.parse=function(A,F){if(A.length<2)return F.error("Expected at least one argument.");var $,ue=1,xe=A[0];if("array"===xe){var Me,Re;if(A.length>2){var Ze=A[1];if("string"!=typeof Ze||!(Ze in qr)||"object"===Ze)return F.error('The item type argument of "array" must be one of string, number, boolean',1);Me=qr[Ze],ue++}else Me=Pe;if(A.length>3){if(null!==A[2]&&("number"!=typeof A[2]||A[2]<0||A[2]!==Math.floor(A[2])))return F.error('The length argument to "array" must be a positive integer literal',2);Re=A[2],ue++}$=Rt(Me,Re)}else $=qr[xe];for(var st=[];ue<A.length;ue++){var yt=F.parse(A[ue],ue,Pe);if(!yt)return null;st.push(yt)}return new sr($,st)},sr.prototype.evaluate=function(A){for(var F=0;F<this.args.length;F++){var $=this.args[F].evaluate(A);if(!Kt(this.type,Bn($)))return $;if(F===this.args.length-1)throw new Qn("Expected value to be of type "+Yt(this.type)+", but found "+Yt(Bn($))+" instead.")}return null},sr.prototype.eachChild=function(A){this.args.forEach(A)},sr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},sr.prototype.serialize=function(){var A=this.type,F=[A.kind];if("array"===A.kind){var $=A.itemType;if("string"===$.kind||"number"===$.kind||"boolean"===$.kind){F.push($.kind);var ue=A.N;("number"==typeof ue||this.args.length>1)&&F.push(ue)}}return F.concat(this.args.map(function(xe){return xe.serialize()}))};var hr=function(A){this.type=dt,this.sections=A};hr.parse=function(A,F){if(A.length<2)return F.error("Expected at least one argument.");var $=A[1];if(!Array.isArray($)&&"object"==typeof $)return F.error("First argument must be an image or text section.");for(var ue=[],xe=!1,Me=1;Me<=A.length-1;++Me){var Re=A[Me];if(xe&&"object"==typeof Re&&!Array.isArray(Re)){xe=!1;var Ze=null;if(Re["font-scale"]&&!(Ze=F.parse(Re["font-scale"],1,ft)))return null;var st=null;if(Re["text-font"]&&!(st=F.parse(Re["text-font"],1,Rt(bt))))return null;var yt=null;if(Re["text-color"]&&!(yt=F.parse(Re["text-color"],1,Pt)))return null;var At=ue[ue.length-1];At.scale=Ze,At.font=st,At.textColor=yt}else{var qt=F.parse(A[Me],1,Pe);if(!qt)return null;var on=qt.type.kind;if("string"!==on&&"value"!==on&&"null"!==on&&"resolvedImage"!==on)return F.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,ue.push({content:qt,scale:null,font:null,textColor:null})}}return new hr(ue)},hr.prototype.evaluate=function(A){return new pn(this.sections.map(function(F){var $=F.content.evaluate(A);return Bn($)===xt?new fn("",$,null,null,null):new fn(cr($),null,F.scale?F.scale.evaluate(A):null,F.font?F.font.evaluate(A).join(","):null,F.textColor?F.textColor.evaluate(A):null)}))},hr.prototype.eachChild=function(A){for(var F=0,$=this.sections;F<$.length;F+=1){var ue=$[F];A(ue.content),ue.scale&&A(ue.scale),ue.font&&A(ue.font),ue.textColor&&A(ue.textColor)}},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){for(var A=["format"],F=0,$=this.sections;F<$.length;F+=1){var ue=$[F];A.push(ue.content.serialize());var xe={};ue.scale&&(xe["font-scale"]=ue.scale.serialize()),ue.font&&(xe["text-font"]=ue.font.serialize()),ue.textColor&&(xe["text-color"]=ue.textColor.serialize()),A.push(xe)}return A};var jr=function(A){this.type=xt,this.input=A};jr.parse=function(A,F){if(2!==A.length)return F.error("Expected two arguments.");var $=F.parse(A[1],1,bt);return $?new jr($):F.error("No image name provided.")},jr.prototype.evaluate=function(A){var F=this.input.evaluate(A),$=Sn.fromString(F);return $&&A.availableImages&&($.available=A.availableImages.indexOf(F)>-1),$},jr.prototype.eachChild=function(A){A(this.input)},jr.prototype.outputDefined=function(){return!1},jr.prototype.serialize=function(){return["image",this.input.serialize()]};var di={"to-boolean":Wt,"to-color":Pt,"to-number":ft,"to-string":bt},Jn=function(A,F){this.type=A,this.args=F};Jn.parse=function(A,F){if(A.length<2)return F.error("Expected at least one argument.");var $=A[0];if(("to-boolean"===$||"to-string"===$)&&2!==A.length)return F.error("Expected one argument.");for(var ue=di[$],xe=[],Me=1;Me<A.length;Me++){var Re=F.parse(A[Me],Me,Pe);if(!Re)return null;xe.push(Re)}return new Jn(ue,xe)},Jn.prototype.evaluate=function(A){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(A));if("color"===this.type.kind){for(var F,$,ue=0,xe=this.args;ue<xe.length;ue+=1){if($=null,(F=xe[ue].evaluate(A))instanceof un)return F;if("string"==typeof F){var Me=A.parseColor(F);if(Me)return Me}else if(Array.isArray(F)&&!($=F.length<3||F.length>4?"Invalid rbga value "+JSON.stringify(F)+": expected an array containing either three or four numeric values.":Nn(F[0],F[1],F[2],F[3])))return new un(F[0]/255,F[1]/255,F[2]/255,F[3])}throw new Qn($||"Could not parse color from value '"+("string"==typeof F?F:String(JSON.stringify(F)))+"'")}if("number"===this.type.kind){for(var Re=null,Ze=0,st=this.args;Ze<st.length;Ze+=1){if(null===(Re=st[Ze].evaluate(A)))return 0;var yt=Number(Re);if(!isNaN(yt))return yt}throw new Qn("Could not convert "+JSON.stringify(Re)+" to number.")}return"formatted"===this.type.kind?pn.fromString(cr(this.args[0].evaluate(A))):"resolvedImage"===this.type.kind?Sn.fromString(cr(this.args[0].evaluate(A))):cr(this.args[0].evaluate(A))},Jn.prototype.eachChild=function(A){this.args.forEach(A)},Jn.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Jn.prototype.serialize=function(){if("formatted"===this.type.kind)return new hr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new jr(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(F){A.push(F.serialize())}),A};var Ar=["Unknown","Point","LineString","Polygon"],mr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};mr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},mr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ar[this.feature.type]:this.feature.type:null},mr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},mr.prototype.canonicalID=function(){return this.canonical},mr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},mr.prototype.parseColor=function(A){var F=this._parseColorCache[A];return F||(F=this._parseColorCache[A]=un.parse(A)),F};var lr=function(A,F,$,ue){this.name=A,this.type=F,this._evaluate=$,this.args=ue};lr.prototype.evaluate=function(A){return this._evaluate(A,this.args)},lr.prototype.eachChild=function(A){this.args.forEach(A)},lr.prototype.outputDefined=function(){return!1},lr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},lr.parse=function(A,F){var $,ue=A[0],xe=lr.definitions[ue];if(!xe)return F.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(xe)?xe[0]:xe.type,Re=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,Ze=Re.filter(function(Ci){var xi=Ci[0];return!Array.isArray(xi)||xi.length===A.length-1}),st=null,yt=0,At=Ze;yt<At.length;yt+=1){var qt=At[yt],on=qt[0],Qt=qt[1];st=new xr(F.registry,F.path,null,F.scope);for(var xn=[],Pn=!1,Zn=1;Zn<A.length;Zn++){var Wn=A[Zn],nr=Array.isArray(on)?on[Zn-1]:on.type,ir=st.parse(Wn,1+xn.length,nr);if(!ir){Pn=!0;break}xn.push(ir)}if(!Pn)if(Array.isArray(on)&&on.length!==xn.length)st.error("Expected "+on.length+" arguments, but found "+xn.length+" instead.");else{for(var ur=0;ur<xn.length;ur++){var kr=Array.isArray(on)?on[ur]:on.type,Pr=xn[ur];st.concat(ur+1).checkSubtype(kr,Pr.type)}if(0===st.errors.length)return new lr(ue,Me,Qt,xn)}}if(1===Ze.length)($=F.errors).push.apply($,st.errors);else{for(var Qr=(Ze.length?Ze:Re).map(function(Ci){var xi;return xi=Ci[0],Array.isArray(xi)?"("+xi.map(Yt).join(", ")+")":"("+Yt(xi.type)+"...)"}).join(" | "),ei=[],fi=1;fi<A.length;fi++){var Ti=F.parse(A[fi],1+ei.length);if(!Ti)return null;ei.push(Yt(Ti.type))}F.error("Expected arguments of type "+Qr+", but found ("+ei.join(", ")+") instead.")}return null},lr.register=function(A,F){for(var $ in lr.definitions=F,F)A[$]=lr};var ri=function(A,F,$){this.type=et,this.locale=$,this.caseSensitive=A,this.diacriticSensitive=F};function si(A,F){A[0]=Math.min(A[0],F[0]),A[1]=Math.min(A[1],F[1]),A[2]=Math.max(A[2],F[0]),A[3]=Math.max(A[3],F[1])}function Tr(A,F){return!(A[0]<=F[0]||A[2]>=F[2]||A[1]<=F[1]||A[3]>=F[3])}function Zr(A,F){var ue=(180+A[0])/360,xe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,Me=Math.pow(2,F.z);return[Math.round(ue*Me*8192),Math.round(xe*Me*8192)]}function Ii(A,F,$){return F[1]>A[1]!=$[1]>A[1]&&A[0]<($[0]-F[0])*(A[1]-F[1])/($[1]-F[1])+F[0]}function dn(A,F){for(var $,ue,xe,Me,Re,Ze,st,yt=!1,At=0,qt=F.length;At<qt;At++)for(var on=F[At],Qt=0,xn=on.length;Qt<xn-1;Qt++){if(void 0,void 0,void 0,void 0,(Me=($=A)[0]-(ue=on[Qt])[0])*(st=$[1]-(xe=on[Qt+1])[1])-(Ze=$[0]-xe[0])*(Re=$[1]-ue[1])==0&&Me*Ze<=0&&Re*st<=0)return!1;Ii(A,on[Qt],on[Qt+1])&&(yt=!yt)}return yt}function Cn(A,F){for(var $=0;$<F.length;$++)if(dn(A,F[$]))return!0;return!1}function jt(A,F,$,ue){var st=ue[0]-$[0],yt=ue[1]-$[1],At=(A[0]-$[0])*yt-st*(A[1]-$[1]),qt=(F[0]-$[0])*yt-st*(F[1]-$[1]);return At>0&&qt<0||At<0&&qt>0}function bn(A,F,$){for(var ue=0,xe=$;ue<xe.length;ue+=1)for(var Me=xe[ue],Re=0;Re<Me.length-1;++Re)if(void 0,void 0,(qt=[(At=Me[Re+1])[0]-(yt=Me[Re])[0],At[1]-yt[1]])[0]*(on=[(st=F)[0]-(Ze=A)[0],st[1]-Ze[1]])[1]-qt[1]*on[0]!=0&&jt(Ze,st,yt,At)&&jt(yt,At,Ze,st))return!0;var Ze,st,yt,At,qt,on;return!1}function An(A,F){for(var $=0;$<A.length;++$)if(!dn(A[$],F))return!1;for(var ue=0;ue<A.length-1;++ue)if(bn(A[ue],A[ue+1],F))return!1;return!0}function $n(A,F){for(var $=0;$<F.length;$++)if(An(A,F[$]))return!0;return!1}function Gn(A,F,$){for(var ue=[],xe=0;xe<A.length;xe++){for(var Me=[],Re=0;Re<A[xe].length;Re++){var Ze=Zr(A[xe][Re],$);si(F,Ze),Me.push(Ze)}ue.push(Me)}return ue}function zn(A,F,$){for(var ue=[],xe=0;xe<A.length;xe++){var Me=Gn(A[xe],F,$);ue.push(Me)}return ue}function Hn(A,F,$,ue){if(A[0]<$[0]||A[0]>$[2]){var xe=.5*ue,Me=A[0]-$[0]>xe?-ue:$[0]-A[0]>xe?ue:0;0===Me&&(Me=A[0]-$[2]>xe?-ue:$[2]-A[0]>xe?ue:0),A[0]+=Me}si(F,A)}function Ln(A,F,$,ue){for(var xe=8192*Math.pow(2,ue.z),Me=[8192*ue.x,8192*ue.y],Re=[],Ze=0,st=A;Ze<st.length;Ze+=1)for(var yt=0,At=st[Ze];yt<At.length;yt+=1){var qt=At[yt],on=[qt.x+Me[0],qt.y+Me[1]];Hn(on,F,$,xe),Re.push(on)}return Re}function On(A,F,$,ue){for(var xe,Me=8192*Math.pow(2,ue.z),Re=[8192*ue.x,8192*ue.y],Ze=[],st=0,yt=A;st<yt.length;st+=1){for(var At=[],qt=0,on=yt[st];qt<on.length;qt+=1){var Qt=on[qt],xn=[Qt.x+Re[0],Qt.y+Re[1]];si(F,xn),At.push(xn)}Ze.push(At)}if(F[2]-F[0]<=Me/2){(xe=F)[0]=xe[1]=1/0,xe[2]=xe[3]=-1/0;for(var Pn=0,Zn=Ze;Pn<Zn.length;Pn+=1)for(var Wn=0,nr=Zn[Pn];Wn<nr.length;Wn+=1)Hn(nr[Wn],F,$,Me)}return Ze}ri.parse=function(A,F){if(2!==A.length)return F.error("Expected one argument.");var $=A[1];if("object"!=typeof $||Array.isArray($))return F.error("Collator options argument must be an object.");var ue=F.parse(void 0!==$["case-sensitive"]&&$["case-sensitive"],1,Wt);if(!ue)return null;var xe=F.parse(void 0!==$["diacritic-sensitive"]&&$["diacritic-sensitive"],1,Wt);if(!xe)return null;var Me=null;return $.locale&&!(Me=F.parse($.locale,1,bt))?null:new ri(ue,xe,Me)},ri.prototype.evaluate=function(A){return new an(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},ri.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Dn=function(A,F){this.type=Wt,this.geojson=A,this.geometries=F};function Yn(A){if(A instanceof lr&&("get"===A.name&&1===A.args.length||"feature-state"===A.name||"has"===A.name&&1===A.args.length||"properties"===A.name||"geometry-type"===A.name||"id"===A.name||/^filter-/.test(A.name))||A instanceof Dn)return!1;var F=!0;return A.eachChild(function($){F&&!Yn($)&&(F=!1)}),F}function rr(A){if(A instanceof lr&&"feature-state"===A.name)return!1;var F=!0;return A.eachChild(function($){F&&!rr($)&&(F=!1)}),F}function ar(A,F){if(A instanceof lr&&F.indexOf(A.name)>=0)return!1;var $=!0;return A.eachChild(function(ue){$&&!ar(ue,F)&&($=!1)}),$}Dn.parse=function(A,F){if(2!==A.length)return F.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(Kn(A[1])){var $=A[1];if("FeatureCollection"===$.type)for(var ue=0;ue<$.features.length;++ue){var xe=$.features[ue].geometry.type;if("Polygon"===xe||"MultiPolygon"===xe)return new Dn($,$.features[ue].geometry)}else if("Feature"===$.type){var Me=$.geometry.type;if("Polygon"===Me||"MultiPolygon"===Me)return new Dn($,$.geometry)}else if("Polygon"===$.type||"MultiPolygon"===$.type)return new Dn($,$)}return F.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Dn.prototype.evaluate=function(A){if(null!=A.geometry()&&null!=A.canonicalID()){if("Point"===A.geometryType())return function(F,$){var ue=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Me=F.canonicalID();if("Polygon"===$.type){var Re=Gn($.coordinates,xe,Me),Ze=Ln(F.geometry(),ue,xe,Me);if(!Tr(ue,xe))return!1;for(var st=0,yt=Ze;st<yt.length;st+=1)if(!dn(yt[st],Re))return!1}if("MultiPolygon"===$.type){var At=zn($.coordinates,xe,Me),qt=Ln(F.geometry(),ue,xe,Me);if(!Tr(ue,xe))return!1;for(var on=0,Qt=qt;on<Qt.length;on+=1)if(!Cn(Qt[on],At))return!1}return!0}(A,this.geometries);if("LineString"===A.geometryType())return function(F,$){var ue=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Me=F.canonicalID();if("Polygon"===$.type){var Re=Gn($.coordinates,xe,Me),Ze=On(F.geometry(),ue,xe,Me);if(!Tr(ue,xe))return!1;for(var st=0,yt=Ze;st<yt.length;st+=1)if(!An(yt[st],Re))return!1}if("MultiPolygon"===$.type){var At=zn($.coordinates,xe,Me),qt=On(F.geometry(),ue,xe,Me);if(!Tr(ue,xe))return!1;for(var on=0,Qt=qt;on<Qt.length;on+=1)if(!$n(Qt[on],At))return!1}return!0}(A,this.geometries)}return!1},Dn.prototype.eachChild=function(){},Dn.prototype.outputDefined=function(){return!0},Dn.prototype.serialize=function(){return["within",this.geojson]};var vr=function(A,F){this.type=F.type,this.name=A,this.boundExpression=F};vr.parse=function(A,F){if(2!==A.length||"string"!=typeof A[1])return F.error("'var' expression requires exactly one string literal argument.");var $=A[1];return F.scope.has($)?new vr($,F.scope.get($)):F.error('Unknown variable "'+$+'". Make sure "'+$+'" has been bound in an enclosing "let" expression before using it.',1)},vr.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},vr.prototype.eachChild=function(){},vr.prototype.outputDefined=function(){return!1},vr.prototype.serialize=function(){return["var",this.name]};var xr=function(A,F,$,ue,xe){void 0===F&&(F=[]),void 0===ue&&(ue=new Ot),void 0===xe&&(xe=[]),this.registry=A,this.path=F,this.key=F.map(function(Me){return"["+Me+"]"}).join(""),this.scope=ue,this.errors=xe,this.expectedType=$};function Ir(A,F){for(var $,xe=A.length-1,Me=0,Re=xe,Ze=0;Me<=Re;)if(($=A[Ze=Math.floor((Me+Re)/2)])<=F){if(Ze===xe||F<A[Ze+1])return Ze;Me=Ze+1}else{if(!($>F))throw new Qn("Input is not a number.");Re=Ze-1}return 0}xr.prototype.parse=function(A,F,$,ue,xe){return void 0===xe&&(xe={}),F?this.concat(F,$,ue)._parse(A,xe):this._parse(A,xe)},xr.prototype._parse=function(A,F){function $(yt,At,qt){return"assert"===qt?new sr(At,[yt]):"coerce"===qt?new Jn(At,[yt]):yt}if(null!==A&&"string"!=typeof A&&"boolean"!=typeof A&&"number"!=typeof A||(A=["literal",A]),Array.isArray(A)){if(0===A.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ue=A[0];if("string"!=typeof ue)return this.error("Expression name must be a string, but found "+typeof ue+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[ue];if(xe){var Me=xe.parse(A,this);if(!Me)return null;if(this.expectedType){var Re=this.expectedType,Ze=Me.type;if("string"!==Re.kind&&"number"!==Re.kind&&"boolean"!==Re.kind&&"object"!==Re.kind&&"array"!==Re.kind||"value"!==Ze.kind)if("color"!==Re.kind&&"formatted"!==Re.kind&&"resolvedImage"!==Re.kind||"value"!==Ze.kind&&"string"!==Ze.kind){if(this.checkSubtype(Re,Ze))return null}else Me=$(Me,Re,F.typeAnnotation||"coerce");else Me=$(Me,Re,F.typeAnnotation||"assert")}if(!(Me instanceof Lr)&&"resolvedImage"!==Me.type.kind&&function yt(At){if(At instanceof vr)return yt(At.boundExpression);if(At instanceof lr&&"error"===At.name||At instanceof ri||At instanceof Dn)return!1;var qt=At instanceof Jn||At instanceof sr,on=!0;return At.eachChild(function(Qt){on=qt?on&&yt(Qt):on&&Qt instanceof Lr}),!!on&&Yn(At)&&ar(At,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Me)){var st=new mr;try{Me=new Lr(Me.type,Me.evaluate(st))}catch(yt){return this.error(yt.message),null}}return Me}return this.error('Unknown expression "'+ue+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===A?"'undefined' value invalid. Use null instead.":"object"==typeof A?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof A+" instead.")},xr.prototype.concat=function(A,F,$){var ue="number"==typeof A?this.path.concat(A):this.path,xe=$?this.scope.concat($):this.scope;return new xr(this.registry,ue,F||null,xe,this.errors)},xr.prototype.error=function(A){for(var F=[],$=arguments.length-1;$-- >0;)F[$]=arguments[$+1];var ue=""+this.key+F.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new gt(ue,A))},xr.prototype.checkSubtype=function(A,F){var $=Kt(A,F);return $&&this.error($),$};var Or=function(A,F,$){this.type=A,this.input=F,this.labels=[],this.outputs=[];for(var ue=0,xe=$;ue<xe.length;ue+=1){var Me=xe[ue],Ze=Me[1];this.labels.push(Me[0]),this.outputs.push(Ze)}};function Rr(A,F,$){return A*(1-$)+F*$}Or.parse=function(A,F){if(A.length-1<4)return F.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return F.error("Expected an even number of arguments.");var $=F.parse(A[1],1,ft);if(!$)return null;var ue=[],xe=null;F.expectedType&&"value"!==F.expectedType.kind&&(xe=F.expectedType);for(var Me=1;Me<A.length;Me+=2){var Re=1===Me?-1/0:A[Me],Ze=A[Me+1],st=Me,yt=Me+1;if("number"!=typeof Re)return F.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(ue.length&&ue[ue.length-1][0]>=Re)return F.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var At=F.parse(Ze,yt,xe);if(!At)return null;xe=xe||At.type,ue.push([Re,At])}return new Or(xe,$,ue)},Or.prototype.evaluate=function(A){var F=this.labels,$=this.outputs;if(1===F.length)return $[0].evaluate(A);var ue=this.input.evaluate(A);if(ue<=F[0])return $[0].evaluate(A);var xe=F.length;return ue>=F[xe-1]?$[xe-1].evaluate(A):$[Ir(F,ue)].evaluate(A)},Or.prototype.eachChild=function(A){A(this.input);for(var F=0,$=this.outputs;F<$.length;F+=1)A($[F])},Or.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Or.prototype.serialize=function(){for(var A=["step",this.input.serialize()],F=0;F<this.labels.length;F++)F>0&&A.push(this.labels[F]),A.push(this.outputs[F].serialize());return A};var Ur=Object.freeze({__proto__:null,number:Rr,color:function(A,F,$){return new un(Rr(A.r,F.r,$),Rr(A.g,F.g,$),Rr(A.b,F.b,$),Rr(A.a,F.a,$))},array:function(A,F,$){return A.map(function(ue,xe){return Rr(ue,F[xe],$)})}}),$r=6/29,gi=3*$r*$r,ai=Math.PI/180,Wi=180/Math.PI;function Br(A){return A>.008856451679035631?Math.pow(A,1/3):A/gi+4/29}function ui(A){return A>$r?A*A*A:gi*(A-4/29)}function mi(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function ya(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Wa(A){var F=ya(A.r),$=ya(A.g),ue=ya(A.b),xe=Br((.4124564*F+.3575761*$+.1804375*ue)/.95047),Me=Br((.2126729*F+.7151522*$+.072175*ue)/1);return{l:116*Me-16,a:500*(xe-Me),b:200*(Me-Br((.0193339*F+.119192*$+.9503041*ue)/1.08883)),alpha:A.a}}function Xa(A){var F=(A.l+16)/116,$=isNaN(A.a)?F:F+A.a/500,ue=isNaN(A.b)?F:F-A.b/200;return F=1*ui(F),$=.95047*ui($),ue=1.08883*ui(ue),new un(mi(3.2404542*$-1.5371385*F-.4985314*ue),mi(-.969266*$+1.8760108*F+.041556*ue),mi(.0556434*$-.2040259*F+1.0572252*ue),A.alpha)}function ws(A,F,$){var ue=F-A;return A+$*(ue>180||ue<-180?ue-360*Math.round(ue/360):ue)}var Va={forward:Wa,reverse:Xa,interpolate:function(A,F,$){return{l:Rr(A.l,F.l,$),a:Rr(A.a,F.a,$),b:Rr(A.b,F.b,$),alpha:Rr(A.alpha,F.alpha,$)}}},ua={forward:function(A){var F=Wa(A),$=F.l,ue=F.a,xe=F.b,Me=Math.atan2(xe,ue)*Wi;return{h:Me<0?Me+360:Me,c:Math.sqrt(ue*ue+xe*xe),l:$,alpha:A.a}},reverse:function(A){var F=A.h*ai,$=A.c;return Xa({l:A.l,a:Math.cos(F)*$,b:Math.sin(F)*$,alpha:A.alpha})},interpolate:function(A,F,$){return{h:ws(A.h,F.h,$),c:Rr(A.c,F.c,$),l:Rr(A.l,F.l,$),alpha:Rr(A.alpha,F.alpha,$)}}},sa=Object.freeze({__proto__:null,lab:Va,hcl:ua}),Ta=function(A,F,$,ue,xe){this.type=A,this.operator=F,this.interpolation=$,this.input=ue,this.labels=[],this.outputs=[];for(var Me=0,Re=xe;Me<Re.length;Me+=1){var Ze=Re[Me],yt=Ze[1];this.labels.push(Ze[0]),this.outputs.push(yt)}};function Ts(A,F,$,ue){var xe=ue-$,Me=A-$;return 0===xe?0:1===F?Me/xe:(Math.pow(F,Me)-1)/(Math.pow(F,xe)-1)}Ta.interpolationFactor=function(A,F,$,ue){var xe=0;if("exponential"===A.name)xe=Ts(F,A.base,$,ue);else if("linear"===A.name)xe=Ts(F,1,$,ue);else if("cubic-bezier"===A.name){var Me=A.controlPoints;xe=new n(Me[0],Me[1],Me[2],Me[3]).solve(Ts(F,1,$,ue))}return xe},Ta.parse=function(A,F){var $=A[0],ue=A[1],xe=A[2],Me=A.slice(3);if(!Array.isArray(ue)||0===ue.length)return F.error("Expected an interpolation type expression.",1);if("linear"===ue[0])ue={name:"linear"};else if("exponential"===ue[0]){var Re=ue[1];if("number"!=typeof Re)return F.error("Exponential interpolation requires a numeric base.",1,1);ue={name:"exponential",base:Re}}else{if("cubic-bezier"!==ue[0])return F.error("Unknown interpolation type "+String(ue[0]),1,0);var Ze=ue.slice(1);if(4!==Ze.length||Ze.some(function(Zn){return"number"!=typeof Zn||Zn<0||Zn>1}))return F.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ue={name:"cubic-bezier",controlPoints:Ze}}if(A.length-1<4)return F.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return F.error("Expected an even number of arguments.");if(!(xe=F.parse(xe,2,ft)))return null;var st=[],yt=null;"interpolate-hcl"===$||"interpolate-lab"===$?yt=Pt:F.expectedType&&"value"!==F.expectedType.kind&&(yt=F.expectedType);for(var At=0;At<Me.length;At+=2){var qt=Me[At],on=Me[At+1],Qt=At+3,xn=At+4;if("number"!=typeof qt)return F.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Qt);if(st.length&&st[st.length-1][0]>=qt)return F.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Qt);var Pn=F.parse(on,xn,yt);if(!Pn)return null;yt=yt||Pn.type,st.push([qt,Pn])}return"number"===yt.kind||"color"===yt.kind||"array"===yt.kind&&"number"===yt.itemType.kind&&"number"==typeof yt.N?new Ta(yt,$,ue,xe,st):F.error("Type "+Yt(yt)+" is not interpolatable.")},Ta.prototype.evaluate=function(A){var F=this.labels,$=this.outputs;if(1===F.length)return $[0].evaluate(A);var ue=this.input.evaluate(A);if(ue<=F[0])return $[0].evaluate(A);var xe=F.length;if(ue>=F[xe-1])return $[xe-1].evaluate(A);var Me=Ir(F,ue),st=Ta.interpolationFactor(this.interpolation,ue,F[Me],F[Me+1]),yt=$[Me].evaluate(A),At=$[Me+1].evaluate(A);return"interpolate"===this.operator?Ur[this.type.kind.toLowerCase()](yt,At,st):"interpolate-hcl"===this.operator?ua.reverse(ua.interpolate(ua.forward(yt),ua.forward(At),st)):Va.reverse(Va.interpolate(Va.forward(yt),Va.forward(At),st))},Ta.prototype.eachChild=function(A){A(this.input);for(var F=0,$=this.outputs;F<$.length;F+=1)A($[F])},Ta.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},Ta.prototype.serialize=function(){var A;A="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var F=[this.operator,A,this.input.serialize()],$=0;$<this.labels.length;$++)F.push(this.labels[$],this.outputs[$].serialize());return F};var Fo=function(A,F){this.type=A,this.args=F};Fo.parse=function(A,F){if(A.length<2)return F.error("Expectected at least one argument.");var $=null,ue=F.expectedType;ue&&"value"!==ue.kind&&($=ue);for(var xe=[],Me=0,Re=A.slice(1);Me<Re.length;Me+=1){var st=F.parse(Re[Me],1+xe.length,$,void 0,{typeAnnotation:"omit"});if(!st)return null;$=$||st.type,xe.push(st)}var yt=ue&&xe.some(function(At){return Kt(ue,At.type)});return new Fo(yt?Pe:$,xe)},Fo.prototype.evaluate=function(A){for(var F,$=null,ue=0,xe=0,Me=this.args;xe<Me.length&&(ue++,($=Me[xe].evaluate(A))&&$ instanceof Sn&&!$.available&&(F||(F=$.name),$=null,ue===this.args.length&&($=F)),null===$);xe+=1);return $},Fo.prototype.eachChild=function(A){this.args.forEach(A)},Fo.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Fo.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(F){A.push(F.serialize())}),A};var Xi=function(A,F){this.type=F.type,this.bindings=[].concat(A),this.result=F};Xi.prototype.evaluate=function(A){return this.result.evaluate(A)},Xi.prototype.eachChild=function(A){for(var F=0,$=this.bindings;F<$.length;F+=1)A($[F][1]);A(this.result)},Xi.parse=function(A,F){if(A.length<4)return F.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var $=[],ue=1;ue<A.length-1;ue+=2){var xe=A[ue];if("string"!=typeof xe)return F.error("Expected string, but found "+typeof xe+" instead.",ue);if(/[^a-zA-Z0-9_]/.test(xe))return F.error("Variable names must contain only alphanumeric characters or '_'.",ue);var Me=F.parse(A[ue+1],ue+1);if(!Me)return null;$.push([xe,Me])}var Re=F.parse(A[A.length-1],A.length-1,F.expectedType,$);return Re?new Xi($,Re):null},Xi.prototype.outputDefined=function(){return this.result.outputDefined()},Xi.prototype.serialize=function(){for(var A=["let"],F=0,$=this.bindings;F<$.length;F+=1){var ue=$[F];A.push(ue[0],ue[1].serialize())}return A.push(this.result.serialize()),A};var zo=function(A,F,$){this.type=A,this.index=F,this.input=$};zo.parse=function(A,F){if(3!==A.length)return F.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var $=F.parse(A[1],1,ft),ue=F.parse(A[2],2,Rt(F.expectedType||Pe));return $&&ue?new zo(ue.type.itemType,$,ue):null},zo.prototype.evaluate=function(A){var F=this.index.evaluate(A),$=this.input.evaluate(A);if(F<0)throw new Qn("Array index out of bounds: "+F+" < 0.");if(F>=$.length)throw new Qn("Array index out of bounds: "+F+" > "+($.length-1)+".");if(F!==Math.floor(F))throw new Qn("Array index must be an integer, but found "+F+" instead.");return $[F]},zo.prototype.eachChild=function(A){A(this.index),A(this.input)},zo.prototype.outputDefined=function(){return!1},zo.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var es=function(A,F){this.type=Wt,this.needle=A,this.haystack=F};es.parse=function(A,F){if(3!==A.length)return F.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var $=F.parse(A[1],1,Pe),ue=F.parse(A[2],2,Pe);return $&&ue?Mn($.type,[Wt,bt,ft,Vt,Pe])?new es($,ue):F.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt($.type)+" instead"):null},es.prototype.evaluate=function(A){var F=this.needle.evaluate(A),$=this.haystack.evaluate(A);if(!$)return!1;if(!Un(F,["boolean","string","number","null"]))throw new Qn("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Bn(F))+" instead.");if(!Un($,["string","array"]))throw new Qn("Expected second argument to be of type array or string, but found "+Yt(Bn($))+" instead.");return $.indexOf(F)>=0},es.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},es.prototype.outputDefined=function(){return!0},es.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var cs=function(A,F,$){this.type=ft,this.needle=A,this.haystack=F,this.fromIndex=$};cs.parse=function(A,F){if(A.length<=2||A.length>=5)return F.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var $=F.parse(A[1],1,Pe),ue=F.parse(A[2],2,Pe);if(!$||!ue)return null;if(!Mn($.type,[Wt,bt,ft,Vt,Pe]))return F.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt($.type)+" instead");if(4===A.length){var xe=F.parse(A[3],3,ft);return xe?new cs($,ue,xe):null}return new cs($,ue)},cs.prototype.evaluate=function(A){var F=this.needle.evaluate(A),$=this.haystack.evaluate(A);if(!Un(F,["boolean","string","number","null"]))throw new Qn("Expected first argument to be of type boolean, string, number or null, but found "+Yt(Bn(F))+" instead.");if(!Un($,["string","array"]))throw new Qn("Expected second argument to be of type array or string, but found "+Yt(Bn($))+" instead.");if(this.fromIndex){var ue=this.fromIndex.evaluate(A);return $.indexOf(F,ue)}return $.indexOf(F)},cs.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},cs.prototype.outputDefined=function(){return!1},cs.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Lo=function(A,F,$,ue,xe,Me){this.inputType=A,this.type=F,this.input=$,this.cases=ue,this.outputs=xe,this.otherwise=Me};Lo.parse=function(A,F){if(A.length<5)return F.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return F.error("Expected an even number of arguments.");var $,ue;F.expectedType&&"value"!==F.expectedType.kind&&(ue=F.expectedType);for(var xe={},Me=[],Re=2;Re<A.length-1;Re+=2){var Ze=A[Re],st=A[Re+1];Array.isArray(Ze)||(Ze=[Ze]);var yt=F.concat(Re);if(0===Ze.length)return yt.error("Expected at least one branch label.");for(var At=0,qt=Ze;At<qt.length;At+=1){var on=qt[At];if("number"!=typeof on&&"string"!=typeof on)return yt.error("Branch labels must be numbers or strings.");if("number"==typeof on&&Math.abs(on)>Number.MAX_SAFE_INTEGER)return yt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof on&&Math.floor(on)!==on)return yt.error("Numeric branch labels must be integer values.");if($){if(yt.checkSubtype($,Bn(on)))return null}else $=Bn(on);if(void 0!==xe[String(on)])return yt.error("Branch labels must be unique.");xe[String(on)]=Me.length}var Qt=F.parse(st,Re,ue);if(!Qt)return null;ue=ue||Qt.type,Me.push(Qt)}var xn=F.parse(A[1],1,Pe);if(!xn)return null;var Pn=F.parse(A[A.length-1],A.length-1,ue);return Pn?"value"!==xn.type.kind&&F.concat(1).checkSubtype($,xn.type)?null:new Lo($,ue,xn,xe,Me,Pn):null},Lo.prototype.evaluate=function(A){var F=this.input.evaluate(A);return(Bn(F)===this.inputType&&this.outputs[this.cases[F]]||this.otherwise).evaluate(A)},Lo.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},Lo.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},Lo.prototype.serialize=function(){for(var A=this,F=["match",this.input.serialize()],$=[],ue={},xe=0,Me=Object.keys(this.cases).sort();xe<Me.length;xe+=1){var Re=Me[xe];void 0===(qt=ue[this.cases[Re]])?(ue[this.cases[Re]]=$.length,$.push([this.cases[Re],[Re]])):$[qt][1].push(Re)}for(var Ze=function(Qt){return"number"===A.inputType.kind?Number(Qt):Qt},st=0,yt=$;st<yt.length;st+=1){var At=yt[st],qt=At[0],on=At[1];F.push(1===on.length?Ze(on[0]):on.map(Ze)),F.push(this.outputs[outputIndex$1].serialize())}return F.push(this.otherwise.serialize()),F};var Ua=function(A,F,$){this.type=A,this.branches=F,this.otherwise=$};Ua.parse=function(A,F){if(A.length<4)return F.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return F.error("Expected an odd number of arguments.");var $;F.expectedType&&"value"!==F.expectedType.kind&&($=F.expectedType);for(var ue=[],xe=1;xe<A.length-1;xe+=2){var Me=F.parse(A[xe],xe,Wt);if(!Me)return null;var Re=F.parse(A[xe+1],xe+1,$);if(!Re)return null;ue.push([Me,Re]),$=$||Re.type}var Ze=F.parse(A[A.length-1],A.length-1,$);return Ze?new Ua($,ue,Ze):null},Ua.prototype.evaluate=function(A){for(var F=0,$=this.branches;F<$.length;F+=1){var ue=$[F],Me=ue[1];if(ue[0].evaluate(A))return Me.evaluate(A)}return this.otherwise.evaluate(A)},Ua.prototype.eachChild=function(A){for(var F=0,$=this.branches;F<$.length;F+=1){var ue=$[F],Me=ue[1];A(ue[0]),A(Me)}A(this.otherwise)},Ua.prototype.outputDefined=function(){return this.branches.every(function(A){return A[1].outputDefined()})&&this.otherwise.outputDefined()},Ua.prototype.serialize=function(){var A=["case"];return this.eachChild(function(F){A.push(F.serialize())}),A};var Co=function(A,F,$,ue){this.type=A,this.input=F,this.beginIndex=$,this.endIndex=ue};function kl(A,F){return"=="===A||"!="===A?"boolean"===F.kind||"string"===F.kind||"number"===F.kind||"null"===F.kind||"value"===F.kind:"string"===F.kind||"number"===F.kind||"value"===F.kind}function fl(A,F,$,ue){return 0===ue.compare(F,$)}function Fa(A,F,$){var ue="=="!==A&&"!="!==A;return function(){function xe(Me,Re,Ze){this.type=Wt,this.lhs=Me,this.rhs=Re,this.collator=Ze,this.hasUntypedArgument="value"===Me.type.kind||"value"===Re.type.kind}return xe.parse=function(Me,Re){if(3!==Me.length&&4!==Me.length)return Re.error("Expected two or three arguments.");var Ze=Me[0],st=Re.parse(Me[1],1,Pe);if(!st)return null;if(!kl(Ze,st.type))return Re.concat(1).error('"'+Ze+"\" comparisons are not supported for type '"+Yt(st.type)+"'.");var yt=Re.parse(Me[2],2,Pe);if(!yt)return null;if(!kl(Ze,yt.type))return Re.concat(2).error('"'+Ze+"\" comparisons are not supported for type '"+Yt(yt.type)+"'.");if(st.type.kind!==yt.type.kind&&"value"!==st.type.kind&&"value"!==yt.type.kind)return Re.error("Cannot compare types '"+Yt(st.type)+"' and '"+Yt(yt.type)+"'.");ue&&("value"===st.type.kind&&"value"!==yt.type.kind?st=new sr(yt.type,[st]):"value"!==st.type.kind&&"value"===yt.type.kind&&(yt=new sr(st.type,[yt])));var At=null;if(4===Me.length){if("string"!==st.type.kind&&"string"!==yt.type.kind&&"value"!==st.type.kind&&"value"!==yt.type.kind)return Re.error("Cannot use collator to compare non-string types.");if(!(At=Re.parse(Me[3],3,et)))return null}return new xe(st,yt,At)},xe.prototype.evaluate=function(Me){var Re=this.lhs.evaluate(Me),Ze=this.rhs.evaluate(Me);if(ue&&this.hasUntypedArgument){var st=Bn(Re),yt=Bn(Ze);if(st.kind!==yt.kind||"string"!==st.kind&&"number"!==st.kind)throw new Qn('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+st.kind+", "+yt.kind+") instead.")}if(this.collator&&!ue&&this.hasUntypedArgument){var At=Bn(Re),qt=Bn(Ze);if("string"!==At.kind||"string"!==qt.kind)return F(Me,Re,Ze)}return this.collator?$(Me,Re,Ze,this.collator.evaluate(Me)):F(Me,Re,Ze)},xe.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},xe.prototype.outputDefined=function(){return!0},xe.prototype.serialize=function(){var Me=[A];return this.eachChild(function(Re){Me.push(Re.serialize())}),Me},xe}()}Co.parse=function(A,F){if(A.length<=2||A.length>=5)return F.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var $=F.parse(A[1],1,Pe),ue=F.parse(A[2],2,ft);if(!$||!ue)return null;if(!Mn($.type,[Rt(Pe),bt,Pe]))return F.error("Expected first argument to be of type array or string, but found "+Yt($.type)+" instead");if(4===A.length){var xe=F.parse(A[3],3,ft);return xe?new Co($.type,$,ue,xe):null}return new Co($.type,$,ue)},Co.prototype.evaluate=function(A){var F=this.input.evaluate(A),$=this.beginIndex.evaluate(A);if(!Un(F,["string","array"]))throw new Qn("Expected first argument to be of type array or string, but found "+Yt(Bn(F))+" instead.");if(this.endIndex){var ue=this.endIndex.evaluate(A);return F.slice($,ue)}return F.slice($)},Co.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Co.prototype.outputDefined=function(){return!1},Co.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var hl=Fa("==",function(A,F,$){return F===$},fl),$s=Fa("!=",function(A,F,$){return F!==$},function(A,F,$,ue){return!fl(0,F,$,ue)}),Os=Fa("<",function(A,F,$){return F<$},function(A,F,$,ue){return ue.compare(F,$)<0}),Rl=Fa(">",function(A,F,$){return F>$},function(A,F,$,ue){return ue.compare(F,$)>0}),ml=Fa("<=",function(A,F,$){return F<=$},function(A,F,$,ue){return ue.compare(F,$)<=0}),fs=Fa(">=",function(A,F,$){return F>=$},function(A,F,$,ue){return ue.compare(F,$)>=0}),oo=function(A,F,$,ue,xe){this.type=bt,this.number=A,this.locale=F,this.currency=$,this.minFractionDigits=ue,this.maxFractionDigits=xe};oo.parse=function(A,F){if(3!==A.length)return F.error("Expected two arguments.");var $=F.parse(A[1],1,ft);if(!$)return null;var ue=A[2];if("object"!=typeof ue||Array.isArray(ue))return F.error("NumberFormat options argument must be an object.");var xe=null;if(ue.locale&&!(xe=F.parse(ue.locale,1,bt)))return null;var Me=null;if(ue.currency&&!(Me=F.parse(ue.currency,1,bt)))return null;var Re=null;if(ue["min-fraction-digits"]&&!(Re=F.parse(ue["min-fraction-digits"],1,ft)))return null;var Ze=null;return ue["max-fraction-digits"]&&!(Ze=F.parse(ue["max-fraction-digits"],1,ft))?null:new oo($,xe,Me,Re,Ze)},oo.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},oo.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},oo.prototype.outputDefined=function(){return!1},oo.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var pa=function(A){this.type=ft,this.input=A};pa.parse=function(A,F){if(2!==A.length)return F.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var $=F.parse(A[1],1);return $?"array"!==$.type.kind&&"string"!==$.type.kind&&"value"!==$.type.kind?F.error("Expected argument of type string or array, but found "+Yt($.type)+" instead."):new pa($):null},pa.prototype.evaluate=function(A){var F=this.input.evaluate(A);if("string"==typeof F||Array.isArray(F))return F.length;throw new Qn("Expected value to be of type string or array, but found "+Yt(Bn(F))+" instead.")},pa.prototype.eachChild=function(A){A(this.input)},pa.prototype.outputDefined=function(){return!1},pa.prototype.serialize=function(){var A=["length"];return this.eachChild(function(F){A.push(F.serialize())}),A};var ho={"==":hl,"!=":$s,">":Rl,"<":Os,">=":fs,"<=":ml,array:sr,at:zo,boolean:sr,case:Ua,coalesce:Fo,collator:ri,format:hr,image:jr,in:es,"index-of":cs,interpolate:Ta,"interpolate-hcl":Ta,"interpolate-lab":Ta,length:pa,let:Xi,literal:Lr,match:Lo,number:sr,"number-format":oo,object:sr,slice:Co,step:Or,string:sr,"to-boolean":Jn,"to-color":Jn,"to-number":Jn,"to-string":Jn,var:vr,within:Dn};function po(A,F){var $=F[0],ue=F[1],xe=F[2],Me=F[3];$=$.evaluate(A),ue=ue.evaluate(A),xe=xe.evaluate(A);var Re=Me?Me.evaluate(A):1,Ze=Nn($,ue,xe,Re);if(Ze)throw new Qn(Ze);return new un($/255*Re,ue/255*Re,xe/255*Re,Re)}function ko(A,F){return A in F}function No(A,F){var $=F[A];return void 0===$?null:$}function hi(A){return{type:A}}function na(A){return{result:"success",value:A}}function Ma(A){return{result:"error",value:A}}function Ao(A){return"data-driven"===A["property-type"]||"cross-faded-data-driven"===A["property-type"]}function Rs(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function Qa(A){return!!A.expression&&A.expression.interpolated}function ga(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":null===A?"null":typeof A}function Ge(A){return"object"==typeof A&&null!==A&&!Array.isArray(A)}function Qe(A){return A}function ut(A,F,$){return void 0!==A?A:void 0!==F?F:void 0!==$?$:void 0}function ht(A,F,$,ue,xe){return ut(typeof $===xe?ue[$]:void 0,A.default,F.default)}function kt(A,F,$){if("number"!==ga($))return ut(A.default,F.default);var ue=A.stops.length;if(1===ue||$<=A.stops[0][0])return A.stops[0][1];if($>=A.stops[ue-1][0])return A.stops[ue-1][1];var xe=Ir(A.stops.map(function(Me){return Me[0]}),$);return A.stops[xe][1]}function Mt(A,F,$){var ue=void 0!==A.base?A.base:1;if("number"!==ga($))return ut(A.default,F.default);var xe=A.stops.length;if(1===xe||$<=A.stops[0][0])return A.stops[0][1];if($>=A.stops[xe-1][0])return A.stops[xe-1][1];var on,Qt,Pn,Zn,Me=Ir(A.stops.map(function(qt){return qt[0]}),$),Re=(on=ue,Zn=$-(Qt=A.stops[Me][0]),0==(Pn=A.stops[Me+1][0]-Qt)?0:1===on?Zn/Pn:(Math.pow(on,Zn)-1)/(Math.pow(on,Pn)-1)),Ze=A.stops[Me][1],st=A.stops[Me+1][1],yt=Ur[F.type]||Qe;if(A.colorSpace&&"rgb"!==A.colorSpace){var At=sa[A.colorSpace];yt=function(qt,on){return At.reverse(At.interpolate(At.forward(qt),At.forward(on),Re))}}return"function"==typeof Ze.evaluate?{evaluate:function(){for(var qt=[],on=arguments.length;on--;)qt[on]=arguments[on];var Qt=Ze.evaluate.apply(void 0,qt),xn=st.evaluate.apply(void 0,qt);if(void 0!==Qt&&void 0!==xn)return yt(Qt,xn,Re)}}:yt(Ze,st,Re)}function Nt(A,F,$){return"color"===F.type?$=un.parse($):"formatted"===F.type?$=pn.fromString($.toString()):"resolvedImage"===F.type?$=Sn.fromString($.toString()):ga($)===F.type||"enum"===F.type&&F.values[$]||($=void 0),ut($,A.default,F.default)}lr.register(ho,{error:[{kind:"error"},[bt],function(A,F){throw new Qn(F[0].evaluate(A))}],typeof:[bt,[Pe],function(A,F){return Yt(Bn(F[0].evaluate(A)))}],"to-rgba":[Rt(ft,4),[Pt],function(A,F){return F[0].evaluate(A).toArray()}],rgb:[Pt,[ft,ft,ft],po],rgba:[Pt,[ft,ft,ft,ft],po],has:{type:Wt,overloads:[[[bt],function(A,F){return ko(F[0].evaluate(A),A.properties())}],[[bt,Bt],function(A,F){var ue=F[1];return ko(F[0].evaluate(A),ue.evaluate(A))}]]},get:{type:Pe,overloads:[[[bt],function(A,F){return No(F[0].evaluate(A),A.properties())}],[[bt,Bt],function(A,F){var ue=F[1];return No(F[0].evaluate(A),ue.evaluate(A))}]]},"feature-state":[Pe,[bt],function(A,F){return No(F[0].evaluate(A),A.featureState||{})}],properties:[Bt,[],function(A){return A.properties()}],"geometry-type":[bt,[],function(A){return A.geometryType()}],id:[Pe,[],function(A){return A.id()}],zoom:[ft,[],function(A){return A.globals.zoom}],"heatmap-density":[ft,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[ft,[],function(A){return A.globals.lineProgress||0}],accumulated:[Pe,[],function(A){return void 0===A.globals.accumulated?null:A.globals.accumulated}],"+":[ft,hi(ft),function(A,F){for(var $=0,ue=0,xe=F;ue<xe.length;ue+=1)$+=xe[ue].evaluate(A);return $}],"*":[ft,hi(ft),function(A,F){for(var $=1,ue=0,xe=F;ue<xe.length;ue+=1)$*=xe[ue].evaluate(A);return $}],"-":{type:ft,overloads:[[[ft,ft],function(A,F){var ue=F[1];return F[0].evaluate(A)-ue.evaluate(A)}],[[ft],function(A,F){return-F[0].evaluate(A)}]]},"/":[ft,[ft,ft],function(A,F){var ue=F[1];return F[0].evaluate(A)/ue.evaluate(A)}],"%":[ft,[ft,ft],function(A,F){var ue=F[1];return F[0].evaluate(A)%ue.evaluate(A)}],ln2:[ft,[],function(){return Math.LN2}],pi:[ft,[],function(){return Math.PI}],e:[ft,[],function(){return Math.E}],"^":[ft,[ft,ft],function(A,F){var ue=F[1];return Math.pow(F[0].evaluate(A),ue.evaluate(A))}],sqrt:[ft,[ft],function(A,F){return Math.sqrt(F[0].evaluate(A))}],log10:[ft,[ft],function(A,F){return Math.log(F[0].evaluate(A))/Math.LN10}],ln:[ft,[ft],function(A,F){return Math.log(F[0].evaluate(A))}],log2:[ft,[ft],function(A,F){return Math.log(F[0].evaluate(A))/Math.LN2}],sin:[ft,[ft],function(A,F){return Math.sin(F[0].evaluate(A))}],cos:[ft,[ft],function(A,F){return Math.cos(F[0].evaluate(A))}],tan:[ft,[ft],function(A,F){return Math.tan(F[0].evaluate(A))}],asin:[ft,[ft],function(A,F){return Math.asin(F[0].evaluate(A))}],acos:[ft,[ft],function(A,F){return Math.acos(F[0].evaluate(A))}],atan:[ft,[ft],function(A,F){return Math.atan(F[0].evaluate(A))}],min:[ft,hi(ft),function(A,F){return Math.min.apply(Math,F.map(function($){return $.evaluate(A)}))}],max:[ft,hi(ft),function(A,F){return Math.max.apply(Math,F.map(function($){return $.evaluate(A)}))}],abs:[ft,[ft],function(A,F){return Math.abs(F[0].evaluate(A))}],round:[ft,[ft],function(A,F){var $=F[0].evaluate(A);return $<0?-Math.round(-$):Math.round($)}],floor:[ft,[ft],function(A,F){return Math.floor(F[0].evaluate(A))}],ceil:[ft,[ft],function(A,F){return Math.ceil(F[0].evaluate(A))}],"filter-==":[Wt,[bt,Pe],function(A,F){var $=F[0],ue=F[1];return A.properties()[$.value]===ue.value}],"filter-id-==":[Wt,[Pe],function(A,F){var $=F[0];return A.id()===$.value}],"filter-type-==":[Wt,[bt],function(A,F){var $=F[0];return A.geometryType()===$.value}],"filter-<":[Wt,[bt,Pe],function(A,F){var $=F[0],ue=F[1],xe=A.properties()[$.value],Me=ue.value;return typeof xe==typeof Me&&xe<Me}],"filter-id-<":[Wt,[Pe],function(A,F){var $=F[0],ue=A.id(),xe=$.value;return typeof ue==typeof xe&&ue<xe}],"filter->":[Wt,[bt,Pe],function(A,F){var $=F[0],ue=F[1],xe=A.properties()[$.value],Me=ue.value;return typeof xe==typeof Me&&xe>Me}],"filter-id->":[Wt,[Pe],function(A,F){var $=F[0],ue=A.id(),xe=$.value;return typeof ue==typeof xe&&ue>xe}],"filter-<=":[Wt,[bt,Pe],function(A,F){var $=F[0],ue=F[1],xe=A.properties()[$.value],Me=ue.value;return typeof xe==typeof Me&&xe<=Me}],"filter-id-<=":[Wt,[Pe],function(A,F){var $=F[0],ue=A.id(),xe=$.value;return typeof ue==typeof xe&&ue<=xe}],"filter->=":[Wt,[bt,Pe],function(A,F){var $=F[0],ue=F[1],xe=A.properties()[$.value],Me=ue.value;return typeof xe==typeof Me&&xe>=Me}],"filter-id->=":[Wt,[Pe],function(A,F){var $=F[0],ue=A.id(),xe=$.value;return typeof ue==typeof xe&&ue>=xe}],"filter-has":[Wt,[Pe],function(A,F){return F[0].value in A.properties()}],"filter-has-id":[Wt,[],function(A){return null!==A.id()&&void 0!==A.id()}],"filter-type-in":[Wt,[Rt(bt)],function(A,F){return F[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[Wt,[Rt(Pe)],function(A,F){return F[0].value.indexOf(A.id())>=0}],"filter-in-small":[Wt,[bt,Rt(Pe)],function(A,F){var $=F[0];return F[1].value.indexOf(A.properties()[$.value])>=0}],"filter-in-large":[Wt,[bt,Rt(Pe)],function(A,F){var $=F[0],ue=F[1];return function(xe,Me,Re,Ze){for(;Re<=Ze;){var st=Re+Ze>>1;if(Me[st]===xe)return!0;Me[st]>xe?Ze=st-1:Re=st+1}return!1}(A.properties()[$.value],ue.value,0,ue.value.length-1)}],all:{type:Wt,overloads:[[[Wt,Wt],function(A,F){var ue=F[1];return F[0].evaluate(A)&&ue.evaluate(A)}],[hi(Wt),function(A,F){for(var $=0,ue=F;$<ue.length;$+=1)if(!ue[$].evaluate(A))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],function(A,F){var ue=F[1];return F[0].evaluate(A)||ue.evaluate(A)}],[hi(Wt),function(A,F){for(var $=0,ue=F;$<ue.length;$+=1)if(ue[$].evaluate(A))return!0;return!1}]]},"!":[Wt,[Wt],function(A,F){return!F[0].evaluate(A)}],"is-supported-script":[Wt,[bt],function(A,F){var ue=A.globals&&A.globals.isSupportedScript;return!ue||ue(F[0].evaluate(A))}],upcase:[bt,[bt],function(A,F){return F[0].evaluate(A).toUpperCase()}],downcase:[bt,[bt],function(A,F){return F[0].evaluate(A).toLowerCase()}],concat:[bt,hi(Pe),function(A,F){return F.map(function($){return cr($.evaluate(A))}).join("")}],"resolved-locale":[bt,[et],function(A,F){return F[0].evaluate(A).resolvedLocale()}]});var ln=function(A,F){var $;this.expression=A,this._warningHistory={},this._evaluator=new mr,this._defaultValue=F?"color"===($=F).type&&Ge($.default)?new un(0,0,0,0):"color"===$.type?un.parse($.default)||null:void 0===$.default?null:$.default:null,this._enumValues=F&&"enum"===F.type?F.values:null};function sn(A){return Array.isArray(A)&&A.length>0&&"string"==typeof A[0]&&A[0]in ho}function rn(A,F){var xe,Me,$=new xr(ho,[],F?(Me={color:Pt,string:bt,number:ft,enum:bt,boolean:Wt,formatted:dt,resolvedImage:xt},"array"===(xe=F).type?Rt(Me[xe.value]||Pe,xe.length):Me[xe.type]):void 0),ue=$.parse(A,void 0,void 0,void 0,F&&"string"===F.type?{typeAnnotation:"coerce"}:void 0);return ue?na(new ln(ue,F)):Ma($.errors)}ln.prototype.evaluateWithoutErrorHandling=function(A,F,$,ue,xe,Me){return this._evaluator.globals=A,this._evaluator.feature=F,this._evaluator.featureState=$,this._evaluator.canonical=ue,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},ln.prototype.evaluate=function(A,F,$,ue,xe,Me){this._evaluator.globals=A,this._evaluator.feature=F||null,this._evaluator.featureState=$||null,this._evaluator.canonical=ue,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Me||null;try{var Re=this.expression.evaluate(this._evaluator);if(null==Re||"number"==typeof Re&&Re!=Re)return this._defaultValue;if(this._enumValues&&!(Re in this._enumValues))throw new Qn("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ze){return JSON.stringify(Ze)}).join(", ")+", but found "+JSON.stringify(Re)+" instead.");return Re}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,typeof console<"u"&&console.warn(Ze.message)),this._defaultValue}};var mn=function(A,F){this.kind=A,this._styleExpression=F,this.isStateDependent="constant"!==A&&!rr(F.expression)};mn.prototype.evaluateWithoutErrorHandling=function(A,F,$,ue,xe,Me){return this._styleExpression.evaluateWithoutErrorHandling(A,F,$,ue,xe,Me)},mn.prototype.evaluate=function(A,F,$,ue,xe,Me){return this._styleExpression.evaluate(A,F,$,ue,xe,Me)};var kn=function(A,F,$,ue){this.kind=A,this.zoomStops=$,this._styleExpression=F,this.isStateDependent="camera"!==A&&!rr(F.expression),this.interpolationType=ue};function In(A,F){if("error"===(A=rn(A,F)).result)return A;var $=A.value.expression,ue=Yn($);if(!ue&&!Ao(F))return Ma([new gt("","data expressions not supported")]);var xe=ar($,["zoom"]);if(!xe&&!Rs(F))return Ma([new gt("","zoom expressions not supported")]);var Me=function Ze(st){var yt=null;if(st instanceof Xi)yt=Ze(st.result);else if(st instanceof Fo)for(var At=0,qt=st.args;At<qt.length&&!(yt=Ze(qt[At]));At+=1);else(st instanceof Or||st instanceof Ta)&&st.input instanceof lr&&"zoom"===st.input.name&&(yt=st);return yt instanceof gt||st.eachChild(function(Qt){var xn=Ze(Qt);xn instanceof gt?yt=xn:!yt&&xn?yt=new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):yt&&xn&&yt!==xn&&(yt=new gt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),yt}($);return Me||xe?Me instanceof gt?Ma([Me]):Me instanceof Ta&&!Qa(F)?Ma([new gt("",'"interpolate" expressions cannot be used with this property')]):na(Me?new kn(ue?"camera":"composite",A.value,Me.labels,Me instanceof Ta?Me.interpolation:void 0):new mn(ue?"constant":"source",A.value)):Ma([new gt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}kn.prototype.evaluateWithoutErrorHandling=function(A,F,$,ue,xe,Me){return this._styleExpression.evaluateWithoutErrorHandling(A,F,$,ue,xe,Me)},kn.prototype.evaluate=function(A,F,$,ue,xe,Me){return this._styleExpression.evaluate(A,F,$,ue,xe,Me)},kn.prototype.interpolationFactor=function(A,F,$){return this.interpolationType?Ta.interpolationFactor(this.interpolationType,A,F,$):0};var Rn=function(A,F){this._parameters=A,this._specification=F,nt(this,function $(ue,xe){var Me,Re,Ze,st="color"===xe.type,yt=ue.stops&&"object"==typeof ue.stops[0][0],qt=yt||!(yt||void 0!==ue.property),on=ue.type||(Qa(xe)?"exponential":"interval");if(st&&((ue=nt({},ue)).stops&&(ue.stops=ue.stops.map(function(Ci){return[Ci[0],un.parse(Ci[1])]})),ue.default=un.parse(ue.default?ue.default:xe.default)),ue.colorSpace&&"rgb"!==ue.colorSpace&&!sa[ue.colorSpace])throw new Error("Unknown color space: "+ue.colorSpace);if("exponential"===on)Me=Mt;else if("interval"===on)Me=kt;else if("categorical"===on){Me=ht,Re=Object.create(null);for(var Qt=0,xn=ue.stops;Qt<xn.length;Qt+=1){var Pn=xn[Qt];Re[Pn[0]]=Pn[1]}Ze=typeof ue.stops[0][0]}else{if("identity"!==on)throw new Error('Unknown function type "'+on+'"');Me=Nt}if(yt){for(var Zn={},Wn=[],nr=0;nr<ue.stops.length;nr++){var ir=ue.stops[nr],ur=ir[0].zoom;void 0===Zn[ur]&&(Zn[ur]={zoom:ur,type:ue.type,property:ue.property,default:ue.default,stops:[]},Wn.push(ur)),Zn[ur].stops.push([ir[0].value,ir[1]])}for(var kr=[],Pr=0,Qr=Wn;Pr<Qr.length;Pr+=1){var ei=Qr[Pr];kr.push([Zn[ei].zoom,$(Zn[ei],xe)])}var fi={name:"linear"};return{kind:"composite",interpolationType:fi,interpolationFactor:Ta.interpolationFactor.bind(void 0,fi),zoomStops:kr.map(function(Ci){return Ci[0]}),evaluate:function(Ci,xi){var Ni=Ci.zoom;return Mt({stops:kr,base:ue.base},xe,Ni).evaluate(Ni,xi)}}}if(qt){var Ti="exponential"===on?{name:"exponential",base:void 0!==ue.base?ue.base:1}:null;return{kind:"camera",interpolationType:Ti,interpolationFactor:Ta.interpolationFactor.bind(void 0,Ti),zoomStops:ue.stops.map(function(Ci){return Ci[0]}),evaluate:function(Ci){return Me(ue,xe,Ci.zoom,Re,Ze)}}}return{kind:"source",evaluate:function(Ci,xi){var Ni=xi&&xi.properties?xi.properties[ue.property]:void 0;return void 0===Ni?ut(ue.default,xe.default):Me(ue,xe,Ni,Re,Ze)}}}(this._parameters,this._specification))};function jn(A){var F=A.key,$=A.value,ue=A.valueSpec||{},xe=A.objectElementValidators||{},Me=A.style,Re=A.styleSpec,Ze=[],st=ga($);if("object"!==st)return[new Ve(F,$,"object expected, "+st+" found")];for(var yt in $){var At=yt.split(".")[0],qt=ue[At]||ue["*"],on=void 0;if(xe[At])on=xe[At];else if(ue[At])on=_n;else if(xe["*"])on=xe["*"];else{if(!ue["*"]){Ze.push(new Ve(F,$[yt],'unknown property "'+yt+'"'));continue}on=_n}Ze=Ze.concat(on({key:(F&&F+".")+yt,value:$[yt],valueSpec:qt,style:Me,styleSpec:Re,object:$,objectKey:yt},$))}for(var Qt in ue)xe[Qt]||ue[Qt].required&&void 0===ue[Qt].default&&void 0===$[Qt]&&Ze.push(new Ve(F,$,'missing required property "'+Qt+'"'));return Ze}function br(A){var F=A.value,$=A.valueSpec,ue=A.style,xe=A.styleSpec,Me=A.key,Re=A.arrayElementValidator||_n;if("array"!==ga(F))return[new Ve(Me,F,"array expected, "+ga(F)+" found")];if($.length&&F.length!==$.length)return[new Ve(Me,F,"array length "+$.length+" expected, length "+F.length+" found")];if($["min-length"]&&F.length<$["min-length"])return[new Ve(Me,F,"array length at least "+$["min-length"]+" expected, length "+F.length+" found")];var Ze={type:$.value,values:$.values};xe.$version<7&&(Ze.function=$.function),"object"===ga($.value)&&(Ze=$.value);for(var st=[],yt=0;yt<F.length;yt++)st=st.concat(Re({array:F,arrayIndex:yt,value:F[yt],valueSpec:Ze,style:ue,styleSpec:xe,key:Me+"["+yt+"]"}));return st}function Cr(A){var F=A.key,$=A.value,ue=A.valueSpec,xe=ga($);return"number"===xe&&$!=$&&(xe="NaN"),"number"!==xe?[new Ve(F,$,"number expected, "+xe+" found")]:"minimum"in ue&&$<ue.minimum?[new Ve(F,$,$+" is less than the minimum value "+ue.minimum)]:"maximum"in ue&&$>ue.maximum?[new Ve(F,$,$+" is greater than the maximum value "+ue.maximum)]:[]}function Hr(A){var F,$,ue,xe=A.valueSpec,Me=Ke(A.value.type),Re={},Ze="categorical"!==Me&&void 0===A.value.property,st=!Ze,yt="array"===ga(A.value.stops)&&"array"===ga(A.value.stops[0])&&"object"===ga(A.value.stops[0][0]),At=jn({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(Qt){if("identity"===Me)return[new Ve(Qt.key,Qt.value,'identity function may not have a "stops" property')];var xn=[],Pn=Qt.value;return xn=xn.concat(br({key:Qt.key,value:Pn,valueSpec:Qt.valueSpec,style:Qt.style,styleSpec:Qt.styleSpec,arrayElementValidator:qt})),"array"===ga(Pn)&&0===Pn.length&&xn.push(new Ve(Qt.key,Pn,"array must have at least one stop")),xn},default:function(Qt){return _n({key:Qt.key,value:Qt.value,valueSpec:xe,style:Qt.style,styleSpec:Qt.styleSpec})}}});return"identity"===Me&&Ze&&At.push(new Ve(A.key,A.value,'missing required property "property"')),"identity"===Me||A.value.stops||At.push(new Ve(A.key,A.value,'missing required property "stops"')),"exponential"===Me&&A.valueSpec.expression&&!Qa(A.valueSpec)&&At.push(new Ve(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(st&&!Ao(A.valueSpec)?At.push(new Ve(A.key,A.value,"property functions not supported")):Ze&&!Rs(A.valueSpec)&&At.push(new Ve(A.key,A.value,"zoom functions not supported"))),"categorical"!==Me&&!yt||void 0!==A.value.property||At.push(new Ve(A.key,A.value,'"property" property is required')),At;function qt(Qt){var xn=[],Pn=Qt.value,Zn=Qt.key;if("array"!==ga(Pn))return[new Ve(Zn,Pn,"array expected, "+ga(Pn)+" found")];if(2!==Pn.length)return[new Ve(Zn,Pn,"array length 2 expected, length "+Pn.length+" found")];if(yt){if("object"!==ga(Pn[0]))return[new Ve(Zn,Pn,"object expected, "+ga(Pn[0])+" found")];if(void 0===Pn[0].zoom)return[new Ve(Zn,Pn,"object stop key must have zoom")];if(void 0===Pn[0].value)return[new Ve(Zn,Pn,"object stop key must have value")];if(ue&&ue>Ke(Pn[0].zoom))return[new Ve(Zn,Pn[0].zoom,"stop zoom values must appear in ascending order")];Ke(Pn[0].zoom)!==ue&&(ue=Ke(Pn[0].zoom),$=void 0,Re={}),xn=xn.concat(jn({key:Zn+"[0]",value:Pn[0],valueSpec:{zoom:{}},style:Qt.style,styleSpec:Qt.styleSpec,objectElementValidators:{zoom:Cr,value:on}}))}else xn=xn.concat(on({key:Zn+"[0]",value:Pn[0],valueSpec:{},style:Qt.style,styleSpec:Qt.styleSpec},Pn));return sn(vt(Pn[1]))?xn.concat([new Ve(Zn+"[1]",Pn[1],"expressions are not allowed in function stops.")]):xn.concat(_n({key:Zn+"[1]",value:Pn[1],valueSpec:xe,style:Qt.style,styleSpec:Qt.styleSpec}))}function on(Qt,xn){var Pn=ga(Qt.value),Zn=Ke(Qt.value),Wn=null!==Qt.value?Qt.value:xn;if(F){if(Pn!==F)return[new Ve(Qt.key,Wn,Pn+" stop domain type must match previous stop domain type "+F)]}else F=Pn;if("number"!==Pn&&"string"!==Pn&&"boolean"!==Pn)return[new Ve(Qt.key,Wn,"stop domain value must be a number, string, or boolean")];if("number"!==Pn&&"categorical"!==Me){var nr="number expected, "+Pn+" found";return Ao(xe)&&void 0===Me&&(nr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ve(Qt.key,Wn,nr)]}return"categorical"!==Me||"number"!==Pn||isFinite(Zn)&&Math.floor(Zn)===Zn?"categorical"!==Me&&"number"===Pn&&void 0!==$&&Zn<$?[new Ve(Qt.key,Wn,"stop domain values must appear in ascending order")]:($=Zn,"categorical"===Me&&Zn in Re?[new Ve(Qt.key,Wn,"stop domain values must be unique")]:(Re[Zn]=!0,[])):[new Ve(Qt.key,Wn,"integer expected, found "+Zn)]}}function Kr(A){var F=("property"===A.expressionContext?In:rn)(vt(A.value),A.valueSpec);if("error"===F.result)return F.value.map(function(ue){return new Ve(""+A.key+ue.key,A.value,ue.message)});var $=F.value.expression||F.value._styleExpression.expression;if("property"===A.expressionContext&&"text-font"===A.propertyKey&&!$.outputDefined())return[new Ve(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===A.expressionContext&&"layout"===A.propertyType&&!rr($))return[new Ve(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===A.expressionContext&&!rr($))return[new Ve(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&0===A.expressionContext.indexOf("cluster")){if(!ar($,["zoom","feature-state"]))return[new Ve(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===A.expressionContext&&!Yn($))return[new Ve(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oi(A){var F=A.key,$=A.value,ue=A.valueSpec,xe=[];return Array.isArray(ue.values)?-1===ue.values.indexOf(Ke($))&&xe.push(new Ve(F,$,"expected one of ["+ue.values.join(", ")+"], "+JSON.stringify($)+" found")):-1===Object.keys(ue.values).indexOf(Ke($))&&xe.push(new Ve(F,$,"expected one of ["+Object.keys(ue.values).join(", ")+"], "+JSON.stringify($)+" found")),xe}function Xr(A){if(!0===A||!1===A)return!0;if(!Array.isArray(A)||0===A.length)return!1;switch(A[0]){case"has":return A.length>=2&&"$id"!==A[1]&&"$type"!==A[1];case"in":return A.length>=3&&("string"!=typeof A[1]||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==A.length||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var F=0,$=A.slice(1);F<$.length;F+=1){var ue=$[F];if(!Xr(ue)&&"boolean"!=typeof ue)return!1}return!0;default:return!0}}Rn.deserialize=function(A){return new Rn(A._parameters,A._specification)},Rn.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var Oi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zi(A){if(null==A)return{filter:function(){return!0},needGeometry:!1};Xr(A)||(A=Ki(A));var F=rn(A,Oi);if("error"===F.result)throw new Error(F.value.map(function($){return $.key+": "+$.message}).join(", "));return{filter:function($,ue,xe){return F.value.evaluate($,ue,{},xe)},needGeometry:function $(ue){if(!Array.isArray(ue))return!1;if("within"===ue[0])return!0;for(var xe=1;xe<ue.length;xe++)if($(ue[xe]))return!0;return!1}(A)}}function Ea(A,F){return A<F?-1:A>F?1:0}function Ki(A){if(!A)return!0;var F,$=A[0];return A.length<=1?"any"!==$:"=="===$?ra(A[1],A[2],"=="):"!="===$?Ha(ra(A[1],A[2],"==")):"<"===$||">"===$||"<="===$||">="===$?ra(A[1],A[2],$):"any"===$?(F=A.slice(1),["any"].concat(F.map(Ki))):"all"===$?["all"].concat(A.slice(1).map(Ki)):"none"===$?["all"].concat(A.slice(1).map(Ki).map(Ha)):"in"===$?go(A[1],A.slice(2)):"!in"===$?Ha(go(A[1],A.slice(2))):"has"===$?io(A[1]):"!has"===$?Ha(io(A[1])):"within"!==$||A}function ra(A,F,$){switch(A){case"$type":return["filter-type-"+$,F];case"$id":return["filter-id-"+$,F];default:return["filter-"+$,A,F]}}function go(A,F){if(0===F.length)return!1;switch(A){case"$type":return["filter-type-in",["literal",F]];case"$id":return["filter-id-in",["literal",F]];default:return F.length>200&&!F.some(function($){return typeof $!=typeof F[0]})?["filter-in-large",A,["literal",F.sort(Ea)]]:["filter-in-small",A,["literal",F]]}}function io(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Ha(A){return["!",A]}function xa(A){return Xr(vt(A.value))?Kr(nt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function F($){var ue=$.value,xe=$.key;if("array"!==ga(ue))return[new Ve(xe,ue,"array expected, "+ga(ue)+" found")];var Me,Re=$.styleSpec,Ze=[];if(ue.length<1)return[new Ve(xe,ue,"filter array must have at least 1 element")];switch(Ze=Ze.concat(oi({key:xe+"[0]",value:ue[0],valueSpec:Re.filter_operator,style:$.style,styleSpec:$.styleSpec})),Ke(ue[0])){case"<":case"<=":case">":case">=":ue.length>=2&&"$type"===Ke(ue[1])&&Ze.push(new Ve(xe,ue,'"$type" cannot be use with operator "'+ue[0]+'"'));case"==":case"!=":3!==ue.length&&Ze.push(new Ve(xe,ue,'filter array for operator "'+ue[0]+'" must have 3 elements'));case"in":case"!in":ue.length>=2&&"string"!==(Me=ga(ue[1]))&&Ze.push(new Ve(xe+"[1]",ue[1],"string expected, "+Me+" found"));for(var st=2;st<ue.length;st++)Me=ga(ue[st]),"$type"===Ke(ue[1])?Ze=Ze.concat(oi({key:xe+"["+st+"]",value:ue[st],valueSpec:Re.geometry_type,style:$.style,styleSpec:$.styleSpec})):"string"!==Me&&"number"!==Me&&"boolean"!==Me&&Ze.push(new Ve(xe+"["+st+"]",ue[st],"string, number, or boolean expected, "+Me+" found"));break;case"any":case"all":case"none":for(var yt=1;yt<ue.length;yt++)Ze=Ze.concat(F({key:xe+"["+yt+"]",value:ue[yt],style:$.style,styleSpec:$.styleSpec}));break;case"has":case"!has":Me=ga(ue[1]),2!==ue.length?Ze.push(new Ve(xe,ue,'filter array for "'+ue[0]+'" operator must have 2 elements')):"string"!==Me&&Ze.push(new Ve(xe+"[1]",ue[1],"string expected, "+Me+" found"));break;case"within":Me=ga(ue[1]),2!==ue.length?Ze.push(new Ve(xe,ue,'filter array for "'+ue[0]+'" operator must have 2 elements')):"object"!==Me&&Ze.push(new Ve(xe+"[1]",ue[1],"object expected, "+Me+" found"))}return Ze}(A)}function xo(A,F){var $=A.key,ue=A.style,xe=A.styleSpec,Me=A.value,Re=A.objectKey,Ze=xe[F+"_"+A.layerType];if(!Ze)return[];var st=Re.match(/^(.*)-transition$/);if("paint"===F&&st&&Ze[st[1]]&&Ze[st[1]].transition)return _n({key:$,value:Me,valueSpec:xe.transition,style:ue,styleSpec:xe});var yt,At=A.valueSpec||Ze[Re];if(!At)return[new Ve($,Me,'unknown property "'+Re+'"')];if("string"===ga(Me)&&Ao(At)&&!At.tokens&&(yt=/^{([^}]+)}$/.exec(Me)))return[new Ve($,Me,'"'+Re+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(yt[1])+" }`.")];var qt=[];return"symbol"===A.layerType&&("text-field"===Re&&ue&&!ue.glyphs&&qt.push(new Ve($,Me,'use of "text-field" requires a style "glyphs" property')),"text-font"===Re&&Ge(vt(Me))&&"identity"===Ke(Me.type)&&qt.push(new Ve($,Me,'"text-font" does not support identity functions'))),qt.concat(_n({key:A.key,value:Me,valueSpec:At,style:ue,styleSpec:xe,expressionContext:"property",propertyType:F,propertyKey:Re}))}function Yo(A){return xo(A,"paint")}function ts(A){return xo(A,"layout")}function ns(A){var F=[],$=A.value,ue=A.key,xe=A.style,Me=A.styleSpec;$.type||$.ref||F.push(new Ve(ue,$,'either "type" or "ref" is required'));var Re,Ze=Ke($.type),st=Ke($.ref);if($.id)for(var yt=Ke($.id),At=0;At<A.arrayIndex;At++){var qt=xe.layers[At];Ke(qt.id)===yt&&F.push(new Ve(ue,$.id,'duplicate layer id "'+$.id+'", previously used at line '+qt.id.__line__))}if("ref"in $)["type","source","source-layer","filter","layout"].forEach(function(xn){xn in $&&F.push(new Ve(ue,$[xn],'"'+xn+'" is prohibited for ref layers'))}),xe.layers.forEach(function(xn){Ke(xn.id)===st&&(Re=xn)}),Re?Re.ref?F.push(new Ve(ue,$.ref,"ref cannot reference another ref layer")):Ze=Ke(Re.type):F.push(new Ve(ue,$.ref,'ref layer "'+st+'" not found'));else if("background"!==Ze)if($.source){var on=xe.sources&&xe.sources[$.source],Qt=on&&Ke(on.type);on?"vector"===Qt&&"raster"===Ze?F.push(new Ve(ue,$.source,'layer "'+$.id+'" requires a raster source')):"raster"===Qt&&"raster"!==Ze?F.push(new Ve(ue,$.source,'layer "'+$.id+'" requires a vector source')):"vector"!==Qt||$["source-layer"]?"raster-dem"===Qt&&"hillshade"!==Ze?F.push(new Ve(ue,$.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ze||!$.paint||!$.paint["line-gradient"]||"geojson"===Qt&&on.lineMetrics||F.push(new Ve(ue,$,'layer "'+$.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):F.push(new Ve(ue,$,'layer "'+$.id+'" must specify a "source-layer"')):F.push(new Ve(ue,$.source,'source "'+$.source+'" not found'))}else F.push(new Ve(ue,$,'missing required property "source"'));return F=F.concat(jn({key:ue,value:$,valueSpec:Me.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _n({key:ue+".type",value:$.type,valueSpec:Me.layer.type,style:A.style,styleSpec:A.styleSpec,object:$,objectKey:"type"})},filter:xa,layout:function(xn){return jn({layer:$,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(Pn){return ts(nt({layerType:Ze},Pn))}}})},paint:function(xn){return jn({layer:$,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(Pn){return Yo(nt({layerType:Ze},Pn))}}})}}}))}function hs(A){var F=A.value,$=A.key,ue=ga(F);return"string"!==ue?[new Ve($,F,"string expected, "+ue+" found")]:[]}var ds={promoteId:function(A){var F=A.key,$=A.value;if("string"===ga($))return hs({key:F,value:$});var ue=[];for(var xe in $)ue.push.apply(ue,hs({key:F+"."+xe,value:$[xe]}));return ue}};function ba(A){var F=A.value,$=A.key,ue=A.styleSpec,xe=A.style;if(!F.type)return[new Ve($,F,'"type" is required')];var Me,Re=Ke(F.type);switch(Re){case"vector":case"raster":case"raster-dem":return jn({key:$,value:F,valueSpec:ue["source_"+Re.replace("-","_")],style:A.style,styleSpec:ue,objectElementValidators:ds});case"geojson":if(Me=jn({key:$,value:F,valueSpec:ue.source_geojson,style:xe,styleSpec:ue,objectElementValidators:ds}),F.cluster)for(var Ze in F.clusterProperties){var st=F.clusterProperties[Ze],yt=st[0],qt="string"==typeof yt?[yt,["accumulated"],["get",Ze]]:yt;Me.push.apply(Me,Kr({key:$+"."+Ze+".map",value:st[1],expressionContext:"cluster-map"})),Me.push.apply(Me,Kr({key:$+"."+Ze+".reduce",value:qt,expressionContext:"cluster-reduce"}))}return Me;case"video":return jn({key:$,value:F,valueSpec:ue.source_video,style:xe,styleSpec:ue});case"image":return jn({key:$,value:F,valueSpec:ue.source_image,style:xe,styleSpec:ue});case"canvas":return[new Ve($,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oi({key:$+".type",value:F.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:xe,styleSpec:ue})}}function _t(A){var F=A.value,$=A.styleSpec,ue=$.light,xe=A.style,Me=[],Re=ga(F);if(void 0===F)return Me;if("object"!==Re)return Me.concat([new Ve("light",F,"object expected, "+Re+" found")]);for(var Ze in F){var st=Ze.match(/^(.*)-transition$/);Me=Me.concat(st&&ue[st[1]]&&ue[st[1]].transition?_n({key:Ze,value:F[Ze],valueSpec:$.transition,style:xe,styleSpec:$}):ue[Ze]?_n({key:Ze,value:F[Ze],valueSpec:ue[Ze],style:xe,styleSpec:$}):[new Ve(Ze,F[Ze],'unknown property "'+Ze+'"')])}return Me}var Ht={"*":function(){return[]},array:br,boolean:function(A){var F=A.value,$=A.key,ue=ga(F);return"boolean"!==ue?[new Ve($,F,"boolean expected, "+ue+" found")]:[]},number:Cr,color:function(A){var F=A.key,$=A.value,ue=ga($);return"string"!==ue?[new Ve(F,$,"color expected, "+ue+" found")]:null===Tn($)?[new Ve(F,$,'color expected, "'+$+'" found')]:[]},constants:Je,enum:oi,filter:xa,function:Hr,layer:ns,object:jn,source:ba,light:_t,string:hs,formatted:function(A){return 0===hs(A).length?[]:Kr(A)},resolvedImage:function(A){return 0===hs(A).length?[]:Kr(A)}};function _n(A){var F=A.value,$=A.valueSpec,ue=A.styleSpec;return $.expression&&Ge(Ke(F))?Hr(A):$.expression&&sn(vt(F))?Kr(A):$.type&&Ht[$.type]?Ht[$.type](A):jn(nt({},A,{valueSpec:$.type?ue[$.type]:$}))}function Jt(A){var F=A.value,$=A.key,ue=hs(A);return ue.length||(-1===F.indexOf("{fontstack}")&&ue.push(new Ve($,F,'"glyphs" url must include a "{fontstack}" token')),-1===F.indexOf("{range}")&&ue.push(new Ve($,F,'"glyphs" url must include a "{range}" token'))),ue}function wn(A,F){void 0===F&&(F=ke);var $=[];return $=$.concat(_n({key:"",value:A,valueSpec:F.$root,styleSpec:F,style:A,objectElementValidators:{glyphs:Jt,"*":function(){return[]}}})),A.constants&&($=$.concat(Je({key:"constants",value:A.constants,style:A,styleSpec:F}))),Xn($)}function Xn(A){return[].concat(A).sort(function(F,$){return F.line-$.line})}function er(A){return function(){for(var F=[],$=arguments.length;$--;)F[$]=arguments[$];return Xn(A.apply(this,F))}}wn.source=er(ba),wn.light=er(_t),wn.layer=er(ns),wn.filter=er(xa),wn.paintProperty=er(Yo),wn.layoutProperty=er(ts);var fr=wn,Mr=fr.light,_r=fr.paintProperty,Dr=fr.layoutProperty;function Fr(A,F){var $=!1;if(F&&F.length)for(var ue=0,xe=F;ue<xe.length;ue+=1)A.fire(new tt(new Error(xe[ue].message))),$=!0;return $}var wr=Nr;function Nr(A,F,$){var ue=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var xe=new Int32Array(this.arrayBuffer);A=xe[0],this.d=(F=xe[1])+2*($=xe[2]);for(var Me=0;Me<this.d*this.d;Me++){var Re=xe[3+Me],Ze=xe[3+Me+1];ue.push(Re===Ze?null:xe.subarray(Re,Ze))}var yt=xe[3+ue.length+1];this.keys=xe.subarray(xe[3+ue.length],yt),this.bboxes=xe.subarray(yt),this.insert=this._insertReadonly}else{this.d=F+2*$;for(var At=0;At<this.d*this.d;At++)ue.push([]);this.keys=[],this.bboxes=[]}this.n=F,this.extent=A,this.padding=$,this.scale=F/A,this.uid=0;var qt=$/F*A;this.min=-qt,this.max=A+qt}Nr.prototype.insert=function(A,F,$,ue,xe){this._forEachCell(F,$,ue,xe,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(F),this.bboxes.push($),this.bboxes.push(ue),this.bboxes.push(xe)},Nr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Nr.prototype._insertCell=function(A,F,$,ue,xe,Me){this.cells[xe].push(Me)},Nr.prototype.query=function(A,F,$,ue,xe){var Me=this.min,Re=this.max;if(A<=Me&&F<=Me&&Re<=$&&Re<=ue&&!xe)return Array.prototype.slice.call(this.keys);var Ze=[];return this._forEachCell(A,F,$,ue,this._queryCell,Ze,{},xe),Ze},Nr.prototype._queryCell=function(A,F,$,ue,xe,Me,Re,Ze){var st=this.cells[xe];if(null!==st)for(var yt=this.keys,At=this.bboxes,qt=0;qt<st.length;qt++){var on=st[qt];if(void 0===Re[on]){var Qt=4*on;(Ze?Ze(At[Qt+0],At[Qt+1],At[Qt+2],At[Qt+3]):A<=At[Qt+2]&&F<=At[Qt+3]&&$>=At[Qt+0]&&ue>=At[Qt+1])?(Re[on]=!0,Me.push(yt[on])):Re[on]=!1}}},Nr.prototype._forEachCell=function(A,F,$,ue,xe,Me,Re,Ze){for(var st=this._convertToCellCoord(A),yt=this._convertToCellCoord(F),At=this._convertToCellCoord($),qt=this._convertToCellCoord(ue),on=st;on<=At;on++)for(var Qt=yt;Qt<=qt;Qt++){var xn=this.d*Qt+on;if((!Ze||Ze(this._convertFromCellCoord(on),this._convertFromCellCoord(Qt),this._convertFromCellCoord(on+1),this._convertFromCellCoord(Qt+1)))&&xe.call(this,A,F,$,ue,xn,Me,Re,Ze))return}},Nr.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},Nr.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},Nr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,F=3+this.cells.length+1+1,$=0,ue=0;ue<this.cells.length;ue++)$+=this.cells[ue].length;var xe=new Int32Array(F+$+this.keys.length+this.bboxes.length);xe[0]=this.extent,xe[1]=this.n,xe[2]=this.padding;for(var Me=F,Re=0;Re<A.length;Re++){var Ze=A[Re];xe[3+Re]=Me,xe.set(Ze,Me),Me+=Ze.length}return xe[3+A.length]=Me,xe.set(this.keys,Me),xe[3+A.length+1]=Me+=this.keys.length,xe.set(this.bboxes,Me),Me+=this.bboxes.length,xe.buffer};var ni=self.ImageData,li=self.ImageBitmap,bi={};function dr(A,F,$){void 0===$&&($={}),Object.defineProperty(F,"_classRegistryKey",{value:A,writeable:!1}),bi[A]={klass:F,omit:$.omit||[],shallow:$.shallow||[]}}for(var wi in dr("Object",Object),wr.serialize=function(A,F){var $=A.toArrayBuffer();return F&&F.push($),{buffer:$}},wr.deserialize=function(A){return new wr(A.buffer)},dr("Grid",wr),dr("Color",un),dr("Error",Error),dr("ResolvedImage",Sn),dr("StylePropertyFunction",Rn),dr("StyleExpression",ln,{omit:["_evaluator"]}),dr("ZoomDependentExpression",kn),dr("ZoomConstantExpression",mn),dr("CompoundExpression",lr,{omit:["_evaluate"]}),ho)ho[wi]._classRegistryKey||dr("Expression_"+wi,ho[wi]);function Gr(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&"ArrayBuffer"===A.constructor.name)}function ii(A){return li&&A instanceof li}function ki(A,F){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(Gr(A)||ii(A))return F&&F.push(A),A;if(ArrayBuffer.isView(A)){var $=A;return F&&F.push($.buffer),$}if(A instanceof ni)return F&&F.push(A.data.buffer),A;if(Array.isArray(A)){for(var ue=[],xe=0,Me=A;xe<Me.length;xe+=1)ue.push(ki(Me[xe],F));return ue}if("object"==typeof A){var Ze=A.constructor,st=Ze._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var yt=Ze.serialize?Ze.serialize(A,F):{};if(!Ze.serialize){for(var At in A)if(A.hasOwnProperty(At)&&!(bi[st].omit.indexOf(At)>=0)){var qt=A[At];yt[At]=bi[st].shallow.indexOf(At)>=0?qt:ki(qt,F)}A instanceof Error&&(yt.message=A.message)}if(yt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==st&&(yt.$name=st),yt}throw new Error("can't serialize object of type "+typeof A)}function Zi(A){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||Gr(A)||ii(A)||ArrayBuffer.isView(A)||A instanceof ni)return A;if(Array.isArray(A))return A.map(Zi);if("object"==typeof A){var F=A.$name||"Object",$=bi[F].klass;if(!$)throw new Error("can't deserialize unregistered class "+F);if($.deserialize)return $.deserialize(A);for(var ue=Object.create($.prototype),xe=0,Me=Object.keys(A);xe<Me.length;xe+=1){var Re=Me[xe];if("$name"!==Re){var Ze=A[Re];ue[Re]=bi[F].shallow.indexOf(Re)>=0?Ze:Zi(Ze)}}return ue}throw new Error("can't deserialize object of type "+typeof A)}var aa=function(){this.first=!0};aa.prototype.update=function(A,F){var $=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=$,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=$,!0):(this.lastFloorZoom>$?(this.lastIntegerZoom=$+1,this.lastIntegerZoomTime=F):this.lastFloorZoom<$&&(this.lastIntegerZoom=$,this.lastIntegerZoomTime=F),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=$,!0))};var Vr={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function ca(A){for(var F=0,$=A;F<$.length;F+=1)if(Ei($[F].charCodeAt(0)))return!0;return!1}function ia(A){return!(Vr.Arabic(A)||Vr["Arabic Supplement"](A)||Vr["Arabic Extended-A"](A)||Vr["Arabic Presentation Forms-A"](A)||Vr["Arabic Presentation Forms-B"](A))}function Ei(A){return!(746!==A&&747!==A&&(A<4352||!(Vr["Bopomofo Extended"](A)||Vr.Bopomofo(A)||Vr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||Vr["CJK Compatibility Ideographs"](A)||Vr["CJK Compatibility"](A)||Vr["CJK Radicals Supplement"](A)||Vr["CJK Strokes"](A)||!(!Vr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||12336===A)||Vr["CJK Unified Ideographs Extension A"](A)||Vr["CJK Unified Ideographs"](A)||Vr["Enclosed CJK Letters and Months"](A)||Vr["Hangul Compatibility Jamo"](A)||Vr["Hangul Jamo Extended-A"](A)||Vr["Hangul Jamo Extended-B"](A)||Vr["Hangul Jamo"](A)||Vr["Hangul Syllables"](A)||Vr.Hiragana(A)||Vr["Ideographic Description Characters"](A)||Vr.Kanbun(A)||Vr["Kangxi Radicals"](A)||Vr["Katakana Phonetic Extensions"](A)||Vr.Katakana(A)&&12540!==A||!(!Vr["Halfwidth and Fullwidth Forms"](A)||65288===A||65289===A||65293===A||A>=65306&&A<=65310||65339===A||65341===A||65343===A||A>=65371&&A<=65503||65507===A||A>=65512&&A<=65519)||!(!Vr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||Vr["Unified Canadian Aboriginal Syllabics"](A)||Vr["Unified Canadian Aboriginal Syllabics Extended"](A)||Vr["Vertical Forms"](A)||Vr["Yijing Hexagram Symbols"](A)||Vr["Yi Syllables"](A)||Vr["Yi Radicals"](A))))}function fa(A){return!(Ei(A)||(F=A,Vr["Latin-1 Supplement"](F)&&(167===F||169===F||174===F||177===F||188===F||189===F||190===F||215===F||247===F)||Vr["General Punctuation"](F)&&(8214===F||8224===F||8225===F||8240===F||8241===F||8251===F||8252===F||8258===F||8263===F||8264===F||8265===F||8273===F)||Vr["Letterlike Symbols"](F)||Vr["Number Forms"](F)||Vr["Miscellaneous Technical"](F)&&(F>=8960&&F<=8967||F>=8972&&F<=8991||F>=8996&&F<=9e3||9003===F||F>=9085&&F<=9114||F>=9150&&F<=9165||9167===F||F>=9169&&F<=9179||F>=9186&&F<=9215)||Vr["Control Pictures"](F)&&9251!==F||Vr["Optical Character Recognition"](F)||Vr["Enclosed Alphanumerics"](F)||Vr["Geometric Shapes"](F)||Vr["Miscellaneous Symbols"](F)&&!(F>=9754&&F<=9759)||Vr["Miscellaneous Symbols and Arrows"](F)&&(F>=11026&&F<=11055||F>=11088&&F<=11097||F>=11192&&F<=11243)||Vr["CJK Symbols and Punctuation"](F)||Vr.Katakana(F)||Vr["Private Use Area"](F)||Vr["CJK Compatibility Forms"](F)||Vr["Small Form Variants"](F)||Vr["Halfwidth and Fullwidth Forms"](F)||8734===F||8756===F||8757===F||F>=9984&&F<=10087||F>=10102&&F<=10131||65532===F||65533===F));var F}function ea(A){return A>=1424&&A<=2303||Vr["Arabic Presentation Forms-A"](A)||Vr["Arabic Presentation Forms-B"](A)}function za(A,F){return!(!F&&ea(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||Vr.Khmer(A))}function Ai(A){for(var F=0,$=A;F<$.length;F+=1)if(ea($[F].charCodeAt(0)))return!0;return!1}var qa="deferred",ka="loading",Ks="loaded",$o=null,Ri="unavailable",mo=null,rs=function(A){A&&"string"==typeof A&&A.indexOf("NetworkError")>-1&&(Ri="error"),$o&&$o(A)};function Aa(){Oa.fire(new Xe("pluginStateChange",{pluginStatus:Ri,pluginURL:mo}))}var Oa=new ye,Bo=function(){return Ri},Na=function(){if(Ri!==qa||!mo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ri=ka,Aa(),mo&&St({url:mo},function(A){A?rs(A):(Ri=Ks,Aa())})},ps={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ri===Ks||null!=ps.applyArabicShaping},isLoading:function(){return Ri===ka},setState:function(A){Ri=A.pluginStatus,mo=A.pluginURL},isParsed:function(){return null!=ps.applyArabicShaping&&null!=ps.processBidirectionalText&&null!=ps.processStyledBidirectionalText},getPluginURL:function(){return mo}},Sa=function(A,F){this.zoom=A,F?(this.now=F.now,this.fadeDuration=F.fadeDuration,this.zoomHistory=F.zoomHistory,this.transition=F.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new aa,this.transition={})};Sa.prototype.isSupportedScript=function(A){return function(F,$){for(var ue=0,xe=F;ue<xe.length;ue+=1)if(!za(xe[ue].charCodeAt(0),$))return!1;return!0}(A,ps.isLoaded())},Sa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Sa.prototype.getCrossfadeParameters=function(){var A=this.zoom,F=A-Math.floor(A),$=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:F+(1-F)*$}:{fromScale:.5,toScale:1,t:1-(1-$)*F}};var Ko=function(A,F){this.property=A,this.value=F,this.expression=function($,ue){if(Ge($))return new Rn($,ue);if(sn($)){var xe=In($,ue);if("error"===xe.result)throw new Error(xe.value.map(function(Re){return Re.key+": "+Re.message}).join(", "));return xe.value}var Me=$;return"string"==typeof $&&"color"===ue.type&&(Me=un.parse($)),{kind:"constant",evaluate:function(){return Me}}}(void 0===F?A.specification.default:F,A.specification)};Ko.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ko.prototype.possiblyEvaluate=function(A,F,$){return this.property.possiblyEvaluate(this,A,F,$)};var Js=function(A){this.property=A,this.value=new Ko(A,void 0)};Js.prototype.transitioned=function(A,F){return new Fl(this.property,this.value,F,l({},A.transition,this.transition),A.now)},Js.prototype.untransitioned=function(){return new Fl(this.property,this.value,null,{},0)};var $i=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};$i.prototype.getValue=function(A){return M(this._values[A].value.value)},$i.prototype.setValue=function(A,F){this._values.hasOwnProperty(A)||(this._values[A]=new Js(this._values[A].property)),this._values[A].value=new Ko(this._values[A].property,null===F?void 0:M(F))},$i.prototype.getTransition=function(A){return M(this._values[A].transition)},$i.prototype.setTransition=function(A,F){this._values.hasOwnProperty(A)||(this._values[A]=new Js(this._values[A].property)),this._values[A].transition=M(F)||void 0},$i.prototype.serialize=function(){for(var A={},F=0,$=Object.keys(this._values);F<$.length;F+=1){var ue=$[F],xe=this.getValue(ue);void 0!==xe&&(A[ue]=xe);var Me=this.getTransition(ue);void 0!==Me&&(A[ue+"-transition"]=Me)}return A},$i.prototype.transitioned=function(A,F){for(var $=new jo(this._properties),ue=0,xe=Object.keys(this._values);ue<xe.length;ue+=1){var Me=xe[ue];$._values[Me]=this._values[Me].transitioned(A,F._values[Me])}return $},$i.prototype.untransitioned=function(){for(var A=new jo(this._properties),F=0,$=Object.keys(this._values);F<$.length;F+=1){var ue=$[F];A._values[ue]=this._values[ue].untransitioned()}return A};var Fl=function(A,F,$,ue,xe){this.property=A,this.value=F,this.begin=xe+ue.delay||0,this.end=this.begin+ue.duration||0,A.specification.transition&&(ue.delay||ue.duration)&&(this.prior=$)};Fl.prototype.possiblyEvaluate=function(A,F,$){var ue=A.now||0,xe=this.value.possiblyEvaluate(A,F,$),Me=this.prior;if(Me){if(ue>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(ue<this.begin)return Me.possiblyEvaluate(A,F,$);var Re=(ue-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(A,F,$),xe,function(Ze){if(Ze<=0)return 0;if(Ze>=1)return 1;var st=Ze*Ze,yt=st*Ze;return 4*(Ze<.5?yt:3*(Ze-st)+yt-.75)}(Re))}return xe};var jo=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};jo.prototype.possiblyEvaluate=function(A,F,$){for(var ue=new al(this._properties),xe=0,Me=Object.keys(this._values);xe<Me.length;xe+=1){var Re=Me[xe];ue._values[Re]=this._values[Re].possiblyEvaluate(A,F,$)}return ue},jo.prototype.hasTransition=function(){for(var A=0,F=Object.keys(this._values);A<F.length;A+=1)if(this._values[F[A]].prior)return!0;return!1};var Ul=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Ul.prototype.getValue=function(A){return M(this._values[A].value)},Ul.prototype.setValue=function(A,F){this._values[A]=new Ko(this._values[A].property,null===F?void 0:M(F))},Ul.prototype.serialize=function(){for(var A={},F=0,$=Object.keys(this._values);F<$.length;F+=1){var ue=$[F],xe=this.getValue(ue);void 0!==xe&&(A[ue]=xe)}return A},Ul.prototype.possiblyEvaluate=function(A,F,$){for(var ue=new al(this._properties),xe=0,Me=Object.keys(this._values);xe<Me.length;xe+=1){var Re=Me[xe];ue._values[Re]=this._values[Re].possiblyEvaluate(A,F,$)}return ue};var Io=function(A,F,$){this.property=A,this.value=F,this.parameters=$};Io.prototype.isConstant=function(){return"constant"===this.value.kind},Io.prototype.constantOr=function(A){return"constant"===this.value.kind?this.value.value:A},Io.prototype.evaluate=function(A,F,$,ue){return this.property.evaluate(this.value,this.parameters,A,F,$,ue)};var al=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};al.prototype.get=function(A){return this._values[A]};var Li=function(A){this.specification=A};Li.prototype.possiblyEvaluate=function(A,F){return A.expression.evaluate(F)},Li.prototype.interpolate=function(A,F,$){var ue=Ur[this.specification.type];return ue?ue(A,F,$):A};var Hi=function(A,F){this.specification=A,this.overrides=F};Hi.prototype.possiblyEvaluate=function(A,F,$,ue){return new Io(this,"constant"===A.expression.kind||"camera"===A.expression.kind?{kind:"constant",value:A.expression.evaluate(F,null,{},$,ue)}:A.expression,F)},Hi.prototype.interpolate=function(A,F,$){if("constant"!==A.value.kind||"constant"!==F.value.kind)return A;if(void 0===A.value.value||void 0===F.value.value)return new Io(this,{kind:"constant",value:void 0},A.parameters);var ue=Ur[this.specification.type];return ue?new Io(this,{kind:"constant",value:ue(A.value.value,F.value.value,$)},A.parameters):A},Hi.prototype.evaluate=function(A,F,$,ue,xe,Me){return"constant"===A.kind?A.value:A.evaluate(F,$,ue,xe,Me)};var Hl=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.possiblyEvaluate=function($,ue,xe,Me){if(void 0===$.value)return new Io(this,{kind:"constant",value:void 0},ue);if("constant"===$.expression.kind){var Re=$.expression.evaluate(ue,null,{},xe,Me),Ze="resolvedImage"===$.property.specification.type&&"string"!=typeof Re?Re.name:Re,st=this._calculate(Ze,Ze,Ze,ue);return new Io(this,{kind:"constant",value:st},ue)}if("camera"===$.expression.kind){var yt=this._calculate($.expression.evaluate({zoom:ue.zoom-1}),$.expression.evaluate({zoom:ue.zoom}),$.expression.evaluate({zoom:ue.zoom+1}),ue);return new Io(this,{kind:"constant",value:yt},ue)}return new Io(this,$.expression,ue)},F.prototype.evaluate=function($,ue,xe,Me,Re,Ze){if("source"===$.kind){var st=$.evaluate(ue,xe,Me,Re,Ze);return this._calculate(st,st,st,ue)}return"composite"===$.kind?this._calculate($.evaluate({zoom:Math.floor(ue.zoom)-1},xe,Me),$.evaluate({zoom:Math.floor(ue.zoom)},xe,Me),$.evaluate({zoom:Math.floor(ue.zoom)+1},xe,Me),ue):$.value},F.prototype._calculate=function($,ue,xe,Me){return Me.zoom>Me.zoomHistory.lastIntegerZoom?{from:$,to:ue}:{from:xe,to:ue}},F.prototype.interpolate=function($){return $},F}(Hi),Yr=function(A){this.specification=A};Yr.prototype.possiblyEvaluate=function(A,F,$,ue){if(void 0!==A.value){if("constant"===A.expression.kind){var xe=A.expression.evaluate(F,null,{},$,ue);return this._calculate(xe,xe,xe,F)}return this._calculate(A.expression.evaluate(new Sa(Math.floor(F.zoom-1),F)),A.expression.evaluate(new Sa(Math.floor(F.zoom),F)),A.expression.evaluate(new Sa(Math.floor(F.zoom+1),F)),F)}},Yr.prototype._calculate=function(A,F,$,ue){return ue.zoom>ue.zoomHistory.lastIntegerZoom?{from:A,to:F}:{from:$,to:F}},Yr.prototype.interpolate=function(A){return A};var da=function(A){this.specification=A};da.prototype.possiblyEvaluate=function(A,F,$,ue){return!!A.expression.evaluate(F,null,{},$,ue)},da.prototype.interpolate=function(){return!1};var Fs=function(A){for(var F in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var $=A[F];$.specification.overridable&&this.overridableProperties.push(F);var ue=this.defaultPropertyValues[F]=new Ko($,void 0),xe=this.defaultTransitionablePropertyValues[F]=new Js($);this.defaultTransitioningPropertyValues[F]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[F]=ue.possiblyEvaluate({})}};dr("DataDrivenProperty",Hi),dr("DataConstantProperty",Li),dr("CrossFadedDataDrivenProperty",Hl),dr("CrossFadedProperty",Yr),dr("ColorRampProperty",da);var qs=function(A){function F($,ue){if(A.call(this),this.id=$.id,this.type=$.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==$.type&&(this.metadata=$.metadata,this.minzoom=$.minzoom,this.maxzoom=$.maxzoom,"background"!==$.type&&(this.source=$.source,this.sourceLayer=$["source-layer"],this.filter=$.filter),ue.layout&&(this._unevaluatedLayout=new Ul(ue.layout)),ue.paint)){for(var xe in this._transitionablePaint=new $i(ue.paint),$.paint)this.setPaintProperty(xe,$.paint[xe],{validate:!1});for(var Me in $.layout)this.setLayoutProperty(Me,$.layout[Me],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new al(ue.paint)}}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},F.prototype.getLayoutProperty=function($){return"visibility"===$?this.visibility:this._unevaluatedLayout.getValue($)},F.prototype.setLayoutProperty=function($,ue,xe){void 0===xe&&(xe={}),null!=ue&&this._validate(Dr,"layers."+this.id+".layout."+$,$,ue,xe)||("visibility"!==$?this._unevaluatedLayout.setValue($,ue):this.visibility=ue)},F.prototype.getPaintProperty=function($){return T($,"-transition")?this._transitionablePaint.getTransition($.slice(0,-11)):this._transitionablePaint.getValue($)},F.prototype.setPaintProperty=function($,ue,xe){if(void 0===xe&&(xe={}),null!=ue&&this._validate(_r,"layers."+this.id+".paint."+$,$,ue,xe))return!1;if(T($,"-transition"))return this._transitionablePaint.setTransition($.slice(0,-11),ue||void 0),!1;var Re=this._transitionablePaint._values[$],Ze="cross-faded-data-driven"===Re.property.specification["property-type"],st=Re.value.isDataDriven(),yt=Re.value;this._transitionablePaint.setValue($,ue),this._handleSpecialPaintPropertyUpdate($);var At=this._transitionablePaint._values[$].value;return At.isDataDriven()||st||Ze||this._handleOverridablePaintPropertyUpdate($,yt,At)},F.prototype._handleSpecialPaintPropertyUpdate=function($){},F.prototype._handleOverridablePaintPropertyUpdate=function($,ue,xe){return!1},F.prototype.isHidden=function($){return!!(this.minzoom&&$<this.minzoom)||!!(this.maxzoom&&$>=this.maxzoom)||"none"===this.visibility},F.prototype.updateTransitions=function($){this._transitioningPaint=this._transitionablePaint.transitioned($,this._transitioningPaint)},F.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},F.prototype.recalculate=function($,ue){$.getCrossfadeParameters&&(this._crossfadeParameters=$.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate($,void 0,ue)),this.paint=this._transitioningPaint.possiblyEvaluate($,void 0,ue)},F.prototype.serialize=function(){var $={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&($.layout=$.layout||{},$.layout.visibility=this.visibility),w($,function(ue,xe){return!(void 0===ue||"layout"===xe&&!Object.keys(ue).length||"paint"===xe&&!Object.keys(ue).length)})},F.prototype._validate=function($,ue,xe,Me,Re){return void 0===Re&&(Re={}),(!Re||!1!==Re.validate)&&Fr(this,$.call(fr,{key:ue,layerType:this.type,objectKey:xe,value:Me,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))},F.prototype.is3D=function(){return!1},F.prototype.isTileClipped=function(){return!1},F.prototype.hasOffscreenPass=function(){return!1},F.prototype.resize=function(){},F.prototype.isStateDependent=function(){for(var $ in this.paint._values){var ue=this.paint.get($);if(ue instanceof Io&&Ao(ue.property.specification)&&("source"===ue.value.kind||"composite"===ue.value.kind)&&ue.value.isStateDependent)return!0}return!1},F}(ye),Vo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Al=function(A,F){this._structArray=A,this._pos1=F*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ca=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function _a(A,F){void 0===F&&(F=1);var $=0,ue=0;return{members:A.map(function(xe){var Re=Vo[xe.type].BYTES_PER_ELEMENT,Ze=$=ol($,Math.max(F,Re)),st=xe.components||1;return ue=Math.max(ue,Re),$+=Re*st,{name:xe.name,type:xe.type,components:st,offset:Ze}}),size:ol($,Math.max(ue,F)),alignment:F}}function ol(A,F){return Math.ceil(A/F)*F}Ca.serialize=function(A,F){return A._trim(),F&&(A.isTransferred=!0,F.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},Ca.deserialize=function(A){var F=Object.create(this.prototype);return F.arrayBuffer=A.arrayBuffer,F.length=A.length,F.capacity=A.arrayBuffer.byteLength/F.bytesPerElement,F._refreshViews(),F},Ca.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ca.prototype.clear=function(){this.length=0},Ca.prototype.resize=function(A){this.reserve(A),this.length=A},Ca.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var F=this.uint8;this._refreshViews(),F&&this.uint8.set(F)}},Ca.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Qs=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,ue)},F.prototype.emplace=function($,ue,xe){var Me=2*$;return this.int16[Me+0]=ue,this.int16[Me+1]=xe,$},F}(Ca);Qs.prototype.bytesPerElement=4,dr("StructArrayLayout2i4",Qs);var Po=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me){var Re=this.length;return this.resize(Re+1),this.emplace(Re,$,ue,xe,Me)},F.prototype.emplace=function($,ue,xe,Me,Re){var Ze=4*$;return this.int16[Ze+0]=ue,this.int16[Ze+1]=xe,this.int16[Ze+2]=Me,this.int16[Ze+3]=Re,$},F}(Ca);Po.prototype.bytesPerElement=8,dr("StructArrayLayout4i8",Po);var vl=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze){var st=this.length;return this.resize(st+1),this.emplace(st,$,ue,xe,Me,Re,Ze)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st){var yt=6*$;return this.int16[yt+0]=ue,this.int16[yt+1]=xe,this.int16[yt+2]=Me,this.int16[yt+3]=Re,this.int16[yt+4]=Ze,this.int16[yt+5]=st,$},F}(Ca);vl.prototype.bytesPerElement=12,dr("StructArrayLayout2i4i12",vl);var ql=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze){var st=this.length;return this.resize(st+1),this.emplace(st,$,ue,xe,Me,Re,Ze)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st){var yt=4*$,At=8*$;return this.int16[yt+0]=ue,this.int16[yt+1]=xe,this.uint8[At+4]=Me,this.uint8[At+5]=Re,this.uint8[At+6]=Ze,this.uint8[At+7]=st,$},F}(Ca);ql.prototype.bytesPerElement=8,dr("StructArrayLayout2i4ub8",ql);var sl=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze,st,yt,At,qt){var on=this.length;return this.resize(on+1),this.emplace(on,$,ue,xe,Me,Re,Ze,st,yt,At,qt)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st,yt,At,qt,on){var Qt=9*$,xn=18*$;return this.uint16[Qt+0]=ue,this.uint16[Qt+1]=xe,this.uint16[Qt+2]=Me,this.uint16[Qt+3]=Re,this.uint16[Qt+4]=Ze,this.uint16[Qt+5]=st,this.uint16[Qt+6]=yt,this.uint16[Qt+7]=At,this.uint8[xn+16]=qt,this.uint8[xn+17]=on,$},F}(Ca);sl.prototype.bytesPerElement=18,dr("StructArrayLayout8ui2ub18",sl);var Wo=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt){var xn=this.length;return this.resize(xn+1),this.emplace(xn,$,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn){var Pn=12*$;return this.int16[Pn+0]=ue,this.int16[Pn+1]=xe,this.int16[Pn+2]=Me,this.int16[Pn+3]=Re,this.uint16[Pn+4]=Ze,this.uint16[Pn+5]=st,this.uint16[Pn+6]=yt,this.uint16[Pn+7]=At,this.int16[Pn+8]=qt,this.int16[Pn+9]=on,this.int16[Pn+10]=Qt,this.int16[Pn+11]=xn,$},F}(Ca);Wo.prototype.bytesPerElement=24,dr("StructArrayLayout4i4ui4i24",Wo);var gs=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe){var Me=this.length;return this.resize(Me+1),this.emplace(Me,$,ue,xe)},F.prototype.emplace=function($,ue,xe,Me){var Re=3*$;return this.float32[Re+0]=ue,this.float32[Re+1]=xe,this.float32[Re+2]=Me,$},F}(Ca);gs.prototype.bytesPerElement=12,dr("StructArrayLayout3f12",gs);var lu=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($){var ue=this.length;return this.resize(ue+1),this.emplace(ue,$)},F.prototype.emplace=function($,ue){return this.uint32[1*$+0]=ue,$},F}(Ca);lu.prototype.bytesPerElement=4,dr("StructArrayLayout1ul4",lu);var El=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze,st,yt,At){var qt=this.length;return this.resize(qt+1),this.emplace(qt,$,ue,xe,Me,Re,Ze,st,yt,At)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st,yt,At,qt){var on=10*$,Qt=5*$;return this.int16[on+0]=ue,this.int16[on+1]=xe,this.int16[on+2]=Me,this.int16[on+3]=Re,this.int16[on+4]=Ze,this.int16[on+5]=st,this.uint32[Qt+3]=yt,this.uint16[on+8]=At,this.uint16[on+9]=qt,$},F}(Ca);El.prototype.bytesPerElement=20,dr("StructArrayLayout6i1ul2ui20",El);var Ms=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze){var st=this.length;return this.resize(st+1),this.emplace(st,$,ue,xe,Me,Re,Ze)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st){var yt=6*$;return this.int16[yt+0]=ue,this.int16[yt+1]=xe,this.int16[yt+2]=Me,this.int16[yt+3]=Re,this.int16[yt+4]=Ze,this.int16[yt+5]=st,$},F}(Ca);Ms.prototype.bytesPerElement=12,dr("StructArrayLayout2i2i2i12",Ms);var Au=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re){var Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,$,ue,xe,Me,Re)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze){var st=4*$,yt=8*$;return this.float32[st+0]=ue,this.float32[st+1]=xe,this.float32[st+2]=Me,this.int16[yt+6]=Re,this.int16[yt+7]=Ze,$},F}(Ca);Au.prototype.bytesPerElement=16,dr("StructArrayLayout2f1f2i16",Au);var Sl=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me){var Re=this.length;return this.resize(Re+1),this.emplace(Re,$,ue,xe,Me)},F.prototype.emplace=function($,ue,xe,Me,Re){var Ze=12*$,st=3*$;return this.uint8[Ze+0]=ue,this.uint8[Ze+1]=xe,this.float32[st+1]=Me,this.float32[st+2]=Re,$},F}(Ca);Sl.prototype.bytesPerElement=12,dr("StructArrayLayout2ub2f12",Sl);var is=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe){var Me=this.length;return this.resize(Me+1),this.emplace(Me,$,ue,xe)},F.prototype.emplace=function($,ue,xe,Me){var Re=3*$;return this.uint16[Re+0]=ue,this.uint16[Re+1]=xe,this.uint16[Re+2]=Me,$},F}(Ca);is.prototype.bytesPerElement=6,dr("StructArrayLayout3ui6",is);var Vu=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn,Zn,Wn,nr){var ir=this.length;return this.resize(ir+1),this.emplace(ir,$,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn,Zn,Wn,nr)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn,Zn,Wn,nr,ir){var ur=24*$,kr=12*$,Pr=48*$;return this.int16[ur+0]=ue,this.int16[ur+1]=xe,this.uint16[ur+2]=Me,this.uint16[ur+3]=Re,this.uint32[kr+2]=Ze,this.uint32[kr+3]=st,this.uint32[kr+4]=yt,this.uint16[ur+10]=At,this.uint16[ur+11]=qt,this.uint16[ur+12]=on,this.float32[kr+7]=Qt,this.float32[kr+8]=xn,this.uint8[Pr+36]=Pn,this.uint8[Pr+37]=Zn,this.uint8[Pr+38]=Wn,this.uint32[kr+10]=nr,this.int16[ur+22]=ir,$},F}(Ca);Vu.prototype.bytesPerElement=48,dr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vu);var uu=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn,Zn,Wn,nr,ir,ur,kr,Pr,Qr,ei,fi,Ti,Ci,xi,Ni){var Pi=this.length;return this.resize(Pi+1),this.emplace(Pi,$,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn,Zn,Wn,nr,ir,ur,kr,Pr,Qr,ei,fi,Ti,Ci,xi,Ni)},F.prototype.emplace=function($,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn,Zn,Wn,nr,ir,ur,kr,Pr,Qr,ei,fi,Ti,Ci,xi,Ni,Pi){var Di=34*$,Ba=17*$;return this.int16[Di+0]=ue,this.int16[Di+1]=xe,this.int16[Di+2]=Me,this.int16[Di+3]=Re,this.int16[Di+4]=Ze,this.int16[Di+5]=st,this.int16[Di+6]=yt,this.int16[Di+7]=At,this.uint16[Di+8]=qt,this.uint16[Di+9]=on,this.uint16[Di+10]=Qt,this.uint16[Di+11]=xn,this.uint16[Di+12]=Pn,this.uint16[Di+13]=Zn,this.uint16[Di+14]=Wn,this.uint16[Di+15]=nr,this.uint16[Di+16]=ir,this.uint16[Di+17]=ur,this.uint16[Di+18]=kr,this.uint16[Di+19]=Pr,this.uint16[Di+20]=Qr,this.uint16[Di+21]=ei,this.uint16[Di+22]=fi,this.uint32[Ba+12]=Ti,this.float32[Ba+13]=Ci,this.float32[Ba+14]=xi,this.float32[Ba+15]=Ni,this.float32[Ba+16]=Pi,$},F}(Ca);uu.prototype.bytesPerElement=68,dr("StructArrayLayout8i15ui1ul4f68",uu);var pe=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($){var ue=this.length;return this.resize(ue+1),this.emplace(ue,$)},F.prototype.emplace=function($,ue){return this.float32[1*$+0]=ue,$},F}(Ca);pe.prototype.bytesPerElement=4,dr("StructArrayLayout1f4",pe);var P=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe){var Me=this.length;return this.resize(Me+1),this.emplace(Me,$,ue,xe)},F.prototype.emplace=function($,ue,xe,Me){var Re=3*$;return this.int16[Re+0]=ue,this.int16[Re+1]=xe,this.int16[Re+2]=Me,$},F}(Ca);P.prototype.bytesPerElement=6,dr("StructArrayLayout3i6",P);var N=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe){var Me=this.length;return this.resize(Me+1),this.emplace(Me,$,ue,xe)},F.prototype.emplace=function($,ue,xe,Me){var Ze=4*$;return this.uint32[2*$+0]=ue,this.uint16[Ze+2]=xe,this.uint16[Ze+3]=Me,$},F}(Ca);N.prototype.bytesPerElement=8,dr("StructArrayLayout1ul2ui8",N);var j=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,ue)},F.prototype.emplace=function($,ue,xe){var Me=2*$;return this.uint16[Me+0]=ue,this.uint16[Me+1]=xe,$},F}(Ca);j.prototype.bytesPerElement=4,dr("StructArrayLayout2ui4",j);var Z=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},F.prototype.emplaceBack=function($){var ue=this.length;return this.resize(ue+1),this.emplace(ue,$)},F.prototype.emplace=function($,ue){return this.uint16[1*$+0]=ue,$},F}(Ca);Z.prototype.bytesPerElement=2,dr("StructArrayLayout1ui2",Z);var ce=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,ue)},F.prototype.emplace=function($,ue,xe){var Me=2*$;return this.float32[Me+0]=ue,this.float32[Me+1]=xe,$},F}(Ca);ce.prototype.bytesPerElement=8,dr("StructArrayLayout2f8",ce);var ge=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},F.prototype.emplaceBack=function($,ue,xe,Me){var Re=this.length;return this.resize(Re+1),this.emplace(Re,$,ue,xe,Me)},F.prototype.emplace=function($,ue,xe,Me,Re){var Ze=4*$;return this.float32[Ze+0]=ue,this.float32[Ze+1]=xe,this.float32[Ze+2]=Me,this.float32[Ze+3]=Re,$},F}(Ca);ge.prototype.bytesPerElement=16,dr("StructArrayLayout4f16",ge);var we=function(A){function F(){A.apply(this,arguments)}A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F;var $={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return $.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},$.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},$.x1.get=function(){return this._structArray.int16[this._pos2+2]},$.y1.get=function(){return this._structArray.int16[this._pos2+3]},$.x2.get=function(){return this._structArray.int16[this._pos2+4]},$.y2.get=function(){return this._structArray.int16[this._pos2+5]},$.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},$.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},$.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},$.anchorPoint.get=function(){return new t(this.anchorPointX,this.anchorPointY)},Object.defineProperties(F.prototype,$),F}(Al);we.prototype.size=20;var Se=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.get=function($){return new we(this,$)},F}(El);dr("CollisionBoxArray",Se);var Oe=function(A){function F(){A.apply(this,arguments)}A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F;var $={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return $.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},$.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},$.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},$.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},$.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},$.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},$.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},$.segment.get=function(){return this._structArray.uint16[this._pos2+10]},$.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},$.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},$.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},$.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},$.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},$.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},$.placedOrientation.set=function(ue){this._structArray.uint8[this._pos1+37]=ue},$.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},$.hidden.set=function(ue){this._structArray.uint8[this._pos1+38]=ue},$.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},$.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+10]=ue},$.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(F.prototype,$),F}(Al);Oe.prototype.size=48;var $e=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.get=function($){return new Oe(this,$)},F}(Vu);dr("PlacedSymbolArray",$e);var it=function(A){function F(){A.apply(this,arguments)}A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F;var $={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return $.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},$.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},$.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},$.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},$.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},$.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},$.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},$.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},$.key.get=function(){return this._structArray.uint16[this._pos2+8]},$.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},$.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},$.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},$.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},$.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},$.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},$.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},$.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},$.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},$.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},$.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},$.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},$.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},$.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},$.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},$.crossTileID.set=function(ue){this._structArray.uint32[this._pos4+12]=ue},$.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},$.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},$.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},$.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(F.prototype,$),F}(Al);it.prototype.size=68;var pt=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.get=function($){return new it(this,$)},F}(uu);dr("SymbolInstanceArray",pt);var Et=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.getoffsetX=function($){return this.float32[1*$+0]},F}(pe);dr("GlyphOffsetArray",Et);var Ft=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.getx=function($){return this.int16[3*$+0]},F.prototype.gety=function($){return this.int16[3*$+1]},F.prototype.gettileUnitDistanceFromAnchor=function($){return this.int16[3*$+2]},F}(P);dr("SymbolLineVertexArray",Ft);var Dt=function(A){function F(){A.apply(this,arguments)}A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F;var $={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return $.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},$.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},$.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(F.prototype,$),F}(Al);Dt.prototype.size=8;var zt=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.get=function($){return new Dt(this,$)},F}(N);dr("FeatureIndexArray",zt);var Lt=_a([{name:"a_pos",components:2,type:"Int16"}],4).members,Gt=function(A){void 0===A&&(A=[]),this.segments=A};function Ut(A,F){return 256*(A=f(Math.floor(A),0,255))+f(Math.floor(F),0,255)}Gt.prototype.prepareSegment=function(A,F,$,ue){var xe=this.segments[this.segments.length-1];return A>Gt.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+Gt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!xe||xe.vertexLength+A>Gt.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==ue)&&(xe={vertexOffset:F.length,primitiveOffset:$.length,vertexLength:0,primitiveLength:0},void 0!==ue&&(xe.sortKey=ue),this.segments.push(xe)),xe},Gt.prototype.get=function(){return this.segments},Gt.prototype.destroy=function(){for(var A=0,F=this.segments;A<F.length;A+=1){var $=F[A];for(var ue in $.vaos)$.vaos[ue].destroy()}},Gt.simpleSegment=function(A,F,$,ue){return new Gt([{vertexOffset:A,primitiveOffset:F,vertexLength:$,primitiveLength:ue,vaos:{},sortKey:0}])},Gt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,dr("SegmentVector",Gt);var Zt=_a([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),vn=r(function(A){A.exports=function(F,$){var ue,xe,Me,Re,Ze,st,yt,At;for(xe=F.length-(ue=3&F.length),Me=$,Ze=3432918353,st=461845907,At=0;At<xe;)yt=255&F.charCodeAt(At)|(255&F.charCodeAt(++At))<<8|(255&F.charCodeAt(++At))<<16|(255&F.charCodeAt(++At))<<24,++At,Me=27492+(65535&(Re=5*(65535&(Me=(Me^=yt=(65535&(yt=(yt=(65535&yt)*Ze+(((yt>>>16)*Ze&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295)<<13|Me>>>19))+((5*(Me>>>16)&65535)<<16)&4294967295))+((58964+(Re>>>16)&65535)<<16);switch(yt=0,ue){case 3:yt^=(255&F.charCodeAt(At+2))<<16;case 2:yt^=(255&F.charCodeAt(At+1))<<8;case 1:Me^=yt=(65535&(yt=(yt=(65535&(yt^=255&F.charCodeAt(At)))*Ze+(((yt>>>16)*Ze&65535)<<16)&4294967295)<<15|yt>>>17))*st+(((yt>>>16)*st&65535)<<16)&4294967295}return Me^=F.length,Me=2246822507*(65535&(Me^=Me>>>16))+((2246822507*(Me>>>16)&65535)<<16)&4294967295,Me=3266489909*(65535&(Me^=Me>>>13))+((3266489909*(Me>>>16)&65535)<<16)&4294967295,(Me^=Me>>>16)>>>0}}),En=r(function(A){A.exports=function(F,$){for(var ue,xe=F.length,Me=$^xe,Re=0;xe>=4;)ue=1540483477*(65535&(ue=255&F.charCodeAt(Re)|(255&F.charCodeAt(++Re))<<8|(255&F.charCodeAt(++Re))<<16|(255&F.charCodeAt(++Re))<<24))+((1540483477*(ue>>>16)&65535)<<16),Me=1540483477*(65535&Me)+((1540483477*(Me>>>16)&65535)<<16)^(ue=1540483477*(65535&(ue^=ue>>>24))+((1540483477*(ue>>>16)&65535)<<16)),xe-=4,++Re;switch(xe){case 3:Me^=(255&F.charCodeAt(Re+2))<<16;case 2:Me^=(255&F.charCodeAt(Re+1))<<8;case 1:Me=1540483477*(65535&(Me^=255&F.charCodeAt(Re)))+((1540483477*(Me>>>16)&65535)<<16)}return Me=1540483477*(65535&(Me^=Me>>>13))+((1540483477*(Me>>>16)&65535)<<16),(Me^=Me>>>15)>>>0}}),qn=vn,pr=En;qn.murmur3=vn,qn.murmur2=pr;var gr=function(){this.ids=[],this.positions=[],this.indexed=!1};gr.prototype.add=function(A,F,$,ue){this.ids.push(yr(A)),this.positions.push(F,$,ue)},gr.prototype.getPositions=function(A){for(var F=yr(A),$=0,ue=this.ids.length-1;$<ue;){var xe=$+ue>>1;this.ids[xe]>=F?ue=xe:$=xe+1}for(var Me=[];this.ids[$]===F;)Me.push({index:this.positions[3*$],start:this.positions[3*$+1],end:this.positions[3*$+2]}),$++;return Me},gr.serialize=function(A,F){var $=new Float64Array(A.ids),ue=new Uint32Array(A.positions);return function xe(Me,Re,Ze,st){for(;Ze<st;){for(var yt=Me[Ze+st>>1],At=Ze-1,qt=st+1;;){do{At++}while(Me[At]<yt);do{qt--}while(Me[qt]>yt);if(At>=qt)break;Jr(Me,At,qt),Jr(Re,3*At,3*qt),Jr(Re,3*At+1,3*qt+1),Jr(Re,3*At+2,3*qt+2)}qt-Ze<st-qt?(xe(Me,Re,Ze,qt),Ze=qt+1):(xe(Me,Re,qt+1,st),st=qt)}}($,ue,0,$.length-1),F&&F.push($.buffer,ue.buffer),{ids:$,positions:ue}},gr.deserialize=function(A){var F=new gr;return F.ids=A.ids,F.positions=A.positions,F.indexed=!0,F};var Er=Math.pow(2,53)-1;function yr(A){var F=+A;return!isNaN(F)&&F<=Er?F:qn(String(A))}function Jr(A,F,$){var ue=A[F];A[F]=A[$],A[$]=ue}dr("FeaturePositionMap",gr);var vi=function(A,F){this.gl=A.gl,this.location=F},Fi=function(A){function F($,ue){A.call(this,$,ue),this.current=0}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1i(this.location,$))},F}(vi),or=function(A){function F($,ue){A.call(this,$,ue),this.current=0}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1f(this.location,$))},F}(vi),zr=function(A){function F($,ue){A.call(this,$,ue),this.current=[0,0]}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.set=function($){$[0]===this.current[0]&&$[1]===this.current[1]||(this.current=$,this.gl.uniform2f(this.location,$[0],$[1]))},F}(vi),yi=function(A){function F($,ue){A.call(this,$,ue),this.current=[0,0,0]}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.set=function($){$[0]===this.current[0]&&$[1]===this.current[1]&&$[2]===this.current[2]||(this.current=$,this.gl.uniform3f(this.location,$[0],$[1],$[2]))},F}(vi),ci=function(A){function F($,ue){A.call(this,$,ue),this.current=[0,0,0,0]}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.set=function($){$[0]===this.current[0]&&$[1]===this.current[1]&&$[2]===this.current[2]&&$[3]===this.current[3]||(this.current=$,this.gl.uniform4f(this.location,$[0],$[1],$[2],$[3]))},F}(vi),Si=function(A){function F($,ue){A.call(this,$,ue),this.current=un.transparent}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.set=function($){$.r===this.current.r&&$.g===this.current.g&&$.b===this.current.b&&$.a===this.current.a||(this.current=$,this.gl.uniform4f(this.location,$.r,$.g,$.b,$.a))},F}(vi),ji=new Float32Array(16),Ji=function(A){function F($,ue){A.call(this,$,ue),this.current=ji}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.set=function($){if($[12]!==this.current[12]||$[0]!==this.current[0])return this.current=$,void this.gl.uniformMatrix4fv(this.location,!1,$);for(var ue=1;ue<16;ue++)if($[ue]!==this.current[ue]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);break}},F}(vi);function _i(A){return[Ut(255*A.r,255*A.g),Ut(255*A.b,255*A.a)]}var qi=function(A,F,$){this.value=A,this.uniformNames=F.map(function(ue){return"u_"+ue}),this.type=$};qi.prototype.setUniform=function(A,F,$){A.set($.constantOr(this.value))},qi.prototype.getBinding=function(A,F,$){return"color"===this.type?new Si(A,F):new or(A,F)};var Vi=function(A,F){this.uniformNames=F.map(function($){return"u_"+$}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Vi.prototype.setConstantPatternPositions=function(A,F){this.pixelRatioFrom=F.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=F.tlbr,this.patternTo=A.tlbr},Vi.prototype.setUniform=function(A,F,$,ue){var xe="u_pattern_to"===ue?this.patternTo:"u_pattern_from"===ue?this.patternFrom:"u_pixel_ratio_to"===ue?this.pixelRatioTo:"u_pixel_ratio_from"===ue?this.pixelRatioFrom:null;xe&&A.set(xe)},Vi.prototype.getBinding=function(A,F,$){return"u_pattern"===$.substr(0,9)?new ci(A,F):new or(A,F)};var oa=function(A,F,$,ue){this.expression=A,this.type=$,this.maxValue=0,this.paintVertexAttributes=F.map(function(xe){return{name:"a_"+xe,type:"Float32",components:"color"===$?2:1,offset:0}}),this.paintVertexArray=new ue};oa.prototype.populatePaintArray=function(A,F,$,ue,xe){var Me=this.paintVertexArray.length,Re=this.expression.evaluate(new Sa(0),F,{},ue,[],xe);this.paintVertexArray.resize(A),this._setPaintValue(Me,A,Re)},oa.prototype.updatePaintArray=function(A,F,$,ue){var xe=this.expression.evaluate({zoom:0},$,ue);this._setPaintValue(A,F,xe)},oa.prototype._setPaintValue=function(A,F,$){if("color"===this.type)for(var ue=_i($),xe=A;xe<F;xe++)this.paintVertexArray.emplace(xe,ue[0],ue[1]);else{for(var Me=A;Me<F;Me++)this.paintVertexArray.emplace(Me,$);this.maxValue=Math.max(this.maxValue,Math.abs($))}},oa.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},oa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Gi=function(A,F,$,ue,xe,Me){this.expression=A,this.uniformNames=F.map(function(Re){return"u_"+Re+"_t"}),this.type=$,this.useIntegerZoom=ue,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=F.map(function(Re){return{name:"a_"+Re,type:"Float32",components:"color"===$?4:2,offset:0}}),this.paintVertexArray=new Me};Gi.prototype.populatePaintArray=function(A,F,$,ue,xe){var Me=this.expression.evaluate(new Sa(this.zoom),F,{},ue,[],xe),Re=this.expression.evaluate(new Sa(this.zoom+1),F,{},ue,[],xe),Ze=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ze,A,Me,Re)},Gi.prototype.updatePaintArray=function(A,F,$,ue){var xe=this.expression.evaluate({zoom:this.zoom},$,ue),Me=this.expression.evaluate({zoom:this.zoom+1},$,ue);this._setPaintValue(A,F,xe,Me)},Gi.prototype._setPaintValue=function(A,F,$,ue){if("color"===this.type)for(var xe=_i($),Me=_i(ue),Re=A;Re<F;Re++)this.paintVertexArray.emplace(Re,xe[0],xe[1],Me[0],Me[1]);else{for(var Ze=A;Ze<F;Ze++)this.paintVertexArray.emplace(Ze,$,ue);this.maxValue=Math.max(this.maxValue,Math.abs($),Math.abs(ue))}},Gi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Gi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Gi.prototype.setUniform=function(A,F){var $=this.useIntegerZoom?Math.floor(F.zoom):F.zoom,ue=f(this.expression.interpolationFactor($,this.zoom,this.zoom+1),0,1);A.set(ue)},Gi.prototype.getBinding=function(A,F,$){return new or(A,F)};var ta=function(A,F,$,ue,xe,Me){this.expression=A,this.type=F,this.useIntegerZoom=$,this.zoom=ue,this.layerId=Me,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};ta.prototype.populatePaintArray=function(A,F,$){var ue=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(ue,A,F.patterns&&F.patterns[this.layerId],$)},ta.prototype.updatePaintArray=function(A,F,$,ue,xe){this._setPaintValues(A,F,$.patterns&&$.patterns[this.layerId],xe)},ta.prototype._setPaintValues=function(A,F,$,ue){if(ue&&$){var Ze=ue[$.min],st=ue[$.mid],yt=ue[$.max];if(Ze&&st&&yt)for(var At=A;At<F;At++)this.zoomInPaintVertexArray.emplace(At,st.tl[0],st.tl[1],st.br[0],st.br[1],Ze.tl[0],Ze.tl[1],Ze.br[0],Ze.br[1],st.pixelRatio,Ze.pixelRatio),this.zoomOutPaintVertexArray.emplace(At,st.tl[0],st.tl[1],st.br[0],st.br[1],yt.tl[0],yt.tl[1],yt.br[0],yt.br[1],st.pixelRatio,yt.pixelRatio)}},ta.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Zt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Zt.members,this.expression.isStateDependent))},ta.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Da=function(A,F,$,ue){this.binders={},this.layoutAttributes=ue,this._buffers=[];var xe=[];for(var Me in A.paint._values)if($(Me)){var Re=A.paint.get(Me);if(Re instanceof Io&&Ao(Re.property.specification)){var Ze=bo(Me,A.type),st=Re.value,yt=Re.property.specification.type,At=Re.property.useIntegerZoom,qt=Re.property.specification["property-type"],on="cross-faded"===qt||"cross-faded-data-driven"===qt;if("constant"===st.kind)this.binders[Me]=on?new Vi(st.value,Ze):new qi(st.value,Ze,yt),xe.push("/u_"+Me);else if("source"===st.kind||on){var Qt=vo(Me,yt,"source");this.binders[Me]=on?new ta(st,yt,At,F,Qt,A.id):new oa(st,Ze,yt,Qt),xe.push("/a_"+Me)}else{var xn=vo(Me,yt,"composite");this.binders[Me]=new Gi(st,Ze,yt,At,F,xn),xe.push("/z_"+Me)}}}this.cacheKey=xe.sort().join("")};Da.prototype.getMaxValue=function(A){var F=this.binders[A];return F instanceof oa||F instanceof Gi?F.maxValue:0},Da.prototype.populatePaintArrays=function(A,F,$,ue,xe){for(var Me in this.binders){var Re=this.binders[Me];(Re instanceof oa||Re instanceof Gi||Re instanceof ta)&&Re.populatePaintArray(A,F,$,ue,xe)}},Da.prototype.setConstantPatternPositions=function(A,F){for(var $ in this.binders){var ue=this.binders[$];ue instanceof Vi&&ue.setConstantPatternPositions(A,F)}},Da.prototype.updatePaintArrays=function(A,F,$,ue,xe){var Me=!1;for(var Re in A)for(var Ze=0,st=F.getPositions(Re);Ze<st.length;Ze+=1){var yt=st[Ze],At=$.feature(yt.index);for(var qt in this.binders){var on=this.binders[qt];if((on instanceof oa||on instanceof Gi||on instanceof ta)&&!0===on.expression.isStateDependent){var Qt=ue.paint.get(qt);on.expression=Qt.value,on.updatePaintArray(yt.start,yt.end,At,A[Re],xe),Me=!0}}}return Me},Da.prototype.defines=function(){var A=[];for(var F in this.binders){var $=this.binders[F];($ instanceof qi||$ instanceof Vi)&&A.push.apply(A,$.uniformNames.map(function(ue){return"#define HAS_UNIFORM_"+ue}))}return A},Da.prototype.getPaintVertexBuffers=function(){return this._buffers},Da.prototype.getUniforms=function(A,F){var $=[];for(var ue in this.binders){var xe=this.binders[ue];if(xe instanceof qi||xe instanceof Vi||xe instanceof Gi)for(var Me=0,Re=xe.uniformNames;Me<Re.length;Me+=1){var Ze=Re[Me];if(F[Ze]){var st=xe.getBinding(A,F[Ze],Ze);$.push({name:Ze,property:ue,binding:st})}}}return $},Da.prototype.setUniforms=function(A,F,$,ue){for(var xe=0,Me=F;xe<Me.length;xe+=1){var Re=Me[xe],Ze=Re.name,st=Re.property;this.binders[st].setUniform(Re.binding,ue,$.get(st),Ze)}},Da.prototype.updatePaintBuffers=function(A){for(var F in this._buffers=[],this.binders){var $=this.binders[F];if(A&&$ instanceof ta){var ue=2===A.fromScale?$.zoomInPaintVertexBuffer:$.zoomOutPaintVertexBuffer;ue&&this._buffers.push(ue)}else($ instanceof oa||$ instanceof Gi)&&$.paintVertexBuffer&&this._buffers.push($.paintVertexBuffer)}},Da.prototype.upload=function(A){for(var F in this.binders){var $=this.binders[F];($ instanceof oa||$ instanceof Gi||$ instanceof ta)&&$.upload(A)}this.updatePaintBuffers()},Da.prototype.destroy=function(){for(var A in this.binders){var F=this.binders[A];(F instanceof oa||F instanceof Gi||F instanceof ta)&&F.destroy()}};var $a=function(A,F,$,ue){void 0===ue&&(ue=function(){return!0}),this.programConfigurations={};for(var xe=0,Me=F;xe<Me.length;xe+=1){var Re=Me[xe];this.programConfigurations[Re.id]=new Da(Re,$,ue,A)}this.needsUpload=!1,this._featureMap=new gr,this._bufferOffset=0};function bo(A,F){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(F+"-","").replace(/-/g,"_")]}function vo(A,F,$){var xe={"line-pattern":{source:sl,composite:sl},"fill-pattern":{source:sl,composite:sl},"fill-extrusion-pattern":{source:sl,composite:sl}}[A];return xe&&xe[$]||{color:{source:ce,composite:ge},number:{source:pe,composite:ce}}[F][$]}$a.prototype.populatePaintArrays=function(A,F,$,ue,xe,Me){for(var Re in this.programConfigurations)this.programConfigurations[Re].populatePaintArrays(A,F,ue,xe,Me);void 0!==F.id&&this._featureMap.add(F.id,$,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},$a.prototype.updatePaintArrays=function(A,F,$,ue){for(var xe=0,Me=$;xe<Me.length;xe+=1){var Re=Me[xe];this.needsUpload=this.programConfigurations[Re.id].updatePaintArrays(A,this._featureMap,F,Re,ue)||this.needsUpload}},$a.prototype.get=function(A){return this.programConfigurations[A]},$a.prototype.upload=function(A){if(this.needsUpload){for(var F in this.programConfigurations)this.programConfigurations[F].upload(A);this.needsUpload=!1}},$a.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},dr("ConstantBinder",qi),dr("CrossFadedConstantBinder",Vi),dr("SourceExpressionBinder",oa),dr("CrossFadedCompositeBinder",ta),dr("CompositeExpressionBinder",Gi),dr("ProgramConfiguration",Da,{omit:["_buffers"]}),dr("ProgramConfigurationSet",$a);var _o=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function lo(A){for(var F=8192/A.extent,$=A.loadGeometry(),ue=0;ue<$.length;ue++)for(var xe=$[ue],Me=0;Me<xe.length;Me++){var Re=xe[Me];Re.x=Math.round(Re.x*F),Re.y=Math.round(Re.y*F),(Re.x<_o.min||Re.x>_o.max||Re.y<_o.min||Re.y>_o.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Re.x=f(Re.x,_o.min,_o.max),Re.y=f(Re.y,_o.min,_o.max))}return $}function ks(A,F,$,ue,xe){A.emplaceBack(2*F+(ue+1)/2,2*$+(xe+1)/2)}var no=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new Qs,this.indexArray=new is,this.segments=new Gt,this.programConfigurations=new $a(Lt,A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};function js(A,F){for(var $=0;$<A.length;$++)if(tl(F,A[$]))return!0;for(var ue=0;ue<F.length;ue++)if(tl(A,F[ue]))return!0;return!!zl(A,F)}function el(A,F,$){return!!tl(A,F)||!!As(F,A,$)}function Cl(A,F){if(1===A.length)return Eu(F,A[0]);for(var $=0;$<F.length;$++)for(var ue=F[$],xe=0;xe<ue.length;xe++)if(tl(A,ue[xe]))return!0;for(var Me=0;Me<A.length;Me++)if(Eu(F,A[Me]))return!0;for(var Re=0;Re<F.length;Re++)if(zl(A,F[Re]))return!0;return!1}function cu(A,F,$){if(A.length>1){if(zl(A,F))return!0;for(var ue=0;ue<F.length;ue++)if(As(F[ue],A,$))return!0}for(var xe=0;xe<A.length;xe++)if(As(A[xe],F,$))return!0;return!1}function zl(A,F){if(0===A.length||0===F.length)return!1;for(var $=0;$<A.length-1;$++)for(var ue=A[$],xe=A[$+1],Me=0;Me<F.length-1;Me++)if(Nl(ue,xe,F[Me],F[Me+1]))return!0;return!1}function Nl(A,F,$,ue){return R(A,$,ue)!==R(F,$,ue)&&R(A,F,$)!==R(A,F,ue)}function As(A,F,$){var ue=$*$;if(1===F.length)return A.distSqr(F[0])<ue;for(var xe=1;xe<F.length;xe++)if(Gl(A,F[xe-1],F[xe])<ue)return!0;return!1}function Gl(A,F,$){var ue=F.distSqr($);if(0===ue)return A.distSqr(F);var xe=((A.x-F.x)*($.x-F.x)+(A.y-F.y)*($.y-F.y))/ue;return A.distSqr(xe<0?F:xe>1?$:$.sub(F)._mult(xe)._add(F))}function Eu(A,F){for(var $,ue,xe,Me=!1,Re=0;Re<A.length;Re++)for(var Ze=0,st=($=A[Re]).length-1;Ze<$.length;st=Ze++)(ue=$[Ze]).y>F.y!=(xe=$[st]).y>F.y&&F.x<(xe.x-ue.x)*(F.y-ue.y)/(xe.y-ue.y)+ue.x&&(Me=!Me);return Me}function tl(A,F){for(var $=!1,ue=0,xe=A.length-1;ue<A.length;xe=ue++){var Me=A[ue],Re=A[xe];Me.y>F.y!=Re.y>F.y&&F.x<(Re.x-Me.x)*(F.y-Me.y)/(Re.y-Me.y)+Me.x&&($=!$)}return $}function Su(A,F,$){var ue=$[0],xe=$[2];if(A.x<ue.x&&F.x<ue.x||A.x>xe.x&&F.x>xe.x||A.y<ue.y&&F.y<ue.y||A.y>xe.y&&F.y>xe.y)return!1;var Me=R(A,F,$[0]);return Me!==R(A,F,$[1])||Me!==R(A,F,$[2])||Me!==R(A,F,$[3])}function Eo(A,F,$){var ue=F.paint.get(A).value;return"constant"===ue.kind?ue.value:$.programConfigurations.get(F.id).getMaxValue(A)}function ms(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function as(A,F,$,ue,xe){if(!F[0]&&!F[1])return A;var Me=t.convert(F)._mult(xe);"viewport"===$&&Me._rotate(-ue);for(var Re=[],Ze=0;Ze<A.length;Ze++)Re.push(A[Ze].sub(Me));return Re}no.prototype.populate=function(A,F,$){var ue=this.layers[0],xe=[],Me=null;"circle"===ue.type&&(Me=ue.layout.get("circle-sort-key"));for(var Re=0,Ze=A;Re<Ze.length;Re+=1){var st=Ze[Re],yt=st.feature,At=st.id,qt=st.index,on=st.sourceLayerIndex,Qt=this.layers[0]._featureFilter.needGeometry,xn={type:yt.type,id:At,properties:yt.properties,geometry:Qt?lo(yt):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),xn,$)){Qt||(xn.geometry=lo(yt));var Pn=Me?Me.evaluate(xn,{},$):void 0;xe.push({id:At,properties:yt.properties,type:yt.type,sourceLayerIndex:on,index:qt,geometry:xn.geometry,patterns:{},sortKey:Pn})}}Me&&xe.sort(function(fi,Ti){return fi.sortKey-Ti.sortKey});for(var Wn=0,nr=xe;Wn<nr.length;Wn+=1){var ir=nr[Wn],kr=ir.geometry,Pr=ir.index,Qr=ir.sourceLayerIndex,ei=A[Pr].feature;this.addFeature(ir,kr,Pr,$),F.featureIndex.insert(ei,kr,Pr,Qr,this.index)}},no.prototype.update=function(A,F,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,F,this.stateDependentLayers,$)},no.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},no.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},no.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Lt),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},no.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},no.prototype.addFeature=function(A,F,$,ue){for(var xe=0,Me=F;xe<Me.length;xe+=1)for(var Re=0,Ze=Me[xe];Re<Ze.length;Re+=1){var st=Ze[Re],yt=st.x,At=st.y;if(!(yt<0||yt>=8192||At<0||At>=8192)){var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),on=qt.vertexLength;ks(this.layoutVertexArray,yt,At,-1,-1),ks(this.layoutVertexArray,yt,At,1,-1),ks(this.layoutVertexArray,yt,At,1,1),ks(this.layoutVertexArray,yt,At,-1,1),this.indexArray.emplaceBack(on,on+1,on+2),this.indexArray.emplaceBack(on,on+3,on+2),qt.vertexLength+=4,qt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,$,{},ue)},dr("CircleBucket",no,{omit:["layers"]});var xc=new Fs({"circle-sort-key":new Hi(ke.layout_circle["circle-sort-key"])}),Pf={paint:new Fs({"circle-radius":new Hi(ke.paint_circle["circle-radius"]),"circle-color":new Hi(ke.paint_circle["circle-color"]),"circle-blur":new Hi(ke.paint_circle["circle-blur"]),"circle-opacity":new Hi(ke.paint_circle["circle-opacity"]),"circle-translate":new Li(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Li(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Li(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Li(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Hi(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Hi(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Hi(ke.paint_circle["circle-stroke-opacity"])}),layout:xc},Gs=typeof Float32Array<"u"?Float32Array:Array;function Yl(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function Uu(A,F,$){var ue=F[0],xe=F[1],Me=F[2],Re=F[3],Ze=F[4],st=F[5],yt=F[6],At=F[7],qt=F[8],on=F[9],Qt=F[10],xn=F[11],Pn=F[12],Zn=F[13],Wn=F[14],nr=F[15],ir=$[0],ur=$[1],kr=$[2],Pr=$[3];return A[0]=ir*ue+ur*Ze+kr*qt+Pr*Pn,A[1]=ir*xe+ur*st+kr*on+Pr*Zn,A[2]=ir*Me+ur*yt+kr*Qt+Pr*Wn,A[3]=ir*Re+ur*At+kr*xn+Pr*nr,A[4]=(ir=$[4])*ue+(ur=$[5])*Ze+(kr=$[6])*qt+(Pr=$[7])*Pn,A[5]=ir*xe+ur*st+kr*on+Pr*Zn,A[6]=ir*Me+ur*yt+kr*Qt+Pr*Wn,A[7]=ir*Re+ur*At+kr*xn+Pr*nr,A[8]=(ir=$[8])*ue+(ur=$[9])*Ze+(kr=$[10])*qt+(Pr=$[11])*Pn,A[9]=ir*xe+ur*st+kr*on+Pr*Zn,A[10]=ir*Me+ur*yt+kr*Qt+Pr*Wn,A[11]=ir*Re+ur*At+kr*xn+Pr*nr,A[12]=(ir=$[12])*ue+(ur=$[13])*Ze+(kr=$[14])*qt+(Pr=$[15])*Pn,A[13]=ir*xe+ur*st+kr*on+Pr*Zn,A[14]=ir*Me+ur*yt+kr*Qt+Pr*Wn,A[15]=ir*Re+ur*At+kr*xn+Pr*nr,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,F=0,$=arguments.length;$--;)F+=A[$]*A[$];return Math.sqrt(F)});var Dl,F,Oh=Uu;function Wl(A,F,$){var ue=F[0],xe=F[1],Me=F[2],Re=F[3];return A[0]=$[0]*ue+$[4]*xe+$[8]*Me+$[12]*Re,A[1]=$[1]*ue+$[5]*xe+$[9]*Me+$[13]*Re,A[2]=$[2]*ue+$[6]*xe+$[10]*Me+$[14]*Re,A[3]=$[3]*ue+$[7]*xe+$[11]*Me+$[15]*Re,A}Dl=new Gs(3),Gs!=Float32Array&&(Dl[0]=0,Dl[1]=0,Dl[2]=0),F=new Gs(4),Gs!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0,F[3]=0);var _c=(function(){var F=new Gs(2);Gs!=Float32Array&&(F[0]=0,F[1]=0)}(),function(A){function F($){A.call(this,$,Pf)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.createBucket=function($){return new no($)},F.prototype.queryRadius=function($){var ue=$;return Eo("circle-radius",this,ue)+Eo("circle-stroke-width",this,ue)+ms(this.paint.get("circle-translate"))},F.prototype.queryIntersectsFeature=function($,ue,xe,Me,Re,Ze,st,yt){for(var At=as($,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ze.angle,st),qt=this.paint.get("circle-radius").evaluate(ue,xe)+this.paint.get("circle-stroke-width").evaluate(ue,xe),on="map"===this.paint.get("circle-pitch-alignment"),Qt=on?At:function(Qr,ei){return Qr.map(function(fi){return Hu(fi,ei)})}(At,yt),xn=on?qt*st:qt,Pn=0,Zn=Me;Pn<Zn.length;Pn+=1)for(var Wn=0,nr=Zn[Pn];Wn<nr.length;Wn+=1){var ir=nr[Wn],ur=on?ir:Hu(ir,yt),kr=xn,Pr=Wl([],[ir.x,ir.y,0,1],yt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?kr*=Pr[3]/Ze.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(kr*=Ze.cameraToCenterDistance/Pr[3]),el(Qt,ur,kr))return!0}return!1},F}(qs));function Hu(A,F){var $=Wl([],[A.x,A.y,0,1],F);return new t($[0]/$[3],$[1]/$[3])}var Fh=function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F}(no);function Jc(A,F,$,ue){var xe=F.width,Me=F.height;if(ue){if(ue instanceof Uint8ClampedArray)ue=new Uint8Array(ue.buffer);else if(ue.length!==xe*Me*$)throw new RangeError("mismatched image size")}else ue=new Uint8Array(xe*Me*$);return A.width=xe,A.height=Me,A.data=ue,A}function qu(A,F,$){var ue=F.width,xe=F.height;if(ue!==A.width||xe!==A.height){var Me=Jc({},{width:ue,height:xe},$);tp(A,Me,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ue),height:Math.min(A.height,xe)},$),A.width=ue,A.height=xe,A.data=Me.data}}function tp(A,F,$,ue,xe,Me){if(0===xe.width||0===xe.height)return F;if(xe.width>A.width||xe.height>A.height||$.x>A.width-xe.width||$.y>A.height-xe.height)throw new RangeError("out of range source coordinates for image copy");if(xe.width>F.width||xe.height>F.height||ue.x>F.width-xe.width||ue.y>F.height-xe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Re=A.data,Ze=F.data,st=0;st<xe.height;st++)for(var yt=(($.y+st)*A.width+$.x)*Me,At=((ue.y+st)*F.width+ue.x)*Me,qt=0;qt<xe.width*Me;qt++)Ze[At+qt]=Re[yt+qt];return F}dr("HeatmapBucket",Fh,{omit:["layers"]});var Gu=function(A,F){Jc(this,A,1,F)};Gu.prototype.resize=function(A){qu(this,A,1)},Gu.prototype.clone=function(){return new Gu({width:this.width,height:this.height},new Uint8Array(this.data))},Gu.copy=function(A,F,$,ue,xe){tp(A,F,$,ue,xe,1)};var la=function(A,F){Jc(this,A,4,F)};la.prototype.resize=function(A){qu(this,A,4)},la.prototype.replace=function(A,F){F?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A},la.prototype.clone=function(){return new la({width:this.width,height:this.height},new Uint8Array(this.data))},la.copy=function(A,F,$,ue,xe){tp(A,F,$,ue,xe,4)},dr("AlphaImage",Gu),dr("RGBAImage",la);var vv={paint:new Fs({"heatmap-radius":new Hi(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Hi(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Li(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new da(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Li(ke.paint_heatmap["heatmap-opacity"])})};function N0(A,F){for(var $=new Uint8Array(1024),ue={},xe=0,Me=0;xe<256;xe++,Me+=4){ue[F]=xe/255;var Re=A.evaluate(ue);$[Me+0]=Math.floor(255*Re.r/Re.a),$[Me+1]=Math.floor(255*Re.g/Re.a),$[Me+2]=Math.floor(255*Re.b/Re.a),$[Me+3]=Math.floor(255*Re.a)}return new la({width:256,height:1},$)}var yv=function(A){function F($){A.call(this,$,vv),this._updateColorRamp()}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.createBucket=function($){return new Fh($)},F.prototype._handleSpecialPaintPropertyUpdate=function($){"heatmap-color"===$&&this._updateColorRamp()},F.prototype._updateColorRamp=function(){this.colorRamp=N0(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},F.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},F.prototype.queryRadius=function(){return 0},F.prototype.queryIntersectsFeature=function(){return!1},F.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},F}(qs),xv={paint:new Fs({"hillshade-illumination-direction":new Li(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Li(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Li(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Li(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Li(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Li(ke.paint_hillshade["hillshade-accent-color"])})},bv=function(A){function F($){A.call(this,$,xv)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},F}(qs),B0=_a([{name:"a_pos",components:2,type:"Int16"}],4).members,np=zh,Qc=zh;function zh(A,F,$){$=$||2;var ue,xe,Me,Re,Ze,st,yt,At=F&&F.length,qt=At?F[0]*$:A.length,on=j0(A,0,qt,$,!0),Qt=[];if(!on||on.next===on.prev)return Qt;if(At&&(on=function(Pn,Zn,Wn,nr){var ir,ur,Qr,ei=[];for(ir=0,ur=Zn.length;ir<ur;ir++)(Qr=j0(Pn,Zn[ir]*nr,ir<ur-1?Zn[ir+1]*nr:Pn.length,nr,!1))===Qr.next&&(Qr.steiner=!0),ei.push(ip(Qr));for(ei.sort(fu),ir=0;ir<ei.length;ir++)rp(ei[ir],Wn),Wn=Uo(Wn,Wn.next);return Wn}(A,F,on,$)),A.length>80*$){ue=Me=A[0],xe=Re=A[1];for(var xn=$;xn<qt;xn+=$)(Ze=A[xn])<ue&&(ue=Ze),(st=A[xn+1])<xe&&(xe=st),Ze>Me&&(Me=Ze),st>Re&&(Re=st);yt=0!==(yt=Math.max(Me-ue,Re-xe))?1/yt:0}return Yu(on,Qt,$,ue,xe,yt),Qt}function j0(A,F,$,ue,xe){var Me,Re;if(xe===Uh(A,F,$,ue)>0)for(Me=F;Me<$;Me+=ue)Re=jh(Me,A[Me],A[Me+1],Re);else for(Me=$-ue;Me>=F;Me-=ue)Re=jh(Me,A[Me],A[Me+1],Re);return Re&&Nh(Re,Re.next)&&(tf(Re),Re=Re.next),Re}function Uo(A,F){if(!A)return A;F||(F=A);var $,ue=A;do{if($=!1,ue.steiner||!Nh(ue,ue.next)&&0!==vs(ue.prev,ue,ue.next))ue=ue.next;else{if(tf(ue),(ue=F=ue.prev)===ue.next)break;$=!0}}while($||ue!==F);return F}function Yu(A,F,$,ue,xe,Me,Re){if(A){!Re&&Me&&function(At,qt,on,Qt){var xn=At;do{null===xn.z&&(xn.z=Wu(xn.x,xn.y,qt,on,Qt)),xn.prevZ=xn.prev,xn.nextZ=xn.next,xn=xn.next}while(xn!==At);xn.prevZ.nextZ=null,xn.prevZ=null,function(Pn){var Zn,Wn,nr,ir,ur,kr,Pr,Qr,ei=1;do{for(Wn=Pn,Pn=null,ur=null,kr=0;Wn;){for(kr++,nr=Wn,Pr=0,Zn=0;Zn<ei&&(Pr++,nr=nr.nextZ);Zn++);for(Qr=ei;Pr>0||Qr>0&&nr;)0!==Pr&&(0===Qr||!nr||Wn.z<=nr.z)?(ir=Wn,Wn=Wn.nextZ,Pr--):(ir=nr,nr=nr.nextZ,Qr--),ur?ur.nextZ=ir:Pn=ir,ir.prevZ=ur,ur=ir;Wn=nr}ur.nextZ=null,ei*=2}while(kr>1)}(xn)}(A,ue,xe,Me);for(var Ze,st,yt=A;A.prev!==A.next;)if(Ze=A.prev,st=A.next,Me?_v(A,ue,xe,Me):ef(A))F.push(Ze.i/$),F.push(A.i/$),F.push(st.i/$),tf(A),A=st.next,yt=st.next;else if((A=st)===yt){Re?1===Re?Yu(A=V0(Uo(A),F,$),F,$,ue,xe,Me,2):2===Re&&yl(A,F,$,ue,xe,Me):Yu(Uo(A),F,$,ue,xe,Me,1);break}}}function ef(A){var F=A.prev,$=A,ue=A.next;if(vs(F,$,ue)>=0)return!1;for(var xe=A.next.next;xe!==A.prev;){if(wc(F.x,F.y,$.x,$.y,ue.x,ue.y,xe.x,xe.y)&&vs(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function _v(A,F,$,ue){var xe=A.prev,Me=A,Re=A.next;if(vs(xe,Me,Re)>=0)return!1;for(var yt=xe.x>Me.x?xe.x>Re.x?xe.x:Re.x:Me.x>Re.x?Me.x:Re.x,At=xe.y>Me.y?xe.y>Re.y?xe.y:Re.y:Me.y>Re.y?Me.y:Re.y,qt=Wu(xe.x<Me.x?xe.x<Re.x?xe.x:Re.x:Me.x<Re.x?Me.x:Re.x,xe.y<Me.y?xe.y<Re.y?xe.y:Re.y:Me.y<Re.y?Me.y:Re.y,F,$,ue),on=Wu(yt,At,F,$,ue),Qt=A.prevZ,xn=A.nextZ;Qt&&Qt.z>=qt&&xn&&xn.z<=on;){if(Qt!==A.prev&&Qt!==A.next&&wc(xe.x,xe.y,Me.x,Me.y,Re.x,Re.y,Qt.x,Qt.y)&&vs(Qt.prev,Qt,Qt.next)>=0||(Qt=Qt.prevZ,xn!==A.prev&&xn!==A.next&&wc(xe.x,xe.y,Me.x,Me.y,Re.x,Re.y,xn.x,xn.y)&&vs(xn.prev,xn,xn.next)>=0))return!1;xn=xn.nextZ}for(;Qt&&Qt.z>=qt;){if(Qt!==A.prev&&Qt!==A.next&&wc(xe.x,xe.y,Me.x,Me.y,Re.x,Re.y,Qt.x,Qt.y)&&vs(Qt.prev,Qt,Qt.next)>=0)return!1;Qt=Qt.prevZ}for(;xn&&xn.z<=on;){if(xn!==A.prev&&xn!==A.next&&wc(xe.x,xe.y,Me.x,Me.y,Re.x,Re.y,xn.x,xn.y)&&vs(xn.prev,xn,xn.next)>=0)return!1;xn=xn.nextZ}return!0}function V0(A,F,$){var ue=A;do{var xe=ue.prev,Me=ue.next.next;!Nh(xe,Me)&&Bh(xe,ue,ue.next,Me)&&Zl(xe,Me)&&Zl(Me,xe)&&(F.push(xe.i/$),F.push(ue.i/$),F.push(Me.i/$),tf(ue),tf(ue.next),ue=A=Me),ue=ue.next}while(ue!==A);return Uo(ue)}function yl(A,F,$,ue,xe,Me){var Re=A;do{for(var Ze=Re.next.next;Ze!==Re.prev;){if(Re.i!==Ze.i&&U0(Re,Ze)){var st=H0(Re,Ze);return Re=Uo(Re,Re.next),st=Uo(st,st.next),Yu(Re,F,$,ue,xe,Me),void Yu(st,F,$,ue,xe,Me)}Ze=Ze.next}Re=Re.next}while(Re!==A)}function fu(A,F){return A.x-F.x}function rp(A,F){if(F=function(ue,xe){var Me,Re=xe,Ze=ue.x,st=ue.y,yt=-1/0;do{if(st<=Re.y&&st>=Re.next.y&&Re.next.y!==Re.y){var At=Re.x+(st-Re.y)*(Re.next.x-Re.x)/(Re.next.y-Re.y);if(At<=Ze&&At>yt){if(yt=At,At===Ze){if(st===Re.y)return Re;if(st===Re.next.y)return Re.next}Me=Re.x<Re.next.x?Re:Re.next}}Re=Re.next}while(Re!==xe);if(!Me)return null;if(Ze===yt)return Me;var qt,on=Me,Qt=Me.x,xn=Me.y,Pn=1/0;Re=Me;do{Ze>=Re.x&&Re.x>=Qt&&Ze!==Re.x&&wc(st<xn?Ze:yt,st,Qt,xn,st<xn?yt:Ze,st,Re.x,Re.y)&&(qt=Math.abs(st-Re.y)/(Ze-Re.x),Zl(Re,ue)&&(qt<Pn||qt===Pn&&(Re.x>Me.x||Re.x===Me.x&&Rf(Me,Re)))&&(Me=Re,Pn=qt)),Re=Re.next}while(Re!==on);return Me}(A,F)){var $=H0(F,A);Uo(F,F.next),Uo($,$.next)}}function Rf(A,F){return vs(A.prev,A,F.prev)<0&&vs(F.next,A,A.next)<0}function Wu(A,F,$,ue,xe){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-$)*xe)|A<<8))|A<<4))|A<<2))|A<<1))|(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-ue)*xe)|F<<8))|F<<4))|F<<2))|F<<1))<<1}function ip(A){var F=A,$=A;do{(F.x<$.x||F.x===$.x&&F.y<$.y)&&($=F),F=F.next}while(F!==A);return $}function wc(A,F,$,ue,xe,Me,Re,Ze){return(xe-Re)*(F-Ze)-(A-Re)*(Me-Ze)>=0&&(A-Re)*(ue-Ze)-($-Re)*(F-Ze)>=0&&($-Re)*(Me-Ze)-(xe-Re)*(ue-Ze)>=0}function U0(A,F){return A.next.i!==F.i&&A.prev.i!==F.i&&!function($,ue){var xe=$;do{if(xe.i!==$.i&&xe.next.i!==$.i&&xe.i!==ue.i&&xe.next.i!==ue.i&&Bh(xe,xe.next,$,ue))return!0;xe=xe.next}while(xe!==$);return!1}(A,F)&&(Zl(A,F)&&Zl(F,A)&&function($,ue){var xe=$,Me=!1,Re=($.x+ue.x)/2,Ze=($.y+ue.y)/2;do{xe.y>Ze!=xe.next.y>Ze&&xe.next.y!==xe.y&&Re<(xe.next.x-xe.x)*(Ze-xe.y)/(xe.next.y-xe.y)+xe.x&&(Me=!Me),xe=xe.next}while(xe!==$);return Me}(A,F)&&(vs(A.prev,A,F.prev)||vs(A,F.prev,F))||Nh(A,F)&&vs(A.prev,A,A.next)>0&&vs(F.prev,F,F.next)>0)}function vs(A,F,$){return(F.y-A.y)*($.x-F.x)-(F.x-A.x)*($.y-F.y)}function Nh(A,F){return A.x===F.x&&A.y===F.y}function Bh(A,F,$,ue){var xe=Tc(vs(A,F,$)),Me=Tc(vs(A,F,ue)),Re=Tc(vs($,ue,A)),Ze=Tc(vs($,ue,F));return xe!==Me&&Re!==Ze||!(0!==xe||!nl(A,$,F))||!(0!==Me||!nl(A,ue,F))||!(0!==Re||!nl($,A,ue))||!(0!==Ze||!nl($,F,ue))}function nl(A,F,$){return F.x<=Math.max(A.x,$.x)&&F.x>=Math.min(A.x,$.x)&&F.y<=Math.max(A.y,$.y)&&F.y>=Math.min(A.y,$.y)}function Tc(A){return A>0?1:A<0?-1:0}function Zl(A,F){return vs(A.prev,A,A.next)<0?vs(A,F,A.next)>=0&&vs(A,A.prev,F)>=0:vs(A,F,A.prev)<0||vs(A,A.next,F)<0}function H0(A,F){var $=new Vh(A.i,A.x,A.y),ue=new Vh(F.i,F.x,F.y),xe=A.next,Me=F.prev;return A.next=F,F.prev=A,$.next=xe,xe.prev=$,ue.next=$,$.prev=ue,Me.next=ue,ue.prev=Me,ue}function jh(A,F,$,ue){var xe=new Vh(A,F,$);return ue?(xe.next=ue.next,xe.prev=ue,ue.next.prev=xe,ue.next=xe):(xe.prev=xe,xe.next=xe),xe}function tf(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Vh(A,F,$){this.i=A,this.x=F,this.y=$,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Uh(A,F,$,ue){for(var xe=0,Me=F,Re=$-ue;Me<$;Me+=ue)xe+=(A[Re]-A[Me])*(A[Me+1]+A[Re+1]),Re=Me;return xe}function q0(A,F,$,ue,xe){!function Me(Re,Ze,st,yt,At){for(;yt>st;){if(yt-st>600){var qt=yt-st+1,on=Ze-st+1,Qt=Math.log(qt),xn=.5*Math.exp(2*Qt/3),Pn=.5*Math.sqrt(Qt*xn*(qt-xn)/qt)*(on-qt/2<0?-1:1);Me(Re,Ze,Math.max(st,Math.floor(Ze-on*xn/qt+Pn)),Math.min(yt,Math.floor(Ze+(qt-on)*xn/qt+Pn)),At)}var nr=Re[Ze],ir=st,ur=yt;for(nf(Re,st,Ze),At(Re[yt],nr)>0&&nf(Re,st,yt);ir<ur;){for(nf(Re,ir,ur),ir++,ur--;At(Re[ir],nr)<0;)ir++;for(;At(Re[ur],nr)>0;)ur--}0===At(Re[st],nr)?nf(Re,st,ur):nf(Re,++ur,yt),ur<=Ze&&(st=ur+1),Ze<=ur&&(yt=ur-1)}}(A,F,$||0,ue||A.length-1,xe||G0)}function nf(A,F,$){var ue=A[F];A[F]=A[$],A[$]=ue}function G0(A,F){return A<F?-1:A>F?1:0}function rf(A,F){var $=A.length;if($<=1)return[A];for(var ue,xe,Me=[],Re=0;Re<$;Re++){var Ze=O(A[Re]);0!==Ze&&(A[Re].area=Math.abs(Ze),void 0===xe&&(xe=Ze<0),xe===Ze<0?(ue&&Me.push(ue),ue=[A[Re]]):ue.push(A[Re]))}if(ue&&Me.push(ue),F>1)for(var st=0;st<Me.length;st++)Me[st].length<=F||(q0(Me[st],F,1,Me[st].length-1,Ff),Me[st]=Me[st].slice(0,F));return Me}function Ff(A,F){return F.area-A.area}function ap(A,F,$){for(var ue=$.patternDependencies,xe=!1,Me=0,Re=F;Me<Re.length;Me+=1){var Ze=Re[Me].paint.get(A+"-pattern");Ze.isConstant()||(xe=!0);var st=Ze.constantOr(null);st&&(xe=!0,ue[st.to]=!0,ue[st.from]=!0)}return xe}function Zu(A,F,$,ue,xe){for(var Me=xe.patternDependencies,Re=0,Ze=F;Re<Ze.length;Re+=1){var st=Ze[Re],yt=st.paint.get(A+"-pattern").value;if("constant"!==yt.kind){var At=yt.evaluate({zoom:ue-1},$,{},xe.availableImages),qt=yt.evaluate({zoom:ue},$,{},xe.availableImages),on=yt.evaluate({zoom:ue+1},$,{},xe.availableImages);qt=qt&&qt.name?qt.name:qt,on=on&&on.name?on.name:on,Me[At=At&&At.name?At.name:At]=!0,Me[qt]=!0,Me[on]=!0,$.patterns[st.id]={min:At,mid:qt,max:on}}}return $}zh.deviation=function(A,F,$,ue){var xe=F&&F.length,Re=Math.abs(Uh(A,0,xe?F[0]*$:A.length,$));if(xe)for(var Ze=0,st=F.length;Ze<st;Ze++)Re-=Math.abs(Uh(A,F[Ze]*$,Ze<st-1?F[Ze+1]*$:A.length,$));var qt=0;for(Ze=0;Ze<ue.length;Ze+=3){var on=ue[Ze]*$,Qt=ue[Ze+1]*$,xn=ue[Ze+2]*$;qt+=Math.abs((A[on]-A[xn])*(A[Qt+1]-A[on+1])-(A[on]-A[Qt])*(A[xn+1]-A[on+1]))}return 0===Re&&0===qt?0:Math.abs((qt-Re)/Re)},zh.flatten=function(A){for(var F=A[0][0].length,$={vertices:[],holes:[],dimensions:F},ue=0,xe=0;xe<A.length;xe++){for(var Me=0;Me<A[xe].length;Me++)for(var Re=0;Re<F;Re++)$.vertices.push(A[xe][Me][Re]);xe>0&&$.holes.push(ue+=A[xe-1].length)}return $},np.default=Qc;var xl=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Qs,this.indexArray=new is,this.indexArray2=new j,this.programConfigurations=new $a(B0,A.layers,A.zoom),this.segments=new Gt,this.segments2=new Gt,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};xl.prototype.populate=function(A,F,$){this.hasPattern=ap("fill",this.layers,F);for(var ue=this.layers[0].layout.get("fill-sort-key"),xe=[],Me=0,Re=A;Me<Re.length;Me+=1){var Ze=Re[Me],st=Ze.feature,yt=Ze.id,At=Ze.index,qt=Ze.sourceLayerIndex,on=this.layers[0]._featureFilter.needGeometry,Qt={type:st.type,id:yt,properties:st.properties,geometry:on?lo(st):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),Qt,$)){on||(Qt.geometry=lo(st));var xn=ue?ue.evaluate(Qt,{},$,F.availableImages):void 0;xe.push({id:yt,properties:st.properties,type:st.type,sourceLayerIndex:qt,index:At,geometry:Qt.geometry,patterns:{},sortKey:xn})}}ue&&xe.sort(function(fi,Ti){return fi.sortKey-Ti.sortKey});for(var Zn=0,Wn=xe;Zn<Wn.length;Zn+=1){var nr=Wn[Zn],ur=nr.geometry,kr=nr.index,Pr=nr.sourceLayerIndex;if(this.hasPattern){var Qr=Zu("fill",this.layers,nr,this.zoom,F);this.patternFeatures.push(Qr)}else this.addFeature(nr,ur,kr,$,{});F.featureIndex.insert(A[kr].feature,ur,kr,Pr,this.index)}},xl.prototype.update=function(A,F,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,F,this.stateDependentLayers,$)},xl.prototype.addFeatures=function(A,F,$){for(var ue=0,xe=this.patternFeatures;ue<xe.length;ue+=1){var Me=xe[ue];this.addFeature(Me,Me.geometry,Me.index,F,$)}},xl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},xl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xl.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,B0),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},xl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},xl.prototype.addFeature=function(A,F,$,ue,xe){for(var Me=0,Re=rf(F,500);Me<Re.length;Me+=1){for(var Ze=Re[Me],st=0,yt=0,At=Ze;yt<At.length;yt+=1)st+=At[yt].length;for(var qt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),on=qt.vertexLength,Qt=[],xn=[],Pn=0,Zn=Ze;Pn<Zn.length;Pn+=1){var Wn=Zn[Pn];if(0!==Wn.length){Wn!==Ze[0]&&xn.push(Qt.length/2);var nr=this.segments2.prepareSegment(Wn.length,this.layoutVertexArray,this.indexArray2),ir=nr.vertexLength;this.layoutVertexArray.emplaceBack(Wn[0].x,Wn[0].y),this.indexArray2.emplaceBack(ir+Wn.length-1,ir),Qt.push(Wn[0].x),Qt.push(Wn[0].y);for(var ur=1;ur<Wn.length;ur++)this.layoutVertexArray.emplaceBack(Wn[ur].x,Wn[ur].y),this.indexArray2.emplaceBack(ir+ur-1,ir+ur),Qt.push(Wn[ur].x),Qt.push(Wn[ur].y);nr.vertexLength+=Wn.length,nr.primitiveLength+=Wn.length}}for(var kr=np(Qt,xn),Pr=0;Pr<kr.length;Pr+=3)this.indexArray.emplaceBack(on+kr[Pr],on+kr[Pr+1],on+kr[Pr+2]);qt.vertexLength+=st,qt.primitiveLength+=kr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,$,xe,ue)},dr("FillBucket",xl,{omit:["layers","patternFeatures"]});var zf=new Fs({"fill-sort-key":new Hi(ke.layout_fill["fill-sort-key"])}),Y0={paint:new Fs({"fill-antialias":new Li(ke.paint_fill["fill-antialias"]),"fill-opacity":new Hi(ke.paint_fill["fill-opacity"]),"fill-color":new Hi(ke.paint_fill["fill-color"]),"fill-outline-color":new Hi(ke.paint_fill["fill-outline-color"]),"fill-translate":new Li(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Li(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Hl(ke.paint_fill["fill-pattern"])}),layout:zf},W0=function(A){function F($){A.call(this,$,Y0)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.recalculate=function($,ue){A.prototype.recalculate.call(this,$,ue);var xe=this.paint._values["fill-outline-color"];"constant"===xe.value.kind&&void 0===xe.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},F.prototype.createBucket=function($){return new xl($)},F.prototype.queryRadius=function(){return ms(this.paint.get("fill-translate"))},F.prototype.queryIntersectsFeature=function($,ue,xe,Me,Re,Ze,st){return Cl(as($,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ze.angle,st),Me)},F.prototype.isTileClipped=function(){return!0},F}(qs),op=_a([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Hh=Xl;function Xl(A,F,$,ue,xe){this.properties={},this.extent=$,this.type=0,this._pbf=A,this._geometry=-1,this._keys=ue,this._values=xe,A.readFields(Mc,this,F)}function Mc(A,F,$){1==A?F.id=$.readVarint():2==A?function(ue,xe){for(var Me=ue.readVarint()+ue.pos;ue.pos<Me;){var Re=xe._keys[ue.readVarint()],Ze=xe._values[ue.readVarint()];xe.properties[Re]=Ze}}($,F):3==A?F.type=$.readVarint():4==A&&(F._geometry=$.pos)}function Z0(A){for(var F,$,ue=0,xe=0,Me=A.length,Re=Me-1;xe<Me;Re=xe++)ue+=(($=A[Re]).x-(F=A[xe]).x)*(F.y+$.y);return ue}Xl.types=["Unknown","Point","LineString","Polygon"],Xl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var F,$=A.readVarint()+A.pos,ue=1,xe=0,Me=0,Re=0,Ze=[];A.pos<$;){if(xe<=0){var st=A.readVarint();ue=7&st,xe=st>>3}if(xe--,1===ue||2===ue)Me+=A.readSVarint(),Re+=A.readSVarint(),1===ue&&(F&&Ze.push(F),F=[]),F.push(new t(Me,Re));else{if(7!==ue)throw new Error("unknown command "+ue);F&&F.push(F[0].clone())}}return F&&Ze.push(F),Ze},Xl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var F=A.readVarint()+A.pos,$=1,ue=0,xe=0,Me=0,Re=1/0,Ze=-1/0,st=1/0,yt=-1/0;A.pos<F;){if(ue<=0){var At=A.readVarint();$=7&At,ue=At>>3}if(ue--,1===$||2===$)(xe+=A.readSVarint())<Re&&(Re=xe),xe>Ze&&(Ze=xe),(Me+=A.readSVarint())<st&&(st=Me),Me>yt&&(yt=Me);else if(7!==$)throw new Error("unknown command "+$)}return[Re,st,Ze,yt]},Xl.prototype.toGeoJSON=function(A,F,$){var ue,xe,Me=this.extent*Math.pow(2,$),Re=this.extent*A,Ze=this.extent*F,st=this.loadGeometry(),yt=Xl.types[this.type];function At(Qt){for(var xn=0;xn<Qt.length;xn++){var Pn=Qt[xn];Qt[xn]=[360*(Pn.x+Re)/Me-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pn.y+Ze)/Me)*Math.PI/180))-90]}}switch(this.type){case 1:var qt=[];for(ue=0;ue<st.length;ue++)qt[ue]=st[ue][0];At(st=qt);break;case 2:for(ue=0;ue<st.length;ue++)At(st[ue]);break;case 3:for(st=function(Qt){var xn=Qt.length;if(xn<=1)return[Qt];for(var Pn,Zn,Wn=[],nr=0;nr<xn;nr++){var ir=Z0(Qt[nr]);0!==ir&&(void 0===Zn&&(Zn=ir<0),Zn===ir<0?(Pn&&Wn.push(Pn),Pn=[Qt[nr]]):Pn.push(Qt[nr]))}return Pn&&Wn.push(Pn),Wn}(st),ue=0;ue<st.length;ue++)for(xe=0;xe<st[ue].length;xe++)At(st[ue][xe])}1===st.length?st=st[0]:yt="Multi"+yt;var on={type:"Feature",geometry:{type:yt,coordinates:st},properties:this.properties};return"id"in this&&(on.id=this.id),on};var ao=qh;function qh(A,F){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(X0,this,F),this.length=this._features.length}function X0(A,F,$){15===A?F.version=$.readVarint():1===A?F.name=$.readString():5===A?F.extent=$.readVarint():2===A?F._features.push($.pos):3===A?F._keys.push($.readString()):4===A&&F._values.push(function(ue){for(var xe=null,Me=ue.readVarint()+ue.pos;ue.pos<Me;){var Re=ue.readVarint()>>3;xe=1===Re?ue.readString():2===Re?ue.readFloat():3===Re?ue.readDouble():4===Re?ue.readVarint64():5===Re?ue.readVarint():6===Re?ue.readSVarint():7===Re?ue.readBoolean():null}return xe}($))}function Gh(A,F,$){if(3===A){var ue=new ao($,$.readVarint()+$.pos);ue.length&&(F[ue.name]=ue)}}qh.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var F=this._pbf.readVarint()+this._pbf.pos;return new Hh(this._pbf,F,this.extent,this._keys,this._values)};var $l={VectorTile:function(A,F){this.layers=A.readFields(Gh,{},F)},VectorTileFeature:Hh,VectorTileLayer:ao},$0=$l.VectorTileFeature.types,Yh=Math.pow(2,13);function af(A,F,$,ue,xe,Me,Re,Ze){A.emplaceBack(F,$,2*Math.floor(ue*Yh)+Re,xe*Yh*2,Me*Yh*2,Math.round(Ze))}var bl=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new vl,this.indexArray=new is,this.programConfigurations=new $a(op,A.layers,A.zoom),this.segments=new Gt,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};function Nf(A,F){return A.x===F.x&&(A.x<0||A.x>8192)||A.y===F.y&&(A.y<0||A.y>8192)}function sp(A){return A.every(function(F){return F.x<0})||A.every(function(F){return F.x>8192})||A.every(function(F){return F.y<0})||A.every(function(F){return F.y>8192})}bl.prototype.populate=function(A,F,$){this.features=[],this.hasPattern=ap("fill-extrusion",this.layers,F);for(var ue=0,xe=A;ue<xe.length;ue+=1){var Me=xe[ue],Re=Me.feature,Ze=Me.id,st=Me.index,yt=Me.sourceLayerIndex,At=this.layers[0]._featureFilter.needGeometry,qt={type:Re.type,id:Ze,properties:Re.properties,geometry:At?lo(Re):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),qt,$)){var on={id:Ze,sourceLayerIndex:yt,index:st,geometry:At?qt.geometry:lo(Re),properties:Re.properties,type:Re.type,patterns:{}};void 0!==Re.id&&(on.id=Re.id),this.hasPattern?this.features.push(Zu("fill-extrusion",this.layers,on,this.zoom,F)):this.addFeature(on,on.geometry,st,$,{}),F.featureIndex.insert(Re,on.geometry,st,yt,this.index,!0)}}},bl.prototype.addFeatures=function(A,F,$){for(var ue=0,xe=this.features;ue<xe.length;ue+=1){var Me=xe[ue];this.addFeature(Me,Me.geometry,Me.index,F,$)}},bl.prototype.update=function(A,F,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,F,this.stateDependentLayers,$)},bl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},bl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bl.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,op),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},bl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bl.prototype.addFeature=function(A,F,$,ue,xe){for(var Me=0,Re=rf(F,500);Me<Re.length;Me+=1){for(var Ze=Re[Me],st=0,yt=0,At=Ze;yt<At.length;yt+=1)st+=At[yt].length;for(var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),on=0,Qt=Ze;on<Qt.length;on+=1){var xn=Qt[on];if(0!==xn.length&&!sp(xn))for(var Pn=0,Zn=0;Zn<xn.length;Zn++){var Wn=xn[Zn];if(Zn>=1){var nr=xn[Zn-1];if(!Nf(Wn,nr)){qt.vertexLength+4>Gt.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var ir=Wn.sub(nr)._perp()._unit(),ur=nr.dist(Wn);Pn+ur>32768&&(Pn=0),af(this.layoutVertexArray,Wn.x,Wn.y,ir.x,ir.y,0,0,Pn),af(this.layoutVertexArray,Wn.x,Wn.y,ir.x,ir.y,0,1,Pn),af(this.layoutVertexArray,nr.x,nr.y,ir.x,ir.y,0,0,Pn+=ur),af(this.layoutVertexArray,nr.x,nr.y,ir.x,ir.y,0,1,Pn);var kr=qt.vertexLength;this.indexArray.emplaceBack(kr,kr+2,kr+1),this.indexArray.emplaceBack(kr+1,kr+2,kr+3),qt.vertexLength+=4,qt.primitiveLength+=2}}}}if(qt.vertexLength+st>Gt.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),"Polygon"===$0[A.type]){for(var Pr=[],Qr=[],ei=qt.vertexLength,fi=0,Ti=Ze;fi<Ti.length;fi+=1){var Ci=Ti[fi];if(0!==Ci.length){Ci!==Ze[0]&&Qr.push(Pr.length/2);for(var xi=0;xi<Ci.length;xi++){var Ni=Ci[xi];af(this.layoutVertexArray,Ni.x,Ni.y,0,0,1,1,0),Pr.push(Ni.x),Pr.push(Ni.y)}}}for(var Pi=np(Pr,Qr),Di=0;Di<Pi.length;Di+=3)this.indexArray.emplaceBack(ei+Pi[Di],ei+Pi[Di+2],ei+Pi[Di+1]);qt.primitiveLength+=Pi.length/3,qt.vertexLength+=st}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,$,xe,ue)},dr("FillExtrusionBucket",bl,{omit:["layers","features"]});var Bf={paint:new Fs({"fill-extrusion-opacity":new Li(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Hi(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Li(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Li(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Hl(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Hi(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Hi(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Li(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},K0=function(A){function F($){A.call(this,$,Bf)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.createBucket=function($){return new bl($)},F.prototype.queryRadius=function(){return ms(this.paint.get("fill-extrusion-translate"))},F.prototype.is3D=function(){return!0},F.prototype.queryIntersectsFeature=function($,ue,xe,Me,Re,Ze,st,yt){var At=as($,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ze.angle,st),qt=this.paint.get("fill-extrusion-height").evaluate(ue,xe),on=this.paint.get("fill-extrusion-base").evaluate(ue,xe),Qt=function(Pn,Zn,Wn,nr){for(var ir=[],ur=0,kr=Pn;ur<kr.length;ur+=1){var Pr=kr[ur],Qr=[Pr.x,Pr.y,0,1];Wl(Qr,Qr,Zn),ir.push(new t(Qr[0]/Qr[3],Qr[1]/Qr[3]))}return ir}(At,yt),xn=function(Pn,Zn,Wn,nr){for(var ir=[],ur=[],kr=nr[8]*Zn,Pr=nr[9]*Zn,Qr=nr[10]*Zn,ei=nr[11]*Zn,fi=nr[8]*Wn,Ti=nr[9]*Wn,Ci=nr[10]*Wn,xi=nr[11]*Wn,Ni=0,Pi=Pn;Ni<Pi.length;Ni+=1){for(var Ba=[],Pa=[],Za=0,Ui=Pi[Ni];Za<Ui.length;Za+=1){var Ra=Ui[Za],yo=Ra.x,uo=Ra.y,Mo=nr[0]*yo+nr[4]*uo+nr[12],co=nr[1]*yo+nr[5]*uo+nr[13],os=nr[2]*yo+nr[6]*uo+nr[14],La=nr[3]*yo+nr[7]*uo+nr[15],Cs=os+Qr,xs=La+ei,bs=Mo+fi,fo=co+Ti,_s=os+Ci,Xo=La+xi,Is=new t((Mo+kr)/xs,(co+Pr)/xs);Is.z=Cs/xs,Ba.push(Is);var Jo=new t(bs/Xo,fo/Xo);Jo.z=_s/Xo,Pa.push(Jo)}ir.push(Ba),ur.push(Pa)}return[ir,ur]}(Me,on,qt,yt);return function(Pn,Zn,Wn){var nr=1/0;Cl(Wn,Zn)&&(nr=Ac(Wn,Zn[0]));for(var ir=0;ir<Zn.length;ir++)for(var ur=Zn[ir],kr=Pn[ir],Pr=0;Pr<ur.length-1;Pr++){var Qr=ur[Pr],Ci=[Qr,ur[Pr+1],kr[Pr+1],kr[Pr],Qr];js(Wn,Ci)&&(nr=Math.min(nr,Ac(Wn,Ci)))}return nr!==1/0&&nr}(xn[0],xn[1],Qt)},F}(qs);function kc(A,F){return A.x*F.x+A.y*F.y}function Ac(A,F){if(1===A.length){for(var $,ue=0,xe=F[ue++];!$||xe.equals($);)if(!($=F[ue++]))return 1/0;for(;ue<F.length;ue++){var Me=F[ue],Re=A[0],Ze=$.sub(xe),st=Me.sub(xe),yt=Re.sub(xe),At=kc(Ze,Ze),qt=kc(Ze,st),on=kc(st,st),Qt=kc(yt,Ze),xn=kc(yt,st),Pn=At*on-qt*qt,Zn=(on*Qt-qt*xn)/Pn,Wn=(At*xn-qt*Qt)/Pn,ir=xe.z*(1-Zn-Wn)+$.z*Zn+Me.z*Wn;if(isFinite(ir))return ir}return 1/0}for(var ur=1/0,kr=0,Pr=F;kr<Pr.length;kr+=1)ur=Math.min(ur,Pr[kr].z);return ur}var of=_a([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,lp=$l.VectorTileFeature.types,J0=Math.cos(Math.PI/180*37.5),up=Math.pow(2,14)/.5,Es=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(F){return F.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ql,this.indexArray=new is,this.programConfigurations=new $a(of,A.layers,A.zoom),this.segments=new Gt,this.stateDependentLayerIds=this.layers.filter(function(F){return F.isStateDependent()}).map(function(F){return F.id})};Es.prototype.populate=function(A,F,$){this.hasPattern=ap("line",this.layers,F);for(var ue=this.layers[0].layout.get("line-sort-key"),xe=[],Me=0,Re=A;Me<Re.length;Me+=1){var Ze=Re[Me],st=Ze.feature,yt=Ze.id,At=Ze.index,qt=Ze.sourceLayerIndex,on=this.layers[0]._featureFilter.needGeometry,Qt={type:st.type,id:yt,properties:st.properties,geometry:on?lo(st):[]};if(this.layers[0]._featureFilter.filter(new Sa(this.zoom),Qt,$)){on||(Qt.geometry=lo(st));var xn=ue?ue.evaluate(Qt,{},$):void 0;xe.push({id:yt,properties:st.properties,type:st.type,sourceLayerIndex:qt,index:At,geometry:Qt.geometry,patterns:{},sortKey:xn})}}ue&&xe.sort(function(fi,Ti){return fi.sortKey-Ti.sortKey});for(var Zn=0,Wn=xe;Zn<Wn.length;Zn+=1){var nr=Wn[Zn],ur=nr.geometry,kr=nr.index,Pr=nr.sourceLayerIndex;if(this.hasPattern){var Qr=Zu("line",this.layers,nr,this.zoom,F);this.patternFeatures.push(Qr)}else this.addFeature(nr,ur,kr,$,{});F.featureIndex.insert(A[kr].feature,ur,kr,Pr,this.index)}},Es.prototype.update=function(A,F,$){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,F,this.stateDependentLayers,$)},Es.prototype.addFeatures=function(A,F,$){for(var ue=0,xe=this.patternFeatures;ue<xe.length;ue+=1){var Me=xe[ue];this.addFeature(Me,Me.geometry,Me.index,F,$)}},Es.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Es.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Es.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,of),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Es.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Es.prototype.addFeature=function(A,F,$,ue,xe){for(var Me=this.layers[0].layout,Re=Me.get("line-join").evaluate(A,{}),Ze=Me.get("line-cap"),st=Me.get("line-miter-limit"),yt=Me.get("line-round-limit"),At=0,qt=F;At<qt.length;At+=1)this.addLine(qt[At],A,Re,Ze,st,yt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,$,xe,ue)},Es.prototype.addLine=function(A,F,$,ue,xe,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,F.properties&&F.properties.hasOwnProperty("mapbox_clip_start")&&F.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+F.properties.mapbox_clip_start,this.clipEnd=+F.properties.mapbox_clip_end;for(var Re=0;Re<A.length-1;Re++)this.totalDistance+=A[Re].dist(A[Re+1]);this.updateScaledDistance()}for(var Ze="Polygon"===lp[F.type],st=A.length;st>=2&&A[st-1].equals(A[st-2]);)st--;for(var yt=0;yt<st-1&&A[yt].equals(A[yt+1]);)yt++;if(!(st<(Ze?3:2))){"bevel"===$&&(xe=1.05);var At,qt=this.overscaling<=16?122880/(512*this.overscaling):0,on=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Qt=void 0,xn=void 0,Pn=void 0,Zn=void 0;this.e1=this.e2=-1,Ze&&(Zn=A[yt].sub(At=A[st-2])._unit()._perp());for(var Wn=yt;Wn<st;Wn++)if(!(xn=Wn===st-1?Ze?A[yt+1]:void 0:A[Wn+1])||!A[Wn].equals(xn)){Zn&&(Pn=Zn),At&&(Qt=At),At=A[Wn],Zn=xn?xn.sub(At)._unit()._perp():Pn;var nr=(Pn=Pn||Zn).add(Zn);0===nr.x&&0===nr.y||nr._unit();var ir=Pn.x*Zn.x+Pn.y*Zn.y,ur=nr.x*Zn.x+nr.y*Zn.y,kr=0!==ur?1/ur:1/0,Pr=2*Math.sqrt(2-2*ur),Qr=ur<J0&&Qt&&xn,ei=Pn.x*Zn.y-Pn.y*Zn.x>0;if(Qr&&Wn>yt){var fi=At.dist(Qt);if(fi>2*qt){var Ti=At.sub(At.sub(Qt)._mult(qt/fi)._round());this.updateDistance(Qt,Ti),this.addCurrentVertex(Ti,Pn,0,0,on),Qt=Ti}}var Ci=Qt&&xn,xi=Ci?$:Ze?"butt":ue;if(Ci&&"round"===xi&&(kr<Me?xi="miter":kr<=2&&(xi="fakeround")),"miter"===xi&&kr>xe&&(xi="bevel"),"bevel"===xi&&(kr>2&&(xi="flipbevel"),kr<xe&&(xi="miter")),Qt&&this.updateDistance(Qt,At),"miter"===xi)nr._mult(kr),this.addCurrentVertex(At,nr,0,0,on);else if("flipbevel"===xi){if(kr>100)nr=Zn.mult(-1);else{var Ni=kr*Pn.add(Zn).mag()/Pn.sub(Zn).mag();nr._perp()._mult(Ni*(ei?-1:1))}this.addCurrentVertex(At,nr,0,0,on),this.addCurrentVertex(At,nr.mult(-1),0,0,on)}else if("bevel"===xi||"fakeround"===xi){var Pi=-Math.sqrt(kr*kr-1),Di=ei?Pi:0,Ba=ei?0:Pi;if(Qt&&this.addCurrentVertex(At,Pn,Di,Ba,on),"fakeround"===xi)for(var Pa=Math.round(180*Pr/Math.PI/20),Za=1;Za<Pa;Za++){var Ui=Za/Pa;if(.5!==Ui){var Ra=Ui-.5;Ui+=Ui*Ra*(Ui-1)*((1.0904+ir*(ir*(3.55645-1.43519*ir)-3.2452))*Ra*Ra+(.848013+ir*(.215638*ir-1.06021)))}var yo=Zn.sub(Pn)._mult(Ui)._add(Pn)._unit()._mult(ei?-1:1);this.addHalfVertex(At,yo.x,yo.y,!1,ei,0,on)}xn&&this.addCurrentVertex(At,Zn,-Di,-Ba,on)}else if("butt"===xi)this.addCurrentVertex(At,nr,0,0,on);else if("square"===xi){var uo=Qt?1:-1;this.addCurrentVertex(At,nr,uo,uo,on)}else"round"===xi&&(Qt&&(this.addCurrentVertex(At,Pn,0,0,on),this.addCurrentVertex(At,Pn,1,1,on,!0)),xn&&(this.addCurrentVertex(At,Zn,-1,-1,on,!0),this.addCurrentVertex(At,Zn,0,0,on)));if(Qr&&Wn<st-1){var Mo=At.dist(xn);if(Mo>2*qt){var co=At.add(xn.sub(At)._mult(qt/Mo)._round());this.updateDistance(At,co),this.addCurrentVertex(co,Zn,0,0,on),At=co}}}}},Es.prototype.addCurrentVertex=function(A,F,$,ue,xe,Me){void 0===Me&&(Me=!1);var st=F.y*ue-F.x,yt=-F.y-F.x*ue;this.addHalfVertex(A,F.x+F.y*$,F.y-F.x*$,Me,!1,$,xe),this.addHalfVertex(A,st,yt,Me,!0,-ue,xe),this.distance>up/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(A,F,$,ue,xe,Me))},Es.prototype.addHalfVertex=function(A,F,$,ue,xe,Me,Re){var yt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((A.x<<1)+(ue?1:0),(A.y<<1)+(xe?1:0),Math.round(63*F)+128,Math.round(63*$)+128,1+(0===Me?0:Me<0?-1:1)|(63&yt)<<2,yt>>6);var At=Re.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,At),Re.primitiveLength++),xe?this.e2=At:this.e1=At},Es.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(up-1):this.distance},Es.prototype.updateDistance=function(A,F){this.distance+=A.dist(F),this.updateScaledDistance()},dr("LineBucket",Es,{omit:["layers","patternFeatures"]});var sf=new Fs({"line-cap":new Li(ke.layout_line["line-cap"]),"line-join":new Hi(ke.layout_line["line-join"]),"line-miter-limit":new Li(ke.layout_line["line-miter-limit"]),"line-round-limit":new Li(ke.layout_line["line-round-limit"]),"line-sort-key":new Hi(ke.layout_line["line-sort-key"])}),cp={paint:new Fs({"line-opacity":new Hi(ke.paint_line["line-opacity"]),"line-color":new Hi(ke.paint_line["line-color"]),"line-translate":new Li(ke.paint_line["line-translate"]),"line-translate-anchor":new Li(ke.paint_line["line-translate-anchor"]),"line-width":new Hi(ke.paint_line["line-width"]),"line-gap-width":new Hi(ke.paint_line["line-gap-width"]),"line-offset":new Hi(ke.paint_line["line-offset"]),"line-blur":new Hi(ke.paint_line["line-blur"]),"line-dasharray":new Yr(ke.paint_line["line-dasharray"]),"line-pattern":new Hl(ke.paint_line["line-pattern"]),"line-gradient":new da(ke.paint_line["line-gradient"])}),layout:sf},Q0=new(function(A){function F(){A.apply(this,arguments)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.possiblyEvaluate=function($,ue){return ue=new Sa(Math.floor(ue.zoom),{now:ue.now,fadeDuration:ue.fadeDuration,zoomHistory:ue.zoomHistory,transition:ue.transition}),A.prototype.possiblyEvaluate.call(this,$,ue)},F.prototype.evaluate=function($,ue,xe,Me){return ue=l({},ue,{zoom:Math.floor(ue.zoom)}),A.prototype.evaluate.call(this,$,ue,xe,Me)},F}(Hi))(cp.paint.properties["line-width"].specification);Q0.useIntegerZoom=!0;var fp=function(A){function F($){A.call(this,$,cp)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype._handleSpecialPaintPropertyUpdate=function($){"line-gradient"===$&&this._updateGradient()},F.prototype._updateGradient=function(){this.gradient=N0(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},F.prototype.recalculate=function($,ue){A.prototype.recalculate.call(this,$,ue),this.paint._values["line-floorwidth"]=Q0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)},F.prototype.createBucket=function($){return new Es($)},F.prototype.queryRadius=function($){var ue=$,xe=hp(Eo("line-width",this,ue),Eo("line-gap-width",this,ue)),Me=Eo("line-offset",this,ue);return xe/2+Math.abs(Me)+ms(this.paint.get("line-translate"))},F.prototype.queryIntersectsFeature=function($,ue,xe,Me,Re,Ze,st){var yt=as($,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ze.angle,st),At=st/2*hp(this.paint.get("line-width").evaluate(ue,xe),this.paint.get("line-gap-width").evaluate(ue,xe)),qt=this.paint.get("line-offset").evaluate(ue,xe);return qt&&(Me=function(on,Qt){for(var xn=[],Pn=new t(0,0),Zn=0;Zn<on.length;Zn++){for(var Wn=on[Zn],nr=[],ir=0;ir<Wn.length;ir++){var kr=Wn[ir],Pr=Wn[ir+1],Qr=0===ir?Pn:kr.sub(Wn[ir-1])._unit()._perp(),ei=ir===Wn.length-1?Pn:Pr.sub(kr)._unit()._perp(),fi=Qr._add(ei)._unit();fi._mult(1/(fi.x*ei.x+fi.y*ei.y)),nr.push(fi._mult(Qt)._add(kr))}xn.push(nr)}return xn}(Me,qt*st)),function(on,Qt,xn){for(var Pn=0;Pn<Qt.length;Pn++){var Zn=Qt[Pn];if(on.length>=3)for(var Wn=0;Wn<Zn.length;Wn++)if(tl(on,Zn[Wn]))return!0;if(cu(on,Zn,xn))return!0}return!1}(yt,Me,At)},F.prototype.isTileClipped=function(){return!0},F}(qs);function hp(A,F){return F>0?F+2*A:A}var dp=_a([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),eg=_a([{name:"a_projected_pos",components:3,type:"Float32"}],4),tg=(_a([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),_a([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),pp=(_a([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),_a([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),jf=_a([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gp(A,F,$){return A.sections.forEach(function(ue){var xe,Re,Ze;ue.text=(xe=ue.text,Re=$,"uppercase"===(Ze=F.layout.get("text-transform").evaluate(Re,{}))?xe=xe.toLocaleUpperCase():"lowercase"===Ze&&(xe=xe.toLocaleLowerCase()),ps.applyArabicShaping&&(xe=ps.applyArabicShaping(xe)),xe)}),A}_a([{name:"triangle",components:3,type:"Uint16"}]),_a([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_a([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_a([{type:"Float32",name:"offsetX"}]),_a([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var lf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Wh=function(A,F,$,ue,xe){var Me,Re,Ze=8*xe-ue-1,st=(1<<Ze)-1,yt=st>>1,At=-7,qt=$?xe-1:0,on=$?-1:1,Qt=A[F+qt];for(qt+=on,Me=Qt&(1<<-At)-1,Qt>>=-At,At+=Ze;At>0;Me=256*Me+A[F+qt],qt+=on,At-=8);for(Re=Me&(1<<-At)-1,Me>>=-At,At+=ue;At>0;Re=256*Re+A[F+qt],qt+=on,At-=8);if(0===Me)Me=1-yt;else{if(Me===st)return Re?NaN:1/0*(Qt?-1:1);Re+=Math.pow(2,ue),Me-=yt}return(Qt?-1:1)*Re*Math.pow(2,Me-ue)},ng=function(A,F,$,ue,xe,Me){var Re,Ze,st,yt=8*Me-xe-1,At=(1<<yt)-1,qt=At>>1,on=23===xe?Math.pow(2,-24)-Math.pow(2,-77):0,Qt=ue?0:Me-1,xn=ue?1:-1,Pn=F<0||0===F&&1/F<0?1:0;for(F=Math.abs(F),isNaN(F)||F===1/0?(Ze=isNaN(F)?1:0,Re=At):(Re=Math.floor(Math.log(F)/Math.LN2),F*(st=Math.pow(2,-Re))<1&&(Re--,st*=2),(F+=Re+qt>=1?on/st:on*Math.pow(2,1-qt))*st>=2&&(Re++,st/=2),Re+qt>=At?(Ze=0,Re=At):Re+qt>=1?(Ze=(F*st-1)*Math.pow(2,xe),Re+=qt):(Ze=F*Math.pow(2,qt-1)*Math.pow(2,xe),Re=0));xe>=8;A[$+Qt]=255&Ze,Qt+=xn,Ze/=256,xe-=8);for(Re=Re<<xe|Ze,yt+=xe;yt>0;A[$+Qt]=255&Re,Qt+=xn,Re/=256,yt-=8);A[$+Qt-xn]|=128*Pn},uf=wo;function wo(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}wo.Varint=0,wo.Fixed64=1,wo.Bytes=2,wo.Fixed32=5;var Vf=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function hu(A){return A.type===wo.Bytes?A.readVarint()+A.pos:A.pos+1}function cf(A,F,$){var ue=F<=16383?1:F<=2097151?2:F<=268435455?3:Math.floor(Math.log(F)/(7*Math.LN2));$.realloc(ue);for(var xe=$.pos-1;xe>=A;xe--)$.buf[xe+ue]=$.buf[xe]}function Zh(A,F){for(var $=0;$<A.length;$++)F.writeVarint(A[$])}function Ec(A,F){for(var $=0;$<A.length;$++)F.writeSVarint(A[$])}function rg(A,F){for(var $=0;$<A.length;$++)F.writeFloat(A[$])}function ig(A,F){for(var $=0;$<A.length;$++)F.writeDouble(A[$])}function wv(A,F){for(var $=0;$<A.length;$++)F.writeBoolean(A[$])}function Uf(A,F){for(var $=0;$<A.length;$++)F.writeFixed32(A[$])}function Xh(A,F){for(var $=0;$<A.length;$++)F.writeSFixed32(A[$])}function mp(A,F){for(var $=0;$<A.length;$++)F.writeFixed64(A[$])}function vp(A,F){for(var $=0;$<A.length;$++)F.writeSFixed64(A[$])}function ff(A,F){return(A[F]|A[F+1]<<8|A[F+2]<<16)+16777216*A[F+3]}function $u(A,F,$){A[$]=F,A[$+1]=F>>>8,A[$+2]=F>>>16,A[$+3]=F>>>24}function yp(A,F){return(A[F]|A[F+1]<<8|A[F+2]<<16)+(A[F+3]<<24)}function ag(A,F,$){1===A&&$.readMessage(og,F)}function og(A,F,$){if(3===A){var ue=$.readMessage(sg,{}),Re=ue.width,Ze=ue.height,st=ue.left,yt=ue.top,At=ue.advance;F.push({id:ue.id,bitmap:new Gu({width:Re+6,height:Ze+6},ue.bitmap),metrics:{width:Re,height:Ze,left:st,top:yt,advance:At}})}}function sg(A,F,$){1===A?F.id=$.readVarint():2===A?F.bitmap=$.readBytes():3===A?F.width=$.readVarint():4===A?F.height=$.readVarint():5===A?F.left=$.readSVarint():6===A?F.top=$.readSVarint():7===A&&(F.advance=$.readVarint())}function xp(A){for(var F=0,$=0,ue=0,xe=A;ue<xe.length;ue+=1){var Me=xe[ue];F+=Me.w*Me.h,$=Math.max($,Me.w)}A.sort(function(Pn,Zn){return Zn.h-Pn.h});for(var Re=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(F/.95)),$),h:1/0}],Ze=0,st=0,yt=0,At=A;yt<At.length;yt+=1)for(var qt=At[yt],on=Re.length-1;on>=0;on--){var Qt=Re[on];if(!(qt.w>Qt.w||qt.h>Qt.h)){if(qt.x=Qt.x,qt.y=Qt.y,st=Math.max(st,qt.y+qt.h),Ze=Math.max(Ze,qt.x+qt.w),qt.w===Qt.w&&qt.h===Qt.h){var xn=Re.pop();on<Re.length&&(Re[on]=xn)}else qt.h===Qt.h?(Qt.x+=qt.w,Qt.w-=qt.w):qt.w===Qt.w?(Qt.y+=qt.h,Qt.h-=qt.h):(Re.push({x:Qt.x+qt.w,y:Qt.y,w:Qt.w-qt.w,h:qt.h}),Qt.y+=qt.h,Qt.h-=qt.h);break}}return{w:Ze,h:st,fill:F/(Ze*st)||0}}wo.prototype={destroy:function(){this.buf=null},readFields:function(A,F,$){for($=$||this.length;this.pos<$;){var ue=this.readVarint(),xe=ue>>3,Me=this.pos;this.type=7&ue,A(xe,F,this),this.pos===Me&&this.skip(ue)}return F},readMessage:function(A,F){return this.readFields(A,F,this.readVarint()+this.pos)},readFixed32:function(){var A=ff(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=yp(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=ff(this.buf,this.pos)+4294967296*ff(this.buf,this.pos+4);return this.pos+=8,A},readSFixed64:function(){var A=ff(this.buf,this.pos)+4294967296*yp(this.buf,this.pos+4);return this.pos+=8,A},readFloat:function(){var A=Wh(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Wh(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var F,$,ue=this.buf;return F=127&($=ue[this.pos++]),$<128?F:(F|=(127&($=ue[this.pos++]))<<7,$<128?F:(F|=(127&($=ue[this.pos++]))<<14,$<128?F:(F|=(127&($=ue[this.pos++]))<<21,$<128?F:function(xe,Me,Re){var Ze,st,yt=Re.buf;if(Ze=(112&(st=yt[Re.pos++]))>>4,st<128||(Ze|=(127&(st=yt[Re.pos++]))<<3,st<128)||(Ze|=(127&(st=yt[Re.pos++]))<<10,st<128)||(Ze|=(127&(st=yt[Re.pos++]))<<17,st<128)||(Ze|=(127&(st=yt[Re.pos++]))<<24,st<128)||(Ze|=(1&(st=yt[Re.pos++]))<<31,st<128))return function Xu(A,F,$){return $?4294967296*F+(A>>>0):4294967296*(F>>>0)+(A>>>0)}(xe,Ze,Me);throw new Error("Expected varint not more than 10 bytes")}(F|=(15&($=ue[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,F=this.pos;return this.pos=A,A-F>=12&&Vf?Vf.decode(this.buf.subarray(F,A)):function($,ue,xe){for(var Me="",Re=ue;Re<xe;){var Ze,st,yt,At=$[Re],qt=null,on=At>239?4:At>223?3:At>191?2:1;if(Re+on>xe)break;1===on?At<128&&(qt=At):2===on?128==(192&(Ze=$[Re+1]))&&(qt=(31&At)<<6|63&Ze)<=127&&(qt=null):3===on?(st=$[Re+2],128==(192&(Ze=$[Re+1]))&&128==(192&st)&&((qt=(15&At)<<12|(63&Ze)<<6|63&st)<=2047||qt>=55296&&qt<=57343)&&(qt=null)):4===on&&(st=$[Re+2],yt=$[Re+3],128==(192&(Ze=$[Re+1]))&&128==(192&st)&&128==(192&yt)&&((qt=(15&At)<<18|(63&Ze)<<12|(63&st)<<6|63&yt)<=65535||qt>=1114112)&&(qt=null)),null===qt?(qt=65533,on=1):qt>65535&&(qt-=65536,Me+=String.fromCharCode(qt>>>10&1023|55296),qt=56320|1023&qt),Me+=String.fromCharCode(qt),Re+=on}return Me}(this.buf,F,A)},readBytes:function(){var A=this.readVarint()+this.pos,F=this.buf.subarray(this.pos,A);return this.pos=A,F},readPackedVarint:function(A,F){if(this.type!==wo.Bytes)return A.push(this.readVarint(F));var $=hu(this);for(A=A||[];this.pos<$;)A.push(this.readVarint(F));return A},readPackedSVarint:function(A){if(this.type!==wo.Bytes)return A.push(this.readSVarint());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==wo.Bytes)return A.push(this.readBoolean());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==wo.Bytes)return A.push(this.readFloat());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==wo.Bytes)return A.push(this.readDouble());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==wo.Bytes)return A.push(this.readFixed32());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==wo.Bytes)return A.push(this.readSFixed32());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==wo.Bytes)return A.push(this.readFixed64());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==wo.Bytes)return A.push(this.readSFixed64());var F=hu(this);for(A=A||[];this.pos<F;)A.push(this.readSFixed64());return A},skip:function(A){var F=7&A;if(F===wo.Varint)for(;this.buf[this.pos++]>127;);else if(F===wo.Bytes)this.pos=this.readVarint()+this.pos;else if(F===wo.Fixed32)this.pos+=4;else{if(F!==wo.Fixed64)throw new Error("Unimplemented type: "+F);this.pos+=8}},writeTag:function(A,F){this.writeVarint(A<<3|F)},realloc:function(A){for(var F=this.length||16;F<this.pos+A;)F*=2;if(F!==this.length){var $=new Uint8Array(F);$.set(this.buf),this.buf=$,this.length=F}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),$u(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),$u(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),$u(this.buf,-1&A,this.pos),$u(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),$u(this.buf,-1&A,this.pos),$u(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(F,$){var ue,xe,Me,Ze;if(F>=0?(ue=F%4294967296|0,xe=F/4294967296|0):(xe=~(-F/4294967296),4294967295^(ue=~(-F%4294967296))?ue=ue+1|0:(ue=0,xe=xe+1|0)),F>=0x10000000000000000||F<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");$.realloc(10),Me=ue,(Ze=$).buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Me>>>=7,Ze.buf[Ze.pos++]=127&Me|128,Ze.buf[Ze.pos]=127&(Me>>>=7),function(Me,Re){var Ze=(7&Me)<<4;Re.buf[Re.pos++]|=Ze|((Me>>>=3)?128:0),Me&&(Re.buf[Re.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Re.buf[Re.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Re.buf[Re.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Re.buf[Re.pos++]=127&Me|((Me>>>=7)?128:0),Me&&(Re.buf[Re.pos++]=127&Me)))))}(xe,$)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var F=this.pos;this.pos=function(ue,xe,Me){for(var Re,Ze,st=0;st<xe.length;st++){if((Re=xe.charCodeAt(st))>55295&&Re<57344){if(!Ze){Re>56319||st+1===xe.length?(ue[Me++]=239,ue[Me++]=191,ue[Me++]=189):Ze=Re;continue}if(Re<56320){ue[Me++]=239,ue[Me++]=191,ue[Me++]=189,Ze=Re;continue}Re=Ze-55296<<10|Re-56320|65536,Ze=null}else Ze&&(ue[Me++]=239,ue[Me++]=191,ue[Me++]=189,Ze=null);Re<128?ue[Me++]=Re:(Re<2048?ue[Me++]=Re>>6|192:(Re<65536?ue[Me++]=Re>>12|224:(ue[Me++]=Re>>18|240,ue[Me++]=Re>>12&63|128),ue[Me++]=Re>>6&63|128),ue[Me++]=63&Re|128)}return Me}(this.buf,A,this.pos);var $=this.pos-F;$>=128&&cf(F,$,this),this.pos=F-1,this.writeVarint($),this.pos+=$},writeFloat:function(A){this.realloc(4),ng(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),ng(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var F=A.length;this.writeVarint(F),this.realloc(F);for(var $=0;$<F;$++)this.buf[this.pos++]=A[$]},writeRawMessage:function(A,F){this.pos++;var $=this.pos;A(F,this);var ue=this.pos-$;ue>=128&&cf($,ue,this),this.pos=$-1,this.writeVarint(ue),this.pos+=ue},writeMessage:function(A,F,$){this.writeTag(A,wo.Bytes),this.writeRawMessage(F,$)},writePackedVarint:function(A,F){F.length&&this.writeMessage(A,Zh,F)},writePackedSVarint:function(A,F){F.length&&this.writeMessage(A,Ec,F)},writePackedBoolean:function(A,F){F.length&&this.writeMessage(A,wv,F)},writePackedFloat:function(A,F){F.length&&this.writeMessage(A,rg,F)},writePackedDouble:function(A,F){F.length&&this.writeMessage(A,ig,F)},writePackedFixed32:function(A,F){F.length&&this.writeMessage(A,Uf,F)},writePackedSFixed32:function(A,F){F.length&&this.writeMessage(A,Xh,F)},writePackedFixed64:function(A,F){F.length&&this.writeMessage(A,mp,F)},writePackedSFixed64:function(A,F){F.length&&this.writeMessage(A,vp,F)},writeBytesField:function(A,F){this.writeTag(A,wo.Bytes),this.writeBytes(F)},writeFixed32Field:function(A,F){this.writeTag(A,wo.Fixed32),this.writeFixed32(F)},writeSFixed32Field:function(A,F){this.writeTag(A,wo.Fixed32),this.writeSFixed32(F)},writeFixed64Field:function(A,F){this.writeTag(A,wo.Fixed64),this.writeFixed64(F)},writeSFixed64Field:function(A,F){this.writeTag(A,wo.Fixed64),this.writeSFixed64(F)},writeVarintField:function(A,F){this.writeTag(A,wo.Varint),this.writeVarint(F)},writeSVarintField:function(A,F){this.writeTag(A,wo.Varint),this.writeSVarint(F)},writeStringField:function(A,F){this.writeTag(A,wo.Bytes),this.writeString(F)},writeFloatField:function(A,F){this.writeTag(A,wo.Fixed32),this.writeFloat(F)},writeDoubleField:function(A,F){this.writeTag(A,wo.Fixed64),this.writeDouble(F)},writeBooleanField:function(A,F){this.writeVarintField(A,Boolean(F))}};var Bl=function(A,F){var $=F.pixelRatio,ue=F.version,xe=F.stretchX,Me=F.stretchY,Re=F.content;this.paddedRect=A,this.pixelRatio=$,this.stretchX=xe,this.stretchY=Me,this.content=Re,this.version=ue},du={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};du.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},du.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},du.tlbr.get=function(){return this.tl.concat(this.br)},du.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Bl.prototype,du);var hf=function(A,F){var $={},ue={};this.haveRenderCallbacks=[];var xe=[];this.addImages(A,$,xe),this.addImages(F,ue,xe);var Me=xp(xe),st=new la({width:Me.w||1,height:Me.h||1});for(var yt in A){var At=A[yt],qt=$[yt].paddedRect;la.copy(At.data,st,{x:0,y:0},{x:qt.x+1,y:qt.y+1},At.data)}for(var on in F){var Qt=F[on],xn=ue[on].paddedRect,Pn=xn.x+1,Zn=xn.y+1,Wn=Qt.data.width,nr=Qt.data.height;la.copy(Qt.data,st,{x:0,y:0},{x:Pn,y:Zn},Qt.data),la.copy(Qt.data,st,{x:0,y:nr-1},{x:Pn,y:Zn-1},{width:Wn,height:1}),la.copy(Qt.data,st,{x:0,y:0},{x:Pn,y:Zn+nr},{width:Wn,height:1}),la.copy(Qt.data,st,{x:Wn-1,y:0},{x:Pn-1,y:Zn},{width:1,height:nr}),la.copy(Qt.data,st,{x:0,y:0},{x:Pn+Wn,y:Zn},{width:1,height:nr})}this.image=st,this.iconPositions=$,this.patternPositions=ue};hf.prototype.addImages=function(A,F,$){for(var ue in A){var xe=A[ue],Me={x:0,y:0,w:xe.data.width+2,h:xe.data.height+2};$.push(Me),F[ue]=new Bl(Me,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(ue)}},hf.prototype.patchUpdatedImages=function(A,F){for(var $ in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[$],A.getImage($),F),this.patchUpdatedImage(this.patternPositions[$],A.getImage($),F)},hf.prototype.patchUpdatedImage=function(A,F,$){if(A&&F&&A.version!==F.version){A.version=F.version;var ue=A.tl;$.update(F.data,void 0,{x:ue[0],y:ue[1]})}},dr("ImagePosition",Bl),dr("ImageAtlas",hf);var _l={horizontal:1,vertical:2,horizontalOnly:3},df=function(){this.scale=1,this.fontStack="",this.imageName=null};df.forText=function(A,F){var $=new df;return $.scale=A||1,$.fontStack=F,$},df.forImage=function(A){var F=new df;return F.imageName=A,F};var Ys=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function $h(A,F,$,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn){var Zn,Wn=Ys.fromFeature(A,xe);qt===_l.vertical&&Wn.verticalizePunctuation();var nr=ps.processBidirectionalText,ir=ps.processStyledBidirectionalText;if(nr&&1===Wn.sections.length){Zn=[];for(var ur=0,kr=nr(Wn.toString(),Tp(Wn,yt,Me,F,ue,Qt,xn));ur<kr.length;ur+=1){var Pr=kr[ur],Qr=new Ys;Qr.text=Pr,Qr.sections=Wn.sections;for(var ei=0;ei<Pr.length;ei++)Qr.sectionIndex.push(0);Zn.push(Qr)}}else if(ir){Zn=[];for(var fi=0,Ti=ir(Wn.text,Wn.sectionIndex,Tp(Wn,yt,Me,F,ue,Qt,xn));fi<Ti.length;fi+=1){var Ci=Ti[fi],xi=new Ys;xi.text=Ci[0],xi.sectionIndex=Ci[1],xi.sections=Wn.sections,Zn.push(xi)}}else Zn=function(Di,Ba){for(var Pa=[],Za=Di.text,Ui=0,Ra=0,yo=Ba;Ra<yo.length;Ra+=1){var uo=yo[Ra];Pa.push(Di.substring(Ui,uo)),Ui=uo}return Ui<Za.length&&Pa.push(Di.substring(Ui,Za.length)),Pa}(Wn,Tp(Wn,yt,Me,F,ue,Qt,xn));var Ni=[],Pi={positionedLines:Ni,text:Wn.toString(),top:At[1],bottom:At[1],left:At[0],right:At[0],writingMode:qt,iconsInText:!1,verticalizable:!1};return function(Di,Ba,Pa,Za,Ui,Ra,yo,uo,Mo,co,os,La){for(var Cs=0,xs=-17,bs=0,fo=0,_s="right"===uo?1:"left"===uo?0:.5,Xo=0,Is=0,Jo=Ui;Is<Jo.length;Is+=1){var ss=Jo[Is];ss.trim();var ma=ss.getMaxScale(),ja=24*(ma-1),Ho={positionedGlyphs:[],lineOffset:0};Di.positionedLines[Xo]=Ho;var Oo=Ho.positionedGlyphs,Ro=0;if(ss.length()){for(var So=0;So<ss.length();So++){var Ka=ss.getSection(So),qo=ss.getSectionIndex(So),Ws=ss.getCharCode(So),ul=0,ls=null,zs=null,gu=null,Ds=24,Ql=!(Mo===_l.horizontal||!os&&!Ei(Ws)||os&&(Kh[Ws]||(Iu=Ws,Vr.Arabic(Iu)||Vr["Arabic Supplement"](Iu)||Vr["Arabic Extended-A"](Iu)||Vr["Arabic Presentation Forms-A"](Iu)||Vr["Arabic Presentation Forms-B"](Iu))));if(Ka.imageName){var eu=Za[Ka.imageName];if(!eu)continue;gu=Ka.imageName,Di.iconsInText=Di.iconsInText||!0,zs=eu.paddedRect;var Ll=eu.displaySize;Ka.scale=24*Ka.scale/La,ul=ja+(24-Ll[1]*Ka.scale),Ds=(ls={width:Ll[0],height:Ll[1],left:1,top:-3,advance:Ql?Ll[1]:Ll[0]}).advance;var Ns=Ql?Ll[0]*Ka.scale-24*ma:Ll[1]*Ka.scale-24*ma;Ns>0&&Ns>Ro&&(Ro=Ns)}else{var Ic=Pa[Ka.fontStack],mu=Ic&&Ic[Ws];if(mu&&mu.rect)zs=mu.rect,ls=mu.metrics;else{var Qf=Ba[Ka.fontStack],xf=Qf&&Qf[Ws];if(!xf)continue;ls=xf.metrics}ul=24*(ma-Ka.scale)}Ql?(Di.verticalizable=!0,Oo.push({glyph:Ws,imageName:gu,x:Cs,y:xs+ul,vertical:Ql,scale:Ka.scale,fontStack:Ka.fontStack,sectionIndex:qo,metrics:ls,rect:zs}),Cs+=Ds*Ka.scale+co):(Oo.push({glyph:Ws,imageName:gu,x:Cs,y:xs+ul,vertical:Ql,scale:Ka.scale,fontStack:Ka.fontStack,sectionIndex:qo,metrics:ls,rect:zs}),Cs+=ls.advance*Ka.scale+co)}0!==Oo.length&&(bs=Math.max(Cs-co,bs),Hf(Oo,0,Oo.length-1,_s,Ro)),Cs=0;var Lu=Ra*ma+Ro;Ho.lineOffset=Math.max(Ro,ja),xs+=Lu,fo=Math.max(Lu,fo),++Xo}else xs+=Ra,++Xo}var Iu,ac=xs- -17,Pc=Jh(yo),Pu=Pc.horizontalAlign,vu=Pc.verticalAlign;(function(th,yu,Oc,bf,_f,Rc,wf,nh,Tf){var Fc,rh=(yu-Oc)*_f;Fc=Rc!==wf?-nh*bf- -17:(-bf*Tf+.5)*wf;for(var zc=0,oc=th;zc<oc.length;zc+=1)for(var sc=0,lc=oc[zc].positionedGlyphs;sc<lc.length;sc+=1){var Bc=lc[sc];Bc.x+=rh,Bc.y+=Fc}})(Di.positionedLines,_s,Pu,vu,bs,fo,Ra,ac,Ui.length),Di.top+=-vu*ac,Di.bottom=Di.top+ac,Di.left+=-Pu*bs,Di.right=Di.left+bs}(Pi,F,$,ue,Zn,Re,Ze,st,qt,yt,on,Pn),!function(Di){for(var Ba=0,Pa=Di;Ba<Pa.length;Ba+=1)if(0!==Pa[Ba].positionedGlyphs.length)return!1;return!0}(Ni)&&Pi}Ys.fromFeature=function(A,F){for(var $=new Ys,ue=0;ue<A.sections.length;ue++){var xe=A.sections[ue];xe.image?$.addImageSection(xe):$.addTextSection(xe,F)}return $},Ys.prototype.length=function(){return this.text.length},Ys.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},Ys.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},Ys.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},Ys.prototype.verticalizePunctuation=function(){this.text=function(A){for(var F="",$=0;$<A.length;$++){var ue=A.charCodeAt($+1)||null,xe=A.charCodeAt($-1)||null;ue&&fa(ue)&&!lf[A[$+1]]||xe&&fa(xe)&&!lf[A[$-1]]||!lf[A[$]]?F+=A[$]:F+=lf[A[$]]}return F}(this.text)},Ys.prototype.trim=function(){for(var A=0,F=0;F<this.text.length&&Kh[this.text.charCodeAt(F)];F++)A++;for(var $=this.text.length,ue=this.text.length-1;ue>=0&&ue>=A&&Kh[this.text.charCodeAt(ue)];ue--)$--;this.text=this.text.substring(A,$),this.sectionIndex=this.sectionIndex.slice(A,$)},Ys.prototype.substring=function(A,F){var $=new Ys;return $.text=this.text.substring(A,F),$.sectionIndex=this.sectionIndex.slice(A,F),$.sections=this.sections,$},Ys.prototype.toString=function(){return this.text},Ys.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(F,$){return Math.max(F,A.sections[$].scale)},0)},Ys.prototype.addTextSection=function(A,F){this.text+=A.text,this.sections.push(df.forText(A.scale,A.fontStack||F));for(var $=this.sections.length-1,ue=0;ue<A.text.length;++ue)this.sectionIndex.push($)},Ys.prototype.addImageSection=function(A){var F=A.image?A.image.name:"";if(0!==F.length){var $=this.getNextImageSectionCharCode();$?(this.text+=String.fromCharCode($),this.sections.push(df.forImage(F)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},Ys.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Kh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rl={};function bp(A,F,$,ue,xe,Me){if(F.imageName){var Re=ue[F.imageName];return Re?Re.displaySize[0]*F.scale*24/Me+xe:0}var Ze=$[F.fontStack],st=Ze&&Ze[A];return st?st.metrics.advance*F.scale+xe:0}function _p(A,F,$,ue){var xe=Math.pow(A-F,2);return ue?A<F?xe/2:2*xe:xe+Math.abs($)*$}function lg(A,F,$){var ue=0;return 10===A&&(ue-=1e4),$&&(ue+=150),40!==A&&65288!==A||(ue+=50),41!==F&&65289!==F||(ue+=50),ue}function wp(A,F,$,ue,xe,Me){for(var Re=null,Ze=_p(F,$,xe,Me),st=0,yt=ue;st<yt.length;st+=1){var At=yt[st],qt=_p(F-At.x,$,xe,Me)+At.badness;qt<=Ze&&(Re=At,Ze=qt)}return{index:A,x:F,priorBreak:Re,badness:Ze}}function Tp(A,F,$,ue,xe,Me,Re){if("point"!==Me)return[];if(!A)return[];for(var Ze,st=[],yt=function(Zn,Wn,nr,ir,ur,kr){for(var Pr=0,Qr=0;Qr<Zn.length();Qr++){var ei=Zn.getSection(Qr);Pr+=bp(Zn.getCharCode(Qr),ei,ir,ur,Wn,kr)}return Pr/Math.max(1,Math.ceil(Pr/nr))}(A,F,$,ue,xe,Re),At=A.text.indexOf("\u200b")>=0,qt=0,on=0;on<A.length();on++){var Qt=A.getSection(on),xn=A.getCharCode(on);if(Kh[xn]||(qt+=bp(xn,Qt,ue,xe,F,Re)),on<A.length()-1){var Pn=!((Ze=xn)<11904||!(Vr["Bopomofo Extended"](Ze)||Vr.Bopomofo(Ze)||Vr["CJK Compatibility Forms"](Ze)||Vr["CJK Compatibility Ideographs"](Ze)||Vr["CJK Compatibility"](Ze)||Vr["CJK Radicals Supplement"](Ze)||Vr["CJK Strokes"](Ze)||Vr["CJK Symbols and Punctuation"](Ze)||Vr["CJK Unified Ideographs Extension A"](Ze)||Vr["CJK Unified Ideographs"](Ze)||Vr["Enclosed CJK Letters and Months"](Ze)||Vr["Halfwidth and Fullwidth Forms"](Ze)||Vr.Hiragana(Ze)||Vr["Ideographic Description Characters"](Ze)||Vr["Kangxi Radicals"](Ze)||Vr["Katakana Phonetic Extensions"](Ze)||Vr.Katakana(Ze)||Vr["Vertical Forms"](Ze)||Vr["Yi Radicals"](Ze)||Vr["Yi Syllables"](Ze)));(rl[xn]||Pn||Qt.imageName)&&st.push(wp(on+1,qt,yt,st,lg(xn,A.getCharCode(on+1),Pn&&At),!1))}}return function Zn(Wn){return Wn?Zn(Wn.priorBreak).concat(Wn.index):[]}(wp(A.length(),qt,yt,st,0,!0))}function Jh(A){var F=.5,$=.5;switch(A){case"right":case"top-right":case"bottom-right":F=1;break;case"left":case"top-left":case"bottom-left":F=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":$=1;break;case"top":case"top-right":case"top-left":$=0}return{horizontalAlign:F,verticalAlign:$}}function Hf(A,F,$,ue,xe){if(ue||xe)for(var Me=A[$],Ze=(A[$].x+Me.metrics.advance*Me.scale)*ue,st=F;st<=$;st++)A[st].x-=Ze,A[st].y+=xe}function Qh(A,F,$,ue,xe,Me){var Re,Ze=A.image;if(Ze.content){var st=Ze.content,yt=Ze.pixelRatio||1;Re=[st[0]/yt,st[1]/yt,Ze.displaySize[0]-st[2]/yt,Ze.displaySize[1]-st[3]/yt]}var At,qt,on,Qt,xn=F.left*Me,Pn=F.right*Me;"width"===$||"both"===$?(Qt=xe[0]+xn-ue[3],qt=xe[0]+Pn+ue[1]):qt=(Qt=xe[0]+(xn+Pn-Ze.displaySize[0])/2)+Ze.displaySize[0];var Zn=F.top*Me,Wn=F.bottom*Me;return"height"===$||"both"===$?(At=xe[1]+Zn-ue[0],on=xe[1]+Wn+ue[2]):on=(At=xe[1]+(Zn+Wn-Ze.displaySize[1])/2)+Ze.displaySize[1],{image:Ze,top:At,right:qt,bottom:on,left:Qt,collisionPadding:Re}}rl[10]=!0,rl[32]=!0,rl[38]=!0,rl[40]=!0,rl[41]=!0,rl[43]=!0,rl[45]=!0,rl[47]=!0,rl[173]=!0,rl[183]=!0,rl[8203]=!0,rl[8208]=!0,rl[8211]=!0,rl[8231]=!0;var ll=function(A){function F($,ue,xe,Me){A.call(this,$,ue),this.angle=xe,void 0!==Me&&(this.segment=Me)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.clone=function(){return new F(this.x,this.y,this.angle,this.segment)},F}(t);function Ku(A,F){var $=F.expression;if("constant"===$.kind)return{kind:"constant",layoutSize:$.evaluate(new Sa(A+1))};if("source"===$.kind)return{kind:"source"};for(var ue=$.zoomStops,xe=$.interpolationType,Me=0;Me<ue.length&&ue[Me]<=A;)Me++;for(var Re=Me=Math.max(0,Me-1);Re<ue.length&&ue[Re]<A+1;)Re++;Re=Math.min(ue.length-1,Re);var Ze=ue[Me],st=ue[Re];return"composite"===$.kind?{kind:"composite",minZoom:Ze,maxZoom:st,interpolationType:xe}:{kind:"camera",minZoom:Ze,maxZoom:st,minSize:$.evaluate(new Sa(Ze)),maxSize:$.evaluate(new Sa(st)),interpolationType:xe}}function ed(A,F,$){var ue=F.uSize,Me=$.lowerSize;return"source"===A.kind?Me/128:"composite"===A.kind?Rr(Me/128,$.upperSize/128,F.uSizeT):ue}function td(A,F){var $=0,ue=0;if("constant"===A.kind)ue=A.layoutSize;else if("source"!==A.kind){var xe=A.interpolationType,Ze=xe?f(Ta.interpolationFactor(xe,F,A.minZoom,A.maxZoom),0,1):0;"camera"===A.kind?ue=Rr(A.minSize,A.maxSize,Ze):$=Ze}return{uSizeT:$,uSize:ue}}dr("Anchor",ll);var Mp=Object.freeze({__proto__:null,getSizeData:Ku,evaluateSizeForFeature:ed,evaluateSizeForZoom:td,SIZE_PACK_FACTOR:128});function ug(A,F,$,ue,xe){if(void 0===F.segment)return!0;for(var Me=F,Re=F.segment+1,Ze=0;Ze>-$/2;){if(--Re<0)return!1;Ze-=A[Re].dist(Me),Me=A[Re]}Ze+=A[Re].dist(A[Re+1]),Re++;for(var st=[],yt=0;Ze<$/2;){var qt=A[Re],on=A[Re+1];if(!on)return!1;var Qt=A[Re-1].angleTo(qt)-qt.angleTo(on);for(Qt=Math.abs((Qt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:Ze,angleDelta:Qt}),yt+=Qt;Ze-st[0].distance>ue;)yt-=st.shift().angleDelta;if(yt>xe)return!1;Re++,Ze+=qt.dist(on)}return!0}function cg(A){for(var F=0,$=0;$<A.length-1;$++)F+=A[$].dist(A[$+1]);return F}function fg(A,F,$){return A?.6*F*$:0}function qf(A,F){return Math.max(A?A.right-A.left:0,F?F.right-F.left:0)}function nd(A,F,$,ue,xe,Me){for(var Re=fg($,xe,Me),Ze=qf($,ue)*Me,st=0,yt=cg(A)/2,At=0;At<A.length-1;At++){var qt=A[At],on=A[At+1],Qt=qt.dist(on);if(st+Qt>yt){var xn=(yt-st)/Qt,Pn=Rr(qt.x,on.x,xn),Zn=Rr(qt.y,on.y,xn),Wn=new ll(Pn,Zn,on.angleTo(qt),At);return Wn._round(),!Re||ug(A,Wn,Ze,Re,F)?Wn:void 0}st+=Qt}}function rd(A,F,$,ue,xe,Me,Re,Ze,st){var yt=fg(ue,Me,Re),At=qf(ue,xe),qt=At*Re,on=0===A[0].x||A[0].x===st||0===A[0].y||A[0].y===st;return F-qt<F/4&&(F=qt+F/4),function Qt(xn,Pn,Zn,Wn,nr,ir,ur,kr,Pr){for(var Qr=ir/2,ei=cg(xn),fi=0,Ti=Pn-Zn,Ci=[],xi=0;xi<xn.length-1;xi++){for(var Ni=xn[xi],Pi=xn[xi+1],Di=Ni.dist(Pi),Ba=Pi.angleTo(Ni);Ti+Zn<fi+Di;){var Pa=((Ti+=Zn)-fi)/Di,Za=Rr(Ni.x,Pi.x,Pa),Ui=Rr(Ni.y,Pi.y,Pa);if(Za>=0&&Za<Pr&&Ui>=0&&Ui<Pr&&Ti-Qr>=0&&Ti+Qr<=ei){var Ra=new ll(Za,Ui,Ba,xi);Ra._round(),Wn&&!ug(xn,Ra,ir,Wn,nr)||Ci.push(Ra)}}fi+=Di}return kr||Ci.length||ur||(Ci=Qt(xn,fi/2,Zn,Wn,nr,ir,ur,!0,Pr)),Ci}(A,on?F/2*Ze%F:(At/2+2*Me)*Re*Ze%F,F,yt,$,qt,on,!1,st)}function hg(A,F,$,ue,xe){for(var Me=[],Re=0;Re<A.length;Re++)for(var Ze=A[Re],st=void 0,yt=0;yt<Ze.length-1;yt++){var At=Ze[yt],qt=Ze[yt+1];At.x<F&&qt.x<F||(At.x<F?At=new t(F,At.y+(F-At.x)/(qt.x-At.x)*(qt.y-At.y))._round():qt.x<F&&(qt=new t(F,At.y+(F-At.x)/(qt.x-At.x)*(qt.y-At.y))._round()),At.y<$&&qt.y<$||(At.y<$?At=new t(At.x+($-At.y)/(qt.y-At.y)*(qt.x-At.x),$)._round():qt.y<$&&(qt=new t(At.x+($-At.y)/(qt.y-At.y)*(qt.x-At.x),$)._round()),At.x>=ue&&qt.x>=ue||(At.x>=ue?At=new t(ue,At.y+(ue-At.x)/(qt.x-At.x)*(qt.y-At.y))._round():qt.x>=ue&&(qt=new t(ue,At.y+(ue-At.x)/(qt.x-At.x)*(qt.y-At.y))._round()),At.y>=xe&&qt.y>=xe||(At.y>=xe?At=new t(At.x+(xe-At.y)/(qt.y-At.y)*(qt.x-At.x),xe)._round():qt.y>=xe&&(qt=new t(At.x+(xe-At.y)/(qt.y-At.y)*(qt.x-At.x),xe)._round()),st&&At.equals(st[st.length-1])||Me.push(st=[At]),st.push(qt)))))}return Me}function dg(A,F,$,ue){var xe=[],Me=A.image,Re=Me.pixelRatio,Ze=Me.paddedRect.w-2,st=Me.paddedRect.h-2,yt=A.right-A.left,At=A.bottom-A.top,qt=Me.stretchX||[[0,Ze]],on=Me.stretchY||[[0,st]],Qt=function(Ra,yo){return Ra+yo[1]-yo[0]},xn=qt.reduce(Qt,0),Pn=on.reduce(Qt,0),Zn=Ze-xn,Wn=st-Pn,nr=0,ir=xn,ur=0,kr=Pn,Pr=0,Qr=Zn,ei=0,fi=Wn;if(Me.content&&ue){var Ti=Me.content;nr=pf(qt,0,Ti[0]),ur=pf(on,0,Ti[1]),ir=pf(qt,Ti[0],Ti[2]),kr=pf(on,Ti[1],Ti[3]),Pr=Ti[0]-nr,ei=Ti[1]-ur,Qr=Ti[2]-Ti[0]-ir,fi=Ti[3]-Ti[1]-kr}var Ci=function(Ra,yo,uo,Mo){var co=Gf(Ra.stretch-nr,ir,yt,A.left),os=Yf(Ra.fixed-Pr,Qr,Ra.stretch,xn),La=Gf(yo.stretch-ur,kr,At,A.top),Cs=Yf(yo.fixed-ei,fi,yo.stretch,Pn),xs=Gf(uo.stretch-nr,ir,yt,A.left),bs=Yf(uo.fixed-Pr,Qr,uo.stretch,xn),fo=Gf(Mo.stretch-ur,kr,At,A.top),_s=Yf(Mo.fixed-ei,fi,Mo.stretch,Pn),Xo=new t(co,La),Is=new t(xs,La),Jo=new t(xs,fo),ss=new t(co,fo),ma=new t(os/Re,Cs/Re),ja=new t(bs/Re,_s/Re),Ho=F*Math.PI/180;if(Ho){var Oo=Math.sin(Ho),Ro=Math.cos(Ho),So=[Ro,-Oo,Oo,Ro];Xo._matMult(So),Is._matMult(So),ss._matMult(So),Jo._matMult(So)}var Ka=Ra.stretch+Ra.fixed,Ws=yo.stretch+yo.fixed;return{tl:Xo,tr:Is,bl:ss,br:Jo,tex:{x:Me.paddedRect.x+1+Ka,y:Me.paddedRect.y+1+Ws,w:uo.stretch+uo.fixed-Ka,h:Mo.stretch+Mo.fixed-Ws},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ma,pixelOffsetBR:ja,minFontScaleX:Qr/Re/yt,minFontScaleY:fi/Re/At,isSDF:$}};if(ue&&(Me.stretchX||Me.stretchY))for(var xi=kp(qt,Zn,xn),Ni=kp(on,Wn,Pn),Pi=0;Pi<xi.length-1;Pi++)for(var Di=xi[Pi],Ba=xi[Pi+1],Pa=0;Pa<Ni.length-1;Pa++)xe.push(Ci(Di,Ni[Pa],Ba,Ni[Pa+1]));else xe.push(Ci({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ze+1},{fixed:0,stretch:st+1}));return xe}function pf(A,F,$){for(var ue=0,xe=0,Me=A;xe<Me.length;xe+=1){var Re=Me[xe];ue+=Math.max(F,Math.min($,Re[1]))-Math.max(F,Math.min($,Re[0]))}return ue}function kp(A,F,$){for(var ue=[{fixed:-1,stretch:0}],xe=0,Me=A;xe<Me.length;xe+=1){var Re=Me[xe],Ze=Re[0],st=Re[1],yt=ue[ue.length-1];ue.push({fixed:Ze-yt.stretch,stretch:yt.stretch}),ue.push({fixed:Ze-yt.stretch,stretch:yt.stretch+(st-Ze)})}return ue.push({fixed:F+1,stretch:$}),ue}function Gf(A,F,$,ue){return A/F*$+ue}function Yf(A,F,$,ue){return A-F*$/ue}var Wf=function(A,F,$,ue,xe,Me,Re,Ze,st,yt){if(this.boxStartIndex=A.length,st){var At=Me.top,qt=Me.bottom,on=Me.collisionPadding;on&&(At-=on[1],qt+=on[3]);var Qt=qt-At;Qt>0&&(Qt=Math.max(10,Qt),this.circleDiameter=Qt)}else{var xn=Me.top*Re-Ze,Pn=Me.bottom*Re+Ze,Zn=Me.left*Re-Ze,Wn=Me.right*Re+Ze,nr=Me.collisionPadding;if(nr&&(Zn-=nr[0]*Re,xn-=nr[1]*Re,Wn+=nr[2]*Re,Pn+=nr[3]*Re),yt){var ir=new t(Zn,xn),ur=new t(Wn,xn),kr=new t(Zn,Pn),Pr=new t(Wn,Pn),Qr=yt*Math.PI/180;ir._rotate(Qr),ur._rotate(Qr),kr._rotate(Qr),Pr._rotate(Qr),Zn=Math.min(ir.x,ur.x,kr.x,Pr.x),Wn=Math.max(ir.x,ur.x,kr.x,Pr.x),xn=Math.min(ir.y,ur.y,kr.y,Pr.y),Pn=Math.max(ir.y,ur.y,kr.y,Pr.y)}A.emplaceBack(F.x,F.y,Zn,xn,Wn,Pn,$,ue,xe)}this.boxEndIndex=A.length},Ju=function(A,F){if(void 0===A&&(A=[]),void 0===F&&(F=Zf),this.data=A,this.length=this.data.length,this.compare=F,this.length>0)for(var $=(this.length>>1)-1;$>=0;$--)this._down($)};function Zf(A,F){return A<F?-1:A>F?1:0}function pg(A,F,$){void 0===F&&(F=1),void 0===$&&($=!1);for(var ue=1/0,xe=1/0,Me=-1/0,Re=-1/0,Ze=A[0],st=0;st<Ze.length;st++){var yt=Ze[st];(!st||yt.x<ue)&&(ue=yt.x),(!st||yt.y<xe)&&(xe=yt.y),(!st||yt.x>Me)&&(Me=yt.x),(!st||yt.y>Re)&&(Re=yt.y)}var on=Math.min(Me-ue,Re-xe),Qt=on/2,xn=new Ju([],id);if(0===on)return new t(ue,xe);for(var Pn=ue;Pn<Me;Pn+=on)for(var Zn=xe;Zn<Re;Zn+=on)xn.push(new Sc(Pn+Qt,Zn+Qt,Qt,A));for(var Wn=function(ur){for(var kr=0,Pr=0,Qr=0,ei=ur[0],fi=0,Ti=ei.length,Ci=Ti-1;fi<Ti;Ci=fi++){var xi=ei[fi],Ni=ei[Ci],Pi=xi.x*Ni.y-Ni.x*xi.y;Pr+=(xi.x+Ni.x)*Pi,Qr+=(xi.y+Ni.y)*Pi,kr+=3*Pi}return new Sc(Pr/kr,Qr/kr,0,ur)}(A),nr=xn.length;xn.length;){var ir=xn.pop();(ir.d>Wn.d||!Wn.d)&&(Wn=ir,$&&console.log("found best %d after %d probes",Math.round(1e4*ir.d)/1e4,nr)),ir.max-Wn.d<=F||(xn.push(new Sc(ir.p.x-(Qt=ir.h/2),ir.p.y-Qt,Qt,A)),xn.push(new Sc(ir.p.x+Qt,ir.p.y-Qt,Qt,A)),xn.push(new Sc(ir.p.x-Qt,ir.p.y+Qt,Qt,A)),xn.push(new Sc(ir.p.x+Qt,ir.p.y+Qt,Qt,A)),nr+=4)}return $&&(console.log("num probes: "+nr),console.log("best distance: "+Wn.d)),Wn.p}function id(A,F){return F.max-A.max}function Sc(A,F,$,ue){this.p=new t(A,F),this.h=$,this.d=function(xe,Me){for(var Re=!1,Ze=1/0,st=0;st<Me.length;st++)for(var yt=Me[st],At=0,qt=yt.length,on=qt-1;At<qt;on=At++){var Qt=yt[At],xn=yt[on];Qt.y>xe.y!=xn.y>xe.y&&xe.x<(xn.x-Qt.x)*(xe.y-Qt.y)/(xn.y-Qt.y)+Qt.x&&(Re=!Re),Ze=Math.min(Ze,Gl(xe,Qt,xn))}return(Re?1:-1)*Math.sqrt(Ze)}(this.p,ue),this.max=this.d+this.h*Math.SQRT2}Ju.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Ju.prototype.pop=function(){if(0!==this.length){var A=this.data[0],F=this.data.pop();return this.length--,this.length>0&&(this.data[0]=F,this._down(0)),A}},Ju.prototype.peek=function(){return this.data[0]},Ju.prototype._up=function(A){for(var F=this.data,$=this.compare,ue=F[A];A>0;){var xe=A-1>>1,Me=F[xe];if($(ue,Me)>=0)break;F[A]=Me,A=xe}F[A]=ue},Ju.prototype._down=function(A){for(var F=this.data,$=this.compare,ue=this.length>>1,xe=F[A];A<ue;){var Me=1+(A<<1),Re=F[Me],Ze=Me+1;if(Ze<this.length&&$(F[Ze],Re)<0&&(Me=Ze,Re=F[Ze]),$(Re,xe)>=0)break;F[A]=Re,A=Me}F[A]=xe};var ys=Number.POSITIVE_INFINITY;function Ap(A,F){return F[1]!==ys?function($,ue,xe){var Me=0,Re=0;switch(ue=Math.abs(ue),xe=Math.abs(xe),$){case"top-right":case"top-left":case"top":Re=xe-7;break;case"bottom-right":case"bottom-left":case"bottom":Re=7-xe}switch($){case"top-right":case"bottom-right":case"right":Me=-ue;break;case"top-left":case"bottom-left":case"left":Me=ue}return[Me,Re]}(A,F[0],F[1]):function($,ue){var xe=0,Me=0;ue<0&&(ue=0);var Re=ue/Math.sqrt(2);switch($){case"top-right":case"top-left":Me=Re-7;break;case"bottom-right":case"bottom-left":Me=7-Re;break;case"bottom":Me=7-ue;break;case"top":Me=ue-7}switch($){case"top-right":case"bottom-right":xe=-Re;break;case"top-left":case"bottom-left":xe=Re;break;case"left":xe=ue;break;case"right":xe=-ue}return[xe,Me]}(A,F[0])}function ad(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function od(A,F,$,ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn){var Pn=function(ur,kr,Pr,Qr,ei,fi,Ti,Ci){for(var xi=Qr.layout.get("text-rotate").evaluate(fi,{})*Math.PI/180,Ni=[],Pi=0,Di=kr.positionedLines;Pi<Di.length;Pi+=1)for(var Ba=Di[Pi],Pa=0,Za=Ba.positionedGlyphs;Pa<Za.length;Pa+=1){var Ui=Za[Pa];if(Ui.rect){var Ra=Ui.rect||{},yo=4,uo=!0,Mo=1,co=0,os=(ei||Ci)&&Ui.vertical,La=Ui.metrics.advance*Ui.scale/2;if(Ci&&kr.verticalizable&&(co=Ba.lineOffset/2-(Ui.imageName?-(24-Ui.metrics.width*Ui.scale)/2:24*(Ui.scale-1))),Ui.imageName){var bs=Ti[Ui.imageName];uo=bs.sdf,yo=1/(Mo=bs.pixelRatio)}var fo=ei?[Ui.x+La,Ui.y]:[0,0],_s=ei?[0,0]:[Ui.x+La+Pr[0],Ui.y+Pr[1]-co],Xo=[0,0];os&&(Xo=_s,_s=[0,0]);var Is=(Ui.metrics.left-yo)*Ui.scale-La+_s[0],Jo=(-Ui.metrics.top-yo)*Ui.scale+_s[1],ss=Is+Ra.w*Ui.scale/Mo,ma=Jo+Ra.h*Ui.scale/Mo,ja=new t(Is,Jo),Ho=new t(ss,Jo),Oo=new t(Is,ma),Ro=new t(ss,ma);if(os){var So=new t(-La,La- -17),Ka=-Math.PI/2,qo=12-La,ul=new t(22-qo,-(Ui.imageName?qo:0)),ls=new(Function.prototype.bind.apply(t,[null].concat(Xo)));ja._rotateAround(Ka,So)._add(ul)._add(ls),Ho._rotateAround(Ka,So)._add(ul)._add(ls),Oo._rotateAround(Ka,So)._add(ul)._add(ls),Ro._rotateAround(Ka,So)._add(ul)._add(ls)}if(xi){var zs=Math.sin(xi),gu=Math.cos(xi),Ds=[gu,-zs,zs,gu];ja._matMult(Ds),Ho._matMult(Ds),Oo._matMult(Ds),Ro._matMult(Ds)}var Ql=new t(0,0),eu=new t(0,0);Ni.push({tl:ja,tr:Ho,bl:Oo,br:Ro,tex:Ra,writingMode:kr.writingMode,glyphOffset:fo,sectionIndex:Ui.sectionIndex,isSDF:uo,pixelOffsetTL:Ql,pixelOffsetBR:eu,minFontScaleX:0,minFontScaleY:0})}}return Ni}(0,$,Ze,xe,Me,Re,ue,A.allowVerticalPlacement),Zn=A.textSizeData,Wn=null;"source"===Zn.kind?(Wn=[128*xe.layout.get("text-size").evaluate(Re,{})])[0]>32640&&S(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Zn.kind&&((Wn=[128*Qt.compositeTextSizes[0].evaluate(Re,{},xn),128*Qt.compositeTextSizes[1].evaluate(Re,{},xn)])[0]>32640||Wn[1]>32640)&&S(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),A.addSymbols(A.text,Pn,Wn,Ze,Me,Re,yt,F,st.lineStartIndex,st.lineLength,on,xn);for(var nr=0,ir=At;nr<ir.length;nr+=1)qt[ir[nr]]=A.text.placedSymbolArray.length-1;return 4*Pn.length}function sd(A){for(var F in A)return A[F];return null}function gg(A,F,$,ue){var xe=A.compareText;if(F in xe){for(var Me=xe[F],Re=Me.length-1;Re>=0;Re--)if(ue.dist(Me[Re])<$)return!0}else xe[F]=[];return xe[F].push(ue),!1}var mg=$l.VectorTileFeature.types,vg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xf(A,F,$,ue,xe,Me,Re,Ze,st,yt,At,qt,on){var Qt=Ze?Math.min(32640,Math.round(Ze[0])):0,xn=Ze?Math.min(32640,Math.round(Ze[1])):0;A.emplaceBack(F,$,Math.round(32*ue),Math.round(32*xe),Me,Re,(Qt<<1)+(st?1:0),xn,16*yt,16*At,256*qt,256*on)}function ld(A,F,$){A.emplaceBack(F.x,F.y,$),A.emplaceBack(F.x,F.y,$),A.emplaceBack(F.x,F.y,$),A.emplaceBack(F.x,F.y,$)}function Tv(A){for(var F=0,$=A.sections;F<$.length;F+=1)if(Ai($[F].text))return!0;return!1}var gf=function(A){this.layoutVertexArray=new Wo,this.indexArray=new is,this.programConfigurations=A,this.segments=new Gt,this.dynamicLayoutVertexArray=new gs,this.opacityVertexArray=new lu,this.placedSymbolArray=new $e};gf.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},gf.prototype.upload=function(A,F,$,ue){this.isEmpty()||($&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,dp.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,F),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,eg.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,vg,!0),this.opacityVertexBuffer.itemSize=1),($||ue)&&this.programConfigurations.upload(A))},gf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},dr("SymbolBuffers",gf);var pu=function(A,F,$){this.layoutVertexArray=new A,this.layoutAttributes=F,this.indexArray=new $,this.segments=new Gt,this.collisionVertexArray=new Sl};pu.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,tg.members,!0)},pu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},dr("CollisionBuffers",pu);var eo=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Re){return Re.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Yl([]),this.placementViewportMatrix=Yl([]);var F=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ku(this.zoom,F["text-size"]),this.iconSizeData=Ku(this.zoom,F["icon-size"]);var $=this.layers[0].layout,ue=$.get("symbol-sort-key"),xe=$.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==xe&&void 0!==ue.constantOr(1),this.sortFeaturesByY=("viewport-y"===xe||"auto"===xe&&!this.sortFeaturesByKey)&&($.get("text-allow-overlap")||$.get("icon-allow-overlap")||$.get("text-ignore-placement")||$.get("icon-ignore-placement")),"point"===$.get("symbol-placement")&&(this.writingModes=$.get("text-writing-mode").map(function(Re){return _l[Re]})),this.stateDependentLayerIds=this.layers.filter(function(Re){return Re.isStateDependent()}).map(function(Re){return Re.id}),this.sourceID=A.sourceID};eo.prototype.createArrays=function(){this.text=new gf(new $a(dp.members,this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new gf(new $a(dp.members,this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new Et,this.lineVertexArray=new Ft,this.symbolInstances=new pt},eo.prototype.calculateGlyphDependencies=function(A,F,$,ue,xe){for(var Me=0;Me<A.length;Me++)if(F[A.charCodeAt(Me)]=!0,($||ue)&&xe){var Re=lf[A.charAt(Me)];Re&&(F[Re.charCodeAt(0)]=!0)}},eo.prototype.populate=function(A,F,$){var ue=this.layers[0],xe=ue.layout,Me=xe.get("text-font"),Re=xe.get("text-field"),Ze=xe.get("icon-image"),st=("constant"!==Re.value.kind||Re.value.value instanceof pn&&!Re.value.value.isEmpty()||Re.value.value.toString().length>0)&&("constant"!==Me.value.kind||Me.value.value.length>0),yt="constant"!==Ze.value.kind||!!Ze.value.value||Object.keys(Ze.parameters).length>0,At=xe.get("symbol-sort-key");if(this.features=[],st||yt){for(var qt=F.iconDependencies,on=F.glyphDependencies,Qt=F.availableImages,xn=new Sa(this.zoom),Pn=0,Zn=A;Pn<Zn.length;Pn+=1){var Wn=Zn[Pn],nr=Wn.feature,ir=Wn.id,ur=Wn.index,kr=Wn.sourceLayerIndex,Pr=ue._featureFilter.needGeometry,Qr={type:nr.type,id:ir,properties:nr.properties,geometry:Pr?lo(nr):[]};if(ue._featureFilter.filter(xn,Qr,$)){Pr||(Qr.geometry=lo(nr));var ei=void 0;if(st){var fi=ue.getValueAndResolveTokens("text-field",Qr,$,Qt),Ti=pn.factory(fi);Tv(Ti)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Bo()||this.hasRTLText&&ps.isParsed())&&(ei=gp(Ti,ue,Qr))}var Ci=void 0;if(yt){var xi=ue.getValueAndResolveTokens("icon-image",Qr,$,Qt);Ci=xi instanceof Sn?xi:Sn.fromString(xi)}if(ei||Ci){var Ni=this.sortFeaturesByKey?At.evaluate(Qr,{},$):void 0,Pi={id:ir,text:ei,icon:Ci,index:ur,sourceLayerIndex:kr,geometry:lo(nr),properties:nr.properties,type:mg[nr.type],sortKey:Ni};if(this.features.push(Pi),Ci&&(qt[Ci.name]=!0),ei){var Di=Me.evaluate(Qr,{},$).join(","),Ba="map"===xe.get("text-rotation-alignment")&&"point"!==xe.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_l.vertical)>=0;for(var Pa=0,Za=ei.sections;Pa<Za.length;Pa+=1){var Ui=Za[Pa];if(Ui.image)qt[Ui.image.name]=!0;else{var Ra=ca(ei.toString()),yo=Ui.fontStack||Di,uo=on[yo]=on[yo]||{};this.calculateGlyphDependencies(Ui.text,uo,Ba,this.allowVerticalPlacement,Ra)}}}}}}"line"===xe.get("symbol-placement")&&(this.features=function(Mo){var co={},os={},La=[],Cs=0;function xs(Ro){La.push(Mo[Ro]),Cs++}function bs(Ro,So,Ka){var qo=os[Ro];return delete os[Ro],os[So]=qo,La[qo].geometry[0].pop(),La[qo].geometry[0]=La[qo].geometry[0].concat(Ka[0]),qo}function fo(Ro,So,Ka){var qo=co[So];return delete co[So],co[Ro]=qo,La[qo].geometry[0].shift(),La[qo].geometry[0]=Ka[0].concat(La[qo].geometry[0]),qo}function _s(Ro,So,Ka){var qo=Ka?So[0][So[0].length-1]:So[0][0];return Ro+":"+qo.x+":"+qo.y}for(var Xo=0;Xo<Mo.length;Xo++){var Is=Mo[Xo],Jo=Is.geometry,ss=Is.text?Is.text.toString():null;if(ss){var ma=_s(ss,Jo),ja=_s(ss,Jo,!0);if(ma in os&&ja in co&&os[ma]!==co[ja]){var Ho=fo(ma,ja,Jo),Oo=bs(ma,ja,La[Ho].geometry);delete co[ma],delete os[ja],os[_s(ss,La[Oo].geometry,!0)]=Oo,La[Ho].geometry=null}else ma in os?bs(ma,ja,Jo):ja in co?fo(ma,ja,Jo):(xs(Xo),co[ma]=Cs-1,os[ja]=Cs-1)}else xs(Xo)}return La.filter(function(Ro){return Ro.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Mo,co){return Mo.sortKey-co.sortKey})}},eo.prototype.update=function(A,F,$){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,F,this.layers,$),this.icon.programConfigurations.updatePaintArrays(A,F,this.layers,$))},eo.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},eo.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},eo.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},eo.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},eo.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},eo.prototype.addToLineVertexArray=function(A,F){var $=this.lineVertexArray.length;if(void 0!==A.segment){for(var ue=A.dist(F[A.segment+1]),xe=A.dist(F[A.segment]),Me={},Re=A.segment+1;Re<F.length;Re++)Me[Re]={x:F[Re].x,y:F[Re].y,tileUnitDistanceFromAnchor:ue},Re<F.length-1&&(ue+=F[Re+1].dist(F[Re]));for(var Ze=A.segment||0;Ze>=0;Ze--)Me[Ze]={x:F[Ze].x,y:F[Ze].y,tileUnitDistanceFromAnchor:xe},Ze>0&&(xe+=F[Ze-1].dist(F[Ze]));for(var st=0;st<F.length;st++){var yt=Me[st];this.lineVertexArray.emplaceBack(yt.x,yt.y,yt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:$,lineLength:this.lineVertexArray.length-$}},eo.prototype.addSymbols=function(A,F,$,ue,xe,Me,Re,Ze,st,yt,At,qt){for(var on=A.indexArray,Qt=A.layoutVertexArray,xn=A.segments.prepareSegment(4*F.length,Qt,on,Me.sortKey),Pn=this.glyphOffsetArray.length,Zn=xn.vertexLength,Wn=this.allowVerticalPlacement&&Re===_l.vertical?Math.PI/2:0,nr=Me.text&&Me.text.sections,ir=0;ir<F.length;ir++){var ur=F[ir],kr=ur.tl,Pr=ur.tr,Qr=ur.bl,ei=ur.br,fi=ur.tex,Ti=ur.pixelOffsetTL,Ci=ur.pixelOffsetBR,xi=ur.minFontScaleX,Ni=ur.minFontScaleY,Pi=ur.glyphOffset,Di=ur.isSDF,Ba=ur.sectionIndex,Pa=xn.vertexLength,Za=Pi[1];Xf(Qt,Ze.x,Ze.y,kr.x,Za+kr.y,fi.x,fi.y,$,Di,Ti.x,Ti.y,xi,Ni),Xf(Qt,Ze.x,Ze.y,Pr.x,Za+Pr.y,fi.x+fi.w,fi.y,$,Di,Ci.x,Ti.y,xi,Ni),Xf(Qt,Ze.x,Ze.y,Qr.x,Za+Qr.y,fi.x,fi.y+fi.h,$,Di,Ti.x,Ci.y,xi,Ni),Xf(Qt,Ze.x,Ze.y,ei.x,Za+ei.y,fi.x+fi.w,fi.y+fi.h,$,Di,Ci.x,Ci.y,xi,Ni),ld(A.dynamicLayoutVertexArray,Ze,Wn),on.emplaceBack(Pa,Pa+1,Pa+2),on.emplaceBack(Pa+1,Pa+2,Pa+3),xn.vertexLength+=4,xn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pi[0]),ir!==F.length-1&&Ba===F[ir+1].sectionIndex||A.programConfigurations.populatePaintArrays(Qt.length,Me,Me.index,{},qt,nr&&nr[Ba])}A.placedSymbolArray.emplaceBack(Ze.x,Ze.y,Pn,this.glyphOffsetArray.length-Pn,Zn,st,yt,Ze.segment,$?$[0]:0,$?$[1]:0,ue[0],ue[1],Re,0,!1,0,At)},eo.prototype._addCollisionDebugVertex=function(A,F,$,ue,xe,Me){return F.emplaceBack(0,0),A.emplaceBack($.x,$.y,ue,xe,Math.round(Me.x),Math.round(Me.y))},eo.prototype.addCollisionDebugVertices=function(A,F,$,ue,xe,Me,Re){var Ze=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),st=Ze.vertexLength,yt=xe.layoutVertexArray,At=xe.collisionVertexArray,qt=Re.anchorX,on=Re.anchorY;this._addCollisionDebugVertex(yt,At,Me,qt,on,new t(A,F)),this._addCollisionDebugVertex(yt,At,Me,qt,on,new t($,F)),this._addCollisionDebugVertex(yt,At,Me,qt,on,new t($,ue)),this._addCollisionDebugVertex(yt,At,Me,qt,on,new t(A,ue)),Ze.vertexLength+=4;var Qt=xe.indexArray;Qt.emplaceBack(st,st+1),Qt.emplaceBack(st+1,st+2),Qt.emplaceBack(st+2,st+3),Qt.emplaceBack(st+3,st),Ze.primitiveLength+=4},eo.prototype.addDebugCollisionBoxes=function(A,F,$,ue){for(var xe=A;xe<F;xe++){var Me=this.collisionBoxArray.get(xe);this.addCollisionDebugVertices(Me.x1,Me.y1,Me.x2,Me.y2,ue?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,$)}},eo.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pu(Ms,pp.members,j),this.iconCollisionBox=new pu(Ms,pp.members,j);for(var A=0;A<this.symbolInstances.length;A++){var F=this.symbolInstances.get(A);this.addDebugCollisionBoxes(F.textBoxStartIndex,F.textBoxEndIndex,F,!0),this.addDebugCollisionBoxes(F.verticalTextBoxStartIndex,F.verticalTextBoxEndIndex,F,!0),this.addDebugCollisionBoxes(F.iconBoxStartIndex,F.iconBoxEndIndex,F,!1),this.addDebugCollisionBoxes(F.verticalIconBoxStartIndex,F.verticalIconBoxEndIndex,F,!1)}},eo.prototype._deserializeCollisionBoxesForSymbol=function(A,F,$,ue,xe,Me,Re,Ze,st){for(var yt={},At=F;At<$;At++){var qt=A.get(At);yt.textBox={x1:qt.x1,y1:qt.y1,x2:qt.x2,y2:qt.y2,anchorPointX:qt.anchorPointX,anchorPointY:qt.anchorPointY},yt.textFeatureIndex=qt.featureIndex;break}for(var on=ue;on<xe;on++){var Qt=A.get(on);yt.verticalTextBox={x1:Qt.x1,y1:Qt.y1,x2:Qt.x2,y2:Qt.y2,anchorPointX:Qt.anchorPointX,anchorPointY:Qt.anchorPointY},yt.verticalTextFeatureIndex=Qt.featureIndex;break}for(var xn=Me;xn<Re;xn++){var Pn=A.get(xn);yt.iconBox={x1:Pn.x1,y1:Pn.y1,x2:Pn.x2,y2:Pn.y2,anchorPointX:Pn.anchorPointX,anchorPointY:Pn.anchorPointY},yt.iconFeatureIndex=Pn.featureIndex;break}for(var Zn=Ze;Zn<st;Zn++){var Wn=A.get(Zn);yt.verticalIconBox={x1:Wn.x1,y1:Wn.y1,x2:Wn.x2,y2:Wn.y2,anchorPointX:Wn.anchorPointX,anchorPointY:Wn.anchorPointY},yt.verticalIconFeatureIndex=Wn.featureIndex;break}return yt},eo.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var F=0;F<this.symbolInstances.length;F++){var $=this.symbolInstances.get(F);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,$.textBoxStartIndex,$.textBoxEndIndex,$.verticalTextBoxStartIndex,$.verticalTextBoxEndIndex,$.iconBoxStartIndex,$.iconBoxEndIndex,$.verticalIconBoxStartIndex,$.verticalIconBoxEndIndex))}},eo.prototype.hasTextData=function(){return this.text.segments.get().length>0},eo.prototype.hasIconData=function(){return this.icon.segments.get().length>0},eo.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},eo.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},eo.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},eo.prototype.addIndicesForPlacedSymbol=function(A,F){for(var $=A.placedSymbolArray.get(F),ue=$.vertexStartIndex+4*$.numGlyphs,xe=$.vertexStartIndex;xe<ue;xe+=4)A.indexArray.emplaceBack(xe,xe+1,xe+2),A.indexArray.emplaceBack(xe+1,xe+2,xe+3)},eo.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var F=Math.sin(A),$=Math.cos(A),ue=[],xe=[],Me=[],Re=0;Re<this.symbolInstances.length;++Re){Me.push(Re);var Ze=this.symbolInstances.get(Re);ue.push(0|Math.round(F*Ze.anchorX+$*Ze.anchorY)),xe.push(Ze.featureIndex)}return Me.sort(function(st,yt){return ue[st]-ue[yt]||xe[yt]-xe[st]}),Me},eo.prototype.addToSortKeyRanges=function(A,F){var $=this.sortKeyRanges[this.sortKeyRanges.length-1];$&&$.sortKey===F?$.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:F,symbolInstanceStart:A,symbolInstanceEnd:A+1})},eo.prototype.sortFeatures=function(A){var F=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var $=0,ue=this.symbolInstanceIndexes;$<ue.length;$+=1){var Me=this.symbolInstances.get(ue[$]);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Re,Ze,st){Re>=0&&st.indexOf(Re)===Ze&&F.addIndicesForPlacedSymbol(F.text,Re)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},dr("SymbolBucket",eo,{omit:["layers","collisionBoxArray","features","compareText"]}),eo.MAX_GLYPHS=65535,eo.addDynamicAttributes=ld;var Ep=new Fs({"symbol-placement":new Li(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Li(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Li(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Hi(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Li(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Li(ke.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Li(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Li(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Li(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Hi(ke.layout_symbol["icon-size"]),"icon-text-fit":new Li(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Li(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Hi(ke.layout_symbol["icon-image"]),"icon-rotate":new Hi(ke.layout_symbol["icon-rotate"]),"icon-padding":new Li(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Li(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Hi(ke.layout_symbol["icon-offset"]),"icon-anchor":new Hi(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Li(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Li(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Li(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Hi(ke.layout_symbol["text-field"]),"text-font":new Hi(ke.layout_symbol["text-font"]),"text-size":new Hi(ke.layout_symbol["text-size"]),"text-max-width":new Hi(ke.layout_symbol["text-max-width"]),"text-line-height":new Li(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Hi(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Hi(ke.layout_symbol["text-justify"]),"text-radial-offset":new Hi(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Li(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new Hi(ke.layout_symbol["text-anchor"]),"text-max-angle":new Li(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Li(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Hi(ke.layout_symbol["text-rotate"]),"text-padding":new Li(ke.layout_symbol["text-padding"]),"text-keep-upright":new Li(ke.layout_symbol["text-keep-upright"]),"text-transform":new Hi(ke.layout_symbol["text-transform"]),"text-offset":new Hi(ke.layout_symbol["text-offset"]),"text-allow-overlap":new Li(ke.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Li(ke.layout_symbol["text-ignore-placement"]),"text-optional":new Li(ke.layout_symbol["text-optional"])}),$f={paint:new Fs({"icon-opacity":new Hi(ke.paint_symbol["icon-opacity"]),"icon-color":new Hi(ke.paint_symbol["icon-color"]),"icon-halo-color":new Hi(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Hi(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Hi(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Li(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Li(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Hi(ke.paint_symbol["text-opacity"]),"text-color":new Hi(ke.paint_symbol["text-color"],{runtimeType:Pt,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new Hi(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Hi(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Hi(ke.paint_symbol["text-halo-blur"]),"text-translate":new Li(ke.paint_symbol["text-translate"]),"text-translate-anchor":new Li(ke.paint_symbol["text-translate-anchor"])}),layout:Ep},Qu=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Vt,this.defaultValue=A};Qu.prototype.evaluate=function(A){if(A.formattedSection){var F=this.defaultValue.property.overrides;if(F&&F.hasOverride(A.formattedSection))return F.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Qu.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Qu.prototype.outputDefined=function(){return!1},Qu.prototype.serialize=function(){return null},dr("FormatSectionOverride",Qu,{omit:["defaultValue"]});var yg=function(A){function F($){A.call(this,$,$f)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.recalculate=function($,ue){if(A.prototype.recalculate.call(this,$,ue),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var xe=this.layout.get("text-writing-mode");if(xe){for(var Me=[],Re=0,Ze=xe;Re<Ze.length;Re+=1){var st=Ze[Re];Me.indexOf(st)<0&&Me.push(st)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},F.prototype.getValueAndResolveTokens=function($,ue,xe,Me){var st,Re=this.layout.get($).evaluate(ue,{},xe,Me),Ze=this._unevaluatedLayout._values[$];return Ze.isDataDriven()||sn(Ze.value)||!Re?Re:(st=ue.properties,Re.replace(/{([^{}]+)}/g,function(At,qt){return qt in st?String(st[qt]):""}))},F.prototype.createBucket=function($){return new eo($)},F.prototype.queryRadius=function(){return 0},F.prototype.queryIntersectsFeature=function(){return!1},F.prototype._setPaintOverrides=function(){for(var $=0,ue=$f.paint.overridableProperties;$<ue.length;$+=1){var xe=ue[$];if(F.hasPaintOverride(this.layout,xe)){var st,Me=this.paint.get(xe),Re=new Qu(Me),Ze=new ln(Re,Me.property.specification);st="constant"===Me.value.kind||"source"===Me.value.kind?new mn("source",Ze):new kn("composite",Ze,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[xe]=new Io(Me.property,st,Me.parameters)}}},F.prototype._handleOverridablePaintPropertyUpdate=function($,ue,xe){return!(!this.layout||ue.isDataDriven()||xe.isDataDriven())&&F.hasPaintOverride(this.layout,$)},F.hasPaintOverride=function($,ue){var xe=$.get("text-field"),Me=$f.paint.properties[ue],Re=!1,Ze=function(At){for(var qt=0,on=At;qt<on.length;qt+=1)if(Me.overrides&&Me.overrides.hasOverride(on[qt]))return void(Re=!0)};if("constant"===xe.value.kind&&xe.value.value instanceof pn)Ze(xe.value.value.sections);else if("source"===xe.value.kind){var st=function(At){Re||(At instanceof Lr&&Bn(At.value)===dt?Ze(At.value.sections):At instanceof hr?Ze(At.sections):At.eachChild(st))},yt=xe.value;yt._styleExpression&&st(yt._styleExpression.expression)}return Re},F}(qs),Sp={paint:new Fs({"background-color":new Li(ke.paint_background["background-color"]),"background-pattern":new Yr(ke.paint_background["background-pattern"]),"background-opacity":new Li(ke.paint_background["background-opacity"])})},Cp=function(A){function F($){A.call(this,$,Sp)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F}(qs),ud={paint:new Fs({"raster-opacity":new Li(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Li(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Li(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Li(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Li(ke.paint_raster["raster-saturation"]),"raster-contrast":new Li(ke.paint_raster["raster-contrast"]),"raster-resampling":new Li(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Li(ke.paint_raster["raster-fade-duration"])})},Mv=function(A){function F($){A.call(this,$,ud)}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F}(qs),xg=function(A){function F($){A.call(this,$,{}),this.implementation=$}return A&&(F.__proto__=A),(F.prototype=Object.create(A&&A.prototype)).constructor=F,F.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},F.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},F.prototype.recalculate=function(){},F.prototype.updateTransitions=function(){},F.prototype.hasTransition=function(){},F.prototype.serialize=function(){},F.prototype.onAdd=function($){this.implementation.onAdd&&this.implementation.onAdd($,$.painter.context.gl)},F.prototype.onRemove=function($){this.implementation.onRemove&&this.implementation.onRemove($,$.painter.context.gl)},F}(qs),cd={circle:_c,heatmap:yv,hillshade:bv,fill:W0,"fill-extrusion":K0,line:fp,symbol:yg,background:Cp,raster:Mv},fd=self.HTMLImageElement,hd=self.HTMLCanvasElement,Cu=self.HTMLVideoElement,Dp=self.ImageData,Cc=self.ImageBitmap,Kl=function(A,F,$,ue){this.context=A,this.format=$,this.texture=A.gl.createTexture(),this.update(F,ue)};Kl.prototype.update=function(A,F,$){var ue=A.width,xe=A.height,Me=!(this.size&&this.size[0]===ue&&this.size[1]===xe||$),Re=this.context,Ze=Re.gl;if(this.useMipmap=Boolean(F&&F.useMipmap),Ze.bindTexture(Ze.TEXTURE_2D,this.texture),Re.pixelStoreUnpackFlipY.set(!1),Re.pixelStoreUnpack.set(1),Re.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ze.RGBA&&(!F||!1!==F.premultiply)),Me)this.size=[ue,xe],A instanceof fd||A instanceof hd||A instanceof Cu||A instanceof Dp||Cc&&A instanceof Cc?Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,this.format,Ze.UNSIGNED_BYTE,A):Ze.texImage2D(Ze.TEXTURE_2D,0,this.format,ue,xe,0,this.format,Ze.UNSIGNED_BYTE,A.data);else{var st=$||{x:0,y:0},yt=st.x,At=st.y;A instanceof fd||A instanceof hd||A instanceof Cu||A instanceof Dp||Cc&&A instanceof Cc?Ze.texSubImage2D(Ze.TEXTURE_2D,0,yt,At,Ze.RGBA,Ze.UNSIGNED_BYTE,A):Ze.texSubImage2D(Ze.TEXTURE_2D,0,yt,At,ue,xe,Ze.RGBA,Ze.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ze.generateMipmap(Ze.TEXTURE_2D)},Kl.prototype.bind=function(A,F,$){var ue=this.context.gl;ue.bindTexture(ue.TEXTURE_2D,this.texture),$!==ue.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||($=ue.LINEAR),A!==this.filter&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MAG_FILTER,A),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_MIN_FILTER,$||A),this.filter=A),F!==this.wrap&&(ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_S,F),ue.texParameteri(ue.TEXTURE_2D,ue.TEXTURE_WRAP_T,F),this.wrap=F)},Kl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Kl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var dd=function(A){var F=this;this._callback=A,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){F._triggered=!1,F._callback()})};dd.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},dd.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Du=function(A,F,$){this.target=A,this.parent=F,this.mapId=$,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},u(["receive","process"],this),this.invoker=new dd(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?A:self};function mf(A,F,$){var ue=2*Math.PI*6378137/256/Math.pow(2,$);return[A*ue-2*Math.PI*6378137/2,F*ue-2*Math.PI*6378137/2]}Du.prototype.send=function(A,F,$,ue,xe){var Me=this;void 0===xe&&(xe=!1);var Re=Math.round(1e18*Math.random()).toString(36).substring(0,10);$&&(this.callbacks[Re]=$);var Ze=z(this.globalScope)?void 0:[];return this.target.postMessage({id:Re,type:A,hasCallback:!!$,targetMapId:ue,mustQueue:xe,sourceMapId:this.mapId,data:ki(F,Ze)},Ze),{cancel:function(){$&&delete Me.callbacks[Re],Me.target.postMessage({id:Re,type:"<cancel>",targetMapId:ue,sourceMapId:Me.mapId})}}},Du.prototype.receive=function(A){var F=A.data,$=F.id;if($&&(!F.targetMapId||this.mapId===F.targetMapId))if("<cancel>"===F.type){delete this.tasks[$];var ue=this.cancelCallbacks[$];delete this.cancelCallbacks[$],ue&&ue()}else C()||F.mustQueue?(this.tasks[$]=F,this.taskQueue.push($),this.invoker.trigger()):this.processTask($,F)},Du.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),F=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),F&&this.processTask(A,F)}},Du.prototype.processTask=function(A,F){var $=this;if("<response>"===F.type){var ue=this.callbacks[A];delete this.callbacks[A],ue&&(F.error?ue(Zi(F.error)):ue(null,Zi(F.data)))}else{var xe=!1,Me=z(this.globalScope)?void 0:[],Re=F.hasCallback?function(At,qt){xe=!0,delete $.cancelCallbacks[A],$.target.postMessage({id:A,type:"<response>",sourceMapId:$.mapId,error:At?ki(At):null,data:ki(qt,Me)},Me)}:function(At){xe=!0},Ze=null,st=Zi(F.data);if(this.parent[F.type])Ze=this.parent[F.type](F.sourceMapId,st,Re);else if(this.parent.getWorkerSource){var yt=F.type.split(".");Ze=this.parent.getWorkerSource(F.sourceMapId,yt[0],st.source)[yt[1]](st,Re)}else Re(new Error("Could not find function "+F.type));!xe&&Ze&&Ze.cancel&&(this.cancelCallbacks[A]=Ze.cancel)}},Du.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Do=function(A,F){A&&(F?this.setSouthWest(A).setNorthEast(F):4===A.length?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};Do.prototype.setNorthEast=function(A){return this._ne=A instanceof To?new To(A.lng,A.lat):To.convert(A),this},Do.prototype.setSouthWest=function(A){return this._sw=A instanceof To?new To(A.lng,A.lat):To.convert(A),this},Do.prototype.extend=function(A){var F,$,ue=this._sw,xe=this._ne;if(A instanceof To)F=A,$=A;else{if(!(A instanceof Do))return Array.isArray(A)?4===A.length||A.every(Array.isArray)?this.extend(Do.convert(A)):this.extend(To.convert(A)):this;if($=A._ne,!(F=A._sw)||!$)return this}return ue||xe?(ue.lng=Math.min(F.lng,ue.lng),ue.lat=Math.min(F.lat,ue.lat),xe.lng=Math.max($.lng,xe.lng),xe.lat=Math.max($.lat,xe.lat)):(this._sw=new To(F.lng,F.lat),this._ne=new To($.lng,$.lat)),this},Do.prototype.getCenter=function(){return new To((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Do.prototype.getSouthWest=function(){return this._sw},Do.prototype.getNorthEast=function(){return this._ne},Do.prototype.getNorthWest=function(){return new To(this.getWest(),this.getNorth())},Do.prototype.getSouthEast=function(){return new To(this.getEast(),this.getSouth())},Do.prototype.getWest=function(){return this._sw.lng},Do.prototype.getSouth=function(){return this._sw.lat},Do.prototype.getEast=function(){return this._ne.lng},Do.prototype.getNorth=function(){return this._ne.lat},Do.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Do.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Do.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Do.prototype.contains=function(A){var F=To.convert(A),$=F.lng,ue=F.lat,Me=this._sw.lng<=$&&$<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=$&&$>=this._ne.lng),this._sw.lat<=ue&&ue<=this._ne.lat&&Me},Do.convert=function(A){return!A||A instanceof Do?A:new Do(A)};var To=function(A,F){if(isNaN(A)||isNaN(F))throw new Error("Invalid LngLat object: ("+A+", "+F+")");if(this.lng=+A,this.lat=+F,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};To.prototype.wrap=function(){return new To(c(this.lng,-180,180),this.lat)},To.prototype.toArray=function(){return[this.lng,this.lat]},To.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},To.prototype.distanceTo=function(A){var F=Math.PI/180,$=this.lat*F,ue=A.lat*F,xe=Math.sin($)*Math.sin(ue)+Math.cos($)*Math.cos(ue)*Math.cos((A.lng-this.lng)*F);return 6371008.8*Math.acos(Math.min(xe,1))},To.prototype.toBounds=function(A){void 0===A&&(A=0);var F=360*A/40075017,$=F/Math.cos(Math.PI/180*this.lat);return new Do(new To(this.lng-$,this.lat-F),new To(this.lng+$,this.lat+F))},To.convert=function(A){if(A instanceof To)return A;if(Array.isArray(A)&&(2===A.length||3===A.length))return new To(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&"object"==typeof A&&null!==A)return new To(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Kf=2*Math.PI*6371008.8;function Lp(A){return Kf*Math.cos(A*Math.PI/180)}function Ip(A){return(180+A)/360}function pd(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function ec(A,F){return A/Lp(F)}function gd(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}var tc=function(A,F,$){void 0===$&&($=0),this.x=+A,this.y=+F,this.z=+$};tc.fromLngLat=function(A,F){void 0===F&&(F=0);var $=To.convert(A);return new tc(Ip($.lng),pd($.lat),ec(F,$.lat))},tc.prototype.toLngLat=function(){return new To(360*this.x-180,gd(this.y))},tc.prototype.toAltitude=function(){return this.z*Lp(gd(this.y))},tc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Kf*(A=gd(this.y),1/Math.cos(A*Math.PI/180));var A};var nc=function(A,F,$){this.z=A,this.x=F,this.y=$,this.key=vf(0,A,A,F,$)};nc.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},nc.prototype.url=function(A,F){var $,ue,xe,Me,Re,Ze=(ue=this.y,xe=this.z,Me=mf(256*($=this.x),256*(ue=Math.pow(2,xe)-ue-1),xe),Re=mf(256*($+1),256*(ue+1),xe),Me[0]+","+Me[1]+","+Re[0]+","+Re[1]),st=function(yt,At,qt){for(var on,Qt="",xn=yt;xn>0;xn--)Qt+=(At&(on=1<<xn-1)?1:0)+(qt&on?2:0);return Qt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===F?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",Ze)},nc.prototype.getTilePoint=function(A){var F=Math.pow(2,this.z);return new t(8192*(A.x*F-this.x),8192*(A.y*F-this.y))},nc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Pp=function(A,F){this.wrap=A,this.canonical=F,this.key=vf(A,F.z,F.z,F.x,F.y)},Zo=function(A,F,$,ue,xe){this.overscaledZ=A,this.wrap=F,this.canonical=new nc($,+ue,+xe),this.key=vf(F,A,$,ue,xe)};function vf(A,F,$,ue,xe){(A*=2)<0&&(A=-1*A-1);var Me=1<<$;return(Me*Me*A+Me*xe+ue).toString(36)+$.toString(36)+F.toString(36)}Zo.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},Zo.prototype.scaledTo=function(A){var F=this.canonical.z-A;return A>this.canonical.z?new Zo(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zo(A,this.wrap,A,this.canonical.x>>F,this.canonical.y>>F)},Zo.prototype.calculateScaledKey=function(A,F){var $=this.canonical.z-A;return A>this.canonical.z?vf(this.wrap*+F,A,this.canonical.z,this.canonical.x,this.canonical.y):vf(this.wrap*+F,A,A,this.canonical.x>>$,this.canonical.y>>$)},Zo.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var F=this.canonical.z-A.canonical.z;return 0===A.overscaledZ||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>F&&A.canonical.y===this.canonical.y>>F},Zo.prototype.children=function(A){if(this.overscaledZ>=A)return[new Zo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var F=this.canonical.z+1,$=2*this.canonical.x,ue=2*this.canonical.y;return[new Zo(F,this.wrap,F,$,ue),new Zo(F,this.wrap,F,$+1,ue),new Zo(F,this.wrap,F,$,ue+1),new Zo(F,this.wrap,F,$+1,ue+1)]},Zo.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},Zo.prototype.wrapped=function(){return new Zo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Zo.prototype.unwrapTo=function(A){return new Zo(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},Zo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Zo.prototype.toUnwrapped=function(){return new Pp(this.wrap,this.canonical)},Zo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Zo.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new tc(A.x-this.wrap,A.y))},dr("CanonicalTileID",nc),dr("OverscaledTileID",Zo,{omit:["posMatrix"]});var Jl=function(A,F,$){if(this.uid=A,F.height!==F.width)throw new RangeError("DEM tiles must be square");if($&&"mapbox"!==$&&"terrarium"!==$)return S('"'+$+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=F.height;var ue=this.dim=F.height-2;this.data=new Uint32Array(F.data.buffer),this.encoding=$||"mapbox";for(var xe=0;xe<ue;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(ue,xe)]=this.data[this._idx(ue-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,ue)]=this.data[this._idx(xe,ue-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ue,-1)]=this.data[this._idx(ue-1,0)],this.data[this._idx(-1,ue)]=this.data[this._idx(0,ue-1)],this.data[this._idx(ue,ue)]=this.data[this._idx(ue-1,ue-1)]};Jl.prototype.get=function(A,F){var $=new Uint8Array(this.data.buffer),ue=4*this._idx(A,F);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)($[ue],$[ue+1],$[ue+2])},Jl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Jl.prototype._idx=function(A,F){if(A<-1||A>=this.dim+1||F<-1||F>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(F+1)*this.stride+(A+1)},Jl.prototype._unpackMapbox=function(A,F,$){return(256*A*256+256*F+$)/10-1e4},Jl.prototype._unpackTerrarium=function(A,F,$){return 256*A+F+$/256-32768},Jl.prototype.getPixels=function(){return new la({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Jl.prototype.backfillBorder=function(A,F,$){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var ue=F*this.dim,xe=F*this.dim+this.dim,Me=$*this.dim,Re=$*this.dim+this.dim;switch(F){case-1:ue=xe-1;break;case 1:xe=ue+1}switch($){case-1:Me=Re-1;break;case 1:Re=Me+1}for(var Ze=-F*this.dim,st=-$*this.dim,yt=Me;yt<Re;yt++)for(var At=ue;At<xe;At++)this.data[this._idx(At,yt)]=A.data[this._idx(At+Ze,yt+st)]},dr("DEMData",Jl);var Jf=function(A){this._stringToNumber={},this._numberToString=[];for(var F=0;F<A.length;F++){var $=A[F];this._stringToNumber[$]=F,this._numberToString[F]=$}};Jf.prototype.encode=function(A){return this._stringToNumber[A]},Jf.prototype.decode=function(A){return this._numberToString[A]};var yf=function(A,F,$,ue,xe){this.type="Feature",this._vectorTileFeature=A,A._z=F,A._x=$,A._y=ue,this.properties=A.properties,this.id=xe},Op={geometry:{configurable:!0}};Op.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Op.geometry.set=function(A){this._geometry=A},yf.prototype.toJSON=function(){var A={geometry:this.geometry};for(var F in this)"_geometry"!==F&&"_vectorTileFeature"!==F&&(A[F]=this[F]);return A},Object.defineProperties(yf.prototype,Op);var Dc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Dc.prototype.updateState=function(A,F,$){var ue=String(F);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][ue]=this.stateChanges[A][ue]||{},l(this.stateChanges[A][ue],$),null===this.deletedStates[A])for(var xe in this.deletedStates[A]={},this.state[A])xe!==ue&&(this.deletedStates[A][xe]=null);else if(this.deletedStates[A]&&null===this.deletedStates[A][ue])for(var Me in this.deletedStates[A][ue]={},this.state[A][ue])$[Me]||(this.deletedStates[A][ue][Me]=null);else for(var Re in $)this.deletedStates[A]&&this.deletedStates[A][ue]&&null===this.deletedStates[A][ue][Re]&&delete this.deletedStates[A][ue][Re]},Dc.prototype.removeFeatureState=function(A,F,$){if(null!==this.deletedStates[A]){var ue=String(F);if(this.deletedStates[A]=this.deletedStates[A]||{},$&&void 0!==F)null!==this.deletedStates[A][ue]&&(this.deletedStates[A][ue]=this.deletedStates[A][ue]||{},this.deletedStates[A][ue][$]=null);else if(void 0!==F)if(this.stateChanges[A]&&this.stateChanges[A][ue])for($ in this.deletedStates[A][ue]={},this.stateChanges[A][ue])this.deletedStates[A][ue][$]=null;else this.deletedStates[A][ue]=null;else this.deletedStates[A]=null}},Dc.prototype.getState=function(A,F){var $=String(F),Me=l({},(this.state[A]||{})[$],(this.stateChanges[A]||{})[$]);if(null===this.deletedStates[A])return{};if(this.deletedStates[A]){var Re=this.deletedStates[A][F];if(null===Re)return{};for(var Ze in Re)delete Me[Ze]}return Me},Dc.prototype.initializeTileState=function(A,F){A.setFeatureState(this.state,F)},Dc.prototype.coalesceChanges=function(A,F){var $={};for(var ue in this.stateChanges){this.state[ue]=this.state[ue]||{};var xe={};for(var Me in this.stateChanges[ue])this.state[ue][Me]||(this.state[ue][Me]={}),l(this.state[ue][Me],this.stateChanges[ue][Me]),xe[Me]=this.state[ue][Me];$[ue]=xe}for(var Re in this.deletedStates){this.state[Re]=this.state[Re]||{};var Ze={};if(null===this.deletedStates[Re])for(var st in this.state[Re])Ze[st]={},this.state[Re][st]={};else for(var yt in this.deletedStates[Re]){if(null===this.deletedStates[Re][yt])this.state[Re][yt]={};else for(var At=0,qt=Object.keys(this.deletedStates[Re][yt]);At<qt.length;At+=1)delete this.state[Re][yt][qt[At]];Ze[yt]=this.state[Re][yt]}$[Re]=$[Re]||{},l($[Re],Ze)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys($).length)for(var Qt in A)A[Qt].setFeatureState($,F)};var dl=function(A,F){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new wr(8192,16,0),this.grid3D=new wr(8192,16,0),this.featureIndexArray=new zt,this.promoteId=F};function Rp(A,F,$,ue,xe){return _(A,function(Me,Re){var Ze=F instanceof al?F.get(Re):null;return Ze&&Ze.evaluate?Ze.evaluate($,ue,xe):Ze})}function rc(A){for(var F=1/0,$=1/0,ue=-1/0,xe=-1/0,Me=0,Re=A;Me<Re.length;Me+=1){var Ze=Re[Me];F=Math.min(F,Ze.x),$=Math.min($,Ze.y),ue=Math.max(ue,Ze.x),xe=Math.max(xe,Ze.y)}return{minX:F,minY:$,maxX:ue,maxY:xe}}function Lc(A,F){return F-A}dl.prototype.insert=function(A,F,$,ue,xe,Me){var Re=this.featureIndexArray.length;this.featureIndexArray.emplaceBack($,ue,xe);for(var Ze=Me?this.grid3D:this.grid,st=0;st<F.length;st++){for(var yt=F[st],At=[1/0,1/0,-1/0,-1/0],qt=0;qt<yt.length;qt++){var on=yt[qt];At[0]=Math.min(At[0],on.x),At[1]=Math.min(At[1],on.y),At[2]=Math.max(At[2],on.x),At[3]=Math.max(At[3],on.y)}At[0]<8192&&At[1]<8192&&At[2]>=0&&At[3]>=0&&Ze.insert(Re,At[0],At[1],At[2],At[3])}},dl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new $l.VectorTile(new uf(this.rawTileData)).layers,this.sourceLayerCoder=new Jf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},dl.prototype.query=function(A,F,$,ue){var xe=this;this.loadVTLayers();for(var Me=A.params||{},Re=8192/A.tileSize/A.scale,Ze=zi(Me.filter),st=A.queryGeometry,yt=A.queryPadding*Re,At=rc(st),qt=this.grid.query(At.minX-yt,At.minY-yt,At.maxX+yt,At.maxY+yt),on=rc(A.cameraQueryGeometry),xn=0,Pn=this.grid3D.query(on.minX-yt,on.minY-yt,on.maxX+yt,on.maxY+yt,function(kr,Pr,Qr,ei){return function(fi,Ti,Ci,xi,Ni){for(var Pi=0,Di=fi;Pi<Di.length;Pi+=1){var Ba=Di[Pi];if(Ti<=Ba.x&&Ci<=Ba.y&&xi>=Ba.x&&Ni>=Ba.y)return!0}var Pa=[new t(Ti,Ci),new t(Ti,Ni),new t(xi,Ni),new t(xi,Ci)];if(fi.length>2)for(var Za=0,Ui=Pa;Za<Ui.length;Za+=1)if(tl(fi,Ui[Za]))return!0;for(var Ra=0;Ra<fi.length-1;Ra++)if(Su(fi[Ra],fi[Ra+1],Pa))return!0;return!1}(A.cameraQueryGeometry,kr-yt,Pr-yt,Qr+yt,ei+yt)});xn<Pn.length;xn+=1)qt.push(Pn[xn]);qt.sort(Lc);for(var Wn,nr={},ir=function(kr){var Pr=qt[kr];if(Pr!==Wn){Wn=Pr;var Qr=xe.featureIndexArray.get(Pr),ei=null;xe.loadMatchingFeature(nr,Qr.bucketIndex,Qr.sourceLayerIndex,Qr.featureIndex,Ze,Me.layers,Me.availableImages,F,$,ue,function(fi,Ti,Ci){return ei||(ei=lo(fi)),Ti.queryIntersectsFeature(st,fi,Ci,ei,xe.z,A.transform,Re,A.pixelPosMatrix)})}},ur=0;ur<qt.length;ur++)ir(ur);return nr},dl.prototype.loadMatchingFeature=function(A,F,$,ue,xe,Me,Re,Ze,st,yt,At){var qt=this.bucketLayerIDs[F];if(!Me||function(Qr,ei){for(var fi=0;fi<Qr.length;fi++)if(ei.indexOf(Qr[fi])>=0)return!0;return!1}(Me,qt)){var on=this.sourceLayerCoder.decode($),Qt=this.vtLayers[on].feature(ue);if(xe.filter(new Sa(this.tileID.overscaledZ),Qt))for(var xn=this.getId(Qt,on),Pn=0;Pn<qt.length;Pn++){var Zn=qt[Pn];if(!(Me&&Me.indexOf(Zn)<0)){var Wn=Ze[Zn];if(Wn){var nr={};void 0!==xn&&yt&&(nr=yt.getState(Wn.sourceLayer||"_geojsonTileLayer",xn));var ir=st[Zn];ir.paint=Rp(ir.paint,Wn.paint,Qt,nr,Re),ir.layout=Rp(ir.layout,Wn.layout,Qt,nr,Re);var ur=!At||At(Qt,Wn,nr);if(ur){var kr=new yf(Qt,this.z,this.x,this.y,xn);kr.layer=ir;var Pr=A[Zn];void 0===Pr&&(Pr=A[Zn]=[]),Pr.push({featureIndex:ue,feature:kr,intersectionZ:ur})}}}}}},dl.prototype.lookupSymbolFeatures=function(A,F,$,ue,xe,Me,Re,Ze){var st={};this.loadVTLayers();for(var yt=zi(xe),At=0,qt=A;At<qt.length;At+=1)this.loadMatchingFeature(st,$,ue,qt[At],yt,Me,Re,Ze,F);return st},dl.prototype.hasLayer=function(A){for(var F=0,$=this.bucketLayerIDs;F<$.length;F+=1)for(var ue=0,xe=$[F];ue<xe.length;ue+=1)if(A===xe[ue])return!0;return!1},dl.prototype.getId=function(A,F){var $=A.id;return this.promoteId&&"boolean"==typeof($=A.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[F]])&&($=Number($)),$},dr("FeatureIndex",dl,{omit:["rawTileData","sourceLayerCoder"]});var Ss=function(A,F){this.tileID=A,this.uid=d(),this.uses=0,this.tileSize=F,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ss.prototype.registerFadeDuration=function(A){var F=A+this.timeAdded;F<V.now()||this.fadeEndTime&&F<this.fadeEndTime||(this.fadeEndTime=F)},Ss.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ss.prototype.loadVectorData=function(A,F,$){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ue in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(yt,At){var qt={};if(!At)return qt;for(var on=function(){var Pn=xn[Qt],Zn=Pn.layerIds.map(function(ur){return At.getLayer(ur)}).filter(Boolean);if(0!==Zn.length){Pn.layers=Zn,Pn.stateDependentLayerIds&&(Pn.stateDependentLayers=Pn.stateDependentLayerIds.map(function(ur){return Zn.filter(function(kr){return kr.id===ur})[0]}));for(var Wn=0,nr=Zn;Wn<nr.length;Wn+=1)qt[nr[Wn].id]=Pn}},Qt=0,xn=yt;Qt<xn.length;Qt+=1)on();return qt}(A.buckets,F.style),this.hasSymbolBuckets=!1,this.buckets){var xe=this.buckets[ue];if(xe instanceof eo){if(this.hasSymbolBuckets=!0,!$)break;xe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Re=this.buckets[Me];if(Re instanceof eo&&Re.hasRTLText){this.hasRTLText=!0,ps.isLoading()||ps.isLoaded()||"deferred"!==Bo()||Na();break}}for(var Ze in this.queryPadding=0,this.buckets){var st=this.buckets[Ze];this.queryPadding=Math.max(this.queryPadding,F.style.getLayer(Ze).queryRadius(st))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new Se},Ss.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ss.prototype.getBucket=function(A){return this.buckets[A.id]},Ss.prototype.upload=function(A){for(var F in this.buckets){var $=this.buckets[F];$.uploadPending()&&$.upload(A)}var ue=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Kl(A,this.imageAtlas.image,ue.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Kl(A,this.glyphAtlasImage,ue.ALPHA),this.glyphAtlasImage=null)},Ss.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},Ss.prototype.queryRenderedFeatures=function(A,F,$,ue,xe,Me,Re,Ze,st,yt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ue,cameraQueryGeometry:xe,scale:Me,tileSize:this.tileSize,pixelPosMatrix:yt,transform:Ze,params:Re,queryPadding:this.queryPadding*st},A,F,$):{}},Ss.prototype.querySourceFeatures=function(A,F){var $=this.latestFeatureIndex;if($&&$.rawTileData){var ue=$.loadVTLayers(),xe=F?F.sourceLayer:"",Me=ue._geojsonTileLayer||ue[xe];if(Me)for(var Re=zi(F&&F.filter),Ze=this.tileID.canonical,st=Ze.z,yt=Ze.x,At=Ze.y,qt={z:st,x:yt,y:At},on=0;on<Me.length;on++){var Qt=Me.feature(on);if(Re.filter(new Sa(this.tileID.overscaledZ),Qt)){var xn=$.getId(Qt,xe),Pn=new yf(Qt,st,yt,At,xn);Pn.tile=qt,A.push(Pn)}}}},Ss.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ss.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ss.prototype.setExpiryData=function(A){var F=this.expirationTime;if(A.cacheControl){var $=D(A.cacheControl);$["max-age"]&&(this.expirationTime=Date.now()+1e3*$["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var ue=Date.now(),xe=!1;if(this.expirationTime>ue)xe=!1;else if(F)if(this.expirationTime<F)xe=!0;else{var Me=this.expirationTime-F;Me?this.expirationTime=ue+Math.max(Me,3e4):xe=!0}else xe=!0;xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ss.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ss.prototype.setFeatureState=function(A,F){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(A).length){var $=this.latestFeatureIndex.loadVTLayers();for(var ue in this.buckets)if(F.style.hasLayer(ue)){var xe=this.buckets[ue],Me=xe.layers[0].sourceLayer||"_geojsonTileLayer",Re=$[Me],Ze=A[Me];if(Re&&Ze&&0!==Object.keys(Ze).length){xe.update(Ze,Re,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=F&&F.style&&F.style.getLayer(ue);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(xe)))}}}},Ss.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ss.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<V.now()},Ss.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ss.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=V.now()+A},Ss.prototype.setDependencies=function(A,F){for(var $={},ue=0,xe=F;ue<xe.length;ue+=1)$[xe[ue]]=!0;this.dependencies[A]=$},Ss.prototype.hasDependency=function(A,F){for(var $=0,ue=A;$<ue.length;$+=1){var Me=this.dependencies[ue[$]];if(Me)for(var Re=0,Ze=F;Re<Ze.length;Re+=1)if(Me[Ze[Re]])return!0}return!1};var ic=self.performance,md=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},ic.mark(this._marks.start)};md.prototype.finish=function(){ic.mark(this._marks.end);var A=ic.getEntriesByName(this._marks.measure);return 0===A.length&&(ic.measure(this._marks.measure,this._marks.start,this._marks.end),A=ic.getEntriesByName(this._marks.measure),ic.clearMarks(this._marks.start),ic.clearMarks(this._marks.end),ic.clearMeasures(this._marks.measure)),A},e.Actor=Du,e.AlphaImage=Gu,e.CanonicalTileID=nc,e.CollisionBoxArray=Se,e.Color=un,e.DEMData=Jl,e.DataConstantProperty=Li,e.DictionaryCoder=Jf,e.EXTENT=8192,e.ErrorEvent=tt,e.EvaluationParameters=Sa,e.Event=Xe,e.Evented=ye,e.FeatureIndex=dl,e.FillBucket=xl,e.FillExtrusionBucket=bl,e.ImageAtlas=hf,e.ImagePosition=Bl,e.LineBucket=Es,e.LngLat=To,e.LngLatBounds=Do,e.MercatorCoordinate=tc,e.ONE_EM=24,e.OverscaledTileID=Zo,e.Point=t,e.Point$1=t,e.Properties=Fs,e.Protobuf=uf,e.RGBAImage=la,e.RequestManager=le,e.RequestPerformance=md,e.ResourceType=Tt,e.SegmentVector=Gt,e.SourceFeatureState=Dc,e.StructArrayLayout1ui2=Z,e.StructArrayLayout2f1f2i16=Au,e.StructArrayLayout2i4=Qs,e.StructArrayLayout3ui6=is,e.StructArrayLayout4i8=Po,e.SymbolBucket=eo,e.Texture=Kl,e.Tile=Ss,e.Transitionable=$i,e.Uniform1f=or,e.Uniform1i=Fi,e.Uniform2f=zr,e.Uniform3f=yi,e.Uniform4f=ci,e.UniformColor=Si,e.UniformMatrix4f=Ji,e.UnwrappedTileID=Pp,e.ValidationError=Ve,e.WritingMode=_l,e.ZoomHistory=aa,e.add=function(A,F,$){return A[0]=F[0]+$[0],A[1]=F[1]+$[1],A[2]=F[2]+$[2],A},e.addDynamicAttributes=ld,e.asyncAll=function(A,F,$){if(!A.length)return $(null,[]);var ue=A.length,xe=new Array(A.length),Me=null;A.forEach(function(Re,Ze){F(Re,function(st,yt){st&&(Me=st),xe[Ze]=yt,0==--ue&&$(Me,xe)})})},e.bezier=s,e.bindAll=u,e.browser=V,e.cacheEntryPossiblyAdded=function(A){++lt>je&&(A.getActor().send("enforceCacheSizeLimit",qe),lt=0)},e.clamp=f,e.clearTileCache=function(A){var F=self.caches.delete("mapbox-tiles");A&&F.catch(A).then(function(){return A()})},e.clipLine=hg,e.clone=function(A){var F=new Gs(16);return F[0]=A[0],F[1]=A[1],F[2]=A[2],F[3]=A[3],F[4]=A[4],F[5]=A[5],F[6]=A[6],F[7]=A[7],F[8]=A[8],F[9]=A[9],F[10]=A[10],F[11]=A[11],F[12]=A[12],F[13]=A[13],F[14]=A[14],F[15]=A[15],F},e.clone$1=M,e.clone$2=function(A){var F=new Gs(3);return F[0]=A[0],F[1]=A[1],F[2]=A[2],F},e.collisionCircleLayout=jf,e.config=q,e.create=function(){var A=new Gs(16);return Gs!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},e.create$1=function(){var A=new Gs(9);return Gs!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},e.create$2=function(){var A=new Gs(4);return Gs!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},e.createCommonjsModule=r,e.createExpression=rn,e.createLayout=_a,e.createStyleLayer=function(A){return"custom"===A.type?new xg(A):new cd[A.type](A)},e.cross=function(A,F,$){var ue=F[0],xe=F[1],Me=F[2],Re=$[0],Ze=$[1],st=$[2];return A[0]=xe*st-Me*Ze,A[1]=Me*Re-ue*st,A[2]=ue*Ze-xe*Re,A},e.deepEqual=function A(F,$){if(Array.isArray(F)){if(!Array.isArray($)||F.length!==$.length)return!1;for(var ue=0;ue<F.length;ue++)if(!A(F[ue],$[ue]))return!1;return!0}if("object"==typeof F&&null!==F&&null!==$){if("object"!=typeof $||Object.keys(F).length!==Object.keys($).length)return!1;for(var xe in F)if(!A(F[xe],$[xe]))return!1;return!0}return F===$},e.dot=function(A,F){return A[0]*F[0]+A[1]*F[1]+A[2]*F[2]},e.dot$1=function(A,F){return A[0]*F[0]+A[1]*F[1]+A[2]*F[2]+A[3]*F[3]},e.ease=i,e.emitValidationErrors=Fr,e.endsWith=T,e.enforceCacheSizeLimit=function(A){rt(),ze&&ze.then(function(F){F.keys().then(function($){for(var ue=0;ue<$.length-A;ue++)F.delete($[ue])})})},e.evaluateSizeForFeature=ed,e.evaluateSizeForZoom=td,e.evaluateVariableOffset=Ap,e.evented=Oa,e.extend=l,e.featureFilter=zi,e.filterObject=w,e.fromRotation=function(A,F){var $=Math.sin(F),ue=Math.cos(F);return A[0]=ue,A[1]=$,A[2]=0,A[3]=-$,A[4]=ue,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},e.getAnchorAlignment=Jh,e.getAnchorJustification=ad,e.getArrayBuffer=St,e.getImage=cn,e.getJSON=function(A,F){return at(l(A,{type:"json"}),F)},e.getRTLTextPluginStatus=Bo,e.getReferrer=Ct,e.getVideo=function(A,F){var $,ue,xe=self.document.createElement("video");xe.muted=!0,xe.onloadstart=function(){F(null,xe)};for(var Me=0;Me<A.length;Me++){var Re=self.document.createElement("source");$=A[Me],ue=void 0,(ue=self.document.createElement("a")).href=$,(ue.protocol!==self.document.location.protocol||ue.host!==self.document.location.host)&&(xe.crossOrigin="Anonymous"),Re.src=A[Me],xe.appendChild(Re)}return{cancel:function(){}}},e.identity=Yl,e.invert=function(A,F){var $=F[0],ue=F[1],xe=F[2],Me=F[3],Re=F[4],Ze=F[5],st=F[6],yt=F[7],At=F[8],qt=F[9],on=F[10],Qt=F[11],xn=F[12],Pn=F[13],Zn=F[14],Wn=F[15],nr=$*Ze-ue*Re,ir=$*st-xe*Re,ur=$*yt-Me*Re,kr=ue*st-xe*Ze,Pr=ue*yt-Me*Ze,Qr=xe*yt-Me*st,ei=At*Pn-qt*xn,fi=At*Zn-on*xn,Ti=At*Wn-Qt*xn,Ci=qt*Zn-on*Pn,xi=qt*Wn-Qt*Pn,Ni=on*Wn-Qt*Zn,Pi=nr*Ni-ir*xi+ur*Ci+kr*Ti-Pr*fi+Qr*ei;return Pi?(A[0]=(Ze*Ni-st*xi+yt*Ci)*(Pi=1/Pi),A[1]=(xe*xi-ue*Ni-Me*Ci)*Pi,A[2]=(Pn*Qr-Zn*Pr+Wn*kr)*Pi,A[3]=(on*Pr-qt*Qr-Qt*kr)*Pi,A[4]=(st*Ti-Re*Ni-yt*fi)*Pi,A[5]=($*Ni-xe*Ti+Me*fi)*Pi,A[6]=(Zn*ur-xn*Qr-Wn*ir)*Pi,A[7]=(At*Qr-on*ur+Qt*ir)*Pi,A[8]=(Re*xi-Ze*Ti+yt*ei)*Pi,A[9]=(ue*Ti-$*xi-Me*ei)*Pi,A[10]=(xn*Pr-Pn*ur+Wn*nr)*Pi,A[11]=(qt*ur-At*Pr-Qt*nr)*Pi,A[12]=(Ze*fi-Re*Ci-st*ei)*Pi,A[13]=($*Ci-ue*fi+xe*ei)*Pi,A[14]=(Pn*ir-xn*kr-Zn*nr)*Pi,A[15]=(At*kr-qt*ir+on*nr)*Pi,A):null},e.isChar=Vr,e.isMapboxURL=de,e.keysDifference=function(A,F){var $=[];for(var ue in A)ue in F||$.push(ue);return $},e.makeRequest=at,e.mapObject=_,e.mercatorXfromLng=Ip,e.mercatorYfromLat=pd,e.mercatorZfromAltitude=ec,e.mul=Oh,e.multiply=Uu,e.mvt=$l,e.normalize=function(A,F){var $=F[0],ue=F[1],xe=F[2],Me=$*$+ue*ue+xe*xe;return Me>0&&(Me=1/Math.sqrt(Me)),A[0]=F[0]*Me,A[1]=F[1]*Me,A[2]=F[2]*Me,A},e.number=Rr,e.offscreenCanvasSupported=mt,e.ortho=function(A,F,$,ue,xe,Me,Re){var Ze=1/(F-$),st=1/(ue-xe),yt=1/(Me-Re);return A[0]=-2*Ze,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*st,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*yt,A[11]=0,A[12]=(F+$)*Ze,A[13]=(xe+ue)*st,A[14]=(Re+Me)*yt,A[15]=1,A},e.parseGlyphPBF=function(A){return new uf(A).readFields(ag,[])},e.pbf=uf,e.performSymbolLayout=function(A,F,$,ue,xe,Me,Re){A.createArrays(),A.tilePixelRatio=8192/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;var st=A.layers[0].layout,yt=A.layers[0]._unevaluatedLayout._values,At={};if("composite"===A.textSizeData.kind){var qt=A.textSizeData,Qt=qt.maxZoom;At.compositeTextSizes=[yt["text-size"].possiblyEvaluate(new Sa(qt.minZoom),Re),yt["text-size"].possiblyEvaluate(new Sa(Qt),Re)]}if("composite"===A.iconSizeData.kind){var xn=A.iconSizeData,Zn=xn.maxZoom;At.compositeIconSizes=[yt["icon-size"].possiblyEvaluate(new Sa(xn.minZoom),Re),yt["icon-size"].possiblyEvaluate(new Sa(Zn),Re)]}At.layoutTextSize=yt["text-size"].possiblyEvaluate(new Sa(A.zoom+1),Re),At.layoutIconSize=yt["icon-size"].possiblyEvaluate(new Sa(A.zoom+1),Re),At.textMaxSize=yt["text-size"].possiblyEvaluate(new Sa(18));for(var Wn=24*st.get("text-line-height"),nr="map"===st.get("text-rotation-alignment")&&"point"!==st.get("symbol-placement"),ir=st.get("text-keep-upright"),ur=st.get("text-size"),kr=function(){var ei=Qr[Pr],fi=st.get("text-font").evaluate(ei,{},Re).join(","),Ti=ur.evaluate(ei,{},Re),Ci=At.layoutTextSize.evaluate(ei,{},Re),xi=At.layoutIconSize.evaluate(ei,{},Re),Ni={horizontal:{},vertical:void 0},Pi=ei.text,Di=[0,0];if(Pi){var Ba=Pi.toString(),Pa=24*st.get("text-letter-spacing").evaluate(ei,{},Re),Za=function(ma){for(var ja=0,Ho=ma;ja<Ho.length;ja+=1)if(!ia(Ho[ja].charCodeAt(0)))return!1;return!0}(Ba)?Pa:0,Ui=st.get("text-anchor").evaluate(ei,{},Re),Ra=st.get("text-variable-anchor");if(!Ra){var yo=st.get("text-radial-offset").evaluate(ei,{},Re);Di=yo?Ap(Ui,[24*yo,ys]):st.get("text-offset").evaluate(ei,{},Re).map(function(ma){return 24*ma})}var uo=nr?"center":st.get("text-justify").evaluate(ei,{},Re),Mo=st.get("symbol-placement"),co="point"===Mo?24*st.get("text-max-width").evaluate(ei,{},Re):0,os=function(){A.allowVerticalPlacement&&ca(Ba)&&(Ni.vertical=$h(Pi,F,$,xe,fi,co,Wn,Ui,"left",Za,Di,_l.vertical,!0,Mo,Ci,Ti))};if(!nr&&Ra){for(var La="auto"===uo?Ra.map(function(ma){return ad(ma)}):[uo],Cs=!1,xs=0;xs<La.length;xs++){var bs=La[xs];if(!Ni.horizontal[bs])if(Cs)Ni.horizontal[bs]=Ni.horizontal[0];else{var fo=$h(Pi,F,$,xe,fi,co,Wn,"center",bs,Za,Di,_l.horizontal,!1,Mo,Ci,Ti);fo&&(Ni.horizontal[bs]=fo,Cs=1===fo.positionedLines.length)}}os()}else{"auto"===uo&&(uo=ad(Ui));var _s=$h(Pi,F,$,xe,fi,co,Wn,Ui,uo,Za,Di,_l.horizontal,!1,Mo,Ci,Ti);_s&&(Ni.horizontal[uo]=_s),os(),ca(Ba)&&nr&&ir&&(Ni.vertical=$h(Pi,F,$,xe,fi,co,Wn,Ui,uo,Za,Di,_l.vertical,!1,Mo,Ci,Ti))}}var ma,ja,Oo,Ws,ls,Xo=void 0,Is=!1;if(ei.icon&&ei.icon.name){var Jo=ue[ei.icon.name];Jo&&(ma=xe[ei.icon.name],ja=st.get("icon-offset").evaluate(ei,{},Re),Oo=Jh(st.get("icon-anchor").evaluate(ei,{},Re)),Xo={image:ma,top:ls=ja[1]-ma.displaySize[1]*Oo.verticalAlign,bottom:ls+ma.displaySize[1],left:Ws=ja[0]-ma.displaySize[0]*Oo.horizontalAlign,right:Ws+ma.displaySize[0]},Is=Jo.sdf,void 0===A.sdfIcons?A.sdfIcons=Jo.sdf:A.sdfIcons!==Jo.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Jo.pixelRatio!==A.pixelRatio||0!==st.get("icon-rotate").constantOr(1))&&(A.iconsNeedLinear=!0))}var ss=sd(Ni.horizontal)||Ni.vertical;A.iconsInText=!!ss&&ss.iconsInText,(ss||Xo)&&function(ma,ja,Ho,Oo,Ro,So,Ka,qo,Ws,ul,ls){var zs=So.textMaxSize.evaluate(ja,{});void 0===zs&&(zs=Ka);var gu,Ds=ma.layers[0].layout,Ql=Ds.get("icon-offset").evaluate(ja,{},ls),eu=sd(Ho.horizontal),Ll=Ka/24,Fp=ma.tilePixelRatio*Ll,Ns=ma.tilePixelRatio*zs/24,Ic=ma.tilePixelRatio*qo,mu=ma.tilePixelRatio*Ds.get("symbol-spacing"),Qf=Ds.get("text-padding")*ma.tilePixelRatio,xf=Ds.get("icon-padding")*ma.tilePixelRatio,eh=Ds.get("text-max-angle")/180*Math.PI,Lu="map"===Ds.get("text-rotation-alignment")&&"point"!==Ds.get("symbol-placement"),Iu="map"===Ds.get("icon-rotation-alignment")&&"point"!==Ds.get("symbol-placement"),ac=Ds.get("symbol-placement"),Pc=mu/2,Pu=Ds.get("icon-text-fit");Oo&&"none"!==Pu&&(ma.allowVerticalPlacement&&Ho.vertical&&(gu=Qh(Oo,Ho.vertical,Pu,Ds.get("icon-text-fit-padding"),Ql,Ll)),eu&&(Oo=Qh(Oo,eu,Pu,Ds.get("icon-text-fit-padding"),Ql,Ll)));var vu=function(sh,Mf){Mf.x<0||Mf.x>=8192||Mf.y<0||Mf.y>=8192||function(Go,Il,Vp,tu,lh,kf,uc,jl,jc,Vc,Uc,Ru,vd,yd,Af,Up,xd,uh,bd,bg,cl,ch,_d,nu,_g){var wl,cc,fc,Hc,qc,Gc=Go.addToLineVertexArray(Il,Vp),Hp=0,wd=0,qp=0,Gp=0,Td=-1,wa=-1,ru={},Md=qn(""),fh=0,kd=0;if(void 0===jl._unevaluatedLayout.getValue("text-radial-offset")?(fh=(wl=jl.layout.get("text-offset").evaluate(cl,{},nu).map(function(Wc){return 24*Wc}))[0],kd=wl[1]):(fh=24*jl.layout.get("text-radial-offset").evaluate(cl,{},nu),kd=ys),Go.allowVerticalPlacement&&tu.vertical){var Yp=jl.layout.get("text-rotate").evaluate(cl,{},nu)+90;Hc=new Wf(jc,Il,Vc,Uc,Ru,tu.vertical,vd,yd,Af,Yp),uc&&(qc=new Wf(jc,Il,Vc,Uc,Ru,uc,xd,uh,Af,Yp))}if(lh){var Ad=jl.layout.get("icon-rotate").evaluate(cl,{}),Ed="none"!==jl.layout.get("icon-text-fit"),Zp=dg(lh,Ad,_d,Ed),Sd=uc?dg(uc,Ad,_d,Ed):void 0;fc=new Wf(jc,Il,Vc,Uc,Ru,lh,xd,uh,!1,Ad),Hp=4*Zp.length;var wg=Go.iconSizeData,Yc=null;"source"===wg.kind?(Yc=[128*jl.layout.get("icon-size").evaluate(cl,{})])[0]>32640&&S(Go.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===wg.kind&&((Yc=[128*ch.compositeIconSizes[0].evaluate(cl,{},nu),128*ch.compositeIconSizes[1].evaluate(cl,{},nu)])[0]>32640||Yc[1]>32640)&&S(Go.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Go.addSymbols(Go.icon,Zp,Yc,bg,bd,cl,!1,Il,Gc.lineStartIndex,Gc.lineLength,-1,nu),Td=Go.icon.placedSymbolArray.length-1,Sd&&(wd=4*Sd.length,Go.addSymbols(Go.icon,Sd,Yc,bg,bd,cl,_l.vertical,Il,Gc.lineStartIndex,Gc.lineLength,-1,nu),wa=Go.icon.placedSymbolArray.length-1)}for(var Cd in tu.horizontal){var Pl=tu.horizontal[Cd];if(!cc){Md=qn(Pl.text);var Tg=jl.layout.get("text-rotate").evaluate(cl,{},nu);cc=new Wf(jc,Il,Vc,Uc,Ru,Pl,vd,yd,Af,Tg)}var hh=1===Pl.positionedLines.length;if(qp+=od(Go,Il,Pl,kf,jl,Af,cl,Up,Gc,tu.vertical?_l.horizontal:_l.horizontalOnly,hh?Object.keys(tu.horizontal):[Cd],ru,Td,ch,nu),hh)break}tu.vertical&&(Gp+=od(Go,Il,tu.vertical,kf,jl,Af,cl,Up,Gc,_l.vertical,["vertical"],ru,wa,ch,nu));var Dd=cc?cc.boxStartIndex:Go.collisionBoxArray.length,Mg=cc?cc.boxEndIndex:Go.collisionBoxArray.length,kv=Hc?Hc.boxStartIndex:Go.collisionBoxArray.length,Av=Hc?Hc.boxEndIndex:Go.collisionBoxArray.length,Ev=fc?fc.boxStartIndex:Go.collisionBoxArray.length,kg=fc?fc.boxEndIndex:Go.collisionBoxArray.length,Xp=qc?qc.boxStartIndex:Go.collisionBoxArray.length,Sv=qc?qc.boxEndIndex:Go.collisionBoxArray.length,iu=-1,xu=function(Wc,Ef){return Wc&&Wc.circleDiameter?Math.max(Wc.circleDiameter,Ef):Ef};iu=xu(cc,iu),iu=xu(Hc,iu),iu=xu(fc,iu);var $p=(iu=xu(qc,iu))>-1?1:0;$p&&(iu*=_g/24),Go.glyphOffsetArray.length>=eo.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==cl.sortKey&&Go.addToSortKeyRanges(Go.symbolInstances.length,cl.sortKey),Go.symbolInstances.emplaceBack(Il.x,Il.y,ru.right>=0?ru.right:-1,ru.center>=0?ru.center:-1,ru.left>=0?ru.left:-1,ru.vertical||-1,Td,wa,Md,Dd,Mg,kv,Av,Ev,kg,Xp,Sv,Vc,qp,Gp,Hp,wd,$p,0,vd,fh,kd,iu)}(ma,Mf,sh,Ho,Oo,Ro,gu,ma.layers[0],ma.collisionBoxArray,ja.index,ja.sourceLayerIndex,ma.index,Fp,Qf,Lu,Ws,Ic,xf,Iu,Ql,ja,So,ul,ls,Ka)};if("line"===ac)for(var th=0,yu=hg(ja.geometry,0,0,8192,8192);th<yu.length;th+=1)for(var Oc=yu[th],_f=0,Rc=rd(Oc,mu,eh,Ho.vertical||eu,Oo,24,Ns,ma.overscaling,8192);_f<Rc.length;_f+=1){var wf=Rc[_f];eu&&gg(ma,eu.text,Pc,wf)||vu(Oc,wf)}else if("line-center"===ac)for(var Tf=0,rh=ja.geometry;Tf<rh.length;Tf+=1){var Fc=rh[Tf];if(Fc.length>1){var zc=nd(Fc,eh,Ho.vertical||eu,Oo,24,Ns);zc&&vu(Fc,zc)}}else if("Polygon"===ja.type)for(var oc=0,Nc=rf(ja.geometry,0);oc<Nc.length;oc+=1){var sc=Nc[oc],lc=pg(sc,16);vu(sc[0],new ll(lc.x,lc.y,0))}else if("LineString"===ja.type)for(var Bc=0,zp=ja.geometry;Bc<zp.length;Bc+=1){var ih=zp[Bc];vu(ih,new ll(ih[0].x,ih[0].y,0))}else if("Point"===ja.type)for(var ah=0,Ou=ja.geometry;ah<Ou.length;ah+=1)for(var oh=0,Bp=Ou[ah];oh<Bp.length;oh+=1){var jp=Bp[oh];vu([jp],new ll(jp.x,jp.y,0))}}(A,ei,Ni,Xo,ue,At,Ci,xi,Di,Is,Re)},Pr=0,Qr=A.features;Pr<Qr.length;Pr+=1)kr();Me&&A.generateCollisionDebugBuffers()},e.perspective=function(A,F,$,ue,xe){var Me,Re=1/Math.tan(F/2);return A[0]=Re/$,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Re,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,null!=xe&&xe!==1/0?(A[10]=(xe+ue)*(Me=1/(ue-xe)),A[14]=2*xe*ue*Me):(A[10]=-1,A[14]=-2*ue),A},e.pick=function(A,F){for(var $={},ue=0;ue<F.length;ue++){var xe=F[ue];xe in A&&($[xe]=A[xe])}return $},e.plugin=ps,e.polygonIntersectsPolygon=js,e.postMapLoadEvent=Ue,e.postTurnstileEvent=De,e.potpack=xp,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=dr,e.registerForPluginStateChange=function(A){return A({pluginStatus:Ri,pluginURL:mo}),Oa.on("pluginStateChange",A),A},e.rotate=function(A,F,$){var ue=F[0],xe=F[1],Me=F[2],Re=F[3],Ze=Math.sin($),st=Math.cos($);return A[0]=ue*st+Me*Ze,A[1]=xe*st+Re*Ze,A[2]=ue*-Ze+Me*st,A[3]=xe*-Ze+Re*st,A},e.rotateX=function(A,F,$){var ue=Math.sin($),xe=Math.cos($),Me=F[4],Re=F[5],Ze=F[6],st=F[7],yt=F[8],At=F[9],qt=F[10],on=F[11];return F!==A&&(A[0]=F[0],A[1]=F[1],A[2]=F[2],A[3]=F[3],A[12]=F[12],A[13]=F[13],A[14]=F[14],A[15]=F[15]),A[4]=Me*xe+yt*ue,A[5]=Re*xe+At*ue,A[6]=Ze*xe+qt*ue,A[7]=st*xe+on*ue,A[8]=yt*xe-Me*ue,A[9]=At*xe-Re*ue,A[10]=qt*xe-Ze*ue,A[11]=on*xe-st*ue,A},e.rotateZ=function(A,F,$){var ue=Math.sin($),xe=Math.cos($),Me=F[0],Re=F[1],Ze=F[2],st=F[3],yt=F[4],At=F[5],qt=F[6],on=F[7];return F!==A&&(A[8]=F[8],A[9]=F[9],A[10]=F[10],A[11]=F[11],A[12]=F[12],A[13]=F[13],A[14]=F[14],A[15]=F[15]),A[0]=Me*xe+yt*ue,A[1]=Re*xe+At*ue,A[2]=Ze*xe+qt*ue,A[3]=st*xe+on*ue,A[4]=yt*xe-Me*ue,A[5]=At*xe-Re*ue,A[6]=qt*xe-Ze*ue,A[7]=on*xe-st*ue,A},e.scale=function(A,F,$){var ue=$[0],xe=$[1],Me=$[2];return A[0]=F[0]*ue,A[1]=F[1]*ue,A[2]=F[2]*ue,A[3]=F[3]*ue,A[4]=F[4]*xe,A[5]=F[5]*xe,A[6]=F[6]*xe,A[7]=F[7]*xe,A[8]=F[8]*Me,A[9]=F[9]*Me,A[10]=F[10]*Me,A[11]=F[11]*Me,A[12]=F[12],A[13]=F[13],A[14]=F[14],A[15]=F[15],A},e.scale$1=function(A,F,$){return A[0]=F[0]*$,A[1]=F[1]*$,A[2]=F[2]*$,A[3]=F[3]*$,A},e.scale$2=function(A,F,$){return A[0]=F[0]*$,A[1]=F[1]*$,A[2]=F[2]*$,A},e.setCacheLimits=function(A,F){qe=A,je=F},e.setRTLTextPlugin=function(A,F,$){if(void 0===$&&($=!1),Ri===qa||Ri===ka||Ri===Ks)throw new Error("setRTLTextPlugin cannot be called multiple times.");mo=V.resolveURL(A),Ri=qa,$o=F,Aa(),$||Na()},e.sphericalToCartesian=function(A){var F=A[0],$=A[1],ue=A[2];return $+=90,$*=Math.PI/180,ue*=Math.PI/180,{x:F*Math.cos($)*Math.sin(ue),y:F*Math.sin($)*Math.sin(ue),z:F*Math.cos(ue)}},e.sqrLen=function(A){var F=A[0],$=A[1];return F*F+$*$},e.styleSpec=ke,e.sub=function(A,F,$){return A[0]=F[0]-$[0],A[1]=F[1]-$[1],A[2]=F[2]-$[2],A},e.symbolSize=Mp,e.transformMat3=function(A,F,$){var ue=F[0],xe=F[1],Me=F[2];return A[0]=ue*$[0]+xe*$[3]+Me*$[6],A[1]=ue*$[1]+xe*$[4]+Me*$[7],A[2]=ue*$[2]+xe*$[5]+Me*$[8],A},e.transformMat4=Wl,e.translate=function(A,F,$){var ue,xe,Me,Re,Ze,st,yt,At,qt,on,Qt,xn,Pn=$[0],Zn=$[1],Wn=$[2];return F===A?(A[12]=F[0]*Pn+F[4]*Zn+F[8]*Wn+F[12],A[13]=F[1]*Pn+F[5]*Zn+F[9]*Wn+F[13],A[14]=F[2]*Pn+F[6]*Zn+F[10]*Wn+F[14],A[15]=F[3]*Pn+F[7]*Zn+F[11]*Wn+F[15]):(xe=F[1],Me=F[2],Re=F[3],Ze=F[4],st=F[5],yt=F[6],At=F[7],qt=F[8],on=F[9],Qt=F[10],xn=F[11],A[0]=ue=F[0],A[1]=xe,A[2]=Me,A[3]=Re,A[4]=Ze,A[5]=st,A[6]=yt,A[7]=At,A[8]=qt,A[9]=on,A[10]=Qt,A[11]=xn,A[12]=ue*Pn+Ze*Zn+qt*Wn+F[12],A[13]=xe*Pn+st*Zn+on*Wn+F[13],A[14]=Me*Pn+yt*Zn+Qt*Wn+F[14],A[15]=Re*Pn+At*Zn+xn*Wn+F[15]),A},e.triggerPluginCompletionEvent=rs,e.uniqueId=d,e.validateCustomStyleLayer=function(A){var F=[],$=A.id;return void 0===$&&F.push({message:"layers."+$+': missing required property "id"'}),void 0===A.render&&F.push({message:"layers."+$+': missing required method "render"'}),A.renderingMode&&"2d"!==A.renderingMode&&"3d"!==A.renderingMode&&F.push({message:"layers."+$+': property "renderingMode" must be either "2d" or "3d"'}),F},e.validateLight=Mr,e.validateStyle=fr,e.values=function(A){var F=[];for(var $ in A)F.push(A[$]);return F},e.vectorTile=$l,e.version="1.10.1",e.warnOnce=S,e.webpSupported=ie,e.window=self,e.wrap=c}),y(0,function(e){function r(Xe){var tt=typeof Xe;if("number"===tt||"boolean"===tt||"string"===tt||null==Xe)return JSON.stringify(Xe);if(Array.isArray(Xe)){for(var ye="[",ke=0,Ve=Xe;ke<Ve.length;ke+=1)ye+=r(Ve[ke])+",";return ye+"]"}for(var Je=Object.keys(Xe).sort(),nt="{",Ke=0;Ke<Je.length;Ke++)nt+=JSON.stringify(Je[Ke])+":"+r(Xe[Je[Ke]])+",";return nt+"}"}function n(Xe){for(var tt="",ye=0,ke=e.refProperties;ye<ke.length;ye+=1)tt+="/"+r(Xe[ke[ye]]);return tt}var a=function(Xe){this.keyCache={},Xe&&this.replace(Xe)};a.prototype.replace=function(Xe){this._layerConfigs={},this._layers={},this.update(Xe,[])},a.prototype.update=function(Xe,tt){for(var ye=this,ke=0,Ve=Xe;ke<Ve.length;ke+=1){var Je=Ve[ke];this._layerConfigs[Je.id]=Je;var nt=this._layers[Je.id]=e.createStyleLayer(Je);nt._featureFilter=e.featureFilter(nt.filter),this.keyCache[Je.id]&&delete this.keyCache[Je.id]}for(var Ke=0,vt=tt;Ke<vt.length;Ke+=1){var gt=vt[Ke];delete this.keyCache[gt],delete this._layerConfigs[gt],delete this._layers[gt]}this.familiesBySource={};for(var Ot=0,Vt=function(et,dt){for(var xt={},Rt=0;Rt<et.length;Rt++){var Yt=dt&&dt[et[Rt].id]||n(et[Rt]);dt&&(dt[et[Rt].id]=Yt);var nn=xt[Yt];nn||(nn=xt[Yt]=[]),nn.push(et[Rt])}var Kt=[];for(var Mn in xt)Kt.push(xt[Mn]);return Kt}(e.values(this._layerConfigs),this.keyCache);Ot<Vt.length;Ot+=1){var ft=Vt[Ot].map(function(et){return ye._layers[et.id]}),bt=ft[0];if("none"!==bt.visibility){var Wt=bt.source||"",Pt=this.familiesBySource[Wt];Pt||(Pt=this.familiesBySource[Wt]={});var Bt=bt.sourceLayer||"_geojsonTileLayer",Pe=Pt[Bt];Pe||(Pe=Pt[Bt]=[]),Pe.push(ft)}}};var t=function(Xe){var tt={},ye=[];for(var ke in Xe){var Ve=Xe[ke],Je=tt[ke]={};for(var nt in Ve){var Ke=Ve[+nt];if(Ke&&0!==Ke.bitmap.width&&0!==Ke.bitmap.height){var vt={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};ye.push(vt),Je[nt]={rect:vt,metrics:Ke.metrics}}}}var gt=e.potpack(ye),ft=new e.AlphaImage({width:gt.w||1,height:gt.h||1});for(var bt in Xe){var Wt=Xe[bt];for(var Pt in Wt){var Bt=Wt[+Pt];if(Bt&&0!==Bt.bitmap.width&&0!==Bt.bitmap.height){var Pe=tt[bt][Pt].rect;e.AlphaImage.copy(Bt.bitmap,ft,{x:0,y:0},{x:Pe.x+1,y:Pe.y+1},Bt.bitmap)}}}this.image=ft,this.positions=tt};e.register("GlyphAtlas",t);var p=function(Xe){this.tileID=new e.OverscaledTileID(Xe.tileID.overscaledZ,Xe.tileID.wrap,Xe.tileID.canonical.z,Xe.tileID.canonical.x,Xe.tileID.canonical.y),this.uid=Xe.uid,this.zoom=Xe.zoom,this.pixelRatio=Xe.pixelRatio,this.tileSize=Xe.tileSize,this.source=Xe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Xe.showCollisionBoxes,this.collectResourceTiming=!!Xe.collectResourceTiming,this.returnDependencies=!!Xe.returnDependencies,this.promoteId=Xe.promoteId};function s(Xe,tt,ye){for(var ke=new e.EvaluationParameters(tt),Ve=0,Je=Xe;Ve<Je.length;Ve+=1)Je[Ve].recalculate(ke,ye)}function i(Xe,tt){var ye=e.getArrayBuffer(Xe.request,function(ke,Ve,Je,nt){ke?tt(ke):Ve&&tt(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ve)),rawData:Ve,cacheControl:Je,expires:nt})});return function(){ye.cancel(),tt()}}p.prototype.parse=function(Xe,tt,ye,ke,Ve){var Je=this;this.status="parsing",this.data=Xe,this.collisionBoxArray=new e.CollisionBoxArray;var nt=new e.DictionaryCoder(Object.keys(Xe.layers).sort()),Ke=new e.FeatureIndex(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];var vt,gt,Ot,Vt,ft={},bt={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},Wt=tt.familiesBySource[this.source];for(var Pt in Wt){var Bt=Xe.layers[Pt];if(Bt){1===Bt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Pt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pe=nt.encode(Pt),et=[],dt=0;dt<Bt.length;dt++){var xt=Bt.feature(dt),Rt=Ke.getId(xt,Pt);et.push({feature:xt,id:Rt,index:dt,sourceLayerIndex:Pe})}for(var Yt=0,nn=Wt[Pt];Yt<nn.length;Yt+=1){var Kt=nn[Yt],Mn=Kt[0];Mn.minzoom&&this.zoom<Math.floor(Mn.minzoom)||Mn.maxzoom&&this.zoom>=Mn.maxzoom||"none"!==Mn.visibility&&(s(Kt,this.zoom,ye),(ft[Mn.id]=Mn.createBucket({index:Ke.bucketLayerIDs.length,layers:Kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pe,sourceID:this.source})).populate(et,bt,this.tileID.canonical),Ke.bucketLayerIDs.push(Kt.map(function(fn){return fn.id})))}}}var Un=e.mapObject(bt.glyphDependencies,function(fn){return Object.keys(fn).map(Number)});Object.keys(Un).length?ke.send("getGlyphs",{uid:this.uid,stacks:Un},function(fn,pn){vt||(vt=fn,gt=pn,an.call(Je))}):gt={};var Tn=Object.keys(bt.iconDependencies);Tn.length?ke.send("getImages",{icons:Tn,source:this.source,tileID:this.tileID,type:"icons"},function(fn,pn){vt||(vt=fn,Ot=pn,an.call(Je))}):Ot={};var un=Object.keys(bt.patternDependencies);function an(){if(vt)return Ve(vt);if(gt&&Ot&&Vt){var fn=new t(gt),pn=new e.ImageAtlas(Ot,Vt);for(var Sn in ft){var Nn=ft[Sn];Nn instanceof e.SymbolBucket?(s(Nn.layers,this.zoom,ye),e.performSymbolLayout(Nn,gt,fn.positions,Ot,pn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Nn.hasPattern&&(Nn instanceof e.LineBucket||Nn instanceof e.FillBucket||Nn instanceof e.FillExtrusionBucket)&&(s(Nn.layers,this.zoom,ye),Nn.addFeatures(bt,this.tileID.canonical,pn.patternPositions))}this.status="done",Ve(null,{buckets:e.values(ft).filter(function(Kn){return!Kn.isEmpty()}),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fn.image,imageAtlas:pn,glyphMap:this.returnDependencies?gt:null,iconMap:this.returnDependencies?Ot:null,glyphPositions:this.returnDependencies?fn.positions:null})}}un.length?ke.send("getImages",{icons:un,source:this.source,tileID:this.tileID,type:"patterns"},function(fn,pn){vt||(vt=fn,Vt=pn,an.call(Je))}):Vt={},an.call(this)};var f=function(Xe,tt,ye,ke){this.actor=Xe,this.layerIndex=tt,this.availableImages=ye,this.loadVectorData=ke||i,this.loading={},this.loaded={}};f.prototype.loadTile=function(Xe,tt){var ye=this,ke=Xe.uid;this.loading||(this.loading={});var Ve=!!(Xe&&Xe.request&&Xe.request.collectResourceTiming)&&new e.RequestPerformance(Xe.request),Je=this.loading[ke]=new p(Xe);Je.abort=this.loadVectorData(Xe,function(nt,Ke){if(delete ye.loading[ke],nt||!Ke)return Je.status="done",ye.loaded[ke]=Je,tt(nt);var vt=Ke.rawData,gt={};Ke.expires&&(gt.expires=Ke.expires),Ke.cacheControl&&(gt.cacheControl=Ke.cacheControl);var Ot={};if(Ve){var Vt=Ve.finish();Vt&&(Ot.resourceTiming=JSON.parse(JSON.stringify(Vt)))}Je.vectorTile=Ke.vectorTile,Je.parse(Ke.vectorTile,ye.layerIndex,ye.availableImages,ye.actor,function(ft,bt){if(ft||!bt)return tt(ft);tt(null,e.extend({rawTileData:vt.slice(0)},bt,gt,Ot))}),ye.loaded=ye.loaded||{},ye.loaded[ke]=Je})},f.prototype.reloadTile=function(Xe,tt){var ye=this,ke=this.loaded,Ve=Xe.uid,Je=this;if(ke&&ke[Ve]){var nt=ke[Ve];nt.showCollisionBoxes=Xe.showCollisionBoxes;var Ke=function(vt,gt){var Ot=nt.reloadCallback;Ot&&(delete nt.reloadCallback,nt.parse(nt.vectorTile,Je.layerIndex,ye.availableImages,Je.actor,Ot)),tt(vt,gt)};"parsing"===nt.status?nt.reloadCallback=Ke:"done"===nt.status&&(nt.vectorTile?nt.parse(nt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}},f.prototype.abortTile=function(Xe,tt){var ye=this.loading,ke=Xe.uid;ye&&ye[ke]&&ye[ke].abort&&(ye[ke].abort(),delete ye[ke]),tt()},f.prototype.removeTile=function(Xe,tt){var ye=this.loaded,ke=Xe.uid;ye&&ye[ke]&&delete ye[ke],tt()};var c=e.window.ImageBitmap,l=function(){this.loaded={}};l.prototype.loadTile=function(Xe,tt){var ye=Xe.uid,ke=Xe.encoding,Ve=Xe.rawImageData,Je=c&&Ve instanceof c?this.getImageData(Ve):Ve,nt=new e.DEMData(ye,Je,ke);this.loaded=this.loaded||{},this.loaded[ye]=nt,tt(null,nt)},l.prototype.getImageData=function(Xe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Xe.width,Xe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Xe.width,this.offscreenCanvas.height=Xe.height,this.offscreenCanvasContext.drawImage(Xe,0,0,Xe.width,Xe.height);var tt=this.offscreenCanvasContext.getImageData(-1,-1,Xe.width+2,Xe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:tt.width,height:tt.height},tt.data)},l.prototype.removeTile=function(Xe){var tt=this.loaded,ye=Xe.uid;tt&&tt[ye]&&delete tt[ye]};var h=function Xe(tt,ye){var ke,Ve=tt&&tt.type;if("FeatureCollection"===Ve)for(ke=0;ke<tt.features.length;ke++)Xe(tt.features[ke],ye);else if("GeometryCollection"===Ve)for(ke=0;ke<tt.geometries.length;ke++)Xe(tt.geometries[ke],ye);else if("Feature"===Ve)Xe(tt.geometry,ye);else if("Polygon"===Ve)d(tt.coordinates,ye);else if("MultiPolygon"===Ve)for(ke=0;ke<tt.coordinates.length;ke++)d(tt.coordinates[ke],ye);return tt};function d(Xe,tt){if(0!==Xe.length){o(Xe[0],tt);for(var ye=1;ye<Xe.length;ye++)o(Xe[ye],!tt)}}function o(Xe,tt){for(var ye=0,ke=0,Ve=Xe.length,Je=Ve-1;ke<Ve;Je=ke++)ye+=(Xe[ke][0]-Xe[Je][0])*(Xe[Je][1]+Xe[ke][1]);ye>=0!=!!tt&&Xe.reverse()}var x=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,u=function(Xe){this._feature=Xe,this.extent=e.EXTENT,this.type=Xe.type,this.properties=Xe.tags,"id"in Xe&&!isNaN(Xe.id)&&(this.id=parseInt(Xe.id,10))};u.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Xe=[],tt=0,ye=this._feature.geometry;tt<ye.length;tt+=1){var ke=ye[tt];Xe.push([new e.Point$1(ke[0],ke[1])])}return Xe}for(var Ve=[],Je=0,nt=this._feature.geometry;Je<nt.length;Je+=1){for(var Ke=[],vt=0,gt=nt[Je];vt<gt.length;vt+=1){var Ot=gt[vt];Ke.push(new e.Point$1(Ot[0],Ot[1]))}Ve.push(Ke)}return Ve},u.prototype.toGeoJSON=function(Xe,tt,ye){return x.call(this,Xe,tt,ye)};var T=function(Xe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Xe.length,this._features=Xe};T.prototype.feature=function(Xe){return new u(this._features[Xe])};var _=e.vectorTile.VectorTileFeature,w=M;function M(Xe,tt){this.options=tt||{},this.features=Xe,this.length=Xe.length}function I(Xe,tt){this.id="number"==typeof Xe.id?Xe.id:void 0,this.type=Xe.type,this.rawGeometry=1===Xe.type?[Xe.geometry]:Xe.geometry,this.properties=Xe.tags,this.extent=tt||4096}M.prototype.feature=function(Xe){return new I(this.features[Xe],this.options.extent)},I.prototype.loadGeometry=function(){var Xe=this.rawGeometry;this.geometry=[];for(var tt=0;tt<Xe.length;tt++){for(var ye=Xe[tt],ke=[],Ve=0;Ve<ye.length;Ve++)ke.push(new e.Point$1(ye[Ve][0],ye[Ve][1]));this.geometry.push(ke)}return this.geometry},I.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Xe=this.geometry,tt=1/0,ye=-1/0,ke=1/0,Ve=-1/0,Je=0;Je<Xe.length;Je++)for(var nt=Xe[Je],Ke=0;Ke<nt.length;Ke++){var vt=nt[Ke];tt=Math.min(tt,vt.x),ye=Math.max(ye,vt.x),ke=Math.min(ke,vt.y),Ve=Math.max(Ve,vt.y)}return[tt,ke,ye,Ve]},I.prototype.toGeoJSON=_.prototype.toGeoJSON;var S=D,C=w;function D(Xe){var tt=new e.pbf;return function(ye,ke){for(var Ve in ye.layers)ke.writeMessage(3,B,ye.layers[Ve])}(Xe,tt),tt.finish()}function B(Xe,tt){var ye;tt.writeVarintField(15,Xe.version||1),tt.writeStringField(1,Xe.name||""),tt.writeVarintField(5,Xe.extent||4096);var ke={keys:[],values:[],keycache:{},valuecache:{}};for(ye=0;ye<Xe.length;ye++)ke.feature=Xe.feature(ye),tt.writeMessage(2,z,ke);var Ve=ke.keys;for(ye=0;ye<Ve.length;ye++)tt.writeStringField(3,Ve[ye]);var Je=ke.values;for(ye=0;ye<Je.length;ye++)tt.writeMessage(4,X,Je[ye])}function z(Xe,tt){var ye=Xe.feature;void 0!==ye.id&&tt.writeVarintField(1,ye.id),tt.writeMessage(2,Y,Xe),tt.writeVarintField(3,ye.type),tt.writeMessage(4,te,ye)}function Y(Xe,tt){var ye=Xe.feature,ke=Xe.keys,Ve=Xe.values,Je=Xe.keycache,nt=Xe.valuecache;for(var Ke in ye.properties){var vt=Je[Ke];void 0===vt&&(ke.push(Ke),Je[Ke]=vt=ke.length-1),tt.writeVarint(vt);var gt=ye.properties[Ke],Ot=typeof gt;"string"!==Ot&&"boolean"!==Ot&&"number"!==Ot&&(gt=JSON.stringify(gt));var Vt=Ot+":"+gt,ft=nt[Vt];void 0===ft&&(Ve.push(gt),nt[Vt]=ft=Ve.length-1),tt.writeVarint(ft)}}function G(Xe,tt){return(tt<<3)+(7&Xe)}function J(Xe){return Xe<<1^Xe>>31}function te(Xe,tt){for(var ye=Xe.loadGeometry(),ke=Xe.type,Ve=0,Je=0,nt=ye.length,Ke=0;Ke<nt;Ke++){var vt=ye[Ke],gt=1;1===ke&&(gt=vt.length),tt.writeVarint(G(1,gt));for(var Ot=3===ke?vt.length-1:vt.length,Vt=0;Vt<Ot;Vt++){1===Vt&&1!==ke&&tt.writeVarint(G(2,Ot-1));var ft=vt[Vt].x-Ve,bt=vt[Vt].y-Je;tt.writeVarint(J(ft)),tt.writeVarint(J(bt)),Ve+=ft,Je+=bt}3===ke&&tt.writeVarint(G(7,1))}}function X(Xe,tt){var ye=typeof Xe;"string"===ye?tt.writeStringField(1,Xe):"boolean"===ye?tt.writeBooleanField(7,Xe):"number"===ye&&(Xe%1!=0?tt.writeDoubleField(3,Xe):Xe<0?tt.writeSVarintField(6,Xe):tt.writeVarintField(5,Xe))}function K(Xe,tt,ye,ke,Ve,Je){if(!(Ve-ke<=ye)){var nt=ke+Ve>>1;(function Ke(vt,gt,Ot,Vt,ft,bt){for(;ft>Vt;){if(ft-Vt>600){var Wt=ft-Vt+1,Pt=Ot-Vt+1,Bt=Math.log(Wt),Pe=.5*Math.exp(2*Bt/3),et=.5*Math.sqrt(Bt*Pe*(Wt-Pe)/Wt)*(Pt-Wt/2<0?-1:1);Ke(vt,gt,Ot,Math.max(Vt,Math.floor(Ot-Pt*Pe/Wt+et)),Math.min(ft,Math.floor(Ot+(Wt-Pt)*Pe/Wt+et)),bt)}var Rt=gt[2*Ot+bt],Yt=Vt,nn=ft;for(ae(vt,gt,Vt,Ot),gt[2*ft+bt]>Rt&&ae(vt,gt,Vt,ft);Yt<nn;){for(ae(vt,gt,Yt,nn),Yt++,nn--;gt[2*Yt+bt]<Rt;)Yt++;for(;gt[2*nn+bt]>Rt;)nn--}gt[2*Vt+bt]===Rt?ae(vt,gt,Vt,nn):ae(vt,gt,++nn,ft),nn<=Ot&&(Vt=nn+1),Ot<=nn&&(ft=nn-1)}})(Xe,tt,nt,ke,Ve,Je%2),K(Xe,tt,ye,ke,nt-1,Je+1),K(Xe,tt,ye,nt+1,Ve,Je+1)}}function ae(Xe,tt,ye,ke){U(Xe,ye,ke),U(tt,2*ye,2*ke),U(tt,2*ye+1,2*ke+1)}function U(Xe,tt,ye){var ke=Xe[tt];Xe[tt]=Xe[ye],Xe[ye]=ke}function V(Xe,tt,ye,ke){var Ve=Xe-ye,Je=tt-ke;return Ve*Ve+Je*Je}S.fromVectorTileJs=D,S.fromGeojsonVt=function(Xe,tt){tt=tt||{};var ye={};for(var ke in Xe)ye[ke]=new w(Xe[ke].features,tt),ye[ke].name=ke,ye[ke].version=tt.version,ye[ke].extent=tt.extent;return D({layers:ye})},S.GeoJSONWrapper=C;var q=function(Xe){return Xe[0]},ie=function(Xe){return Xe[1]},H=function(Xe,tt,ye,ke,Ve){void 0===tt&&(tt=q),void 0===ye&&(ye=ie),void 0===ke&&(ke=64),void 0===Ve&&(Ve=Float64Array),this.nodeSize=ke,this.points=Xe;for(var Je=Xe.length<65536?Uint16Array:Uint32Array,nt=this.ids=new Je(Xe.length),Ke=this.coords=new Ve(2*Xe.length),vt=0;vt<Xe.length;vt++)nt[vt]=vt,Ke[2*vt]=tt(Xe[vt]),Ke[2*vt+1]=ye(Xe[vt]);K(nt,Ke,ke,0,nt.length-1,0)};H.prototype.range=function(Xe,tt,ye,ke){return function(Ve,Je,nt,Ke,vt,gt,Ot){for(var Vt,ft,bt=[0,Ve.length-1,0],Wt=[];bt.length;){var Pt=bt.pop(),Bt=bt.pop(),Pe=bt.pop();if(Bt-Pe<=Ot)for(var et=Pe;et<=Bt;et++)ft=Je[2*et+1],(Vt=Je[2*et])>=nt&&Vt<=vt&&ft>=Ke&&ft<=gt&&Wt.push(Ve[et]);else{var dt=Math.floor((Pe+Bt)/2);ft=Je[2*dt+1],(Vt=Je[2*dt])>=nt&&Vt<=vt&&ft>=Ke&&ft<=gt&&Wt.push(Ve[dt]);var xt=(Pt+1)%2;(0===Pt?nt<=Vt:Ke<=ft)&&(bt.push(Pe),bt.push(dt-1),bt.push(xt)),(0===Pt?vt>=Vt:gt>=ft)&&(bt.push(dt+1),bt.push(Bt),bt.push(xt))}}return Wt}(this.ids,this.coords,Xe,tt,ye,ke,this.nodeSize)},H.prototype.within=function(Xe,tt,ye){return function(ke,Ve,Je,nt,Ke,vt){for(var gt=[0,ke.length-1,0],Ot=[],Vt=Ke*Ke;gt.length;){var ft=gt.pop(),bt=gt.pop(),Wt=gt.pop();if(bt-Wt<=vt)for(var Pt=Wt;Pt<=bt;Pt++)V(Ve[2*Pt],Ve[2*Pt+1],Je,nt)<=Vt&&Ot.push(ke[Pt]);else{var Bt=Math.floor((Wt+bt)/2),Pe=Ve[2*Bt],et=Ve[2*Bt+1];V(Pe,et,Je,nt)<=Vt&&Ot.push(ke[Bt]);var dt=(ft+1)%2;(0===ft?Je-Ke<=Pe:nt-Ke<=et)&&(gt.push(Wt),gt.push(Bt-1),gt.push(dt)),(0===ft?Je+Ke>=Pe:nt+Ke>=et)&&(gt.push(Bt+1),gt.push(bt),gt.push(dt))}}return Ot}(this.ids,this.coords,Xe,tt,ye,this.nodeSize)};var ee={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Xe){return Xe}},Q=function(Xe){this.options=_e(Object.create(ee),Xe),this.trees=new Array(this.options.maxZoom+1)};function oe(Xe,tt,ye,ke,Ve){return{x:Xe,y:tt,zoom:1/0,id:ye,parentId:-1,numPoints:ke,properties:Ve}}function le(Xe,tt){var ye=Xe.geometry.coordinates,Ve=ye[1];return{x:be(ye[0]),y:he(Ve),zoom:1/0,index:tt,parentId:-1}}function de(Xe){return{type:"Feature",id:Xe.id,properties:fe(Xe),geometry:{type:"Point",coordinates:[(ke=Xe.x,360*(ke-.5)),(tt=Xe.y,ye=(180-360*tt)*Math.PI/180,360*Math.atan(Math.exp(ye))/Math.PI-90)]}};var tt,ye,ke}function fe(Xe){var tt=Xe.numPoints,ye=tt>=1e4?Math.round(tt/1e3)+"k":tt>=1e3?Math.round(tt/100)/10+"k":tt;return _e(_e({},Xe.properties),{cluster:!0,cluster_id:Xe.id,point_count:tt,point_count_abbreviated:ye})}function be(Xe){return Xe/360+.5}function he(Xe){var tt=Math.sin(Xe*Math.PI/180),ye=.5-.25*Math.log((1+tt)/(1-tt))/Math.PI;return ye<0?0:ye>1?1:ye}function _e(Xe,tt){for(var ye in tt)Xe[ye]=tt[ye];return Xe}function Ce(Xe){return Xe.x}function Ee(Xe){return Xe.y}function Ae(Xe,tt,ye,ke,Ve,Je){var nt=Ve-ye,Ke=Je-ke;if(0!==nt||0!==Ke){var vt=((Xe-ye)*nt+(tt-ke)*Ke)/(nt*nt+Ke*Ke);vt>1?(ye=Ve,ke=Je):vt>0&&(ye+=nt*vt,ke+=Ke*vt)}return(nt=Xe-ye)*nt+(Ke=tt-ke)*Ke}function ze(Xe,tt,ye,ke){var Ve={id:void 0===Xe?null:Xe,type:tt,geometry:ye,tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Je){var nt=Je.geometry,Ke=Je.type;if("Point"===Ke||"MultiPoint"===Ke||"LineString"===Ke)ve(Je,nt);else if("Polygon"===Ke||"MultiLineString"===Ke)for(var vt=0;vt<nt.length;vt++)ve(Je,nt[vt]);else if("MultiPolygon"===Ke)for(vt=0;vt<nt.length;vt++)for(var gt=0;gt<nt[vt].length;gt++)ve(Je,nt[vt][gt])}(Ve),Ve}function ve(Xe,tt){for(var ye=0;ye<tt.length;ye+=3)Xe.minX=Math.min(Xe.minX,tt[ye]),Xe.minY=Math.min(Xe.minY,tt[ye+1]),Xe.maxX=Math.max(Xe.maxX,tt[ye]),Xe.maxY=Math.max(Xe.maxY,tt[ye+1])}function Te(Xe,tt,ye,ke){if(tt.geometry){var Ve=tt.geometry.coordinates,Je=tt.geometry.type,nt=Math.pow(ye.tolerance/((1<<ye.maxZoom)*ye.extent),2),Ke=[],vt=tt.id;if(ye.promoteId?vt=tt.properties[ye.promoteId]:ye.generateId&&(vt=ke||0),"Point"===Je)Ie(Ve,Ke);else if("MultiPoint"===Je)for(var gt=0;gt<Ve.length;gt++)Ie(Ve[gt],Ke);else if("LineString"===Je)De(Ve,Ke,nt,!1);else if("MultiLineString"===Je){if(ye.lineMetrics){for(gt=0;gt<Ve.length;gt++)De(Ve[gt],Ke=[],nt,!1),Xe.push(ze(vt,"LineString",Ke,tt.properties));return}Fe(Ve,Ke,nt,!1)}else if("Polygon"===Je)Fe(Ve,Ke,nt,!0);else{if("MultiPolygon"!==Je){if("GeometryCollection"===Je){for(gt=0;gt<tt.geometry.geometries.length;gt++)Te(Xe,{id:vt,geometry:tt.geometry.geometries[gt],properties:tt.properties},ye,ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(gt=0;gt<Ve.length;gt++){var Ot=[];Fe(Ve[gt],Ot,nt,!0),Ke.push(Ot)}}Xe.push(ze(vt,Je,Ke,tt.properties))}}function Ie(Xe,tt){tt.push(Ue(Xe[0])),tt.push(qe(Xe[1])),tt.push(0)}function De(Xe,tt,ye,ke){for(var Ve,Je,nt=0,Ke=0;Ke<Xe.length;Ke++){var vt=Ue(Xe[Ke][0]),gt=qe(Xe[Ke][1]);tt.push(vt),tt.push(gt),tt.push(0),Ke>0&&(nt+=ke?(Ve*gt-vt*Je)/2:Math.sqrt(Math.pow(vt-Ve,2)+Math.pow(gt-Je,2))),Ve=vt,Je=gt}var Ot=tt.length-3;tt[2]=1,function Vt(ft,bt,Wt,Pt){for(var Bt,Pe=Pt,et=Wt-bt>>1,dt=Wt-bt,xt=ft[bt],Rt=ft[bt+1],Yt=ft[Wt],nn=ft[Wt+1],Kt=bt+3;Kt<Wt;Kt+=3){var Mn=Ae(ft[Kt],ft[Kt+1],xt,Rt,Yt,nn);if(Mn>Pe)Bt=Kt,Pe=Mn;else if(Mn===Pe){var Un=Math.abs(Kt-et);Un<dt&&(Bt=Kt,dt=Un)}}Pe>Pt&&(Bt-bt>3&&Vt(ft,bt,Bt,Pt),ft[Bt+2]=Pe,Wt-Bt>3&&Vt(ft,Bt,Wt,Pt))}(tt,0,Ot,ye),tt[Ot+2]=1,tt.size=Math.abs(nt),tt.start=0,tt.end=tt.size}function Fe(Xe,tt,ye,ke){for(var Ve=0;Ve<Xe.length;Ve++){var Je=[];De(Xe[Ve],Je,ye,ke),tt.push(Je)}}function Ue(Xe){return Xe/360+.5}function qe(Xe){var tt=Math.sin(Xe*Math.PI/180),ye=.5-.25*Math.log((1+tt)/(1-tt))/Math.PI;return ye<0?0:ye>1?1:ye}function je(Xe,tt,ye,ke,Ve,Je,nt,Ke){if(ke/=tt,Je>=(ye/=tt)&&nt<ke)return Xe;if(nt<ye||Je>=ke)return null;for(var vt=[],gt=0;gt<Xe.length;gt++){var Ot=Xe[gt],Vt=Ot.geometry,ft=Ot.type,bt=0===Ve?Ot.minX:Ot.minY,Wt=0===Ve?Ot.maxX:Ot.maxY;if(bt>=ye&&Wt<ke)vt.push(Ot);else if(!(Wt<ye||bt>=ke)){var Pt=[];if("Point"===ft||"MultiPoint"===ft)rt(Vt,Pt,ye,ke,Ve);else if("LineString"===ft)Ne(Vt,Pt,ye,ke,Ve,!1,Ke.lineMetrics);else if("MultiLineString"===ft)We(Vt,Pt,ye,ke,Ve,!1);else if("Polygon"===ft)We(Vt,Pt,ye,ke,Ve,!0);else if("MultiPolygon"===ft)for(var Bt=0;Bt<Vt.length;Bt++){var Pe=[];We(Vt[Bt],Pe,ye,ke,Ve,!0),Pe.length&&Pt.push(Pe)}if(Pt.length){if(Ke.lineMetrics&&"LineString"===ft){for(Bt=0;Bt<Pt.length;Bt++)vt.push(ze(Ot.id,ft,Pt[Bt],Ot.tags));continue}"LineString"!==ft&&"MultiLineString"!==ft||(1===Pt.length?(ft="LineString",Pt=Pt[0]):ft="MultiLineString"),"Point"!==ft&&"MultiPoint"!==ft||(ft=3===Pt.length?"Point":"MultiPoint"),vt.push(ze(Ot.id,ft,Pt,Ot.tags))}}}return vt.length?vt:null}function rt(Xe,tt,ye,ke,Ve){for(var Je=0;Je<Xe.length;Je+=3){var nt=Xe[Je+Ve];nt>=ye&&nt<=ke&&(tt.push(Xe[Je]),tt.push(Xe[Je+1]),tt.push(Xe[Je+2]))}}function Ne(Xe,tt,ye,ke,Ve,Je,nt){for(var Ke,vt,gt=Be(Xe),Ot=0===Ve?lt:mt,Vt=Xe.start,ft=0;ft<Xe.length-3;ft+=3){var bt=Xe[ft],Wt=Xe[ft+1],Pt=Xe[ft+2],Bt=Xe[ft+3],Pe=Xe[ft+4],et=0===Ve?bt:Wt,dt=0===Ve?Bt:Pe,xt=!1;nt&&(Ke=Math.sqrt(Math.pow(bt-Bt,2)+Math.pow(Wt-Pe,2))),et<ye?dt>ye&&(vt=Ot(gt,bt,Wt,Bt,Pe,ye),nt&&(gt.start=Vt+Ke*vt)):et>ke?dt<ke&&(vt=Ot(gt,bt,Wt,Bt,Pe,ke),nt&&(gt.start=Vt+Ke*vt)):Ye(gt,bt,Wt,Pt),dt<ye&&et>=ye&&(vt=Ot(gt,bt,Wt,Bt,Pe,ye),xt=!0),dt>ke&&et<=ke&&(vt=Ot(gt,bt,Wt,Bt,Pe,ke),xt=!0),!Je&&xt&&(nt&&(gt.end=Vt+Ke*vt),tt.push(gt),gt=Be(Xe)),nt&&(Vt+=Ke)}var Rt=Xe.length-3;bt=Xe[Rt],Wt=Xe[Rt+1],Pt=Xe[Rt+2],(et=0===Ve?bt:Wt)>=ye&&et<=ke&&Ye(gt,bt,Wt,Pt),Rt=gt.length-3,Je&&Rt>=3&&(gt[Rt]!==gt[0]||gt[Rt+1]!==gt[1])&&Ye(gt,gt[0],gt[1],gt[2]),gt.length&&tt.push(gt)}function Be(Xe){var tt=[];return tt.size=Xe.size,tt.start=Xe.start,tt.end=Xe.end,tt}function We(Xe,tt,ye,ke,Ve,Je){for(var nt=0;nt<Xe.length;nt++)Ne(Xe[nt],tt,ye,ke,Ve,Je,!1)}function Ye(Xe,tt,ye,ke){Xe.push(tt),Xe.push(ye),Xe.push(ke)}function lt(Xe,tt,ye,ke,Ve,Je){var nt=(Je-tt)/(ke-tt);return Xe.push(Je),Xe.push(ye+(Ve-ye)*nt),Xe.push(1),nt}function mt(Xe,tt,ye,ke,Ve,Je){var nt=(Je-ye)/(Ve-ye);return Xe.push(tt+(ke-tt)*nt),Xe.push(Je),Xe.push(1),nt}function Tt(Xe,tt){for(var ye=[],ke=0;ke<Xe.length;ke++){var Ve,Je=Xe[ke],nt=Je.type;if("Point"===nt||"MultiPoint"===nt||"LineString"===nt)Ve=It(Je.geometry,tt);else if("MultiLineString"===nt||"Polygon"===nt){Ve=[];for(var Ke=0;Ke<Je.geometry.length;Ke++)Ve.push(It(Je.geometry[Ke],tt))}else if("MultiPolygon"===nt)for(Ve=[],Ke=0;Ke<Je.geometry.length;Ke++){for(var vt=[],gt=0;gt<Je.geometry[Ke].length;gt++)vt.push(It(Je.geometry[Ke][gt],tt));Ve.push(vt)}ye.push(ze(Je.id,nt,Ve,Je.tags))}return ye}function It(Xe,tt){var ye=[];ye.size=Xe.size,void 0!==Xe.start&&(ye.start=Xe.start,ye.end=Xe.end);for(var ke=0;ke<Xe.length;ke+=3)ye.push(Xe[ke]+tt,Xe[ke+1],Xe[ke+2]);return ye}function Ct(Xe,tt){if(Xe.transformed)return Xe;var ye,ke,Ve,Je=1<<Xe.z,nt=Xe.x,Ke=Xe.y;for(ye=0;ye<Xe.features.length;ye++){var vt=Xe.features[ye],gt=vt.geometry,Ot=vt.type;if(vt.geometry=[],1===Ot)for(ke=0;ke<gt.length;ke+=2)vt.geometry.push(ct(gt[ke],gt[ke+1],tt,Je,nt,Ke));else for(ke=0;ke<gt.length;ke++){var Vt=[];for(Ve=0;Ve<gt[ke].length;Ve+=2)Vt.push(ct(gt[ke][Ve],gt[ke][Ve+1],tt,Je,nt,Ke));vt.geometry.push(Vt)}}return Xe.transformed=!0,Xe}function ct(Xe,tt,ye,ke,Ve,Je){return[Math.round(ye*(Xe*ke-Ve)),Math.round(ye*(tt*ke-Je))]}function at(Xe,tt,ye,ke,Ve){for(var Je=tt===Ve.maxZoom?0:Ve.tolerance/((1<<tt)*Ve.extent),nt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ye,y:ke,z:tt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ke=0;Ke<Xe.length;Ke++){nt.numFeatures++,St(nt,Xe[Ke],Je,Ve);var vt=Xe[Ke].minX,gt=Xe[Ke].minY,Ot=Xe[Ke].maxX,Vt=Xe[Ke].maxY;vt<nt.minX&&(nt.minX=vt),gt<nt.minY&&(nt.minY=gt),Ot>nt.maxX&&(nt.maxX=Ot),Vt>nt.maxY&&(nt.maxY=Vt)}return nt}function St(Xe,tt,ye,ke){var Ve=tt.geometry,Je=tt.type,nt=[];if("Point"===Je||"MultiPoint"===Je)for(var Ke=0;Ke<Ve.length;Ke+=3)nt.push(Ve[Ke]),nt.push(Ve[Ke+1]),Xe.numPoints++,Xe.numSimplified++;else if("LineString"===Je)Xt(nt,Ve,Xe,ye,!1,!1);else if("MultiLineString"===Je||"Polygon"===Je)for(Ke=0;Ke<Ve.length;Ke++)Xt(nt,Ve[Ke],Xe,ye,"Polygon"===Je,0===Ke);else if("MultiPolygon"===Je)for(var vt=0;vt<Ve.length;vt++){var gt=Ve[vt];for(Ke=0;Ke<gt.length;Ke++)Xt(nt,gt[Ke],Xe,ye,!0,0===Ke)}if(nt.length){var Ot=tt.tags||null;if("LineString"===Je&&ke.lineMetrics){for(var Vt in Ot={},tt.tags)Ot[Vt]=tt.tags[Vt];Ot.mapbox_clip_start=Ve.start/Ve.size,Ot.mapbox_clip_end=Ve.end/Ve.size}var ft={geometry:nt,type:"Polygon"===Je||"MultiPolygon"===Je?3:"LineString"===Je||"MultiLineString"===Je?2:1,tags:Ot};null!==tt.id&&(ft.id=tt.id),Xe.features.push(ft)}}function Xt(Xe,tt,ye,ke,Ve,Je){var nt=ke*ke;if(ke>0&&tt.size<(Ve?nt:ke))ye.numPoints+=tt.length/3;else{for(var Ke=[],vt=0;vt<tt.length;vt+=3)(0===ke||tt[vt+2]>nt)&&(ye.numSimplified++,Ke.push(tt[vt]),Ke.push(tt[vt+1])),ye.numPoints++;Ve&&function(gt,Ot){for(var Vt=0,ft=0,bt=gt.length,Wt=bt-2;ft<bt;Wt=ft,ft+=2)Vt+=(gt[ft]-gt[Wt])*(gt[ft+1]+gt[Wt+1]);if(Vt>0===Ot)for(ft=0,bt=gt.length;ft<bt/2;ft+=2){var Pt=gt[ft],Bt=gt[ft+1];gt[ft]=gt[bt-2-ft],gt[ft+1]=gt[bt-1-ft],gt[bt-2-ft]=Pt,gt[bt-1-ft]=Bt}}(Ke,Je),Xe.push(Ke)}}function tn(Xe,tt){var ye=(tt=this.options=function(Ve,Je){for(var nt in Je)Ve[nt]=Je[nt];return Ve}(Object.create(this.options),tt)).debug;if(ye&&console.time("preprocess data"),tt.maxZoom<0||tt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(tt.promoteId&&tt.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ve,Je,nt,Ke,vt,gt,ke=function(Ve,Je){var nt=[];if("FeatureCollection"===Ve.type)for(var Ke=0;Ke<Ve.features.length;Ke++)Te(nt,Ve.features[Ke],Je,Ke);else Te(nt,"Feature"===Ve.type?Ve:{geometry:Ve},Je);return nt}(Xe,tt);this.tiles={},this.tileCoords=[],ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",tt.indexMaxZoom,tt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ve=ke,Je=tt,nt=Je.buffer/Je.extent,Ke=Ve,vt=je(Ve,1,-1-nt,nt,0,-1,2,Je),gt=je(Ve,1,1-nt,2+nt,0,-1,2,Je),(vt||gt)&&(Ke=je(Ve,1,-nt,1+nt,0,-1,2,Je)||[],vt&&(Ke=Tt(vt,1).concat(Ke)),gt&&(Ke=Ke.concat(Tt(gt,-1)))),ke=Ke).length&&this.splitTile(ke,0,0,0),ye&&(ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function hn(Xe,tt,ye){return 32*((1<<Xe)*ye+tt)+Xe}function cn(Xe,tt){var ye=Xe.tileID.canonical;if(!this._geoJSONIndex)return tt(null,null);var ke=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!ke)return tt(null,null);var Ve=new T(ke.features),Je=S(Ve);0===Je.byteOffset&&Je.byteLength===Je.buffer.byteLength||(Je=new Uint8Array(Je)),tt(null,{vectorTile:Ve,rawData:Je.buffer})}Q.prototype.load=function(Xe){var tt=this.options,ye=tt.log,ke=tt.minZoom,Ve=tt.maxZoom,Je=tt.nodeSize;ye&&console.time("total time");var nt="prepare "+Xe.length+" points";ye&&console.time(nt),this.points=Xe;for(var Ke=[],vt=0;vt<Xe.length;vt++)Xe[vt].geometry&&Ke.push(le(Xe[vt],vt));this.trees[Ve+1]=new H(Ke,Ce,Ee,Je,Float32Array),ye&&console.timeEnd(nt);for(var gt=Ve;gt>=ke;gt--){var Ot=+Date.now();Ke=this._cluster(Ke,gt),this.trees[gt]=new H(Ke,Ce,Ee,Je,Float32Array),ye&&console.log("z%d: %d clusters in %dms",gt,Ke.length,+Date.now()-Ot)}return ye&&console.timeEnd("total time"),this},Q.prototype.getClusters=function(Xe,tt){var ye=((Xe[0]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,Xe[1])),Ve=180===Xe[2]?180:((Xe[2]+180)%360+360)%360-180,Je=Math.max(-90,Math.min(90,Xe[3]));if(Xe[2]-Xe[0]>=360)ye=-180,Ve=180;else if(ye>Ve){var nt=this.getClusters([ye,ke,180,Je],tt),Ke=this.getClusters([-180,ke,Ve,Je],tt);return nt.concat(Ke)}for(var vt=this.trees[this._limitZoom(tt)],gt=[],Ot=0,Vt=vt.range(be(ye),he(Je),be(Ve),he(ke));Ot<Vt.length;Ot+=1){var bt=vt.points[Vt[Ot]];gt.push(bt.numPoints?de(bt):this.points[bt.index])}return gt},Q.prototype.getChildren=function(Xe){var tt=this._getOriginId(Xe),ye=this._getOriginZoom(Xe),ke="No cluster with the specified id.",Ve=this.trees[ye];if(!Ve)throw new Error(ke);var Je=Ve.points[tt];if(!Je)throw new Error(ke);for(var nt=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ke=[],vt=0,gt=Ve.within(Je.x,Je.y,nt);vt<gt.length;vt+=1){var Vt=Ve.points[gt[vt]];Vt.parentId===Xe&&Ke.push(Vt.numPoints?de(Vt):this.points[Vt.index])}if(0===Ke.length)throw new Error(ke);return Ke},Q.prototype.getLeaves=function(Xe,tt,ye){var ke=[];return this._appendLeaves(ke,Xe,tt=tt||10,ye=ye||0,0),ke},Q.prototype.getTile=function(Xe,tt,ye){var ke=this.trees[this._limitZoom(Xe)],Ve=Math.pow(2,Xe),Je=this.options,Ke=Je.radius/Je.extent,vt=(ye-Ke)/Ve,gt=(ye+1+Ke)/Ve,Ot={features:[]};return this._addTileFeatures(ke.range((tt-Ke)/Ve,vt,(tt+1+Ke)/Ve,gt),ke.points,tt,ye,Ve,Ot),0===tt&&this._addTileFeatures(ke.range(1-Ke/Ve,vt,1,gt),ke.points,Ve,ye,Ve,Ot),tt===Ve-1&&this._addTileFeatures(ke.range(0,vt,Ke/Ve,gt),ke.points,-1,ye,Ve,Ot),Ot.features.length?Ot:null},Q.prototype.getClusterExpansionZoom=function(Xe){for(var tt=this._getOriginZoom(Xe)-1;tt<=this.options.maxZoom;){var ye=this.getChildren(Xe);if(tt++,1!==ye.length)break;Xe=ye[0].properties.cluster_id}return tt},Q.prototype._appendLeaves=function(Xe,tt,ye,ke,Ve){for(var Je=0,nt=this.getChildren(tt);Je<nt.length;Je+=1){var Ke=nt[Je],vt=Ke.properties;if(vt&&vt.cluster?Ve+vt.point_count<=ke?Ve+=vt.point_count:Ve=this._appendLeaves(Xe,vt.cluster_id,ye,ke,Ve):Ve<ke?Ve++:Xe.push(Ke),Xe.length===ye)break}return Ve},Q.prototype._addTileFeatures=function(Xe,tt,ye,ke,Ve,Je){for(var nt=0,Ke=Xe;nt<Ke.length;nt+=1){var vt=tt[Ke[nt]],gt=vt.numPoints,Ot={type:1,geometry:[[Math.round(this.options.extent*(vt.x*Ve-ye)),Math.round(this.options.extent*(vt.y*Ve-ke))]],tags:gt?fe(vt):this.points[vt.index].properties},Vt=void 0;gt?Vt=vt.id:this.options.generateId?Vt=vt.index:this.points[vt.index].id&&(Vt=this.points[vt.index].id),void 0!==Vt&&(Ot.id=Vt),Je.features.push(Ot)}},Q.prototype._limitZoom=function(Xe){return Math.max(this.options.minZoom,Math.min(Xe,this.options.maxZoom+1))},Q.prototype._cluster=function(Xe,tt){for(var ye=[],ke=this.options,nt=ke.reduce,Ke=ke.radius/(ke.extent*Math.pow(2,tt)),vt=0;vt<Xe.length;vt++){var gt=Xe[vt];if(!(gt.zoom<=tt)){gt.zoom=tt;for(var Ot=this.trees[tt+1],Vt=Ot.within(gt.x,gt.y,Ke),ft=gt.numPoints||1,bt=gt.x*ft,Wt=gt.y*ft,Pt=nt&&ft>1?this._map(gt,!0):null,Bt=(vt<<5)+(tt+1)+this.points.length,Pe=0,et=Vt;Pe<et.length;Pe+=1){var xt=Ot.points[et[Pe]];if(!(xt.zoom<=tt)){xt.zoom=tt;var Rt=xt.numPoints||1;bt+=xt.x*Rt,Wt+=xt.y*Rt,ft+=Rt,xt.parentId=Bt,nt&&(Pt||(Pt=this._map(gt,!0)),nt(Pt,this._map(xt)))}}1===ft?ye.push(gt):(gt.parentId=Bt,ye.push(oe(bt/ft,Wt/ft,Bt,ft,Pt)))}}return ye},Q.prototype._getOriginId=function(Xe){return Xe-this.points.length>>5},Q.prototype._getOriginZoom=function(Xe){return(Xe-this.points.length)%32},Q.prototype._map=function(Xe,tt){if(Xe.numPoints)return tt?_e({},Xe.properties):Xe.properties;var ye=this.points[Xe.index].properties,ke=this.options.map(ye);return tt&&ke===ye?_e({},ke):ke},tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tn.prototype.splitTile=function(Xe,tt,ye,ke,Ve,Je,nt){for(var Ke=[Xe,tt,ye,ke],vt=this.options,gt=vt.debug;Ke.length;){ke=Ke.pop(),ye=Ke.pop(),tt=Ke.pop(),Xe=Ke.pop();var Ot=1<<tt,Vt=hn(tt,ye,ke),ft=this.tiles[Vt];if(!ft&&(gt>1&&console.time("creation"),ft=this.tiles[Vt]=at(Xe,tt,ye,ke,vt),this.tileCoords.push({z:tt,x:ye,y:ke}),gt)){gt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",tt,ye,ke,ft.numFeatures,ft.numPoints,ft.numSimplified),console.timeEnd("creation"));var bt="z"+tt;this.stats[bt]=(this.stats[bt]||0)+1,this.total++}if(ft.source=Xe,Ve){if(tt===vt.maxZoom||tt===Ve)continue;var Wt=1<<Ve-tt;if(ye!==Math.floor(Je/Wt)||ke!==Math.floor(nt/Wt))continue}else if(tt===vt.indexMaxZoom||ft.numPoints<=vt.indexMaxPoints)continue;if(ft.source=null,0!==Xe.length){gt>1&&console.time("clipping");var Pt,Bt,Pe,et,dt,xt,Rt=.5*vt.buffer/vt.extent,Yt=.5-Rt,nn=.5+Rt,Kt=1+Rt;Pt=Bt=Pe=et=null,dt=je(Xe,Ot,ye-Rt,ye+nn,0,ft.minX,ft.maxX,vt),xt=je(Xe,Ot,ye+Yt,ye+Kt,0,ft.minX,ft.maxX,vt),Xe=null,dt&&(Pt=je(dt,Ot,ke-Rt,ke+nn,1,ft.minY,ft.maxY,vt),Bt=je(dt,Ot,ke+Yt,ke+Kt,1,ft.minY,ft.maxY,vt),dt=null),xt&&(Pe=je(xt,Ot,ke-Rt,ke+nn,1,ft.minY,ft.maxY,vt),et=je(xt,Ot,ke+Yt,ke+Kt,1,ft.minY,ft.maxY,vt),xt=null),gt>1&&console.timeEnd("clipping"),Ke.push(Pt||[],tt+1,2*ye,2*ke),Ke.push(Bt||[],tt+1,2*ye,2*ke+1),Ke.push(Pe||[],tt+1,2*ye+1,2*ke),Ke.push(et||[],tt+1,2*ye+1,2*ke+1)}}},tn.prototype.getTile=function(Xe,tt,ye){var ke=this.options,Ve=ke.extent,Je=ke.debug;if(Xe<0||Xe>24)return null;var nt=1<<Xe,Ke=hn(Xe,tt=(tt%nt+nt)%nt,ye);if(this.tiles[Ke])return Ct(this.tiles[Ke],Ve);Je>1&&console.log("drilling down to z%d-%d-%d",Xe,tt,ye);for(var vt,gt=Xe,Ot=tt,Vt=ye;!vt&&gt>0;)gt--,Ot=Math.floor(Ot/2),Vt=Math.floor(Vt/2),vt=this.tiles[hn(gt,Ot,Vt)];return vt&&vt.source?(Je>1&&console.log("found parent tile z%d-%d-%d",gt,Ot,Vt),Je>1&&console.time("drilling down"),this.splitTile(vt.source,gt,Ot,Vt,Xe,tt,ye),Je>1&&console.timeEnd("drilling down"),this.tiles[Ke]?Ct(this.tiles[Ke],Ve):null):null};var yn=function(Xe){function tt(ye,ke,Ve,Je){Xe.call(this,ye,ke,Ve,cn),Je&&(this.loadGeoJSON=Je)}return Xe&&(tt.__proto__=Xe),(tt.prototype=Object.create(Xe&&Xe.prototype)).constructor=tt,tt.prototype.loadData=function(ye,ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ke,this._pendingLoadDataParams=ye,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},tt.prototype._loadData=function(){var ye=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ke=this._pendingCallback,Ve=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Je=!!(Ve&&Ve.request&&Ve.request.collectResourceTiming)&&new e.RequestPerformance(Ve.request);this.loadGeoJSON(Ve,function(nt,Ke){if(nt||!Ke)return ke(nt);if("object"!=typeof Ke)return ke(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));h(Ke,!0);try{ye._geoJSONIndex=Ve.cluster?new Q(function(Ot){var Vt=Ot.superclusterOptions,ft=Ot.clusterProperties;if(!ft||!Vt)return Vt;for(var bt={},Wt={},Pt={accumulated:null,zoom:0},Bt={properties:null},Pe=Object.keys(ft),et=0,dt=Pe;et<dt.length;et+=1){var xt=dt[et],Rt=ft[xt],Yt=Rt[0],Kt=e.createExpression(Rt[1]),Mn=e.createExpression("string"==typeof Yt?[Yt,["accumulated"],["get",xt]]:Yt);bt[xt]=Kt.value,Wt[xt]=Mn.value}return Vt.map=function(Un){Bt.properties=Un;for(var Tn={},un=0,an=Pe;un<an.length;un+=1){var fn=an[un];Tn[fn]=bt[fn].evaluate(Pt,Bt)}return Tn},Vt.reduce=function(Un,Tn){Bt.properties=Tn;for(var un=0,an=Pe;un<an.length;un+=1){var fn=an[un];Pt.accumulated=Un[fn],Un[fn]=Wt[fn].evaluate(Pt,Bt)}},Vt}(Ve)).load(Ke.features):new tn(Ot=Ke,Ve.geojsonVtOptions)}catch(Ot){return ke(Ot)}var Ot;ye.loaded={};var vt={};if(Je){var gt=Je.finish();gt&&(vt.resourceTiming={},vt.resourceTiming[Ve.source]=JSON.parse(JSON.stringify(gt)))}ke(null,vt)})}},tt.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},tt.prototype.reloadTile=function(ye,ke){var Ve=this.loaded;return Ve&&Ve[ye.uid]?Xe.prototype.reloadTile.call(this,ye,ke):this.loadTile(ye,ke)},tt.prototype.loadGeoJSON=function(ye,ke){if(ye.request)e.getJSON(ye.request,ke);else{if("string"!=typeof ye.data)return ke(new Error("Input data given to '"+ye.source+"' is not a valid GeoJSON object."));try{return ke(null,JSON.parse(ye.data))}catch{return ke(new Error("Input data given to '"+ye.source+"' is not a valid GeoJSON object."))}}},tt.prototype.removeSource=function(ye,ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ke()},tt.prototype.getClusterExpansionZoom=function(ye,ke){try{ke(null,this._geoJSONIndex.getClusterExpansionZoom(ye.clusterId))}catch(Ve){ke(Ve)}},tt.prototype.getClusterChildren=function(ye,ke){try{ke(null,this._geoJSONIndex.getChildren(ye.clusterId))}catch(Ve){ke(Ve)}},tt.prototype.getClusterLeaves=function(ye,ke){try{ke(null,this._geoJSONIndex.getLeaves(ye.clusterId,ye.limit,ye.offset))}catch(Ve){ke(Ve)}},tt}(f),en=function(Xe){var tt=this;this.self=Xe,this.actor=new e.Actor(Xe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:f,geojson:yn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ye,ke){if(tt.workerSourceTypes[ye])throw new Error('Worker source with name "'+ye+'" already registered.');tt.workerSourceTypes[ye]=ke},this.self.registerRTLTextPlugin=function(ye){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ye.applyArabicShaping,e.plugin.processBidirectionalText=ye.processBidirectionalText,e.plugin.processStyledBidirectionalText=ye.processStyledBidirectionalText}};return en.prototype.setReferrer=function(Xe,tt){this.referrer=tt},en.prototype.setImages=function(Xe,tt,ye){for(var ke in this.availableImages[Xe]=tt,this.workerSources[Xe]){var Ve=this.workerSources[Xe][ke];for(var Je in Ve)Ve[Je].availableImages=tt}ye()},en.prototype.setLayers=function(Xe,tt,ye){this.getLayerIndex(Xe).replace(tt),ye()},en.prototype.updateLayers=function(Xe,tt,ye){this.getLayerIndex(Xe).update(tt.layers,tt.removedIds),ye()},en.prototype.loadTile=function(Xe,tt,ye){this.getWorkerSource(Xe,tt.type,tt.source).loadTile(tt,ye)},en.prototype.loadDEMTile=function(Xe,tt,ye){this.getDEMWorkerSource(Xe,tt.source).loadTile(tt,ye)},en.prototype.reloadTile=function(Xe,tt,ye){this.getWorkerSource(Xe,tt.type,tt.source).reloadTile(tt,ye)},en.prototype.abortTile=function(Xe,tt,ye){this.getWorkerSource(Xe,tt.type,tt.source).abortTile(tt,ye)},en.prototype.removeTile=function(Xe,tt,ye){this.getWorkerSource(Xe,tt.type,tt.source).removeTile(tt,ye)},en.prototype.removeDEMTile=function(Xe,tt){this.getDEMWorkerSource(Xe,tt.source).removeTile(tt)},en.prototype.removeSource=function(Xe,tt,ye){if(this.workerSources[Xe]&&this.workerSources[Xe][tt.type]&&this.workerSources[Xe][tt.type][tt.source]){var ke=this.workerSources[Xe][tt.type][tt.source];delete this.workerSources[Xe][tt.type][tt.source],void 0!==ke.removeSource?ke.removeSource(tt,ye):ye()}},en.prototype.loadWorkerSource=function(Xe,tt,ye){try{this.self.importScripts(tt.url),ye()}catch(ke){ye(ke.toString())}},en.prototype.syncRTLPluginState=function(Xe,tt,ye){try{e.plugin.setState(tt);var ke=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=ke){this.self.importScripts(ke);var Ve=e.plugin.isParsed();ye(Ve?void 0:new Error("RTL Text Plugin failed to import scripts from "+ke),Ve)}}catch(Je){ye(Je.toString())}},en.prototype.getAvailableImages=function(Xe){var tt=this.availableImages[Xe];return tt||(tt=[]),tt},en.prototype.getLayerIndex=function(Xe){var tt=this.layerIndexes[Xe];return tt||(tt=this.layerIndexes[Xe]=new a),tt},en.prototype.getWorkerSource=function(Xe,tt,ye){var ke=this;return this.workerSources[Xe]||(this.workerSources[Xe]={}),this.workerSources[Xe][tt]||(this.workerSources[Xe][tt]={}),this.workerSources[Xe][tt][ye]||(this.workerSources[Xe][tt][ye]=new this.workerSourceTypes[tt]({send:function(Je,nt,Ke){ke.actor.send(Je,nt,Ke,Xe)}},this.getLayerIndex(Xe),this.getAvailableImages(Xe))),this.workerSources[Xe][tt][ye]},en.prototype.getDEMWorkerSource=function(Xe,tt){return this.demWorkerSources[Xe]||(this.demWorkerSources[Xe]={}),this.demWorkerSources[Xe][tt]||(this.demWorkerSources[Xe][tt]=new l),this.demWorkerSources[Xe][tt]},en.prototype.enforceCacheSizeLimit=function(Xe,tt){e.enforceCacheSizeLimit(tt)},typeof WorkerGlobalScope<"u"&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new en(e.window)),en}),y(0,function(e){var r=e.createCommonjsModule(function(P){function N(ce){return!j(ce)}function j(ce){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ge,we,Se=new Blob([""],{type:"text/javascript"}),Oe=URL.createObjectURL(Se);try{we=new Worker(Oe),ge=!0}catch{ge=!1}return we&&we.terminate(),URL.revokeObjectURL(Oe),ge}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ge=document.createElement("canvas");ge.width=ge.height=1;var we=ge.getContext("2d");if(!we)return!1;var Se=we.getImageData(0,0,1,1);return Se&&Se.width===ge.width}()?(void 0===Z[ge=ce&&ce.failIfMajorPerformanceCaveat]&&(Z[ge]=function(we){var $e,it,pt,Se=($e=we,it=document.createElement("canvas"),(pt=Object.create(N.webGLContextAttributes)).failIfMajorPerformanceCaveat=$e,it.probablySupportsContext?it.probablySupportsContext("webgl",pt)||it.probablySupportsContext("experimental-webgl",pt):it.supportsContext?it.supportsContext("webgl",pt)||it.supportsContext("experimental-webgl",pt):it.getContext("webgl",pt)||it.getContext("experimental-webgl",pt));if(!Se)return!1;var Oe=Se.createShader(Se.VERTEX_SHADER);return!(!Oe||Se.isContextLost())&&(Se.shaderSource(Oe,"void main() {}"),Se.compileShader(Oe),!0===Se.getShaderParameter(Oe,Se.COMPILE_STATUS))}(ge)),Z[ge]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ge}P.exports?P.exports=N:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=N,window.mapboxgl.notSupportedReason=j);var Z={};N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),n={create:function(P,N,j){var Z=e.window.document.createElement(P);return void 0!==N&&(Z.className=N),j&&j.appendChild(Z),Z},createNS:function(P,N){return e.window.document.createElementNS(P,N)}},a=e.window.document.documentElement.style;function t(P){if(!a)return P[0];for(var N=0;N<P.length;N++)if(P[N]in a)return P[N];return P[0]}var p,s=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){a&&s&&(p=a[s],a[s]="none")},n.enableDrag=function(){a&&s&&(a[s]=p)};var i=t(["transform","WebkitTransform"]);n.setTransform=function(P,N){P.style[i]=N};var f=!1;try{var c=Object.defineProperty({},"passive",{get:function(){f=!0}});e.window.addEventListener("test",c,c),e.window.removeEventListener("test",c,c)}catch{f=!1}n.addEventListener=function(P,N,j,Z){void 0===Z&&(Z={}),P.addEventListener(N,j,"passive"in Z&&f?Z:Z.capture)},n.removeEventListener=function(P,N,j,Z){void 0===Z&&(Z={}),P.removeEventListener(N,j,"passive"in Z&&f?Z:Z.capture)};var l=function(P){P.preventDefault(),P.stopPropagation(),e.window.removeEventListener("click",l,!0)};function h(P){var N=P.userImage;return!!(N&&N.render&&N.render())&&(P.data.replace(new Uint8Array(N.data.buffer)),!0)}n.suppressClick=function(){e.window.addEventListener("click",l,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",l,!0)},0)},n.mousePos=function(P,N){var j=P.getBoundingClientRect();return new e.Point(N.clientX-j.left-P.clientLeft,N.clientY-j.top-P.clientTop)},n.touchPos=function(P,N){for(var j=P.getBoundingClientRect(),Z=[],ce=0;ce<N.length;ce++)Z.push(new e.Point(N[ce].clientX-j.left-P.clientLeft,N[ce].clientY-j.top-P.clientTop));return Z},n.mouseButton=function(P){return void 0!==e.window.InstallTrigger&&2===P.button&&P.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:P.button},n.remove=function(P){P.parentNode&&P.parentNode.removeChild(P)};var d=function(P){function N(){P.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.isLoaded=function(){return this.loaded},N.prototype.setLoaded=function(j){if(this.loaded!==j&&(this.loaded=j,j)){for(var Z=0,ce=this.requestors;Z<ce.length;Z+=1){var ge=ce[Z];this._notify(ge.ids,ge.callback)}this.requestors=[]}},N.prototype.getImage=function(j){return this.images[j]},N.prototype.addImage=function(j,Z){this._validate(j,Z)&&(this.images[j]=Z)},N.prototype._validate=function(j,Z){var ce=!0;return this._validateStretch(Z.stretchX,Z.data&&Z.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchX" value'))),ce=!1),this._validateStretch(Z.stretchY,Z.data&&Z.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchY" value'))),ce=!1),this._validateContent(Z.content,Z)||(this.fire(new e.ErrorEvent(new Error('Image "'+j+'" has invalid "content" value'))),ce=!1),ce},N.prototype._validateStretch=function(j,Z){if(!j)return!0;for(var ce=0,ge=0,we=j;ge<we.length;ge+=1){var Se=we[ge];if(Se[0]<ce||Se[1]<Se[0]||Z<Se[1])return!1;ce=Se[1]}return!0},N.prototype._validateContent=function(j,Z){return!(j&&(4!==j.length||j[0]<0||Z.data.width<j[0]||j[1]<0||Z.data.height<j[1]||j[2]<0||Z.data.width<j[2]||j[3]<0||Z.data.height<j[3]||j[2]<j[0]||j[3]<j[1]))},N.prototype.updateImage=function(j,Z){Z.version=this.images[j].version+1,this.images[j]=Z,this.updatedImages[j]=!0},N.prototype.removeImage=function(j){var Z=this.images[j];delete this.images[j],delete this.patterns[j],Z.userImage&&Z.userImage.onRemove&&Z.userImage.onRemove()},N.prototype.listImages=function(){return Object.keys(this.images)},N.prototype.getImages=function(j,Z){var ce=!0;if(!this.isLoaded())for(var ge=0,we=j;ge<we.length;ge+=1)this.images[we[ge]]||(ce=!1);this.isLoaded()||ce?this._notify(j,Z):this.requestors.push({ids:j,callback:Z})},N.prototype._notify=function(j,Z){for(var ce={},ge=0,we=j;ge<we.length;ge+=1){var Se=we[ge];this.images[Se]||this.fire(new e.Event("styleimagemissing",{id:Se}));var Oe=this.images[Se];Oe?ce[Se]={data:Oe.data.clone(),pixelRatio:Oe.pixelRatio,sdf:Oe.sdf,version:Oe.version,stretchX:Oe.stretchX,stretchY:Oe.stretchY,content:Oe.content,hasRenderCallback:Boolean(Oe.userImage&&Oe.userImage.render)}:e.warnOnce('Image "'+Se+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}Z(null,ce)},N.prototype.getPixelSize=function(){var j=this.atlasImage;return{width:j.width,height:j.height}},N.prototype.getPattern=function(j){var Z=this.patterns[j],ce=this.getImage(j);if(!ce)return null;if(Z&&Z.position.version===ce.version)return Z.position;if(Z)Z.position.version=ce.version;else{var ge={w:ce.data.width+2,h:ce.data.height+2,x:0,y:0},we=new e.ImagePosition(ge,ce);this.patterns[j]={bin:ge,position:we}}return this._updatePatternAtlas(),this.patterns[j].position},N.prototype.bind=function(j){var Z=j.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(j,this.atlasImage,Z.RGBA),this.atlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)},N.prototype._updatePatternAtlas=function(){var j=[];for(var Z in this.patterns)j.push(this.patterns[Z].bin);var ce=e.potpack(j),ge=ce.w,we=ce.h,Se=this.atlasImage;for(var Oe in Se.resize({width:ge||1,height:we||1}),this.patterns){var $e=this.patterns[Oe].bin,it=$e.x+1,pt=$e.y+1,Et=this.images[Oe].data,Ft=Et.width,Dt=Et.height;e.RGBAImage.copy(Et,Se,{x:0,y:0},{x:it,y:pt},{width:Ft,height:Dt}),e.RGBAImage.copy(Et,Se,{x:0,y:Dt-1},{x:it,y:pt-1},{width:Ft,height:1}),e.RGBAImage.copy(Et,Se,{x:0,y:0},{x:it,y:pt+Dt},{width:Ft,height:1}),e.RGBAImage.copy(Et,Se,{x:Ft-1,y:0},{x:it-1,y:pt},{width:1,height:Dt}),e.RGBAImage.copy(Et,Se,{x:0,y:0},{x:it+Ft,y:pt},{width:1,height:Dt})}this.dirty=!0},N.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},N.prototype.dispatchRenderCallbacks=function(j){for(var Z=0,ce=j;Z<ce.length;Z+=1){var ge=ce[Z];if(!this.callbackDispatchedThisFrame[ge]){this.callbackDispatchedThisFrame[ge]=!0;var we=this.images[ge];h(we)&&this.updateImage(ge,we)}}},N}(e.Evented),o=T,x=T,u=1e20;function T(P,N,j,Z,ce,ge){this.fontSize=P||24,this.buffer=void 0===N?3:N,this.cutoff=Z||.25,this.fontFamily=ce||"sans-serif",this.fontWeight=ge||"normal",this.radius=j||8;var we=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=we,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(we*we),this.gridInner=new Float64Array(we*we),this.f=new Float64Array(we),this.d=new Float64Array(we),this.z=new Float64Array(we+1),this.v=new Int16Array(we),this.middle=Math.round(we/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _(P,N,j,Z,ce,ge,we){for(var Se=0;Se<N;Se++){for(var Oe=0;Oe<j;Oe++)Z[Oe]=P[Oe*N+Se];for(w(Z,ce,ge,we,j),Oe=0;Oe<j;Oe++)P[Oe*N+Se]=ce[Oe]}for(Oe=0;Oe<j;Oe++){for(Se=0;Se<N;Se++)Z[Se]=P[Oe*N+Se];for(w(Z,ce,ge,we,N),Se=0;Se<N;Se++)P[Oe*N+Se]=Math.sqrt(ce[Se])}}function w(P,N,j,Z,ce){j[0]=0,Z[0]=-u,Z[1]=+u;for(var ge=1,we=0;ge<ce;ge++){for(var Se=(P[ge]+ge*ge-(P[j[we]]+j[we]*j[we]))/(2*ge-2*j[we]);Se<=Z[we];)we--,Se=(P[ge]+ge*ge-(P[j[we]]+j[we]*j[we]))/(2*ge-2*j[we]);j[++we]=ge,Z[we]=Se,Z[we+1]=+u}for(ge=0,we=0;ge<ce;ge++){for(;Z[we+1]<ge;)we++;N[ge]=(ge-j[we])*(ge-j[we])+P[j[we]]}}T.prototype.draw=function(P){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(P,this.buffer,this.middle);for(var N=this.ctx.getImageData(0,0,this.size,this.size),j=new Uint8ClampedArray(this.size*this.size),Z=0;Z<this.size*this.size;Z++){var ce=N.data[4*Z+3]/255;this.gridOuter[Z]=1===ce?0:0===ce?u:Math.pow(Math.max(0,.5-ce),2),this.gridInner[Z]=1===ce?u:0===ce?0:Math.pow(Math.max(0,ce-.5),2)}for(_(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),_(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Z=0;Z<this.size*this.size;Z++)j[Z]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[Z]-this.gridInner[Z])/this.radius+this.cutoff))));return j},o.default=x;var M=function(P,N){this.requestManager=P,this.localIdeographFontFamily=N,this.entries={}};M.prototype.setURL=function(P){this.url=P},M.prototype.getGlyphs=function(P,N){var j=this,Z=[];for(var ce in P)for(var ge=0,we=P[ce];ge<we.length;ge+=1)Z.push({stack:ce,id:we[ge]});e.asyncAll(Z,function(Oe,$e){var it=Oe.stack,pt=Oe.id,Et=j.entries[it];Et||(Et=j.entries[it]={glyphs:{},requests:{},ranges:{}});var Ft=Et.glyphs[pt];if(void 0===Ft){if(Ft=j._tinySDF(Et,it,pt))return Et.glyphs[pt]=Ft,void $e(null,{stack:it,id:pt,glyph:Ft});var Dt=Math.floor(pt/256);if(256*Dt>65535)$e(new Error("glyphs > 65535 not supported"));else if(Et.ranges[Dt])$e(null,{stack:it,id:pt,glyph:Ft});else{var zt=Et.requests[Dt];zt||(zt=Et.requests[Dt]=[],M.loadGlyphRange(it,Dt,j.url,j.requestManager,function(Lt,Gt){if(Gt){for(var Ut in Gt)j._doesCharSupportLocalGlyph(+Ut)||(Et.glyphs[+Ut]=Gt[+Ut]);Et.ranges[Dt]=!0}for(var Zt=0,vn=zt;Zt<vn.length;Zt+=1)(0,vn[Zt])(Lt,Gt);delete Et.requests[Dt]})),zt.push(function(Lt,Gt){Lt?$e(Lt):Gt&&$e(null,{stack:it,id:pt,glyph:Gt[pt]||null})})}}else $e(null,{stack:it,id:pt,glyph:Ft})},function(Oe,$e){if(Oe)N(Oe);else if($e){for(var it={},pt=0,Et=$e;pt<Et.length;pt+=1){var Ft=Et[pt],Dt=Ft.stack,zt=Ft.id,Lt=Ft.glyph;(it[Dt]||(it[Dt]={}))[zt]=Lt&&{id:Lt.id,bitmap:Lt.bitmap.clone(),metrics:Lt.metrics}}N(null,it)}})},M.prototype._doesCharSupportLocalGlyph=function(P){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](P)||e.isChar["Hangul Syllables"](P)||e.isChar.Hiragana(P)||e.isChar.Katakana(P))},M.prototype._tinySDF=function(P,N,j){var Z=this.localIdeographFontFamily;if(Z&&this._doesCharSupportLocalGlyph(j)){var ce=P.tinySDF;if(!ce){var ge="400";/bold/i.test(N)?ge="900":/medium/i.test(N)?ge="500":/light/i.test(N)&&(ge="200"),ce=P.tinySDF=new M.TinySDF(24,3,8,.25,Z,ge)}return{id:j,bitmap:new e.AlphaImage({width:30,height:30},ce.draw(String.fromCharCode(j))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},M.loadGlyphRange=function(P,N,j,Z,ce){var ge=256*N,we=ge+255,Se=Z.transformRequest(Z.normalizeGlyphsURL(j).replace("{fontstack}",P).replace("{range}",ge+"-"+we),e.ResourceType.Glyphs);e.getArrayBuffer(Se,function(Oe,$e){if(Oe)ce(Oe);else if($e){for(var it={},pt=0,Et=e.parseGlyphPBF($e);pt<Et.length;pt+=1){var Ft=Et[pt];it[Ft.id]=Ft}ce(null,it)}})},M.TinySDF=o;var I=function(){this.specification=e.styleSpec.light.position};I.prototype.possiblyEvaluate=function(P,N){return e.sphericalToCartesian(P.expression.evaluate(N))},I.prototype.interpolate=function(P,N,j){return{x:e.number(P.x,N.x,j),y:e.number(P.y,N.y,j),z:e.number(P.z,N.z,j)}};var S=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new I,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),R=function(P){function N(j){P.call(this),this._transitionable=new e.Transitionable(S),this.setLight(j),this._transitioning=this._transitionable.untransitioned()}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getLight=function(){return this._transitionable.serialize()},N.prototype.setLight=function(j,Z){if(void 0===Z&&(Z={}),!this._validate(e.validateLight,j,Z))for(var ce in j){var ge=j[ce];e.endsWith(ce,"-transition")?this._transitionable.setTransition(ce.slice(0,-11),ge):this._transitionable.setValue(ce,ge)}},N.prototype.updateTransitions=function(j){this._transitioning=this._transitionable.transitioned(j,this._transitioning)},N.prototype.hasTransition=function(){return this._transitioning.hasTransition()},N.prototype.recalculate=function(j){this.properties=this._transitioning.possiblyEvaluate(j)},N.prototype._validate=function(j,Z,ce){return(!ce||!1!==ce.validate)&&e.emitValidationErrors(this,j.call(e.validateStyle,e.extend({value:Z,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},N}(e.Evented),O=function(P,N){this.width=P,this.height=N,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(P,N){var j=P.join(",")+String(N);return this.dashEntry[j]||(this.dashEntry[j]=this.addDash(P,N)),this.dashEntry[j]},O.prototype.getDashRanges=function(P,N,j){var Z=[],ce=P.length%2==1?-P[P.length-1]*j:0,ge=P[0]*j,we=!0;Z.push({left:ce,right:ge,isDash:we,zeroLength:0===P[0]});for(var Se=P[0],Oe=1;Oe<P.length;Oe++){var $e=P[Oe];ce=Se*j,ge=(Se+=$e)*j,Z.push({left:ce,right:ge,isDash:we=!we,zeroLength:0===$e})}return Z},O.prototype.addRoundDash=function(P,N,j){for(var Z=N/2,ce=-j;ce<=j;ce++)for(var we=this.width*(this.nextRow+j+ce),Se=0,Oe=P[Se],$e=0;$e<this.width;$e++){$e/Oe.right>1&&(Oe=P[++Se]);var it=Math.abs($e-Oe.left),pt=Math.abs($e-Oe.right),Et=Math.min(it,pt),Ft=void 0,Dt=ce/j*(Z+1);if(Oe.isDash){var zt=Z-Math.abs(Dt);Ft=Math.sqrt(Et*Et+zt*zt)}else Ft=Z-Math.sqrt(Et*Et+Dt*Dt);this.data[we+$e]=Math.max(0,Math.min(255,Ft+128))}},O.prototype.addRegularDash=function(P){for(var N=P.length-1;N>=0;--N){var j=P[N],Z=P[N+1];j.zeroLength?P.splice(N,1):Z&&Z.isDash===j.isDash&&(Z.left=j.left,P.splice(N,1))}var ce=P[0],ge=P[P.length-1];ce.isDash===ge.isDash&&(ce.left=ge.left-this.width,ge.right=ce.right+this.width);for(var we=this.width*this.nextRow,Se=0,Oe=P[Se],$e=0;$e<this.width;$e++){$e/Oe.right>1&&(Oe=P[++Se]);var it=Math.abs($e-Oe.left),pt=Math.abs($e-Oe.right),Et=Math.min(it,pt);this.data[we+$e]=Math.max(0,Math.min(255,(Oe.isDash?Et:-Et)+128))}},O.prototype.addDash=function(P,N){var j=N?7:0,Z=2*j+1;if(this.nextRow+Z>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ce=0,ge=0;ge<P.length;ge++)ce+=P[ge];if(0!==ce){var we=this.width/ce,Se=this.getDashRanges(P,this.width,we);N?this.addRoundDash(Se,we,j):this.addRegularDash(Se)}var Oe={y:(this.nextRow+j+.5)/this.height,height:2*j/this.height,width:ce};return this.nextRow+=Z,this.dirty=!0,Oe},O.prototype.bind=function(P){var N=P.gl;this.texture?(N.bindTexture(N.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,N.texSubImage2D(N.TEXTURE_2D,0,0,0,this.width,this.height,N.ALPHA,N.UNSIGNED_BYTE,this.data))):(this.texture=N.createTexture(),N.bindTexture(N.TEXTURE_2D,this.texture),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),N.texImage2D(N.TEXTURE_2D,0,N.ALPHA,this.width,this.height,0,N.ALPHA,N.UNSIGNED_BYTE,this.data))};var C=function P(N,j){this.workerPool=N,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var Z=this.workerPool.acquire(this.id),ce=0;ce<Z.length;ce++){var we=new P.Actor(Z[ce],j,this.id);we.name="Worker "+ce,this.actors.push(we)}};function D(P,N,j){var Z=function(ce,ge){if(ce)return j(ce);if(ge){var we=e.pick(e.extend(ge,P),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ge.vector_layers&&(we.vectorLayers=ge.vector_layers,we.vectorLayerIds=we.vectorLayers.map(function(Se){return Se.id})),we.tiles=N.canonicalizeTileset(we,P.url),j(null,we)}};return P.url?e.getJSON(N.transformRequest(N.normalizeSourceURL(P.url),e.ResourceType.Source),Z):e.browser.frame(function(){return Z(null,P)})}C.prototype.broadcast=function(P,N,j){e.asyncAll(this.actors,function(Z,ce){Z.send(P,N,ce)},j=j||function(){})},C.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},C.prototype.remove=function(){this.actors.forEach(function(P){P.remove()}),this.actors=[],this.workerPool.release(this.id)},C.Actor=e.Actor;var B=function(P,N,j){this.bounds=e.LngLatBounds.convert(this.validateBounds(P)),this.minzoom=N||0,this.maxzoom=j||24};B.prototype.validateBounds=function(P){return Array.isArray(P)&&4===P.length?[Math.max(-180,P[0]),Math.max(-90,P[1]),Math.min(180,P[2]),Math.min(90,P[3])]:[-180,-90,180,90]},B.prototype.contains=function(P){var N=Math.pow(2,P.z),j=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*N),Z=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*N),ce=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*N),ge=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*N);return P.x>=j&&P.x<ce&&P.y>=Z&&P.y<ge};var z=function(P){function N(j,Z,ce,ge){if(P.call(this),this.id=j,this.dispatcher=ce,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(Z,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},Z),this._collectResourceTiming=Z.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ge)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=D(this._options,this.map._requestManager,function(Z,ce){j._tileJSONRequest=null,j._loaded=!0,Z?j.fire(new e.ErrorEvent(Z)):ce&&(e.extend(j,ce),ce.bounds&&(j.tileBounds=new B(ce.bounds,j.minzoom,j.maxzoom)),e.postTurnstileEvent(ce.tiles,j.map._requestManager._customAccessToken),e.postMapLoadEvent(ce.tiles,j.map._getMapId(),j.map._requestManager._skuToken,j.map._requestManager._customAccessToken),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},N.prototype.onAdd=function(j){this.map=j,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.loadTile=function(j,Z){var ce=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme)),ge={request:this.map._requestManager.transformRequest(ce,e.ResourceType.Tile),uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,tileSize:this.tileSize*j.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function we(Se,Oe){return delete j.request,j.aborted?Z(null):Se&&404!==Se.status?Z(Se):(Oe&&Oe.resourceTiming&&(j.resourceTiming=Oe.resourceTiming),this.map._refreshExpiredTiles&&Oe&&j.setExpiryData(Oe),j.loadVectorData(Oe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),Z(null),void(j.reloadCallback&&(this.loadTile(j,j.reloadCallback),j.reloadCallback=null)))}ge.request.collectResourceTiming=this._collectResourceTiming,j.actor&&"expired"!==j.state?"loading"===j.state?j.reloadCallback=Z:j.request=j.actor.send("reloadTile",ge,we.bind(this)):(j.actor=this.dispatcher.getActor(),j.request=j.actor.send("loadTile",ge,we.bind(this)))},N.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.actor&&j.actor.send("abortTile",{uid:j.uid,type:this.type,source:this.id},void 0)},N.prototype.unloadTile=function(j){j.unloadVectorData(),j.actor&&j.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id},void 0)},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Y=function(P){function N(j,Z,ce,ge){P.call(this),this.id=j,this.dispatcher=ce,this.setEventedParent(ge),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},Z),e.extend(this,e.pick(Z,["url","scheme","tileSize"]))}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=D(this._options,this.map._requestManager,function(Z,ce){j._tileJSONRequest=null,j._loaded=!0,Z?j.fire(new e.ErrorEvent(Z)):ce&&(e.extend(j,ce),ce.bounds&&(j.tileBounds=new B(ce.bounds,j.minzoom,j.maxzoom)),e.postTurnstileEvent(ce.tiles),e.postMapLoadEvent(ce.tiles,j.map._getMapId(),j.map._requestManager._skuToken),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.onAdd=function(j){this.map=j,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},N.prototype.loadTile=function(j,Z){var ce=this,ge=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);j.request=e.getImage(this.map._requestManager.transformRequest(ge,e.ResourceType.Tile),function(we,Se){if(delete j.request,j.aborted)j.state="unloaded",Z(null);else if(we)j.state="errored",Z(we);else if(Se){ce.map._refreshExpiredTiles&&j.setExpiryData(Se),delete Se.cacheControl,delete Se.expires;var Oe=ce.map.painter.context,$e=Oe.gl;j.texture=ce.map.painter.getTileTexture(Se.width),j.texture?j.texture.update(Se,{useMipmap:!0}):(j.texture=new e.Texture(Oe,Se,$e.RGBA,{useMipmap:!0}),j.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE,$e.LINEAR_MIPMAP_NEAREST),Oe.extTextureFilterAnisotropic&&$e.texParameterf($e.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax)),j.state="loaded",e.cacheEntryPossiblyAdded(ce.dispatcher),Z(null)}})},N.prototype.abortTile=function(j,Z){j.request&&(j.request.cancel(),delete j.request),Z()},N.prototype.unloadTile=function(j,Z){j.texture&&this.map.painter.saveTileTexture(j.texture),Z()},N.prototype.hasTransition=function(){return!1},N}(e.Evented),G=function(P){function N(j,Z,ce,ge){P.call(this,j,Z,ce,ge),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},Z),this.encoding=Z.encoding||"mapbox"}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},N.prototype.loadTile=function(j,Z){var ce=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ge(we,Se){we&&(j.state="errored",Z(we)),Se&&(j.dem=Se,j.needsHillshadePrepare=!0,j.state="loaded",Z(null))}j.request=e.getImage(this.map._requestManager.transformRequest(ce,e.ResourceType.Tile),function(we,Se){if(delete j.request,j.aborted)j.state="unloaded",Z(null);else if(we)j.state="errored",Z(we);else if(Se){this.map._refreshExpiredTiles&&j.setExpiryData(Se),delete Se.cacheControl,delete Se.expires;var Oe=e.window.ImageBitmap&&Se instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Se:e.browser.getImageData(Se,1),$e={uid:j.uid,coord:j.tileID,source:this.id,rawImageData:Oe,encoding:this.encoding};j.actor&&"expired"!==j.state||(j.actor=this.dispatcher.getActor(),j.actor.send("loadDEMTile",$e,ge.bind(this)))}}.bind(this)),j.neighboringTiles=this._getNeighboringTiles(j.tileID)},N.prototype._getNeighboringTiles=function(j){var Z=j.canonical,ce=Math.pow(2,Z.z),ge=(Z.x-1+ce)%ce,we=0===Z.x?j.wrap-1:j.wrap,Se=(Z.x+1+ce)%ce,Oe=Z.x+1===ce?j.wrap+1:j.wrap,$e={};return $e[new e.OverscaledTileID(j.overscaledZ,we,Z.z,ge,Z.y).key]={backfilled:!1},$e[new e.OverscaledTileID(j.overscaledZ,Oe,Z.z,Se,Z.y).key]={backfilled:!1},Z.y>0&&($e[new e.OverscaledTileID(j.overscaledZ,we,Z.z,ge,Z.y-1).key]={backfilled:!1},$e[new e.OverscaledTileID(j.overscaledZ,j.wrap,Z.z,Z.x,Z.y-1).key]={backfilled:!1},$e[new e.OverscaledTileID(j.overscaledZ,Oe,Z.z,Se,Z.y-1).key]={backfilled:!1}),Z.y+1<ce&&($e[new e.OverscaledTileID(j.overscaledZ,we,Z.z,ge,Z.y+1).key]={backfilled:!1},$e[new e.OverscaledTileID(j.overscaledZ,j.wrap,Z.z,Z.x,Z.y+1).key]={backfilled:!1},$e[new e.OverscaledTileID(j.overscaledZ,Oe,Z.z,Se,Z.y+1).key]={backfilled:!1}),$e},N.prototype.unloadTile=function(j){j.demTexture&&this.map.painter.saveTileTexture(j.demTexture),j.fbo&&(j.fbo.destroy(),delete j.fbo),j.dem&&delete j.dem,delete j.neighboringTiles,j.state="unloaded",j.actor&&j.actor.send("removeDEMTile",{uid:j.uid,source:this.id})},N}(Y),J=function(P){function N(j,Z,ce,ge){P.call(this),this.id=j,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ce.getActor(),this.setEventedParent(ge),this._data=Z.data,this._options=e.extend({},Z),this._collectResourceTiming=Z.collectResourceTiming,this._resourceTiming=[],void 0!==Z.maxzoom&&(this.maxzoom=Z.maxzoom),Z.type&&(this.type=Z.type),Z.attribution&&(this.attribution=Z.attribution),this.promoteId=Z.promoteId;var we=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:Z.cluster||!1,geojsonVtOptions:{buffer:(void 0!==Z.buffer?Z.buffer:128)*we,tolerance:(void 0!==Z.tolerance?Z.tolerance:.375)*we,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:Z.lineMetrics||!1,generateId:Z.generateId||!1},superclusterOptions:{maxZoom:void 0!==Z.clusterMaxZoom?Math.min(Z.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(Z.clusterRadius||50)*we,log:!1,generateId:Z.generateId||!1},clusterProperties:Z.clusterProperties},Z.workerOptions)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var j=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Z){if(Z)j.fire(new e.ErrorEvent(Z));else{var ce={dataType:"source",sourceDataType:"metadata"};j._collectResourceTiming&&j._resourceTiming&&j._resourceTiming.length>0&&(ce.resourceTiming=j._resourceTiming,j._resourceTiming=[]),j.fire(new e.Event("data",ce))}})},N.prototype.onAdd=function(j){this.map=j,this.load()},N.prototype.setData=function(j){var Z=this;return this._data=j,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ce){if(ce)Z.fire(new e.ErrorEvent(ce));else{var ge={dataType:"source",sourceDataType:"content"};Z._collectResourceTiming&&Z._resourceTiming&&Z._resourceTiming.length>0&&(ge.resourceTiming=Z._resourceTiming,Z._resourceTiming=[]),Z.fire(new e.Event("data",ge))}}),this},N.prototype.getClusterExpansionZoom=function(j,Z){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:j,source:this.id},Z),this},N.prototype.getClusterChildren=function(j,Z){return this.actor.send("geojson.getClusterChildren",{clusterId:j,source:this.id},Z),this},N.prototype.getClusterLeaves=function(j,Z,ce,ge){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:j,limit:Z,offset:ce},ge),this},N.prototype._updateWorkerData=function(j){var Z=this;this._loaded=!1;var ce=e.extend({},this.workerOptions),ge=this._data;"string"==typeof ge?(ce.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ge),e.ResourceType.Source),ce.request.collectResourceTiming=this._collectResourceTiming):ce.data=JSON.stringify(ge),this.actor.send(this.type+".loadData",ce,function(we,Se){Z._removed||Se&&Se.abandoned||(Z._loaded=!0,Se&&Se.resourceTiming&&Se.resourceTiming[Z.id]&&(Z._resourceTiming=Se.resourceTiming[Z.id].slice(0)),Z.actor.send(Z.type+".coalesce",{source:ce.source},null),j(we))})},N.prototype.loaded=function(){return this._loaded},N.prototype.loadTile=function(j,Z){var ce=this,ge=j.actor?"reloadTile":"loadTile";j.actor=this.actor,j.request=this.actor.send(ge,{type:this.type,uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Se,Oe){return delete j.request,j.unloadVectorData(),j.aborted?Z(null):Se?Z(Se):(j.loadVectorData(Oe,ce.map.painter,"reloadTile"===ge),Z(null))})},N.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.aborted=!0},N.prototype.unloadTile=function(j){j.unloadVectorData(),this.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id})},N.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},N.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},N.prototype.hasTransition=function(){return!1},N}(e.Evented),te=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),X=function(P){function N(j,Z,ce,ge){P.call(this),this.id=j,this.dispatcher=ce,this.coordinates=Z.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ge),this.options=Z}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(j,Z){var ce=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ge,we){ce._loaded=!0,ge?ce.fire(new e.ErrorEvent(ge)):we&&(ce.image=we,j&&(ce.coordinates=j),Z&&Z(),ce._finishLoading())})},N.prototype.loaded=function(){return this._loaded},N.prototype.updateImage=function(j){var Z=this;return this.image&&j.url?(this.options.url=j.url,this.load(j.coordinates,function(){Z.texture=null}),this):this},N.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},N.prototype.onAdd=function(j){this.map=j,this.load()},N.prototype.setCoordinates=function(j){var Z=this;this.coordinates=j;var ce=j.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(we){for(var Se=1/0,Oe=1/0,$e=-1/0,it=-1/0,pt=0,Et=we;pt<Et.length;pt+=1){var Ft=Et[pt];Se=Math.min(Se,Ft.x),Oe=Math.min(Oe,Ft.y),$e=Math.max($e,Ft.x),it=Math.max(it,Ft.y)}var Lt=Math.max($e-Se,it-Oe),Gt=Math.max(0,Math.floor(-Math.log(Lt)/Math.LN2)),Ut=Math.pow(2,Gt);return new e.CanonicalTileID(Gt,Math.floor((Se+$e)/2*Ut),Math.floor((Oe+it)/2*Ut))}(ce),this.minzoom=this.maxzoom=this.tileID.z;var ge=ce.map(function(we){return Z.tileID.getTilePoint(we)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ge[0].x,ge[0].y,0,0),this._boundsArray.emplaceBack(ge[1].x,ge[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ge[3].x,ge[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ge[2].x,ge[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},N.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var j=this.map.painter.context,Z=j.gl;for(var ce in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(j,this.image,Z.RGBA),this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)),this.tiles){var ge=this.tiles[ce];"loaded"!==ge.state&&(ge.state="loaded",ge.texture=this.texture)}}},N.prototype.loadTile=function(j,Z){this.tileID&&this.tileID.equals(j.tileID.canonical)?(this.tiles[String(j.tileID.wrap)]=j,j.buckets={},Z(null)):(j.state="errored",Z(null))},N.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return!1},N}(e.Evented),K=function(P){function N(j,Z,ce,ge){P.call(this,j,Z,ce,ge),this.roundZoom=!0,this.type="video",this.options=Z}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){var j=this;this._loaded=!1;var Z=this.options;this.urls=[];for(var ce=0,ge=Z.urls;ce<ge.length;ce+=1)this.urls.push(this.map._requestManager.transformRequest(ge[ce],e.ResourceType.Source).url);e.getVideo(this.urls,function(Se,Oe){j._loaded=!0,Se?j.fire(new e.ErrorEvent(Se)):Oe&&(j.video=Oe,j.video.loop=!0,j.video.addEventListener("playing",function(){j.map.triggerRepaint()}),j.map&&j.video.play(),j._finishLoading())})},N.prototype.pause=function(){this.video&&this.video.pause()},N.prototype.play=function(){this.video&&this.video.play()},N.prototype.seek=function(j){if(this.video){var Z=this.video.seekable;j<Z.start(0)||j>Z.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+Z.start(0)+" and "+Z.end(0)+"-second mark."))):this.video.currentTime=j}},N.prototype.getVideo=function(){return this.video},N.prototype.onAdd=function(j){this.map||(this.map=j,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},N.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var j=this.map.painter.context,Z=j.gl;for(var ce in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Z.texSubImage2D(Z.TEXTURE_2D,0,0,0,Z.RGBA,Z.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(j,this.video,Z.RGBA),this.texture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE)),this.tiles){var ge=this.tiles[ce];"loaded"!==ge.state&&(ge.state="loaded",ge.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this.video&&!this.video.paused},N}(X),ae=function(P){function N(j,Z,ce,ge){P.call(this,j,Z,ce,ge),Z.coordinates?Array.isArray(Z.coordinates)&&4===Z.coordinates.length&&!Z.coordinates.some(function(we){return!Array.isArray(we)||2!==we.length||we.some(function(Se){return"number"!=typeof Se})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+j,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+j,null,'missing required property "coordinates"'))),Z.animate&&"boolean"!=typeof Z.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+j,null,'optional "animate" property must be a boolean value'))),Z.canvas?"string"==typeof Z.canvas||Z.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+j,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+j,null,'missing required property "canvas"'))),this.options=Z,this.animate=void 0===Z.animate||Z.animate}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},N.prototype.getCanvas=function(){return this.canvas},N.prototype.onAdd=function(j){this.map=j,this.load(),this.canvas&&this.animate&&this.play()},N.prototype.onRemove=function(){this.pause()},N.prototype.prepare=function(){var j=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,j=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,j=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var Z=this.map.painter.context,ce=Z.gl;for(var ge in this.boundsBuffer||(this.boundsBuffer=Z.createVertexBuffer(this._boundsArray,te.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(j||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(Z,this.canvas,ce.RGBA,{premultiply:!0}),this.tiles){var we=this.tiles[ge];"loaded"!==we.state&&(we.state="loaded",we.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this._playing},N.prototype._hasInvalidDimensions=function(){for(var j=0,Z=[this.canvas.width,this.canvas.height];j<Z.length;j+=1){var ce=Z[j];if(isNaN(ce)||ce<=0)return!0}return!1},N}(X),U={vector:z,raster:Y,"raster-dem":G,geojson:J,video:K,image:X,canvas:ae};function V(P,N){var j=e.identity([]);return e.translate(j,j,[1,1,0]),e.scale(j,j,[.5*P.width,.5*P.height,1]),e.multiply(j,j,P.calculatePosMatrix(N.toUnwrapped()))}function q(P,N,j,Z,ce,ge){var we=function(zt,Lt,Gt){if(zt)for(var Ut=0,Zt=zt;Ut<Zt.length;Ut+=1){var vn=Lt[Zt[Ut]];if(vn&&vn.source===Gt&&"fill-extrusion"===vn.type)return!0}else for(var En in Lt){var qn=Lt[En];if(qn.source===Gt&&"fill-extrusion"===qn.type)return!0}return!1}(ce&&ce.layers,N,P.id),Se=ge.maxPitchScaleFactor(),Oe=P.tilesIn(Z,Se,we);Oe.sort(ie);for(var $e=[],it=0,pt=Oe;it<pt.length;it+=1){var Et=pt[it];$e.push({wrappedTileID:Et.tileID.wrapped().key,queryResults:Et.tile.queryRenderedFeatures(N,j,P._state,Et.queryGeometry,Et.cameraQueryGeometry,Et.scale,ce,ge,Se,V(P.transform,Et.tileID))})}var Ft=function(zt){for(var Lt={},Gt={},Ut=0,Zt=zt;Ut<Zt.length;Ut+=1){var vn=Zt[Ut],En=vn.queryResults,qn=vn.wrappedTileID,Vn=Gt[qn]=Gt[qn]||{};for(var pr in En)for(var gr=En[pr],Er=Vn[pr]=Vn[pr]||{},yr=Lt[pr]=Lt[pr]||[],Jr=0,vi=gr;Jr<vi.length;Jr+=1){var Fi=vi[Jr];Er[Fi.featureIndex]||(Er[Fi.featureIndex]=!0,yr.push(Fi))}}return Lt}($e);for(var Dt in Ft)Ft[Dt].forEach(function(zt){var Lt=zt.feature,Gt=P.getFeatureState(Lt.layer["source-layer"],Lt.id);Lt.source=Lt.layer.source,Lt.layer["source-layer"]&&(Lt.sourceLayer=Lt.layer["source-layer"]),Lt.state=Gt});return Ft}function ie(P,N){var j=P.tileID,Z=N.tileID;return j.overscaledZ-Z.overscaledZ||j.canonical.y-Z.canonical.y||j.wrap-Z.wrap||j.canonical.x-Z.canonical.x}var H=function(P,N){this.max=P,this.onRemove=N,this.reset()};H.prototype.reset=function(){for(var P in this.data)for(var N=0,j=this.data[P];N<j.length;N+=1){var Z=j[N];Z.timeout&&clearTimeout(Z.timeout),this.onRemove(Z.value)}return this.data={},this.order=[],this},H.prototype.add=function(P,N,j){var Z=this,ce=P.wrapped().key;void 0===this.data[ce]&&(this.data[ce]=[]);var ge={value:N,timeout:void 0};if(void 0!==j&&(ge.timeout=setTimeout(function(){Z.remove(P,ge)},j)),this.data[ce].push(ge),this.order.push(ce),this.order.length>this.max){var we=this._getAndRemoveByKey(this.order[0]);we&&this.onRemove(we)}return this},H.prototype.has=function(P){return P.wrapped().key in this.data},H.prototype.getAndRemove=function(P){return this.has(P)?this._getAndRemoveByKey(P.wrapped().key):null},H.prototype._getAndRemoveByKey=function(P){var N=this.data[P].shift();return N.timeout&&clearTimeout(N.timeout),0===this.data[P].length&&delete this.data[P],this.order.splice(this.order.indexOf(P),1),N.value},H.prototype.getByKey=function(P){var N=this.data[P];return N?N[0].value:null},H.prototype.get=function(P){return this.has(P)?this.data[P.wrapped().key][0].value:null},H.prototype.remove=function(P,N){if(!this.has(P))return this;var j=P.wrapped().key,Z=void 0===N?0:this.data[j].indexOf(N),ce=this.data[j][Z];return this.data[j].splice(Z,1),ce.timeout&&clearTimeout(ce.timeout),0===this.data[j].length&&delete this.data[j],this.onRemove(ce.value),this.order.splice(this.order.indexOf(j),1),this},H.prototype.setMaxSize=function(P){for(this.max=P;this.order.length>this.max;){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},H.prototype.filter=function(P){var N=[];for(var j in this.data)for(var Z=0,ce=this.data[j];Z<ce.length;Z+=1){var ge=ce[Z];P(ge.value)||N.push(ge)}for(var we=0,Se=N;we<Se.length;we+=1){var Oe=Se[we];this.remove(Oe.value.tileID,Oe)}};var ee=function(P,N,j){this.context=P;var Z=P.gl;this.buffer=Z.createBuffer(),this.dynamicDraw=Boolean(j),this.context.unbindVAO(),P.bindElementBuffer.set(this.buffer),Z.bufferData(Z.ELEMENT_ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?Z.DYNAMIC_DRAW:Z.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};ee.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ee.prototype.updateData=function(P){var N=this.context.gl;this.context.unbindVAO(),this.bind(),N.bufferSubData(N.ELEMENT_ARRAY_BUFFER,0,P.arrayBuffer)},ee.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},oe=function(P,N,j,Z){this.length=N.length,this.attributes=j,this.itemSize=N.bytesPerElement,this.dynamicDraw=Z,this.context=P;var ce=P.gl;this.buffer=ce.createBuffer(),P.bindVertexBuffer.set(this.buffer),ce.bufferData(ce.ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?ce.DYNAMIC_DRAW:ce.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};oe.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},oe.prototype.updateData=function(P){var N=this.context.gl;this.bind(),N.bufferSubData(N.ARRAY_BUFFER,0,P.arrayBuffer)},oe.prototype.enableAttributes=function(P,N){for(var j=0;j<this.attributes.length;j++){var ce=N.attributes[this.attributes[j].name];void 0!==ce&&P.enableVertexAttribArray(ce)}},oe.prototype.setVertexAttribPointers=function(P,N,j){for(var Z=0;Z<this.attributes.length;Z++){var ce=this.attributes[Z],ge=N.attributes[ce.name];void 0!==ge&&P.vertexAttribPointer(ge,ce.components,P[Q[ce.type]],!1,this.itemSize,ce.offset+this.itemSize*(j||0))}},oe.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var le=function(P){this.gl=P.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};le.prototype.get=function(){return this.current},le.prototype.set=function(P){},le.prototype.getDefault=function(){return this.default},le.prototype.setDefault=function(){this.set(this.default)};var de=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(j){var Z=this.current;(j.r!==Z.r||j.g!==Z.g||j.b!==Z.b||j.a!==Z.a||this.dirty)&&(this.gl.clearColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},N}(le),fe=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 1},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearDepth(j),this.current=j,this.dirty=!1)},N}(le),be=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 0},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearStencil(j),this.current=j,this.dirty=!1)},N}(le),he=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return[!0,!0,!0,!0]},N.prototype.set=function(j){var Z=this.current;(j[0]!==Z[0]||j[1]!==Z[1]||j[2]!==Z[2]||j[3]!==Z[3]||this.dirty)&&(this.gl.colorMask(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},N}(le),_e=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!0},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthMask(j),this.current=j,this.dirty=!1)},N}(le),Ce=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 255},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.stencilMask(j),this.current=j,this.dirty=!1)},N}(le),Ee=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},N.prototype.set=function(j){var Z=this.current;(j.func!==Z.func||j.ref!==Z.ref||j.mask!==Z.mask||this.dirty)&&(this.gl.stencilFunc(j.func,j.ref,j.mask),this.current=j,this.dirty=!1)},N}(le),Ae=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){var j=this.gl;return[j.KEEP,j.KEEP,j.KEEP]},N.prototype.set=function(j){var Z=this.current;(j[0]!==Z[0]||j[1]!==Z[1]||j[2]!==Z[2]||this.dirty)&&(this.gl.stencilOp(j[0],j[1],j[2]),this.current=j,this.dirty=!1)},N}(le),ze=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;j?Z.enable(Z.STENCIL_TEST):Z.disable(Z.STENCIL_TEST),this.current=j,this.dirty=!1}},N}(le),ve=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return[0,1]},N.prototype.set=function(j){var Z=this.current;(j[0]!==Z[0]||j[1]!==Z[1]||this.dirty)&&(this.gl.depthRange(j[0],j[1]),this.current=j,this.dirty=!1)},N}(le),Te=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;j?Z.enable(Z.DEPTH_TEST):Z.disable(Z.DEPTH_TEST),this.current=j,this.dirty=!1}},N}(le),Ie=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.LESS},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthFunc(j),this.current=j,this.dirty=!1)},N}(le),De=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;j?Z.enable(Z.BLEND):Z.disable(Z.BLEND),this.current=j,this.dirty=!1}},N}(le),Fe=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){var j=this.gl;return[j.ONE,j.ZERO]},N.prototype.set=function(j){var Z=this.current;(j[0]!==Z[0]||j[1]!==Z[1]||this.dirty)&&(this.gl.blendFunc(j[0],j[1]),this.current=j,this.dirty=!1)},N}(le),Ue=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(j){var Z=this.current;(j.r!==Z.r||j.g!==Z.g||j.b!==Z.b||j.a!==Z.a||this.dirty)&&(this.gl.blendColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},N}(le),qe=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.FUNC_ADD},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.blendEquation(j),this.current=j,this.dirty=!1)},N}(le),je=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;j?Z.enable(Z.CULL_FACE):Z.disable(Z.CULL_FACE),this.current=j,this.dirty=!1}},N}(le),rt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.BACK},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.cullFace(j),this.current=j,this.dirty=!1)},N}(le),Ne=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.CCW},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.frontFace(j),this.current=j,this.dirty=!1)},N}(le),Be=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.useProgram(j),this.current=j,this.dirty=!1)},N}(le),We=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.TEXTURE0},N.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.activeTexture(j),this.current=j,this.dirty=!1)},N}(le),Ye=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){var j=this.gl;return[0,0,j.drawingBufferWidth,j.drawingBufferHeight]},N.prototype.set=function(j){var Z=this.current;(j[0]!==Z[0]||j[1]!==Z[1]||j[2]!==Z[2]||j[3]!==Z[3]||this.dirty)&&(this.gl.viewport(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},N}(le),lt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;Z.bindFramebuffer(Z.FRAMEBUFFER,j),this.current=j,this.dirty=!1}},N}(le),mt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;Z.bindRenderbuffer(Z.RENDERBUFFER,j),this.current=j,this.dirty=!1}},N}(le),Tt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;Z.bindTexture(Z.TEXTURE_2D,j),this.current=j,this.dirty=!1}},N}(le),It=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;Z.bindBuffer(Z.ARRAY_BUFFER,j),this.current=j,this.dirty=!1}},N}(le),Ct=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(j){var Z=this.gl;Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,j),this.current=j,this.dirty=!1},N}(le),ct=function(P){function N(j){P.call(this,j),this.vao=j.extVertexArrayObject}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(j){this.vao&&(j!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(j),this.current=j,this.dirty=!1)},N}(le),at=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return 4},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_ALIGNMENT,j),this.current=j,this.dirty=!1}},N}(le),St=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j),this.current=j,this.dirty=!1}},N}(le),Xt=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(j){if(j!==this.current||this.dirty){var Z=this.gl;Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,j),this.current=j,this.dirty=!1}},N}(le),tn=function(P){function N(j,Z){P.call(this,j),this.context=j,this.parent=Z}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N}(le),hn=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.setDirty=function(){this.dirty=!0},N.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Z=this.gl;Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,j,0),this.current=j,this.dirty=!1}},N}(tn),cn=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var Z=this.gl;Z.framebufferRenderbuffer(Z.FRAMEBUFFER,Z.DEPTH_ATTACHMENT,Z.RENDERBUFFER,j),this.current=j,this.dirty=!1}},N}(tn),yn=function(P,N,j,Z){this.context=P,this.width=N,this.height=j;var ge=this.framebuffer=P.gl.createFramebuffer();this.colorAttachment=new hn(P,ge),Z&&(this.depthAttachment=new cn(P,ge))};yn.prototype.destroy=function(){var P=this.context.gl,N=this.colorAttachment.get();if(N&&P.deleteTexture(N),this.depthAttachment){var j=this.depthAttachment.get();j&&P.deleteRenderbuffer(j)}P.deleteFramebuffer(this.framebuffer)};var en=function(P,N,j){this.func=P,this.mask=N,this.range=j};en.ReadOnly=!1,en.ReadWrite=!0,en.disabled=new en(519,en.ReadOnly,[0,1]);var Xe=function(P,N,j,Z,ce,ge){this.test=P,this.ref=N,this.mask=j,this.fail=Z,this.depthFail=ce,this.pass=ge};Xe.disabled=new Xe({func:519,mask:0},0,0,7680,7680,7680);var tt=function(P,N,j){this.blendFunction=P,this.blendColor=N,this.mask=j};tt.disabled=new tt(tt.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),tt.unblended=new tt(tt.Replace,e.Color.transparent,[!0,!0,!0,!0]),tt.alphaBlended=new tt([1,771],e.Color.transparent,[!0,!0,!0,!0]);var ye=function(P,N,j){this.enable=P,this.mode=N,this.frontFace=j};ye.disabled=new ye(!1,1029,2305),ye.backCCW=new ye(!0,1029,2305);var ke=function(P){this.gl=P,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new de(this),this.clearDepth=new fe(this),this.clearStencil=new be(this),this.colorMask=new he(this),this.depthMask=new _e(this),this.stencilMask=new Ce(this),this.stencilFunc=new Ee(this),this.stencilOp=new Ae(this),this.stencilTest=new ze(this),this.depthRange=new ve(this),this.depthTest=new Te(this),this.depthFunc=new Ie(this),this.blend=new De(this),this.blendFunc=new Fe(this),this.blendColor=new Ue(this),this.blendEquation=new qe(this),this.cullFace=new je(this),this.cullFaceSide=new rt(this),this.frontFace=new Ne(this),this.program=new Be(this),this.activeTexture=new We(this),this.viewport=new Ye(this),this.bindFramebuffer=new lt(this),this.bindRenderbuffer=new mt(this),this.bindTexture=new Tt(this),this.bindVertexBuffer=new It(this),this.bindElementBuffer=new Ct(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ct(this),this.pixelStoreUnpack=new at(this),this.pixelStoreUnpackPremultiplyAlpha=new St(this),this.pixelStoreUnpackFlipY=new Xt(this),this.extTextureFilterAnisotropic=P.getExtension("EXT_texture_filter_anisotropic")||P.getExtension("MOZ_EXT_texture_filter_anisotropic")||P.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=P.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=P.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(P.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=P.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=P.getExtension("EXT_disjoint_timer_query")};ke.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ke.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ke.prototype.createIndexBuffer=function(P,N){return new ee(this,P,N)},ke.prototype.createVertexBuffer=function(P,N,j){return new oe(this,P,N,j)},ke.prototype.createRenderbuffer=function(P,N,j){var Z=this.gl,ce=Z.createRenderbuffer();return this.bindRenderbuffer.set(ce),Z.renderbufferStorage(Z.RENDERBUFFER,P,N,j),this.bindRenderbuffer.set(null),ce},ke.prototype.createFramebuffer=function(P,N,j){return new yn(this,P,N,j)},ke.prototype.clear=function(P){var N=P.color,j=P.depth,Z=this.gl,ce=0;N&&(ce|=Z.COLOR_BUFFER_BIT,this.clearColor.set(N),this.colorMask.set([!0,!0,!0,!0])),void 0!==j&&(ce|=Z.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(j),this.depthMask.set(!0)),Z.clear(ce)},ke.prototype.setCullFace=function(P){!1===P.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(P.mode),this.frontFace.set(P.frontFace))},ke.prototype.setDepthMode=function(P){P.func!==this.gl.ALWAYS||P.mask?(this.depthTest.set(!0),this.depthFunc.set(P.func),this.depthMask.set(P.mask),this.depthRange.set(P.range)):this.depthTest.set(!1)},ke.prototype.setStencilMode=function(P){P.test.func!==this.gl.ALWAYS||P.mask?(this.stencilTest.set(!0),this.stencilMask.set(P.mask),this.stencilOp.set([P.fail,P.depthFail,P.pass]),this.stencilFunc.set({func:P.test.func,ref:P.ref,mask:P.test.mask})):this.stencilTest.set(!1)},ke.prototype.setColorMode=function(P){e.deepEqual(P.blendFunction,tt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(P.blendFunction),this.blendColor.set(P.blendColor)),this.colorMask.set(P.mask)},ke.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ve=function(P){function N(j,Z,ce){var ge=this;P.call(this),this.id=j,this.dispatcher=ce,this.on("data",function(we){"source"===we.dataType&&"metadata"===we.sourceDataType&&(ge._sourceLoaded=!0),ge._sourceLoaded&&!ge._paused&&"source"===we.dataType&&"content"===we.sourceDataType&&(ge.reload(),ge.transform&&ge.update(ge.transform))}),this.on("error",function(){ge._sourceErrored=!0}),this._source=function(we,Se,Oe,$e){var it=new U[Se.type](we,Se,Oe,$e);if(it.id!==we)throw new Error("Expected Source id to be "+we+" instead of "+it.id);return e.bindAll(["load","abort","unload","serialize","prepare"],it),it}(j,Z,ce,this),this._tiles={},this._cache=new H(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.onAdd=function(j){this.map=j,this._maxTileCacheSize=j?j._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(j)},N.prototype.onRemove=function(j){this._source&&this._source.onRemove&&this._source.onRemove(j)},N.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var j in this._tiles){var Z=this._tiles[j];if("loaded"!==Z.state&&"errored"!==Z.state)return!1}return!0},N.prototype.getSource=function(){return this._source},N.prototype.pause=function(){this._paused=!0},N.prototype.resume=function(){if(this._paused){var j=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,j&&this.reload(),this.transform&&this.update(this.transform)}},N.prototype._loadTile=function(j,Z){return this._source.loadTile(j,Z)},N.prototype._unloadTile=function(j){if(this._source.unloadTile)return this._source.unloadTile(j,function(){})},N.prototype._abortTile=function(j){if(this._source.abortTile)return this._source.abortTile(j,function(){})},N.prototype.serialize=function(){return this._source.serialize()},N.prototype.prepare=function(j){for(var Z in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ce=this._tiles[Z];ce.upload(j),ce.prepare(this.map.style.imageManager)}},N.prototype.getIds=function(){return e.values(this._tiles).map(function(j){return j.tileID}).sort(Je).map(function(j){return j.key})},N.prototype.getRenderableIds=function(j){var Z=this,ce=[];for(var ge in this._tiles)this._isIdRenderable(ge,j)&&ce.push(this._tiles[ge]);return j?ce.sort(function(we,Se){var Oe=we.tileID,$e=Se.tileID,it=new e.Point(Oe.canonical.x,Oe.canonical.y)._rotate(Z.transform.angle),pt=new e.Point($e.canonical.x,$e.canonical.y)._rotate(Z.transform.angle);return Oe.overscaledZ-$e.overscaledZ||pt.y-it.y||pt.x-it.x}).map(function(we){return we.tileID.key}):ce.map(function(we){return we.tileID}).sort(Je).map(function(we){return we.key})},N.prototype.hasRenderableParent=function(j){var Z=this.findLoadedParent(j,0);return!!Z&&this._isIdRenderable(Z.tileID.key)},N.prototype._isIdRenderable=function(j,Z){return this._tiles[j]&&this._tiles[j].hasData()&&!this._coveredTiles[j]&&(Z||!this._tiles[j].holdingForFade())},N.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var j in this._cache.reset(),this._tiles)"errored"!==this._tiles[j].state&&this._reloadTile(j,"reloading")},N.prototype._reloadTile=function(j,Z){var ce=this._tiles[j];ce&&("loading"!==ce.state&&(ce.state=Z),this._loadTile(ce,this._tileLoaded.bind(this,ce,j,Z)))},N.prototype._tileLoaded=function(j,Z,ce,ge){if(ge)return j.state="errored",void(404!==ge.status?this._source.fire(new e.ErrorEvent(ge,{tile:j})):this.update(this.transform));j.timeAdded=e.browser.now(),"expired"===ce&&(j.refreshedUponExpiration=!0),this._setTileReloadTimer(Z,j),"raster-dem"===this.getSource().type&&j.dem&&this._backfillDEM(j),this._state.initializeTileState(j,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:j,coord:j.tileID}))},N.prototype._backfillDEM=function(j){for(var Z=this.getRenderableIds(),ce=0;ce<Z.length;ce++){var ge=Z[ce];if(j.neighboringTiles&&j.neighboringTiles[ge]){var we=this.getTileByID(ge);Se(j,we),Se(we,j)}}function Se(Oe,$e){Oe.needsHillshadePrepare=!0;var it=$e.tileID.canonical.x-Oe.tileID.canonical.x,pt=$e.tileID.canonical.y-Oe.tileID.canonical.y,Et=Math.pow(2,Oe.tileID.canonical.z),Ft=$e.tileID.key;0===it&&0===pt||Math.abs(pt)>1||(Math.abs(it)>1&&(1===Math.abs(it+Et)?it+=Et:1===Math.abs(it-Et)&&(it-=Et)),$e.dem&&Oe.dem&&(Oe.dem.backfillBorder($e.dem,it,pt),Oe.neighboringTiles&&Oe.neighboringTiles[Ft]&&(Oe.neighboringTiles[Ft].backfilled=!0)))}},N.prototype.getTile=function(j){return this.getTileByID(j.key)},N.prototype.getTileByID=function(j){return this._tiles[j]},N.prototype._retainLoadedChildren=function(j,Z,ce,ge){for(var we in this._tiles){var Se=this._tiles[we];if(!(ge[we]||!Se.hasData()||Se.tileID.overscaledZ<=Z||Se.tileID.overscaledZ>ce)){for(var Oe=Se.tileID;Se&&Se.tileID.overscaledZ>Z+1;){var $e=Se.tileID.scaledTo(Se.tileID.overscaledZ-1);(Se=this._tiles[$e.key])&&Se.hasData()&&(Oe=$e)}for(var it=Oe;it.overscaledZ>Z;)if(j[(it=it.scaledTo(it.overscaledZ-1)).key]){ge[Oe.key]=Oe;break}}}},N.prototype.findLoadedParent=function(j,Z){if(j.key in this._loadedParentTiles){var ce=this._loadedParentTiles[j.key];return ce&&ce.tileID.overscaledZ>=Z?ce:null}for(var ge=j.overscaledZ-1;ge>=Z;ge--){var we=j.scaledTo(ge),Se=this._getLoadedTile(we);if(Se)return Se}},N.prototype._getLoadedTile=function(j){var Z=this._tiles[j.key];return Z&&Z.hasData()?Z:this._cache.getByKey(j.wrapped().key)},N.prototype.updateCacheSize=function(j){var Z=(Math.ceil(j.width/this._source.tileSize)+1)*(Math.ceil(j.height/this._source.tileSize)+1),ce=Math.floor(5*Z),ge="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ce):ce;this._cache.setMaxSize(ge)},N.prototype.handleWrapJump=function(j){var ce=Math.round((j-(void 0===this._prevLng?j:this._prevLng))/360);if(this._prevLng=j,ce){var ge={};for(var we in this._tiles){var Se=this._tiles[we];Se.tileID=Se.tileID.unwrapTo(Se.tileID.wrap+ce),ge[Se.tileID.key]=Se}for(var Oe in this._tiles=ge,this._timers)clearTimeout(this._timers[Oe]),delete this._timers[Oe];for(var $e in this._tiles)this._setTileReloadTimer($e,this._tiles[$e])}},N.prototype.update=function(j){var Z=this;if(this.transform=j,this._sourceLoaded&&!this._paused){var ce;this.updateCacheSize(j),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ce=j.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Vn){return new e.OverscaledTileID(Vn.canonical.z,Vn.wrap,Vn.canonical.z,Vn.canonical.x,Vn.canonical.y)}):(ce=j.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ce=ce.filter(function(Vn){return Z._source.hasTile(Vn)}))):ce=[];var ge=j.coveringZoomLevel(this._source),we=Math.max(ge-N.maxOverzooming,this._source.minzoom),Se=Math.max(ge+N.maxUnderzooming,this._source.minzoom),Oe=this._updateRetainedTiles(ce,ge);if(nt(this._source.type)){for(var $e={},it={},pt=0,Et=Object.keys(Oe);pt<Et.length;pt+=1){var Ft=Et[pt],Dt=Oe[Ft],zt=this._tiles[Ft];if(zt&&!(zt.fadeEndTime&&zt.fadeEndTime<=e.browser.now())){var Lt=this.findLoadedParent(Dt,we);Lt&&(this._addTile(Lt.tileID),$e[Lt.tileID.key]=Lt.tileID),it[Ft]=Dt}}for(var Gt in this._retainLoadedChildren(it,ge,Se,Oe),$e)Oe[Gt]||(this._coveredTiles[Gt]=!0,Oe[Gt]=$e[Gt])}for(var Ut in Oe)this._tiles[Ut].clearFadeHold();for(var Zt=0,vn=e.keysDifference(this._tiles,Oe);Zt<vn.length;Zt+=1){var En=vn[Zt],qn=this._tiles[En];qn.hasSymbolBuckets&&!qn.holdingForFade()?qn.setHoldDuration(this.map._fadeDuration):qn.hasSymbolBuckets&&!qn.symbolFadeFinished()||this._removeTile(En)}this._updateLoadedParentTileCache()}},N.prototype.releaseSymbolFadeTiles=function(){for(var j in this._tiles)this._tiles[j].holdingForFade()&&this._removeTile(j)},N.prototype._updateRetainedTiles=function(j,Z){for(var ce={},ge={},we=Math.max(Z-N.maxOverzooming,this._source.minzoom),Se=Math.max(Z+N.maxUnderzooming,this._source.minzoom),Oe={},$e=0,it=j;$e<it.length;$e+=1){var pt=it[$e],Et=this._addTile(pt);ce[pt.key]=pt,Et.hasData()||Z<this._source.maxzoom&&(Oe[pt.key]=pt)}this._retainLoadedChildren(Oe,Z,Se,ce);for(var Ft=0,Dt=j;Ft<Dt.length;Ft+=1){var zt=Dt[Ft],Lt=this._tiles[zt.key];if(!Lt.hasData()){if(Z+1>this._source.maxzoom){var Gt=zt.children(this._source.maxzoom)[0],Ut=this.getTile(Gt);if(Ut&&Ut.hasData()){ce[Gt.key]=Gt;continue}}else{var Zt=zt.children(this._source.maxzoom);if(ce[Zt[0].key]&&ce[Zt[1].key]&&ce[Zt[2].key]&&ce[Zt[3].key])continue}for(var vn=Lt.wasRequested(),En=zt.overscaledZ-1;En>=we;--En){var qn=zt.scaledTo(En);if(ge[qn.key]||(ge[qn.key]=!0,!(Lt=this.getTile(qn))&&vn&&(Lt=this._addTile(qn)),Lt&&(ce[qn.key]=qn,vn=Lt.wasRequested(),Lt.hasData())))break}}}return ce},N.prototype._updateLoadedParentTileCache=function(){for(var j in this._loadedParentTiles={},this._tiles){for(var Z=[],ce=void 0,ge=this._tiles[j].tileID;ge.overscaledZ>0;){if(ge.key in this._loadedParentTiles){ce=this._loadedParentTiles[ge.key];break}Z.push(ge.key);var we=ge.scaledTo(ge.overscaledZ-1);if(ce=this._getLoadedTile(we))break;ge=we}for(var Se=0,Oe=Z;Se<Oe.length;Se+=1)this._loadedParentTiles[Oe[Se]]=ce}},N.prototype._addTile=function(j){var Z=this._tiles[j.key];if(Z)return Z;(Z=this._cache.getAndRemove(j))&&(this._setTileReloadTimer(j.key,Z),Z.tileID=j,this._state.initializeTileState(Z,this.map?this.map.painter:null),this._cacheTimers[j.key]&&(clearTimeout(this._cacheTimers[j.key]),delete this._cacheTimers[j.key],this._setTileReloadTimer(j.key,Z)));var ce=Boolean(Z);return ce||(Z=new e.Tile(j,this._source.tileSize*j.overscaleFactor()),this._loadTile(Z,this._tileLoaded.bind(this,Z,j.key,Z.state))),Z?(Z.uses++,this._tiles[j.key]=Z,ce||this._source.fire(new e.Event("dataloading",{tile:Z,coord:Z.tileID,dataType:"source"})),Z):null},N.prototype._setTileReloadTimer=function(j,Z){var ce=this;j in this._timers&&(clearTimeout(this._timers[j]),delete this._timers[j]);var ge=Z.getExpiryTimeout();ge&&(this._timers[j]=setTimeout(function(){ce._reloadTile(j,"expired"),delete ce._timers[j]},ge))},N.prototype._removeTile=function(j){var Z=this._tiles[j];Z&&(Z.uses--,delete this._tiles[j],this._timers[j]&&(clearTimeout(this._timers[j]),delete this._timers[j]),Z.uses>0||(Z.hasData()&&"reloading"!==Z.state?this._cache.add(Z.tileID,Z,Z.getExpiryTimeout()):(Z.aborted=!0,this._abortTile(Z),this._unloadTile(Z))))},N.prototype.clearTiles=function(){for(var j in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(j);this._cache.reset()},N.prototype.tilesIn=function(j,Z,ce){var ge=this,we=[],Se=this.transform;if(!Se)return we;for(var Oe=ce?Se.getCameraQueryGeometry(j):j,$e=j.map(function(En){return Se.pointCoordinate(En)}),it=Oe.map(function(En){return Se.pointCoordinate(En)}),pt=this.getIds(),Et=1/0,Ft=1/0,Dt=-1/0,zt=-1/0,Lt=0,Gt=it;Lt<Gt.length;Lt+=1){var Ut=Gt[Lt];Et=Math.min(Et,Ut.x),Ft=Math.min(Ft,Ut.y),Dt=Math.max(Dt,Ut.x),zt=Math.max(zt,Ut.y)}for(var Zt=function(En){var qn=ge._tiles[pt[En]];if(!qn.holdingForFade()){var Vn=qn.tileID,pr=Math.pow(2,Se.zoom-qn.tileID.overscaledZ),gr=Z*qn.queryPadding*e.EXTENT/qn.tileSize/pr,Er=[Vn.getTilePoint(new e.MercatorCoordinate(Et,Ft)),Vn.getTilePoint(new e.MercatorCoordinate(Dt,zt))];if(Er[0].x-gr<e.EXTENT&&Er[0].y-gr<e.EXTENT&&Er[1].x+gr>=0&&Er[1].y+gr>=0){var yr=$e.map(function(vi){return Vn.getTilePoint(vi)}),Jr=it.map(function(vi){return Vn.getTilePoint(vi)});we.push({tile:qn,tileID:Vn,queryGeometry:yr,cameraQueryGeometry:Jr,scale:pr})}}},vn=0;vn<pt.length;vn++)Zt(vn);return we},N.prototype.getVisibleCoordinates=function(j){for(var Z=this,ce=this.getRenderableIds(j).map(function(Oe){return Z._tiles[Oe].tileID}),ge=0,we=ce;ge<we.length;ge+=1){var Se=we[ge];Se.posMatrix=this.transform.calculatePosMatrix(Se.toUnwrapped())}return ce},N.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(nt(this._source.type))for(var j in this._tiles){var Z=this._tiles[j];if(void 0!==Z.fadeEndTime&&Z.fadeEndTime>=e.browser.now())return!0}return!1},N.prototype.setFeatureState=function(j,Z,ce){this._state.updateState(j=j||"_geojsonTileLayer",Z,ce)},N.prototype.removeFeatureState=function(j,Z,ce){this._state.removeFeatureState(j=j||"_geojsonTileLayer",Z,ce)},N.prototype.getFeatureState=function(j,Z){return this._state.getState(j=j||"_geojsonTileLayer",Z)},N.prototype.setDependencies=function(j,Z,ce){var ge=this._tiles[j];ge&&ge.setDependencies(Z,ce)},N.prototype.reloadTilesForDependencies=function(j,Z){for(var ce in this._tiles)this._tiles[ce].hasDependency(j,Z)&&this._reloadTile(ce,"reloading");this._cache.filter(function(ge){return!ge.hasDependency(j,Z)})},N}(e.Evented);function Je(P,N){var j=Math.abs(2*P.wrap)-+(P.wrap<0),Z=Math.abs(2*N.wrap)-+(N.wrap<0);return P.overscaledZ-N.overscaledZ||Z-j||N.canonical.y-P.canonical.y||N.canonical.x-P.canonical.x}function nt(P){return"raster"===P||"image"===P||"video"===P}function Ke(){return new e.window.Worker(pe.workerUrl)}Ve.maxOverzooming=10,Ve.maxUnderzooming=3;var vt="mapboxgl_preloaded_worker_pool",gt=function(){this.active={}};gt.prototype.acquire=function(P){if(!this.workers)for(this.workers=[];this.workers.length<gt.workerCount;)this.workers.push(new Ke);return this.active[P]=!0,this.workers.slice()},gt.prototype.release=function(P){delete this.active[P],0===this.numActive()&&(this.workers.forEach(function(N){N.terminate()}),this.workers=null)},gt.prototype.isPreloaded=function(){return!!this.active[vt]},gt.prototype.numActive=function(){return Object.keys(this.active).length};var Ot,Vt=Math.floor(e.browser.hardwareConcurrency/2);function ft(){return Ot||(Ot=new gt),Ot}function bt(P,N){var j={};for(var Z in P)"ref"!==Z&&(j[Z]=P[Z]);return e.refProperties.forEach(function(ce){ce in N&&(j[ce]=N[ce])}),j}function Wt(P){P=P.slice();for(var N=Object.create(null),j=0;j<P.length;j++)N[P[j].id]=P[j];for(var Z=0;Z<P.length;Z++)"ref"in P[Z]&&(P[Z]=bt(P[Z],N[P[Z].ref]));return P}gt.workerCount=Math.max(Math.min(Vt,6),1);var Pt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Bt(P,N,j){j.push({command:Pt.addSource,args:[P,N[P]]})}function Pe(P,N,j){N.push({command:Pt.removeSource,args:[P]}),j[P]=!0}function et(P,N,j,Z){Pe(P,j,Z),Bt(P,N,j)}function dt(P,N,j){var Z;for(Z in P[j])if(P[j].hasOwnProperty(Z)&&"data"!==Z&&!e.deepEqual(P[j][Z],N[j][Z]))return!1;for(Z in N[j])if(N[j].hasOwnProperty(Z)&&"data"!==Z&&!e.deepEqual(P[j][Z],N[j][Z]))return!1;return!0}function xt(P,N,j,Z,ce,ge){var we;for(we in N=N||{},P=P||{})P.hasOwnProperty(we)&&(e.deepEqual(P[we],N[we])||j.push({command:ge,args:[Z,we,N[we],ce]}));for(we in N)N.hasOwnProperty(we)&&!P.hasOwnProperty(we)&&(e.deepEqual(P[we],N[we])||j.push({command:ge,args:[Z,we,N[we],ce]}))}function Rt(P){return P.id}function Yt(P,N){return P[N.id]=N,P}var Kt=function(P,N){this.reset(P,N)};Kt.prototype.reset=function(P,N){this.points=P||[],this._distances=[0];for(var j=1;j<this.points.length;j++)this._distances[j]=this._distances[j-1]+this.points[j].dist(this.points[j-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(N||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(P){if(1===this.points.length)return this.points[0];P=e.clamp(P,0,1);for(var N=1,j=this._distances[N],Z=P*this.paddedLength+this.padding;j<Z&&N<this._distances.length;)j=this._distances[++N];var ce=N-1,ge=this._distances[ce],we=j-ge,Se=we>0?(Z-ge)/we:0;return this.points[ce].mult(1-Se).add(this.points[N].mult(Se))};var Mn=function(P,N,j){var Z=this.boxCells=[],ce=this.circleCells=[];this.xCellCount=Math.ceil(P/j),this.yCellCount=Math.ceil(N/j);for(var ge=0;ge<this.xCellCount*this.yCellCount;ge++)Z.push([]),ce.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=P,this.height=N,this.xScale=this.xCellCount/P,this.yScale=this.yCellCount/N,this.boxUid=0,this.circleUid=0};function Un(P,N,j,Z,ce){var ge=e.create();return N?(e.scale(ge,ge,[1/ce,1/ce,1]),j||e.rotateZ(ge,ge,Z.angle)):e.multiply(ge,Z.labelPlaneMatrix,P),ge}function Tn(P,N,j,Z,ce){if(N){var ge=e.clone(P);return e.scale(ge,ge,[ce,ce,1]),j||e.rotateZ(ge,ge,-Z.angle),ge}return Z.glCoordMatrix}function un(P,N){var j=[P.x,P.y,0,1];qr(j,j,N);var Z=j[3];return{point:new e.Point(j[0]/Z,j[1]/Z),signedDistanceFromCamera:Z}}function an(P,N){return.5+P/N*.5}function fn(P,N){var j=P[0]/P[3],Z=P[1]/P[3];return j>=-N[0]&&j<=N[0]&&Z>=-N[1]&&Z<=N[1]}function pn(P,N,j,Z,ce,ge,we,Se){var Oe=Z?P.textSizeData:P.iconSizeData,$e=e.evaluateSizeForZoom(Oe,j.transform.zoom),it=[256/j.width*2+1,256/j.height*2+1],pt=Z?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;pt.clear();for(var Et=P.lineVertexArray,Ft=Z?P.text.placedSymbolArray:P.icon.placedSymbolArray,Dt=j.transform.width/j.transform.height,zt=!1,Lt=0;Lt<Ft.length;Lt++){var Gt=Ft.get(Lt);if(Gt.hidden||Gt.writingMode===e.WritingMode.vertical&&!zt)Qn(Gt.numGlyphs,pt);else{zt=!1;var Ut=[Gt.anchorX,Gt.anchorY,0,1];if(e.transformMat4(Ut,Ut,N),fn(Ut,it)){var vn=an(j.transform.cameraToCenterDistance,Ut[3]),En=e.evaluateSizeForFeature(Oe,$e,Gt),qn=we?En/vn:En*vn,Vn=new e.Point(Gt.anchorX,Gt.anchorY),pr=un(Vn,ce).point,gr={},Er=Kn(Gt,qn,!1,Se,N,ce,ge,P.glyphOffsetArray,Et,pt,pr,Vn,gr,Dt);zt=Er.useVertical,(Er.notEnoughRoom||zt||Er.needsFlipping&&Kn(Gt,qn,!0,Se,N,ce,ge,P.glyphOffsetArray,Et,pt,pr,Vn,gr,Dt).notEnoughRoom)&&Qn(Gt.numGlyphs,pt)}else Qn(Gt.numGlyphs,pt)}}Z?P.text.dynamicLayoutVertexBuffer.updateData(pt):P.icon.dynamicLayoutVertexBuffer.updateData(pt)}function Sn(P,N,j,Z,ce,ge,we,Se,Oe,$e,it){var pt=Se.glyphStartIndex+Se.numGlyphs,Et=Se.lineStartIndex,Ft=Se.lineStartIndex+Se.lineLength,Dt=N.getoffsetX(Se.glyphStartIndex),zt=N.getoffsetX(pt-1),Lt=cr(P*Dt,j,Z,ce,ge,we,Se.segment,Et,Ft,Oe,$e,it);if(!Lt)return null;var Gt=cr(P*zt,j,Z,ce,ge,we,Se.segment,Et,Ft,Oe,$e,it);return Gt?{first:Lt,last:Gt}:null}function Nn(P,N,j,Z){return P===e.WritingMode.horizontal&&Math.abs(j.y-N.y)>Math.abs(j.x-N.x)*Z?{useVertical:!0}:(P===e.WritingMode.vertical?N.y<j.y:N.x>j.x)?{needsFlipping:!0}:null}function Kn(P,N,j,Z,ce,ge,we,Se,Oe,$e,it,pt,Et,Ft){var Dt,zt=N/24,Lt=P.lineOffsetX*zt,Gt=P.lineOffsetY*zt;if(P.numGlyphs>1){var Ut=P.glyphStartIndex+P.numGlyphs,Zt=P.lineStartIndex,vn=P.lineStartIndex+P.lineLength,En=Sn(zt,Se,Lt,Gt,j,it,pt,P,Oe,ge,Et);if(!En)return{notEnoughRoom:!0};var qn=un(En.first.point,we).point,Vn=un(En.last.point,we).point;if(Z&&!j){var pr=Nn(P.writingMode,qn,Vn,Ft);if(pr)return pr}Dt=[En.first];for(var gr=P.glyphStartIndex+1;gr<Ut-1;gr++)Dt.push(cr(zt*Se.getoffsetX(gr),Lt,Gt,j,it,pt,P.segment,Zt,vn,Oe,ge,Et));Dt.push(En.last)}else{if(Z&&!j){var Er=un(pt,ce).point,yr=P.lineStartIndex+P.segment+1,Jr=new e.Point(Oe.getx(yr),Oe.gety(yr)),vi=un(Jr,ce),Fi=vi.signedDistanceFromCamera>0?vi.point:Bn(pt,Jr,Er,1,ce),or=Nn(P.writingMode,Er,Fi,Ft);if(or)return or}var zr=cr(zt*Se.getoffsetX(P.glyphStartIndex),Lt,Gt,j,it,pt,P.segment,P.lineStartIndex,P.lineStartIndex+P.lineLength,Oe,ge,Et);if(!zr)return{notEnoughRoom:!0};Dt=[zr]}for(var yi=0,ci=Dt;yi<ci.length;yi+=1){var Si=ci[yi];e.addDynamicAttributes($e,Si.point,Si.angle)}return{}}function Bn(P,N,j,Z,ce){var ge=un(P.add(P.sub(N)._unit()),ce).point,we=j.sub(ge);return j.add(we._mult(Z/we.mag()))}function cr(P,N,j,Z,ce,ge,we,Se,Oe,$e,it,pt){var Et=Z?P-N:P+N,Ft=Et>0?1:-1,Dt=0;Z&&(Ft*=-1,Dt=Math.PI),Ft<0&&(Dt+=Math.PI);for(var zt=Ft>0?Se+we:Se+we+1,Lt=ce,Gt=ce,Ut=0,Zt=0,vn=Math.abs(Et),En=[];Ut+Zt<=vn;){if((zt+=Ft)<Se||zt>=Oe)return null;if(Gt=Lt,En.push(Lt),void 0===(Lt=pt[zt])){var qn=new e.Point($e.getx(zt),$e.gety(zt)),Vn=un(qn,it);if(Vn.signedDistanceFromCamera>0)Lt=pt[zt]=Vn.point;else{var pr=zt-Ft;Lt=Bn(0===Ut?ge:new e.Point($e.getx(pr),$e.gety(pr)),qn,Gt,vn-Ut+1,it)}}Ut+=Zt,Zt=Gt.dist(Lt)}var gr=(vn-Ut)/Zt,Er=Lt.sub(Gt),yr=Er.mult(gr)._add(Gt);yr._add(Er._unit()._perp()._mult(j*Ft));var Jr=Dt+Math.atan2(Lt.y-Gt.y,Lt.x-Gt.x);return En.push(yr),{point:yr,angle:Jr,path:En}}Mn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Mn.prototype.insert=function(P,N,j,Z,ce){this._forEachCell(N,j,Z,ce,this._insertBoxCell,this.boxUid++),this.boxKeys.push(P),this.bboxes.push(N),this.bboxes.push(j),this.bboxes.push(Z),this.bboxes.push(ce)},Mn.prototype.insertCircle=function(P,N,j,Z){this._forEachCell(N-Z,j-Z,N+Z,j+Z,this._insertCircleCell,this.circleUid++),this.circleKeys.push(P),this.circles.push(N),this.circles.push(j),this.circles.push(Z)},Mn.prototype._insertBoxCell=function(P,N,j,Z,ce,ge){this.boxCells[ce].push(ge)},Mn.prototype._insertCircleCell=function(P,N,j,Z,ce,ge){this.circleCells[ce].push(ge)},Mn.prototype._query=function(P,N,j,Z,ce,ge){if(j<0||P>this.width||Z<0||N>this.height)return!ce&&[];var we=[];if(P<=0&&N<=0&&this.width<=j&&this.height<=Z){if(ce)return!0;for(var Se=0;Se<this.boxKeys.length;Se++)we.push({key:this.boxKeys[Se],x1:this.bboxes[4*Se],y1:this.bboxes[4*Se+1],x2:this.bboxes[4*Se+2],y2:this.bboxes[4*Se+3]});for(var Oe=0;Oe<this.circleKeys.length;Oe++){var $e=this.circles[3*Oe],it=this.circles[3*Oe+1],pt=this.circles[3*Oe+2];we.push({key:this.circleKeys[Oe],x1:$e-pt,y1:it-pt,x2:$e+pt,y2:it+pt})}return ge?we.filter(ge):we}return this._forEachCell(P,N,j,Z,this._queryCell,we,{hitTest:ce,seenUids:{box:{},circle:{}}},ge),ce?we.length>0:we},Mn.prototype._queryCircle=function(P,N,j,Z,ce){var ge=P-j,we=P+j,Se=N-j,Oe=N+j;if(we<0||ge>this.width||Oe<0||Se>this.height)return!Z&&[];var $e=[];return this._forEachCell(ge,Se,we,Oe,this._queryCellCircle,$e,{hitTest:Z,circle:{x:P,y:N,radius:j},seenUids:{box:{},circle:{}}},ce),Z?$e.length>0:$e},Mn.prototype.query=function(P,N,j,Z,ce){return this._query(P,N,j,Z,!1,ce)},Mn.prototype.hitTest=function(P,N,j,Z,ce){return this._query(P,N,j,Z,!0,ce)},Mn.prototype.hitTestCircle=function(P,N,j,Z){return this._queryCircle(P,N,j,!0,Z)},Mn.prototype._queryCell=function(P,N,j,Z,ce,ge,we,Se){var Oe=we.seenUids,$e=this.boxCells[ce];if(null!==$e)for(var it=this.bboxes,pt=0,Et=$e;pt<Et.length;pt+=1){var Ft=Et[pt];if(!Oe.box[Ft]){Oe.box[Ft]=!0;var Dt=4*Ft;if(P<=it[Dt+2]&&N<=it[Dt+3]&&j>=it[Dt+0]&&Z>=it[Dt+1]&&(!Se||Se(this.boxKeys[Ft]))){if(we.hitTest)return ge.push(!0),!0;ge.push({key:this.boxKeys[Ft],x1:it[Dt],y1:it[Dt+1],x2:it[Dt+2],y2:it[Dt+3]})}}}var zt=this.circleCells[ce];if(null!==zt)for(var Lt=this.circles,Gt=0,Ut=zt;Gt<Ut.length;Gt+=1){var Zt=Ut[Gt];if(!Oe.circle[Zt]){Oe.circle[Zt]=!0;var vn=3*Zt;if(this._circleAndRectCollide(Lt[vn],Lt[vn+1],Lt[vn+2],P,N,j,Z)&&(!Se||Se(this.circleKeys[Zt]))){if(we.hitTest)return ge.push(!0),!0;var En=Lt[vn],qn=Lt[vn+1],Vn=Lt[vn+2];ge.push({key:this.circleKeys[Zt],x1:En-Vn,y1:qn-Vn,x2:En+Vn,y2:qn+Vn})}}}},Mn.prototype._queryCellCircle=function(P,N,j,Z,ce,ge,we,Se){var Oe=we.circle,$e=we.seenUids,it=this.boxCells[ce];if(null!==it)for(var pt=this.bboxes,Et=0,Ft=it;Et<Ft.length;Et+=1){var Dt=Ft[Et];if(!$e.box[Dt]){$e.box[Dt]=!0;var zt=4*Dt;if(this._circleAndRectCollide(Oe.x,Oe.y,Oe.radius,pt[zt+0],pt[zt+1],pt[zt+2],pt[zt+3])&&(!Se||Se(this.boxKeys[Dt])))return ge.push(!0),!0}}var Lt=this.circleCells[ce];if(null!==Lt)for(var Gt=this.circles,Ut=0,Zt=Lt;Ut<Zt.length;Ut+=1){var vn=Zt[Ut];if(!$e.circle[vn]){$e.circle[vn]=!0;var En=3*vn;if(this._circlesCollide(Gt[En],Gt[En+1],Gt[En+2],Oe.x,Oe.y,Oe.radius)&&(!Se||Se(this.circleKeys[vn])))return ge.push(!0),!0}}},Mn.prototype._forEachCell=function(P,N,j,Z,ce,ge,we,Se){for(var Oe=this._convertToXCellCoord(P),$e=this._convertToYCellCoord(N),it=this._convertToXCellCoord(j),pt=this._convertToYCellCoord(Z),Et=Oe;Et<=it;Et++)for(var Ft=$e;Ft<=pt;Ft++)if(ce.call(this,P,N,j,Z,this.xCellCount*Ft+Et,ge,we,Se))return},Mn.prototype._convertToXCellCoord=function(P){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(P*this.xScale)))},Mn.prototype._convertToYCellCoord=function(P){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(P*this.yScale)))},Mn.prototype._circlesCollide=function(P,N,j,Z,ce,ge){var we=Z-P,Se=ce-N,Oe=j+ge;return Oe*Oe>we*we+Se*Se},Mn.prototype._circleAndRectCollide=function(P,N,j,Z,ce,ge,we){var Se=(ge-Z)/2,Oe=Math.abs(P-(Z+Se));if(Oe>Se+j)return!1;var $e=(we-ce)/2,it=Math.abs(N-(ce+$e));if(it>$e+j)return!1;if(Oe<=Se||it<=$e)return!0;var pt=Oe-Se,Et=it-$e;return pt*pt+Et*Et<=j*j};var Lr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qn(P,N){for(var j=0;j<P;j++){var Z=N.length;N.resize(Z+4),N.float32.set(Lr,3*Z)}}function qr(P,N,j){var Z=N[0],ce=N[1];return P[0]=j[0]*Z+j[4]*ce+j[12],P[1]=j[1]*Z+j[5]*ce+j[13],P[3]=j[3]*Z+j[7]*ce+j[15],P}var sr=function(P,N,j){void 0===N&&(N=new Mn(P.width+200,P.height+200,25)),void 0===j&&(j=new Mn(P.width+200,P.height+200,25)),this.transform=P,this.grid=N,this.ignoredGrid=j,this.pitchfactor=Math.cos(P._pitch)*P.cameraToCenterDistance,this.screenRightBoundary=P.width+100,this.screenBottomBoundary=P.height+100,this.gridRightBoundary=P.width+200,this.gridBottomBoundary=P.height+200};function hr(P,N,j){return N*(e.EXTENT/(P.tileSize*Math.pow(2,j-P.tileID.overscaledZ)))}sr.prototype.placeCollisionBox=function(P,N,j,Z,ce){var ge=this.projectAndGetPerspectiveRatio(Z,P.anchorPointX,P.anchorPointY),we=j*ge.perspectiveRatio,Se=P.x1*we+ge.point.x,Oe=P.y1*we+ge.point.y,$e=P.x2*we+ge.point.x,it=P.y2*we+ge.point.y;return!this.isInsideGrid(Se,Oe,$e,it)||!N&&this.grid.hitTest(Se,Oe,$e,it,ce)?{box:[],offscreen:!1}:{box:[Se,Oe,$e,it],offscreen:this.isOffscreen(Se,Oe,$e,it)}},sr.prototype.placeCollisionCircles=function(P,N,j,Z,ce,ge,we,Se,Oe,$e,it,pt,Et){var Ft=[],Dt=new e.Point(N.anchorX,N.anchorY),zt=un(Dt,ge),Lt=an(this.transform.cameraToCenterDistance,zt.signedDistanceFromCamera),Gt=($e?ce/Lt:ce*Lt)/e.ONE_EM,Ut=un(Dt,we).point,Zt=Sn(Gt,Z,N.lineOffsetX*Gt,N.lineOffsetY*Gt,!1,Ut,Dt,N,j,we,{}),vn=!1,En=!1,qn=!0;if(Zt){for(var Vn=.5*pt*Lt+Et,pr=new e.Point(-100,-100),gr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Er=new Kt,yr=Zt.first,Jr=Zt.last,vi=[],Fi=yr.path.length-1;Fi>=1;Fi--)vi.push(yr.path[Fi]);for(var or=1;or<Jr.path.length;or++)vi.push(Jr.path[or]);var zr=2.5*Vn;if(Se){var yi=vi.map(function(ks){return un(ks,Se)});vi=yi.some(function(ks){return ks.signedDistanceFromCamera<=0})?[]:yi.map(function(ks){return ks.point})}var ci=[];if(vi.length>0){for(var Si=vi[0].clone(),ji=vi[0].clone(),Ji=1;Ji<vi.length;Ji++)Si.x=Math.min(Si.x,vi[Ji].x),Si.y=Math.min(Si.y,vi[Ji].y),ji.x=Math.max(ji.x,vi[Ji].x),ji.y=Math.max(ji.y,vi[Ji].y);ci=Si.x>=pr.x&&ji.x<=gr.x&&Si.y>=pr.y&&ji.y<=gr.y?[vi]:ji.x<pr.x||Si.x>gr.x||ji.y<pr.y||Si.y>gr.y?[]:e.clipLine([vi],pr.x,pr.y,gr.x,gr.y)}for(var _i=0,qi=ci;_i<qi.length;_i+=1){Er.reset(qi[_i],.25*Vn);var oa;oa=Er.length<=.5*Vn?1:Math.ceil(Er.paddedLength/zr)+1;for(var Gi=0;Gi<oa;Gi++){var ta=Gi/Math.max(oa-1,1),Da=Er.lerp(ta),$a=Da.x+100,bo=Da.y+100;Ft.push($a,bo,Vn,0);var vo=$a-Vn,so=bo-Vn,_o=$a+Vn,lo=bo+Vn;if(qn=qn&&this.isOffscreen(vo,so,_o,lo),En=En||this.isInsideGrid(vo,so,_o,lo),!P&&this.grid.hitTestCircle($a,bo,Vn,it)&&(vn=!0,!Oe))return{circles:[],offscreen:!1,collisionDetected:vn}}}}return{circles:!Oe&&vn||!En?[]:Ft,offscreen:qn,collisionDetected:vn}},sr.prototype.queryRenderedSymbols=function(P){if(0===P.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var N=[],j=1/0,Z=1/0,ce=-1/0,ge=-1/0,we=0,Se=P;we<Se.length;we+=1){var Oe=Se[we],$e=new e.Point(Oe.x+100,Oe.y+100);j=Math.min(j,$e.x),Z=Math.min(Z,$e.y),ce=Math.max(ce,$e.x),ge=Math.max(ge,$e.y),N.push($e)}for(var it={},pt={},Et=0,Ft=this.grid.query(j,Z,ce,ge).concat(this.ignoredGrid.query(j,Z,ce,ge));Et<Ft.length;Et+=1){var Dt=Ft[Et],zt=Dt.key;if(void 0===it[zt.bucketInstanceId]&&(it[zt.bucketInstanceId]={}),!it[zt.bucketInstanceId][zt.featureIndex]){var Lt=[new e.Point(Dt.x1,Dt.y1),new e.Point(Dt.x2,Dt.y1),new e.Point(Dt.x2,Dt.y2),new e.Point(Dt.x1,Dt.y2)];e.polygonIntersectsPolygon(N,Lt)&&(it[zt.bucketInstanceId][zt.featureIndex]=!0,void 0===pt[zt.bucketInstanceId]&&(pt[zt.bucketInstanceId]=[]),pt[zt.bucketInstanceId].push(zt.featureIndex))}}return pt},sr.prototype.insertCollisionBox=function(P,N,j,Z,ce){(N?this.ignoredGrid:this.grid).insert({bucketInstanceId:j,featureIndex:Z,collisionGroupID:ce},P[0],P[1],P[2],P[3])},sr.prototype.insertCollisionCircles=function(P,N,j,Z,ce){for(var ge=N?this.ignoredGrid:this.grid,we={bucketInstanceId:j,featureIndex:Z,collisionGroupID:ce},Se=0;Se<P.length;Se+=4)ge.insertCircle(we,P[Se],P[Se+1],P[Se+2])},sr.prototype.projectAndGetPerspectiveRatio=function(P,N,j){var Z=[N,j,0,1];return qr(Z,Z,P),{point:new e.Point((Z[0]/Z[3]+1)/2*this.transform.width+100,(-Z[1]/Z[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/Z[3]*.5}},sr.prototype.isOffscreen=function(P,N,j,Z){return j<100||P>=this.screenRightBoundary||Z<100||N>this.screenBottomBoundary},sr.prototype.isInsideGrid=function(P,N,j,Z){return j>=0&&P<this.gridRightBoundary&&Z>=0&&N<this.gridBottomBoundary},sr.prototype.getViewportMatrix=function(){var P=e.identity([]);return e.translate(P,P,[-100,-100,0]),P};var jr=function(P,N,j,Z){this.opacity=P?Math.max(0,Math.min(1,P.opacity+(P.placed?N:-N))):Z&&j?1:0,this.placed=j};jr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var di=function(P,N,j,Z,ce){this.text=new jr(P?P.text:null,N,j,ce),this.icon=new jr(P?P.icon:null,N,Z,ce)};di.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Jn=function(P,N,j){this.text=P,this.icon=N,this.skipFade=j},Ar=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},mr=function(P,N,j,Z,ce){this.bucketInstanceId=P,this.featureIndex=N,this.sourceLayerIndex=j,this.bucketIndex=Z,this.tileID=ce},lr=function(P){this.crossSourceCollisions=P,this.maxGroupID=0,this.collisionGroups={}};function ri(P,N,j,Z,ce){var ge=e.getAnchorAlignment(P),we=-(ge.horizontalAlign-.5)*N,Se=-(ge.verticalAlign-.5)*j,Oe=e.evaluateVariableOffset(P,Z);return new e.Point(we+Oe[0]*ce,Se+Oe[1]*ce)}function si(P,N,j,Z,ce,ge){var we=P.x1,Se=P.x2,Oe=P.y1,$e=P.y2,it=P.anchorPointX,pt=P.anchorPointY,Et=new e.Point(N,j);return Z&&Et._rotate(ce?ge:-ge),{x1:we+Et.x,y1:Oe+Et.y,x2:Se+Et.x,y2:$e+Et.y,anchorPointX:it,anchorPointY:pt}}lr.prototype.get=function(P){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[P]){var N=++this.maxGroupID;this.collisionGroups[P]={ID:N,predicate:function(j){return j.collisionGroupID===N}}}return this.collisionGroups[P]};var Tr=function(P,N,j,Z){this.transform=P.clone(),this.collisionIndex=new sr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=N,this.retainedQueryData={},this.collisionGroups=new lr(j),this.collisionCircleArrays={},this.prevPlacement=Z,Z&&(Z.prevPlacement=void 0),this.placedOrientations={}};function Zr(P,N,j,Z,ce){P.emplaceBack(N?1:0,j?1:0,Z||0,ce||0),P.emplaceBack(N?1:0,j?1:0,Z||0,ce||0),P.emplaceBack(N?1:0,j?1:0,Z||0,ce||0),P.emplaceBack(N?1:0,j?1:0,Z||0,ce||0)}Tr.prototype.getBucketParts=function(P,N,j,Z){var ce=j.getBucket(N),ge=j.latestFeatureIndex;if(ce&&ge&&N.id===ce.layerIds[0]){var we=j.collisionBoxArray,Se=ce.layers[0].layout,Oe=Math.pow(2,this.transform.zoom-j.tileID.overscaledZ),$e=j.tileSize/e.EXTENT,it=this.transform.calculatePosMatrix(j.tileID.toUnwrapped()),pt="map"===Se.get("text-pitch-alignment"),Et="map"===Se.get("text-rotation-alignment"),Ft=hr(j,1,this.transform.zoom),Dt=Un(it,pt,Et,this.transform,Ft),zt=null;if(pt){var Lt=Tn(it,pt,Et,this.transform,Ft);zt=e.multiply([],this.transform.labelPlaneMatrix,Lt)}this.retainedQueryData[ce.bucketInstanceId]=new mr(ce.bucketInstanceId,ge,ce.sourceLayerIndex,ce.index,j.tileID);var Gt={bucket:ce,layout:Se,posMatrix:it,textLabelPlaneMatrix:Dt,labelToScreenMatrix:zt,scale:Oe,textPixelRatio:$e,holdingForFade:j.holdingForFade(),collisionBoxArray:we,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ce.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ce.sourceID)};if(Z)for(var Ut=0,Zt=ce.sortKeyRanges;Ut<Zt.length;Ut+=1){var vn=Zt[Ut];P.push({sortKey:vn.sortKey,symbolInstanceStart:vn.symbolInstanceStart,symbolInstanceEnd:vn.symbolInstanceEnd,parameters:Gt})}else P.push({symbolInstanceStart:0,symbolInstanceEnd:ce.symbolInstances.length,parameters:Gt})}},Tr.prototype.attemptAnchorPlacement=function(P,N,j,Z,ce,ge,we,Se,Oe,$e,it,pt,Et,Ft,Dt){var zt,Lt=[pt.textOffset0,pt.textOffset1],Gt=ri(P,j,Z,Lt,ce),Ut=this.collisionIndex.placeCollisionBox(si(N,Gt.x,Gt.y,ge,we,this.transform.angle),it,Se,Oe,$e.predicate);if((!Dt||0!==this.collisionIndex.placeCollisionBox(si(Dt,Gt.x,Gt.y,ge,we,this.transform.angle),it,Se,Oe,$e.predicate).box.length)&&Ut.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID]&&this.prevPlacement.placements[pt.crossTileID].text&&(zt=this.prevPlacement.variableOffsets[pt.crossTileID].anchor),this.variableOffsets[pt.crossTileID]={textOffset:Lt,width:j,height:Z,anchor:P,textBoxScale:ce,prevAnchor:zt},this.markUsedJustification(Et,P,pt,Ft),Et.allowVerticalPlacement&&(this.markUsedOrientation(Et,Ft,pt),this.placedOrientations[pt.crossTileID]=Ft),{shift:Gt,placedGlyphBoxes:Ut}},Tr.prototype.placeLayerBucketPart=function(P,N,j){var Z=this,ce=P.parameters,ge=ce.bucket,we=ce.layout,Se=ce.posMatrix,Oe=ce.textLabelPlaneMatrix,$e=ce.labelToScreenMatrix,it=ce.textPixelRatio,pt=ce.holdingForFade,Et=ce.collisionBoxArray,Ft=ce.partiallyEvaluatedTextSize,Dt=ce.collisionGroup,zt=we.get("text-optional"),Lt=we.get("icon-optional"),Gt=we.get("text-allow-overlap"),Ut=we.get("icon-allow-overlap"),Zt="map"===we.get("text-rotation-alignment"),vn="map"===we.get("text-pitch-alignment"),En="none"!==we.get("icon-text-fit"),qn="viewport-y"===we.get("symbol-z-order"),Vn=Gt&&(Ut||!ge.hasIconData()||Lt),pr=Ut&&(Gt||!ge.hasTextData()||zt);!ge.collisionArrays&&Et&&ge.deserializeCollisionBoxes(Et);var gr=function(or,zr){if(!N[or.crossTileID])if(pt)Z.placements[or.crossTileID]=new Jn(!1,!1,!1);else{var yi,ci=!1,Si=!1,ji=!0,Ji=null,_i={box:null,offscreen:null},qi={box:null,offscreen:null},Vi=null,oa=null,Gi=0,ta=0,Da=0;zr.textFeatureIndex?Gi=zr.textFeatureIndex:or.useRuntimeCollisionCircles&&(Gi=or.featureIndex),zr.verticalTextFeatureIndex&&(ta=zr.verticalTextFeatureIndex);var $a=zr.textBox;if($a){var bo=function(Eo){var ms=e.WritingMode.horizontal;if(ge.allowVerticalPlacement&&!Eo&&Z.prevPlacement){var as=Z.prevPlacement.placedOrientations[or.crossTileID];as&&(Z.placedOrientations[or.crossTileID]=as,Z.markUsedOrientation(ge,ms=as,or))}return ms},vo=function(Eo,ms){if(ge.allowVerticalPlacement&&or.numVerticalGlyphVertices>0&&zr.verticalTextBox)for(var as=0,xc=ge.writingModes;as<xc.length&&(xc[as]===e.WritingMode.vertical?(_i=ms(),qi=_i):_i=Eo(),!(_i&&_i.box&&_i.box.length));as+=1);else _i=Eo()};if(we.get("text-variable-anchor")){var so=we.get("text-variable-anchor");if(Z.prevPlacement&&Z.prevPlacement.variableOffsets[or.crossTileID]){var _o=Z.prevPlacement.variableOffsets[or.crossTileID];so.indexOf(_o.anchor)>0&&(so=so.filter(function(Eo){return Eo!==_o.anchor})).unshift(_o.anchor)}var lo=function(Eo,ms,as){for(var xc=Eo.x2-Eo.x1,Pf=Eo.y2-Eo.y1,Gs=or.textBoxScale,Yl=En&&!Ut?ms:null,Uu={box:[],offscreen:!1},Oh=Gt?2*so.length:so.length,Dl=0;Dl<Oh;++Dl){var Wl=Z.attemptAnchorPlacement(so[Dl%so.length],Eo,xc,Pf,Gs,Zt,vn,it,Se,Dt,Dl>=so.length,or,ge,as,Yl);if(Wl&&(Uu=Wl.placedGlyphBoxes)&&Uu.box&&Uu.box.length){ci=!0,Ji=Wl.shift;break}}return Uu};vo(function(){return lo($a,zr.iconBox,e.WritingMode.horizontal)},function(){var Eo=zr.verticalTextBox;return ge.allowVerticalPlacement&&!(_i&&_i.box&&_i.box.length)&&or.numVerticalGlyphVertices>0&&Eo?lo(Eo,zr.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),_i&&(ci=_i.box,ji=_i.offscreen);var ks=bo(_i&&_i.box);if(!ci&&Z.prevPlacement){var no=Z.prevPlacement.variableOffsets[or.crossTileID];no&&(Z.variableOffsets[or.crossTileID]=no,Z.markUsedJustification(ge,no.anchor,or,ks))}}else{var js=function(Eo,ms){var as=Z.collisionIndex.placeCollisionBox(Eo,Gt,it,Se,Dt.predicate);return as&&as.box&&as.box.length&&(Z.markUsedOrientation(ge,ms,or),Z.placedOrientations[or.crossTileID]=ms),as};vo(function(){return js($a,e.WritingMode.horizontal)},function(){var Eo=zr.verticalTextBox;return ge.allowVerticalPlacement&&or.numVerticalGlyphVertices>0&&Eo?js(Eo,e.WritingMode.vertical):{box:null,offscreen:null}}),bo(_i&&_i.box&&_i.box.length)}}if(ci=(yi=_i)&&yi.box&&yi.box.length>0,ji=yi&&yi.offscreen,or.useRuntimeCollisionCircles){var el=ge.text.placedSymbolArray.get(or.centerJustifiedTextSymbolIndex),Cl=e.evaluateSizeForFeature(ge.textSizeData,Ft,el),cu=we.get("text-padding");Vi=Z.collisionIndex.placeCollisionCircles(Gt,el,ge.lineVertexArray,ge.glyphOffsetArray,Cl,Se,Oe,$e,j,vn,Dt.predicate,or.collisionCircleDiameter,cu),ci=Gt||Vi.circles.length>0&&!Vi.collisionDetected,ji=ji&&Vi.offscreen}if(zr.iconFeatureIndex&&(Da=zr.iconFeatureIndex),zr.iconBox){var Nl=function(Eo){var ms=En&&Ji?si(Eo,Ji.x,Ji.y,Zt,vn,Z.transform.angle):Eo;return Z.collisionIndex.placeCollisionBox(ms,Ut,it,Se,Dt.predicate)};Si=qi&&qi.box&&qi.box.length&&zr.verticalIconBox?(oa=Nl(zr.verticalIconBox)).box.length>0:(oa=Nl(zr.iconBox)).box.length>0,ji=ji&&oa.offscreen}var As=zt||0===or.numHorizontalGlyphVertices&&0===or.numVerticalGlyphVertices,Gl=Lt||0===or.numIconVertices;if(As||Gl?Gl?As||(Si=Si&&ci):ci=Si&&ci:Si=ci=Si&&ci,ci&&yi&&yi.box&&Z.collisionIndex.insertCollisionBox(yi.box,we.get("text-ignore-placement"),ge.bucketInstanceId,qi&&qi.box&&ta?ta:Gi,Dt.ID),Si&&oa&&Z.collisionIndex.insertCollisionBox(oa.box,we.get("icon-ignore-placement"),ge.bucketInstanceId,Da,Dt.ID),Vi&&(ci&&Z.collisionIndex.insertCollisionCircles(Vi.circles,we.get("text-ignore-placement"),ge.bucketInstanceId,Gi,Dt.ID),j)){var Eu=ge.bucketInstanceId,tl=Z.collisionCircleArrays[Eu];void 0===tl&&(tl=Z.collisionCircleArrays[Eu]=new Ar);for(var Su=0;Su<Vi.circles.length;Su+=4)tl.circles.push(Vi.circles[Su+0]),tl.circles.push(Vi.circles[Su+1]),tl.circles.push(Vi.circles[Su+2]),tl.circles.push(Vi.collisionDetected?1:0)}Z.placements[or.crossTileID]=new Jn(ci||Vn,Si||pr,ji||ge.justReloaded),N[or.crossTileID]=!0}};if(qn)for(var Er=ge.getSortedSymbolIndexes(this.transform.angle),yr=Er.length-1;yr>=0;--yr){var Jr=Er[yr];gr(ge.symbolInstances.get(Jr),ge.collisionArrays[Jr])}else for(var vi=P.symbolInstanceStart;vi<P.symbolInstanceEnd;vi++)gr(ge.symbolInstances.get(vi),ge.collisionArrays[vi]);if(j&&ge.bucketInstanceId in this.collisionCircleArrays){var Fi=this.collisionCircleArrays[ge.bucketInstanceId];e.invert(Fi.invProjMatrix,Se),Fi.viewportMatrix=this.collisionIndex.getViewportMatrix()}ge.justReloaded=!1},Tr.prototype.markUsedJustification=function(P,N,j,Z){var ce;ce=Z===e.WritingMode.vertical?j.verticalPlacedTextSymbolIndex:{left:j.leftJustifiedTextSymbolIndex,center:j.centerJustifiedTextSymbolIndex,right:j.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(N)];for(var we=0,Se=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex,j.verticalPlacedTextSymbolIndex];we<Se.length;we+=1){var Oe=Se[we];Oe>=0&&(P.text.placedSymbolArray.get(Oe).crossTileID=ce>=0&&Oe!==ce?0:j.crossTileID)}},Tr.prototype.markUsedOrientation=function(P,N,j){for(var Z=N===e.WritingMode.horizontal||N===e.WritingMode.horizontalOnly?N:0,ce=N===e.WritingMode.vertical?N:0,ge=0,we=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex];ge<we.length;ge+=1)P.text.placedSymbolArray.get(we[ge]).placedOrientation=Z;j.verticalPlacedTextSymbolIndex&&(P.text.placedSymbolArray.get(j.verticalPlacedTextSymbolIndex).placedOrientation=ce)},Tr.prototype.commit=function(P){this.commitTime=P,this.zoomAtLastRecencyCheck=this.transform.zoom;var N=this.prevPlacement,j=!1;this.prevZoomAdjustment=N?N.zoomAdjustment(this.transform.zoom):0;var Z=N?N.symbolFadeChange(P):1,ce=N?N.opacities:{},ge=N?N.variableOffsets:{},we=N?N.placedOrientations:{};for(var Se in this.placements){var Oe=this.placements[Se],$e=ce[Se];$e?(this.opacities[Se]=new di($e,Z,Oe.text,Oe.icon),j=j||Oe.text!==$e.text.placed||Oe.icon!==$e.icon.placed):(this.opacities[Se]=new di(null,Z,Oe.text,Oe.icon,Oe.skipFade),j=j||Oe.text||Oe.icon)}for(var it in ce){var pt=ce[it];if(!this.opacities[it]){var Et=new di(pt,Z,!1,!1);Et.isHidden()||(this.opacities[it]=Et,j=j||pt.text.placed||pt.icon.placed)}}for(var Ft in ge)this.variableOffsets[Ft]||!this.opacities[Ft]||this.opacities[Ft].isHidden()||(this.variableOffsets[Ft]=ge[Ft]);for(var Dt in we)this.placedOrientations[Dt]||!this.opacities[Dt]||this.opacities[Dt].isHidden()||(this.placedOrientations[Dt]=we[Dt]);j?this.lastPlacementChangeTime=P:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=N?N.lastPlacementChangeTime:P)},Tr.prototype.updateLayerOpacities=function(P,N){for(var j={},Z=0,ce=N;Z<ce.length;Z+=1){var ge=ce[Z],we=ge.getBucket(P);we&&ge.latestFeatureIndex&&P.id===we.layerIds[0]&&this.updateBucketOpacities(we,j,ge.collisionBoxArray)}},Tr.prototype.updateBucketOpacities=function(P,N,j){var Z=this;P.hasTextData()&&P.text.opacityVertexArray.clear(),P.hasIconData()&&P.icon.opacityVertexArray.clear(),P.hasIconCollisionBoxData()&&P.iconCollisionBox.collisionVertexArray.clear(),P.hasTextCollisionBoxData()&&P.textCollisionBox.collisionVertexArray.clear();var ce=P.layers[0].layout,ge=new di(null,0,!1,!1,!0),we=ce.get("text-allow-overlap"),Se=ce.get("icon-allow-overlap"),Oe=ce.get("text-variable-anchor"),$e="map"===ce.get("text-rotation-alignment"),it="map"===ce.get("text-pitch-alignment"),pt="none"!==ce.get("icon-text-fit"),Et=new di(null,0,we&&(Se||!P.hasIconData()||ce.get("icon-optional")),Se&&(we||!P.hasTextData()||ce.get("text-optional")),!0);!P.collisionArrays&&j&&(P.hasIconCollisionBoxData()||P.hasTextCollisionBoxData())&&P.deserializeCollisionBoxes(j);for(var Ft=function(Gt,Ut,Zt){for(var vn=0;vn<Ut/4;vn++)Gt.opacityVertexArray.emplaceBack(Zt)},Dt=function(Gt){var Ut=P.symbolInstances.get(Gt),Zt=Ut.numHorizontalGlyphVertices,vn=Ut.numVerticalGlyphVertices,En=Ut.crossTileID,Vn=Z.opacities[En];N[En]?Vn=ge:Vn||(Z.opacities[En]=Vn=Et),N[En]=!0;var gr=Ut.numIconVertices>0,Er=Z.placedOrientations[Ut.crossTileID],yr=Er===e.WritingMode.vertical,Jr=Er===e.WritingMode.horizontal||Er===e.WritingMode.horizontalOnly;if(Zt>0||vn>0){var vi=Gn(Vn.text);Ft(P.text,Zt,yr?zn:vi),Ft(P.text,vn,Jr?zn:vi);var zr=Vn.text.isHidden();[Ut.rightJustifiedTextSymbolIndex,Ut.centerJustifiedTextSymbolIndex,Ut.leftJustifiedTextSymbolIndex].forEach(function(Da){Da>=0&&(P.text.placedSymbolArray.get(Da).hidden=zr||yr?1:0)}),Ut.verticalPlacedTextSymbolIndex>=0&&(P.text.placedSymbolArray.get(Ut.verticalPlacedTextSymbolIndex).hidden=zr||Jr?1:0);var yi=Z.variableOffsets[Ut.crossTileID];yi&&Z.markUsedJustification(P,yi.anchor,Ut,Er);var ci=Z.placedOrientations[Ut.crossTileID];ci&&(Z.markUsedJustification(P,"left",Ut,ci),Z.markUsedOrientation(P,ci,Ut))}if(gr){var Si=Gn(Vn.icon),ji=!(pt&&Ut.verticalPlacedIconSymbolIndex&&yr);Ut.placedIconSymbolIndex>=0&&(Ft(P.icon,Ut.numIconVertices,ji?Si:zn),P.icon.placedSymbolArray.get(Ut.placedIconSymbolIndex).hidden=Vn.icon.isHidden()),Ut.verticalPlacedIconSymbolIndex>=0&&(Ft(P.icon,Ut.numVerticalIconVertices,ji?zn:Si),P.icon.placedSymbolArray.get(Ut.verticalPlacedIconSymbolIndex).hidden=Vn.icon.isHidden())}if(P.hasIconCollisionBoxData()||P.hasTextCollisionBoxData()){var qi=P.collisionArrays[Gt];if(qi){var Vi=new e.Point(0,0);if(qi.textBox||qi.verticalTextBox){var oa=!0;if(Oe){var Gi=Z.variableOffsets[En];Gi?(Vi=ri(Gi.anchor,Gi.width,Gi.height,Gi.textOffset,Gi.textBoxScale),$e&&Vi._rotate(it?Z.transform.angle:-Z.transform.angle)):oa=!1}qi.textBox&&Zr(P.textCollisionBox.collisionVertexArray,Vn.text.placed,!oa||yr,Vi.x,Vi.y),qi.verticalTextBox&&Zr(P.textCollisionBox.collisionVertexArray,Vn.text.placed,!oa||Jr,Vi.x,Vi.y)}var ta=Boolean(!Jr&&qi.verticalIconBox);qi.iconBox&&Zr(P.iconCollisionBox.collisionVertexArray,Vn.icon.placed,ta,pt?Vi.x:0,pt?Vi.y:0),qi.verticalIconBox&&Zr(P.iconCollisionBox.collisionVertexArray,Vn.icon.placed,!ta,pt?Vi.x:0,pt?Vi.y:0)}}},zt=0;zt<P.symbolInstances.length;zt++)Dt(zt);if(P.sortFeatures(this.transform.angle),this.retainedQueryData[P.bucketInstanceId]&&(this.retainedQueryData[P.bucketInstanceId].featureSortOrder=P.featureSortOrder),P.hasTextData()&&P.text.opacityVertexBuffer&&P.text.opacityVertexBuffer.updateData(P.text.opacityVertexArray),P.hasIconData()&&P.icon.opacityVertexBuffer&&P.icon.opacityVertexBuffer.updateData(P.icon.opacityVertexArray),P.hasIconCollisionBoxData()&&P.iconCollisionBox.collisionVertexBuffer&&P.iconCollisionBox.collisionVertexBuffer.updateData(P.iconCollisionBox.collisionVertexArray),P.hasTextCollisionBoxData()&&P.textCollisionBox.collisionVertexBuffer&&P.textCollisionBox.collisionVertexBuffer.updateData(P.textCollisionBox.collisionVertexArray),P.bucketInstanceId in this.collisionCircleArrays){var Lt=this.collisionCircleArrays[P.bucketInstanceId];P.placementInvProjMatrix=Lt.invProjMatrix,P.placementViewportMatrix=Lt.viewportMatrix,P.collisionCircleArray=Lt.circles,delete this.collisionCircleArrays[P.bucketInstanceId]}},Tr.prototype.symbolFadeChange=function(P){return 0===this.fadeDuration?1:(P-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Tr.prototype.zoomAdjustment=function(P){return Math.max(0,(this.transform.zoom-P)/1.5)},Tr.prototype.hasTransitions=function(P){return this.stale||P-this.lastPlacementChangeTime<this.fadeDuration},Tr.prototype.stillRecent=function(P,N){var j=this.zoomAtLastRecencyCheck===N?1-this.zoomAdjustment(N):1;return this.zoomAtLastRecencyCheck=N,this.commitTime+this.fadeDuration*j>P},Tr.prototype.setStale=function(){this.stale=!0};var Ii=Math.pow(2,25),dn=Math.pow(2,24),Cn=Math.pow(2,17),jt=Math.pow(2,16),bn=Math.pow(2,9),An=Math.pow(2,8),$n=Math.pow(2,1);function Gn(P){if(0===P.opacity&&!P.placed)return 0;if(1===P.opacity&&P.placed)return 4294967295;var N=P.placed?1:0,j=Math.floor(127*P.opacity);return j*Ii+N*dn+j*Cn+N*jt+j*bn+N*An+j*$n+N}var zn=0,Hn=function(P){this._sortAcrossTiles="viewport-y"!==P.layout.get("symbol-z-order")&&void 0!==P.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Hn.prototype.continuePlacement=function(P,N,j,Z,ce){for(var ge=this._bucketParts;this._currentTileIndex<P.length;)if(N.getBucketParts(ge,Z,P[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ce())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ge.sort(function(Oe,$e){return Oe.sortKey-$e.sortKey}));this._currentPartIndex<ge.length;)if(N.placeLayerBucketPart(ge[this._currentPartIndex],this._seenCrossTileIDs,j),this._currentPartIndex++,ce())return!0;return!1};var Ln=function(P,N,j,Z,ce,ge,we){this.placement=new Tr(P,ce,ge,we),this._currentPlacementIndex=N.length-1,this._forceFullPlacement=j,this._showCollisionBoxes=Z,this._done=!1};Ln.prototype.isDone=function(){return this._done},Ln.prototype.continuePlacement=function(P,N,j){for(var Z=this,ce=e.browser.now(),ge=function(){var Oe=e.browser.now()-ce;return!Z._forceFullPlacement&&Oe>2};this._currentPlacementIndex>=0;){var we=N[P[this._currentPlacementIndex]],Se=this.placement.collisionIndex.transform.zoom;if("symbol"===we.type&&(!we.minzoom||we.minzoom<=Se)&&(!we.maxzoom||we.maxzoom>Se)){if(this._inProgressLayer||(this._inProgressLayer=new Hn(we)),this._inProgressLayer.continuePlacement(j[we.source],this.placement,this._showCollisionBoxes,we,ge))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ln.prototype.commit=function(P){return this.placement.commit(P),this.placement};var On=512/e.EXTENT/2,Dn=function(P,N,j){this.tileID=P,this.indexedSymbolInstances={},this.bucketInstanceId=j;for(var Z=0;Z<N.length;Z++){var ce=N.get(Z),ge=ce.key;this.indexedSymbolInstances[ge]||(this.indexedSymbolInstances[ge]=[]),this.indexedSymbolInstances[ge].push({crossTileID:ce.crossTileID,coord:this.getScaledCoordinates(ce,P)})}};Dn.prototype.getScaledCoordinates=function(P,N){var Z=On/Math.pow(2,N.canonical.z-this.tileID.canonical.z);return{x:Math.floor((N.canonical.x*e.EXTENT+P.anchorX)*Z),y:Math.floor((N.canonical.y*e.EXTENT+P.anchorY)*Z)}},Dn.prototype.findMatches=function(P,N,j){for(var Z=this.tileID.canonical.z<N.canonical.z?1:Math.pow(2,this.tileID.canonical.z-N.canonical.z),ce=0;ce<P.length;ce++){var ge=P.get(ce);if(!ge.crossTileID){var we=this.indexedSymbolInstances[ge.key];if(we)for(var Se=this.getScaledCoordinates(ge,N),Oe=0,$e=we;Oe<$e.length;Oe+=1){var it=$e[Oe];if(Math.abs(it.coord.x-Se.x)<=Z&&Math.abs(it.coord.y-Se.y)<=Z&&!j[it.crossTileID]){j[it.crossTileID]=!0,ge.crossTileID=it.crossTileID;break}}}}};var Yn=function(){this.maxCrossTileID=0};Yn.prototype.generate=function(){return++this.maxCrossTileID};var rr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};rr.prototype.handleWrapJump=function(P){var N=Math.round((P-this.lng)/360);if(0!==N)for(var j in this.indexes){var Z=this.indexes[j],ce={};for(var ge in Z){var we=Z[ge];we.tileID=we.tileID.unwrapTo(we.tileID.wrap+N),ce[we.tileID.key]=we}this.indexes[j]=ce}this.lng=P},rr.prototype.addBucket=function(P,N,j){if(this.indexes[P.overscaledZ]&&this.indexes[P.overscaledZ][P.key]){if(this.indexes[P.overscaledZ][P.key].bucketInstanceId===N.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(P.overscaledZ,this.indexes[P.overscaledZ][P.key])}for(var Z=0;Z<N.symbolInstances.length;Z++)N.symbolInstances.get(Z).crossTileID=0;this.usedCrossTileIDs[P.overscaledZ]||(this.usedCrossTileIDs[P.overscaledZ]={});var ce=this.usedCrossTileIDs[P.overscaledZ];for(var ge in this.indexes){var we=this.indexes[ge];if(Number(ge)>P.overscaledZ)for(var Se in we){var Oe=we[Se];Oe.tileID.isChildOf(P)&&Oe.findMatches(N.symbolInstances,P,ce)}else{var $e=we[P.scaledTo(Number(ge)).key];$e&&$e.findMatches(N.symbolInstances,P,ce)}}for(var it=0;it<N.symbolInstances.length;it++){var pt=N.symbolInstances.get(it);pt.crossTileID||(pt.crossTileID=j.generate(),ce[pt.crossTileID]=!0)}return void 0===this.indexes[P.overscaledZ]&&(this.indexes[P.overscaledZ]={}),this.indexes[P.overscaledZ][P.key]=new Dn(P,N.symbolInstances,N.bucketInstanceId),!0},rr.prototype.removeBucketCrossTileIDs=function(P,N){for(var j in N.indexedSymbolInstances)for(var Z=0,ce=N.indexedSymbolInstances[j];Z<ce.length;Z+=1)delete this.usedCrossTileIDs[P][ce[Z].crossTileID]},rr.prototype.removeStaleBuckets=function(P){var N=!1;for(var j in this.indexes){var Z=this.indexes[j];for(var ce in Z)P[Z[ce].bucketInstanceId]||(this.removeBucketCrossTileIDs(j,Z[ce]),delete Z[ce],N=!0)}return N};var ar=function(){this.layerIndexes={},this.crossTileIDs=new Yn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ar.prototype.addLayer=function(P,N,j){var Z=this.layerIndexes[P.id];void 0===Z&&(Z=this.layerIndexes[P.id]=new rr);var ce=!1,ge={};Z.handleWrapJump(j);for(var we=0,Se=N;we<Se.length;we+=1){var Oe=Se[we],$e=Oe.getBucket(P);$e&&P.id===$e.layerIds[0]&&($e.bucketInstanceId||($e.bucketInstanceId=++this.maxBucketInstanceId),Z.addBucket(Oe.tileID,$e,this.crossTileIDs)&&(ce=!0),ge[$e.bucketInstanceId]=!0)}return Z.removeStaleBuckets(ge)&&(ce=!0),ce},ar.prototype.pruneUnusedLayers=function(P){var N={};for(var j in P.forEach(function(Z){N[Z]=!0}),this.layerIndexes)N[j]||delete this.layerIndexes[j]};var vr=function(P,N){return e.emitValidationErrors(P,N&&N.filter(function(j){return"source.canvas"!==j.identifier}))},xr=e.pick(Pt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ir=e.pick(Pt,["setCenter","setZoom","setBearing","setPitch"]),Or=function(){var P={},N=e.styleSpec.$version;for(var j in e.styleSpec.$root){var Z=e.styleSpec.$root[j];if(Z.required){var ce;null!=(ce="version"===j?N:"array"===Z.type?[]:{})&&(P[j]=ce)}}return P}(),Rr=function(P){function N(j,Z){var ce=this;void 0===Z&&(Z={}),P.call(this),this.map=j,this.dispatcher=new C(ft(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new M(j._requestManager,Z.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new ar,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ge=this;this._rtlTextPluginCallback=N.registerForPluginStateChange(function(we){ge.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:we.pluginStatus,pluginURL:we.pluginURL},function(Oe,$e){if(e.triggerPluginCompletionEvent(Oe),$e&&$e.every(function(pt){return pt}))for(var it in ge.sourceCaches)ge.sourceCaches[it].reload()})}),this.on("data",function(we){if("source"===we.dataType&&"metadata"===we.sourceDataType){var Se=ce.sourceCaches[we.sourceId];if(Se){var Oe=Se.getSource();if(Oe&&Oe.vectorLayerIds)for(var $e in ce._layers){var it=ce._layers[$e];it.source===Oe.id&&ce._validateLayer(it)}}}})}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.loadURL=function(j,Z){var ce=this;void 0===Z&&(Z={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ge="boolean"==typeof Z.validate?Z.validate:!e.isMapboxURL(j);j=this.map._requestManager.normalizeStyleURL(j,Z.accessToken);var we=this.map._requestManager.transformRequest(j,e.ResourceType.Style);this._request=e.getJSON(we,function(Se,Oe){ce._request=null,Se?ce.fire(new e.ErrorEvent(Se)):Oe&&ce._load(Oe,ge)})},N.prototype.loadJSON=function(j,Z){var ce=this;void 0===Z&&(Z={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ce._request=null,ce._load(j,!1!==Z.validate)})},N.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Or,!1)},N.prototype._load=function(j,Z){if(!Z||!vr(this,e.validateStyle(j))){for(var ce in this._loaded=!0,this.stylesheet=j,j.sources)this.addSource(ce,j.sources[ce],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs);var ge=Wt(this.stylesheet.layers);this._order=ge.map(function($e){return $e.id}),this._layers={},this._serializedLayers={};for(var we=0,Se=ge;we<Se.length;we+=1){var Oe=Se[we];(Oe=e.createStyleLayer(Oe)).setEventedParent(this,{layer:{id:Oe.id}}),this._layers[Oe.id]=Oe,this._serializedLayers[Oe.id]=Oe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new R(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},N.prototype._loadSprite=function(j){var Z=this;this._spriteRequest=function(ce,ge,we){var Se,Oe,$e,it=e.browser.devicePixelRatio>1?"@2x":"",pt=e.getJSON(ge.transformRequest(ge.normalizeSpriteURL(ce,it,".json"),e.ResourceType.SpriteJSON),function(Dt,zt){pt=null,$e||($e=Dt,Se=zt,Ft())}),Et=e.getImage(ge.transformRequest(ge.normalizeSpriteURL(ce,it,".png"),e.ResourceType.SpriteImage),function(Dt,zt){Et=null,$e||($e=Dt,Oe=zt,Ft())});function Ft(){if($e)we($e);else if(Se&&Oe){var Dt=e.browser.getImageData(Oe),zt={};for(var Lt in Se){var Gt=Se[Lt],Ut=Gt.width,Zt=Gt.height,vn=Gt.x,En=Gt.y,qn=Gt.sdf,Vn=Gt.pixelRatio,pr=Gt.stretchX,gr=Gt.stretchY,Er=Gt.content,yr=new e.RGBAImage({width:Ut,height:Zt});e.RGBAImage.copy(Dt,yr,{x:vn,y:En},{x:0,y:0},{width:Ut,height:Zt}),zt[Lt]={data:yr,pixelRatio:Vn,sdf:qn,stretchX:pr,stretchY:gr,content:Er}}we(null,zt)}}return{cancel:function(){pt&&(pt.cancel(),pt=null),Et&&(Et.cancel(),Et=null)}}}(j,this.map._requestManager,function(ce,ge){if(Z._spriteRequest=null,ce)Z.fire(new e.ErrorEvent(ce));else if(ge)for(var we in ge)Z.imageManager.addImage(we,ge[we]);Z.imageManager.setLoaded(!0),Z._availableImages=Z.imageManager.listImages(),Z.dispatcher.broadcast("setImages",Z._availableImages),Z.fire(new e.Event("data",{dataType:"style"}))})},N.prototype._validateLayer=function(j){var Z=this.sourceCaches[j.source];if(Z){var ce=j.sourceLayer;if(ce){var ge=Z.getSource();("geojson"===ge.type||ge.vectorLayerIds&&-1===ge.vectorLayerIds.indexOf(ce))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ce+'" does not exist on source "'+ge.id+'" as specified by style layer "'+j.id+'"')))}}},N.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var j in this.sourceCaches)if(!this.sourceCaches[j].loaded())return!1;return!!this.imageManager.isLoaded()},N.prototype._serializeLayers=function(j){for(var Z=[],ce=0,ge=j;ce<ge.length;ce+=1){var Se=this._layers[ge[ce]];"custom"!==Se.type&&Z.push(Se.serialize())}return Z},N.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var j in this.sourceCaches)if(this.sourceCaches[j].hasTransition())return!0;for(var Z in this._layers)if(this._layers[Z].hasTransition())return!0;return!1},N.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},N.prototype.update=function(j){if(this._loaded){var Z=this._changed;if(this._changed){var ce=Object.keys(this._updatedLayers),ge=Object.keys(this._removedLayers);for(var we in(ce.length||ge.length)&&this._updateWorkerLayers(ce,ge),this._updatedSources){var Se=this._updatedSources[we];"reload"===Se?this._reloadSource(we):"clear"===Se&&this._clearSource(we)}for(var Oe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Oe].updateTransitions(j);this.light.updateTransitions(j),this._resetUpdates()}for(var $e in this.sourceCaches)this.sourceCaches[$e].used=!1;for(var it=0,pt=this._order;it<pt.length;it+=1){var Ft=this._layers[pt[it]];Ft.recalculate(j,this._availableImages),!Ft.isHidden(j.zoom)&&Ft.source&&(this.sourceCaches[Ft.source].used=!0)}this.light.recalculate(j),this.z=j.zoom,Z&&this.fire(new e.Event("data",{dataType:"style"}))}},N.prototype._updateTilesForChangedImages=function(){var j=Object.keys(this._changedImages);if(j.length){for(var Z in this.sourceCaches)this.sourceCaches[Z].reloadTilesForDependencies(["icons","patterns"],j);this._changedImages={}}},N.prototype._updateWorkerLayers=function(j,Z){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(j),removedIds:Z})},N.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},N.prototype.setState=function(j){var Z=this;if(this._checkLoaded(),vr(this,e.validateStyle(j)))return!1;(j=e.clone$1(j)).layers=Wt(j.layers);var ce=function nn(P,N){if(!P)return[{command:Pt.setStyle,args:[N]}];var j=[];try{if(!e.deepEqual(P.version,N.version))return[{command:Pt.setStyle,args:[N]}];e.deepEqual(P.center,N.center)||j.push({command:Pt.setCenter,args:[N.center]}),e.deepEqual(P.zoom,N.zoom)||j.push({command:Pt.setZoom,args:[N.zoom]}),e.deepEqual(P.bearing,N.bearing)||j.push({command:Pt.setBearing,args:[N.bearing]}),e.deepEqual(P.pitch,N.pitch)||j.push({command:Pt.setPitch,args:[N.pitch]}),e.deepEqual(P.sprite,N.sprite)||j.push({command:Pt.setSprite,args:[N.sprite]}),e.deepEqual(P.glyphs,N.glyphs)||j.push({command:Pt.setGlyphs,args:[N.glyphs]}),e.deepEqual(P.transition,N.transition)||j.push({command:Pt.setTransition,args:[N.transition]}),e.deepEqual(P.light,N.light)||j.push({command:Pt.setLight,args:[N.light]});var Z={},ce=[];!function(we,Se,Oe,$e){var it;for(it in Se=Se||{},we=we||{})we.hasOwnProperty(it)&&(Se.hasOwnProperty(it)||Pe(it,Oe,$e));for(it in Se)Se.hasOwnProperty(it)&&(we.hasOwnProperty(it)?e.deepEqual(we[it],Se[it])||("geojson"===we[it].type&&"geojson"===Se[it].type&&dt(we,Se,it)?Oe.push({command:Pt.setGeoJSONSourceData,args:[it,Se[it].data]}):et(it,Se,Oe,$e)):Bt(it,Se,Oe))}(P.sources,N.sources,ce,Z);var ge=[];P.layers&&P.layers.forEach(function(we){Z[we.source]?j.push({command:Pt.removeLayer,args:[we.id]}):ge.push(we)}),j=j.concat(ce),function(we,Se,Oe){Se=Se||[];var $e,it,pt,Et,Ft,Dt,zt,Lt=(we=we||[]).map(Rt),Gt=Se.map(Rt),Ut=we.reduce(Yt,{}),Zt=Se.reduce(Yt,{}),vn=Lt.slice(),En=Object.create(null);for($e=0,it=0;$e<Lt.length;$e++)Zt.hasOwnProperty(pt=Lt[$e])?it++:(Oe.push({command:Pt.removeLayer,args:[pt]}),vn.splice(vn.indexOf(pt,it),1));for($e=0,it=0;$e<Gt.length;$e++)vn[vn.length-1-$e]!==(pt=Gt[Gt.length-1-$e])&&(Ut.hasOwnProperty(pt)?(Oe.push({command:Pt.removeLayer,args:[pt]}),vn.splice(vn.lastIndexOf(pt,vn.length-it),1)):it++,Oe.push({command:Pt.addLayer,args:[Zt[pt],Dt=vn[vn.length-$e]]}),vn.splice(vn.length-$e,0,pt),En[pt]=!0);for($e=0;$e<Gt.length;$e++)if(Et=Ut[pt=Gt[$e]],Ft=Zt[pt],!En[pt]&&!e.deepEqual(Et,Ft))if(e.deepEqual(Et.source,Ft.source)&&e.deepEqual(Et["source-layer"],Ft["source-layer"])&&e.deepEqual(Et.type,Ft.type)){for(zt in xt(Et.layout,Ft.layout,Oe,pt,null,Pt.setLayoutProperty),xt(Et.paint,Ft.paint,Oe,pt,null,Pt.setPaintProperty),e.deepEqual(Et.filter,Ft.filter)||Oe.push({command:Pt.setFilter,args:[pt,Ft.filter]}),e.deepEqual(Et.minzoom,Ft.minzoom)&&e.deepEqual(Et.maxzoom,Ft.maxzoom)||Oe.push({command:Pt.setLayerZoomRange,args:[pt,Ft.minzoom,Ft.maxzoom]}),Et)Et.hasOwnProperty(zt)&&"layout"!==zt&&"paint"!==zt&&"filter"!==zt&&"metadata"!==zt&&"minzoom"!==zt&&"maxzoom"!==zt&&(0===zt.indexOf("paint.")?xt(Et[zt],Ft[zt],Oe,pt,zt.slice(6),Pt.setPaintProperty):e.deepEqual(Et[zt],Ft[zt])||Oe.push({command:Pt.setLayerProperty,args:[pt,zt,Ft[zt]]}));for(zt in Ft)Ft.hasOwnProperty(zt)&&!Et.hasOwnProperty(zt)&&"layout"!==zt&&"paint"!==zt&&"filter"!==zt&&"metadata"!==zt&&"minzoom"!==zt&&"maxzoom"!==zt&&(0===zt.indexOf("paint.")?xt(Et[zt],Ft[zt],Oe,pt,zt.slice(6),Pt.setPaintProperty):e.deepEqual(Et[zt],Ft[zt])||Oe.push({command:Pt.setLayerProperty,args:[pt,zt,Ft[zt]]}))}else Oe.push({command:Pt.removeLayer,args:[pt]}),Dt=vn[vn.lastIndexOf(pt)+1],Oe.push({command:Pt.addLayer,args:[Ft,Dt]})}(ge,N.layers,j)}catch(we){console.warn("Unable to compute style diff:",we),j=[{command:Pt.setStyle,args:[N]}]}return j}(this.serialize(),j).filter(function(we){return!(we.command in Ir)});if(0===ce.length)return!1;var ge=ce.filter(function(we){return!(we.command in xr)});if(ge.length>0)throw new Error("Unimplemented: "+ge.map(function(we){return we.command}).join(", ")+".");return ce.forEach(function(we){"setTransition"!==we.command&&Z[we.command].apply(Z,we.args)}),this.stylesheet=j,!0},N.prototype.addImage=function(j,Z){if(this.getImage(j))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(j,Z),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.updateImage=function(j,Z){this.imageManager.updateImage(j,Z)},N.prototype.getImage=function(j){return this.imageManager.getImage(j)},N.prototype.removeImage=function(j){if(!this.getImage(j))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(j),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},N.prototype.addSource=function(j,Z,ce){var ge=this;if(void 0===ce&&(ce={}),this._checkLoaded(),void 0!==this.sourceCaches[j])throw new Error("There is already a source with this ID");if(!Z.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(Z).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(Z.type)>=0&&this._validate(e.validateStyle.source,"sources."+j,Z,null,ce))){this.map&&this.map._collectResourceTiming&&(Z.collectResourceTiming=!0);var we=this.sourceCaches[j]=new Ve(j,Z,this.dispatcher);we.style=this,we.setEventedParent(this,function(){return{isSourceLoaded:ge.loaded(),source:we.serialize(),sourceId:j}}),we.onAdd(this.map),this._changed=!0}},N.prototype.removeSource=function(j){if(this._checkLoaded(),void 0===this.sourceCaches[j])throw new Error("There is no source with this ID");for(var Z in this._layers)if(this._layers[Z].source===j)return this.fire(new e.ErrorEvent(new Error('Source "'+j+'" cannot be removed while layer "'+Z+'" is using it.')));var ce=this.sourceCaches[j];delete this.sourceCaches[j],delete this._updatedSources[j],ce.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:j})),ce.setEventedParent(null),ce.clearTiles(),ce.onRemove&&ce.onRemove(this.map),this._changed=!0},N.prototype.setGeoJSONSourceData=function(j,Z){this._checkLoaded(),this.sourceCaches[j].getSource().setData(Z),this._changed=!0},N.prototype.getSource=function(j){return this.sourceCaches[j]&&this.sourceCaches[j].getSource()},N.prototype.addLayer=function(j,Z,ce){void 0===ce&&(ce={}),this._checkLoaded();var ge=j.id;if(this.getLayer(ge))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" already exists on this map')));else{var we;if("custom"===j.type){if(vr(this,e.validateCustomStyleLayer(j)))return;we=e.createStyleLayer(j)}else{if("object"==typeof j.source&&(this.addSource(ge,j.source),j=e.clone$1(j),j=e.extend(j,{source:ge})),this._validate(e.validateStyle.layer,"layers."+ge,j,{arrayIndex:-1},ce))return;we=e.createStyleLayer(j),this._validateLayer(we),we.setEventedParent(this,{layer:{id:ge}}),this._serializedLayers[we.id]=we.serialize()}var Se=Z?this._order.indexOf(Z):this._order.length;if(Z&&-1===Se)this.fire(new e.ErrorEvent(new Error('Layer with id "'+Z+'" does not exist on this map.')));else{if(this._order.splice(Se,0,ge),this._layerOrderChanged=!0,this._layers[ge]=we,this._removedLayers[ge]&&we.source&&"custom"!==we.type){var Oe=this._removedLayers[ge];delete this._removedLayers[ge],Oe.type!==we.type?this._updatedSources[we.source]="clear":(this._updatedSources[we.source]="reload",this.sourceCaches[we.source].pause())}this._updateLayer(we),we.onAdd&&we.onAdd(this.map)}}},N.prototype.moveLayer=function(j,Z){if(this._checkLoaded(),this._changed=!0,this._layers[j]){if(j!==Z){var ce=this._order.indexOf(j);this._order.splice(ce,1);var ge=Z?this._order.indexOf(Z):this._order.length;Z&&-1===ge?this.fire(new e.ErrorEvent(new Error('Layer with id "'+Z+'" does not exist on this map.'))):(this._order.splice(ge,0,j),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be moved.")))},N.prototype.removeLayer=function(j){this._checkLoaded();var Z=this._layers[j];if(Z){Z.setEventedParent(null);var ce=this._order.indexOf(j);this._order.splice(ce,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[j]=Z,delete this._layers[j],delete this._serializedLayers[j],delete this._updatedLayers[j],delete this._updatedPaintProps[j],Z.onRemove&&Z.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be removed.")))},N.prototype.getLayer=function(j){return this._layers[j]},N.prototype.hasLayer=function(j){return j in this._layers},N.prototype.setLayerZoomRange=function(j,Z,ce){this._checkLoaded();var ge=this.getLayer(j);ge?ge.minzoom===Z&&ge.maxzoom===ce||(null!=Z&&(ge.minzoom=Z),null!=ce&&(ge.maxzoom=ce),this._updateLayer(ge)):this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot have zoom extent.")))},N.prototype.setFilter=function(j,Z,ce){void 0===ce&&(ce={}),this._checkLoaded();var ge=this.getLayer(j);if(ge){if(!e.deepEqual(ge.filter,Z))return null==Z?(ge.filter=void 0,void this._updateLayer(ge)):void(this._validate(e.validateStyle.filter,"layers."+ge.id+".filter",Z,null,ce)||(ge.filter=e.clone$1(Z),this._updateLayer(ge)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be filtered.")))},N.prototype.getFilter=function(j){return e.clone$1(this.getLayer(j).filter)},N.prototype.setLayoutProperty=function(j,Z,ce,ge){void 0===ge&&(ge={}),this._checkLoaded();var we=this.getLayer(j);we?e.deepEqual(we.getLayoutProperty(Z),ce)||(we.setLayoutProperty(Z,ce,ge),this._updateLayer(we)):this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getLayoutProperty=function(j,Z){var ce=this.getLayer(j);if(ce)return ce.getLayoutProperty(Z);this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style.")))},N.prototype.setPaintProperty=function(j,Z,ce,ge){void 0===ge&&(ge={}),this._checkLoaded();var we=this.getLayer(j);we?e.deepEqual(we.getPaintProperty(Z),ce)||(we.setPaintProperty(Z,ce,ge)&&this._updateLayer(we),this._changed=!0,this._updatedPaintProps[j]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getPaintProperty=function(j,Z){return this.getLayer(j).getPaintProperty(Z)},N.prototype.setFeatureState=function(j,Z){this._checkLoaded();var ce=j.source,ge=j.sourceLayer,we=this.sourceCaches[ce];if(void 0!==we){var Se=we.getSource().type;"geojson"===Se&&ge?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Se||ge?(void 0===j.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),we.setFeatureState(ge,j.id,Z)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ce+"' does not exist in the map's style.")))},N.prototype.removeFeatureState=function(j,Z){this._checkLoaded();var ce=j.source,ge=this.sourceCaches[ce];if(void 0!==ge){var we=ge.getSource().type,Se="vector"===we?j.sourceLayer:void 0;"vector"!==we||Se?Z&&"string"!=typeof j.id&&"number"!=typeof j.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ge.removeFeatureState(Se,j.id,Z):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ce+"' does not exist in the map's style.")))},N.prototype.getFeatureState=function(j){this._checkLoaded();var Z=j.source,ce=j.sourceLayer,ge=this.sourceCaches[Z];if(void 0!==ge){if("vector"!==ge.getSource().type||ce)return void 0===j.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ge.getFeatureState(ce,j.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+Z+"' does not exist in the map's style.")))},N.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},N.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(j){return j.serialize()}),layers:this._serializeLayers(this._order)},function(j){return void 0!==j})},N.prototype._updateLayer=function(j){this._updatedLayers[j.id]=!0,j.source&&!this._updatedSources[j.source]&&"raster"!==this.sourceCaches[j.source].getSource().type&&(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause()),this._changed=!0},N.prototype._flattenAndSortRenderedFeatures=function(j){for(var Z=this,ce=function(Er){return"fill-extrusion"===Z._layers[Er].type},ge={},we=[],Se=this._order.length-1;Se>=0;Se--){var Oe=this._order[Se];if(ce(Oe)){ge[Oe]=Se;for(var $e=0,it=j;$e<it.length;$e+=1){var pt=it[$e][Oe];if(pt)for(var Et=0,Ft=pt;Et<Ft.length;Et+=1)we.push(Ft[Et])}}}we.sort(function(Er,yr){return yr.intersectionZ-Er.intersectionZ});for(var zt=[],Lt=this._order.length-1;Lt>=0;Lt--){var Gt=this._order[Lt];if(ce(Gt))for(var Ut=we.length-1;Ut>=0;Ut--){var Zt=we[Ut].feature;if(ge[Zt.layer.id]<Lt)break;zt.push(Zt),we.pop()}else for(var vn=0,En=j;vn<En.length;vn+=1){var qn=En[vn][Gt];if(qn)for(var Vn=0,pr=qn;Vn<pr.length;Vn+=1)zt.push(pr[Vn].feature)}}return zt},N.prototype.queryRenderedFeatures=function(j,Z,ce){Z&&Z.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",Z.filter,null,Z);var ge={};if(Z&&Z.layers){if(!Array.isArray(Z.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var we=0,Se=Z.layers;we<Se.length;we+=1){var Oe=Se[we],$e=this._layers[Oe];if(!$e)return this.fire(new e.ErrorEvent(new Error("The layer '"+Oe+"' does not exist in the map's style and cannot be queried for features."))),[];ge[$e.source]=!0}}var it=[];for(var pt in Z.availableImages=this._availableImages,this.sourceCaches)Z.layers&&!ge[pt]||it.push(q(this.sourceCaches[pt],this._layers,this._serializedLayers,j,Z,ce));return this.placement&&it.push(function(Et,Ft,Dt,zt,Lt,Gt,Ut){for(var Zt={},vn=Gt.queryRenderedSymbols(zt),En=[],qn=0,Vn=Object.keys(vn).map(Number);qn<Vn.length;qn+=1)En.push(Ut[Vn[qn]]);En.sort(ie);for(var gr=function(){var Fi=yr[Er],or=Fi.featureIndex.lookupSymbolFeatures(vn[Fi.bucketInstanceId],Ft,Fi.bucketIndex,Fi.sourceLayerIndex,Lt.filter,Lt.layers,Lt.availableImages,Et);for(var zr in or){var yi=Zt[zr]=Zt[zr]||[],ci=or[zr];ci.sort(function(_i,qi){var Vi=Fi.featureSortOrder;if(Vi){var oa=Vi.indexOf(_i.featureIndex);return Vi.indexOf(qi.featureIndex)-oa}return qi.featureIndex-_i.featureIndex});for(var Si=0,ji=ci;Si<ji.length;Si+=1)yi.push(ji[Si])}},Er=0,yr=En;Er<yr.length;Er+=1)gr();var Jr=function(Fi){Zt[Fi].forEach(function(or){var zr=or.feature,ci=Dt[Et[Fi].source].getFeatureState(zr.layer["source-layer"],zr.id);zr.source=zr.layer.source,zr.layer["source-layer"]&&(zr.sourceLayer=zr.layer["source-layer"]),zr.state=ci})};for(var vi in Zt)Jr(vi);return Zt}(this._layers,this._serializedLayers,this.sourceCaches,j,Z,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(it)},N.prototype.querySourceFeatures=function(j,Z){Z&&Z.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",Z.filter,null,Z);var ce=this.sourceCaches[j];return ce?function(ge,we){for(var Se=ge.getRenderableIds().map(function(Ft){return ge.getTileByID(Ft)}),Oe=[],$e={},it=0;it<Se.length;it++){var pt=Se[it],Et=pt.tileID.canonical.key;$e[Et]||($e[Et]=!0,pt.querySourceFeatures(Oe,we))}return Oe}(ce,Z):[]},N.prototype.addSourceType=function(j,Z,ce){return N.getSourceType(j)?ce(new Error('A source type called "'+j+'" already exists.')):(N.setSourceType(j,Z),Z.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:j,url:Z.workerSourceURL},ce):ce(null,null))},N.prototype.getLight=function(){return this.light.getLight()},N.prototype.setLight=function(j,Z){void 0===Z&&(Z={}),this._checkLoaded();var ce=this.light.getLight(),ge=!1;for(var we in j)if(!e.deepEqual(j[we],ce[we])){ge=!0;break}if(ge){var Se={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(j,Z),this.light.updateTransitions(Se)}},N.prototype._validate=function(j,Z,ce,ge,we){return void 0===we&&(we={}),(!we||!1!==we.validate)&&vr(this,j.call(e.validateStyle,e.extend({key:Z,style:this.serialize(),value:ce,styleSpec:e.styleSpec},ge)))},N.prototype._remove=function(){for(var j in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[j].setEventedParent(null);for(var Z in this.sourceCaches)this.sourceCaches[Z].clearTiles(),this.sourceCaches[Z].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},N.prototype._clearSource=function(j){this.sourceCaches[j].clearTiles()},N.prototype._reloadSource=function(j){this.sourceCaches[j].resume(),this.sourceCaches[j].reload()},N.prototype._updateSources=function(j){for(var Z in this.sourceCaches)this.sourceCaches[Z].update(j)},N.prototype._generateCollisionBoxes=function(){for(var j in this.sourceCaches)this._reloadSource(j)},N.prototype._updatePlacement=function(j,Z,ce,ge,we){void 0===we&&(we=!1);for(var Se=!1,Oe=!1,$e={},it=0,pt=this._order;it<pt.length;it+=1){var Ft=this._layers[pt[it]];if("symbol"===Ft.type){if(!$e[Ft.source]){var Dt=this.sourceCaches[Ft.source];$e[Ft.source]=Dt.getRenderableIds(!0).map(function(vn){return Dt.getTileByID(vn)}).sort(function(vn,En){return En.tileID.overscaledZ-vn.tileID.overscaledZ||(vn.tileID.isLessThan(En.tileID)?-1:1)})}var zt=this.crossTileSymbolIndex.addLayer(Ft,$e[Ft.source],j.center.lng);Se=Se||zt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((we=we||this._layerOrderChanged||0===ce)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),j.zoom))&&(this.pauseablePlacement=new Ln(j,this._order,we,Z,ce,ge,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Oe=!0),Se&&this.pauseablePlacement.placement.setStale()),Oe||Se)for(var Lt=0,Gt=this._order;Lt<Gt.length;Lt+=1){var Zt=this._layers[Gt[Lt]];"symbol"===Zt.type&&this.placement.updateLayerOpacities(Zt,$e[Zt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},N.prototype._releaseSymbolFadeTiles=function(){for(var j in this.sourceCaches)this.sourceCaches[j].releaseSymbolFadeTiles()},N.prototype.getImages=function(j,Z,ce){this.imageManager.getImages(Z.icons,ce),this._updateTilesForChangedImages();var ge=this.sourceCaches[Z.source];ge&&ge.setDependencies(Z.tileID.key,Z.type,Z.icons)},N.prototype.getGlyphs=function(j,Z,ce){this.glyphManager.getGlyphs(Z.stacks,ce)},N.prototype.getResource=function(j,Z,ce){return e.makeRequest(Z,ce)},N}(e.Evented);Rr.getSourceType=function(P){return U[P]},Rr.setSourceType=function(P,N){U[P]=N},Rr.registerForPluginStateChange=e.registerForPluginStateChange;var Ur=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),$r=Fa("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),gi=Fa("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ai=Fa("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Wi=Fa("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Br=Fa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ui=Fa("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),mi=Fa("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ya=Fa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Wa=Fa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Xa=Fa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ws=Fa("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Va=Fa("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ua=Fa("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),sa=Fa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ta=Fa("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Ts=Fa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Fo=Fa("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Xi=Fa("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),zo=Fa("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),es=Fa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),cs=Fa("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Lo=Fa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Ua=Fa("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Co=Fa("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),kl=Fa("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),fl=Fa("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Fa(P,N){var j=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Z={};return{fragmentSource:P=P.replace(j,function(ce,ge,we,Se,Oe){return Z[Oe]=!0,"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nvarying "+we+" "+Se+" "+Oe+";\n#else\nuniform "+we+" "+Se+" u_"+Oe+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Oe+"\n    "+we+" "+Se+" "+Oe+" = u_"+Oe+";\n#endif\n"}),vertexSource:N=N.replace(j,function(ce,ge,we,Se,Oe){var $e="float"===Se?"vec2":"vec4",it=Oe.match(/color/)?"color":$e;return Z[Oe]?"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nuniform lowp float u_"+Oe+"_t;\nattribute "+we+" "+$e+" a_"+Oe+";\nvarying "+we+" "+Se+" "+Oe+";\n#else\nuniform "+we+" "+Se+" u_"+Oe+";\n#endif\n":"vec4"===it?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+Oe+" = a_"+Oe+";\n#else\n    "+we+" "+Se+" "+Oe+" = u_"+Oe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+Oe+" = unpack_mix_"+it+"(a_"+Oe+", u_"+Oe+"_t);\n#else\n    "+we+" "+Se+" "+Oe+" = u_"+Oe+";\n#endif\n":"define"===ge?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nuniform lowp float u_"+Oe+"_t;\nattribute "+we+" "+$e+" a_"+Oe+";\n#else\nuniform "+we+" "+Se+" u_"+Oe+";\n#endif\n":"vec4"===it?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+we+" "+Se+" "+Oe+" = a_"+Oe+";\n#else\n    "+we+" "+Se+" "+Oe+" = u_"+Oe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+we+" "+Se+" "+Oe+" = unpack_mix_"+it+"(a_"+Oe+", u_"+Oe+"_t);\n#else\n    "+we+" "+Se+" "+Oe+" = u_"+Oe+";\n#endif\n"})}}var hl=Object.freeze({__proto__:null,prelude:$r,background:gi,backgroundPattern:ai,circle:Wi,clippingMask:Br,heatmap:ui,heatmapTexture:mi,collisionBox:ya,collisionCircle:Wa,debug:Xa,fill:ws,fillOutline:Va,fillOutlinePattern:ua,fillPattern:sa,fillExtrusion:Ta,fillExtrusionPattern:Ts,hillshadePrepare:Fo,hillshade:Xi,line:zo,lineGradient:es,linePattern:cs,lineSDF:Lo,raster:Ua,symbolIcon:Co,symbolSDF:kl,symbolTextAndIcon:fl}),$s=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};$s.prototype.bind=function(P,N,j,Z,ce,ge,we,Se){this.context=P;for(var Oe=this.boundPaintVertexBuffers.length!==Z.length,$e=0;!Oe&&$e<Z.length;$e++)this.boundPaintVertexBuffers[$e]!==Z[$e]&&(Oe=!0);P.extVertexArrayObject&&this.vao&&this.boundProgram===N&&this.boundLayoutVertexBuffer===j&&!Oe&&this.boundIndexBuffer===ce&&this.boundVertexOffset===ge&&this.boundDynamicVertexBuffer===we&&this.boundDynamicVertexBuffer2===Se?(P.bindVertexArrayOES.set(this.vao),we&&we.bind(),ce&&ce.dynamicDraw&&ce.bind(),Se&&Se.bind()):this.freshBind(N,j,Z,ce,ge,we,Se)},$s.prototype.freshBind=function(P,N,j,Z,ce,ge,we){var Se,Oe=P.numAttributes,$e=this.context,it=$e.gl;if($e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$e.extVertexArrayObject.createVertexArrayOES(),$e.bindVertexArrayOES.set(this.vao),Se=0,this.boundProgram=P,this.boundLayoutVertexBuffer=N,this.boundPaintVertexBuffers=j,this.boundIndexBuffer=Z,this.boundVertexOffset=ce,this.boundDynamicVertexBuffer=ge,this.boundDynamicVertexBuffer2=we;else{Se=$e.currentNumAttributes||0;for(var pt=Oe;pt<Se;pt++)it.disableVertexAttribArray(pt)}N.enableAttributes(it,P);for(var Et=0,Ft=j;Et<Ft.length;Et+=1)Ft[Et].enableAttributes(it,P);ge&&ge.enableAttributes(it,P),we&&we.enableAttributes(it,P),N.bind(),N.setVertexAttribPointers(it,P,ce);for(var Dt=0,zt=j;Dt<zt.length;Dt+=1){var Lt=zt[Dt];Lt.bind(),Lt.setVertexAttribPointers(it,P,ce)}ge&&(ge.bind(),ge.setVertexAttribPointers(it,P,ce)),Z&&Z.bind(),we&&(we.bind(),we.setVertexAttribPointers(it,P,ce)),$e.currentNumAttributes=Oe},$s.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Os=function(P,N,j,Z,ce){var ge=P.gl;this.program=ge.createProgram();var we=j?j.defines():[];ce&&we.push("#define OVERDRAW_INSPECTOR;");var Se=we.concat($r.fragmentSource,N.fragmentSource).join("\n"),Oe=we.concat($r.vertexSource,N.vertexSource).join("\n"),$e=ge.createShader(ge.FRAGMENT_SHADER);if(ge.isContextLost())this.failedToCreate=!0;else{ge.shaderSource($e,Se),ge.compileShader($e),ge.attachShader(this.program,$e);var it=ge.createShader(ge.VERTEX_SHADER);if(ge.isContextLost())this.failedToCreate=!0;else{ge.shaderSource(it,Oe),ge.compileShader(it),ge.attachShader(this.program,it);for(var pt=j?j.layoutAttributes:[],Et=0;Et<pt.length;Et++)ge.bindAttribLocation(this.program,Et,pt[Et].name);ge.linkProgram(this.program),ge.deleteShader(it),ge.deleteShader($e),this.numAttributes=ge.getProgramParameter(this.program,ge.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ft={},Dt=0;Dt<this.numAttributes;Dt++){var zt=ge.getActiveAttrib(this.program,Dt);zt&&(this.attributes[zt.name]=ge.getAttribLocation(this.program,zt.name))}for(var Lt=ge.getProgramParameter(this.program,ge.ACTIVE_UNIFORMS),Gt=0;Gt<Lt;Gt++){var Ut=ge.getActiveUniform(this.program,Gt);Ut&&(Ft[Ut.name]=ge.getUniformLocation(this.program,Ut.name))}this.fixedUniforms=Z(P,Ft),this.binderUniforms=j?j.getUniforms(P,Ft):[]}}};function Rl(P,N,j){var Z=1/hr(j,1,N.transform.tileZoom),ce=Math.pow(2,j.tileID.overscaledZ),ge=j.tileSize*Math.pow(2,N.transform.tileZoom)/ce,we=ge*(j.tileID.canonical.x+j.tileID.wrap*ce),Se=ge*j.tileID.canonical.y;return{u_image:0,u_texsize:j.imageAtlasTexture.size,u_scale:[Z,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[we>>16,Se>>16],u_pixel_coord_lower:[65535&we,65535&Se]}}Os.prototype.draw=function(P,N,j,Z,ce,ge,we,Se,Oe,$e,it,pt,Et,Ft,Dt,zt){var Lt,Gt=P.gl;if(!this.failedToCreate){for(var Ut in P.program.set(this.program),P.setDepthMode(j),P.setStencilMode(Z),P.setColorMode(ce),P.setCullFace(ge),this.fixedUniforms)this.fixedUniforms[Ut].set(we[Ut]);Ft&&Ft.setUniforms(P,this.binderUniforms,pt,{zoom:Et});for(var Zt=(Lt={},Lt[Gt.LINES]=2,Lt[Gt.TRIANGLES]=3,Lt[Gt.LINE_STRIP]=1,Lt)[N],vn=0,En=it.get();vn<En.length;vn+=1){var qn=En[vn],Vn=qn.vaos||(qn.vaos={});(Vn[Se]||(Vn[Se]=new $s)).bind(P,this,Oe,Ft?Ft.getPaintVertexBuffers():[],$e,qn.vertexOffset,Dt,zt),Gt.drawElements(N,qn.primitiveLength*Zt,Gt.UNSIGNED_SHORT,qn.primitiveOffset*Zt*2)}}};var ml=function(P,N,j,Z){var ce=N.style.light,ge=ce.properties.get("position"),we=[ge.x,ge.y,ge.z],Se=e.create$1();"viewport"===ce.properties.get("anchor")&&e.fromRotation(Se,-N.transform.angle),e.transformMat3(we,we,Se);var Oe=ce.properties.get("color");return{u_matrix:P,u_lightpos:we,u_lightintensity:ce.properties.get("intensity"),u_lightcolor:[Oe.r,Oe.g,Oe.b],u_vertical_gradient:+j,u_opacity:Z}},fs=function(P,N,j,Z,ce,ge,we){return e.extend(ml(P,N,j,Z),Rl(ge,N,we),{u_height_factor:-Math.pow(2,ce.overscaledZ)/we.tileSize/8})},oo=function(P){return{u_matrix:P}},pa=function(P,N,j,Z){return e.extend(oo(P),Rl(j,N,Z))},ho=function(P,N){return{u_matrix:P,u_world:N}},po=function(P,N,j,Z,ce){return e.extend(pa(P,N,j,Z),{u_world:ce})},ko=function(P,N,j,Z){var ce,ge,we=P.transform;if("map"===Z.paint.get("circle-pitch-alignment")){var Se=hr(j,1,we.zoom);ce=!0,ge=[Se,Se]}else ce=!1,ge=we.pixelsToGLUnits;return{u_camera_to_center_distance:we.cameraToCenterDistance,u_scale_with_map:+("map"===Z.paint.get("circle-pitch-scale")),u_matrix:P.translatePosMatrix(N.posMatrix,j,Z.paint.get("circle-translate"),Z.paint.get("circle-translate-anchor")),u_pitch_with_map:+ce,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ge}},No=function(P,N,j){var Z=hr(j,1,N.zoom),ce=Math.pow(2,N.zoom-j.tileID.overscaledZ),ge=j.tileID.overscaleFactor();return{u_matrix:P,u_camera_to_center_distance:N.cameraToCenterDistance,u_pixels_to_tile_units:Z,u_extrude_scale:[N.pixelsToGLUnits[0]/(Z*ce),N.pixelsToGLUnits[1]/(Z*ce)],u_overscale_factor:ge}},hi=function(P,N,j){return{u_matrix:P,u_inv_matrix:N,u_camera_to_center_distance:j.cameraToCenterDistance,u_viewport_size:[j.width,j.height]}},na=function(P,N,j){return void 0===j&&(j=1),{u_matrix:P,u_color:N,u_overlay:0,u_overlay_scale:j}},Ma=function(P){return{u_matrix:P}},Ao=function(P,N,j,Z){return{u_matrix:P,u_extrude_scale:hr(N,1,j),u_intensity:Z}};function Rs(P,N){var j=Math.pow(2,N.canonical.z),Z=N.canonical.y;return[new e.MercatorCoordinate(0,Z/j).toLngLat().lat,new e.MercatorCoordinate(0,(Z+1)/j).toLngLat().lat]}var Qa=function(P,N,j){var Z=P.transform;return{u_matrix:ht(P,N,j),u_ratio:1/hr(N,1,Z.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/Z.pixelsToGLUnits[0],1/Z.pixelsToGLUnits[1]]}},ga=function(P,N,j){return e.extend(Qa(P,N,j),{u_image:0})},Ge=function(P,N,j,Z){var ce=P.transform,ge=ut(N,ce);return{u_matrix:ht(P,N,j),u_texsize:N.imageAtlasTexture.size,u_ratio:1/hr(N,1,ce.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ge,Z.fromScale,Z.toScale],u_fade:Z.t,u_units_to_pixels:[1/ce.pixelsToGLUnits[0],1/ce.pixelsToGLUnits[1]]}},Qe=function(P,N,j,Z,ce){var we=P.lineAtlas,Se=ut(N,P.transform),Oe="round"===j.layout.get("line-cap"),$e=we.getDash(Z.from,Oe),it=we.getDash(Z.to,Oe),pt=$e.width*ce.fromScale,Et=it.width*ce.toScale;return e.extend(Qa(P,N,j),{u_patternscale_a:[Se/pt,-$e.height/2],u_patternscale_b:[Se/Et,-it.height/2],u_sdfgamma:we.width/(256*Math.min(pt,Et)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:$e.y,u_tex_y_b:it.y,u_mix:ce.t})};function ut(P,N){return 1/hr(P,1,N.tileZoom)}function ht(P,N,j){return P.translatePosMatrix(N.tileID.posMatrix,N,j.paint.get("line-translate"),j.paint.get("line-translate-anchor"))}var kt=function(P,N,j,Z,ce){return{u_matrix:P,u_tl_parent:N,u_scale_parent:j,u_buffer_scale:1,u_fade_t:Z.mix,u_opacity:Z.opacity*ce.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ce.paint.get("raster-brightness-min"),u_brightness_high:ce.paint.get("raster-brightness-max"),u_saturation_factor:(we=ce.paint.get("raster-saturation"),we>0?1-1/(1.001-we):-we),u_contrast_factor:(ge=ce.paint.get("raster-contrast"),ge>0?1/(1-ge):1+ge),u_spin_weights:Mt(ce.paint.get("raster-hue-rotate"))};var ge,we};function Mt(P){P*=Math.PI/180;var N=Math.sin(P),j=Math.cos(P);return[(2*j+1)/3,(-Math.sqrt(3)*N-j+1)/3,(Math.sqrt(3)*N-j+1)/3]}var Nt,ln=function(P,N,j,Z,ce,ge,we,Se,Oe,$e){var it=ce.transform;return{u_is_size_zoom_constant:+("constant"===P||"source"===P),u_is_size_feature_constant:+("constant"===P||"camera"===P),u_size_t:N?N.uSizeT:0,u_size:N?N.uSize:0,u_camera_to_center_distance:it.cameraToCenterDistance,u_pitch:it.pitch/360*2*Math.PI,u_rotate_symbol:+j,u_aspect_ratio:it.width/it.height,u_fade_change:ce.options.fadeDuration?ce.symbolFadeChange:1,u_matrix:ge,u_label_plane_matrix:we,u_coord_matrix:Se,u_is_text:+Oe,u_pitch_with_map:+Z,u_texsize:$e,u_texture:0}},sn=function(P,N,j,Z,ce,ge,we,Se,Oe,$e,it){var pt=ce.transform;return e.extend(ln(P,N,j,Z,ce,ge,we,Se,Oe,$e),{u_gamma_scale:Z?Math.cos(pt._pitch)*pt.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+it})},rn=function(P,N,j,Z,ce,ge,we,Se,Oe,$e){return e.extend(sn(P,N,j,Z,ce,ge,we,Se,!0,Oe,!0),{u_texsize_icon:$e,u_texture_icon:1})},mn=function(P,N,j){return{u_matrix:P,u_opacity:N,u_color:j}},kn=function(P,N,j,Z,ce,ge){return e.extend((Se=ge,$e=ce,it=(Oe=j).imageManager.getPattern((we=Z).from.toString()),pt=Oe.imageManager.getPattern(we.to.toString()),Ft=(Et=Oe.imageManager.getPixelSize()).width,Dt=Et.height,zt=Math.pow(2,$e.tileID.overscaledZ),Gt=(Lt=$e.tileSize*Math.pow(2,Oe.transform.tileZoom)/zt)*($e.tileID.canonical.x+$e.tileID.wrap*zt),Ut=Lt*$e.tileID.canonical.y,{u_image:0,u_pattern_tl_a:it.tl,u_pattern_br_a:it.br,u_pattern_tl_b:pt.tl,u_pattern_br_b:pt.br,u_texsize:[Ft,Dt],u_mix:Se.t,u_pattern_size_a:it.displaySize,u_pattern_size_b:pt.displaySize,u_scale_a:Se.fromScale,u_scale_b:Se.toScale,u_tile_units_to_pixels:1/hr($e,1,Oe.transform.tileZoom),u_pixel_coord_upper:[Gt>>16,Ut>>16],u_pixel_coord_lower:[65535&Gt,65535&Ut]}),{u_matrix:P,u_opacity:N});var we,Se,Oe,$e,it,pt,Et,Ft,Dt,zt,Lt,Gt,Ut},In={fillExtrusion:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_lightpos:new e.Uniform3f(P,N.u_lightpos),u_lightintensity:new e.Uniform1f(P,N.u_lightintensity),u_lightcolor:new e.Uniform3f(P,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(P,N.u_vertical_gradient),u_opacity:new e.Uniform1f(P,N.u_opacity)}},fillExtrusionPattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_lightpos:new e.Uniform3f(P,N.u_lightpos),u_lightintensity:new e.Uniform1f(P,N.u_lightintensity),u_lightcolor:new e.Uniform3f(P,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(P,N.u_vertical_gradient),u_height_factor:new e.Uniform1f(P,N.u_height_factor),u_image:new e.Uniform1i(P,N.u_image),u_texsize:new e.Uniform2f(P,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade),u_opacity:new e.Uniform1f(P,N.u_opacity)}},fill:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},fillPattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_image:new e.Uniform1i(P,N.u_image),u_texsize:new e.Uniform2f(P,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade)}},fillOutline:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_world:new e.Uniform2f(P,N.u_world)}},fillOutlinePattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_world:new e.Uniform2f(P,N.u_world),u_image:new e.Uniform1i(P,N.u_image),u_texsize:new e.Uniform2f(P,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade)}},circle:function(P,N){return{u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(P,N.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(P,N.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},collisionBox:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(P,N.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(P,N.u_extrude_scale),u_overscale_factor:new e.Uniform1f(P,N.u_overscale_factor)}},collisionCircle:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_inv_matrix:new e.UniformMatrix4f(P,N.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(P,N.u_viewport_size)}},debug:function(P,N){return{u_color:new e.UniformColor(P,N.u_color),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_overlay:new e.Uniform1i(P,N.u_overlay),u_overlay_scale:new e.Uniform1f(P,N.u_overlay_scale)}},clippingMask:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},heatmap:function(P,N){return{u_extrude_scale:new e.Uniform1f(P,N.u_extrude_scale),u_intensity:new e.Uniform1f(P,N.u_intensity),u_matrix:new e.UniformMatrix4f(P,N.u_matrix)}},heatmapTexture:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_world:new e.Uniform2f(P,N.u_world),u_image:new e.Uniform1i(P,N.u_image),u_color_ramp:new e.Uniform1i(P,N.u_color_ramp),u_opacity:new e.Uniform1f(P,N.u_opacity)}},hillshade:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_image:new e.Uniform1i(P,N.u_image),u_latrange:new e.Uniform2f(P,N.u_latrange),u_light:new e.Uniform2f(P,N.u_light),u_shadow:new e.UniformColor(P,N.u_shadow),u_highlight:new e.UniformColor(P,N.u_highlight),u_accent:new e.UniformColor(P,N.u_accent)}},hillshadePrepare:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_image:new e.Uniform1i(P,N.u_image),u_dimension:new e.Uniform2f(P,N.u_dimension),u_zoom:new e.Uniform1f(P,N.u_zoom),u_maxzoom:new e.Uniform1f(P,N.u_maxzoom),u_unpack:new e.Uniform4f(P,N.u_unpack)}},line:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels)}},lineGradient:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels),u_image:new e.Uniform1i(P,N.u_image)}},linePattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_texsize:new e.Uniform2f(P,N.u_texsize),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_image:new e.Uniform1i(P,N.u_image),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels),u_scale:new e.Uniform3f(P,N.u_scale),u_fade:new e.Uniform1f(P,N.u_fade)}},lineSDF:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_ratio:new e.Uniform1f(P,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(P,N.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(P,N.u_patternscale_a),u_patternscale_b:new e.Uniform2f(P,N.u_patternscale_b),u_sdfgamma:new e.Uniform1f(P,N.u_sdfgamma),u_image:new e.Uniform1i(P,N.u_image),u_tex_y_a:new e.Uniform1f(P,N.u_tex_y_a),u_tex_y_b:new e.Uniform1f(P,N.u_tex_y_b),u_mix:new e.Uniform1f(P,N.u_mix)}},raster:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_tl_parent:new e.Uniform2f(P,N.u_tl_parent),u_scale_parent:new e.Uniform1f(P,N.u_scale_parent),u_buffer_scale:new e.Uniform1f(P,N.u_buffer_scale),u_fade_t:new e.Uniform1f(P,N.u_fade_t),u_opacity:new e.Uniform1f(P,N.u_opacity),u_image0:new e.Uniform1i(P,N.u_image0),u_image1:new e.Uniform1i(P,N.u_image1),u_brightness_low:new e.Uniform1f(P,N.u_brightness_low),u_brightness_high:new e.Uniform1f(P,N.u_brightness_high),u_saturation_factor:new e.Uniform1f(P,N.u_saturation_factor),u_contrast_factor:new e.Uniform1f(P,N.u_contrast_factor),u_spin_weights:new e.Uniform3f(P,N.u_spin_weights)}},symbolIcon:function(P,N){return{u_is_size_zoom_constant:new e.Uniform1i(P,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(P,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(P,N.u_size_t),u_size:new e.Uniform1f(P,N.u_size),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(P,N.u_pitch),u_rotate_symbol:new e.Uniform1i(P,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(P,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(P,N.u_fade_change),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(P,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(P,N.u_coord_matrix),u_is_text:new e.Uniform1i(P,N.u_is_text),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_texsize:new e.Uniform2f(P,N.u_texsize),u_texture:new e.Uniform1i(P,N.u_texture)}},symbolSDF:function(P,N){return{u_is_size_zoom_constant:new e.Uniform1i(P,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(P,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(P,N.u_size_t),u_size:new e.Uniform1f(P,N.u_size),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(P,N.u_pitch),u_rotate_symbol:new e.Uniform1i(P,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(P,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(P,N.u_fade_change),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(P,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(P,N.u_coord_matrix),u_is_text:new e.Uniform1i(P,N.u_is_text),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_texsize:new e.Uniform2f(P,N.u_texsize),u_texture:new e.Uniform1i(P,N.u_texture),u_gamma_scale:new e.Uniform1f(P,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(P,N.u_is_halo)}},symbolTextAndIcon:function(P,N){return{u_is_size_zoom_constant:new e.Uniform1i(P,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(P,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(P,N.u_size_t),u_size:new e.Uniform1f(P,N.u_size),u_camera_to_center_distance:new e.Uniform1f(P,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(P,N.u_pitch),u_rotate_symbol:new e.Uniform1i(P,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(P,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(P,N.u_fade_change),u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(P,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(P,N.u_coord_matrix),u_is_text:new e.Uniform1i(P,N.u_is_text),u_pitch_with_map:new e.Uniform1i(P,N.u_pitch_with_map),u_texsize:new e.Uniform2f(P,N.u_texsize),u_texsize_icon:new e.Uniform2f(P,N.u_texsize_icon),u_texture:new e.Uniform1i(P,N.u_texture),u_texture_icon:new e.Uniform1i(P,N.u_texture_icon),u_gamma_scale:new e.Uniform1f(P,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(P,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(P,N.u_is_halo)}},background:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_opacity:new e.Uniform1f(P,N.u_opacity),u_color:new e.UniformColor(P,N.u_color)}},backgroundPattern:function(P,N){return{u_matrix:new e.UniformMatrix4f(P,N.u_matrix),u_opacity:new e.Uniform1f(P,N.u_opacity),u_image:new e.Uniform1i(P,N.u_image),u_pattern_tl_a:new e.Uniform2f(P,N.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(P,N.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(P,N.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(P,N.u_pattern_br_b),u_texsize:new e.Uniform2f(P,N.u_texsize),u_mix:new e.Uniform1f(P,N.u_mix),u_pattern_size_a:new e.Uniform2f(P,N.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(P,N.u_pattern_size_b),u_scale_a:new e.Uniform1f(P,N.u_scale_a),u_scale_b:new e.Uniform1f(P,N.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(P,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(P,N.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(P,N.u_tile_units_to_pixels)}}};function Rn(P,N,j,Z,ce,ge,we){for(var Se=P.context,Oe=Se.gl,$e=P.useProgram("collisionBox"),it=[],pt=0,Et=0,Ft=0;Ft<Z.length;Ft++){var Dt=Z[Ft],zt=N.getTile(Dt),Lt=zt.getBucket(j);if(Lt){var Gt=Dt.posMatrix;0===ce[0]&&0===ce[1]||(Gt=P.translatePosMatrix(Dt.posMatrix,zt,ce,ge));var Ut=we?Lt.textCollisionBox:Lt.iconCollisionBox,Zt=Lt.collisionCircleArray;if(Zt.length>0){var vn=e.create(),En=Gt;e.mul(vn,Lt.placementInvProjMatrix,P.transform.glCoordMatrix),e.mul(vn,vn,Lt.placementViewportMatrix),it.push({circleArray:Zt,circleOffset:Et,transform:En,invTransform:vn}),Et=pt+=Zt.length/4}Ut&&$e.draw(Se,Oe.LINES,en.disabled,Xe.disabled,P.colorModeForRenderPass(),ye.disabled,No(Gt,P.transform,zt),j.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,null,P.transform.zoom,null,null,Ut.collisionVertexBuffer)}}if(we&&it.length){var qn=P.useProgram("collisionCircle"),Vn=new e.StructArrayLayout2f1f2i16;Vn.resize(4*pt),Vn._trim();for(var pr=0,gr=0,Er=it;gr<Er.length;gr+=1)for(var yr=Er[gr],Jr=0;Jr<yr.circleArray.length/4;Jr++){var vi=4*Jr,Fi=yr.circleArray[vi+0],or=yr.circleArray[vi+1],zr=yr.circleArray[vi+2],yi=yr.circleArray[vi+3];Vn.emplace(pr++,Fi,or,zr,yi,0),Vn.emplace(pr++,Fi,or,zr,yi,1),Vn.emplace(pr++,Fi,or,zr,yi,2),Vn.emplace(pr++,Fi,or,zr,yi,3)}(!Nt||Nt.length<2*pt)&&(Nt=function(Vi){var oa=2*Vi,Gi=new e.StructArrayLayout3ui6;Gi.resize(oa),Gi._trim();for(var ta=0;ta<oa;ta++){var Da=6*ta;Gi.uint16[Da+0]=4*ta+0,Gi.uint16[Da+1]=4*ta+1,Gi.uint16[Da+2]=4*ta+2,Gi.uint16[Da+3]=4*ta+2,Gi.uint16[Da+4]=4*ta+3,Gi.uint16[Da+5]=4*ta+0}return Gi}(pt));for(var ci=Se.createIndexBuffer(Nt,!0),Si=Se.createVertexBuffer(Vn,e.collisionCircleLayout.members,!0),ji=0,Ji=it;ji<Ji.length;ji+=1){var _i=Ji[ji],qi=hi(_i.transform,_i.invTransform,P.transform);qn.draw(Se,Oe.TRIANGLES,en.disabled,Xe.disabled,P.colorModeForRenderPass(),ye.disabled,qi,j.id,Si,ci,e.SegmentVector.simpleSegment(0,2*_i.circleOffset,_i.circleArray.length,_i.circleArray.length/2),null,P.transform.zoom,null,null,null)}Si.destroy(),ci.destroy()}}var jn=e.identity(new Float32Array(16));function br(P,N,j,Z,ce,ge){var we=e.getAnchorAlignment(P),Se=-(we.horizontalAlign-.5)*N,Oe=-(we.verticalAlign-.5)*j,$e=e.evaluateVariableOffset(P,Z);return new e.Point((Se/ce+$e[0])*ge,(Oe/ce+$e[1])*ge)}function Cr(P,N,j,Z,ce,ge,we,Se,Oe,$e,it){var pt=P.text.placedSymbolArray,Et=P.text.dynamicLayoutVertexArray,Ft=P.icon.dynamicLayoutVertexArray,Dt={};Et.clear();for(var zt=0;zt<pt.length;zt++){var Lt=pt.get(zt),Ut=Lt.hidden||!Lt.crossTileID||P.allowVerticalPlacement&&!Lt.placedOrientation?null:Z[Lt.crossTileID];if(Ut){var Zt=new e.Point(Lt.anchorX,Lt.anchorY),vn=un(Zt,j?Se:we),En=an(ge.cameraToCenterDistance,vn.signedDistanceFromCamera),qn=ce.evaluateSizeForFeature(P.textSizeData,$e,Lt)*En/e.ONE_EM;j&&(qn*=P.tilePixelRatio/Oe);for(var gr=br(Ut.anchor,Ut.width,Ut.height,Ut.textOffset,Ut.textBoxScale,qn),Er=j?un(Zt.add(gr),we).point:vn.point.add(N?gr.rotate(-ge.angle):gr),yr=P.allowVerticalPlacement&&Lt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Jr=0;Jr<Lt.numGlyphs;Jr++)e.addDynamicAttributes(Et,Er,yr);it&&Lt.associatedIconIndex>=0&&(Dt[Lt.associatedIconIndex]={shiftedAnchor:Er,angle:yr})}else Qn(Lt.numGlyphs,Et)}if(it){Ft.clear();for(var vi=P.icon.placedSymbolArray,Fi=0;Fi<vi.length;Fi++){var or=vi.get(Fi);if(or.hidden)Qn(or.numGlyphs,Ft);else{var zr=Dt[Fi];if(zr)for(var yi=0;yi<or.numGlyphs;yi++)e.addDynamicAttributes(Ft,zr.shiftedAnchor,zr.angle);else Qn(or.numGlyphs,Ft)}}P.icon.dynamicLayoutVertexBuffer.updateData(Ft)}P.text.dynamicLayoutVertexBuffer.updateData(Et)}function Hr(P,N,j){return j.iconsInText&&N?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function Kr(P,N,j,Z,ce,ge,we,Se,Oe,$e,it,pt){for(var Et=P.context,Ft=Et.gl,Dt=P.transform,zt="map"===Se,Lt="map"===Oe,Gt=zt&&"point"!==j.layout.get("symbol-placement"),Ut=zt&&!Lt&&!Gt,Zt=void 0!==j.layout.get("symbol-sort-key").constantOr(1),vn=P.depthModeForSublayer(0,en.ReadOnly),En=j.layout.get("text-variable-anchor"),qn=[],Vn=0,pr=Z;Vn<pr.length;Vn+=1){var gr=pr[Vn],Er=N.getTile(gr),yr=Er.getBucket(j);if(yr){var Jr=ce?yr.text:yr.icon;if(Jr&&Jr.segments.get().length){var vi=Jr.programConfigurations.get(j.id),Fi=ce||yr.sdfIcons,or=ce?yr.textSizeData:yr.iconSizeData,zr=Lt||0!==Dt.pitch,yi=P.useProgram(Hr(Fi,ce,yr),vi),ci=e.evaluateSizeForZoom(or,Dt.zoom),Si=void 0,ji=[0,0],Ji=void 0,_i=void 0,qi=null,Vi=void 0;if(ce)Ji=Er.glyphAtlasTexture,_i=Ft.LINEAR,Si=Er.glyphAtlasTexture.size,yr.iconsInText&&(ji=Er.imageAtlasTexture.size,qi=Er.imageAtlasTexture,Vi=zr||P.options.rotating||P.options.zooming||"composite"===or.kind||"camera"===or.kind?Ft.LINEAR:Ft.NEAREST);else{var Gi=1!==j.layout.get("icon-size").constantOr(0)||yr.iconsNeedLinear;Ji=Er.imageAtlasTexture,_i=Fi||P.options.rotating||P.options.zooming||Gi||zr?Ft.LINEAR:Ft.NEAREST,Si=Er.imageAtlasTexture.size}var ta=hr(Er,1,P.transform.zoom),Da=Un(gr.posMatrix,Lt,zt,P.transform,ta),$a=Tn(gr.posMatrix,Lt,zt,P.transform,ta),bo=En&&yr.hasTextData(),vo="none"!==j.layout.get("icon-text-fit")&&bo&&yr.hasIconData();Gt&&pn(yr,gr.posMatrix,P,ce,Da,$a,Lt,$e);var so=P.translatePosMatrix(gr.posMatrix,Er,ge,we),_o=Gt||ce&&En||vo?jn:Da,lo=P.translatePosMatrix($a,Er,ge,we,!0),ks=Fi&&0!==j.paint.get(ce?"text-halo-width":"icon-halo-width").constantOr(1),no={program:yi,buffers:Jr,uniformValues:Fi?yr.iconsInText?rn(or.kind,ci,Ut,Lt,P,so,_o,lo,Si,ji):sn(or.kind,ci,Ut,Lt,P,so,_o,lo,ce,Si,!0):ln(or.kind,ci,Ut,Lt,P,so,_o,lo,ce,Si),atlasTexture:Ji,atlasTextureIcon:qi,atlasInterpolation:_i,atlasInterpolationIcon:Vi,isSDF:Fi,hasHalo:ks};if(Zt)for(var js=0,el=Jr.segments.get();js<el.length;js+=1){var Cl=el[js];qn.push({segments:new e.SegmentVector([Cl]),sortKey:Cl.sortKey,state:no})}else qn.push({segments:Jr.segments,sortKey:0,state:no})}}}Zt&&qn.sort(function(Eu,tl){return Eu.sortKey-tl.sortKey});for(var cu=0,zl=qn;cu<zl.length;cu+=1){var Nl=zl[cu],As=Nl.state;if(Et.activeTexture.set(Ft.TEXTURE0),As.atlasTexture.bind(As.atlasInterpolation,Ft.CLAMP_TO_EDGE),As.atlasTextureIcon&&(Et.activeTexture.set(Ft.TEXTURE1),As.atlasTextureIcon&&As.atlasTextureIcon.bind(As.atlasInterpolationIcon,Ft.CLAMP_TO_EDGE)),As.isSDF){var Gl=As.uniformValues;As.hasHalo&&(Gl.u_is_halo=1,oi(As.buffers,Nl.segments,j,P,As.program,vn,it,pt,Gl)),Gl.u_is_halo=0}oi(As.buffers,Nl.segments,j,P,As.program,vn,it,pt,As.uniformValues)}}function oi(P,N,j,Z,ce,ge,we,Se,Oe){var $e=Z.context;ce.draw($e,$e.gl.TRIANGLES,ge,we,Se,ye.disabled,Oe,j.id,P.layoutVertexBuffer,P.indexBuffer,N,j.paint,Z.transform.zoom,P.programConfigurations.get(j.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function Xr(P,N,j,Z,ce,ge,we){var Se,Oe,$e,it,pt,Et=P.context.gl,Ft=j.paint.get("fill-pattern"),Dt=Ft&&Ft.constantOr(1),zt=j.getCrossfadeParameters();we?(Oe=Dt&&!j.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Se=Et.LINES):(Oe=Dt?"fillPattern":"fill",Se=Et.TRIANGLES);for(var Lt=0,Gt=Z;Lt<Gt.length;Lt+=1){var Ut=Gt[Lt],Zt=N.getTile(Ut);if(!Dt||Zt.patternsLoaded()){var vn=Zt.getBucket(j);if(vn){var En=vn.programConfigurations.get(j.id),qn=P.useProgram(Oe,En);Dt&&(P.context.activeTexture.set(Et.TEXTURE0),Zt.imageAtlasTexture.bind(Et.LINEAR,Et.CLAMP_TO_EDGE),En.updatePaintBuffers(zt));var Vn=Ft.constantOr(null);if(Vn&&Zt.imageAtlas){var pr=Zt.imageAtlas,gr=pr.patternPositions[Vn.to.toString()],Er=pr.patternPositions[Vn.from.toString()];gr&&Er&&En.setConstantPatternPositions(gr,Er)}var yr=P.translatePosMatrix(Ut.posMatrix,Zt,j.paint.get("fill-translate"),j.paint.get("fill-translate-anchor"));if(we){it=vn.indexBuffer2,pt=vn.segments2;var Jr=[Et.drawingBufferWidth,Et.drawingBufferHeight];$e="fillOutlinePattern"===Oe&&Dt?po(yr,P,zt,Zt,Jr):ho(yr,Jr)}else it=vn.indexBuffer,pt=vn.segments,$e=Dt?pa(yr,P,zt,Zt):oo(yr);qn.draw(P.context,Se,ce,P.stencilModeForClipping(Ut),ge,ye.disabled,$e,j.id,vn.layoutVertexBuffer,it,pt,j.paint,P.transform.zoom,En)}}}}function Oi(P,N,j,Z,ce,ge,we){for(var Se=P.context,Oe=Se.gl,$e=j.paint.get("fill-extrusion-pattern"),it=$e.constantOr(1),pt=j.getCrossfadeParameters(),Et=j.paint.get("fill-extrusion-opacity"),Ft=0,Dt=Z;Ft<Dt.length;Ft+=1){var zt=Dt[Ft],Lt=N.getTile(zt),Gt=Lt.getBucket(j);if(Gt){var Ut=Gt.programConfigurations.get(j.id),Zt=P.useProgram(it?"fillExtrusionPattern":"fillExtrusion",Ut);it&&(P.context.activeTexture.set(Oe.TEXTURE0),Lt.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),Ut.updatePaintBuffers(pt));var vn=$e.constantOr(null);if(vn&&Lt.imageAtlas){var En=Lt.imageAtlas,qn=En.patternPositions[vn.to.toString()],Vn=En.patternPositions[vn.from.toString()];qn&&Vn&&Ut.setConstantPatternPositions(qn,Vn)}var pr=P.translatePosMatrix(zt.posMatrix,Lt,j.paint.get("fill-extrusion-translate"),j.paint.get("fill-extrusion-translate-anchor")),gr=j.paint.get("fill-extrusion-vertical-gradient"),Er=it?fs(pr,P,gr,Et,zt,pt,Lt):ml(pr,P,gr,Et);Zt.draw(Se,Se.gl.TRIANGLES,ce,ge,we,ye.backCCW,Er,j.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,j.paint,P.transform.zoom,Ut)}}}function zi(P,N,j,Z,ce,ge){var we=P.context,Se=we.gl,Oe=N.fbo;if(Oe){var $e=P.useProgram("hillshade");we.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,Oe.colorAttachment.get());var it=function(pt,Et,Ft){var Dt=Ft.paint.get("hillshade-shadow-color"),zt=Ft.paint.get("hillshade-highlight-color"),Lt=Ft.paint.get("hillshade-accent-color"),Gt=Ft.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ft.paint.get("hillshade-illumination-anchor")&&(Gt-=pt.transform.angle);var Ut=!pt.options.moving;return{u_matrix:pt.transform.calculatePosMatrix(Et.tileID.toUnwrapped(),Ut),u_image:0,u_latrange:Rs(0,Et.tileID),u_light:[Ft.paint.get("hillshade-exaggeration"),Gt],u_shadow:Dt,u_highlight:zt,u_accent:Lt}}(P,N,j);$e.draw(we,Se.TRIANGLES,Z,ce,ge,ye.disabled,it,j.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}}function Ea(P,N,j,Z,ce,ge,we){var Lt,Gt,Ut,Zt,vn,Se=P.context,Oe=Se.gl,$e=N.dem;if($e&&$e.data){var it=$e.dim,pt=$e.stride,Et=$e.getPixels();if(Se.activeTexture.set(Oe.TEXTURE1),Se.pixelStoreUnpackPremultiplyAlpha.set(!1),N.demTexture=N.demTexture||P.getTileTexture(pt),N.demTexture){var Ft=N.demTexture;Ft.update(Et,{premultiply:!1}),Ft.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE)}else N.demTexture=new e.Texture(Se,Et,Oe.RGBA,{premultiply:!1}),N.demTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE);Se.activeTexture.set(Oe.TEXTURE0);var Dt=N.fbo;if(!Dt){var zt=new e.Texture(Se,{width:it,height:it,data:null},Oe.RGBA);zt.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),(Dt=N.fbo=Se.createFramebuffer(it,it,!0)).colorAttachment.set(zt.texture)}Se.bindFramebuffer.set(Dt.framebuffer),Se.viewport.set([0,0,it,it]),P.useProgram("hillshadePrepare").draw(Se,Oe.TRIANGLES,ce,ge,we,ye.disabled,(Lt=N.tileID,Ut=Z,Zt=(Gt=$e).stride,vn=e.create(),e.ortho(vn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(vn,vn,[0,-e.EXTENT,0]),{u_matrix:vn,u_image:1,u_dimension:[Zt,Zt],u_zoom:Lt.overscaledZ,u_maxzoom:Ut,u_unpack:Gt.getUnpackVector()}),j.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments),N.needsHillshadePrepare=!1}}function Ki(P,N,j,Z,ce){var ge=Z.paint.get("raster-fade-duration");if(ge>0){var we=e.browser.now(),Se=(we-P.timeAdded)/ge,Oe=N?(we-N.timeAdded)/ge:-1,$e=j.getSource(),it=ce.coveringZoomLevel({tileSize:$e.tileSize,roundZoom:$e.roundZoom}),pt=!N||Math.abs(N.tileID.overscaledZ-it)>Math.abs(P.tileID.overscaledZ-it),Et=pt&&P.refreshedUponExpiration?1:e.clamp(pt?Se:1-Oe,0,1);return P.refreshedUponExpiration&&Se>=1&&(P.refreshedUponExpiration=!1),N?{opacity:1,mix:1-Et}:{opacity:Et,mix:0}}return{opacity:1,mix:0}}var ra=new e.Color(1,0,0,1),go=new e.Color(0,1,0,1),io=new e.Color(0,0,1,1),Ha=new e.Color(1,0,1,1),xa=new e.Color(0,1,1,1);function Yo(P,N,j,Z){ns(P,0,N+j/2,P.transform.width,j,Z)}function ts(P,N,j,Z){ns(P,N-j/2,0,j,P.transform.height,Z)}function ns(P,N,j,Z,ce,ge){var we=P.context,Se=we.gl;Se.enable(Se.SCISSOR_TEST),Se.scissor(N*e.browser.devicePixelRatio,j*e.browser.devicePixelRatio,Z*e.browser.devicePixelRatio,ce*e.browser.devicePixelRatio),we.clear({color:ge}),Se.disable(Se.SCISSOR_TEST)}function hs(P,N,j){var Z=P.context,ce=Z.gl,ge=j.posMatrix,we=P.useProgram("debug"),Se=en.disabled,Oe=Xe.disabled,$e=P.colorModeForRenderPass();Z.activeTexture.set(ce.TEXTURE0),P.emptyTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),we.draw(Z,ce.LINE_STRIP,Se,Oe,$e,ye.disabled,na(ge,e.Color.red),"$debug",P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments);var it=N.getTileByID(j.key).latestRawTileData,Et=Math.floor((it&&it.byteLength||0)/1024),Ft=N.getTile(j).tileSize,Dt=512/Math.min(Ft,512)*(j.overscaledZ/P.transform.zoom)*.5,zt=j.canonical.toString();j.overscaledZ!==j.canonical.z&&(zt+=" => "+j.overscaledZ),function(Lt,Gt){Lt.initDebugOverlayCanvas();var Ut=Lt.debugOverlayCanvas,Zt=Lt.context.gl,vn=Lt.debugOverlayCanvas.getContext("2d");vn.clearRect(0,0,Ut.width,Ut.height),vn.shadowColor="white",vn.shadowBlur=2,vn.lineWidth=1.5,vn.strokeStyle="white",vn.textBaseline="top",vn.font="bold 36px Open Sans, sans-serif",vn.fillText(Gt,5,5),vn.strokeText(Gt,5,5),Lt.debugOverlayTexture.update(Ut),Lt.debugOverlayTexture.bind(Zt.LINEAR,Zt.CLAMP_TO_EDGE)}(P,zt+" "+Et+"kb"),we.draw(Z,ce.TRIANGLES,Se,Oe,tt.alphaBlended,ye.disabled,na(ge,e.Color.transparent,Dt),"$debug",P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments)}var ds={symbol:function(P,N,j,Z,ce){if("translucent"===P.renderPass){var ge=Xe.disabled,we=P.colorModeForRenderPass();j.layout.get("text-variable-anchor")&&function(Se,Oe,$e,it,pt,Et,Ft){for(var Dt=Oe.transform,zt="map"===pt,Lt="map"===Et,Gt=0,Ut=Se;Gt<Ut.length;Gt+=1){var Zt=Ut[Gt],vn=it.getTile(Zt),En=vn.getBucket($e);if(En&&En.text&&En.text.segments.get().length){var Vn=e.evaluateSizeForZoom(En.textSizeData,Dt.zoom),pr=hr(vn,1,Oe.transform.zoom),gr=Un(Zt.posMatrix,Lt,zt,Oe.transform,pr),Er="none"!==$e.layout.get("icon-text-fit")&&En.hasIconData();if(Vn){var yr=Math.pow(2,Dt.zoom-vn.tileID.overscaledZ);Cr(En,zt,Lt,Ft,e.symbolSize,Dt,gr,Zt.posMatrix,yr,Vn,Er)}}}}(Z,P,j,N,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),ce),0!==j.paint.get("icon-opacity").constantOr(1)&&Kr(P,N,j,Z,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),ge,we),0!==j.paint.get("text-opacity").constantOr(1)&&Kr(P,N,j,Z,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),ge,we),N.map.showCollisionBoxes&&(Rn(P,N,j,Z,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),Rn(P,N,j,Z,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))}},circle:function(P,N,j,Z){if("translucent"===P.renderPass){var ce=j.paint.get("circle-opacity"),ge=j.paint.get("circle-stroke-width"),we=j.paint.get("circle-stroke-opacity"),Se=void 0!==j.layout.get("circle-sort-key").constantOr(1);if(0!==ce.constantOr(1)||0!==ge.constantOr(1)&&0!==we.constantOr(1)){for(var Oe=P.context,$e=Oe.gl,it=P.depthModeForSublayer(0,en.ReadOnly),pt=Xe.disabled,Et=P.colorModeForRenderPass(),Ft=[],Dt=0;Dt<Z.length;Dt++){var zt=Z[Dt],Lt=N.getTile(zt),Gt=Lt.getBucket(j);if(Gt){var Ut=Gt.programConfigurations.get(j.id),Zt={programConfiguration:Ut,program:P.useProgram("circle",Ut),layoutVertexBuffer:Gt.layoutVertexBuffer,indexBuffer:Gt.indexBuffer,uniformValues:ko(P,zt,Lt,j)};if(Se)for(var vn=0,En=Gt.segments.get();vn<En.length;vn+=1){var qn=En[vn];Ft.push({segments:new e.SegmentVector([qn]),sortKey:qn.sortKey,state:Zt})}else Ft.push({segments:Gt.segments,sortKey:0,state:Zt})}}Se&&Ft.sort(function(yi,ci){return yi.sortKey-ci.sortKey});for(var Vn=0,pr=Ft;Vn<pr.length;Vn+=1){var gr=pr[Vn],Er=gr.state;Er.program.draw(Oe,$e.TRIANGLES,it,pt,Et,ye.disabled,Er.uniformValues,j.id,Er.layoutVertexBuffer,Er.indexBuffer,gr.segments,j.paint,P.transform.zoom,Er.programConfiguration)}}}},heatmap:function(P,N,j,Z){if(0!==j.paint.get("heatmap-opacity"))if("offscreen"===P.renderPass){var ce=P.context,ge=ce.gl,we=Xe.disabled,Se=new tt([ge.ONE,ge.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(zt,Lt,Gt){var Ut=zt.gl;zt.activeTexture.set(Ut.TEXTURE1),zt.viewport.set([0,0,Lt.width/4,Lt.height/4]);var En,qn,Vn,pr,gr,Zt=Gt.heatmapFbo;if(Zt)Ut.bindTexture(Ut.TEXTURE_2D,Zt.colorAttachment.get()),zt.bindFramebuffer.set(Zt.framebuffer);else{var vn=Ut.createTexture();Ut.bindTexture(Ut.TEXTURE_2D,vn),Ut.texParameteri(Ut.TEXTURE_2D,Ut.TEXTURE_WRAP_S,Ut.CLAMP_TO_EDGE),Ut.texParameteri(Ut.TEXTURE_2D,Ut.TEXTURE_WRAP_T,Ut.CLAMP_TO_EDGE),Ut.texParameteri(Ut.TEXTURE_2D,Ut.TEXTURE_MIN_FILTER,Ut.LINEAR),Ut.texParameteri(Ut.TEXTURE_2D,Ut.TEXTURE_MAG_FILTER,Ut.LINEAR),Vn=vn,pr=Zt=Gt.heatmapFbo=zt.createFramebuffer(Lt.width/4,Lt.height/4,!1),(gr=(En=zt).gl).texImage2D(gr.TEXTURE_2D,0,gr.RGBA,(qn=Lt).width/4,qn.height/4,0,gr.RGBA,En.extRenderToTextureHalfFloat?En.extTextureHalfFloat.HALF_FLOAT_OES:gr.UNSIGNED_BYTE,null),pr.colorAttachment.set(Vn)}})(ce,P,j),ce.clear({color:e.Color.transparent});for(var Oe=0;Oe<Z.length;Oe++){var $e=Z[Oe];if(!N.hasRenderableParent($e)){var it=N.getTile($e),pt=it.getBucket(j);if(pt){var Et=pt.programConfigurations.get(j.id);P.useProgram("heatmap",Et).draw(ce,ge.TRIANGLES,en.disabled,we,Se,ye.disabled,Ao($e.posMatrix,it,P.transform.zoom,j.paint.get("heatmap-intensity")),j.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,j.paint,P.transform.zoom,Et)}}}ce.viewport.set([0,0,P.width,P.height])}else"translucent"===P.renderPass&&(P.context.setColorMode(P.colorModeForRenderPass()),function(zt,Lt){var Gt=zt.context,Ut=Gt.gl,Zt=Lt.heatmapFbo;if(Zt){Gt.activeTexture.set(Ut.TEXTURE0),Ut.bindTexture(Ut.TEXTURE_2D,Zt.colorAttachment.get()),Gt.activeTexture.set(Ut.TEXTURE1);var vn=Lt.colorRampTexture;vn||(vn=Lt.colorRampTexture=new e.Texture(Gt,Lt.colorRamp,Ut.RGBA)),vn.bind(Ut.LINEAR,Ut.CLAMP_TO_EDGE),zt.useProgram("heatmapTexture").draw(Gt,Ut.TRIANGLES,en.disabled,Xe.disabled,zt.colorModeForRenderPass(),ye.disabled,function(En,qn,Vn,pr){var gr=e.create();e.ortho(gr,0,En.width,En.height,0,0,1);var Er=En.context.gl;return{u_matrix:gr,u_world:[Er.drawingBufferWidth,Er.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:qn.paint.get("heatmap-opacity")}}(zt,Lt),Lt.id,zt.viewportBuffer,zt.quadTriangleIndexBuffer,zt.viewportSegments,Lt.paint,zt.transform.zoom)}}(P,j))},line:function(P,N,j,Z){if("translucent"===P.renderPass){var ce=j.paint.get("line-opacity"),ge=j.paint.get("line-width");if(0!==ce.constantOr(1)&&0!==ge.constantOr(1)){var we=P.depthModeForSublayer(0,en.ReadOnly),Se=P.colorModeForRenderPass(),Oe=j.paint.get("line-dasharray"),$e=j.paint.get("line-pattern"),it=$e.constantOr(1),pt=j.paint.get("line-gradient"),Et=j.getCrossfadeParameters(),Ft=it?"linePattern":Oe?"lineSDF":pt?"lineGradient":"line",Dt=P.context,zt=Dt.gl,Lt=!0;if(pt){Dt.activeTexture.set(zt.TEXTURE0);var Gt=j.gradientTexture;if(!j.gradient)return;Gt||(Gt=j.gradientTexture=new e.Texture(Dt,j.gradient,zt.RGBA)),Gt.bind(zt.LINEAR,zt.CLAMP_TO_EDGE)}for(var Ut=0,Zt=Z;Ut<Zt.length;Ut+=1){var vn=Zt[Ut],En=N.getTile(vn);if(!it||En.patternsLoaded()){var qn=En.getBucket(j);if(qn){var Vn=qn.programConfigurations.get(j.id),pr=P.context.program.get(),gr=P.useProgram(Ft,Vn),Er=Lt||gr.program!==pr,yr=$e.constantOr(null);if(yr&&En.imageAtlas){var Jr=En.imageAtlas,vi=Jr.patternPositions[yr.to.toString()],Fi=Jr.patternPositions[yr.from.toString()];vi&&Fi&&Vn.setConstantPatternPositions(vi,Fi)}var or=it?Ge(P,En,j,Et):Oe?Qe(P,En,j,Oe,Et):pt?ga(P,En,j):Qa(P,En,j);it?(Dt.activeTexture.set(zt.TEXTURE0),En.imageAtlasTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE),Vn.updatePaintBuffers(Et)):Oe&&(Er||P.lineAtlas.dirty)&&(Dt.activeTexture.set(zt.TEXTURE0),P.lineAtlas.bind(Dt)),gr.draw(Dt,zt.TRIANGLES,we,P.stencilModeForClipping(vn),Se,ye.disabled,or,j.id,qn.layoutVertexBuffer,qn.indexBuffer,qn.segments,j.paint,P.transform.zoom,Vn),Lt=!1}}}}}},fill:function(P,N,j,Z){var ce=j.paint.get("fill-color"),ge=j.paint.get("fill-opacity");if(0!==ge.constantOr(1)){var we=P.colorModeForRenderPass(),Se=j.paint.get("fill-pattern"),Oe=P.opaquePassEnabledForLayer()&&!Se.constantOr(1)&&1===ce.constantOr(e.Color.transparent).a&&1===ge.constantOr(0)?"opaque":"translucent";if(P.renderPass===Oe){var $e=P.depthModeForSublayer(1,"opaque"===P.renderPass?en.ReadWrite:en.ReadOnly);Xr(P,N,j,Z,$e,we,!1)}if("translucent"===P.renderPass&&j.paint.get("fill-antialias")){var it=P.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,en.ReadOnly);Xr(P,N,j,Z,it,we,!0)}}},"fill-extrusion":function(P,N,j,Z){var ce=j.paint.get("fill-extrusion-opacity");if(0!==ce&&"translucent"===P.renderPass){var ge=new en(P.context.gl.LEQUAL,en.ReadWrite,P.depthRangeFor3D);if(1!==ce||j.paint.get("fill-extrusion-pattern").constantOr(1))Oi(P,N,j,Z,ge,Xe.disabled,tt.disabled),Oi(P,N,j,Z,ge,P.stencilModeFor3D(),P.colorModeForRenderPass());else{var we=P.colorModeForRenderPass();Oi(P,N,j,Z,ge,Xe.disabled,we)}}},hillshade:function(P,N,j,Z){if("offscreen"===P.renderPass||"translucent"===P.renderPass){for(var ce=P.context,ge=N.getSource().maxzoom,we=P.depthModeForSublayer(0,en.ReadOnly),Se=P.colorModeForRenderPass(),Oe="translucent"===P.renderPass?P.stencilConfigForOverlap(Z):[{},Z],$e=Oe[0],it=0,pt=Oe[1];it<pt.length;it+=1){var Et=pt[it],Ft=N.getTile(Et);Ft.needsHillshadePrepare&&"offscreen"===P.renderPass?Ea(P,Ft,j,ge,we,Xe.disabled,Se):"translucent"===P.renderPass&&zi(P,Ft,j,we,$e[Et.overscaledZ],Se)}ce.viewport.set([0,0,P.width,P.height])}},raster:function(P,N,j,Z){if("translucent"===P.renderPass&&0!==j.paint.get("raster-opacity")&&Z.length)for(var ce=P.context,ge=ce.gl,we=N.getSource(),Se=P.useProgram("raster"),Oe=P.colorModeForRenderPass(),$e=we instanceof X?[{},Z]:P.stencilConfigForOverlap(Z),it=$e[0],pt=$e[1],Et=pt[pt.length-1].overscaledZ,Ft=!P.options.moving,Dt=0,zt=pt;Dt<zt.length;Dt+=1){var Lt=zt[Dt],Gt=P.depthModeForSublayer(Lt.overscaledZ-Et,1===j.paint.get("raster-opacity")?en.ReadWrite:en.ReadOnly,ge.LESS),Ut=N.getTile(Lt),Zt=P.transform.calculatePosMatrix(Lt.toUnwrapped(),Ft);Ut.registerFadeDuration(j.paint.get("raster-fade-duration"));var vn=N.findLoadedParent(Lt,0),En=Ki(Ut,vn,N,j,P.transform),qn=void 0,Vn=void 0,pr="nearest"===j.paint.get("raster-resampling")?ge.NEAREST:ge.LINEAR;ce.activeTexture.set(ge.TEXTURE0),Ut.texture.bind(pr,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),ce.activeTexture.set(ge.TEXTURE1),vn?(vn.texture.bind(pr,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),qn=Math.pow(2,vn.tileID.overscaledZ-Ut.tileID.overscaledZ),Vn=[Ut.tileID.canonical.x*qn%1,Ut.tileID.canonical.y*qn%1]):Ut.texture.bind(pr,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST);var gr=kt(Zt,Vn||[0,0],qn||1,En,j);we instanceof X?Se.draw(ce,ge.TRIANGLES,Gt,Xe.disabled,Oe,ye.disabled,gr,j.id,we.boundsBuffer,P.quadTriangleIndexBuffer,we.boundsSegments):Se.draw(ce,ge.TRIANGLES,Gt,it[Lt.overscaledZ],Oe,ye.disabled,gr,j.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}},background:function(P,N,j){var Z=j.paint.get("background-color"),ce=j.paint.get("background-opacity");if(0!==ce){var ge=P.context,we=ge.gl,Se=P.transform,Oe=Se.tileSize,$e=j.paint.get("background-pattern");if(!P.isPatternMissing($e)){var it=!$e&&1===Z.a&&1===ce&&P.opaquePassEnabledForLayer()?"opaque":"translucent";if(P.renderPass===it){var pt=Xe.disabled,Et=P.depthModeForSublayer(0,"opaque"===it?en.ReadWrite:en.ReadOnly),Ft=P.colorModeForRenderPass(),Dt=P.useProgram($e?"backgroundPattern":"background"),zt=Se.coveringTiles({tileSize:Oe});$e&&(ge.activeTexture.set(we.TEXTURE0),P.imageManager.bind(P.context));for(var Lt=j.getCrossfadeParameters(),Gt=0,Ut=zt;Gt<Ut.length;Gt+=1){var Zt=Ut[Gt],vn=P.transform.calculatePosMatrix(Zt.toUnwrapped()),En=$e?kn(vn,ce,P,$e,{tileID:Zt,tileSize:Oe},Lt):mn(vn,ce,Z);Dt.draw(ge,we.TRIANGLES,Et,pt,Ft,ye.disabled,En,j.id,P.tileExtentBuffer,P.quadTriangleIndexBuffer,P.tileExtentSegments)}}}}},debug:function(P,N,j){for(var Z=0;Z<j.length;Z++)hs(P,N,j[Z])},custom:function(P,N,j){var Z=P.context,ce=j.implementation;if("offscreen"===P.renderPass){var ge=ce.prerender;ge&&(P.setCustomLayerDefaults(),Z.setColorMode(P.colorModeForRenderPass()),ge.call(ce,Z.gl,P.transform.customLayerMatrix()),Z.setDirty(),P.setBaseState())}else if("translucent"===P.renderPass){P.setCustomLayerDefaults(),Z.setColorMode(P.colorModeForRenderPass()),Z.setStencilMode(Xe.disabled);var we="3d"===ce.renderingMode?new en(P.context.gl.LEQUAL,en.ReadWrite,P.depthRangeFor3D):P.depthModeForSublayer(0,en.ReadOnly);Z.setDepthMode(we),ce.render(Z.gl,P.transform.customLayerMatrix()),Z.setDirty(),P.setBaseState(),Z.bindFramebuffer.set(null)}}},ba=function(P,N){this.context=new ke(P),this.transform=N,this._tileTextures={},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ar,this.gpuTimers={}};ba.prototype.resize=function(P,N){if(this.width=P*e.browser.devicePixelRatio,this.height=N*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var j=0,Z=this.style._order;j<Z.length;j+=1)this.style._layers[Z[j]].resize()},ba.prototype.setup=function(){var P=this.context,N=new e.StructArrayLayout2i4;N.emplaceBack(0,0),N.emplaceBack(e.EXTENT,0),N.emplaceBack(0,e.EXTENT),N.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=P.createVertexBuffer(N,Ur.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var j=new e.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(e.EXTENT,0),j.emplaceBack(0,e.EXTENT),j.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=P.createVertexBuffer(j,Ur.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var Z=new e.StructArrayLayout4i8;Z.emplaceBack(0,0,0,0),Z.emplaceBack(e.EXTENT,0,e.EXTENT,0),Z.emplaceBack(0,e.EXTENT,0,e.EXTENT),Z.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=P.createVertexBuffer(Z,te.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ce=new e.StructArrayLayout2i4;ce.emplaceBack(0,0),ce.emplaceBack(1,0),ce.emplaceBack(0,1),ce.emplaceBack(1,1),this.viewportBuffer=P.createVertexBuffer(ce,Ur.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ge=new e.StructArrayLayout1ui2;ge.emplaceBack(0),ge.emplaceBack(1),ge.emplaceBack(3),ge.emplaceBack(2),ge.emplaceBack(0),this.tileBorderIndexBuffer=P.createIndexBuffer(ge);var we=new e.StructArrayLayout3ui6;we.emplaceBack(0,1,2),we.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=P.createIndexBuffer(we),this.emptyTexture=new e.Texture(P,{width:1,height:1,data:new Uint8Array([0,0,0,0])},P.gl.RGBA);var Se=this.context.gl;this.stencilClearMode=new Xe({func:Se.ALWAYS,mask:0},0,255,Se.ZERO,Se.ZERO,Se.ZERO)},ba.prototype.clearStencil=function(){var P=this.context,N=P.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var j=e.create();e.ortho(j,0,this.width,this.height,0,0,1),e.scale(j,j,[N.drawingBufferWidth,N.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(P,N.TRIANGLES,en.disabled,this.stencilClearMode,tt.disabled,ye.disabled,Ma(j),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ba.prototype._renderTileClippingMasks=function(P,N){if(this.currentStencilSource!==P.source&&P.isTileClipped()&&N&&N.length){this.currentStencilSource=P.source;var j=this.context,Z=j.gl;this.nextStencilID+N.length>256&&this.clearStencil(),j.setColorMode(tt.disabled),j.setDepthMode(en.disabled);var ce=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ge=0,we=N;ge<we.length;ge+=1){var Se=we[ge],Oe=this._tileClippingMaskIDs[Se.key]=this.nextStencilID++;ce.draw(j,Z.TRIANGLES,en.disabled,new Xe({func:Z.ALWAYS,mask:0},Oe,255,Z.KEEP,Z.KEEP,Z.REPLACE),tt.disabled,ye.disabled,Ma(Se.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ba.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var P=this.nextStencilID++,N=this.context.gl;return new Xe({func:N.NOTEQUAL,mask:255},P,255,N.KEEP,N.KEEP,N.REPLACE)},ba.prototype.stencilModeForClipping=function(P){var N=this.context.gl;return new Xe({func:N.EQUAL,mask:255},this._tileClippingMaskIDs[P.key],0,N.KEEP,N.KEEP,N.REPLACE)},ba.prototype.stencilConfigForOverlap=function(P){var N,j=this.context.gl,Z=P.sort(function(Oe,$e){return $e.overscaledZ-Oe.overscaledZ}),ce=Z[Z.length-1].overscaledZ,ge=Z[0].overscaledZ-ce+1;if(ge>1){this.currentStencilSource=void 0,this.nextStencilID+ge>256&&this.clearStencil();for(var we={},Se=0;Se<ge;Se++)we[Se+ce]=new Xe({func:j.GEQUAL,mask:255},Se+this.nextStencilID,255,j.KEEP,j.KEEP,j.REPLACE);return this.nextStencilID+=ge,[we,Z]}return[(N={},N[ce]=Xe.disabled,N),Z]},ba.prototype.colorModeForRenderPass=function(){var P=this.context.gl;return this._showOverdrawInspector?new tt([P.CONSTANT_COLOR,P.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?tt.unblended:tt.alphaBlended},ba.prototype.depthModeForSublayer=function(P,N,j){if(!this.opaquePassEnabledForLayer())return en.disabled;var Z=1-((1+this.currentLayer)*this.numSublayers+P)*this.depthEpsilon;return new en(j||this.context.gl.LEQUAL,N,[Z,Z])},ba.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ba.prototype.render=function(P,N){var j=this;this.style=P,this.options=N,this.lineAtlas=P.lineAtlas,this.imageManager=P.imageManager,this.glyphManager=P.glyphManager,this.symbolFadeChange=P.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var Z=this.style._order,ce=this.style.sourceCaches;for(var ge in ce){var we=ce[ge];we.used&&we.prepare(this.context)}var Se,Oe,$e={},it={},pt={};for(var Et in ce){var Ft=ce[Et];$e[Et]=Ft.getVisibleCoordinates(),it[Et]=$e[Et].slice().reverse(),pt[Et]=Ft.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Dt=0;Dt<Z.length;Dt++)if(this.style._layers[Z[Dt]].is3D()){this.opaquePassCutoff=Dt;break}this.renderPass="offscreen";for(var Lt=0,Gt=Z;Lt<Gt.length;Lt+=1){var Zt=this.style._layers[Gt[Lt]];if(Zt.hasOffscreenPass()&&!Zt.isHidden(this.transform.zoom)){var vn=it[Zt.source];("custom"===Zt.type||vn.length)&&this.renderLayer(this,ce[Zt.source],Zt,vn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:N.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=N.showOverdrawInspector,this.depthRangeFor3D=[0,1-(P._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=Z.length-1;this.currentLayer>=0;this.currentLayer--){var En=this.style._layers[Z[this.currentLayer]],qn=ce[En.source],Vn=$e[En.source];this._renderTileClippingMasks(En,Vn),this.renderLayer(this,qn,En,Vn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<Z.length;this.currentLayer++){var pr=this.style._layers[Z[this.currentLayer]],gr=ce[pr.source],Er=("symbol"===pr.type?pt:it)[pr.source];this._renderTileClippingMasks(pr,$e[pr.source]),this.renderLayer(this,gr,pr,Er)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(yr){yr.source&&!yr.isHidden(j.transform.zoom)&&(yr.source!==(Oe&&Oe.id)&&(Oe=j.style.sourceCaches[yr.source]),(!Se||Se.getSource().maxzoom<Oe.getSource().maxzoom)&&(Se=Oe))}),Se&&ds.debug(this,Se,Se.getVisibleCoordinates())),this.options.showPadding&&function xo(P){var N=P.transform.padding;Yo(P,P.transform.height-(N.top||0),3,ra),Yo(P,N.bottom||0,3,go),ts(P,N.left||0,3,io),ts(P,P.transform.width-(N.right||0),3,Ha);var Z,ce,ge,we,j=P.transform.centerPoint;ns(Z=P,(ce=j.x)-1,(ge=P.transform.height-j.y)-10,2,20,we=xa),ns(Z,ce-10,ge-1,20,2,we)}(this),this.context.setDefault()},ba.prototype.renderLayer=function(P,N,j,Z){j.isHidden(this.transform.zoom)||("background"===j.type||"custom"===j.type||Z.length)&&(this.id=j.id,this.gpuTimingStart(j),ds[j.type](P,N,j,Z,this.style.placement.variableOffsets),this.gpuTimingEnd())},ba.prototype.gpuTimingStart=function(P){if(this.options.gpuTiming){var N=this.context.extTimerQuery,j=this.gpuTimers[P.id];j||(j=this.gpuTimers[P.id]={calls:0,cpuTime:0,query:N.createQueryEXT()}),j.calls++,N.beginQueryEXT(N.TIME_ELAPSED_EXT,j.query)}},ba.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var P=this.context.extTimerQuery;P.endQueryEXT(P.TIME_ELAPSED_EXT)}},ba.prototype.collectGpuTimers=function(){var P=this.gpuTimers;return this.gpuTimers={},P},ba.prototype.queryGpuTimers=function(P){var N={};for(var j in P){var Z=P[j],ce=this.context.extTimerQuery,ge=ce.getQueryObjectEXT(Z.query,ce.QUERY_RESULT_EXT)/1e6;ce.deleteQueryEXT(Z.query),N[j]=ge}return N},ba.prototype.translatePosMatrix=function(P,N,j,Z,ce){if(!j[0]&&!j[1])return P;var ge=ce?"map"===Z?this.transform.angle:0:"viewport"===Z?-this.transform.angle:0;if(ge){var we=Math.sin(ge),Se=Math.cos(ge);j=[j[0]*Se-j[1]*we,j[0]*we+j[1]*Se]}var Oe=[ce?j[0]:hr(N,j[0],this.transform.zoom),ce?j[1]:hr(N,j[1],this.transform.zoom),0],$e=new Float32Array(16);return e.translate($e,P,Oe),$e},ba.prototype.saveTileTexture=function(P){var N=this._tileTextures[P.size[0]];N?N.push(P):this._tileTextures[P.size[0]]=[P]},ba.prototype.getTileTexture=function(P){var N=this._tileTextures[P];return N&&N.length>0?N.pop():null},ba.prototype.isPatternMissing=function(P){if(!P)return!1;if(!P.from||!P.to)return!0;var N=this.imageManager.getPattern(P.from.toString()),j=this.imageManager.getPattern(P.to.toString());return!N||!j},ba.prototype.useProgram=function(P,N){this.cache=this.cache||{};var j=""+P+(N?N.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[j]||(this.cache[j]=new Os(this.context,hl[P],N,In[P],this._showOverdrawInspector)),this.cache[j]},ba.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ba.prototype.setBaseState=function(){var P=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(P.FUNC_ADD)},ba.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ba.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _t=function(P,N){this.points=P,this.planes=N};_t.fromInvProjectionMatrix=function(P,N,j){var Z=Math.pow(2,j),ce=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(we){return e.transformMat4([],we,P)}).map(function(we){return e.scale$1([],we,1/we[3]/N*Z)}),ge=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(we){var Se=e.sub([],ce[we[0]],ce[we[1]]),Oe=e.sub([],ce[we[2]],ce[we[1]]),$e=e.normalize([],e.cross([],Se,Oe)),it=-e.dot($e,ce[we[1]]);return $e.concat(it)});return new _t(ce,ge)};var Ht=function(P,N){this.min=P,this.max=N,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Ht.prototype.quadrant=function(P){for(var N=[P%2==0,P<2],j=e.clone$2(this.min),Z=e.clone$2(this.max),ce=0;ce<N.length;ce++)j[ce]=N[ce]?this.min[ce]:this.center[ce],Z[ce]=N[ce]?this.center[ce]:this.max[ce];return Z[2]=this.max[2],new Ht(j,Z)},Ht.prototype.distanceX=function(P){return Math.max(Math.min(this.max[0],P[0]),this.min[0])-P[0]},Ht.prototype.distanceY=function(P){return Math.max(Math.min(this.max[1],P[1]),this.min[1])-P[1]},Ht.prototype.intersects=function(P){for(var N=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],j=!0,Z=0;Z<P.planes.length;Z++){for(var ce=P.planes[Z],ge=0,we=0;we<N.length;we++)ge+=e.dot$1(ce,N[we])>=0;if(0===ge)return 0;ge!==N.length&&(j=!1)}if(j)return 2;for(var Se=0;Se<3;Se++){for(var Oe=Number.MAX_VALUE,$e=-Number.MAX_VALUE,it=0;it<P.points.length;it++){var pt=P.points[it][Se]-this.min[Se];Oe=Math.min(Oe,pt),$e=Math.max($e,pt)}if($e<0||Oe>this.max[Se]-this.min[Se])return 0}return 1};var _n=function(P,N,j,Z){if(void 0===P&&(P=0),void 0===N&&(N=0),void 0===j&&(j=0),void 0===Z&&(Z=0),isNaN(P)||P<0||isNaN(N)||N<0||isNaN(j)||j<0||isNaN(Z)||Z<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=P,this.bottom=N,this.left=j,this.right=Z};_n.prototype.interpolate=function(P,N,j){return null!=N.top&&null!=P.top&&(this.top=e.number(P.top,N.top,j)),null!=N.bottom&&null!=P.bottom&&(this.bottom=e.number(P.bottom,N.bottom,j)),null!=N.left&&null!=P.left&&(this.left=e.number(P.left,N.left,j)),null!=N.right&&null!=P.right&&(this.right=e.number(P.right,N.right,j)),this},_n.prototype.getCenter=function(P,N){var j=e.clamp((this.left+P-this.right)/2,0,P),Z=e.clamp((this.top+N-this.bottom)/2,0,N);return new e.Point(j,Z)},_n.prototype.equals=function(P){return this.top===P.top&&this.bottom===P.bottom&&this.left===P.left&&this.right===P.right},_n.prototype.clone=function(){return new _n(this.top,this.bottom,this.left,this.right)},_n.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jt=function(P,N,j,Z,ce){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ce||ce,this._minZoom=P||0,this._maxZoom=N||22,this._minPitch=j??0,this._maxPitch=Z??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _n,this._posMatrixCache={},this._alignedPosMatrixCache={}},wn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jt.prototype.clone=function(){var P=new Jt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return P.tileSize=this.tileSize,P.latRange=this.latRange,P.width=this.width,P.height=this.height,P._center=this._center,P.zoom=this.zoom,P.angle=this.angle,P._fov=this._fov,P._pitch=this._pitch,P._unmodified=this._unmodified,P._edgeInsets=this._edgeInsets.clone(),P._calcMatrices(),P},wn.minZoom.get=function(){return this._minZoom},wn.minZoom.set=function(P){this._minZoom!==P&&(this._minZoom=P,this.zoom=Math.max(this.zoom,P))},wn.maxZoom.get=function(){return this._maxZoom},wn.maxZoom.set=function(P){this._maxZoom!==P&&(this._maxZoom=P,this.zoom=Math.min(this.zoom,P))},wn.minPitch.get=function(){return this._minPitch},wn.minPitch.set=function(P){this._minPitch!==P&&(this._minPitch=P,this.pitch=Math.max(this.pitch,P))},wn.maxPitch.get=function(){return this._maxPitch},wn.maxPitch.set=function(P){this._maxPitch!==P&&(this._maxPitch=P,this.pitch=Math.min(this.pitch,P))},wn.renderWorldCopies.get=function(){return this._renderWorldCopies},wn.renderWorldCopies.set=function(P){void 0===P?P=!0:null===P&&(P=!1),this._renderWorldCopies=P},wn.worldSize.get=function(){return this.tileSize*this.scale},wn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},wn.size.get=function(){return new e.Point(this.width,this.height)},wn.bearing.get=function(){return-this.angle/Math.PI*180},wn.bearing.set=function(P){var N=-e.wrap(P,-180,180)*Math.PI/180;this.angle!==N&&(this._unmodified=!1,this.angle=N,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},wn.pitch.get=function(){return this._pitch/Math.PI*180},wn.pitch.set=function(P){var N=e.clamp(P,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==N&&(this._unmodified=!1,this._pitch=N,this._calcMatrices())},wn.fov.get=function(){return this._fov/Math.PI*180},wn.fov.set=function(P){P=Math.max(.01,Math.min(60,P)),this._fov!==P&&(this._unmodified=!1,this._fov=P/180*Math.PI,this._calcMatrices())},wn.zoom.get=function(){return this._zoom},wn.zoom.set=function(P){var N=Math.min(Math.max(P,this.minZoom),this.maxZoom);this._zoom!==N&&(this._unmodified=!1,this._zoom=N,this.scale=this.zoomScale(N),this.tileZoom=Math.floor(N),this.zoomFraction=N-this.tileZoom,this._constrain(),this._calcMatrices())},wn.center.get=function(){return this._center},wn.center.set=function(P){P.lat===this._center.lat&&P.lng===this._center.lng||(this._unmodified=!1,this._center=P,this._constrain(),this._calcMatrices())},wn.padding.get=function(){return this._edgeInsets.toJSON()},wn.padding.set=function(P){this._edgeInsets.equals(P)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,P,1),this._calcMatrices())},wn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Jt.prototype.isPaddingEqual=function(P){return this._edgeInsets.equals(P)},Jt.prototype.interpolatePadding=function(P,N,j){this._unmodified=!1,this._edgeInsets.interpolate(P,N,j),this._constrain(),this._calcMatrices()},Jt.prototype.coveringZoomLevel=function(P){var N=(P.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/P.tileSize));return Math.max(0,N)},Jt.prototype.getVisibleUnwrappedCoordinates=function(P){var N=[new e.UnwrappedTileID(0,P)];if(this._renderWorldCopies)for(var j=this.pointCoordinate(new e.Point(0,0)),Z=this.pointCoordinate(new e.Point(this.width,0)),ce=this.pointCoordinate(new e.Point(this.width,this.height)),ge=this.pointCoordinate(new e.Point(0,this.height)),we=Math.floor(Math.min(j.x,Z.x,ce.x,ge.x)),Se=Math.floor(Math.max(j.x,Z.x,ce.x,ge.x)),Oe=we-1;Oe<=Se+1;Oe++)0!==Oe&&N.push(new e.UnwrappedTileID(Oe,P));return N},Jt.prototype.coveringTiles=function(P){var N=this.coveringZoomLevel(P),j=N;if(void 0!==P.minzoom&&N<P.minzoom)return[];void 0!==P.maxzoom&&N>P.maxzoom&&(N=P.maxzoom);var Z=e.MercatorCoordinate.fromLngLat(this.center),ce=Math.pow(2,N),ge=[ce*Z.x,ce*Z.y,0],we=_t.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,N),Se=P.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Se=N);var Oe=function(Er){return{aabb:new Ht([Er*ce,0,0],[(Er+1)*ce,ce,0]),zoom:0,x:0,y:0,wrap:Er,fullyVisible:!1}},$e=[],it=[],pt=N,Et=P.reparseOverscaled?j:N;if(this._renderWorldCopies)for(var Ft=1;Ft<=3;Ft++)$e.push(Oe(-Ft)),$e.push(Oe(Ft));for($e.push(Oe(0));$e.length>0;){var Dt=$e.pop(),zt=Dt.x,Lt=Dt.y,Gt=Dt.fullyVisible;if(!Gt){var Ut=Dt.aabb.intersects(we);if(0===Ut)continue;Gt=2===Ut}var Zt=Dt.aabb.distanceX(ge),vn=Dt.aabb.distanceY(ge),En=Math.max(Math.abs(Zt),Math.abs(vn));if(Dt.zoom===pt||En>3+(1<<pt-Dt.zoom)-2&&Dt.zoom>=Se)it.push({tileID:new e.OverscaledTileID(Dt.zoom===pt?Et:Dt.zoom,Dt.wrap,Dt.zoom,zt,Lt),distanceSq:e.sqrLen([ge[0]-.5-zt,ge[1]-.5-Lt])});else for(var Vn=0;Vn<4;Vn++){var pr=(zt<<1)+Vn%2,gr=(Lt<<1)+(Vn>>1);$e.push({aabb:Dt.aabb.quadrant(Vn),zoom:Dt.zoom+1,x:pr,y:gr,wrap:Dt.wrap,fullyVisible:Gt})}}return it.sort(function(Er,yr){return Er.distanceSq-yr.distanceSq}).map(function(Er){return Er.tileID})},Jt.prototype.resize=function(P,N){this.width=P,this.height=N,this.pixelsToGLUnits=[2/P,-2/N],this._constrain(),this._calcMatrices()},wn.unmodified.get=function(){return this._unmodified},Jt.prototype.zoomScale=function(P){return Math.pow(2,P)},Jt.prototype.scaleZoom=function(P){return Math.log(P)/Math.LN2},Jt.prototype.project=function(P){var N=e.clamp(P.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(P.lng)*this.worldSize,e.mercatorYfromLat(N)*this.worldSize)},Jt.prototype.unproject=function(P){return new e.MercatorCoordinate(P.x/this.worldSize,P.y/this.worldSize).toLngLat()},wn.point.get=function(){return this.project(this.center)},Jt.prototype.setLocationAtPoint=function(P,N){var j=this.pointCoordinate(N),Z=this.pointCoordinate(this.centerPoint),ce=this.locationCoordinate(P),ge=new e.MercatorCoordinate(ce.x-(j.x-Z.x),ce.y-(j.y-Z.y));this.center=this.coordinateLocation(ge),this._renderWorldCopies&&(this.center=this.center.wrap())},Jt.prototype.locationPoint=function(P){return this.coordinatePoint(this.locationCoordinate(P))},Jt.prototype.pointLocation=function(P){return this.coordinateLocation(this.pointCoordinate(P))},Jt.prototype.locationCoordinate=function(P){return e.MercatorCoordinate.fromLngLat(P)},Jt.prototype.coordinateLocation=function(P){return P.toLngLat()},Jt.prototype.pointCoordinate=function(P){var N=[P.x,P.y,0,1],j=[P.x,P.y,1,1];e.transformMat4(N,N,this.pixelMatrixInverse),e.transformMat4(j,j,this.pixelMatrixInverse);var Z=N[3],ce=j[3],Se=N[1]/Z,Oe=j[1]/ce,$e=N[2]/Z,it=j[2]/ce,pt=$e===it?0:(0-$e)/(it-$e);return new e.MercatorCoordinate(e.number(N[0]/Z,j[0]/ce,pt)/this.worldSize,e.number(Se,Oe,pt)/this.worldSize)},Jt.prototype.coordinatePoint=function(P){var N=[P.x*this.worldSize,P.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix),new e.Point(N[0]/N[3],N[1]/N[3])},Jt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Jt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jt.prototype.setMaxBounds=function(P){P?(this.lngRange=[P.getWest(),P.getEast()],this.latRange=[P.getSouth(),P.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jt.prototype.calculatePosMatrix=function(P,N){void 0===N&&(N=!1);var j=P.key,Z=N?this._alignedPosMatrixCache:this._posMatrixCache;if(Z[j])return Z[j];var ce=P.canonical,ge=this.worldSize/this.zoomScale(ce.z),we=ce.x+Math.pow(2,ce.z)*P.wrap,Se=e.identity(new Float64Array(16));return e.translate(Se,Se,[we*ge,ce.y*ge,0]),e.scale(Se,Se,[ge/e.EXTENT,ge/e.EXTENT,1]),e.multiply(Se,N?this.alignedProjMatrix:this.projMatrix,Se),Z[j]=new Float32Array(Se),Z[j]},Jt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var P,N,j,Z,ce=-90,ge=90,we=-180,Se=180,Oe=this.size,$e=this._unmodified;if(this.latRange){var it=this.latRange;ce=e.mercatorYfromLat(it[1])*this.worldSize,P=(ge=e.mercatorYfromLat(it[0])*this.worldSize)-ce<Oe.y?Oe.y/(ge-ce):0}if(this.lngRange){var pt=this.lngRange;we=e.mercatorXfromLng(pt[0])*this.worldSize,N=(Se=e.mercatorXfromLng(pt[1])*this.worldSize)-we<Oe.x?Oe.x/(Se-we):0}var Et=this.point,Ft=Math.max(N||0,P||0);if(Ft)return this.center=this.unproject(new e.Point(N?(Se+we)/2:Et.x,P?(ge+ce)/2:Et.y)),this.zoom+=this.scaleZoom(Ft),this._unmodified=$e,void(this._constraining=!1);if(this.latRange){var Dt=Et.y,zt=Oe.y/2;Dt-zt<ce&&(Z=ce+zt),Dt+zt>ge&&(Z=ge-zt)}if(this.lngRange){var Lt=Et.x,Gt=Oe.x/2;Lt-Gt<we&&(j=we+Gt),Lt+Gt>Se&&(j=Se-Gt)}void 0===j&&void 0===Z||(this.center=this.unproject(new e.Point(void 0!==j?j:Et.x,void 0!==Z?Z:Et.y))),this._unmodified=$e,this._constraining=!1}},Jt.prototype._calcMatrices=function(){if(this.height){var N=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var j=Math.PI/2+this._pitch,Z=this._fov*(.5+N.y/this.height),ce=Math.sin(Z)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-j-Z,.01,Math.PI-.01)),ge=this.point,we=ge.x,Se=ge.y,Oe=1.01*(Math.cos(Math.PI/2-this._pitch)*ce+this.cameraToCenterDistance),$e=this.height/50,it=new Float64Array(16);e.perspective(it,this._fov,this.width/this.height,$e,Oe),it[8]=2*-N.x/this.width,it[9]=2*N.y/this.height,e.scale(it,it,[1,-1,1]),e.translate(it,it,[0,0,-this.cameraToCenterDistance]),e.rotateX(it,it,this._pitch),e.rotateZ(it,it,this.angle),e.translate(it,it,[-we,-Se,0]),this.mercatorMatrix=e.scale([],it,[this.worldSize,this.worldSize,this.worldSize]),e.scale(it,it,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=it,this.invProjMatrix=e.invert([],this.projMatrix);var pt=this.width%2/2,Et=this.height%2/2,Ft=Math.cos(this.angle),Dt=Math.sin(this.angle),zt=we-Math.round(we)+Ft*pt+Dt*Et,Lt=Se-Math.round(Se)+Ft*Et+Dt*pt,Gt=new Float64Array(it);if(e.translate(Gt,Gt,[zt>.5?zt-1:zt,Lt>.5?Lt-1:Lt,0]),this.alignedProjMatrix=Gt,it=e.create(),e.scale(it,it,[this.width/2,-this.height/2,1]),e.translate(it,it,[1,-1,0]),this.labelPlaneMatrix=it,it=e.create(),e.scale(it,it,[1,-1,1]),e.translate(it,it,[-1,-1,0]),e.scale(it,it,[2/this.width,2/this.height,1]),this.glCoordMatrix=it,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(it=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=it,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var P=this.pointCoordinate(new e.Point(0,0)),N=[P.x*this.worldSize,P.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jt.prototype.getCameraPoint=function(){var N=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,N))},Jt.prototype.getCameraQueryGeometry=function(P){var N=this.getCameraPoint();if(1===P.length)return[P[0],N];for(var j=N.x,Z=N.y,ce=N.x,ge=N.y,we=0,Se=P;we<Se.length;we+=1){var Oe=Se[we];j=Math.min(j,Oe.x),Z=Math.min(Z,Oe.y),ce=Math.max(ce,Oe.x),ge=Math.max(ge,Oe.y)}return[new e.Point(j,Z),new e.Point(ce,Z),new e.Point(ce,ge),new e.Point(j,ge),new e.Point(j,Z)]},Object.defineProperties(Jt.prototype,wn);var Xn=function(P){var N,Z,ce,ge;this._hashName=P&&encodeURIComponent(P),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(N=this._updateHashUnthrottled.bind(this),300,Z=!1,ce=null,ge=function(){ce=null,Z&&(N(),ce=setTimeout(ge,300),Z=!1)},function(){return Z=!0,ce||ge(),ce})};Xn.prototype.addTo=function(P){return this._map=P,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Xn.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Xn.prototype.getHashString=function(P){var N=this._map.getCenter(),j=Math.round(100*this._map.getZoom())/100,Z=Math.ceil((j*Math.LN2+Math.log(512/360/.5))/Math.LN10),ce=Math.pow(10,Z),ge=Math.round(N.lng*ce)/ce,we=Math.round(N.lat*ce)/ce,Se=this._map.getBearing(),Oe=this._map.getPitch(),$e="";if($e+=P?"/"+ge+"/"+we+"/"+j:j+"/"+we+"/"+ge,(Se||Oe)&&($e+="/"+Math.round(10*Se)/10),Oe&&($e+="/"+Math.round(Oe)),this._hashName){var it=this._hashName,pt=!1,Et=e.window.location.hash.slice(1).split("&").map(function(Ft){var Dt=Ft.split("=")[0];return Dt===it?(pt=!0,Dt+"="+$e):Ft}).filter(function(Ft){return Ft});return pt||Et.push(it+"="+$e),"#"+Et.join("&")}return"#"+$e},Xn.prototype._getCurrentHash=function(){var P,N=this,j=e.window.location.hash.replace("#","");return this._hashName?(j.split("&").map(function(Z){return Z.split("=")}).forEach(function(Z){Z[0]===N._hashName&&(P=Z)}),(P&&P[1]||"").split("/")):j.split("/")},Xn.prototype._onHashChange=function(){var P=this._getCurrentHash();if(P.length>=3&&!P.some(function(j){return isNaN(j)})){var N=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(P[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+P[2],+P[1]],zoom:+P[0],bearing:N,pitch:+(P[4]||0)}),!0}return!1},Xn.prototype._updateHashUnthrottled=function(){var P=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",P)}catch{}};var er={linearity:.3,easing:e.bezier(0,0,.3,1)},fr=e.extend({deceleration:2500,maxSpeed:1400},er),Mr=e.extend({deceleration:20,maxSpeed:1400},er),_r=e.extend({deceleration:1e3,maxSpeed:360},er),Dr=e.extend({deceleration:1e3,maxSpeed:90},er),Fr=function(P){this._map=P,this.clear()};function wr(P,N){(!P.duration||P.duration<N.duration)&&(P.duration=N.duration,P.easing=N.easing)}function Nr(P,N,j){var Z=j.maxSpeed,ce=j.linearity,ge=j.deceleration,we=e.clamp(P*ce/(N/1e3),-Z,Z),Se=Math.abs(we)/(ge*ce);return{easing:j.easing,duration:1e3*Se,amount:we*(Se/2)}}Fr.prototype.clear=function(){this._inertiaBuffer=[]},Fr.prototype.record=function(P){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:P})},Fr.prototype._drainInertiaBuffer=function(){for(var P=this._inertiaBuffer,N=e.browser.now();P.length>0&&N-P[0].time>160;)P.shift()},Fr.prototype._onMoveEnd=function(P){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var N={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},j=0,Z=this._inertiaBuffer;j<Z.length;j+=1){var ce=Z[j].settings;N.zoom+=ce.zoomDelta||0,N.bearing+=ce.bearingDelta||0,N.pitch+=ce.pitchDelta||0,ce.panDelta&&N.pan._add(ce.panDelta),ce.around&&(N.around=ce.around),ce.pinchAround&&(N.pinchAround=ce.pinchAround)}var ge=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,we={};if(N.pan.mag()){var Se=Nr(N.pan.mag(),ge,e.extend({},fr,P||{}));we.offset=N.pan.mult(Se.amount/N.pan.mag()),we.center=this._map.transform.center,wr(we,Se)}if(N.zoom){var Oe=Nr(N.zoom,ge,Mr);we.zoom=this._map.transform.zoom+Oe.amount,wr(we,Oe)}if(N.bearing){var $e=Nr(N.bearing,ge,_r);we.bearing=this._map.transform.bearing+e.clamp($e.amount,-179,179),wr(we,$e)}if(N.pitch){var it=Nr(N.pitch,ge,Dr);we.pitch=this._map.transform.pitch+it.amount,wr(we,it)}if(we.zoom||we.bearing){var pt=void 0===N.pinchAround?N.around:N.pinchAround;we.around=pt?this._map.unproject(pt):this._map.getCenter()}return this.clear(),e.extend(we,{noMoveStart:!0})}};var ni=function(P){function N(Z,ce,ge,we){void 0===we&&(we={});var Se=n.mousePos(ce.getCanvasContainer(),ge),Oe=ce.unproject(Se);P.call(this,Z,e.extend({point:Se,lngLat:Oe,originalEvent:ge},we)),this._defaultPrevented=!1,this.target=ce}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var j={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,j),N}(e.Event),li=function(P){function N(Z,ce,ge){var we="touchend"===Z?ge.changedTouches:ge.touches,Se=n.touchPos(ce.getCanvasContainer(),we),Oe=Se.map(function(pt){return ce.unproject(pt)}),$e=Se.reduce(function(pt,Et,Ft,Dt){return pt.add(Et.div(Dt.length))},new e.Point(0,0)),it=ce.unproject($e);P.call(this,Z,{points:Se,point:$e,lngLats:Oe,lngLat:it,originalEvent:ge}),this._defaultPrevented=!1}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var j={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,j),N}(e.Event),bi=function(P){function N(Z,ce,ge){P.call(this,Z,{originalEvent:ge}),this._defaultPrevented=!1}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var j={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,j),N}(e.Event),dr=function(P,N){this._map=P,this._clickTolerance=N.clickTolerance};dr.prototype.reset=function(){delete this._mousedownPos},dr.prototype.wheel=function(P){return this._firePreventable(new bi(P.type,this._map,P))},dr.prototype.mousedown=function(P,N){return this._mousedownPos=N,this._firePreventable(new ni(P.type,this._map,P))},dr.prototype.mouseup=function(P){this._map.fire(new ni(P.type,this._map,P))},dr.prototype.click=function(P,N){this._mousedownPos&&this._mousedownPos.dist(N)>=this._clickTolerance||this._map.fire(new ni(P.type,this._map,P))},dr.prototype.dblclick=function(P){return this._firePreventable(new ni(P.type,this._map,P))},dr.prototype.mouseover=function(P){this._map.fire(new ni(P.type,this._map,P))},dr.prototype.mouseout=function(P){this._map.fire(new ni(P.type,this._map,P))},dr.prototype.touchstart=function(P){return this._firePreventable(new li(P.type,this._map,P))},dr.prototype.touchmove=function(P){this._map.fire(new li(P.type,this._map,P))},dr.prototype.touchend=function(P){this._map.fire(new li(P.type,this._map,P))},dr.prototype.touchcancel=function(P){this._map.fire(new li(P.type,this._map,P))},dr.prototype._firePreventable=function(P){if(this._map.fire(P),P.defaultPrevented)return{}},dr.prototype.isEnabled=function(){return!0},dr.prototype.isActive=function(){return!1},dr.prototype.enable=function(){},dr.prototype.disable=function(){};var wi=function(P){this._map=P};wi.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},wi.prototype.mousemove=function(P){this._map.fire(new ni(P.type,this._map,P))},wi.prototype.mousedown=function(){this._delayContextMenu=!0},wi.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ni("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},wi.prototype.contextmenu=function(P){this._delayContextMenu?this._contextMenuEvent=P:this._map.fire(new ni(P.type,this._map,P)),this._map.listens("contextmenu")&&P.preventDefault()},wi.prototype.isEnabled=function(){return!0},wi.prototype.isActive=function(){return!1},wi.prototype.enable=function(){},wi.prototype.disable=function(){};var Gr=function(P,N){this._map=P,this._el=P.getCanvasContainer(),this._container=P.getContainer(),this._clickTolerance=N.clickTolerance||1};function ii(P,N){for(var j={},Z=0;Z<P.length;Z++)j[P[Z].identifier]=N[Z];return j}Gr.prototype.isEnabled=function(){return!!this._enabled},Gr.prototype.isActive=function(){return!!this._active},Gr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Gr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Gr.prototype.mousedown=function(P,N){this.isEnabled()&&P.shiftKey&&0===P.button&&(n.disableDrag(),this._startPos=this._lastPos=N,this._active=!0)},Gr.prototype.mousemoveWindow=function(P,N){if(this._active){var j=N;if(!(this._lastPos.equals(j)||!this._box&&j.dist(this._startPos)<this._clickTolerance)){var Z=this._startPos;this._lastPos=j,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",P));var ce=Math.min(Z.x,j.x),ge=Math.max(Z.x,j.x),we=Math.min(Z.y,j.y),Se=Math.max(Z.y,j.y);n.setTransform(this._box,"translate("+ce+"px,"+we+"px)"),this._box.style.width=ge-ce+"px",this._box.style.height=Se-we+"px"}}},Gr.prototype.mouseupWindow=function(P,N){var j=this;if(this._active&&0===P.button){var Z=this._startPos,ce=N;if(this.reset(),n.suppressClick(),Z.x!==ce.x||Z.y!==ce.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:P})),{cameraAnimation:function(ge){return ge.fitScreenCoordinates(Z,ce,j._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",P)}},Gr.prototype.keydown=function(P){this._active&&27===P.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",P))},Gr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Gr.prototype._fireEvent=function(P,N){return this._map.fire(new e.Event(P,{originalEvent:N}))};var ki=function(P){this.reset(),this.numTouches=P.numTouches};ki.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ki.prototype.touchstart=function(P,N,j){(this.centroid||j.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=P.timeStamp),j.length===this.numTouches&&(this.centroid=function(Z){for(var ce=new e.Point(0,0),ge=0,we=Z;ge<we.length;ge+=1)ce._add(we[ge]);return ce.div(Z.length)}(N),this.touches=ii(j,N)))},ki.prototype.touchmove=function(P,N,j){if(!this.aborted&&this.centroid){var Z=ii(j,N);for(var ce in this.touches){var we=Z[ce];(!we||we.dist(this.touches[ce])>30)&&(this.aborted=!0)}}},ki.prototype.touchend=function(P,N,j){if((!this.centroid||P.timeStamp-this.startTime>500)&&(this.aborted=!0),0===j.length){var Z=!this.aborted&&this.centroid;if(this.reset(),Z)return Z}};var Zi=function(P){this.singleTap=new ki(P),this.numTaps=P.numTaps,this.reset()};Zi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Zi.prototype.touchstart=function(P,N,j){this.singleTap.touchstart(P,N,j)},Zi.prototype.touchmove=function(P,N,j){this.singleTap.touchmove(P,N,j)},Zi.prototype.touchend=function(P,N,j){var Z=this.singleTap.touchend(P,N,j);if(Z){var ce=P.timeStamp-this.lastTime<500,ge=!this.lastTap||this.lastTap.dist(Z)<30;if(ce&&ge||this.reset(),this.count++,this.lastTime=P.timeStamp,this.lastTap=Z,this.count===this.numTaps)return this.reset(),Z}};var aa=function(){this._zoomIn=new Zi({numTouches:1,numTaps:2}),this._zoomOut=new Zi({numTouches:2,numTaps:1}),this.reset()};aa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},aa.prototype.touchstart=function(P,N,j){this._zoomIn.touchstart(P,N,j),this._zoomOut.touchstart(P,N,j)},aa.prototype.touchmove=function(P,N,j){this._zoomIn.touchmove(P,N,j),this._zoomOut.touchmove(P,N,j)},aa.prototype.touchend=function(P,N,j){var Z=this,ce=this._zoomIn.touchend(P,N,j),ge=this._zoomOut.touchend(P,N,j);return ce?(this._active=!0,P.preventDefault(),setTimeout(function(){return Z.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()+1,around:we.unproject(ce)},{originalEvent:P})}}):ge?(this._active=!0,P.preventDefault(),setTimeout(function(){return Z.reset()},0),{cameraAnimation:function(we){return we.easeTo({duration:300,zoom:we.getZoom()-1,around:we.unproject(ge)},{originalEvent:P})}}):void 0},aa.prototype.touchcancel=function(){this.reset()},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var Vr=function(P){this.reset(),this._clickTolerance=P.clickTolerance||1};Vr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Vr.prototype._correctButton=function(P,N){return!1},Vr.prototype._move=function(P,N){return{}},Vr.prototype.mousedown=function(P,N){if(!this._lastPoint){var j=n.mouseButton(P);this._correctButton(P,j)&&(this._lastPoint=N,this._eventButton=j)}},Vr.prototype.mousemoveWindow=function(P,N){var j=this._lastPoint;if(j&&(P.preventDefault(),this._moved||!(N.dist(j)<this._clickTolerance)))return this._moved=!0,this._lastPoint=N,this._move(j,N)},Vr.prototype.mouseupWindow=function(P){n.mouseButton(P)===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},Vr.prototype.enable=function(){this._enabled=!0},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};var ca=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.mousedown=function(j,Z){P.prototype.mousedown.call(this,j,Z),this._lastPoint&&(this._active=!0)},N.prototype._correctButton=function(j,Z){return 0===Z&&!j.ctrlKey},N.prototype._move=function(j,Z){return{around:Z,panDelta:Z.sub(j)}},N}(Vr),ia=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype._correctButton=function(j,Z){return 0===Z&&j.ctrlKey||2===Z},N.prototype._move=function(j,Z){var ce=.8*(Z.x-j.x);if(ce)return this._active=!0,{bearingDelta:ce}},N.prototype.contextmenu=function(j){j.preventDefault()},N}(Vr),Ei=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype._correctButton=function(j,Z){return 0===Z&&j.ctrlKey||2===Z},N.prototype._move=function(j,Z){var ce=-.5*(Z.y-j.y);if(ce)return this._active=!0,{pitchDelta:ce}},N.prototype.contextmenu=function(j){j.preventDefault()},N}(Vr),fa=function(P){this._minTouches=1,this._clickTolerance=P.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},fa.prototype.touchstart=function(P,N,j){return this._calculateTransform(P,N,j)},fa.prototype.touchmove=function(P,N,j){if(this._active)return P.preventDefault(),this._calculateTransform(P,N,j)},fa.prototype.touchend=function(P,N,j){this._calculateTransform(P,N,j),this._active&&j.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(P,N,j){j.length>0&&(this._active=!0);var Z=ii(j,N),ce=new e.Point(0,0),ge=new e.Point(0,0),we=0;for(var Se in Z){var Oe=Z[Se],$e=this._touches[Se];$e&&(ce._add(Oe),ge._add(Oe.sub($e)),we++,Z[Se]=Oe)}if(this._touches=Z,!(we<this._minTouches)&&ge.mag()){var it=ge.div(we);if(this._sum._add(it),!(this._sum.mag()<this._clickTolerance))return{around:ce.div(we),panDelta:it}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var ea=function(){this.reset()};function za(P,N,j){for(var Z=0;Z<P.length;Z++)if(P[Z].identifier===j)return N[Z]}function Ai(P,N){return Math.log(P/N)/Math.LN2}ea.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ea.prototype._start=function(P){},ea.prototype._move=function(P,N,j){return{}},ea.prototype.touchstart=function(P,N,j){this._firstTwoTouches||j.length<2||(this._firstTwoTouches=[j[0].identifier,j[1].identifier],this._start([N[0],N[1]]))},ea.prototype.touchmove=function(P,N,j){if(this._firstTwoTouches){P.preventDefault();var Z=this._firstTwoTouches,ge=Z[1],we=za(j,N,Z[0]),Se=za(j,N,ge);if(we&&Se){var Oe=this._aroundCenter?null:we.add(Se).div(2);return this._move([we,Se],Oe,P)}}},ea.prototype.touchend=function(P,N,j){if(this._firstTwoTouches){var Z=this._firstTwoTouches,ge=Z[1],we=za(j,N,Z[0]),Se=za(j,N,ge);we&&Se||(this._active&&n.suppressClick(),this.reset())}},ea.prototype.touchcancel=function(){this.reset()},ea.prototype.enable=function(P){this._enabled=!0,this._aroundCenter=!!P&&"center"===P.around},ea.prototype.disable=function(){this._enabled=!1,this.reset()},ea.prototype.isEnabled=function(){return this._enabled},ea.prototype.isActive=function(){return this._active};var qa=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.reset=function(){P.prototype.reset.call(this),delete this._distance,delete this._startDistance},N.prototype._start=function(j){this._startDistance=this._distance=j[0].dist(j[1])},N.prototype._move=function(j,Z){var ce=this._distance;if(this._distance=j[0].dist(j[1]),this._active||!(Math.abs(Ai(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ai(this._distance,ce),pinchAround:Z}},N}(ea);function ka(P,N){return 180*P.angleWith(N)/Math.PI}var Ks=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.reset=function(){P.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},N.prototype._start=function(j){this._startVector=this._vector=j[0].sub(j[1]),this._minDiameter=j[0].dist(j[1])},N.prototype._move=function(j,Z){var ce=this._vector;if(this._vector=j[0].sub(j[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ka(this._vector,ce),pinchAround:Z}},N.prototype._isBelowThreshold=function(j){this._minDiameter=Math.min(this._minDiameter,j.mag());var Z=25/(Math.PI*this._minDiameter)*360,ce=ka(j,this._startVector);return Math.abs(ce)<Z},N}(ea);function Hs(P){return Math.abs(P.y)>Math.abs(P.x)}var $o=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.reset=function(){P.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},N.prototype._start=function(j){this._lastPoints=j,Hs(j[0].sub(j[1]))&&(this._valid=!1)},N.prototype._move=function(j,Z,ce){var ge=j[0].sub(this._lastPoints[0]),we=j[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ge,we,ce.timeStamp),this._valid)return this._lastPoints=j,this._active=!0,{pitchDelta:(ge.y+we.y)/2*-.5}},N.prototype.gestureBeginsVertically=function(j,Z,ce){if(void 0!==this._valid)return this._valid;var ge=j.mag()>=2,we=Z.mag()>=2;if(ge||we){if(!ge||!we)return void 0===this._firstMove&&(this._firstMove=ce),ce-this._firstMove<100&&void 0;var Se=j.y>0==Z.y>0;return Hs(j)&&Hs(Z)&&Se}},N}(ea),Ri={panStep:100,bearingStep:15,pitchStep:10},mo=function(){var P=Ri;this._panStep=P.panStep,this._bearingStep=P.bearingStep,this._pitchStep=P.pitchStep};function rs(P){return P*(2-P)}mo.prototype.reset=function(){this._active=!1},mo.prototype.keydown=function(P){var N=this;if(!(P.altKey||P.ctrlKey||P.metaKey)){var j=0,Z=0,ce=0,ge=0,we=0;switch(P.keyCode){case 61:case 107:case 171:case 187:j=1;break;case 189:case 109:case 173:j=-1;break;case 37:P.shiftKey?Z=-1:(P.preventDefault(),ge=-1);break;case 39:P.shiftKey?Z=1:(P.preventDefault(),ge=1);break;case 38:P.shiftKey?ce=1:(P.preventDefault(),we=-1);break;case 40:P.shiftKey?ce=-1:(P.preventDefault(),we=1);break;default:return}return{cameraAnimation:function(Se){var Oe=Se.getZoom();Se.easeTo({duration:300,easeId:"keyboardHandler",easing:rs,zoom:j?Math.round(Oe)+j*(P.shiftKey?2:1):Oe,bearing:Se.getBearing()+Z*N._bearingStep,pitch:Se.getPitch()+ce*N._pitchStep,offset:[-ge*N._panStep,-we*N._panStep],center:Se.getCenter()},{originalEvent:P})}}}},mo.prototype.enable=function(){this._enabled=!0},mo.prototype.disable=function(){this._enabled=!1,this.reset()},mo.prototype.isEnabled=function(){return this._enabled},mo.prototype.isActive=function(){return this._active};var Aa=function(P,N){this._map=P,this._el=P.getCanvasContainer(),this._handler=N,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Aa.prototype.setZoomRate=function(P){this._defaultZoomRate=P},Aa.prototype.setWheelZoomRate=function(P){this._wheelZoomRate=P},Aa.prototype.isEnabled=function(){return!!this._enabled},Aa.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Aa.prototype.isZooming=function(){return!!this._zooming},Aa.prototype.enable=function(P){this.isEnabled()||(this._enabled=!0,this._aroundCenter=P&&"center"===P.around)},Aa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Aa.prototype.wheel=function(P){if(this.isEnabled()){var N=P.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*P.deltaY:P.deltaY,j=e.browser.now(),Z=j-(this._lastWheelEventTime||0);this._lastWheelEventTime=j,0!==N&&N%4.000244140625==0?this._type="wheel":0!==N&&Math.abs(N)<4?this._type="trackpad":Z>400?(this._type=null,this._lastValue=N,this._timeout=setTimeout(this._onTimeout,40,P)):this._type||(this._type=Math.abs(Z*N)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,N+=this._lastValue)),P.shiftKey&&N&&(N/=4),this._type&&(this._lastWheelEvent=P,this._delta-=N,this._active||this._start(P)),P.preventDefault()}},Aa.prototype._onTimeout=function(P){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(P)},Aa.prototype._start=function(P){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var N=n.mousePos(this._el,P);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(N)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Aa.prototype.renderFrame=function(){return this._onScrollFrame()},Aa.prototype._onScrollFrame=function(){var P=this;if(this._frameId&&(this._frameId=null,this.isActive())){var N=this._map.transform;if(0!==this._delta){var j="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,Z=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&0!==Z&&(Z=1/Z);var ce="number"==typeof this._targetZoom?N.zoomScale(this._targetZoom):N.scale;this._targetZoom=Math.min(N.maxZoom,Math.max(N.minZoom,N.scaleZoom(ce*Z))),"wheel"===this._type&&(this._startZoom=N.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ge,we="number"==typeof this._targetZoom?this._targetZoom:N.zoom,Se=this._startZoom,Oe=this._easing,$e=!1;if("wheel"===this._type&&Se&&Oe){var it=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),pt=Oe(it);ge=e.number(Se,we,pt),it<1?this._frameId||(this._frameId=!0):$e=!0}else ge=we,$e=!0;return this._active=!0,$e&&(this._active=!1,this._finishTimeout=setTimeout(function(){P._zooming=!1,P._handler._triggerRenderFrame(),delete P._targetZoom,delete P._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!$e,zoomDelta:ge-N.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Aa.prototype._smoothOutEasing=function(P){var N=e.ease;if(this._prevEase){var j=this._prevEase,Z=(e.browser.now()-j.start)/j.duration,ce=j.easing(Z+.01)-j.easing(Z),ge=.27/Math.sqrt(ce*ce+1e-4)*.01,we=Math.sqrt(.0729-ge*ge);N=e.bezier(ge,we,.25,1)}return this._prevEase={start:e.browser.now(),duration:P,easing:N},N},Aa.prototype.reset=function(){this._active=!1};var Oa=function(P,N){this._clickZoom=P,this._tapZoom=N};Oa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Oa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Oa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Oa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Bo=function(){this.reset()};Bo.prototype.reset=function(){this._active=!1},Bo.prototype.dblclick=function(P,N){return P.preventDefault(),{cameraAnimation:function(j){j.easeTo({duration:300,zoom:j.getZoom()+(P.shiftKey?-1:1),around:j.unproject(N)},{originalEvent:P})}}},Bo.prototype.enable=function(){this._enabled=!0},Bo.prototype.disable=function(){this._enabled=!1,this.reset()},Bo.prototype.isEnabled=function(){return this._enabled},Bo.prototype.isActive=function(){return this._active};var Na=function(){this._tap=new Zi({numTouches:1,numTaps:1}),this.reset()};Na.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Na.prototype.touchstart=function(P,N,j){this._swipePoint||(this._tapTime&&P.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?j.length>0&&(this._swipePoint=N[0],this._swipeTouch=j[0].identifier):this._tap.touchstart(P,N,j))},Na.prototype.touchmove=function(P,N,j){if(this._tapTime){if(this._swipePoint){if(j[0].identifier!==this._swipeTouch)return;var Z=N[0],ce=Z.y-this._swipePoint.y;return this._swipePoint=Z,P.preventDefault(),this._active=!0,{zoomDelta:ce/128}}}else this._tap.touchmove(P,N,j)},Na.prototype.touchend=function(P,N,j){this._tapTime?this._swipePoint&&0===j.length&&this.reset():this._tap.touchend(P,N,j)&&(this._tapTime=P.timeStamp)},Na.prototype.touchcancel=function(){this.reset()},Na.prototype.enable=function(){this._enabled=!0},Na.prototype.disable=function(){this._enabled=!1,this.reset()},Na.prototype.isEnabled=function(){return this._enabled},Na.prototype.isActive=function(){return this._active};var ps=function(P,N,j){this._el=P,this._mousePan=N,this._touchPan=j};ps.prototype.enable=function(P){this._inertiaOptions=P||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ps.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ps.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ps.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Sa=function(P,N,j){this._pitchWithRotate=P.pitchWithRotate,this._mouseRotate=N,this._mousePitch=j};Sa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Sa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Sa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Sa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ko=function(P,N,j,Z){this._el=P,this._touchZoom=N,this._touchRotate=j,this._tapDragZoom=Z,this._rotationDisabled=!1,this._enabled=!0};Ko.prototype.enable=function(P){this._touchZoom.enable(P),this._rotationDisabled||this._touchRotate.enable(P),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ko.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ko.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ko.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ko.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ko.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Js=function(P){return P.zoom||P.drag||P.pitch||P.rotate},$i=function(P){function N(){P.apply(this,arguments)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N}(e.Event);function Fl(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta}var jo=function(P,N){this._map=P,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fr(P),this._bearingSnap=N.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(N),e.bindAll(["handleEvent","handleWindowEvent"],this);var j=this._el;this._listeners=[[j,"touchstart",{passive:!1}],[j,"touchmove",{passive:!1}],[j,"touchend",void 0],[j,"touchcancel",void 0],[j,"mousedown",void 0],[j,"mousemove",void 0],[j,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[j,"mouseover",void 0],[j,"mouseout",void 0],[j,"dblclick",void 0],[j,"click",void 0],[j,"keydown",{capture:!1}],[j,"keyup",void 0],[j,"wheel",{passive:!1}],[j,"contextmenu",void 0],[e.window,"blur",void 0]];for(var Z=0,ce=this._listeners;Z<ce.length;Z+=1){var ge=ce[Z],we=ge[0];n.addEventListener(we,ge[1],we===e.window.document?this.handleWindowEvent:this.handleEvent,ge[2])}};jo.prototype.destroy=function(){for(var P=0,N=this._listeners;P<N.length;P+=1){var j=N[P],Z=j[0];n.removeEventListener(Z,j[1],Z===e.window.document?this.handleWindowEvent:this.handleEvent,j[2])}},jo.prototype._addDefaultHandlers=function(P){var N=this._map,j=N.getCanvasContainer();this._add("mapEvent",new dr(N,P));var Z=N.boxZoom=new Gr(N,P);this._add("boxZoom",Z);var ce=new aa,ge=new Bo;N.doubleClickZoom=new Oa(ge,ce),this._add("tapZoom",ce),this._add("clickZoom",ge);var we=new Na;this._add("tapDragZoom",we);var Se=N.touchPitch=new $o;this._add("touchPitch",Se);var Oe=new ia(P),$e=new Ei(P);N.dragRotate=new Sa(P,Oe,$e),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",$e,["mouseRotate"]);var it=new ca(P),pt=new fa(P);N.dragPan=new ps(j,it,pt),this._add("mousePan",it),this._add("touchPan",pt,["touchZoom","touchRotate"]);var Et=new Ks,Ft=new qa;N.touchZoomRotate=new Ko(j,Ft,Et,we),this._add("touchRotate",Et,["touchPan","touchZoom"]),this._add("touchZoom",Ft,["touchPan","touchRotate"]);var Dt=N.scrollZoom=new Aa(N,this);this._add("scrollZoom",Dt,["mousePan"]);var zt=N.keyboard=new mo;this._add("keyboard",zt),this._add("blockableMapEvent",new wi(N));for(var Lt=0,Gt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Lt<Gt.length;Lt+=1){var Ut=Gt[Lt];P.interactive&&P[Ut]&&N[Ut].enable(P[Ut])}},jo.prototype._add=function(P,N,j){this._handlers.push({handlerName:P,handler:N,allowed:j}),this._handlersById[P]=N},jo.prototype.stop=function(){if(!this._updatingCamera){for(var P=0,N=this._handlers;P<N.length;P+=1)N[P].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},jo.prototype.isActive=function(){for(var P=0,N=this._handlers;P<N.length;P+=1)if(N[P].handler.isActive())return!0;return!1},jo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},jo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},jo.prototype.isMoving=function(){return Boolean(Js(this._eventsInProgress))||this.isZooming()},jo.prototype._blockedByActive=function(P,N,j){for(var Z in P)if(Z!==j&&(!N||N.indexOf(Z)<0))return!0;return!1},jo.prototype.handleWindowEvent=function(P){this.handleEvent(P,P.type+"Window")},jo.prototype._getMapTouches=function(P){for(var N=[],j=0,Z=P;j<Z.length;j+=1){var ce=Z[j];this._el.contains(ce.target)&&N.push(ce)}return N},jo.prototype.handleEvent=function(P,N){if("blur"!==P.type){this._updatingCamera=!0;for(var j="renderFrame"===P.type?void 0:P,Z={needsRenderFrame:!1},ce={},ge={},we=P.touches?this._getMapTouches(P.touches):void 0,Se=we?n.touchPos(this._el,we):n.mousePos(this._el,P),Oe=0,$e=this._handlers;Oe<$e.length;Oe+=1){var it=$e[Oe],pt=it.handlerName,Et=it.handler,Ft=it.allowed;if(Et.isEnabled()){var Dt=void 0;this._blockedByActive(ge,Ft,pt)?Et.reset():Et[N||P.type]&&(Dt=Et[N||P.type](P,Se,we),this.mergeHandlerResult(Z,ce,Dt,pt,j),Dt&&Dt.needsRenderFrame&&this._triggerRenderFrame()),(Dt||Et.isActive())&&(ge[pt]=Et)}}var zt={};for(var Lt in this._previousActiveHandlers)ge[Lt]||(zt[Lt]=j);this._previousActiveHandlers=ge,(Object.keys(zt).length||Fl(Z))&&(this._changes.push([Z,ce,zt]),this._triggerRenderFrame()),(Object.keys(ge).length||Fl(Z))&&this._map._stop(!0),this._updatingCamera=!1;var Gt=Z.cameraAnimation;Gt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Gt(this._map))}else this.stop()},jo.prototype.mergeHandlerResult=function(P,N,j,Z,ce){if(j){e.extend(P,j);var ge={handlerName:Z,originalEvent:j.originalEvent||ce};void 0!==j.zoomDelta&&(N.zoom=ge),void 0!==j.panDelta&&(N.drag=ge),void 0!==j.pitchDelta&&(N.pitch=ge),void 0!==j.bearingDelta&&(N.rotate=ge)}},jo.prototype._applyChanges=function(){for(var P={},N={},j={},Z=0,ce=this._changes;Z<ce.length;Z+=1){var ge=ce[Z],we=ge[0],Se=ge[1],Oe=ge[2];we.panDelta&&(P.panDelta=(P.panDelta||new e.Point(0,0))._add(we.panDelta)),we.zoomDelta&&(P.zoomDelta=(P.zoomDelta||0)+we.zoomDelta),we.bearingDelta&&(P.bearingDelta=(P.bearingDelta||0)+we.bearingDelta),we.pitchDelta&&(P.pitchDelta=(P.pitchDelta||0)+we.pitchDelta),void 0!==we.around&&(P.around=we.around),void 0!==we.pinchAround&&(P.pinchAround=we.pinchAround),we.noInertia&&(P.noInertia=we.noInertia),e.extend(N,Se),e.extend(j,Oe)}this._updateMapTransform(P,N,j),this._changes=[]},jo.prototype._updateMapTransform=function(P,N,j){var Z=this._map,ce=Z.transform;if(!Fl(P))return this._fireEvents(N,j);var ge=P.panDelta,we=P.zoomDelta,Se=P.bearingDelta,Oe=P.pitchDelta,$e=P.around,it=P.pinchAround;void 0!==it&&($e=it),Z._stop(!0),$e=$e||Z.transform.centerPoint;var pt=ce.pointLocation(ge?$e.sub(ge):$e);Se&&(ce.bearing+=Se),Oe&&(ce.pitch+=Oe),we&&(ce.zoom+=we),ce.setLocationAtPoint(pt,$e),this._map._update(),P.noInertia||this._inertia.record(P),this._fireEvents(N,j)},jo.prototype._fireEvents=function(P,N){var j=this,Z=Js(this._eventsInProgress),ce=Js(P),ge={};for(var we in P)this._eventsInProgress[we]||(ge[we+"start"]=P[we].originalEvent),this._eventsInProgress[we]=P[we];for(var Oe in!Z&&ce&&this._fireEvent("movestart",ce.originalEvent),ge)this._fireEvent(Oe,ge[Oe]);for(var $e in P.rotate&&(this._bearingChanged=!0),ce&&this._fireEvent("move",ce.originalEvent),P)this._fireEvent($e,P[$e].originalEvent);var pt,Et={};for(var Ft in this._eventsInProgress){var Dt=this._eventsInProgress[Ft],zt=Dt.handlerName,Lt=Dt.originalEvent;this._handlersById[zt].isActive()||(delete this._eventsInProgress[Ft],Et[Ft+"end"]=pt=N[zt]||Lt)}for(var Gt in Et)this._fireEvent(Gt,Et[Gt]);var Ut=Js(this._eventsInProgress);if((Z||ce)&&!Ut){this._updatingCamera=!0;var Zt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),vn=function(En){return 0!==En&&-j._bearingSnap<En&&En<j._bearingSnap};Zt?(vn(Zt.bearing||this._map.getBearing())&&(Zt.bearing=0),this._map.easeTo(Zt,{originalEvent:pt})):(this._map.fire(new e.Event("moveend",{originalEvent:pt})),vn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},jo.prototype._fireEvent=function(P,N){this._map.fire(new e.Event(P,N?{originalEvent:N}:{}))},jo.prototype._triggerRenderFrame=function(){var P=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(N){delete P._frameId,P.handleEvent(new $i("renderFrame",{timeStamp:N})),P._applyChanges()}))};var Ul=function(P){function N(j,Z){P.call(this),this._moving=!1,this._zooming=!1,this.transform=j,this._bearingSnap=Z.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},N.prototype.setCenter=function(j,Z){return this.jumpTo({center:j},Z)},N.prototype.panBy=function(j,Z,ce){return j=e.Point.convert(j).mult(-1),this.panTo(this.transform.center,e.extend({offset:j},Z),ce)},N.prototype.panTo=function(j,Z,ce){return this.easeTo(e.extend({center:j},Z),ce)},N.prototype.getZoom=function(){return this.transform.zoom},N.prototype.setZoom=function(j,Z){return this.jumpTo({zoom:j},Z),this},N.prototype.zoomTo=function(j,Z,ce){return this.easeTo(e.extend({zoom:j},Z),ce)},N.prototype.zoomIn=function(j,Z){return this.zoomTo(this.getZoom()+1,j,Z),this},N.prototype.zoomOut=function(j,Z){return this.zoomTo(this.getZoom()-1,j,Z),this},N.prototype.getBearing=function(){return this.transform.bearing},N.prototype.setBearing=function(j,Z){return this.jumpTo({bearing:j},Z),this},N.prototype.getPadding=function(){return this.transform.padding},N.prototype.setPadding=function(j,Z){return this.jumpTo({padding:j},Z),this},N.prototype.rotateTo=function(j,Z,ce){return this.easeTo(e.extend({bearing:j},Z),ce)},N.prototype.resetNorth=function(j,Z){return this.rotateTo(0,e.extend({duration:1e3},j),Z),this},N.prototype.resetNorthPitch=function(j,Z){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},j),Z),this},N.prototype.snapToNorth=function(j,Z){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(j,Z):this},N.prototype.getPitch=function(){return this.transform.pitch},N.prototype.setPitch=function(j,Z){return this.jumpTo({pitch:j},Z),this},N.prototype.cameraForBounds=function(j,Z){return j=e.LngLatBounds.convert(j),this._cameraForBoxAndBearing(j.getNorthWest(),j.getSouthEast(),0,Z)},N.prototype._cameraForBoxAndBearing=function(j,Z,ce,ge){var we={top:0,bottom:0,right:0,left:0};if("number"==typeof(ge=e.extend({padding:we,offset:[0,0],maxZoom:this.transform.maxZoom},ge)).padding){var Se=ge.padding;ge.padding={top:Se,bottom:Se,right:Se,left:Se}}ge.padding=e.extend(we,ge.padding);var Oe=this.transform,$e=Oe.padding,it=Oe.project(e.LngLat.convert(j)),pt=Oe.project(e.LngLat.convert(Z)),Et=it.rotate(-ce*Math.PI/180),Ft=pt.rotate(-ce*Math.PI/180),Dt=new e.Point(Math.max(Et.x,Ft.x),Math.max(Et.y,Ft.y)),zt=new e.Point(Math.min(Et.x,Ft.x),Math.min(Et.y,Ft.y)),Lt=Dt.sub(zt),Gt=(Oe.width-($e.left+$e.right+ge.padding.left+ge.padding.right))/Lt.x,Ut=(Oe.height-($e.top+$e.bottom+ge.padding.top+ge.padding.bottom))/Lt.y;if(!(Ut<0||Gt<0)){var Zt=Math.min(Oe.scaleZoom(Oe.scale*Math.min(Gt,Ut)),ge.maxZoom),vn=e.Point.convert(ge.offset),Vn=new e.Point(vn.x+(ge.padding.left-ge.padding.right)/2,vn.y+(ge.padding.top-ge.padding.bottom)/2).mult(Oe.scale/Oe.zoomScale(Zt));return{center:Oe.unproject(it.add(pt).div(2).sub(Vn)),zoom:Zt,bearing:ce}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},N.prototype.fitBounds=function(j,Z,ce){return this._fitInternal(this.cameraForBounds(j,Z),Z,ce)},N.prototype.fitScreenCoordinates=function(j,Z,ce,ge,we){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(j)),this.transform.pointLocation(e.Point.convert(Z)),ce,ge),ge,we)},N.prototype._fitInternal=function(j,Z,ce){return j?(delete(Z=e.extend(j,Z)).padding,Z.linear?this.easeTo(Z,ce):this.flyTo(Z,ce)):this},N.prototype.jumpTo=function(j,Z){this.stop();var ce=this.transform,ge=!1,we=!1,Se=!1;return"zoom"in j&&ce.zoom!==+j.zoom&&(ge=!0,ce.zoom=+j.zoom),void 0!==j.center&&(ce.center=e.LngLat.convert(j.center)),"bearing"in j&&ce.bearing!==+j.bearing&&(we=!0,ce.bearing=+j.bearing),"pitch"in j&&ce.pitch!==+j.pitch&&(Se=!0,ce.pitch=+j.pitch),null==j.padding||ce.isPaddingEqual(j.padding)||(ce.padding=j.padding),this.fire(new e.Event("movestart",Z)).fire(new e.Event("move",Z)),ge&&this.fire(new e.Event("zoomstart",Z)).fire(new e.Event("zoom",Z)).fire(new e.Event("zoomend",Z)),we&&this.fire(new e.Event("rotatestart",Z)).fire(new e.Event("rotate",Z)).fire(new e.Event("rotateend",Z)),Se&&this.fire(new e.Event("pitchstart",Z)).fire(new e.Event("pitch",Z)).fire(new e.Event("pitchend",Z)),this.fire(new e.Event("moveend",Z))},N.prototype.easeTo=function(j,Z){var ce=this;this._stop(!1,j.easeId),(!1===(j=e.extend({offset:[0,0],duration:500,easing:e.ease},j)).animate||!j.essential&&e.browser.prefersReducedMotion)&&(j.duration=0);var ge=this.transform,we=this.getZoom(),Se=this.getBearing(),Oe=this.getPitch(),$e=this.getPadding(),it="zoom"in j?+j.zoom:we,pt="bearing"in j?this._normalizeBearing(j.bearing,Se):Se,Et="pitch"in j?+j.pitch:Oe,Ft="padding"in j?j.padding:ge.padding,Dt=e.Point.convert(j.offset),zt=ge.centerPoint.add(Dt),Lt=ge.pointLocation(zt),Gt=e.LngLat.convert(j.center||Lt);this._normalizeCenter(Gt);var Ut,Zt,vn=ge.project(Lt),En=ge.project(Gt).sub(vn),qn=ge.zoomScale(it-we);j.around&&(Ut=e.LngLat.convert(j.around),Zt=ge.locationPoint(Ut));var Vn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||it!==we,this._rotating=this._rotating||Se!==pt,this._pitching=this._pitching||Et!==Oe,this._padding=!ge.isPaddingEqual(Ft),this._easeId=j.easeId,this._prepareEase(Z,j.noMoveStart,Vn),clearTimeout(this._easeEndTimeoutID),this._ease(function(pr){if(ce._zooming&&(ge.zoom=e.number(we,it,pr)),ce._rotating&&(ge.bearing=e.number(Se,pt,pr)),ce._pitching&&(ge.pitch=e.number(Oe,Et,pr)),ce._padding&&(ge.interpolatePadding($e,Ft,pr),zt=ge.centerPoint.add(Dt)),Ut)ge.setLocationAtPoint(Ut,Zt);else{var gr=ge.zoomScale(ge.zoom-we),Er=it>we?Math.min(2,qn):Math.max(.5,qn),yr=Math.pow(Er,1-pr),Jr=ge.unproject(vn.add(En.mult(pr*yr)).mult(gr));ge.setLocationAtPoint(ge.renderWorldCopies?Jr.wrap():Jr,zt)}ce._fireMoveEvents(Z)},function(pr){ce._afterEase(Z,pr)},j),this},N.prototype._prepareEase=function(j,Z,ce){void 0===ce&&(ce={}),this._moving=!0,Z||ce.moving||this.fire(new e.Event("movestart",j)),this._zooming&&!ce.zooming&&this.fire(new e.Event("zoomstart",j)),this._rotating&&!ce.rotating&&this.fire(new e.Event("rotatestart",j)),this._pitching&&!ce.pitching&&this.fire(new e.Event("pitchstart",j))},N.prototype._fireMoveEvents=function(j){this.fire(new e.Event("move",j)),this._zooming&&this.fire(new e.Event("zoom",j)),this._rotating&&this.fire(new e.Event("rotate",j)),this._pitching&&this.fire(new e.Event("pitch",j))},N.prototype._afterEase=function(j,Z){if(!this._easeId||!Z||this._easeId!==Z){delete this._easeId;var ce=this._zooming,ge=this._rotating,we=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ce&&this.fire(new e.Event("zoomend",j)),ge&&this.fire(new e.Event("rotateend",j)),we&&this.fire(new e.Event("pitchend",j)),this.fire(new e.Event("moveend",j))}},N.prototype.flyTo=function(j,Z){var ce=this;if(!j.essential&&e.browser.prefersReducedMotion){var ge=e.pick(j,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ge,Z)}this.stop(),j=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},j);var we=this.transform,Se=this.getZoom(),Oe=this.getBearing(),$e=this.getPitch(),it=this.getPadding(),pt="zoom"in j?e.clamp(+j.zoom,we.minZoom,we.maxZoom):Se,Et="bearing"in j?this._normalizeBearing(j.bearing,Oe):Oe,Ft="pitch"in j?+j.pitch:$e,Dt="padding"in j?j.padding:we.padding,zt=we.zoomScale(pt-Se),Lt=e.Point.convert(j.offset),Gt=we.centerPoint.add(Lt),Ut=we.pointLocation(Gt),Zt=e.LngLat.convert(j.center||Ut);this._normalizeCenter(Zt);var vn=we.project(Ut),En=we.project(Zt).sub(vn),qn=j.curve,Vn=Math.max(we.width,we.height),pr=Vn/zt,gr=En.mag();if("minZoom"in j){var Er=e.clamp(Math.min(j.minZoom,Se,pt),we.minZoom,we.maxZoom),yr=Vn/we.zoomScale(Er-Se);qn=Math.sqrt(yr/gr*2)}var Jr=qn*qn;function vi(_i){var qi=(pr*pr-Vn*Vn+(_i?-1:1)*Jr*Jr*gr*gr)/(2*(_i?pr:Vn)*Jr*gr);return Math.log(Math.sqrt(qi*qi+1)-qi)}function Fi(_i){return(Math.exp(_i)-Math.exp(-_i))/2}function or(_i){return(Math.exp(_i)+Math.exp(-_i))/2}var zr=vi(0),yi=function(_i){return or(zr)/or(zr+qn*_i)},ci=function(_i){return Vn*((or(zr)*(Fi(qi=zr+qn*_i)/or(qi))-Fi(zr))/Jr)/gr;var qi},Si=(vi(1)-zr)/qn;if(Math.abs(gr)<1e-6||!isFinite(Si)){if(Math.abs(Vn-pr)<1e-6)return this.easeTo(j,Z);var ji=pr<Vn?-1:1;Si=Math.abs(Math.log(pr/Vn))/qn,ci=function(){return 0},yi=function(_i){return Math.exp(ji*qn*_i)}}return j.duration="duration"in j?+j.duration:1e3*Si/("screenSpeed"in j?+j.screenSpeed/qn:+j.speed),j.maxDuration&&j.duration>j.maxDuration&&(j.duration=0),this._zooming=!0,this._rotating=Oe!==Et,this._pitching=Ft!==$e,this._padding=!we.isPaddingEqual(Dt),this._prepareEase(Z,!1),this._ease(function(_i){var qi=_i*Si,Vi=1/yi(qi);we.zoom=1===_i?pt:Se+we.scaleZoom(Vi),ce._rotating&&(we.bearing=e.number(Oe,Et,_i)),ce._pitching&&(we.pitch=e.number($e,Ft,_i)),ce._padding&&(we.interpolatePadding(it,Dt,_i),Gt=we.centerPoint.add(Lt));var oa=1===_i?Zt:we.unproject(vn.add(En.mult(ci(qi))).mult(Vi));we.setLocationAtPoint(we.renderWorldCopies?oa.wrap():oa,Gt),ce._fireMoveEvents(Z)},function(){return ce._afterEase(Z)},j),this},N.prototype.isEasing=function(){return!!this._easeFrameId},N.prototype.stop=function(){return this._stop()},N.prototype._stop=function(j,Z){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ce=this._onEaseEnd;delete this._onEaseEnd,ce.call(this,Z)}if(!j){var ge=this.handlers;ge&&ge.stop()}return this},N.prototype._ease=function(j,Z,ce){!1===ce.animate||0===ce.duration?(j(1),Z()):(this._easeStart=e.browser.now(),this._easeOptions=ce,this._onEaseFrame=j,this._onEaseEnd=Z,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},N.prototype._renderFrameCallback=function(){var j=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(j)),j<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},N.prototype._normalizeBearing=function(j,Z){j=e.wrap(j,-180,180);var ce=Math.abs(j-Z);return Math.abs(j-360-Z)<ce&&(j-=360),Math.abs(j+360-Z)<ce&&(j+=360),j},N.prototype._normalizeCenter=function(j){var Z=this.transform;if(Z.renderWorldCopies&&!Z.lngRange){var ce=j.lng-Z.center.lng;j.lng+=ce>180?-360:ce<-180?360:0}},N}(e.Evented),Io=function(P){void 0===P&&(P={}),this.options=P,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Io.prototype.getDefaultPosition=function(){return"bottom-right"},Io.prototype.onAdd=function(P){var N=this.options&&this.options.compact;return this._map=P,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),N&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===N&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Io.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Io.prototype._updateEditLink=function(){var P=this._editLink;P||(P=this._editLink=this._container.querySelector(".mapbox-improve-map"));var N=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(P){var j=N.reduce(function(Z,ce,ge){return ce.value&&(Z+=ce.key+"="+ce.value+(ge<N.length-1?"&":"")),Z},"?");P.href=e.config.FEEDBACK_URL+"/"+j+(this._map._hash?this._map._hash.getHashString(!0):""),P.rel="noopener nofollow"}},Io.prototype._updateData=function(P){!P||"metadata"!==P.sourceDataType&&"style"!==P.dataType||(this._updateAttributions(),this._updateEditLink())},Io.prototype._updateAttributions=function(){if(this._map.style){var P=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?P=P.concat(this.options.customAttribution.map(function(Se){return"string"!=typeof Se?"":Se})):"string"==typeof this.options.customAttribution&&P.push(this.options.customAttribution)),this._map.style.stylesheet){var N=this._map.style.stylesheet;this.styleOwner=N.owner,this.styleId=N.id}var j=this._map.style.sourceCaches;for(var Z in j){var ce=j[Z];if(ce.used){var ge=ce.getSource();ge.attribution&&P.indexOf(ge.attribution)<0&&P.push(ge.attribution)}}P.sort(function(Se,Oe){return Se.length-Oe.length});var we=(P=P.filter(function(Se,Oe){for(var $e=Oe+1;$e<P.length;$e++)if(P[$e].indexOf(Se)>=0)return!1;return!0})).join(" | ");we!==this._attribHTML&&(this._attribHTML=we,P.length?(this._innerContainer.innerHTML=we,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Io.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var al=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};al.prototype.onAdd=function(P){this._map=P,this._container=n.create("div","mapboxgl-ctrl");var N=n.create("a","mapboxgl-ctrl-logo");return N.target="_blank",N.rel="noopener nofollow",N.href="https://www.mapbox.com/",N.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),N.setAttribute("rel","noopener nofollow"),this._container.appendChild(N),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},al.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},al.prototype.getDefaultPosition=function(){return"bottom-left"},al.prototype._updateLogo=function(P){P&&"metadata"!==P.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},al.prototype._logoRequired=function(){if(this._map.style){var P=this._map.style.sourceCaches;for(var N in P)if(P[N].getSource().mapbox_logo)return!0;return!1}},al.prototype._updateCompact=function(){var P=this._container.children;if(P.length){var N=P[0];this._map.getCanvasContainer().offsetWidth<250?N.classList.add("mapboxgl-compact"):N.classList.remove("mapboxgl-compact")}};var Li=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Li.prototype.add=function(P){var N=++this._id;return this._queue.push({callback:P,id:N,cancelled:!1}),N},Li.prototype.remove=function(P){for(var N=this._currentlyRunning,j=0,Z=N?this._queue.concat(N):this._queue;j<Z.length;j+=1){var ce=Z[j];if(ce.id===P)return void(ce.cancelled=!0)}},Li.prototype.run=function(P){void 0===P&&(P=0);var N=this._currentlyRunning=this._queue;this._queue=[];for(var j=0,Z=N;j<Z.length;j+=1){var ce=Z[j];if(!ce.cancelled&&(ce.callback(P),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Li.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Hi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Hl=e.window.HTMLImageElement,Yr=e.window.HTMLElement,da=e.window.ImageBitmap,Fs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qs=function(P){function N(Z){var ce=this;if(null!=(Z=e.extend({},Fs,Z)).minZoom&&null!=Z.maxZoom&&Z.minZoom>Z.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=Z.minPitch&&null!=Z.maxPitch&&Z.minPitch>Z.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=Z.minPitch&&Z.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=Z.maxPitch&&Z.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ge=new Jt(Z.minZoom,Z.maxZoom,Z.minPitch,Z.maxPitch,Z.renderWorldCopies);if(P.call(this,ge,Z),this._interactive=Z.interactive,this._maxTileCacheSize=Z.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Z.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Z.preserveDrawingBuffer,this._antialias=Z.antialias,this._trackResize=Z.trackResize,this._bearingSnap=Z.bearingSnap,this._refreshExpiredTiles=Z.refreshExpiredTiles,this._fadeDuration=Z.fadeDuration,this._crossSourceCollisions=Z.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Z.collectResourceTiming,this._renderTaskQueue=new Li,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Hi,Z.locale),this._requestManager=new e.RequestManager(Z.transformRequest,Z.accessToken),"string"==typeof Z.container){if(this._container=e.window.document.getElementById(Z.container),!this._container)throw new Error("Container '"+Z.container+"' not found.")}else{if(!(Z.container instanceof Yr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Z.container}if(Z.maxBounds&&this.setMaxBounds(Z.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ce._update(!1)}),this.on("moveend",function(){return ce._update(!1)}),this.on("zoom",function(){return ce._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new jo(this,Z),this._hash=Z.hash&&new Xn("string"==typeof Z.hash&&Z.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:Z.center,zoom:Z.zoom,bearing:Z.bearing,pitch:Z.pitch}),Z.bounds&&(this.resize(),this.fitBounds(Z.bounds,e.extend({},Z.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Z.localIdeographFontFamily,Z.style&&this.setStyle(Z.style,{localIdeographFontFamily:Z.localIdeographFontFamily}),Z.attributionControl&&this.addControl(new Io({customAttribution:Z.customAttribution})),this.addControl(new al,Z.logoPosition),this.on("style.load",function(){ce.transform.unmodified&&ce.jumpTo(ce.style.stylesheet)}),this.on("data",function(Se){ce._update("style"===Se.dataType),ce.fire(new e.Event(Se.dataType+"data",Se))}),this.on("dataloading",function(Se){ce.fire(new e.Event(Se.dataType+"dataloading",Se))})}P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N;var j={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return N.prototype._getMapId=function(){return this._mapId},N.prototype.addControl=function(Z,ce){if(void 0===ce&&Z.getDefaultPosition&&(ce=Z.getDefaultPosition()),void 0===ce&&(ce="top-right"),!Z||!Z.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ge=Z.onAdd(this);this._controls.push(Z);var we=this._controlPositions[ce];return-1!==ce.indexOf("bottom")?we.insertBefore(ge,we.firstChild):we.appendChild(ge),this},N.prototype.removeControl=function(Z){if(!Z||!Z.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ce=this._controls.indexOf(Z);return ce>-1&&this._controls.splice(ce,1),Z.onRemove(this),this},N.prototype.resize=function(Z){var ce=this._containerDimensions(),ge=ce[0],we=ce[1];this._resizeCanvas(ge,we),this.transform.resize(ge,we),this.painter.resize(ge,we);var Se=!this._moving;return Se&&(this.stop(),this.fire(new e.Event("movestart",Z)).fire(new e.Event("move",Z))),this.fire(new e.Event("resize",Z)),Se&&this.fire(new e.Event("moveend",Z)),this},N.prototype.getBounds=function(){return this.transform.getBounds()},N.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},N.prototype.setMaxBounds=function(Z){return this.transform.setMaxBounds(e.LngLatBounds.convert(Z)),this._update()},N.prototype.setMinZoom=function(Z){if((Z=Z??-2)>=-2&&Z<=this.transform.maxZoom)return this.transform.minZoom=Z,this._update(),this.getZoom()<Z&&this.setZoom(Z),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},N.prototype.getMinZoom=function(){return this.transform.minZoom},N.prototype.setMaxZoom=function(Z){if((Z=Z??22)>=this.transform.minZoom)return this.transform.maxZoom=Z,this._update(),this.getZoom()>Z&&this.setZoom(Z),this;throw new Error("maxZoom must be greater than the current minZoom")},N.prototype.getMaxZoom=function(){return this.transform.maxZoom},N.prototype.setMinPitch=function(Z){if((Z=Z??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(Z>=0&&Z<=this.transform.maxPitch)return this.transform.minPitch=Z,this._update(),this.getPitch()<Z&&this.setPitch(Z),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},N.prototype.getMinPitch=function(){return this.transform.minPitch},N.prototype.setMaxPitch=function(Z){if((Z=Z??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(Z>=this.transform.minPitch)return this.transform.maxPitch=Z,this._update(),this.getPitch()>Z&&this.setPitch(Z),this;throw new Error("maxPitch must be greater than the current minPitch")},N.prototype.getMaxPitch=function(){return this.transform.maxPitch},N.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},N.prototype.setRenderWorldCopies=function(Z){return this.transform.renderWorldCopies=Z,this._update()},N.prototype.project=function(Z){return this.transform.locationPoint(e.LngLat.convert(Z))},N.prototype.unproject=function(Z){return this.transform.pointLocation(e.Point.convert(Z))},N.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},N.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},N.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},N.prototype._createDelegatedListener=function(Z,ce,ge){var we,Se=this;if("mouseenter"===Z||"mouseover"===Z){var Oe=!1;return{layer:ce,listener:ge,delegates:{mousemove:function(it){var pt=Se.getLayer(ce)?Se.queryRenderedFeatures(it.point,{layers:[ce]}):[];pt.length?Oe||(Oe=!0,ge.call(Se,new ni(Z,Se,it.originalEvent,{features:pt}))):Oe=!1},mouseout:function(){Oe=!1}}}}if("mouseleave"===Z||"mouseout"===Z){var $e=!1;return{layer:ce,listener:ge,delegates:{mousemove:function(it){(Se.getLayer(ce)?Se.queryRenderedFeatures(it.point,{layers:[ce]}):[]).length?$e=!0:$e&&($e=!1,ge.call(Se,new ni(Z,Se,it.originalEvent)))},mouseout:function(it){$e&&($e=!1,ge.call(Se,new ni(Z,Se,it.originalEvent)))}}}}return{layer:ce,listener:ge,delegates:(we={},we[Z]=function(it){var pt=Se.getLayer(ce)?Se.queryRenderedFeatures(it.point,{layers:[ce]}):[];pt.length&&(it.features=pt,ge.call(Se,it),delete it.features)},we)}},N.prototype.on=function(Z,ce,ge){if(void 0===ge)return P.prototype.on.call(this,Z,ce);var we=this._createDelegatedListener(Z,ce,ge);for(var Se in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[Z]=this._delegatedListeners[Z]||[],this._delegatedListeners[Z].push(we),we.delegates)this.on(Se,we.delegates[Se]);return this},N.prototype.once=function(Z,ce,ge){if(void 0===ge)return P.prototype.once.call(this,Z,ce);var we=this._createDelegatedListener(Z,ce,ge);for(var Se in we.delegates)this.once(Se,we.delegates[Se]);return this},N.prototype.off=function(Z,ce,ge){var we=this;return void 0===ge?P.prototype.off.call(this,Z,ce):(this._delegatedListeners&&this._delegatedListeners[Z]&&function(Se){for(var Oe=Se[Z],$e=0;$e<Oe.length;$e++){var it=Oe[$e];if(it.layer===ce&&it.listener===ge){for(var pt in it.delegates)we.off(pt,it.delegates[pt]);return Oe.splice($e,1),we}}}(this._delegatedListeners),this)},N.prototype.queryRenderedFeatures=function(Z,ce){if(!this.style)return[];var ge;if(void 0!==ce||void 0===Z||Z instanceof e.Point||Array.isArray(Z)||(ce=Z,Z=void 0),ce=ce||{},(Z=Z||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof Z[0])ge=[e.Point.convert(Z)];else{var we=e.Point.convert(Z[0]),Se=e.Point.convert(Z[1]);ge=[we,new e.Point(Se.x,we.y),Se,new e.Point(we.x,Se.y),we]}return this.style.queryRenderedFeatures(ge,ce,this.transform)},N.prototype.querySourceFeatures=function(Z,ce){return this.style.querySourceFeatures(Z,ce)},N.prototype.setStyle=function(Z,ce){return!1!==(ce=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ce)).diff&&ce.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&Z?(this._diffStyle(Z,ce),this):(this._localIdeographFontFamily=ce.localIdeographFontFamily,this._updateStyle(Z,ce))},N.prototype._getUIString=function(Z){var ce=this._locale[Z];if(null==ce)throw new Error("Missing UI string '"+Z+"'");return ce},N.prototype._updateStyle=function(Z,ce){return this.style&&(this.style.setEventedParent(null),this.style._remove()),Z?(this.style=new Rr(this,ce||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof Z?this.style.loadURL(Z):this.style.loadJSON(Z),this):(delete this.style,this)},N.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Rr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},N.prototype._diffStyle=function(Z,ce){var ge=this;if("string"==typeof Z){var we=this._requestManager.normalizeStyleURL(Z),Se=this._requestManager.transformRequest(we,e.ResourceType.Style);e.getJSON(Se,function(Oe,$e){Oe?ge.fire(new e.ErrorEvent(Oe)):$e&&ge._updateDiff($e,ce)})}else"object"==typeof Z&&this._updateDiff(Z,ce)},N.prototype._updateDiff=function(Z,ce){try{this.style.setState(Z)&&this._update(!0)}catch(ge){e.warnOnce("Unable to perform style diff: "+(ge.message||ge.error||ge)+".  Rebuilding the style from scratch."),this._updateStyle(Z,ce)}},N.prototype.getStyle=function(){if(this.style)return this.style.serialize()},N.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},N.prototype.addSource=function(Z,ce){return this._lazyInitEmptyStyle(),this.style.addSource(Z,ce),this._update(!0)},N.prototype.isSourceLoaded=function(Z){var ce=this.style&&this.style.sourceCaches[Z];if(void 0!==ce)return ce.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+Z+"'")))},N.prototype.areTilesLoaded=function(){var Z=this.style&&this.style.sourceCaches;for(var ce in Z){var ge=Z[ce]._tiles;for(var we in ge){var Se=ge[we];if("loaded"!==Se.state&&"errored"!==Se.state)return!1}}return!0},N.prototype.addSourceType=function(Z,ce,ge){return this._lazyInitEmptyStyle(),this.style.addSourceType(Z,ce,ge)},N.prototype.removeSource=function(Z){return this.style.removeSource(Z),this._update(!0)},N.prototype.getSource=function(Z){return this.style.getSource(Z)},N.prototype.addImage=function(Z,ce,ge){void 0===ge&&(ge={});var we=ge.pixelRatio;void 0===we&&(we=1);var Se=ge.sdf;void 0===Se&&(Se=!1);var Oe=ge.stretchX,$e=ge.stretchY,it=ge.content;if(this._lazyInitEmptyStyle(),ce instanceof Hl||da&&ce instanceof da){var pt=e.browser.getImageData(ce);this.style.addImage(Z,{data:new e.RGBAImage({width:pt.width,height:pt.height},pt.data),pixelRatio:we,stretchX:Oe,stretchY:$e,content:it,sdf:Se,version:0})}else{if(void 0===ce.width||void 0===ce.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ut=ce;this.style.addImage(Z,{data:new e.RGBAImage({width:ce.width,height:ce.height},new Uint8Array(ce.data)),pixelRatio:we,stretchX:Oe,stretchY:$e,content:it,sdf:Se,version:0,userImage:Ut}),Ut.onAdd&&Ut.onAdd(this,Z)}},N.prototype.updateImage=function(Z,ce){var ge=this.style.getImage(Z);if(!ge)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var we=ce instanceof Hl||da&&ce instanceof da?e.browser.getImageData(ce):ce,Se=we.width,Oe=we.height,$e=we.data;return void 0===Se||void 0===Oe?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Se!==ge.data.width||Oe!==ge.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ge.data.replace($e,!(ce instanceof Hl||da&&ce instanceof da)),void this.style.updateImage(Z,ge))},N.prototype.hasImage=function(Z){return Z?!!this.style.getImage(Z):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},N.prototype.removeImage=function(Z){this.style.removeImage(Z)},N.prototype.loadImage=function(Z,ce){e.getImage(this._requestManager.transformRequest(Z,e.ResourceType.Image),ce)},N.prototype.listImages=function(){return this.style.listImages()},N.prototype.addLayer=function(Z,ce){return this._lazyInitEmptyStyle(),this.style.addLayer(Z,ce),this._update(!0)},N.prototype.moveLayer=function(Z,ce){return this.style.moveLayer(Z,ce),this._update(!0)},N.prototype.removeLayer=function(Z){return this.style.removeLayer(Z),this._update(!0)},N.prototype.getLayer=function(Z){return this.style.getLayer(Z)},N.prototype.setLayerZoomRange=function(Z,ce,ge){return this.style.setLayerZoomRange(Z,ce,ge),this._update(!0)},N.prototype.setFilter=function(Z,ce,ge){return void 0===ge&&(ge={}),this.style.setFilter(Z,ce,ge),this._update(!0)},N.prototype.getFilter=function(Z){return this.style.getFilter(Z)},N.prototype.setPaintProperty=function(Z,ce,ge,we){return void 0===we&&(we={}),this.style.setPaintProperty(Z,ce,ge,we),this._update(!0)},N.prototype.getPaintProperty=function(Z,ce){return this.style.getPaintProperty(Z,ce)},N.prototype.setLayoutProperty=function(Z,ce,ge,we){return void 0===we&&(we={}),this.style.setLayoutProperty(Z,ce,ge,we),this._update(!0)},N.prototype.getLayoutProperty=function(Z,ce){return this.style.getLayoutProperty(Z,ce)},N.prototype.setLight=function(Z,ce){return void 0===ce&&(ce={}),this._lazyInitEmptyStyle(),this.style.setLight(Z,ce),this._update(!0)},N.prototype.getLight=function(){return this.style.getLight()},N.prototype.setFeatureState=function(Z,ce){return this.style.setFeatureState(Z,ce),this._update()},N.prototype.removeFeatureState=function(Z,ce){return this.style.removeFeatureState(Z,ce),this._update()},N.prototype.getFeatureState=function(Z){return this.style.getFeatureState(Z)},N.prototype.getContainer=function(){return this._container},N.prototype.getCanvasContainer=function(){return this._canvasContainer},N.prototype.getCanvas=function(){return this._canvas},N.prototype._containerDimensions=function(){var Z=0,ce=0;return this._container&&(Z=this._container.clientWidth||400,ce=this._container.clientHeight||300),[Z,ce]},N.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},N.prototype._setupContainer=function(){var Z=this._container;Z.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",Z)).style.visibility="hidden",this._detectMissingCSS();var ce=this._canvasContainer=n.create("div","mapboxgl-canvas-container",Z);this._interactive&&ce.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",ce),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ge=this._containerDimensions();this._resizeCanvas(ge[0],ge[1]);var we=this._controlContainer=n.create("div","mapboxgl-control-container",Z),Se=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Oe){Se[Oe]=n.create("div","mapboxgl-ctrl-"+Oe,we)})},N.prototype._resizeCanvas=function(Z,ce){var ge=e.browser.devicePixelRatio||1;this._canvas.width=ge*Z,this._canvas.height=ge*ce,this._canvas.style.width=Z+"px",this._canvas.style.height=ce+"px"},N.prototype._setupPainter=function(){var Z=e.extend({},r.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ce=this._canvas.getContext("webgl",Z)||this._canvas.getContext("experimental-webgl",Z);ce?(this.painter=new ba(ce,this.transform),e.webpSupported.testSupport(ce)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},N.prototype._contextLost=function(Z){Z.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:Z}))},N.prototype._contextRestored=function(Z){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:Z}))},N.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},N.prototype._update=function(Z){return this.style?(this._styleDirty=this._styleDirty||Z,this._sourcesDirty=!0,this.triggerRepaint(),this):this},N.prototype._requestRenderFrame=function(Z){return this._update(),this._renderTaskQueue.add(Z)},N.prototype._cancelRenderFrame=function(Z){this._renderTaskQueue.remove(Z)},N.prototype._render=function(Z){var ce,ge=this,we=0,Se=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ce=Se.createQueryEXT(),Se.beginQueryEXT(Se.TIME_ELAPSED_EXT,ce),we=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(Z),!this._removed){var Oe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $e=this.transform.zoom,it=e.browser.now();this.style.zoomHistory.update($e,it);var pt=new e.EvaluationParameters($e,{now:it,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Et=pt.crossFadingFactor();1===Et&&Et===this._crossFadingFactor||(Oe=!0,this._crossFadingFactor=Et),this.style.update(pt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Oe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ft=e.browser.now()-we;Se.endQueryEXT(Se.TIME_ELAPSED_EXT,ce),setTimeout(function(){var zt=Se.getQueryObjectEXT(ce,Se.QUERY_RESULT_EXT)/1e6;Se.deleteQueryEXT(ce),ge.fire(new e.Event("gpu-timing-frame",{cpuTime:Ft,gpuTime:zt}))},50)}if(this.listens("gpu-timing-layer")){var Dt=this.painter.collectGpuTimers();setTimeout(function(){var zt=ge.painter.queryGpuTimers(Dt);ge.fire(new e.Event("gpu-timing-layer",{layerTimes:zt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},N.prototype.remove=function(){this._hash&&this._hash.remove();for(var Z=0,ce=this._controls;Z<ce.length;Z+=1)ce[Z].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ge=this.painter.context.gl.getExtension("WEBGL_lose_context");ge&&ge.loseContext(),Vo(this._canvasContainer),Vo(this._controlContainer),Vo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},N.prototype.triggerRepaint=function(){var Z=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ce){Z._frame=null,Z._render(ce)}))},N.prototype._onWindowOnline=function(){this._update()},N.prototype._onWindowResize=function(Z){this._trackResize&&this.resize({originalEvent:Z})._update()},j.showTileBoundaries.get=function(){return!!this._showTileBoundaries},j.showTileBoundaries.set=function(Z){this._showTileBoundaries!==Z&&(this._showTileBoundaries=Z,this._update())},j.showPadding.get=function(){return!!this._showPadding},j.showPadding.set=function(Z){this._showPadding!==Z&&(this._showPadding=Z,this._update())},j.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},j.showCollisionBoxes.set=function(Z){this._showCollisionBoxes!==Z&&(this._showCollisionBoxes=Z,Z?this.style._generateCollisionBoxes():this._update())},j.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},j.showOverdrawInspector.set=function(Z){this._showOverdrawInspector!==Z&&(this._showOverdrawInspector=Z,this._update())},j.repaint.get=function(){return!!this._repaint},j.repaint.set=function(Z){this._repaint!==Z&&(this._repaint=Z,this.triggerRepaint())},j.vertices.get=function(){return!!this._vertices},j.vertices.set=function(Z){this._vertices=Z,this._update()},N.prototype._setCacheLimits=function(Z,ce){e.setCacheLimits(Z,ce)},j.version.get=function(){return e.version},Object.defineProperties(N.prototype,j),N}(Ul);function Vo(P){P.parentNode&&P.parentNode.removeChild(P)}var Al={showCompass:!0,showZoom:!0,visualizePitch:!1},Ca=function(P){var N=this;this.options=e.extend({},Al,P),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(j){return j.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(j){return N._map.zoomIn({},{originalEvent:j})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(j){return N._map.zoomOut({},{originalEvent:j})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(j){N.options.visualizePitch?N._map.resetNorthPitch({},{originalEvent:j}):N._map.resetNorth({},{originalEvent:j})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ca.prototype._updateZoomButtons=function(){var P=this._map.getZoom();this._zoomInButton.disabled=P===this._map.getMaxZoom(),this._zoomOutButton.disabled=P===this._map.getMinZoom()},Ca.prototype._rotateCompassArrow=function(){var P=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=P},Ca.prototype.onAdd=function(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _a(this._map,this._compass,this.options.visualizePitch)),this._container},Ca.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ca.prototype._createButton=function(P,N){var j=n.create("button",P,this._container);return j.type="button",j.addEventListener("click",N),j},Ca.prototype._setButtonTitle=function(P,N){var j=this._map._getUIString("NavigationControl."+N);P.title=j,P.setAttribute("aria-label",j)};var _a=function(P,N,j){void 0===j&&(j=!1),this._clickTolerance=10,this.element=N,this.mouseRotate=new ia({clickTolerance:P.dragRotate._mouseRotate._clickTolerance}),this.map=P,j&&(this.mousePitch=new Ei({clickTolerance:P.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(N,"mousedown",this.mousedown),n.addEventListener(N,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(N,"touchmove",this.touchmove),n.addEventListener(N,"touchend",this.touchend),n.addEventListener(N,"touchcancel",this.reset)};function ol(P,N,j){if(P=new e.LngLat(P.lng,P.lat),N){var Z=new e.LngLat(P.lng-360,P.lat),ce=new e.LngLat(P.lng+360,P.lat),ge=j.locationPoint(P).distSqr(N);j.locationPoint(Z).distSqr(N)<ge?P=Z:j.locationPoint(ce).distSqr(N)<ge&&(P=ce)}for(;Math.abs(P.lng-j.center.lng)>180;){var we=j.locationPoint(P);if(we.x>=0&&we.y>=0&&we.x<=j.width&&we.y<=j.height)break;P.lng>j.center.lng?P.lng-=360:P.lng+=360}return P}_a.prototype.down=function(P,N){this.mouseRotate.mousedown(P,N),this.mousePitch&&this.mousePitch.mousedown(P,N),n.disableDrag()},_a.prototype.move=function(P,N){var j=this.map,Z=this.mouseRotate.mousemoveWindow(P,N);if(Z&&Z.bearingDelta&&j.setBearing(j.getBearing()+Z.bearingDelta),this.mousePitch){var ce=this.mousePitch.mousemoveWindow(P,N);ce&&ce.pitchDelta&&j.setPitch(j.getPitch()+ce.pitchDelta)}},_a.prototype.off=function(){var P=this.element;n.removeEventListener(P,"mousedown",this.mousedown),n.removeEventListener(P,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(P,"touchmove",this.touchmove),n.removeEventListener(P,"touchend",this.touchend),n.removeEventListener(P,"touchcancel",this.reset),this.offTemp()},_a.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},_a.prototype.mousedown=function(P){this.down(e.extend({},P,{ctrlKey:!0,preventDefault:function(){return P.preventDefault()}}),n.mousePos(this.element,P)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},_a.prototype.mousemove=function(P){this.move(P,n.mousePos(this.element,P))},_a.prototype.mouseup=function(P){this.mouseRotate.mouseupWindow(P),this.mousePitch&&this.mousePitch.mouseupWindow(P),this.offTemp()},_a.prototype.touchstart=function(P){1!==P.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,P.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return P.preventDefault()}},this._startPos))},_a.prototype.touchmove=function(P){1!==P.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,P.targetTouches)[0],this.move({preventDefault:function(){return P.preventDefault()}},this._lastPos))},_a.prototype.touchend=function(P){0===P.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},_a.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Qs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Po(P,N,j){var Z=P.classList;for(var ce in Qs)Z.remove("mapboxgl-"+j+"-anchor-"+ce);Z.add("mapboxgl-"+j+"-anchor-"+N)}var vl,ql=function(P){function N(j,Z){var ce=this;if(P.call(this),(j instanceof e.window.HTMLElement||Z)&&(j=e.extend({element:j},Z)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=j&&j.anchor||"center",this._color=j&&j.color||"#3FB1CE",this._draggable=j&&j.draggable||!1,this._state="inactive",this._rotation=j&&j.rotation||0,this._rotationAlignment=j&&j.rotationAlignment||"auto",this._pitchAlignment=j&&j.pitchAlignment&&"auto"!==j.pitchAlignment?j.pitchAlignment:this._rotationAlignment,j&&j.element)this._element=j.element,this._offset=e.Point.convert(j&&j.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var ge=n.createNS("http://www.w3.org/2000/svg","svg");ge.setAttributeNS(null,"display","block"),ge.setAttributeNS(null,"height","41px"),ge.setAttributeNS(null,"width","27px"),ge.setAttributeNS(null,"viewBox","0 0 27 41");var we=n.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"stroke","none"),we.setAttributeNS(null,"stroke-width","1"),we.setAttributeNS(null,"fill","none"),we.setAttributeNS(null,"fill-rule","evenodd");var Se=n.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"fill-rule","nonzero");var Oe=n.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Oe.setAttributeNS(null,"fill","#000000");for(var $e=0,it=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];$e<it.length;$e+=1){var pt=it[$e],Et=n.createNS("http://www.w3.org/2000/svg","ellipse");Et.setAttributeNS(null,"opacity","0.04"),Et.setAttributeNS(null,"cx","10.5"),Et.setAttributeNS(null,"cy","5.80029008"),Et.setAttributeNS(null,"rx",pt.rx),Et.setAttributeNS(null,"ry",pt.ry),Oe.appendChild(Et)}var Ft=n.createNS("http://www.w3.org/2000/svg","g");Ft.setAttributeNS(null,"fill",this._color);var Dt=n.createNS("http://www.w3.org/2000/svg","path");Dt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ft.appendChild(Dt);var zt=n.createNS("http://www.w3.org/2000/svg","g");zt.setAttributeNS(null,"opacity","0.25"),zt.setAttributeNS(null,"fill","#000000");var Lt=n.createNS("http://www.w3.org/2000/svg","path");Lt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),zt.appendChild(Lt);var Gt=n.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Gt.setAttributeNS(null,"fill","#FFFFFF");var Ut=n.createNS("http://www.w3.org/2000/svg","g");Ut.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Zt=n.createNS("http://www.w3.org/2000/svg","circle");Zt.setAttributeNS(null,"fill","#000000"),Zt.setAttributeNS(null,"opacity","0.25"),Zt.setAttributeNS(null,"cx","5.5"),Zt.setAttributeNS(null,"cy","5.5"),Zt.setAttributeNS(null,"r","5.4999962");var vn=n.createNS("http://www.w3.org/2000/svg","circle");vn.setAttributeNS(null,"fill","#FFFFFF"),vn.setAttributeNS(null,"cx","5.5"),vn.setAttributeNS(null,"cy","5.5"),vn.setAttributeNS(null,"r","5.4999962"),Ut.appendChild(Zt),Ut.appendChild(vn),Se.appendChild(Oe),Se.appendChild(Ft),Se.appendChild(zt),Se.appendChild(Gt),Se.appendChild(Ut),ge.appendChild(Se),this._element.appendChild(ge),this._offset=e.Point.convert(j&&j.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(En){En.preventDefault()}),this._element.addEventListener("mousedown",function(En){En.preventDefault()}),this._element.addEventListener("focus",function(){var En=ce._map.getContainer();En.scrollTop=0,En.scrollLeft=0}),Po(this._element,this._anchor,"marker"),this._popup=null}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.addTo=function(j){return this.remove(),this._map=j,j.getCanvasContainer().appendChild(this._element),j.on("move",this._update),j.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},N.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(j){return this._lngLat=e.LngLat.convert(j),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},N.prototype.getElement=function(){return this._element},N.prototype.setPopup=function(j){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),j){if(!("offset"in j.options)){var Z=Math.sqrt(Math.pow(13.5,2)/2);j.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Z,-1*(24.6+Z)],"bottom-right":[-Z,-1*(24.6+Z)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=j,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},N.prototype._onKeyPress=function(j){var Z=j.code,ce=j.charCode||j.keyCode;"Space"!==Z&&"Enter"!==Z&&32!==ce&&13!==ce||this.togglePopup()},N.prototype._onMapClick=function(j){var Z=j.originalEvent.target,ce=this._element;this._popup&&(Z===ce||ce.contains(Z))&&this.togglePopup()},N.prototype.getPopup=function(){return this._popup},N.prototype.togglePopup=function(){var j=this._popup;return j?(j.isOpen()?j.remove():j.addTo(this._map),this):this},N.prototype._update=function(j){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ol(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var Z="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?Z="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(Z="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ce="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ce="rotateX(0deg)":"map"===this._pitchAlignment&&(ce="rotateX("+this._map.getPitch()+"deg)"),j&&"moveend"!==j.type||(this._pos=this._pos.round()),n.setTransform(this._element,Qs[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ce+" "+Z)}},N.prototype.getOffset=function(){return this._offset},N.prototype.setOffset=function(j){return this._offset=e.Point.convert(j),this._update(),this},N.prototype._onMove=function(j){this._pos=j.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},N.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},N.prototype._addDragHandler=function(j){this._element.contains(j.originalEvent.target)&&(j.preventDefault(),this._positionDelta=j.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},N.prototype.setDraggable=function(j){return this._draggable=!!j,this._map&&(j?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},N.prototype.isDraggable=function(){return this._draggable},N.prototype.setRotation=function(j){return this._rotation=j||0,this._update(),this},N.prototype.getRotation=function(){return this._rotation},N.prototype.setRotationAlignment=function(j){return this._rotationAlignment=j||"auto",this._update(),this},N.prototype.getRotationAlignment=function(){return this._rotationAlignment},N.prototype.setPitchAlignment=function(j){return this._pitchAlignment=j&&"auto"!==j?j:this._rotationAlignment,this._update(),this},N.prototype.getPitchAlignment=function(){return this._pitchAlignment},N}(e.Evented),sl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Wo=0,gs=!1,lu=function(P){function N(j){P.call(this),this.options=e.extend({},sl,j),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.onAdd=function(j){var Z;return this._map=j,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Z=this._setupUI,void 0!==vl?Z(vl):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(ce){Z(vl="denied"!==ce.state)}):Z(vl=!!e.window.navigator.geolocation),this._container},N.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wo=0,gs=!1},N.prototype._isOutOfMapMaxBounds=function(j){var Z=this._map.getMaxBounds(),ce=j.coords;return Z&&(ce.longitude<Z.getWest()||ce.longitude>Z.getEast()||ce.latitude<Z.getSouth()||ce.latitude>Z.getNorth())},N.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},N.prototype._onSuccess=function(j){if(this._map){if(this._isOutOfMapMaxBounds(j))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",j)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=j,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(j),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(j),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",j)),this._finish()}},N.prototype._updateCamera=function(j){var Z=new e.LngLat(j.coords.longitude,j.coords.latitude),ce=j.coords.accuracy,ge=this._map.getBearing(),we=e.extend({bearing:ge},this.options.fitBoundsOptions);this._map.fitBounds(Z.toBounds(ce),we,{geolocateSource:!0})},N.prototype._updateMarker=function(j){if(j){var Z=new e.LngLat(j.coords.longitude,j.coords.latitude);this._accuracyCircleMarker.setLngLat(Z).addTo(this._map),this._userLocationDotMarker.setLngLat(Z).addTo(this._map),this._accuracy=j.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},N.prototype._updateCircleRadius=function(){var j=this._map._container.clientHeight/2,Z=this._map.unproject([0,j]),ce=this._map.unproject([1,j]),ge=Z.distanceTo(ce),we=Math.ceil(2*this._accuracy/ge);this._circleElement.style.width=we+"px",this._circleElement.style.height=we+"px"},N.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},N.prototype._onError=function(j){if(this._map){if(this.options.trackUserLocation)if(1===j.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var Z=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=Z,this._geolocateButton.setAttribute("aria-label",Z),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===j.code&&gs)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",j)),this._finish()}},N.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},N.prototype._setupUI=function(j){var Z=this;if(this._container.addEventListener("contextmenu",function(we){return we.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===j){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ce=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ce,this._geolocateButton.setAttribute("aria-label",ce)}else{var ge=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ql(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ql({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(we){we.geolocateSource||"ACTIVE_LOCK"!==Z._watchState||we.originalEvent&&"resize"===we.originalEvent.type||(Z._watchState="BACKGROUND",Z._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),Z._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),Z.fire(new e.Event("trackuserlocationend")))})},N.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wo--,gs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var j;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Wo>1?(j={maximumAge:6e5,timeout:0},gs=!0):(j=this.options.positionOptions,gs=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,j)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},N.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},N}(e.Evented),El={maxWidth:100,unit:"metric"},Ms=function(P){this.options=e.extend({},El,P),e.bindAll(["_onMove","setUnit"],this)};function Au(P,N,j){var Z=j&&j.maxWidth||100,ce=P._container.clientHeight/2,ge=P.unproject([0,ce]),we=P.unproject([Z,ce]),Se=ge.distanceTo(we);if(j&&"imperial"===j.unit){var Oe=3.2808*Se;Oe>5280?Sl(N,Z,Oe/5280,P._getUIString("ScaleControl.Miles")):Sl(N,Z,Oe,P._getUIString("ScaleControl.Feet"))}else j&&"nautical"===j.unit?Sl(N,Z,Se/1852,P._getUIString("ScaleControl.NauticalMiles")):Se>=1e3?Sl(N,Z,Se/1e3,P._getUIString("ScaleControl.Kilometers")):Sl(N,Z,Se,P._getUIString("ScaleControl.Meters"))}function Sl(P,N,j,Z){var ce,ge,we,$e,it,Se=(ce=j,(ge=Math.pow(10,(""+Math.floor(ce)).length-1))*(we=(we=ce/ge)>=10?10:we>=5?5:we>=3?3:we>=2?2:we>=1?1:($e=we,it=Math.pow(10,Math.ceil(-Math.log($e)/Math.LN10)),Math.round($e*it)/it)));P.style.width=N*(Se/j)+"px",P.innerHTML=Se+"&nbsp;"+Z}Ms.prototype.getDefaultPosition=function(){return"bottom-left"},Ms.prototype._onMove=function(){Au(this._map,this._container,this.options)},Ms.prototype.onAdd=function(P){return this._map=P,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ms.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ms.prototype.setUnit=function(P){this.options.unit=P,Au(this._map,this._container,this.options)};var is=function(P){this._fullscreen=!1,P&&P.container&&(P.container instanceof e.window.HTMLElement?this._container=P.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};is.prototype.onAdd=function(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},is.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},is.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},is.prototype._setupUI=function(){var P=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",P).setAttribute("aria-hidden",!0),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},is.prototype._updateTitle=function(){var P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P},is.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},is.prototype._isFullscreen=function(){return this._fullscreen},is.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},is.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Vu={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},uu=function(P){function N(j){P.call(this),this.options=e.extend(Object.create(Vu),j),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return P&&(N.__proto__=P),(N.prototype=Object.create(P&&P.prototype)).constructor=N,N.prototype.addTo=function(j){return this._map&&this.remove(),this._map=j,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},N.prototype.isOpen=function(){return!!this._map},N.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(j){return this._lngLat=e.LngLat.convert(j),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},N.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},N.prototype.getElement=function(){return this._container},N.prototype.setText=function(j){return this.setDOMContent(e.window.document.createTextNode(j))},N.prototype.setHTML=function(j){var Z,ce=e.window.document.createDocumentFragment(),ge=e.window.document.createElement("body");for(ge.innerHTML=j;Z=ge.firstChild;)ce.appendChild(Z);return this.setDOMContent(ce)},N.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},N.prototype.setMaxWidth=function(j){return this.options.maxWidth=j,this._update(),this},N.prototype.setDOMContent=function(j){return this._createContent(),this._content.appendChild(j),this._update(),this},N.prototype.addClassName=function(j){this._container&&this._container.classList.add(j)},N.prototype.removeClassName=function(j){this._container&&this._container.classList.remove(j)},N.prototype.toggleClassName=function(j){if(this._container)return this._container.classList.toggle(j)},N.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},N.prototype._onMouseUp=function(j){this._update(j.point)},N.prototype._onMouseMove=function(j){this._update(j.point)},N.prototype._onDrag=function(j){this._update(j.point)},N.prototype._update=function(j){var Z=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Et){return Z._container.classList.add(Et)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ol(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||j)){var ge=this._pos=this._trackPointer&&j?j:this._map.project(this._lngLat),we=this.options.anchor,Se=function Et(Ft){if(Ft){if("number"==typeof Ft){var Dt=Math.round(Math.sqrt(.5*Math.pow(Ft,2)));return{center:new e.Point(0,0),top:new e.Point(0,Ft),"top-left":new e.Point(Dt,Dt),"top-right":new e.Point(-Dt,Dt),bottom:new e.Point(0,-Ft),"bottom-left":new e.Point(Dt,-Dt),"bottom-right":new e.Point(-Dt,-Dt),left:new e.Point(Ft,0),right:new e.Point(-Ft,0)}}if(Ft instanceof e.Point||Array.isArray(Ft)){var zt=e.Point.convert(Ft);return{center:zt,top:zt,"top-left":zt,"top-right":zt,bottom:zt,"bottom-left":zt,"bottom-right":zt,left:zt,right:zt}}return{center:e.Point.convert(Ft.center||[0,0]),top:e.Point.convert(Ft.top||[0,0]),"top-left":e.Point.convert(Ft["top-left"]||[0,0]),"top-right":e.Point.convert(Ft["top-right"]||[0,0]),bottom:e.Point.convert(Ft.bottom||[0,0]),"bottom-left":e.Point.convert(Ft["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Ft["bottom-right"]||[0,0]),left:e.Point.convert(Ft.left||[0,0]),right:e.Point.convert(Ft.right||[0,0])}}return Et(new e.Point(0,0))}(this.options.offset);if(!we){var Oe,$e=this._container.offsetWidth,it=this._container.offsetHeight;Oe=ge.y+Se.bottom.y<it?["top"]:ge.y>this._map.transform.height-it?["bottom"]:[],ge.x<$e/2?Oe.push("left"):ge.x>this._map.transform.width-$e/2&&Oe.push("right"),we=0===Oe.length?"bottom":Oe.join("-")}var pt=ge.add(Se[we]).round();n.setTransform(this._container,Qs[we]+" translate("+pt.x+"px,"+pt.y+"px)"),Po(this._container,we,"popup")}},N.prototype._onClose=function(){this.remove()},N}(e.Evented),pe={version:e.version,supported:r,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:qs,NavigationControl:Ca,GeolocateControl:lu,AttributionControl:Io,ScaleControl:Ms,FullscreenControl:is,Popup:uu,Marker:ql,Style:Rr,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){ft().acquire(vt)},clearPrewarmedResources:function(){var P=Ot;P&&(P.isPreloaded()&&1===P.numActive()?(P.release(vt),Ot=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(P){e.config.ACCESS_TOKEN=P},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(P){e.config.API_URL=P},get workerCount(){return gt.workerCount},set workerCount(P){gt.workerCount=P},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(P){e.config.MAX_PARALLEL_IMAGE_REQUESTS=P},clearStorage:function(P){e.clearTileCache(P)},workerUrl:""};return pe}),b},"object"==typeof ne&&void 0!==re?re.exports=m():(g=g||self).mapboxgl=m()},{}],240:[function(v,re,ne){"use strict";re.exports=Math.log2||function(g){return Math.log(g)*Math.LOG2E}},{}],241:[function(v,re,ne){"use strict";re.exports=function(m,b){b||(b=m,m=window);var y=0,e=0,r=0,n={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function t(x){var u=!1;return"altKey"in x&&(u=u||x.altKey!==n.alt,n.alt=!!x.altKey),"shiftKey"in x&&(u=u||x.shiftKey!==n.shift,n.shift=!!x.shiftKey),"ctrlKey"in x&&(u=u||x.ctrlKey!==n.control,n.control=!!x.ctrlKey),"metaKey"in x&&(u=u||x.metaKey!==n.meta,n.meta=!!x.metaKey),u}function p(x,u){var T=g.x(u),_=g.y(u);"buttons"in u&&(x=0|u.buttons),(x!==y||T!==e||_!==r||t(u))&&(y=0|x,e=T||0,r=_||0,b&&b(y,e,r,n))}function s(x){p(0,x)}function i(){(y||e||r||n.shift||n.alt||n.meta||n.control)&&(e=r=0,y=0,n.shift=n.alt=n.control=n.meta=!1,b&&b(0,0,0,n))}function f(x){t(x)&&b&&b(y,e,r,n)}function c(x){0===g.buttons(x)?p(0,x):p(y,x)}function l(x){p(y|g.buttons(x),x)}function h(x){p(y&~g.buttons(x),x)}function d(){a||(a=!0,m.addEventListener("mousemove",c),m.addEventListener("mousedown",l),m.addEventListener("mouseup",h),m.addEventListener("mouseleave",s),m.addEventListener("mouseenter",s),m.addEventListener("mouseout",s),m.addEventListener("mouseover",s),m.addEventListener("blur",i),m.addEventListener("keyup",f),m.addEventListener("keydown",f),m.addEventListener("keypress",f),m!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}d();var o={element:m};return Object.defineProperties(o,{enabled:{get:function(){return a},set:function(x){x?d():!a||(a=!1,m.removeEventListener("mousemove",c),m.removeEventListener("mousedown",l),m.removeEventListener("mouseup",h),m.removeEventListener("mouseleave",s),m.removeEventListener("mouseenter",s),m.removeEventListener("mouseout",s),m.removeEventListener("mouseover",s),m.removeEventListener("blur",i),m.removeEventListener("keyup",f),m.removeEventListener("keydown",f),m.removeEventListener("keypress",f),m!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))},enumerable:!0},buttons:{get:function(){return y},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return r},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),o};var g=v("mouse-event")},{"mouse-event":243}],242:[function(v,re,ne){var g={left:0,top:0};re.exports=function(m,b,y){b=b||m.currentTarget||m.srcElement,Array.isArray(y)||(y=[0,0]);var a,e=m.clientX||0,r=m.clientY||0,n=(a=b)===window||a===document||a===document.body?g:a.getBoundingClientRect();return y[0]=e-n.left,y[1]=r-n.top,y}},{}],243:[function(v,re,ne){"use strict";function g(m){return m.target||m.srcElement||window}ne.buttons=function(m){if("object"==typeof m){if("buttons"in m)return m.buttons;if("which"in m){if(2===(b=m.which))return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in m){var b;if(1===(b=m.button))return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0},ne.element=g,ne.x=function(m){if("object"==typeof m){if("offsetX"in m)return m.offsetX;var b=g(m).getBoundingClientRect();return m.clientX-b.left}return 0},ne.y=function(m){if("object"==typeof m){if("offsetY"in m)return m.offsetY;var b=g(m).getBoundingClientRect();return m.clientY-b.top}return 0}},{}],244:[function(v,re,ne){"use strict";var g=v("to-px");re.exports=function(m,b,y){"function"==typeof m&&(y=!!b,b=m,m=window);var e=g("ex",m),r=function(n){y&&n.preventDefault();var a=n.deltaX||0,t=n.deltaY||0,p=n.deltaZ||0,s=1;switch(n.deltaMode){case 1:s=e;break;case 2:s=window.innerHeight}if(t*=s,p*=s,(a*=s)||t||p)return b(a,t,p,n)};return m.addEventListener("wheel",r),r}},{"to-px":315}],245:[function(v,re,ne){(function(g,m){(function(){var b,y,e;e=function(){"use strict";var b,y,e,r=Object.prototype.toString,n=void 0!==m?function(x){return m(x)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(x,u,T,_){return Object.defineProperty(x,u,{value:T,writable:!0,configurable:!1!==_})}}catch{b=function(u,T,_){return u[T]=_,u}}function a(x,u){e.add(x,u),y||(y=n(e.drain))}function t(x){var u,T=typeof x;return null==x||"object"!=T&&"function"!=T||(u=x.then),"function"==typeof u&&u}function p(){for(var x=0;x<this.chain.length;x++)s(this,1===this.state?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function s(x,u,T){var _,w;try{!1===u?T.reject(x.msg):(_=!0===u?x.msg:u.call(void 0,x.msg))===T.promise?T.reject(TypeError("Promise-chain cycle")):(w=t(_))?w.call(_,T.resolve,T.reject):T.resolve(_)}catch(M){T.reject(M)}}function i(x){var u,T=this;if(!T.triggered){T.triggered=!0,T.def&&(T=T.def);try{(u=t(x))?a(function(){var _=new l(T);try{u.call(x,function(){i.apply(_,arguments)},function(){f.apply(_,arguments)})}catch(w){f.call(_,w)}}):(T.msg=x,T.state=1,T.chain.length>0&&a(p,T))}catch(_){f.call(new l(T),_)}}}function f(x){var u=this;u.triggered||(u.triggered=!0,u.def&&(u=u.def),u.msg=x,u.state=2,u.chain.length>0&&a(p,u))}function c(x,u,T,_){for(var w=0;w<u.length;w++)!function(M){x.resolve(u[M]).then(function(I){T(M,I)},_)}(w)}function l(x){this.def=x,this.triggered=!1}function h(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function d(x){if("function"!=typeof x)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var u=new h(this);this.then=function(T,_){var w={success:"function"!=typeof T||T,failure:"function"==typeof _&&_};return w.promise=new this.constructor(function(M,I){if("function"!=typeof M||"function"!=typeof I)throw TypeError("Not a function");w.resolve=M,w.reject=I}),u.chain.push(w),0!==u.state&&a(p,u),w.promise},this.catch=function(T){return this.then(void 0,T)};try{x.call(void 0,function(T){i.call(u,T)},function(T){f.call(u,T)})}catch(T){f.call(u,T)}}e=function(){var x,u,T;function _(w,M){this.fn=w,this.self=M,this.next=void 0}return{add:function(w,M){T=new _(w,M),u?u.next=T:x=T,u=T,T=void 0},drain:function(){var w=x;for(x=u=y=void 0;w;)w.fn.call(w.self),w=w.next}}}();var o=b({},"constructor",d,!1);return d.prototype=o,b(o,"__NPO__",0,!1),b(d,"resolve",function(x){return x&&"object"==typeof x&&1===x.__NPO__?x:new this(function(u,T){if("function"!=typeof u||"function"!=typeof T)throw TypeError("Not a function");u(x)})}),b(d,"reject",function(x){return new this(function(u,T){if("function"!=typeof u||"function"!=typeof T)throw TypeError("Not a function");T(x)})}),b(d,"all",function(x){var u=this;return"[object Array]"!=r.call(x)?u.reject(TypeError("Not an array")):0===x.length?u.resolve([]):new u(function(T,_){if("function"!=typeof T||"function"!=typeof _)throw TypeError("Not a function");var w=x.length,M=Array(w),I=0;c(u,x,function(S,R){M[S]=R,++I===w&&T(M)},_)})}),b(d,"race",function(x){var u=this;return"[object Array]"!=r.call(x)?u.reject(TypeError("Not an array")):new u(function(T,_){if("function"!=typeof T||"function"!=typeof _)throw TypeError("Not a function");c(u,x,function(w,M){T(M)},_)})}),d},(y=void 0!==g?g:this)[b="Promise"]=y[b]||e(),void 0!==re&&re.exports&&(re.exports=y[b])}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},v("timers").setImmediate)},{timers:312}],246:[function(v,re,ne){var g=Math.PI,m=n(120);function b(a,t,p,s){return["C",a,t,p,s,p,s]}function y(a,t,p,s,i,f){return["C",a/3+2/3*p,t/3+2/3*s,i/3+2/3*p,f/3+2/3*s,i,f]}function e(a,t,p,s,i,f,c,l,h,d){if(d)R=d[0],O=d[1],I=d[2],S=d[3];else{var o=r(a,t,-i);t=o.y;var x=((a=o.x)-(l=(o=r(l,h,-i)).x))/2,u=(t-(h=o.y))/2,T=x*x/(p*p)+u*u/(s*s);T>1&&(p*=T=Math.sqrt(T),s*=T);var _=p*p,w=s*s,M=(f==c?-1:1)*Math.sqrt(Math.abs((_*w-_*u*u-w*x*x)/(_*u*u+w*x*x)));M==1/0&&(M=1);var I=M*p*u/s+(a+l)/2,S=M*-s*x/p+(t+h)/2,R=Math.asin(((t-S)/s).toFixed(9)),O=Math.asin(((h-S)/s).toFixed(9));(R=a<I?g-R:R)<0&&(R=2*g+R),(O=l<I?g-O:O)<0&&(O=2*g+O),c&&R>O&&(R-=2*g),!c&&O>R&&(O-=2*g)}if(Math.abs(O-R)>m){var C=O,D=l,B=h;O=R+m*(c&&O>R?1:-1);var z=e(l=I+p*Math.cos(O),h=S+s*Math.sin(O),p,s,i,0,c,D,B,[O,C,I,S])}var Y=Math.tan((O-R)/4),G=4/3*p*Y,J=4/3*s*Y,te=[2*a-(a+G*Math.sin(R)),2*t-(t-J*Math.cos(R)),l+G*Math.sin(O),h-J*Math.cos(O),l,h];if(d)return te;z&&(te=te.concat(z));for(var X=0;X<te.length;){var K=r(te[X],te[X+1],i);te[X++]=K.x,te[X++]=K.y}return te}function r(a,t,p){return{x:a*Math.cos(p)-t*Math.sin(p),y:a*Math.sin(p)+t*Math.cos(p)}}function n(a){return a*(g/180)}re.exports=function(a){for(var t,p=[],s=0,i=0,f=0,c=0,l=null,h=null,d=0,o=0,x=0,u=a.length;x<u;x++){var T=a[x],_=T[0];switch(_){case"M":f=T[1],c=T[2];break;case"A":(T=e(d,o,T[1],T[2],n(T[3]),T[4],T[5],T[6],T[7])).unshift("C"),T.length>7&&(p.push(T.splice(0,7)),T.unshift("C"));break;case"S":var w=d,M=o;"C"!=t&&"S"!=t||(w+=w-s,M+=M-i),T=["C",w,M,T[1],T[2],T[3],T[4]];break;case"T":"Q"==t||"T"==t?(l=2*d-l,h=2*o-h):(l=d,h=o),T=y(d,o,l,h,T[1],T[2]);break;case"Q":l=T[1],h=T[2],T=y(d,o,T[1],T[2],T[3],T[4]);break;case"L":T=b(d,o,T[1],T[2]);break;case"H":T=b(d,o,T[1],o);break;case"V":T=b(d,o,d,T[1]);break;case"Z":T=b(d,o,f,c)}t=_,d=T[T.length-2],o=T[T.length-1],T.length>4?(s=T[T.length-4],i=T[T.length-3]):(s=d,i=o),p.push(T)}return p}},{}],247:[function(v,re,ne){"use strict";var g=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function y(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}re.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},n=0;n<10;n++)r["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(t){return r[t]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(t){a[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch{return!1}}()?Object.assign:function(e,r){for(var n,a,t=y(e),p=1;p<arguments.length;p++){for(var s in n=Object(arguments[p]))m.call(n,s)&&(t[s]=n[s]);if(g){a=g(n);for(var i=0;i<a.length;i++)b.call(n,a[i])&&(t[a[i]]=n[a[i]])}}return t}},{}],248:[function(v,re,ne){"use strict";function g(y,e){if("string"!=typeof y)return[y];var r=[y];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var n=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],a=e.escape||"___",t=!!e.flat;n.forEach(function(s){var i=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),f=[];function c(l,h,d){var o=r.push(l.slice(s[0].length,-s[1].length))-1;return f.push(o),a+o+a}r.forEach(function(l,h){for(var d,o=0;l!=d;)if(d=l,l=l.replace(i,c),o++>1e4)throw Error("References have circular dependency. Please, check them.");r[h]=l}),f=f.reverse(),r=r.map(function(l){return f.forEach(function(h){l=l.replace(new RegExp("(\\"+a+h+"\\"+a+")","g"),s[0]+"$1"+s[1])}),l})});var p=new RegExp("\\"+a+"([0-9]+)\\"+a);return t?r:function s(i,f,c){for(var l,h=[],d=0;l=p.exec(i);){if(d++>1e4)throw Error("Circular references in parenthesis");h.push(i.slice(0,l.index)),h.push(s(f[l[1]],f)),i=i.slice(l.index+l[0].length)}return h.push(i),h}(r[0],r)}function m(y,e){if(e&&e.flat){var r,n=e&&e.escape||"___",a=y[0];if(!a)return"";for(var t=new RegExp("\\"+n+"([0-9]+)\\"+n),p=0;a!=r;){if(p++>1e4)throw Error("Circular references in "+y);r=a,a=a.replace(t,s)}return a}return y.reduce(function i(f,c){return Array.isArray(c)&&(c=c.reduce(i,"")),f+c},"");function s(i,f){if(null==y[f])throw Error("Reference "+f+"is undefined");return y[f]}}function b(y,e){return Array.isArray(y)?m(y,e):g(y,e)}b.parse=g,b.stringify=m,re.exports=b},{}],249:[function(v,re,ne){"use strict";var g=v("pick-by-alias");re.exports=function(m){var b;return arguments.length>1&&(m=arguments),"string"==typeof m?m=m.split(/\s/).map(parseFloat):"number"==typeof m&&(m=[m]),m.length&&"number"==typeof m[0]?b=1===m.length?{width:m[0],height:m[0],x:0,y:0}:2===m.length?{width:m[0],height:m[1],x:0,y:0}:{x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&((b={x:(m=g(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:m.top||0}).width=m.width??(m.right?m.right-b.x:0),b.height=m.height??(m.bottom?m.bottom-b.y:0)),b}},{"pick-by-alias":253}],250:[function(v,re,ne){re.exports=function(y){var e=[];return y.replace(m,function(r,n,a){var s,t=n.toLowerCase();for(s=void 0,a=(s=a.match(b))?s.map(Number):[],"m"==t&&a.length>2&&(e.push([n].concat(a.splice(0,2))),t="l",n="m"==n?"l":"L");;){if(a.length==g[t])return a.unshift(n),e.push(a);if(a.length<g[t])throw new Error("malformed path data");e.push([n].concat(a.splice(0,g[t])))}}),e};var g={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m=/([astvzqmhlc])([^astvzqmhlc]*)/gi,b=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(v,re,ne){re.exports=function(g,m){m||(m=[0,""]),g=String(g);var b=parseFloat(g,10);return m[0]=b,m[1]=g.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],252:[function(v,re,ne){(function(g){(function(){(function(){var m,b,y,e,r,n;typeof performance<"u"&&null!==performance&&performance.now?re.exports=function(){return performance.now()}:null!=g&&g.hrtime?(re.exports=function(){return(m()-r)/1e6},b=g.hrtime,e=(m=function(){var a;return 1e9*(a=b())[0]+a[1]})(),n=1e9*g.uptime(),r=e-n):Date.now?(re.exports=function(){return Date.now()-y},y=Date.now()):(re.exports=function(){return(new Date).getTime()-y},y=(new Date).getTime())}).call(this)}).call(this)}).call(this,v("_process"))},{_process:278}],253:[function(v,re,ne){"use strict";re.exports=function(b,y,e){var r,n,a={};if("string"==typeof y&&(y=m(y)),Array.isArray(y)){var t={};for(n=0;n<y.length;n++)t[y[n]]=!0;y=t}for(r in y)y[r]=m(y[r]);var p={};for(r in y){var s=y[r];if(Array.isArray(s))for(n=0;n<s.length;n++){var i=s[n];if(e&&(p[i]=!0),i in b){if(a[r]=b[i],e)for(var f=n;f<s.length;f++)p[s[f]]=!0;break}}else r in b&&(y[r]&&(a[r]=b[r]),e&&(p[r]=!0))}if(e)for(r in b)p[r]||(a[r]=b[r]);return a};var g={};function m(b){return g[b]?g[b]:("string"==typeof b&&(b=g[b]=b.split(/\s*,\s*|\s+/)),b)}},{}],254:[function(v,re,ne){re.exports=function(g,m,b,y){var e=g[0],r=g[1],n=!1;void 0===b&&(b=0),void 0===y&&(y=m.length);for(var a=y-b,t=0,p=a-1;t<a;p=t++){var s=m[t+b][0],i=m[t+b][1],c=m[p+b][1];i>r!=c>r&&e<(m[p+b][0]-s)*(r-i)/(c-i)+s&&(n=!n)}return n}},{}],255:[function(v,re,ne){var g,m=v("./lib/build-log"),b=v("./lib/epsilon"),y=v("./lib/intersecter"),e=v("./lib/segment-chainer"),r=v("./lib/segment-selector"),n=v("./lib/geojson"),a=!1,t=b();function p(s,i,f){var c=g.segments(s),l=g.segments(i),h=f(g.combine(c,l));return g.polygon(h)}g={buildLog:function(s){return!0===s?a=m():!1===s&&(a=!1),!1!==a&&a.list},epsilon:function(s){return t.epsilon(s)},segments:function(s){var i=y(!0,t,a);return s.regions.forEach(i.addRegion),{segments:i.calculate(s.inverted),inverted:s.inverted}},combine:function(s,i){return{combined:y(!1,t,a).calculate(s.segments,s.inverted,i.segments,i.inverted),inverted1:s.inverted,inverted2:i.inverted}},selectUnion:function(s){return{segments:r.union(s.combined,a),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:r.intersect(s.combined,a),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:r.difference(s.combined,a),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:r.differenceRev(s.combined,a),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:r.xor(s.combined,a),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:e(s.segments,t,a),inverted:s.inverted}},polygonFromGeoJSON:function(s){return n.toPolygon(g,s)},polygonToGeoJSON:function(s){return n.fromPolygon(g,t,s)},union:function(s,i){return p(s,i,g.selectUnion)},intersect:function(s,i){return p(s,i,g.selectIntersect)},difference:function(s,i){return p(s,i,g.selectDifference)},differenceRev:function(s,i){return p(s,i,g.selectDifferenceRev)},xor:function(s,i){return p(s,i,g.selectXor)}},"object"==typeof window&&(window.PolyBool=g),re.exports=g},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(v,re,ne){re.exports=function(){var g,m=0,b=!1;function y(e,r){return g.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),g}return g={list:[],segmentId:function(){return m++},checkIntersection:function(e,r){return y("check",{seg1:e,seg2:r})},segmentChop:function(e,r){return y("div_seg",{seg:e,pt:r}),y("chop",{seg:e,pt:r})},statusRemove:function(e){return y("pop_seg",{seg:e})},segmentUpdate:function(e){return y("seg_update",{seg:e})},segmentNew:function(e,r){return y("new_seg",{seg:e,primary:r})},segmentRemove:function(e){return y("rem_seg",{seg:e})},tempStatus:function(e,r,n){return y("temp_status",{seg:e,above:r,below:n})},rewind:function(e){return y("rewind",{seg:e})},status:function(e,r,n){return y("status",{seg:e,above:r,below:n})},vert:function(e){return e===b?g:(b=e,y("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),y("log",{txt:e})},reset:function(){return y("reset")},selected:function(e){return y("selected",{segs:e})},chainStart:function(e){return y("chain_start",{seg:e})},chainRemoveHead:function(e,r){return y("chain_rem_head",{index:e,pt:r})},chainRemoveTail:function(e,r){return y("chain_rem_tail",{index:e,pt:r})},chainNew:function(e,r){return y("chain_new",{pt1:e,pt2:r})},chainMatch:function(e){return y("chain_match",{index:e})},chainClose:function(e){return y("chain_close",{index:e})},chainAddHead:function(e,r){return y("chain_add_head",{index:e,pt:r})},chainAddTail:function(e,r){return y("chain_add_tail",{index:e,pt:r})},chainConnect:function(e,r){return y("chain_con",{index1:e,index2:r})},chainReverse:function(e){return y("chain_rev",{index:e})},chainJoin:function(e,r){return y("chain_join",{index1:e,index2:r})},done:function(){return y("done")}}}},{}],257:[function(v,re,ne){re.exports=function(g){"number"!=typeof g&&(g=1e-10);var m={epsilon:function(b){return"number"==typeof b&&(g=b),g},pointAboveOrOnLine:function(b,y,e){var r=y[0],n=y[1];return(e[0]-r)*(b[1]-n)-(e[1]-n)*(b[0]-r)>=-g},pointBetween:function(b,y,e){var n=e[0]-y[0],t=e[1]-y[1],p=(b[0]-y[0])*n+(b[1]-y[1])*t;return!(p<g||p-(n*n+t*t)>-g)},pointsSameX:function(b,y){return Math.abs(b[0]-y[0])<g},pointsSameY:function(b,y){return Math.abs(b[1]-y[1])<g},pointsSame:function(b,y){return m.pointsSameX(b,y)&&m.pointsSameY(b,y)},pointsCompare:function(b,y){return m.pointsSameX(b,y)?m.pointsSameY(b,y)?0:b[1]<y[1]?-1:1:b[0]<y[0]?-1:1},pointsCollinear:function(b,y,e){return Math.abs((b[0]-y[0])*(y[1]-e[1])-(y[0]-e[0])*(b[1]-y[1]))<g},linesIntersect:function(b,y,e,r){var n=y[0]-b[0],a=y[1]-b[1],t=r[0]-e[0],p=r[1]-e[1],s=n*p-a*t;if(Math.abs(s)<g)return!1;var i=b[0]-e[0],f=b[1]-e[1],c=(t*f-p*i)/s,l=(n*f-a*i)/s,h={alongA:0,alongB:0,pt:[b[0]+c*n,b[1]+c*a]};return h.alongA=c<=-g?-2:c<g?-1:c-1<=-g?0:c-1<g?1:2,h.alongB=l<=-g?-2:l<g?-1:l-1<=-g?0:l-1<g?1:2,h},pointInsideRegion:function(b,y){for(var e=b[0],r=b[1],n=y[y.length-1][0],a=y[y.length-1][1],t=!1,p=0;p<y.length;p++){var s=y[p][0],i=y[p][1];i-r>g!=a-r>g&&(n-s)*(r-i)/(a-i)+s-e>g&&(t=!t),n=s,a=i}return t}};return m}},{}],258:[function(v,re,ne){re.exports={toPolygon:function(m,b){function y(n){if(n.length<=0)return m.segments({inverted:!1,regions:[]});function a(s){var i=s.slice(0,s.length-1);return m.segments({inverted:!1,regions:[i]})}for(var t=a(n[0]),p=1;p<n.length;p++)t=m.selectDifference(m.combine(t,a(n[p])));return t}if("Polygon"===b.type)return m.polygon(y(b.coordinates));if("MultiPolygon"===b.type){for(var e=m.segments({inverted:!1,regions:[]}),r=0;r<b.coordinates.length;r++)e=m.selectUnion(m.combine(e,y(b.coordinates[r])));return m.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(m,b,y){function e(l,h){return b.pointInsideRegion([.5*(l[0][0]+l[1][0]),.5*(l[0][1]+l[1][1])],h)}function r(l){return{region:l,children:[]}}y=m.polygon(m.segments(y));var n=r(null);function a(l,h){for(var d=0;d<l.children.length;d++)if(e(h,(x=l.children[d]).region))return void a(x,h);var o=r(h);for(d=0;d<l.children.length;d++){var x;e((x=l.children[d]).region,h)&&(o.children.push(x),l.children.splice(d,1),d--)}l.children.push(o)}for(var t=0;t<y.regions.length;t++){var p=y.regions[t];p.length<3||a(n,p)}function s(l,h){for(var d=0,o=l[l.length-1][0],x=l[l.length-1][1],u=[],T=0;T<l.length;T++){var _=l[T][0],w=l[T][1];u.push([_,w]),d+=w*o-_*x,o=_,x=w}return d<0!==h&&u.reverse(),u.push([u[0][0],u[0][1]]),u}var i=[];function f(l){var h=[s(l.region,!1)];i.push(h);for(var d=0;d<l.children.length;d++)h.push(c(l.children[d]))}function c(l){for(var h=0;h<l.children.length;h++)f(l.children[h]);return s(l.region,!0)}for(t=0;t<n.children.length;t++)f(n.children[t]);return i.length<=0?{type:"Polygon",coordinates:[]}:1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}}},{}],259:[function(v,re,ne){var g=v("./linked-list");re.exports=function(m,b,y){function e(s,i,f){return{id:y?y.segmentId():-1,start:s,end:i,myFill:{above:f.myFill.above,below:f.myFill.below},otherFill:null}}var r=g.create();function n(s,i){r.insertBefore(s,function(f){return c=s.isStart,h=i,d=f.isStart,x=f.other.pt,(0!==(u=b.pointsCompare(s.pt,o=f.pt))?u:b.pointsSame(h,x)?0:c!==d?c?1:-1:b.pointAboveOrOnLine(h,d?o:x,d?x:o)?1:-1)<0;var c,h,d,o,x,u})}function a(s,i){var c,h,f=(n(h=g.node({isStart:!0,pt:(c=s).start,seg:c,primary:i,other:null,status:null}),c.end),h);return function(c,l,h){var d=g.node({isStart:!1,pt:l.end,seg:l,primary:h,other:c,status:null});c.other=d,n(d,c.pt)}(f,s,i),f}function t(s,i){var c,l,f=e(i,s.seg.end,s.seg);return c=s,l=i,y&&y.segmentChop(c.seg,l),c.other.remove(),c.seg.end=l,c.other.pt=l,n(c.other,c.pt),a(f,s.primary)}function p(s,i){var f=g.create();function c(R){return f.findTransition(function(O){var C,D,B,z,Y,G;return z=(C=R).seg.end,(b.pointsCollinear(B=C.seg.start,Y=(D=O.ev).seg.start,G=D.seg.end)?b.pointsCollinear(z,Y,G)||b.pointAboveOrOnLine(z,Y,G)?1:-1:b.pointAboveOrOnLine(B,Y,G)?1:-1)>0})}function l(R,O){var C=R.seg,D=O.seg,B=C.start,z=C.end,Y=D.start,G=D.end;y&&y.checkIntersection(C,D);var J=b.linesIntersect(B,z,Y,G);if(!1===J){if(!b.pointsCollinear(B,z,Y)||b.pointsSame(B,G)||b.pointsSame(z,Y))return!1;var te=b.pointsSame(B,Y),X=b.pointsSame(z,G);if(te&&X)return O;var K=!te&&b.pointBetween(B,Y,G),ae=!X&&b.pointBetween(z,Y,G);if(te)return ae?t(O,z):t(R,G),O;K&&(X||(ae?t(O,z):t(R,G)),t(O,B))}else 0===J.alongA&&(-1===J.alongB?t(R,Y):0===J.alongB?t(R,J.pt):1===J.alongB&&t(R,G)),0===J.alongB&&(-1===J.alongA?t(O,B):0===J.alongA?t(O,J.pt):1===J.alongA&&t(O,z));return!1}for(var h=[];!r.isEmpty();){var d=r.getHead();if(y&&y.vert(d.pt[0]),d.isStart){let R=function(){if(x){var O=l(d,x);if(O)return O}return!!u&&l(d,u)};y&&y.segmentNew(d.seg,d.primary);var o=c(d),x=o.before?o.before.ev:null,u=o.after?o.after.ev:null;y&&y.tempStatus(d.seg,!!x&&x.seg,!!u&&u.seg);var T,w,_=R();if(_&&(m?(w=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=d.seg.myFill,y&&y.segmentUpdate(_.seg),d.other.remove(),d.remove()),r.getHead()!==d){y&&y.rewind(d.seg);continue}m?(w=null===d.seg.myFill.below||d.seg.myFill.above!==d.seg.myFill.below,d.seg.myFill.below=u?u.seg.myFill.above:s,d.seg.myFill.above=w?!d.seg.myFill.below:d.seg.myFill.below):null===d.seg.otherFill&&(d.seg.otherFill={above:T=u?d.primary===u.primary?u.seg.otherFill.above:u.seg.myFill.above:d.primary?i:s,below:T}),y&&y.status(d.seg,!!x&&x.seg,!!u&&u.seg),d.other.status=o.insert(g.node({ev:d}))}else{var M=d.status;if(null===M)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(f.exists(M.prev)&&f.exists(M.next)&&l(M.prev.ev,M.next.ev),y&&y.statusRemove(M.ev.seg),M.remove(),!d.primary){var I=d.seg.myFill;d.seg.myFill=d.seg.otherFill,d.seg.otherFill=I}h.push(d.seg)}r.getHead().remove()}return y&&y.done(),h}return m?{addRegion:function(s){for(var i,f,c,l=s[s.length-1],h=0;h<s.length;h++){var d=b.pointsCompare(i=l,l=s[h]);0!==d&&a((f=d<0?i:l,c=d<0?l:i,{id:y?y.segmentId():-1,start:f,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(s){return p(s,!1)}}:{calculate:function(s,i,f,c){return s.forEach(function(l){a(e(l.start,l.end,l),!0)}),f.forEach(function(l){a(e(l.start,l.end,l),!1)}),p(i,c)}}}},{"./linked-list":260}],260:[function(v,re,ne){re.exports={create:function(){var g={root:{root:!0,next:null},exists:function(m){return null!==m&&m!==g.root},isEmpty:function(){return null===g.root.next},getHead:function(){return g.root.next},insertBefore:function(m,b){for(var y=g.root,e=g.root.next;null!==e;){if(b(e))return m.prev=e.prev,m.next=e,e.prev.next=m,void(e.prev=m);y=e,e=e.next}y.next=m,m.prev=y,m.next=null},findTransition:function(m){for(var b=g.root,y=g.root.next;null!==y&&!m(y);)b=y,y=y.next;return{before:b===g.root?null:b,after:y,insert:function(e){return e.prev=b,e.next=y,b.next=e,null!==y&&(y.prev=e),e}}}};return g},node:function(g){return g.prev=null,g.next=null,g.remove=function(){g.prev.next=g.next,g.next&&(g.next.prev=g.prev),g.prev=null,g.next=null},g}}},{}],261:[function(v,re,ne){re.exports=function(g,m,b){var y=[],e=[];return g.forEach(function(r){var n=r.start,a=r.end;if(m.pointsSame(n,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(r);for(var t={index:0,matches_head:!1,matches_pt1:!1},p={index:0,matches_head:!1,matches_pt1:!1},s=t,i=0;i<y.length;i++){var f=(o=y[i])[0],c=o[o.length-1];if(m.pointsSame(f,n)){if(S(i,!0,!0))break}else if(m.pointsSame(f,a)){if(S(i,!0,!1))break}else if(m.pointsSame(c,n)){if(S(i,!1,!0))break}else if(m.pointsSame(c,a)&&S(i,!1,!1))break}if(s===t)return y.push([n,a]),void(b&&b.chainNew(n,a));if(s===p){b&&b.chainMatch(t.index);var l=t.index,h=t.matches_pt1?a:n,d=t.matches_head,o=y[l],x=d?o[0]:o[o.length-1],u=d?o[1]:o[o.length-2],T=d?o[o.length-1]:o[0],_=d?o[o.length-2]:o[1];return m.pointsCollinear(u,x,h)&&(d?(b&&b.chainRemoveHead(t.index,h),o.shift()):(b&&b.chainRemoveTail(t.index,h),o.pop()),x=u),m.pointsSame(T,h)?(y.splice(l,1),m.pointsCollinear(_,T,x)&&(d?(b&&b.chainRemoveTail(t.index,x),o.pop()):(b&&b.chainRemoveHead(t.index,x),o.shift())),b&&b.chainClose(t.index),void e.push(o)):void(d?(b&&b.chainAddHead(t.index,h),o.unshift(h)):(b&&b.chainAddTail(t.index,h),o.push(h)))}var w=t.index,M=p.index;b&&b.chainConnect(w,M);var I=y[w].length<y[M].length;t.matches_head?p.matches_head?I?(R(w),O(w,M)):(R(M),O(M,w)):O(M,w):p.matches_head?O(w,M):I?(R(w),O(M,w)):(R(M),O(w,M))}function S(C,D,B){return s.index=C,s.matches_head=D,s.matches_pt1=B,s===t?(s=p,!1):(s=null,!0)}function R(C){b&&b.chainReverse(C),y[C].reverse()}function O(C,D){var B=y[C],z=y[D],Y=B[B.length-1],G=B[B.length-2],J=z[0],te=z[1];m.pointsCollinear(G,Y,J)&&(b&&b.chainRemoveTail(C,Y),B.pop(),Y=G),m.pointsCollinear(Y,J,te)&&(b&&b.chainRemoveHead(D,J),z.shift()),b&&b.chainJoin(C,D),y[C]=B.concat(z),y.splice(D,1)}}),e}},{}],262:[function(v,re,ne){function g(b,y,e){var r=[];return b.forEach(function(n){var a=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);0!==y[a]&&r.push({id:e?e.segmentId():-1,start:n.start,end:n.end,myFill:{above:1===y[a],below:2===y[a]},otherFill:null})}),e&&e.selected(r),r}re.exports={union:function(b,y){return g(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],y)},intersect:function(b,y){return g(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],y)},difference:function(b,y){return g(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],y)},differenceRev:function(b,y){return g(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],y)},xor:function(b,y){return g(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],y)}}},{}],263:[function(v,re,ne){"use strict";var g=v("stream").Transform,m=v("stream-parser");function b(){g.call(this,{readableObjectMode:!0})}function y(e,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,r&&(this.code=r),n&&(this.statusCode=n)}(b.prototype=Object.create(g.prototype)).constructor=b,m(b.prototype),ne.ParserStream=b,ne.sliceEq=function(e,r,n){for(var a=r,t=0;t<n.length;)if(e[a++]!==n[t++])return!1;return!0},ne.str2arr=function(e,r){var n=[],a=0;if(r&&"hex"===r)for(;a<e.length;)n.push(parseInt(e.slice(a,a+2),16)),a+=2;else for(;a<e.length;a++)n.push(255&e.charCodeAt(a));return n},ne.readUInt16LE=function(e,r){return e[r]|e[r+1]<<8},ne.readUInt16BE=function(e,r){return e[r+1]|e[r]<<8},ne.readUInt32LE=function(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|16777216*e[r+3]},ne.readUInt32BE=function(e,r){return e[r+3]|e[r+2]<<8|e[r+1]<<16|16777216*e[r]},(y.prototype=Object.create(Error.prototype)).constructor=y,ne.ProbeError=y},{stream:286,"stream-parser":302}],264:[function(v,re,ne){"use strict";function g(y,e){var r=new Error(y);return r.code=e,r}function m(y){try{return decodeURIComponent(escape(y))}catch{return y}}function b(y,e,r){this.input=y.subarray(e,r),this.start=e;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==n&&"MM\0*"!==n)throw g("invalid TIFF signature","EBADDATA");this.big_endian="M"===n[0]}b.prototype.each=function(y){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var r=this.ifds_to_read.shift();r.offset&&this.scan_ifd(r.id,r.offset,y)}},b.prototype.read_uint16=function(y){var e=this.input;if(y+2>e.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?256*e[y]+e[y+1]:e[y]+256*e[y+1]},b.prototype.read_uint32=function(y){var e=this.input;if(y+4>e.length)throw g("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[y]+65536*e[y+1]+256*e[y+2]+e[y+3]:e[y]+256*e[y+1]+65536*e[y+2]+16777216*e[y+3]},b.prototype.is_subifd_link=function(y,e){return 0===y&&34665===e||0===y&&34853===e||34665===y&&40965===e},b.prototype.exif_format_length=function(y){switch(y){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(y,e){var r;switch(y){case 1:case 2:return this.input[e];case 6:return(r=this.input[e])|33554430*(128&r);case 3:return this.read_uint16(e);case 8:return(r=this.read_uint16(e))|131070*(32768&r);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},b.prototype.scan_ifd=function(y,e,r){var n=this.read_uint16(e);e+=2;for(var a=0;a<n;a++){var t=this.read_uint16(e),p=this.read_uint16(e+2),s=this.read_uint32(e+4),i=this.exif_format_length(p),f=s*i,c=f<=4?e+8:this.read_uint32(e+8),l=!1;if(c+f>this.input.length)throw g("unexpected EOF","EBADDATA");for(var h=[],d=c,o=0;o<s;o++,d+=i){var x=this.exif_format_read(p,d);if(null===x){h=null;break}h.push(x)}if(Array.isArray(h)&&2===p&&(h=m(String.fromCharCode.apply(null,h)))&&"\0"===h[h.length-1]&&(h=h.slice(0,-1)),this.is_subifd_link(y,t)&&Array.isArray(h)&&Number.isInteger(h[0])&&h[0]>0&&(this.ifds_to_read.push({id:t,offset:h[0]}),l=!0),!1===r({is_big_endian:this.big_endian,ifd:y,tag:t,format:p,count:s,entry_offset:e+this.start,data_length:f,data_offset:c+this.start,value:h,is_subifd_link:l}))return void(this.aborted=!0);e+=12}0===y&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},re.exports.ExifParser=b,re.exports.get_orientation=function(y){var e=0;try{return new b(y,0,y.length).each(function(r){if(0===r.ifd&&274===r.tag&&Array.isArray(r.value))return e=r.value[0],!1}),e}catch{return-1}}},{}],265:[function(v,re,ne){"use strict";var g=v("./common").readUInt16BE,m=v("./common").readUInt32BE;function b(t,p){if(t.length<4+p)return null;var s=m(t,p);return t.length<s+p||s<8?null:{boxtype:String.fromCharCode.apply(null,t.slice(p+4,p+8)),data:t.slice(p+8,p+s),end:p+s}}function y(t,p){for(var s=0;;){var i=b(t,s);if(!i)break;switch(i.boxtype){case"ispe":p.sizes.push({width:m(i.data,4),height:m(i.data,8)});break;case"irot":p.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":p.transforms.push({type:"imir",value:1&i.data[0]})}s=i.end}}function e(t,p,s){for(var i=0,f=0;f<s;f++)i=256*i+(t[p+f]||0);return i}function r(t,p){for(var s=t[4]>>4&15,i=15&t[4],f=t[5]>>4&15,c=g(t,6),l=8,h=0;h<c;h++){var d=g(t,l),o=g(t,l+=2),x=e(t,l+=2,f),u=g(t,l+=f);if(l+=2,0===o&&1===u){var T=e(t,l,s),_=e(t,l+s,i);p.item_loc[d]={length:_,offset:T+x}}l+=u*(s+i)}}function n(t,p){for(var s=g(t,4),i=6,f=0;f<s;f++){var c=b(t,i);if(!c)break;if("infe"===c.boxtype){for(var l=g(c.data,4),h="",d=8;d<c.data.length&&c.data[d];d++)h+=String.fromCharCode(c.data[d]);p.item_inf[h]=l}i=c.end}}function a(t,p){for(var s=0;;){var i=b(t,s);if(!i)break;"ipco"===i.boxtype&&y(i.data,p),s=i.end}}re.exports.unbox=b,re.exports.readSizeFromMeta=function(t){var p={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(d,o){for(var x=4;;){var u=b(d,x);if(!u)break;"iprp"===u.boxtype&&a(u.data,o),"iloc"===u.boxtype&&r(u.data,o),"iinf"===u.boxtype&&n(u.data,o),x=u.end}}(t,p),p.sizes.length){var s,i,f,c=(i=(s=p.sizes).reduce(function(d,o){return d.width>o.width||d.width===o.width&&d.height>o.height?d:o}),f=s.reduce(function(d,o){return d.height>o.height||d.height===o.height&&d.width>o.width?d:o}),i.width>f.height||i.width===f.height&&i.height>f.width?i:f),l=1;p.transforms.forEach(function(d){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},x={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===d.type&&(l=0===d.value?x[l]:o[l=o[l=x[l]]]),"irot"===d.type)for(var u=0;u<d.value;u++)l=o[l]});var h=null;return p.item_inf.Exif&&(h=p.item_loc[p.item_inf.Exif]),{width:c.width,height:c.height,orientation:p.transforms.length?l:null,variants:p.sizes,exif_location:h}}},re.exports.getMimeType=function(t){var p=String.fromCharCode.apply(null,t.slice(0,4)),s={};s[p]=!0;for(var i=8;i<t.length;i+=4)s[String.fromCharCode.apply(null,t.slice(i,i+4))]=!0;if(s.mif1||s.msf1||s.miaf)return"avif"===p||"avis"===p||"avio"===p?{type:"avif",mime:"image/avif"}:"heic"===p||"heix"===p?{type:"heic",mime:"image/heic"}:"hevc"===p||"hevx"===p?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(v,re,ne){"use strict";var g=v("../common").str2arr,m=v("../common").sliceEq,b=v("../common").readUInt32BE,y=v("../miaf_utils"),e=v("../exif_utils"),r=g("ftyp");re.exports=function(n){if(m(n,4,r)){var a=y.unbox(n,0);if(a){var t=y.getMimeType(a.data);if(t){for(var p,s=a.end;;){var i=y.unbox(n,s);if(!i)break;if(s=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){p=i.data;break}}if(p){var f=y.readSizeFromMeta(p);if(f){var c={width:f.width,height:f.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(f.variants.length>1&&(c.variants=f.variants),f.orientation&&(c.orientation=f.orientation),f.exif_location&&f.exif_location.offset+f.exif_location.length<=n.length){var l=b(n,f.exif_location.offset),h=n.slice(f.exif_location.offset+l+4,f.exif_location.offset+f.exif_location.length),d=e.get_orientation(h);d>0&&(c.orientation=d)}return c}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(v,re,ne){"use strict";var g=v("../common").str2arr,m=v("../common").sliceEq,b=v("../common").readUInt16LE,y=g("BM");re.exports=function(e){if(!(e.length<26)&&m(e,0,y))return{width:b(e,18),height:b(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(v,re,ne){"use strict";var g=v("../common").str2arr,m=v("../common").sliceEq,b=v("../common").readUInt16LE,y=g("GIF87a"),e=g("GIF89a");re.exports=function(r){if(!(r.length<10)&&(m(r,0,y)||m(r,0,e)))return{width:b(r,6),height:b(r,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(v,re,ne){"use strict";var g=v("../common").readUInt16LE;re.exports=function(m){var b=g(m,0),y=g(m,2),e=g(m,4);if(0===b&&1===y&&e){for(var r=[],n={width:0,height:0},a=0;a<e;a++){var t=m[6+16*a]||256,p=m[6+16*a+1]||256,s={width:t,height:p};r.push(s),(t>n.width||p>n.height)&&(n=s)}return{width:n.width,height:n.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(v,re,ne){"use strict";var g=v("../common").readUInt16BE,m=v("../common").str2arr,b=v("../common").sliceEq,y=v("../exif_utils"),e=m("Exif\0\0");re.exports=function(r){if(!(r.length<2)&&255===r[0]&&216===r[1]&&255===r[2])for(var n=2;;){for(;;){if(r.length-n<2)return;if(255===r[n++])break}for(var a,t,p=r[n++];255===p;)p=r[n++];if(208<=p&&p<=217||1===p)a=0;else{if(!(192<=p&&p<=254)||r.length-n<2)return;a=g(r,n)-2,n+=2}if(217===p||218===p)return;if(225===p&&a>=10&&b(r,n,e)&&(t=y.get_orientation(r.slice(n+6,n+a))),a>=5&&192<=p&&p<=207&&196!==p&&200!==p&&204!==p){if(r.length-n<a)return;var s={width:g(r,n+3),height:g(r,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return t>0&&(s.orientation=t),s}n+=a}}},{"../common":263,"../exif_utils":264}],271:[function(v,re,ne){"use strict";var g=v("../common").str2arr,m=v("../common").sliceEq,b=v("../common").readUInt32BE,y=g("\x89PNG\r\n\x1a\n"),e=g("IHDR");re.exports=function(r){if(!(r.length<24)&&m(r,0,y)&&m(r,12,e))return{width:b(r,16),height:b(r,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(v,re,ne){"use strict";var g=v("../common").str2arr,m=v("../common").sliceEq,b=v("../common").readUInt32BE,y=g("8BPS\0\x01");re.exports=function(e){if(!(e.length<22)&&m(e,0,y))return{width:b(e,18),height:b(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(v,re,ne){"use strict";function g(t){return"number"==typeof t&&isFinite(t)&&t>0}var m=/<[-_.:a-zA-Z0-9][^>]*>/,b=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,y=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,n=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function a(t){return n.test(t)?t.match(n)[0]:"px"}re.exports=function(t){if(function(T){var _,w=0,M=T.length;for(239===T[0]&&187===T[1]&&191===T[2]&&(w=3);w<M&&(32===(_=T[w])||9===_||13===_||10===_);)w++;return w!==M&&60===T[w]}(t)){for(var p="",s=0;s<t.length;s++)p+=String.fromCharCode(t[s]);var i=(p.match(m)||[""])[0];if(b.test(i)){var f=(_=(T=i).match(y),w=T.match(e),M=T.match(r),{width:_&&(_[1]||_[2]),height:w&&(w[1]||w[2]),viewbox:M&&(M[1]||M[2])}),c=parseFloat(f.width),l=parseFloat(f.height);if(f.width&&f.height)return g(c)&&g(l)?{width:c,height:l,type:"svg",mime:"image/svg+xml",wUnits:a(f.width),hUnits:a(f.height)}:void 0;var h=(f.viewbox||"").split(" "),d={width:h[2],height:h[3]},o=parseFloat(d.width),x=parseFloat(d.height);if(g(o)&&g(x)&&a(d.width)===a(d.height)){var u=o/x;return f.width?g(c)?{width:c,height:c/u,type:"svg",mime:"image/svg+xml",wUnits:a(f.width),hUnits:a(f.width)}:void 0:f.height?g(l)?{width:l*u,height:l,type:"svg",mime:"image/svg+xml",wUnits:a(f.height),hUnits:a(f.height)}:void 0:{width:o,height:x,type:"svg",mime:"image/svg+xml",wUnits:a(d.width),hUnits:a(d.height)}}}}var T,_,w,M}},{}],274:[function(v,re,ne){"use strict";var g=v("../common").str2arr,m=v("../common").sliceEq,b=v("../common").readUInt16LE,y=v("../common").readUInt16BE,e=v("../common").readUInt32LE,r=v("../common").readUInt32BE,n=g("II*\0"),a=g("MM\0*");function t(i,f,c){return c?y(i,f):b(i,f)}function p(i,f,c){return c?r(i,f):e(i,f)}function s(i,f,c){var l=t(i,f+2,c);return 1!==p(i,f+4,c)||3!==l&&4!==l?null:3===l?t(i,f+8,c):p(i,f+8,c)}re.exports=function(i){if(!(i.length<8)&&(m(i,0,n)||m(i,0,a))){var f=77===i[0],c=p(i,4,f)-8;if(!(c<0)){var l=c+8;if(!(i.length-l<2)){var h=12*t(i,l+0,f);if(!(h<=0||(l+=2,i.length-l<h))){var d,o,x,u;for(d=0;d<h;d+=12)256===(u=t(i,l+d,f))?o=s(i,l+d,f):257===u&&(x=s(i,l+d,f));return o&&x?{width:o,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":263}],275:[function(v,re,ne){"use strict";var g=v("../common").str2arr,m=v("../common").sliceEq,b=v("../common").readUInt16LE,y=v("../common").readUInt32LE,e=v("../exif_utils"),r=g("RIFF"),n=g("WEBP");function a(s,i){if(157===s[i+3]&&1===s[i+4]&&42===s[i+5])return{width:16383&b(s,i+6),height:16383&b(s,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(s,i){if(47===s[i]){var f=y(s,i+1);return{width:1+(16383&f),height:1+(f>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function p(s,i){return{width:1+(s[i+6]<<16|s[i+5]<<8|s[i+4]),height:1+(s[i+9]<<i|s[i+8]<<8|s[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}re.exports=function(s){if(!(s.length<16)&&(m(s,0,r)||m(s,8,n))){var i=12,f=null,c=0,l=y(s,4)+8;if(!(l>s.length)){for(;i+8<l;)if(0!==s[i]){var h=String.fromCharCode.apply(null,s.slice(i,i+4)),d=y(s,i+4);"VP8 "===h&&d>=10?f=f||a(s,i+8):"VP8L"===h&&d>=9?f=f||t(s,i+8):"VP8X"===h&&d>=10?f=f||p(s,i+8):"EXIF"===h&&(c=e.get_orientation(s.slice(i+8,i+8+d)),i=1/0),i+=8+d}else i++;if(f)return c>0&&(f.orientation=c),f}}}},{"../common":263,"../exif_utils":264}],276:[function(v,re,ne){"use strict";re.exports={avif:v("./parse_sync/avif"),bmp:v("./parse_sync/bmp"),gif:v("./parse_sync/gif"),ico:v("./parse_sync/ico"),jpeg:v("./parse_sync/jpeg"),png:v("./parse_sync/png"),psd:v("./parse_sync/psd"),svg:v("./parse_sync/svg"),tiff:v("./parse_sync/tiff"),webp:v("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(v,re,ne){"use strict";var g=v("./lib/parsers_sync");re.exports=function(m){return function(b){for(var y=Object.keys(g),e=0;e<y.length;e++){var r=g[y[e]](b);if(r)return r}return null}(m)},re.exports.parsers=g},{"./lib/parsers_sync":276}],278:[function(v,re,ne){var g,m,b=re.exports={};function y(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(l){if(g===setTimeout)return setTimeout(l,0);if((g===y||!g)&&setTimeout)return g=setTimeout,setTimeout(l,0);try{return g(l,0)}catch{try{return g.call(null,l,0)}catch{return g.call(this,l,0)}}}!function(){try{g="function"==typeof setTimeout?setTimeout:y}catch{g=y}try{m="function"==typeof clearTimeout?clearTimeout:e}catch{m=e}}();var n,a=[],t=!1,p=-1;function s(){t&&n&&(t=!1,n.length?a=n.concat(a):p=-1,a.length&&i())}function i(){if(!t){var l=r(s);t=!0;for(var h=a.length;h;){for(n=a,a=[];++p<h;)n&&n[p].run();p=-1,h=a.length}n=null,t=!1,function(d){if(m===clearTimeout)return clearTimeout(d);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(d);try{m(d)}catch{try{return m.call(null,d)}catch{return m.call(this,d)}}}(l)}}function f(l,h){this.fun=l,this.array=h}function c(){}b.nextTick=function(l){var h=new Array(arguments.length-1);if(arguments.length>1)for(var d=1;d<arguments.length;d++)h[d-1]=arguments[d];a.push(new f(l,h)),1!==a.length||t||r(i)},f.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=c,b.addListener=c,b.once=c,b.off=c,b.removeListener=c,b.removeAllListeners=c,b.emit=c,b.prependListener=c,b.prependOnceListener=c,b.listeners=function(l){return[]},b.binding=function(l){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(l){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],279:[function(v,re,ne){(function(g){(function(){for(var m=v("performance-now"),b=typeof window>"u"?g:window,y=["moz","webkit"],e="AnimationFrame",r=b["request"+e],n=b["cancel"+e]||b["cancelRequest"+e],a=0;!r&&a<y.length;a++)r=b[y[a]+"Request"+e],n=b[y[a]+"Cancel"+e]||b[y[a]+"CancelRequest"+e];if(!r||!n){var t=0,p=0,s=[];r=function(i){if(0===s.length){var f=m(),c=Math.max(0,1e3/60-(f-t));t=c+f,setTimeout(function(){var l=s.slice(0);s.length=0;for(var h=0;h<l.length;h++)if(!l[h].cancelled)try{l[h].callback(t)}catch(d){setTimeout(function(){throw d},0)}},Math.round(c))}return s.push({handle:++p,callback:i,cancelled:!1}),p},n=function(i){for(var f=0;f<s.length;f++)s[f].handle===i&&(s[f].cancelled=!0)}}re.exports=function(i){return r.call(b,i)},re.exports.cancel=function(){n.apply(b,arguments)},re.exports.polyfill=function(i){i||(i=b),i.requestAnimationFrame=r,i.cancelAnimationFrame=n}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(v,re,ne){"use strict";var g=v("array-bounds"),m=v("color-normalize"),b=v("update-diff"),y=v("pick-by-alias"),e=v("object-assign"),r=v("flatten-vertex-data"),n=v("to-float32"),a=n.float32,t=n.fract32;re.exports=function(s,i){if("function"==typeof s?(i||(i={}),i.regl=s):i=s,i.length&&(i.positions=i),!(s=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var f,c,l,h,d,o,x=s._gl,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},T=[];return h=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),l=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),o=s.buffer({usage:"static",type:"float",data:p}),I(i),f=s({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(R,O){return[O.viewport.x,O.viewport.y,R.viewportWidth,R.viewportHeight]}},attributes:{color:{buffer:h,offset:function(R,O){return 4*O.offset},divisor:1},position:{buffer:c,offset:function(R,O){return 8*O.offset},divisor:1},positionFract:{buffer:l,offset:function(R,O){return 8*O.offset},divisor:1},error:{buffer:d,offset:function(R,O){return 16*O.offset},divisor:1},direction:{buffer:o,stride:24,offset:0},lineOffset:{buffer:o,stride:24,offset:8},capOffset:{buffer:o,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:p.length}),e(_,{update:I,draw:w,destroy:S,regl:s,gl:x,canvas:x.canvas,groups:T}),_;function _(R){R?I(R):null===R&&S(),w()}function w(R){if("number"==typeof R)return M(R);R&&!Array.isArray(R)&&(R=[R]),s._refresh(),T.forEach(function(O,C){O&&(R&&(O.draw=!!R[C]),O.draw?M(C):O.draw=!0)})}function M(R){"number"==typeof R&&(R=T[R]),null!=R&&R&&R.count&&R.color&&R.opacity&&R.positions&&R.positions.length>1&&(R.scaleRatio=[R.scale[0]*R.viewport.width,R.scale[1]*R.viewport.height],f(R),R.after&&R.after(R))}function I(R){if(R){null!=R.length?"number"==typeof R[0]&&(R=[{positions:R}]):Array.isArray(R)||(R=[R]);var O=0,C=0;if(_.groups=T=R.map(function(te,X){var K=T[X];return te&&("function"==typeof te?te={after:te}:"number"==typeof te[0]&&(te={positions:te}),te=y(te,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),K||(T[X]=K={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},te=e({},u,te)),b(K,te,[{lineWidth:function(ae){return.5*+ae},capSize:function(ae){return.5*+ae},opacity:parseFloat,errors:function(ae){return ae=r(ae),C+=ae.length,ae},positions:function(ae,U){return ae=r(ae,"float64"),U.count=Math.floor(ae.length/2),U.bounds=g(ae,2),U.offset=O,O+=U.count,ae}},{color:function(ae,U){var V=U.count;if(ae||(ae="transparent"),!Array.isArray(ae)||"number"==typeof ae[0]){var q=ae;ae=Array(V);for(var ie=0;ie<V;ie++)ae[ie]=q}if(ae.length<V)throw Error("Not enough colors");for(var H=new Uint8Array(4*V),ee=0;ee<V;ee++){var Q=m(ae[ee],"uint8");H.set(Q,4*ee)}return H},range:function(ae,U,V){return ae||(ae=U.bounds),U.scale=[1/(ae[2]-ae[0]),1/(ae[3]-ae[1])],U.translate=[-ae[0],-ae[1]],U.scaleFract=t(U.scale),U.translateFract=t(U.translate),ae},viewport:function(ae){var U;return Array.isArray(ae)?U={x:ae[0],y:ae[1],width:ae[2]-ae[0],height:ae[3]-ae[1]}:ae?((U={x:ae.x||ae.left||0,y:ae.y||ae.top||0}).width=ae.right?ae.right-U.x:ae.w||ae.width||0,U.height=ae.bottom?ae.bottom-U.y:ae.h||ae.height||0):U={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight},U}}])),K}),O||C){var D=T.reduce(function(te,X,K){return te+(X?X.count:0)},0),B=new Float64Array(2*D),z=new Uint8Array(4*D),Y=new Float32Array(4*D);T.forEach(function(te,X){if(te){var K=te.positions,U=te.offset,q=te.errors;te.count&&(z.set(te.color,4*U),Y.set(q,4*U),B.set(K,2*U))}});var G=a(B);c(G);var J=t(B,G);l(J),h(z),d(Y)}}}function S(){c.destroy(),l.destroy(),h.destroy(),d.destroy(),o.destroy()}};var p=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(v,re,ne){"use strict";var g=v("color-normalize"),m=v("array-bounds"),b=v("object-assign"),y=v("glslify"),e=v("pick-by-alias"),r=v("flatten-vertex-data"),n=v("earcut"),a=v("array-normalize"),t=v("to-float32"),p=t.float32,s=t.fract32,i=v("es6-weak-map"),f=v("parse-rect"),c=v("array-find-index");function l(h,d){if(!(this instanceof l))return new l(h,d);if("function"==typeof h?(d||(d={}),d.regl=h):d=h,d.length&&(d.positions=d),!(h=d.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=l.shaders.has(h)?l.shaders.get(h):l.shaders.set(h,l.createShaders(h)).get(h),this.update(d)}re.exports=l,l.dashMult=2,l.maxPatternLength=256,l.precisionThreshold=3e6,l.maxPoints=1e4,l.maxLines=2048,l.shaders=new i,l.createShaders=function(h){var d,o=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(T,_){return"round"===_.join?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(T,_){return[_.viewport.x,_.viewport.y,T.viewportWidth,T.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(T,_){return!_.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},u=h(b({vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},x));try{d=h(b({cull:{enable:!0,face:"back"},vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},x))}catch{d=u}return{fill:h({primitive:"triangle",elements:function(T,_){return _.triangles},offset:0,vert:y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(T,_){return[_.viewport.x,_.viewport.y,T.viewportWidth,T.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport}),rect:u,miter:d}},l.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},l.prototype.render=function(){for(var h,d=[],o=arguments.length;o--;)d[o]=arguments[o];d.length&&(h=this).update.apply(h,d),this.draw()},l.prototype.draw=function(){for(var h=this,d=[],o=arguments.length;o--;)d[o]=arguments[o];return(d.length?d:this.passes).forEach(function(x,u){var T;if(x&&Array.isArray(x))return(T=h).draw.apply(T,x);"number"==typeof x&&(x=h.passes[x]),x&&x.count>1&&x.opacity&&(h.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&h.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>l.precisionThreshold||x.scale[1]*x.viewport.height>l.precisionThreshold||"rect"===x.join||!x.join&&(x.thickness<=2||x.count>=l.maxPoints)?h.shaders.rect(x):h.shaders.miter(x)))}),this},l.prototype.update=function(h){var d=this;if(h){null!=h.length?"number"==typeof h[0]&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var o=this.regl,x=this.gl;if(h.forEach(function(M,I){var S=d.passes[I];if(void 0!==M)if(null!==M){if("number"==typeof M[0]&&(M={positions:M}),M=e(M,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(d.passes[I]=S={id:I,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:o.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},M=b({},l.defaults,M)),null!=M.thickness&&(S.thickness=parseFloat(M.thickness)),null!=M.opacity&&(S.opacity=parseFloat(M.opacity)),null!=M.miterLimit&&(S.miterLimit=parseFloat(M.miterLimit)),null!=M.overlay&&(S.overlay=!!M.overlay,I<l.maxLines&&(S.depth=2*(l.maxLines-1-I%l.maxLines)/l.maxLines-1)),null!=M.join&&(S.join=M.join),null!=M.hole&&(S.hole=M.hole),null!=M.fill&&(S.fill=M.fill?g(M.fill,"uint8"):null),null!=M.viewport&&(S.viewport=f(M.viewport)),S.viewport||(S.viewport=f([x.drawingBufferWidth,x.drawingBufferHeight])),null!=M.close&&(S.close=M.close),null===M.positions&&(M.positions=[]),M.positions){var R,O;if(M.positions.x&&M.positions.y){var C=M.positions.x,D=M.positions.y;O=S.count=Math.max(C.length,D.length),R=new Float64Array(2*O);for(var B=0;B<O;B++)R[2*B]=C[B],R[2*B+1]=D[B]}else R=r(M.positions,"float64"),O=S.count=Math.floor(R.length/2);var z=S.bounds=m(R,2);if(S.fill){for(var Y=[],G={},J=0,te=0,X=0,K=S.count;te<K;te++){var ae=R[2*te],U=R[2*te+1];isNaN(ae)||isNaN(U)||null==ae||null==U?(ae=R[2*J],U=R[2*J+1],G[te]=J):J=te,Y[X++]=ae,Y[X++]=U}if(M.splitNull){S.count-1 in G||(G[S.count]=S.count-1);var V=Object.keys(G).map(Number).sort(function(St,Xt){return St-Xt}),q=[],ie=0,H=null!=S.hole?S.hole[0]:null;if(null!=H){var ee=c(V,function(St){return St>=H});(V=V.slice(0,ee)).push(H)}for(var Q=function(St){var Xt=Y.slice(2*ie,2*V[St]).concat(H?Y.slice(2*H):[]),tn=(S.hole||[]).map(function(cn){return cn-H+(V[St]-ie)}),hn=n(Xt,tn);hn=hn.map(function(cn){return cn+ie+(cn+ie<V[St]?0:H-V[St])}),q.push.apply(q,hn),ie=V[St]+1},oe=0;oe<V.length;oe++)Q(oe);for(var le=0,de=q.length;le<de;le++)null!=G[q[le]]&&(q[le]=G[q[le]]);S.triangles=q}else{for(var fe=n(Y,S.hole||[]),be=0,he=fe.length;be<he;be++)null!=G[fe[be]]&&(fe[be]=G[fe[be]]);S.triangles=fe}}var _e=new Float64Array(R);a(_e,2,z);var Ce=new Float64Array(2*O+6);S.close?R[0]===R[2*O-2]&&R[1]===R[2*O-1]?(Ce[0]=_e[2*O-4],Ce[1]=_e[2*O-3]):(Ce[0]=_e[2*O-2],Ce[1]=_e[2*O-1]):(Ce[0]=_e[0],Ce[1]=_e[1]),Ce.set(_e,2),S.close?R[0]===R[2*O-2]&&R[1]===R[2*O-1]?(Ce[2*O+2]=_e[2],Ce[2*O+3]=_e[3],S.count-=1):(Ce[2*O+2]=_e[0],Ce[2*O+3]=_e[1],Ce[2*O+4]=_e[2],Ce[2*O+5]=_e[3]):(Ce[2*O+2]=_e[2*O-2],Ce[2*O+3]=_e[2*O-1],Ce[2*O+4]=_e[2*O-2],Ce[2*O+5]=_e[2*O-1]);var Ee=p(Ce);S.positionBuffer(Ee);var Ae=s(Ce,Ee);S.positionFractBuffer(Ae)}if(M.range?S.range=M.range:S.range||(S.range=S.bounds),(M.range||M.positions)&&S.count){var ze=S.bounds,Ie=S.range[2]-S.range[0],De=S.range[3]-S.range[1];S.scale=[(ze[2]-ze[0])/Ie,(ze[3]-ze[1])/De],S.translate=[-S.range[0]/Ie+ze[0]/Ie||0,-S.range[1]/De+ze[1]/De||0],S.scaleFract=s(S.scale),S.translateFract=s(S.translate)}if(M.dashes){var Fe,Ue=0;if(!M.dashes||M.dashes.length<2)Ue=1,Fe=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ue=0;for(var qe=0;qe<M.dashes.length;++qe)Ue+=M.dashes[qe];Fe=new Uint8Array(Ue*l.dashMult);for(var je=0,rt=255,Ne=0;Ne<2;Ne++)for(var Be=0;Be<M.dashes.length;++Be){for(var We=0,Ye=M.dashes[Be]*l.dashMult*.5;We<Ye;++We)Fe[je++]=rt;rt^=255}}S.dashLength=Ue,S.dashTexture({channels:1,data:Fe,width:Fe.length,height:1,mag:"linear",min:"linear"},0,0)}if(M.color){var lt=S.count,mt=M.color;mt||(mt="transparent");var Tt=new Uint8Array(4*lt+4);if(Array.isArray(mt)&&"number"!=typeof mt[0]){for(var It=0;It<lt;It++){var Ct=g(mt[It],"uint8");Tt.set(Ct,4*It)}Tt.set(g(mt[0],"uint8"),4*lt)}else for(var ct=g(mt,"uint8"),at=0;at<lt+1;at++)Tt.set(ct,4*at);S.colorBuffer({usage:"dynamic",type:"uint8",data:Tt})}}else d.passes[I]=null}),h.length<this.passes.length){for(var u=h.length;u<this.passes.length;u++){var T=this.passes[u];T&&(T.colorBuffer.destroy(),T.positionBuffer.destroy(),T.dashTexture.destroy())}this.passes.length=h.length}for(var _=[],w=0;w<this.passes.length;w++)null!==this.passes[w]&&_.push(this.passes[w]);return this.passes=_,this}},l.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(v,re,ne){"use strict";function g(u,T){return function(_){if(Array.isArray(_))return _}(u)||function(_,w){var M=null==_?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(null!=M){var I,S,R=[],O=!0,C=!1;try{for(M=M.call(_);!(O=(I=M.next()).done)&&(R.push(I.value),!w||R.length!==w);O=!0);}catch(D){C=!0,S=D}finally{try{O||null==M.return||M.return()}finally{if(C)throw S}}return R}}(u,T)||b(u,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(u){return function(T){if(Array.isArray(T))return y(T)}(u)||function(T){if(typeof Symbol<"u"&&null!=T[Symbol.iterator]||null!=T["@@iterator"])return Array.from(T)}(u)||b(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(u,T){if(u){if("string"==typeof u)return y(u,T);var _=Object.prototype.toString.call(u).slice(8,-1);return"Object"===_&&u.constructor&&(_=u.constructor.name),"Map"===_||"Set"===_?Array.from(u):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?y(u,T):void 0}}function y(u,T){(null==T||T>u.length)&&(T=u.length);for(var _=0,w=new Array(T);_<T;_++)w[_]=u[_];return w}var e=v("color-normalize"),r=v("array-bounds"),n=v("color-id"),a=v("@plotly/point-cluster"),t=v("object-assign"),p=v("glslify"),s=v("pick-by-alias"),i=v("update-diff"),f=v("flatten-vertex-data"),c=v("is-iexplorer"),l=v("to-float32"),h=v("parse-rect"),d=o;function o(u,T){var _=this;if(!(this instanceof o))return new o(u,T);"function"==typeof u?(T||(T={}),T.regl=u):(T=u,u=null),T&&T.length&&(T.positions=T);var w,M=(u=T.regl)._gl,I=[];this.tooManyColors=c,w=u.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),t(this,{regl:u,gl:M,groups:[],markerCache:[null],markerTextures:[null],palette:I,paletteIds:{},paletteTexture:w,maxColors:255,maxSize:100,canvas:M.canvas}),this.update(T);var S={uniforms:{constPointSize:!!T.constPointSize,opacity:u.prop("opacity"),paletteSize:function(C,D){return[_.tooManyColors?0:255,w.height]},pixelRatio:u.context("pixelRatio"),scale:u.prop("scale"),scaleFract:u.prop("scaleFract"),translate:u.prop("translate"),translateFract:u.prop("translateFract"),markerTexture:u.prop("markerTexture"),paletteTexture:w},attributes:{x:function(C,D){return D.xAttr||{buffer:D.positionBuffer,stride:8,offset:0}},y:function(C,D){return D.yAttr||{buffer:D.positionBuffer,stride:8,offset:4}},xFract:function(C,D){return D.xAttr?{constant:[0,0]}:{buffer:D.positionFractBuffer,stride:8,offset:0}},yFract:function(C,D){return D.yAttr?{constant:[0,0]}:{buffer:D.positionFractBuffer,stride:8,offset:4}},size:function(C,D){return D.size.length?{buffer:D.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*D.size/_.maxSize)]}},borderSize:function(C,D){return D.borderSize.length?{buffer:D.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*D.borderSize/_.maxSize)]}},colorId:function(C,D){return D.color.length?{buffer:D.colorBuffer,stride:_.tooManyColors?8:4,offset:0}:{constant:_.tooManyColors?I.slice(4*D.color,4*D.color+4):[D.color]}},borderColorId:function(C,D){return D.borderColor.length?{buffer:D.colorBuffer,stride:_.tooManyColors?8:4,offset:_.tooManyColors?4:2}:{constant:_.tooManyColors?I.slice(4*D.borderColor,4*D.borderColor+4):[D.borderColor]}},isActive:function(C,D){return!0===D.activation?{constant:[1]}:D.activation?D.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:u.prop("viewport")},viewport:u.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:u.prop("elements"),count:u.prop("count"),offset:u.prop("offset"),primitive:"points"},R=t({},S);R.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),R.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=u(R);var O=t({},S);O.frag=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),O.vert=p(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),c&&(O.frag=O.frag.replace("smoothstep","smoothStep"),R.frag=R.frag.replace("smoothstep","smoothStep")),this.drawCircle=u(O)}o.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},o.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},o.prototype.draw=function(){for(var u=this,T=arguments.length,_=new Array(T),w=0;w<T;w++)_[w]=arguments[w];var M=this.groups;if(1===_.length&&Array.isArray(_[0])&&(null===_[0][0]||Array.isArray(_[0][0]))&&(_=_[0]),this.regl._refresh(),_.length)for(var I=0;I<_.length;I++)this.drawItem(I,_[I]);else M.forEach(function(S,R){u.drawItem(R)});return this},o.prototype.drawItem=function(u,T){var _=this.groups,w=_[u];if("number"==typeof T&&(u=T,w=_[T],T=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,T));for(var M=[],I=1;I<w.activation.length;I++)w.activation[I]&&(!0===w.activation[I]||w.activation[I].data.length)&&M.push.apply(M,m(this.getMarkerDrawOptions(I,w,T)));M.length&&this.drawMarker(M)}},o.prototype.getMarkerDrawOptions=function(u,T,_){var w=T.range,M=T.tree,I=T.viewport,S=T.activation,R=T.selectionBuffer,O=T.count;if(!M)return _?[t({},T,{markerTexture:this.markerTextures[u],activation:S[u],count:_.length,elements:_,offset:0})]:[t({},T,{markerTexture:this.markerTextures[u],activation:S[u],offset:0})];var C=[],D=M.range(w,{lod:!0,px:[(w[2]-w[0])/I.width,(w[3]-w[1])/I.height]});if(_){for(var B=S[u].data,z=new Uint8Array(O),Y=0;Y<_.length;Y++){var G=_[Y];z[G]=B?B[G]:1}R.subdata(z)}for(var J=D.length;J--;){var te=g(D[J],2),X=te[0];C.push(t({},T,{markerTexture:this.markerTextures[u],activation:_?R:S[u],offset:X,count:te[1]-X}))}return C},o.prototype.update=function(){for(var u=this,T=arguments.length,_=new Array(T),w=0;w<T;w++)_[w]=arguments[w];if(_.length){1===_.length&&Array.isArray(_[0])&&(_=_[0]);var M=this.groups,I=this.gl,S=this.regl,R=this.maxSize,O=this.maxColors,C=this.palette;this.groups=M=_.map(function(D,B){var z=M[B];if(void 0===D)return z;null===D?D={positions:null}:"function"==typeof D?D={ondraw:D}:"number"==typeof D[0]&&(D={positions:D}),null===(D=s(D,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(D.positions=[]),null!=D.tooManyColors&&(u.tooManyColors=D.tooManyColors),z||(M[B]=z={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},D=t({},o.defaults,D)),D.positions&&!("marker"in D)&&(D.marker=z.marker,delete z.marker),D.marker&&!("positions"in D)&&(D.positions=z.positions,delete z.positions);var Y=0,G=0;if(i(z,D,[{snap:!0,size:function(he,_e){return null==he&&(he=o.defaults.size),Y+=he&&he.length?1:0,he},borderSize:function(he,_e){return null==he&&(he=o.defaults.borderSize),Y+=he&&he.length?1:0,he},opacity:parseFloat,color:function(he,_e){return null==he&&(he=o.defaults.color),he=u.updateColor(he),G++,he},borderColor:function(he,_e){return null==he&&(he=o.defaults.borderColor),he=u.updateColor(he),G++,he},bounds:function(he,_e,Ce){return"range"in Ce||(Ce.range=null),he},positions:function(he,_e,Ce){var Ee=_e.snap,Ae=_e.positionBuffer,ze=_e.positionFractBuffer,ve=_e.selectionBuffer;if(he.x||he.y)return _e.xAttr=he.x.length?{buffer:S.buffer(he.x),offset:0,stride:4,count:he.x.length}:{buffer:he.x.buffer,offset:4*he.x.offset||0,stride:4*(he.x.stride||1),count:he.x.count},_e.yAttr=he.y.length?{buffer:S.buffer(he.y),offset:0,stride:4,count:he.y.length}:{buffer:he.y.buffer,offset:4*he.y.offset||0,stride:4*(he.y.stride||1),count:he.y.count},_e.count=Math.max(_e.xAttr.count,_e.yAttr.count),he;he=f(he,"float64");var Te=_e.count=Math.floor(he.length/2),Ie=_e.bounds=Te?r(he,2):null;if(Ce.range||_e.range||(delete _e.range,Ce.range=Ie),Ce.marker||_e.marker||(delete _e.marker,Ce.marker=null),Ee&&(!0===Ee||Te>Ee)?_e.tree=a(he,{bounds:Ie}):Ee&&Ee.length&&(_e.tree=Ee),_e.tree){var De={primitive:"points",usage:"static",data:_e.tree,type:"uint32"};_e.elements?_e.elements(De):_e.elements=S.elements(De)}var Fe=l.float32(he);return Ae({data:Fe,usage:"dynamic"}),ze({data:l.fract32(he,Fe),usage:"dynamic"}),ve({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),he}},{marker:function(he,_e,Ce){var Ee=_e.activation;if(Ee.forEach(function(Fe){return Fe&&Fe.destroy&&Fe.destroy()}),Ee.length=0,he&&"number"!=typeof he[0]){for(var Ae=[],ze=0,ve=Math.min(he.length,_e.count);ze<ve;ze++){var Te=u.addMarker(he[ze]);Ae[Te]||(Ae[Te]=new Uint8Array(_e.count)),Ae[Te][ze]=1}for(var Ie=0;Ie<Ae.length;Ie++)if(Ae[Ie]){var De={data:Ae[Ie],type:"uint8",usage:"static"};Ee[Ie]?Ee[Ie](De):Ee[Ie]=S.buffer(De),Ee[Ie].data=Ae[Ie]}}else Ee[u.addMarker(he)]=!0;return he},range:function(he,_e,Ce){var Ee=_e.bounds;if(Ee)return he||(he=Ee),_e.scale=[1/(he[2]-he[0]),1/(he[3]-he[1])],_e.translate=[-he[0],-he[1]],_e.scaleFract=l.fract(_e.scale),_e.translateFract=l.fract(_e.translate),he},viewport:function(he){return h(he||[I.drawingBufferWidth,I.drawingBufferHeight])}}]),Y){var te=z.count,X=z.size,K=z.borderSize,ae=z.sizeBuffer,U=new Uint8Array(2*te);if(X.length||K.length)for(var V=0;V<te;V++)U[2*V]=Math.round(255*(X[V]??X)/R),U[2*V+1]=Math.round(255*(K[V]??K)/R);ae({data:U,usage:"dynamic"})}if(G){var q,H=z.count,ee=z.color,Q=z.borderColor,oe=z.colorBuffer;if(u.tooManyColors){if(ee.length||Q.length){q=new Uint8Array(8*H);for(var le=0;le<H;le++){var de=ee[le];q[8*le]=C[4*de],q[8*le+1]=C[4*de+1],q[8*le+2]=C[4*de+2],q[8*le+3]=C[4*de+3];var fe=Q[le];q[8*le+4]=C[4*fe],q[8*le+5]=C[4*fe+1],q[8*le+6]=C[4*fe+2],q[8*le+7]=C[4*fe+3]}}}else if(ee.length||Q.length){q=new Uint8Array(4*H+2);for(var be=0;be<H;be++)null!=ee[be]&&(q[4*be]=ee[be]%O,q[4*be+1]=Math.floor(ee[be]/O)),null!=Q[be]&&(q[4*be+2]=Q[be]%O,q[4*be+3]=Math.floor(Q[be]/O))}oe({data:q||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},o.prototype.addMarker=function(u){var T,_=this.markerTextures,w=this.regl,M=this.markerCache,I=null==u?0:M.indexOf(u);if(I>=0)return I;if(u instanceof Uint8Array||u instanceof Uint8ClampedArray)T=u;else{T=new Uint8Array(u.length);for(var S=0,R=u.length;S<R;S++)T[S]=255*u[S]}var O=Math.floor(Math.sqrt(T.length));return I=_.length,M.push(u),_.push(w.texture({channels:1,data:T,radius:O,mag:"linear",min:"linear"})),I},o.prototype.updateColor=function(u){var T=this.paletteIds,_=this.palette,w=this.maxColors;Array.isArray(u)||(u=[u]);var M=[];if("number"==typeof u[0]){var I=[];if(Array.isArray(u))for(var S=0;S<u.length;S+=4)I.push(u.slice(S,S+4));else for(var R=0;R<u.length;R+=4)I.push(u.subarray(R,R+4));u=I}for(var O=0;O<u.length;O++){var C=u[O];C=e(C,"uint8");var D=n(C,!1);if(null==T[D]){var B=_.length;T[D]=Math.floor(B/4),_[B]=C[0],_[B+1]=C[1],_[B+2]=C[2],_[B+3]=C[3]}M[O]=T[D]}return!this.tooManyColors&&_.length>4*w&&(this.tooManyColors=!0),this.updatePalette(_),1===M.length?M[0]:M},o.prototype.updatePalette=function(u){if(!this.tooManyColors){var T=this.maxColors,_=this.paletteTexture,w=Math.ceil(.25*u.length/T);if(w>1)for(var M=.25*(u=u.slice()).length%T;M<w*T;M++)u.push(0,0,0,0);_.height<w&&_.resize(T,w),_.subimage({width:Math.min(.25*u.length,T),height:w,data:u},0,0)}},o.prototype.destroy=function(){return this.groups.forEach(function(u){u.sizeBuffer.destroy(),u.positionBuffer.destroy(),u.positionFractBuffer.destroy(),u.colorBuffer.destroy(),u.activation.forEach(function(T){return T&&T.destroy&&T.destroy()}),u.selectionBuffer.destroy(),u.elements&&u.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(u){return u&&u.destroy&&u.destroy()}),this};var x=v("object-assign");re.exports=function(u,T){var _=new d(u,T),w=_.render.bind(_);return x(w,{render:w,update:_.update.bind(_),draw:_.draw.bind(_),destroy:_.destroy.bind(_),regl:_.regl,gl:_.gl,canvas:_.gl.canvas,groups:_.groups,markers:_.markerCache,palette:_.palette}),w}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(v,re,ne){"use strict";var g=v("regl-scatter2d"),m=v("pick-by-alias"),b=v("array-bounds"),y=v("raf"),e=v("array-range"),r=v("parse-rect"),n=v("flatten-vertex-data");function a(i,f){if(!(this instanceof a))return new a(i,f);this.traces=[],this.passes={},this.regl=i,this.scatter=g(i),this.canvas=this.scatter.canvas}function t(i,f,c){return(null!=i.id?i.id:i)<<16|(255&f)<<8|255&c}function p(i,f,c){var l,h,d,o,x=i[f],u=i[c];return x.length>2?(l=x[1],h=x[3]):x.length?(l=x[0],h=x[1]):(l=x.y,h=x.y+x.height),u.length>2?(d=u[0],o=u[2]):u.length?(d=u[0],o=u[1]):(d=u.x,o=u.x+u.width),[d,l,o,h]}function s(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var f=r(i);return[f.x,f.y,f.x+f.width,f.y+f.height]}re.exports=a,a.prototype.render=function(){for(var i,f=this,c=[],l=arguments.length;l--;)c[l]=arguments[l];return c.length&&(i=this).update.apply(i,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=y(function(){f.draw(),f.dirty=!0,f.planned=null})):(this.draw(),this.dirty=!0,y(function(){f.dirty=!1})),this)},a.prototype.update=function(){for(var i,f=[],c=arguments.length;c--;)f[c]=arguments[c];if(f.length){for(var l=0;l<f.length;l++)this.updateItem(l,f[l]);this.traces=this.traces.filter(Boolean);for(var h=[],d=0,o=0;o<this.traces.length;o++){for(var x=this.traces[o],u=this.traces[o].passes,T=0;T<u.length;T++)h.push(this.passes[u[T]]);x.passOffset=d,d+=x.passes.length}return(i=this.scatter).update.apply(i,h),this}},a.prototype.updateItem=function(i,f){var c=this.regl;if(null===f)return this.traces[i]=null,this;if(!f)return this;var l,h=m(f,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),d=this.traces[i]||(this.traces[i]={id:i,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:r([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=h.color&&(d.color=h.color),null!=h.size&&(d.size=h.size),null!=h.marker&&(d.marker=h.marker),null!=h.borderColor&&(d.borderColor=h.borderColor),null!=h.borderSize&&(d.borderSize=h.borderSize),null!=h.opacity&&(d.opacity=h.opacity),h.viewport&&(d.viewport=r(h.viewport)),null!=h.diagonal&&(d.diagonal=h.diagonal),null!=h.upper&&(d.upper=h.upper),null!=h.lower&&(d.lower=h.lower),h.data){d.buffer(n(h.data)),d.columns=h.data.length,d.count=h.data[0].length,d.bounds=[];for(var o=0;o<d.columns;o++)d.bounds[o]=b(h.data[o],1)}h.range&&(d.range=h.range,l=d.range&&"number"!=typeof d.range[0]),h.domain&&(d.domain=h.domain);var x=!1;null!=h.padding&&(Array.isArray(h.padding)&&h.padding.length===d.columns&&"number"==typeof h.padding[h.padding.length-1]?(d.padding=h.padding.map(s),x=!0):d.padding=s(h.padding));var u=d.columns,T=d.count,_=d.viewport.width,w=d.viewport.height,M=d.viewport.x,I=d.viewport.y,S=_/u,R=w/u;d.passes=[];for(var O=0;O<u;O++)for(var C=0;C<u;C++)if((d.diagonal||C!==O)&&(d.upper||!(O>C))&&(d.lower||!(O<C))){var D=t(d.id,O,C),B=this.passes[D]||(this.passes[D]={});if(h.data&&(B.positions=h.transpose?{x:{buffer:d.buffer,offset:C,count:T,stride:u},y:{buffer:d.buffer,offset:O,count:T,stride:u}}:{x:{buffer:d.buffer,offset:C*T,count:T},y:{buffer:d.buffer,offset:O*T,count:T}},B.bounds=p(d.bounds,O,C)),h.domain||h.viewport||h.data){var z=x?p(d.padding,O,C):d.padding;if(d.domain){var Y=p(d.domain,O,C);B.viewport=[M+Y[0]*_+z[0],I+Y[1]*w+z[1],M+Y[2]*_-z[2],I+Y[3]*w-z[3]]}else B.viewport=[M+C*S+S*z[0],I+O*R+R*z[1],M+(C+1)*S-S*z[2],I+(O+1)*R-R*z[3]]}h.color&&(B.color=d.color),h.size&&(B.size=d.size),h.marker&&(B.marker=d.marker),h.borderSize&&(B.borderSize=d.borderSize),h.borderColor&&(B.borderColor=d.borderColor),h.opacity&&(B.opacity=d.opacity),h.range&&(B.range=l?p(d.range,O,C):d.range||B.bounds),d.passes.push(D)}return this},a.prototype.draw=function(){for(var i,f=[],c=arguments.length;c--;)f[c]=arguments[c];if(f.length){for(var l=[],h=0;h<f.length;h++)if("number"==typeof f[h]){var d=this.traces[f[h]],x=d.passOffset;l.push.apply(l,e(x,x+d.passes.length))}else if(f[h].length){var u=f[h],T=this.traces[h],_=T.passes,w=T.passOffset;_=_.map(function(M,I){l[w+I]=u})}(i=this.scatter).draw.apply(i,l)}else this.scatter.draw();return this},a.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(v,re,ne){var m;m=function(){function g(ye,ke){this.id=ee++,this.type=ye,this.data=ke}function m(ye){return"["+function ke(Ve){if(0===Ve.length)return[];var Je=Ve.charAt(0),nt=Ve.charAt(Ve.length-1);if(1<Ve.length&&Je===nt&&('"'===Je||"'"===Je))return['"'+Ve.substr(1,Ve.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Je=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ve))return ke(Ve.substr(0,Je.index)).concat(ke(Je[1])).concat(ke(Ve.substr(Je.index+Je[0].length)));if(1===(Je=Ve.split(".")).length)return['"'+Ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ve=[],nt=0;nt<Je.length;++nt)Ve=Ve.concat(ke(Je[nt]));return Ve}(ye).join("][")+"]"}function b(ye){return"string"==typeof ye?ye.split():ye}function y(ye){return"string"==typeof ye?document.querySelector(ye):ye}function r(ye,ke){for(var Ve=Array(ye),Je=0;Je<ye;++Je)Ve[Je]=ke(Je);return Ve}function n(ye){var ke,Ve;return ke=(65535<ye)<<4,ke|=Ve=(255<(ye>>>=ke))<<3,(ke|=Ve=(15<(ye>>>=Ve))<<2)|(Ve=(3<(ye>>>=Ve))<<1)|ye>>>Ve>>1}function a(){function ye(Je){e:{for(var nt=16;268435456>=nt;nt*=16)if(Je<=nt){Je=nt;break e}Je=0}return 0<(nt=Ve[n(Je)>>2]).length?nt.pop():new ArrayBuffer(Je)}function ke(Je){Ve[n(Je.byteLength)>>2].push(Je)}var Ve=r(8,function(){return[]});return{alloc:ye,free:ke,allocType:function(Je,nt){var Ke=null;switch(Je){case 5120:Ke=new Int8Array(ye(nt),0,nt);break;case 5121:Ke=new Uint8Array(ye(nt),0,nt);break;case 5122:Ke=new Int16Array(ye(2*nt),0,nt);break;case 5123:Ke=new Uint16Array(ye(2*nt),0,nt);break;case 5124:Ke=new Int32Array(ye(4*nt),0,nt);break;case 5125:Ke=new Uint32Array(ye(4*nt),0,nt);break;case 5126:Ke=new Float32Array(ye(4*nt),0,nt);break;default:return null}return Ke.length!==nt?Ke.subarray(0,nt):Ke},freeType:function(Je){ke(Je.buffer)}}}function t(ye){return!!ye&&"object"==typeof ye&&Array.isArray(ye.shape)&&Array.isArray(ye.stride)&&"number"==typeof ye.offset&&ye.shape.length===ye.stride.length&&(Array.isArray(ye.data)||be(ye.data))}function p(ye,ke,Ve,Je,nt,Ke){for(var vt=0;vt<ke;++vt)for(var gt=ye[vt],Ot=0;Ot<Ve;++Ot)for(var Vt=gt[Ot],ft=0;ft<Je;++ft)nt[Ke++]=Vt[ft]}function s(ye){return 0|Ce[Object.prototype.toString.call(ye)]}function i(ye,ke){for(var Ve=0;Ve<ke.length;++Ve)ye[Ve]=ke[Ve]}function f(ye,ke,Ve,Je,nt,Ke,vt){for(var gt=0,Ot=0;Ot<Ve;++Ot)for(var Vt=0;Vt<Je;++Vt)ye[gt++]=ke[nt*Ot+Ke*Vt+vt]}function h(ye){for(var ke=de.allocType(5123,ye.length),Ve=0;Ve<ye.length;++Ve)if(isNaN(ye[Ve]))ke[Ve]=65535;else if(1/0===ye[Ve])ke[Ve]=31744;else if(-1/0===ye[Ve])ke[Ve]=64512;else{De[0]=ye[Ve];var Je=(Ke=Fe[0])>>>31<<15,nt=(Ke<<1>>>24)-127,Ke=Ke>>13&1023;ke[Ve]=-24>nt?Je:-14>nt?Je+(Ke+1024>>-14-nt):15<nt?Je+31744:Je+(nt+15<<10)+Ke}return ke}function d(ye){return Array.isArray(ye)||be(ye)}function o(ye){return"[object "+ye+"]"}function x(ye){return Array.isArray(ye)&&(0===ye.length||"number"==typeof ye[0])}function u(ye){return!(!Array.isArray(ye)||0===ye.length||!d(ye[0]))}function T(ye){return Object.prototype.toString.call(ye)}function _(ye){if(!ye)return!1;var ke=T(ye);return 0<=mt.indexOf(ke)||x(ye)||u(ye)||t(ye)}function w(ye,ke){36193===ye.type?(ye.data=h(ke),de.freeType(ke)):ye.data=ke}function M(ye,ke,Ve,Je,nt,Ke){if(ye=void 0!==It[ye]?It[ye]:je[ye]*Tt[ke],Ke&&(ye*=6),nt){for(Je=0;1<=Ve;)Je+=ye*Ve*Ve,Ve/=2;return Je}return ye*Ve*Je}function R(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(ye,ke){return ye>>>ke|ye<<32-ke}function z(ye,ke){var Ve=(65535&ye)+(65535&ke);return(ye>>16)+(ke>>16)+(Ve>>16)<<16|65535&Ve}function Y(ye){return Array.prototype.slice.call(ye)}function G(ye){return Y(ye).join("")}function te(ye){return Array.isArray(ye)||be(ye)||t(ye)}function X(ye){return ye.sort(function(ke,Ve){return"viewport"===ke?-1:"viewport"===Ve?1:ke<Ve?-1:1})}function K(ye,ke,Ve,Je){this.thisDep=ye,this.contextDep=ke,this.propDep=Ve,this.append=Je}function ae(ye){return ye&&!(ye.thisDep||ye.contextDep||ye.propDep)}function U(ye){return new K(!1,!1,!1,ye)}function V(ye,ke){var Ve=ye.type;if(0===Ve)return new K(!0,1<=(Ve=ye.data.length),2<=Ve,ke);if(4===Ve)return new K((Ve=ye.data).thisDep,Ve.contextDep,Ve.propDep,ke);if(5===Ve)return new K(!1,!1,!1,ke);if(6===Ve){for(var Je=Ve=!1,nt=!1,Ke=0;Ke<ye.data.length;++Ke){var vt=ye.data[Ke];1===vt.type?nt=!0:2===vt.type?Je=!0:3===vt.type?Ve=!0:0===vt.type?(Ve=!0,1<=(vt=vt.data)&&(Je=!0),2<=vt&&(nt=!0)):4===vt.type&&(Ve=Ve||vt.data.thisDep,Je=Je||vt.data.contextDep,nt=nt||vt.data.propDep)}return new K(Ve,Je,nt,ke)}return new K(3===Ve,2===Ve,1===Ve,ke)}function q(ye,ke,Ve,Je,nt,Ke,vt,gt,Ot,Vt,ft,bt,Wt,Pt,Bt,Pe){function et(jt){return jt.replace(".","_")}function dt(jt,bn,An){var $n=et(jt);si.push(jt),ri[$n]=lr[$n]=!!An,Tr[$n]=bn}function xt(jt,bn,An){var $n=et(jt);si.push(jt),Array.isArray(An)?(lr[$n]=An.slice(),ri[$n]=An.slice()):lr[$n]=ri[$n]=An,Zr[$n]=bn}function Rt(){var jt=function J(ye){function ke(){var ft=[],bt=[];return H(function(){ft.push.apply(ft,Y(arguments))},{def:function(){var Wt="v"+nt++;return bt.push(Wt),0<arguments.length&&(ft.push(Wt,"="),ft.push.apply(ft,Y(arguments)),ft.push(";")),Wt},toString:function(){return G([0<bt.length?"var "+bt.join(",")+";":"",G(ft)])}})}function Ve(){function ft(Pe,et){Wt(Pe,et,"=",bt.def(Pe,et),";")}var bt=ke(),Wt=ke(),Pt=bt.toString,Bt=Wt.toString;return H(function(){bt.apply(bt,Y(arguments))},{def:bt.def,entry:bt,exit:Wt,save:ft,set:function(Pe,et,dt){ft(Pe,et),bt(Pe,et,"=",dt,";")},toString:function(){return Pt()+Bt()}})}var Je=ye&&ye.cache,nt=0,Ke=[],vt=[],gt=[],Ot=ke(),Vt={};return{global:Ot,link:function(ft,bt){var Wt=bt&&bt.stable;if(!Wt)for(var Pt=0;Pt<vt.length;++Pt)if(vt[Pt]===ft&&!gt[Pt])return Ke[Pt];return Pt="g"+nt++,Ke.push(Pt),vt.push(ft),gt.push(Wt),Pt},block:ke,proc:function(ft,bt){function Wt(){var et="a"+Pt.length;return Pt.push(et),et}var Pt=[];bt=bt||0;for(var Bt=0;Bt<bt;++Bt)Wt();var Pe=(Bt=Ve()).toString;return Vt[ft]=H(Bt,{arg:Wt,toString:function(){return G(["function(",Pt.join(),"){",Pe(),"}"])}})},scope:Ve,cond:function(){var ft=G(arguments),bt=Ve(),Wt=Ve(),Pt=bt.toString,Bt=Wt.toString;return H(bt,{then:function(){return bt.apply(bt,Y(arguments)),this},else:function(){return Wt.apply(Wt,Y(arguments)),this},toString:function(){var Pe=Bt();return Pe&&(Pe="else{"+Pe+"}"),G(["if(",ft,"){",Pt(),"}",Pe])}})},compile:function(){var ft=['"use strict";',Ot,"return {"];Object.keys(Vt).forEach(function(Pt){ft.push('"',Pt,'":',Vt[Pt].toString(),",")}),ft.push("}");var bt,Wt=G(ft).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Je&&(bt=function(Pt){for(var Bt,Pe="",et=0;et<Pt.length;et++)Bt=Pt.charCodeAt(et),Pe+="0123456789abcdef".charAt(Bt>>>4&15)+"0123456789abcdef".charAt(15&Bt);return Pe}(function(Pt){for(var Bt=Array(Pt.length>>2),Pe=0;Pe<Bt.length;Pe++)Bt[Pe]=0;for(Pe=0;Pe<8*Pt.length;Pe+=8)Bt[Pe>>5]|=(255&Pt.charCodeAt(Pe/8))<<24-Pe%32;var et,dt,xt,Rt,Yt,nn,Kt,Mn,Un,Tn,un,an=8*Pt.length;for(Pt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Pe=Array(64),Bt[an>>5]|=128<<24-an%32,Bt[15+(an+64>>9<<4)]=an,Mn=0;Mn<Bt.length;Mn+=16){for(an=Pt[0],et=Pt[1],dt=Pt[2],xt=Pt[3],Rt=Pt[4],Yt=Pt[5],nn=Pt[6],Kt=Pt[7],Un=0;64>Un;Un++){var fn;16>Un?Pe[Un]=Bt[Un+Mn]:(Tn=Un,un=z(un=B(un=Pe[Un-2],17)^B(un,19)^un>>>10,Pe[Un-7]),fn=B(fn=Pe[Un-15],7)^B(fn,18)^fn>>>3,Pe[Tn]=z(z(un,fn),Pe[Un-16])),Tn=z(z(z(z(Kt,Tn=B(Tn=Rt,6)^B(Tn,11)^B(Tn,25)),Rt&Yt^~Rt&nn),Xt[Un]),Pe[Un]),un=z(Kt=B(Kt=an,2)^B(Kt,13)^B(Kt,22),an&et^an&dt^et&dt),Kt=nn,nn=Yt,Yt=Rt,Rt=z(xt,Tn),xt=dt,dt=et,et=an,an=z(Tn,un)}Pt[0]=z(an,Pt[0]),Pt[1]=z(et,Pt[1]),Pt[2]=z(dt,Pt[2]),Pt[3]=z(xt,Pt[3]),Pt[4]=z(Rt,Pt[4]),Pt[5]=z(Yt,Pt[5]),Pt[6]=z(nn,Pt[6]),Pt[7]=z(Kt,Pt[7])}for(Bt="",Pe=0;Pe<32*Pt.length;Pe+=8)Bt+=String.fromCharCode(Pt[Pe>>5]>>>24-Pe%32&255);return Bt}(function(Pt){for(var Bt,Pe,et="",dt=-1;++dt<Pt.length;)Bt=Pt.charCodeAt(dt),Pe=dt+1<Pt.length?Pt.charCodeAt(dt+1):0,55296<=Bt&&56319>=Bt&&56320<=Pe&&57343>=Pe&&(Bt=65536+((1023&Bt)<<10)+(1023&Pe),dt++),127>=Bt?et+=String.fromCharCode(Bt):2047>=Bt?et+=String.fromCharCode(192|Bt>>>6&31,128|63&Bt):65535>=Bt?et+=String.fromCharCode(224|Bt>>>12&15,128|Bt>>>6&63,128|63&Bt):2097151>=Bt&&(et+=String.fromCharCode(240|Bt>>>18&7,128|Bt>>>12&63,128|Bt>>>6&63,128|63&Bt));return et}(Wt))),Je[bt])?Je[bt].apply(null,vt):(Wt=Function.apply(null,Ke.concat(Wt)),Je&&(Je[bt]=Wt),Wt.apply(null,vt))}}}({cache:Bt}),bn=jt.link,An=jt.global;jt.id=Cn++,jt.batchId="0";var $n=bn(Ii),Gn=jt.shared={props:"a0"};Object.keys(Ii).forEach(function(Dn){Gn[Dn]=An.def($n,".",Dn)});var zn=jt.next={},Hn=jt.current={};Object.keys(Zr).forEach(function(Dn){Array.isArray(lr[Dn])&&(zn[Dn]=An.def(Gn.next,".",Dn),Hn[Dn]=An.def(Gn.current,".",Dn))});var Ln=jt.constants={};Object.keys(dn).forEach(function(Dn){Ln[Dn]=An.def(JSON.stringify(dn[Dn]))}),jt.invoke=function(Dn,Yn){switch(Yn.type){case 0:var rr=["this",Gn.context,Gn.props,jt.batchId];return Dn.def(bn(Yn.data),".call(",rr.slice(0,Math.max(Yn.data.length+1,4)),")");case 1:return Dn.def(Gn.props,Yn.data);case 2:return Dn.def(Gn.context,Yn.data);case 3:return Dn.def("this",Yn.data);case 4:return Yn.data.append(jt,Dn),Yn.data.ref;case 5:return Yn.data.toString();case 6:return Yn.data.map(function(ar){return jt.invoke(Dn,ar)})}},jt.attribCache={};var On={};return jt.scopeAttrib=function(Dn){if((Dn=ke.id(Dn))in On)return On[Dn];var Yn=Vt.scope[Dn];return Yn||(Yn=Vt.scope[Dn]=new jr),On[Dn]=bn(Yn)},jt}function Un(jt,bn,An,$n,Gn){function zn(Ir){var Or=Ln[Ir];Or&&(Dn[Ir]=Or)}var Ir,Rr,Ur,$r,Hn=function(Ir,Or){if("string"==typeof(Rr=Ir.static).frag&&"string"==typeof Rr.vert){if(0<Object.keys(Or.dynamic).length)return null;var Rr=Or.static,Ur=Object.keys(Rr);if(0<Ur.length&&"number"==typeof Rr[Ur[0]]){for(var $r=[],gi=0;gi<Ur.length;++gi)$r.push([0|Rr[Ur[gi]],Ur[gi]]);return $r}}return null}(jt,bn),Ln=function(Ir,Or,Rr){function Ur(Wi){if(Wi in $r){var Br=$r[Wi];Wi=!0;var ui,mi,ya=0|Br.x,Wa=0|Br.y;return"width"in Br?ui=0|Br.width:Wi=!1,"height"in Br?mi=0|Br.height:Wi=!1,new K(!Wi&&Or&&Or.thisDep,!Wi&&Or&&Or.contextDep,!Wi&&Or&&Or.propDep,function(ws,Va){var ua=ws.shared.context,sa=ui;"width"in Br||(sa=Va.def(ua,".","framebufferWidth","-",ya));var Ta=mi;return"height"in Br||(Ta=Va.def(ua,".","framebufferHeight","-",Wa)),[ya,Wa,sa,Ta]})}if(Wi in gi){var Xa=gi[Wi];return Wi=V(Xa,function(ws,Va){var ua=ws.invoke(Va,Xa),sa=ws.shared.context,Ta=Va.def(ua,".x|0"),Ts=Va.def(ua,".y|0");return[Ta,Ts,Va.def('"width" in ',ua,"?",ua,".width|0:","(",sa,".","framebufferWidth","-",Ta,")"),ua=Va.def('"height" in ',ua,"?",ua,".height|0:","(",sa,".","framebufferHeight","-",Ts,")")]}),Or&&(Wi.thisDep=Wi.thisDep||Or.thisDep,Wi.contextDep=Wi.contextDep||Or.contextDep,Wi.propDep=Wi.propDep||Or.propDep),Wi}return Or?new K(Or.thisDep,Or.contextDep,Or.propDep,function(ws,Va){var ua=ws.shared.context;return[0,0,Va.def(ua,".","framebufferWidth"),Va.def(ua,".","framebufferHeight")]}):null}var $r=Ir.static,gi=Ir.dynamic;if(Ir=Ur("viewport")){var ai=Ir;Ir=new K(Ir.thisDep,Ir.contextDep,Ir.propDep,function(Wi,Br){var ui=ai.append(Wi,Br),mi=Wi.shared.context;return Br.set(mi,".viewportWidth",ui[2]),Br.set(mi,".viewportHeight",ui[3]),ui})}return{viewport:Ir,scissor_box:Ur("scissor.box")}}(jt,rr=function Yt(jt,bn){var An=jt.static,$n=jt.dynamic;if("framebuffer"in An){var Gn=An.framebuffer;return Gn?(Gn=gt.getFramebuffer(Gn),U(function(Hn,Ln){var On=Hn.link(Gn),Dn=Hn.shared;return Ln.set(Dn.framebuffer,".next",On),Ln.set(Dn=Dn.context,".framebufferWidth",On+".width"),Ln.set(Dn,".framebufferHeight",On+".height"),On})):U(function(Hn,Ln){var On=Hn.shared;return Ln.set(On.framebuffer,".next","null"),Ln.set(On=On.context,".framebufferWidth",On+".drawingBufferWidth"),Ln.set(On,".framebufferHeight",On+".drawingBufferHeight"),"null"})}if("framebuffer"in $n){var zn=$n.framebuffer;return V(zn,function(Hn,Ln){var On=Hn.invoke(Ln,zn),Dn=Hn.shared,Yn=Dn.framebuffer;return On=Ln.def(Yn,".getFramebuffer(",On,")"),Ln.set(Yn,".next",On),Ln.set(Dn=Dn.context,".framebufferWidth",On+"?"+On+".width:"+Dn+".drawingBufferWidth"),Ln.set(Dn,".framebufferHeight",On+"?"+On+".height:"+Dn+".drawingBufferHeight"),On})}return null}(jt)),On=function Kt(jt,bn){function An(xr,Ir){if(xr in $n){var Or=0|$n[xr];return Ir?zn.offset=Or:zn.instances=Or,U(function(Ur,$r){return Ir&&(Ur.OFFSET=Or),Or})}if(xr in Gn){var Rr=Gn[xr];return V(Rr,function(Ur,$r){var gi=Ur.invoke($r,Rr);return Ir&&(Ur.OFFSET=gi),gi})}if(Ir){if(On)return U(function(Ur,$r){return Ur.OFFSET=0});if(Hn)return new K(Ln.thisDep,Ln.contextDep,Ln.propDep,function(Ur,$r){return $r.def(Ur.shared.vao+".currentVAO?"+Ur.shared.vao+".currentVAO.offset:0")})}else if(Hn)return new K(Ln.thisDep,Ln.contextDep,Ln.propDep,function(Ur,$r){return $r.def(Ur.shared.vao+".currentVAO?"+Ur.shared.vao+".currentVAO.instances:-1")});return null}var $n=jt.static,Gn=jt.dynamic,zn={},Hn=!1,Ln=function(){if("vao"in $n){var xr=$n.vao;return null!==xr&&null===Vt.getVAO(xr)&&(xr=Vt.createVAO(xr)),Hn=!0,zn.vao=xr,U(function(Or){var Rr=Vt.getVAO(xr);return Rr?Or.link(Rr):"null"})}if("vao"in Gn){Hn=!0;var Ir=Gn.vao;return V(Ir,function(Or,Rr){var Ur=Or.invoke(Rr,Ir);return Rr.def(Or.shared.vao+".getVAO("+Ur+")")})}return null}(),On=!1,Dn=function(){if("elements"in $n){var xr=$n.elements;if(zn.elements=xr,te(xr)){var Ir=zn.elements=Ke.create(xr,!0);xr=Ke.getElements(Ir),On=!0}else xr&&(xr=Ke.getElements(xr),On=!0);return(Ir=U(function(Rr,Ur){if(xr){var $r=Rr.link(xr);return Rr.ELEMENTS=$r}return Rr.ELEMENTS=null})).value=xr,Ir}if("elements"in Gn){On=!0;var Or=Gn.elements;return V(Or,function(Rr,Ur){var $r=(gi=Rr.shared).isBufferArgs,gi=gi.elements,ai=Rr.invoke(Ur,Or),Wi=Ur.def("null");return $r=Ur.def($r,"(",ai,")"),ai=Rr.cond($r).then(Wi,"=",gi,".createStream(",ai,");").else(Wi,"=",gi,".getElements(",ai,");"),Ur.entry(ai),Ur.exit(Rr.cond($r).then(gi,".destroyStream(",Wi,");")),Rr.ELEMENTS=Wi})}return Hn?new K(Ln.thisDep,Ln.contextDep,Ln.propDep,function(Rr,Ur){return Ur.def(Rr.shared.vao+".currentVAO?"+Rr.shared.elements+".getElements("+Rr.shared.vao+".currentVAO.elements):null")}):null}(),Yn=An("offset",!0),rr=function(){if("primitive"in $n){var xr=$n.primitive;return zn.primitive=xr,U(function(Or,Rr){return Ie[xr]})}if("primitive"in Gn){var Ir=Gn.primitive;return V(Ir,function(Or,Rr){var Ur=Or.constants.primTypes,$r=Or.invoke(Rr,Ir);return Rr.def(Ur,"[",$r,"]")})}return On?ae(Dn)?U(Dn.value?function(Or,Rr){return Rr.def(Or.ELEMENTS,".primType")}:function(){return 4}):new K(Dn.thisDep,Dn.contextDep,Dn.propDep,function(Or,Rr){var Ur=Or.ELEMENTS;return Rr.def(Ur,"?",Ur,".primType:",4)}):Hn?new K(Ln.thisDep,Ln.contextDep,Ln.propDep,function(Or,Rr){return Rr.def(Or.shared.vao+".currentVAO?"+Or.shared.vao+".currentVAO.primitive:4")}):null}(),ar=function(){if("count"in $n){var xr=0|$n.count;return zn.count=xr,U(function(){return xr})}if("count"in Gn){var Ir=Gn.count;return V(Ir,function(Or,Rr){return Or.invoke(Rr,Ir)})}return On?ae(Dn)?Dn?Yn?new K(Yn.thisDep,Yn.contextDep,Yn.propDep,function(Or,Rr){return Rr.def(Or.ELEMENTS,".vertCount-",Or.OFFSET)}):U(function(Or,Rr){return Rr.def(Or.ELEMENTS,".vertCount")}):U(function(){return-1}):new K(Dn.thisDep||Yn.thisDep,Dn.contextDep||Yn.contextDep,Dn.propDep||Yn.propDep,function(Or,Rr){var Ur=Or.ELEMENTS;return Or.OFFSET?Rr.def(Ur,"?",Ur,".vertCount-",Or.OFFSET,":-1"):Rr.def(Ur,"?",Ur,".vertCount:-1")}):Hn?new K(Ln.thisDep,Ln.contextDep,Ln.propDep,function(Or,Rr){return Rr.def(Or.shared.vao,".currentVAO?",Or.shared.vao,".currentVAO.count:-1")}):null}(),vr=An("instances",!1);return{elements:Dn,primitive:rr,count:ar,instances:vr,offset:Yn,vao:Ln,vaoActive:Hn,elementsActive:On,static:zn}}(jt),Dn=(Rr=(Ir=jt).static,Ur=Ir.dynamic,$r={},si.forEach(function(gi){function ai(Br,ui){if(gi in Rr){var mi=Br(Rr[gi]);$r[Wi]=U(function(){return mi})}else if(gi in Ur){var ya=Ur[gi];$r[Wi]=V(ya,function(Wa,Xa){return ui(Wa,Xa,Wa.invoke(Xa,ya))})}}var Wi=et(gi);switch(gi){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return ai(function(Br){return Br},function(Br,ui,mi){return mi});case"depth.func":return ai(function(Br){return yn[Br]},function(Br,ui,mi){return ui.def(Br.constants.compareFuncs,"[",mi,"]")});case"depth.range":return ai(function(Br){return Br},function(Br,ui,mi){return[ui.def("+",mi,"[0]"),ui=ui.def("+",mi,"[1]")]});case"blend.func":return ai(function(Br){return[cn["srcRGB"in Br?Br.srcRGB:Br.src],cn["dstRGB"in Br?Br.dstRGB:Br.dst],cn["srcAlpha"in Br?Br.srcAlpha:Br.src],cn["dstAlpha"in Br?Br.dstAlpha:Br.dst]]},function(Br,ui,mi){function ya(Va,ua){return ui.def('"',Va,ua,'" in ',mi,"?",mi,".",Va,ua,":",mi,".",Va)}Br=Br.constants.blendFuncs;var Wa=ya("src","RGB"),Xa=ya("dst","RGB"),ws=(Wa=ui.def(Br,"[",Wa,"]"),ui.def(Br,"[",ya("src","Alpha"),"]"));return[Wa,Xa=ui.def(Br,"[",Xa,"]"),ws,Br=ui.def(Br,"[",ya("dst","Alpha"),"]")]});case"blend.equation":return ai(function(Br){return"string"==typeof Br?[di[Br],di[Br]]:"object"==typeof Br?[di[Br.rgb],di[Br.alpha]]:void 0},function(Br,ui,mi){var ya=Br.constants.blendEquations,Wa=ui.def(),Xa=ui.def();return(Br=Br.cond("typeof ",mi,'==="string"')).then(Wa,"=",Xa,"=",ya,"[",mi,"];"),Br.else(Wa,"=",ya,"[",mi,".rgb];",Xa,"=",ya,"[",mi,".alpha];"),ui(Br),[Wa,Xa]});case"blend.color":return ai(function(Br){return r(4,function(ui){return+Br[ui]})},function(Br,ui,mi){return r(4,function(ya){return ui.def("+",mi,"[",ya,"]")})});case"stencil.mask":return ai(function(Br){return 0|Br},function(Br,ui,mi){return ui.def(mi,"|0")});case"stencil.func":return ai(function(Br){return[yn[Br.cmp||"keep"],Br.ref||0,"mask"in Br?Br.mask:-1]},function(Br,ui,mi){return[Br=ui.def('"cmp" in ',mi,"?",Br.constants.compareFuncs,"[",mi,".cmp]",":",7680),ui.def(mi,".ref|0"),ui=ui.def('"mask" in ',mi,"?",mi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return ai(function(Br){return["stencil.opBack"===gi?1029:1028,en[Br.fail||"keep"],en[Br.zfail||"keep"],en[Br.zpass||"keep"]]},function(Br,ui,mi){function ya(Xa){return ui.def('"',Xa,'" in ',mi,"?",Wa,"[",mi,".",Xa,"]:",7680)}var Wa=Br.constants.stencilOps;return["stencil.opBack"===gi?1029:1028,ya("fail"),ya("zfail"),ya("zpass")]});case"polygonOffset.offset":return ai(function(Br){return[0|Br.factor,0|Br.units]},function(Br,ui,mi){return[ui.def(mi,".factor|0"),ui=ui.def(mi,".units|0")]});case"cull.face":return ai(function(Br){var ui=0;return"front"===Br?ui=1028:"back"===Br&&(ui=1029),ui},function(Br,ui,mi){return ui.def(mi,'==="front"?',1028,":",1029)});case"frontFace":return ai(function(Br){return Xe[Br]},function(Br,ui,mi){return ui.def(mi+'==="cw"?2304:2305')});case"colorMask":return ai(function(Br){return Br.map(function(ui){return!!ui})},function(Br,ui,mi){return r(4,function(ya){return"!!"+mi+"["+ya+"]"})});case"sample.coverage":return ai(function(Br){return["value"in Br?Br.value:1,!!Br.invert]},function(Br,ui,mi){return[ui.def('"value" in ',mi,"?+",mi,".value:1"),ui=ui.def("!!",mi,".invert")]})}}),$r),Yn=function nn(jt,bn,An){function $n(Dn){if(Dn in Gn){var Yn=ke.id(Gn[Dn]);return(Dn=U(function(){return Yn})).id=Yn,Dn}if(Dn in zn){var rr=zn[Dn];return V(rr,function(ar,vr){var xr=ar.invoke(vr,rr);return vr.def(ar.shared.strings,".id(",xr,")")})}return null}var Gn=jt.static,zn=jt.dynamic,Hn=$n("frag"),Ln=$n("vert"),On=null;return ae(Hn)&&ae(Ln)?(On=ft.program(Ln.id,Hn.id,null,An),jt=U(function(Dn,Yn){return Dn.link(On)})):jt=new K(Hn&&Hn.thisDep||Ln&&Ln.thisDep,Hn&&Hn.contextDep||Ln&&Ln.contextDep,Hn&&Hn.propDep||Ln&&Ln.propDep,function(Dn,Yn){var rr,ar,vr=Dn.shared.shader;return rr=Hn?Hn.append(Dn,Yn):Yn.def(vr,".","frag"),ar=Ln?Ln.append(Dn,Yn):Yn.def(vr,".","vert"),Yn.def(vr+".program("+ar+","+rr+")")}),{frag:Hn,vert:Ln,progVar:jt,program:On}}(jt,0,Hn);zn("viewport"),zn(et("scissor.box"));var rr,ar=0<Object.keys(Dn).length;if((rr={framebuffer:rr,draw:On,shader:Yn,state:Dn,dirty:ar,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Ir){var Or,Rr=Ir.static;if(Ir=Ir.dynamic,"profile"in Rr){var Ur=!!Rr.profile;(Or=U(function(gi,ai){return Ur})).enable=Ur}else if("profile"in Ir){var $r=Ir.profile;Or=V($r,function(gi,ai){return gi.invoke(ai,$r)})}return Or}(jt),rr.uniforms=function(Ir,Or){var Rr=Ir.static,Ur=Ir.dynamic,$r={};return Object.keys(Rr).forEach(function(gi){var ai,Wi=Rr[gi];if("number"==typeof Wi||"boolean"==typeof Wi)ai=U(function(){return Wi});else if("function"==typeof Wi){var Br=Wi._reglType;"texture2d"===Br||"textureCube"===Br?ai=U(function(ui){return ui.link(Wi)}):"framebuffer"!==Br&&"framebufferCube"!==Br||(ai=U(function(ui){return ui.link(Wi.color[0])}))}else d(Wi)&&(ai=U(function(ui){return ui.global.def("[",r(Wi.length,function(mi){return Wi[mi]}),"]")}));ai.value=Wi,$r[gi]=ai}),Object.keys(Ur).forEach(function(gi){var ai=Ur[gi];$r[gi]=V(ai,function(Wi,Br){return Wi.invoke(Br,ai)})}),$r}(An),rr.drawVAO=rr.scopeVAO=On.vao,!rr.drawVAO&&Yn.program&&!Hn&&Ve.angle_instanced_arrays&&On.static.elements){var vr=!0;if(jt=Yn.program.attributes.map(function(Ir){return Ir=bn.static[Ir],vr=vr&&!!Ir,Ir}),vr&&0<jt.length){var xr=Vt.getVAO(Vt.createVAO({attributes:jt,elements:On.static.elements}));rr.drawVAO=new K(null,null,null,function(Ir,Or){return Ir.link(xr)}),rr.useVAO=!0}}return Hn?rr.useVAO=!0:rr.attributes=function Mn(jt,bn){var An=jt.static,$n=jt.dynamic,Gn={};return Object.keys(An).forEach(function(zn){var Hn=An[zn],Ln=ke.id(zn),On=new jr;if(te(Hn))On.state=1,On.buffer=nt.getBuffer(nt.create(Hn,34962,!1,!0)),On.type=0;else if(Yn=nt.getBuffer(Hn))On.state=1,On.buffer=Yn,On.type=0;else if("constant"in Hn){var Dn=Hn.constant;On.buffer="null",On.state=2,"number"==typeof Dn?On.x=Dn:tn.forEach(function(Or,Rr){Rr<Dn.length&&(On[Or]=Dn[Rr])})}else{var Yn=te(Hn.buffer)?nt.getBuffer(nt.create(Hn.buffer,34962,!1,!0)):nt.getBuffer(Hn.buffer),rr=0|Hn.offset,ar=0|Hn.stride,vr=0|Hn.size,xr=!!Hn.normalized,Ir=0;"type"in Hn&&(Ir=Ee[Hn.type]),Hn=0|Hn.divisor,On.buffer=Yn,On.state=1,On.size=vr,On.normalized=xr,On.type=Ir||Yn.dtype,On.offset=rr,On.stride=ar,On.divisor=Hn}Gn[zn]=U(function(Or,Rr){var Ur=Or.attribCache;if(Ln in Ur)return Ur[Ln];var $r={isStream:!1};return Object.keys(On).forEach(function(gi){$r[gi]=On[gi]}),On.buffer&&($r.buffer=Or.link(On.buffer),$r.type=$r.type||$r.buffer+".dtype"),Ur[Ln]=$r})}),Object.keys($n).forEach(function(zn){var Hn=$n[zn];Gn[zn]=V(Hn,function(Ln,On){function Dn(Ur){On(xr[Ur],"=",Yn,".",Ur,"|0;")}var Yn=Ln.invoke(On,Hn),rr=Ln.shared,ar=Ln.constants,vr=rr.isBufferArgs,xr=(rr=rr.buffer,{isStream:On.def(!1)}),Ir=new jr;Ir.state=1,Object.keys(Ir).forEach(function(Ur){xr[Ur]=On.def(""+Ir[Ur])});var Or=xr.buffer,Rr=xr.type;return On("if(",vr,"(",Yn,")){",xr.isStream,"=true;",Or,"=",rr,".createStream(",34962,",",Yn,");",Rr,"=",Or,".dtype;","}else{",Or,"=",rr,".getBuffer(",Yn,");","if(",Or,"){",Rr,"=",Or,".dtype;",'}else if("constant" in ',Yn,"){",xr.state,"=",2,";","if(typeof "+Yn+'.constant === "number"){',xr[tn[0]],"=",Yn,".constant;",tn.slice(1).map(function(Ur){return xr[Ur]}).join("="),"=0;","}else{",tn.map(function(Ur,$r){return xr[Ur]+"="+Yn+".constant.length>"+$r+"?"+Yn+".constant["+$r+"]:0;"}).join(""),"}}else{","if(",vr,"(",Yn,".buffer)){",Or,"=",rr,".createStream(",34962,",",Yn,".buffer);","}else{",Or,"=",rr,".getBuffer(",Yn,".buffer);","}",Rr,'="type" in ',Yn,"?",ar.glTypes,"[",Yn,".type]:",Or,".dtype;",xr.normalized,"=!!",Yn,".normalized;"),Dn("size"),Dn("offset"),Dn("stride"),Dn("divisor"),On("}}"),On.exit("if(",xr.isStream,"){",rr,".destroyStream(",Or,");","}"),xr})}),Gn}(bn),rr.context=function(Ir){var Or=Ir.static,Rr=Ir.dynamic,Ur={};return Object.keys(Or).forEach(function($r){var gi=Or[$r];Ur[$r]=U(function(ai,Wi){return"number"==typeof gi||"boolean"==typeof gi?""+gi:ai.link(gi)})}),Object.keys(Rr).forEach(function($r){var gi=Rr[$r];Ur[$r]=V(gi,function(ai,Wi){return ai.invoke(Wi,gi)})}),Ur}($n),rr}function Tn(jt,bn,An){var $n=jt.shared.context,Gn=jt.scope();Object.keys(An).forEach(function(zn){bn.save($n,"."+zn);var Hn=An[zn].append(jt,bn);Array.isArray(Hn)?Gn($n,".",zn,"=[",Hn.join(),"];"):Gn($n,".",zn,"=",Hn,";")}),bn(Gn)}function un(jt,bn,An,$n){var Gn,zn=(Ln=jt.shared).gl,Hn=Ln.framebuffer;Ar&&(Gn=bn.def(Ln.extensions,".webgl_draw_buffers"));var Ln=(On=jt.constants).drawBuffer,On=On.backBuffer;jt=An?An.append(jt,bn):bn.def(Hn,".next"),$n||bn("if(",jt,"!==",Hn,".cur){"),bn("if(",jt,"){",zn,".bindFramebuffer(",36160,",",jt,".framebuffer);"),Ar&&bn(Gn,".drawBuffersWEBGL(",Ln,"[",jt,".colorAttachments.length]);"),bn("}else{",zn,".bindFramebuffer(",36160,",null);"),Ar&&bn(Gn,".drawBuffersWEBGL(",On,");"),bn("}",Hn,".cur=",jt,";"),$n||bn("}")}function an(jt,bn,An){var $n=jt.shared,Gn=$n.gl,zn=jt.current,Hn=jt.next,Ln=$n.current,On=$n.next,Dn=jt.cond(Ln,".dirty");si.forEach(function(Yn){var rr,ar;if(!((Yn=et(Yn))in An.state))if(Yn in Hn){rr=Hn[Yn],ar=zn[Yn];var vr=r(lr[Yn].length,function(xr){return Dn.def(rr,"[",xr,"]")});Dn(jt.cond(vr.map(function(xr,Ir){return xr+"!=="+ar+"["+Ir+"]"}).join("||")).then(Gn,".",Zr[Yn],"(",vr,");",vr.map(function(xr,Ir){return ar+"["+Ir+"]="+xr}).join(";"),";"))}else rr=Dn.def(On,".",Yn),vr=jt.cond(rr,"!==",Ln,".",Yn),Dn(vr),Yn in Tr?vr(jt.cond(rr).then(Gn,".enable(",Tr[Yn],");").else(Gn,".disable(",Tr[Yn],");"),Ln,".",Yn,"=",rr,";"):vr(Gn,".",Zr[Yn],"(",rr,");",Ln,".",Yn,"=",rr,";")}),0===Object.keys(An.state).length&&Dn(Ln,".dirty=false;"),bn(Dn)}function fn(jt,bn,An,$n){var Gn,zn=jt.shared,Hn=jt.current,Ln=zn.current,On=zn.gl;X(Object.keys(An)).forEach(function(Dn){var Yn=An[Dn];if(!$n||$n(Yn)){var rr=Yn.append(jt,bn);if(Tr[Dn]){var ar=Tr[Dn];ae(Yn)?(Gn=jt.link(rr,{stable:!0}),bn(jt.cond(Gn).then(On,".enable(",ar,");").else(On,".disable(",ar,");")),bn(Ln,".",Dn,"=",Gn,";")):(bn(jt.cond(rr).then(On,".enable(",ar,");").else(On,".disable(",ar,");")),bn(Ln,".",Dn,"=",rr,";"))}else if(d(rr)){var vr=Hn[Dn];bn(On,".",Zr[Dn],"(",rr,");",rr.map(function(xr,Ir){return vr+"["+Ir+"]="+xr}).join(";"),";")}else ae(Yn)?(Gn=jt.link(rr,{stable:!0}),bn(On,".",Zr[Dn],"(",Gn,");",Ln,".",Dn,"=",Gn,";")):bn(On,".",Zr[Dn],"(",rr,");",Ln,".",Dn,"=",rr,";")}})}function pn(jt,bn){Jn&&(jt.instancing=bn.def(jt.shared.extensions,".angle_instanced_arrays"))}function Sn(jt,bn,An,$n,Gn){function zn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Hn(Ir){Ir(Dn=bn.def(),"=",zn(),";"),"string"==typeof Gn?Ir(ar,".count+=",Gn,";"):Ir(ar,".count++;"),Pt&&($n?Ir(Yn=bn.def(),"=",xr,".getNumPendingQueries();"):Ir(xr,".beginQuery(",ar,");"))}function Ln(Ir){Ir(ar,".cpuTime+=",zn(),"-",Dn,";"),Pt&&($n?Ir(xr,".pushScopeStats(",Yn,",",xr,".getNumPendingQueries(),",ar,");"):Ir(xr,".endQuery();"))}function On(Ir){var Or=bn.def(vr,".profile");bn(vr,".profile=",Ir,";"),bn.exit(vr,".profile=",Or,";")}var Dn,Yn,rr=jt.shared,ar=jt.stats,vr=rr.current,xr=rr.timer;if(An=An.profile){if(ae(An))return void(An.enable?(Hn(bn),Ln(bn.exit),On("true")):On("false"));On(An=An.append(jt,bn))}else An=bn.def(vr,".profile");Hn(rr=jt.block()),bn("if(",An,"){",rr,"}"),Ln(jt=jt.block()),bn.exit("if(",An,"){",jt,"}")}function Nn(jt,bn,An,$n,Gn){var Hn=jt.shared;$n.forEach(function(Ln){var On,Dn=Ln.name,Yn=An.attributes[Dn];if(Yn){if(!Gn(Yn))return;On=Yn.append(jt,bn)}else{if(!Gn(tt))return;var rr=jt.scopeAttrib(Dn);On={},Object.keys(new jr).forEach(function(ar){On[ar]=bn.def(rr,".",ar)})}!function zn(Ln,On,Dn){function Yn(){bn("if(!",xr,".buffer){",ar,".enableVertexAttribArray(",vr,");}");var Ur,$r=Dn.type;Ur=Dn.size?bn.def(Dn.size,"||",On):On,bn("if(",xr,".type!==",$r,"||",xr,".size!==",Ur,"||",Rr.map(function(gi){return xr+"."+gi+"!=="+Dn[gi]}).join("||"),"){",ar,".bindBuffer(",34962,",",Ir,".buffer);",ar,".vertexAttribPointer(",[vr,Ur,$r,Dn.normalized,Dn.stride,Dn.offset],");",xr,".type=",$r,";",xr,".size=",Ur,";",Rr.map(function(gi){return xr+"."+gi+"="+Dn[gi]+";"}).join(""),"}"),Jn&&bn("if(",xr,".divisor!==",$r=Dn.divisor,"){",jt.instancing,".vertexAttribDivisorANGLE(",[vr,$r],");",xr,".divisor=",$r,";}")}function rr(){bn("if(",xr,".buffer){",ar,".disableVertexAttribArray(",vr,");",xr,".buffer=null;","}if(",tn.map(function(Ur,$r){return xr+"."+Ur+"!=="+Or[$r]}).join("||"),"){",ar,".vertexAttrib4f(",vr,",",Or,");",tn.map(function(Ur,$r){return xr+"."+Ur+"="+Or[$r]+";"}).join(""),"}")}var ar=Hn.gl,vr=bn.def(Ln,".location"),xr=bn.def(Hn.attributes,"[",vr,"]"),Ir=Dn.buffer,Or=[Dn.x,Dn.y,Dn.z,Dn.w],Rr=["buffer","normalized","offset","stride"];1===(Ln=Dn.state)?Yn():2===Ln?rr():(bn("if(",Ln,"===",1,"){"),Yn(),bn("}else{"),rr(),bn("}"))}(jt.link(Ln),function(ar){switch(ar){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Ln.info.type),On)})}function Kn(jt,bn,An,$n,Gn,zn){for(var Hn,Ln=jt.shared,On=Ln.gl,Dn=0;Dn<$n.length;++Dn){var Yn,rr=(xr=$n[Dn]).name,ar=xr.info.type,vr=An.uniforms[rr],xr=jt.link(xr)+".location";if(vr){if(!Gn(vr))continue;if(ae(vr)){if(rr=vr.value,35678===ar||35680===ar)bn(On,".uniform1i(",xr,",",(ar=jt.link(rr._texture||rr.color[0]._texture))+".bind());"),bn.exit(ar,".unbind();");else if(35674===ar||35675===ar||35676===ar)vr=2,35675===ar?vr=3:35676===ar&&(vr=4),bn(On,".uniformMatrix",vr,"fv(",xr,",false,",rr=jt.global.def("new Float32Array(["+Array.prototype.slice.call(rr)+"])"),");");else{switch(ar){case 5126:Hn="1f";break;case 35664:Hn="2f";break;case 35665:Hn="3f";break;case 35666:Hn="4f";break;case 35670:case 5124:Hn="1i";break;case 35671:case 35667:Hn="2i";break;case 35672:case 35668:Hn="3i";break;case 35673:case 35669:Hn="4i"}bn(On,".uniform",Hn,"(",xr,",",d(rr)?Array.prototype.slice.call(rr):rr,");")}continue}Yn=vr.append(jt,bn)}else{if(!Gn(tt))continue;Yn=bn.def(Ln.uniforms,"[",ke.id(rr),"]")}switch(35678===ar?bn("if(",Yn,"&&",Yn,'._reglType==="framebuffer"){',Yn,"=",Yn,".color[0];","}"):35680===ar&&bn("if(",Yn,"&&",Yn,'._reglType==="framebufferCube"){',Yn,"=",Yn,".color[0];","}"),rr=1,ar){case 35678:case 35680:ar=bn.def(Yn,"._texture"),bn(On,".uniform1i(",xr,",",ar,".bind());"),bn.exit(ar,".unbind();");continue;case 5124:case 35670:Hn="1i";break;case 35667:case 35671:Hn="2i",rr=2;break;case 35668:case 35672:Hn="3i",rr=3;break;case 35669:case 35673:Hn="4i",rr=4;break;case 5126:Hn="1f";break;case 35664:Hn="2f",rr=2;break;case 35665:Hn="3f",rr=3;break;case 35666:Hn="4f",rr=4;break;case 35674:Hn="Matrix2fv";break;case 35675:Hn="Matrix3fv";break;case 35676:Hn="Matrix4fv"}if("M"===Hn.charAt(0)){bn(On,".uniform",Hn,"(",xr,","),xr=Math.pow(ar-35674+2,2);var Ir=jt.global.def("new Float32Array(",xr,")");Array.isArray(Yn)?bn("false,(",r(xr,function(Rr){return Ir+"["+Rr+"]="+Yn[Rr]}),",",Ir,")"):bn("false,(Array.isArray(",Yn,")||",Yn," instanceof Float32Array)?",Yn,":(",r(xr,function(Rr){return Ir+"["+Rr+"]="+Yn+"["+Rr+"]"}),",",Ir,")"),bn(");")}else{if(1<rr){ar=[];var Or=[];for(vr=0;vr<rr;++vr)Array.isArray(Yn)?Or.push(Yn[vr]):Or.push(bn.def(Yn+"["+vr+"]")),zn&&ar.push(bn.def());zn&&bn("if(!",jt.batchId,"||",ar.map(function(Rr,Ur){return Rr+"!=="+Or[Ur]}).join("||"),"){",ar.map(function(Rr,Ur){return Rr+"="+Or[Ur]+";"}).join("")),bn(On,".uniform",Hn,"(",xr,",",Or.join(","),");")}else zn&&(ar=bn.def(),bn("if(!",jt.batchId,"||",ar,"!==",Yn,"){",ar,"=",Yn,";")),bn(On,".uniform",Hn,"(",xr,",",Yn,");");zn&&bn("}")}}}function Bn(jt,bn,An,$n){function Gn($r){var gi=ar[$r];return gi?gi.append(jt,gi.contextDep&&$n.contextDynamic||gi.propDep?An:bn):bn.def(rr,".",$r)}function zn(){function $r(){An(On,".drawElementsInstancedANGLE(",[xr,Or,Rr,Ir+"<<(("+Rr+"-5121)>>1)",Ln],");")}function gi(){An(On,".drawArraysInstancedANGLE(",[xr,Ir,Or,Ln],");")}vr&&"null"!==vr?Ur?$r():(An("if(",vr,"){"),$r(),An("}else{"),gi(),An("}")):gi()}function Hn(){function $r(){An(Yn+".drawElements("+[xr,Or,Rr,Ir+"<<(("+Rr+"-5121)>>1)"]+");")}function gi(){An(Yn+".drawArrays("+[xr,Ir,Or]+");")}vr&&"null"!==vr?Ur?$r():(An("if(",vr,"){"),$r(),An("}else{"),gi(),An("}")):gi()}var Ln,On,$r,gi,Dn=jt.shared,Yn=Dn.gl,rr=Dn.draw,ar=$n.draw,vr=(gi=bn,($r=ar.elements)?(($r.contextDep&&$n.contextDynamic||$r.propDep)&&(gi=An),$r=$r.append(jt,gi),ar.elementsActive&&gi("if("+$r+")"+Yn+".bindBuffer(34963,"+$r+".buffer.buffer);")):($r=gi.def(),gi($r,"=",rr,".","elements",";","if(",$r,"){",Yn,".bindBuffer(",34963,",",$r,".buffer.buffer);}","else if(",Dn.vao,".currentVAO){",$r,"=",jt.shared.elements+".getElements("+Dn.vao,".currentVAO.elements);",mr?"":"if("+$r+")"+Yn+".bindBuffer(34963,"+$r+".buffer.buffer);","}")),$r),xr=Gn("primitive"),Ir=Gn("offset"),Or=function(){var $r=ar.count,gi=bn;return $r?(($r.contextDep&&$n.contextDynamic||$r.propDep)&&(gi=An),$r=$r.append(jt,gi)):$r=gi.def(rr,".","count"),$r}();if("number"==typeof Or){if(0===Or)return}else An("if(",Or,"){"),An.exit("}");Jn&&(Ln=Gn("instances"),On=jt.instancing);var Rr=vr+".type",Ur=ar.elements&&ae(ar.elements)&&!ar.vaoActive;Jn&&("number"!=typeof Ln||0<=Ln)?"string"==typeof Ln?(An("if(",Ln,">0){"),zn(),An("}else if(",Ln,"<0){"),Hn(),An("}")):zn():Hn()}function cr(jt,bn,An,$n,Gn){return Gn=(bn=Rt()).proc("body",Gn),Jn&&(bn.instancing=Gn.def(bn.shared.extensions,".angle_instanced_arrays")),jt(bn,Gn,An,$n),bn.compile().body}function Lr(jt,bn,An,$n){pn(jt,bn),An.useVAO?An.drawVAO?bn(jt.shared.vao,".setVAO(",An.drawVAO.append(jt,bn),");"):bn(jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"):(bn(jt.shared.vao,".setVAO(null);"),Nn(jt,bn,An,$n.attributes,function(){return!0})),Kn(jt,bn,An,$n.uniforms,function(){return!0},!1),Bn(jt,bn,bn,An)}function Qn(jt,bn,An,$n){function Gn(){return!0}jt.batchId="a1",pn(jt,bn),Nn(jt,bn,An,$n.attributes,Gn),Kn(jt,bn,An,$n.uniforms,Gn,!1),Bn(jt,bn,bn,An)}function qr(jt,bn,An,$n){function Gn(rr){return rr.contextDep&&Hn||rr.propDep}function zn(rr){return!Gn(rr)}pn(jt,bn);var Hn=An.contextDep,Ln=bn.def(),On=bn.def();jt.shared.props=On,jt.batchId=Ln;var Dn=jt.scope(),Yn=jt.scope();bn(Dn.entry,"for(",Ln,"=0;",Ln,"<","a1",";++",Ln,"){",On,"=","a0","[",Ln,"];",Yn,"}",Dn.exit),An.needsContext&&Tn(jt,Yn,An.context),An.needsFramebuffer&&un(jt,Yn,An.framebuffer),fn(jt,Yn,An.state,Gn),An.profile&&Gn(An.profile)&&Sn(jt,Yn,An,!1,!0),$n?(An.useVAO?An.drawVAO?Gn(An.drawVAO)?Yn(jt.shared.vao,".setVAO(",An.drawVAO.append(jt,Yn),");"):Dn(jt.shared.vao,".setVAO(",An.drawVAO.append(jt,Dn),");"):Dn(jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"):(Dn(jt.shared.vao,".setVAO(null);"),Nn(jt,Dn,An,$n.attributes,zn),Nn(jt,Yn,An,$n.attributes,Gn)),Kn(jt,Dn,An,$n.uniforms,zn,!1),Kn(jt,Yn,An,$n.uniforms,Gn,!0),Bn(jt,Dn,Yn,An)):(bn=jt.global.def("{}"),$n=An.shader.progVar.append(jt,Yn),On=Yn.def($n,".id"),Dn=Yn.def(bn,"[",On,"]"),Yn(jt.shared.gl,".useProgram(",$n,".program);","if(!",Dn,"){",Dn,"=",bn,"[",On,"]=",jt.link(function(rr){return cr(Qn,jt,An,rr,2)}),"(",$n,");}",Dn,".call(this,a0[",Ln,"],",Ln,");"))}function hr(jt,bn,An){var $n=bn.static[An];if($n&&function(Yn){if("object"==typeof Yn&&!d(Yn)){for(var rr=Object.keys(Yn),ar=0;ar<rr.length;++ar)if(Q.isDynamic(Yn[rr[ar]]))return!0;return!1}}($n)){var Gn=jt.global,zn=Object.keys($n),Hn=!1,Ln=!1,On=!1,Dn=jt.global.def("{}");zn.forEach(function(Yn){var rr=$n[Yn];if(Q.isDynamic(rr))"function"==typeof rr&&(rr=$n[Yn]=Q.unbox(rr)),Yn=V(rr,null),Hn=Hn||Yn.thisDep,On=On||Yn.propDep,Ln=Ln||Yn.contextDep;else{switch(Gn(Dn,".",Yn,"="),typeof rr){case"number":Gn(rr);break;case"string":Gn('"',rr,'"');break;case"object":Array.isArray(rr)&&Gn("[",rr.join(),"]");break;default:Gn(jt.link(rr))}Gn(";")}}),bn.dynamic[An]=new Q.DynamicVariable(4,{thisDep:Hn,contextDep:Ln,propDep:On,ref:Dn,append:function(Yn,rr){zn.forEach(function(ar){var vr=$n[ar];Q.isDynamic(vr)&&(vr=Yn.invoke(rr,vr),rr(Dn,".",ar,"=",vr,";"))})}}),delete bn.static[An]}}var jr=Vt.Record,di={add:32774,subtract:32778,"reverse subtract":32779};Ve.ext_blend_minmax&&(di.min=32775,di.max=32776);var Jn=Ve.angle_instanced_arrays,Ar=Ve.webgl_draw_buffers,mr=Ve.oes_vertex_array_object,lr={dirty:!0,profile:Pe.profile},ri={},si=[],Tr={},Zr={};dt("dither",3024),dt("blend.enable",3042),xt("blend.color","blendColor",[0,0,0,0]),xt("blend.equation","blendEquationSeparate",[32774,32774]),xt("blend.func","blendFuncSeparate",[1,0,1,0]),dt("depth.enable",2929,!0),xt("depth.func","depthFunc",513),xt("depth.range","depthRange",[0,1]),xt("depth.mask","depthMask",!0),xt("colorMask","colorMask",[!0,!0,!0,!0]),dt("cull.enable",2884),xt("cull.face","cullFace",1029),xt("frontFace","frontFace",2305),xt("lineWidth","lineWidth",1),dt("polygonOffset.enable",32823),xt("polygonOffset.offset","polygonOffset",[0,0]),dt("sample.alpha",32926),dt("sample.enable",32928),xt("sample.coverage","sampleCoverage",[1,!1]),dt("stencil.enable",2960),xt("stencil.mask","stencilMask",-1),xt("stencil.func","stencilFunc",[519,0,-1]),xt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),xt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),dt("scissor.enable",3089),xt("scissor.box","scissor",[0,0,ye.drawingBufferWidth,ye.drawingBufferHeight]),xt("viewport","viewport",[0,0,ye.drawingBufferWidth,ye.drawingBufferHeight]);var Ii={gl:ye,context:Wt,strings:ke,next:ri,current:lr,draw:bt,elements:Ke,buffer:nt,shader:ft,attributes:Vt.state,vao:Vt,uniforms:Ot,framebuffer:gt,extensions:Ve,timer:Pt,isBufferArgs:te},dn={primTypes:Ie,compareFuncs:yn,blendFuncs:cn,blendEquations:di,stencilOps:en,glTypes:Ee,orientationType:Xe};Ar&&(dn.backBuffer=[1029],dn.drawBuffer=r(Je.maxDrawbuffers,function(jt){return 0===jt?[0]:r(jt,function(bn){return 36064+bn})}));var Cn=0;return{next:ri,current:lr,procs:function(){var jt=Rt(),bn=jt.proc("poll"),An=jt.proc("refresh"),$n=jt.block();bn($n),An($n);var Gn,zn=(On=jt.shared).gl,Hn=On.next,Ln=On.current;$n(Ln,".dirty=false;"),un(jt,bn),un(jt,An,null,!0),Jn&&(Gn=jt.link(Jn)),Ve.oes_vertex_array_object&&An(jt.link(Ve.oes_vertex_array_object),".bindVertexArrayOES(null);");var On=An.def(On.attributes),Dn=An.def(0),Yn=jt.cond(Dn,".buffer");Yn.then(zn,".enableVertexAttribArray(i);",zn,".bindBuffer(",34962,",",Dn,".buffer.buffer);",zn,".vertexAttribPointer(i,",Dn,".size,",Dn,".type,",Dn,".normalized,",Dn,".stride,",Dn,".offset);").else(zn,".disableVertexAttribArray(i);",zn,".vertexAttrib4f(i,",Dn,".x,",Dn,".y,",Dn,".z,",Dn,".w);",Dn,".buffer=null;");var rr=jt.link(Je.maxAttributes,{stable:!0});return An("for(var i=0;i<",rr,";++i){",Dn,"=",On,"[i];",Yn,"}"),Jn&&An("for(var i=0;i<",rr,";++i){",Gn,".vertexAttribDivisorANGLE(i,",On,"[i].divisor);","}"),An(jt.shared.vao,".currentVAO=null;",jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"),Object.keys(Tr).forEach(function(ar){var vr=Tr[ar],xr=$n.def(Hn,".",ar),Ir=jt.block();Ir("if(",xr,"){",zn,".enable(",vr,")}else{",zn,".disable(",vr,")}",Ln,".",ar,"=",xr,";"),An(Ir),bn("if(",xr,"!==",Ln,".",ar,"){",Ir,"}")}),Object.keys(Zr).forEach(function(ar){var vr,xr,Ir=Zr[ar],Or=lr[ar],Rr=jt.block();Rr(zn,".",Ir,"("),d(Or)?(Ir=Or.length,vr=jt.global.def(Hn,".",ar),xr=jt.global.def(Ln,".",ar),Rr(r(Ir,function(Ur){return vr+"["+Ur+"]"}),");",r(Ir,function(Ur){return xr+"["+Ur+"]="+vr+"["+Ur+"];"}).join("")),bn("if(",r(Ir,function(Ur){return vr+"["+Ur+"]!=="+xr+"["+Ur+"]"}).join("||"),"){",Rr,"}")):(vr=$n.def(Hn,".",ar),xr=$n.def(Ln,".",ar),Rr(vr,");",Ln,".",ar,"=",vr,";"),bn("if(",vr,"!==",xr,"){",Rr,"}")),An(Rr)}),jt.compile()}(),compile:function(jt,bn,An,$n,Gn){var zn=Rt();zn.stats=zn.link(Gn),Object.keys(bn.static).forEach(function(Ln){hr(zn,bn,Ln)}),hn.forEach(function(Ln){hr(zn,jt,Ln)});var Hn=Un(jt,bn,An,$n);return Hn.shader.program&&(Hn.shader.program.attributes.sort(function(Ln,On){return Ln.name<On.name?-1:1}),Hn.shader.program.uniforms.sort(function(Ln,On){return Ln.name<On.name?-1:1})),function(Ln,On){var Dn=Ln.proc("draw",1);pn(Ln,Dn),Tn(Ln,Dn,On.context),un(Ln,Dn,On.framebuffer),an(Ln,Dn,On),fn(Ln,Dn,On.state),Sn(Ln,Dn,On,!1,!0);var Yn=On.shader.progVar.append(Ln,Dn);if(Dn(Ln.shared.gl,".useProgram(",Yn,".program);"),On.shader.program)Lr(Ln,Dn,On,On.shader.program);else{Dn(Ln.shared.vao,".setVAO(null);");var rr=Ln.global.def("{}"),ar=Dn.def(Yn,".id"),vr=Dn.def(rr,"[",ar,"]");Dn(Ln.cond(vr).then(vr,".call(this,a0);").else(vr,"=",rr,"[",ar,"]=",Ln.link(function(xr){return cr(Lr,Ln,On,xr,1)}),"(",Yn,");",vr,".call(this,a0);"))}0<Object.keys(On.state).length&&Dn(Ln.shared.current,".dirty=true;"),Ln.shared.vao&&Dn(Ln.shared.vao,".setVAO(null);")}(zn,Hn),function sr(jt,bn){function An(Ln){var On=bn.shader[Ln];On&&(On=On.append(jt,$n),isNaN(On)?$n.set(Gn.shader,"."+Ln,On):$n.set(Gn.shader,"."+Ln,jt.link(On,{stable:!0})))}var $n=jt.proc("scope",3);jt.batchId="a2";var Gn=jt.shared,zn=Gn.current;if(Tn(jt,$n,bn.context),bn.framebuffer&&bn.framebuffer.append(jt,$n),X(Object.keys(bn.state)).forEach(function(Ln){var On=bn.state[Ln],Dn=On.append(jt,$n);d(Dn)?Dn.forEach(function(Yn,rr){isNaN(Yn)?$n.set(jt.next[Ln],"["+rr+"]",Yn):$n.set(jt.next[Ln],"["+rr+"]",jt.link(Yn,{stable:!0}))}):ae(On)?$n.set(Gn.next,"."+Ln,jt.link(Dn,{stable:!0})):$n.set(Gn.next,"."+Ln,Dn)}),Sn(jt,$n,bn,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Ln){var On=bn.draw[Ln];On&&(On=On.append(jt,$n),isNaN(On)?$n.set(Gn.draw,"."+Ln,On):$n.set(Gn.draw,"."+Ln,jt.link(On),{stable:!0}))}),Object.keys(bn.uniforms).forEach(function(Ln){var On=bn.uniforms[Ln].append(jt,$n);Array.isArray(On)&&(On="["+On.map(function(Dn){return isNaN(Dn)?Dn:jt.link(Dn,{stable:!0})})+"]"),$n.set(Gn.uniforms,"["+jt.link(ke.id(Ln),{stable:!0})+"]",On)}),Object.keys(bn.attributes).forEach(function(Ln){var On=bn.attributes[Ln].append(jt,$n),Dn=jt.scopeAttrib(Ln);Object.keys(new jr).forEach(function(Yn){$n.set(Dn,"."+Yn,On[Yn])})}),bn.scopeVAO){var Hn=bn.scopeVAO.append(jt,$n);isNaN(Hn)?$n.set(Gn.vao,".targetVAO",Hn):$n.set(Gn.vao,".targetVAO",jt.link(Hn,{stable:!0}))}An("vert"),An("frag"),0<Object.keys(bn.state).length&&($n(zn,".dirty=true;"),$n.exit(zn,".dirty=true;")),$n("a1(",jt.shared.context,",a0,",jt.batchId,");")}(zn,Hn),function(Ln,On){function Dn(Or){return Or.contextDep&&rr||Or.propDep}var Yn=Ln.proc("batch",2);Ln.batchId="0",pn(Ln,Yn);var rr=!1,ar=!0;Object.keys(On.context).forEach(function(Or){rr=rr||On.context[Or].propDep}),rr||(Tn(Ln,Yn,On.context),ar=!1);var vr=!1;if((xr=On.framebuffer)?(xr.propDep?rr=vr=!0:xr.contextDep&&rr&&(vr=!0),vr||un(Ln,Yn,xr)):un(Ln,Yn,null),On.state.viewport&&On.state.viewport.propDep&&(rr=!0),an(Ln,Yn,On),fn(Ln,Yn,On.state,function(Or){return!Dn(Or)}),On.profile&&Dn(On.profile)||Sn(Ln,Yn,On,!1,"a1"),On.contextDep=rr,On.needsContext=ar,On.needsFramebuffer=vr,(ar=On.shader.progVar).contextDep&&rr||ar.propDep)qr(Ln,Yn,On,null);else if(ar=ar.append(Ln,Yn),Yn(Ln.shared.gl,".useProgram(",ar,".program);"),On.shader.program)qr(Ln,Yn,On,On.shader.program);else{Yn(Ln.shared.vao,".setVAO(null);");var xr=Ln.global.def("{}"),Ir=(vr=Yn.def(ar,".id"),Yn.def(xr,"[",vr,"]"));Yn(Ln.cond(Ir).then(Ir,".call(this,a0,a1);").else(Ir,"=",xr,"[",vr,"]=",Ln.link(function(Or){return cr(qr,Ln,On,Or,2)}),"(",ar,");",Ir,".call(this,a0,a1);"))}0<Object.keys(On.state).length&&Yn(Ln.shared.current,".dirty=true;"),Ln.shared.vao&&Yn(Ln.shared.vao,".setVAO(null);")}(zn,Hn),H(zn.compile(),{destroy:function(){Hn.shader.program.destroy()}})}}}function ie(ye,ke){for(var Ve=0;Ve<ye.length;++Ve)if(ye[Ve]===ke)return Ve;return-1}var H=function(ye,ke){for(var Ve=Object.keys(ke),Je=0;Je<Ve.length;++Je)ye[Ve[Je]]=ke[Ve[Je]];return ye},ee=0,Q={DynamicVariable:g,define:function(ye,ke){return new g(ye,m(ke+""))},isDynamic:function(ye){return"function"==typeof ye&&!ye._reglType||ye instanceof g},unbox:function ye(ke,Ve){return"function"==typeof ke?new g(0,ke):"number"==typeof ke||"boolean"==typeof ke?new g(5,ke):Array.isArray(ke)?new g(6,ke.map(function(Je,nt){return ye(Je,Ve+"["+nt+"]")})):ke instanceof g?ke:void 0},accessor:m},oe={next:"function"==typeof requestAnimationFrame?function(ye){return requestAnimationFrame(ye)}:function(ye){return setTimeout(ye,16)},cancel:"function"==typeof cancelAnimationFrame?function(ye){return cancelAnimationFrame(ye)}:clearTimeout},le=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},de=a();de.zero=a();var be=function(ye){return ye instanceof Uint8Array||ye instanceof Uint16Array||ye instanceof Uint32Array||ye instanceof Int8Array||ye instanceof Int16Array||ye instanceof Int32Array||ye instanceof Float32Array||ye instanceof Float64Array||ye instanceof Uint8ClampedArray},he=function(ye){return Object.keys(ye).map(function(ke){return ye[ke]})},_e={shape:function(ye){for(var ke=[];ye.length;ye=ye[0])ke.push(ye.length);return ke},flatten:function(ye,ke,Ve,Je){var nt=1;if(ke.length)for(var Ke=0;Ke<ke.length;++Ke)nt*=ke[Ke];else nt=0;switch(Ve=Je||de.allocType(Ve,nt),ke.length){case 0:break;case 1:for(Je=ke[0],ke=0;ke<Je;++ke)Ve[ke]=ye[ke];break;case 2:for(Je=ke[0],ke=ke[1],Ke=nt=0;Ke<Je;++Ke)for(var vt=ye[Ke],gt=0;gt<ke;++gt)Ve[nt++]=vt[gt];break;case 3:p(ye,ke[0],ke[1],ke[2],Ve,0);break;default:!function Ot(Vt,ft,bt,Wt,Pt){for(var Bt=1,Pe=bt+1;Pe<ft.length;++Pe)Bt*=ft[Pe];var et=ft[bt];if(ft.length-bt==4){var dt=ft[bt+1],xt=ft[bt+2];for(ft=ft[bt+3],Pe=0;Pe<et;++Pe)p(Vt[Pe],dt,xt,ft,Wt,Pt),Pt+=Bt}else for(Pe=0;Pe<et;++Pe)Ot(Vt[Pe],ft,bt+1,Wt,Pt),Pt+=Bt}(ye,ke,0,Ve,0)}return Ve}},Ce={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ee={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ae={dynamic:35048,stream:35040,static:35044},ze=_e.flatten,ve=_e.shape,Te=[];Te[5120]=1,Te[5122]=2,Te[5124]=4,Te[5121]=1,Te[5123]=2,Te[5125]=4,Te[5126]=4;var Ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},De=new Float32Array(1),Fe=new Uint32Array(De.buffer),Ue=[9984,9986,9985,9987],qe=[0,6409,6410,6407,6408],je={};je[6409]=je[6406]=je[6402]=1,je[34041]=je[6410]=2,je[6407]=je[35904]=3,je[6408]=je[35906]=4;var rt=o("HTMLCanvasElement"),Ne=o("OffscreenCanvas"),Be=o("CanvasRenderingContext2D"),We=o("ImageBitmap"),Ye=o("HTMLImageElement"),lt=o("HTMLVideoElement"),mt=Object.keys(Ce).concat([rt,Ne,Be,We,Ye,lt]),Tt=[];Tt[5121]=1,Tt[5126]=4,Tt[36193]=2,Tt[5123]=2,Tt[5125]=4;var It=[];It[32854]=2,It[32855]=2,It[36194]=2,It[34041]=4,It[33776]=.5,It[33777]=.5,It[33778]=1,It[33779]=1,It[35986]=.5,It[35987]=1,It[34798]=1,It[35840]=.5,It[35841]=.25,It[35842]=.5,It[35843]=.25,It[36196]=.5;var Ct=[];Ct[32854]=2,Ct[32855]=2,Ct[36194]=2,Ct[33189]=2,Ct[36168]=1,Ct[34041]=4,Ct[35907]=4,Ct[34836]=16,Ct[34842]=8,Ct[34843]=6;var at=[];at[6408]=4,at[6407]=3;var St=[];St[5121]=1,St[5126]=4,St[36193]=2;var Xt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],tn=["x","y","z","w"],hn="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),cn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},yn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},en={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xe={cw:2304,ccw:2305},tt=new K(!1,!1,!1,function(){});return function(ye){function ke(){if(0===Qn.length)Yt&&Yt.update(),jr=null;else{jr=oe.next(ke),ft();for(var Jn=Qn.length-1;0<=Jn;--Jn){var Ar=Qn[Jn];Ar&&Ar(Un,null,0)}Pt.flush(),Yt&&Yt.update()}}function Ve(){!jr&&0<Qn.length&&(jr=oe.next(ke))}function Je(){jr&&(oe.cancel(ke),jr=null)}function nt(Jn){Jn.preventDefault(),Je(),qr.forEach(function(Ar){Ar()})}function Ke(Jn){Pt.getError(),Pe.restore(),pn.restore(),un.restore(),Sn.restore(),Nn.restore(),Kn.restore(),fn.restore(),Yt&&Yt.restore(),Bn.procs.refresh(),Ve(),sr.forEach(function(Ar){Ar()})}function vt(Jn){function Ar(jt,bn){var An={},$n={};return Object.keys(jt).forEach(function(Gn){var zn=jt[Gn];if(Q.isDynamic(zn))$n[Gn]=Q.unbox(zn,Gn);else{if(bn&&Array.isArray(zn))for(var Hn=0;Hn<zn.length;++Hn)if(Q.isDynamic(zn[Hn]))return void($n[Gn]=Q.unbox(zn,Gn));An[Gn]=zn}}),{dynamic:$n,static:An}}var mr=Ar(Jn.context||{},!0),lr=Ar(Jn.uniforms||{},!0),ri=Ar(Jn.attributes||{},!1);Jn=Ar(function(jt){function bn($n){if($n in An){var Gn=An[$n];delete An[$n],Object.keys(Gn).forEach(function(zn){An[$n+"."+zn]=Gn[zn]})}}var An=H({},jt);return delete An.uniforms,delete An.attributes,delete An.context,delete An.vao,"stencil"in An&&An.stencil.op&&(An.stencil.opBack=An.stencil.opFront=An.stencil.op,delete An.stencil.op),bn("blend"),bn("depth"),bn("cull"),bn("stencil"),bn("polygonOffset"),bn("scissor"),bn("sample"),"vao"in jt&&(An.vao=jt.vao),An}(Jn),!1);var si={gpuTime:0,cpuTime:0,count:0},Tr=Bn.compile(Jn,ri,lr,mr,si),Zr=Tr.draw,Ii=Tr.batch,dn=Tr.scope,Cn=[];return H(function(jt,bn){var An;if("function"==typeof jt)return dn.call(this,null,jt,0);if("function"==typeof bn)if("number"==typeof jt)for(An=0;An<jt;++An)dn.call(this,null,bn,An);else{if(!Array.isArray(jt))return dn.call(this,jt,bn,0);for(An=0;An<jt.length;++An)dn.call(this,jt[An],bn,An)}else if("number"==typeof jt){if(0<jt)return Ii.call(this,function($n){for(;Cn.length<$n;)Cn.push(null);return Cn}(0|jt),0|jt)}else{if(!Array.isArray(jt))return Zr.call(this,jt);if(jt.length)return Ii.call(this,jt,jt.length)}},{stats:si,destroy:function(){Tr.destroy()}})}function gt(Jn,Ar){var mr=0;Bn.procs.poll();var lr=Ar.color;lr&&(Pt.clearColor(+lr[0]||0,+lr[1]||0,+lr[2]||0,+lr[3]||0),mr|=16384),"depth"in Ar&&(Pt.clearDepth(+Ar.depth),mr|=256),"stencil"in Ar&&(Pt.clearStencil(0|Ar.stencil),mr|=1024),Pt.clear(mr)}function Ot(Jn){return Qn.push(Jn),Ve(),{cancel:function(){var Ar=ie(Qn,Jn);Qn[Ar]=function mr(){var lr=ie(Qn,mr);Qn[lr]=Qn[Qn.length-1],--Qn.length,0>=Qn.length&&Je()}}}}function Vt(){var Jn=cr.viewport,Ar=cr.scissor_box;Jn[0]=Jn[1]=Ar[0]=Ar[1]=0,Un.viewportWidth=Un.framebufferWidth=Un.drawingBufferWidth=Jn[2]=Ar[2]=Pt.drawingBufferWidth,Un.viewportHeight=Un.framebufferHeight=Un.drawingBufferHeight=Jn[3]=Ar[3]=Pt.drawingBufferHeight}function ft(){Un.tick+=1,Un.time=Wt(),Vt(),Bn.procs.poll()}function bt(){Sn.refresh(),Vt(),Bn.procs.refresh(),Yt&&Yt.update()}function Wt(){return(le()-nn)/1e3}if(!(ye=function e(ye){var ke,Ve,Je,nt,Ke=ye||{};ye={};var vt=[],gt=[],Ot=typeof window>"u"?1:window.devicePixelRatio,Vt=!1,ft={},bt=function(Pt){},Wt=function(){};if("string"==typeof Ke?ke=document.querySelector(Ke):"object"==typeof Ke&&("string"==typeof Ke.nodeName&&"function"==typeof Ke.appendChild&&"function"==typeof Ke.getBoundingClientRect?ke=Ke:"function"==typeof Ke.drawArrays||"function"==typeof Ke.drawElements?Je=(nt=Ke).canvas:("gl"in Ke?nt=Ke.gl:"canvas"in Ke?Je=y(Ke.canvas):"container"in Ke&&(Ve=y(Ke.container)),"attributes"in Ke&&(ye=Ke.attributes),"extensions"in Ke&&(vt=b(Ke.extensions)),"optionalExtensions"in Ke&&(gt=b(Ke.optionalExtensions)),"onDone"in Ke&&(bt=Ke.onDone),"profile"in Ke&&(Vt=!!Ke.profile),"pixelRatio"in Ke&&(Ot=+Ke.pixelRatio),"cachedCode"in Ke&&(ft=Ke.cachedCode))),ke&&("canvas"===ke.nodeName.toLowerCase()?Je=ke:Ve=ke),!nt){if(!Je){if(!(ke=function(Pt,Bt,Pe){function et(){var Rt=window.innerWidth,Yt=window.innerHeight;Pt!==document.body&&(Rt=(Yt=xt.getBoundingClientRect()).right-Yt.left,Yt=Yt.bottom-Yt.top),xt.width=Pe*Rt,xt.height=Pe*Yt}var dt,xt=document.createElement("canvas");return H(xt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Pt.appendChild(xt),Pt===document.body&&(xt.style.position="absolute",H(Pt.style,{margin:0,padding:0})),Pt!==document.body&&"function"==typeof ResizeObserver?(dt=new ResizeObserver(function(){setTimeout(et)})).observe(Pt):window.addEventListener("resize",et,!1),et(),{canvas:xt,onDestroy:function(){dt?dt.disconnect():window.removeEventListener("resize",et),Pt.removeChild(xt)}}}(Ve||document.body,0,Ot)))return null;Je=ke.canvas,Wt=ke.onDestroy}void 0===ye.premultipliedAlpha&&(ye.premultipliedAlpha=!0),nt=function(Pt,Bt){function Pe(et){try{return Pt.getContext(et,Bt)}catch{return null}}return Pe("webgl")||Pe("experimental-webgl")||Pe("webgl-experimental")}(Je,ye)}return nt?{gl:nt,canvas:Je,container:Ve,extensions:vt,optionalExtensions:gt,pixelRatio:Ot,profile:Vt,cachedCode:ft,onDone:bt,onDestroy:Wt}:(Wt(),bt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(ye)))return null;var Pt=ye.gl,Bt=Pt.getContextAttributes();Pt.isContextLost();var Pe=function(Jn,Ar){function mr(Tr){var Zr;Tr=Tr.toLowerCase();try{Zr=lr[Tr]=Jn.getExtension(Tr)}catch{}return!!Zr}for(var lr={},ri=0;ri<Ar.extensions.length;++ri){var si=Ar.extensions[ri];if(!mr(si))return Ar.onDestroy(),Ar.onDone('"'+si+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ar.optionalExtensions.forEach(mr),{extensions:lr,restore:function(){Object.keys(lr).forEach(function(Tr){if(lr[Tr]&&!mr(Tr))throw Error("(regl): error restoring extension "+Tr)})}}}(Pt,ye);if(!Pe)return null;var Jn,Ar,et=(Jn={"":0},Ar=[""],{id:function(mr){var lr=Jn[mr];return lr||(lr=Jn[mr]=Ar.length,Ar.push(mr),lr)},str:function(mr){return Ar[mr]}}),dt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},xt=ye.cachedCode||{},Rt=Pe.extensions,Yt=function(Jn,Ar){function mr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function lr(Cn,jt,bn){var An=Tr.pop()||new mr;An.startQueryIndex=Cn,An.endQueryIndex=jt,An.sum=0,An.stats=bn,Zr.push(An)}if(!Ar.ext_disjoint_timer_query)return null;var ri=[],si=[],Tr=[],Zr=[],Ii=[],dn=[];return{beginQuery:function(Cn){var jt=ri.pop()||Ar.ext_disjoint_timer_query.createQueryEXT();Ar.ext_disjoint_timer_query.beginQueryEXT(35007,jt),si.push(jt),lr(si.length-1,si.length,Cn)},endQuery:function(){Ar.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:lr,update:function(){var Cn,jt;if(0!==(Cn=si.length)){dn.length=Math.max(dn.length,Cn+1),Ii.length=Math.max(Ii.length,Cn+1),Ii[0]=0;var bn=dn[0]=0;for(jt=Cn=0;jt<si.length;++jt){var An=si[jt];Ar.ext_disjoint_timer_query.getQueryObjectEXT(An,34919)?(bn+=Ar.ext_disjoint_timer_query.getQueryObjectEXT(An,34918),ri.push(An)):si[Cn++]=An,Ii[jt+1]=bn,dn[jt+1]=Cn}for(si.length=Cn,jt=Cn=0;jt<Zr.length;++jt){var $n=(bn=Zr[jt]).startQueryIndex;bn.sum+=Ii[An=bn.endQueryIndex]-Ii[$n],(An=dn[An])===($n=dn[$n])?(bn.stats.gpuTime+=bn.sum/1e6,Tr.push(bn)):(bn.startQueryIndex=$n,bn.endQueryIndex=An,Zr[Cn++]=bn)}Zr.length=Cn}},getNumPendingQueries:function(){return si.length},clear:function(){ri.push.apply(ri,si);for(var Cn=0;Cn<ri.length;Cn++)Ar.ext_disjoint_timer_query.deleteQueryEXT(ri[Cn]);si.length=0,ri.length=0},restore:function(){si.length=0,ri.length=0}}}(0,Rt),nn=le(),Kt=Pt.drawingBufferWidth,Mn=Pt.drawingBufferHeight,Un={tick:0,time:0,viewportWidth:Kt,viewportHeight:Mn,framebufferWidth:Kt,framebufferHeight:Mn,drawingBufferWidth:Kt,drawingBufferHeight:Mn,pixelRatio:ye.pixelRatio},Tn=(Kt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(ye,ke){var Ve=1;ke.ext_texture_filter_anisotropic&&(Ve=ye.getParameter(34047));var Je=1,nt=1;ke.webgl_draw_buffers&&(Je=ye.getParameter(34852),nt=ye.getParameter(36063));var Ke=!!ke.oes_texture_float;if(Ke){Ke=ye.createTexture(),ye.bindTexture(3553,Ke),ye.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var vt=ye.createFramebuffer();if(ye.bindFramebuffer(36160,vt),ye.framebufferTexture2D(36160,36064,3553,Ke,0),ye.bindTexture(3553,null),36053!==ye.checkFramebufferStatus(36160))Ke=!1;else{ye.viewport(0,0,1,1),ye.clearColor(1,0,0,1),ye.clear(16384);var gt=de.allocType(5126,4);ye.readPixels(0,0,1,1,6408,5126,gt),ye.getError()?Ke=!1:(ye.deleteFramebuffer(vt),ye.deleteTexture(Ke),Ke=1===gt[0]),de.freeType(gt)}}return gt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(gt=ye.createTexture(),vt=de.allocType(5121,36),ye.activeTexture(33984),ye.bindTexture(34067,gt),ye.texImage2D(34069,0,6408,3,3,0,6408,5121,vt),de.freeType(vt),ye.bindTexture(34067,null),ye.deleteTexture(gt),gt=!ye.getError()),{colorBits:[ye.getParameter(3410),ye.getParameter(3411),ye.getParameter(3412),ye.getParameter(3413)],depthBits:ye.getParameter(3414),stencilBits:ye.getParameter(3415),subpixelBits:ye.getParameter(3408),extensions:Object.keys(ke).filter(function(Ot){return!!ke[Ot]}),maxAnisotropic:Ve,maxDrawbuffers:Je,maxColorAttachments:nt,pointSizeDims:ye.getParameter(33901),lineWidthDims:ye.getParameter(33902),maxViewportDims:ye.getParameter(3386),maxCombinedTextureUnits:ye.getParameter(35661),maxCubeMapSize:ye.getParameter(34076),maxRenderbufferSize:ye.getParameter(34024),maxTextureUnits:ye.getParameter(34930),maxTextureSize:ye.getParameter(3379),maxAttributes:ye.getParameter(34921),maxVertexUniforms:ye.getParameter(36347),maxVertexTextureUnits:ye.getParameter(35660),maxVaryingVectors:ye.getParameter(36348),maxFragmentUniforms:ye.getParameter(36349),glsl:ye.getParameter(35724),renderer:ye.getParameter(7937),vendor:ye.getParameter(7936),version:ye.getParameter(7938),readFloat:Ke,npotTextureCube:gt}}(Pt,Rt)),un=function c(ye,ke,Ve,Je){function nt(bt){this.id=Ot++,this.buffer=ye.createBuffer(),this.type=bt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ve.profile&&(this.stats={size:0})}function Ke(bt,Wt,Pt){bt.byteLength=Wt.byteLength,ye.bufferData(bt.type,Wt,Pt)}function vt(bt,Wt,Pt,Bt,Pe,et){if(bt.usage=Pt,Array.isArray(Wt)){if(bt.dtype=Bt||5126,0<Wt.length)if(Array.isArray(Wt[0])){Pe=ve(Wt);for(var dt=Bt=1;dt<Pe.length;++dt)Bt*=Pe[dt];bt.dimension=Bt,Ke(bt,Wt=ze(Wt,Pe,bt.dtype),Pt),et?bt.persistentData=Wt:de.freeType(Wt)}else"number"==typeof Wt[0]?(bt.dimension=Pe,i(Pe=de.allocType(bt.dtype,Wt.length),Wt),Ke(bt,Pe,Pt),et?bt.persistentData=Pe:de.freeType(Pe)):be(Wt[0])&&(bt.dimension=Wt[0].length,bt.dtype=Bt||s(Wt[0])||5126,Ke(bt,Wt=ze(Wt,[Wt.length,Wt[0].length],bt.dtype),Pt),et?bt.persistentData=Wt:de.freeType(Wt))}else if(be(Wt))bt.dtype=Bt||s(Wt),bt.dimension=Pe,Ke(bt,Wt,Pt),et&&(bt.persistentData=new Uint8Array(new Uint8Array(Wt.buffer)));else if(t(Wt)){var xt=Wt.stride,Rt=(dt=Wt.offset,0),Yt=0,nn=0,Kt=0;1===(Pe=Wt.shape).length?(Rt=Pe[0],Yt=1,nn=xt[0],Kt=0):2===Pe.length&&(Rt=Pe[0],Yt=Pe[1],nn=xt[0],Kt=xt[1]),bt.dtype=Bt||s(Wt.data)||5126,bt.dimension=Yt,f(Pe=de.allocType(bt.dtype,Rt*Yt),Wt.data,Rt,Yt,nn,Kt,dt),Ke(bt,Pe,Pt),et?bt.persistentData=Pe:de.freeType(Pe)}else Wt instanceof ArrayBuffer&&(bt.dtype=5121,bt.dimension=Pe,Ke(bt,Wt,Pt),et&&(bt.persistentData=new Uint8Array(new Uint8Array(Wt))))}function gt(bt){ke.bufferCount--,Je(bt),ye.deleteBuffer(bt.buffer),bt.buffer=null,delete Vt[bt.id]}var Ot=0,Vt={};nt.prototype.bind=function(){ye.bindBuffer(this.type,this.buffer)},nt.prototype.destroy=function(){gt(this)};var ft=[];return Ve.profile&&(ke.getTotalBufferSize=function(){var bt=0;return Object.keys(Vt).forEach(function(Wt){bt+=Vt[Wt].stats.size}),bt}),{create:function(bt,Wt,Pt,Bt){function Pe(dt){var xt=35044,Rt=null,Yt=0,nn=0,Kt=1;return Array.isArray(dt)||be(dt)||t(dt)||dt instanceof ArrayBuffer?Rt=dt:"number"==typeof dt?Yt=0|dt:dt&&("data"in dt&&(Rt=dt.data),"usage"in dt&&(xt=Ae[dt.usage]),"type"in dt&&(nn=Ee[dt.type]),"dimension"in dt&&(Kt=0|dt.dimension),"length"in dt&&(Yt=0|dt.length)),et.bind(),Rt?vt(et,Rt,xt,nn,Kt,Bt):(Yt&&ye.bufferData(et.type,Yt,xt),et.dtype=nn||5121,et.usage=xt,et.dimension=Kt,et.byteLength=Yt),Ve.profile&&(et.stats.size=et.byteLength*Te[et.dtype]),Pe}ke.bufferCount++;var et=new nt(Wt);return Vt[et.id]=et,Pt||Pe(bt),Pe._reglType="buffer",Pe._buffer=et,Pe.subdata=function(dt,xt){var Rt,Yt=0|(xt||0);if(et.bind(),be(dt)||dt instanceof ArrayBuffer)ye.bufferSubData(et.type,Yt,dt);else if(Array.isArray(dt)){if(0<dt.length)if("number"==typeof dt[0]){var nn=de.allocType(et.dtype,dt.length);i(nn,dt),ye.bufferSubData(et.type,Yt,nn),de.freeType(nn)}else(Array.isArray(dt[0])||be(dt[0]))&&(Rt=ve(dt),nn=ze(dt,Rt,et.dtype),ye.bufferSubData(et.type,Yt,nn),de.freeType(nn))}else if(t(dt)){var Kt=dt.stride,Mn=nn=0,Un=0,Tn=0;1===(Rt=dt.shape).length?(nn=Rt[0],Mn=1,Un=Kt[0],Tn=0):2===Rt.length&&(nn=Rt[0],Mn=Rt[1],Un=Kt[0],Tn=Kt[1]),Rt=Array.isArray(dt.data)?et.dtype:s(dt.data),f(Rt=de.allocType(Rt,nn*Mn),dt.data,nn,Mn,Un,Tn,dt.offset),ye.bufferSubData(et.type,Yt,Rt),de.freeType(Rt)}return Pe},Ve.profile&&(Pe.stats=et.stats),Pe.destroy=function(){gt(et)},Pe},createStream:function(bt,Wt){var Pt=ft.pop();return Pt||(Pt=new nt(bt)),Pt.bind(),vt(Pt,Wt,35040,0,1,!1),Pt},destroyStream:function(bt){ft.push(bt)},clear:function(){he(Vt).forEach(gt),ft.forEach(gt)},getBuffer:function(bt){return bt&&bt._buffer instanceof nt?bt._buffer:null},restore:function(){he(Vt).forEach(function(bt){bt.buffer=ye.createBuffer(),ye.bindBuffer(bt.type,bt.buffer),ye.bufferData(bt.type,bt.persistentData||bt.byteLength,bt.usage)})},_initBuffer:vt}}(Pt,dt,ye,function(Jn){return fn.destroyBuffer(Jn)}),an=function l(ye,ke,Ve,Je){function nt(bt){this.id=Ot++,gt[this.id]=this,this.buffer=bt,this.primType=4,this.type=this.vertCount=0}function Ke(bt,Wt,Pt,Bt,Pe,et,dt){var xt;if(bt.buffer.bind(),Wt?((xt=dt)||be(Wt)&&(!t(Wt)||be(Wt.data))||(xt=ke.oes_element_index_uint?5125:5123),Ve._initBuffer(bt.buffer,Wt,Pt,xt,3)):(ye.bufferData(34963,et,Pt),bt.buffer.dtype=xt||5121,bt.buffer.usage=Pt,bt.buffer.dimension=3,bt.buffer.byteLength=et),xt=dt,!dt){switch(bt.buffer.dtype){case 5121:case 5120:xt=5121;break;case 5123:case 5122:xt=5123;break;case 5125:case 5124:xt=5125}bt.buffer.dtype=xt}bt.type=xt,0>(Wt=Pe)&&(Wt=bt.buffer.byteLength,5123===xt?Wt>>=1:5125===xt&&(Wt>>=2)),bt.vertCount=Wt,Wt=Bt,0>Bt&&(Wt=4,1===(Bt=bt.buffer.dimension)&&(Wt=0),2===Bt&&(Wt=1),3===Bt&&(Wt=4)),bt.primType=Wt}function vt(bt){Je.elementsCount--,delete gt[bt.id],bt.buffer.destroy(),bt.buffer=null}var gt={},Ot=0,Vt={uint8:5121,uint16:5123};ke.oes_element_index_uint&&(Vt.uint32=5125),nt.prototype.bind=function(){this.buffer.bind()};var ft=[];return{create:function(bt,Wt){function Pt(et){if(et)if("number"==typeof et)Bt(et),Pe.primType=4,Pe.vertCount=0|et,Pe.type=5121;else{var dt=null,xt=35044,Rt=-1,Yt=-1,nn=0,Kt=0;Array.isArray(et)||be(et)||t(et)?dt=et:("data"in et&&(dt=et.data),"usage"in et&&(xt=Ae[et.usage]),"primitive"in et&&(Rt=Ie[et.primitive]),"count"in et&&(Yt=0|et.count),"type"in et&&(Kt=Vt[et.type]),"length"in et?nn=0|et.length:(nn=Yt,5123===Kt||5122===Kt?nn*=2:5125!==Kt&&5124!==Kt||(nn*=4))),Ke(Pe,dt,xt,Rt,Yt,nn,Kt)}else Bt(),Pe.primType=4,Pe.vertCount=0,Pe.type=5121;return Pt}var Bt=Ve.create(null,34963,!0),Pe=new nt(Bt._buffer);return Je.elementsCount++,Pt(bt),Pt._reglType="elements",Pt._elements=Pe,Pt.subdata=function(et,dt){return Bt.subdata(et,dt),Pt},Pt.destroy=function(){vt(Pe)},Pt},createStream:function(bt){var Wt=ft.pop();return Wt||(Wt=new nt(Ve.create(null,34963,!0,!1)._buffer)),Ke(Wt,bt,35040,-1,-1,0,0),Wt},destroyStream:function(bt){ft.push(bt)},getElements:function(bt){return"function"==typeof bt&&bt._elements instanceof nt?bt._elements:null},clear:function(){he(gt).forEach(vt)}}}(Pt,Rt,un,dt),fn=function O(ye,ke,Ve,Je,nt,Ke,vt){function gt(){this.id=++ft,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Pt=ke.oes_vertex_array_object;this.vao=Pt?Pt.createVertexArrayOES():null,bt[this.id]=this,this.buffers=[]}var Ot=Ve.maxAttributes,Vt=Array(Ot);for(Ve=0;Ve<Ot;++Ve)Vt[Ve]=new R;var ft=0,bt={},Wt={Record:R,scope:{},state:Vt,currentVAO:null,targetVAO:null,restore:ke.oes_vertex_array_object?function(){ke.oes_vertex_array_object&&he(bt).forEach(function(Pt){Pt.refresh()})}:function(){},createVAO:function(Pt){function Bt(et){var dt;Array.isArray(et)?(dt=et,Pe.elements&&Pe.ownsElements&&Pe.elements.destroy(),Pe.elements=null,Pe.ownsElements=!1,Pe.offset=0,Pe.count=0,Pe.instances=-1,Pe.primitive=4):(et.elements?(dt=et.elements,Pe.ownsElements?("function"==typeof dt&&"elements"===dt._reglType?Pe.elements.destroy():Pe.elements(dt),Pe.ownsElements=!1):Ke.getElements(et.elements)?(Pe.elements=et.elements,Pe.ownsElements=!1):(Pe.elements=Ke.create(et.elements),Pe.ownsElements=!0)):(Pe.elements=null,Pe.ownsElements=!1),dt=et.attributes,Pe.offset=0,Pe.count=-1,Pe.instances=-1,Pe.primitive=4,Pe.elements&&(Pe.count=Pe.elements._elements.vertCount,Pe.primitive=Pe.elements._elements.primType),"offset"in et&&(Pe.offset=0|et.offset),"count"in et&&(Pe.count=0|et.count),"instances"in et&&(Pe.instances=0|et.instances),"primitive"in et&&(Pe.primitive=Ie[et.primitive])),et={};var xt=Pe.attributes;xt.length=dt.length;for(var Rt=0;Rt<dt.length;++Rt){var Yt,nn=dt[Rt],Kt=xt[Rt]=new R,Mn=nn.data||nn;Array.isArray(Mn)||be(Mn)||t(Mn)?(Pe.buffers[Rt]&&(Yt=Pe.buffers[Rt],be(Mn)&&Yt._buffer.byteLength>=Mn.byteLength?Yt.subdata(Mn):(Yt.destroy(),Pe.buffers[Rt]=null)),Pe.buffers[Rt]||(Yt=Pe.buffers[Rt]=nt.create(nn,34962,!1,!0)),Kt.buffer=nt.getBuffer(Yt),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1,et[Rt]=1):nt.getBuffer(nn)?(Kt.buffer=nt.getBuffer(nn),Kt.size=0|Kt.buffer.dimension,Kt.normalized=!1,Kt.type=Kt.buffer.dtype,Kt.offset=0,Kt.stride=0,Kt.divisor=0,Kt.state=1):nt.getBuffer(nn.buffer)?(Kt.buffer=nt.getBuffer(nn.buffer),Kt.size=0|(+nn.size||Kt.buffer.dimension),Kt.normalized=!!nn.normalized||!1,Kt.type="type"in nn?Ee[nn.type]:Kt.buffer.dtype,Kt.offset=0|(nn.offset||0),Kt.stride=0|(nn.stride||0),Kt.divisor=0|(nn.divisor||0),Kt.state=1):"x"in nn&&(Kt.x=+nn.x||0,Kt.y=+nn.y||0,Kt.z=+nn.z||0,Kt.w=+nn.w||0,Kt.state=2)}for(Yt=0;Yt<Pe.buffers.length;++Yt)!et[Yt]&&Pe.buffers[Yt]&&(Pe.buffers[Yt].destroy(),Pe.buffers[Yt]=null);return Pe.refresh(),Bt}var Pe=new gt;return Je.vaoCount+=1,Bt.destroy=function(){for(var et=0;et<Pe.buffers.length;++et)Pe.buffers[et]&&Pe.buffers[et].destroy();Pe.buffers.length=0,Pe.ownsElements&&(Pe.elements.destroy(),Pe.elements=null,Pe.ownsElements=!1),Pe.destroy()},Bt._vao=Pe,Bt._reglType="vao",Bt(Pt)},getVAO:function(Pt){return"function"==typeof Pt&&Pt._vao?Pt._vao:null},destroyBuffer:function(Pt){for(var Bt=0;Bt<Vt.length;++Bt){var Pe=Vt[Bt];Pe.buffer===Pt&&(ye.disableVertexAttribArray(Bt),Pe.buffer=null)}},setVAO:ke.oes_vertex_array_object?function(Pt){Pt!==Wt.currentVAO&&(ke.oes_vertex_array_object.bindVertexArrayOES(Pt?Pt.vao:null),Wt.currentVAO=Pt)}:function(Pt){if(Pt!==Wt.currentVAO){if(Pt)Pt.bindAttrs();else{for(var Bt=ke.angle_instanced_arrays,Pe=0;Pe<Vt.length;++Pe){var et=Vt[Pe];et.buffer?(ye.enableVertexAttribArray(Pe),et.buffer.bind(),ye.vertexAttribPointer(Pe,et.size,et.type,et.normalized,et.stride,et.offfset),Bt&&et.divisor&&Bt.vertexAttribDivisorANGLE(Pe,et.divisor)):(ye.disableVertexAttribArray(Pe),ye.vertexAttrib4f(Pe,et.x,et.y,et.z,et.w))}ye.bindBuffer(34963,vt.elements?vt.elements.buffer.buffer:null)}Wt.currentVAO=Pt}},clear:ke.oes_vertex_array_object?function(){he(bt).forEach(function(Pt){Pt.destroy()})}:function(){}};return gt.prototype.bindAttrs=function(){for(var Pt=ke.angle_instanced_arrays,Bt=this.attributes,Pe=0;Pe<Bt.length;++Pe){var et=Bt[Pe];et.buffer?(ye.enableVertexAttribArray(Pe),ye.bindBuffer(34962,et.buffer.buffer),ye.vertexAttribPointer(Pe,et.size,et.type,et.normalized,et.stride,et.offset),Pt&&et.divisor&&Pt.vertexAttribDivisorANGLE(Pe,et.divisor)):(ye.disableVertexAttribArray(Pe),ye.vertexAttrib4f(Pe,et.x,et.y,et.z,et.w))}for(Pt=Bt.length;Pt<Ot;++Pt)ye.disableVertexAttribArray(Pt);(Pt=Ke.getElements(this.elements))?ye.bindBuffer(34963,Pt.buffer.buffer):ye.bindBuffer(34963,null)},gt.prototype.refresh=function(){var Pt=ke.oes_vertex_array_object;Pt&&(Pt.bindVertexArrayOES(this.vao),this.bindAttrs(),Wt.currentVAO=null,Pt.bindVertexArrayOES(null))},gt.prototype.destroy=function(){if(this.vao){var Pt=ke.oes_vertex_array_object;this===Wt.currentVAO&&(Wt.currentVAO=null,Pt.bindVertexArrayOES(null)),Pt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),bt[this.id]&&(delete bt[this.id],--Je.vaoCount)},Wt}(Pt,Rt,Tn,dt,un,an,Kt),pn=function C(ye,ke,Ve,Je){function nt(Bt,Pe,et,dt){this.name=Bt,this.id=Pe,this.location=et,this.info=dt}function Ke(Bt,Pe){for(var et=0;et<Bt.length;++et)if(Bt[et].id===Pe.id)return void(Bt[et].location=Pe.location);Bt.push(Pe)}function vt(Bt,Pe,et){if(!(xt=(et=35632===Bt?Vt:ft)[Pe])){var dt=ke.str(Pe),xt=ye.createShader(Bt);ye.shaderSource(xt,dt),ye.compileShader(xt),et[Pe]=xt}return xt}function gt(Bt,Pe){this.id=Pt++,this.fragId=Bt,this.vertId=Pe,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Je.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ot(Bt,Pe,et){var dt;dt=vt(35632,Bt.fragId);var xt=vt(35633,Bt.vertId);if(Pe=Bt.program=ye.createProgram(),ye.attachShader(Pe,dt),ye.attachShader(Pe,xt),et)for(dt=0;dt<et.length;++dt)ye.bindAttribLocation(Pe,(xt=et[dt])[0],xt[1]);ye.linkProgram(Pe),xt=ye.getProgramParameter(Pe,35718),Je.profile&&(Bt.stats.uniformsCount=xt);var Rt=Bt.uniforms;for(dt=0;dt<xt;++dt)if(et=ye.getActiveUniform(Pe,dt))if(1<et.size)for(var Yt=0;Yt<et.size;++Yt){var nn=et.name.replace("[0]","["+Yt+"]");Ke(Rt,new nt(nn,ke.id(nn),ye.getUniformLocation(Pe,nn),et))}else Ke(Rt,new nt(et.name,ke.id(et.name),ye.getUniformLocation(Pe,et.name),et));for(xt=ye.getProgramParameter(Pe,35721),Je.profile&&(Bt.stats.attributesCount=xt),Bt=Bt.attributes,dt=0;dt<xt;++dt)(et=ye.getActiveAttrib(Pe,dt))&&Ke(Bt,new nt(et.name,ke.id(et.name),ye.getAttribLocation(Pe,et.name),et))}var Vt={},ft={},bt={},Wt=[],Pt=0;return Je.profile&&(Ve.getMaxUniformsCount=function(){var Bt=0;return Wt.forEach(function(Pe){Pe.stats.uniformsCount>Bt&&(Bt=Pe.stats.uniformsCount)}),Bt},Ve.getMaxAttributesCount=function(){var Bt=0;return Wt.forEach(function(Pe){Pe.stats.attributesCount>Bt&&(Bt=Pe.stats.attributesCount)}),Bt}),{clear:function(){var Bt=ye.deleteShader.bind(ye);he(Vt).forEach(Bt),Vt={},he(ft).forEach(Bt),ft={},Wt.forEach(function(Pe){ye.deleteProgram(Pe.program)}),Wt.length=0,bt={},Ve.shaderCount=0},program:function(Bt,Pe,et,dt){var xt=bt[Pe];xt||(xt=bt[Pe]={});var Rt=xt[Bt];if(Rt&&(Rt.refCount++,!dt))return Rt;var Yt=new gt(Pe,Bt);return Ve.shaderCount++,Ot(Yt,et,dt),Rt||(xt[Bt]=Yt),Wt.push(Yt),H(Yt,{destroy:function(){if(Yt.refCount--,0>=Yt.refCount){ye.deleteProgram(Yt.program);var nn=Wt.indexOf(Yt);Wt.splice(nn,1),Ve.shaderCount--}0>=xt[Yt.vertId].refCount&&(ye.deleteShader(ft[Yt.vertId]),delete ft[Yt.vertId],delete bt[Yt.fragId][Yt.vertId]),Object.keys(bt[Yt.fragId]).length||(ye.deleteShader(Vt[Yt.fragId]),delete Vt[Yt.fragId],delete bt[Yt.fragId])}})},restore:function(){Vt={},ft={};for(var Bt=0;Bt<Wt.length;++Bt)Ot(Wt[Bt],null,Wt[Bt].attributes.map(function(Pe){return[Pe.location,Pe.name]}))},shader:vt,frag:-1,vert:-1}}(Pt,et,dt,ye),Sn=function I(ye,ke,Ve,Je,nt,Ke,vt){function gt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Ot(dn,Cn){dn.internalformat=Cn.internalformat,dn.format=Cn.format,dn.type=Cn.type,dn.compressed=Cn.compressed,dn.premultiplyAlpha=Cn.premultiplyAlpha,dn.flipY=Cn.flipY,dn.unpackAlignment=Cn.unpackAlignment,dn.colorSpace=Cn.colorSpace,dn.width=Cn.width,dn.height=Cn.height,dn.channels=Cn.channels}function Vt(dn,Cn){if("object"==typeof Cn&&Cn){"premultiplyAlpha"in Cn&&(dn.premultiplyAlpha=Cn.premultiplyAlpha),"flipY"in Cn&&(dn.flipY=Cn.flipY),"alignment"in Cn&&(dn.unpackAlignment=Cn.alignment),"colorSpace"in Cn&&(dn.colorSpace=Bn[Cn.colorSpace]),"type"in Cn&&(dn.type=cr[Cn.type]);var jt=dn.width,bn=dn.height,An=dn.channels,$n=!1;"shape"in Cn?(jt=Cn.shape[0],bn=Cn.shape[1],3===Cn.shape.length&&(An=Cn.shape[2],$n=!0)):("radius"in Cn&&(jt=bn=Cn.radius),"width"in Cn&&(jt=Cn.width),"height"in Cn&&(bn=Cn.height),"channels"in Cn&&(An=Cn.channels,$n=!0)),dn.width=0|jt,dn.height=0|bn,dn.channels=0|An,jt=!1,"format"in Cn&&(bn=dn.internalformat=Lr[jt=Cn.format],dn.format=mr[bn],jt in cr&&!("type"in Cn)&&(dn.type=cr[jt]),jt in Qn&&(dn.compressed=!0),jt=!0),!$n&&jt?dn.channels=je[dn.format]:$n&&!jt&&dn.channels!==qe[dn.format]&&(dn.format=dn.internalformat=qe[dn.channels])}}function ft(dn){ye.pixelStorei(37440,dn.flipY),ye.pixelStorei(37441,dn.premultiplyAlpha),ye.pixelStorei(37443,dn.colorSpace),ye.pixelStorei(3317,dn.unpackAlignment)}function bt(){gt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Wt(dn,Cn){var jt=null;if(_(Cn)?jt=Cn:Cn&&(Vt(dn,Cn),"x"in Cn&&(dn.xOffset=0|Cn.x),"y"in Cn&&(dn.yOffset=0|Cn.y),_(Cn.data)&&(jt=Cn.data)),Cn.copy){var bn=nt.viewportWidth,An=nt.viewportHeight;dn.width=dn.width||bn-dn.xOffset,dn.height=dn.height||An-dn.yOffset,dn.needsCopy=!0}else if(jt){if(be(jt))dn.channels=dn.channels||4,dn.data=jt,"type"in Cn||5121!==dn.type||(dn.type=0|Ce[Object.prototype.toString.call(jt)]);else if(x(jt)){switch(dn.channels=dn.channels||4,An=(bn=jt).length,dn.type){case 5121:case 5123:case 5125:case 5126:(An=de.allocType(dn.type,An)).set(bn),dn.data=An;break;case 36193:dn.data=h(bn)}dn.alignment=1,dn.needsFree=!0}else if(t(jt)){bn=jt.data,Array.isArray(bn)||5121!==dn.type||(dn.type=0|Ce[Object.prototype.toString.call(bn)]);var $n,Gn,zn,Hn,Ln=jt.stride;3===(An=jt.shape).length?(zn=An[2],Hn=Ln[2]):Hn=zn=1,$n=An[0],Gn=An[1],An=Ln[0],Ln=Ln[1],dn.alignment=1,dn.width=$n,dn.height=Gn,dn.channels=zn,dn.format=dn.internalformat=qe[zn],dn.needsFree=!0,$n=Hn,jt=jt.offset;for(var On=de.allocType(36193===dn.type?5126:dn.type,(zn=dn.width)*(Hn=dn.height)*(Gn=dn.channels)),Dn=0,Yn=0;Yn<Hn;++Yn)for(var rr=0;rr<zn;++rr)for(var ar=0;ar<Gn;++ar)On[Dn++]=bn[An*rr+Ln*Yn+$n*ar+jt];w(dn,On)}else if(T(jt)===rt||T(jt)===Ne||T(jt)===Be)dn.element=T(jt)===rt||T(jt)===Ne?jt:jt.canvas,dn.width=dn.element.width,dn.height=dn.element.height,dn.channels=4;else if(T(jt)===We)dn.element=jt,dn.width=jt.width,dn.height=jt.height,dn.channels=4;else if(T(jt)===Ye)dn.element=jt,dn.width=jt.naturalWidth,dn.height=jt.naturalHeight,dn.channels=4;else if(T(jt)===lt)dn.element=jt,dn.width=jt.videoWidth,dn.height=jt.videoHeight,dn.channels=4;else if(u(jt)){for(bn=dn.width||jt[0].length,An=dn.height||jt.length,Ln=dn.channels,Ln=d(jt[0][0])?Ln||jt[0][0].length:Ln||1,$n=_e.shape(jt),zn=1,Hn=0;Hn<$n.length;++Hn)zn*=$n[Hn];zn=de.allocType(36193===dn.type?5126:dn.type,zn),_e.flatten(jt,$n,"",zn),w(dn,zn),dn.alignment=1,dn.width=bn,dn.height=An,dn.channels=Ln,dn.format=dn.internalformat=qe[Ln],dn.needsFree=!0}}else dn.width=dn.width||1,dn.height=dn.height||1,dn.channels=dn.channels||4}function Pt(dn,Cn,jt,bn,An){var $n=dn.element,Gn=dn.data,zn=dn.internalformat,Hn=dn.format,Ln=dn.type,On=dn.width,Dn=dn.height;ft(dn),$n?ye.texSubImage2D(Cn,An,jt,bn,Hn,Ln,$n):dn.compressed?ye.compressedTexSubImage2D(Cn,An,jt,bn,zn,On,Dn,Gn):dn.needsCopy?(Je(),ye.copyTexSubImage2D(Cn,An,jt,bn,dn.xOffset,dn.yOffset,On,Dn)):ye.texSubImage2D(Cn,An,jt,bn,On,Dn,Hn,Ln,Gn)}function Bt(){return lr.pop()||new bt}function Pe(dn){dn.needsFree&&de.freeType(dn.data),bt.call(dn),lr.push(dn)}function et(){gt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function dt(dn,Cn,jt){var bn=dn.images[0]=Bt();dn.mipmask=1,bn.width=dn.width=Cn,bn.height=dn.height=jt,bn.channels=dn.channels=4}function xt(dn,Cn){var jt=null;if(_(Cn))Ot(jt=dn.images[0]=Bt(),dn),Wt(jt,Cn),dn.mipmask=1;else if(Vt(dn,Cn),Array.isArray(Cn.mipmap))for(var bn=Cn.mipmap,An=0;An<bn.length;++An)Ot(jt=dn.images[An]=Bt(),dn),jt.width>>=An,jt.height>>=An,Wt(jt,bn[An]),dn.mipmask|=1<<An;else Ot(jt=dn.images[0]=Bt(),dn),Wt(jt,Cn),dn.mipmask=1;Ot(dn,dn.images[0])}function Rt(dn,Cn){for(var jt=dn.images,bn=0;bn<jt.length&&jt[bn];++bn){var An=jt[bn],$n=Cn,Gn=bn,zn=An.element,Hn=An.data,Ln=An.internalformat,On=An.format,Dn=An.type,Yn=An.width,rr=An.height;ft(An),zn?ye.texImage2D($n,Gn,On,On,Dn,zn):An.compressed?ye.compressedTexImage2D($n,Gn,Ln,Yn,rr,0,Hn):An.needsCopy?(Je(),ye.copyTexImage2D($n,Gn,On,An.xOffset,An.yOffset,Yn,rr,0)):ye.texImage2D($n,Gn,On,Yn,rr,0,On,Dn,Hn||null)}}function Yt(){var dn=ri.pop()||new et;gt.call(dn);for(var Cn=dn.mipmask=0;16>Cn;++Cn)dn.images[Cn]=null;return dn}function nn(dn){for(var Cn=dn.images,jt=0;jt<Cn.length;++jt)Cn[jt]&&Pe(Cn[jt]),Cn[jt]=null;ri.push(dn)}function Kt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Mn(dn,Cn){"min"in Cn&&(dn.minFilter=Kn[Cn.min],0<=Ue.indexOf(dn.minFilter)&&!("faces"in Cn)&&(dn.genMipmaps=!0)),"mag"in Cn&&(dn.magFilter=Nn[Cn.mag]);var jt=dn.wrapS,bn=dn.wrapT;if("wrap"in Cn){var An=Cn.wrap;"string"==typeof An?jt=bn=Sn[An]:Array.isArray(An)&&(jt=Sn[An[0]],bn=Sn[An[1]])}else"wrapS"in Cn&&(jt=Sn[Cn.wrapS]),"wrapT"in Cn&&(bn=Sn[Cn.wrapT]);if(dn.wrapS=jt,dn.wrapT=bn,"anisotropic"in Cn&&(dn.anisotropic=Cn.anisotropic),"mipmap"in Cn){switch(jt=!1,typeof Cn.mipmap){case"string":dn.mipmapHint=pn[Cn.mipmap],jt=dn.genMipmaps=!0;break;case"boolean":jt=dn.genMipmaps=Cn.mipmap;break;case"object":dn.genMipmaps=!1,jt=!0}!jt||"min"in Cn||(dn.minFilter=9984)}}function Un(dn,Cn){ye.texParameteri(Cn,10241,dn.minFilter),ye.texParameteri(Cn,10240,dn.magFilter),ye.texParameteri(Cn,10242,dn.wrapS),ye.texParameteri(Cn,10243,dn.wrapT),ke.ext_texture_filter_anisotropic&&ye.texParameteri(Cn,34046,dn.anisotropic),dn.genMipmaps&&(ye.hint(33170,dn.mipmapHint),ye.generateMipmap(Cn))}function Tn(dn){gt.call(this),this.mipmask=0,this.internalformat=6408,this.id=si++,this.refCount=1,this.target=dn,this.texture=ye.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Kt,vt.profile&&(this.stats={size:0})}function un(dn){ye.activeTexture(33984),ye.bindTexture(dn.target,dn.texture)}function an(){var dn=Ii[0];dn?ye.bindTexture(dn.target,dn.texture):ye.bindTexture(3553,null)}function fn(dn){var Cn=dn.texture,jt=dn.unit,bn=dn.target;0<=jt&&(ye.activeTexture(33984+jt),ye.bindTexture(bn,null),Ii[jt]=null),ye.deleteTexture(Cn),dn.texture=null,dn.params=null,dn.pixels=null,dn.refCount=0,delete Tr[dn.id],Ke.textureCount--}var pn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Sn={repeat:10497,clamp:33071,mirror:33648},Nn={nearest:9728,linear:9729},Kn=H({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Nn),Bn={none:0,browser:37444},cr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Lr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Qn={};ke.ext_srgb&&(Lr.srgb=35904,Lr.srgba=35906),ke.oes_texture_float&&(cr.float32=cr.float=5126),ke.oes_texture_half_float&&(cr.float16=cr["half float"]=36193),ke.webgl_depth_texture&&(H(Lr,{depth:6402,"depth stencil":34041}),H(cr,{uint16:5123,uint32:5125,"depth stencil":34042})),ke.webgl_compressed_texture_s3tc&&H(Qn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ke.webgl_compressed_texture_atc&&H(Qn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ke.webgl_compressed_texture_pvrtc&&H(Qn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ke.webgl_compressed_texture_etc1&&(Qn["rgb etc1"]=36196);var qr=Array.prototype.slice.call(ye.getParameter(34467));Object.keys(Qn).forEach(function(dn){var Cn=Qn[dn];0<=qr.indexOf(Cn)&&(Lr[dn]=Cn)});var sr=Object.keys(Lr);Ve.textureFormats=sr;var hr=[];Object.keys(Lr).forEach(function(dn){hr[Lr[dn]]=dn});var jr=[];Object.keys(cr).forEach(function(dn){jr[cr[dn]]=dn});var di=[];Object.keys(Nn).forEach(function(dn){di[Nn[dn]]=dn});var Jn=[];Object.keys(Kn).forEach(function(dn){Jn[Kn[dn]]=dn});var Ar=[];Object.keys(Sn).forEach(function(dn){Ar[Sn[dn]]=dn});var mr=sr.reduce(function(dn,Cn){var jt=Lr[Cn];return dn[jt]=6409===jt||6406===jt||6409===jt||6410===jt||6402===jt||34041===jt||ke.ext_srgb&&(35904===jt||35906===jt)?jt:32855===jt||0<=Cn.indexOf("rgba")?6408:6407,dn},{}),lr=[],ri=[],si=0,Tr={},Zr=Ve.maxTextureUnits,Ii=Array(Zr).map(function(){return null});return H(Tn.prototype,{bind:function(){this.bindCount+=1;var dn=this.unit;if(0>dn){for(var Cn=0;Cn<Zr;++Cn){var jt=Ii[Cn];if(jt){if(0<jt.bindCount)continue;jt.unit=-1}Ii[Cn]=this,dn=Cn;break}vt.profile&&Ke.maxTextureUnits<dn+1&&(Ke.maxTextureUnits=dn+1),this.unit=dn,ye.activeTexture(33984+dn),ye.bindTexture(this.target,this.texture)}return dn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&fn(this)}}),vt.profile&&(Ke.getTotalTextureSize=function(){var dn=0;return Object.keys(Tr).forEach(function(Cn){dn+=Tr[Cn].stats.size}),dn}),{create2D:function(dn,Cn){function jt(An,$n){var Gn=bn.texInfo;Kt.call(Gn);var zn=Yt();return"number"==typeof An?dt(zn,0|An,"number"==typeof $n?0|$n:0|An):An?(Mn(Gn,An),xt(zn,An)):dt(zn,1,1),Gn.genMipmaps&&(zn.mipmask=(zn.width<<1)-1),bn.mipmask=zn.mipmask,Ot(bn,zn),bn.internalformat=zn.internalformat,jt.width=zn.width,jt.height=zn.height,un(bn),Rt(zn,3553),Un(Gn,3553),an(),nn(zn),vt.profile&&(bn.stats.size=M(bn.internalformat,bn.type,zn.width,zn.height,Gn.genMipmaps,!1)),jt.format=hr[bn.internalformat],jt.type=jr[bn.type],jt.mag=di[Gn.magFilter],jt.min=Jn[Gn.minFilter],jt.wrapS=Ar[Gn.wrapS],jt.wrapT=Ar[Gn.wrapT],jt}var bn=new Tn(3553);return Tr[bn.id]=bn,Ke.textureCount++,jt(dn,Cn),jt.subimage=function(An,$n,Gn,zn){$n|=0,Gn|=0,zn|=0;var Hn=Bt();return Ot(Hn,bn),Hn.width=0,Hn.height=0,Wt(Hn,An),Hn.width=Hn.width||(bn.width>>zn)-$n,Hn.height=Hn.height||(bn.height>>zn)-Gn,un(bn),Pt(Hn,3553,$n,Gn,zn),an(),Pe(Hn),jt},jt.resize=function(An,$n){var Gn=0|An,zn=0|$n||Gn;if(Gn===bn.width&&zn===bn.height)return jt;jt.width=bn.width=Gn,jt.height=bn.height=zn,un(bn);for(var Hn=0;bn.mipmask>>Hn;++Hn){var Ln=Gn>>Hn,On=zn>>Hn;if(!Ln||!On)break;ye.texImage2D(3553,Hn,bn.format,Ln,On,0,bn.format,bn.type,null)}return an(),vt.profile&&(bn.stats.size=M(bn.internalformat,bn.type,Gn,zn,!1,!1)),jt},jt._reglType="texture2d",jt._texture=bn,vt.profile&&(jt.stats=bn.stats),jt.destroy=function(){bn.decRef()},jt},createCube:function(dn,Cn,jt,bn,An,$n){function Gn(Ln,On,Dn,Yn,rr,ar){var vr,xr=zn.texInfo;for(Kt.call(xr),vr=0;6>vr;++vr)Hn[vr]=Yt();if("number"!=typeof Ln&&Ln){if("object"==typeof Ln)if(On)xt(Hn[0],Ln),xt(Hn[1],On),xt(Hn[2],Dn),xt(Hn[3],Yn),xt(Hn[4],rr),xt(Hn[5],ar);else if(Mn(xr,Ln),Vt(zn,Ln),"faces"in Ln)for(Ln=Ln.faces,vr=0;6>vr;++vr)Ot(Hn[vr],zn),xt(Hn[vr],Ln[vr]);else for(vr=0;6>vr;++vr)xt(Hn[vr],Ln)}else for(Ln=0|Ln||1,vr=0;6>vr;++vr)dt(Hn[vr],Ln,Ln);for(Ot(zn,Hn[0]),zn.mipmask=xr.genMipmaps?(Hn[0].width<<1)-1:Hn[0].mipmask,zn.internalformat=Hn[0].internalformat,Gn.width=Hn[0].width,Gn.height=Hn[0].height,un(zn),vr=0;6>vr;++vr)Rt(Hn[vr],34069+vr);for(Un(xr,34067),an(),vt.profile&&(zn.stats.size=M(zn.internalformat,zn.type,Gn.width,Gn.height,xr.genMipmaps,!0)),Gn.format=hr[zn.internalformat],Gn.type=jr[zn.type],Gn.mag=di[xr.magFilter],Gn.min=Jn[xr.minFilter],Gn.wrapS=Ar[xr.wrapS],Gn.wrapT=Ar[xr.wrapT],vr=0;6>vr;++vr)nn(Hn[vr]);return Gn}var zn=new Tn(34067);Tr[zn.id]=zn,Ke.cubeCount++;var Hn=Array(6);return Gn(dn,Cn,jt,bn,An,$n),Gn.subimage=function(Ln,On,Dn,Yn,rr){Dn|=0,Yn|=0,rr|=0;var ar=Bt();return Ot(ar,zn),ar.width=0,ar.height=0,Wt(ar,On),ar.width=ar.width||(zn.width>>rr)-Dn,ar.height=ar.height||(zn.height>>rr)-Yn,un(zn),Pt(ar,34069+Ln,Dn,Yn,rr),an(),Pe(ar),Gn},Gn.resize=function(Ln){if((Ln|=0)!==zn.width){Gn.width=zn.width=Ln,Gn.height=zn.height=Ln,un(zn);for(var On=0;6>On;++On)for(var Dn=0;zn.mipmask>>Dn;++Dn)ye.texImage2D(34069+On,Dn,zn.format,Ln>>Dn,Ln>>Dn,0,zn.format,zn.type,null);return an(),vt.profile&&(zn.stats.size=M(zn.internalformat,zn.type,Gn.width,Gn.height,!1,!0)),Gn}},Gn._reglType="textureCube",Gn._texture=zn,vt.profile&&(Gn.stats=zn.stats),Gn.destroy=function(){zn.decRef()},Gn},clear:function(){for(var dn=0;dn<Zr;++dn)ye.activeTexture(33984+dn),ye.bindTexture(3553,null),Ii[dn]=null;he(Tr).forEach(fn),Ke.cubeCount=0,Ke.textureCount=0},getTexture:function(dn){return null},restore:function(){for(var dn=0;dn<Zr;++dn){var Cn=Ii[dn];Cn&&(Cn.bindCount=0,Cn.unit=-1,Ii[dn]=null)}he(Tr).forEach(function(jt){jt.texture=ye.createTexture(),ye.bindTexture(jt.target,jt.texture);for(var bn=0;32>bn;++bn)if(0!=(jt.mipmask&1<<bn))if(3553===jt.target)ye.texImage2D(3553,bn,jt.internalformat,jt.width>>bn,jt.height>>bn,0,jt.internalformat,jt.type,null);else for(var An=0;6>An;++An)ye.texImage2D(34069+An,bn,jt.internalformat,jt.width>>bn,jt.height>>bn,0,jt.internalformat,jt.type,null);Un(jt.texInfo,jt.target)})},refresh:function(){for(var dn=0;dn<Zr;++dn){var Cn=Ii[dn];Cn&&(Cn.bindCount=0,Cn.unit=-1,Ii[dn]=null),ye.activeTexture(33984+dn),ye.bindTexture(3553,null),ye.bindTexture(34067,null)}}}}(Pt,Rt,Tn,function(){Bn.procs.poll()},Un,dt,ye),Nn=function(ye,ke,Ve,Je,nt){function Ke(bt){this.id=Vt++,this.refCount=1,this.renderbuffer=bt,this.format=32854,this.height=this.width=0,nt.profile&&(this.stats={size:0})}function vt(bt){var Wt=bt.renderbuffer;ye.bindRenderbuffer(36161,null),ye.deleteRenderbuffer(Wt),bt.renderbuffer=null,bt.refCount=0,delete ft[bt.id],Je.renderbufferCount--}var gt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ke.ext_srgb&&(gt.srgba=35907),ke.ext_color_buffer_half_float&&(gt.rgba16f=34842,gt.rgb16f=34843),ke.webgl_color_buffer_float&&(gt.rgba32f=34836);var Ot=[];Object.keys(gt).forEach(function(bt){Ot[gt[bt]]=bt});var Vt=0,ft={};return Ke.prototype.decRef=function(){0>=--this.refCount&&vt(this)},nt.profile&&(Je.getTotalRenderbufferSize=function(){var bt=0;return Object.keys(ft).forEach(function(Wt){bt+=ft[Wt].stats.size}),bt}),{create:function(bt,Wt){function Pt(Pe,et){var dt=0,xt=0,Rt=32854;if("object"==typeof Pe&&Pe?("shape"in Pe?(dt=0|(xt=Pe.shape)[0],xt=0|xt[1]):("radius"in Pe&&(dt=xt=0|Pe.radius),"width"in Pe&&(dt=0|Pe.width),"height"in Pe&&(xt=0|Pe.height)),"format"in Pe&&(Rt=gt[Pe.format])):"number"==typeof Pe?(dt=0|Pe,xt="number"==typeof et?0|et:dt):Pe||(dt=xt=1),dt!==Bt.width||xt!==Bt.height||Rt!==Bt.format)return Pt.width=Bt.width=dt,Pt.height=Bt.height=xt,Bt.format=Rt,ye.bindRenderbuffer(36161,Bt.renderbuffer),ye.renderbufferStorage(36161,Rt,dt,xt),nt.profile&&(Bt.stats.size=Ct[Bt.format]*Bt.width*Bt.height),Pt.format=Ot[Bt.format],Pt}var Bt=new Ke(ye.createRenderbuffer());return ft[Bt.id]=Bt,Je.renderbufferCount++,Pt(bt,Wt),Pt.resize=function(Pe,et){var dt=0|Pe,xt=0|et||dt;return dt===Bt.width&&xt===Bt.height||(Pt.width=Bt.width=dt,Pt.height=Bt.height=xt,ye.bindRenderbuffer(36161,Bt.renderbuffer),ye.renderbufferStorage(36161,Bt.format,dt,xt),nt.profile&&(Bt.stats.size=Ct[Bt.format]*Bt.width*Bt.height)),Pt},Pt._reglType="renderbuffer",Pt._renderbuffer=Bt,nt.profile&&(Pt.stats=Bt.stats),Pt.destroy=function(){Bt.decRef()},Pt},clear:function(){he(ft).forEach(vt)},restore:function(){he(ft).forEach(function(bt){bt.renderbuffer=ye.createRenderbuffer(),ye.bindRenderbuffer(36161,bt.renderbuffer),ye.renderbufferStorage(36161,bt.format,bt.width,bt.height)}),ye.bindRenderbuffer(36161,null)}}}(Pt,Rt,0,dt,ye),Kn=function S(ye,ke,Ve,Je,nt,Ke){function vt(Tn,un,an){this.target=Tn,this.texture=un,this.renderbuffer=an;var fn=Tn=0;un?(Tn=un.width,fn=un.height):an&&(Tn=an.width,fn=an.height),this.width=Tn,this.height=fn}function gt(Tn){Tn&&(Tn.texture&&Tn.texture._texture.decRef(),Tn.renderbuffer&&Tn.renderbuffer._renderbuffer.decRef())}function Ot(Tn,un,an){Tn&&(Tn.texture?Tn.texture._texture.refCount+=1:Tn.renderbuffer._renderbuffer.refCount+=1)}function Vt(Tn,un){un&&(un.texture?ye.framebufferTexture2D(36160,Tn,un.target,un.texture._texture.texture,0):ye.framebufferRenderbuffer(36160,Tn,36161,un.renderbuffer._renderbuffer.renderbuffer))}function ft(Tn){var un=3553,an=null,fn=null,pn=Tn;return"object"==typeof Tn&&(pn=Tn.data,"target"in Tn&&(un=0|Tn.target)),"texture2d"===(Tn=pn._reglType)||"textureCube"===Tn?an=pn:"renderbuffer"===Tn&&(fn=pn,un=36161),new vt(un,an,fn)}function bt(Tn,un,an,fn,pn){return an?((Tn=Je.create2D({width:Tn,height:un,format:fn,type:pn}))._texture.refCount=0,new vt(3553,Tn,null)):((Tn=nt.create({width:Tn,height:un,format:fn}))._renderbuffer.refCount=0,new vt(36161,null,Tn))}function Wt(Tn){return Tn&&(Tn.texture||Tn.renderbuffer)}function Pt(Tn,un,an){Tn&&(Tn.texture?Tn.texture.resize(un,an):Tn.renderbuffer&&Tn.renderbuffer.resize(un,an),Tn.width=un,Tn.height=an)}function Bt(){this.id=Mn++,Un[this.id]=this,this.framebuffer=ye.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Pe(Tn){Tn.colorAttachments.forEach(gt),gt(Tn.depthAttachment),gt(Tn.stencilAttachment),gt(Tn.depthStencilAttachment)}function et(Tn){ye.deleteFramebuffer(Tn.framebuffer),Tn.framebuffer=null,Ke.framebufferCount--,delete Un[Tn.id]}function dt(Tn){var un;ye.bindFramebuffer(36160,Tn.framebuffer);var an=Tn.colorAttachments;for(un=0;un<an.length;++un)Vt(36064+un,an[un]);for(un=an.length;un<Ve.maxColorAttachments;++un)ye.framebufferTexture2D(36160,36064+un,3553,null,0);ye.framebufferTexture2D(36160,33306,3553,null,0),ye.framebufferTexture2D(36160,36096,3553,null,0),ye.framebufferTexture2D(36160,36128,3553,null,0),Vt(36096,Tn.depthAttachment),Vt(36128,Tn.stencilAttachment),Vt(33306,Tn.depthStencilAttachment),ye.checkFramebufferStatus(36160),ye.isContextLost(),ye.bindFramebuffer(36160,Rt.next?Rt.next.framebuffer:null),Rt.cur=Rt.next,ye.getError()}function xt(Tn,un){function an(pn,Sn){var Nn,Kn=0,Bn=0,cr=!0,Lr=!0;Nn=null;var Qn=!0,qr="rgba",sr="uint8",hr=1,jr=null,di=null,Jn=null,Ar=!1;"number"==typeof pn?(Kn=0|pn,Bn=0|Sn||Kn):pn?("shape"in pn?(Kn=(Bn=pn.shape)[0],Bn=Bn[1]):("radius"in pn&&(Kn=Bn=pn.radius),"width"in pn&&(Kn=pn.width),"height"in pn&&(Bn=pn.height)),("color"in pn||"colors"in pn)&&(Nn=pn.color||pn.colors,Array.isArray(Nn)),Nn||("colorCount"in pn&&(hr=0|pn.colorCount),"colorTexture"in pn&&(Qn=!!pn.colorTexture,qr="rgba4"),"colorType"in pn&&(sr=pn.colorType,!Qn)&&("half float"===sr||"float16"===sr?qr="rgba16f":"float"!==sr&&"float32"!==sr||(qr="rgba32f")),"colorFormat"in pn&&(0<=Yt.indexOf(qr=pn.colorFormat)?Qn=!0:0<=nn.indexOf(qr)&&(Qn=!1))),("depthTexture"in pn||"depthStencilTexture"in pn)&&(Ar=!(!pn.depthTexture&&!pn.depthStencilTexture)),"depth"in pn&&("boolean"==typeof pn.depth?cr=pn.depth:(jr=pn.depth,Lr=!1)),"stencil"in pn&&("boolean"==typeof pn.stencil?Lr=pn.stencil:(di=pn.stencil,cr=!1)),"depthStencil"in pn&&("boolean"==typeof pn.depthStencil?cr=Lr=pn.depthStencil:(Jn=pn.depthStencil,Lr=cr=!1))):Kn=Bn=1;var mr=null,lr=null,ri=null,si=null;if(Array.isArray(Nn))mr=Nn.map(ft);else if(Nn)mr=[ft(Nn)];else for(mr=Array(hr),Nn=0;Nn<hr;++Nn)mr[Nn]=bt(Kn,Bn,Qn,qr,sr);for(Kn=Kn||mr[0].width,Bn=Bn||mr[0].height,jr?lr=ft(jr):cr&&!Lr&&(lr=bt(Kn,Bn,Ar,"depth","uint32")),di?ri=ft(di):Lr&&!cr&&(ri=bt(Kn,Bn,!1,"stencil","uint8")),Jn?si=ft(Jn):!jr&&!di&&Lr&&cr&&(si=bt(Kn,Bn,Ar,"depth stencil","depth stencil")),cr=null,Nn=0;Nn<mr.length;++Nn)Ot(mr[Nn]),mr[Nn]&&mr[Nn].texture&&(Lr=at[mr[Nn].texture._texture.format]*St[mr[Nn].texture._texture.type],null===cr&&(cr=Lr));return Ot(lr),Ot(ri),Ot(si),Pe(fn),fn.width=Kn,fn.height=Bn,fn.colorAttachments=mr,fn.depthAttachment=lr,fn.stencilAttachment=ri,fn.depthStencilAttachment=si,an.color=mr.map(Wt),an.depth=Wt(lr),an.stencil=Wt(ri),an.depthStencil=Wt(si),an.width=fn.width,an.height=fn.height,dt(fn),an}var fn=new Bt;return Ke.framebufferCount++,an(Tn,un),H(an,{resize:function(pn,Sn){var Nn=Math.max(0|pn,1),Kn=Math.max(0|Sn||Nn,1);if(Nn===fn.width&&Kn===fn.height)return an;for(var Bn=fn.colorAttachments,cr=0;cr<Bn.length;++cr)Pt(Bn[cr],Nn,Kn);return Pt(fn.depthAttachment,Nn,Kn),Pt(fn.stencilAttachment,Nn,Kn),Pt(fn.depthStencilAttachment,Nn,Kn),fn.width=an.width=Nn,fn.height=an.height=Kn,dt(fn),an},_reglType:"framebuffer",_framebuffer:fn,destroy:function(){et(fn),Pe(fn)},use:function(pn){Rt.setFBO({framebuffer:an},pn)}})}var Rt={cur:null,next:null,dirty:!1,setFBO:null},Yt=["rgba"],nn=["rgba4","rgb565","rgb5 a1"];ke.ext_srgb&&nn.push("srgba"),ke.ext_color_buffer_half_float&&nn.push("rgba16f","rgb16f"),ke.webgl_color_buffer_float&&nn.push("rgba32f");var Kt=["uint8"];ke.oes_texture_half_float&&Kt.push("half float","float16"),ke.oes_texture_float&&Kt.push("float","float32");var Mn=0,Un={};return H(Rt,{getFramebuffer:function(Tn){return"function"==typeof Tn&&"framebuffer"===Tn._reglType&&(Tn=Tn._framebuffer)instanceof Bt?Tn:null},create:xt,createCube:function(Tn){function un(fn){var pn,Sn={color:null},Nn=0,Kn=null;pn="rgba";var Bn="uint8",cr=1;if("number"==typeof fn?Nn=0|fn:fn?("shape"in fn?Nn=fn.shape[0]:("radius"in fn&&(Nn=0|fn.radius),"width"in fn?Nn=0|fn.width:"height"in fn&&(Nn=0|fn.height)),("color"in fn||"colors"in fn)&&(Kn=fn.color||fn.colors,Array.isArray(Kn)),Kn||("colorCount"in fn&&(cr=0|fn.colorCount),"colorType"in fn&&(Bn=fn.colorType),"colorFormat"in fn&&(pn=fn.colorFormat)),"depth"in fn&&(Sn.depth=fn.depth),"stencil"in fn&&(Sn.stencil=fn.stencil),"depthStencil"in fn&&(Sn.depthStencil=fn.depthStencil)):Nn=1,Kn)if(Array.isArray(Kn))for(fn=[],pn=0;pn<Kn.length;++pn)fn[pn]=Kn[pn];else fn=[Kn];else for(fn=Array(cr),Kn={radius:Nn,format:pn,type:Bn},pn=0;pn<cr;++pn)fn[pn]=Je.createCube(Kn);for(Sn.color=Array(fn.length),pn=0;pn<fn.length;++pn)cr=fn[pn],Nn=Nn||cr.width,Sn.color[pn]={target:34069,data:fn[pn]};for(pn=0;6>pn;++pn){for(cr=0;cr<fn.length;++cr)Sn.color[cr].target=34069+pn;0<pn&&(Sn.depth=an[0].depth,Sn.stencil=an[0].stencil,Sn.depthStencil=an[0].depthStencil),an[pn]?an[pn](Sn):an[pn]=xt(Sn)}return H(un,{width:Nn,height:Nn,color:fn})}var an=Array(6);return un(Tn),H(un,{faces:an,resize:function(fn){var pn=0|fn;if(pn===un.width)return un;var Sn=un.color;for(fn=0;fn<Sn.length;++fn)Sn[fn].resize(pn);for(fn=0;6>fn;++fn)an[fn].resize(pn);return un.width=un.height=pn,un},_reglType:"framebufferCube",destroy:function(){an.forEach(function(fn){fn.destroy()})}})},clear:function(){he(Un).forEach(et)},restore:function(){Rt.cur=null,Rt.next=null,Rt.dirty=!0,he(Un).forEach(function(Tn){Tn.framebuffer=ye.createFramebuffer(),dt(Tn)})}})}(Pt,Rt,Tn,Sn,Nn,dt),Bn=q(Pt,et,Rt,Tn,un,an,0,Kn,{},fn,pn,Kt,Un,Yt,xt,ye),cr=(et=function D(ye,ke,Ve,Je,nt,Ke,vt){function gt(Ot){var Vt;Vt=null===ke.next?5121:ke.next.colorAttachments[0].texture._texture.type;var ft=0,bt=0,Wt=Je.framebufferWidth,Pt=Je.framebufferHeight,Bt=null;return be(Ot)?Bt=Ot:Ot&&(ft=0|Ot.x,bt=0|Ot.y,Wt=0|(Ot.width||Je.framebufferWidth-ft),Pt=0|(Ot.height||Je.framebufferHeight-bt),Bt=Ot.data||null),Ve(),Ot=Wt*Pt*4,Bt||(5121===Vt?Bt=new Uint8Array(Ot):5126===Vt&&(Bt=Bt||new Float32Array(Ot))),ye.pixelStorei(3333,4),ye.readPixels(ft,bt,Wt,Pt,6408,Vt,Bt),Bt}return function(Ot){return Ot&&"framebuffer"in Ot?(ke.setFBO({framebuffer:(Vt=Ot).framebuffer},function(){ft=gt(Vt)}),ft):gt(Ot);var Vt,ft}}(Pt,Kn,Bn.procs.poll,Un),Bn.next),Lr=Pt.canvas,Qn=[],qr=[],sr=[],hr=[ye.onDestroy],jr=null;Lr&&(Lr.addEventListener("webglcontextlost",nt,!1),Lr.addEventListener("webglcontextrestored",Ke,!1));var di=Kn.setFBO=vt({framebuffer:Q.define.call(null,1,"framebuffer")});return bt(),Bt=H(vt,{clear:function(Jn){if("framebuffer"in Jn)if(Jn.framebuffer&&"framebufferCube"===Jn.framebuffer_reglType)for(var Ar=0;6>Ar;++Ar)di(H({framebuffer:Jn.framebuffer.faces[Ar]},Jn),gt);else di(Jn,gt);else gt(0,Jn)},prop:Q.define.bind(null,1),context:Q.define.bind(null,2),this:Q.define.bind(null,3),draw:vt({}),buffer:function(Jn){return un.create(Jn,34962,!1,!1)},elements:function(Jn){return an.create(Jn,!1)},texture:Sn.create2D,cube:Sn.createCube,renderbuffer:Nn.create,framebuffer:Kn.create,framebufferCube:Kn.createCube,vao:fn.createVAO,attributes:Bt,frame:Ot,on:function(Jn,Ar){var mr;switch(Jn){case"frame":return Ot(Ar);case"lost":mr=qr;break;case"restore":mr=sr;break;case"destroy":mr=hr}return mr.push(Ar),{cancel:function(){for(var lr=0;lr<mr.length;++lr)if(mr[lr]===Ar){mr[lr]=mr[mr.length-1],mr.pop();break}}}},limits:Tn,hasExtension:function(Jn){return 0<=Tn.extensions.indexOf(Jn.toLowerCase())},read:et,destroy:function(){Qn.length=0,Je(),Lr&&(Lr.removeEventListener("webglcontextlost",nt),Lr.removeEventListener("webglcontextrestored",Ke)),pn.clear(),Kn.clear(),Nn.clear(),fn.clear(),Sn.clear(),an.clear(),un.clear(),Yt&&Yt.clear(),hr.forEach(function(Jn){Jn()})},_gl:Pt,_refresh:bt,poll:function(){ft(),Yt&&Yt.update()},now:Wt,stats:dt,getCachedCode:function(){return xt},preloadCachedCode:function(Jn){Object.entries(Jn).forEach(function(Ar){xt[Ar[0]]=Ar[1]})}}),ye.onDone(null,Bt),Bt}},"object"==typeof ne&&void 0!==re?re.exports=m():this.createREGL=m()},{}],285:[function(v,re,ne){var g=v("buffer"),m=g.Buffer;function b(e,r){for(var n in e)r[n]=e[n]}function y(e,r,n){return m(e,r,n)}m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?re.exports=g:(b(g,ne),ne.Buffer=y),y.prototype=Object.create(m.prototype),b(m,y),y.from=function(e,r,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return m(e,r,n)},y.alloc=function(e,r,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=m(e);return void 0!==r?"string"==typeof n?a.fill(r,n):a.fill(r):a.fill(0),a},y.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return m(e)},y.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return g.SlowBuffer(e)}},{buffer:85}],286:[function(v,re,ne){re.exports=m;var g=v("events").EventEmitter;function m(){g.call(this)}v("inherits")(m,g),m.Readable=v("readable-stream/lib/_stream_readable.js"),m.Writable=v("readable-stream/lib/_stream_writable.js"),m.Duplex=v("readable-stream/lib/_stream_duplex.js"),m.Transform=v("readable-stream/lib/_stream_transform.js"),m.PassThrough=v("readable-stream/lib/_stream_passthrough.js"),m.finished=v("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=v("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m,m.prototype.pipe=function(b,y){var e=this;function r(f){b.writable&&!1===b.write(f)&&e.pause&&e.pause()}function n(){e.readable&&e.resume&&e.resume()}e.on("data",r),b.on("drain",n),b._isStdio||y&&!1===y.end||(e.on("end",t),e.on("close",p));var a=!1;function t(){a||(a=!0,b.end())}function p(){a||(a=!0,"function"==typeof b.destroy&&b.destroy())}function s(f){if(i(),0===g.listenerCount(this,"error"))throw f}function i(){e.removeListener("data",r),b.removeListener("drain",n),e.removeListener("end",t),e.removeListener("close",p),e.removeListener("error",s),b.removeListener("error",s),e.removeListener("end",i),e.removeListener("close",i),b.removeListener("close",i)}return e.on("error",s),b.on("error",s),e.on("end",i),e.on("close",i),b.on("close",i),b.emit("pipe",e),b}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(v,re,ne){"use strict";var g={};function m(y,e,r){r||(r=Error);var n=function(a){var t,p;function s(i,f,c){return a.call(this,"string"==typeof e?e:e(i,f,c))||this}return p=a,(t=s).prototype=Object.create(p.prototype),t.prototype.constructor=t,t.__proto__=p,s}(r);n.prototype.name=r.name,n.prototype.code=y,g[y]=n}function b(y,e){if(Array.isArray(y)){var r=y.length;return y=y.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(y.slice(0,r-1).join(", "),", or ")+y[r-1]:2===r?"one of ".concat(e," ").concat(y[0]," or ").concat(y[1]):"of ".concat(e," ").concat(y[0])}return"of ".concat(e," ").concat(String(y))}m("ERR_INVALID_OPT_VALUE",function(y,e){return'The value "'+e+'" is invalid for option "'+y+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(y,e,r){var n,p,i,c;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(n="must not be",e=e.replace(/^not /,"")):n="must be",i=y,(void 0===c||c>i.length)&&(c=i.length)," argument"===i.substring(c-" argument".length,c))p="The ".concat(y," ").concat(n," ").concat(b(e,"type"));else{var s=function(i,f,c){return"number"!=typeof c&&(c=0),!(c+".".length>i.length)&&-1!==i.indexOf(".",c)}(y)?"property":"argument";p='The "'.concat(y,'" ').concat(s," ").concat(n," ").concat(b(e,"type"))}return p+". Received type ".concat(typeof r)},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(y){return"The "+y+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(y){return"Cannot call "+y+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(y){return"Unknown encoding: "+y},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),re.exports.codes=g},{}],288:[function(v,re,ne){(function(g){(function(){"use strict";var m=Object.keys||function(s){var i=[];for(var f in s)i.push(f);return i};re.exports=a;var b=v("./_stream_readable"),y=v("./_stream_writable");v("inherits")(a,b);for(var e=m(y.prototype),r=0;r<e.length;r++){var n=e[r];a.prototype[n]||(a.prototype[n]=y.prototype[n])}function a(s){if(!(this instanceof a))return new a(s);b.call(this,s),y.call(this,s),this.allowHalfOpen=!0,s&&(!1===s.readable&&(this.readable=!1),!1===s.writable&&(this.writable=!1),!1===s.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",t)))}function t(){this._writableState.ended||g.nextTick(p,this)}function p(s){s.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(s){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,v("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(v,re,ne){"use strict";re.exports=m;var g=v("./_stream_transform");function m(b){if(!(this instanceof m))return new m(b);g.call(this,b)}v("inherits")(m,g),m.prototype._transform=function(b,y,e){e(null,b)}},{"./_stream_transform":291,inherits:231}],290:[function(v,re,ne){(function(g,m){(function(){"use strict";var b;re.exports=M,M.ReadableState=w,v("events");var a,y=function(U,V){return U.listeners(V).length},e=v("./internal/streams/stream"),r=v("buffer").Buffer,n=m.Uint8Array||function(){},t=v("util");a=t&&t.debuglog?t.debuglog("stream"):function(){};var p,s,i,f=v("./internal/streams/buffer_list"),c=v("./internal/streams/destroy"),l=v("./internal/streams/state").getHighWaterMark,h=v("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,o=h.ERR_STREAM_PUSH_AFTER_EOF,x=h.ERR_METHOD_NOT_IMPLEMENTED,u=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;v("inherits")(M,e);var T=c.errorOrDestroy,_=["error","close","destroy","pause","resume"];function w(U,V,q){b=b||v("./_stream_duplex"),"boolean"!=typeof q&&(q=V instanceof b),this.objectMode=!!(U=U||{}).objectMode,q&&(this.objectMode=this.objectMode||!!U.readableObjectMode),this.highWaterMark=l(this,U,"readableHighWaterMark",q),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==U.emitClose,this.autoDestroy=!!U.autoDestroy,this.destroyed=!1,this.defaultEncoding=U.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,U.encoding&&(p||(p=v("string_decoder/").StringDecoder),this.decoder=new p(U.encoding),this.encoding=U.encoding)}function M(U){if(b=b||v("./_stream_duplex"),!(this instanceof M))return new M(U);this._readableState=new w(U,this,this instanceof b),this.readable=!0,U&&("function"==typeof U.read&&(this._read=U.read),"function"==typeof U.destroy&&(this._destroy=U.destroy)),e.call(this)}function I(U,V,q,ie,H){a("readableAddChunk",V);var ee,oe,le,de,fe,Q=U._readableState;if(null===V)Q.reading=!1,function(oe,le){if(a("onEofChunk"),!le.ended){if(le.decoder){var de=le.decoder.end();de&&de.length&&(le.buffer.push(de),le.length+=le.objectMode?1:de.length)}le.ended=!0,le.sync?O(oe):(le.needReadable=!1,le.emittedReadable||(le.emittedReadable=!0,C(oe)))}}(U,Q);else if(H||(oe=Q,r.isBuffer(fe=le=V)||fe instanceof n||"string"==typeof le||void 0===le||oe.objectMode||(de=new d("chunk",["string","Buffer","Uint8Array"],le)),ee=de),ee)T(U,ee);else if(Q.objectMode||V&&V.length>0)if("string"==typeof V||Q.objectMode||Object.getPrototypeOf(V)===r.prototype||(V=function(oe){return r.from(oe)}(V)),ie)Q.endEmitted?T(U,new u):S(U,Q,V,!0);else if(Q.ended)T(U,new o);else{if(Q.destroyed)return!1;Q.reading=!1,Q.decoder&&!q?(V=Q.decoder.write(V),Q.objectMode||0!==V.length?S(U,Q,V,!1):D(U,Q)):S(U,Q,V,!1)}else ie||(Q.reading=!1,D(U,Q));return!Q.ended&&(Q.length<Q.highWaterMark||0===Q.length)}function S(U,V,q,ie){V.flowing&&0===V.length&&!V.sync?(V.awaitDrain=0,U.emit("data",q)):(V.length+=V.objectMode?1:q.length,ie?V.buffer.unshift(q):V.buffer.push(q),V.needReadable&&O(U)),D(U,V)}function R(U,V){return U<=0||0===V.length&&V.ended?0:V.objectMode?1:U!=U?V.flowing&&V.length?V.buffer.head.data.length:V.length:(U>V.highWaterMark&&(V.highWaterMark=((q=U)>=1073741824?q=1073741824:(q--,q|=q>>>1,q|=q>>>2,q|=q>>>4,q|=q>>>8,q|=q>>>16,q++),q)),U<=V.length?U:V.ended?V.length:(V.needReadable=!0,0));var q}function O(U){var V=U._readableState;a("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(a("emitReadable",V.flowing),V.emittedReadable=!0,g.nextTick(C,U))}function C(U){var V=U._readableState;a("emitReadable_",V.destroyed,V.length,V.ended),V.destroyed||!V.length&&!V.ended||(U.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,J(U)}function D(U,V){V.readingMore||(V.readingMore=!0,g.nextTick(B,U,V))}function B(U,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&0===V.length);){var q=V.length;if(a("maybeReadMore read 0"),U.read(0),q===V.length)break}V.readingMore=!1}function z(U){var V=U._readableState;V.readableListening=U.listenerCount("readable")>0,V.resumeScheduled&&!V.paused?V.flowing=!0:U.listenerCount("data")>0&&U.resume()}function Y(U){a("readable nexttick read 0"),U.read(0)}function G(U,V){a("resume",V.reading),V.reading||U.read(0),V.resumeScheduled=!1,U.emit("resume"),J(U),V.flowing&&!V.reading&&U.read(0)}function J(U){var V=U._readableState;for(a("flow",V.flowing);V.flowing&&null!==U.read(););}function te(U,V){return 0===V.length?null:(V.objectMode?q=V.buffer.shift():!U||U>=V.length?(q=V.decoder?V.buffer.join(""):1===V.buffer.length?V.buffer.first():V.buffer.concat(V.length),V.buffer.clear()):q=V.buffer.consume(U,V.decoder),q);var q}function X(U){var V=U._readableState;a("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,g.nextTick(K,V,U))}function K(U,V){if(a("endReadableNT",U.endEmitted,U.length),!U.endEmitted&&0===U.length&&(U.endEmitted=!0,V.readable=!1,V.emit("end"),U.autoDestroy)){var q=V._writableState;(!q||q.autoDestroy&&q.finished)&&V.destroy()}}function ae(U,V){for(var q=0,ie=U.length;q<ie;q++)if(U[q]===V)return q;return-1}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(U){this._readableState&&(this._readableState.destroyed=U)}}),M.prototype.destroy=c.destroy,M.prototype._undestroy=c.undestroy,M.prototype._destroy=function(U,V){V(U)},M.prototype.push=function(U,V){var q,ie=this._readableState;return ie.objectMode?q=!0:"string"==typeof U&&((V=V||ie.defaultEncoding)!==ie.encoding&&(U=r.from(U,V),V=""),q=!0),I(this,U,V,!1,q)},M.prototype.unshift=function(U){return I(this,U,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(U){p||(p=v("string_decoder/").StringDecoder);var V=new p(U);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;for(var q=this._readableState.buffer.head,ie="";null!==q;)ie+=V.write(q.data),q=q.next;return this._readableState.buffer.clear(),""!==ie&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this},M.prototype.read=function(U){a("read",U),U=parseInt(U,10);var V=this._readableState,q=U;if(0!==U&&(V.emittedReadable=!1),0===U&&V.needReadable&&((0!==V.highWaterMark?V.length>=V.highWaterMark:V.length>0)||V.ended))return a("read: emitReadable",V.length,V.ended),0===V.length&&V.ended?X(this):O(this),null;if(0===(U=R(U,V))&&V.ended)return 0===V.length&&X(this),null;var ie,H=V.needReadable;return a("need readable",H),(0===V.length||V.length-U<V.highWaterMark)&&a("length less than watermark",H=!0),V.ended||V.reading?a("reading or ended",H=!1):H&&(a("do read"),V.reading=!0,V.sync=!0,0===V.length&&(V.needReadable=!0),this._read(V.highWaterMark),V.sync=!1,V.reading||(U=R(q,V))),null===(ie=U>0?te(U,V):null)?(V.needReadable=V.length<=V.highWaterMark,U=0):(V.length-=U,V.awaitDrain=0),0===V.length&&(V.ended||(V.needReadable=!0),q!==U&&V.ended&&X(this)),null!==ie&&this.emit("data",ie),ie},M.prototype._read=function(U){T(this,new x("_read()"))},M.prototype.pipe=function(U,V){var q=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=U;break;case 1:ie.pipes=[ie.pipes,U];break;default:ie.pipes.push(U)}ie.pipesCount+=1,a("pipe count=%d opts=%j",ie.pipesCount,V);var H=V&&!1===V.end||U===g.stdout||U===g.stderr?_e:Q;function Q(){a("onend"),U.end()}ie.endEmitted?g.nextTick(H):q.once("end",H),U.on("unpipe",function ee(Ce,Ee){a("onunpipe"),Ce===q&&Ee&&!1===Ee.hasUnpiped&&(Ee.hasUnpiped=!0,a("cleanup"),U.removeListener("close",be),U.removeListener("finish",he),U.removeListener("drain",oe),U.removeListener("error",fe),U.removeListener("unpipe",ee),q.removeListener("end",Q),q.removeListener("end",_e),q.removeListener("data",de),le=!0,!ie.awaitDrain||U._writableState&&!U._writableState.needDrain||oe())});var Ce,oe=(Ce=q,function(){var Ee=Ce._readableState;a("pipeOnDrain",Ee.awaitDrain),Ee.awaitDrain&&Ee.awaitDrain--,0===Ee.awaitDrain&&y(Ce,"data")&&(Ee.flowing=!0,J(Ce))});U.on("drain",oe);var le=!1;function de(Ce){a("ondata");var Ee=U.write(Ce);a("dest.write",Ee),!1===Ee&&((1===ie.pipesCount&&ie.pipes===U||ie.pipesCount>1&&-1!==ae(ie.pipes,U))&&!le&&(a("false write response, pause",ie.awaitDrain),ie.awaitDrain++),q.pause())}function fe(Ce){a("onerror",Ce),_e(),U.removeListener("error",fe),0===y(U,"error")&&T(U,Ce)}function be(){U.removeListener("finish",he),_e()}function he(){a("onfinish"),U.removeListener("close",be),_e()}function _e(){a("unpipe"),q.unpipe(U)}return q.on("data",de),function(Ce,Ee,Ae){if("function"==typeof Ce.prependListener)return Ce.prependListener(Ee,Ae);Ce._events&&Ce._events[Ee]?Array.isArray(Ce._events[Ee])?Ce._events[Ee].unshift(Ae):Ce._events[Ee]=[Ae,Ce._events[Ee]]:Ce.on(Ee,Ae)}(U,"error",fe),U.once("close",be),U.once("finish",he),U.emit("pipe",q),ie.flowing||(a("pipe resume"),q.resume()),U},M.prototype.unpipe=function(U){var V=this._readableState,q={hasUnpiped:!1};if(0===V.pipesCount)return this;if(1===V.pipesCount)return U&&U!==V.pipes||(U||(U=V.pipes),V.pipes=null,V.pipesCount=0,V.flowing=!1,U&&U.emit("unpipe",this,q)),this;if(!U){var ie=V.pipes,H=V.pipesCount;V.pipes=null,V.pipesCount=0,V.flowing=!1;for(var ee=0;ee<H;ee++)ie[ee].emit("unpipe",this,{hasUnpiped:!1});return this}var Q=ae(V.pipes,U);return-1===Q||(V.pipes.splice(Q,1),V.pipesCount-=1,1===V.pipesCount&&(V.pipes=V.pipes[0]),U.emit("unpipe",this,q)),this},M.prototype.addListener=M.prototype.on=function(U,V){var q=e.prototype.on.call(this,U,V),ie=this._readableState;return"data"===U?(ie.readableListening=this.listenerCount("readable")>0,!1!==ie.flowing&&this.resume()):"readable"===U&&(ie.endEmitted||ie.readableListening||(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,a("on readable",ie.length,ie.reading),ie.length?O(this):ie.reading||g.nextTick(Y,this))),q},M.prototype.removeListener=function(U,V){var q=e.prototype.removeListener.call(this,U,V);return"readable"===U&&g.nextTick(z,this),q},M.prototype.removeAllListeners=function(U){var V=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==U&&void 0!==U||g.nextTick(z,this),V},M.prototype.resume=function(){var q,U=this._readableState;return U.flowing||(a("resume"),U.flowing=!U.readableListening,this,(q=U).resumeScheduled||(q.resumeScheduled=!0,g.nextTick(G,this,q))),U.paused=!1,this},M.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(U){var V=this,q=this._readableState,ie=!1;for(var H in U.on("end",function(){if(a("wrapped end"),q.decoder&&!q.ended){var Q=q.decoder.end();Q&&Q.length&&V.push(Q)}V.push(null)}),U.on("data",function(Q){a("wrapped data"),q.decoder&&(Q=q.decoder.write(Q)),q.objectMode&&null==Q||(q.objectMode||Q&&Q.length)&&(V.push(Q)||(ie=!0,U.pause()))}),U)void 0===this[H]&&"function"==typeof U[H]&&(this[H]=function(Q){return function(){return U[Q].apply(U,arguments)}}(H));for(var ee=0;ee<_.length;ee++)U.on(_[ee],this.emit.bind(this,_[ee]));return this._read=function(Q){a("wrapped _read",Q),ie&&(ie=!1,U.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=v("./internal/streams/async_iterator")),s(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(U){this._readableState&&(this._readableState.flowing=U)}}),M._fromList=te,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(U,V){return void 0===i&&(i=v("./internal/streams/from")),i(M,U,V)})}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(v,re,ne){"use strict";re.exports=a;var g=v("../errors").codes,m=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_MULTIPLE_CALLBACK,y=g.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=g.ERR_TRANSFORM_WITH_LENGTH_0,r=v("./_stream_duplex");function n(s,i){var f=this._transformState;f.transforming=!1;var c=f.writecb;if(null===c)return this.emit("error",new b);f.writechunk=null,f.writecb=null,null!=i&&this.push(i),c(s);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function a(s){if(!(this instanceof a))return new a(s);r.call(this,s),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&("function"==typeof s.transform&&(this._transform=s.transform),"function"==typeof s.flush&&(this._flush=s.flush)),this.on("prefinish",t)}function t(){var s=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush(function(i,f){p(s,i,f)})}function p(s,i,f){if(i)return s.emit("error",i);if(null!=f&&s.push(f),s._writableState.length)throw new e;if(s._transformState.transforming)throw new y;return s.push(null)}v("inherits")(a,r),a.prototype.push=function(s,i){return this._transformState.needTransform=!1,r.prototype.push.call(this,s,i)},a.prototype._transform=function(s,i,f){f(new m("_transform()"))},a.prototype._write=function(s,i,f){var c=this._transformState;if(c.writecb=f,c.writechunk=s,c.writeencoding=i,!c.transforming){var l=this._readableState;(c.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},a.prototype._read=function(s){var i=this._transformState;null===i.writechunk||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},a.prototype._destroy=function(s,i){r.prototype._destroy.call(this,s,function(f){i(f)})}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(v,re,ne){(function(g,m){(function(){"use strict";function b(B){var z=this;this.next=null,this.entry=null,this.finish=function(){!function(Y,G,J){var te=Y.entry;for(Y.entry=null;te;){var X=te.callback;G.pendingcb--,X(undefined),te=te.next}G.corkedRequestsFree.next=Y}(z,B)}}var y;re.exports=M,M.WritableState=w;var t,e={deprecate:v("util-deprecate")},r=v("./internal/streams/stream"),n=v("buffer").Buffer,a=m.Uint8Array||function(){},p=v("./internal/streams/destroy"),s=v("./internal/streams/state").getHighWaterMark,i=v("../errors").codes,f=i.ERR_INVALID_ARG_TYPE,c=i.ERR_METHOD_NOT_IMPLEMENTED,l=i.ERR_MULTIPLE_CALLBACK,h=i.ERR_STREAM_CANNOT_PIPE,d=i.ERR_STREAM_DESTROYED,o=i.ERR_STREAM_NULL_VALUES,x=i.ERR_STREAM_WRITE_AFTER_END,u=i.ERR_UNKNOWN_ENCODING,T=p.errorOrDestroy;function _(){}function w(B,z,Y){y=y||v("./_stream_duplex"),"boolean"!=typeof Y&&(Y=z instanceof y),this.objectMode=!!(B=B||{}).objectMode,Y&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=s(this,B,"writableHighWaterMark",Y),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===B.decodeStrings),this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(J){!function(te,X){var q,K=te._writableState,ae=K.sync,U=K.writecb;if("function"!=typeof U)throw new l;if((q=K).writing=!1,q.writecb=null,q.length-=q.writelen,q.writelen=0,X)!function(q,ie,H,ee,Q){--ie.pendingcb,H?(g.nextTick(Q,ee),g.nextTick(D,q,ie),q._writableState.errorEmitted=!0,T(q,ee)):(Q(ee),q._writableState.errorEmitted=!0,T(q,ee),D(q,ie))}(te,K,ae,X,U);else{var V=O(K)||te.destroyed;V||K.corked||K.bufferProcessing||!K.bufferedRequest||R(te,K),ae?g.nextTick(S,te,K,V,U):S(te,K,V,U)}}(z,J)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==B.emitClose,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function M(B){var z=this instanceof(y=y||v("./_stream_duplex"));if(!z&&!t.call(M,this))return new M(B);this._writableState=new w(B,this,z),this.writable=!0,B&&("function"==typeof B.write&&(this._write=B.write),"function"==typeof B.writev&&(this._writev=B.writev),"function"==typeof B.destroy&&(this._destroy=B.destroy),"function"==typeof B.final&&(this._final=B.final)),r.call(this)}function I(B,z,Y,G,J,te,X){z.writelen=G,z.writecb=X,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new d("write")):Y?B._writev(J,z.onwrite):B._write(J,te,z.onwrite),z.sync=!1}function S(B,z,Y,G){var J,te;Y||(J=B,0===(te=z).length&&te.needDrain&&(te.needDrain=!1,J.emit("drain"))),z.pendingcb--,G(),D(B,z)}function R(B,z){z.bufferProcessing=!0;var Y=z.bufferedRequest;if(B._writev&&Y&&Y.next){var J=new Array(z.bufferedRequestCount),te=z.corkedRequestsFree;te.entry=Y;for(var X=0,K=!0;Y;)J[X]=Y,Y.isBuf||(K=!1),Y=Y.next,X+=1;J.allBuffers=K,I(B,z,!0,z.length,J,"",te.finish),z.pendingcb++,z.lastBufferedRequest=null,te.next?(z.corkedRequestsFree=te.next,te.next=null):z.corkedRequestsFree=new b(z),z.bufferedRequestCount=0}else{for(;Y;){var ae=Y.chunk;if(I(B,z,!1,z.objectMode?1:ae.length,ae,Y.encoding,Y.callback),Y=Y.next,z.bufferedRequestCount--,z.writing)break}null===Y&&(z.lastBufferedRequest=null)}z.bufferedRequest=Y,z.bufferProcessing=!1}function O(B){return B.ending&&0===B.length&&null===B.bufferedRequest&&!B.finished&&!B.writing}function C(B,z){B._final(function(Y){z.pendingcb--,Y&&T(B,Y),z.prefinished=!0,B.emit("prefinish"),D(B,z)})}function D(B,z){var J,te,Y=O(z);if(Y&&(J=B,(te=z).prefinished||te.finalCalled||("function"!=typeof J._final||te.destroyed?(te.prefinished=!0,J.emit("prefinish")):(te.pendingcb++,te.finalCalled=!0,g.nextTick(C,J,te))),0===z.pendingcb&&(z.finished=!0,B.emit("finish"),z.autoDestroy))){var G=B._readableState;(!G||G.autoDestroy&&G.endEmitted)&&B.destroy()}return Y}v("inherits")(M,r),w.prototype.getBuffer=function(){for(var B=this.bufferedRequest,z=[];B;)z.push(B),B=B.next;return z},function(){try{Object.defineProperty(w.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(t=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(B){return!!t.call(this,B)||this===M&&B&&B._writableState instanceof w}})):t=function(B){return B instanceof this},M.prototype.pipe=function(){T(this,new h)},M.prototype.write=function(B,z,Y){var G,K,ae,U,J=this._writableState,te=!1,X=!J.objectMode&&(n.isBuffer(G=B)||G instanceof a);return X&&!n.isBuffer(B)&&(B=n.from(B)),"function"==typeof z&&(Y=z,z=null),X?z="buffer":z||(z=J.defaultEncoding),"function"!=typeof Y&&(Y=_),J.ending?(K=this,ae=Y,U=new x,T(K,U),g.nextTick(ae,U)):(X||function(K,ae,U,V){var q;return null===U?q=new o:"string"==typeof U||ae.objectMode||(q=new f("chunk",["string","Buffer"],U)),!q||(T(K,q),g.nextTick(V,q),!1)}(this,J,B,Y))&&(J.pendingcb++,te=function(K,ae,U,V,q,ie){if(!U){var H=(de=V,(le=ae).objectMode||!1===le.decodeStrings||"string"!=typeof de||(de=n.from(de,q)),de);V!==H&&(U=!0,q="buffer",V=H)}var le,de,ee=ae.objectMode?1:V.length;ae.length+=ee;var Q=ae.length<ae.highWaterMark;if(Q||(ae.needDrain=!0),ae.writing||ae.corked){var oe=ae.lastBufferedRequest;ae.lastBufferedRequest={chunk:V,encoding:q,isBuf:U,callback:ie,next:null},oe?oe.next=ae.lastBufferedRequest:ae.bufferedRequest=ae.lastBufferedRequest,ae.bufferedRequestCount+=1}else I(K,ae,!1,ee,V,q,ie);return Q}(this,J,X,B,z,Y)),te},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,B.writing||B.corked||B.bufferProcessing||!B.bufferedRequest||R(this,B))},M.prototype.setDefaultEncoding=function(B){if("string"==typeof B&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new u(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(B,z,Y){Y(new c("_write()"))},M.prototype._writev=null,M.prototype.end=function(B,z,Y){var J,te,X,G=this._writableState;return"function"==typeof B?(Y=B,B=null,z=null):"function"==typeof z&&(Y=z,z=null),null!=B&&this.write(B,z),G.corked&&(G.corked=1,this.uncork()),G.ending||(J=this,X=Y,(te=G).ending=!0,D(J,te),X&&(te.finished?g.nextTick(X):J.once("finish",X)),te.ended=!0,J.writable=!1),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),M.prototype.destroy=p.destroy,M.prototype._undestroy=p.undestroy,M.prototype._destroy=function(B,z){z(B)}}).call(this)}).call(this,v("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(v,re,ne){(function(g){(function(){"use strict";var m;function b(d,o,x){return o in d?Object.defineProperty(d,o,{value:x,enumerable:!0,configurable:!0,writable:!0}):d[o]=x,d}var y=v("./end-of-stream"),e=Symbol("lastResolve"),r=Symbol("lastReject"),n=Symbol("error"),a=Symbol("ended"),t=Symbol("lastPromise"),p=Symbol("handlePromise"),s=Symbol("stream");function i(d,o){return{value:d,done:o}}function f(d){var o=d[e];if(null!==o){var x=d[s].read();null!==x&&(d[t]=null,d[e]=null,d[r]=null,o(i(x,!1)))}}function c(d){g.nextTick(f,d)}var l=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((b(m={get stream(){return this[s]},next:function(){var d=this,o=this[n];if(null!==o)return Promise.reject(o);if(this[a])return Promise.resolve(i(void 0,!0));if(this[s].destroyed)return new Promise(function(_,w){g.nextTick(function(){d[n]?w(d[n]):_(i(void 0,!0))})});var x,_,w,u=this[t];if(u)x=new Promise((_=u,w=this,function(M,I){_.then(function(){w[a]?M(i(void 0,!0)):w[p](M,I)},I)}));else{var T=this[s].read();if(null!==T)return Promise.resolve(i(T,!1));x=new Promise(this[p])}return this[t]=x,x}},Symbol.asyncIterator,function(){return this}),b(m,"return",function(){var d=this;return new Promise(function(o,x){d[s].destroy(null,function(u){u?x(u):o(i(void 0,!0))})})}),m),l);re.exports=function(d){var o,x=Object.create(h,(b(o={},s,{value:d,writable:!0}),b(o,e,{value:null,writable:!0}),b(o,r,{value:null,writable:!0}),b(o,n,{value:null,writable:!0}),b(o,a,{value:d._readableState.endEmitted,writable:!0}),b(o,p,{value:function(u,T){var _=x[s].read();_?(x[t]=null,x[e]=null,x[r]=null,u(i(_,!1))):(x[e]=u,x[r]=T)},writable:!0}),o));return x[t]=null,y(d,function(u){if(u&&"ERR_STREAM_PREMATURE_CLOSE"!==u.code){var T=x[r];return null!==T&&(x[t]=null,x[e]=null,x[r]=null,T(u)),void(x[n]=u)}var _=x[e];null!==_&&(x[t]=null,x[e]=null,x[r]=null,_(i(void 0,!0))),x[a]=!0}),d.on("readable",c.bind(null,x)),x}}).call(this)}).call(this,v("_process"))},{"./end-of-stream":296,_process:278}],294:[function(v,re,ne){"use strict";function g(n,a){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(n);a&&(p=p.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,p)}return t}function m(n,a,t){return a in n?Object.defineProperty(n,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[a]=t,n}function b(n,a){for(var t=0;t<a.length;t++){var p=a[t];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(n,p.key,p)}}var y=v("buffer").Buffer,e=v("util").inspect,r=e&&e.custom||"inspect";re.exports=function(){function n(){(function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")})(this,n),this.head=null,this.tail=null,this.length=0}var a,t;return a=n,(t=[{key:"push",value:function(s){var i={data:s,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(s){var i={data:s,next:this.head};0===this.length&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(0!==this.length){var s=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(0===this.length)return"";for(var i=this.head,f=""+i.data;i=i.next;)f+=s+i.data;return f}},{key:"concat",value:function(s){if(0===this.length)return y.alloc(0);for(var l=y.allocUnsafe(s>>>0),h=this.head,d=0;h;)y.prototype.copy.call(h.data,l,d),d+=h.data.length,h=h.next;return l}},{key:"consume",value:function(s,i){var f;return s<this.head.data.length?(f=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):f=s===this.head.data.length?this.shift():i?this._getString(s):this._getBuffer(s),f}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var i=this.head,f=1,c=i.data;for(s-=c.length;i=i.next;){var l=i.data,h=s>l.length?l.length:s;if(c+=h===l.length?l:l.slice(0,s),0==(s-=h)){h===l.length?(++f,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=l.slice(h));break}++f}return this.length-=f,c}},{key:"_getBuffer",value:function(s){var i=y.allocUnsafe(s),f=this.head,c=1;for(f.data.copy(i),s-=f.data.length;f=f.next;){var l=f.data,h=s>l.length?l.length:s;if(l.copy(i,i.length-s,0,h),0==(s-=h)){h===l.length?(++c,this.head=f.next?f.next:this.tail=null):(this.head=f,f.data=l.slice(h));break}++c}return this.length-=c,i}},{key:r,value:function(s,i){return e(this,function(f){for(var c=1;c<arguments.length;c++){var l=null!=arguments[c]?arguments[c]:{};c%2?g(Object(l),!0).forEach(function(h){m(f,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(l)):g(Object(l)).forEach(function(h){Object.defineProperty(f,h,Object.getOwnPropertyDescriptor(l,h))})}return f}({},i,{depth:0,customInspect:!1}))}}])&&b(a.prototype,t),n}()},{buffer:85,util:83}],295:[function(v,re,ne){(function(g){(function(){"use strict";function m(e,r){y(e,r),b(e)}function b(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function y(e,r){e.emit("error",r)}re.exports={destroy:function(e,r){var n=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,g.nextTick(y,this,e)):g.nextTick(y,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(p){!r&&p?n._writableState?n._writableState.errorEmitted?g.nextTick(b,n):(n._writableState.errorEmitted=!0,g.nextTick(m,n,p)):g.nextTick(m,n,p):r?(g.nextTick(b,n),r(p)):g.nextTick(b,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,r){var n=e._readableState,a=e._writableState;n&&n.autoDestroy||a&&a.autoDestroy?e.destroy(r):e.emit("error",r)}}}).call(this)}).call(this,v("_process"))},{_process:278}],296:[function(v,re,ne){"use strict";var g=v("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}re.exports=function b(y,e,r){if("function"==typeof e)return b(y,null,e);var d,o;e||(e={}),d=r||m,o=!1,r=function(){if(!o){o=!0;for(var x=arguments.length,u=new Array(x),T=0;T<x;T++)u[T]=arguments[T];d.apply(this,u)}};var n=e.readable||!1!==e.readable&&y.readable,a=e.writable||!1!==e.writable&&y.writable,t=function(){y.writable||s()},p=y._writableState&&y._writableState.finished,s=function(){a=!1,p=!0,n||r.call(y)},i=y._readableState&&y._readableState.endEmitted,f=function(){n=!1,i=!0,a||r.call(y)},c=function(d){r.call(y,d)},l=function(){var d;return n&&!i?(y._readableState&&y._readableState.ended||(d=new g),r.call(y,d)):a&&!p?(y._writableState&&y._writableState.ended||(d=new g),r.call(y,d)):void 0},h=function(){y.req.on("finish",s)};return function(d){return d.setHeader&&"function"==typeof d.abort}(y)?(y.on("complete",s),y.on("abort",l),y.req?h():y.on("request",h)):a&&!y._writableState&&(y.on("end",t),y.on("close",t)),y.on("end",f),y.on("finish",s),!1!==e.error&&y.on("error",c),y.on("close",l),function(){y.removeListener("complete",s),y.removeListener("abort",l),y.removeListener("request",h),y.req&&y.req.removeListener("finish",s),y.removeListener("end",t),y.removeListener("close",t),y.removeListener("finish",s),y.removeListener("end",f),y.removeListener("error",c),y.removeListener("close",l)}}},{"../../../errors":287}],297:[function(v,re,ne){re.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(v,re,ne){"use strict";var g,m=v("../../../errors").codes,b=m.ERR_MISSING_ARGS,y=m.ERR_STREAM_DESTROYED;function e(p){if(p)throw p}function r(p,s,i,f){var h,d;h=f,d=!1,f=function(){d||(d=!0,h.apply(void 0,arguments))};var c=!1;p.on("close",function(){c=!0}),void 0===g&&(g=v("./end-of-stream")),g(p,{readable:s,writable:i},function(h){if(h)return f(h);c=!0,f()});var l=!1;return function(h){if(!c&&!l)return l=!0,function(d){return d.setHeader&&"function"==typeof d.abort}(p)?p.abort():"function"==typeof p.destroy?p.destroy():void f(h||new y("pipe"))}}function n(p){p()}function a(p,s){return p.pipe(s)}function t(p){return p.length?"function"!=typeof p[p.length-1]?e:p.pop():e}re.exports=function(){for(var p=arguments.length,s=new Array(p),i=0;i<p;i++)s[i]=arguments[i];var f,c=t(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new b("streams");var l=s.map(function(h,d){var o=d<s.length-1;return r(h,o,d>0,function(x){f||(f=x),x&&l.forEach(n),o||(l.forEach(n),c(f))})});return s.reduce(a)}},{"../../../errors":287,"./end-of-stream":296}],299:[function(v,re,ne){"use strict";var g=v("../../../errors").codes.ERR_INVALID_OPT_VALUE;re.exports={getHighWaterMark:function(m,b,y,e){var n,r=null!=(n=b).highWaterMark?n.highWaterMark:e?n[y]:null;if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new g(e?y:"highWaterMark",r);return Math.floor(r)}return m.objectMode?16:16384}}},{"../../../errors":287}],300:[function(v,re,ne){re.exports=v("events").EventEmitter},{events:84}],301:[function(v,re,ne){"use strict";var g=v("safe-buffer").Buffer,m=g.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function b(i){var f;switch(this.encoding=function(c){var l=function(h){if(!h)return"utf8";for(var d;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(d)return;h=(""+h).toLowerCase(),d=!0}}(c);if("string"!=typeof l&&(g.isEncoding===m||!m(c)))throw new Error("Unknown encoding: "+c);return l||c}(i),this.encoding){case"utf16le":this.text=r,this.end=n,f=4;break;case"utf8":this.fillLast=e,f=4;break;case"base64":this.text=a,this.end=t,f=3;break;default:return this.write=p,void(this.end=s)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(f)}function y(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function e(i){var f=this.lastTotal-this.lastNeed,c=function(l,h,d){if(128!=(192&h[0]))return l.lastNeed=0,"\ufffd";if(l.lastNeed>1&&h.length>1){if(128!=(192&h[1]))return l.lastNeed=1,"\ufffd";if(l.lastNeed>2&&h.length>2&&128!=(192&h[2]))return l.lastNeed=2,"\ufffd"}}(this,i);return void 0!==c?c:this.lastNeed<=i.length?(i.copy(this.lastChar,f,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,f,0,i.length),void(this.lastNeed-=i.length))}function r(i,f){if((i.length-f)%2==0){var c=i.toString("utf16le",f);if(c){var l=c.charCodeAt(c.length-1);if(l>=55296&&l<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",f,i.length-1)}function n(i){var f=i&&i.length?this.write(i):"";return this.lastNeed?f+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):f}function a(i,f){var c=(i.length-f)%3;return 0===c?i.toString("base64",f):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",f,i.length-c))}function t(i){var f=i&&i.length?this.write(i):"";return this.lastNeed?f+this.lastChar.toString("base64",0,3-this.lastNeed):f}function p(i){return i.toString(this.encoding)}function s(i){return i&&i.length?this.write(i):""}ne.StringDecoder=b,b.prototype.write=function(i){if(0===i.length)return"";var f,c;if(this.lastNeed){if(void 0===(f=this.fillLast(i)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<i.length?f?f+this.text(i,c):this.text(i,c):f||""},b.prototype.end=function(i){var f=i&&i.length?this.write(i):"";return this.lastNeed?f+"\ufffd":f},b.prototype.text=function(i,f){var c=function(h,d,o){var x=d.length-1;if(x<o)return 0;var u=y(d[x]);return u>=0?(u>0&&(h.lastNeed=u-1),u):--x<o||-2===u?0:(u=y(d[x]))>=0?(u>0&&(h.lastNeed=u-2),u):--x<o||-2===u?0:(u=y(d[x]))>=0?(u>0&&(2===u?u=0:h.lastNeed=u-3),u):0}(this,i,f);if(!this.lastNeed)return i.toString("utf8",f);this.lastTotal=c;var l=i.length-(c-this.lastNeed);return i.copy(this.lastChar,0,l),i.toString("utf8",f,l)},b.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},{"safe-buffer":285}],302:[function(v,re,ne){(function(g,m){(function(){var b=v("assert"),y=v("debug")("stream-parser");function e(c){y("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=-1,c._parserCallback=null,"function"==typeof c.push&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function r(c,l){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||e(this),y("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=l,this._parserState=0}function n(c,l){b(!this._parserCallback,'there is already a "callback" set!'),b(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||e(this),y("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=l,this._parserState=1}function a(c,l){b(!this._parserCallback,'There is already a "callback" set!'),b(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||e(this),y("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=l,this._parserState=2}function t(c,l,h){this._parserInit||e(this),y("write(%o bytes)",c.length),"function"==typeof l&&(h=l),i(this,c,null,h)}function p(c,l,h){this._parserInit||e(this),y("transform(%o bytes)",c.length),"function"!=typeof l&&(l=this._parserOutput),i(this,c,l,h)}function s(c,l,h,d){if(c._parserBytesLeft-=l.length,y("%o bytes left for stream piece",c._parserBytesLeft),0===c._parserState?(c._parserBuffers.push(l),c._parserBuffered+=l.length):2===c._parserState&&h(l),0!==c._parserBytesLeft)return d;var o=c._parserCallback;if(o&&0===c._parserState&&c._parserBuffers.length>1&&(l=m.concat(c._parserBuffers,c._parserBuffered)),0!==c._parserState&&(l=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=-1,c._parserBuffers.splice(0),o){var x=[];l&&x.push(l),h&&x.push(h);var u=o.length>x.length;u&&x.push(f(d));var T=o.apply(c,x);if(!u||d===T)return d}}re.exports=function(c){var l=c&&"function"==typeof c._transform;if(!(l||c&&"function"==typeof c._write))throw new Error("must pass a Writable or Transform stream in");y("extending Parser into stream"),c._bytes=r,c._skipBytes=n,l&&(c._passthrough=a),l?c._transform=p:c._write=t};var i=f(function c(l,h,d,o){return l._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):h.length<=l._parserBytesLeft?function(){return s(l,h,d,o)}:function(){var x=h.slice(0,l._parserBytesLeft);return s(l,x,d,function(u){return u?o(u):h.length>x.length?function(){return c(l,h.slice(x.length),d,o)}:void 0})}});function f(c){return function(){for(var l=c.apply(this,arguments);"function"==typeof l;)l=l();return l}}}).call(this)}).call(this,v("_process"),v("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(v,re,ne){(function(g){(function(){function m(){var b;try{b=ne.storage.debug}catch{}return!b&&void 0!==g&&"env"in g&&(b=g.env.DEBUG),b}(ne=re.exports=v("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ne.formatArgs=function(b){var y=this.useColors;if(b[0]=(y?"%c":"")+this.namespace+(y?" %c":" ")+b[0]+(y?"%c ":" ")+"+"+ne.humanize(this.diff),y){var e="color: "+this.color;b.splice(1,0,e,"color: inherit");var r=0,n=0;b[0].replace(/%[a-zA-Z%]/g,function(a){"%%"!==a&&(r++,"%c"===a&&(n=r))}),b.splice(n,0,e)}},ne.save=function(b){try{null==b?ne.storage.removeItem("debug"):ne.storage.debug=b}catch{}},ne.load=m,ne.useColors=function(){return!!(typeof window<"u"&&window.process&&"renderer"===window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ne.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),ne.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ne.formatters.j=function(b){try{return JSON.stringify(b)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}},ne.enable(m())}).call(this)}).call(this,v("_process"))},{"./debug":304,_process:278}],304:[function(v,re,ne){var g;function m(b){function y(){if(y.enabled){var e=y,r=+new Date;e.diff=r-(g||r),e.prev=g,e.curr=r,g=r;for(var a=new Array(arguments.length),t=0;t<a.length;t++)a[t]=arguments[t];a[0]=ne.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var p=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(i,f){if("%%"===i)return i;p++;var c=ne.formatters[f];return"function"==typeof c&&(i=c.call(e,a[p]),a.splice(p,1),p--),i}),ne.formatArgs.call(e,a),(y.log||ne.log||console.log.bind(console)).apply(e,a)}}return y.namespace=b,y.enabled=ne.enabled(b),y.useColors=ne.useColors(),y.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return ne.colors[Math.abs(n)%ne.colors.length]}(b),"function"==typeof ne.init&&ne.init(y),y}(ne=re.exports=m.debug=m.default=m).coerce=function(b){return b instanceof Error?b.stack||b.message:b},ne.disable=function(){ne.enable("")},ne.enable=function(b){ne.save(b),ne.names=[],ne.skips=[];for(var y=("string"==typeof b?b:"").split(/[\s,]+/),e=y.length,r=0;r<e;r++)y[r]&&("-"===(b=y[r].replace(/\*/g,".*?"))[0]?ne.skips.push(new RegExp("^"+b.substr(1)+"$")):ne.names.push(new RegExp("^"+b+"$")))},ne.enabled=function(b){var y,e;for(y=0,e=ne.skips.length;y<e;y++)if(ne.skips[y].test(b))return!1;for(y=0,e=ne.names.length;y<e;y++)if(ne.names[y].test(b))return!0;return!1},ne.humanize=v("ms"),ne.names=[],ne.skips=[],ne.formatters={}},{ms:305}],305:[function(v,re,ne){var g=1e3,m=6e4,b=60*m,y=24*b;function e(r,n,a){if(!(r<n))return r<1.5*n?Math.floor(r/n)+" "+a:Math.ceil(r/n)+" "+a+"s"}re.exports=function(r,n){n=n||{};var a,p,t=typeof r;if("string"===t&&r.length>0)return function(p){if(!((p=String(p)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(p);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*y;case"hours":case"hour":case"hrs":case"hr":case"h":return i*b;case"minutes":case"minute":case"mins":case"min":case"m":return i*m;case"seconds":case"second":case"secs":case"sec":case"s":return i*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(r);if("number"===t&&!1===isNaN(r))return n.long?e(a=r,y,"day")||e(a,b,"hour")||e(a,m,"minute")||e(a,g,"second")||a+" ms":(p=r)>=y?Math.round(p/y)+"d":p>=b?Math.round(p/b)+"h":p>=m?Math.round(p/m)+"m":p>=g?Math.round(p/g)+"s":p+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},{}],306:[function(v,re,ne){"use strict";var g=v("parenthesis");re.exports=function(m,b,y){if(null==m)throw Error("First argument should be a string");if(null==b)throw Error("Separator should be a string or a RegExp");y?("string"==typeof y||Array.isArray(y))&&(y={ignore:y}):y={},null==y.escape&&(y.escape=!0),null==y.ignore?y.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof y.ignore&&(y.ignore=[y.ignore]),y.ignore=y.ignore.map(function(s){return 1===s.length&&(s+=s),s}));var e=g.parse(m,{flat:!0,brackets:y.ignore}),r=e[0].split(b);if(y.escape){for(var n=[],a=0;a<r.length;a++){var t=r[a];"\\"===t[t.length-1]&&"\\"!==t[t.length-2]?(n.push(t+b+r[a+1]),a++):n.push(t)}r=n}for(a=0;a<r.length;a++)e[0]=r[a],r[a]=g.stringify(e,{flat:!0});return r}},{parenthesis:248}],307:[function(v,re,ne){"use strict";re.exports=function(g){for(var m=g.length,b=new Array(m),y=new Array(m),e=new Array(m),r=new Array(m),n=new Array(m),a=new Array(m),t=0;t<m;++t)b[t]=-1,y[t]=0,e[t]=!1,r[t]=0,n[t]=-1,a[t]=[];var p,s=0,i=[],f=[];function c(d){var o=[d],x=[d];for(b[d]=y[d]=s,e[d]=!0,s+=1;x.length>0;){var u=g[d=x[x.length-1]];if(r[d]<u.length){for(var T=r[d];T<u.length;++T){var _=u[T];if(b[_]<0){b[_]=y[_]=s,e[_]=!0,s+=1,o.push(_),x.push(_);break}e[_]&&(y[d]=0|Math.min(y[d],y[_])),n[_]>=0&&a[d].push(n[_])}r[d]=T}else{if(y[d]===b[d]){var w=[],M=[],I=0;for(T=o.length-1;T>=0;--T){var S=o[T];if(e[S]=!1,w.push(S),M.push(a[S]),I+=a[S].length,n[S]=i.length,S===d){o.length=T;break}}i.push(w);var R=new Array(I);for(T=0;T<M.length;T++)for(var O=0;O<M[T].length;O++)R[--I]=M[T][O];f.push(R)}x.pop()}}}for(t=0;t<m;++t)b[t]<0&&c(t);for(t=0;t<f.length;t++){var l=f[t];if(0!==l.length){l.sort(function(d,o){return d-o}),p=[l[0]];for(var h=1;h<l.length;h++)l[h]!==l[h-1]&&p.push(l[h]);f[t]=p}}return{components:i,adjacencyList:f}}},{}],308:[function(v,re,ne){"use strict";Object.defineProperty(ne,"__esModule",{value:!0});var m=2*Math.PI,b=function(r,n,a,t,p,s,i){var f=r.x,c=r.y;return{x:t*(f*=n)-p*(c*=a)+s,y:p*f+t*c+i}},y=function(r,n){var a=1.5707963267948966===n?.551915024494:-1.5707963267948966===n?-.551915024494:1.3333333333333333*Math.tan(n/4),t=Math.cos(r),p=Math.sin(r),s=Math.cos(r+n),i=Math.sin(r+n);return[{x:t-p*a,y:p+t*a},{x:s+i*a,y:i-s*a},{x:s,y:i}]},e=function(r,n,a,t){var p=r*a+n*t;return p>1&&(p=1),p<-1&&(p=-1),(r*t-n*a<0?-1:1)*Math.acos(p)};ne.default=function(r){var n=r.px,a=r.py,t=r.cx,p=r.cy,s=r.rx,i=r.ry,f=r.xAxisRotation,c=void 0===f?0:f,l=r.largeArcFlag,h=void 0===l?0:l,d=r.sweepFlag,o=void 0===d?0:d,x=[];if(0===s||0===i)return[];var u=Math.sin(c*m/360),T=Math.cos(c*m/360),_=T*(n-t)/2+u*(a-p)/2,w=-u*(n-t)/2+T*(a-p)/2;if(0===_&&0===w)return[];s=Math.abs(s),i=Math.abs(i);var M=Math.pow(_,2)/Math.pow(s,2)+Math.pow(w,2)/Math.pow(i,2);M>1&&(s*=Math.sqrt(M),i*=Math.sqrt(M));var S=function(r,n){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return function(a,t){var p=[],s=!0,i=!1,f=void 0;try{for(var c,l=a[Symbol.iterator]();!(s=(c=l.next()).done)&&(p.push(c.value),!t||p.length!==t);s=!0);}catch(h){i=!0,f=h}finally{try{!s&&l.return&&l.return()}finally{if(i)throw f}}return p}(r,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(G,J,te,X,K,ae,U,V,q,ie,H,ee){var Q=Math.pow(K,2),oe=Math.pow(ae,2),le=Math.pow(H,2),de=Math.pow(ee,2),fe=Q*oe-Q*de-oe*le;fe<0&&(fe=0),fe/=Q*de+oe*le;var be=(fe=Math.sqrt(fe)*(U===V?-1:1))*K/ae*ee,he=fe*-ae/K*H,_e=ie*be-q*he+(G+te)/2,Ce=q*be+ie*he+(J+X)/2,Ee=(H-be)/K,Ae=(ee-he)/ae,ze=(-H-be)/K,ve=(-ee-he)/ae,Te=e(1,0,Ee,Ae),Ie=e(Ee,Ae,ze,ve);return 0===V&&Ie>0&&(Ie-=m),1===V&&Ie<0&&(Ie+=m),[_e,Ce,Te,Ie]}(n,a,t,p,s,i,h,o,u,T,_,w),4),R=S[0],O=S[1],C=S[2],D=S[3],B=Math.abs(D)/(m/4);Math.abs(1-B)<1e-7&&(B=1);var z=Math.max(Math.ceil(B),1);D/=z;for(var Y=0;Y<z;Y++)x.push(y(C,D)),C+=D;return x.map(function(G){var J=b(G[0],s,i,T,u,R,O),te=J.x,X=J.y,K=b(G[1],s,i,T,u,R,O),ae=K.x,U=K.y,V=b(G[2],s,i,T,u,R,O);return{x1:te,y1:X,x2:ae,y2:U,x:V.x,y:V.y}})},re.exports=ne.default},{}],309:[function(v,re,ne){"use strict";var g=v("parse-svg-path"),m=v("abs-svg-path"),b=v("normalize-svg-path"),y=v("is-svg-path"),e=v("assert");re.exports=function(r){if(Array.isArray(r)&&1===r.length&&"string"==typeof r[0]&&(r=r[0]),"string"==typeof r&&(e(y(r),"String is not an SVG path."),r=g(r)),e(Array.isArray(r),"Argument should be a string or an array of path segments."),r=m(r),!(r=b(r)).length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],a=0,t=r.length;a<t;a++)for(var p=r[a].slice(1),s=0;s<p.length;s+=2)p[s+0]<n[0]&&(n[0]=p[s+0]),p[s+1]<n[1]&&(n[1]=p[s+1]),p[s+0]>n[2]&&(n[2]=p[s+0]),p[s+1]>n[3]&&(n[3]=p[s+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(v,re,ne){"use strict";re.exports=function(y){for(var e,r=[],n=0,a=0,t=0,p=0,s=null,i=null,f=0,c=0,l=0,h=y.length;l<h;l++){var d=y[l],o=d[0];switch(o){case"M":t=d[1],p=d[2];break;case"A":var x=g({px:f,py:c,cx:d[6],cy:d[7],rx:d[1],ry:d[2],xAxisRotation:d[3],largeArcFlag:d[4],sweepFlag:d[5]});if(!x.length)continue;for(var u,T=0;T<x.length;T++)d=["C",(u=x[T]).x1,u.y1,u.x2,u.y2,u.x,u.y],T<x.length-1&&r.push(d);break;case"S":var _=f,w=c;"C"!=e&&"S"!=e||(_+=_-n,w+=w-a),d=["C",_,w,d[1],d[2],d[3],d[4]];break;case"T":"Q"==e||"T"==e?(s=2*f-s,i=2*c-i):(s=f,i=c),d=b(f,c,s,i,d[1],d[2]);break;case"Q":s=d[1],i=d[2],d=b(f,c,d[1],d[2],d[3],d[4]);break;case"L":d=m(f,c,d[1],d[2]);break;case"H":d=m(f,c,d[1],c);break;case"V":d=m(f,c,f,d[1]);break;case"Z":d=m(f,c,t,p)}e=o,f=d[d.length-2],c=d[d.length-1],d.length>4?(n=d[d.length-4],a=d[d.length-3]):(n=f,a=c),r.push(d)}return r};var g=v("svg-arc-to-cubic-bezier");function m(y,e,r,n){return["C",y,e,r,n,r,n]}function b(y,e,r,n,a,t){return["C",y/3+2/3*r,e/3+2/3*n,a/3+2/3*r,t/3+2/3*n,a,t]}},{"svg-arc-to-cubic-bezier":308}],311:[function(v,re,ne){"use strict";var g,m=v("svg-path-bounds"),b=v("parse-svg-path"),y=v("draw-svg-path"),e=v("is-svg-path"),r=v("bitmap-sdf"),n=document.createElement("canvas"),a=n.getContext("2d");re.exports=function(t,p){if(!e(t))throw Error("Argument should be valid svg path string");var s,i;p||(p={}),p.shape?(s=p.shape[0],i=p.shape[1]):(s=n.width=p.w||p.width||200,i=n.height=p.h||p.height||200);var f=Math.min(s,i),c=p.stroke||0,l=p.viewbox||p.viewBox||m(t),h=[s/(l[2]-l[0]),i/(l[3]-l[1])],d=Math.min(h[0]||0,h[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,s,i),a.fillStyle="white",c&&("number"!=typeof c&&(c=1),a.strokeStyle=c>0?"white":"black",a.lineWidth=Math.abs(c)),a.translate(.5*s,.5*i),a.scale(d,d),function(){if(null!=g)return g;var u=document.createElement("canvas").getContext("2d");if(u.canvas.width=u.canvas.height=1,!window.Path2D)return g=!1;var T=new Path2D("M0,0h1v1h-1v-1Z");u.fillStyle="black",u.fill(T);var _=u.getImageData(0,0,1,1);return g=_&&_.data&&255===_.data[3]}()){var o=new Path2D(t);a.fill(o),c&&a.stroke(o)}else{var x=b(t);y(a,x),a.fill(),c&&a.stroke()}return a.setTransform(1,0,0,1,0,0),r(a,{cutoff:null!=p.cutoff?p.cutoff:.5,radius:null!=p.radius?p.radius:.5*f})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(v,re,ne){(function(g,m){(function(){var b=v("process/browser.js").nextTick,y=Function.prototype.apply,e=Array.prototype.slice,r={},n=0;function a(t,p){this._id=t,this._clearFn=p}ne.setTimeout=function(){return new a(y.call(setTimeout,window,arguments),clearTimeout)},ne.setInterval=function(){return new a(y.call(setInterval,window,arguments),clearInterval)},ne.clearTimeout=ne.clearInterval=function(t){t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},ne.enroll=function(t,p){clearTimeout(t._idleTimeoutId),t._idleTimeout=p},ne.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},ne._unrefActive=ne.active=function(t){clearTimeout(t._idleTimeoutId);var p=t._idleTimeout;p>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},p))},ne.setImmediate="function"==typeof g?g:function(t){var p=n++,s=!(arguments.length<2)&&e.call(arguments,1);return r[p]=!0,b(function(){r[p]&&(s?t.apply(null,s):t.call(null),ne.clearImmediate(p))}),p},ne.clearImmediate="function"==typeof m?m:function(t){delete r[t]}}).call(this)}).call(this,v("timers").setImmediate,v("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(v,re,ne){!function(g){var m=/^\s+/,b=/\s+$/,y=0,e=g.round,r=g.min,n=g.max,a=g.random;function t(q,ie){if(ie=ie||{},(q=q||"")instanceof t)return q;if(!(this instanceof t))return new t(q,ie);var ee,Ce,Ee,Q,oe,le,de,fe,be,he,H=(Q={r:0,g:0,b:0},oe=1,le=null,de=null,fe=null,be=!1,he=!1,"string"==typeof(ee=q)&&(ee=function(Ae){Ae=Ae.replace(m,"").replace(b,"").toLowerCase();var ze,ve=!1;if(R[Ae])Ae=R[Ae],ve=!0;else if("transparent"==Ae)return{r:0,g:0,b:0,a:0,format:"name"};return(ze=U.rgb.exec(Ae))?{r:ze[1],g:ze[2],b:ze[3]}:(ze=U.rgba.exec(Ae))?{r:ze[1],g:ze[2],b:ze[3],a:ze[4]}:(ze=U.hsl.exec(Ae))?{h:ze[1],s:ze[2],l:ze[3]}:(ze=U.hsla.exec(Ae))?{h:ze[1],s:ze[2],l:ze[3],a:ze[4]}:(ze=U.hsv.exec(Ae))?{h:ze[1],s:ze[2],v:ze[3]}:(ze=U.hsva.exec(Ae))?{h:ze[1],s:ze[2],v:ze[3],a:ze[4]}:(ze=U.hex8.exec(Ae))?{r:z(ze[1]),g:z(ze[2]),b:z(ze[3]),a:te(ze[4]),format:ve?"name":"hex8"}:(ze=U.hex6.exec(Ae))?{r:z(ze[1]),g:z(ze[2]),b:z(ze[3]),format:ve?"name":"hex"}:(ze=U.hex4.exec(Ae))?{r:z(ze[1]+""+ze[1]),g:z(ze[2]+""+ze[2]),b:z(ze[3]+""+ze[3]),a:te(ze[4]+""+ze[4]),format:ve?"name":"hex8"}:!!(ze=U.hex3.exec(Ae))&&{r:z(ze[1]+""+ze[1]),g:z(ze[2]+""+ze[2]),b:z(ze[3]+""+ze[3]),format:ve?"name":"hex"}}(ee)),"object"==typeof ee&&(V(ee.r)&&V(ee.g)&&V(ee.b)?(Ce=ee.g,Ee=ee.b,Q={r:255*D(ee.r,255),g:255*D(Ce,255),b:255*D(Ee,255)},be=!0,he="%"===String(ee.r).substr(-1)?"prgb":"rgb"):V(ee.h)&&V(ee.s)&&V(ee.v)?(le=G(ee.s),de=G(ee.v),Q=function(Ae,ze,ve){Ae=6*D(Ae,360),ze=D(ze,100),ve=D(ve,100);var Te=g.floor(Ae),Ie=Ae-Te,De=ve*(1-ze),Fe=ve*(1-Ie*ze),Ue=ve*(1-(1-Ie)*ze),qe=Te%6;return{r:255*[ve,Fe,De,De,Ue,ve][qe],g:255*[Ue,ve,ve,Fe,De,De][qe],b:255*[De,De,Ue,ve,ve,Fe][qe]}}(ee.h,le,de),be=!0,he="hsv"):V(ee.h)&&V(ee.s)&&V(ee.l)&&(le=G(ee.s),fe=G(ee.l),Q=function(Ae,ze,ve){var Te,Ie,De;function Fe(je,rt,Ne){return Ne<0&&(Ne+=1),Ne>1&&(Ne-=1),Ne<1/6?je+6*(rt-je)*Ne:Ne<.5?rt:Ne<2/3?je+(rt-je)*(2/3-Ne)*6:je}if(Ae=D(Ae,360),ze=D(ze,100),ve=D(ve,100),0===ze)Te=Ie=De=ve;else{var Ue=ve<.5?ve*(1+ze):ve+ze-ve*ze,qe=2*ve-Ue;Te=Fe(qe,Ue,Ae+1/3),Ie=Fe(qe,Ue,Ae),De=Fe(qe,Ue,Ae-1/3)}return{r:255*Te,g:255*Ie,b:255*De}}(ee.h,le,fe),be=!0,he="hsl"),ee.hasOwnProperty("a")&&(oe=ee.a)),oe=C(oe),{ok:be,format:ee.format||he,r:r(255,n(Q.r,0)),g:r(255,n(Q.g,0)),b:r(255,n(Q.b,0)),a:oe});this._originalInput=q,this._r=H.r,this._g=H.g,this._b=H.b,this._a=H.a,this._roundA=e(100*this._a)/100,this._format=ie.format||H.format,this._gradientType=ie.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=H.ok,this._tc_id=y++}function p(q,ie,H){q=D(q,255),ie=D(ie,255),H=D(H,255);var ee,Q,oe=n(q,ie,H),le=r(q,ie,H),de=(oe+le)/2;if(oe==le)ee=Q=0;else{var fe=oe-le;switch(Q=de>.5?fe/(2-oe-le):fe/(oe+le),oe){case q:ee=(ie-H)/fe+(ie<H?6:0);break;case ie:ee=(H-q)/fe+2;break;case H:ee=(q-ie)/fe+4}ee/=6}return{h:ee,s:Q,l:de}}function s(q,ie,H){q=D(q,255),ie=D(ie,255),H=D(H,255);var ee,Q,oe=n(q,ie,H),le=r(q,ie,H),de=oe,fe=oe-le;if(Q=0===oe?0:fe/oe,oe==le)ee=0;else{switch(oe){case q:ee=(ie-H)/fe+(ie<H?6:0);break;case ie:ee=(H-q)/fe+2;break;case H:ee=(q-ie)/fe+4}ee/=6}return{h:ee,s:Q,v:de}}function i(q,ie,H,ee){var Q=[Y(e(q).toString(16)),Y(e(ie).toString(16)),Y(e(H).toString(16))];return ee&&Q[0].charAt(0)==Q[0].charAt(1)&&Q[1].charAt(0)==Q[1].charAt(1)&&Q[2].charAt(0)==Q[2].charAt(1)?Q[0].charAt(0)+Q[1].charAt(0)+Q[2].charAt(0):Q.join("")}function f(q,ie,H,ee){return[Y(J(ee)),Y(e(q).toString(16)),Y(e(ie).toString(16)),Y(e(H).toString(16))].join("")}function c(q,ie){ie=0===ie?0:ie||10;var H=t(q).toHsl();return H.s-=ie/100,H.s=B(H.s),t(H)}function l(q,ie){ie=0===ie?0:ie||10;var H=t(q).toHsl();return H.s+=ie/100,H.s=B(H.s),t(H)}function h(q){return t(q).desaturate(100)}function d(q,ie){ie=0===ie?0:ie||10;var H=t(q).toHsl();return H.l+=ie/100,H.l=B(H.l),t(H)}function o(q,ie){ie=0===ie?0:ie||10;var H=t(q).toRgb();return H.r=n(0,r(255,H.r-e(-ie/100*255))),H.g=n(0,r(255,H.g-e(-ie/100*255))),H.b=n(0,r(255,H.b-e(-ie/100*255))),t(H)}function x(q,ie){ie=0===ie?0:ie||10;var H=t(q).toHsl();return H.l-=ie/100,H.l=B(H.l),t(H)}function u(q,ie){var H=t(q).toHsl(),ee=(H.h+ie)%360;return H.h=ee<0?360+ee:ee,t(H)}function T(q){var ie=t(q).toHsl();return ie.h=(ie.h+180)%360,t(ie)}function _(q){var ie=t(q).toHsl(),H=ie.h;return[t(q),t({h:(H+120)%360,s:ie.s,l:ie.l}),t({h:(H+240)%360,s:ie.s,l:ie.l})]}function w(q){var ie=t(q).toHsl(),H=ie.h;return[t(q),t({h:(H+90)%360,s:ie.s,l:ie.l}),t({h:(H+180)%360,s:ie.s,l:ie.l}),t({h:(H+270)%360,s:ie.s,l:ie.l})]}function M(q){var ie=t(q).toHsl(),H=ie.h;return[t(q),t({h:(H+72)%360,s:ie.s,l:ie.l}),t({h:(H+216)%360,s:ie.s,l:ie.l})]}function I(q,ie,H){ie=ie||6,H=H||30;var ee=t(q).toHsl(),Q=360/H,oe=[t(q)];for(ee.h=(ee.h-(Q*ie>>1)+720)%360;--ie;)ee.h=(ee.h+Q)%360,oe.push(t(ee));return oe}function S(q,ie){ie=ie||6;for(var H=t(q).toHsv(),ee=H.h,Q=H.s,oe=H.v,le=[],de=1/ie;ie--;)le.push(t({h:ee,s:Q,v:oe})),oe=(oe+de)%1;return le}t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var q=this.toRgb();return(299*q.r+587*q.g+114*q.b)/1e3},getLuminance:function(){var q,ie,H,ee=this.toRgb();return ie=ee.g/255,H=ee.b/255,.2126*((q=ee.r/255)<=.03928?q/12.92:g.pow((q+.055)/1.055,2.4))+.7152*(ie<=.03928?ie/12.92:g.pow((ie+.055)/1.055,2.4))+.0722*(H<=.03928?H/12.92:g.pow((H+.055)/1.055,2.4))},setAlpha:function(q){return this._a=C(q),this._roundA=e(100*this._a)/100,this},toHsv:function(){var q=s(this._r,this._g,this._b);return{h:360*q.h,s:q.s,v:q.v,a:this._a}},toHsvString:function(){var q=s(this._r,this._g,this._b),ie=e(360*q.h),H=e(100*q.s),ee=e(100*q.v);return 1==this._a?"hsv("+ie+", "+H+"%, "+ee+"%)":"hsva("+ie+", "+H+"%, "+ee+"%, "+this._roundA+")"},toHsl:function(){var q=p(this._r,this._g,this._b);return{h:360*q.h,s:q.s,l:q.l,a:this._a}},toHslString:function(){var q=p(this._r,this._g,this._b),ie=e(360*q.h),H=e(100*q.s),ee=e(100*q.l);return 1==this._a?"hsl("+ie+", "+H+"%, "+ee+"%)":"hsla("+ie+", "+H+"%, "+ee+"%, "+this._roundA+")"},toHex:function(q){return i(this._r,this._g,this._b,q)},toHexString:function(q){return"#"+this.toHex(q)},toHex8:function(q){return H=this._g,ee=this._b,Q=this._a,oe=q,le=[Y(e(this._r).toString(16)),Y(e(H).toString(16)),Y(e(ee).toString(16)),Y(J(Q))],oe&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)&&le[3].charAt(0)==le[3].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0)+le[3].charAt(0):le.join("");var H,ee,Q,oe,le},toHex8String:function(q){return"#"+this.toHex8(q)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*D(this._r,255))+"%",g:e(100*D(this._g,255))+"%",b:e(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*D(this._r,255))+"%, "+e(100*D(this._g,255))+"%, "+e(100*D(this._b,255))+"%)":"rgba("+e(100*D(this._r,255))+"%, "+e(100*D(this._g,255))+"%, "+e(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(q){var ie="#"+f(this._r,this._g,this._b,this._a),H=ie,ee=this._gradientType?"GradientType = 1, ":"";if(q){var Q=t(q);H="#"+f(Q._r,Q._g,Q._b,Q._a)}return"progid:DXImageTransform.Microsoft.gradient("+ee+"startColorstr="+ie+",endColorstr="+H+")"},toString:function(q){var ie=!!q;q=q||this._format;var H=!1;return ie||!(this._a<1&&this._a>=0)||"hex"!==q&&"hex6"!==q&&"hex3"!==q&&"hex4"!==q&&"hex8"!==q&&"name"!==q?("rgb"===q&&(H=this.toRgbString()),"prgb"===q&&(H=this.toPercentageRgbString()),"hex"!==q&&"hex6"!==q||(H=this.toHexString()),"hex3"===q&&(H=this.toHexString(!0)),"hex4"===q&&(H=this.toHex8String(!0)),"hex8"===q&&(H=this.toHex8String()),"name"===q&&(H=this.toName()),"hsl"===q&&(H=this.toHslString()),"hsv"===q&&(H=this.toHsvString()),H||this.toHexString()):"name"===q&&0===this._a?this.toName():this.toRgbString()},clone:function(){return t(this.toString())},_applyModification:function(q,ie){var H=q.apply(null,[this].concat([].slice.call(ie)));return this._r=H._r,this._g=H._g,this._b=H._b,this.setAlpha(H._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(o,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(l,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(u,arguments)},_applyCombination:function(q,ie){return q.apply(null,[this].concat([].slice.call(ie)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},t.fromRatio=function(q,ie){if("object"==typeof q){var H={};for(var ee in q)q.hasOwnProperty(ee)&&(H[ee]="a"===ee?q[ee]:G(q[ee]));q=H}return t(q,ie)},t.equals=function(q,ie){return!(!q||!ie)&&t(q).toRgbString()==t(ie).toRgbString()},t.random=function(){return t.fromRatio({r:a(),g:a(),b:a()})},t.mix=function(q,ie,H){H=0===H?0:H||50;var ee=t(q).toRgb(),Q=t(ie).toRgb(),oe=H/100;return t({r:(Q.r-ee.r)*oe+ee.r,g:(Q.g-ee.g)*oe+ee.g,b:(Q.b-ee.b)*oe+ee.b,a:(Q.a-ee.a)*oe+ee.a})},t.readability=function(q,ie){var H=t(q),ee=t(ie);return(g.max(H.getLuminance(),ee.getLuminance())+.05)/(g.min(H.getLuminance(),ee.getLuminance())+.05)},t.isReadable=function(q,ie,H){var ee,Q,le,de,fe,oe=t.readability(q,ie);switch(Q=!1,(le=H,"AA"!==(de=((le=le||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==de&&(de="AA"),"small"!==(fe=(le.size||"small").toLowerCase())&&"large"!==fe&&(fe="small"),ee={level:de,size:fe}).level+ee.size){case"AAsmall":case"AAAlarge":Q=oe>=4.5;break;case"AAlarge":Q=oe>=3;break;case"AAAsmall":Q=oe>=7}return Q},t.mostReadable=function(q,ie,H){var ee,Q,oe,le,de=null,fe=0;Q=(H=H||{}).includeFallbackColors,oe=H.level,le=H.size;for(var be=0;be<ie.length;be++)(ee=t.readability(q,ie[be]))>fe&&(fe=ee,de=t(ie[be]));return t.isReadable(q,de,{level:oe,size:le})||!Q?de:(H.includeFallbackColors=!1,t.mostReadable(q,["#fff","#000"],H))};var R=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=t.hexNames=function(q){var ie={};for(var H in q)q.hasOwnProperty(H)&&(ie[q[H]]=H);return ie}(R);function C(q){return q=parseFloat(q),(isNaN(q)||q<0||q>1)&&(q=1),q}function D(q,ie){var ee;"string"==typeof(ee=q)&&-1!=ee.indexOf(".")&&1===parseFloat(ee)&&(q="100%");var H=function(ee){return"string"==typeof ee&&-1!=ee.indexOf("%")}(q);return q=r(ie,n(0,parseFloat(q))),H&&(q=parseInt(q*ie,10)/100),g.abs(q-ie)<1e-6?1:q%ie/parseFloat(ie)}function B(q){return r(1,n(0,q))}function z(q){return parseInt(q,16)}function Y(q){return 1==q.length?"0"+q:""+q}function G(q){return q<=1&&(q=100*q+"%"),q}function J(q){return g.round(255*parseFloat(q)).toString(16)}function te(q){return z(q)/255}var X,K,ae,U=(K="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",ae="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+K),rgba:new RegExp("rgba"+ae),hsl:new RegExp("hsl"+K),hsla:new RegExp("hsla"+ae),hsv:new RegExp("hsv"+K),hsva:new RegExp("hsva"+ae),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(q){return!!U.CSS_UNIT.exec(q)}void 0!==re&&re.exports?re.exports=t:window.tinycolor=t}(Math)},{}],314:[function(v,re,ne){"use strict";re.exports=m,re.exports.float32=re.exports.float=m,re.exports.fract32=re.exports.fract=function(b,y){if(b.length){if(b instanceof Float32Array)return new Float32Array(b.length);y instanceof Float32Array||(y=m(b));for(var e=0,r=y.length;e<r;e++)y[e]=b[e]-y[e];return y}return m(b-m(b))};var g=new Float32Array(1);function m(b){return b.length?b instanceof Float32Array?b:new Float32Array(b):(g[0]=b,g[0])}},{}],315:[function(v,re,ne){"use strict";var g=v("parse-unit");function m(y,e){var r=g(getComputedStyle(y).getPropertyValue(e));return r[0]*b(r[1],y)}function b(y,e){switch(e=e||document.body,y=(y||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),y){case"%":return e.clientHeight/100;case"ch":case"ex":return function(r,n){var a=document.createElement("div");a.style["font-size"]="128"+r,n.appendChild(a);var t=m(a,"font-size")/128;return n.removeChild(a),t}(y,e);case"em":return m(e,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}re.exports=b},{"parse-unit":251}],316:[function(v,re,ne){var g,m;g=this,m=function(g){"use strict";function m(f){return f}function b(f){if(null==f)return m;var c,l,h=f.scale[0],d=f.scale[1],o=f.translate[0],x=f.translate[1];return function(u,T){T||(c=l=0);var _=2,w=u.length,M=new Array(w);for(M[0]=(c+=u[0])*h+o,M[1]=(l+=u[1])*d+x;_<w;)M[_]=u[_],++_;return M}}function y(f){var c,l=b(f.transform),h=1/0,d=h,o=-h,x=-h;function u(_){(_=l(_))[0]<h&&(h=_[0]),_[0]>o&&(o=_[0]),_[1]<d&&(d=_[1]),_[1]>x&&(x=_[1])}function T(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(T);break;case"Point":u(_.coordinates);break;case"MultiPoint":_.coordinates.forEach(u)}}for(c in f.arcs.forEach(function(_){for(var w,M=-1,I=_.length;++M<I;)(w=l(_[M],M))[0]<h&&(h=w[0]),w[0]>o&&(o=w[0]),w[1]<d&&(d=w[1]),w[1]>x&&(x=w[1])}),f.objects)T(f.objects[c]);return[h,d,o,x]}function e(f,c){var l=c.id,h=c.bbox,d=c.properties??{},o=r(f,c);return null==l&&null==h?{type:"Feature",properties:d,geometry:o}:null==h?{type:"Feature",id:l,properties:d,geometry:o}:{type:"Feature",id:l,bbox:h,properties:d,geometry:o}}function r(f,c){var l=b(f.transform),h=f.arcs;function d(_,w){w.length&&w.pop();for(var M=h[_<0?~_:_],I=0,S=M.length;I<S;++I)w.push(l(M[I],I));_<0&&function(R,O){for(var C,D=R.length,B=D-O;B<--D;)C=R[B],R[B++]=R[D],R[D]=C}(w,S)}function o(_){return l(_)}function x(_){for(var w=[],M=0,I=_.length;M<I;++M)d(_[M],w);return w.length<2&&w.push(w[0]),w}function u(_){for(var w=x(_);w.length<4;)w.push(w[0]);return w}function T(_){return _.map(u)}return function _(w){var M,I=w.type;switch(I){case"GeometryCollection":return{type:I,geometries:w.geometries.map(_)};case"Point":M=o(w.coordinates);break;case"MultiPoint":M=w.coordinates.map(o);break;case"LineString":M=x(w.arcs);break;case"MultiLineString":M=w.arcs.map(x);break;case"Polygon":M=T(w.arcs);break;case"MultiPolygon":M=w.arcs.map(T);break;default:return null}return{type:I,coordinates:M}}(c)}function n(f,c){var l={},h={},d={},o=[],x=-1;function u(T,_){for(var w in T){var M=T[w];delete _[M.start],delete M.start,delete M.end,M.forEach(function(I){l[I<0?~I:I]=1}),o.push(M)}}return c.forEach(function(T,_){var w,M=f.arcs[T<0?~T:T];M.length<3&&!M[1][0]&&!M[1][1]&&(w=c[++x],c[x]=T,c[_]=w)}),c.forEach(function(T){var _,w,C,D,B,z,M=(z=(B=f.arcs[(C=T)<0?~C:C])[0],f.transform?(D=[0,0],B.forEach(function(Y){D[0]+=Y[0],D[1]+=Y[1]})):D=B[B.length-1],C<0?[D,z]:[z,D]),I=M[0],S=M[1];if(_=d[I])if(delete d[_.end],_.push(T),_.end=S,w=h[S]){delete h[w.start];var R=w===_?_:_.concat(w);h[R.start=_.start]=d[R.end=w.end]=R}else h[_.start]=d[_.end]=_;else if(_=h[S])if(delete h[_.start],_.unshift(T),_.start=I,w=d[I]){delete d[w.end];var O=w===_?_:w.concat(_);h[O.start=w.start]=d[O.end=_.end]=O}else h[_.start]=d[_.end]=_;else h[(_=[T]).start=I]=d[_.end=S]=_}),u(d,h),u(h,d),c.forEach(function(T){l[T<0?~T:T]||o.push([T])}),o}function a(f,c,l){var h,d,o;if(arguments.length>1)h=t(0,c,l);else for(d=0,h=new Array(o=f.arcs.length);d<o;++d)h[d]=d;return{type:"MultiLineString",arcs:n(f,h)}}function t(f,c,l){var h,d=[],o=[];function x(_){var w=_<0?~_:_;(o[w]||(o[w]=[])).push({i:_,g:h})}function u(_){_.forEach(x)}function T(_){_.forEach(u)}return function _(w){switch(h=w,w.type){case"GeometryCollection":w.geometries.forEach(_);break;case"LineString":u(w.arcs);break;case"MultiLineString":case"Polygon":T(w.arcs);break;case"MultiPolygon":w.arcs.forEach(T)}}(c),o.forEach(null==l?function(_){d.push(_[0].i)}:function(_){l(_[0].g,_[_.length-1].g)&&d.push(_[0].i)}),d}function p(f,c){var l={},h=[],d=[];function o(u){u.forEach(function(T){T.forEach(function(_){(l[_=_<0?~_:_]||(l[_]=[])).push(u)})}),h.push(u)}function x(u){return function(T){for(var _,w=-1,M=T.length,I=T[M-1],S=0;++w<M;)S+=(_=I)[0]*(I=T[w])[1]-_[1]*I[0];return Math.abs(S)}(r(f,{type:"Polygon",arcs:[u]}).coordinates[0])}return c.forEach(function u(T){switch(T.type){case"GeometryCollection":T.geometries.forEach(u);break;case"Polygon":o(T.arcs);break;case"MultiPolygon":T.arcs.forEach(o)}}),h.forEach(function(u){if(!u._){var T=[],_=[u];for(u._=1,d.push(T);u=_.pop();)T.push(u),u.forEach(function(w){w.forEach(function(M){l[M<0?~M:M].forEach(function(I){I._||(I._=1,_.push(I))})})})}}),h.forEach(function(u){delete u._}),{type:"MultiPolygon",arcs:d.map(function(u){var T,_=[];if(u.forEach(function(R){R.forEach(function(O){O.forEach(function(C){l[C<0?~C:C].length<2&&_.push(C)})})}),(T=(_=n(f,_)).length)>1)for(var w,M,I=1,S=x(_[0]);I<T;++I)(w=x(_[I]))>S&&(M=_[0],_[0]=_[I],_[I]=M,S=w);return _}).filter(function(u){return u.length>0})}}function s(f,c){for(var l=0,h=f.length;l<h;){var d=l+h>>>1;f[d]<c?l=d+1:h=d}return l}function i(f){if(null==f)return m;var c,l,h=f.scale[0],d=f.scale[1],o=f.translate[0],x=f.translate[1];return function(u,T){T||(c=l=0);var _=2,w=u.length,M=new Array(w),I=Math.round((u[0]-o)/h),S=Math.round((u[1]-x)/d);for(M[0]=I-c,c=I,M[1]=S-l,l=S;_<w;)M[_]=u[_],++_;return M}}g.bbox=y,g.feature=function(f,c){return"string"==typeof c&&(c=f.objects[c]),"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(l){return e(f,l)})}:e(f,c)},g.merge=function(f){return r(f,p.apply(this,arguments))},g.mergeArcs=p,g.mesh=function(f){return r(f,a.apply(this,arguments))},g.meshArcs=a,g.neighbors=function(f){var c={},l=f.map(function(){return[]});function h(R,O){R.forEach(function(C){C<0&&(C=~C);var D=c[C];D?D.push(O):c[C]=[O]})}function d(R,O){R.forEach(function(C){h(C,O)})}var o={LineString:h,MultiLineString:d,Polygon:d,MultiPolygon:function(R,O){R.forEach(function(C){d(C,O)})}};for(var x in f.forEach(function R(O,C){"GeometryCollection"===O.type?O.geometries.forEach(function(D){R(D,C)}):O.type in o&&o[O.type](O.arcs,C)}),c)for(var u=c[x],T=u.length,_=0;_<T;++_)for(var w=_+1;w<T;++w){var M,I=u[_],S=u[w];(M=l[I])[x=s(M,S)]!==S&&M.splice(x,0,S),(M=l[S])[x=s(M,I)]!==I&&M.splice(x,0,I)}return l},g.quantize=function(f,c){if(f.transform)throw new Error("already quantized");if(c&&c.scale)u=f.bbox;else{if(!((l=Math.floor(c))>=2))throw new Error("n must be \u22652");var l,h=(u=f.bbox||y(f))[0],d=u[1],o=u[2],x=u[3];c={scale:[o-h?(o-h)/(l-1):1,x-d?(x-d)/(l-1):1],translate:[h,d]}}var u,T,_=i(c),w=f.objects,M={};function I(R){return _(R)}function S(R){var O;switch(R.type){case"GeometryCollection":O={type:"GeometryCollection",geometries:R.geometries.map(S)};break;case"Point":O={type:"Point",coordinates:I(R.coordinates)};break;case"MultiPoint":O={type:"MultiPoint",coordinates:R.coordinates.map(I)};break;default:return R}return null!=R.id&&(O.id=R.id),null!=R.bbox&&(O.bbox=R.bbox),null!=R.properties&&(O.properties=R.properties),O}for(T in w)M[T]=S(w[T]);return{type:"Topology",bbox:u,transform:c,objects:M,arcs:f.arcs.map(function(R){var O,C=0,D=1,B=R.length,z=new Array(B);for(z[0]=_(R[0],0);++C<B;)((O=_(R[C],C))[0]||O[1])&&(z[D++]=O);return 1===D&&(z[D++]=[0,0]),z.length=D,z})}},g.transform=b,g.untransform=i,Object.defineProperty(g,"__esModule",{value:!0})},m("object"==typeof ne&&void 0!==re?ne:(g=g||self).topojson=g.topojson||{})},{}],317:[function(v,re,ne){"use strict";var g=v("../prototype/is");re.exports=function(m){if("function"!=typeof m||!hasOwnProperty.call(m,"length"))return!1;try{if("number"!=typeof m.length||"function"!=typeof m.call||"function"!=typeof m.apply)return!1}catch{return!1}return!g(m)}},{"../prototype/is":324}],318:[function(v,re,ne){"use strict";var g=v("../value/is"),m=v("../object/is"),b=v("../string/coerce"),y=v("./to-short-string"),e=function(r,n){return r.replace("%v",y(n))};re.exports=function(r,n,a){if(!m(a))throw new TypeError(e(n,r));if(!g(r)){if("default"in a)return a.default;if(a.isOptional)return null}var t=b(a.errorMessage);throw g(t)||(t=n),new TypeError(e(t,r))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(v,re,ne){"use strict";re.exports=function(g){try{return g.toString()}catch{try{return String(g)}catch{return null}}}},{}],320:[function(v,re,ne){"use strict";var g=v("./safe-to-string"),m=/[\n\r\u2028\u2029]/g;re.exports=function(b){var y=g(b);return null===y?"<Non-coercible to string value>":(y.length>100&&(y=y.slice(0,99)+"\u2026"),y=y.replace(m,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":319}],321:[function(v,re,ne){"use strict";var g=v("../value/is"),m={object:!0,function:!0,undefined:!0};re.exports=function(b){return!!g(b)&&hasOwnProperty.call(m,typeof b)}},{"../value/is":327}],322:[function(v,re,ne){"use strict";var g=v("../lib/resolve-exception"),m=v("./is");re.exports=function(b){return m(b)?b:g(b,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(v,re,ne){"use strict";var g=v("../function/is"),m=/^\s*class[\s{/}]/,b=Function.prototype.toString;re.exports=function(y){return!!g(y)&&!m.test(b.call(y))}},{"../function/is":317}],324:[function(v,re,ne){"use strict";var g=v("../object/is");re.exports=function(m){if(!g(m))return!1;try{return!!m.constructor&&m.constructor.prototype===m}catch{return!1}}},{"../object/is":321}],325:[function(v,re,ne){"use strict";var g=v("../value/is"),m=v("../object/is"),b=Object.prototype.toString;re.exports=function(y){if(!g(y))return null;if(m(y)){var e=y.toString;if("function"!=typeof e||e===b)return null}try{return""+y}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(v,re,ne){"use strict";var g=v("../lib/resolve-exception"),m=v("./is");re.exports=function(b){return m(b)?b:g(b,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(v,re,ne){"use strict";re.exports=function(g){return null!=g}},{}],328:[function(v,re,ne){(function(g){(function(){"use strict";var m=v("bit-twiddle"),b=v("dup"),y=v("buffer").Buffer;g.__TYPEDARRAY_POOL||(g.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var e=typeof Uint8ClampedArray<"u",r=typeof BigUint64Array<"u",n=typeof BigInt64Array<"u",a=g.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=b([32,0])),a.BIGUINT64||(a.BIGUINT64=b([32,0])),a.BIGINT64||(a.BIGINT64=b([32,0])),a.BUFFER||(a.BUFFER=b([32,0]));var t=a.DATA,p=a.BUFFER;function s(S){if(S){var O=m.log2(S.length||S.byteLength);t[O].push(S)}}function i(S){S=m.nextPow2(S);var R=m.log2(S),O=t[R];return O.length>0?O.pop():new ArrayBuffer(S)}function f(S){return new Uint8Array(i(S),0,S)}function c(S){return new Uint16Array(i(2*S),0,S)}function l(S){return new Uint32Array(i(4*S),0,S)}function h(S){return new Int8Array(i(S),0,S)}function d(S){return new Int16Array(i(2*S),0,S)}function o(S){return new Int32Array(i(4*S),0,S)}function x(S){return new Float32Array(i(4*S),0,S)}function u(S){return new Float64Array(i(8*S),0,S)}function T(S){return e?new Uint8ClampedArray(i(S),0,S):f(S)}function _(S){return r?new BigUint64Array(i(8*S),0,S):null}function w(S){return n?new BigInt64Array(i(8*S),0,S):null}function M(S){return new DataView(i(S),0,S)}function I(S){S=m.nextPow2(S);var R=m.log2(S),O=p[R];return O.length>0?O.pop():new y(S)}ne.free=function(S){if(y.isBuffer(S))p[m.log2(S.length)].push(S);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(S)&&(S=S.buffer),!S)return;var O=0|m.log2(S.length||S.byteLength);t[O].push(S)}},ne.freeUint8=ne.freeUint16=ne.freeUint32=ne.freeBigUint64=ne.freeInt8=ne.freeInt16=ne.freeInt32=ne.freeBigInt64=ne.freeFloat32=ne.freeFloat=ne.freeFloat64=ne.freeDouble=ne.freeUint8Clamped=ne.freeDataView=function(S){s(S.buffer)},ne.freeArrayBuffer=s,ne.freeBuffer=function(S){p[m.log2(S.length)].push(S)},ne.malloc=function(S,R){if(void 0===R||"arraybuffer"===R)return i(S);switch(R){case"uint8":return f(S);case"uint16":return c(S);case"uint32":return l(S);case"int8":return h(S);case"int16":return d(S);case"int32":return o(S);case"float":case"float32":return x(S);case"double":case"float64":return u(S);case"uint8_clamped":return T(S);case"bigint64":return w(S);case"biguint64":return _(S);case"buffer":return I(S);case"data":case"dataview":return M(S);default:return null}return null},ne.mallocArrayBuffer=i,ne.mallocUint8=f,ne.mallocUint16=c,ne.mallocUint32=l,ne.mallocInt8=h,ne.mallocInt16=d,ne.mallocInt32=o,ne.mallocFloat32=ne.mallocFloat=x,ne.mallocFloat64=ne.mallocDouble=u,ne.mallocUint8Clamped=T,ne.mallocBigUint64=_,ne.mallocBigInt64=w,ne.mallocDataView=M,ne.mallocBuffer=I,ne.clearCache=function(){for(var S=0;S<32;++S)a.UINT8[S].length=0,a.UINT16[S].length=0,a.UINT32[S].length=0,a.INT8[S].length=0,a.INT16[S].length=0,a.INT32[S].length=0,a.FLOAT[S].length=0,a.DOUBLE[S].length=0,a.BIGUINT64[S].length=0,a.BIGINT64[S].length=0,a.UINT8C[S].length=0,t[S].length=0,p[S].length=0}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(v,re,ne){var g=/[\'\"]/;re.exports=function(m){return m?(g.test(m.charAt(0))&&(m=m.substr(1)),g.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],330:[function(v,re,ne){"use strict";re.exports=function(g,m,b){Array.isArray(b)||(b=[].slice.call(arguments,2));for(var y=0,e=b.length;y<e;y++){var r=b[y];for(var n in r)if((void 0===m[n]||Array.isArray(m[n])||g[n]!==m[n])&&n in m){var a;if(!0===r[n])a=m[n];else if(!1===r[n]||"function"==typeof r[n]&&void 0===(a=r[n](m[n],g,m)))continue;g[n]=a}}return g}},{}],331:[function(v,re,ne){(function(g){(function(){function m(b){try{if(!g.localStorage)return!1}catch{return!1}var y=g.localStorage[b];return null!=y&&"true"===String(y).toLowerCase()}re.exports=function(b,y){if(m("noDeprecation"))return b;var e=!1;return function(){if(!e){if(m("throwDeprecation"))throw new Error(y);m("traceDeprecation")?console.trace(y):console.warn(y),e=!0}return b.apply(this,arguments)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(v,re,ne){var g=v("get-canvas-context");re.exports=function(m){return g("webgl",m)}},{"get-canvas-context":194}],333:[function(v,re,ne){var g=v("../main"),m=v("object-assign"),b=g.instance();function y(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}m(y.prototype=new g.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(s,i){if("string"==typeof s){var f=s.match(r);return f?f[0]:""}var c=this._validateYear(s),l=s.month(),h=""+this.toChineseMonth(c,l);return i&&h.length<2&&(h="0"+h),this.isIntercalaryMonth(c,l)&&(h+="i"),h},monthNames:function(s){if("string"==typeof s){var i=s.match(n);return i?i[0]:""}var f=this._validateYear(s),c=s.month(),l=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(f,c)-1];return this.isIntercalaryMonth(f,c)&&(l="\u95f0"+l),l},monthNamesShort:function(s){if("string"==typeof s){var i=s.match(a);return i?i[0]:""}var f=this._validateYear(s),c=s.month(),l=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(f,c)-1];return this.isIntercalaryMonth(f,c)&&(l="\u95f0"+l),l},parseMonth:function(s,i){s=this._validateYear(s);var f,c=parseInt(i);if(isNaN(c))"\u95f0"===i[0]&&(f=!0,i=i.substring(1)),"\u6708"===i[i.length-1]&&(i=i.substring(0,i.length-1)),c=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(i);else{var l=i[i.length-1];f="i"===l||"I"===l}return this.toMonthIndex(s,c,f)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(s,i){if(s.year&&(s=s.year()),"number"!=typeof s||s<1888||s>2111)throw i.replace(/\{0\}/,this.local.name);return s},toMonthIndex:function(s,i,f){var c=this.intercalaryMonth(s);if(f&&i!==c||i<1||i>12)throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!f&&i<=c?i-1:i:i-1},toChineseMonth:function(s,i){s.year&&(i=(s=s.year()).month());var f=this.intercalaryMonth(s);if(i<0||i>(f?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return f?i<f?i+1:i:i+1},intercalaryMonth:function(s){return s=this._validateYear(s),t[s-t[0]]>>13},isIntercalaryMonth:function(s,i){s.year&&(i=(s=s.year()).month());var f=this.intercalaryMonth(s);return!!f&&f===i},leapYear:function(s){return 0!==this.intercalaryMonth(s)},weekOfYear:function(s,i,f){var c,l=this._validateYear(s,g.local.invalidyear),h=p[l-p[0]];(c=b.newDate(h>>9&4095,h>>5&15,31&h)).add(4-(c.dayOfWeek()||7),"d");var u=this.toJD(s,i,f)-c.toJD();return 1+Math.floor(u/7)},monthsInYear:function(s){return this.leapYear(s)?13:12},daysInMonth:function(s,i){s.year&&(i=s.month(),s=s.year()),s=this._validateYear(s);var f=t[s-t[0]];if(i>(f>>13?12:11))throw g.local.invalidMonth.replace(/\{0\}/,this.local.name);return f&1<<12-i?30:29},weekDay:function(s,i,f){return(this.dayOfWeek(s,i,f)||7)<6},toJD:function(s,i,f){var c=this._validate(s,h,f,g.local.invalidDate);s=this._validateYear(c.year()),i=c.month(),f=c.day();var l=this.isIntercalaryMonth(s,i),h=this.toChineseMonth(s,i),d=function(o,x,u,T,_){var w,M,I;if("object"==typeof o)M=o,w=x||{};else{var S;if(!("number"==typeof o&&o>=1888&&o<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof x&&x>=1&&x<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof u&&u>=1&&u<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof T?(S=!1,w=T):(S=!!T,w={}),M={year:o,month:x,day:u,isIntercalary:S}}I=M.day-1;var R,O=t[M.year-t[0]],C=O>>13;R=C&&(M.month>C||M.isIntercalary)?M.month:M.month-1;for(var D=0;D<R;D++)I+=O&1<<12-D?30:29;var B=p[M.year-p[0]],z=new Date(B>>9&4095,(B>>5&15)-1,(31&B)+I);return w.year=z.getFullYear(),w.month=1+z.getMonth(),w.day=z.getDate(),w}(s,h,f,l);return b.toJD(d.year,d.month,d.day)},fromJD:function(s){var i=b.fromJD(s),f=function(l,h,d,o){var x,u;if("object"==typeof l)x=l,u=h||{};else{if(!("number"==typeof l&&l>=1888&&l<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof h&&h>=1&&h<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof d&&d>=1&&d<=31))throw new Error("Solar day outside range 1 - 31");x={year:l,month:h,day:d},u={}}var T=p[x.year-p[0]];u.year=(x.year<<9|x.month<<5|x.day)>=T?x.year:x.year-1,T=p[u.year-p[0]];var w,M=new Date(T>>9&4095,(T>>5&15)-1,31&T),I=new Date(x.year,x.month-1,x.day);w=Math.round((I-M)/864e5);var S,R=t[u.year-t[0]];for(S=0;S<13;S++){var O=R&1<<12-S?30:29;if(w<O)break;w-=O}var C=R>>13;return!C||S<C?(u.isIntercalary=!1,u.month=1+S):S===C?(u.isIntercalary=!0,u.month=S):(u.isIntercalary=!1,u.month=S),u.day=1+w,u}(i.year(),i.month(),i.day()),c=this.toMonthIndex(f.year,f.month,f.isIntercalary);return this.newDate(f.year,c,f.day)},fromString:function(s){var i=s.match(e),f=this._validateYear(+i[1]),h=this.toMonthIndex(f,+i[2],!!i[3]);return this.newDate(f,h,+i[4])},add:function(s,i,f){var c=s.year(),l=s.month(),h=this.isIntercalaryMonth(c,l),d=this.toChineseMonth(c,l),o=Object.getPrototypeOf(y.prototype).add.call(this,s,i,f);if("y"===f){var x=o.year(),u=o.month(),T=this.isIntercalaryMonth(x,d),_=this.toMonthIndex(x,d,!(!h||!T));_!==u&&o.month(_)}return o}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,r=/^\d?\d[iI]?/m,n=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;g.calendars.chinese=y;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],p=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":347,"object-assign":247}],334:[function(v,re,ne){var g=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return(y=n.year())<0&&y++,n.day()+30*(n.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(e/30)+1;return this.newDate(r,n,e-30*(n-1)+1)}}),g.calendars.coptic=b},{"../main":347,"object-assign":247}],335:[function(v,re,ne){var g=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),400},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,r,n){return(this._validate(e,r,n,g.local.invalidDate).day()+1)%8},weekDay:function(e,r,n){var a=this.dayOfWeek(e,r,n);return a>=2&&a<=6},extraInfo:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return{century:y[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return e=a.year()+(a.year()<0?1:0),r=a.month(),(n=a.day())+(r>1?16:0)+(r>2?32*(r-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var r=Math.floor(e/400)+1;e-=400*(r-1),e+=e>15?16:0;var n=Math.floor(e/32)+1;return this.newDate(r<=0?r-1:r,n,e-32*(n-1)+1)}});var y={20:"Fruitbat",21:"Anchovy"};g.calendars.discworld=b},{"../main":347,"object-assign":247}],336:[function(v,re,ne){var g=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear);return(y=e.year()+(e.year()<0?1:0))%4==3||y%4==-1},monthsInYear:function(y){return this._validate(y,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear),13},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(13===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return(y=n.year())<0&&y++,n.day()+30*(n.month()-1)+365*(y-1)+Math.floor(y/4)+this.jdEpoch-1},fromJD:function(y){var e=Math.floor(y)+.5-this.jdEpoch,r=Math.floor((e-Math.floor((e+366)/1461))/365)+1;r<=0&&r--,e=Math.floor(y)+.5-this.newDate(r,1,1).toJD();var n=Math.floor(e/30)+1;return this.newDate(r,n,e-30*(n-1)+1)}}),g.calendars.ethiopian=b},{"../main":347,"object-assign":247}],337:[function(v,re,ne){var g=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return this._leapYear(r.year())},_leapYear:function(e){return y(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,g.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,r){return e.year&&(r=e.month(),e=e.year()),this._validate(e,r,this.minDay,g.local.invalidMonth),12===r&&this.leapYear(e)||8===r&&5===y(this.daysInYear(e),10)?30:9===r&&3===y(this.daysInYear(e),10)?29:this.daysPerMonth[r-1]},weekDay:function(e,r,n){return 6!==this.dayOfWeek(e,r,n)},extraInfo:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);e=a.year(),r=a.month(),n=a.day();var t=e<=0?e+1:e,p=this.jdEpoch+this._delay1(t)+this._delay2(t)+n+1;if(r<7){for(var s=7;s<=this.monthsInYear(e);s++)p+=this.daysInMonth(e,s);for(s=1;s<r;s++)p+=this.daysInMonth(e,s)}else for(s=7;s<r;s++)p+=this.daysInMonth(e,s);return p},_delay1:function(e){var r=Math.floor((235*e-234)/19),a=29*r+Math.floor((12084+13753*r)/25920);return y(3*(a+1),7)<3&&a++,a},_delay2:function(e){var r=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n==356?2:n-r==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var r=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===r?1:r+1,7,1);)r++;for(var n=e<this.toJD(r,1,1)?7:1;e>this.toJD(r,n,this.daysInMonth(r,n));)n++;var a=e-this.toJD(r,n,1)+1;return this.newDate(r,n,a)}}),g.calendars.hebrew=b},{"../main":347,"object-assign":247}],338:[function(v,re,ne){var g=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(y){return(11*this._validate(y,this.minMonth,this.minDay,g.local.invalidYear).year()+14)%30<11},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(y){return this.leapYear(y)?355:354},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(12===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return 5!==this.dayOfWeek(y,e,r)},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return y=n.year(),e=n.month(),y=y<=0?y+1:y,(r=n.day())+Math.ceil(29.5*(e-1))+354*(y-1)+Math.floor((3+11*y)/30)+this.jdEpoch-1},fromJD:function(y){y=Math.floor(y)+.5;var e=Math.floor((30*(y-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var r=Math.min(12,Math.ceil((y-29-this.toJD(e,1,1))/29.5)+1),n=y-this.toJD(e,r,1)+1;return this.newDate(e,r,n)}}),g.calendars.islamic=b},{"../main":347,"object-assign":247}],339:[function(v,re,ne){var g=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(y){var e=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear);return(y=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(y,e){var r=this._validate(y,e,this.minDay,g.local.invalidMonth);return this.daysPerMonth[r.month()-1]+(2===r.month()&&this.leapYear(r.year())?1:0)},weekDay:function(y,e,r){return(this.dayOfWeek(y,e,r)||7)<6},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);return y=n.year(),e=n.month(),r=n.day(),y<0&&y++,e<=2&&(y--,e+=12),Math.floor(365.25*(y+4716))+Math.floor(30.6001*(e+1))+r-1524.5},fromJD:function(y){var e=Math.floor(y+.5)+1524,r=Math.floor((e-122.1)/365.25),n=Math.floor(365.25*r),a=Math.floor((e-n)/30.6001),t=a-Math.floor(a<14?1:13),p=r-Math.floor(t>2?4716:4715),s=e-n-Math.floor(30.6001*a);return p<=0&&p--,this.newDate(p,t,s)}}),g.calendars.julian=b},{"../main":347,"object-assign":247}],340:[function(v,re,ne){var g=v("../main");function b(r){this.local=this.regionalOptions[r||""]||this.regionalOptions[""]}function y(r,n){return r-n*Math.floor(r/n)}function e(r,n){return y(r-1,n)+1}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),!1},formatYear:function(r){r=this._validate(r,this.minMonth,this.minDay,g.local.invalidYear).year();var n=Math.floor(r/400);return r%=400,r+=r<0?400:0,n+"."+Math.floor(r/20)+"."+r%20},forYear:function(r){if((r=r.split(".")).length<3)throw"Invalid Mayan year";for(var n=0,a=0;a<r.length;a++){var t=parseInt(r[a],10);if(Math.abs(t)>19||a>0&&t<0)throw"Invalid Mayan year";n=20*n+t}return n},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),18},weekOfYear:function(r,n,a){return this._validate(r,n,a,g.local.invalidDate),0},daysInYear:function(r){return this._validate(r,this.minMonth,this.minDay,g.local.invalidYear),360},daysInMonth:function(r,n){return this._validate(r,n,this.minDay,g.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(r,n,a){return this._validate(r,n,a,g.local.invalidDate).day()},weekDay:function(r,n,a){return this._validate(r,n,a,g.local.invalidDate),!0},extraInfo:function(r,n,a){var t=this._validate(r,n,a,g.local.invalidDate).toJD(),p=this._toHaab(t),s=this._toTzolkin(t);return{haabMonthName:this.local.haabMonths[p[0]-1],haabMonth:p[0],haabDay:p[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(r){var n=y(8+(r-=this.jdEpoch)+340,365);return[Math.floor(n/20)+1,y(n,20)]},_toTzolkin:function(r){return[e(20+(r-=this.jdEpoch),20),e(r+4,13)]},toJD:function(r,n,a){var t=this._validate(r,n,a,g.local.invalidDate);return t.day()+20*t.month()+360*t.year()+this.jdEpoch},fromJD:function(r){r=Math.floor(r)+.5-this.jdEpoch;var n=Math.floor(r/360);r%=360,r+=r<0?360:0;var a=Math.floor(r/20);return this.newDate(n,a,r%20)}}),g.calendars.mayan=b},{"../main":347,"object-assign":247}],341:[function(v,re,ne){var g=v("../main"),m=v("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new g.baseCalendar;var y=g.instance("gregorian");m(b.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear||g.regionalOptions[""].invalidYear);return y.leapYear(r.year()+(r.year()<1?1:0)+1469)},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return(this.dayOfWeek(e,r,n)||7)<6},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidMonth);(e=a.year())<0&&e++;for(var t=a.day(),p=1;p<a.month();p++)t+=this.daysPerMonth[p-1];return t+y.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var r=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(r+1,1,1);)r++;for(var n=e-Math.floor(this.toJD(r,1,1)+.5)+1,a=1;n>this.daysInMonth(r,a);)n-=this.daysInMonth(r,a),a++;return this.newDate(r,a,n)}}),g.calendars.nanakshahi=b},{"../main":347,"object-assign":247}],342:[function(v,re,ne){var g=v("../main");function b(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(y){return this.daysInYear(y)!==this.daysPerYear},weekOfYear:function(y,e,r){var n=this.newDate(y,e,r);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(y){if(y=this._validate(y,this.minMonth,this.minDay,g.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[y])return this.daysPerYear;for(var e=0,r=this.minMonth;r<=12;r++)e+=this.NEPALI_CALENDAR_DATA[y][r];return e},daysInMonth:function(y,e){return y.year&&(e=y.month(),y=y.year()),this._validate(y,e,this.minDay,g.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[y]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[y][e]},weekDay:function(y,e,r){return 6!==this.dayOfWeek(y,e,r)},toJD:function(y,e,r){var n=this._validate(y,e,r,g.local.invalidDate);y=n.year(),e=n.month(),r=n.day();var a=g.instance(),t=0,p=e,s=y;this._createMissingCalendarData(y);var i=y-(p>9||9===p&&r>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(9!==e&&(t=r,p--);9!==p;)p<=0&&(p=12,s--),t+=this.NEPALI_CALENDAR_DATA[s][p],p--;return 9===e?(t+=r-this.NEPALI_CALENDAR_DATA[s][0])<0&&(t+=a.daysInYear(i)):t+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],a.newDate(i,1,1).add(t,"d").toJD()},fromJD:function(y){var e=g.instance().fromJD(y),r=e.year(),n=e.dayOfYear(),a=r+56;this._createMissingCalendarData(a);for(var t=9,s=this.NEPALI_CALENDAR_DATA[a][t]-this.NEPALI_CALENDAR_DATA[a][0]+1;n>s;)++t>12&&(t=1,a++),s+=this.NEPALI_CALENDAR_DATA[a][t];return this.newDate(a,t,this.NEPALI_CALENDAR_DATA[a][t]-(s-n))},_createMissingCalendarData:function(y){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var r=y-1;r<y+2;r++)void 0===this.NEPALI_CALENDAR_DATA[r]&&(this.NEPALI_CALENDAR_DATA[r]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),g.calendars.nepali=b},{"../main":347,"object-assign":247}],343:[function(v,re,ne){var g=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function y(e,r){return e-r*Math.floor(e/r)}v("object-assign")(b.prototype=new g.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return 682*((r.year()-(r.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return 5!==this.dayOfWeek(e,r,n)},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);e=a.year(),r=a.month(),n=a.day();var t=e-(e>=0?474:473),p=474+y(t,2820);return n+(r<=7?31*(r-1):30*(r-1)+6)+Math.floor((682*p-110)/2816)+365*(p-1)+1029983*Math.floor(t/2820)+this.jdEpoch-1},fromJD:function(e){var r=(e=Math.floor(e)+.5)-this.toJD(475,1,1),n=Math.floor(r/1029983),a=y(r,1029983),t=2820;if(1029982!==a){var p=Math.floor(a/366),s=y(a,366);t=Math.floor((2134*p+2816*s+2815)/1028522)+p+1}var i=t+2820*n+474,f=e-this.toJD(i=i<=0?i-1:i,1,1)+1,c=f<=186?Math.ceil(f/31):Math.ceil((f-6)/30),l=e-this.toJD(i,c,1)+1;return this.newDate(i,c,l)}}),g.calendars.persian=b,g.calendars.jalali=b},{"../main":347,"object-assign":247}],344:[function(v,re,ne){var g=v("../main"),m=v("object-assign"),b=g.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}m(y.prototype=new g.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(r.year()),b.leapYear(e)},weekOfYear:function(e,r,n){var a=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(a.year()),b.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return(this.dayOfWeek(e,r,n)||7)<6},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return e=this._t2gYear(a.year()),b.toJD(e,a.month(),a.day())},fromJD:function(e){var r=b.fromJD(e),n=this._g2tYear(r.year());return this.newDate(n,r.month(),r.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),g.calendars.taiwan=y},{"../main":347,"object-assign":247}],345:[function(v,re,ne){var g=v("../main"),m=v("object-assign"),b=g.instance();function y(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}m(y.prototype=new g.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(r.year()),b.leapYear(e)},weekOfYear:function(e,r,n){var a=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return e=this._t2gYear(a.year()),b.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,r){var n=this._validate(e,r,this.minDay,g.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,r,n){return(this.dayOfWeek(e,r,n)||7)<6},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate);return e=this._t2gYear(a.year()),b.toJD(e,a.month(),a.day())},fromJD:function(e){var r=b.fromJD(e),n=this._g2tYear(r.year());return this.newDate(n,r.month(),r.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),g.calendars.thai=y},{"../main":347,"object-assign":247}],346:[function(v,re,ne){var g=v("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}v("object-assign")(b.prototype=new g.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var r=this._validate(e,this.minMonth,this.minDay,g.local.invalidYear);return 355===this.daysInYear(r.year())},weekOfYear:function(e,r,n){var a=this.newDate(e,r,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var r=0,n=1;n<=12;n++)r+=this.daysInMonth(e,n);return r},daysInMonth:function(e,r){for(var n=this._validate(e,r,this.minDay,g.local.invalidMonth).toJD()-24e5+.5,a=0,t=0;t<y.length;t++){if(y[t]>n)return y[a]-y[a-1];a++}return 30},weekDay:function(e,r,n){return 5!==this.dayOfWeek(e,r,n)},toJD:function(e,r,n){var a=this._validate(e,r,n,g.local.invalidDate),t=12*(a.year()-1)+a.month()-15292;return a.day()+y[t-1]-1+24e5-.5},fromJD:function(e){for(var r=e-24e5+.5,n=0,a=0;a<y.length&&!(y[a]>r);a++)n++;var t=n+15292,p=Math.floor((t-1)/12);return this.newDate(p+1,t-12*p,r-y[n-1]+1)},isValid:function(e,r,n){var a=g.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(a=(e=null!=e.year?e.year:e)>=1276&&e<=1500),a},_validate:function(e,r,n,a){var t=g.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw a.replace(/\{0\}/,this.local.name);return t}}),g.calendars.ummalqura=b;var y=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(v,re,ne){var g=v("object-assign");function m(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function b(a,t,p,s){if(this._calendar=a,this._year=t,this._month=p,this._day=s,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function y(a,t){return"000000".substring(0,t-(a=""+a).length)+a}function e(){this.shortYearCutoff="+10"}function r(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}g(m.prototype,{instance:function(a,t){a=(a||"gregorian").toLowerCase();var p=this._localCals[a+"-"+(t=t||"")];if(!p&&this.calendars[a]&&(p=new this.calendars[a](t),this._localCals[a+"-"+t]=p),!p)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return p},newDate:function(a,t,p,s,i){return(s=(null!=a&&a.year?a.calendar():"string"==typeof s?this.instance(s,i):s)||this.instance()).newDate(a,t,p)},substituteDigits:function(a){return function(t){return(t+"").replace(/[0-9]/g,function(p){return a[p]})}},substituteChineseDigits:function(a,t){return function(p){for(var s="",i=0;p>0;){var f=p%10;s=(0===f?"":a[f]+t[i])+s,i++,p=Math.floor(p/10)}return 0===s.indexOf(a[1]+t[1])&&(s=s.substr(1)),s||a[0]}}}),g(b.prototype,{newDate:function(a,t,p){return this._calendar.newDate(a??this,t,p)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,t,p){if(!this._calendar.isValid(a,t,p))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=t,this._day=p,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,t){return this._calendar.add(this,a,t)},set:function(a,t){return this._calendar.set(this,a,t)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var t=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+y(Math.abs(this.year()),4)+"-"+y(this.month(),2)+"-"+y(this.day(),2)}}),g(e.prototype,{_validateLevel:0,newDate:function(a,t,p){return null==a?this.today():(a.year&&(this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate),p=a.day(),t=a.month(),a=a.year()),new b(this,a,t,p))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+y(Math.abs(t.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(a,t){var p=this._validate(a,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(p.month()+this.monthsInYear(p)-this.firstMonth)%this.monthsInYear(p)+this.minMonth},fromMonthOfYear:function(a,t){var p=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,p,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),p},daysInYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(a,t,p){var s=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,t,p){var s=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(a,t,p){return this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(a,t,p){return this._validate(a,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,t,p),t,p)},_add:function(a,t,p){if(this._validateLevel++,"d"===p||"w"===p){var s=a.toJD()+t*("w"===p?this.daysInWeek():1),i=a.calendar().fromJD(s);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var f=a.year()+("y"===p?t:0),c=a.monthOfYear()+("m"===p?t:0);i=a.day(),"y"===p?(a.month()!==this.fromMonthOfYear(f,c)&&(c=this.newDate(f,a.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(f)),i=Math.min(i,this.daysInMonth(f,this.fromMonthOfYear(f,c)))):"m"===p&&(function(h){for(;c<h.minMonth;)f--,c+=h.monthsInYear(f);for(var d=h.monthsInYear(f);c>d-1+h.minMonth;)f++,c-=d,d=h.monthsInYear(f)}(this),i=Math.min(i,this.daysInMonth(f,this.fromMonthOfYear(f,c))));var l=[f,this.fromMonthOfYear(f,c),i];return this._validateLevel--,l}catch(h){throw this._validateLevel--,h}},_correctAdd:function(a,t,p,s){if(!(this.hasYearZero||"y"!==s&&"m"!==s||0!==t[0]&&a.year()>0==t[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s];t=this._add(a,p*i[0]+(p<0?-1:1)*i[1],i[2])}return a.date(t[0],t[1],t[2])},set:function(a,t,p){this._validate(a,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var s="y"===p?t:a.year(),i="m"===p?t:a.month(),f="d"===p?t:a.day();return"y"!==p&&"m"!==p||(f=Math.min(f,this.daysInMonth(s,i))),a.date(s,i,f)},isValid:function(a,t,p){this._validateLevel++;var s=this.hasYearZero||0!==a;if(s){var i=this.newDate(a,t,this.minDay);s=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(i)&&p>=this.minDay&&p-this.minDay<this.daysInMonth(i)}return this._validateLevel--,s},toJSDate:function(a,t,p){var s=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(a){return this.fromJD(n.instance().fromJSDate(a).toJD())},_validate:function(a,t,p,s){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(a,t,p))throw s.replace(/\{0\}/,this.local.name);var i=this.newDate(a,t,p);return this._validateLevel--,i}catch(f){throw this._validateLevel--,f}}}),g(r.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var t=this._validate(a,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(a=t.year()+(t.year()<0?1:0))%4==0&&(a%100!=0||a%400==0)},weekOfYear:function(a,t,p){var s=this.newDate(a,t,p);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(a,t){var p=this._validate(a,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(a,t,p){return(this.dayOfWeek(a,t,p)||7)<6},toJD:function(a,t,p){var s=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate);a=s.year(),t=s.month(),p=s.day(),a<0&&a++,t<3&&(t+=12,a--);var i=Math.floor(a/100),f=2-i+Math.floor(i/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(t+1))+p+f-1524.5},fromJD:function(a){var t=Math.floor(a+.5),p=Math.floor((t-1867216.25)/36524.25),s=1524+(p=t+1+p-Math.floor(p/4)),i=Math.floor((s-122.1)/365.25),f=Math.floor(365.25*i),c=Math.floor((s-f)/30.6001),l=s-f-Math.floor(30.6001*c),h=c-(c>13.5?13:1),d=i-(h>2.5?4716:4715);return d<=0&&d--,this.newDate(d,h,l)},toJSDate:function(a,t,p){var s=this._validate(a,t,p,n.local.invalidDate||n.regionalOptions[""].invalidDate),i=new Date(s.year(),s.month()-1,s.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var n=re.exports=new m;n.cdate=b,n.baseCalendar=e,n.calendars.gregorian=r},{"object-assign":247}],348:[function(v,re,ne){var g=v("object-assign"),m=v("./main");g(m.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),m.local=m.regionalOptions[""],g(m.cdate.prototype,{formatDate:function(b,y){return"string"!=typeof b&&(y=b,b=""),this._calendar.formatDate(b||"",this,y)}}),g(m.baseCalendar.prototype,{UNIX_EPOCH:m.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:m.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(b,y,e){if("string"!=typeof b&&(e=y,y=b,b=""),!y)return"";if(y.calendar()!==this)throw m.local.invalidFormat||m.regionalOptions[""].invalidFormat;b=b||this.local.dateFormat;for(var n,a,t,p=(e=e||{}).dayNamesShort||this.local.dayNamesShort,s=e.dayNames||this.local.dayNames,i=e.monthNumbers||this.local.monthNumbers,f=e.monthNamesShort||this.local.monthNamesShort,c=e.monthNames||this.local.monthNames,l=function(I,S){for(var R=1;M+R<b.length&&b.charAt(M+R)===I;)R++;return M+=R-1,Math.floor(R/(S||1))>1},h=function(I,S,R,O){var C=""+S;if(l(I,O))for(;C.length<R;)C="0"+C;return C},d=this,x=function(I,S){return S?"function"==typeof c?c.call(d,I):c[I.month()-d.minMonth]:"function"==typeof f?f.call(d,I):f[I.month()-d.minMonth]},u=this.local.digits,T=function(I){return e.localNumbers&&u?u(I):I},_="",w=!1,M=0;M<b.length;M++)if(w)"'"!==b.charAt(M)||l("'")?_+=b.charAt(M):w=!1;else switch(b.charAt(M)){case"d":_+=T(h("d",y.day(),2));break;case"D":_+=("D",n=y.dayOfWeek(),a=p,t=s,l("D")?t[n]:a[n]);break;case"o":_+=h("o",y.dayOfYear(),3);break;case"w":_+=h("w",y.weekOfYear(),2);break;case"m":_+=(I=y,"function"==typeof i?i.call(d,I,l("m")):T(h("m",I.month(),2)));break;case"M":_+=x(y,l("M"));break;case"y":_+=l("y",2)?y.year():(y.year()%100<10?"0":"")+y.year()%100;break;case"Y":l("Y",2),_+=y.formatYear();break;case"J":_+=y.toJD();break;case"@":_+=(y.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":_+=(y.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?_+="'":w=!0;break;default:_+=b.charAt(M)}var I;return _},parseDate:function(b,y,e){if(null==y)throw m.local.invalidArguments||m.regionalOptions[""].invalidArguments;if(""===(y="object"==typeof y?y.toString():y+""))return null;b=b||this.local.dateFormat;var r=(e=e||{}).shortYearCutoff||this.shortYearCutoff;r="string"!=typeof r?r:this.today().year()%100+parseInt(r,10);for(var n=e.dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,t=e.parseMonth||this.local.parseMonth,p=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,f=-1,c=-1,l=-1,h=-1,d=-1,o=!1,x=!1,u=function(B,z){for(var Y=1;O+Y<b.length&&b.charAt(O+Y)===B;)Y++;return O+=Y-1,Math.floor(Y/(z||1))>1},T=function(B,z){var Y=u(B,z),G=[2,3,Y?4:2,Y?4:2,10,11,20]["oyYJ@!".indexOf(B)+1],J=new RegExp("^-?\\d{1,"+G+"}"),te=y.substring(R).match(J);if(!te)throw(m.local.missingNumberAt||m.regionalOptions[""].missingNumberAt).replace(/\{0\}/,R);return R+=te[0].length,parseInt(te[0],10)},_=this,w=function(){if("function"==typeof p){u("m");var B=p.call(_,y.substring(R));return R+=B.length,B}return T("m")},M=function(B,z,Y,G){for(var J=u(B,G)?Y:z,te=0;te<J.length;te++)if(y.substr(R,J[te].length).toLowerCase()===J[te].toLowerCase())return R+=J[te].length,te+_.minMonth;throw(m.local.unknownNameAt||m.regionalOptions[""].unknownNameAt).replace(/\{0\}/,R)},I=function(){if("function"==typeof i){var B=u("M")?i.call(_,y.substring(R)):s.call(_,y.substring(R));return R+=B.length,B}return M("M",s,i)},S=function(){if(y.charAt(R)!==b.charAt(O))throw(m.local.unexpectedLiteralAt||m.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,R);R++},R=0,O=0;O<b.length;O++)if(x)"'"!==b.charAt(O)||u("'")?S():x=!1;else switch(b.charAt(O)){case"d":h=T("d");break;case"D":M("D",n,a);break;case"o":d=T("o");break;case"w":T("w");break;case"m":l=w();break;case"M":l=I();break;case"y":var C=O;o=!u("y",2),O=C,c=T("y",2);break;case"Y":c=T("Y",2);break;case"J":f=T("J")+.5,"."===y.charAt(R)&&(R++,T("J"));break;case"@":f=T("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=T("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":R=y.length;break;case"'":u("'")?S():x=!0;break;default:S()}if(R<y.length)throw m.local.unexpectedText||m.regionalOptions[""].unexpectedText;if(-1===c?c=this.today().year():c<100&&o&&(c+=-1===r?1900:this.today().year()-this.today().year()%100-(c<=r?0:100)),"string"==typeof l&&(l=t.call(this,c,l)),d>-1){h=d;for(var D=this.daysInMonth(c,l=1);h>D;D=this.daysInMonth(c,l))l++,h-=D}return f>-1?this.fromJD(f):this.newDate(c,l,h)},determineDate:function(b,y,e,r,n){e&&"object"!=typeof e&&(n=r,r=e,e=null),"string"!=typeof r&&(n=r,r="");var a=this;return y=y?y.newDate():null,null==b?y:"string"==typeof b?function(t){try{return a.parseDate(r,t,n)}catch{}for(var p=((t=t.toLowerCase()).match(/^c/)&&e?e.newDate():null)||a.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=s.exec(t);i;)p.add(parseInt(i[1],10),i[2]||"d"),i=s.exec(t);return p}(b):"number"==typeof b?isNaN(b)||b===1/0||b===-1/0?y:a.today().add(b,"d"):a.newDate(b)}})},{"./main":347,"object-assign":247}],349:[function(v,re,ne){"use strict";re.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(v,re,ne){"use strict";var g=v("./arrow_paths"),m=v("../../plots/font_attributes"),b=v("../../plots/cartesian/constants"),y=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),re.exports=y("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:m({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:g.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:m({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("./draw").draw;function y(r){g.filterVisible(r._fullLayout.annotations).forEach(function(a){var t=m.getFromId(r,a.xref),p=m.getFromId(r,a.yref),s=m.getRefType(a.xref),i=m.getRefType(a.yref);a._extremes={},"range"===s&&e(a,t),"range"===i&&e(a,p)})}function e(r,n){var a,t=n._id,p=t.charAt(0),s=r[p],i=r["a"+p],l=r["_"+p+"padplus"],h=r["_"+p+"padminus"],d={x:1,y:-1}[p]*r[p+"shift"],o=3*r.arrowsize*r.arrowwidth||0,x=o+d,u=o-d,T=3*r.startarrowsize*r.arrowwidth||0,_=T+d,w=T-d;if(r["a"+p+"ref"]===r[p+"ref"]){var M=m.findExtremes(n,[n.r2c(s)],{ppadplus:x,ppadminus:u}),I=m.findExtremes(n,[n.r2c(i)],{ppadplus:Math.max(l,_),ppadminus:Math.max(h,w)});a={min:[M.min[0],I.min[0]],max:[M.max[0],I.max[0]]}}else _=i?_+i:_,w=i?w-i:w,a=m.findExtremes(n,[n.r2c(s)],{ppadplus:Math.max(l,x,_),ppadminus:Math.max(h,u,w)});r._extremes[t]=a}re.exports=function(r){if(g.filterVisible(r._fullLayout.annotations).length&&r._fullData.length)return g.syncOrAsync([b,y],r)}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry"),b=v("../../plot_api/plot_template").arrayEditor;function y(r,n){var a,t,p,s,i,f,c,l=r._fullLayout.annotations,h=[],d=[],o=[],x=(n||[]).length;for(a=0;a<l.length;a++)if(s=(p=l[a]).clicktoshow){for(t=0;t<x;t++)if(f=(i=n[t]).xaxis,c=i.yaxis,f._id===p.xref&&c._id===p.yref&&f.d2r(i.x)===e(p._xclick,f)&&c.d2r(i.y)===e(p._yclick,c)){(p.visible?"onout"===s?d:o:h).push(a);break}t===x&&p.visible&&"onout"===s&&d.push(a)}return{on:h,off:d,explicitOff:o}}function e(r,n){return"log"===n.type?n.l2r(r):n.d2r(r)}re.exports={hasClickToShow:function(r,n){var a=y(r,n);return a.on.length>0||a.explicitOff.length>0},onClick:function(r,n){var a,t,p=y(r,n),s=p.on,i=p.off.concat(p.explicitOff),f={},c=r._fullLayout.annotations;if(s.length||i.length){for(a=0;a<s.length;a++)(t=b(r.layout,"annotations",c[s[a]])).modifyItem("visible",!0),g.extendFlat(f,t.getUpdateObj());for(a=0;a<i.length;a++)(t=b(r.layout,"annotations",c[i[a]])).modifyItem("visible",!1),g.extendFlat(f,t.getUpdateObj());return m.call("update",r,{},f)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../color");re.exports=function(b,y,e,r){r("opacity");var n=r("bgcolor"),a=r("bordercolor"),t=m.opacity(a);r("borderpad");var p=r("borderwidth"),s=r("showarrow");if(r("text",s?" ":e._dfltTitle.annotation),r("textangle"),g.coerceFont(r,"font",e.font),r("width"),r("align"),r("height")&&r("valign"),s){var i,f,c=r("arrowside");-1!==c.indexOf("end")&&(i=r("arrowhead"),f=r("arrowsize")),-1!==c.indexOf("start")&&(r("startarrowhead",i),r("startarrowsize",f)),r("arrowcolor",t?y.bordercolor:m.defaultLine),r("arrowwidth",2*(t&&p||1)),r("standoff"),r("startstandoff")}var l=r("hovertext"),h=e.hoverlabel||{};if(l){var d=r("hoverlabel.bgcolor",h.bgcolor||(m.opacity(n)?m.rgb(n):m.defaultLine)),o=r("hoverlabel.bordercolor",h.bordercolor||m.contrast(d));g.coerceFont(r,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||o})}r("captureevents",!!l)}},{"../../lib":515,"../color":367}],354:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib/to_log_range");re.exports=function(b,y,e,r){y=y||{};var n="log"===e&&"linear"===y.type;if(n||"linear"===e&&"log"===y.type)for(var t,p,s=b._fullLayout.annotations,i=y._id.charAt(0),f=0;f<s.length;f++)p="annotations["+f+"].",(t=s[f])[i+"ref"]===y._id&&c(i),t["a"+i+"ref"]===y._id&&c("a"+i);function c(l){var h=t[l],d=null;d=n?m(h,y.range):Math.pow(10,h),g(d)||(d=null),r(p+l,d)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./common_defaults"),e=v("./attributes");function r(n,a,t){function p(I,S){return g.coerce(n,a,e,I,S)}var s=p("visible"),i=p("clicktoshow");if(s||i){y(n,a,t,p);for(var f=a.showarrow,c=["x","y"],l=[-10,-30],h={_fullLayout:t},d=0;d<2;d++){var o=c[d],x=m.coerceRef(n,a,h,o,"","paper");if("paper"!==x&&m.getFromId(h,x)._annIndices.push(a._index),m.coercePosition(a,h,p,x,o,.5),f){var u="a"+o,T=m.coerceRef(n,a,h,u,"pixel",["pixel","paper"]);"pixel"!==T&&T!==x&&(T=a[u]="pixel"),m.coercePosition(a,h,p,T,u,"pixel"===T?l[d]:.4)}p(o+"anchor"),p(o+"shift")}if(g.noneOrAll(n,a,["x","y"]),f&&g.noneOrAll(n,a,["ax","ay"]),i){var w=p("xclick"),M=p("yclick");a._xclick=void 0===w?a.x:m.cleanPosition(w,h,a.xref),a._yclick=void 0===M?a.y:m.cleanPosition(M,h,a.yref)}}}re.exports=function(n,a){b(n,a,{name:"annotations",handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../plots/plots"),y=v("../../lib"),e=y.strTranslate,r=v("../../plots/cartesian/axes"),n=v("../color"),a=v("../drawing"),t=v("../fx"),p=v("../../lib/svg_text_utils"),s=v("../../lib/setcursor"),i=v("../dragelement"),f=v("../../plot_api/plot_template").arrayEditor,c=v("./draw_arrow_head");function l(o,x){var u=o._fullLayout.annotations[x]||{},T=r.getFromId(o,u.xref),_=r.getFromId(o,u.yref);T&&T.setScale(),_&&_.setScale(),d(o,u,x,!1,T,_)}function h(o,x,u,T,_){var w=_[u],M=_[u+"ref"],I=-1!==u.indexOf("y"),S="domain"===r.getRefType(M),R=I?T.h:T.w;return o?S?w+(I?-x:x)/o._length:o.p2r(o.r2p(w)+x):w+(I?-x:x)/R}function d(o,x,u,T,_,w){var M,I,S=o._fullLayout,R=o._fullLayout._size,O=o._context.edits;T?(M="annotation-"+T,I=T+".annotations"):(M="annotation",I="annotations");var C=f(o.layout,I,x),D=C.modifyBase,B=C.modifyItem,z=C.getUpdateObj;S._infolayer.selectAll("."+M+'[data-index="'+u+'"]').remove();var Y="clip"+S._uid+"_ann"+u;if(x._input&&!1!==x.visible){var G={x:{},y:{}},J=+x.textangle||0,te=S._infolayer.append("g").classed(M,!0).attr("data-index",String(u)).style("opacity",x.opacity),X=te.append("g").classed("annotation-text-g",!0),K=O[x.showarrow?"annotationTail":"annotationPosition"],ae=x.captureevents||O.annotationText||K,U=X.append("g").style("pointer-events",ae?"all":null).call(s,"pointer").on("click",function(){o._dragging=!1,o.emit("plotly_clickannotation",fe(g.event))});x.hovertext&&U.on("mouseover",function(){var _e=x.hoverlabel,Ce=_e.font,Ee=this.getBoundingClientRect(),Ae=o.getBoundingClientRect();t.loneHover({x0:Ee.left-Ae.left,x1:Ee.right-Ae.left,y:(Ee.top+Ee.bottom)/2-Ae.top,text:x.hovertext,color:_e.bgcolor,borderColor:_e.bordercolor,fontFamily:Ce.family,fontSize:Ce.size,fontColor:Ce.color},{container:S._hoverlayer.node(),outerContainer:S._paper.node(),gd:o})}).on("mouseout",function(){t.loneUnhover(S._hoverlayer.node())});var V=x.borderwidth,ie=V+x.borderpad,H=U.append("rect").attr("class","bg").style("stroke-width",V+"px").call(n.stroke,x.bordercolor).call(n.fill,x.bgcolor),ee=x.width||x.height,Q=S._topclips.selectAll("#"+Y).data(ee?[0]:[]);Q.enter().append("clipPath").classed("annclip",!0).attr("id",Y).append("rect"),Q.exit().remove();var oe=x.font,le=S._meta?y.templateString(x.text,S._meta):x.text,de=U.append("text").classed("annotation-text",!0).text(le);O.annotationText?de.call(p.makeEditable,{delegate:U,gd:o}).call(be).on("edit",function(_e){x.text=_e,this.call(be),B("text",_e),_&&_.autorange&&D(_._name+".autorange",!0),w&&w.autorange&&D(w._name+".autorange",!0),m.call("_guiRelayout",o,z())}):de.call(be)}else g.selectAll("#"+Y).remove();function fe(_e){var Ce={index:u,annotation:x._input,fullAnnotation:x,event:_e};return T&&(Ce.subplotId=T),Ce}function be(_e){return _e.call(a.font,oe).attr({"text-anchor":{left:"start",right:"end"}[x.align]||"middle"}),p.convertToTspans(_e,o,he),_e}function he(){var _e=de.selectAll("a");1===_e.size()&&_e.text()===de.text()&&U.insert("a",":first-child").attr({"xlink:xlink:href":_e.attr("xlink:href"),"xlink:xlink:show":_e.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(H.node());var Ce=U.select(".annotation-text-math-group"),Ee=!Ce.empty(),Ae=a.bBox((Ee?Ce:de).node()),ze=Ae.width,ve=Ae.height,Te=x.width||ze,Ie=x.height||ve,De=Math.round(Te+2*ie),Fe=Math.round(Ie+2*ie);function Ue(ft,bt){return"auto"===bt&&(bt=ft<1/3?"left":ft>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[bt]}for(var qe=!1,je=["x","y"],rt=0;rt<je.length;rt++){var Ne,Be,We,Ye,lt,mt=je[rt],Tt=x[mt+"ref"]||mt,It=x["a"+mt+"ref"],Ct={x:_,y:w}[mt],ct=(J+("x"===mt?0:-90))*Math.PI/180,at=De*Math.cos(ct),St=Fe*Math.sin(ct),Xt=Math.abs(at)+Math.abs(St),tn=x[mt+"anchor"],hn=x[mt+"shift"]*("x"===mt?1:-1),cn=G[mt],yn=r.getRefType(Tt);if(Ct&&"domain"!==yn){var en=Ct.r2fraction(x[mt]);(en<0||en>1)&&(It===Tt?((en=Ct.r2fraction(x["a"+mt]))<0||en>1)&&(qe=!0):qe=!0),Ne=Ct._offset+Ct.r2p(x[mt]),Ye=.5}else{var Xe="domain"===yn;"x"===mt?(We=x[mt],Ne=Xe?Ct._offset+Ct._length*We:Ne=R.l+R.w*We):(We=1-x[mt],Ne=Xe?Ct._offset+Ct._length*We:Ne=R.t+R.h*We),Ye=x.showarrow?.5:We}if(x.showarrow){cn.head=Ne;var tt=x["a"+mt];if(lt=at*Ue(.5,x.xanchor)-St*Ue(.5,x.yanchor),It===Tt){var ye=r.getRefType(It);"domain"===ye?("y"===mt&&(tt=1-tt),cn.tail=Ct._offset+Ct._length*tt):cn.tail="paper"===ye?"y"===mt?R.t+R.h*(tt=1-tt):R.l+R.w*tt:Ct._offset+Ct.r2p(tt),Be=lt}else cn.tail=Ne+tt,Be=lt+tt;cn.text=cn.tail+lt;var ke=S["x"===mt?"width":"height"];if("paper"===Tt&&(cn.head=y.constrain(cn.head,1,ke-1)),"pixel"===It){var Ve=-Math.max(cn.tail-3,cn.text),Je=Math.min(cn.tail+3,cn.text)-ke;Ve>0?(cn.tail+=Ve,cn.text+=Ve):Je>0&&(cn.tail-=Je,cn.text-=Je)}cn.tail+=hn,cn.head+=hn}else Be=lt=Xt*Ue(Ye,tn),cn.text=Ne+lt;cn.text+=hn,lt+=hn,x["_"+mt+"padplus"]=Xt/2+(Be+=hn),x["_"+mt+"padminus"]=Xt/2-Be,x["_"+mt+"size"]=Xt,x["_"+mt+"shift"]=lt}if(qe)U.remove();else{var nt=0,Ke=0;"left"!==x.align&&(nt=(Te-ze)*("center"===x.align?.5:1)),"top"!==x.valign&&(Ke=(Ie-ve)*("middle"===x.valign?.5:1)),Ee?Ce.select("svg").attr({x:ie+nt-1,y:ie+Ke}).call(a.setClipUrl,ee?Y:null,o):de.call(p.positionText,ie+nt-Ae.left,ie+Ke-Ae.top).call(a.setClipUrl,ee?Y:null,o),Q.select("rect").call(a.setRect,ie,ie,Te,Ie),H.call(a.setRect,V/2,V/2,De-V,Fe-V),U.call(a.setTranslate,Math.round(G.x.text-De/2),Math.round(G.y.text-Fe/2)),X.attr({transform:"rotate("+J+","+G.x.text+","+G.y.text+")"});var Ot,Vt=function(ft,bt){te.selectAll(".annotation-arrow-g").remove();var Wt=G.x.head,Pt=G.y.head,Bt=G.x.tail+ft,Pe=G.y.tail+bt,et=G.x.text+ft,dt=G.y.text+bt,xt=y.rotationXYMatrix(J,et,dt),Rt=y.apply2DTransform(xt),Yt=y.apply2DTransform2(xt),nn=+H.attr("width"),Kt=+H.attr("height"),Mn=et-.5*nn,Un=Mn+nn,Tn=dt-.5*Kt,un=Tn+Kt,an=[[Mn,Tn,Mn,un],[Mn,un,Un,un],[Un,un,Un,Tn],[Un,Tn,Mn,Tn]].map(Yt);if(!an.reduce(function(hr,jr){return hr^!!y.segmentsIntersect(Wt,Pt,Wt+1e6,Pt+1e6,jr[0],jr[1],jr[2],jr[3])},!1)){an.forEach(function(hr){var jr=y.segmentsIntersect(Bt,Pe,Wt,Pt,hr[0],hr[1],hr[2],hr[3]);jr&&(Bt=jr.x,Pe=jr.y)});var fn=x.arrowwidth,pn=x.arrowcolor,Sn=x.arrowside,Nn=te.append("g").style({opacity:n.opacity(pn)}).classed("annotation-arrow-g",!0),Kn=Nn.append("path").attr("d","M"+Bt+","+Pe+"L"+Wt+","+Pt).style("stroke-width",fn+"px").call(n.stroke,n.rgb(pn));if(c(Kn,Sn,x),O.annotationPosition&&Kn.node().parentNode&&!T){var Bn=Wt,cr=Pt;if(x.standoff){var Lr=Math.sqrt(Math.pow(Wt-Bt,2)+Math.pow(Pt-Pe,2));Bn+=x.standoff*(Bt-Wt)/Lr,cr+=x.standoff*(Pe-Pt)/Lr}var Qn,qr,sr=Nn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Bt-Bn)+","+(Pe-cr),transform:e(Bn,cr)}).style("stroke-width",fn+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)");i.init({element:sr.node(),gd:o,prepFn:function(){var hr=a.getTranslate(U);Qn=hr.x,qr=hr.y,_&&_.autorange&&D(_._name+".autorange",!0),w&&w.autorange&&D(w._name+".autorange",!0)},moveFn:function(hr,jr){var di=Rt(Qn,qr),Jn=di[0]+hr,Ar=di[1]+jr;U.call(a.setTranslate,Jn,Ar),B("x",h(_,hr,"x",R,x)),B("y",h(w,jr,"y",R,x)),x.axref===x.xref&&B("ax",h(_,hr,"ax",R,x)),x.ayref===x.yref&&B("ay",h(w,jr,"ay",R,x)),Nn.attr("transform",e(hr,jr)),X.attr({transform:"rotate("+J+","+Jn+","+Ar+")"})},doneFn:function(){m.call("_guiRelayout",o,z());var hr=document.querySelector(".js-notes-box-panel");hr&&hr.redraw(hr.selectedObj)}})}}};x.showarrow&&Vt(0,0),K&&i.init({element:U.node(),gd:o,prepFn:function(){Ot=X.attr("transform")},moveFn:function(ft,bt){var Wt="pointer";if(x.showarrow)B("ax",x.axref===x.xref?h(_,ft,"ax",R,x):x.ax+ft),B("ay",x.ayref===x.yref?h(w,bt,"ay",R.w,x):x.ay+bt),Vt(ft,bt);else{if(T)return;var Pt,Bt;if(_)Pt=h(_,ft,"x",R,x);else{var Pe=x._xsize/R.w;Pt=i.align(x.x+(x._xshift-x.xshift)/R.w-Pe/2+ft/R.w,Pe,0,1,x.xanchor)}if(w)Bt=h(w,bt,"y",R,x);else{var dt=x._ysize/R.h;Bt=i.align(x.y-(x._yshift+x.yshift)/R.h-dt/2-bt/R.h,dt,0,1,x.yanchor)}B("x",Pt),B("y",Bt),_&&w||(Wt=i.getCursor(_?.5:Pt,w?.5:Bt,x.xanchor,x.yanchor))}X.attr({transform:e(ft,bt)+Ot}),s(U,Wt)},clickFn:function(ft,bt){x.captureevents&&o.emit("plotly_clickannotation",fe(bt))},doneFn:function(){s(U),m.call("_guiRelayout",o,z());var ft=document.querySelector(".js-notes-box-panel");ft&&ft.redraw(ft.selectedObj)}})}}}re.exports={draw:function(o){var x=o._fullLayout;x._infolayer.selectAll(".annotation").remove();for(var u=0;u<x.annotations.length;u++)x.annotations[u].visible&&l(o,u);return b.previousPromises(o)},drawOne:l,drawRaw:d}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../color"),b=v("./arrow_paths"),y=v("../../lib"),e=y.strScale,r=y.strRotate,n=y.strTranslate;re.exports=function(a,t,p){var s,i,f,c,l=a.node(),h=b[p.arrowhead||0],d=b[p.startarrowhead||0],o=(p.arrowwidth||1)*(p.arrowsize||1),x=(p.arrowwidth||1)*(p.startarrowsize||1),u=t.indexOf("start")>=0,T=t.indexOf("end")>=0,_=h.backoff*o+p.standoff,w=d.backoff*x+p.startstandoff;if("line"===l.nodeName){s={x:+a.attr("x1"),y:+a.attr("y1")},i={x:+a.attr("x2"),y:+a.attr("y2")};var M=s.x-i.x,I=s.y-i.y;if(c=(f=Math.atan2(I,M))+Math.PI,_&&w&&_+w>Math.sqrt(M*M+I*I))return void te();if(_){if(_*_>M*M+I*I)return void te();var S=_*Math.cos(f),R=_*Math.sin(f);i.x+=S,i.y+=R,a.attr({x2:i.x,y2:i.y})}if(w){if(w*w>M*M+I*I)return void te();var O=w*Math.cos(f),C=w*Math.sin(f);s.x-=O,s.y-=C,a.attr({x1:s.x,y1:s.y})}}else if("path"===l.nodeName){var D=l.getTotalLength(),B="";if(D<_+w)return void te();var z=l.getPointAtLength(0),Y=l.getPointAtLength(.1);f=Math.atan2(z.y-Y.y,z.x-Y.x),s=l.getPointAtLength(Math.min(w,D)),B="0px,"+w+"px,";var G=l.getPointAtLength(D),J=l.getPointAtLength(D-.1);c=Math.atan2(G.y-J.y,G.x-J.x),i=l.getPointAtLength(Math.max(0,D-_)),a.style("stroke-dasharray",B+=D-(B?w+_:_)+"px,"+D+"px")}function te(){a.style("stroke-dasharray","0px,100px")}function X(K,ae,U,V){K.path&&(K.noRotate&&(U=0),g.select(l.parentNode).append("path").attr({class:a.attr("class"),d:K.path,transform:n(ae.x,ae.y)+r(180*U/Math.PI)+e(V)}).style({fill:m.rgb(p.arrowcolor),"stroke-width":0}))}u&&X(d,s,f,x),T&&X(h,i,c,o)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(v,re,ne){"use strict";var g=v("./draw"),m=v("./click");re.exports={moduleType:"component",name:"annotations",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("annotations"),calcAutorange:v("./calc_autorange"),draw:g.draw,drawOne:g.drawOne,drawRaw:g.drawRaw,hasClickToShow:m.hasClickToShow,onClick:m.onClick,convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(v,re,ne){"use strict";var g=v("../annotations/attributes"),m=v("../../plot_api/edit_types").overrideAll,b=v("../../plot_api/plot_template").templatedArray;re.exports=m(b("annotation",{visible:g.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:g.xanchor,xshift:g.xshift,yanchor:g.yanchor,yshift:g.yshift,text:g.text,textangle:g.textangle,font:g.font,width:g.width,height:g.height,opacity:g.opacity,align:g.align,valign:g.valign,bgcolor:g.bgcolor,bordercolor:g.bordercolor,borderpad:g.borderpad,borderwidth:g.borderwidth,showarrow:g.showarrow,arrowcolor:g.arrowcolor,arrowhead:g.arrowhead,startarrowhead:g.startarrowhead,arrowside:g.arrowside,arrowsize:g.arrowsize,startarrowsize:g.startarrowsize,arrowwidth:g.arrowwidth,standoff:g.standoff,startstandoff:g.startstandoff,hovertext:g.hovertext,hoverlabel:g.hoverlabel,captureevents:g.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes");function b(y,e){var r=e.fullSceneLayout.domain,n=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};y._xa={},g.extendFlat(y._xa,a),m.setConvert(y._xa),y._xa._offset=n.l+r.x[0]*n.w,y._xa.l2p=function(){return.5*(1+y._pdata[0]/y._pdata[3])*n.w*(r.x[1]-r.x[0])},y._ya={},g.extendFlat(y._ya,a),m.setConvert(y._ya),y._ya._offset=n.t+(1-r.y[1])*n.h,y._ya.l2p=function(){return.5*(1-y._pdata[1]/y._pdata[3])*n.h*(r.y[1]-r.y[0])}}re.exports=function(y){for(var e=y.fullSceneLayout.annotations,r=0;r<e.length;r++)b(e[r],y);y.fullLayout._infolayer.selectAll(".annotation-"+y.id).remove()}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("../annotations/common_defaults"),e=v("./attributes");function r(n,a,t,p){function s(f,c){return g.coerce(n,a,e,f,c)}function i(f){var c=f+"axis",l={_fullLayout:{}};return l._fullLayout[c]=t[c],m.coercePosition(a,l,s,f,f,.5)}s("visible")&&(y(n,a,p.fullLayout,s),i("x"),i("y"),i("z"),g.noneOrAll(n,a,["x","y","z"]),a.xref="x",a.yref="y",a.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),a.showarrow&&(a.axref="pixel",a.ayref="pixel",s("ax",-10),s("ay",-30),g.noneOrAll(n,a,["ax","ay"])))}re.exports=function(n,a,t){b(n,a,{name:"annotations",handleItemDefaults:r,fullLayout:t.fullLayout})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(v,re,ne){"use strict";var g=v("../annotations/draw").drawRaw,m=v("../../plots/gl3d/project"),b=["x","y","z"];re.exports=function(y){for(var e=y.fullSceneLayout,r=y.dataScale,n=e.annotations,a=0;a<n.length;a++){for(var t=n[a],p=!1,s=0;s<3;s++){var i=b[s],c=e[i+"axis"].r2fraction(t[i]);if(c<0||c>1){p=!0;break}}p?y.fullLayout._infolayer.select(".annotation-"+y.id+'[data-index="'+a+'"]').remove():(t._pdata=m(y.glplot.cameraParams,[e.xaxis.r2l(t.x)*r[0],e.yaxis.r2l(t.y)*r[1],e.zaxis.r2l(t.z)*r[2]]),g(y.graphDiv,t,a,y.id,t._xa,t._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib");re.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),includeBasePlot:function(b,y){var e=g.subplotsRegistry.gl3d;if(e)for(var r=e.attrRegex,n=Object.keys(b),a=0;a<n.length;a++){var t=n[a];r.test(t)&&(b[t].annotations||[]).length&&(m.pushUnique(y._basePlotModules,e),m.pushUnique(y._subplots.gl3d,t))}},convert:v("./convert"),draw:v("./draw")}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(v,re,ne){"use strict";re.exports=v("world-calendars/dist/main"),v("world-calendars/dist/plus"),v("world-calendars/dist/calendars/chinese"),v("world-calendars/dist/calendars/coptic"),v("world-calendars/dist/calendars/discworld"),v("world-calendars/dist/calendars/ethiopian"),v("world-calendars/dist/calendars/hebrew"),v("world-calendars/dist/calendars/islamic"),v("world-calendars/dist/calendars/julian"),v("world-calendars/dist/calendars/mayan"),v("world-calendars/dist/calendars/nanakshahi"),v("world-calendars/dist/calendars/nepali"),v("world-calendars/dist/calendars/persian"),v("world-calendars/dist/calendars/taiwan"),v("world-calendars/dist/calendars/thai"),v("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(v,re,ne){"use strict";var g=v("./calendars"),m=v("../../lib"),b=v("../../constants/numerical"),y=b.EPOCHJD,e=b.ONEDAY,r={valType:"enumerated",values:m.sortObjectKeys(g.calendars),editType:"calc",dflt:"gregorian"},n=function(d,o,x,u){var T={};return T[x]=r,m.coerce(d,o,T,x,u)},a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},t={};function p(d){return t[d]||(t[d]=g.instance(d))}function s(d){return m.extendFlat({},r,{description:d})}function i(d){return"Sets the calendar system to use with `"+d+"` date data."}var f={xcalendar:s(i("x"))},c=m.extendFlat({},f,{ycalendar:s(i("y"))}),l=m.extendFlat({},c,{zcalendar:s(i("z"))}),h=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));re.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:l,surface:l,mesh3d:l,scattergl:c,ohlc:f,candlestick:f},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:h},yaxis:{calendar:h},scene:{xaxis:{calendar:h},yaxis:{calendar:h},zaxis:{calendar:h}},polar:{radialaxis:{calendar:h}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:r,handleDefaults:n,handleTraceDefaults:function(d,o,x,u){for(var T=0;T<x.length;T++)n(d,o,x[T]+"calendar",u.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:p,worldCalFmt:function(d,o,x){for(var u,T,_,w,M,I=Math.floor((o+.05)/e)+y,S=p(x).fromJD(I),R=0;-1!==(R=d.indexOf("%",R));)"0"===(u=d.charAt(R+1))||"-"===u||"_"===u?(_=3,T=d.charAt(R+2),"_"===u&&(u="-")):(T=u,u="0",_=2),(w=a[T])?(M="##"===w?"##":S.formatDate(w[u]),d=d.substr(0,R)+M+d.substr(R+_),R+=M.length):R+=_;return d}}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(v,re,ne){"use strict";ne.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ne.defaultLine="#444",ne.lightLine="#eee",ne.background="#fff",ne.borderLine="#BEC8D9",ne.lightFraction=1e3/11},{}],367:[function(v,re,ne){"use strict";var g=v("tinycolor2"),m=v("fast-isnumeric"),b=v("../../lib/array").isTypedArray,y=re.exports={},e=v("./attributes");y.defaults=e.defaults;var r=y.defaultLine=e.defaultLine;y.lightLine=e.lightLine;var n=y.background=e.background;function a(t){if(m(t)||"string"!=typeof t)return t;var p=t.trim();if("rgb"!==p.substr(0,3))return t;var s=p.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return t;var i=s[1].trim().split(/\s*[\s,]\s*/),f="a"===p.charAt(3)&&4===i.length;if(!f&&3!==i.length)return t;for(var c=0;c<i.length;c++){if(!(i[c].length&&(i[c]=Number(i[c]),i[c]>=0)))return t;if(3===c)i[c]>1&&(i[c]=1);else if(i[c]>=1)return t}var l=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return f?"rgba("+l+", "+i[3]+")":"rgb("+l+")"}y.tinyRGB=function(t){var p=t.toRgb();return"rgb("+Math.round(p.r)+", "+Math.round(p.g)+", "+Math.round(p.b)+")"},y.rgb=function(t){return y.tinyRGB(g(t))},y.opacity=function(t){return t?g(t).getAlpha():0},y.addOpacity=function(t,p){var s=g(t).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+p+")"},y.combine=function(t,p){var s=g(t).toRgb();if(1===s.a)return g(t).toRgbString();var i=g(p||n).toRgb(),f=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return g({r:f.r*(1-s.a)+s.r*s.a,g:f.g*(1-s.a)+s.g*s.a,b:f.b*(1-s.a)+s.b*s.a}).toRgbString()},y.contrast=function(t,p,s){var i=g(t);return 1!==i.getAlpha()&&(i=g(y.combine(t,n))),(i.isDark()?p?i.lighten(p):n:s?i.darken(s):r).toString()},y.stroke=function(t,p){var s=g(p);t.style({stroke:y.tinyRGB(s),"stroke-opacity":s.getAlpha()})},y.fill=function(t,p){var s=g(p);t.style({fill:y.tinyRGB(s),"fill-opacity":s.getAlpha()})},y.clean=function(t){if(t&&"object"==typeof t){var p,s,i,f,c=Object.keys(t);for(p=0;p<c.length;p++)if(f=t[i=c[p]],"color"===i.substr(i.length-5))if(Array.isArray(f))for(s=0;s<f.length;s++)f[s]=a(f[s]);else t[i]=a(f);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(f))for(s=0;s<f.length;s++)Array.isArray(f[s])&&(f[s][1]=a(f[s][1]));else if(Array.isArray(f)){var l=f[0];if(!Array.isArray(l)&&l&&"object"==typeof l)for(s=0;s<f.length;s++)y.clean(f[s])}else f&&"object"==typeof f&&!b(f)&&y.clean(f)}}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/layout_attributes"),m=v("../../plots/font_attributes"),b=v("../../lib/extend").extendFlat,y=v("../../plot_api/edit_types").overrideAll;re.exports=y({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:g.linecolor,outlinewidth:g.linewidth,bordercolor:g.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:g.tickmode,nticks:g.nticks,tick0:g.tick0,dtick:g.dtick,tickvals:g.tickvals,ticktext:g.ticktext,ticks:b({},g.ticks,{dflt:""}),ticklabeloverflow:b({},g.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:g.ticklen,tickwidth:g.tickwidth,tickcolor:g.tickcolor,ticklabelstep:g.ticklabelstep,showticklabels:g.showticklabels,tickfont:m({}),tickangle:g.tickangle,tickformat:g.tickformat,tickformatstops:g.tickformatstops,tickprefix:g.tickprefix,showtickprefix:g.showtickprefix,ticksuffix:g.ticksuffix,showticksuffix:g.showticksuffix,separatethousands:g.separatethousands,exponentformat:g.exponentformat,minexponent:g.minexponent,showexponent:g.showexponent,title:{text:{valType:"string"},font:m({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:m({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(v,re,ne){"use strict";re.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plot_api/plot_template"),b=v("../../plots/cartesian/tick_value_defaults"),y=v("../../plots/cartesian/tick_mark_defaults"),e=v("../../plots/cartesian/tick_label_defaults"),r=v("../../plots/cartesian/prefix_suffix_defaults"),n=v("./attributes");re.exports=function(a,t,p){var s=m.newContainer(t,"colorbar"),i=a.colorbar||{};function f(I,S){return g.coerce(i,s,n,I,S)}var c=p.margin||{t:0,b:0,l:0,r:0},l=p.width-c.l-c.r,h=p.height-c.t-c.b,d="v"===f("orientation"),o=f("thicknessmode");f("thickness","fraction"===o?30/(d?l:h):30);var x=f("lenmode");f("len","fraction"===x?1:d?h:l),f("x",d?1.02:.5),f("xanchor",d?"left":"center"),f("xpad"),f("y",d?.5:1.02),f("yanchor",d?"middle":"bottom"),f("ypad"),g.noneOrAll(i,s,["x","y"]),f("outlinecolor"),f("outlinewidth"),f("bordercolor"),f("borderwidth"),f("bgcolor");var u=g.coerce(i,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:d?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");f("ticklabeloverflow",-1!==u.indexOf("inside")?"hide past domain":"hide past div"),b(i,s,f,"linear");var T=p.font,_={outerTicks:!1,font:T};-1!==u.indexOf("inside")&&(_.bgColor="black"),r(i,s,f,"linear",_),e(i,s,f,"linear",_),y(i,s,f,"linear",_),f("title.text",p._dfltTitle.colorbar);var w=s.tickfont,M=g.extendFlat({},w,{color:T.color,size:g.bigFont(w.size)});g.coerceFont(f,"title.font",M),f("title.side",d?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("tinycolor2"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../plots/cartesian/axes"),r=v("../dragelement"),n=v("../../lib"),a=n.strTranslate,t=v("../../lib/extend").extendFlat,p=v("../../lib/setcursor"),s=v("../drawing"),i=v("../color"),f=v("../titles"),c=v("../../lib/svg_text_utils"),l=v("../colorscale/helpers").flipScale,h=v("../../plots/cartesian/axis_defaults"),d=v("../../plots/cartesian/position_defaults"),o=v("../../plots/cartesian/layout_attributes"),x=v("../../constants/alignment"),u=x.LINE_SPACING,T=x.FROM_TL,_=x.FROM_BR,w=v("./constants").cn;re.exports={draw:function(M){var I=M._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(S){var R,O,C,D,B=S._fullLayout,z=S.calcdata,Y=[];function G(ee){return t(ee,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function J(){"function"==typeof D.calc?D.calc(S,C,R):(R._fillgradient=O.reversescale?l(O.colorscale):O.colorscale,R._zrange=[O[D.min],O[D.max]])}for(var te=0;te<z.length;te++){var K=(C=z[te][0].trace)._module.colorbar;if(!0===C.visible&&K)for(var ae=Array.isArray(K),U=ae?K:[K],V=0;V<U.length;V++){var q=(D=U[V]).container;(O=q?C[q]:C)&&O.showscale&&((R=G(O.colorbar))._id="cb"+C.uid+(ae&&q?"-"+q:""),R._traceIndex=C.index,R._propPrefix=(q?q+".":"")+"colorbar.",R._meta=C._meta,J(),Y.push(R))}}for(var ie in B._colorAxes)if((O=B[ie]).showscale){var H=B._colorAxes[ie];(R=G(O.colorbar))._id="cb"+ie,R._propPrefix=ie+".colorbar.",R._meta=B._meta,D={min:"cmin",max:"cmax"},"heatmap"!==H[0]&&(D.calc=(C=H[1])._module.colorbar.calc),J(),Y.push(R)}return Y}(M),function(S){return S._id});I.enter().append("g").attr("class",function(S){return S._id}).classed(w.colorbar,!0),I.each(function(S){var R=g.select(this);n.ensureSingle(R,"rect",w.cbbg),n.ensureSingle(R,"g",w.cbfills),n.ensureSingle(R,"g",w.cblines),n.ensureSingle(R,"g",w.cbaxis,function(C){C.classed(w.crisp,!0)}),n.ensureSingle(R,"g",w.cbtitleunshift,function(C){C.append("g").classed(w.cbtitle,!0)}),n.ensureSingle(R,"rect",w.cboutline);var C,D,B,z,Y,G,J,te,O=function(C,D,B){var z="v"===D.orientation,Y=D.len,G=D.lenmode,J=D.thickness,te=D.thicknessmode,X=D.outlinewidth,K=D.borderwidth,ae=D.bgcolor,U=D.xanchor,V=D.yanchor,q=D.xpad,ie=D.ypad,H=D.x,ee=z?D.y:1-D.y,Q=B._fullLayout,oe=Q._size,le=D._fillcolor,de=D._line,fe=D.title,be=fe.side,he=D._zrange||g.extent(("function"==typeof le?le:de.color).domain()),_e="function"==typeof de.color?de.color:function(){return de.color},Ce="function"==typeof le?le:function(){return le},Ee=D._levels,Ae=function(yn,en,Xe){var tt,ye,ke=en._levels,Ve=[],Je=[],nt=ke.end+ke.size/100,Ke=ke.size,vt=1.001*Xe[0]-.001*Xe[1],gt=1.001*Xe[1]-.001*Xe[0];for(ye=0;ye<1e5&&(tt=ke.start+ye*Ke,!(Ke>0?tt>=nt:tt<=nt));ye++)tt>vt&&tt<gt&&Ve.push(tt);if(en._fillgradient)Je=[0];else if("function"==typeof en._fillcolor){var Ot=en._filllevels;if(Ot)for(nt=Ot.end+Ot.size/100,Ke=Ot.size,ye=0;ye<1e5&&(tt=Ot.start+ye*Ke,!(Ke>0?tt>=nt:tt<=nt));ye++)tt>Xe[0]&&tt<Xe[1]&&Je.push(tt);else(Je=Ve.map(function(Vt){return Vt-ke.size/2})).push(Je[Je.length-1]+ke.size)}else en._fillcolor&&"string"==typeof en._fillcolor&&(Je=[0]);return ke.size<0&&(Ve.reverse(),Je.reverse()),{line:Ve,fill:Je}}(0,D,he),ze=Ae.fill,ve=Ae.line,Te=Math.round(J*("fraction"===te?z?oe.w:oe.h:1)),Ie=Te/(z?oe.w:oe.h),De=Math.round(Y*("fraction"===G?z?oe.h:oe.w:1)),Fe=De/(z?oe.h:oe.w),Ue=Math.round(z?H*oe.w+q:ee*oe.h+ie),qe={center:.5,right:1}[U]||0,je={top:1,middle:.5}[V]||0,rt=z?H-qe*Ie:ee-je*Ie,Ne=z?ee-je*Fe:H-qe*Fe,Be=Math.round(z?oe.h*(1-Ne):oe.w*Ne);D._lenFrac=Fe,D._thickFrac=Ie,D._uFrac=rt,D._vFrac=Ne;var We=D._axis=function(yn,en,Xe){var tt=yn._fullLayout,ye="v"===en.orientation,ke={type:"linear",range:Xe,tickmode:en.tickmode,nticks:en.nticks,tick0:en.tick0,dtick:en.dtick,tickvals:en.tickvals,ticktext:en.ticktext,ticks:en.ticks,ticklen:en.ticklen,tickwidth:en.tickwidth,tickcolor:en.tickcolor,showticklabels:en.showticklabels,ticklabelposition:en.ticklabelposition,ticklabeloverflow:en.ticklabeloverflow,ticklabelstep:en.ticklabelstep,tickfont:en.tickfont,tickangle:en.tickangle,tickformat:en.tickformat,exponentformat:en.exponentformat,minexponent:en.minexponent,separatethousands:en.separatethousands,showexponent:en.showexponent,showtickprefix:en.showtickprefix,tickprefix:en.tickprefix,showticksuffix:en.showticksuffix,ticksuffix:en.ticksuffix,title:en.title,showline:!0,anchor:"free",side:ye?"right":"bottom",position:1},Ve=ye?"y":"x",Je={type:"linear",_id:Ve+en._id},nt={letter:Ve,font:tt.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:tt.calendar};function Ke(vt,gt){return n.coerce(ke,Je,o,vt,gt)}return h(ke,Je,Ke,nt,tt),d(ke,Je,Ke,nt),Je}(B,D,he);We.position=Ie+(z?H+q/oe.w:ee+ie/oe.h);var Ye=-1!==["top","bottom"].indexOf(be);if(z&&Ye&&(We.title.side=be,We.titlex=H+q/oe.w,We.titley=Ne+("top"===fe.side?Fe-ie/oe.h:ie/oe.h)),z||Ye||(We.title.side=be,We.titley=ee+ie/oe.h,We.titlex=Ne+q/oe.w),de.color&&"auto"===D.tickmode){We.tickmode="linear",We.tick0=Ee.start;var lt=Ee.size,mt=n.constrain(De/50,4,15)+1,Tt=(he[1]-he[0])/((D.nticks||mt)*lt);if(Tt>1){var It=Math.pow(10,Math.floor(Math.log(Tt)/Math.LN10));lt*=It*n.roundUp(Tt/It,[2,5,10]),(Math.abs(Ee.start)/Ee.size+1e-6)%1<2e-6&&(We.tick0=0)}We.dtick=lt}We.domain=z?[Ne+ie/oe.h,Ne+Fe-ie/oe.h]:[Ne+q/oe.w,Ne+Fe-q/oe.w],We.setScale(),C.attr("transform",a(Math.round(oe.l),Math.round(oe.t)));var Ct,ct=C.select("."+w.cbtitleunshift).attr("transform",a(-Math.round(oe.l),-Math.round(oe.t))),at=We.ticklabelposition,St=We.title.font.size,Xt=C.select("."+w.cbaxis),tn=0,hn=0;function cn(yn,en){var Xe={propContainer:We,propName:D._propPrefix+"title",traceIndex:D._traceIndex,_meta:D._meta,placeholder:Q._dfltTitle.colorbar,containerGroup:C.select("."+w.cbtitle)},tt="h"===yn.charAt(0)?yn.substr(1):"h"+yn;C.selectAll("."+tt+",."+tt+"-math-group").remove(),f.draw(B,yn,t(Xe,en||{}))}return n.syncOrAsync([b.previousPromises,function(){var yn,en;(z&&Ye||!z&&!Ye)&&("top"===be&&(yn=q+oe.l+oe.w*H,en=ie+oe.t+oe.h*(1-Ne-Fe)+3+.75*St),"bottom"===be&&(yn=q+oe.l+oe.w*H,en=ie+oe.t+oe.h*(1-Ne)-3-.25*St),"right"===be&&(en=ie+oe.t+oe.h*ee+3+.75*St,yn=q+oe.l+oe.w*Ne),cn(We._id+"title",{attributes:{x:yn,y:en,"text-anchor":z?"start":"middle"}}))},function(){if(!z&&!Ye||z&&Ye){var yn,en=C.select("."+w.cbtitle),Xe=en.select("text"),tt=[-X/2,X/2],ye=en.select(".h"+We._id+"title-math-group").node(),ke=15.6;if(Xe.node()&&(ke=parseInt(Xe.node().style.fontSize,10)*u),ye?(yn=s.bBox(ye),hn=yn.width,(tn=yn.height)>ke&&(tt[1]-=(tn-ke)/2)):Xe.node()&&!Xe.classed(w.jsPlaceholder)&&(yn=s.bBox(Xe.node()),hn=yn.width,tn=yn.height),z){if(tn){if(tn+=5,"top"===be)We.domain[1]-=tn/oe.h,tt[1]*=-1;else{We.domain[0]+=tn/oe.h;var Ve=c.lineCount(Xe);tt[1]+=(1-Ve)*ke}en.attr("transform",a(tt[0],tt[1])),We.setScale()}}else hn&&("right"===be&&(We.domain[0]+=(hn+St/2)/oe.w),en.attr("transform",a(tt[0],tt[1])),We.setScale())}C.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",z?a(0,Math.round(oe.h*(1-We.domain[1]))):a(Math.round(oe.w*We.domain[0]),0)),Xt.attr("transform",z?a(0,Math.round(-oe.t)):a(Math.round(-oe.l),0));var Je=C.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(ze);Je.enter().append("rect").classed(w.cbfill,!0).style("stroke","none"),Je.exit().remove();var nt=he.map(We.c2p).map(Math.round).sort(function(Vt,ft){return Vt-ft});Je.each(function(Vt,ft){var bt=[0===ft?he[0]:(ze[ft]+ze[ft-1])/2,ft===ze.length-1?he[1]:(ze[ft]+ze[ft+1])/2].map(We.c2p).map(Math.round);z&&(bt[1]=n.constrain(bt[1]+(bt[1]>bt[0])?1:-1,nt[0],nt[1]));var Wt=g.select(this).attr(z?"x":"y",Ue).attr(z?"y":"x",g.min(bt)).attr(z?"width":"height",Math.max(Te,2)).attr(z?"height":"width",Math.max(g.max(bt)-g.min(bt),2));if(D._fillgradient)s.gradient(Wt,B,D._id,z?"vertical":"horizontalreversed",D._fillgradient,"fill");else{var Pt=Ce(Vt).replace("e-","");Wt.attr("fill",m(Pt).toHexString())}});var Ke=C.select("."+w.cblines).selectAll("path."+w.cbline).data(de.color&&de.width?ve:[]);Ke.enter().append("path").classed(w.cbline,!0),Ke.exit().remove(),Ke.each(function(Vt){var ft=Ue,bt=Math.round(We.c2p(Vt))+de.width/2%1;g.select(this).attr("d","M"+(z?ft+","+bt:bt+","+ft)+(z?"h":"v")+Te).call(s.lineGroupStyle,de.width,_e(Vt),de.dash)}),Xt.selectAll("g."+We._id+"tick,path").remove();var vt=Ue+Te+(X||0)/2-("outside"===D.ticks?1:0),gt=e.calcTicks(We),Ot=e.getTickSigns(We)[2];return e.drawTicks(B,We,{vals:"inside"===We.ticks?e.clipEnds(We,gt):gt,layer:Xt,path:e.makeTickPath(We,vt,Ot),transFn:e.makeTransTickFn(We)}),e.drawLabels(B,We,{vals:gt,layer:Xt,transFn:e.makeTransTickLabelFn(We),labelFns:e.makeLabelFns(We,vt)})},function(){if(z&&!Ye||!z&&Ye){var yn,en,Xe=We.position||0,tt=We._offset+We._length/2;if("right"===be)en=tt,yn=oe.l+oe.w*Xe+10+St*(We.showticklabels?1:.5);else if(yn=tt,"bottom"===be&&(en=oe.t+oe.h*Xe+10+(-1===at.indexOf("inside")?We.tickfont.size:0)+("intside"!==We.ticks&&D.ticklen||0)),"top"===be){var ye=fe.text.split("<br>").length;en=oe.t+oe.h*Xe+10-Te-u*St*ye}cn((z?"h":"v")+We._id+"title",{avoid:{selection:g.select(B).selectAll("g."+We._id+"tick"),side:be,offsetTop:z?0:oe.t,offsetLeft:z?oe.l:0,maxShift:z?Q.width:Q.height},attributes:{x:yn,y:en,"text-anchor":"middle"},transform:{rotate:z?-90:0,offset:0}})}},b.previousPromises,function(){var yn,en=Te+X/2;-1===at.indexOf("inside")&&(yn=s.bBox(Xt.node()),en+=z?yn.width:yn.height),Ct=ct.select("text");var Xe=0,tt=z&&"top"===be,ye=!z&&"right"===be,ke=0;if(Ct.node()&&!Ct.classed(w.jsPlaceholder)){var Ve,Je=ct.select(".h"+We._id+"title-math-group").node();Je&&(z&&Ye||!z&&!Ye)?(Xe=(yn=s.bBox(Je)).width,Ve=yn.height):(Xe=(yn=s.bBox(ct.node())).right-oe.l-(z?Ue:Be),Ve=yn.bottom-oe.t-(z?Be:Ue),z||"top"!==be||(en+=yn.height,ke=yn.height)),ye&&(Ct.attr("transform",a(Xe/2+St/2,0)),Xe*=2),en=Math.max(en,z?Xe:Ve)}var nt=2*(z?q:ie)+en+K+X/2,Ke=0;!z&&fe.text&&"bottom"===V&&ee<=0&&(nt+=Ke=nt/2,ke+=Ke),Q._hColorbarMoveTitle=Ke,Q._hColorbarMoveCBTitle=ke;var vt=K+X;C.select("."+w.cbbg).attr("x",(z?Ue:Be)-vt/2-(z?q:0)).attr("y",(z?Be:Ue)-(z?De:ie+ke-Ke)).attr(z?"width":"height",Math.max(nt-Ke,2)).attr(z?"height":"width",Math.max(De+vt,2)).call(i.fill,ae).call(i.stroke,D.bordercolor).style("stroke-width",K);var gt=ye?Math.max(Xe-10,0):0;if(C.selectAll("."+w.cboutline).attr("x",(z?Ue:Be+q)+gt).attr("y",(z?Be+ie-De:Ue)+(tt?tn:0)).attr(z?"width":"height",Math.max(Te,2)).attr(z?"height":"width",Math.max(De-(z?2*ie+tn:2*q+gt),2)).call(i.stroke,D.outlinecolor).style({fill:"none","stroke-width":X}),C.attr("transform",a(oe.l-(z?qe*nt:0),oe.t-(z?0:(1-je)*nt-ke))),!z&&(K||m(ae).getAlpha()&&!m.equals(Q.paper_bgcolor,ae))){var Ot=Xt.selectAll("text"),Vt=Ot[0].length,ft=C.select("."+w.cbbg).node(),bt=s.bBox(ft),Wt=s.getTranslate(C);Ot.each(function(Rt,Yt){var nn=Vt-1;if(0===Yt||Yt===nn){var Kt,Mn=s.bBox(this),Un=s.getTranslate(this);Yt===nn?(Kt=bt.right+Wt.x+Be-K-2+H-(Mn.right+Un.x))>0&&(Kt=0):0===Yt&&(Kt=bt.left+Wt.x+Be+K+2-(Mn.left+Un.x))<0&&(Kt=0),Kt&&(Vt<3?this.setAttribute("transform","translate("+Kt+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Pt={},Bt=T[U],Pe=_[U],et=T[V],dt=_[V],xt=nt-Te;z?("pixels"===G?(Pt.y=ee,Pt.t=De*et,Pt.b=De*dt):(Pt.t=Pt.b=0,Pt.yt=ee+Y*et,Pt.yb=ee-Y*dt),"pixels"===te?(Pt.x=H,Pt.l=nt*Bt,Pt.r=nt*Pe):(Pt.l=xt*Bt,Pt.r=xt*Pe,Pt.xl=H-J*Bt,Pt.xr=H+J*Pe)):("pixels"===G?(Pt.x=H,Pt.l=De*Bt,Pt.r=De*Pe):(Pt.l=Pt.r=0,Pt.xl=H+Y*Bt,Pt.xr=H-Y*Pe),"pixels"===te?(Pt.y=1-ee,Pt.t=nt*et,Pt.b=nt*dt):(Pt.t=xt*et,Pt.b=xt*dt,Pt.yt=ee-J*et,Pt.yb=ee+J*dt)),b.autoMargin(B,D._id,Pt)}],B)}(R,S,M);O&&O.then&&(M._promises||[]).push(O),M._context.edits.colorbarPosition&&(J="v"===(D=S).orientation,te=(B=M)._fullLayout._size,r.init({element:(C=R).node(),gd:B,prepFn:function(){z=C.attr("transform"),p(C)},moveFn:function(X,K){C.attr("transform",z+a(X,K)),Y=r.align((J?D._uFrac:D._vFrac)+X/te.w,J?D._thickFrac:D._lenFrac,0,1,D.xanchor),G=r.align((J?D._vFrac:1-D._uFrac)-K/te.h,J?D._lenFrac:D._thickFrac,0,1,D.yanchor);var ae=r.getCursor(Y,G,D.xanchor,D.yanchor);p(C,ae)},doneFn:function(){if(p(C),void 0!==Y&&void 0!==G){var X={};X[D._propPrefix+"x"]=Y,X[D._propPrefix+"y"]=G,void 0!==D._traceIndex?y.call("_guiRestyle",B,X,D._traceIndex):y.call("_guiRelayout",B,X)}}}))}),I.exit().each(function(S){b.autoMargin(M,S._id)}).remove(),I.order()}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m){return g.isPlainObject(m.colorbar)}},{"../../lib":515}],373:[function(v,re,ne){"use strict";re.exports={moduleType:"component",name:"colorbar",attributes:v("./attributes"),supplyDefaults:v("./defaults"),draw:v("./draw").draw,hasColorbar:v("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(v,re,ne){"use strict";var g=v("../colorbar/attributes"),m=v("../../lib/regex").counter,b=v("../../lib/sort_object_keys"),y=v("./scales.js").scales;function e(r){return"`"+r+"`"}b(y),re.exports=function(r,n){r=r||"";var a,t=(n=n||{}).cLetter||"c",p=("onlyIfNumerical"in n||Boolean(r),"noScale"in n?n.noScale:"marker.line"===r),s="showScaleDflt"in n?n.showScaleDflt:"z"===t,i="string"==typeof n.colorscaleDflt?y[n.colorscaleDflt]:null,f=n.editTypeOverride||"",c=r?r+".":"";"colorAttr"in n?a=n.colorAttr:e(c+(a={z:"z",c:"color"}[t]));var l=t+"auto",h=t+"min",d=t+"max",o=t+"mid",x=(e(c+l),e(c+h),e(c+d),{});x[h]=x[d]=void 0;var u={};u[l]=!1;var T={};return"color"===a&&(T.color={valType:"color",arrayOk:!0,editType:f||"style"},n.anim&&(T.color.anim=!0)),T[l]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x},T[h]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:u},T[d]={valType:"number",dflt:null,editType:f||"plot",impliedEdits:u},T[o]={valType:"number",dflt:null,editType:"calc",impliedEdits:x},T.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},T.autocolorscale={valType:"boolean",dflt:!1!==n.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},T.reversescale={valType:"boolean",dflt:!1,editType:"plot"},p||(T.showscale={valType:"boolean",dflt:s,editType:"calc"},T.colorbar=g),n.noColorAxis||(T.coloraxis={valType:"subplotid",regex:m("coloraxis"),dflt:null,editType:"calc"}),T}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("./helpers").extractOpts;re.exports=function(y,e,r){var a=y._fullLayout,t=r.vals,p=r.containerStr,s=p?m.nestedProperty(e,p).get():e,i=b(s),f=!1!==i.auto,c=i.min,l=i.max,h=i.mid,d=function(){return m.aggNums(Math.min,null,t)},o=function(){return m.aggNums(Math.max,null,t)};void 0===c?c=d():f&&(c=s._colorAx&&g(c)?Math.min(c,d()):d()),void 0===l?l=o():f&&(l=s._colorAx&&g(l)?Math.max(l,o()):o()),f&&void 0!==h&&(l-h>h-c?c=h-(l-h):l-h<h-c&&(l=h+(h-c))),c===l&&(c-=.5,l+=.5),i._sync("min",c),i._sync("max",l),i.autocolorscale&&i._sync("colorscale",c*l<0?a.colorscale.diverging:c>=0?a.colorscale.sequential:a.colorscale.sequentialminus)}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./helpers").hasColorscale,b=v("./helpers").extractOpts;re.exports=function(y,e){function r(f,c){var l=f["_"+c];void 0!==l&&(f[c]=l)}function n(f,c){var l=c.container?g.nestedProperty(f,c.container).get():f;if(l)if(l.coloraxis)l._colorAx=e[l.coloraxis];else{var h=b(l),d=h.auto;(d||void 0===h.min)&&r(l,c.min),(d||void 0===h.max)&&r(l,c.max),h.autocolorscale&&r(l,"colorscale")}}for(var a=0;a<y.length;a++){var t=y[a],p=t._module.colorbar;if(p)if(Array.isArray(p))for(var s=0;s<p.length;s++)n(t,p[s]);else n(t,p);m(t,"marker.line")&&n(t,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in e._colorAxes)n(e[i],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../colorbar/has_colorbar"),y=v("../colorbar/defaults"),e=v("./scales").isValid,r=v("../../registry").traceIs;function n(a,t){var p=t.slice(0,t.length-1);return t?m.nestedProperty(a,p).get()||{}:a}re.exports=function a(t,p,s,i,f){var c=f.prefix,l=f.cLetter,h="_module"in p,d=n(t,c),o=n(p,c),x=n(p._template||{},c)||{},u=function(){return delete t.coloraxis,delete p.coloraxis,a(t,p,s,i,f)};if(h){var T=s._colorAxes||{},_=i(c+"coloraxis");if(_){var w=r(p,"contour")&&m.nestedProperty(p,"contours.coloring").get()||"heatmap",M=T[_];return void(M?(M[2].push(u),M[0]!==w&&(M[0]=!1,m.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):T[_]=[w,p,[u]])}}var I=d[l+"min"],S=d[l+"max"],R=g(I)&&g(S)&&I<S;i(c+l+"auto",!R)?i(c+l+"mid"):(i(c+l+"min"),i(c+l+"max"));var O,C,D=d.colorscale,B=x.colorscale;void 0!==D&&(O=!e(D)),void 0!==B&&(O=!e(B)),i(c+"autocolorscale",O),i(c+"colorscale"),i(c+"reversescale"),"marker.line."!==c&&(c&&h&&(C=b(d)),i(c+"showscale",C)&&(c&&x&&(o._template=x),y(d,o,s)))}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("tinycolor2"),b=v("fast-isnumeric"),y=v("../../lib"),e=v("../color"),r=v("./scales").isValid,n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],a=["min","max","mid","auto"];function t(c){var l,h,d,o=c._colorAx,x=o||c,u={};for(h=0;h<n.length;h++)u[d=n[h]]=x[d];if(o)for(l="c",h=0;h<a.length;h++)u[d=a[h]]=x["c"+d];else{var T;for(h=0;h<a.length;h++)((T="c"+(d=a[h]))in x||(T="z"+d)in x)&&(u[d]=x[T]);l=T.charAt(0)}return u._sync=function(_,w){var M=-1!==a.indexOf(_)?l+_:_;x[M]=x["_"+M]=w},u}function p(c){for(var l=t(c),h=l.min,d=l.max,o=l.reversescale?s(l.colorscale):l.colorscale,x=o.length,u=new Array(x),T=new Array(x),_=0;_<x;_++){var w=o[_];u[_]=h+w[0]*(d-h),T[_]=w[1]}return{domain:u,range:T}}function s(c){for(var l=c.length,h=new Array(l),d=l-1,o=0;d>=0;d--,o++){var x=c[d];h[o]=[1-x[0],x[1]]}return h}function i(c,l){l=l||{};for(var h=c.domain,d=c.range,o=d.length,x=new Array(o),u=0;u<o;u++){var T=m(d[u]).toRgb();x[u]=[T.r,T.g,T.b,T.a]}var _,w=g.scale.linear().domain(h).range(x).clamp(!0),M=l.noNumericCheck,I=l.returnArray;return(_=M&&I?w:M?function(S){return f(w(S))}:I?function(S){return b(S)?w(S):m(S).isValid()?S:e.defaultLine}:function(S){return b(S)?f(w(S)):m(S).isValid()?S:e.defaultLine}).domain=w.domain,_.range=function(){return d},_}function f(c){return m({r:c[0],g:c[1],b:c[2],a:c[3]}).toRgbString()}re.exports={hasColorscale:function(c,l,h){var d=l?y.nestedProperty(c,l).get()||{}:c,o=d[h||"color"],x=!1;if(y.isArrayOrTypedArray(o))for(var u=0;u<o.length;u++)if(b(o[u])){x=!0;break}return y.isPlainObject(d)&&(x||!0===d.showscale||b(d.cmin)&&b(d.cmax)||r(d.colorscale)||y.isPlainObject(d.colorbar))},extractOpts:t,extractScale:p,flipScale:s,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(c,l){return i(p(c),l)}}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(v,re,ne){"use strict";var g=v("./scales"),m=v("./helpers");re.exports={moduleType:"component",name:"colorscale",attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),handleDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc"),scales:g.scales,defaultScale:g.defaultScale,getScale:g.get,isValidScale:g.isValid,hasColorscale:m.hasColorscale,extractOpts:m.extractOpts,extractScale:m.extractScale,flipScale:m.flipScale,makeColorScaleFunc:m.makeColorScaleFunc,makeColorScaleFuncFromTrace:m.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(v,re,ne){"use strict";var g=v("../../lib/extend").extendFlat,m=v("./attributes"),b=v("./scales").scales;re.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:g({_isSubplotObj:!0,editType:"calc"},m("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plot_api/plot_template"),b=v("./layout_attributes"),y=v("./defaults");re.exports=function(e,r){function n(l,h){return g.coerce(e,r,b,l,h)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var a,t,p=r._colorAxes;function s(l,h){return g.coerce(a,t,b.coloraxis,l,h)}for(var i in p){var f=p[i];if(f[0])a=e[i]||{},(t=m.newContainer(r,i,"coloraxis"))._name=i,y(a,t,r,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<f[2].length;c++)f[2][c]();delete r._colorAxes[i]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(v,re,ne){"use strict";var g=v("tinycolor2"),m={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b=m.RdBu;function y(e){var r=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var a=e[n];if(2!==a.length||+a[0]<r||!g(a[1]).isValid())return!1;r=+a[0]}return!0}re.exports={scales:m,defaultScale:b,get:function(e,r){if(r||(r=b),!e)return r;function n(){try{e=m[e]||JSON.parse(e)}catch{e=r}}return"string"==typeof e&&(n(),"string"==typeof e&&n()),y(e)?e:r},isValid:function(e){return void 0!==m[e]||y(e)}}},{tinycolor2:313}],383:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e){var r=(g-b)/(y-b),n=r+m/(y-b),a=(r+n)/2;return"left"===e||"bottom"===e?r:"center"===e||"middle"===e?a:"right"===e||"top"===e?n:r<2/3-a?r:n>4/3-a?n:a}},{}],384:[function(v,re,ne){"use strict";var g=v("../../lib"),m=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];re.exports=function(b,y,e,r){return b="left"===e?0:"center"===e?1:"right"===e?2:g.constrain(Math.floor(3*b),0,2),y="bottom"===r?0:"middle"===r?1:"top"===r?2:g.constrain(Math.floor(3*y),0,2),m[y][b]}},{"../../lib":515}],385:[function(v,re,ne){"use strict";ne.selectMode=function(g){return"lasso"===g||"select"===g},ne.drawMode=function(g){return"drawclosedpath"===g||"drawopenpath"===g||"drawline"===g||"drawrect"===g||"drawcircle"===g},ne.openMode=function(g){return"drawline"===g||"drawopenpath"===g},ne.rectMode=function(g){return"select"===g||"drawline"===g||"drawrect"===g||"drawcircle"===g},ne.freeMode=function(g){return"lasso"===g||"drawclosedpath"===g||"drawopenpath"===g},ne.selectingOrDrawing=function(g){return ne.freeMode(g)||ne.rectMode(g)}},{}],386:[function(v,re,ne){"use strict";var g=v("mouse-event-offset"),m=v("has-hover"),b=v("has-passive-events"),y=v("../../lib").removeElement,e=v("../../plots/cartesian/constants"),r=re.exports={};r.align=v("./align"),r.getCursor=v("./cursor");var n=v("./unhover");function a(){var p=document.createElement("div");p.className="dragcover";var s=p.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(p),p}function t(p){return g(p.changedTouches?p.changedTouches[0]:p,document.body)}r.unhover=n.wrapped,r.unhoverRaw=n.raw,r.init=function(p){var s,i,f,c,l,h,d,o,x=p.gd,u=1,T=x._context.doubleClickDelay,_=p.element;x._mouseDownTime||(x._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=M,b?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=M,_.addEventListener("touchstart",M,{passive:!1})):_.ontouchstart=M;var w=p.clampFn||function(R,O,C){return Math.abs(R)<C&&(R=0),Math.abs(O)<C&&(O=0),[R,O]};function M(R){x._dragged=!1,x._dragging=!0;var O=t(R);s=O[0],i=O[1],d=R.target,h=R,o=2===R.buttons||R.ctrlKey,void 0===R.clientX&&void 0===R.clientY&&(R.clientX=s,R.clientY=i),(f=(new Date).getTime())-x._mouseDownTime<T?u+=1:(u=1,x._mouseDownTime=f),p.prepFn&&p.prepFn(R,s,i),m&&!o?(l=a()).style.cursor=window.getComputedStyle(_).cursor:m||(l=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),!1!==p.dragmode&&(R.preventDefault(),document.addEventListener("mousemove",I),document.addEventListener("touchmove",I,{passive:!1}))}function I(R){R.preventDefault();var O=t(R),D=w(O[0]-s,O[1]-i,p.minDrag||e.MINDRAG),B=D[0],z=D[1];(B||z)&&(x._dragged=!0,r.unhover(x,R)),x._dragged&&p.moveFn&&!o&&(x._dragdata={element:_,dx:B,dy:z},p.moveFn(B,z))}function S(R){if(delete x._dragdata,!1!==p.dragmode&&(R.preventDefault(),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I)),document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S),m?y(l):c&&(l.documentElement.style.cursor=c,c=null),x._dragging){if(x._dragging=!1,(new Date).getTime()-x._mouseDownTime>T&&(u=Math.max(u-1,1)),x._dragged)p.doneFn&&p.doneFn();else if(p.clickFn&&p.clickFn(u,h),!o){var O;try{O=new MouseEvent("click",R)}catch{var C=t(R);(O=document.createEvent("MouseEvents")).initMouseEvent("click",R.bubbles,R.cancelable,R.view,R.detail,R.screenX,R.screenY,C[0],C[1],R.ctrlKey,R.altKey,R.shiftKey,R.metaKey,R.button,R.relatedTarget)}d.dispatchEvent(O)}x._dragging=!1,x._dragged=!1}else x._dragged=!1}},r.coverSlip=a},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(v,re,ne){"use strict";var g=v("../../lib/events"),m=v("../../lib/throttle"),b=v("../../lib/dom").getGraphDiv,y=v("../fx/constants"),e=re.exports={};e.wrapped=function(r,n,a){(r=b(r))._fullLayout&&m.clear(r._fullLayout._uid+y.HOVERID),e.raw(r,n,a)},e.raw=function(r,n){var a=r._fullLayout,t=r._hoverdata;n||(n={}),n.target&&!r._dragged&&!1===g.triggerHandler(r,"plotly_beforehover",n)||(a._hoverlayer.selectAll("g").remove(),a._hoverlayer.selectAll("line").remove(),a._hoverlayer.selectAll("circle").remove(),r._hoverdata=void 0,n.target&&t&&r.emit("plotly_unhover",{event:n,points:t}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(v,re,ne){"use strict";ne.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ne.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=m.numberFormat,y=v("fast-isnumeric"),e=v("tinycolor2"),r=v("../../registry"),n=v("../color"),a=v("../colorscale"),t=m.strTranslate,p=v("../../lib/svg_text_utils"),s=v("../../constants/xmlns_namespaces"),i=v("../../constants/alignment").LINE_SPACING,f=v("../../constants/interactions").DESELECTDIM,c=v("../../traces/scatter/subtypes"),l=v("../../traces/scatter/make_bubble_size_func"),h=v("../../components/fx/helpers").appendArrayPointValue,d=re.exports={};function o(X,K,ae){var U=K.fillpattern,V=U&&d.getPatternAttr(U.shape,0,"");if(V){var q=d.getPatternAttr(U.bgcolor,0,null),ie=d.getPatternAttr(U.fgcolor,0,null),H=U.fgopacity,ee=d.getPatternAttr(U.size,0,8),Q=d.getPatternAttr(U.solidity,0,.3);d.pattern(X,"point",ae,K.uid,V,ee,Q,void 0,U.fillmode,q,ie,H)}else K.fillcolor&&X.call(n.fill,K.fillcolor)}d.font=function(X,K,ae,U){m.isPlainObject(K)&&(U=K.color,ae=K.size,K=K.family),K&&X.style("font-family",K),ae+1&&X.style("font-size",ae+"px"),U&&X.call(n.fill,U)},d.setPosition=function(X,K,ae){X.attr("x",K).attr("y",ae)},d.setSize=function(X,K,ae){X.attr("width",K).attr("height",ae)},d.setRect=function(X,K,ae,U,V){X.call(d.setPosition,K,ae).call(d.setSize,U,V)},d.translatePoint=function(X,K,ae,U){var V=ae.c2p(X.x),q=U.c2p(X.y);return!!(y(V)&&y(q)&&K.node())&&("text"===K.node().nodeName?K.attr("x",V).attr("y",q):K.attr("transform",t(V,q)),!0)},d.translatePoints=function(X,K,ae){X.each(function(U){var V=g.select(this);d.translatePoint(U,V,K,ae)})},d.hideOutsideRangePoint=function(X,K,ae,U,V,q){K.attr("display",ae.isPtWithinRange(X,V)&&U.isPtWithinRange(X,q)?null:"none")},d.hideOutsideRangePoints=function(X,K){if(K._hasClipOnAxisFalse){var ae=K.xaxis,U=K.yaxis;X.each(function(V){var q=V[0].trace,ie=q.xcalendar,H=q.ycalendar,ee=r.traceIs(q,"bar-like")?".bartext":".point,.textpoint";X.selectAll(ee).each(function(Q){d.hideOutsideRangePoint(Q,g.select(this),ae,U,ie,H)})})}},d.crispRound=function(X,K,ae){return K&&y(K)?X._context.staticPlot?K:K<1?1:Math.round(K):ae||0},d.singleLineStyle=function(X,K,ae,U,V){K.style("fill","none");var q=(((X||[])[0]||{}).trace||{}).line||{},ie=ae||q.width||0,H=V||q.dash||"";n.stroke(K,U||q.color),d.dashLine(K,H,ie)},d.lineGroupStyle=function(X,K,ae,U){X.style("fill","none").each(function(V){var q=(((V||[])[0]||{}).trace||{}).line||{},ie=K||q.width||0,H=U||q.dash||"";g.select(this).call(n.stroke,ae||q.color).call(d.dashLine,H,ie)})},d.dashLine=function(X,K,ae){K=d.dashStyle(K,ae=+ae||0),X.style({"stroke-dasharray":K,"stroke-width":ae+"px"})},d.dashStyle=function(X,K){K=+K||1;var ae=Math.max(K,3);return"solid"===X?X="":"dot"===X?X=ae+"px,"+ae+"px":"dash"===X?X=3*ae+"px,"+3*ae+"px":"longdash"===X?X=5*ae+"px,"+5*ae+"px":"dashdot"===X?X=3*ae+"px,"+ae+"px,"+ae+"px,"+ae+"px":"longdashdot"===X&&(X=5*ae+"px,"+2*ae+"px,"+ae+"px,"+2*ae+"px"),X},d.singleFillStyle=function(X,K){var ae=g.select(X.node());o(X,((ae.data()[0]||[])[0]||{}).trace||{},K)},d.fillGroupStyle=function(X,K){X.style("stroke-width",0).each(function(ae){var U=g.select(this);ae[0].trace&&o(U,ae[0].trace,K)})};var x=v("./symbol_defs");d.symbolNames=[],d.symbolFuncs=[],d.symbolNeedLines={},d.symbolNoDot={},d.symbolNoFill={},d.symbolList=[],Object.keys(x).forEach(function(X){var K=x[X],ae=K.n;d.symbolList.push(ae,String(ae),X,ae+100,String(ae+100),X+"-open"),d.symbolNames[ae]=X,d.symbolFuncs[ae]=K.f,K.needLine&&(d.symbolNeedLines[ae]=!0),K.noDot?d.symbolNoDot[ae]=!0:d.symbolList.push(ae+200,String(ae+200),X+"-dot",ae+300,String(ae+300),X+"-open-dot"),K.noFill&&(d.symbolNoFill[ae]=!0)});var u=d.symbolNames.length;function T(X,K){return d.symbolFuncs[X%100](K)+(X>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}d.symbolNumber=function(X){if(y(X))X=+X;else if("string"==typeof X){var K=0;X.indexOf("-open")>0&&(K=100,X=X.replace("-open","")),X.indexOf("-dot")>0&&(K+=200,X=X.replace("-dot","")),(X=d.symbolNames.indexOf(X))>=0&&(X+=K)}return X%100>=u||X>=400?0:Math.floor(Math.max(X,0))};var _={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},M=b("~f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:_},horizontalreversed:{node:"linearGradient",attrs:_,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};d.gradient=function(X,K,ae,U,V,q){for(var ie=V.length,H=I[U],ee=new Array(ie),Q=0;Q<ie;Q++)H.reversed?ee[ie-1-Q]=[M(100*(1-V[Q][0])),V[Q][1]]:ee[Q]=[M(100*V[Q][0]),V[Q][1]];var oe=K._fullLayout,le="g"+oe._uid+"-"+ae,de=oe._defs.select(".gradients").selectAll("#"+le).data([U+ee.join(";")],m.identity);de.exit().remove(),de.enter().append(H.node).each(function(){var fe=g.select(this);H.attrs&&fe.attr(H.attrs),fe.attr("id",le);var be=fe.selectAll("stop").data(ee);be.exit().remove(),be.enter().append("stop"),be.each(function(he){var _e=e(he[1]);g.select(this).attr({offset:he[0]+"%","stop-color":n.tinyRGB(_e),"stop-opacity":_e.getAlpha()})})}),X.style(q,G(le,K)).style(q+"-opacity",null),X.classed("gradient_filled",!0)},d.pattern=function(X,K,ae,U,V,q,ie,H,ee,Q,oe,le){var de="legend"===K;H&&("overlay"===ee?oe=n.contrast(Q=H):(Q=void 0,oe=H));var fe,be,he,_e,Ce,Ee,Ae,ze,Te,De=ae._fullLayout,Fe="p"+De._uid+"-"+U,Ue={};switch(V){case"/":fe=q*Math.sqrt(2),be=q*Math.sqrt(2),Ee="path",Ue={d:he="M-"+fe/4+","+be/4+"l"+fe/2+",-"+be/2+"M0,"+be+"L"+fe+",0M"+fe/4*3+","+be/4*5+"l"+fe/2+",-"+be/2,opacity:le,stroke:oe,"stroke-width":(_e=ie*q)+"px"};break;case"\\":fe=q*Math.sqrt(2),be=q*Math.sqrt(2),Ee="path",Ue={d:he="M"+fe/4*3+",-"+be/4+"l"+fe/2+","+be/2+"M0,0L"+fe+","+be+"M-"+fe/4+","+be/4*3+"l"+fe/2+","+be/2,opacity:le,stroke:oe,"stroke-width":(_e=ie*q)+"px"};break;case"x":fe=q*Math.sqrt(2),be=q*Math.sqrt(2),he="M-"+fe/4+","+be/4+"l"+fe/2+",-"+be/2+"M0,"+be+"L"+fe+",0M"+fe/4*3+","+be/4*5+"l"+fe/2+",-"+be/2+"M"+fe/4*3+",-"+be/4+"l"+fe/2+","+be/2+"M0,0L"+fe+","+be+"M-"+fe/4+","+be/4*3+"l"+fe/2+","+be/2,_e=q-q*Math.sqrt(1-ie),Ee="path",Ue={d:he,opacity:le,stroke:oe,"stroke-width":_e+"px"};break;case"|":Ee="path",Ee="path",Ue={d:he="M"+(fe=q)/2+",0L"+fe/2+","+(be=q),opacity:le,stroke:oe,"stroke-width":(_e=ie*q)+"px"};break;case"-":Ee="path",Ee="path",Ue={d:he="M0,"+(be=q)/2+"L"+(fe=q)+","+be/2,opacity:le,stroke:oe,"stroke-width":(_e=ie*q)+"px"};break;case"+":Ee="path",he="M"+(fe=q)/2+",0L"+fe/2+","+(be=q)+"M0,"+be/2+"L"+fe+","+be/2,_e=q-q*Math.sqrt(1-ie),Ee="path",Ue={d:he,opacity:le,stroke:oe,"stroke-width":_e+"px"};break;case".":fe=q,be=q,ie<Math.PI/4?Ce=Math.sqrt(ie*q*q/Math.PI):(Ae=ie,ze=Math.PI/4,1,Ce=(Te=q/2)+(q/Math.sqrt(2)-Te)*(Ae-ze)/(1-ze)),Ee="circle",Ue={cx:fe/2,cy:be/2,r:Ce,opacity:le,fill:oe}}var qe=[V||"noSh",Q||"noBg",oe||"noFg",q,ie].join(";"),je=De._defs.select(".patterns").selectAll("#"+Fe).data([qe],m.identity);je.exit().remove(),je.enter().append("pattern").each(function(){var rt=g.select(this);if(rt.attr({id:Fe,width:fe+"px",height:be+"px",patternUnits:"userSpaceOnUse",patternTransform:de?"scale(0.8)":""}),Q){var Ne=rt.selectAll("rect").data([0]);Ne.exit().remove(),Ne.enter().append("rect").attr({width:fe+"px",height:be+"px",fill:Q})}var Be=rt.selectAll(Ee).data([0]);Be.exit().remove(),Be.enter().append(Ee).attr(Ue)}),X.style("fill",G(Fe,ae)).style("fill-opacity",null),X.classed("pattern_filled",!0)},d.initGradients=function(X){m.ensureSingle(X._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),g.select(X).selectAll(".gradient_filled").classed("gradient_filled",!1)},d.initPatterns=function(X){m.ensureSingle(X._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),g.select(X).selectAll(".pattern_filled").classed("pattern_filled",!1)},d.getPatternAttr=function(X,K,ae){return X&&m.isArrayOrTypedArray(X)?K<X.length?X[K]:ae:X},d.pointStyle=function(X,K,ae){if(X.size()){var U=d.makePointStyleFns(K);X.each(function(V){d.singlePointStyle(V,g.select(this),K,U,ae)})}},d.singlePointStyle=function(X,K,ae,U,V){var q=ae.marker,ie=q.line;if(K.style("opacity",U.selectedOpacityFn?U.selectedOpacityFn(X):void 0===X.mo?q.opacity:X.mo),U.ms2mrc){var H;H="various"===X.ms||"various"===q.size?3:U.ms2mrc(X.ms),X.mrc=H,U.selectedSizeFn&&(H=X.mrc=U.selectedSizeFn(X));var ee=d.symbolNumber(X.mx||q.symbol)||0;X.om=ee%200>=100,K.attr("d",T(ee,H))}var Q,oe,le,de=!1;if(X.so?(le=ie.outlierwidth,oe=ie.outliercolor,Q=q.outliercolor):(le=(X.mlw+1||(ie||{}).width+1||(X.trace?(X.trace.marker.line||{}).width:0)+1)-1||0,oe="mlc"in X?X.mlcc=U.lineScale(X.mlc):m.isArrayOrTypedArray(ie.color)?n.defaultLine:ie.color,m.isArrayOrTypedArray(q.color)&&(Q=n.defaultLine,de=!0),Q="mc"in X?X.mcc=U.markerScale(X.mc):q.color||"rgba(0,0,0,0)",U.selectedColorFn&&(Q=U.selectedColorFn(X))),X.om)K.call(n.stroke,Q).style({"stroke-width":(le||1)+"px",fill:"none"});else{K.style("stroke-width",(X.isBlank?0:le)+"px");var be=q.gradient,he=X.mgt;he?de=!0:he=be&&be.type,m.isArrayOrTypedArray(he)&&(I[he=he[0]]||(he=0));var _e=q.pattern,Ce=_e&&d.getPatternAttr(_e.shape,X.i,"");if(he&&"none"!==he){var Ee=X.mgc;Ee?de=!0:Ee=be.color;var Ae=ae.uid;de&&(Ae+="-"+X.i),d.gradient(K,V,Ae,he,[[0,Ee],[1,Q]],"fill")}else if(Ce){var ze=d.getPatternAttr(_e.bgcolor,X.i,null),ve=d.getPatternAttr(_e.fgcolor,X.i,null),Te=_e.fgopacity,Ie=d.getPatternAttr(_e.size,X.i,8),De=d.getPatternAttr(_e.solidity,X.i,.3),Fe=X.mcc||m.isArrayOrTypedArray(_e.shape)||m.isArrayOrTypedArray(_e.bgcolor)||m.isArrayOrTypedArray(_e.size)||m.isArrayOrTypedArray(_e.solidity),Ue=ae.uid;Fe&&(Ue+="-"+X.i),d.pattern(K,"point",V,Ue,Ce,Ie,De,X.mcc,_e.fillmode,ze,ve,Te)}else n.fill(K,Q);le&&n.stroke(K,oe)}},d.makePointStyleFns=function(X){var K={},ae=X.marker;return K.markerScale=d.tryColorscale(ae,""),K.lineScale=d.tryColorscale(ae,"line"),r.traceIs(X,"symbols")&&(K.ms2mrc=c.isBubble(X)?l(X):function(){return(ae.size||6)/2}),X.selectedpoints&&m.extendFlat(K,d.makeSelectedPointStyleFns(X)),K},d.makeSelectedPointStyleFns=function(X){var K={},V=X.marker||{},q=(X.selected||{}).marker||{},ie=(X.unselected||{}).marker||{},ee=q.opacity,Q=ie.opacity,oe=void 0!==ee,le=void 0!==Q;(m.isArrayOrTypedArray(V.opacity)||oe||le)&&(K.selectedOpacityFn=function(ze){var ve=void 0===ze.mo?V.opacity:ze.mo;return ze.selected?oe?ee:ve:le?Q:f*ve});var de=V.color,fe=q.color,be=ie.color;(fe||be)&&(K.selectedColorFn=function(ze){var ve=ze.mcc||de;return ze.selected?fe||ve:be||ve});var he=V.size,_e=q.size,Ce=ie.size,Ee=void 0!==_e,Ae=void 0!==Ce;return r.traceIs(X,"symbols")&&(Ee||Ae)&&(K.selectedSizeFn=function(ze){var ve=ze.mrc||he/2;return ze.selected?Ee?_e/2:ve:Ae?Ce/2:ve}),K},d.makeSelectedTextStyleFns=function(X){var K={},H=(X.textfont||{}).color,ee=((X.selected||{}).textfont||{}).color,Q=((X.unselected||{}).textfont||{}).color;return K.selectedTextColorFn=function(oe){var le=oe.tc||H;return oe.selected?ee||le:Q||(ee?le:n.addOpacity(le,f))},K},d.selectedPointStyle=function(X,K){if(X.size()&&K.selectedpoints){var ae=d.makeSelectedPointStyleFns(K),U=K.marker||{},V=[];ae.selectedOpacityFn&&V.push(function(q,ie){q.style("opacity",ae.selectedOpacityFn(ie))}),ae.selectedColorFn&&V.push(function(q,ie){n.fill(q,ae.selectedColorFn(ie))}),ae.selectedSizeFn&&V.push(function(q,ie){var H=ie.mx||U.symbol||0,ee=ae.selectedSizeFn(ie);q.attr("d",T(d.symbolNumber(H),ee)),ie.mrc2=ee}),V.length&&X.each(function(q){for(var ie=g.select(this),H=0;H<V.length;H++)V[H](ie,q)})}},d.tryColorscale=function(X,K){var ae=K?m.nestedProperty(X,K).get():X;return ae&&(ae.colorscale||ae._colorAx)&&m.isArrayOrTypedArray(ae.color)?a.makeColorScaleFuncFromTrace(ae):m.identity};var S={start:1,end:-1,middle:0,bottom:1,top:-1};function R(X,K,ae,U,V){var q=g.select(X.node().parentNode),ie=-1!==K.indexOf("top")?"top":-1!==K.indexOf("bottom")?"bottom":"middle",H=-1!==K.indexOf("left")?"end":-1!==K.indexOf("right")?"start":"middle",ee=U?U/.8+1:0,Q=(p.lineCount(X)-1)*i+1,oe=S[H]*ee,le=.75*ae+S[ie]*ee+(S[ie]-1)*Q*ae/2;X.attr("text-anchor",H),V||q.attr("transform",t(oe,le))}function O(X,K){var ae=X.ts||K.textfont.size;return y(ae)&&ae>0?ae:0}function C(X,K,ae,U){var V=X[0]-K[0],q=X[1]-K[1],ie=ae[0]-K[0],H=ae[1]-K[1],ee=Math.pow(V*V+q*q,.25),Q=Math.pow(ie*ie+H*H,.25),oe=(Q*Q*V-ee*ee*ie)*U,le=(Q*Q*q-ee*ee*H)*U,de=3*Q*(ee+Q),fe=3*ee*(ee+Q);return[[g.round(K[0]+(de&&oe/de),2),g.round(K[1]+(de&&le/de),2)],[g.round(K[0]-(fe&&oe/fe),2),g.round(K[1]-(fe&&le/fe),2)]]}d.textPointStyle=function(X,K,ae){if(X.size()){var U;if(K.selectedpoints){var V=d.makeSelectedTextStyleFns(K);U=V.selectedTextColorFn}var q=K.texttemplate,ie=ae._fullLayout;X.each(function(H){var ee=g.select(this),Q=q?m.extractOption(H,K,"txt","texttemplate"):m.extractOption(H,K,"tx","text");if(Q||0===Q){if(q){var oe=K._module.formatLabels,le=oe?oe(H,K,ie):{},de={};h(de,K,H.i),Q=m.texttemplateString(Q,le,ie._d3locale,de,H,K._meta||{})}var be=H.tp||K.textposition,he=O(H,K),_e=U?U(H):H.tc||K.textfont.color;ee.call(d.font,H.tf||K.textfont.family,he,_e).text(Q).call(p.convertToTspans,ae).call(R,be,he,H.mrc)}else ee.remove()})}},d.selectedTextStyle=function(X,K){if(X.size()&&K.selectedpoints){var ae=d.makeSelectedTextStyleFns(K);X.each(function(U){var V=g.select(this),q=ae.selectedTextColorFn(U),ie=U.tp||K.textposition,H=O(U,K);n.fill(V,q);var ee=r.traceIs(K,"bar-like");R(V,ie,H,U.mrc2||U.mrc,ee)})}},d.smoothopen=function(X,K){if(X.length<3)return"M"+X.join("L");var ae,U="M"+X[0],V=[];for(ae=1;ae<X.length-1;ae++)V.push(C(X[ae-1],X[ae],X[ae+1],K));for(U+="Q"+V[0][0]+" "+X[1],ae=2;ae<X.length-1;ae++)U+="C"+V[ae-2][1]+" "+V[ae-1][0]+" "+X[ae];return U+"Q"+V[X.length-3][1]+" "+X[X.length-1]},d.smoothclosed=function(X,K){if(X.length<3)return"M"+X.join("L")+"Z";var ae,U="M"+X[0],V=X.length-1,q=[C(X[V],X[0],X[1],K)];for(ae=1;ae<V;ae++)q.push(C(X[ae-1],X[ae],X[ae+1],K));for(q.push(C(X[V-1],X[V],X[0],K)),ae=1;ae<=V;ae++)U+="C"+q[ae-1][1]+" "+q[ae][0]+" "+X[ae];return U+"C"+q[V][1]+" "+q[0][0]+" "+X[0]+"Z"};var D={hv:function(X,K){return"H"+g.round(K[0],2)+"V"+g.round(K[1],2)},vh:function(X,K){return"V"+g.round(K[1],2)+"H"+g.round(K[0],2)},hvh:function(X,K){return"H"+g.round((X[0]+K[0])/2,2)+"V"+g.round(K[1],2)+"H"+g.round(K[0],2)},vhv:function(X,K){return"V"+g.round((X[1]+K[1])/2,2)+"H"+g.round(K[0],2)+"V"+g.round(K[1],2)}},B=function(X,K){return"L"+g.round(K[0],2)+","+g.round(K[1],2)};d.steps=function(X){var K=D[X]||B;return function(ae){for(var U="M"+g.round(ae[0][0],2)+","+g.round(ae[0][1],2),V=1;V<ae.length;V++)U+=K(ae[V-1],ae[V]);return U}},d.makeTester=function(){var X=m.ensureSingleById(g.select("body"),"svg","js-plotly-tester",function(ae){ae.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),K=m.ensureSingle(X,"path","js-reference-point",function(ae){ae.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});d.tester=X,d.testref=K},d.savedBBoxes={};var z=0;function Y(X){var K=X.getAttribute("data-unformatted");if(null!==K)return K+X.getAttribute("data-math")+X.getAttribute("text-anchor")+X.getAttribute("style")}function G(X,K){if(!X)return null;var ae=K._context,U=ae._exportedPlot?"":ae._baseUrl||"";return U?"url('"+U+"#"+X+"')":"url(#"+X+")"}d.bBox=function(X,K,ae){var U,V,q;if(ae||(ae=Y(X)),ae){if(U=d.savedBBoxes[ae])return m.extendFlat({},U)}else if(1===X.childNodes.length){var ie=X.childNodes[0];if(ae=Y(ie)){var H=+ie.getAttribute("x")||0,ee=+ie.getAttribute("y")||0,Q=ie.getAttribute("transform");if(!Q){var oe=d.bBox(ie,!1,ae);return H&&(oe.left+=H,oe.right+=H),ee&&(oe.top+=ee,oe.bottom+=ee),oe}if(U=d.savedBBoxes[ae+="~"+H+"~"+ee+"~"+Q])return m.extendFlat({},U)}}K?V=X:(q=d.tester.node(),V=X.cloneNode(!0),q.appendChild(V)),g.select(V).attr("transform",null).call(p.positionText,0,0);var le=V.getBoundingClientRect(),de=d.testref.node().getBoundingClientRect();K||q.removeChild(V);var fe={height:le.height,width:le.width,left:le.left-de.left,top:le.top-de.top,right:le.right-de.left,bottom:le.bottom-de.top};return z>=1e4&&(d.savedBBoxes={},z=0),ae&&(d.savedBBoxes[ae]=fe),z++,m.extendFlat({},fe)},d.setClipUrl=function(X,K,ae){X.attr("clip-path",G(K,ae))},d.getTranslate=function(X){var K=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ae,U,V){return[U,V].join(" ")}).split(" ");return{x:+K[0]||0,y:+K[1]||0}},d.setTranslate=function(X,K,ae){var V=X.attr?"attr":"setAttribute",q=X[X.attr?"attr":"getAttribute"]("transform")||"";return K=K||0,ae=ae||0,q=q.replace(/(\btranslate\(.*?\);?)/,"").trim(),q=(q+=t(K,ae)).trim(),X[V]("transform",q),q},d.getScale=function(X){var K=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ae,U,V){return[U,V].join(" ")}).split(" ");return{x:+K[0]||1,y:+K[1]||1}},d.setScale=function(X,K,ae){var V=X.attr?"attr":"setAttribute",q=X[X.attr?"attr":"getAttribute"]("transform")||"";return K=K||1,ae=ae||1,q=q.replace(/(\bscale\(.*?\);?)/,"").trim(),q=(q+="scale("+K+","+ae+")").trim(),X[V]("transform",q),q};var J=/\s*sc.*/;d.setPointGroupScale=function(X,K,ae){if(K=K||1,ae=ae||1,X){var U=1===K&&1===ae?"":"scale("+K+","+ae+")";X.each(function(){var V=(this.getAttribute("transform")||"").replace(J,"");V=(V+=U).trim(),this.setAttribute("transform",V)})}};var te=/translate\([^)]*\)\s*$/;d.setTextPointsScale=function(X,K,ae){X&&X.each(function(){var U,V=g.select(this),q=V.select("text");if(q.node()){var ie=parseFloat(q.attr("x")||0),H=parseFloat(q.attr("y")||0),ee=(V.attr("transform")||"").match(te);U=1===K&&1===ae?[]:[t(ie,H),"scale("+K+","+ae+")",t(-ie,-H)],ee&&U.push(ee),V.attr("transform",U.join(""))}})}},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(v,re,ne){"use strict";var g=v("@plotly/d3");re.exports={circle:{n:0,f:function(m){var b=g.round(m,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(m){var b=g.round(m,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(m){var b=g.round(1.3*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(m){var b=g.round(.4*m,2),y=g.round(1.2*m,2);return"M"+y+","+b+"H"+b+"V"+y+"H-"+b+"V"+b+"H-"+y+"V-"+b+"H-"+b+"V-"+y+"H"+b+"V-"+b+"H"+y+"Z"}},x:{n:4,f:function(m){var b=g.round(.8*m/Math.sqrt(2),2),y="l"+b+","+b,e="l"+b+",-"+b,r="l-"+b+",-"+b,n="l-"+b+","+b;return"M0,"+b+y+e+r+e+r+n+r+n+y+n+y+"Z"}},"triangle-up":{n:5,f:function(m){var b=g.round(2*m/Math.sqrt(3),2);return"M-"+b+","+g.round(m/2,2)+"H"+b+"L0,-"+g.round(m,2)+"Z"}},"triangle-down":{n:6,f:function(m){var b=g.round(2*m/Math.sqrt(3),2);return"M-"+b+",-"+g.round(m/2,2)+"H"+b+"L0,"+g.round(m,2)+"Z"}},"triangle-left":{n:7,f:function(m){var b=g.round(2*m/Math.sqrt(3),2);return"M"+g.round(m/2,2)+",-"+b+"V"+b+"L-"+g.round(m,2)+",0Z"}},"triangle-right":{n:8,f:function(m){var b=g.round(2*m/Math.sqrt(3),2);return"M-"+g.round(m/2,2)+",-"+b+"V"+b+"L"+g.round(m,2)+",0Z"}},"triangle-ne":{n:9,f:function(m){var b=g.round(.6*m,2),y=g.round(1.2*m,2);return"M-"+y+",-"+b+"H"+b+"V"+y+"Z"}},"triangle-se":{n:10,f:function(m){var b=g.round(.6*m,2),y=g.round(1.2*m,2);return"M"+b+",-"+y+"V"+b+"H-"+y+"Z"}},"triangle-sw":{n:11,f:function(m){var b=g.round(.6*m,2),y=g.round(1.2*m,2);return"M"+y+","+b+"H-"+b+"V-"+y+"Z"}},"triangle-nw":{n:12,f:function(m){var b=g.round(.6*m,2),y=g.round(1.2*m,2);return"M-"+b+","+y+"V-"+b+"H"+y+"Z"}},pentagon:{n:13,f:function(m){var b=g.round(.951*m,2),y=g.round(.588*m,2),e=g.round(-m,2),r=g.round(-.309*m,2);return"M"+b+","+r+"L"+y+","+g.round(.809*m,2)+"H-"+y+"L-"+b+","+r+"L0,"+e+"Z"}},hexagon:{n:14,f:function(m){var b=g.round(m,2),y=g.round(m/2,2),e=g.round(m*Math.sqrt(3)/2,2);return"M"+e+",-"+y+"V"+y+"L0,"+b+"L-"+e+","+y+"V-"+y+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(m){var b=g.round(m,2),y=g.round(m/2,2),e=g.round(m*Math.sqrt(3)/2,2);return"M-"+y+","+e+"H"+y+"L"+b+",0L"+y+",-"+e+"H-"+y+"L-"+b+",0Z"}},octagon:{n:16,f:function(m){var b=g.round(.924*m,2),y=g.round(.383*m,2);return"M-"+y+",-"+b+"H"+y+"L"+b+",-"+y+"V"+y+"L"+y+","+b+"H-"+y+"L-"+b+","+y+"V-"+y+"Z"}},star:{n:17,f:function(m){var b=1.4*m,y=g.round(.225*b,2),e=g.round(.951*b,2),r=g.round(.363*b,2),n=g.round(.588*b,2),a=g.round(-b,2),t=g.round(-.309*b,2),p=g.round(.118*b,2),s=g.round(.809*b,2);return"M"+y+","+t+"H"+e+"L"+r+","+p+"L"+n+","+s+"L0,"+g.round(.382*b,2)+"L-"+n+","+s+"L-"+r+","+p+"L-"+e+","+t+"H-"+y+"L0,"+a+"Z"}},hexagram:{n:18,f:function(m){var b=g.round(.66*m,2),y=g.round(.38*m,2),e=g.round(.76*m,2);return"M-"+e+",0l-"+y+",-"+b+"h"+e+"l"+y+",-"+b+"l"+y+","+b+"h"+e+"l-"+y+","+b+"l"+y+","+b+"h-"+e+"l-"+y+","+b+"l-"+y+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(m){var b=g.round(m*Math.sqrt(3)*.8,2),y=g.round(.8*m,2),e=g.round(1.6*m,2),r=g.round(4*m,2),n="A "+r+","+r+" 0 0 1 ";return"M-"+b+","+y+n+b+","+y+n+"0,-"+e+n+"-"+b+","+y+"Z"}},"star-triangle-down":{n:20,f:function(m){var b=g.round(m*Math.sqrt(3)*.8,2),y=g.round(.8*m,2),e=g.round(1.6*m,2),r=g.round(4*m,2),n="A "+r+","+r+" 0 0 1 ";return"M"+b+",-"+y+n+"-"+b+",-"+y+n+"0,"+e+n+b+",-"+y+"Z"}},"star-square":{n:21,f:function(m){var b=g.round(1.1*m,2),y=g.round(2*m,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(m){var b=g.round(1.4*m,2),y=g.round(1.9*m,2),e="A "+y+","+y+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(m){var b=g.round(.7*m,2),y=g.round(1.4*m,2);return"M0,"+y+"L"+b+",0L0,-"+y+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(m){var b=g.round(1.4*m,2),y=g.round(.7*m,2);return"M0,"+y+"L"+b+",0L0,-"+y+"L-"+b+",0Z"}},hourglass:{n:25,f:function(m){var b=g.round(m,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(m){var b=g.round(m,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(m){var b=g.round(m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m){var b=g.round(m,2),y=g.round(m/Math.sqrt(2),2);return"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m){var b=g.round(m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(m){var b=g.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m){var b=g.round(1.3*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m){var b=g.round(1.3*m,2),y=g.round(.65*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+y+",-"+y+"L"+y+","+y+"M-"+y+","+y+"L"+y+",-"+y},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(m){var b=g.round(1.4*m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m){var b=g.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m){var b=g.round(1.2*m,2),y=g.round(.85*m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m){var b=g.round(m/2,2),y=g.round(m,2);return"M"+b+","+y+"V-"+y+"m-"+y+",0V"+y+"M"+y+","+b+"H-"+y+"m0,-"+y+"H"+y},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m){var b=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m){var b=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+y+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m){var b=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m){var b=g.round(1.2*m,2),y=g.round(1.6*m,2),e=g.round(.8*m,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+y+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m){var b=g.round(1.4*m,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m){var b=g.round(1.4*m,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(m){var b=g.round(m,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m){var b=g.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m){var b=g.round(m,2);return"M0,0L-"+b+","+g.round(2*m,2)+"H"+b+"Z"},noDot:!0},"arrow-down":{n:46,f:function(m){var b=g.round(m,2);return"M0,0L-"+b+",-"+g.round(2*m,2)+"H"+b+"Z"},noDot:!0},"arrow-left":{n:47,f:function(m){var b=g.round(2*m,2),y=g.round(m,2);return"M0,0L"+b+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-right":{n:48,f:function(m){var b=g.round(2*m,2),y=g.round(m,2);return"M0,0L-"+b+",-"+y+"V"+y+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(m){var b=g.round(m,2);return"M-"+b+",0H"+b+"M0,0L-"+b+","+g.round(2*m,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m){var b=g.round(m,2);return"M-"+b+",0H"+b+"M0,0L-"+b+",-"+g.round(2*m,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m){var b=g.round(2*m,2),y=g.round(m,2);return"M0,-"+y+"V"+y+"M0,0L"+b+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m){var b=g.round(2*m,2),y=g.round(m,2);return"M0,-"+y+"V"+y+"M0,0L-"+b+",-"+y+"V"+y+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],391:[function(v,re,ne){"use strict";re.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../registry"),b=v("../../plots/cartesian/axes"),y=v("../../lib"),e=v("./compute_error");function r(n,a,t,p){var s=a["error_"+p]||{},i=[];if(s.visible&&-1!==["linear","log"].indexOf(t.type)){for(var f=e(s),c=0;c<n.length;c++){var l=n[c],h=l.i;if(void 0===h)h=c;else if(null===h)continue;var d=l[p];if(g(t.c2l(d))){var o=f(d,h);if(g(o[0])&&g(o[1])){var x=l[p+"s"]=d-o[0],u=l[p+"h"]=d+o[1];i.push(x,u)}}}var _=a._extremes[t._id],w=b.findExtremes(t,i,y.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(w.min),_.max=_.max.concat(w.max)}}re.exports=function(n){for(var a=n.calcdata,t=0;t<a.length;t++){var p=a[t],s=p[0].trace;if(!0===s.visible&&m.traceIs(s,"errorBarsOK")){var i=b.getFromId(n,s.xaxis),f=b.getFromId(n,s.yaxis);r(p,s,i,"x"),r(p,s,f,"y")}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(v,re,ne){"use strict";function g(m,b){return"percent"===m?function(y){return Math.abs(y*b/100)}:"constant"===m?function(){return Math.abs(b)}:"sqrt"===m?function(y){return Math.sqrt(Math.abs(y))}:void 0}re.exports=function(m){var b=m.type,y=m.symmetric;if("data"===b){var e=m.array||[];if(y)return function(t,p){var s=+e[p];return[s,s]};var r=m.arrayminus||[];return function(t,p){var s=+e[p],i=+r[p];return isNaN(s)&&isNaN(i)?[NaN,NaN]:[i||0,s||0]}}var n=g(b,m.value),a=g(b,m.valueminus);return y||void 0===m.valueminus?function(t){var p=n(t);return[p,p]}:function(t){return[a(t),n(t)]}}},{}],394:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../registry"),b=v("../../lib"),y=v("../../plot_api/plot_template"),e=v("./attributes");re.exports=function(r,n,a,t){var p="error_"+t.axis,s=y.newContainer(n,p),i=r[p]||{};function f(d,o){return b.coerce(i,s,e,d,o)}if(!1!==f("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var c=f("type","array"in i?"data":"percent"),l=!0;"sqrt"!==c&&(l=f("symmetric",!(("data"===c?"arrayminus":"valueminus")in i))),"data"===c?(f("array"),f("traceref"),l||(f("arrayminus"),f("tracerefminus"))):"percent"!==c&&"constant"!==c||(f("value"),l||f("valueminus"));var h="copy_"+t.inherit+"style";t.inherit&&(n["error_"+t.inherit]||{}).visible&&f(h,!(i.color||g(i.thickness)||g(i.width))),t.inherit&&s[h]||(f("color",a),f("thickness"),f("width",m.traceIs(n,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plot_api/edit_types").overrideAll,b=v("./attributes"),y={error_x:g.extendFlat({},b),error_y:g.extendFlat({},b)};delete y.error_x.copy_zstyle,delete y.error_y.copy_zstyle,delete y.error_y.copy_ystyle;var e={error_x:g.extendFlat({},b),error_y:g.extendFlat({},b),error_z:g.extendFlat({},b)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,re.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:y,bar:y,histogram:y,scatter3d:m(e,"calc","nested"),scattergl:m(y,"calc","nested")}},supplyDefaults:v("./defaults"),calc:v("./calc"),makeComputeError:v("./compute_error"),plot:v("./plot"),style:v("./style"),hoverInfo:function(r,n,a){(n.error_y||{}).visible&&(a.yerr=r.yh-r.y,n.error_y.symmetric||(a.yerrneg=r.y-r.ys)),(n.error_x||{}).visible&&(a.xerr=r.xh-r.x,n.error_x.symmetric||(a.xerrneg=r.x-r.xs))}}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("../drawing"),y=v("../../traces/scatter/subtypes");re.exports=function(e,r,n,a){var t=n.xaxis,p=n.yaxis,s=a&&a.duration>0;r.each(function(i){var f,c=i[0].trace,l=c.error_x||{},h=c.error_y||{};c.ids&&(f=function(u){return u.id});var d=y.hasMarkers(c)&&c.marker.maxdisplayed>0;h.visible||l.visible||(i=[]);var o=g.select(this).selectAll("g.errorbar").data(i,f);if(o.exit().remove(),i.length){l.visible||o.selectAll("path.xerror").remove(),h.visible||o.selectAll("path.yerror").remove(),o.style("opacity",1);var x=o.enter().append("g").classed("errorbar",!0);s&&x.style("opacity",0).transition().duration(a.duration).style("opacity",1),b.setClipUrl(o,n.layerClipId,e),o.each(function(u){var O,C,D,B,T=g.select(this),_=(D=p,B={x:(C=t).c2p((O=u).x),y:D.c2p(O.y)},void 0!==O.yh&&(B.yh=D.c2p(O.yh),B.ys=D.c2p(O.ys),m(B.ys)||(B.noYS=!0,B.ys=D.c2p(O.ys,!0))),void 0!==O.xh&&(B.xh=C.c2p(O.xh),B.xs=C.c2p(O.xs),m(B.xs)||(B.noXS=!0,B.xs=C.c2p(O.xs,!0))),B);if(!d||u.vis){var w,M=T.select("path.yerror");if(h.visible&&m(_.x)&&m(_.yh)&&m(_.ys)){var I=h.width;w="M"+(_.x-I)+","+_.yh+"h"+2*I+"m-"+I+",0V"+_.ys,_.noYS||(w+="m-"+I+",0h"+2*I),M.size()?s&&(M=M.transition().duration(a.duration).ease(a.easing)):M=T.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),M.attr("d",w)}else M.remove();var S=T.select("path.xerror");if(l.visible&&m(_.y)&&m(_.xh)&&m(_.xs)){var R=(l.copy_ystyle?h:l).width;w="M"+_.xh+","+(_.y-R)+"v"+2*R+"m0,-"+R+"H"+_.xs,_.noXS||(w+="m0,-"+R+"v"+2*R),S.size()?s&&(S=S.transition().duration(a.duration).ease(a.easing)):S=T.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),S.attr("d",w)}else S.remove()}})}})}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../color");re.exports=function(b){b.each(function(y){var e=y[0].trace,r=e.error_y||{},n=e.error_x||{},a=g.select(this);a.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(m.stroke,r.color),n.copy_ystyle&&(n=r),a.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(m.stroke,n.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("./layout_attributes").hoverlabel,b=v("../../lib/extend").extendFlat;re.exports={hoverlabel:{bgcolor:b({},m.bgcolor,{arrayOk:!0}),bordercolor:b({},m.bordercolor,{arrayOk:!0}),font:g({arrayOk:!0,editType:"none"}),align:b({},m.align,{arrayOk:!0}),namelength:b({},m.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry");function b(y,e,r,n){n=n||g.identity,Array.isArray(y)&&(e[0][r]=n(y))}re.exports=function(y){var e=y.calcdata,r=y._fullLayout;function n(i){return function(f){return g.coerceHoverinfo({hoverinfo:f},{_module:i._module},r)}}for(var a=0;a<e.length;a++){var t=e[a],p=t[0].trace;if(!m.traceIs(p,"pie-like")){var s=m.traceIs(p,"2dMap")?b:g.fillArray;s(p.hoverinfo,t,"hi",n(p)),p.hovertemplate&&s(p.hovertemplate,t,"ht"),p.hoverlabel&&(s(p.hoverlabel.bgcolor,t,"hbg"),s(p.hoverlabel.bordercolor,t,"hbc"),s(p.hoverlabel.font.size,t,"hts"),s(p.hoverlabel.font.color,t,"htc"),s(p.hoverlabel.font.family,t,"htf"),s(p.hoverlabel.namelength,t,"hnl"),s(p.hoverlabel.align,t,"hta"))}}}},{"../../lib":515,"../../registry":647}],400:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("./hover").hover;re.exports=function(b,y,e){var r=g.getComponentMethod("annotations","onClick")(b,b._hoverdata);function n(){b.emit("plotly_click",{points:b._hoverdata,event:y})}void 0!==e&&m(b,y,e,!0),b._hoverdata&&y&&y.target&&(r&&r.then?r.then(n):n(),y.stopImmediatePropagation&&y.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(v,re,ne){"use strict";re.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("./hoverlabel_defaults");re.exports=function(y,e,r,n){var a=g.extendFlat({},n.hoverlabel);e.hovertemplate&&(a.namelength=-1),b(y,e,function(t,p){return g.coerce(y,e,m,t,p)},a)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(v,re,ne){"use strict";var g=v("../../lib");ne.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},ne.isTraceInSubplots=function(n,a){if("splom"===n.type){for(var t=n.xaxes||[],p=n.yaxes||[],s=0;s<t.length;s++)for(var i=0;i<p.length;i++)if(-1!==a.indexOf(t[s]+p[i]))return!0;return!1}return-1!==a.indexOf(ne.getSubplot(n))},ne.flat=function(n,a){for(var t=new Array(n.length),p=0;p<n.length;p++)t[p]=a;return t},ne.p2c=function(n,a){for(var t=new Array(n.length),p=0;p<n.length;p++)t[p]=n[p].p2c(a);return t},ne.getDistanceFunction=function(n,a,t,p){return"closest"===n?p||ne.quadrature(a,t):"x"===n.charAt(0)?a:t},ne.getClosest=function(n,a,t){if(!1!==t.index)t.index>=0&&t.index<n.length?t.distance=0:t.index=!1;else for(var p=0;p<n.length;p++){var s=a(n[p]);s<=t.distance&&(t.index=p,t.distance=s)}return t},ne.inbox=function(n,a,t){return n*a<0||0===n?t:1/0},ne.quadrature=function(n,a){return function(t){var p=n(t),s=a(t);return Math.sqrt(p*p+s*s)}},ne.makeEventData=function(n,a,t){var p="index"in n?n.index:n.pointNumber,s={data:a._input,fullData:a,curveNumber:a.index,pointNumber:p};if(a._indexToPoints){var i=a._indexToPoints[p];1===i.length?s.pointIndex=i[0]:s.pointIndices=i}else s.pointIndex=p;return a._module.eventData?s=a._module.eventData(s,n,a,t,p):("xVal"in n?s.x=n.xVal:"x"in n&&(s.x=n.x),"yVal"in n?s.y=n.yVal:"y"in n&&(s.y=n.y),n.xa&&(s.xaxis=n.xa),n.ya&&(s.yaxis=n.ya),void 0!==n.zLabelVal&&(s.z=n.zLabelVal)),ne.appendArrayPointValue(s,a,p),s},ne.appendArrayPointValue=function(n,a,t){var p=a._arrayAttrs;if(p)for(var s=0;s<p.length;s++){var i=p[s],f=b(i);if(void 0===n[f]){var c=y(g.nestedProperty(a,i).get(),t);void 0!==c&&(n[f]=c)}}},ne.appendArrayMultiPointValues=function(n,a,t){var p=a._arrayAttrs;if(p)for(var s=0;s<p.length;s++){var i=p[s],f=b(i);if(void 0===n[f]){for(var c=g.nestedProperty(a,i).get(),l=new Array(t.length),h=0;h<t.length;h++)l[h]=y(c,t[h]);n[f]=l}}};var m={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function b(n){return m[n]||n}function y(n,a){return Array.isArray(a)?Array.isArray(n)&&Array.isArray(n[a[0]])?n[a[0]][a[1]]:void 0:n[a]}var e={x:!0,y:!0},r={"x unified":!0,"y unified":!0};ne.isUnifiedHover=function(n){return"string"==typeof n&&!!r[n]},ne.isXYhover=function(n){return"string"==typeof n&&!!e[n]}},{"../../lib":515}],404:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("tinycolor2"),y=v("../../lib"),e=y.strTranslate,r=y.strRotate,n=v("../../lib/events"),a=v("../../lib/svg_text_utils"),t=v("../../lib/override_cursor"),p=v("../drawing"),s=v("../color"),i=v("../dragelement"),f=v("../../plots/cartesian/axes"),c=v("../../registry"),l=v("./helpers"),h=v("./constants"),d=v("../legend/defaults"),o=v("../legend/draw"),x=h.YANGLE,u=Math.PI*x/180,T=1/Math.sin(u),_=Math.cos(u),w=Math.sin(u),M=h.HOVERARROWSIZE,I=h.HOVERTEXTPAD,S={box:!0,ohlc:!0,violin:!0,candlestick:!0},R={scatter:!0,scattergl:!0,splom:!0};function O(V){return[V.trace.index,V.index,V.x0,V.y0,V.name,V.attr,V.xa?V.xa._id:"",V.ya?V.ya._id:""].join(",")}ne.hover=function(V,q,ie,H){V=y.getGraphDiv(V);var ee=q.target;y.throttle(V._fullLayout._uid+h.HOVERID,h.HOVERMINTIME,function(){!function(Q,oe,le,de,fe){le||(le="xy");var be=Array.isArray(le)?le:[le],he=Q._fullLayout,_e=he._plots||[],Ce=_e[le],Ee=he._has("cartesian");if(Ce){var Ae=Ce.overlays.map(function(Jn){return Jn.id});be=be.concat(Ae)}for(var ze=be.length,ve=new Array(ze),Te=new Array(ze),Ie=!1,De=0;De<ze;De++){var Fe=be[De];if(_e[Fe])Ie=!0,ve[De]=_e[Fe].xaxis,Te[De]=_e[Fe].yaxis;else{if(!he[Fe]||!he[Fe]._subplot)return void y.warn("Unrecognized subplot: "+Fe);var Ue=he[Fe]._subplot;ve[De]=Ue.xaxis,Te[De]=Ue.yaxis}}var qe=oe.hovermode||he.hovermode;if(qe&&!Ie&&(qe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(qe)||!Q.calcdata||Q.querySelector(".zoombox")||Q._dragging)return i.unhoverRaw(Q,oe);var je=he.hoverdistance;-1===je&&(je=1/0);var rt=he.spikedistance;-1===rt&&(rt=1/0);var Ne,Be,We,Ye,lt,mt,Tt,It,Ct,ct,at,St,Xt,tn=[],hn=[],cn={hLinePoint:null,vLinePoint:null},yn=!1;if(Array.isArray(oe))for(qe="array",We=0;We<oe.length;We++)(lt=Q.calcdata[oe[We].curveNumber||0])&&(mt=lt[0].trace,"skip"!==lt[0].trace.hoverinfo&&(hn.push(lt),"h"===mt.orientation&&(yn=!0)));else{for(Ye=0;Ye<Q.calcdata.length;Ye++)"skip"!==(mt=(lt=Q.calcdata[Ye])[0].trace).hoverinfo&&l.isTraceInSubplots(mt,be)&&(hn.push(lt),"h"===mt.orientation&&(yn=!0));var en,Xe;if(fe){if(!1===n.triggerHandler(Q,"plotly_beforehover",oe))return;var tt=fe.getBoundingClientRect();en=oe.clientX-tt.left,Xe=oe.clientY-tt.top,he._calcInverseTransform(Q);var ye=y.apply3DTransform(he._invTransform)(en,Xe);if(Xe=ye[1],(en=ye[0])<0||en>ve[0]._length||Xe<0||Xe>Te[0]._length)return i.unhoverRaw(Q,oe)}else en="xpx"in oe?oe.xpx:ve[0]._length/2,Xe="ypx"in oe?oe.ypx:Te[0]._length/2;if(oe.pointerX=en+ve[0]._offset,oe.pointerY=Xe+Te[0]._offset,Ne="xval"in oe?l.flat(be,oe.xval):l.p2c(ve,en),Be="yval"in oe?l.flat(be,oe.yval):l.p2c(Te,Xe),!m(Ne[0])||!m(Be[0]))return y.warn("Fx.hover failed",oe,Q),i.unhoverRaw(Q,oe)}var ke=1/0;function Ve(Jn,Ar){for(Ye=0;Ye<hn.length;Ye++)if((lt=hn[Ye])&&lt[0]&&lt[0].trace&&!0===(mt=lt[0].trace).visible&&0!==mt._length&&-1===["carpet","contourcarpet"].indexOf(mt._module.name)){if("splom"===mt.type?Tt=be[It=0]:(Tt=l.getSubplot(mt),It=be.indexOf(Tt)),l.isUnifiedHover(Ct=qe)&&(Ct=Ct.charAt(0)),St={cd:lt,trace:mt,xa:ve[It],ya:Te[It],maxHoverDistance:je,maxSpikeDistance:rt,index:!1,distance:Math.min(ke,je),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:mt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},he[Tt]&&(St.subplot=he[Tt]._subplot),he._splomScenes&&he._splomScenes[mt.uid]&&(St.scene=he._splomScenes[mt.uid]),Xt=tn.length,"array"===Ct){var mr=oe[Ye];"pointNumber"in mr?(St.index=mr.pointNumber,Ct="closest"):(Ct="","xval"in mr&&(ct=mr.xval,Ct="x"),"yval"in mr&&(at=mr.yval,Ct=Ct?"closest":"y"))}else void 0!==Jn&&void 0!==Ar?(ct=Jn,at=Ar):(ct=Ne[It],at=Be[It]);if(0!==je)if(mt._module&&mt._module.hoverPoints){var lr=mt._module.hoverPoints(St,ct,at,Ct,{finiteRange:!0,hoverLayer:he._hoverlayer});if(lr)for(var ri,si=0;si<lr.length;si++)m((ri=lr[si]).x0)&&m(ri.y0)&&tn.push(Y(ri,qe))}else y.log("Unrecognized trace type in hover:",mt);if("closest"===qe&&tn.length>Xt&&(tn.splice(0,Xt),ke=tn[0].distance),Ee&&0!==rt&&0===tn.length){St.distance=rt,St.index=!1;var Tr=mt._module.hoverPoints(St,ct,at,"closest",{hoverLayer:he._hoverlayer});if(Tr&&(Tr=Tr.filter(function(bn){return bn.spikeDistance<=rt})),Tr&&Tr.length){var Zr,Ii=Tr.filter(function(bn){return bn.xa.showspikes&&"hovered data"!==bn.xa.spikesnap});if(Ii.length){var dn=Ii[0];m(dn.x0)&&m(dn.y0)&&(Zr=nt(dn),(!cn.vLinePoint||cn.vLinePoint.spikeDistance>Zr.spikeDistance)&&(cn.vLinePoint=Zr))}var Cn=Tr.filter(function(bn){return bn.ya.showspikes&&"hovered data"!==bn.ya.spikesnap});if(Cn.length){var jt=Cn[0];m(jt.x0)&&m(jt.y0)&&(Zr=nt(jt),(!cn.hLinePoint||cn.hLinePoint.spikeDistance>Zr.spikeDistance)&&(cn.hLinePoint=Zr))}}}}}function Je(Jn,Ar,mr){for(var lr,ri=null,si=1/0,Tr=0;Tr<Jn.length;Tr++)lr=Jn[Tr].spikeDistance,mr&&0===Tr&&(lr=-1/0),lr<=si&&lr<=Ar&&(ri=Jn[Tr],si=lr);return ri}function nt(Jn){return Jn?{xa:Jn.xa,ya:Jn.ya,x:void 0!==Jn.xSpike?Jn.xSpike:(Jn.x0+Jn.x1)/2,y:void 0!==Jn.ySpike?Jn.ySpike:(Jn.y0+Jn.y1)/2,distance:Jn.distance,spikeDistance:Jn.spikeDistance,curveNumber:Jn.trace.index,color:Jn.color,pointNumber:Jn.index}:null}Ve();var Ke={fullLayout:he,container:he._hoverlayer,event:oe},vt=Q._spikepoints;Q._spikepoints={vLinePoint:cn.vLinePoint,hLinePoint:cn.hLinePoint};var Ot=function(){tn.sort(function(Jn,Ar){return Jn.distance-Ar.distance}),tn=function(Jn,Ar){for(var mr=Ar.charAt(0),lr=[],ri=[],si=[],Tr=0;Tr<Jn.length;Tr++){var Zr=Jn[Tr];c.traceIs(Zr.trace,"bar-like")||c.traceIs(Zr.trace,"box-violin")?si.push(Zr):Zr.trace[mr+"period"]?ri.push(Zr):lr.push(Zr)}return lr.concat(ri).concat(si)}(tn,qe)};Ot();var Vt=qe.charAt(0),ft=("x"===Vt||"y"===Vt)&&tn[0]&&R[tn[0].trace.type];if(Ee&&0!==rt&&0!==tn.length){var bt=Je(tn.filter(function(Jn){return Jn.ya.showspikes}),rt,ft);cn.hLinePoint=nt(bt);var Wt=Je(tn.filter(function(Jn){return Jn.xa.showspikes}),rt,ft);cn.vLinePoint=nt(Wt)}if(0===tn.length){var Pt=i.unhoverRaw(Q,oe);return!Ee||null===cn.hLinePoint&&null===cn.vLinePoint||J(vt)&&G(Q,cn,Ke),Pt}if(Ee&&J(vt)&&G(Q,cn,Ke),l.isXYhover(Ct)&&0!==tn[0].length&&"splom"!==tn[0].trace.type){var Bt=tn[0],Pe=(tn=S[Bt.trace.type]?tn.filter(function(Jn){return Jn.trace.index===Bt.trace.index}):[Bt]).length;Ve(X("x",Bt,he),X("y",Bt,he));var xt,Rt=[],Yt={},nn=0,Kt=function(Jn){var Ar=S[Jn.trace.type]?O(Jn):Jn.trace.index;if(Yt[Ar]){var mr=Yt[Ar]-1,lr=Rt[mr];mr>0&&Math.abs(Jn.distance)<Math.abs(lr.distance)&&(Rt[mr]=Jn)}else nn++,Yt[Ar]=nn,Rt.push(Jn)};for(xt=0;xt<Pe;xt++)Kt(tn[xt]);for(xt=tn.length-1;xt>Pe-1;xt--)Kt(tn[xt]);tn=Rt,Ot()}var Mn=Q._hoverdata,Un=[],Tn=K(Q),un=ae(Q);for(We=0;We<tn.length;We++){var an=tn[We],fn=l.makeEventData(an,an.trace,an.cd);if(!1!==an.hovertemplate){var pn=!1;an.cd[an.index]&&an.cd[an.index].ht&&(pn=an.cd[an.index].ht),an.hovertemplate=pn||an.trace.hovertemplate||!1}if(an.xa&&an.ya){var Sn=an.x0+an.xa._offset,Nn=an.x1+an.xa._offset,Kn=an.y0+an.ya._offset,Bn=an.y1+an.ya._offset,cr=Math.min(Sn,Nn),Lr=Math.max(Sn,Nn),Qn=Math.min(Kn,Bn),qr=Math.max(Kn,Bn);fn.bbox={x0:cr+un,x1:Lr+un,y0:Qn+Tn,y1:qr+Tn}}an.eventData=[fn],Un.push(fn)}Q._hoverdata=Un;var sr="y"===qe&&(hn.length>1||tn.length>1)||"closest"===qe&&yn&&tn.length>1,hr=s.combine(he.plot_bgcolor||s.background,he.paper_bgcolor),jr=D(tn,{gd:Q,hovermode:qe,rotateLabels:sr,bgColor:hr,container:he._hoverlayer,outerContainer:he._paper.node(),commonLabelOpts:he.hoverlabel,hoverdistance:he.hoverdistance});if(l.isUnifiedHover(qe)||(function(Jn,Ar,mr){var lr,ri,si,Tr,Zr,Ii,dn,Cn=0,jt=1,bn=Jn.size(),An=new Array(bn),$n=0;function Gn(ar){var vr=ar[0],xr=ar[ar.length-1];if(si=xr.pos+xr.dp+xr.size-vr.pmax,(ri=vr.pmin-vr.pos-vr.dp+vr.size)>.01){for(Zr=ar.length-1;Zr>=0;Zr--)ar[Zr].dp+=ri;lr=!1}if(!(si<.01)){if(ri<-.01){for(Zr=ar.length-1;Zr>=0;Zr--)ar[Zr].dp-=si;lr=!1}if(lr){var Ir=0;for(Tr=0;Tr<ar.length;Tr++)(Ii=ar[Tr]).pos+Ii.dp+Ii.size>vr.pmax&&Ir++;for(Tr=ar.length-1;Tr>=0&&!(Ir<=0);Tr--)(Ii=ar[Tr]).pos>vr.pmax-1&&(Ii.del=!0,Ir--);for(Tr=0;Tr<ar.length&&!(Ir<=0);Tr++)if((Ii=ar[Tr]).pos<vr.pmin+1)for(Ii.del=!0,Ir--,si=2*Ii.size,Zr=ar.length-1;Zr>=0;Zr--)ar[Zr].dp-=si;for(Tr=ar.length-1;Tr>=0&&!(Ir<=0);Tr--)(Ii=ar[Tr]).pos+Ii.dp+Ii.size>vr.pmax&&(Ii.del=!0,Ir--)}}}for(Jn.each(function(ar){var vr=ar[Ar],xr="x"===vr._id.charAt(0),Ir=vr.range;0===$n&&Ir&&Ir[0]>Ir[1]!==xr&&(jt=-1),An[$n++]=[{datum:ar,traceIndex:ar.trace.index,dp:0,pos:ar.pos,posref:ar.posref,size:ar.by*(xr?T:1)/2,pmin:0,pmax:xr?mr.width:mr.height}]}),An.sort(function(ar,vr){return ar[0].posref-vr[0].posref||jt*(vr[0].traceIndex-ar[0].traceIndex)});!lr&&Cn<=bn;){for(Cn++,lr=!0,Tr=0;Tr<An.length-1;){var zn=An[Tr],Hn=An[Tr+1],Ln=zn[zn.length-1],On=Hn[0];if((ri=Ln.pos+Ln.dp+Ln.size-On.pos-On.dp+On.size)>.01&&Ln.pmin===On.pmin&&Ln.pmax===On.pmax){for(Zr=Hn.length-1;Zr>=0;Zr--)Hn[Zr].dp+=ri;for(zn.push.apply(zn,Hn),An.splice(Tr+1,1),dn=0,Zr=zn.length-1;Zr>=0;Zr--)dn+=zn[Zr].dp;for(si=dn/zn.length,Zr=zn.length-1;Zr>=0;Zr--)zn[Zr].dp-=si;lr=!1}else Tr++}An.forEach(Gn)}for(Tr=An.length-1;Tr>=0;Tr--){var Dn=An[Tr];for(Zr=Dn.length-1;Zr>=0;Zr--){var Yn=Dn[Zr],rr=Yn.datum;rr.offset=Yn.dp,rr.del=Yn.del}}}(jr,sr?"xa":"ya",he),z(jr,sr,he._invScaleX,he._invScaleY)),fe&&fe.tagName){var di=c.getComponentMethod("annotations","hasClickToShow")(Q,Un);t(g.select(fe),di?"pointer":"")}!fe||de||!function(Jn,Ar,mr){if(!mr||mr.length!==Jn._hoverdata.length)return!0;for(var lr=mr.length-1;lr>=0;lr--){var ri=mr[lr],si=Jn._hoverdata[lr];if(ri.curveNumber!==si.curveNumber||String(ri.pointNumber)!==String(si.pointNumber)||String(ri.pointNumbers)!==String(si.pointNumbers))return!0}return!1}(Q,0,Mn)||(Mn&&Q.emit("plotly_unhover",{event:oe,points:Mn}),Q.emit("plotly_hover",{event:oe,points:Q._hoverdata,xaxes:ve,yaxes:Te,xvals:Ne,yvals:Be}))}(V,q,ie,H,ee)})},ne.loneHover=function(V,q){var ie=!0;Array.isArray(V)||(ie=!1,V=[V]);var H=q.gd,ee=K(H),Q=ae(H),oe=D(V.map(function(fe){var be=fe._x0||fe.x0||fe.x||0,he=fe._x1||fe.x1||fe.x||0,_e=fe._y0||fe.y0||fe.y||0,Ce=fe._y1||fe.y1||fe.y||0,Ee=fe.eventData;if(Ee){var Ae=Math.min(be,he),ze=Math.max(be,he),ve=Math.min(_e,Ce),Te=Math.max(_e,Ce),Ie=fe.trace;if(c.traceIs(Ie,"gl3d")){var De=H._fullLayout[Ie.scene]._scene.container,Fe=De.offsetLeft,Ue=De.offsetTop;Ae+=Fe,ze+=Fe,ve+=Ue,Te+=Ue}Ee.bbox={x0:Ae+Q,x1:ze+Q,y0:ve+ee,y1:Te+ee},q.inOut_bbox&&q.inOut_bbox.push(Ee.bbox)}else Ee=!1;return{color:fe.color||s.defaultLine,x0:fe.x0||fe.x||0,x1:fe.x1||fe.x||0,y0:fe.y0||fe.y||0,y1:fe.y1||fe.y||0,xLabel:fe.xLabel,yLabel:fe.yLabel,zLabel:fe.zLabel,text:fe.text,name:fe.name,idealAlign:fe.idealAlign,borderColor:fe.borderColor,fontFamily:fe.fontFamily,fontSize:fe.fontSize,fontColor:fe.fontColor,nameLength:fe.nameLength,textAlign:fe.textAlign,trace:fe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:fe.hovertemplate||!1,hovertemplateLabels:fe.hovertemplateLabels||!1,eventData:Ee}}),{gd:H,hovermode:"closest",rotateLabels:!1,bgColor:q.bgColor||s.background,container:g.select(q.container),outerContainer:q.outerContainer||q.container}),le=0,de=0;return oe.sort(function(fe,be){return fe.y0-be.y0}).each(function(fe,be){var he=fe.y0-fe.by/2;fe.offset=he-5<le?le-he+5:0,le=he+fe.by+fe.offset,be===q.anchorIndex&&(de=fe.offset)}).each(function(fe){fe.offset-=de}),z(oe,!1,H._fullLayout._invScaleX,H._fullLayout._invScaleY),ie?oe:oe.node()};var C=/<extra>([\s\S]*)<\/extra>/;function D(V,q){var ie=q.gd,H=ie._fullLayout,ee=q.hovermode,Q=q.rotateLabels,oe=q.bgColor,le=q.container,de=q.outerContainer,fe=q.commonLabelOpts||{};if(0===V.length)return[[]];var be=q.fontFamily||h.HOVERFONT,he=q.fontSize||h.HOVERFONTSIZE,_e=V[0],Ce=_e.xa,Ee=_e.ya,Ae=ee.charAt(0),ze=_e[Ae+"Label"],ve=U(ie,de),Te=ve.top,Ie=ve.width,De=ve.height,Fe=void 0!==ze&&_e.distance<=q.hoverdistance&&("x"===ee||"y"===ee);if(Fe){var Ue,qe,je=!0;for(Ue=0;Ue<V.length;Ue++)if(je&&void 0===V[Ue].zLabel&&(je=!1),qe=V[Ue].hoverinfo||V[Ue].trace.hoverinfo){var rt=Array.isArray(qe)?qe:qe.split("+");if(-1===rt.indexOf("all")&&-1===rt.indexOf(ee)){Fe=!1;break}}je&&(Fe=!1)}var Ne=le.selectAll("g.axistext").data(Fe?[0]:[]);if(Ne.enter().append("g").classed("axistext",!0),Ne.exit().remove(),Ne.each(function(){var ft=g.select(this),bt=y.ensureSingle(ft,"path","",function(Nn){Nn.style({"stroke-width":"1px"})}),Wt=y.ensureSingle(ft,"text","",function(Nn){Nn.attr("data-notex",1)}),Pt=fe.bgcolor||s.defaultLine,Bt=fe.bordercolor||s.contrast(Pt),Pe=s.contrast(Pt),et={family:fe.font.family||be,size:fe.font.size||he,color:fe.font.color||Pe};bt.style({fill:Pt,stroke:Bt}),Wt.text(ze).call(p.font,et).call(a.positionText,0,0).call(a.convertToTspans,ie),ft.attr("transform","");var dt,xt,Rt=U(ie,Wt.node());if("x"===ee){var Yt="top"===Ce.side?"-":"";Wt.attr("text-anchor","middle").call(a.positionText,0,"top"===Ce.side?Te-Rt.bottom-M-I:Te-Rt.top+M+I),xt=Ee._offset+("top"===Ce.side?0:Ee._length);var nn=Rt.width/2+I;(dt=Ce._offset+(_e.x0+_e.x1)/2)<nn?(dt=nn,bt.attr("d","M-"+(nn-M)+",0L-"+(nn-2*M)+","+Yt+M+"H"+(I+Rt.width/2)+"v"+Yt+(2*I+Rt.height)+"H-"+nn+"V"+Yt+M+"Z")):dt>H.width-nn?(dt=H.width-nn,bt.attr("d","M"+(nn-M)+",0L"+nn+","+Yt+M+"v"+Yt+(2*I+Rt.height)+"H-"+nn+"V"+Yt+M+"H"+(nn-2*M)+"Z")):bt.attr("d","M0,0L"+M+","+Yt+M+"H"+(I+Rt.width/2)+"v"+Yt+(2*I+Rt.height)+"H-"+(I+Rt.width/2)+"V"+Yt+M+"H-"+M+"Z")}else{var Kt,Mn,Un;"right"===Ee.side?(Kt="start",Mn=1,Un="",dt=Ce._offset+Ce._length):(Kt="end",Mn=-1,Un="-",dt=Ce._offset),xt=Ee._offset+(_e.y0+_e.y1)/2,Wt.attr("text-anchor",Kt),bt.attr("d","M0,0L"+Un+M+","+M+"V"+(I+Rt.height/2)+"h"+Un+(2*I+Rt.width)+"V-"+(I+Rt.height/2)+"H"+Un+M+"V-"+M+"Z");var Tn,un=Rt.height/2,an=Te-Rt.top-un,fn="clip"+H._uid+"commonlabel"+Ee._id;if(dt<Rt.width+2*I+M){Tn="M-"+(M+I)+"-"+un+"h-"+(Rt.width-I)+"V"+un+"h"+(Rt.width-I)+"Z";var pn=Rt.width-dt+I;a.positionText(Wt,pn,an),"end"===Kt&&Wt.selectAll("tspan").each(function(){var Nn=g.select(this),Kn=p.tester.append("text").text(Nn.text()).call(p.font,et),Bn=U(ie,Kn.node());Math.round(Bn.width)<Math.round(Rt.width)&&Nn.attr("x",pn-Bn.width),Kn.remove()})}else a.positionText(Wt,Mn*(I+M),an),Tn=null;var Sn=H._topclips.selectAll("#"+fn).data(Tn?[0]:[]);Sn.enter().append("clipPath").attr("id",fn).append("path"),Sn.exit().remove(),Sn.select("path").attr("d",Tn),p.setClipUrl(Wt,Tn?fn:null,ie)}ft.attr("transform",e(dt,xt))}),l.isUnifiedHover(ee)){le.selectAll("g.hovertext").remove();var Be=V.filter(function(ft){return"none"!==ft.hoverinfo});if(0===Be.length)return;var We=H.hoverlabel,Ye=We.font,mt={font:Ye};d({showlegend:!0,legend:{title:{text:ze,font:Ye},font:Ye,bgcolor:We.bgcolor,bordercolor:We.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:H.legend?H.legend.traceorder:void 0,orientation:"v"}},mt,ie._fullData);var Tt=mt.legend;Tt.entries=[];for(var It=0;It<Be.length;It++){var Ct=Be[It];if("none"!==Ct.hoverinfo){var ct=B(Ct,!0,ee,H,ze),at=ct[0],St=ct[1];Ct.name=St,Ct.text=""!==St?St+" : "+at:at;var Xt=Ct.cd[Ct.index];Xt&&(Xt.mc&&(Ct.mc=Xt.mc),Xt.mcc&&(Ct.mc=Xt.mcc),Xt.mlc&&(Ct.mlc=Xt.mlc),Xt.mlcc&&(Ct.mlc=Xt.mlcc),Xt.mlw&&(Ct.mlw=Xt.mlw),Xt.mrc&&(Ct.mrc=Xt.mrc),Xt.dir&&(Ct.dir=Xt.dir)),Ct._distinct=!0,Tt.entries.push([Ct])}}Tt.entries.sort(function(ft,bt){return ft[0].trace.index-bt[0].trace.index}),Tt.layer=le,Tt._inHover=!0,Tt._groupTitleFont=We.grouptitlefont,o(ie,Tt);var tn,hn,cn,yn,en=le.select("g.legend"),Xe=U(ie,en.node()),tt=Xe.width+2*I,ye=Xe.height+2*I,ke=Be[0],Ve=(ke.x0+ke.x1)/2,Je=(ke.y0+ke.y1)/2,nt=!(c.traceIs(ke.trace,"bar-like")||c.traceIs(ke.trace,"box-violin"));"y"===Ae?nt?(hn=Je-I,tn=Je+I):(hn=Math.min.apply(null,Be.map(function(ft){return Math.min(ft.y0,ft.y1)})),tn=Math.max.apply(null,Be.map(function(ft){return Math.max(ft.y0,ft.y1)}))):hn=tn=y.mean(Be.map(function(ft){return(ft.y0+ft.y1)/2}))-ye/2,"x"===Ae?nt?(cn=Ve+I,yn=Ve-I):(cn=Math.max.apply(null,Be.map(function(ft){return Math.max(ft.x0,ft.x1)})),yn=Math.min.apply(null,Be.map(function(ft){return Math.min(ft.x0,ft.x1)}))):cn=yn=y.mean(Be.map(function(ft){return(ft.x0+ft.x1)/2}))-tt/2;var Ke,vt,gt=Ce._offset,Ot=Ee._offset;return yn+=gt-tt,hn+=Ot-ye,Ke=(cn+=gt)+tt<Ie&&cn>=0?cn:yn+tt<Ie&&yn>=0?yn:gt+tt<Ie?gt:cn-Ve<Ve-yn+tt?Ie-tt:0,vt=(tn+=Ot)+ye<De&&tn>=0?tn:hn+ye<De&&hn>=0?hn:Ot+ye<De?Ot:tn-Je<Je-hn+ye?De-ye:0,en.attr("transform",e((Ke+=I)-1,(vt+=I)-1)),en}var Vt=le.selectAll("g.hovertext").data(V,function(ft){return O(ft)});return Vt.enter().append("g").classed("hovertext",!0).each(function(){var ft=g.select(this);ft.append("rect").call(s.fill,s.addOpacity(oe,.8)),ft.append("text").classed("name",!0),ft.append("path").style("stroke-width","1px"),ft.append("text").classed("nums",!0).call(p.font,be,he)}),Vt.exit().remove(),Vt.each(function(ft){var bt=g.select(this).attr("transform",""),Wt=ft.color;Array.isArray(Wt)&&(Wt=Wt[ft.eventData[0].pointNumber]);var Pt=ft.bgcolor||Wt,Bt=s.combine(s.opacity(Pt)?Pt:s.defaultLine,oe),Pe=s.combine(s.opacity(Wt)?Wt:s.defaultLine,oe),et=ft.borderColor||s.contrast(Bt),dt=B(ft,Fe,ee,H,ze,bt),xt=dt[0],Rt=dt[1],Yt=bt.select("text.nums").call(p.font,ft.fontFamily||be,ft.fontSize||he,ft.fontColor||et).text(xt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,ie),nn=bt.select("text.name"),Kt=0,Mn=0;if(Rt&&Rt!==xt){nn.call(p.font,ft.fontFamily||be,ft.fontSize||he,Pe).text(Rt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,ie);var Un=U(ie,nn.node());Kt=Un.width+2*I,Mn=Un.height+2*I}else nn.remove(),bt.select("rect").remove();bt.select("path").style({fill:Bt,stroke:et});var Tn=ft.xa._offset+(ft.x0+ft.x1)/2,un=ft.ya._offset+(ft.y0+ft.y1)/2,an=Math.abs(ft.x1-ft.x0),fn=Math.abs(ft.y1-ft.y0),pn=U(ie,Yt.node()),Sn=pn.width/H._invScaleX,Nn=pn.height/H._invScaleY;ft.ty0=(Te-pn.top)/H._invScaleY,ft.bx=Sn+2*I,ft.by=Math.max(Nn+2*I,Mn),ft.anchor="start",ft.txwidth=Sn,ft.tx2width=Kt,ft.offset=0;var Kn,Bn,cr=(Sn+M+I+Kt)*H._invScaleX;if(Q)ft.pos=Tn,Kn=un+fn/2+cr<=De,Bn=un-fn/2-cr>=0,"top"!==ft.idealAlign&&Kn||!Bn?Kn?(un+=fn/2,ft.anchor="start"):ft.anchor="middle":(un-=fn/2,ft.anchor="end");else if(ft.pos=un,Kn=Tn+an/2+cr<=Ie,Bn=Tn-an/2-cr>=0,"left"!==ft.idealAlign&&Kn||!Bn)if(Kn)Tn+=an/2,ft.anchor="start";else{ft.anchor="middle";var Lr=cr/2,Qn=Tn+Lr-Ie,qr=Tn-Lr;Qn>0&&(Tn-=Qn),qr<0&&(Tn+=-qr)}else Tn-=an/2,ft.anchor="end";Yt.attr("text-anchor",ft.anchor),Kt&&nn.attr("text-anchor",ft.anchor),bt.attr("transform",e(Tn,un)+(Q?r(x):""))}),Vt}function B(V,q,ie,H,ee,Q){var oe="",le="";void 0!==V.nameOverride&&(V.name=V.nameOverride),V.name&&(V.trace._meta&&(V.name=y.templateString(V.name,V.trace._meta)),oe=te(V.name,V.nameLength));var de=ie.charAt(0);void 0!==V.zLabel?(void 0!==V.xLabel&&(le+="x: "+V.xLabel+"<br>"),void 0!==V.yLabel&&(le+="y: "+V.yLabel+"<br>"),"choropleth"!==V.trace.type&&"choroplethmapbox"!==V.trace.type&&(le+=(le?"z: ":"")+V.zLabel)):q&&V[de+"Label"]===ee?le=V[("x"===de?"y":"x")+"Label"]||"":void 0===V.xLabel?void 0!==V.yLabel&&"scattercarpet"!==V.trace.type&&(le=V.yLabel):le=void 0===V.yLabel?V.xLabel:"("+V.xLabel+", "+V.yLabel+")",!V.text&&0!==V.text||Array.isArray(V.text)||(le+=(le?"<br>":"")+V.text),void 0!==V.extraText&&(le+=(le?"<br>":"")+V.extraText),Q&&""===le&&!V.hovertemplate&&(""===oe&&Q.remove(),le=oe);var be=V.hovertemplate||!1;if(be){var he=V.hovertemplateLabels||V;V[de+"Label"]!==ee&&(he[de+"other"]=he[de+"Val"],he[de+"otherLabel"]=he[de+"Label"]),le=(le=y.hovertemplateString(be,he,H._d3locale,V.eventData[0]||{},V.trace._meta)).replace(C,function(_e,Ce){return oe=te(Ce,V.nameLength),""})}return[le,oe]}function z(V,q,ie,H){var ee=function(oe){return oe*ie},Q=function(oe){return oe*H};V.each(function(oe){var le=g.select(this);if(oe.del)return le.remove();var de=le.select("text.nums"),fe=oe.anchor,be="end"===fe?-1:1,he={start:1,end:-1,middle:0}[fe],_e=he*(M+I),Ce=_e+he*(oe.txwidth+I),Ee=0,Ae=oe.offset,ze="middle"===fe;ze&&(_e-=oe.tx2width/2,Ce+=oe.txwidth/2+I),q&&(Ae*=-w,Ee=oe.offset*_),le.select("path").attr("d",ze?"M-"+ee(oe.bx/2+oe.tx2width/2)+","+Q(Ae-oe.by/2)+"h"+ee(oe.bx)+"v"+Q(oe.by)+"h-"+ee(oe.bx)+"Z":"M0,0L"+ee(be*M+Ee)+","+Q(M+Ae)+"v"+Q(oe.by/2-M)+"h"+ee(be*oe.bx)+"v-"+Q(oe.by)+"H"+ee(be*M+Ee)+"V"+Q(Ae-M)+"Z");var ve=Ee+_e,Te=Ae+oe.ty0-oe.by/2+I,Ie=oe.textAlign||"auto";"auto"!==Ie&&("left"===Ie&&"start"!==fe?(de.attr("text-anchor","start"),ve=ze?-oe.bx/2-oe.tx2width/2+I:-oe.bx-I):"right"===Ie&&"end"!==fe&&(de.attr("text-anchor","end"),ve=ze?oe.bx/2-oe.tx2width/2-I:oe.bx+I)),de.call(a.positionText,ee(ve),Q(Te)),oe.tx2width&&(le.select("text.name").call(a.positionText,ee(Ce+he*I+Ee),Q(Ae+oe.ty0-oe.by/2+I)),le.select("rect").call(p.setRect,ee(Ce+(he-1)*oe.tx2width/2+Ee),Q(Ae-oe.by/2-1),ee(oe.tx2width),Q(oe.by+2)))})}function Y(V,q){var ie=V.index,H=V.trace||{},ee=V.cd[0],Q=V.cd[ie]||{};function oe(_e){return _e||m(_e)&&0===_e}var le=Array.isArray(ie)?function(_e,Ce){var Ee=y.castOption(ee,ie,_e);return oe(Ee)?Ee:y.extractOption({},H,"",Ce)}:function(_e,Ce){return y.extractOption(Q,H,_e,Ce)};function de(_e,Ce,Ee){var Ae=le(Ce,Ee);oe(Ae)&&(V[_e]=Ae)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),V.posref="y"===q||"closest"===q&&"h"===H.orientation?V.xa._offset+(V.x0+V.x1)/2:V.ya._offset+(V.y0+V.y1)/2,V.x0=y.constrain(V.x0,0,V.xa._length),V.x1=y.constrain(V.x1,0,V.xa._length),V.y0=y.constrain(V.y0,0,V.ya._length),V.y1=y.constrain(V.y1,0,V.ya._length),void 0!==V.xLabelVal&&(V.xLabel="xLabel"in V?V.xLabel:f.hoverLabelText(V.xa,V.xLabelVal,H.xhoverformat),V.xVal=V.xa.c2d(V.xLabelVal)),void 0!==V.yLabelVal&&(V.yLabel="yLabel"in V?V.yLabel:f.hoverLabelText(V.ya,V.yLabelVal,H.yhoverformat),V.yVal=V.ya.c2d(V.yLabelVal)),void 0!==V.zLabelVal&&void 0===V.zLabel&&(V.zLabel=String(V.zLabelVal)),!(isNaN(V.xerr)||"log"===V.xa.type&&V.xerr<=0)){var fe=f.tickText(V.xa,V.xa.c2l(V.xerr),"hover").text;V.xLabel+=void 0!==V.xerrneg?" +"+fe+" / -"+f.tickText(V.xa,V.xa.c2l(V.xerrneg),"hover").text:" \xb1 "+fe,"x"===q&&(V.distance+=1)}if(!(isNaN(V.yerr)||"log"===V.ya.type&&V.yerr<=0)){var be=f.tickText(V.ya,V.ya.c2l(V.yerr),"hover").text;V.yLabel+=void 0!==V.yerrneg?" +"+be+" / -"+f.tickText(V.ya,V.ya.c2l(V.yerrneg),"hover").text:" \xb1 "+be,"y"===q&&(V.distance+=1)}var he=V.hoverinfo||V.trace.hoverinfo;return he&&"all"!==he&&(-1===(he=Array.isArray(he)?he:he.split("+")).indexOf("x")&&(V.xLabel=void 0),-1===he.indexOf("y")&&(V.yLabel=void 0),-1===he.indexOf("z")&&(V.zLabel=void 0),-1===he.indexOf("text")&&(V.text=void 0),-1===he.indexOf("name")&&(V.name=void 0)),V}function G(V,q,ie){var H,ee,Q=ie.container,oe=ie.fullLayout,le=oe._size,de=ie.event,fe=!!q.hLinePoint,be=!!q.vLinePoint;if(Q.selectAll(".spikeline").remove(),be||fe){var he=s.combine(oe.plot_bgcolor,oe.paper_bgcolor);if(fe){var _e,Ce,Ee=q.hLinePoint;H=Ee&&Ee.xa,"cursor"===(ee=Ee&&Ee.ya).spikesnap?(_e=de.pointerX,Ce=de.pointerY):(_e=H._offset+Ee.x,Ce=ee._offset+Ee.y);var Ae,ze,ve=b.readability(Ee.color,he)<1.5?s.contrast(he):Ee.color,Te=ee.spikemode,Ie=ee.spikethickness,De=ee.spikecolor||ve,Fe=f.getPxPosition(V,ee);if(-1!==Te.indexOf("toaxis")||-1!==Te.indexOf("across")){if(-1!==Te.indexOf("toaxis")&&(Ae=Fe,ze=_e),-1!==Te.indexOf("across")){var Ue=ee._counterDomainMin,qe=ee._counterDomainMax;"free"===ee.anchor&&(Ue=Math.min(Ue,ee.position),qe=Math.max(qe,ee.position)),Ae=le.l+Ue*le.w,ze=le.l+qe*le.w}Q.insert("line",":first-child").attr({x1:Ae,x2:ze,y1:Ce,y2:Ce,"stroke-width":Ie,stroke:De,"stroke-dasharray":p.dashStyle(ee.spikedash,Ie)}).classed("spikeline",!0).classed("crisp",!0),Q.insert("line",":first-child").attr({x1:Ae,x2:ze,y1:Ce,y2:Ce,"stroke-width":Ie+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}-1!==Te.indexOf("marker")&&Q.insert("circle",":first-child").attr({cx:Fe+("right"!==ee.side?Ie:-Ie),cy:Ce,r:Ie,fill:De}).classed("spikeline",!0)}if(be){var je,rt,Ne=q.vLinePoint;ee=Ne&&Ne.ya,"cursor"===(H=Ne&&Ne.xa).spikesnap?(je=de.pointerX,rt=de.pointerY):(je=H._offset+Ne.x,rt=ee._offset+Ne.y);var Be,We,Ye=b.readability(Ne.color,he)<1.5?s.contrast(he):Ne.color,lt=H.spikemode,mt=H.spikethickness,Tt=H.spikecolor||Ye,It=f.getPxPosition(V,H);if(-1!==lt.indexOf("toaxis")||-1!==lt.indexOf("across")){if(-1!==lt.indexOf("toaxis")&&(Be=It,We=rt),-1!==lt.indexOf("across")){var Ct=H._counterDomainMin,ct=H._counterDomainMax;"free"===H.anchor&&(Ct=Math.min(Ct,H.position),ct=Math.max(ct,H.position)),Be=le.t+(1-ct)*le.h,We=le.t+(1-Ct)*le.h}Q.insert("line",":first-child").attr({x1:je,x2:je,y1:Be,y2:We,"stroke-width":mt,stroke:Tt,"stroke-dasharray":p.dashStyle(H.spikedash,mt)}).classed("spikeline",!0).classed("crisp",!0),Q.insert("line",":first-child").attr({x1:je,x2:je,y1:Be,y2:We,"stroke-width":mt+2,stroke:he}).classed("spikeline",!0).classed("crisp",!0)}-1!==lt.indexOf("marker")&&Q.insert("circle",":first-child").attr({cx:je,cy:It-("top"!==H.side?mt:-mt),r:mt,fill:Tt}).classed("spikeline",!0)}}}function J(V,q){return!q||q.vLinePoint!==V._spikepoints.vLinePoint||q.hLinePoint!==V._spikepoints.hLinePoint}function te(V,q){return a.plainText(V||"",{len:q,allowedTags:["br","sub","sup","b","i","em"]})}function X(V,q,ie){var H=q[V+"a"],ee=q[V+"Val"],Q=q.cd[0];if("category"===H.type)ee=H._categoriesMap[ee];else if("date"===H.type){var oe=q.trace[V+"periodalignment"];if(oe){var le=q.cd[q.index],de=le[V+"Start"];void 0===de&&(de=le[V]);var fe=le[V+"End"];void 0===fe&&(fe=le[V]);var be=fe-de;"end"===oe?ee+=be:"middle"===oe&&(ee+=be/2)}ee=H.d2c(ee)}return Q&&Q.t&&Q.t.posLetter===H._id&&("group"!==ie.boxmode&&"group"!==ie.violinmode||(ee+=Q.t.dPos)),ee}function K(V){return V.offsetTop+V.clientTop}function ae(V){return V.offsetLeft+V.clientLeft}function U(V,q){var ie=V._fullLayout,H=q.getBoundingClientRect(),ee=H.x,Q=H.y,oe=ee+H.width,le=Q+H.height,de=y.apply3DTransform(ie._invTransform)(ee,Q),fe=y.apply3DTransform(ie._invTransform)(oe,le),be=de[0],he=de[1],_e=fe[0],Ce=fe[1];return{x:be,y:he,width:_e-be,height:Ce-he,top:Math.min(he,Ce),left:Math.min(be,_e),right:Math.max(be,_e),bottom:Math.max(he,Ce)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../color"),b=v("./helpers").isUnifiedHover;re.exports=function(y,e,r,n){n=n||{};var a=e.legend;function t(p){n.font[p]||(n.font[p]=a?e.legend.font[p]:e.font[p])}e&&b(e.hovermode)&&(n.font||(n.font={}),t("size"),t("family"),t("color"),a?(n.bgcolor||(n.bgcolor=m.combine(e.legend.bgcolor,e.paper_bgcolor)),n.bordercolor||(n.bordercolor=e.legend.bordercolor)):n.bgcolor||(n.bgcolor=e.paper_bgcolor)),r("hoverlabel.bgcolor",n.bgcolor),r("hoverlabel.bordercolor",n.bordercolor),r("hoverlabel.namelength",n.namelength),g.coerceFont(r,"hoverlabel.font",n.font),r("hoverlabel.align",n.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y){function e(r,n){return void 0!==y[r]?y[r]:g.coerce(b,y,m,r,n)}return e("clickmode"),e("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../dragelement"),y=v("./helpers"),e=v("./layout_attributes"),r=v("./hover");re.exports={moduleType:"component",name:"fx",constants:v("./constants"),schema:{layout:e},attributes:v("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:v("./layout_global_defaults"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),getDistanceFunction:y.getDistanceFunction,getClosest:y.getClosest,inbox:y.inbox,quadrature:y.quadrature,appendArrayPointValue:y.appendArrayPointValue,castHoverOption:function(n,a,t){return m.castOption(n,a,"hoverlabel."+t)},castHoverinfo:function(n,a,t){return m.castOption(n,t,"hoverinfo",function(p){return m.coerceHoverinfo({hoverinfo:p},{_module:n._module},a)})},hover:r.hover,unhover:b.unhover,loneHover:r.loneHover,loneUnhover:function(n){var a=m.isD3Selection(n)?n:g.select(n);a.selectAll("g.hovertext").remove(),a.selectAll(".spikeline").remove()},click:v("./click")}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(v,re,ne){"use strict";var g=v("./constants"),m=v("../../plots/font_attributes"),b=m({editType:"none"});b.family.dflt=g.HOVERFONT,b.size.dflt=g.HOVERFONTSIZE,re.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,grouptitlefont:m({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes"),b=v("./hovermode_defaults"),y=v("./hoverlabel_defaults");re.exports=function(e,r){function n(s,i){return g.coerce(e,r,m,s,i)}b(e,r)&&(n("hoverdistance"),n("spikedistance")),"select"===n("dragmode")&&n("selectdirection");var a=r._has("mapbox"),t=r._has("geo"),p=r._basePlotModules.length;"zoom"===r.dragmode&&((a||t)&&1===p||a&&t&&2===p)&&(r.dragmode="pan"),y(e,r,n),g.coerceFont(n,"hoverlabel.grouptitlefont",r.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./hoverlabel_defaults"),b=v("./layout_attributes");re.exports=function(y,e){m(y,e,function(r,n){return g.coerce(y,e,b,r,n)})}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../lib/regex").counter,b=v("../../plots/domain").attributes,y=v("../../plots/cartesian/constants").idRegex,e=v("../../plot_api/plot_template"),r={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[m("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[y.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(p,s,i){var f=s[i+"axes"],c=Object.keys((p._splomAxes||{})[i]||{});return Array.isArray(f)?f:c.length?c:void 0}function a(p,s,i,f,c,l){var h=s(p+"gap",i),d=s("domain."+p);s(p+"side",f);for(var o=new Array(c),x=d[0],u=(d[1]-x)/(c-h),T=u*(1-h),_=0;_<c;_++){var w=x+u*_;o[l?c-1-_:_]=[w,w+T]}return o}function t(p,s,i,f,c){var l,h=new Array(i);function d(o,x){-1!==s.indexOf(x)&&void 0===f[x]?(h[o]=x,f[x]=o):h[o]=""}if(Array.isArray(p))for(l=0;l<i;l++)d(l,p[l]);else for(d(0,c),l=1;l<i;l++)d(l,c+(l+1));return h}re.exports={moduleType:"component",name:"grid",schema:{layout:{grid:r}},layoutAttributes:r,sizeDefaults:function(p,s){var i=p.grid||{},f=n(s,i,"x"),c=n(s,i,"y");if(p.grid||f||c){var l,h,d=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),o=Array.isArray(f),x=Array.isArray(c),u=o&&f!==i.xaxes&&x&&c!==i.yaxes;d?(l=i.subplots.length,h=i.subplots[0].length):(x&&(l=c.length),o&&(h=f.length));var T=e.newContainer(s,"grid"),_=C("rows",l),w=C("columns",h);if(_*w>1){!d&&!o&&!x&&"independent"===C("pattern")&&(d=!0),T._hasSubplotGrid=d;var M,I,S="top to bottom"===C("roworder"),O=d?.3:.1;u&&s._splomGridDflt&&(M=s._splomGridDflt.xside,I=s._splomGridDflt.yside),T._domains={x:a("x",C,d?.2:.1,M,w),y:a("y",C,O,I,_,S)}}else delete s.grid}function C(D,B){return g.coerce(i,T,r,D,B)}},contentDefaults:function(p,s){var i=s.grid;if(i&&i._domains){var f,c,l,h,d,o,x,u=p.grid||{},T=s._subplots,_=i._hasSubplotGrid,w=i.rows,M=i.columns,I="independent"===i.pattern,S=i._axisMap={};if(_){var R=u.subplots||[];o=i.subplots=new Array(w);var O=1;for(f=0;f<w;f++){var C=o[f]=new Array(M),D=R[f]||[];for(c=0;c<M;c++)if(I?(d=1===O?"xy":"x"+O+"y"+O,O++):d=D[c],C[c]="",-1!==T.cartesian.indexOf(d)){if(x=d.indexOf("y"),l=d.slice(0,x),h=d.slice(x),void 0!==S[l]&&S[l]!==c||void 0!==S[h]&&S[h]!==f)continue;C[c]=d,S[l]=c,S[h]=f}}}else{var B=n(s,u,"x"),z=n(s,u,"y");i.xaxes=t(B,T.xaxis,M,S,"x"),i.yaxes=t(z,T.yaxis,w,S,"y")}var Y=i._anchors={},G="top to bottom"===i.roworder;for(var J in S){var te,X,K,ae=J.charAt(0),U=i[ae+"side"];if(U.length<8)Y[J]="free";else if("x"===ae){if("t"===U.charAt(0)===G?(te=0,X=1,K=w):(te=w-1,X=-1,K=-1),_){var V=S[J];for(f=te;f!==K;f+=X)if((d=o[f][V])&&(x=d.indexOf("y"),d.slice(0,x)===J)){Y[J]=d.slice(x);break}}else for(f=te;f!==K;f+=X)if(-1!==T.cartesian.indexOf(J+(h=i.yaxes[f]))){Y[J]=h;break}}else if("l"===U.charAt(0)?(te=0,X=1,K=M):(te=M-1,X=-1,K=-1),_){var q=S[J];for(f=te;f!==K;f+=X)if((d=o[q][f])&&(x=d.indexOf("y"),d.slice(x)===J)){Y[J]=d.slice(0,x);break}}else for(f=te;f!==K;f+=X)if(-1!==T.cartesian.indexOf((l=i.xaxes[f])+J)){Y[J]=l;break}}}}}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/constants"),m=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),re.exports=m("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",g.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",g.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib/to_log_range");re.exports=function(b,y,e,r){y=y||{};var n="log"===e&&"linear"===y.type;if(n||"linear"===e&&"log"===y.type)for(var t,p,s=b._fullLayout.images,i=y._id.charAt(0),f=0;f<s.length;f++)if(p="images["+f+"].",(t=s[f])[i+"ref"]===y._id){var c=t[i],l=t["size"+i],h=null,d=null;if(n){h=m(c,y.range);var o=l/Math.pow(10,h)/2;d=2*Math.log(o+Math.sqrt(1+o*o))/Math.LN10}else d=(h=Math.pow(10,c))*(Math.pow(10,l/2)-Math.pow(10,-l/2));g(h)?g(d)||(d=null):(h=null,d=null),r(p+i,h),r(p+"size"+i,d)}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./attributes");function e(r,n,a){function t(h,d){return g.coerce(r,n,y,h,d)}var p=t("source");if(!t("visible",!!p))return n;t("layer"),t("xanchor"),t("yanchor"),t("sizex"),t("sizey"),t("sizing"),t("opacity");for(var s={_fullLayout:a},i=["x","y"],f=0;f<2;f++){var c=i[f],l=m.coerceRef(r,n,s,c,"paper",void 0);"paper"!==l&&m.getFromId(s,l)._imgIndices.push(n._index),m.coercePosition(n,s,t,l,c,0)}return n}re.exports=function(r,n){b(r,n,{name:"images",handleItemDefaults:e})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../drawing"),b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/axis_ids"),e=v("../../constants/xmlns_namespaces");re.exports=function(r){var n,a,t=r._fullLayout,p=[],s={},i=[];for(a=0;a<t.images.length;a++){var f=t.images[a];if(f.visible)if("below"===f.layer&&"paper"!==f.xref&&"paper"!==f.yref){n=y.ref2id(f.xref)+y.ref2id(f.yref);var c=t._plots[n];if(!c){i.push(f);continue}c.mainplot&&(n=c.mainplot.id),s[n]||(s[n]=[]),s[n].push(f)}else"above"===f.layer?p.push(f):i.push(f)}var l={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},h={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function d(M){var I=g.select(this);if(this._imgSrc!==M.source)if(I.attr("xmlns",e.svg),M.source&&"data:"===M.source.slice(0,5))I.attr("xlink:href",M.source),this._imgSrc=M.source;else{var S=new Promise(function(R){var O=new Image;function C(){I.remove(),R()}this.img=O,O.setAttribute("crossOrigin","anonymous"),O.onerror=C,O.onload=function(){var D=document.createElement("canvas");D.width=this.width,D.height=this.height,D.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var B=D.toDataURL("image/png");I.attr("xlink:href",B),R()},I.on("error",C),O.src=M.source,this._imgSrc=M.source}.bind(this));r._promises.push(S)}}function o(M){var I,S,R=g.select(this),O=b.getFromId(r,M.xref),C=b.getFromId(r,M.yref),D="domain"===b.getRefType(M.xref),B="domain"===b.getRefType(M.yref),z=t._size;I=void 0!==O?"string"==typeof M.xref&&D?O._length*M.sizex:Math.abs(O.l2p(M.sizex)-O.l2p(0)):M.sizex*z.w,S=void 0!==C?"string"==typeof M.yref&&B?C._length*M.sizey:Math.abs(C.l2p(M.sizey)-C.l2p(0)):M.sizey*z.h;var Y,G,J=I*l[M.xanchor].offset,te=S*h[M.yanchor].offset,X=l[M.xanchor].sizing+h[M.yanchor].sizing;switch(Y=void 0!==O?"string"==typeof M.xref&&D?O._length*M.x+O._offset:O.r2p(M.x)+O._offset:M.x*z.w+z.l,Y+=J,G=void 0!==C?"string"==typeof M.yref&&B?C._length*(1-M.y)+C._offset:C.r2p(M.y)+C._offset:z.h-M.y*z.h+z.t,G+=te,M.sizing){case"fill":X+=" slice";break;case"stretch":X="none"}R.attr({x:Y,y:G,width:I,height:S,preserveAspectRatio:X,opacity:M.opacity});var K=(O&&"domain"!==b.getRefType(M.xref)?O._id:"")+(C&&"domain"!==b.getRefType(M.yref)?C._id:"");m.setClipUrl(R,K?"clip"+t._uid+K:null,r)}var x=t._imageLowerLayer.selectAll("image").data(i),u=t._imageUpperLayer.selectAll("image").data(p);x.enter().append("image"),u.enter().append("image"),x.exit().remove(),u.exit().remove(),x.each(function(M){d.bind(this)(M),o.bind(this)(M)}),u.each(function(M){d.bind(this)(M),o.bind(this)(M)});var T=Object.keys(t._plots);for(a=0;a<T.length;a++){var _=t._plots[n=T[a]];if(_.imagelayer){var w=_.imagelayer.selectAll("image").data(s[n]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(M){d.bind(this)(M),o.bind(this)(M)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(v,re,ne){"use strict";re.exports={moduleType:"component",name:"images",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("images"),draw:v("./draw"),convertCoords:v("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("../color/attributes");re.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:g({editType:"legend"}),grouptitlefont:g({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:g({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(v,re,ne){"use strict";re.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../../plot_api/plot_template"),y=v("../../plots/attributes"),e=v("./attributes"),r=v("../../plots/layout_attributes"),n=v("./helpers");re.exports=function(a,t,p){var s,i=a.legend||{},f=b.newContainer(t,"legend");function c(C,D){return m.coerce(i,f,e,C,D)}for(var l=function(C,D){return m.coerce(s._input,s,y,C,D)},h=t.font||{},d=m.coerceFont(c,"grouptitlefont",m.extendFlat({},h,{size:Math.round(1.1*h.size)})),o=0,x=!1,u="normal",T=0;T<p.length;T++)(s=p[T]).visible&&((s.showlegend||s._dfltShowLegend&&!(s._module&&s._module.attributes&&s._module.attributes.showlegend&&!1===s._module.attributes.showlegend.dflt))&&(o++,s.showlegend&&(x=!0,(g.traceIs(s,"pie-like")||!0===s._input.showlegend)&&o++),m.coerceFont(l,"legendgrouptitle.font",d)),(g.traceIs(s,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(s.fill))&&(u=n.isGrouped({traceorder:u})?"grouped+reversed":"reversed"),void 0!==s.legendgroup&&""!==s.legendgroup&&(u=n.isReversed({traceorder:u})?"reversed+grouped":"grouped"));var _=m.coerce(a,t,r,"showlegend",x&&o>1);if(!1===_&&(t.legend=void 0),(!1!==_||i.uirevision)&&(c("uirevision",t.uirevision),!1!==_)){c("bgcolor",t.paper_bgcolor),c("bordercolor"),c("borderwidth");var w,M,I,S=m.coerceFont(c,"font",t.font),R="h"===c("orientation");if(R?(w=0,g.getComponentMethod("rangeslider","isVisible")(a.xaxis)?(M=1.1,I="bottom"):(M=-.1,I="top")):(w=1.02,M=1,I="auto"),c("traceorder",u),n.isGrouped(t.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemwidth"),c("itemclick"),c("itemdoubleclick"),c("groupclick"),c("x",w),c("xanchor"),c("y",M),c("yanchor",I),c("valign"),m.noneOrAll(i,f,["x","y"]),c("title.text")){c("title.side",R?"left":"top");var O=m.extendFlat({},S,{size:m.bigFont(S.size)});m.coerceFont(c,"title.font",O)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../lib/events"),r=v("../dragelement"),n=v("../drawing"),a=v("../color"),t=v("../../lib/svg_text_utils"),p=v("./handle_click"),s=v("./constants"),i=v("../../constants/alignment"),f=i.LINE_SPACING,c=i.FROM_TL,l=i.FROM_BR,h=v("./get_legend_data"),d=v("./style"),o=v("./helpers");function x(S,R,O,C,D){var B=O.data()[0][0].trace,z={event:D,node:O.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:S.data,layout:S.layout,frames:S._transitionData._frames,config:S._context,fullData:S._fullData,fullLayout:S._fullLayout};B._group&&(z.group=B._group),y.traceIs(B,"pie-like")&&(z.label=O.datum()[0].label),!1!==e.triggerHandler(S,"plotly_legendclick",z)&&(1===C?R._clickTimeout=setTimeout(function(){S._fullLayout&&p(O,S,C)},S._context.doubleClickDelay):2===C&&(R._clickTimeout&&clearTimeout(R._clickTimeout),S._legendMouseDownTime=0,!1!==e.triggerHandler(S,"plotly_legenddoubleclick",z)&&p(O,S,C)))}function u(S,R,O){var C,D,B=S.data()[0][0],z=B.trace,Y=y.traceIs(z,"pie-like"),G=!O._inHover&&R._context.edits.legendText&&!Y,J=O._maxNameLength;B.groupTitle?(C=B.groupTitle.text,D=B.groupTitle.font):(D=O.font,O.entries?C=B.text:(C=Y?B.label:z.name,z._meta&&(C=m.templateString(C,z._meta))));var te=m.ensureSingle(S,"text","legendtext");te.attr("text-anchor","start").call(n.font,D).text(G?T(C,J):C),t.positionText(te,O.itemwidth+2*s.itemGap,0),G?te.call(t.makeEditable,{gd:R,text:C}).call(w,S,R,O).on("edit",function(K){this.text(T(K,J)).call(w,S,R,O);var ae=B.trace._fullInput||{},U={};if(y.hasTransform(ae,"groupby")){var V=y.getTransformIndices(ae,"groupby"),ie=m.keyedContainer(ae,"transforms["+V[V.length-1]+"].styles","target","value.name");ie.set(B.trace._group,K),U=ie.constructUpdate()}else U.name=K;return y.call("_guiRestyle",R,U,z.index)}):w(te,S,R,O)}function T(S,R){var O=Math.max(4,R);if(S&&S.trim().length>=O/2)return S;for(var C=O-(S=S||"").length;C>0;C--)S+=" ";return S}function _(S,R){var O,C=R._context.doubleClickDelay,D=1,B=m.ensureSingle(S,"rect","legendtoggle",function(z){R._context.staticPlot||z.style("cursor","pointer").attr("pointer-events","all"),z.call(a.fill,"rgba(0,0,0,0)")});R._context.staticPlot||(B.on("mousedown",function(){(O=(new Date).getTime())-R._legendMouseDownTime<C?D+=1:(D=1,R._legendMouseDownTime=O)}),B.on("mouseup",function(){if(!R._dragged&&!R._editing){var z=R._fullLayout.legend;(new Date).getTime()-R._legendMouseDownTime>C&&(D=Math.max(D-1,1)),x(R,z,S,D,g.event)}}))}function w(S,R,O,C,D){C._inHover&&S.attr("data-notex",!0),t.convertToTspans(S,O,function(){!function(B,z,Y,G){var J=B.data()[0][0];if(Y._inHover||!J||J.trace.showlegend){var te=B.select("g[class*=math-group]"),X=te.node();Y||(Y=z._fullLayout.legend);var U,V,ae=Y.borderwidth,q=(1===G?Y.title.font:J.groupTitle?J.groupTitle.font:Y.font).size*f;if(X){var ie=n.bBox(X);U=ie.height,V=ie.width,1===G?n.setTranslate(te,ae,ae+.75*U):n.setTranslate(te,0,.25*U)}else{var H=B.select(1===G?".legendtitletext":".legendtext"),ee=t.lineCount(H),Q=H.node();if(U=q*ee,V=Q?n.bBox(Q).width:0,1===G)"left"===Y.title.side&&(V+=2*s.itemGap),t.positionText(H,ae+s.titlePad,ae+q);else{var oe=2*s.itemGap+Y.itemwidth;J.groupTitle&&(oe=s.itemGap,V-=Y.itemwidth),t.positionText(H,oe,-q*((ee-1)/2-.3))}}1===G?(Y._titleWidth=V,Y._titleHeight=U):(J.lineHeight=q,J.height=Math.max(U,16)+3,J.width=V)}else B.remove()}(R,O,C,D)})}function M(S){return m.isRightAnchor(S)?"right":m.isCenterAnchor(S)?"center":"left"}function I(S){return m.isBottomAnchor(S)?"bottom":m.isMiddleAnchor(S)?"middle":"top"}re.exports=function(S,R){return R||(R=S._fullLayout.legend||{}),function(O,C){var D,B,z=O._fullLayout,Y="legend"+z._uid,G=C._inHover;if(G?(D=C.layer,Y+="-hover"):D=z._infolayer,D){if(O._legendMouseDownTime||(O._legendMouseDownTime=0),G){if(!C.entries)return;B=h(C.entries,C)}else{if(!O.calcdata)return;B=z.showlegend&&h(O.calcdata,C)}var J=z.hiddenlabels||[];if(!(G||z.showlegend&&B.length))return D.selectAll(".legend").remove(),z._topdefs.select("#"+Y).remove(),b.autoMargin(O,"legend");var te=m.ensureSingle(D,"g","legend",function(ee){G||ee.attr("pointer-events","all")}),X=m.ensureSingleById(z._topdefs,"clipPath",Y,function(ee){ee.append("rect")}),K=m.ensureSingle(te,"rect","bg",function(ee){ee.attr("shape-rendering","crispEdges")});K.call(a.stroke,C.bordercolor).call(a.fill,C.bgcolor).style("stroke-width",C.borderwidth+"px");var ae=m.ensureSingle(te,"g","scrollbox"),U=C.title;if(C._titleWidth=0,C._titleHeight=0,U.text){var V=m.ensureSingle(ae,"text","legendtitletext");V.attr("text-anchor","start").call(n.font,U.font).text(U.text),w(V,ae,O,C,1)}else ae.selectAll(".legendtitletext").remove();var q=m.ensureSingle(te,"rect","scrollbar",function(ee){ee.attr(s.scrollBarEnterAttrs).call(a.fill,s.scrollBarColor)}),ie=ae.selectAll("g.groups").data(B);ie.enter().append("g").attr("class","groups"),ie.exit().remove();var H=ie.selectAll("g.traces").data(m.identity);H.enter().append("g").attr("class","traces"),H.exit().remove(),H.style("opacity",function(ee){var Q=ee[0].trace;return y.traceIs(Q,"pie-like")?-1!==J.indexOf(ee[0].label)?.5:1:"legendonly"===Q.visible?.5:1}).each(function(){g.select(this).call(u,O,C)}).call(d,O,C).each(function(){G||g.select(this).call(_,O)}),m.syncOrAsync([b.previousPromises,function(){return function(ee,Q,oe,le){var de=ee._fullLayout;le||(le=de.legend);var fe=de._size,be=o.isVertical(le),he=o.isGrouped(le),_e=le.borderwidth,Ce=2*_e,Ee=s.itemGap,Ae=le.itemwidth+2*Ee,ze=2*(_e+Ee),ve=I(le),Te=le.y<0||0===le.y&&"top"===ve,Ie=le.y>1||1===le.y&&"bottom"===ve,De=le.tracegroupgap;le._maxHeight=Math.max(Te||Ie?de.height/2:fe.h,30);var Fe=0;le._width=0,le._height=0;var yn,en,Xe,tt,Ue=(en=0,Xe=0,(tt=(yn=le).title.side)&&(-1!==tt.indexOf("left")&&(en=yn._titleWidth),-1!==tt.indexOf("top")&&(Xe=yn._titleHeight)),[en,Xe]);if(be)oe.each(function(yn){var en=yn[0].height;n.setTranslate(this,_e+Ue[0],_e+Ue[1]+le._height+en/2+Ee),le._height+=en,le._width=Math.max(le._width,yn[0].width)}),Fe=Ae+le._width,le._width+=Ee+Ae+Ce,le._height+=ze,he&&(Q.each(function(yn,en){n.setTranslate(this,0,en*le.tracegroupgap)}),le._height+=(le._lgroupsLength-1)*le.tracegroupgap);else{var qe=M(le),Ne=Ie||Te,Be=de.width/2;le._maxWidth=Math.max(le.x<0||0===le.x&&"right"===qe?Ne&&"left"===qe?fe.l+fe.w:Be:le.x>1||1===le.x&&"left"===qe?Ne&&"right"===qe?fe.r+fe.w:Be:fe.w,2*Ae);var We=0,Ye=0;oe.each(function(yn){var en=yn[0].width+Ae;We=Math.max(We,en),Ye+=en}),Fe=null;var lt=0;if(he){var mt=0,Tt=0,It=0;Q.each(function(){var yn=0,en=0;g.select(this).selectAll("g.traces").each(function(tt){var ye=tt[0].width,ke=tt[0].height;n.setTranslate(this,Ue[0],Ue[1]+_e+Ee+ke/2+en),en+=ke,yn=Math.max(yn,Ae+ye)});var Xe=yn+Ee;Tt>0&&Xe+_e+Tt>le._maxWidth?(lt=Math.max(lt,Tt),Tt=0,It+=mt+De,mt=en):mt=Math.max(mt,en),n.setTranslate(this,Tt,It),Tt+=Xe}),le._width=Math.max(lt,Tt)+_e,le._height=It+mt+ze}else{var Ct=oe.size(),ct=Ye+Ce+(Ct-1)*Ee<le._maxWidth,at=0,St=0,Xt=0,tn=0;oe.each(function(yn){var en=yn[0].height,Xe=Ae+yn[0].width,tt=(ct?Xe:We)+Ee;tt+_e+St-Ee>=le._maxWidth&&(lt=Math.max(lt,tn),St=0,Xt+=at,le._height+=at,at=0),n.setTranslate(this,Ue[0]+_e+St,Ue[1]+_e+Xt+en/2+Ee),tn=St+Xe+Ee,St+=tt,at=Math.max(at,en)}),ct?(le._width=St+Ce,le._height=at+ze):(le._width=Math.max(lt,tn)+Ce,le._height+=at+ze)}}le._width=Math.ceil(Math.max(le._width+Ue[0],le._titleWidth+2*(_e+s.titlePad))),le._height=Math.ceil(Math.max(le._height+Ue[1],le._titleHeight+2*(_e+s.itemGap))),le._effHeight=Math.min(le._height,le._maxHeight);var hn=ee._context.edits,cn=hn.legendText||hn.legendPosition;oe.each(function(yn){var en=g.select(this).select(".legendtoggle"),Xe=yn[0].height,tt=cn?Ae:Fe||Ae+yn[0].width;be||(tt+=Ee/2),n.setRect(en,0,-Xe/2,tt,Xe)})}(O,ie,H,C)},function(){var ee,Q,oe,le,Ne,Be,We,Ye,de=z._size,fe=C.borderwidth;if(!G){if(We=M(Be=(Ne=O)._fullLayout.legend),Ye=I(Be),b.autoMargin(Ne,"legend",{x:Be.x,y:Be.y,l:Be._width*c[We],r:Be._width*l[We],b:Be._effHeight*l[Ye],t:Be._effHeight*c[Ye]}))return;var be=de.l+de.w*C.x-c[M(C)]*C._width,he=de.t+de.h*(1-C.y)-c[I(C)]*C._effHeight;if(z.margin.autoexpand){var _e=be,Ce=he;be=m.constrain(be,0,z.width-C._width),he=m.constrain(he,0,z.height-C._effHeight),be!==_e&&m.log("Constrain legend.x to make legend fit inside graph"),he!==Ce&&m.log("Constrain legend.y to make legend fit inside graph")}n.setTranslate(te,be,he)}if(q.on(".drag",null),te.on("wheel",null),G||C._height<=C._maxHeight||O._context.staticPlot){var Ee=C._effHeight;G&&(Ee=C._height),K.attr({width:C._width-fe,height:Ee-fe,x:fe/2,y:fe/2}),n.setTranslate(ae,0,0),X.select("rect").attr({width:C._width-2*fe,height:Ee-2*fe,x:fe,y:fe}),n.setClipUrl(ae,Y,O),n.setRect(q,0,0,0,0),delete C._scrollY}else{var Ae,ve,Te=Math.max(s.scrollBarMinHeight,C._effHeight*C._effHeight/C._height),Ie=C._effHeight-Te-2*s.scrollBarMargin,De=C._height-C._effHeight,Fe=Ie/De,Ue=Math.min(C._scrollY||0,De);K.attr({width:C._width-2*fe+s.scrollBarWidth+s.scrollBarMargin,height:C._effHeight-fe,x:fe/2,y:fe/2}),X.select("rect").attr({width:C._width-2*fe+s.scrollBarWidth+s.scrollBarMargin,height:C._effHeight-2*fe,x:fe,y:fe+Ue}),n.setClipUrl(ae,Y,O),rt(Ue,Te,Fe),te.on("wheel",function(){rt(Ue=m.constrain(C._scrollY+g.event.deltaY/Ie*De,0,De),Te,Fe),0!==Ue&&Ue!==De&&g.event.preventDefault()});var qe=g.behavior.drag().on("dragstart",function(){var Ne=g.event.sourceEvent;Ae="touchstart"===Ne.type?Ne.changedTouches[0].clientY:Ne.clientY,ve=Ue}).on("drag",function(){var Ne=g.event.sourceEvent;2===Ne.buttons||Ne.ctrlKey||rt(Ue=function(Be,We,Ye){return m.constrain((Ye-We)/Fe+Be,0,De)}(ve,Ae,"touchmove"===Ne.type?Ne.changedTouches[0].clientY:Ne.clientY),Te,Fe)});q.call(qe);var je=g.behavior.drag().on("dragstart",function(){var Ne=g.event.sourceEvent;"touchstart"===Ne.type&&(Ae=Ne.changedTouches[0].clientY,ve=Ue)}).on("drag",function(){var Ne=g.event.sourceEvent;"touchmove"===Ne.type&&rt(Ue=function(Be,We,Ye){return m.constrain((We-Ye)/Fe+Be,0,De)}(ve,Ae,Ne.changedTouches[0].clientY),Te,Fe)});ae.call(je)}function rt(Ne,Be,We){C._scrollY=O._fullLayout.legend._scrollY=Ne,n.setTranslate(ae,0,-Ne),n.setRect(q,C._width,s.scrollBarMargin+Ne*We,s.scrollBarWidth,Be),X.select("rect").attr("y",fe+Ne)}O._context.edits.legendPosition&&(te.classed("cursor-move",!0),r.init({element:te.node(),gd:O,prepFn:function(){var Ne=n.getTranslate(te);oe=Ne.x,le=Ne.y},moveFn:function(Ne,Be){var We=oe+Ne,Ye=le+Be;n.setTranslate(te,We,Ye),ee=r.align(We,0,de.l,de.l+de.w,C.xanchor),Q=r.align(Ye,0,de.t+de.h,de.t,C.yanchor)},doneFn:function(){void 0!==ee&&void 0!==Q&&y.call("_guiRelayout",O,{"legend.x":ee,"legend.y":Q})},clickFn:function(Ne,Be){var We=D.selectAll("g.traces").filter(function(){var Ye=this.getBoundingClientRect();return Be.clientX>=Ye.left&&Be.clientX<=Ye.right&&Be.clientY>=Ye.top&&Be.clientY<=Ye.bottom});We.size()>0&&x(O,te,We,Ne,Be)}}))}],O)}}(S,R)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("./helpers");re.exports=function(b,y){var e,r,n=y._inHover,a=m.isGrouped(y),t=m.isReversed(y),p={},s=[],i=!1,f={},c=0,l=0;function h(z,Y){if(""!==z&&m.isGrouped(y))-1===s.indexOf(z)?(s.push(z),i=!0,p[z]=[Y]):p[z].push(Y);else{var G="~~i"+c;s.push(G),p[G]=[Y],c++}}for(e=0;e<b.length;e++){var d=b[e],o=d[0],x=o.trace,u=x.legendgroup;if(n||x.visible&&x.showlegend)if(g.traceIs(x,"pie-like"))for(f[u]||(f[u]={}),r=0;r<d.length;r++){var T=d[r].label;f[u][T]||(h(u,{label:T,color:d[r].color,i:d[r].i,trace:x,pts:d[r].pts}),f[u][T]=!0,l=Math.max(l,(T||"").length))}else h(u,o),l=Math.max(l,(x.name||"").length)}if(!s.length)return[];var _=!i||!a,w=[];for(e=0;e<s.length;e++){var M=p[s[e]];w.push(_?M[0]:M)}for(_&&(w=[w]),e=0;e<w.length;e++){var I=1/0;for(r=0;r<w[e].length;r++){var S=w[e][r].trace.legendrank;I>S&&(I=S)}w[e][0]._groupMinRank=I,w[e][0]._preGroupSort=e}var R=function(z,Y){return z.trace.legendrank-Y.trace.legendrank||z._preSort-Y._preSort};for(w.forEach(function(z,Y){z[0]._preGroupSort=Y}),w.sort(function(z,Y){return z[0]._groupMinRank-Y[0]._groupMinRank||z[0]._preGroupSort-Y[0]._preGroupSort}),e=0;e<w.length;e++){w[e].forEach(function(z,Y){z._preSort=Y}),w[e].sort(R);var O=w[e][0].trace,C=null;for(r=0;r<w[e].length;r++){var D=w[e][r].trace.legendgrouptitle;if(D&&D.text){C=D,n&&(D.font=y._groupTitleFont);break}}if(t&&w[e].reverse(),C){var B=!1;for(r=0;r<w[e].length;r++)if(g.traceIs(w[e][r].trace,"pie-like")){B=!0;break}w[e].unshift({i:-1,groupTitle:C,noClick:B,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:"toggleitem"===y.groupclick||O.visible}})}for(r=0;r<w[e].length;r++)w[e][r]=[w[e][r]]}return y._lgroupsLength=w.length,y._maxNameLength=l,w}},{"../../registry":647,"./helpers":423}],422:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry"),b=!0;re.exports=function(y,e,r){var n=e._fullLayout;if(!e._dragged&&!e._editing){var a,t=n.legend.itemclick,p=n.legend.itemdoubleclick,s=n.legend.groupclick;if(1===r&&"toggle"===t&&"toggleothers"===p&&b&&e.data&&e._context.showTips&&g.notifier(g._(e,"Double-click on legend to isolate one trace"),"long"),b=!1,1===r?a=t:2===r&&(a=p),a){var i="togglegroup"===s,f=n.hiddenlabels?n.hiddenlabels.slice():[],c=y.data()[0][0];if(!c.groupTitle||!c.noClick){var l,h,d,o,x,u=e._fullData,T=c.trace,_=T.legendgroup,w={},M=[],I=[],S=[];if(m.traceIs(T,"pie-like")){var R=c.label,O=f.indexOf(R);"toggle"===a?-1===O?f.push(R):f.splice(O,1):"toggleothers"===a&&(f=[],e.calcdata[0].forEach(function(q){R!==q.label&&f.push(q.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===f.length&&-1===O&&(f=[])),m.call("_guiRelayout",e,"hiddenlabels",f)}else{var C,D=_&&_.length,B=[];if(D)for(l=0;l<u.length;l++)(C=u[l]).visible&&C.legendgroup===_&&B.push(l);if("toggle"===a){var z;switch(T.visible){case!0:z="legendonly";break;case!1:z=!1;break;case"legendonly":z=!0}if(D)if(i)for(l=0;l<u.length;l++)!1!==u[l].visible&&u[l].legendgroup===_&&V(u[l],z);else V(T,z);else V(T,z)}else if("toggleothers"===a){var J,X=!0;for(l=0;l<u.length;l++)if(J=!0!==u[l].showlegend,!(u[l]===T||J||D&&u[l].legendgroup===_||!0!==u[l].visible||m.traceIs(u[l],"notLegendIsolatable"))){X=!1;break}for(l=0;l<u.length;l++)if(!1!==u[l].visible&&!m.traceIs(u[l],"notLegendIsolatable"))switch(T.visible){case"legendonly":V(u[l],!0);break;case!0:J=!0!==u[l].showlegend&&!u[l].legendgroup,V(u[l],!!(u[l]===T||D&&u[l].legendgroup===_||J)||!!X||"legendonly")}}for(l=0;l<I.length;l++)if(d=I[l]){var K=d.constructUpdate(),ae=Object.keys(K);for(h=0;h<ae.length;h++)(w[o=ae[h]]=w[o]||[])[S[l]]=K[o]}for(x=Object.keys(w),l=0;l<x.length;l++)for(o=x[l],h=0;h<M.length;h++)w[o].hasOwnProperty(h)||(w[o][h]=void 0);m.call("_guiRestyle",e,w,M)}}}}function U(q,ie,H){var ee=M.indexOf(q),Q=w[ie];return Q||(Q=w[ie]=[]),-1===M.indexOf(q)&&(M.push(q),ee=M.length-1),Q[ee]=H,ee}function V(q,ie){if(!c.groupTitle||i){var H=q._fullInput;if(m.hasTransform(H,"groupby")){var ee=I[H.index];if(!ee){var Q=m.getTransformIndices(H,"groupby");ee=g.keyedContainer(H,"transforms["+Q[Q.length-1]+"].styles","target","value.visible"),I[H.index]=ee}var le=ee.get(q._group);void 0===le&&(le=!0),!1!==le&&ee.set(q._group,ie),S[H.index]=U(H.index,"visible",!1!==H.visible)}else U(H.index,"visible",!1!==H.visible&&ie)}}}},{"../../lib":515,"../../registry":647}],423:[function(v,re,ne){"use strict";ne.isGrouped=function(g){return-1!==(g.traceorder||"").indexOf("grouped")},ne.isVertical=function(g){return"h"!==g.orientation},ne.isReversed=function(g){return-1!==(g.traceorder||"").indexOf("reversed")}},{}],424:[function(v,re,ne){"use strict";re.exports={moduleType:"component",name:"legend",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw"),style:v("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../lib"),y=b.strTranslate,e=v("../drawing"),r=v("../color"),n=v("../colorscale/helpers").extractOpts,a=v("../../traces/scatter/subtypes"),t=v("../../traces/pie/style_one"),p=v("../../traces/pie/helpers").castOption,s=v("./constants");function i(l,h){return(h?"radial":"horizontal")+(l?"":"reversed")}function f(l){var h=l[0].trace,d=h.contours,o=a.hasLines(h),x=a.hasMarkers(h),u=h.visible&&h.fill&&"none"!==h.fill,T=!1,_=!1;if(d){var w=d.coloring;"lines"===w?T=!0:o="none"===w||"heatmap"===w||d.showlines,"constraint"===d.type?u="="!==d._operation:"fill"!==w&&"heatmap"!==w||(_=!0)}return{showMarker:x,showLine:o,showFill:u,showGradientLine:T,showGradientFill:_,anyLine:o||T,anyFill:u||_}}function c(l,h,d){return l&&b.isArrayOrTypedArray(l)?h:l>d?d:l}re.exports=function(l,h,d){d||(d=h._fullLayout.legend);var x="constant"===d.itemsizing,u=d.itemwidth,_=y((u+2*s.itemGap)/2,0),w=function(S,R,O,C){var D;if(S+1)D=S;else{if(!(R&&R.width>0))return 0;D=R.width}return x?C:Math.min(D,O)};function M(S,R,O){var C=S[0].trace,D=C.marker||{},B=D.line||{},z=O?C.visible&&C.type===O:m.traceIs(C,"bar"),Y=g.select(R).select("g.legendpoints").selectAll("path.legend"+O).data(z?[S]:[]);Y.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),Y.exit().remove(),Y.each(function(G){var J=g.select(this),te=G[0],X=w(te.mlw,D.line,5,2);J.style("stroke-width",X+"px");var K=te.mcc;if(!d._inHover&&"mc"in te){var ae=n(D),U=ae.mid;void 0===U&&(U=(ae.max+ae.min)/2),K=e.tryColorscale(D,"")(U)}var V=K||te.mc||D.color,q=D.pattern,ie=q&&e.getPatternAttr(q.shape,0,"");if(ie){var H=e.getPatternAttr(q.bgcolor,0,null),ee=e.getPatternAttr(q.fgcolor,0,null),Q=q.fgopacity,oe=c(q.size,8,10),le=c(q.solidity,.5,1);J.call(e.pattern,"legend",h,"legend-"+C.uid,ie,oe,le,K,q.fillmode,H,ee,Q)}else J.call(r.fill,V);X&&r.stroke(J,te.mlc||B.color)})}function I(S,R,O){var C=S[0],D=C.trace,B=O?D.visible&&D.type===O:m.traceIs(D,O),z=g.select(R).select("g.legendpoints").selectAll("path.legend"+O).data(B?[S]:[]);if(z.enter().append("path").classed("legend"+O,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),z.exit().remove(),z.size()){var Y=(D.marker||{}).line,G=w(p(Y.width,C.pts),Y,5,2),J=b.minExtend(D,{marker:{line:{width:G}}});J.marker.line.color=Y.color;var te=b.minExtend(C,{trace:J});t(z,te,J)}}l.each(function(S){var R=g.select(this),O=b.ensureSingle(R,"g","layers");O.style("opacity",S[0].trace.opacity);var C=d.valign,D=S[0].lineHeight,B=S[0].height;O.attr("transform","middle"!==C&&D&&B?y(0,{top:1,bottom:-1}[C]*(.5*(D-B+3))):null),O.selectAll("g.legendfill").data([S]).enter().append("g").classed("legendfill",!0),O.selectAll("g.legendlines").data([S]).enter().append("g").classed("legendlines",!0);var Y=O.selectAll("g.legendsymbols").data([S]);Y.enter().append("g").classed("legendsymbols",!0),Y.selectAll("g.legendpoints").data([S]).enter().append("g").classed("legendpoints",!0)}).each(function(S){var R,O=S[0].trace,C=[];if(O.visible)switch(O.type){case"histogram2d":case"heatmap":C=[["M-15,-2V4H15V-2Z"]],R=!0;break;case"choropleth":case"choroplethmapbox":C=[["M-6,-6V6H6V-6Z"]],R=!0;break;case"densitymapbox":C=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],R="radial";break;case"cone":C=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],R=!1;break;case"streamtube":C=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],R=!1;break;case"surface":C=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],R=!0;break;case"mesh3d":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],R=!1;break;case"volume":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],R=!0;break;case"isosurface":C=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],R=!1}var D=g.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(C);D.enter().append("path").classed("legend3dandfriends",!0).attr("transform",_).style("stroke-miterlimit",1),D.exit().remove(),D.each(function(B,z){var Y,G=g.select(this),J=n(O),te=J.colorscale,X=J.reversescale;if(te){if(!R){var K=te.length;Y=0===z?te[X?K-1:0][1]:1===z?te[X?0:K-1][1]:te[Math.floor((K-1)/2)][1]}}else{var ae=O.vertexcolor||O.facecolor||O.color;Y=b.isArrayOrTypedArray(ae)?ae[z]||ae[0]:ae}G.attr("d",B[0]),Y?G.call(r.fill,Y):G.call(function(U){U.size()&&e.gradient(U,h,"legendfill-"+O.uid,i(X,"radial"===R),te,"fill")})})}).each(function(S){var R=S[0].trace,O="waterfall"===R.type;if(S[0]._distinct&&O){var C=S[0].trace[S[0].dir].marker;return S[0].mc=C.color,S[0].mlw=C.line.width,S[0].mlc=C.line.color,M(S,this,"waterfall")}var D=[];R.visible&&O&&(D=S[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var B=g.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(D);B.enter().append("path").classed("legendwaterfall",!0).attr("transform",_).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(z){var Y=g.select(this),G=R[z[0]].marker,J=w(void 0,G.line,5,2);Y.attr("d",z[1]).style("stroke-width",J+"px").call(r.fill,G.color),J&&Y.call(r.stroke,G.line.color)})}).each(function(S){M(S,this,"funnel")}).each(function(S){M(S,this)}).each(function(S){var R=S[0].trace,O=g.select(this).select("g.legendpoints").selectAll("path.legendbox").data(R.visible&&m.traceIs(R,"box-violin")?[S]:[]);O.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),O.exit().remove(),O.each(function(){var C=g.select(this);if("all"!==R.boxpoints&&"all"!==R.points||0!==r.opacity(R.fillcolor)||0!==r.opacity((R.line||{}).color)){var D=w(void 0,R.line,5,2);C.style("stroke-width",D+"px").call(r.fill,R.fillcolor),D&&r.stroke(C,R.line.color)}else{var B=b.minExtend(R,{marker:{size:x?12:b.constrain(R.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});O.call(e.pointStyle,B,h)}})}).each(function(S){I(S,this,"funnelarea")}).each(function(S){I(S,this,"pie")}).each(function(S){var R,O,C=f(S),D=C.showFill,B=C.showLine,z=C.showGradientLine,Y=C.showGradientFill,G=C.anyFill,J=C.anyLine,te=S[0],X=te.trace,K=n(X),ae=K.colorscale,U=K.reversescale,V=a.hasMarkers(X)||!G?"M5,0":J?"M5,-2":"M5,-3",q=g.select(this),ie=q.select(".legendfill").selectAll("path").data(D||Y?[S]:[]);if(ie.enter().append("path").classed("js-fill",!0),ie.exit().remove(),ie.attr("d",V+"h"+u+"v6h-"+u+"z").call(function(Q){Q.size()&&(D?e.fillGroupStyle(Q,h):e.gradient(Q,h,"legendfill-"+X.uid,i(U),ae,"fill"))}),B||z){var H=w(void 0,X.line,10,5);O=b.minExtend(X,{line:{width:H}}),R=[b.minExtend(te,{trace:O})]}var ee=q.select(".legendlines").selectAll("path").data(B||z?[R]:[]);ee.enter().append("path").classed("js-line",!0),ee.exit().remove(),ee.attr("d",V+(z?"l"+u+",0.0001":"h"+u)).call(B?e.lineGroupStyle:function(Q){if(Q.size()){var oe="legendline-"+X.uid;e.lineGroupStyle(Q),e.gradient(Q,h,oe,i(U),ae,"stroke")}})}).each(function(S){var R,O,C=f(S),z=C.showLine,Y=C.showMarker,G=S[0],J=G.trace,te=!Y&&!C.anyLine&&!C.anyFill&&a.hasText(J);function X(ee,Q,oe,le){var de=b.nestedProperty(J,ee).get(),fe=b.isArrayOrTypedArray(de)&&Q?Q(de):de;if(x&&fe&&void 0!==le&&(fe=le),oe){if(fe<oe[0])return oe[0];if(fe>oe[1])return oe[1]}return fe}function K(ee){return G._distinct&&G.index&&ee[G.index]?ee[G.index]:ee[0]}if(Y||te||z){var ae={},U={};if(Y){ae.mc=X("marker.color",K),ae.mx=X("marker.symbol",K),ae.mo=X("marker.opacity",b.mean,[.2,1]),ae.mlc=X("marker.line.color",K),ae.mlw=X("marker.line.width",b.mean,[0,5],2),U.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var V=X("marker.size",b.mean,[2,16],12);ae.ms=V,U.marker.size=V}z&&(U.line={width:X("line.width",K,[0,10],5)}),te&&(ae.tx="Aa",ae.tp=X("textposition",K),ae.ts=10,ae.tc=X("textfont.color",K),ae.tf=X("textfont.family",K)),R=[b.minExtend(G,ae)],(O=b.minExtend(J,U)).selectedpoints=null,O.texttemplate=null}var q=g.select(this).select("g.legendpoints"),ie=q.selectAll("path.scatterpts").data(Y?R:[]);ie.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",_),ie.exit().remove(),ie.call(e.pointStyle,O,h),Y&&(R[0].mrc=3);var H=q.selectAll("g.pointtext").data(te?R:[]);H.enter().append("g").classed("pointtext",!0).append("text").attr("transform",_),H.exit().remove(),H.selectAll("text").call(e.textPointStyle,O,h)}).each(function(S){var R=S[0].trace,O=g.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(R.visible&&"candlestick"===R.type?[S,S]:[]);O.enter().append("path").classed("legendcandle",!0).attr("d",function(C,D){return D?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(C,D){var B=g.select(this),z=R[D?"increasing":"decreasing"],Y=w(void 0,z.line,5,2);B.style("stroke-width",Y+"px").call(r.fill,z.fillcolor),Y&&r.stroke(B,z.line.color)})}).each(function(S){var R=S[0].trace,O=g.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(R.visible&&"ohlc"===R.type?[S,S]:[]);O.enter().append("path").classed("legendohlc",!0).attr("d",function(C,D){return D?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(C,D){var B=g.select(this),z=R[D?"increasing":"decreasing"],Y=w(void 0,z.line,5,2);B.style("fill","none").call(e.dashLine,z.line.dash,Y),Y&&r.stroke(B,z.line.color)})})}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(v,re,ne){"use strict";v("./constants"),re.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../plots/plots"),b=v("../../plots/cartesian/axis_ids"),y=v("../../fonts/ploticon"),e=v("../shapes/draw").eraseActiveShape,r=v("../../lib"),n=r._,a=re.exports={};function t(o,x){var u,T,_=x.currentTarget,w=_.getAttribute("data-attr"),M=_.getAttribute("data-val")||!0,I=o._fullLayout,S={},R=b.list(o,null,!0),O=I._cartesianSpikesEnabled;if("zoom"===w){var C,D="in"===M?.5:2,B=(1+D)/2,z=(1-D)/2;for(T=0;T<R.length;T++)if(!(u=R[T]).fixedrange)if(C=u._name,"auto"===M)S[C+".autorange"]=!0;else if("reset"===M){if(void 0===u._rangeInitial)S[C+".autorange"]=!0;else{var Y=u._rangeInitial.slice();S[C+".range[0]"]=Y[0],S[C+".range[1]"]=Y[1]}void 0!==u._showSpikeInitial&&(S[C+".showspikes"]=u._showSpikeInitial,"on"!==O||u._showSpikeInitial||(O="off"))}else{var G=[u.r2l(u.range[0]),u.r2l(u.range[1])],J=[B*G[0]+z*G[1],B*G[1]+z*G[0]];S[C+".range[0]"]=u.l2r(J[0]),S[C+".range[1]"]=u.l2r(J[1])}}else"hovermode"!==w||"x"!==M&&"y"!==M||_.setAttribute("data-val",M=I._isHoriz?"y":"x"),S[w]=M;I._cartesianSpikesEnabled=O,g.call("_guiRelayout",o,S)}function p(o,x){for(var u=x.currentTarget,T=u.getAttribute("data-attr"),_=u.getAttribute("data-val")||!0,w=o._fullLayout._subplots.gl3d||[],M={},I=T.split("."),S=0;S<w.length;S++)M[w[S]+"."+I[1]]=_;M.dragmode="pan"===_?_:"zoom",g.call("_guiRelayout",o,M)}function s(o,x){for(var u=x.currentTarget.getAttribute("data-attr"),T="resetLastSave"===u,_="resetDefault"===u,w=o._fullLayout,M=w._subplots.gl3d||[],I={},S=0;S<M.length;S++){var R,O=M[S],C=O+".camera",D=O+".aspectratio",B=O+".aspectmode",z=w[O]._scene;T?(I[C+".up"]=z.viewInitial.up,I[C+".eye"]=z.viewInitial.eye,I[C+".center"]=z.viewInitial.center,R=!0):_&&(I[C+".up"]=null,I[C+".eye"]=null,I[C+".center"]=null,R=!0),R&&(I[D+".x"]=z.viewInitial.aspectratio.x,I[D+".y"]=z.viewInitial.aspectratio.y,I[D+".z"]=z.viewInitial.aspectratio.z,I[B]=z.viewInitial.aspectmode)}g.call("_guiRelayout",o,I)}function i(o,x){var u=x.currentTarget,T=u._previousVal,_=o._fullLayout,w=_._subplots.gl3d||[],M=["xaxis","yaxis","zaxis"],I={},S={};if(T)S=T,u._previousVal=null;else{for(var R=0;R<w.length;R++){var O=w[R],C=_[O],D=O+".hovermode";I[D]=C.hovermode,S[D]=!1;for(var B=0;B<3;B++){var z=M[B],Y=O+"."+z+".showspikes";S[Y]=!1,I[Y]=C[z].showspikes}}u._previousVal=I}return S}function f(o,x){for(var u=x.currentTarget,T=u.getAttribute("data-attr"),_=u.getAttribute("data-val")||!0,w=o._fullLayout,M=w._subplots.geo||[],I=0;I<M.length;I++){var S=M[I];if("zoom"===T){var O=w[S].projection.scale;g.call("_guiRelayout",o,S+".projection.scale","in"===_?2*O:.5*O)}}"reset"===T&&d(o,"geo")}function c(o){var x=o._fullLayout;return!x.hovermode&&(x._has("cartesian")?x._isHoriz?"y":"x":"closest")}function l(o){var x=c(o);g.call("_guiRelayout",o,"hovermode",x)}function h(o,x){for(var u=x.currentTarget.getAttribute("data-val"),T=o._fullLayout,_=T._subplots.mapbox||[],w={},M=0;M<_.length;M++){var I=_[M],S=T[I].zoom;w[I+".zoom"]="in"===u?1.05*S:S/1.05}g.call("_guiRelayout",o,w)}function d(o,x){for(var u=o._fullLayout,T=u._subplots[x]||[],_={},w=0;w<T.length;w++)for(var M=T[w],I=u[M]._subplot.viewInitial,S=Object.keys(I),R=0;R<S.length;R++){var O=S[R];_[M+"."+O]=I[O]}g.call("_guiRelayout",o,_)}a.toImage={name:"toImage",title:function(o){return n(o,"png"===((o._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:y.camera,click:function(o){var x=o._context.toImageButtonOptions,u={format:x.format||"png"};r.notifier(n(o,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==u.format&&r.isIE()&&(r.notifier(n(o,"IE only supports svg.  Changing format to svg."),"long"),u.format="svg"),["filename","width","height","scale"].forEach(function(T){T in x&&(u[T]=x[T])}),g.call("downloadImage",o,u).then(function(T){r.notifier(n(o,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){r.notifier(n(o,"Sorry, there was a problem downloading your snapshot!"),"long")})}},a.sendDataToCloud={name:"sendDataToCloud",title:function(o){return n(o,"Edit in Chart Studio")},icon:y.disk,click:function(o){m.sendDataToCloud(o)}},a.editInChartStudio={name:"editInChartStudio",title:function(o){return n(o,"Edit in Chart Studio")},icon:y.pencil,click:function(o){m.sendDataToCloud(o)}},a.zoom2d={name:"zoom2d",_cat:"zoom",title:function(o){return n(o,"Zoom")},attr:"dragmode",val:"zoom",icon:y.zoombox,click:t},a.pan2d={name:"pan2d",_cat:"pan",title:function(o){return n(o,"Pan")},attr:"dragmode",val:"pan",icon:y.pan,click:t},a.select2d={name:"select2d",_cat:"select",title:function(o){return n(o,"Box Select")},attr:"dragmode",val:"select",icon:y.selectbox,click:t},a.lasso2d={name:"lasso2d",_cat:"lasso",title:function(o){return n(o,"Lasso Select")},attr:"dragmode",val:"lasso",icon:y.lasso,click:t},a.drawclosedpath={name:"drawclosedpath",title:function(o){return n(o,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:y.drawclosedpath,click:t},a.drawopenpath={name:"drawopenpath",title:function(o){return n(o,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:y.drawopenpath,click:t},a.drawline={name:"drawline",title:function(o){return n(o,"Draw line")},attr:"dragmode",val:"drawline",icon:y.drawline,click:t},a.drawrect={name:"drawrect",title:function(o){return n(o,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:y.drawrect,click:t},a.drawcircle={name:"drawcircle",title:function(o){return n(o,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:y.drawcircle,click:t},a.eraseshape={name:"eraseshape",title:function(o){return n(o,"Erase active shape")},icon:y.eraseshape,click:e},a.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(o){return n(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:t},a.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(o){return n(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:t},a.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(o){return n(o,"Autoscale")},attr:"zoom",val:"auto",icon:y.autoscale,click:t},a.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(o){return n(o,"Reset axes")},attr:"zoom",val:"reset",icon:y.home,click:t},a.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(o){return n(o,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:t},a.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(o){return n(o,"Compare data on hover")},attr:"hovermode",val:function(o){return o._fullLayout._isHoriz?"y":"x"},icon:y.tooltip_compare,gravity:"ne",click:t},a.zoom3d={name:"zoom3d",_cat:"zoom",title:function(o){return n(o,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:y.zoombox,click:p},a.pan3d={name:"pan3d",_cat:"pan",title:function(o){return n(o,"Pan")},attr:"scene.dragmode",val:"pan",icon:y.pan,click:p},a.orbitRotation={name:"orbitRotation",title:function(o){return n(o,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:y["3d_rotate"],click:p},a.tableRotation={name:"tableRotation",title:function(o){return n(o,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:y["z-axis"],click:p},a.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(o){return n(o,"Reset camera to default")},attr:"resetDefault",icon:y.home,click:s},a.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(o){return n(o,"Reset camera to last save")},attr:"resetLastSave",icon:y.movie,click:s},a.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(o,x){var u=i(o,x);g.call("_guiRelayout",o,u)}},a.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(o){return n(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:f},a.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(o){return n(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:f},a.resetGeo={name:"resetGeo",_cat:"reset",title:function(o){return n(o,"Reset")},attr:"reset",val:null,icon:y.autoscale,click:f},a.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:l},a.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:l},a.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:y.tooltip_basic,gravity:"ne",click:l},a.resetViewSankey={name:"resetSankeyGroup",title:function(o){return n(o,"Reset view")},icon:y.home,click:function(o){for(var x={"node.groups":[],"node.x":[],"node.y":[]},u=0;u<o._fullData.length;u++){var T=o._fullData[u]._viewInitial;x["node.groups"].push(T.node.groups.slice()),x["node.x"].push(T.node.x.slice()),x["node.y"].push(T.node.y.slice())}g.call("restyle",o,x)}},a.toggleHover={name:"toggleHover",title:function(o){return n(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:y.tooltip_basic,gravity:"ne",click:function(o,x){var u=i(o,x);u.hovermode=c(o),g.call("_guiRelayout",o,u)}},a.resetViews={name:"resetViews",title:function(o){return n(o,"Reset views")},icon:y.home,click:function(o,x){var u=x.currentTarget;u.setAttribute("data-attr","zoom"),u.setAttribute("data-val","reset"),t(o,x),u.setAttribute("data-attr","resetLastSave"),s(o,x),d(o,"geo"),d(o,"mapbox")}},a.toggleSpikelines={name:"toggleSpikelines",title:function(o){return n(o,"Toggle Spike Lines")},icon:y.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(o){var x=o._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on",g.call("_guiRelayout",o,function(T){for(var _="on"===T._fullLayout._cartesianSpikesEnabled,w=b.list(T,null,!0),M={},I=0;I<w.length;I++){var S=w[I];M[S._name+".showspikes"]=!!_||S._showSpikeInitial}return M}(o))}},a.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(o){return n(o,"Reset view")},attr:"reset",icon:y.home,click:function(o){d(o,"mapbox")}},a.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(o){return n(o,"Zoom in")},attr:"zoom",val:"in",icon:y.zoom_plus,click:h},a.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(o){return n(o,"Zoom out")},attr:"zoom",val:"out",icon:y.zoom_minus,click:h}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(v,re,ne){"use strict";var g=v("./buttons"),m=Object.keys(g),b=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],y=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(b),e=[];m.forEach(function(r){!function(n){if(-1===y.indexOf(n._cat||n.name)){var a=n.name,t=(n._cat||n.name).toLowerCase();-1===e.indexOf(a)&&e.push(a),-1===e.indexOf(t)&&e.push(t)}}(g[r])}),e.sort(),re.exports={DRAW_MODES:b,backButtons:y,foreButtons:e}},{"./buttons":427}],429:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../color"),b=v("../../plot_api/plot_template"),y=v("./attributes");re.exports=function(e,r){var n=e.modebar||{},a=b.newContainer(r,"modebar");function t(s,i){return g.coerce(n,a,y,s,i)}t("orientation"),t("bgcolor",m.addOpacity(r.paper_bgcolor,.5));var p=m.contrast(m.rgb(r.modebar.bgcolor));t("color",m.addOpacity(p,.3)),t("activecolor",m.addOpacity(p,.7)),t("uirevision",r.uirevision),t("add"),t("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(v,re,ne){"use strict";re.exports={moduleType:"component",name:"modebar",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),manage:v("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axis_ids"),m=v("../../traces/scatter/subtypes"),b=v("../../registry"),y=v("../fx/helpers").isUnifiedHover,e=v("./modebar"),r=v("./buttons"),n=v("./constants").DRAW_MODES,a=v("../../lib").extendDeep;re.exports=function(t){var p=t._fullLayout,s=t._context,i=p._modeBar;if(s.displayModeBar||s.watermark){if(!Array.isArray(s.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(s.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var f,c=s.modeBarButtons;f=Array.isArray(c)&&c.length?function(l){for(var h=a([],l),d=0;d<h.length;d++)for(var o=h[d],x=0;x<o.length;x++){var u=o[x];if("string"==typeof u){if(void 0===r[u])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));h[d][x]=r[u]}}return h}(c):!s.displayModeBar&&s.watermark?[]:function(l){var h=l._fullLayout,d=l._fullData,o=l._context;function x(de,fe){if("string"==typeof fe){if(fe.toLowerCase()===de.toLowerCase())return!0}else if(fe.name===de||(fe._cat||fe.name)===de.toLowerCase())return!0;return!1}var u=h.modebar.add;"string"==typeof u&&(u=[u]);var T=h.modebar.remove;"string"==typeof T&&(T=[T]);var _=o.modeBarButtonsToAdd.concat(u.filter(function(de){for(var fe=0;fe<o.modeBarButtonsToRemove.length;fe++)if(x(de,o.modeBarButtonsToRemove[fe]))return!1;return!0})),w=o.modeBarButtonsToRemove.concat(T.filter(function(de){for(var fe=0;fe<o.modeBarButtonsToAdd.length;fe++)if(x(de,o.modeBarButtonsToAdd[fe]))return!1;return!0})),M=h._has("cartesian"),I=h._has("gl3d"),S=h._has("geo"),R=h._has("pie"),O=h._has("funnelarea"),C=h._has("gl2d"),D=h._has("ternary"),B=h._has("mapbox"),z=h._has("polar"),Y=h._has("smith"),G=h._has("sankey"),J=function(de){for(var fe=g.list({_fullLayout:de},null,!0),be=0;be<fe.length;be++)if(!fe[be].fixedrange)return!1;return!0}(h),te=y(h.hovermode),X=[];function K(de){if(de.length){for(var fe=[],be=0;be<de.length;be++){for(var he=de[be],_e=r[he],Ce=_e.name.toLowerCase(),Ee=(_e._cat||_e.name).toLowerCase(),Ae=!1,ze=0;ze<w.length;ze++){var ve=w[ze].toLowerCase();if(ve===Ce||ve===Ee){Ae=!0;break}}Ae||fe.push(r[he])}X.push(fe)}}var ae=["toImage"];o.showEditInChartStudio?ae.push("editInChartStudio"):o.showSendToCloud&&ae.push("sendDataToCloud"),K(ae);var U=[],V=[],q=[],ie=[];(M||C||R||O||D)+S+I+B+z+Y>1?(V=["toggleHover"],q=["resetViews"]):S?(U=["zoomInGeo","zoomOutGeo"],V=["hoverClosestGeo"],q=["resetGeo"]):I?(V=["hoverClosest3d"],q=["resetCameraDefault3d","resetCameraLastSave3d"]):B?(U=["zoomInMapbox","zoomOutMapbox"],V=["toggleHover"],q=["resetViewMapbox"]):C?V=["hoverClosestGl2d"]:R?V=["hoverClosestPie"]:G?(V=["hoverClosestCartesian","hoverCompareCartesian"],q=["resetViewSankey"]):V=["toggleHover"],M&&(V=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(de){for(var fe=0;fe<de.length;fe++)if(!b.traceIs(de[fe],"noHover"))return!1;return!0}(d)||te)&&(V=[]),!M&&!C||J||(U=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==q[0]&&(q=["resetScale2d"])),I?ie=["zoom3d","pan3d","orbitRotation","tableRotation"]:(M||C)&&!J||D?ie=["zoom2d","pan2d"]:B||S?ie=["pan2d"]:z&&(ie=["zoom2d"]),function(de){for(var fe=!1,be=0;be<de.length&&!fe;be++){var he=de[be];he._module&&he._module.selectPoints&&(b.traceIs(he,"scatter-like")?(m.hasMarkers(he)||m.hasText(he))&&(fe=!0):b.traceIs(he,"box-violin")&&"all"!==he.boxpoints&&"all"!==he.points||(fe=!0))}return fe}(d)&&ie.push("select2d","lasso2d");var H=[],ee=function(de){-1===H.indexOf(de)&&-1!==V.indexOf(de)&&H.push(de)};if(Array.isArray(_)){for(var Q=[],oe=0;oe<_.length;oe++){var le=_[oe];"string"==typeof le?(le=le.toLowerCase(),-1!==n.indexOf(le)?(h._has("mapbox")||h._has("cartesian"))&&ie.push(le):"togglespikelines"===le?ee("toggleSpikelines"):"togglehover"===le?ee("toggleHover"):"hovercompare"===le?ee("hoverCompareCartesian"):"hoverclosest"===le?(ee("hoverClosestCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie")):"v1hovermode"===le&&(ee("toggleHover"),ee("hoverClosestCartesian"),ee("hoverCompareCartesian"),ee("hoverClosestGeo"),ee("hoverClosest3d"),ee("hoverClosestGl2d"),ee("hoverClosestPie"))):Q.push(le)}_=Q}return K(ie),K(U.concat(q)),K(H),function(de,fe){if(fe.length)if(Array.isArray(fe[0]))for(var be=0;be<fe.length;be++)de.push(fe[be]);else de.push(fe);return de}(X,_)}(t),i?i.update(t,f):p._modeBar=e(t,f)}else i&&(i.destroy(),delete p._modeBar)}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("../../lib"),y=v("../../fonts/ploticon"),e=v("../../version").version,r=new DOMParser;function n(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var a=n.prototype;a.update=function(t,p){this.graphInfo=t;var s=this.graphInfo._context,i=this.graphInfo._fullLayout,f="modebar-"+i._uid;this.element.setAttribute("id",f),this._uid=f,this.element.className="modebar","hover"===s.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===i.modebar.orientation&&(this.element.className+=" vertical",p=p.reverse());var c=i.modebar,l="hover"===s.displayModeBar?".js-plotly-plot .plotly:hover ":"";b.deleteRelatedStyleRule(f),b.addRelatedStyleRule(f,l+"#"+f+" .modebar-group","background-color: "+c.bgcolor),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn .icon path","fill: "+c.color),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn:hover .icon path","fill: "+c.activecolor),b.addRelatedStyleRule(f,"#"+f+" .modebar-btn.active .icon path","fill: "+c.activecolor);var h=!this.hasButtons(p),d=this.hasLogo!==s.displaylogo,o=this.locale!==s.locale;if(this.locale=s.locale,(h||d||o)&&(this.removeAllButtons(),this.updateButtons(p),s.watermark||s.displaylogo)){var x=this.getLogo();s.watermark&&(x.className=x.className+" watermark"),"v"===i.modebar.orientation?this.element.insertBefore(x,this.element.childNodes[0]):this.element.appendChild(x),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(t){var p=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(s){var i=p.createGroup();s.forEach(function(f){var c=f.name;if(!c)throw new Error("must provide button 'name' in button config");if(-1!==p.buttonsNames.indexOf(c))throw new Error("button name '"+c+"' is taken");p.buttonsNames.push(c);var l=p.createButton(f);p.buttonElements.push(l),i.appendChild(l)}),p.element.appendChild(i)})},a.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},a.createButton=function(t){var p=this,s=document.createElement("a");s.setAttribute("rel","tooltip"),s.className="modebar-btn";var i=t.title;void 0===i?i=t.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&s.setAttribute("data-title",i),void 0!==t.attr&&s.setAttribute("data-attr",t.attr);var f=t.val;if(void 0!==f&&("function"==typeof f&&(f=f(this.graphInfo)),s.setAttribute("data-val",f)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");s.addEventListener("click",function(l){t.click(p.graphInfo,l),p.updateActiveButton(l.currentTarget)}),s.setAttribute("data-toggle",t.toggle||!1),t.toggle&&g.select(s).classed("active",!0);var c=t.icon;return s.appendChild("function"==typeof c?c():this.createIcon(c||y.question)),s.setAttribute("data-gravity",t.gravity||"n"),s},a.createIcon=function(t){var p,s=m(t.height)?Number(t.height):t.ascent-t.descent,i="http://www.w3.org/2000/svg";if(t.path){(p=document.createElementNS(i,"svg")).setAttribute("viewBox",[0,0,t.width,s].join(" ")),p.setAttribute("class","icon");var f=document.createElementNS(i,"path");f.setAttribute("d",t.path),t.transform?f.setAttribute("transform",t.transform):void 0!==t.ascent&&f.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),p.appendChild(f)}return t.svg&&(p=r.parseFromString(t.svg,"application/xml").childNodes[0]),p.setAttribute("height","1em"),p.setAttribute("width","1em"),p},a.updateActiveButton=function(t){var p=this.graphInfo._fullLayout,s=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(i){var f=i.getAttribute("data-val")||!0,c=i.getAttribute("data-attr"),l="true"===i.getAttribute("data-toggle"),h=g.select(i);if(l)c===s&&h.classed("active",!h.classed("active"));else{var d=null===c?c:b.nestedProperty(p,c).get();h.classed("active",d===f)}})},a.hasButtons=function(t){var p=this.buttons;if(!p||t.length!==p.length)return!1;for(var s=0;s<t.length;++s){if(t[s].length!==p[s].length)return!1;for(var i=0;i<t[s].length;i++)if(t[s][i].name!==p[s][i].name)return!1}return!0},a.getLogo=function(){var t=this.createGroup(),p=document.createElement("a");return p.href="https://plotly.com/",p.target="_blank",p.setAttribute("data-title",b._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),p.className="modebar-btn plotlyjsicon modebar-btn--logo",p.appendChild(this.createIcon(y.newplotlylogo)),t.appendChild(p),t},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){b.removeElement(this.container.querySelector(".modebar")),b.deleteRelatedStyleRule(this._uid)},re.exports=function(t,p){var s=t._fullLayout,i=new n({graphInfo:t,container:s._modebardiv.node(),buttons:p});return s._privateplot&&g.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("../color/attributes"),b=(0,v("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});re.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:g({editType:"plot"}),bgcolor:{valType:"color",dflt:m.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(v,re,ne){"use strict";re.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../color"),b=v("../../plot_api/plot_template"),y=v("../../plots/array_container_defaults"),e=v("./attributes"),r=v("./constants");function n(a,t,p,s){var i=s.calendar;function f(l,h){return g.coerce(a,t,e.buttons,l,h)}if(f("visible")){var c=f("step");"all"!==c&&(!i||"gregorian"===i||"month"!==c&&"year"!==c?f("stepmode"):t.stepmode="backward",f("count")),f("label")}}re.exports=function(a,t,p,s,i){var f=a.rangeselector||{},c=b.newContainer(t,"rangeselector");function l(o,x){return g.coerce(f,c,e,o,x)}if(l("visible",y(f,c,{name:"buttons",handleItemDefaults:n,calendar:i}).length>0)){var h=function(o,x,u){for(var T=u.filter(function(I){return x[I].anchor===o._id}),_=0,w=0;w<T.length;w++){var M=x[T[w]].domain;M&&(_=Math.max(M[1],_))}return[o.domain[0],_+r.yPad]}(t,p,s);l("x",h[0]),l("y",h[1]),g.noneOrAll(a,t,["x","y"]),l("xanchor"),l("yanchor"),g.coerceFont(l,"font",p.font);var d=l("bgcolor");l("activecolor",m.contrast(d,r.lightAmount,r.darkAmount)),l("bordercolor"),l("borderwidth")}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../plots/plots"),y=v("../color"),e=v("../drawing"),r=v("../../lib"),n=r.strTranslate,a=v("../../lib/svg_text_utils"),t=v("../../plots/cartesian/axis_ids"),p=v("../../constants/alignment"),s=p.LINE_SPACING,i=p.FROM_TL,f=p.FROM_BR,c=v("./constants"),l=v("./get_update_object");function h(x){return x._id}function d(x,u,T){var w,M,_=r.ensureSingle(x,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});_.attr({rx:c.rx,ry:c.ry}),_.call(y.stroke,u.bordercolor).call(y.fill,(w=u,M=T,M._isActive||M._isHovered?w.activecolor:w.bgcolor)).style("stroke-width",u.borderwidth+"px")}function o(x,u,T,_){var w,M;r.ensureSingle(x,"text","selector-text",function(w){w.attr("text-anchor","middle")}).call(e.font,u.font).text((w=T,M=_._fullLayout._meta,w.label?M?r.templateString(w.label,M):w.label:"all"===w.step?"all":w.count+w.step.charAt(0))).call(function(w){a.convertToTspans(w,_)})}re.exports=function(x){var u=x._fullLayout._infolayer.selectAll(".rangeselector").data(function(T){for(var _=t.list(T,"x",!0),w=[],M=0;M<_.length;M++){var I=_[M];I.rangeselector&&I.rangeselector.visible&&w.push(I)}return w}(x),h);u.enter().append("g").classed("rangeselector",!0),u.exit().remove(),u.style({cursor:"pointer","pointer-events":"all"}),u.each(function(T){var _=g.select(this),w=T,M=w.rangeselector,I=_.selectAll("g.button").data(r.filterVisible(M.buttons));I.enter().append("g").classed("button",!0),I.exit().remove(),I.each(function(S){var R=g.select(this),O=l(w,S);S._isActive=function(C,D,B){if("all"===D.step)return!0===C.autorange;var z=Object.keys(B);return C.range[0]===B[z[0]]&&C.range[1]===B[z[1]]}(w,S,O),R.call(d,M,S),R.call(o,M,S,x),R.on("click",function(){x._dragged||m.call("_guiRelayout",x,O)}),R.on("mouseover",function(){S._isHovered=!0,R.call(d,M,S)}),R.on("mouseout",function(){S._isHovered=!1,R.call(d,M,S)})}),function(S,R,O,C,D){var B=0,z=0,Y=O.borderwidth;R.each(function(){var ae=g.select(this).select(".selector-text"),V=Math.max(O.font.size*s*a.lineCount(ae),16)+3;z=Math.max(z,V)}),R.each(function(){var ae=g.select(this),U=ae.select(".selector-rect"),V=ae.select(".selector-text"),q=V.node()&&e.bBox(V.node()).width,ie=O.font.size*s,H=a.lineCount(V),ee=Math.max(q+10,c.minButtonWidth);ae.attr("transform",n(Y+B,Y)),U.attr({x:0,y:0,width:ee,height:z}),a.positionText(V,ee/2,z/2-(H-1)*ie/2+3),B+=ee+5});var G=S._fullLayout._size,J=G.l+G.w*O.x,te=G.t+G.h*(1-O.y),X="left";r.isRightAnchor(O)&&(J-=B,X="right"),r.isCenterAnchor(O)&&(J-=B/2,X="center");var K="top";r.isBottomAnchor(O)&&(te-=z,K="bottom"),r.isMiddleAnchor(O)&&(te-=z/2,K="middle"),B=Math.ceil(B),z=Math.ceil(z),J=Math.round(J),te=Math.round(te),b.autoMargin(S,C+"-range-selector",{x:O.x,y:O.y,l:B*i[X],r:B*f[X],b:z*f[K],t:z*i[K]}),D.attr("transform",n(J,te))}(x,I,M,w._name,_)})}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(v,re,ne){"use strict";var g=v("d3-time"),m=v("../../lib").titleCase;re.exports=function(b,y){var e=b._name,r={};if("all"===y.step)r[e+".autorange"]=!0;else{var n=function(a,t){var p,s=a.range,i=new Date(a.r2l(s[1])),c=g["utc"+m(t.step)],l=t.count;switch(t.stepmode){case"backward":p=a.l2r(+c.offset(i,-l));break;case"todate":var h=c.offset(i,-l);p=a.l2r(+c.ceil(h))}return[p,s[1]]}(b,y);r[e+".range[0]"]=n[0],r[e+".range[1]"]=n[1]}return r}},{"../../lib":515,"d3-time":122}],438:[function(v,re,ne){"use strict";re.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:v("./attributes")}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(v,re,ne){"use strict";var g=v("../color/attributes");re.exports={bgcolor:{valType:"color",dflt:g.background,editType:"plot"},bordercolor:{valType:"color",dflt:g.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axis_ids").list,m=v("../../plots/cartesian/autorange").getAutoRange,b=v("./constants");re.exports=function(y){for(var e=g(y,"x",!0),r=0;r<e.length;r++){var n=e[r],a=n[b.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=m(y,n))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(v,re,ne){"use strict";re.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plot_api/plot_template"),b=v("../../plots/cartesian/axis_ids"),y=v("./attributes"),e=v("./oppaxis_attributes");re.exports=function(r,n,a){var t=r[a],p=n[a];if(t.rangeslider||n._requestRangeslider[p._id]){g.isPlainObject(t.rangeslider)||(t.rangeslider={});var s,i,f=t.rangeslider,c=m.newContainer(p,"rangeslider");if(_("visible")){_("bgcolor",n.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!p.isValidRange(f.range)),_("range");var l=n._subplots;if(l)for(var h=l.cartesian.filter(function(M){return M.substr(0,M.indexOf("y"))===b.name2id(a)}).map(function(M){return M.substr(M.indexOf("y"),M.length)}),d=g.simpleMap(h,b.id2name),o=0;o<d.length;o++){var x=d[o];s=f[x]||{},i=m.newContainer(c,x,"yaxis");var u,T=n[x];s.range&&T.isValidRange(s.range)&&(u="fixed"),"match"!==w("rangemode",u)&&w("range",T.range.slice())}c._input=f}}function _(M,I){return g.coerce(f,c,y,M,I)}function w(M,I){return g.coerce(s,i,e,M,I)}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../plots/plots"),y=v("../../lib"),e=y.strTranslate,r=v("../drawing"),n=v("../color"),a=v("../titles"),t=v("../../plots/cartesian"),p=v("../../plots/cartesian/axis_ids"),s=v("../dragelement"),i=v("../../lib/setcursor"),f=v("./constants");function c(u,T,_,w){var M=y.ensureSingle(u,"rect",f.bgClassName,function(O){O.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),I=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,S=-w._offsetShift,R=r.crispRound(T,w.borderwidth);M.attr({width:w._width+I,height:w._height+I,transform:e(S,S),fill:w.bgcolor,stroke:w.bordercolor,"stroke-width":R})}function l(u,T,_,w){y.ensureSingleById(T._fullLayout._topdefs,"clipPath",w._clipId,function(I){I.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function h(u,T,_,w){var M,I=T.calcdata,S=u.selectAll("g."+f.rangePlotClassName).data(_._subplotsWith,y.identity);S.enter().append("g").attr("class",function(R){return f.rangePlotClassName+" "+R}).call(r.setClipUrl,w._clipId,T),S.order(),S.exit().remove(),S.each(function(R,O){var C=g.select(this),D=0===O,B=p.getFromId(T,R,"y"),z=B._name,Y=w[z],G={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:w.range.slice(),calendar:_.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:T._context};_.rangebreaks&&(G.layout.xaxis.rangebreaks=_.rangebreaks),G.layout[z]={type:B.type,domain:[0,1],range:"match"!==Y.rangemode?Y.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(G.layout[z].rangebreaks=B.rangebreaks),b.supplyDefaults(G);var J=G._fullLayout.xaxis,te=G._fullLayout[z];J.clearCalc(),J.setScale(),te.clearCalc(),te.setScale();var X={id:R,plotgroup:C,xaxis:J,yaxis:te,isRangePlot:!0};D?M=X:(X.mainplot="xy",X.mainplotinfo=M),t.rangePlot(T,X,function(K,ae){for(var U=[],V=0;V<K.length;V++){var q=K[V],ie=q[0].trace;ie.xaxis+ie.yaxis===ae&&U.push(q)}return U}(I,R))})}function d(u,T,_,w,M){y.ensureSingle(u,"rect",f.maskMinClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(n.fill,f.maskColor),y.ensureSingle(u,"rect",f.maskMaxClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(n.fill,f.maskColor),"match"!==M.rangemode&&(y.ensureSingle(u,"rect",f.maskMinOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(n.fill,f.maskOppAxisColor),y.ensureSingle(u,"rect",f.maskMaxOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",f.maskOppBorder).call(n.fill,f.maskOppAxisColor))}function o(u,T,_,w){T._context.staticPlot||y.ensureSingle(u,"rect",f.slideBoxClassName,function(M){M.attr({y:0,cursor:f.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:f.slideBoxFill})}function x(u,T,_,w){var M=y.ensureSingle(u,"g",f.grabberMinClassName),I=y.ensureSingle(u,"g",f.grabberMaxClassName),S={x:0,width:f.handleWidth,rx:f.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":f.handleStrokeWidth,"shape-rendering":"crispEdges"},R={y:Math.round(w._height/4),height:Math.round(w._height/2)};y.ensureSingle(M,"rect",f.handleMinClassName,function(C){C.attr(S)}).attr(R),y.ensureSingle(I,"rect",f.handleMaxClassName,function(C){C.attr(S)}).attr(R);var O={width:f.grabAreaWidth,x:0,y:0,fill:f.grabAreaFill,cursor:T._context.staticPlot?void 0:f.grabAreaCursor};y.ensureSingle(M,"rect",f.grabAreaMinClassName,function(C){C.attr(O)}).attr("height",w._height),y.ensureSingle(I,"rect",f.grabAreaMaxClassName,function(C){C.attr(O)}).attr("height",w._height)}re.exports=function(u){for(var T=u._fullLayout,_=T._rangeSliderData,w=0;w<_.length;w++){var M=_[w][f.name];M._clipId=M._id+"-"+T._uid}var I=T._infolayer.selectAll("g."+f.containerClassName).data(_,function(S){return S._name});I.exit().each(function(S){T._topdefs.select("#"+S[f.name]._clipId).remove()}).remove(),0!==_.length&&(I.enter().append("g").classed(f.containerClassName,!0).attr("pointer-events","all"),I.each(function(S){var R=g.select(this),O=S[f.name],C=T[p.id2name(S.anchor)],D=O[p.id2name(S.anchor)];if(O.range){var B,z=y.simpleMap(O.range,S.r2l),Y=y.simpleMap(S.range,S.r2l);B=Y[0]<Y[1]?[Math.min(z[0],Y[0]),Math.max(z[1],Y[1])]:[Math.max(z[0],Y[0]),Math.min(z[1],Y[1])],O.range=O._input.range=y.simpleMap(B,S.l2r)}S.cleanRange("rangeslider.range");var G=T._size,J=S.domain;O._width=G.w*(J[1]-J[0]);var te=Math.round(G.l+G.w*J[0]),X=Math.round(G.t+G.h*(1-S._counterDomainMin)+("bottom"===S.side?S._depth:0)+O._offsetShift+f.extraPad);R.attr("transform",e(te,X)),O._rl=y.simpleMap(O.range,S.r2l);var K=O._rl[0],ae=O._rl[1],U=ae-K;if(O.p2d=function(de){return de/O._width*U+K},O.d2p=function(de){return(de-K)/U*O._width},S.rangebreaks){var V=S.locateBreaks(K,ae);if(V.length){var q,ie,H=0;for(q=0;q<V.length;q++)H+=(ie=V[q]).max-ie.min;var ee=O._width/(ae-K-H),Q=[-ee*K];for(q=0;q<V.length;q++)Q.push(Q[Q.length-1]-ee*((ie=V[q]).max-ie.min));for(O.d2p=function(de){for(var fe=Q[0],be=0;be<V.length;be++){var he=V[be];if(de>=he.max)fe=Q[be+1];else if(de<he.min)break}return fe+ee*de},q=0;q<V.length;q++)(ie=V[q]).pmin=O.d2p(ie.min),ie.pmax=O.d2p(ie.max);O.p2d=function(de){for(var fe=Q[0],be=0;be<V.length;be++){var he=V[be];if(de>=he.pmax)fe=Q[be+1];else if(de<he.pmin)break}return(de-fe)/ee}}}if("match"!==D.rangemode){var oe=C.r2l(D.range[0]),le=C.r2l(D.range[1])-oe;O.d2pOppAxis=function(de){return(de-oe)/le*O._height}}R.call(c,u,S,O).call(l,u,S,O).call(h,u,S,O).call(d,u,S,O,D).call(o,u,S,O).call(x,u,S,O),function(de,fe,be,he){if(!fe._context.staticPlot){var _e=de.select("rect."+f.slideBoxClassName).node(),Ce=de.select("rect."+f.grabAreaMinClassName).node(),Ee=de.select("rect."+f.grabAreaMaxClassName).node();de.on("mousedown",Ae),de.on("touchstart",Ae)}function Ae(){var ze=g.event,ve=ze.target,Te=ze.clientX||ze.touches[0].clientX,Ie=Te-de.node().getBoundingClientRect().left,De=he.d2p(be._rl[0]),Fe=he.d2p(be._rl[1]),Ue=s.coverSlip();function qe(rt){var Ne,Be,We,Ye=+(rt.clientX||rt.touches[0].clientX)-Te;switch(ve){case _e:We="ew-resize",Ne=De+Ye,Be=Fe+Ye;break;case Ce:We="col-resize",Ne=De+Ye,Be=Fe;break;case Ee:We="col-resize",Ne=De,Be=Fe+Ye;break;default:We="ew-resize",Ne=Ie,Be=Ie+Ye}if(Be<Ne){var lt=Be;Be=Ne,Ne=lt}he._pixelMin=Ne,he._pixelMax=Be,i(g.select(Ue),We),function(mt,Tt,It,Ct){function ct(Xt){return It.l2r(y.constrain(Xt,Ct._rl[0],Ct._rl[1]))}var at=ct(Ct.p2d(Ct._pixelMin)),St=ct(Ct.p2d(Ct._pixelMax));window.requestAnimationFrame(function(){m.call("_guiRelayout",Tt,It._name+".range",[at,St])})}(0,fe,be,he)}function je(){Ue.removeEventListener("mousemove",qe),Ue.removeEventListener("mouseup",je),this.removeEventListener("touchmove",qe),this.removeEventListener("touchend",je),y.removeElement(Ue)}this.addEventListener("touchmove",qe),this.addEventListener("touchend",je),Ue.addEventListener("mousemove",qe),Ue.addEventListener("mouseup",je)}}(R,u,S,O),function(de,fe,be,he,_e,Ce){var Ee=f.handleWidth/2;function Ae(je){return y.constrain(je,0,he._width)}function ze(je){return y.constrain(je,0,he._height)}function ve(je){return y.constrain(je,-Ee,he._width+Ee)}var Te=Ae(he.d2p(be._rl[0])),Ie=Ae(he.d2p(be._rl[1]));if(de.select("rect."+f.slideBoxClassName).attr("x",Te).attr("width",Ie-Te),de.select("rect."+f.maskMinClassName).attr("width",Te),de.select("rect."+f.maskMaxClassName).attr("x",Ie).attr("width",he._width-Ie),"match"!==Ce.rangemode){var De=he._height-ze(he.d2pOppAxis(_e._rl[1])),Fe=he._height-ze(he.d2pOppAxis(_e._rl[0]));de.select("rect."+f.maskMinOppAxisClassName).attr("x",Te).attr("height",De).attr("width",Ie-Te),de.select("rect."+f.maskMaxOppAxisClassName).attr("x",Te).attr("y",Fe).attr("height",he._height-Fe).attr("width",Ie-Te),de.select("rect."+f.slideBoxClassName).attr("y",De).attr("height",Fe-De)}var Ue=Math.round(ve(Te-Ee))-.5,qe=Math.round(ve(Ie-Ee))+.5;de.select("g."+f.grabberMinClassName).attr("transform",e(Ue,.5)),de.select("g."+f.grabberMaxClassName).attr("transform",e(qe,.5))}(R,0,S,O,C,D),"bottom"===S.side&&a.draw(u,S._id+"title",{propContainer:S,propName:S._name+".title",placeholder:T._dfltTitle.x,attributes:{x:S._offset+S._length/2,y:X+O._height+O._offsetShift+10+1.5*S.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axis_ids"),m=v("../../lib/svg_text_utils"),b=v("./constants"),y=v("../../constants/alignment").LINE_SPACING,e=b.name;function r(n){var a=n&&n[e];return a&&a.visible}ne.isVisible=r,ne.makeData=function(n){var a=g.list({_fullLayout:n},"x",!0),t=n.margin,p=[];if(!n._has("gl2d"))for(var s=0;s<a.length;s++){var i=a[s];if(r(i)){p.push(i);var f=i[e];f._id=e+i._id,f._height=(n.height-t.b-t.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2)}}n._rangeSliderData=p},ne.autoMarginOpts=function(n,a){var t=n._fullLayout,p=a[e],s=a._id.charAt(0),i=0,f=0;return"bottom"===a.side&&(i=a._depth,a.title.text!==t._dfltTitle[s]&&(f=1.5*a.title.font.size+10+p._offsetShift,f+=(a.title.text.match(m.BR_TAG_ALL)||[]).length*a.title.font.size*y)),{x:0,y:a._counterDomainMin,l:0,r:0,t:0,b:p._height+i+Math.max(t.margin.b,f),pad:b.extraPad+2*p._offsetShift}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("./oppaxis_attributes"),y=v("./helpers");re.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:g.extendFlat({},m,{yaxis:b})}}},layoutAttributes:v("./attributes"),handleDefaults:v("./defaults"),calcAutorange:v("./calc_autorange"),draw:v("./draw"),isVisible:y.isVisible,makeData:y.makeData,autoMarginOpts:y.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(v,re,ne){"use strict";re.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(v,re,ne){"use strict";var g=v("../annotations/attributes"),m=v("../../traces/scatter/attributes").line,b=v("../drawing/attributes").dash,y=v("../../lib/extend").extendFlat,e=v("../../plot_api/edit_types").overrideAll,r=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),re.exports=e(r("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:y({},g.xref,{}),yref:y({},g.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:m.color,width:y({},m.width,{min:1,dflt:1}),dash:y({},b,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(v,re,ne){"use strict";re.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./attributes"),e=v("../shapes/helpers");function r(n,a,t){function p(R,O){return g.coerce(n,a,y,R,O)}var s=p("path"),i="path"!==p("type",s?"path":"rect");i&&delete a.path,p("opacity"),p("line.color"),p("line.width"),p("line.dash");for(var f=["x","y"],c=0;c<2;c++){var l,h,d,o=f[c],x={_fullLayout:t},u=m.coerceRef(n,a,x,o);if((l=m.getFromId(x,u))._selectionIndices.push(a._index),d=e.rangeToShapePosition(l),h=e.shapePositionToRange(l),i){var T=o+"0",_=o+"1",w=n[T],M=n[_];n[T]=h(n[T],!0),n[_]=h(n[_],!0),m.coercePosition(a,x,p,u,T),m.coercePosition(a,x,p,u,_);var I=a[T],S=a[_];void 0!==I&&void 0!==S&&(a[T]=d(I),a[_]=d(S),n[T]=w,n[_]=M)}}i&&g.noneOrAll(n,a,["x0","x1","y0","y1"])}re.exports=function(n,a){b(n,a,{name:"selections",handleItemDefaults:r});for(var t=a.selections,p=0;p<t.length;p++){var s=t[p];s&&void 0===s.path&&(void 0!==s.x0&&void 0!==s.x1&&void 0!==s.y0&&void 0!==s.y1||(a.selections[p]=null))}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(v,re,ne){"use strict";var g=v("../shapes/draw_newshape/helpers").readPaths,m=v("../shapes/display_outlines"),b=v("../shapes/handle_outline").clearOutlineControllers,y=v("../color"),e=v("../drawing"),r=v("../../plot_api/plot_template").arrayEditor,n=v("../shapes/helpers"),a=n.getPathString;function t(c){var l=c._fullLayout;for(var h in b(c),l._selectionLayer.selectAll("path").remove(),l._plots){var d=l._plots[h].selectionLayer;d&&d.selectAll("path").remove()}for(var o=0;o<l.selections.length;o++)s(c,o)}function p(c){return c._context.editSelection}function s(c,l){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+l+'"]').remove();var h=n.makeSelectionsOptionsAndPlotinfo(c,l),d=h.options,o=h.plotinfo;d._input&&function(x){var u=a(c,d),T={"data-index":l,"fill-rule":"evenodd",d:u},_=d.opacity,w="rgba(0,0,0,0)",M=d.line.color||y.contrast(c._fullLayout.plot_bgcolor),I=d.line.width,S=d.line.dash;I||(I=5,S="solid");var R=p(c)&&c._fullLayout._activeSelectionIndex===l;R&&(w=c._fullLayout.activeselection.fillcolor,_=c._fullLayout.activeselection.opacity);for(var O=[],C=1;C>=0;C--){var D=x.append("path").attr(T).style("opacity",C?.1:_).call(y.stroke,M).call(y.fill,w).call(e.dashLine,C?"solid":S,C?4+I:I);if(i(D,c,d),R){var B=r(c.layout,"selections",d);D.style({cursor:"move"});var z={element:D.node(),plotinfo:o,gd:c,editHelpers:B,isActiveSelection:!0},Y=g(u,c);m(Y,D,z)}else D.style("pointer-events",C?"all":"none");O[C]=D}var G=O[0];O[1].node().addEventListener("click",function(){return function(J,te){if(p(J)){var X=+te.node().getAttribute("data-index");if(X>=0){if(X===J._fullLayout._activeSelectionIndex)return void f(J);J._fullLayout._activeSelectionIndex=X,J._fullLayout._deactivateSelection=f,t(J)}}}(c,G)})}(c._fullLayout._selectionLayer)}function i(c,l,h){e.setClipUrl(c,"clip"+l._fullLayout._uid+(h.xref+h.yref),l)}function f(c){p(c)&&c._fullLayout._activeSelectionIndex>=0&&(b(c),delete c._fullLayout._activeSelectionIndex,t(c))}re.exports={draw:t,drawOne:s,activateLastSelection:function(c){p(c)&&(c._fullLayout._activeSelectionIndex=c._fullLayout.selections.length-1,c._fullLayout._deactivateSelection=f,t(c))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(v,re,ne){"use strict";var g=v("../../drawing/attributes").dash,m=v("../../../lib/extend").extendFlat;re.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:m({},g,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(v,re,ne){"use strict";re.exports=function(g,m,b){b("newselection.mode"),b("newselection.line.width")&&(b("newselection.line.color"),b("newselection.line.dash")),b("activeselection.fillcolor"),b("activeselection.opacity")}},{}],453:[function(v,re,ne){"use strict";var g=v("../../dragelement/helpers").selectMode,m=v("../../shapes/handle_outline").clearOutline,b=v("../../shapes/draw_newshape/helpers"),y=b.readPaths,e=b.writePaths,r=b.fixDatesForPaths;re.exports=function(n,a){if(n.length){var t=n[0][0];if(t){var p=t.getAttribute("d"),s=a.gd,i=s._fullLayout.newselection,f=a.plotinfo,c=f.xaxis,l=f.yaxis,h=a.isActiveSelection,d=a.dragmode,o=(s.layout||{}).selections||[];if(!g(d)&&void 0!==h){var x=s._fullLayout._activeSelectionIndex;if(x<o.length)switch(s._fullLayout.selections[x].type){case"rect":d="select";break;case"path":d="lasso"}}var u,T=y(p,s,f,h),_={xref:c._id,yref:l._id,opacity:i.opacity,line:{color:i.line.color,width:i.line.width,dash:i.line.dash}};1===T.length&&(u=T[0]),u&&5===u.length&&"select"===d?(_.type="rect",_.x0=u[0][1],_.y0=u[0][2],_.x1=u[2][1],_.y1=u[2][2]):(_.type="path",c&&l&&r(T,c,l),_.path=e(T),u=null),m(s);for(var w=a.editHelpers,M=(w||{}).modifyItem,I=[],S=0;S<o.length;S++){var R=s._fullLayout.selections[S];if(R){if(I[S]=R._input,void 0!==h&&S===s._fullLayout._activeSelectionIndex){var O=_;switch(R.type){case"rect":M("x0",O.x0),M("x1",O.x1),M("y0",O.y0),M("y1",O.y1);break;case"path":M("path",O.path)}}}else I[S]=R}return void 0===h?(I.push(_),I):w?w.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(v,re,ne){"use strict";var g=v("../../lib").strTranslate;function m(b,y){switch(b.type){case"log":return b.p2d(y);case"date":return b.p2r(y,0,b.calendar);default:return b.p2r(y)}}re.exports={p2r:m,r2p:function(b,y){switch(b.type){case"log":return b.d2p(y);case"date":return b.r2p(y,0,b.calendar);default:return b.r2p(y)}},axValue:function(b){var y="y"===b._id.charAt(0)?1:0;return function(e){return m(b,e[y])}},getTransform:function(b){return g(b.xaxis._offset,b.yaxis._offset)}}},{"../../lib":515}],455:[function(v,re,ne){"use strict";var g=v("./draw"),m=v("./select");re.exports={moduleType:"component",name:"selections",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),supplyDrawNewSelectionDefaults:v("./draw_newselection/defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("selections"),draw:g.draw,drawOne:g.drawOne,reselect:m.reselect,prepSelect:m.prepSelect,clearOutline:m.clearOutline,clearSelectionsCache:m.clearSelectionsCache,selectOnClick:m.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(v,re,ne){"use strict";var g=v("polybooljs"),m=v("point-in-polygon/nested"),b=v("../../registry"),y=v("../drawing").dashStyle,e=v("../color"),r=v("../fx"),n=v("../fx/helpers").makeEventData,a=v("../dragelement/helpers"),t=a.freeMode,p=a.rectMode,s=a.drawMode,i=a.openMode,f=a.selectMode,c=v("../shapes/helpers"),l=v("../shapes/constants"),h=v("../shapes/display_outlines"),d=v("../shapes/handle_outline").clearOutline,o=v("../shapes/draw_newshape/helpers"),x=o.handleEllipse,u=o.readPaths,T=v("../shapes/draw_newshape/newshapes"),_=v("./draw_newselection/newselections"),w=v("./draw").activateLastSelection,M=v("../../lib"),I=M.sorterAsc,S=v("../../lib/polygon"),R=v("../../lib/throttle"),O=v("../../plots/cartesian/axis_ids").getFromId,C=v("../../lib/clear_gl_canvases"),D=v("../../plot_api/subroutines").redrawReglTraces,B=v("./constants"),z=B.MINSELECT,Y=S.filter,G=S.tester,J=v("./helpers"),te=J.p2r,X=J.axValue,K=J.getTransform;function ae(je){return void 0!==je.subplot}function U(je,rt,Ne,Be,We,Ye,lt){var mt,Tt,It,Ct,ct,at,St,Xt,tn,ke,hn=rt._hoverdata,cn=rt._fullLayout.clickmode.indexOf("event")>-1,yn=[];if((ke=hn)&&Array.isArray(ke)&&!0!==ke[0].hoverOnBox){H(je,rt,Ye);var en=function(ke,Ve){var Je,nt,Ke=ke[0],vt=-1,gt=[];for(nt=0;nt<Ve.length;nt++)if(Ke.fullData._expandedIndex===(Je=Ve[nt]).cd[0].trace._expandedIndex){if(!0===Ke.hoverOnBox)break;void 0!==Ke.pointNumber?vt=Ke.pointNumber:void 0!==Ke.binNumber&&(vt=Ke.binNumber,gt=Ke.pointNumbers);break}return{pointNumber:vt,pointNumbers:gt,searchInfo:Je}}(hn,mt=oe(rt,Ne,Be,We));if(en.pointNumbers.length>0?function(ke,Ve){var Je,nt,Ke,vt=[];for(Ke=0;Ke<ke.length;Ke++)(Je=ke[Ke]).cd[0].trace.selectedpoints&&Je.cd[0].trace.selectedpoints.length>0&&vt.push(Je);if(1===vt.length&&vt[0]===Ve.searchInfo&&(nt=Ve.searchInfo.cd[0].trace).selectedpoints.length===Ve.pointNumbers.length){for(Ke=0;Ke<Ve.pointNumbers.length;Ke++)if(nt.selectedpoints.indexOf(Ve.pointNumbers[Ke])<0)return!1;return!0}return!1}(mt,en):function(ke){var Je,nt,Ke=0;for(nt=0;nt<ke.length;nt++)if((Je=ke[nt].cd[0].trace).selectedpoints&&(Je.selectedpoints.length>1||(Ke+=Je.selectedpoints.length)>1))return!1;return 1===Ke}(mt)&&(at=de(en))){for(lt&&lt.remove(),tn=0;tn<mt.length;tn++)(Tt=mt[tn])._module.selectPoints(Tt,!1);fe(rt,mt),ee(Ye),cn&&qe(rt)}else{for(St=je.shiftKey&&(void 0!==at?at:de(en)),It=function(ke,Ve,Je){return{pointNumber:ke,searchInfo:Ve,subtract:!!Je}}(en.pointNumber,en.searchInfo,St),Ct=ie(Ye.selectionDefs.concat([It])),tn=0;tn<mt.length;tn++)if(ct=he(mt[tn]._module.selectPoints(mt[tn],Ct),mt[tn]),yn.length)for(var Xe=0;Xe<ct.length;Xe++)yn.push(ct[Xe]);else yn=ct;if(fe(rt,mt,Xt={points:yn}),It&&Ye&&Ye.selectionDefs.push(It),lt){var tt=Ye.mergedPolygons,ye=i(Ye.dragmode);h(_e(tt,ye),lt,Ye)}cn&&Ue(rt,Xt)}}}function V(je){return"pointNumber"in je&&"searchInfo"in je}function q(je){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(rt,Ne,Be,We){return We.cd[0].trace._expandedIndex===je.searchInfo.cd[0].trace._expandedIndex&&Be===je.pointNumber},isRect:!1,degenerate:!1,subtract:!!je.subtract}}function ie(je){if(je.length){for(var rt=[],Ne=V(je[0])?0:je[0][0][0],Be=Ne,We=V(je[0])?0:je[0][0][1],Ye=We,lt=0;lt<je.length;lt++)if(V(je[lt]))rt.push(q(je[lt]));else{var mt=G(je[lt]);mt.subtract=!!je[lt].subtract,rt.push(mt),Ne=Math.min(Ne,mt.xmin),Be=Math.max(Be,mt.xmax),We=Math.min(We,mt.ymin),Ye=Math.max(Ye,mt.ymax)}return{xmin:Ne,xmax:Be,ymin:We,ymax:Ye,pts:[],contains:function(Tt,It,Ct,ct){for(var at=!1,St=0;St<rt.length;St++)rt[St].contains(Tt,It,Ct,ct)&&(at=!rt[St].subtract);return at},isRect:!1,degenerate:!1}}}function H(je,rt,Ne){var Be=rt._fullLayout,We=Ne.plotinfo,Ye=Ne.dragmode,lt=Be._lastSelectedSubplot&&Be._lastSelectedSubplot===We.id,mt=(je.shiftKey||je.altKey)&&!(s(Ye)&&i(Ye));lt&&mt&&We.selection&&We.selection.selectionDefs&&!Ne.selectionDefs?(Ne.selectionDefs=We.selection.selectionDefs,Ne.mergedPolygons=We.selection.mergedPolygons):mt&&We.selection||ee(Ne),lt||(d(rt),Be._lastSelectedSubplot=We.id)}function ee(je,rt){var Ne=je.dragmode,Be=je.plotinfo,We=je.gd;We._fullLayout._activeShapeIndex>=0&&We._fullLayout._deactivateShape(We),We._fullLayout._activeSelectionIndex>=0&&We._fullLayout._deactivateSelection(We);var Ye=We._fullLayout._zoomlayer,lt=s(Ne),mt=f(Ne);if(lt||mt){var Tt,It,Ct=Ye.selectAll(".select-outline-"+Be.id);Ct&&We._fullLayout._outlining&&(lt&&(Tt=T(Ct,je)),Tt&&b.call("_guiRelayout",We,{shapes:Tt}),mt&&!ae(je)&&(It=_(Ct,je)),It&&(We._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",We,{selections:It}).then(function(){rt&&w(We)})),We._fullLayout._outlining=!1)}Be.selection={},Be.selection.selectionDefs=je.selectionDefs=[],Be.selection.mergedPolygons=je.mergedPolygons=[]}function Q(je){return je._id}function oe(je,rt,Ne,Be){if(!je.calcdata)return[];var We,Ye,lt,mt=[],Tt=rt.map(Q),It=Ne.map(Q);for(lt=0;lt<je.calcdata.length;lt++)if(!0===(Ye=(We=je.calcdata[lt])[0].trace).visible&&Ye._module&&Ye._module.selectPoints)if(!ae({subplot:Be})||Ye.subplot!==Be&&Ye.geo!==Be)if("splom"===Ye.type){if(Ye._xaxes[Tt[0]]&&Ye._yaxes[It[0]]){var Ct=le(Ye._module,We,rt[0],Ne[0]);Ct.scene=je._fullLayout._splomScenes[Ye.uid],mt.push(Ct)}}else if("sankey"===Ye.type){var ct=le(Ye._module,We,rt[0],Ne[0]);mt.push(ct)}else{if(-1===Tt.indexOf(Ye.xaxis)||-1===It.indexOf(Ye.yaxis))continue;mt.push(le(Ye._module,We,O(je,Ye.xaxis),O(je,Ye.yaxis)))}else mt.push(le(Ye._module,We,rt[0],Ne[0]));return mt}function le(je,rt,Ne,Be){return{_module:je,cd:rt,xaxis:Ne,yaxis:Be}}function de(je){var rt=je.searchInfo.cd[0].trace,Be=je.pointNumbers;return!!rt.selectedpoints&&rt.selectedpoints.indexOf(Be.length>0?Be[0]:je.pointNumber)>-1}function fe(je,rt,Ne){var Be,We;for(Be=0;Be<rt.length;Be++){var Ye=rt[Be].cd[0].trace._fullInput,lt=je._fullLayout._tracePreGUI[Ye.uid]||{};void 0===lt.selectedpoints&&(lt.selectedpoints=Ye._input.selectedpoints||null)}if(Ne){var mt=Ne.points||[];for(Be=0;Be<rt.length;Be++)(We=rt[Be].cd[0].trace)._input.selectedpoints=We._fullInput.selectedpoints=[],We._fullInput!==We&&(We.selectedpoints=[]);for(var Tt=0;Tt<mt.length;Tt++){var It=mt[Tt],Ct=It.data,ct=It.fullData,at=It.pointIndex,St=It.pointIndices;St?([].push.apply(Ct.selectedpoints,St),We._fullInput!==We&&[].push.apply(ct.selectedpoints,St)):(Ct.selectedpoints.push(at),We._fullInput!==We&&ct.selectedpoints.push(at))}}else for(Be=0;Be<rt.length;Be++)delete(We=rt[Be].cd[0].trace).selectedpoints,delete We._input.selectedpoints,We._fullInput!==We&&delete We._fullInput.selectedpoints;!function(Xt,tn){for(var hn=!1,cn=0;cn<tn.length;cn++){var yn=tn[cn],en=yn.cd;b.traceIs(en[0].trace,"regl")&&(hn=!0);var Xe=yn._module,tt=Xe.styleOnSelect||Xe.style;tt&&(tt(Xt,en,en[0].node3),en[0].nodeRangePlot3&&tt(Xt,en,en[0].nodeRangePlot3))}hn&&(C(Xt),D(Xt))}(je,rt)}function be(je,rt,Ne){for(var Be=(Ne?g.difference:g.union)({regions:je},{regions:[rt]}).regions.reverse(),We=0;We<Be.length;We++){var Ye=Be[We];Ye.subtract=Te(Ye,Be.slice(0,We))}return Be}function he(je,rt){if(Array.isArray(je))for(var Ne=rt.cd,Be=rt.cd[0].trace,We=0;We<je.length;We++)je[We]=n(je[We],Be,Ne);return je}function _e(je,rt){for(var Ne=[],Be=0;Be<je.length;Be++){Ne[Be]=[];for(var We=0;We<je[Be].length;We++){Ne[Be][We]=[],Ne[Be][We][0]=We?"L":"M";for(var Ye=0;Ye<je[Be][We].length;Ye++)Ne[Be][We].push(je[Be][We][Ye])}rt||Ne[Be].push(["Z",Ne[Be][0][1],Ne[Be][0][2]])}return Ne}function Ce(je,rt){for(var Ne,Be,We=[],Ye=[],lt=0;lt<rt.length;lt++){var mt=rt[lt];Be=mt._module.selectPoints(mt,je),Ye.push(Be),Ne=he(Be,mt),We=We.concat(Ne)}return We}function Ee(je,rt,Ne,Be,We){var Ye,lt,mt,Tt=!!Be;We&&(Ye=We.plotinfo,lt=We.xaxes[0]._id,mt=We.yaxes[0]._id);var It=[],Ct=[],ct=ve(je),at=je._fullLayout;if(Ye){var St=at._zoomlayer,Xt=at.dragmode,tn=s(Xt),hn=f(Xt);if(tn||hn){var cn=O(je,lt,"x"),yn=O(je,mt,"y");if(cn&&yn){var en=St.selectAll(".select-outline-"+Ye.id);if(en&&je._fullLayout._outlining&&en.length){for(var Xe=en[0][0].getAttribute("d"),tt=u(Xe,je,Ye),ye=[],ke=0;ke<tt.length;ke++){for(var Ve=tt[ke],Je=[],nt=0;nt<Ve.length;nt++)Je.push([Ie(cn,Ve[nt][1]),Ie(yn,Ve[nt][2])]);Je.xref=lt,Je.yref=mt,Je.subtract=Te(Je,ye),ye.push(Je)}ct=ct.concat(ye)}}}}var Ke=lt&&mt?[lt+mt]:at._subplots.cartesian;!function(Kn){var Bn=Kn.calcdata;if(Bn)for(var cr=0;cr<Bn.length;cr++){var Qn=Kn._fullLayout._splomScenes;if(Qn){var qr=Qn[Bn[cr][0].trace.uid];qr&&(qr.selectBatch=[])}}}(je);for(var vt={},gt=0;gt<Ke.length;gt++){var Ot=Ke[gt],Vt=Ot.indexOf("y"),ft=Ot.slice(0,Vt),bt=Ot.slice(Vt),Wt=lt&&mt?Ne:void 0;if(Wt=ze(ct,ft,bt,Wt)){var Pt=Be;if(!Tt){var Bt=O(je,ft,"x"),Pe=O(je,bt,"y");Pt=oe(je,[Bt],[Pe],Ot);for(var et=0;et<Pt.length;et++){var dt=Pt[et],xt=dt.cd[0],Rt=xt.trace;if("scattergl"===dt._module.name&&!xt.t.xpx){var Yt=Rt.x,nn=Rt.y,Kt=Rt._length;xt.t.xpx=[],xt.t.ypx=[];for(var Mn=0;Mn<Kt;Mn++)xt.t.xpx[Mn]=Bt.c2p(Yt[Mn]),xt.t.ypx[Mn]=Pe.c2p(nn[Mn])}"splom"===dt._module.name&&(vt[Rt.uid]||(vt[Rt.uid]=!0))}}var Un=Ce(Wt,Pt);It=It.concat(Un),Ct=Ct.concat(Pt)}}var Tn={points:It};fe(je,Ct,Tn);var un=at.clickmode.indexOf("event")>-1&&rt;if(!Ye&&rt){var an=ve(je,!0);if(an.length){var fn=an[0].xref,pn=an[0].yref;if(fn&&pn){var Sn=De(an);Fe([O(je,fn,"x"),O(je,pn,"y")])(Tn,Sn)}}je._fullLayout._noEmitSelectedAtStart?je._fullLayout._noEmitSelectedAtStart=!1:un&&Ue(je,Tn),at._reselect=!1}if(!Ye&&at._deselect){var Nn=at._deselect;(function(Kn,Bn,cr){for(var Lr=0;Lr<cr.length;Lr++){var Qn=cr[Lr];if(Qn.xaxis&&Qn.xaxis._id===Kn&&Qn.yaxis&&Qn.yaxis._id===Bn)return!0}return!1})(lt=Nn.xref,mt=Nn.yref,Ct)||Ae(je,lt,mt,Be),un&&(Tn.points.length?Ue(je,Tn):qe(je)),at._deselect=!1}return{eventData:Tn,selectionTesters:Ne}}function Ae(je,rt,Ne,Be){Be=oe(je,[O(je,rt,"x")],[O(je,Ne,"y")],rt+Ne);for(var We=0;We<Be.length;We++){var Ye=Be[We];Ye._module.selectPoints(Ye,!1)}fe(je,Be)}function ze(je,rt,Ne,Be){for(var We,Ye=0;Ye<je.length;Ye++){var lt=je[Ye];rt===lt.xref&&Ne===lt.yref&&(We?Be=ie(We=be(We,lt,!!lt.subtract)):(We=[lt],Be=G(lt)))}return Be}function ve(je,rt){for(var Ne=[],Be=je._fullLayout,We=Be.selections,Ye=We.length,lt=0;lt<Ye;lt++)if(!rt||lt===Be._activeSelectionIndex){var mt=We[lt];if(mt){var Tt,It,Ct,ct,at,St=mt.xref,Xt=mt.yref,tn=O(je,St,"x"),hn=O(je,Xt,"y");if("rect"===mt.type){at=[];var cn=Ie(tn,mt.x0),yn=Ie(tn,mt.x1),en=Ie(hn,mt.y0),Xe=Ie(hn,mt.y1);at=[[cn,en],[cn,Xe],[yn,Xe],[yn,en]],Tt=Math.min(cn,yn),It=Math.max(cn,yn),Ct=Math.min(en,Xe),ct=Math.max(en,Xe),at.xmin=Tt,at.xmax=It,at.ymin=Ct,at.ymax=ct,at.xref=St,at.yref=Xt,at.subtract=!1,at.isRect=!0,Ne.push(at)}else if("path"===mt.type)for(var tt=mt.path.split("Z"),ye=[],ke=0;ke<tt.length;ke++){var Ve=tt[ke];if(Ve){var Je=c.extractPathCoords(Ve+="Z",l.paramIsX,"raw"),nt=c.extractPathCoords(Ve,l.paramIsY,"raw");Tt=1/0,It=-1/0,Ct=1/0,ct=-1/0,at=[];for(var Ke=0;Ke<Je.length;Ke++){var vt=Ie(tn,Je[Ke]),gt=Ie(hn,nt[Ke]);at.push([vt,gt]),Tt=Math.min(vt,Tt),It=Math.max(vt,It),Ct=Math.min(gt,Ct),ct=Math.max(gt,ct)}at.xmin=Tt,at.xmax=It,at.ymin=Ct,at.ymax=ct,at.xref=St,at.yref=Xt,at.subtract=Te(at,ye),ye.push(at),Ne.push(at)}}}}return Ne}function Te(je,rt){for(var Ne=!1,Be=0;Be<rt.length;Be++)for(var We=rt[Be],Ye=0;Ye<je.length;Ye++)if(m(je[Ye],We)){Ne=!Ne;break}return Ne}function Ie(je,rt){return"date"===je.type&&(rt=rt.replace("_"," ")),"log"===je.type?je.c2p(rt):je.r2p(rt,null,je.calendar)}function De(je){for(var rt=je.length,Ne=[],Be=0;Be<rt;Be++){var We=je[Be];Ne=(Ne=Ne.concat(We)).concat([We[0]])}return(Ye=Ne).isRect=5===Ye.length&&Ye[0][0]===Ye[4][0]&&Ye[0][1]===Ye[4][1]&&Ye[0][0]===Ye[1][0]&&Ye[2][0]===Ye[3][0]&&Ye[0][1]===Ye[3][1]&&Ye[1][1]===Ye[2][1]||Ye[0][1]===Ye[1][1]&&Ye[2][1]===Ye[3][1]&&Ye[0][0]===Ye[3][0]&&Ye[1][0]===Ye[2][0],Ye.isRect&&(Ye.xmin=Math.min(Ye[0][0],Ye[2][0]),Ye.xmax=Math.max(Ye[0][0],Ye[2][0]),Ye.ymin=Math.min(Ye[0][1],Ye[2][1]),Ye.ymax=Math.max(Ye[0][1],Ye[2][1])),Ye;var Ye}function Fe(je){return function(rt,Ne){for(var Be,We,Ye=0;Ye<je.length;Ye++){var lt=je[Ye],mt=lt._id,Tt=mt.charAt(0);if(Ne.isRect){Be||(Be={});var It=Ne[Tt+"min"],Ct=Ne[Tt+"max"];void 0!==It&&void 0!==Ct&&(Be[mt]=[te(lt,It),te(lt,Ct)].sort(I))}else We||(We={}),We[mt]=Ne.map(X(lt))}Be&&(rt.range=Be),We&&(rt.lassoPoints=We)}}function Ue(je,rt){rt&&(rt.selections=(je.layout||{}).selections||[]),je.emit("plotly_selected",rt)}function qe(je){je.emit("plotly_deselect",null)}re.exports={reselect:Ee,prepSelect:function(je,rt,Ne,Be,We){var Ye=!ae(Be),lt=t(We),mt=p(We),Tt=i(We),It=s(We),Ct=f(We),ct="drawcircle"===We,at="drawline"===We||ct,St=Be.gd,Xt=St._fullLayout,tn=Ct&&"immediate"===Xt.newselection.mode&&Ye,hn=Xt._zoomlayer,cn=Be.element.getBoundingClientRect(),yn=Be.plotinfo,en=K(yn),Xe=rt-cn.left,tt=Ne-cn.top;Xt._calcInverseTransform(St);var ke,Ve,Je,nt,Ke,vt,gt,ye=M.apply3DTransform(Xt._invTransform)(Xe,tt),Ot=Xt._invScaleX,Vt=Xt._invScaleY,ft=Xe=ye[0],bt=tt=ye[1],Wt="M"+Xe+","+tt,Pt=Be.xaxes[0],Bt=Be.yaxes[0],Pe=Pt._length,et=Bt._length,dt=je.altKey&&!(s(We)&&Tt);H(je,St,Be),lt&&(ke=Y([[Xe,tt]],B.BENDPX));var xt=hn.selectAll("path.select-outline-"+yn.id).data([1]),Rt=It?Xt.newshape:Xt.newselection;xt.enter().append("path").attr("class","select-outline select-outline-"+yn.id).style({opacity:It?Rt.opacity/2:1,fill:It&&!Tt?Rt.fillcolor:"none",stroke:Rt.line.color||(Ye?e.contrast(St._fullLayout.plot_bgcolor):"#7f7f7f"),"stroke-dasharray":y(Rt.line.dash,Rt.line.width),"stroke-width":Rt.line.width+"px","shape-rendering":"crispEdges"}).attr("fill-rule","evenodd").classed("cursor-move",!!It).attr("transform",en).attr("d",Wt+"Z");var Yt=hn.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",en).attr("d","M0,0Z"),nn=Xt._uid+B.SELECTID,Kt=[],Mn=oe(St,Be.xaxes,Be.yaxes,Be.subplot);tn&&!je.shiftKey&&(Be._clearSubplotSelections=function(){if(Ye){var Tn=Pt._id,un=Bt._id;Ae(St,Tn,un,Mn);for(var an=(St.layout||{}).selections||[],fn=[],pn=!1,Sn=0;Sn<an.length;Sn++){var Nn=Xt.selections[Sn];Nn.xref!==Tn||Nn.yref!==un?fn.push(an[Sn]):pn=!0}pn&&(St._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",St,{selections:fn}))}});var Tn,Un=(Tn=Be).plotinfo.fillRangeItems||Fe(Tn.xaxes.concat(Tn.yaxes));Be.moveFn=function(Tn,un){Be._clearSubplotSelections&&(Be._clearSubplotSelections(),Be._clearSubplotSelections=void 0),ft=Math.max(0,Math.min(Pe,Ot*Tn+Xe)),bt=Math.max(0,Math.min(et,Vt*un+tt));var an=Math.abs(ft-Xe),fn=Math.abs(bt-tt);if(mt){var pn,Sn,Nn;if(Ct){var Kn=Xt.selectdirection;switch(pn="any"===Kn?fn<Math.min(.6*an,z)?"h":an<Math.min(.6*fn,z)?"v":"d":Kn){case"h":Sn=ct?et/2:0,Nn=et;break;case"v":Sn=ct?Pe/2:0,Nn=Pe}}if(It)switch(Xt.newshape.drawdirection){case"vertical":pn="h",Sn=ct?et/2:0,Nn=et;break;case"horizontal":pn="v",Sn=ct?Pe/2:0,Nn=Pe;break;case"ortho":an<fn?(pn="h",Sn=tt,Nn=bt):(pn="v",Sn=Xe,Nn=ft);break;default:pn="d"}"h"===pn?((nt=at?x(ct,[ft,Sn],[ft,Nn]):[[Xe,Sn],[Xe,Nn],[ft,Nn],[ft,Sn]]).xmin=at?ft:Math.min(Xe,ft),nt.xmax=at?ft:Math.max(Xe,ft),nt.ymin=Math.min(Sn,Nn),nt.ymax=Math.max(Sn,Nn),Yt.attr("d","M"+nt.xmin+","+(tt-z)+"h-4v"+2*z+"h4ZM"+(nt.xmax-1)+","+(tt-z)+"h4v"+2*z+"h-4Z")):"v"===pn?((nt=at?x(ct,[Sn,bt],[Nn,bt]):[[Sn,tt],[Sn,bt],[Nn,bt],[Nn,tt]]).xmin=Math.min(Sn,Nn),nt.xmax=Math.max(Sn,Nn),nt.ymin=at?bt:Math.min(tt,bt),nt.ymax=at?bt:Math.max(tt,bt),Yt.attr("d","M"+(Xe-z)+","+nt.ymin+"v-4h"+2*z+"v4ZM"+(Xe-z)+","+(nt.ymax-1)+"v4h"+2*z+"v-4Z")):"d"===pn&&((nt=at?x(ct,[Xe,tt],[ft,bt]):[[Xe,tt],[Xe,bt],[ft,bt],[ft,tt]]).xmin=Math.min(Xe,ft),nt.xmax=Math.max(Xe,ft),nt.ymin=Math.min(tt,bt),nt.ymax=Math.max(tt,bt),Yt.attr("d","M0,0Z"))}else lt&&(ke.addPt([ft,bt]),nt=ke.filtered);if(Be.selectionDefs&&Be.selectionDefs.length?(Je=be(Be.mergedPolygons,nt,dt),nt.subtract=dt,Ve=ie(Be.selectionDefs.concat([nt]))):(Je=[nt],Ve=G(nt)),h(_e(Je,Tt),xt,Be),Ct){var Bn,cr=Ee(St,!1),Lr=cr.eventData?cr.eventData.points.slice():[];cr=Ee(St,!1,Ve,Mn,Be),Ve=cr.selectionTesters,gt=cr.eventData,Bn=ke?ke.filtered:De(Je),R.throttle(nn,B.SELECTDELAY,function(){for(var Qn=(Kt=Ce(Ve,Mn)).slice(),qr=0;qr<Lr.length;qr++){for(var sr=Lr[qr],hr=!1,jr=0;jr<Qn.length;jr++)if(Qn[jr].curveNumber===sr.curveNumber&&Qn[jr].pointNumber===sr.pointNumber){hr=!0;break}hr||Qn.push(sr)}Qn.length&&(gt||(gt={}),gt.points=Qn),Un(gt,Bn),St.emit("plotly_selecting",gt)})}},Be.clickFn=function(Tn,un){if(Yt.remove(),St._fullLayout._activeShapeIndex>=0)St._fullLayout._deactivateShape(St);else if(!It){var an=Xt.clickmode;R.done(nn).then(function(){if(R.clear(nn),2===Tn){for(xt.remove(),Ke=0;Ke<Mn.length;Ke++)(vt=Mn[Ke])._module.selectPoints(vt,!1);if(fe(St,Mn),ee(Be),qe(St),Mn.length){var fn=Mn[0].xaxis,pn=Mn[0].yaxis;if(fn&&pn){for(var Sn=[],Nn=St._fullLayout.selections,Kn=0;Kn<Nn.length;Kn++){var Bn=Nn[Kn];Bn&&(Bn.xref===fn._id&&Bn.yref===pn._id||Sn.push(Bn))}Sn.length<Nn.length&&(St._fullLayout._noEmitSelectedAtStart=!0,b.call("_guiRelayout",St,{selections:Sn}))}}}else an.indexOf("select")>-1&&U(un,St,Be.xaxes,Be.yaxes,Be.subplot,Be,xt),"event"===an&&Ue(St,void 0);r.click(St,un)}).catch(M.error)}},Be.doneFn=function(){Yt.remove(),R.done(nn).then(function(){R.clear(nn),!tn&&nt&&Be.selectionDefs&&(nt.subtract=dt,Be.selectionDefs.push(nt),Be.mergedPolygons.length=0,[].push.apply(Be.mergedPolygons,Je)),(tn||It)&&ee(Be,tn),Be.doneFnCompleted&&Be.doneFnCompleted(Kt),Ct&&Ue(St,gt)}).catch(M.error)}},clearOutline:d,clearSelectionsCache:ee,selectOnClick:U}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(v,re,ne){"use strict";var g=v("../annotations/attributes"),m=v("../../traces/scatter/attributes").line,b=v("../drawing/attributes").dash,y=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray;v("../../constants/axis_placeable_objects"),re.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:y({},g.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:y({},g.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:y({},m.color,{editType:"arraydraw"}),width:y({},m.width,{editType:"calc+arraydraw"}),dash:y({},b,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("./constants"),y=v("./helpers");function e(t){return n(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function r(t){return n(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function n(t,p,s,i,f,c){var l=t/2,h=c;if("pixel"===p){var d=f?y.extractPathCoords(f,c?b.paramIsY:b.paramIsX):[s,i],o=g.aggNums(Math.max,null,d),x=g.aggNums(Math.min,null,d),u=x<0?Math.abs(x)+l:l,T=o>0?o+l:l;return{ppad:l,ppadplus:h?u:T,ppadminus:h?T:u}}return{ppad:l}}function a(t,p,s,i,f){var c="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==p)return[c(p),c(s)];if(i){var l,h,d,o,x=1/0,u=-1/0,T=i.match(b.segmentRE);for("date"===t.type&&(c=y.decodeDate(c)),l=0;l<T.length;l++)void 0!==(h=f[T[l].charAt(0)].drawn)&&(!(d=T[l].substr(1).match(b.paramRE))||d.length<h||((o=c(d[h]))<x&&(x=o),o>u&&(u=o)));return u>=x?[x,u]:void 0}}re.exports=function(t){var s=g.filterVisible(t._fullLayout.shapes);if(s.length&&t._fullData.length)for(var i=0;i<s.length;i++){var f,c,l=s[i];l._extremes={};var h=m.getRefType(l.xref),d=m.getRefType(l.yref);if("paper"!==l.xref&&"domain"!==h){var o="pixel"===l.xsizemode?l.xanchor:l.x0,x="pixel"===l.xsizemode?l.xanchor:l.x1;(c=a(f=m.getFromId(t,l.xref),o,x,l.path,b.paramIsX))&&(l._extremes[f._id]=m.findExtremes(f,c,e(l)))}if("paper"!==l.yref&&"domain"!==d){var u="pixel"===l.ysizemode?l.yanchor:l.y0,T="pixel"===l.ysizemode?l.yanchor:l.y1;(c=a(f=m.getFromId(t,l.yref),u,T,l.path,b.paramIsY))&&(l._extremes[f._id]=m.findExtremes(f,c,r(l)))}}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(v,re,ne){"use strict";re.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../../plots/array_container_defaults"),y=v("./attributes"),e=v("./helpers");function r(n,a,t){function p(D,B){return g.coerce(n,a,y,D,B)}if(p("visible")){var s=p("path"),i="path"!==p("type",s?"path":"rect");i&&delete a.path,p("editable"),p("layer"),p("opacity"),p("fillcolor"),p("fillrule"),p("line.width")&&(p("line.color"),p("line.dash"));for(var f=p("xsizemode"),c=p("ysizemode"),l=["x","y"],h=0;h<2;h++){var d,o,x,u=l[h],T=u+"anchor",_="x"===u?f:c,w={_fullLayout:t},M=m.coerceRef(n,a,w,u,void 0,"paper");if("range"===m.getRefType(M)?((d=m.getFromId(w,M))._shapeIndices.push(a._index),x=e.rangeToShapePosition(d),o=e.shapePositionToRange(d)):o=x=g.identity,i){var I=u+"0",S=u+"1",R=n[I],O=n[S];n[I]=o(n[I],!0),n[S]=o(n[S],!0),"pixel"===_?(p(I,0),p(S,10)):(m.coercePosition(a,w,p,M,I,.25),m.coercePosition(a,w,p,M,S,.75)),a[I]=x(a[I]),a[S]=x(a[S]),n[I]=R,n[S]=O}if("pixel"===_){var C=n[T];n[T]=o(n[T],!0),m.coercePosition(a,w,p,M,T,.25),a[T]=x(a[T]),n[T]=C}}i&&g.noneOrAll(n,a,["x0","x1","y0","y1"])}}re.exports=function(n,a){b(n,a,{name:"shapes",handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(v,re,ne){"use strict";var g=v("../../lib").strTranslate,m=v("../dragelement"),b=v("../dragelement/helpers"),y=b.drawMode,e=b.selectMode,r=v("../../registry"),n=v("../color"),a=v("./draw_newshape/constants"),t=a.i000,p=a.i090,s=a.i180,i=a.i270,f=v("./handle_outline").clearOutlineControllers,c=v("./draw_newshape/helpers"),l=c.pointsOnRectangle,h=c.pointsOnEllipse,d=c.writePaths,o=v("./draw_newshape/newshapes"),x=v("../selections/draw_newselection/newselections");function u(T,_){var w,M,I,O=T.length;return M=T[w=(_+1)%O][1],I=T[w][2],M===T[_][1]&&I===T[_][2]&&(M=T[w=(_+2)%O][1],I=T[w][2]),[w,M,I]}re.exports=function T(_,w,M,I){I||(I=0);var S=M.gd;function R(){T(_,w,M,I++),h(_[0])&&O({redrawing:!0})}function O(Q){var oe={};void 0!==M.isActiveShape&&(M.isActiveShape=!1,oe=o(w,M)),void 0!==M.isActiveSelection&&(M.isActiveSelection=!1,oe=x(w,M),S._fullLayout._reselect=!0),Object.keys(oe).length&&r.call((Q||{}).redrawing?"relayout":"_guiRelayout",S,oe)}var C,D,B,z,Y,G=S._fullLayout._zoomlayer,J=M.dragmode,te=y(J),X=e(J);function K(Q){B=+Q.srcElement.getAttribute("data-i"),z=+Q.srcElement.getAttribute("data-j"),C[B][z].moveFn=ae}function ae(Q,oe){if(_.length){var le=Y[B][z][1],de=Y[B][z][2],fe=_[B],be=fe.length;if(l(fe)){var he=Q,_e=oe;M.isActiveSelection&&(u(fe,z)[1]===fe[z][1]?_e=0:he=0);for(var Ce=0;Ce<be;Ce++)if(Ce!==z){var Ee=fe[Ce];Ee[1]===fe[z][1]&&(Ee[1]=le+he),Ee[2]===fe[z][2]&&(Ee[2]=de+_e)}if(fe[z][1]=le+he,fe[z][2]=de+_e,!l(fe))for(var Ae=0;Ae<be;Ae++)for(var ze=0;ze<fe[Ae].length;ze++)fe[Ae][ze]=Y[B][Ae][ze]}else fe[z][1]=le+Q,fe[z][2]=de+oe;R()}}function U(){O()}function V(Q,oe){if(2===Q){B=+oe.srcElement.getAttribute("data-i"),z=+oe.srcElement.getAttribute("data-j");var le=_[B];l(le)||h(le)||function(){if(_.length&&_[B]&&_[B].length){for(var de=[],fe=0;fe<_[B].length;fe++)fe!==z&&de.push(_[B][fe]);de.length>1&&(2!==de.length||"Z"!==de[1][0])&&(0===z&&(de[0][0]="M"),_[B]=de,R(),O())}}()}}function q(Q,oe){(function(le,de){if(_.length)for(var fe=0;fe<_.length;fe++)for(var be=0;be<_[fe].length;be++)for(var he=0;he+2<_[fe][be].length;he+=2)_[fe][be][he+1]=Y[fe][be][he+1]+le,_[fe][be][he+2]=Y[fe][be][he+2]+de})(Q,oe),R()}(te||X)&&(S._fullLayout._outlining=!0),f(S),w.attr("d",d(_)),I||!M.isActiveShape&&!M.isActiveSelection||(Y=function(Q,oe){for(var le=0;le<oe.length;le++){var de=oe[le];Q[le]=[];for(var fe=0;fe<de.length;fe++){Q[le][fe]=[];for(var be=0;be<de[fe].length;be++)Q[le][fe][be]=de[fe][be]}}return Q}([],_),function(Q){C=[];for(var oe=0;oe<_.length;oe++){var le=_[oe],de=l(le),fe=!de&&h(le);C[oe]=[];for(var be=le.length,he=0;he<be;he++)if("Z"!==le[he][0]&&(!fe||he===t||he===p||he===s||he===i)){var _e,Ce=de&&M.isActiveSelection;Ce&&(_e=u(le,he));var Ee=le[he][1],Ae=le[he][2],ze=Q.append(Ce?"rect":"circle").attr("data-i",oe).attr("data-j",he).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ce){var ve=_e[1]-Ee,Te=_e[2]-Ae,Ie=Te?5:Math.max(Math.min(25,Math.abs(ve)-5),5),De=ve?5:Math.max(Math.min(25,Math.abs(Te)-5),5);ze.classed(Te?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ie).attr("height",De).attr("x",Ee-Ie/2).attr("y",Ae-De/2).attr("transform",g(ve/2,Te/2))}else ze.classed("cursor-grab",!0).attr("r",5).attr("cx",Ee).attr("cy",Ae);C[oe][he]={element:ze.node(),gd:S,prepFn:K,doneFn:U,clickFn:V},m.init(C[oe][he])}}}(G.append("g").attr("class","outline-controllers")),D=[],_.length&&(D[0]={element:w[0][0],gd:S,prepFn:function ie(Q){(B=+Q.srcElement.getAttribute("data-i"))||(B=0),D[B].moveFn=q},doneFn:function H(){O()},clickFn:function ee(Q){2===Q&&function(oe){if(e(oe._fullLayout.dragmode)){f(oe);var le=oe._fullLayout._activeSelectionIndex,de=(oe.layout||{}).selections||[];if(le<de.length){for(var fe=[],be=0;be<de.length;be++)be!==le&&fe.push(de[be]);delete oe._fullLayout._activeSelectionIndex;var he=oe._fullLayout.selections[le];oe._fullLayout._deselect={xref:he.xref,yref:he.yref},r.call("_guiRelayout",oe,{selections:fe})}}}(S)}},m.init(D[0])))}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("./draw_newshape/helpers").readPaths,e=v("./display_outlines"),r=v("./handle_outline").clearOutlineControllers,n=v("../color"),a=v("../drawing"),t=v("../../plot_api/plot_template").arrayEditor,p=v("../dragelement"),s=v("../../lib/setcursor"),i=v("./constants"),f=v("./helpers"),c=f.getPathString;function l(_){var w=_._fullLayout;for(var M in w._shapeUpperLayer.selectAll("path").remove(),w._shapeLowerLayer.selectAll("path").remove(),w._plots){var I=w._plots[M].shapelayer;I&&I.selectAll("path").remove()}for(var S=0;S<w.shapes.length;S++)w.shapes[S].visible&&o(_,S)}function h(_){return!!_._fullLayout._outlining}function d(_){return!_._context.edits.shapePosition}function o(_,w){_._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+w+'"]').remove();var M=f.makeShapesOptionsAndPlotinfo(_,w),I=M.options,S=M.plotinfo;I._input&&!1!==I.visible&&function R(O){var C=c(_,I),D={"data-index":w,"fill-rule":I.fillrule,d:C},B=I.opacity,z=I.fillcolor,Y=I.line.width?I.line.color:"rgba(0,0,0,0)",G=I.line.width,J=I.line.dash;G||!0!==I.editable||(G=5,J="solid");var te="Z"!==C[C.length-1],X=d(_)&&I.editable&&_._fullLayout._activeShapeIndex===w;X&&(z=te?"rgba(0,0,0,0)":_._fullLayout.activeshape.fillcolor,B=_._fullLayout.activeshape.opacity);var K,ae=O.append("path").attr(D).style("opacity",B).call(n.stroke,Y).call(n.fill,z).call(a.dashLine,J,G);if(x(ae,_,I),(X||_._context.edits.shapePosition)&&(K=t(_.layout,"shapes",I)),X){ae.style({cursor:"move"});var U={element:ae.node(),plotinfo:S,gd:_,editHelpers:K,isActiveShape:!0},V=y(C,_);e(V,ae,U)}else _._context.edits.shapePosition?function(q,ie,H,ee,Q,oe){var le,de,fe,be,he,_e,Ce,Ee,Ae,ze,ve,Te,Ie,De,Fe,Ue,qe="pixel"===H.xsizemode,je="pixel"===H.ysizemode,rt="line"===H.type,Ne="path"===H.type,Be=oe.modifyItem,We=b.getFromId(q,H.xref),Ye=b.getRefType(H.xref),lt=b.getFromId(q,H.yref),mt=b.getRefType(H.yref),Tt=f.getDataToPixel(q,We,!1,Ye),It=f.getDataToPixel(q,lt,!0,mt),Ct=f.getPixelToData(q,We,!1,Ye),ct=f.getPixelToData(q,lt,!0,mt),at=rt?function(){var en=Math.max(H.line.width,10),Xe=Q.append("g").attr("data-index",ee);Xe.append("path").attr("d",ie.attr("d")).style({cursor:"move","stroke-width":en,"stroke-opacity":"0"});var tt={"fill-opacity":"0"},ye=Math.max(en/2,10);return Xe.append("circle").attr({"data-line-point":"start-point",cx:qe?Tt(H.xanchor)+H.x0:Tt(H.x0),cy:je?It(H.yanchor)-H.y0:It(H.y0),r:ye}).style(tt).classed("cursor-grab",!0),Xe.append("circle").attr({"data-line-point":"end-point",cx:qe?Tt(H.xanchor)+H.x1:Tt(H.x1),cy:je?It(H.yanchor)-H.y1:It(H.y1),r:ye}).style(tt).classed("cursor-grab",!0),Xe}():ie,St={element:at.node(),gd:q,prepFn:function(en){var Xe,tt,ye,ke,Ve,Je,nt,Ke;h(q)||(qe&&(he=Tt(H.xanchor)),je&&(_e=It(H.yanchor)),"path"===H.type?Fe=H.path:(le=qe?H.x0:Tt(H.x0),de=je?H.y0:It(H.y0),fe=qe?H.x1:Tt(H.x1),be=je?H.y1:It(H.y1)),le<fe?(Ae=le,Ie="x0",ze=fe,De="x1"):(Ae=fe,Ie="x1",ze=le,De="x0"),!je&&de<be||je&&de>be?(Ce=de,ve="y0",Ee=be,Te="y1"):(Ce=be,ve="y1",Ee=de,Te="y0"),Xt(en),cn(Q,H),Xe=ie,Ve=(tt=H).yref,Je=b.getFromId(ye=q,ke=tt.xref),nt=b.getFromId(ye,Ve),Ke="","paper"===ke||Je.autorange||(Ke+=ke),"paper"===Ve||nt.autorange||(Ke+=Ve),a.setClipUrl(Xe,Ke?"clip"+ye._fullLayout._uid+Ke:null,ye),St.moveFn="move"===Ue?tn:hn,St.altKey=en.altKey)},doneFn:function(){h(q)||(s(ie),yn(Q),x(ie,q,H),g.call("_guiRelayout",q,oe.getUpdateObj()))},clickFn:function(){h(q)||yn(Q)}};function Xt(en){if(h(q))Ue=null;else if(rt)Ue="path"===en.target.tagName?"move":"start-point"===en.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Xe=St.element.getBoundingClientRect(),tt=Xe.right-Xe.left,ye=Xe.bottom-Xe.top,Je=!Ne&&tt>10&&ye>10&&!en.shiftKey?p.getCursor((en.clientX-Xe.left)/tt,1-(en.clientY-Xe.top)/ye):"move";s(ie,Je),Ue=Je.split("-")[0]}}function tn(en,Xe){if("path"===H.type){var tt=function(Ve){return Ve},ye=tt,ke=tt;qe?Be("xanchor",H.xanchor=Ct(he+en)):(ye=function(Ve){return Ct(Tt(Ve)+en)},We&&"date"===We.type&&(ye=f.encodeDate(ye))),je?Be("yanchor",H.yanchor=ct(_e+Xe)):(ke=function(Ve){return ct(It(Ve)+Xe)},lt&&"date"===lt.type&&(ke=f.encodeDate(ke))),Be("path",H.path=u(Fe,ye,ke))}else qe?Be("xanchor",H.xanchor=Ct(he+en)):(Be("x0",H.x0=Ct(le+en)),Be("x1",H.x1=Ct(fe+en))),je?Be("yanchor",H.yanchor=ct(_e+Xe)):(Be("y0",H.y0=ct(de+Xe)),Be("y1",H.y1=ct(be+Xe)));ie.attr("d",c(q,H)),cn(Q,H)}function hn(en,Xe){if(Ne){var tt=function(Pe){return Pe},ye=tt,ke=tt;qe?Be("xanchor",H.xanchor=Ct(he+en)):(ye=function(Pe){return Ct(Tt(Pe)+en)},We&&"date"===We.type&&(ye=f.encodeDate(ye))),je?Be("yanchor",H.yanchor=ct(_e+Xe)):(ke=function(Pe){return ct(It(Pe)+Xe)},lt&&"date"===lt.type&&(ke=f.encodeDate(ke))),Be("path",H.path=u(Fe,ye,ke))}else if(rt){if("resize-over-start-point"===Ue){var Ve=le+en,Je=je?de-Xe:de+Xe;Be("x0",H.x0=qe?Ve:Ct(Ve)),Be("y0",H.y0=je?Je:ct(Je))}else if("resize-over-end-point"===Ue){var nt=fe+en,Ke=je?be-Xe:be+Xe;Be("x1",H.x1=qe?nt:Ct(nt)),Be("y1",H.y1=je?Ke:ct(Ke))}}else{var vt=function(Pe){return-1!==Ue.indexOf(Pe)},gt=vt("n"),Ot=vt("s"),Vt=vt("w"),ft=vt("e"),bt=gt?Ce+Xe:Ce,Wt=Ot?Ee+Xe:Ee,Pt=Vt?Ae+en:Ae,Bt=ft?ze+en:ze;je&&(gt&&(bt=Ce-Xe),Ot&&(Wt=Ee-Xe)),(!je&&Wt-bt>10||je&&bt-Wt>10)&&(Be(ve,H[ve]=je?bt:ct(bt)),Be(Te,H[Te]=je?Wt:ct(Wt))),Bt-Pt>10&&(Be(Ie,H[Ie]=qe?Pt:Ct(Pt)),Be(De,H[De]=qe?Bt:Ct(Bt)))}ie.attr("d",c(q,H)),cn(Q,H)}function cn(en,Xe){(qe||je)&&function(){var tt="path"!==Xe.type,ye=en.selectAll(".visual-cue").data([0]);ye.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var ke=Tt(qe?Xe.xanchor:m.midRange(tt?[Xe.x0,Xe.x1]:f.extractPathCoords(Xe.path,i.paramIsX))),Ve=It(je?Xe.yanchor:m.midRange(tt?[Xe.y0,Xe.y1]:f.extractPathCoords(Xe.path,i.paramIsY)));ke=f.roundPositionForSharpStrokeRendering(ke,1),Ve=f.roundPositionForSharpStrokeRendering(Ve,1),ye.attr("d",qe&&je?"M"+(ke-1-1)+","+(Ve-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":qe?"M"+(ke-1-1)+","+(Ve-9-1)+"v18 h2 v-18 Z":"M"+(ke-9-1)+","+(Ve-1-1)+"h18 v2 h-18 Z")}()}function yn(en){en.selectAll(".visual-cue").remove()}p.init(St),at.node().onmousemove=Xt}(_,ae,I,w,O,K):!0===I.editable&&ae.style("pointer-events",te||n.opacity(z)*B<=.5?"stroke":"all");ae.node().addEventListener("click",function(){return function(q,ie){if(d(q)){var H=+ie.node().getAttribute("data-index");if(H>=0){if(H===q._fullLayout._activeShapeIndex)return void T(q);q._fullLayout._activeShapeIndex=H,q._fullLayout._deactivateShape=T,l(q)}}}(_,ae)})}("below"!==I.layer?_._fullLayout._shapeUpperLayer:"paper"===I.xref||"paper"===I.yref?_._fullLayout._shapeLowerLayer:S._hadPlotinfo?(S.mainplotinfo||S).shapelayer:_._fullLayout._shapeLowerLayer)}function x(_,w,M){var I=(M.xref+M.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");a.setClipUrl(_,I?"clip"+w._fullLayout._uid+I:null,w)}function u(_,w,M){return _.replace(i.segmentRE,function(I){var S=0,R=I.charAt(0),O=i.paramIsX[R],C=i.paramIsY[R],D=i.numParams[R];return R+I.substr(1).replace(i.paramRE,function(B){return S>=D||(O[S]?B=w(B):C[S]&&(B=M(B)),S++),B})})}function T(_){d(_)&&_._fullLayout._activeShapeIndex>=0&&(r(_),delete _._fullLayout._activeShapeIndex,l(_))}re.exports={draw:l,drawOne:o,eraseActiveShape:function(_){if(d(_)){r(_);var w=_._fullLayout._activeShapeIndex,M=(_.layout||{}).shapes||[];if(w<M.length){for(var I=[],S=0;S<M.length;S++)S!==w&&I.push(M[S]);delete _._fullLayout._activeShapeIndex,g.call("_guiRelayout",_,{shapes:I})}}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(v,re,ne){"use strict";var g=v("../../drawing/attributes").dash,m=v("../../../lib/extend").extendFlat;re.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:m({},g,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(v,re,ne){"use strict";re.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(v,re,ne){"use strict";var g=v("../../color");re.exports=function(m,b,y){y("newshape.drawdirection"),y("newshape.layer"),y("newshape.fillcolor"),y("newshape.fillrule"),y("newshape.opacity"),y("newshape.line.width")&&(y("newshape.line.color",g.contrast((m||{}).plot_bgcolor||"#FFF")),y("newshape.line.dash")),y("activeshape.fillcolor"),y("activeshape.opacity")}},{"../../color":367}],466:[function(v,re,ne){"use strict";var g=v("parse-svg-path"),m=v("./constants"),b=m.CIRCLE_SIDES,y=m.SQRT2,e=v("../../selections/helpers"),r=e.p2r,n=e.r2p,a=[0,3,4,5,6,1,2],t=[0,3,4,1,2];function p(i,f){return Math.abs(i-f)<=1e-6}function s(i,f){var c=f[1]-i[1],l=f[2]-i[2];return Math.sqrt(c*c+l*l)}ne.writePaths=function(i){var f=i.length;if(!f)return"M0,0Z";for(var c="",l=0;l<f;l++)for(var h=i[l].length,d=0;d<h;d++){var o=i[l][d][0];if("Z"===o)c+="Z";else for(var x=i[l][d].length,u=0;u<x;u++){var T=u;"Q"===o||"S"===o?T=t[u]:"C"===o&&(T=a[u]),c+=i[l][d][T],u>0&&u<x-1&&(c+=",")}}return c},ne.readPaths=function(i,f,c,l){var h,d,o,x=g(i),u=[],T=-1,_=0,w=0,M=function(){d=_,o=w};M();for(var I=0;I<x.length;I++){var D=[],B=x[I][0],z=B;switch(B){case"M":u[++T]=[],D.push([z,_=+x[I][1],w=+x[I][2]]),M();break;case"Q":case"S":D.push([z,_=+x[I][3],w=+x[I][4],+x[I][1],+x[I][2]]);break;case"C":D.push([z,_=+x[I][5],w=+x[I][6],+x[I][1],+x[I][2],+x[I][3],+x[I][4]]);break;case"T":case"L":D.push([z,_=+x[I][1],w=+x[I][2]]);break;case"H":D.push([z="L",_=+x[I][1],w]);break;case"V":D.push([z="L",_,w=+x[I][1]]);break;case"A":z="L";var Y=+x[I][1],G=+x[I][2];+x[I][4]||(Y=-Y,G=-G);var J=_-Y,te=w;for(h=1;h<=b/2;h++){var X=2*Math.PI*h/b;D.push([z,J+Y*Math.cos(X),te+G*Math.sin(X)])}break;case"Z":_===d&&w===o||D.push([z,_=d,w=o])}for(var K=(c||{}).domain,ae=f._fullLayout._size,U=c&&"pixel"===c.xsizemode,V=c&&"pixel"===c.ysizemode,q=!1===l,ie=0;ie<D.length;ie++){for(h=0;h+2<7;h+=2){var H=D[ie][h+1],ee=D[ie][h+2];void 0!==H&&void 0!==ee&&(_=H,w=ee,c&&(c.xaxis&&c.xaxis.p2r?(q&&(H-=c.xaxis._offset),H=U?n(c.xaxis,c.xanchor)+H:r(c.xaxis,H)):(q&&(H-=ae.l),K?H=K.x[0]+H/ae.w:H/=ae.w),c.yaxis&&c.yaxis.p2r?(q&&(ee-=c.yaxis._offset),ee=V?n(c.yaxis,c.yanchor)-ee:r(c.yaxis,ee)):(q&&(ee-=ae.t),ee=K?K.y[1]-ee/ae.h:1-ee/ae.h)),D[ie][h+1]=H,D[ie][h+2]=ee)}u[T].push(D[ie].slice())}}return u},ne.pointsOnRectangle=function(i){if(5!==i.length)return!1;for(var f=1;f<3;f++)if(!p(i[0][f]-i[1][f],i[3][f]-i[2][f])||!p(i[0][f]-i[3][f],i[1][f]-i[2][f]))return!1;return!(!p(i[0][1],i[1][1])&&!p(i[0][1],i[3][1])||!(s(i[0],i[1])*s(i[0],i[3])))},ne.pointsOnEllipse=function(i){var f=i.length;if(f!==b+1)return!1;f=b;for(var c=0;c<f;c++){var l=(2*f-c)%f,h=(f/2+l)%f;if(!p(s(i[c],i[(f/2+c)%f]),s(i[l],i[h])))return!1}return!0},ne.handleEllipse=function(i,f,c){if(!i)return[f,c];var l=ne.ellipseOver({x0:f[0],y0:f[1],x1:c[0],y1:c[1]}),h=(l.x1+l.x0)/2,d=(l.y1+l.y0)/2,o=(l.x1-l.x0)/2,x=(l.y1-l.y0)/2;o||(o=x/=y),x||(x=o/=y);for(var u=[],T=0;T<b;T++){var _=2*T*Math.PI/b;u.push([h+o*Math.cos(_),d+x*Math.sin(_)])}return u},ne.ellipseOver=function(i){var f=i.x0,c=i.y0,l=i.x1,h=i.y1,d=l-f,o=h-c,x=((f-=d)+l)/2,u=((c-=o)+h)/2;return{x0:x-(d*=y),y0:u-(o*=y),x1:x+d,y1:u+o}},ne.fixDatesForPaths=function(i,f,c){var l="date"===f.type,h="date"===c.type;if(!l&&!h)return i;for(var d=0;d<i.length;d++)for(var o=0;o<i[d].length;o++)for(var x=0;x+2<i[d][o].length;x+=2)l&&(i[d][o][x+1]=i[d][o][x+1].replace(" ","_")),h&&(i[d][o][x+2]=i[d][o][x+2].replace(" ","_"));return i}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(v,re,ne){"use strict";var g=v("../../dragelement/helpers"),m=g.drawMode,b=g.openMode,y=v("./constants"),e=y.i000,r=y.i090,n=y.i180,a=y.i270,t=y.cos45,p=y.sin45,s=v("../../selections/helpers"),i=s.p2r,f=s.r2p,c=v(".././handle_outline").clearOutline,l=v("./helpers"),h=l.readPaths,d=l.writePaths,o=l.ellipseOver,x=l.fixDatesForPaths;re.exports=function(u,T){if(u.length){var _=u[0][0];if(_){var w=_.getAttribute("d"),M=T.gd,I=M._fullLayout.newshape,S=T.plotinfo,R=S.xaxis,O=S.yaxis,C=!!S.domain||!S.xaxis,D=!!S.domain||!S.yaxis,B=T.isActiveShape,z=T.dragmode,Y=(M.layout||{}).shapes||[];if(!m(z)&&void 0!==B){var G=M._fullLayout._activeShapeIndex;if(G<Y.length)switch(M._fullLayout.shapes[G].type){case"rect":z="drawrect";break;case"circle":z="drawcircle";break;case"line":z="drawline";break;case"path":var J=Y[G].path||"";z="Z"===J[J.length-1]?"drawclosedpath":"drawopenpath"}}var te,X=b(z),K=h(w,M,S,B),ae={editable:!0,xref:C?"paper":R._id,yref:D?"paper":O._id,layer:I.layer,opacity:I.opacity,line:{color:I.line.color,width:I.line.width,dash:I.line.dash}};if(X||(ae.fillcolor=I.fillcolor,ae.fillrule=I.fillrule),1===K.length&&(te=K[0]),te&&5===te.length&&"drawrect"===z)ae.type="rect",ae.x0=te[0][1],ae.y0=te[0][2],ae.x1=te[2][1],ae.y1=te[2][2];else if(te&&"drawline"===z)ae.type="line",ae.x0=te[0][1],ae.y0=te[0][2],ae.x1=te[1][1],ae.y1=te[1][2];else if(te&&"drawcircle"===z){ae.type="circle";var U=te[e][1],V=te[r][1],q=te[n][1],ie=te[a][1],H=te[e][2],ee=te[r][2],Q=te[n][2],oe=te[a][2],le=S.xaxis&&("date"===S.xaxis.type||"log"===S.xaxis.type),de=S.yaxis&&("date"===S.yaxis.type||"log"===S.yaxis.type);le&&(U=f(S.xaxis,U),V=f(S.xaxis,V),q=f(S.xaxis,q),ie=f(S.xaxis,ie)),de&&(H=f(S.yaxis,H),ee=f(S.yaxis,ee),Q=f(S.yaxis,Q),oe=f(S.yaxis,oe));var fe=(V+ie)/2,be=(H+Q)/2,he=o({x0:fe,y0:be,x1:fe+(ie-V+q-U)/2*t,y1:be+(oe-ee+Q-H)/2*p});le&&(he.x0=i(S.xaxis,he.x0),he.x1=i(S.xaxis,he.x1)),de&&(he.y0=i(S.yaxis,he.y0),he.y1=i(S.yaxis,he.y1)),ae.x0=he.x0,ae.y0=he.y0,ae.x1=he.x1,ae.y1=he.y1}else ae.type="path",R&&O&&x(K,R,O),ae.path=d(K),te=null;c(M);for(var _e=T.editHelpers,Ce=(_e||{}).modifyItem,Ee=[],Ae=0;Ae<Y.length;Ae++){var ze=M._fullLayout.shapes[Ae];if(Ee[Ae]=ze._input,void 0!==B&&Ae===M._fullLayout._activeShapeIndex){var ve=ae;switch(ze.type){case"line":case"rect":case"circle":Ce("x0",ve.x0),Ce("x1",ve.x1),Ce("y0",ve.y0),Ce("y1",ve.y1);break;case"path":Ce("path",ve.path)}}}return void 0===B?(Ee.push(ae),Ee):_e?_e.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(v,re,ne){"use strict";re.exports={clearOutlineControllers:function(g){var m=g._fullLayout._zoomlayer;m&&m.selectAll(".outline-controllers").remove()},clearOutline:function(g){var m=g._fullLayout._zoomlayer;m&&m.selectAll(".select-outline").remove(),g._fullLayout._outlining=!1}}},{}],469:[function(v,re,ne){"use strict";var g=v("./constants"),m=v("../../lib"),b=v("../../plots/cartesian/axes");ne.rangeToShapePosition=function(y){return"log"===y.type?y.r2d:function(e){return e}},ne.shapePositionToRange=function(y){return"log"===y.type?y.d2r:function(e){return e}},ne.decodeDate=function(y){return function(e){return e.replace&&(e=e.replace("_"," ")),y(e)}},ne.encodeDate=function(y){return function(e){return y(e).replace(" ","_")}},ne.extractPathCoords=function(y,e,r){var n=[];return y.match(g.segmentRE).forEach(function(a){var t=e[a.charAt(0)].drawn;if(void 0!==t){var p=a.substr(1).match(g.paramRE);if(p&&!(p.length<t)){var s=p[t],i=r?s:m.cleanNumber(s);n.push(i)}}}),n},ne.getDataToPixel=function(y,e,r,n){var a,t=y._fullLayout._size;if(e)if("domain"===n)a=function(s){return e._length*(r?1-s:s)+e._offset};else{var p=ne.shapePositionToRange(e);a=function(s){return e._offset+e.r2p(p(s,!0))},"date"===e.type&&(a=ne.decodeDate(a))}else a=r?function(s){return t.t+t.h*(1-s)}:function(s){return t.l+t.w*s};return a},ne.getPixelToData=function(y,e,r,n){var a,t=y._fullLayout._size;if(e)if("domain"===n)a=function(s){var i=(s-e._offset)/e._length;return r?1-i:i};else{var p=ne.rangeToShapePosition(e);a=function(s){return p(e.p2r(s-e._offset))}}else a=r?function(s){return 1-(s-t.t)/t.h}:function(s){return(s-t.l)/t.w};return a},ne.roundPositionForSharpStrokeRendering=function(y,e){var r=1===Math.round(e%2),n=Math.round(y);return r?n+.5:n},ne.makeShapesOptionsAndPlotinfo=function(y,e){var r=y._fullLayout.shapes[e]||{},n=y._fullLayout._plots[r.xref+r.yref];return n?n._hadPlotinfo=!0:(n={},r.xref&&"paper"!==r.xref&&(n.xaxis=y._fullLayout[r.xref+"axis"]),r.yref&&"paper"!==r.yref&&(n.yaxis=y._fullLayout[r.yref+"axis"])),n.xsizemode=r.xsizemode,n.ysizemode=r.ysizemode,n.xanchor=r.xanchor,n.yanchor=r.yanchor,{options:r,plotinfo:n}},ne.makeSelectionsOptionsAndPlotinfo=function(y,e){var r=y._fullLayout.selections[e]||{},n=y._fullLayout._plots[r.xref+r.yref];return n?n._hadPlotinfo=!0:(n={},r.xref&&(n.xaxis=y._fullLayout[r.xref+"axis"]),r.yref&&(n.yaxis=y._fullLayout[r.yref+"axis"])),{options:r,plotinfo:n}},ne.getPathString=function(y,e){var r,n,a,t,p,s,i,f,O,C,D,z,Y,G,J,c=e.type,l=b.getRefType(e.xref),h=b.getRefType(e.yref),d=b.getFromId(y,e.xref),o=b.getFromId(y,e.yref),x=y._fullLayout._size;if(d?"domain"===l?n=function(O){return d._offset+d._length*O}:(r=ne.shapePositionToRange(d),n=function(O){return d._offset+d.r2p(r(O,!0))}):n=function(O){return x.l+x.w*O},o?"domain"===h?t=function(O){return o._offset+o._length*(1-O)}:(a=ne.shapePositionToRange(o),t=function(O){return o._offset+o.r2p(a(O,!0))}):t=function(O){return x.t+x.h*(1-O)},"path"===c)return d&&"date"===d.type&&(n=ne.decodeDate(n)),o&&"date"===o.type&&(t=ne.decodeDate(t)),C=n,D=t,z=(O=e).xsizemode,Y=O.ysizemode,G=O.xanchor,J=O.yanchor,O.path.replace(g.segmentRE,function(te){var X=0,K=te.charAt(0),ae=g.paramIsX[K],U=g.paramIsY[K],V=g.numParams[K],q=te.substr(1).replace(g.paramRE,function(ie){return ae[X]?ie="pixel"===z?C(G)+Number(ie):C(ie):U[X]&&(ie="pixel"===Y?D(J)-Number(ie):D(ie)),++X>V&&(ie="X"),ie});return X>V&&(q=q.replace(/[\s,]*X.*/,""),m.log("Ignoring extra params in segment "+te)),K+q});if("pixel"===e.xsizemode){var u=n(e.xanchor);p=u+e.x0,s=u+e.x1}else p=n(e.x0),s=n(e.x1);if("pixel"===e.ysizemode){var T=t(e.yanchor);i=T-e.y0,f=T-e.y1}else i=t(e.y0),f=t(e.y1);if("line"===c)return"M"+p+","+i+"L"+s+","+f;if("rect"===c)return"M"+p+","+i+"H"+s+"V"+f+"H"+p+"Z";var _=(p+s)/2,w=(i+f)/2,M=Math.abs(_-p),I=Math.abs(w-i),S="A"+M+","+I,R=_+M+","+w;return"M"+R+S+" 0 1,1 "+_+","+(w-I)+S+" 0 0,1 "+R+"Z"}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(v,re,ne){"use strict";var g=v("./draw");re.exports={moduleType:"component",name:"shapes",layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),supplyDrawNewShapeDefaults:v("./draw_newshape/defaults"),includeBasePlot:v("../../plots/cartesian/include_components")("shapes"),calcAutorange:v("./calc_autorange"),draw:g.draw,drawOne:g.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("../../plots/pad_attributes"),b=v("../../lib/extend").extendDeepAll,y=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/animation_attributes"),r=v("../../plot_api/plot_template").templatedArray,n=v("./constants"),a=r("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});re.exports=y(r("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:a,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:b(m({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:g({})},font:g({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(v,re,ne){"use strict";re.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/array_container_defaults"),b=v("./attributes"),y=v("./constants").name,e=b.steps;function r(a,t,p){function s(h,d){return g.coerce(a,t,b,h,d)}for(var i=m(a,t,{name:"steps",handleItemDefaults:n}),f=0,c=0;c<i.length;c++)i[c].visible&&f++;if(f<2?t.visible=!1:s("visible")){t._stepCount=f;var l=t._visibleSteps=g.filterVisible(i);(i[s("active")]||{}).visible||(t.active=l[0]._index),s("x"),s("y"),g.noneOrAll(a,t,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),g.coerceFont(s,"font",p.font),s("currentvalue.visible")&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),g.coerceFont(s,"currentvalue.font",t.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function n(a,t){function p(i,f){return g.coerce(a,t,e,i,f)}if("skip"===a.method||Array.isArray(a.args)?p("visible"):t.visible=!1){p("method"),p("args");var s=p("label","step-"+t._index);p("value",s),p("execute")}}re.exports=function(a,t){m(a,t,{name:y,handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../plots/plots"),b=v("../color"),y=v("../drawing"),e=v("../../lib"),r=e.strTranslate,n=v("../../lib/svg_text_utils"),a=v("../../plot_api/plot_template").arrayEditor,t=v("./constants"),p=v("../../constants/alignment"),s=p.LINE_SPACING,i=p.FROM_TL,f=p.FROM_BR;function c(D){return t.autoMarginIdRoot+D._index}function l(D){return D._index}function h(D,B){var z=y.tester.selectAll("g."+t.labelGroupClass).data(B._visibleSteps);z.enter().append("g").classed(t.labelGroupClass,!0);var Y=0,G=0;z.each(function(ie){var H=x(g.select(this),{step:ie},B).node();if(H){var ee=y.bBox(H);G=Math.max(G,ee.height),Y=Math.max(Y,ee.width)}}),z.remove();var J=B._dims={};J.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var te=D._fullLayout._size;if(J.lx=te.l+te.w*B.x,J.ly=te.t+te.h*(1-B.y),J.outerLength="fraction"===B.lenmode?Math.round(te.w*B.len):B.len,J.inputAreaStart=0,J.inputAreaLength=Math.round(J.outerLength-B.pad.l-B.pad.r),J.labelStride=Math.max(1,Math.ceil((Y+t.labelPadding)/((J.inputAreaLength-2*t.stepInset)/(B._stepCount-1)))),J.labelHeight=G,J.currentValueMaxWidth=0,J.currentValueHeight=0,J.currentValueTotalHeight=0,J.currentValueMaxLines=1,B.currentvalue.visible){var ae=y.tester.append("g");z.each(function(ie){var H=d(ae,B,ie.label),ee=H.node()&&y.bBox(H.node())||{width:0,height:0},Q=n.lineCount(H);J.currentValueMaxWidth=Math.max(J.currentValueMaxWidth,Math.ceil(ee.width)),J.currentValueHeight=Math.max(J.currentValueHeight,Math.ceil(ee.height)),J.currentValueMaxLines=Math.max(J.currentValueMaxLines,Q)}),J.currentValueTotalHeight=J.currentValueHeight+B.currentvalue.offset,ae.remove()}J.height=J.currentValueTotalHeight+t.tickOffset+B.ticklen+t.labelOffset+J.labelHeight+B.pad.t+B.pad.b;var U="left";e.isRightAnchor(B)&&(J.lx-=J.outerLength,U="right"),e.isCenterAnchor(B)&&(J.lx-=J.outerLength/2,U="center");var V="top";e.isBottomAnchor(B)&&(J.ly-=J.height,V="bottom"),e.isMiddleAnchor(B)&&(J.ly-=J.height/2,V="middle"),J.outerLength=Math.ceil(J.outerLength),J.height=Math.ceil(J.height),J.lx=Math.round(J.lx),J.ly=Math.round(J.ly);var q={y:B.y,b:J.height*f[V],t:J.height*i[V]};"fraction"===B.lenmode?(q.l=0,q.xl=B.x-B.len*i[U],q.r=0,q.xr=B.x+B.len*f[U]):(q.x=B.x,q.l=J.outerLength*i[U],q.r=J.outerLength*f[U]),m.autoMargin(D,c(B),q)}function d(D,B,z){if(B.currentvalue.visible){var Y,G,J=B._dims;switch(B.currentvalue.xanchor){case"right":Y=J.inputAreaLength-t.currentValueInset-J.currentValueMaxWidth,G="left";break;case"center":Y=.5*J.inputAreaLength,G="middle";break;default:Y=t.currentValueInset,G="left"}var te=e.ensureSingle(D,"text",t.labelClass,function(q){q.attr({"text-anchor":G,"data-notex":1})}),X=B.currentvalue.prefix?B.currentvalue.prefix:"";if("string"==typeof z)X+=z;else{var K=B.steps[B.active].label,ae=B._gd._fullLayout._meta;ae&&(K=e.templateString(K,ae)),X+=K}B.currentvalue.suffix&&(X+=B.currentvalue.suffix),te.call(y.font,B.currentvalue.font).text(X).call(n.convertToTspans,B._gd);var U=n.lineCount(te);return n.positionText(te,Y,(J.currentValueMaxLines+1-U)*B.currentvalue.font.size*s),te}}function o(D,B,z){e.ensureSingle(D,"rect",t.gripRectClass,function(Y){Y.call(w,B,D,z).style("pointer-events","all")}).attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(b.stroke,z.bordercolor).call(b.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function x(D,B,z){var Y=e.ensureSingle(D,"text",t.labelClass,function(te){te.attr({"text-anchor":"middle","data-notex":1})}),G=B.step.label,J=z._gd._fullLayout._meta;return J&&(G=e.templateString(G,J)),Y.call(y.font,z.font).text(G).call(n.convertToTspans,z._gd),Y}function u(D,B){var z=e.ensureSingle(D,"g",t.labelsClass),Y=B._dims,G=z.selectAll("g."+t.labelGroupClass).data(Y.labelSteps);G.enter().append("g").classed(t.labelGroupClass,!0),G.exit().remove(),G.each(function(J){var te=g.select(this);te.call(x,J,B),y.setTranslate(te,S(B,J.fraction),t.tickOffset+B.ticklen+B.font.size*s+t.labelOffset+Y.currentValueTotalHeight)})}function T(D,B,z,Y,G){var J=Math.round(Y*(z._stepCount-1)),te=z._visibleSteps[J]._index;te!==z.active&&_(D,B,z,te,!0,G)}function _(D,B,z,Y,G,J){var te=z.active;z.active=Y,a(D.layout,t.name,z).applyUpdate("active",Y);var X=z.steps[z.active];B.call(I,z,J),B.call(d,z),D.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:G,previousActive:te}),X&&X.method&&G&&(B._nextMethod?(B._nextMethod.step=X,B._nextMethod.doCallback=G,B._nextMethod.doTransition=J):(B._nextMethod={step:X,doCallback:G,doTransition:J},B._nextMethodRaf=window.requestAnimationFrame(function(){var K=B._nextMethod.step;K.method&&(K.execute&&m.executeAPICommand(D,K.method,K.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function w(D,B,z){var Y=z.node(),G=g.select(B);function J(){return z.data()[0]}function te(){var X=J();B.emit("plotly_sliderstart",{slider:X});var K=z.select("."+t.gripRectClass);g.event.stopPropagation(),g.event.preventDefault(),K.call(b.fill,X.activebgcolor);var ae=R(X,g.mouse(Y)[0]);function U(){var q=J(),ie=R(q,g.mouse(Y)[0]);T(B,z,q,ie,!1)}function V(){var q=J();q._dragging=!1,K.call(b.fill,q.bgcolor),G.on("mouseup",null),G.on("mousemove",null),G.on("touchend",null),G.on("touchmove",null),B.emit("plotly_sliderend",{slider:q,step:q.steps[q.active]})}T(B,z,X,ae,!0),X._dragging=!0,G.on("mousemove",U),G.on("touchmove",U),G.on("mouseup",V),G.on("touchend",V)}D.on("mousedown",te),D.on("touchstart",te)}function M(D,B){var z=D.selectAll("rect."+t.tickRectClass).data(B._visibleSteps),Y=B._dims;z.enter().append("rect").classed(t.tickRectClass,!0),z.exit().remove(),z.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(G,J){var te=J%Y.labelStride==0,X=g.select(this);X.attr({height:te?B.ticklen:B.minorticklen}).call(b.fill,B.tickcolor),y.setTranslate(X,S(B,J/(B._stepCount-1))-.5*B.tickwidth,(te?t.tickOffset:t.minorTickOffset)+Y.currentValueTotalHeight)})}function I(D,B,z){for(var Y=D.select("rect."+t.gripRectClass),G=0,J=0;J<B._stepCount;J++)if(B._visibleSteps[J]._index===B.active){G=J;break}var te=S(B,G/(B._stepCount-1));if(!B._invokingCommand){var X=Y;z&&B.transition.duration>0&&(X=X.transition().duration(B.transition.duration).ease(B.transition.easing)),X.attr("transform",r(te-.5*t.gripWidth,B._dims.currentValueTotalHeight))}}function S(D,B){var z=D._dims;return z.inputAreaStart+t.stepInset+(z.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,B))}function R(D,B){var z=D._dims;return Math.min(1,Math.max(0,(B-t.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*t.stepInset-2*z.inputAreaStart)))}function O(D,B,z){var Y=z._dims,G=e.ensureSingle(D,"rect",t.railTouchRectClass,function(J){J.call(w,B,D,z).style("pointer-events","all")});G.attr({width:Y.inputAreaLength,height:Math.max(Y.inputAreaWidth,t.tickOffset+z.ticklen+Y.labelHeight)}).call(b.fill,z.bgcolor).attr("opacity",0),y.setTranslate(G,0,Y.currentValueTotalHeight)}function C(D,B){var z=B._dims,Y=z.inputAreaLength-2*t.railInset,G=e.ensureSingle(D,"rect",t.railRectClass);G.attr({width:Y,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(b.stroke,B.bordercolor).call(b.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),y.setTranslate(G,t.railInset,.5*(z.inputAreaWidth-t.railWidth)+z.currentValueTotalHeight)}re.exports=function(D){var B=D._fullLayout,z=function(K,ae){for(var U=K[t.name],V=[],q=0;q<U.length;q++){var ie=U[q];ie.visible&&(ie._gd=ae,V.push(ie))}return V}(B,D),Y=B._infolayer.selectAll("g."+t.containerClassName).data(z.length>0?[0]:[]);function G(K){K._commandObserver&&(K._commandObserver.remove(),delete K._commandObserver),m.autoMargin(D,c(K))}if(Y.enter().append("g").classed(t.containerClassName,!0).style("cursor","ew-resize"),Y.exit().each(function(){g.select(this).selectAll("g."+t.groupClassName).each(G)}).remove(),0!==z.length){var J=Y.selectAll("g."+t.groupClassName).data(z,l);J.enter().append("g").classed(t.groupClassName,!0),J.exit().each(G).remove();for(var te=0;te<z.length;te++)h(D,z[te]);J.each(function(K){var ae=g.select(this);(function(U){var V=U._dims;V.labelSteps=[];for(var q=U._stepCount,ie=0;ie<q;ie+=V.labelStride)V.labelSteps.push({fraction:ie/(q-1),step:U._visibleSteps[ie]})})(K),m.manageCommandObserver(D,K,K._visibleSteps,function(U){var V=ae.data()[0];V.active!==U.index&&(V._dragging||_(D,ae,V,U.index,!1,!0))}),function(U,V,q){(q.steps[q.active]||{}).visible||(q.active=q._visibleSteps[0]._index),V.call(d,q).call(C,q).call(u,q).call(M,q).call(O,U,q).call(o,U,q);var ie=q._dims;y.setTranslate(V,ie.lx+q.pad.l,ie.ly+q.pad.t),V.call(I,q,!1),V.call(d,q)}(D,g.select(this),K)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(v,re,ne){"use strict";var g=v("./constants");re.exports={moduleType:"component",name:g.name,layoutAttributes:v("./attributes"),supplyLayoutDefaults:v("./defaults"),draw:v("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../lib"),r=e.strTranslate,n=v("../drawing"),a=v("../color"),t=v("../../lib/svg_text_utils"),p=v("../../constants/interactions"),s=v("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;re.exports={draw:function(f,c,l){var h,o=l.propName,x=l.placeholder,u=l.traceIndex,T=l.avoid||{},_=l.attributes,w=l.transform,M=l.containerGroup,I=f._fullLayout,S=1,R=!1,O=l.propContainer.title,C=(O&&O.text?O.text:"").trim(),D=O&&O.font?O.font:{},B=D.family,z=D.size,Y=D.color;"title.text"===o?h="titleText":-1!==o.indexOf("axis")?h="axisTitleText":o.indexOf(!0)&&(h="colorbarTitleText");var G=f._context.edits[h];""===C?S=0:C.replace(i," % ")===x.replace(i," % ")&&(S=.2,R=!0,G||(C="")),l._meta?C=e.templateString(C,l._meta):I._meta&&(C=e.templateString(C,I._meta));var J,te=C||G;M||(M=e.ensureSingle(I._infolayer,"g","g-"+c),J=I._hColorbarMoveTitle);var X=M.selectAll("text").data(te?[0]:[]);if(X.enter().append("text"),X.text(C).attr("class",c),X.exit().remove(),!te)return M;function K(V){e.syncOrAsync([ae,U],V)}function ae(V){var q;return!w&&J&&(w={}),w?(q="",w.rotate&&(q+="rotate("+[w.rotate,_.x,_.y]+")"),(w.offset||J)&&(q+=r(0,(w.offset||0)-(J||0)))):q=null,V.attr("transform",q),V.style({"font-family":B,"font-size":g.round(z,2)+"px",fill:a.rgb(Y),opacity:S*a.opacity(Y),"font-weight":b.fontWeight}).attr(_).call(t.convertToTspans,f),b.previousPromises(f)}function U(V){var q=g.select(V.node().parentNode);if(T&&T.selection&&T.side&&C){q.attr("transform",null);var ie=s[T.side],H="left"===T.side||"top"===T.side?-1:1,ee=m(T.pad)?T.pad:2,Q=n.bBox(q.node()),le=T.maxShift||H*({left:0,top:0,right:I.width,bottom:I.height}[T.side]-Q[T.side]),de=0;if(le<0)de=le;else{var fe=T.offsetLeft||0,be=T.offsetTop||0;Q.left-=fe,Q.right-=fe,Q.top-=be,Q.bottom-=be,T.selection.each(function(){var _e=n.bBox(this);e.bBoxIntersect(Q,_e,ee)&&(de=Math.max(de,H*(_e[T.side]-Q[ie])+ee))}),de=Math.min(le,de)}if(de>0||le<0){var he={left:[-de,0],right:[de,0],top:[0,-de],bottom:[0,de]}[T.side];q.attr("transform",r(he[0],he[1]))}}}return X.call(K),G&&(C?X.on(".opacity",null):(S=0,R=!0,X.text(x).on("mouseover.opacity",function(){g.select(this).transition().duration(p.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){g.select(this).transition().duration(p.HIDE_PLACEHOLDER).style("opacity",0)})),X.call(t.makeEditable,{gd:f}).on("edit",function(V){void 0!==u?y.call("_guiRestyle",f,o,V,u):y.call("_guiRelayout",f,o,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(K)}).on("input",function(V){this.text(V||" ").call(t.positionText,_.x,_.y)})),X.classed("js-placeholder",R),M}}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("../color/attributes"),b=v("../../lib/extend").extendFlat,y=v("../../plot_api/edit_types").overrideAll,e=v("../../plots/pad_attributes"),r=v("../../plot_api/plot_template").templatedArray,n=r("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});re.exports=y(r("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:b(e({editType:"arraydraw"}),{}),font:g({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:m.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(v,re,ne){"use strict";re.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],479:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/array_container_defaults"),b=v("./attributes"),y=v("./constants").name,e=b.buttons;function r(a,t,p){function s(i,f){return g.coerce(a,t,b,i,f)}s("visible",m(a,t,{name:"buttons",handleItemDefaults:n}).length>0)&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),g.noneOrAll(a,t,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),g.coerceFont(s,"font",p.font),s("bgcolor",p.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function n(a,t){function p(s,i){return g.coerce(a,t,e,s,i)}p("visible","skip"===a.method||Array.isArray(a.args))&&(p("method"),p("args"),p("args2"),p("label"),p("execute"))}re.exports=function(a,t){m(a,t,{name:y,handleItemDefaults:r})}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../plots/plots"),b=v("../color"),y=v("../drawing"),e=v("../../lib"),r=v("../../lib/svg_text_utils"),n=v("../../plot_api/plot_template").arrayEditor,a=v("../../constants/alignment").LINE_SPACING,t=v("./constants"),p=v("./scrollbox");function s(S){return S._index}function i(S,R){return+S.attr(t.menuIndexAttrName)===R._index}function f(S,R,O,C,D,B,z,Y){R.active=z,n(S.layout,t.name,R).applyUpdate("active",z),"buttons"===R.type?l(S,C,null,null,R):"dropdown"===R.type&&(D.attr(t.menuIndexAttrName,"-1"),c(S,C,D,B,R),Y||l(S,C,D,B,R))}function c(S,R,O,C,D){var B=e.ensureSingle(R,"g",t.headerClassName,function(X){X.style("pointer-events","all")}),z=D._dims,J={y:D.pad.t,yPad:0,x:D.pad.l,xPad:0,index:0},te={width:z.headerWidth,height:z.headerHeight};B.call(h,D,D.buttons[D.active]||t.blankHeaderOpts,S).call(M,D,J,te),e.ensureSingle(R,"text",t.headerArrowClassName,function(X){X.attr("text-anchor","end").call(y.font,D.font).text(t.arrowSymbol[D.direction])}).attr({x:z.headerWidth-t.arrowOffsetX+D.pad.l,y:z.headerHeight/2+t.textOffsetY+D.pad.t}),B.on("click",function(){O.call(I,String(i(O,D)?-1:D._index)),l(S,R,O,C,D)}),B.on("mouseover",function(){B.call(u)}),B.on("mouseout",function(){B.call(T,D)}),y.setTranslate(R,z.lx,z.ly)}function l(S,R,O,C,D){O||(O=R).attr("pointer-events","all");var B=-1==+O.attr(t.menuIndexAttrName)&&"buttons"!==D.type?[]:D.buttons,z="dropdown"===D.type?t.dropdownButtonClassName:t.buttonClassName,Y=O.selectAll("g."+z).data(e.filterVisible(B)),G=Y.enter().append("g").classed(z,!0),J=Y.exit();"dropdown"===D.type?(G.attr("opacity","0").transition().attr("opacity","1"),J.transition().attr("opacity","0").remove()):J.remove();var te=0,X=0,K=D._dims,ae=-1!==["up","down"].indexOf(D.direction);"dropdown"===D.type&&(ae?X=K.headerHeight+t.gapButtonHeader:te=K.headerWidth+t.gapButtonHeader),"dropdown"===D.type&&"up"===D.direction&&(X=-t.gapButtonHeader+t.gapButton-K.openHeight),"dropdown"===D.type&&"left"===D.direction&&(te=-t.gapButtonHeader+t.gapButton-K.openWidth);var q,ie,H,U={x:K.lx+te+D.pad.l,y:K.ly+X+D.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},V={l:U.x+D.borderwidth,t:U.y+D.borderwidth};Y.each(function(q,ie){var H=g.select(this);H.call(h,D,q,S).call(M,D,U),H.on("click",function(){g.event.defaultPrevented||(q.execute&&(q.args2&&D.active===ie?(f(S,D,0,R,O,C,-1),m.executeAPICommand(S,q.method,q.args2)):(f(S,D,0,R,O,C,ie),m.executeAPICommand(S,q.method,q.args))),S.emit("plotly_buttonclicked",{menu:D,button:q,active:D.active}))}),H.on("mouseover",function(){H.call(u)}),H.on("mouseout",function(){H.call(T,D),Y.call(x,D)})}),Y.call(x,D),ae?(V.w=Math.max(K.openWidth,K.headerWidth),V.h=U.y-V.t):(V.w=U.x-V.l,V.h=Math.max(K.openHeight,K.headerHeight)),V.direction=D.direction,C&&(Y.size()?function(q,ie,H,ee,Q,oe){var le,de,fe,be=Q.direction,_e=Q._dims,Ce=Q.active;if("up"===be||"down"===be)for(de=0,fe=0;fe<Ce;fe++)de+=_e.heights[fe]+t.gapButton;else for(le=0,fe=0;fe<Ce;fe++)le+=_e.widths[fe]+t.gapButton;ee.enable(oe,le,de),ee.hbar&&ee.hbar.attr("opacity","0").transition().attr("opacity","1"),ee.vbar&&ee.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,C,D,V):(H=!!(q=C).vbar,(ie=!!q.hbar)&&q.hbar.transition().attr("opacity","0").each("end",function(){ie=!1,H||q.disable()}),H&&q.vbar.transition().attr("opacity","0").each("end",function(){H=!1,ie||q.disable()})))}function h(S,R,O,C){S.call(d,R).call(o,R,O,C)}function d(S,R){e.ensureSingle(S,"rect",t.itemRectClassName,function(O){O.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})}).call(b.stroke,R.bordercolor).call(b.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px")}function o(S,R,O,C){var D=e.ensureSingle(S,"text",t.itemTextClassName,function(Y){Y.attr({"text-anchor":"start","data-notex":1})}),B=O.label,z=C._fullLayout._meta;z&&(B=e.templateString(B,z)),D.call(y.font,R.font).text(B).call(r.convertToTspans,C)}function x(S,R){var O=R.active;S.each(function(C,D){var B=g.select(this);D===O&&R.showactive&&B.select("rect."+t.itemRectClassName).call(b.fill,t.activeColor)})}function u(S){S.select("rect."+t.itemRectClassName).call(b.fill,t.hoverColor)}function T(S,R){S.select("rect."+t.itemRectClassName).call(b.fill,R.bgcolor)}function _(S,R){var O=R._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},C=y.tester.selectAll("g."+t.dropdownButtonClassName).data(e.filterVisible(R.buttons));C.enter().append("g").classed(t.dropdownButtonClassName,!0);var D=-1!==["up","down"].indexOf(R.direction);C.each(function(te,X){var K=g.select(this);K.call(h,R,te,S);var ae=K.select("."+t.itemTextClassName),U=ae.node()&&y.bBox(ae.node()).width,V=Math.max(U+t.textPadX,t.minWidth),q=R.font.size*a,ie=r.lineCount(ae),H=Math.max(q*ie,t.minHeight)+t.textOffsetY;H=Math.ceil(H),V=Math.ceil(V),O.widths[X]=V,O.heights[X]=H,O.height1=Math.max(O.height1,H),O.width1=Math.max(O.width1,V),D?(O.totalWidth=Math.max(O.totalWidth,V),O.openWidth=O.totalWidth,O.totalHeight+=H+t.gapButton,O.openHeight+=H+t.gapButton):(O.totalWidth+=V+t.gapButton,O.openWidth+=V+t.gapButton,O.totalHeight=Math.max(O.totalHeight,H),O.openHeight=O.totalHeight)}),D?O.totalHeight-=t.gapButton:O.totalWidth-=t.gapButton,O.headerWidth=O.width1+t.arrowPadX,O.headerHeight=O.height1,"dropdown"===R.type&&(D?(O.width1+=t.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=t.arrowPadX),C.remove();var B=O.totalWidth+R.pad.l+R.pad.r,z=O.totalHeight+R.pad.t+R.pad.b,Y=S._fullLayout._size;O.lx=Y.l+Y.w*R.x,O.ly=Y.t+Y.h*(1-R.y);var G="left";e.isRightAnchor(R)&&(O.lx-=B,G="right"),e.isCenterAnchor(R)&&(O.lx-=B/2,G="center");var J="top";e.isBottomAnchor(R)&&(O.ly-=z,J="bottom"),e.isMiddleAnchor(R)&&(O.ly-=z/2,J="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),m.autoMargin(S,w(R),{x:R.x,y:R.y,l:B*({right:1,center:.5}[G]||0),r:B*({left:1,center:.5}[G]||0),b:z*({top:1,middle:.5}[J]||0),t:z*({bottom:1,middle:.5}[J]||0)})}function w(S){return t.autoMarginIdRoot+S._index}function M(S,R,O,C){C=C||{};var D=S.select("."+t.itemRectClassName),B=S.select("."+t.itemTextClassName),z=R.borderwidth,Y=O.index,G=R._dims;y.setTranslate(S,z+O.x,z+O.y);var J=-1!==["up","down"].indexOf(R.direction),te=C.height||(J?G.heights[Y]:G.height1);D.attr({x:0,y:0,width:C.width||(J?G.width1:G.widths[Y]),height:te});var X=R.font.size*a,K=(r.lineCount(B)-1)*X/2;r.positionText(B,t.textOffsetX,te/2-K+t.textOffsetY),J?O.y+=G.heights[Y]+O.yPad:O.x+=G.widths[Y]+O.xPad,O.index++}function I(S,R){S.attr(t.menuIndexAttrName,R||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}re.exports=function(S){var R=S._fullLayout,O=e.filterVisible(R[t.name]);function C(X){m.autoMargin(S,w(X))}var D=R._menulayer.selectAll("g."+t.containerClassName).data(O.length>0?[0]:[]);if(D.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),D.exit().each(function(){g.select(this).selectAll("g."+t.headerGroupClassName).each(C)}).remove(),0!==O.length){var B=D.selectAll("g."+t.headerGroupClassName).data(O,s);B.enter().append("g").classed(t.headerGroupClassName,!0);for(var z=e.ensureSingle(D,"g",t.dropdownButtonGroupClassName,function(X){X.style("pointer-events","all")}),Y=0;Y<O.length;Y++)_(S,O[Y]);var te=new p(S,z,"updatemenus"+R._uid);B.enter().size()&&(z.node().parentNode.appendChild(z.node()),z.call(I)),B.exit().each(function(X){z.call(I),C(X)}).remove(),B.each(function(X){var K=g.select(this),ae="dropdown"===X.type?z:null;m.manageCommandObserver(S,X,X.buttons,function(U){f(S,X,0,K,ae,te,U.index,!0)}),"dropdown"===X.type?(c(S,K,z,te,X),i(z,X)&&l(S,K,z,te,X)):l(S,K,null,null,X)})}}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(v,re,ne){arguments[4][475][0].apply(ne,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(v,re,ne){"use strict";re.exports=e;var g=v("@plotly/d3"),m=v("../color"),b=v("../drawing"),y=v("../../lib");function e(r,n,a){this.gd=r,this.container=n,this.id=a,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(r,n,a){var t=this.gd._fullLayout,p=t.width,s=t.height;this.position=r;var i,f,c,l,h=this.position.l,d=this.position.w,o=this.position.t,x=this.position.h,u=this.position.direction,T="down"===u,_="left"===u,w="up"===u,M=d,I=x;T||_||"right"===u||w||(this.position.direction="down",T=!0),T||w?(f=(i=h)+M,T?(c=o,I=(l=Math.min(c+I,s))-c):I=(l=o+I)-(c=Math.max(l-I,0))):(l=(c=o)+I,_?M=(f=h+M)-(i=Math.max(f-M,0)):(i=h,M=(f=Math.min(i+M,p))-i)),this._box={l:i,t:c,w:M,h:I};var S=d>M,R=e.barLength+2*e.barPad,O=e.barWidth+2*e.barPad,C=h,D=o+x;D+O>s&&(D=s-O);var B=this.container.selectAll("rect.scrollbar-horizontal").data(S?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(m.fill,e.barColor),S?(this.hbar=B.attr({rx:e.barRadius,ry:e.barRadius,x:C,y:D,width:R,height:O}),this._hbarXMin=C+R/2,this._hbarTranslateMax=M-R):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=x>I,Y=e.barWidth+2*e.barPad,G=e.barLength+2*e.barPad,J=h+d,te=o;J+Y>p&&(J=p-Y);var X=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(m.fill,e.barColor),z?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:J,y:te,width:Y,height:G}),this._vbarYMin=te+G/2,this._vbarTranslateMax=I-G):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var K=this.id,ae=i-.5,U=z?f+Y+.5:f+.5,V=c-.5,q=S?l+O+.5:l+.5,ie=t._topdefs.selectAll("#"+K).data(S||z?[0]:[]);if(ie.exit().remove(),ie.enter().append("clipPath").attr("id",K).append("rect"),S||z?(this._clipRect=ie.select("rect").attr({x:Math.floor(ae),y:Math.floor(V),width:Math.ceil(U)-Math.floor(ae),height:Math.ceil(q)-Math.floor(V)}),this.container.call(b.setClipUrl,K,this.gd),this.bg.attr({x:h,y:o,width:d,height:x})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),S||z){var H=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(H);var ee=g.behavior.drag().on("dragstart",function(){g.event.sourceEvent.preventDefault(),g.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));S&&this.hbar.on(".drag",null).call(ee),z&&this.vbar.on(".drag",null).call(ee)}this.setTranslate(n,a)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r-=g.event.dx),this.vbar&&(n-=g.event.dy),this.setTranslate(r,n)},e.prototype._onBoxWheel=function(){var r=this.translateX,n=this.translateY;this.hbar&&(r+=g.event.deltaY),this.vbar&&(n+=g.event.deltaY),this.setTranslate(r,n)},e.prototype._onBarDrag=function(){var r=this.translateX,n=this.translateY;if(this.hbar){var a=r+this._hbarXMin,t=a+this._hbarTranslateMax;r=(y.constrain(g.event.x,a,t)-a)/(t-a)*(this.position.w-this._box.w)}if(this.vbar){var p=n+this._vbarYMin,s=p+this._vbarTranslateMax;n=(y.constrain(g.event.y,p,s)-p)/(s-p)*(this.position.h-this._box.h)}this.setTranslate(r,n)},e.prototype.setTranslate=function(r,n){var a=this.position.w-this._box.w,t=this.position.h-this._box.h;r=y.constrain(r||0,0,a),n=y.constrain(n||0,0,t),this.translateX=r,this.translateY=n,this.container.call(b.setTranslate,this._box.l-this.position.l-r,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+r-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar&&this.hbar.call(b.setTranslate,r+r/a*this._hbarTranslateMax,n),this.vbar&&this.vbar.call(b.setTranslate,r,n+n/t*this._vbarTranslateMax)}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(v,re,ne){"use strict";re.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(v,re,ne){"use strict";re.exports={axisRefDescription:function(g,m,b){return["If set to a",g,"axis id (e.g. *"+g+"* or","*"+g+"2*), the `"+g+"` position refers to a",g,"coordinate. If set to *paper*, the `"+g+"`","position refers to the distance from the",m,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",m,"("+b+"). If set to a",g,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",m,"of the domain of that axis: e.g.,","*"+g+"2 domain* refers to the domain of the second",g," axis and a",g,"position of 0.5 refers to the","point between the",m,"and the",b,"of the domain of the","second",g,"axis."].join(" ")}}},{}],485:[function(v,re,ne){"use strict";re.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],486:[function(v,re,ne){"use strict";re.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(v,re,ne){"use strict";re.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(v,re,ne){"use strict";re.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(v,re,ne){"use strict";re.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],490:[function(v,re,ne){"use strict";re.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(v,re,ne){"use strict";re.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(v,re,ne){"use strict";ne.xmlns="http://www.w3.org/2000/xmlns/",ne.svg="http://www.w3.org/2000/svg",ne.xlink="http://www.w3.org/1999/xlink",ne.svgAttrs={xmlns:ne.svg,"xmlns:xlink":ne.xlink}},{}],493:[function(v,re,ne){"use strict";ne.version=v("./version").version,v("native-promise-only"),v("../build/plotcss");for(var g=v("./registry"),m=ne.register=g.register,b=v("./plot_api"),y=Object.keys(b),e=0;e<y.length;e++){var r=y[e];"_"!==r.charAt(0)&&(ne[r]=b[r]),m({moduleType:"apiMethod",name:r,fn:b[r]})}m(v("./traces/scatter")),m([v("./components/legend"),v("./components/fx"),v("./components/annotations"),v("./components/annotations3d"),v("./components/selections"),v("./components/shapes"),v("./components/images"),v("./components/updatemenus"),v("./components/sliders"),v("./components/rangeslider"),v("./components/rangeselector"),v("./components/grid"),v("./components/errorbars"),v("./components/colorscale"),v("./components/colorbar"),v("./components/modebar")]),m([v("./locale-en"),v("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(m(window.PlotlyLocales),delete window.PlotlyLocales),ne.Icons=v("./fonts/ploticon");var n=v("./components/fx"),a=v("./plots/plots");ne.Plots={resize:a.resize,graphJson:a.graphJson,sendDataToCloud:a.sendDataToCloud},ne.Fx={hover:n.hover,unhover:n.unhover,loneHover:n.loneHover,loneUnhover:n.loneUnhover},ne.Snapshot=v("./snapshot"),ne.PlotSchema=v("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(v,re,ne){"use strict";re.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(v,re,ne){"use strict";ne.isLeftAnchor=function(g){return"left"===g.xanchor||"auto"===g.xanchor&&g.x<=1/3},ne.isCenterAnchor=function(g){return"center"===g.xanchor||"auto"===g.xanchor&&g.x>1/3&&g.x<2/3},ne.isRightAnchor=function(g){return"right"===g.xanchor||"auto"===g.xanchor&&g.x>=2/3},ne.isTopAnchor=function(g){return"top"===g.yanchor||"auto"===g.yanchor&&g.y>=2/3},ne.isMiddleAnchor=function(g){return"middle"===g.yanchor||"auto"===g.yanchor&&g.y>1/3&&g.y<2/3},ne.isBottomAnchor=function(g){return"bottom"===g.yanchor||"auto"===g.yanchor&&g.y<=1/3}},{}],496:[function(v,re,ne){"use strict";var g=v("./mod"),m=g.mod,b=g.modHalf,y=Math.PI,e=2*y;function r(p){return Math.abs(p[1]-p[0])>e-1e-14}function n(p,s){return b(s-p,e)}function a(p,s){if(r(s))return!0;var i,f;s[0]<s[1]?(i=s[0],f=s[1]):(i=s[1],f=s[0]),(i=m(i,e))>(f=m(f,e))&&(f+=e);var c=m(p,e),l=c+e;return c>=i&&c<=f||l>=i&&l<=f}function t(p,s,i,f,c,l,h){c=c||0,l=l||0;var d,o,x,u,T,_=r([i,f]);function w(R,O){return[R*Math.cos(O)+c,l-R*Math.sin(O)]}_?(d=0,o=y,x=e):i<f?(d=i,x=f):(d=f,x=i),p<s?(u=p,T=s):(u=s,T=p);var M,I=Math.abs(x-d)<=y?0:1;function S(R,O,C){return"A"+[R,R]+" "+[0,I,C]+" "+w(R,O)}return _?M=null===u?"M"+w(T,d)+S(T,o,0)+S(T,x,0)+"Z":"M"+w(u,d)+S(u,o,0)+S(u,x,0)+"ZM"+w(T,d)+S(T,o,1)+S(T,x,1)+"Z":null===u?(M="M"+w(T,d)+S(T,x,0),h&&(M+="L0,0Z")):M="M"+w(u,d)+"L"+w(T,d)+S(T,x,0)+"L"+w(u,x)+S(u,d,1)+"Z",M}re.exports={deg2rad:function(p){return p/180*y},rad2deg:function(p){return p/y*180},angleDelta:n,angleDist:function(p,s){return Math.abs(n(p,s))},isFullCircle:r,isAngleInsideSector:a,isPtInsideSector:function(p,s,i,f){return!!a(s,f)&&(i[0]<i[1]?(c=i[0],l=i[1]):(c=i[1],l=i[0]),p>=c&&p<=l);var c,l},pathArc:function(p,s,i,f,c){return t(null,p,s,i,f,c,0)},pathSector:function(p,s,i,f,c){return t(null,p,s,i,f,c,1)},pathAnnulus:function(p,s,i,f,c,l){return t(p,s,i,f,c,l,1)}}},{"./mod":522}],497:[function(v,re,ne){"use strict";var g=Array.isArray,m=ArrayBuffer,b=DataView;function y(n){return m.isView(n)&&!(n instanceof b)}function e(n){return g(n)||y(n)}function r(n,a,t){if(e(n)){if(e(n[0])){for(var p=t,s=0;s<n.length;s++)p=a(p,n[s].length);return p}return n.length}return 0}ne.isTypedArray=y,ne.isArrayOrTypedArray=e,ne.isArray1D=function(n){return!e(n[0])},ne.ensureArray=function(n,a){return g(n)||(n=[]),n.length=a,n},ne.concat=function(){var n,a,t,p,s,i,f,c,l=[],h=!0,d=0;for(t=0;t<arguments.length;t++)(i=(p=arguments[t]).length)&&(a?l.push(p):(a=p,s=i),g(p)?n=!1:(h=!1,d?n!==p.constructor&&(n=!1):n=p.constructor),d+=i);if(!d)return[];if(!l.length)return a;if(h)return a.concat.apply(a,l);if(n){for((f=new n(d)).set(a),t=0;t<l.length;t++)f.set(p=l[t],s),s+=p.length;return f}for(f=new Array(d),c=0;c<a.length;c++)f[c]=a[c];for(t=0;t<l.length;t++){for(p=l[t],c=0;c<p.length;c++)f[s+c]=p[c];s+=c}return f},ne.maxRowLength=function(n){return r(n,Math.max,0)},ne.minRowLength=function(n){return r(n,Math.min,1/0)}},{}],498:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../constants/numerical").BADNUM,b=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;re.exports=function(y){return"string"==typeof y&&(y=y.replace(b,"")),g(y)?Number(y):m}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(v,re,ne){"use strict";re.exports=function(g){var m=g._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(b){b.regl&&b.regl.clear({color:!0,depth:!0})})}},{}],500:[function(v,re,ne){"use strict";re.exports=function(g){g._responsiveChartHandler&&(window.removeEventListener("resize",g._responsiveChartHandler),delete g._responsiveChartHandler)}},{}],501:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("tinycolor2"),b=v("../plots/attributes"),y=v("../components/colorscale/scales"),e=v("../components/color"),r=v("../constants/interactions").DESELECTDIM,n=v("./nested_property"),a=v("./regex").counter,t=v("./mod").modHalf,p=v("./array").isArrayOrTypedArray;function s(i,f){var c=ne.valObjectMeta[f.valType];if(f.arrayOk&&p(i))return!0;if(c.validateFunction)return c.validateFunction(i,f);var l={},h=l;return c.coerceFunction(i,{set:function(o){h=o}},l,f),h!==l}ne.valObjectMeta={data_array:{coerceFunction:function(i,f,c){p(i)?f.set(i):void 0!==c&&f.set(c)}},enumerated:{coerceFunction:function(i,f,c,l){l.coerceNumber&&(i=+i),-1===l.values.indexOf(i)?f.set(c):f.set(i)},validateFunction:function(i,f){f.coerceNumber&&(i=+i);for(var c=f.values,l=0;l<c.length;l++){var h=String(c[l]);if("/"===h.charAt(0)&&"/"===h.charAt(h.length-1)){if(new RegExp(h.substr(1,h.length-2)).test(i))return!0}else if(i===c[l])return!0}return!1}},boolean:{coerceFunction:function(i,f,c){f.set(!0===i||!1===i?i:c)}},number:{coerceFunction:function(i,f,c,l){!g(i)||void 0!==l.min&&i<l.min||void 0!==l.max&&i>l.max?f.set(c):f.set(+i)}},integer:{coerceFunction:function(i,f,c,l){i%1||!g(i)||void 0!==l.min&&i<l.min||void 0!==l.max&&i>l.max?f.set(c):f.set(+i)}},string:{coerceFunction:function(i,f,c,l){f.set("string"!=typeof i?!0!==l.strict&&"number"==typeof i?String(i):c:l.noBlank&&!i?c:i)}},color:{coerceFunction:function(i,f,c){m(i).isValid()?f.set(i):f.set(c)}},colorlist:{coerceFunction:function(i,f,c){Array.isArray(i)&&i.length&&i.every(function(l){return m(l).isValid()})?f.set(i):f.set(c)}},colorscale:{coerceFunction:function(i,f,c){f.set(y.get(i,c))}},angle:{coerceFunction:function(i,f,c){"auto"===i?f.set("auto"):g(i)?f.set(t(+i,360)):f.set(c)}},subplotid:{coerceFunction:function(i,f,c,l){var h=l.regex||a(c);"string"==typeof i&&h.test(i)?f.set(i):f.set(c)},validateFunction:function(i,f){var c=f.dflt;return i===c||"string"==typeof i&&!!a(c).test(i)}},flaglist:{coerceFunction:function(i,f,c,l){if(-1===(l.extras||[]).indexOf(i))if("string"==typeof i){for(var h=i.split("+"),d=0;d<h.length;){var o=h[d];-1===l.flags.indexOf(o)||h.indexOf(o)<d?h.splice(d,1):d++}f.set(h.length?h.join("+"):c)}else f.set(c);else f.set(i)}},any:{coerceFunction:function(i,f,c){f.set(void 0===i?c:i)}},info_array:{coerceFunction:function(i,f,c,l){function h(D,B,z){var Y;return void 0===z&&(z=B.dflt),ne.valObjectMeta[B.valType].coerceFunction(D,{set:function(J){Y=J}},z,B),Y}var d=2===l.dimensions||"1-2"===l.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(Array.isArray(i)){var o,x,u,_,w,M=l.items,I=[],S=Array.isArray(M),R=S&&d&&Array.isArray(M[0]),O=d&&S&&!R,C=S&&!O?M.length:i.length;if(c=Array.isArray(c)?c:[],d)for(o=0;o<C;o++)for(I[o]=[],u=Array.isArray(i[o])?i[o]:[],_=O?M.length:S?M[o].length:u.length,x=0;x<_;x++)void 0!==(w=h(u[x],O?M[x]:S?M[o][x]:M,(c[o]||[])[x]))&&(I[o][x]=w);else for(o=0;o<C;o++)void 0!==(w=h(i[o],S?M[o]:M,c[o]))&&(I[o]=w);f.set(I)}else f.set(c)},validateFunction:function(i,f){if(!Array.isArray(i))return!1;var c=f.items,l=Array.isArray(c),h=2===f.dimensions;if(!f.freeLength&&i.length!==c.length)return!1;for(var d=0;d<i.length;d++)if(h){if(!Array.isArray(i[d])||!f.freeLength&&i[d].length!==c[d].length)return!1;for(var o=0;o<i[d].length;o++)if(!s(i[d][o],l?c[d][o]:c))return!1}else if(!s(i[d],l?c[d]:c))return!1;return!0}}},ne.coerce=function(i,f,c,l,h){var d=n(c,l).get(),o=n(i,l),x=n(f,l),u=o.get(),T=f._template;if(void 0===u&&T&&(u=n(T,l).get(),T=0),void 0===h&&(h=d.dflt),d.arrayOk&&p(u))return x.set(u),u;var _=ne.valObjectMeta[d.valType].coerceFunction;_(u,x,h,d);var w=x.get();return T&&w===h&&!s(u,d)&&(_(u=n(T,l).get(),x,h,d),w=x.get()),w},ne.coerce2=function(i,f,c,l,h){var d=n(i,l),o=ne.coerce(i,f,c,l,h);return null!=d.get()&&o},ne.coerceFont=function(i,f,c){var l={};return l.family=i(f+".family",(c=c||{}).family),l.size=i(f+".size",c.size),l.color=i(f+".color",c.color),l},ne.coercePattern=function(i,f,c,l){if(i(f+".shape")){i(f+".solidity"),i(f+".size");var h="overlay"===i(f+".fillmode");if(!l){var d=i(f+".bgcolor",h?c:void 0);i(f+".fgcolor",h?e.contrast(d):c)}i(f+".fgopacity",h?.5:1)}},ne.coerceHoverinfo=function(i,f,c){var l,h=f._module.attributes,d=h.hoverinfo?h:b,o=d.hoverinfo;if(1===c._dataLength){var x="all"===o.dflt?o.flags.slice():o.dflt.split("+");x.splice(x.indexOf("name"),1),l=x.join("+")}return ne.coerce(i,f,d,"hoverinfo",l)},ne.coerceSelectionMarkerOpacity=function(i,f){if(i.marker){var c,l,h=i.marker.opacity;void 0!==h&&(p(h)||i.selected||i.unselected||(c=h,l=r*h),f("selected.marker.opacity",c),f("unselected.marker.opacity",l))}},ne.validate=s},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(v,re,ne){"use strict";var g,m,b=v("d3-time-format").timeFormat,y=v("fast-isnumeric"),e=v("./loggers"),r=v("./mod").mod,n=v("../constants/numerical"),a=n.BADNUM,t=n.ONEDAY,p=n.ONEHOUR,s=n.ONEMIN,i=n.ONESEC,f=n.EPOCHJD,c=v("../registry"),l=v("d3-time-format").utcFormat,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,o=(new Date).getFullYear()-70;function x(B){return B&&c.componentsRegistry.calendars&&"string"==typeof B&&"gregorian"!==B}function u(B,z){return String(B+Math.pow(10,z)).substr(1)}ne.dateTick0=function(B,z){var J,te,Y=(te=!!z,x(J=B)?te?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[J]:c.getComponentMethod("calendars","CANONICAL_TICK")[J]:te?"2000-01-02":"2000-01-01");if(z<2)return Y;var G=ne.dateTime2ms(Y,B);return ne.ms2DateTime(G+=t*(z-1),0,B)},ne.dfltRange=function(B){return x(B)?c.getComponentMethod("calendars","DFLTRANGE")[B]:["2000-01-01","2001-01-01"]},ne.isJSDate=function(B){return"object"==typeof B&&null!==B&&"function"==typeof B.getTime},ne.dateTime2ms=function(B,z){if(ne.isJSDate(B)){var Y=B.getTimezoneOffset()*s,G=(B.getUTCMinutes()-B.getMinutes())*s+(B.getUTCSeconds()-B.getSeconds())*i+(B.getUTCMilliseconds()-B.getMilliseconds());if(G){var J=3*s;Y=Y-J/2+r(G-Y+J/2,J)}return(B=Number(B)-Y)>=g&&B<=m?B:a}if("string"!=typeof B&&"number"!=typeof B)return a;B=String(B);var te=x(z),X=B.charAt(0);!te||"G"!==X&&"g"!==X||(B=B.substr(1),z="");var K=te&&"chinese"===z.substr(0,7),ae=B.match(K?d:h);if(!ae)return a;var U=ae[1],V=ae[3]||"1",q=Number(ae[5]||1),ie=Number(ae[7]||0),H=Number(ae[9]||0),ee=Number(ae[11]||0);if(te){if(2===U.length)return a;var Q;U=Number(U);try{var oe=c.getComponentMethod("calendars","getCal")(z);if(K){var le="i"===V.charAt(V.length-1);V=parseInt(V,10),Q=oe.newDate(U,oe.toMonthIndex(U,V,le),q)}else Q=oe.newDate(U,Number(V),q)}catch{return a}return Q?(Q.toJD()-f)*t+ie*p+H*s+ee*i:a}U=2===U.length?(Number(U)+2e3-o)%100+o:Number(U),V-=1;var de=new Date(Date.UTC(2e3,V,q,ie,H));return de.setUTCFullYear(U),de.getUTCMonth()!==V||de.getUTCDate()!==q?a:de.getTime()+ee*i},g=ne.MIN_MS=ne.dateTime2ms("-9999"),m=ne.MAX_MS=ne.dateTime2ms("9999-12-31 23:59:59.9999"),ne.isDateTime=function(B,z){return ne.dateTime2ms(B,z)!==a};var T=90*t,_=3*p,w=5*s;function M(B,z,Y,G,J){if((z||Y||G||J)&&(B+=" "+u(z,2)+":"+u(Y,2),(G||J)&&(B+=":"+u(G,2),J))){for(var te=4;J%10==0;)te-=1,J/=10;B+="."+u(J,te)}return B}ne.ms2DateTime=function(B,z,Y){if("number"!=typeof B||!(B>=g&&B<=m))return a;z||(z=0);var G,J,te,X,K,ae,U=Math.floor(10*r(B+.05,1)),V=Math.round(B-U/10);if(x(Y)){var q=Math.floor(V/t)+f,ie=Math.floor(r(B,t));try{G=c.getComponentMethod("calendars","getCal")(Y).fromJD(q).formatDate("yyyy-mm-dd")}catch{G=l("G%Y-%m-%d")(new Date(V))}if("-"===G.charAt(0))for(;G.length<11;)G="-0"+G.substr(1);else for(;G.length<10;)G="0"+G;J=z<T?Math.floor(ie/p):0,te=z<T?Math.floor(ie%p/s):0,X=z<_?Math.floor(ie%s/i):0,K=z<w?ie%i*10+U:0}else ae=new Date(V),G=l("%Y-%m-%d")(ae),J=z<T?ae.getUTCHours():0,te=z<T?ae.getUTCMinutes():0,X=z<_?ae.getUTCSeconds():0,K=z<w?10*ae.getUTCMilliseconds()+U:0;return M(G,J,te,X,K)},ne.ms2DateTimeLocal=function(B){if(!(B>=g+t&&B<=m-t))return a;var z=Math.floor(10*r(B+.05,1)),Y=new Date(Math.round(B-z/10));return M(b("%Y-%m-%d")(Y),Y.getHours(),Y.getMinutes(),Y.getSeconds(),10*Y.getUTCMilliseconds()+z)},ne.cleanDate=function(B,z,Y){if(B===a)return z;if(ne.isJSDate(B)||"number"==typeof B&&isFinite(B)){if(x(Y))return e.error("JS Dates and milliseconds are incompatible with world calendars",B),z;if(!(B=ne.ms2DateTimeLocal(+B))&&void 0!==z)return z}else if(!ne.isDateTime(B,Y))return e.error("unrecognized date",B),z;return B};var I=/%\d?f/g,S=/%h/g,R={1:"1",2:"1",3:"2",4:"2"};function O(B,z,Y,G){B=B.replace(I,function(te){var X=Math.min(+te.charAt(1)||6,6);return(z/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0"});var J=new Date(Math.floor(z+.05));if(B=B.replace(S,function(){return R[Y("%q")(J)]}),x(G))try{B=c.getComponentMethod("calendars","worldCalFmt")(B,z,G)}catch{return"Invalid"}return Y(B)(J)}var C=[59,59.9,59.99,59.999,59.9999];ne.formatDate=function(B,z,Y,G,J,te){if(J=x(J)&&J,!z)if("y"===Y)z=te.year;else if("m"===Y)z=te.month;else{if("d"!==Y)return function(X,K){var ae=r(X+.05,t),U=u(Math.floor(ae/p),2)+":"+u(r(Math.floor(ae/s),60),2);if("M"!==K){y(K)||(K=0);var V=(100+Math.min(r(X/i,60),C[K])).toFixed(K).substr(1);K>0&&(V=V.replace(/0+$/,"").replace(/[\.]$/,"")),U+=":"+V}return U}(B,Y)+"\n"+O(te.dayMonthYear,B,G,J);z=te.dayMonth+"\n"+te.year}return O(z,B,G,J)};var D=3*t;ne.incrementMonth=function(B,z,Y){Y=x(Y)&&Y;var G=r(B,t);if(B=Math.round(B-G),Y)try{var J=Math.round(B/t)+f,te=c.getComponentMethod("calendars","getCal")(Y),X=te.fromJD(J);return z%12?te.add(X,z,"m"):te.add(X,z/12,"y"),(X.toJD()-f)*t+G}catch{e.error("invalid ms "+B+" in calendar "+Y)}var K=new Date(B+D);return K.setUTCMonth(K.getUTCMonth()+z)+G-D},ne.findExactDates=function(B,z){for(var Y,G,J=0,te=0,X=0,K=0,ae=x(z)&&c.getComponentMethod("calendars","getCal")(z),U=0;U<B.length;U++)if(y(G=B[U])){if(!(G%t))if(ae)try{1===(Y=ae.fromJD(G/t+f)).day()?1===Y.month()?J++:te++:X++}catch{}else 1===(Y=new Date(G)).getUTCDate()?0===Y.getUTCMonth()?J++:te++:X++}else K++;X+=te+=J;var V=B.length-K;return{exactYears:J/V,exactMonths:te/V,exactDays:X/V}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("./loggers"),b=v("./matrix"),y=v("gl-mat4");function e(p){var s=p&&p.parentNode;s&&s.removeChild(p)}function r(p,s,i){var f="plotly.js-style-"+p,c=document.getElementById(f);c||((c=document.createElement("style")).setAttribute("id",f),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var l=c.sheet;l.insertRule?l.insertRule(s+"{"+i+"}",0):l.addRule?l.addRule(s,i,0):m.warn("addStyleRule failed")}function n(p){var s=window.getComputedStyle(p,null),i=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("-moz-transform")||s.getPropertyValue("-ms-transform")||s.getPropertyValue("-o-transform")||s.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(f){return+f})}function a(p){for(var s=[];t(p);)s.push(p),p=p.parentNode;return s}function t(p){return p&&(p instanceof Element||p instanceof HTMLElement)}re.exports={getGraphDiv:function(p){var s;if("string"==typeof p){if(null===(s=document.getElementById(p)))throw new Error("No DOM element with id '"+p+"' exists on the page.");return s}if(null==p)throw new Error("DOM element provided is null or undefined");return p},isPlotDiv:function(p){var s=g.select(p);return s.node()instanceof HTMLElement&&s.size()&&s.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(p,s){r("global",p,s)},addRelatedStyleRule:r,deleteRelatedStyleRule:function(p){var i=document.getElementById("plotly.js-style-"+p);i&&e(i)},getFullTransformMatrix:function(p){var s=a(p),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return s.forEach(function(f){var c=n(f);if(c){var l=b.convertCssMatrix(c);i=y.multiply(i,i,l)}}),i},getElementTransformMatrix:n,getElementAndAncestors:a,equalDomRects:function(p,s){return p&&s&&p.x===s.x&&p.y===s.y&&p.top===s.top&&p.left===s.left&&p.right===s.right&&p.bottom===s.bottom}}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(v,re,ne){"use strict";var g=v("events").EventEmitter;re.exports={init:function(b){if(b._ev instanceof g)return b;var y=new g,e=new g;return b._ev=y,b._internalEv=e,b.on=y.on.bind(y),b.once=y.once.bind(y),b.removeListener=y.removeListener.bind(y),b.removeAllListeners=y.removeAllListeners.bind(y),b._internalOn=e.on.bind(e),b._internalOnce=e.once.bind(e),b._removeInternalListener=e.removeListener.bind(e),b._removeAllInternalListeners=e.removeAllListeners.bind(e),b.emit=function(r,n){typeof jQuery<"u"&&jQuery(b).trigger(r,n),y.emit(r,n),e.emit(r,n)},b},triggerHandler:function(b,y,e){var r,n;typeof jQuery<"u"&&(r=jQuery(b).triggerHandler(y,e));var a=b._ev;if(!a)return r;var t,p=a._events[y];if(!p)return r;function s(i){return i.listener?(a.removeListener(y,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(a,[e]))):i.apply(a,[e])}for(p=Array.isArray(p)?p:[p],t=0;t<p.length-1;t++)s(p[t]);return n=s(p[t]),void 0!==r?r:n},purge:function(b){return delete b._ev,delete b.on,delete b.once,delete b.removeListener,delete b.removeAllListeners,delete b.emit,delete b._ev,delete b._internalEv,delete b._internalOn,delete b._internalOnce,delete b._removeInternalListener,delete b._removeAllInternalListeners,b}}},{events:84}],505:[function(v,re,ne){"use strict";var g=v("./is_plain_object.js"),m=Array.isArray;function b(y,e,r,n){var a,t,p,s,i,f,c=y[0],l=y.length;if(2===l&&m(c)&&m(y[1])&&0===c.length){if(function(d,o){var x,u;for(x=0;x<d.length;x++){if(null!==(u=d[x])&&"object"==typeof u)return!1;void 0!==u&&(o[x]=u)}return!0}(y[1],c))return c;c.splice(0,c.length)}for(var h=1;h<l;h++)for(t in a=y[h])p=c[t],s=a[t],n&&m(s)?c[t]=s:e&&s&&(g(s)||(i=m(s)))?(i?(i=!1,f=p&&m(p)?p:[]):f=p&&g(p)?p:{},c[t]=b([f,s],e,r,n)):(void 0!==s||r)&&(c[t]=s);return c}ne.extendFlat=function(){return b(arguments,!1,!1,!1)},ne.extendDeep=function(){return b(arguments,!0,!1,!1)},ne.extendDeepAll=function(){return b(arguments,!0,!0,!1)},ne.extendDeepNoArrays=function(){return b(arguments,!0,!1,!0)}},{"./is_plain_object.js":516}],506:[function(v,re,ne){"use strict";re.exports=function(g){for(var m={},b=[],y=0,e=0;e<g.length;e++){var r=g[e];1!==m[r]&&(m[r]=1,b[y++]=r)}return b}},{}],507:[function(v,re,ne){"use strict";function g(b){return!0===b.visible}function m(b){var y=b[0].trace;return!0===y.visible&&0!==y._length}re.exports=function(b){for(var y,e=(y=b,Array.isArray(y)&&Array.isArray(y[0])&&y[0][0]&&y[0][0].trace?m:g),r=[],n=0;n<b.length;n++){var a=b[n];e(a)&&r.push(a)}return r}},{}],508:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("country-regex"),b=v("@turf/area"),y=v("@turf/centroid"),e=v("@turf/bbox"),r=v("./identity"),n=v("./loggers"),a=v("./is_plain_object"),t=v("./nested_property"),p=v("./polygon"),s=Object.keys(m),i={"ISO-3":r,"USA-states":r,"country names":function(c){for(var l=0;l<s.length;l++){var h=s[l];if(new RegExp(m[h]).test(c.trim().toLowerCase()))return h}return n.log("Unrecognized country name: "+c+"."),!1}};function f(c){var l=c.geojson,h=window.PlotlyGeoAssets||{},d="string"==typeof l?h[l]:l;return a(d)?d:(n.error("Oops ... something went wrong when fetching "+l),!1)}re.exports={locationToFeature:function(c,l,h){if(!l||"string"!=typeof l)return!1;var d,o,x,u=i[c](l);if(u){if("USA-states"===c)for(d=[],x=0;x<h.length;x++)(o=h[x]).properties&&o.properties.gu&&"USA"===o.properties.gu&&d.push(o);else d=h;for(x=0;x<d.length;x++)if((o=d[x]).id===u)return o;n.log(["Location with id",u,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var l,h,d,o,x=c.geometry,u=x.coordinates,T=c.id,_=[];function w(M){for(var I=0;I<M.length-1;I++)if(M[I][0]>0&&M[I+1][0]<0)return I;return null}switch(l="RUS"===T||"FJI"===T?function(M){var I;if(null===w(M))I=M;else for(I=new Array(M.length),o=0;o<M.length;o++)I[o]=[M[o][0]<0?M[o][0]+360:M[o][0],M[o][1]];_.push(p.tester(I))}:"ATA"===T?function(M){var I=w(M);if(null===I)return _.push(p.tester(M));var S=new Array(M.length+1),R=0;for(o=0;o<M.length;o++)o>I?S[R++]=[M[o][0]+360,M[o][1]]:o===I?(S[R++]=M[o],S[R++]=[M[o][0],-90]):S[R++]=M[o];var O=p.tester(S);O.pts.pop(),_.push(O)}:function(M){_.push(p.tester(M))},x.type){case"MultiPolygon":for(h=0;h<u.length;h++)for(d=0;d<u[h].length;d++)l(u[h][d]);break;case"Polygon":for(h=0;h<u.length;h++)l(u[h])}return _},getTraceGeojson:f,extractTraceFeature:function(c){var l=c[0].trace,h=f(l);if(!h)return!1;var d,o={},x=[];for(d=0;d<l._length;d++){var u=c[d];(u.loc||0===u.loc)&&(o[u.loc]=u)}function T(M){var I=t(M,l.featureidkey||"id").get(),S=o[I];if(S){var R=M.geometry;if("Polygon"===R.type||"MultiPolygon"===R.type){var O={type:"Feature",id:I,geometry:R,properties:{}};O.properties.ct=function(C){var D,B=C.geometry;if("MultiPolygon"===B.type)for(var z=B.coordinates,Y=0,G=0;G<z.length;G++){var J={type:"Polygon",coordinates:z[G]},te=b.default(J);te>Y&&(Y=te,D=J)}else D=B;return y.default(D).geometry.coordinates}(O),S.fIn=M,S.fOut=O,x.push(O)}else n.log(["Location",S.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete o[I]}switch(h.type){case"FeatureCollection":var _=h.features;for(d=0;d<_.length;d++)T(_[d]);break;case"Feature":T(h);break;default:return n.warn(["Invalid GeoJSON type",(h.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in o)n.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+l.featureidkey+"*."].join(" "));return x},fetchTraceGeoData:function(c){var l=window.PlotlyGeoAssets||{},h=[];function d(T){return new Promise(function(_,w){g.json(T,function(M,I){return M?(delete l[T],w(new Error(404===M.status?'GeoJSON at URL "'+T+'" does not exist.':"Unexpected error while fetching from "+T))):(l[T]=I,_(I))})})}function o(T){return new Promise(function(_,w){var M=0,I=setInterval(function(){return l[T]&&"pending"!==l[T]?(clearInterval(I),_(l[T])):M>100?(clearInterval(I),w("Unexpected error while fetching from "+T)):void M++},50)})}for(var x=0;x<c.length;x++){var u=c[x][0].trace.geojson;"string"==typeof u&&(l[u]?"pending"===l[u]&&h.push(o(u)):(l[u]="pending",h.push(d(u))))}return h},computeBbox:function(c){return e.default(c)}}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(v,re,ne){"use strict";var g=v("../constants/numerical").BADNUM;ne.calcTraceToLineCoords=function(m){for(var b=m[0].trace.connectgaps,y=[],e=[],r=0;r<m.length;r++){var n=m[r].lonlat;n[0]!==g?e.push(n):!b&&e.length>0&&(y.push(e),e=[])}return e.length>0&&y.push(e),y},ne.makeLine=function(m){return 1===m.length?{type:"LineString",coordinates:m[0]}:{type:"MultiLineString",coordinates:m}},ne.makePolygon=function(m){if(1===m.length)return{type:"Polygon",coordinates:m};for(var b=new Array(m.length),y=0;y<m.length;y++)b[y]=[m[y]];return{type:"MultiPolygon",coordinates:b}},ne.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(v,re,ne){"use strict";var g,m,b,y=v("./mod").mod;function e(n,a,t,p,s,i,f,c){var l=t-n,h=s-n,d=f-s,o=p-a,x=i-a,u=c-i,T=l*u-d*o;if(0===T)return null;var _=(h*u-d*x)/T,w=(h*o-l*x)/T;return w<0||w>1||_<0||_>1?null:{x:n+l*_,y:a+o*_}}function r(n,a,t,p,s){var i=p*n+s*a;if(i<0)return p*p+s*s;if(i>t){var f=p-n,c=s-a;return f*f+c*c}var l=p*a-s*n;return l*l/t}ne.segmentsIntersect=e,ne.segmentDistance=function(n,a,t,p,s,i,f,c){if(e(n,a,t,p,s,i,f,c))return 0;var l=t-n,h=p-a,d=f-s,o=c-i,x=l*l+h*h,u=d*d+o*o,T=Math.min(r(l,h,x,s-n,i-a),r(l,h,x,f-n,c-a),r(d,o,u,n-s,a-i),r(d,o,u,t-s,p-i));return Math.sqrt(T)},ne.getTextLocation=function(n,a,t,p){if(n===m&&p===b||(g={},m=n,b=p),g[t])return g[t];var s=n.getPointAtLength(y(t-p/2,a)),i=n.getPointAtLength(y(t+p/2,a)),f=Math.atan((i.y-s.y)/(i.x-s.x)),c=n.getPointAtLength(y(t,a)),l={x:(4*c.x+s.x+i.x)/6,y:(4*c.y+s.y+i.y)/6,theta:f};return g[t]=l,l},ne.clearLocationCache=function(){m=null},ne.getVisibleSegment=function(n,a,t){var p,s,i=a.left,f=a.right,c=a.top,l=a.bottom,h=0,d=n.getTotalLength(),o=d;function x(T){var _=n.getPointAtLength(T);0===T?p=_:T===d&&(s=_);var w=_.x<i?i-_.x:_.x>f?_.x-f:0,M=_.y<c?c-_.y:_.y>l?_.y-l:0;return Math.sqrt(w*w+M*M)}for(var u=x(h);u;){if((h+=u+t)>o)return;u=x(h)}for(u=x(o);u;){if(h>(o-=u+t))return;u=x(o)}return{min:h,max:o,len:o-h,total:d,isClosed:0===h&&o===d&&Math.abs(p.x-s.x)<.1&&Math.abs(p.y-s.y)<.1}},ne.findPointOnPath=function(n,a,t,p){for(var s,i,f,c=(p=p||{}).pathLength||n.getTotalLength(),l=p.tolerance||.001,h=p.iterationLimit||30,d=n.getPointAtLength(0)[t]>n.getPointAtLength(c)[t]?-1:1,o=0,x=0,u=c;o<h;){if(f=(i=n.getPointAtLength(s=(x+u)/2))[t]-a,Math.abs(f)<l)return i;d*f>0?u=s:x=s,o++}return i}},{"./mod":522}],511:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("tinycolor2"),b=v("color-normalize"),y=v("../components/colorscale"),e=v("../components/color/attributes").defaultLine,r=v("./array").isArrayOrTypedArray,n=b(e);function a(s,i){var f=s;return f[3]*=i,f}function t(s){if(g(s))return n;var i=b(s);return i.length?i:n}function p(s){return g(s)?s:1}re.exports={formatColor:function(s,i,f){var c,l,h,d,o,x=s.color,u=r(x),T=r(i),_=y.extractOpts(s),w=[];if(c=void 0!==_.colorscale?y.makeColorScaleFuncFromTrace(s):t,l=u?function(I,S){return void 0===I[S]?n:b(c(I[S]))}:t,h=T?function(I,S){return void 0===I[S]?1:p(I[S])}:p,u||T)for(var M=0;M<f;M++)d=l(x,M),o=h(i,M),w[M]=a(d,o);else w=a(b(x),i);return w},parseColorScale:function(s){var i=y.extractOpts(s),f=i.colorscale;return i.reversescale&&(f=y.flipScale(i.colorscale)),f.map(function(c){var l=c[0],h=m(c[1]).toRgb();return{index:l,rgb:[h.r,h.g,h.b,h.a]}})}}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(v,re,ne){"use strict";var g=v("./identity");function m(b){return[b]}re.exports={keyFun:function(b){return b.key},repeat:m,descend:g,wrap:m,unwrap:function(b){return b[0]}}},{"./identity":513}],513:[function(v,re,ne){"use strict";re.exports=function(g){return g}},{}],514:[function(v,re,ne){"use strict";re.exports=function(g,m){if(!m)return g;var b=1/Math.abs(m),y=b>1?(b*g+b*m)/b:g+m,e=String(y).length;if(e>16){var r=String(m).length;if(e>=String(g).length+r){var n=parseFloat(y).toPrecision(12);-1===n.indexOf("e+")&&(y=+n)}}return y}},{}],515:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-time-format").utcFormat,b=v("d3-format").format,y=v("fast-isnumeric"),e=v("../constants/numerical"),r=e.FP_SAFE,n=-r,a=e.BADNUM,t=re.exports={};t.adjustFormat=function(U){return!U||/^\d[.]\df/.test(U)||/[.]\d%/.test(U)?U:"0.f"===U?"~f":/^\d%/.test(U)?"~%":/^\ds/.test(U)?"~s":!/^[~,.0$]/.test(U)&&/[&fps]/.test(U)?"~"+U:U};var p={};t.warnBadFormat=function(U){var V=String(U);p[V]||(p[V]=1,t.warn('encountered bad format: "'+V+'"'))},t.noFormat=function(U){return String(U)},t.numberFormat=function(U){var V;try{V=b(t.adjustFormat(U))}catch{return t.warnBadFormat(U),t.noFormat}return V},t.nestedProperty=v("./nested_property"),t.keyedContainer=v("./keyed_container"),t.relativeAttr=v("./relative_attr"),t.isPlainObject=v("./is_plain_object"),t.toLogRange=v("./to_log_range"),t.relinkPrivateKeys=v("./relink_private");var s=v("./array");t.isTypedArray=s.isTypedArray,t.isArrayOrTypedArray=s.isArrayOrTypedArray,t.isArray1D=s.isArray1D,t.ensureArray=s.ensureArray,t.concat=s.concat,t.maxRowLength=s.maxRowLength,t.minRowLength=s.minRowLength;var i=v("./mod");t.mod=i.mod,t.modHalf=i.modHalf;var f=v("./coerce");t.valObjectMeta=f.valObjectMeta,t.coerce=f.coerce,t.coerce2=f.coerce2,t.coerceFont=f.coerceFont,t.coercePattern=f.coercePattern,t.coerceHoverinfo=f.coerceHoverinfo,t.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity,t.validate=f.validate;var c=v("./dates");t.dateTime2ms=c.dateTime2ms,t.isDateTime=c.isDateTime,t.ms2DateTime=c.ms2DateTime,t.ms2DateTimeLocal=c.ms2DateTimeLocal,t.cleanDate=c.cleanDate,t.isJSDate=c.isJSDate,t.formatDate=c.formatDate,t.incrementMonth=c.incrementMonth,t.dateTick0=c.dateTick0,t.dfltRange=c.dfltRange,t.findExactDates=c.findExactDates,t.MIN_MS=c.MIN_MS,t.MAX_MS=c.MAX_MS;var l=v("./search");t.findBin=l.findBin,t.sorterAsc=l.sorterAsc,t.sorterDes=l.sorterDes,t.distinctVals=l.distinctVals,t.roundUp=l.roundUp,t.sort=l.sort,t.findIndexOfMin=l.findIndexOfMin,t.sortObjectKeys=v("./sort_object_keys");var h=v("./stats");t.aggNums=h.aggNums,t.len=h.len,t.mean=h.mean,t.median=h.median,t.midRange=h.midRange,t.variance=h.variance,t.stdev=h.stdev,t.interp=h.interp;var d=v("./matrix");t.init2dArray=d.init2dArray,t.transposeRagged=d.transposeRagged,t.dot=d.dot,t.translationMatrix=d.translationMatrix,t.rotationMatrix=d.rotationMatrix,t.rotationXYMatrix=d.rotationXYMatrix,t.apply3DTransform=d.apply3DTransform,t.apply2DTransform=d.apply2DTransform,t.apply2DTransform2=d.apply2DTransform2,t.convertCssMatrix=d.convertCssMatrix,t.inverseTransformMatrix=d.inverseTransformMatrix;var o=v("./angles");t.deg2rad=o.deg2rad,t.rad2deg=o.rad2deg,t.angleDelta=o.angleDelta,t.angleDist=o.angleDist,t.isFullCircle=o.isFullCircle,t.isAngleInsideSector=o.isAngleInsideSector,t.isPtInsideSector=o.isPtInsideSector,t.pathArc=o.pathArc,t.pathSector=o.pathSector,t.pathAnnulus=o.pathAnnulus;var x=v("./anchor_utils");t.isLeftAnchor=x.isLeftAnchor,t.isCenterAnchor=x.isCenterAnchor,t.isRightAnchor=x.isRightAnchor,t.isTopAnchor=x.isTopAnchor,t.isMiddleAnchor=x.isMiddleAnchor,t.isBottomAnchor=x.isBottomAnchor;var u=v("./geometry2d");t.segmentsIntersect=u.segmentsIntersect,t.segmentDistance=u.segmentDistance,t.getTextLocation=u.getTextLocation,t.clearLocationCache=u.clearLocationCache,t.getVisibleSegment=u.getVisibleSegment,t.findPointOnPath=u.findPointOnPath;var T=v("./extend");t.extendFlat=T.extendFlat,t.extendDeep=T.extendDeep,t.extendDeepAll=T.extendDeepAll,t.extendDeepNoArrays=T.extendDeepNoArrays;var _=v("./loggers");t.log=_.log,t.warn=_.warn,t.error=_.error;var w=v("./regex");t.counterRegex=w.counter;var M=v("./throttle");t.throttle=M.throttle,t.throttleDone=M.done,t.clearThrottle=M.clear;var I=v("./dom");function S(U){var V={};for(var q in U)for(var ie=U[q],H=0;H<ie.length;H++)V[ie[H]]=+q;return V}t.getGraphDiv=I.getGraphDiv,t.isPlotDiv=I.isPlotDiv,t.removeElement=I.removeElement,t.addStyleRule=I.addStyleRule,t.addRelatedStyleRule=I.addRelatedStyleRule,t.deleteRelatedStyleRule=I.deleteRelatedStyleRule,t.getFullTransformMatrix=I.getFullTransformMatrix,t.getElementTransformMatrix=I.getElementTransformMatrix,t.getElementAndAncestors=I.getElementAndAncestors,t.equalDomRects=I.equalDomRects,t.clearResponsive=v("./clear_responsive"),t.preserveDrawingBuffer=v("./preserve_drawing_buffer"),t.makeTraceGroups=v("./make_trace_groups"),t._=v("./localize"),t.notifier=v("./notifier"),t.filterUnique=v("./filter_unique"),t.filterVisible=v("./filter_visible"),t.pushUnique=v("./push_unique"),t.increment=v("./increment"),t.cleanNumber=v("./clean_number"),t.ensureNumber=function(U){return y(U)?(U=Number(U))>r||U<n?a:U:a},t.isIndex=function(U,V){return!(void 0!==V&&U>=V)&&y(U)&&U>=0&&U%1==0},t.noop=v("./noop"),t.identity=v("./identity"),t.repeat=function(U,V){for(var q=new Array(V),ie=0;ie<V;ie++)q[ie]=U;return q},t.swapAttrs=function(U,V,q,ie){q||(q="x"),ie||(ie="y");for(var H=0;H<V.length;H++){var ee=V[H],Q=t.nestedProperty(U,ee.replace("?",q)),oe=t.nestedProperty(U,ee.replace("?",ie)),le=Q.get();Q.set(oe.get()),oe.set(le)}},t.raiseToTop=function(U){U.parentNode.appendChild(U)},t.cancelTransition=function(U){return U.transition().duration(0)},t.constrain=function(U,V,q){return V>q?Math.max(q,Math.min(V,U)):Math.max(V,Math.min(q,U))},t.bBoxIntersect=function(U,V,q){return U.left<=V.right+(q=q||0)&&V.left<=U.right+q&&U.top<=V.bottom+q&&V.top<=U.bottom+q},t.simpleMap=function(U,V,q,ie,H){for(var ee=U.length,Q=new Array(ee),oe=0;oe<ee;oe++)Q[oe]=V(U[oe],q,ie,H);return Q},t.randstr=function U(V,q,ie,H){if(ie||(ie=16),void 0===q&&(q=24),q<=0)return"0";var ee,Q,oe=Math.log(Math.pow(2,q))/Math.log(ie),le="";for(ee=2;oe===1/0;ee*=2)oe=Math.log(Math.pow(2,q/ee))/Math.log(ie)*ee;var de=oe-Math.floor(oe);for(ee=0;ee<Math.floor(oe);ee++)le=Math.floor(Math.random()*ie).toString(ie)+le;de&&(Q=Math.pow(ie,de),le=Math.floor(Math.random()*Q).toString(ie)+le);var fe=parseInt(le,ie);return V&&V[le]||fe!==1/0&&fe>=Math.pow(2,q)?H>10?(t.warn("randstr failed uniqueness"),le):U(V,q,ie,(H||0)+1):le},t.OptionControl=function(U,V){U||(U={}),V||(V="opt");var q={optionList:[],_newoption:function(ie){ie[V]=U,q[ie.name]=ie,q.optionList.push(ie)}};return q["_"+V]=U,q},t.smooth=function(U,V){if((V=Math.round(V)||0)<2)return U;var q,ie,H,ee,Q=U.length,oe=2*Q,le=2*V-1,de=new Array(le),fe=new Array(Q);for(q=0;q<le;q++)de[q]=(1-Math.cos(Math.PI*(q+1)/V))/(2*V);for(q=0;q<Q;q++){for(ee=0,ie=0;ie<le;ie++)(H=q+ie+1-V)<-Q?H-=oe*Math.round(H/oe):H>=oe&&(H-=oe*Math.floor(H/oe)),H<0?H=-1-H:H>=Q&&(H=oe-1-H),ee+=U[H]*de[ie];fe[q]=ee}return fe},t.syncOrAsync=function(U,V,q){var ie;function H(){return t.syncOrAsync(U,V,q)}for(;U.length;)if((ie=(0,U.splice(0,1)[0])(V))&&ie.then)return ie.then(H);return q&&q(V)},t.stripTrailingSlash=function(U){return"/"===U.substr(-1)?U.substr(0,U.length-1):U},t.noneOrAll=function(U,V,q){if(U){var ie,H=!1,ee=!0;for(ie=0;ie<q.length;ie++)null!=U[q[ie]]?H=!0:ee=!1;if(H&&!ee)for(ie=0;ie<q.length;ie++)U[q[ie]]=V[q[ie]]}},t.mergeArray=function(U,V,q,ie){var H="function"==typeof ie;if(t.isArrayOrTypedArray(U))for(var ee=Math.min(U.length,V.length),Q=0;Q<ee;Q++){var oe=U[Q];V[Q][q]=H?ie(oe):oe}},t.mergeArrayCastPositive=function(U,V,q){return t.mergeArray(U,V,q,function(ie){var H=+ie;return isFinite(H)&&H>0?H:0})},t.fillArray=function(U,V,q,ie){if(ie=ie||t.identity,t.isArrayOrTypedArray(U))for(var H=0;H<V.length;H++)V[H][q]=ie(U[H])},t.castOption=function(U,V,q,ie){ie=ie||t.identity;var H=t.nestedProperty(U,q).get();return t.isArrayOrTypedArray(H)?Array.isArray(V)&&t.isArrayOrTypedArray(H[V[0]])?ie(H[V[0]][V[1]]):ie(H[V]):H},t.extractOption=function(U,V,q,ie){if(q in U)return U[q];var H=t.nestedProperty(V,ie).get();return Array.isArray(H)?void 0:H},t.tagSelected=function(U,V,q){var ie,H,ee=V.selectedpoints,Q=V._indexToPoints;Q&&(ie=S(Q));for(var oe=0;oe<ee.length;oe++){var le=ee[oe];if(t.isIndex(le)||t.isArrayOrTypedArray(le)&&t.isIndex(le[0])&&t.isIndex(le[1])){var de=ie?ie[le]:le,fe=q?q[de]:de;void 0!==(H=fe)&&H<U.length&&(U[fe].selected=1)}}},t.selIndices2selPoints=function(U){var V=U.selectedpoints,q=U._indexToPoints;if(q){for(var ie=S(q),H=[],ee=0;ee<V.length;ee++){var Q=V[ee];if(t.isIndex(Q)){var oe=ie[Q];t.isIndex(oe)&&H.push(oe)}}return H}return V},t.getTargetArray=function(U,V){var q=V.target;if("string"==typeof q&&q){var ie=t.nestedProperty(U,q).get();return!!Array.isArray(ie)&&ie}return!!Array.isArray(q)&&q},t.minExtend=function(U,V){var q={};"object"!=typeof V&&(V={});var ie,H,ee,Q=Object.keys(U);for(ie=0;ie<Q.length;ie++)ee=U[H=Q[ie]],"_"!==H.charAt(0)&&"function"!=typeof ee&&(q[H]="module"===H?ee:Array.isArray(ee)?"colorscale"===H?ee.slice():ee.slice(0,3):t.isTypedArray(ee)?ee.subarray(0,3):ee&&"object"==typeof ee?t.minExtend(U[H],V[H]):ee);for(Q=Object.keys(V),ie=0;ie<Q.length;ie++)"object"==typeof(ee=V[H=Q[ie]])&&H in q&&"object"==typeof q[H]||(q[H]=ee);return q},t.titleCase=function(U){return U.charAt(0).toUpperCase()+U.substr(1)},t.containsAny=function(U,V){for(var q=0;q<V.length;q++)if(-1!==U.indexOf(V[q]))return!0;return!1},t.isIE=function(){return void 0!==window.navigator.msSaveBlob};var R=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return R.test(window.navigator.userAgent)};var O=/iPad|iPhone|iPod/;t.isIOS=function(){return O.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var U=C.exec(window.navigator.userAgent);if(U&&2===U.length){var V=parseInt(U[1]);if(!isNaN(V))return V}return null},t.isD3Selection=function(U){return U instanceof g.selection},t.ensureSingle=function(U,V,q,ie){var H=U.select(V+(q?"."+q:""));if(H.size())return H;var ee=U.append(V);return q&&ee.classed(q,!0),ie&&ee.call(ie),ee},t.ensureSingleById=function(U,V,q,ie){var H=U.select(V+"#"+q);if(H.size())return H;var ee=U.append(V).attr("id",q);return ie&&ee.call(ie),ee},t.objectFromPath=function(U,V){for(var q,ie=U.split("."),H=q={},ee=0;ee<ie.length;ee++){var Q=ie[ee],oe=null,le=ie[ee].match(/(.*)\[([0-9]+)\]/);le?(oe=le[2],(q=q[Q=le[1]]=[])[oe]=ee===ie.length-1?V:{},q=q[oe]):(q[Q]=ee===ie.length-1?V:{},q=q[Q])}return H};var D=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;t.expandObjectPaths=function(U){var V,q,ie,H,ee,Q,oe;if("object"==typeof U&&!Array.isArray(U))for(q in U)U.hasOwnProperty(q)&&((V=q.match(D))?(H=U[q],ie=V[1],delete U[q],U[ie]=t.extendDeepNoArrays(U[ie]||{},t.objectFromPath(q,t.expandObjectPaths(H))[ie])):(V=q.match(B))?(H=U[q],ie=V[1],ee=parseInt(V[2]),delete U[q],U[ie]=U[ie]||[],"."===V[3]?(oe=V[4],Q=U[ie][ee]=U[ie][ee]||{},t.extendDeepNoArrays(Q,t.objectFromPath(oe,t.expandObjectPaths(H)))):U[ie][ee]=t.expandObjectPaths(H)):U[q]=t.expandObjectPaths(U[q]));return U},t.numSeparate=function(U,V,q){if(q||(q=!1),"string"!=typeof V||0===V.length)throw new Error("Separator string required for formatting!");"number"==typeof U&&(U=String(U));var ie=/(\d+)(\d{3})/,H=V.charAt(0),ee=V.charAt(1),Q=U.split("."),oe=Q[0],le=Q.length>1?H+Q[1]:"";if(ee&&(Q.length>1||oe.length>4||q))for(;ie.test(oe);)oe=oe.replace(ie,"$1"+ee+"$2");return oe+le},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var z=/^\w*$/;t.templateString=function(U,V){var q={};return U.replace(t.TEMPLATE_STRING_REGEX,function(ie,H){var ee;return z.test(H)?ee=V[H]:(q[H]=q[H]||t.nestedProperty(V,H).get,ee=q[H]()),t.isValidTextValue(ee)?ee:""})};var Y={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return te.apply(Y,arguments)};var G={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return te.apply(G,arguments)};var J=/^[:|\|]/;function te(U,V,q){var ie=this,H=arguments;V||(V={});var ee={};return U.replace(t.TEMPLATE_STRING_REGEX,function(Q,oe,le){var de,fe,be,he="_xother"===oe||"_yother"===oe,_e="_xother_"===oe||"_yother_"===oe,Ce="xother_"===oe||"yother_"===oe,Ee="xother"===oe||"yother"===oe||he||Ce||_e,Ae=oe;if((he||_e)&&(Ae=Ae.substring(1)),(Ce||_e)&&(Ae=Ae.substring(0,Ae.length-1)),Ee){if(void 0===(de=V[Ae]))return""}else for(be=3;be<H.length;be++)if(fe=H[be]){if(fe.hasOwnProperty(Ae)){de=fe[Ae];break}if(z.test(Ae)||(de=t.nestedProperty(fe,Ae).get(),(de=ee[Ae]||t.nestedProperty(fe,Ae).get())&&(ee[Ae]=de)),void 0!==de)break}if(void 0===de&&ie)return ie.count<ie.max&&(t.warn("Variable '"+Ae+"' in "+ie.name+" could not be found!"),de=Q),ie.count===ie.max&&t.warn("Too many "+ie.name+" warnings - additional warnings will be suppressed"),ie.count++,Q;if(le){var ze;if(":"===le[0]&&(de=(ze=q?q.numberFormat:t.numberFormat)(le.replace(J,""))(de)),"|"===le[0]){ze=q?q.timeFormat:m;var ve=t.dateTime2ms(de);de=t.formatDate(ve,le.replace(J,""),!1,ze)}}else{var Te=Ae+"Label";V.hasOwnProperty(Te)&&(de=V[Te])}return Ee&&(de="("+de+")",(he||_e)&&(de=" "+de),(Ce||_e)&&(de+=" ")),de})}t.subplotSort=function(U,V){for(var q=Math.min(U.length,V.length)+1,ie=0,H=0,ee=0;ee<q;ee++){var Q=U.charCodeAt(ee)||0,oe=V.charCodeAt(ee)||0,le=Q>=48&&Q<=57,de=oe>=48&&oe<=57;if(le&&(ie=10*ie+Q-48),de&&(H=10*H+oe-48),!le||!de){if(ie!==H)return ie-H;if(Q!==oe)return Q-oe}}return H-ie};var X=2e9;t.seedPseudoRandom=function(){X=2e9},t.pseudoRandom=function(){var U=X;return X=(69069*X+1)%4294967296,Math.abs(X-U)<429496729?t.pseudoRandom():X/4294967296},t.fillText=function(U,V,q){var ie=Array.isArray(q)?function(Q){q.push(Q)}:function(Q){q.text=Q},H=t.extractOption(U,V,"htx","hovertext");if(t.isValidTextValue(H))return ie(H);var ee=t.extractOption(U,V,"tx","text");return t.isValidTextValue(ee)?ie(ee):void 0},t.isValidTextValue=function(U){return U||0===U},t.formatPercent=function(U,V){V=V||0;for(var q=(Math.round(100*U*Math.pow(10,V))*Math.pow(.1,V)).toFixed(V)+"%",ie=0;ie<V;ie++)-1!==q.indexOf(".")&&(q=(q=q.replace("0%","%")).replace(".%","%"));return q},t.isHidden=function(U){var V=window.getComputedStyle(U).display;return!V||"none"===V},t.strTranslate=function(U,V){return U||V?"translate("+U+","+V+")":""},t.strRotate=function(U){return U?"rotate("+U+")":""},t.strScale=function(U){return 1!==U?"scale("+U+")":""},t.getTextTransform=function(U){var V=U.noCenter,q=U.textX,ie=U.textY,le=U.rotate,de=U.scale;return de?de>1&&(de=1):de=0,t.strTranslate(U.targetX-de*(q+(U.anchorX||0)),U.targetY-de*(ie+(U.anchorY||0)))+t.strScale(de)+(le?"rotate("+le+(V?"":" "+q+" "+ie)+")":"")},t.ensureUniformFontSize=function(U,V){var q=t.extendFlat({},V);return q.size=Math.max(V.size,U._fullLayout.uniformtext.minsize||0),q},t.join2=function(U,V,q){var ie=U.length;return ie>1?U.slice(0,-1).join(V)+q+U[ie-1]:U.join(V)},t.bigFont=function(U){return Math.round(1.2*U)};var K=t.getFirefoxVersion(),ae=null!==K&&K<86;t.getPositionFromD3Event=function(){return ae?[g.event.layerX,g.event.layerY]:[g.event.offsetX,g.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(v,re,ne){"use strict";re.exports=function(g){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(g):"[object Object]"===Object.prototype.toString.call(g)&&Object.getPrototypeOf(g).hasOwnProperty("hasOwnProperty")}},{}],517:[function(v,re,ne){"use strict";var g=v("./nested_property"),m=/^\w*$/;re.exports=function(b,y,e,r){var n,a,t;e=e||"name",r=r||"value";var p={};y&&y.length?(t=g(b,y),a=t.get()):a=b,y=y||"";var s={};if(a)for(n=0;n<a.length;n++)s[a[n][e]]=n;var i=m.test(r),f={set:function(c,l){var h=null===l?4:0;if(!a){if(!t||4===h)return;t.set(a=[])}var d=s[c];if(void 0===d){if(4===h)return;h|=3,s[c]=d=a.length}else l!==(i?a[d][r]:g(a[d],r).get())&&(h|=2);var o=a[d]=a[d]||{};return o[e]=c,i?o[r]=l:g(o,r).set(l),null!==l&&(h&=-5),p[d]=p[d]|h,f},get:function(c){if(a){var l=s[c];return void 0===l?void 0:i?a[l][r]:g(a[l],r).get()}},rename:function(c,l){var h=s[c];return void 0===h||(p[h]=1|p[h],s[l]=h,delete s[c],a[h][e]=l),f},remove:function(c){var l=s[c];if(void 0===l)return f;var h=a[l];if(Object.keys(h).length>2)return p[l]=2|p[l],f.set(c,null);if(i){for(n=l;n<a.length;n++)p[n]=3|p[n];for(n=l;n<a.length;n++)s[a[n][e]]--;a.splice(l,1),delete s[c]}else g(h,r).set(null),p[l]=6|p[l];return f},constructUpdate:function(){for(var c,l,h={},d=Object.keys(p),o=0;o<d.length;o++)c=y+"["+(l=d[o])+"]",a[l]?(1&p[l]&&(h[c+"."+e]=a[l][e]),2&p[l]&&(h[c+"."+r]=i?4&p[l]?null:a[l][r]:4&p[l]?null:g(a[l],r).get())):h[c]=null;return h}};return f}},{"./nested_property":523}],518:[function(v,re,ne){"use strict";var g=v("../registry");re.exports=function(m,b){for(var y=m._context.locale,e=0;e<2;e++){for(var r=m._context.locales,n=0;n<2;n++){var a=(r[y]||{}).dictionary;if(a){var t=a[b];if(t)return t}r=g.localeRegistry}var p=y.split("-")[0];if(p===y)break;y=p}return b}},{"../registry":647}],519:[function(v,re,ne){"use strict";var g=v("../plot_api/plot_config").dfltConfig,m=v("./notifier"),b=re.exports={};b.log=function(){var y;if(g.logging>1){var e=["LOG:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(g.notifyOnLogging>1){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);m(r.join("<br>"),"long")}},b.warn=function(){var y;if(g.logging>0){var e=["WARN:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.trace.apply(console,e)}if(g.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);m(r.join("<br>"),"stick")}},b.error=function(){var y;if(g.logging>0){var e=["ERROR:"];for(y=0;y<arguments.length;y++)e.push(arguments[y]);console.error.apply(console,e)}if(g.notifyOnLogging>0){var r=[];for(y=0;y<arguments.length;y++)r.push(arguments[y]);m(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(v,re,ne){"use strict";var g=v("@plotly/d3");re.exports=function(m,b,y){var e=m.selectAll("g."+y.replace(/\s/g,".")).data(b,function(n){return n[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",y),e.order();var r=m.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(n){n[0][r]=g.select(this)}),e}},{"@plotly/d3":58}],521:[function(v,re,ne){"use strict";var g=v("gl-mat4");ne.init2dArray=function(m,b){for(var y=new Array(m),e=0;e<m;e++)y[e]=new Array(b);return y},ne.transposeRagged=function(m){var b,y,e=0,r=m.length;for(b=0;b<r;b++)e=Math.max(e,m[b].length);var n=new Array(e);for(b=0;b<e;b++)for(n[b]=new Array(r),y=0;y<r;y++)n[b][y]=m[y][b];return n},ne.dot=function(m,b){if(!m.length||!b.length||m.length!==b.length)return null;var y,e,r=m.length;if(m[0].length)for(y=new Array(r),e=0;e<r;e++)y[e]=ne.dot(m[e],b);else if(b[0].length){var n=ne.transposeRagged(b);for(y=new Array(n.length),e=0;e<n.length;e++)y[e]=ne.dot(m,n[e])}else for(y=0,e=0;e<r;e++)y+=m[e]*b[e];return y},ne.translationMatrix=function(m,b){return[[1,0,m],[0,1,b],[0,0,1]]},ne.rotationMatrix=function(m){var b=m*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},ne.rotationXYMatrix=function(m,b,y){return ne.dot(ne.dot(ne.translationMatrix(b,y),ne.rotationMatrix(m)),ne.translationMatrix(-b,-y))},ne.apply3DTransform=function(m){return function(){var b=arguments,y=1===arguments.length?b[0]:[b[0],b[1],b[2]||0];return ne.dot(m,[y[0],y[1],y[2],1]).slice(0,3)}},ne.apply2DTransform=function(m){return function(){var b=arguments;3===b.length&&(b=b[0]);var y=1===arguments.length?b[0]:[b[0],b[1]];return ne.dot(m,[y[0],y[1],1]).slice(0,2)}},ne.apply2DTransform2=function(m){var b=ne.apply2DTransform(m);return function(y){return b(y.slice(0,2)).concat(b(y.slice(2,4)))}},ne.convertCssMatrix=function(m){if(m){var b=m.length;if(16===b)return m;if(6===b)return[m[0],m[1],0,0,m[2],m[3],0,0,0,0,1,0,m[4],m[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ne.inverseTransformMatrix=function(m){var b=[];return g.invert(b,m),[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}},{"gl-mat4":210}],522:[function(v,re,ne){"use strict";re.exports={mod:function(g,m){var b=g%m;return b<0?b+m:b},modHalf:function(g,m){return Math.abs(g)>m/2?g-Math.round(g/m)*m:g}}},{}],523:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("./array").isArrayOrTypedArray;function b(p,s){return function(){var i,f,c,l,h,d=p;for(l=0;l<s.length-1;l++){if(-1===(i=s[l])){for(f=!0,c=[],h=0;h<d.length;h++)c[h]=b(d[h],s.slice(l+1))(),c[h]!==c[0]&&(f=!1);return f?c[0]:c}if("number"==typeof i&&!m(d)||"object"!=typeof(d=d[i])||null===d)return}if("object"==typeof d&&null!==d&&null!==(c=d[s[l]]))return c}}re.exports=function(p,s){if(g(s))s=String(s);else if("string"!=typeof s||"[-1]"===s.substr(s.length-4))throw"bad property string";for(var i,f,c,l=0,h=s.split(".");l<h.length;){if(i=String(h[l]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])h[l]=i[1];else{if(0!==l)throw"bad property string";h.splice(0,1)}for(f=i[2].substr(1,i[2].length-2).split("]["),c=0;c<f.length;c++)l++,h.splice(l,0,Number(f[c]))}l++}return"object"!=typeof p?{set:function(){throw"bad container"},get:function(){},astr:s,parts:h,obj:p}:{set:r(p,h,s),get:b(p,h),astr:s,parts:h,obj:p}};var y=/(^|\.)args\[/;function e(p,s){return void 0===p||null===p&&!s.match(y)}function r(p,s,i){return function(f){var c,l,h=p,d="",o=[[p,d]],x=e(f,i);for(l=0;l<s.length-1;l++){if("number"==typeof(c=s[l])&&!m(h))throw"array index but container is not an array";if(-1===c){if(x=!a(h,s.slice(l+1),f,i))break;return}if(!t(h,c,s[l+1],x))break;if("object"!=typeof(h=h[c])||null===h)throw"container is not an object";d=n(d,c),o.push([h,d])}if(x){if(l===s.length-1&&(delete h[s[l]],Array.isArray(h)&&+s[l]==h.length-1))for(;h.length&&void 0===h[h.length-1];)h.pop()}else h[s[l]]=f}}function n(p,s){var i=s;return g(s)?i="["+s+"]":p&&(i="."+s),p+i}function a(p,s,i,f){var c,l=m(i),h=!0,d=i,o=f.replace("-1",0),x=!l&&e(i,o),u=s[0];for(c=0;c<p.length;c++)o=f.replace("-1",c),l&&(x=e(d=i[c%i.length],o)),x&&(h=!1),t(p,c,u,x)&&r(p[c],s,f.replace("-1",c))(d);return h}function t(p,s,i,f){if(void 0===p[s]){if(f)return!1;p[s]="number"==typeof i?[]:{}}return!0}},{"./array":497,"fast-isnumeric":190}],524:[function(v,re,ne){"use strict";re.exports=function(){}},{}],525:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=[];re.exports=function(y,e){if(-1===b.indexOf(y)){b.push(y);var r=1e3;m(e)?r=e:"long"===e&&(r=3e3);var n=g.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0),n.selectAll(".notifier-note").data(b).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var p=g.select(this);p.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){p.transition().call(a)});for(var s=p.append("p"),i=t.split(/<br\s*\/?>/g),f=0;f<i.length;f++)f&&s.append("br"),s.append("span").text(i[f]);"stick"===e?p.transition().duration(350).style("opacity",1):p.transition().duration(700).style("opacity",1).transition().delay(r).call(a)})}function a(t){t.duration(700).style("opacity",0).each("end",function(p){var s=b.indexOf(p);-1!==s&&b.splice(s,1),g.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(v,re,ne){"use strict";var g=v("./setcursor"),m="data-savedcursor";re.exports=function(b,y){var e=b.attr(m);if(y){if(!e){for(var r=(b.attr("class")||"").split(" "),n=0;n<r.length;n++){var a=r[n];0===a.indexOf("cursor-")&&b.attr(m,a.substr(7)).classed(a,!1)}b.attr(m)||b.attr(m,"!!")}g(b,y)}else e&&(b.attr(m,null),"!!"===e?g(b):g(b,e))}},{"./setcursor":536}],527:[function(v,re,ne){"use strict";var g=v("./matrix").dot,m=v("../constants/numerical").BADNUM,b=re.exports={};b.tester=function(y){var e,r=y.slice(),n=r[0][0],a=n,t=r[0][1],p=t;for(r[r.length-1][0]===r[0][0]&&r[r.length-1][1]===r[0][1]||r.push(r[0]),e=1;e<r.length;e++)n=Math.min(n,r[e][0]),a=Math.max(a,r[e][0]),t=Math.min(t,r[e][1]),p=Math.max(p,r[e][1]);var s,i=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(i=!0,s=function(l){return l[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(i=!0,s=function(l){return l[1]===r[0][1]}));var f=!0,c=r[0];for(e=1;e<r.length;e++)if(c[0]!==r[e][0]||c[1]!==r[e][1]){f=!1;break}return{xmin:n,xmax:a,ymin:t,ymax:p,pts:r,contains:i?function(l,h){var d=l[0],o=l[1];return!(d===m||d<n||d>a||o===m||o<t||o>p||h&&s(l))}:function(l,h){var d=l[0],o=l[1];if(d===m||d<n||d>a||o===m||o<t||o>p)return!1;var x,u,T,_,w,M=r.length,I=r[0][0],S=r[0][1],R=0;for(x=1;x<M;x++)if(u=I,T=S,I=r[x][0],S=r[x][1],!(d<(_=Math.min(u,I))||d>Math.max(u,I)||o>Math.max(T,S)))if(o<Math.min(T,S))d!==_&&R++;else{if(o===(w=I===u?o:T+(d-u)*(S-T)/(I-u)))return 1!==x||!h;o<=w&&d!==_&&R++}return R%2==1},isRect:i,degenerate:f}},b.isSegmentBent=function(y,e,r,n){var a,t,p,s=y[e],i=[y[r][0]-s[0],y[r][1]-s[1]],f=g(i,i),c=Math.sqrt(f),l=[-i[1]/c,i[0]/c];for(a=e+1;a<r;a++)if((p=g(t=[y[a][0]-s[0],y[a][1]-s[1]],i))<0||p>f||Math.abs(g(t,l))>n)return!0;return!1},b.filter=function(y,e){var r=[y[0]],n=0,a=0;function t(p){y.push(p);var s=r.length,i=n;r.splice(a+1);for(var f=i+1;f<y.length;f++)(f===y.length-1||b.isSegmentBent(y,i,f+1,e))&&(r.push(y[f]),r.length<s-2&&(n=f,a=r.length-1),i=f)}return y.length>1&&t(y.pop()),{addPt:t,raw:y,filtered:r}}},{"../constants/numerical":491,"./matrix":521}],528:[function(v,re,ne){(function(g){(function(){"use strict";var m=v("./show_no_webgl_msg"),b=v("regl");re.exports=function(y,e,r){var n=y._fullLayout,a=!0;return n._glcanvas.each(function(t){if(t.regl)t.regl.preloadCachedCode(r);else if(!t.pick||n._has("parcoords")){try{t.regl=b({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:y._context.plotGlPixelRatio||g.devicePixelRatio,extensions:e||[],cachedCode:r||{}})}catch{a=!1}t.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(p){y&&y.emit&&y.emit("plotly_webglcontextlost",{event:p,layer:t.key})},!1)}}),a||m({container:n._glcontainer.node()}),a}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("is-mobile");re.exports=function(b){var y,s;if("string"!=typeof(y=b&&b.hasOwnProperty("userAgent")?b.userAgent:(typeof navigator<"u"&&(s=navigator.userAgent),s&&s.headers&&"string"==typeof s.headers["user-agent"]&&(s=s.headers["user-agent"]),s)))return!0;var e=m({ua:{headers:{"user-agent":y}},tablet:!0,featureDetect:!1});if(!e)for(var r=y.split(" "),n=1;n<r.length;n++)if(-1!==r[n].indexOf("Safari"))for(var a=n-1;a>-1;a--){var t=r[a];if("Version/"===t.substr(0,8)){var p=t.substr(8).split(".")[0];if(g(p)&&(p=+p),p>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(v,re,ne){"use strict";re.exports=function(g,m){if(m instanceof RegExp){for(var b=m.toString(),y=0;y<g.length;y++)if(g[y]instanceof RegExp&&g[y].toString()===b)return g;g.push(m)}else!m&&0!==m||-1!==g.indexOf(m)||g.push(m);return g}},{}],531:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plot_api/plot_config").dfltConfig,b={add:function(y,e,r,n,a){var t,p;y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},p=y.undoQueue.index,y.autoplay?y.undoQueue.inSequence||(y.autoplay=!1):(!y.undoQueue.sequence||y.undoQueue.beginSequence?(y.undoQueue.queue.splice(p,y.undoQueue.queue.length-p,t={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),y.undoQueue.index+=1):t=y.undoQueue.queue[p-1],y.undoQueue.beginSequence=!1,t&&(t.undo.calls.unshift(e),t.undo.args.unshift(r),t.redo.calls.push(n),t.redo.args.push(a)),y.undoQueue.queue.length>m.queueLength&&(y.undoQueue.queue.shift(),y.undoQueue.index--))},startSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!0,y.undoQueue.beginSequence=!0},stopSequence:function(y){y.undoQueue=y.undoQueue||{index:0,queue:[],sequence:!1},y.undoQueue.sequence=!1,y.undoQueue.beginSequence=!1},undo:function(y){var e,r;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index<=0)){for(y.undoQueue.index--,e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)b.plotDo(y,e.undo.calls[r],e.undo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1}},redo:function(y){var e,r;if(!(void 0===y.undoQueue||isNaN(y.undoQueue.index)||y.undoQueue.index>=y.undoQueue.queue.length)){for(e=y.undoQueue.queue[y.undoQueue.index],y.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)b.plotDo(y,e.redo.calls[r],e.redo.args[r]);y.undoQueue.inSequence=!1,y.autoplay=!1,y.undoQueue.index++}},plotDo:function(y,e,r){y.autoplay=!0,r=function(n,a){for(var t,p=[],s=0;s<a.length;s++)p[s]=(t=a[s])===n?t:"object"==typeof t?Array.isArray(t)?g.extendDeep([],t):g.extendDeepAll({},t):t;return p}(y,r),e.apply(null,r)}};re.exports=b},{"../lib":515,"../plot_api/plot_config":553}],532:[function(v,re,ne){"use strict";ne.counter=function(g,m,b,y){var e=(m||"")+(b?"":"$"),r=!1===y?"":"^";return"xy"===g?new RegExp(r+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(r+g+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(v,re,ne){"use strict";var g=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,m=/^[^\.\[\]]+$/;re.exports=function(b,y){for(;y;){var e=b.match(g);if(e)b=e[1];else{if(!b.match(m))throw new Error("bad relativeAttr call:"+[b,y]);b=""}if("^"!==y.charAt(0))break;y=y.slice(1)}return b&&"["!==y.charAt(0)?b+"."+y:b+y}},{}],534:[function(v,re,ne){"use strict";var g=v("./array").isArrayOrTypedArray,m=v("./is_plain_object");re.exports=function b(y,e){for(var r in e){var n=e[r],a=y[r];if(a!==n)if("_"===r.charAt(0)||"function"==typeof n){if(r in y)continue;y[r]=n}else if(g(n)&&g(a)&&m(n[0])){if("customdata"===r||"ids"===r)continue;for(var t=Math.min(n.length,a.length),p=0;p<t;p++)a[p]!==n[p]&&m(n[p])&&m(a[p])&&b(a[p],n[p])}else m(n)&&m(a)&&(b(a,n),Object.keys(a).length||delete y[r])}}},{"./array":497,"./is_plain_object":516}],535:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("./loggers"),b=v("./identity"),y=v("../constants/numerical").BADNUM;function e(t,p){return t<p}function r(t,p){return t<=p}function n(t,p){return t>p}function a(t,p){return t>=p}ne.findBin=function(t,p,s){if(g(p.start))return s?Math.ceil((t-p.start)/p.size-1e-9)-1:Math.floor((t-p.start)/p.size+1e-9);var i,f,c=0,l=p.length,h=0,d=l>1?(p[l-1]-p[0])/(l-1):1;for(f=d>=0?s?e:r:s?a:n,t+=1e-9*d*(s?-1:1)*(d>=0?1:-1);c<l&&h++<100;)f(p[i=Math.floor((c+l)/2)],t)?c=i+1:l=i;return h>90&&m.log("Long binary search..."),c-1},ne.sorterAsc=function(t,p){return t-p},ne.sorterDes=function(t,p){return p-t},ne.distinctVals=function(t){var p,s=t.slice();for(s.sort(ne.sorterAsc),p=s.length-1;p>-1&&s[p]===y;p--);for(var i,f=s[p]-s[0]||1,c=f/(p||1)/1e4,l=[],h=0;h<=p;h++){var d=s[h],o=d-i;void 0===i?(l.push(d),i=d):o>c&&(f=Math.min(f,o),l.push(d),i=d)}return{vals:l,minDiff:f}},ne.roundUp=function(t,p,s){for(var i,f=0,c=p.length-1,l=0,h=s?0:1,d=s?1:0,o=s?Math.ceil:Math.floor;f<c&&l++<100;)p[i=o((f+c)/2)]<=t?f=i+h:c=i-d;return p[f]},ne.sort=function(t,p){for(var s=0,i=0,f=1;f<t.length;f++){var c=p(t[f],t[f-1]);if(c<0?s=1:c>0&&(i=1),s&&i)return t.sort(p)}return i?t:t.reverse()},ne.findIndexOfMin=function(t,p){p=p||b;for(var s,i=1/0,f=0;f<t.length;f++){var c=p(t[f]);c<i&&(i=c,s=f)}return s}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(v,re,ne){"use strict";re.exports=function(g,m){(g.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&g.classed(b,!1)}),m&&g.classed("cursor-"+m,!0)}},{}],537:[function(v,re,ne){"use strict";var g=v("../components/color"),m=function(){};re.exports=function(b){for(var y in b)"function"==typeof b[y]&&(b[y]=m);b.destroy=function(){b.container.parentNode.removeChild(b.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=g.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=g.lightLine,e.style["z-index"]=30;var r=document.createElement("p");return r.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",r.style.position="relative",r.style.top="50%",r.style.left="50%",r.style.height="30%",r.style.width="50%",r.style.margin="-15% 0 0 -25%",e.appendChild(r),b.container.appendChild(e),b.container.style.background="#FFFFFF",b.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(v,re,ne){"use strict";re.exports=function(g){return Object.keys(g).sort()}},{}],539:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("./array").isArrayOrTypedArray;ne.aggNums=function(b,y,e,r){var n,a;if((!r||r>e.length)&&(r=e.length),g(y)||(y=!1),m(e[0])){for(a=new Array(r),n=0;n<r;n++)a[n]=ne.aggNums(b,y,e[n]);e=a}for(n=0;n<r;n++)g(y)?g(e[n])&&(y=b(+y,+e[n])):y=e[n];return y},ne.len=function(b){return ne.aggNums(function(y){return y+1},0,b)},ne.mean=function(b,y){return y||(y=ne.len(b)),ne.aggNums(function(e,r){return e+r},0,b)/y},ne.midRange=function(b){if(void 0!==b&&0!==b.length)return(ne.aggNums(Math.max,null,b)+ne.aggNums(Math.min,null,b))/2},ne.variance=function(b,y,e){return y||(y=ne.len(b)),g(e)||(e=ne.mean(b,y)),ne.aggNums(function(r,n){return r+Math.pow(n-e,2)},0,b)/y},ne.stdev=function(b,y,e){return Math.sqrt(ne.variance(b,y,e))},ne.median=function(b){var y=b.slice().sort();return ne.interp(y,.5)},ne.interp=function(b,y){if(!g(y))throw"n should be a finite number";if((y=y*b.length-.5)<0)return b[0];if(y>b.length-1)return b[b.length-1];var e=y%1;return e*b[Math.ceil(y)]+(1-e)*b[Math.floor(y)]}},{"./array":497,"fast-isnumeric":190}],540:[function(v,re,ne){"use strict";var g=v("color-normalize");re.exports=function(m){return m?g(m):[0,0,0,1]}},{"color-normalize":89}],541:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../lib"),b=m.strTranslate,y=v("../constants/xmlns_namespaces"),e=v("../constants/alignment").LINE_SPACING,r=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ne.convertToTspans=function(C,D,B){var z=C.text(),Y=!C.attr("data-notex")&&D&&D._context.typesetMath&&typeof MathJax<"u"&&z.match(r),G=g.select(C.node().parentNode);if(!G.empty()){var J=C.attr("class")?C.attr("class").split(" ")[0]:"text";return G.selectAll("svg."+(J+="-math")).remove(),G.selectAll("g."+J+"-group").remove(),C.style("display",null).attr({"data-unformatted":z,"data-math":"N"}),Y?(D&&D._promises||[]).push(new Promise(function(X){C.style("display","none");var K=parseInt(C.node().style.fontSize,10);!function(U,V,q){var ie,H,ee,Q,oe=parseInt((MathJax.version||"").split(".")[0]);if(2===oe||3===oe){var le=function(){var fe="math-output-"+m.randstr({},64),be=(Q=g.select("body").append("div").attr({id:fe}).style({visibility:"hidden",position:"absolute","font-size":V.fontSize+"px"}).text(U.replace(n,"\\lt ").replace(a,"\\gt "))).node();return 2===oe?MathJax.Hub.Typeset(be):MathJax.typeset([be])},de=function(){var fe=Q.select(2===oe?".MathJax_SVG":".MathJax"),be=!fe.empty()&&Q.select("svg").node();if(be){var he,_e=be.getBoundingClientRect();he=2===oe?g.select("body").select("#MathJax_SVG_glyphs"):fe.select("defs"),q(fe,he,_e)}else m.log("There was an error in the tex syntax.",U),q();Q.remove()};2===oe?MathJax.Hub.Queue(function(){return H=m.extendDeepAll({},MathJax.Hub.config),ee=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:t},displayAlign:"left"})},function(){if("SVG"!==(ie=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},le,de,function(){if("SVG"!==ie)return MathJax.Hub.setRenderer(ie)},function(){return void 0!==ee&&(MathJax.Hub.processSectionDelay=ee),MathJax.Hub.Config(H)}):3===oe&&(H=m.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=t,"svg"!==(ie=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){le(),de(),"svg"!==ie&&(MathJax.config.startup.output=ie),MathJax.config=H}))}else m.warn("No MathJax version:",MathJax.version)}(Y[2],{fontSize:K},function(U,V,q){G.selectAll("svg."+J).remove(),G.selectAll("g."+J+"-group").remove();var ie=U&&U.select("svg");if(!ie||!ie.node())return te(),void X();var H=G.append("g").classed(J+"-group",!0).attr({"pointer-events":"none","data-unformatted":z,"data-math":"Y"});H.node().appendChild(ie.node()),V&&V.node()&&ie.node().insertBefore(V.node().cloneNode(!0),ie.node().firstChild);var ee=q.width,Q=q.height;ie.attr({class:J,height:Q,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var oe=C.node().style.fill||"black",le=ie.select("g");le.attr({fill:oe,stroke:oe});var de=le.node().getBoundingClientRect(),fe=de.width,be=de.height;(fe>ee||be>Q)&&(ie.style("overflow","hidden"),fe=(de=ie.node().getBoundingClientRect()).width,be=de.height);var he=+C.attr("x"),_e=+C.attr("y"),Ce=-(K||C.node().getBoundingClientRect().height)/4;if("y"===J[0])H.attr({transform:"rotate("+[-90,he,_e]+")"+b(-fe/2,Ce-be/2)});else if("l"===J[0])_e=Ce-be/2;else if("a"===J[0]&&0!==J.indexOf("atitle"))he=0,_e=Ce;else{var Ee=C.attr("text-anchor");he-=fe*("middle"===Ee?.5:"end"===Ee?1:0),_e=_e+Ce-be/2}ie.attr({x:he,y:_e}),B&&B.call(C,H),X(H)})})):te(),C}function te(){G.empty()||(J=C.attr("class")+"-math",G.select("svg."+J).remove()),C.text("").style("white-space","pre"),function(X,K){K=K.replace(c," ");var ae,U=!1,V=[],q=-1;function ie(){q++;var ve=document.createElementNS(y.svg,"tspan");g.select(ve).attr({class:"line",dy:q*e+"em"}),X.appendChild(ve),ae=ve;var Te=V;if(V=[{node:ve}],Te.length>1)for(var Ie=1;Ie<Te.length;Ie++)H(Te[Ie])}function H(ve){var Te,Ie=ve.type,De={};if("a"===Ie){Te="a";var Fe=ve.target,Ue=ve.href,qe=ve.popup;Ue&&(De={"xlink:xlink:show":"_blank"===Fe||"_"!==Fe.charAt(0)?"new":"replace",target:Fe,"xlink:xlink:href":Ue},qe&&(De.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+qe+'");return false;'))}else Te="tspan";ve.style&&(De.style=ve.style);var je=document.createElementNS(y.svg,Te);if("sup"===Ie||"sub"===Ie){ee(ae,"\u200b"),ae.appendChild(je);var rt=document.createElementNS(y.svg,"tspan");ee(rt,"\u200b"),g.select(rt).attr("dy",i[Ie]),De.dy=s[Ie],ae.appendChild(je),ae.appendChild(rt)}else ae.appendChild(je);g.select(je).attr(De),ae=ve.node=je,V.push(ve)}function ee(ve,Te){ve.appendChild(document.createTextNode(Te))}function Q(ve){if(1!==V.length){var Te=V.pop();ve!==Te.type&&m.log("Start tag <"+Te.type+"> doesnt match end tag <"+ve+">. Pretending it did match.",K),ae=V[V.length-1].node}else m.log("Ignoring unexpected end tag </"+ve+">.",K)}d.test(K)?ie():(ae=X,V=[{node:X}]);for(var oe=K.split(l),le=0;le<oe.length;le++){var de=oe[le],fe=de.match(h),be=fe&&fe[2].toLowerCase(),he=p[be];if("br"===be)ie();else if(void 0===he)ee(ae,S(de));else if(fe[1])Q(be);else{var _e=fe[4],Ce={type:be},Ee=_(_e,o);if(Ee?(Ee=Ee.replace(w,"$1 fill:"),he&&(Ee+=";"+he)):he&&(Ee=he),Ee&&(Ce.style=Ee),"a"===be){U=!0;var Ae=_(_e,x);if(Ae){var ze=R(Ae);ze&&(Ce.href=ze,Ce.target=_(_e,u)||"_blank",Ce.popup=_(_e,T))}}H(Ce)}}return U}(C.node(),z)&&C.style("pointer-events","all"),ne.positionText(C),B&&B.call(C)}};var n=/(<|&lt;|&#60;)/g,a=/(>|&gt;|&#62;)/g,t=[["$","$"],["\\(","\\)"]],p={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},s={sub:"0.3em",sup:"-0.6em"},i={sub:"-0.21em",sup:"0.42em"},f=["http:","https:","mailto:","",void 0,":"],c=ne.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,h=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;ne.BR_TAG_ALL=/<br(\s+.*)?>/gi;var o=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,x=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,u=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(C,D){if(!C)return null;var B=C.match(D),z=B&&(B[3]||B[4]);return z&&S(z)}var w=/(^|;)\s*color:/;ne.plainText=function(C,D){for(var B=void 0!==(D=D||{}).len&&-1!==D.len?D.len:1/0,z=void 0!==D.allowedTags?D.allowedTags:["br"],G=C.split(l),J=[],te="",X=0,K=0;K<G.length;K++){var ae=G[K],U=ae.match(h),V=U&&U[2].toLowerCase();if(V)-1!==z.indexOf(V)&&(J.push(ae),te=V);else{var q=ae.length;if(X+q<B)J.push(ae),X+=q;else if(X<B){var ie=B-X;te&&("br"!==te||ie<=3||q<=3)&&J.pop(),J.push(B>3?ae.substr(0,ie-3)+"...":ae.substr(0,ie));break}te=""}}return J.join("")};var M={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},I=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function S(C){return C.replace(I,function(D,B){return("#"===B.charAt(0)?function(z){if(!(z>1114111)){var Y=String.fromCodePoint;if(Y)return Y(z);var G=String.fromCharCode;return z<=65535?G(z):G(55232+(z>>10),z%1024+56320)}}("x"===B.charAt(1)?parseInt(B.substr(2),16):parseInt(B.substr(1),10)):M[B])||D})}function R(C){var D=encodeURI(decodeURI(C)),B=document.createElement("a"),z=document.createElement("a");B.href=C,z.href=D;var G=z.protocol;return-1!==f.indexOf(B.protocol)&&-1!==f.indexOf(G)?D:""}function O(C,D,B){var z,Y,G,J=B.horizontalAlign,te=B.verticalAlign||"top",X=C.node().getBoundingClientRect(),K=D.node().getBoundingClientRect();return Y="bottom"===te?function(){return X.bottom-z.height}:"middle"===te?function(){return X.top+(X.height-z.height)/2}:function(){return X.top},G="right"===J?function(){return X.right-z.width}:"center"===J?function(){return X.left+(X.width-z.width)/2}:function(){return X.left},function(){z=this.node().getBoundingClientRect();var ae=G()-K.left,U=Y()-K.top,V=B.gd||{};if(B.gd){V._fullLayout._calcInverseTransform(V);var q=m.apply3DTransform(V._fullLayout._invTransform)(ae,U);ae=q[0],U=q[1]}return this.style({top:U+"px",left:ae+"px","z-index":1e3}),this}}ne.convertEntities=S,ne.sanitizeHTML=function(C){C=C.replace(c," ");for(var D=document.createElement("p"),B=D,z=[],Y=C.split(l),G=0;G<Y.length;G++){var J=Y[G],te=J.match(h),X=te&&te[2].toLowerCase();if(X in p)if(te[1])z.length&&(B=z.pop());else{var K=te[4],ae=_(K,o),U=ae?{style:ae}:{};if("a"===X){var V=_(K,x);if(V){var q=R(V);if(q){U.href=q;var ie=_(K,u);ie&&(U.target=ie)}}}var H=document.createElement(X);B.appendChild(H),g.select(H).attr(U),B=H,z.push(H)}else B.appendChild(document.createTextNode(S(J)))}return D.innerHTML},ne.lineCount=function(C){return C.selectAll("tspan.line").size()||1},ne.positionText=function(C,D,B){return C.each(function(){var z=g.select(this);function Y(te,X){return void 0===X?null===(X=z.attr(te))&&(z.attr(te,0),X=0):z.attr(te,X),X}var G=Y("x",D),J=Y("y",B);"text"===this.nodeName&&z.selectAll("tspan.line").attr({x:G,y:J})})},ne.makeTextShadow=function(C){var D="1px ",B="1px ",z="1px ";return D+B+z+C+", -"+D+"-"+B+z+C+", "+D+"-"+B+z+C+", -"+D+B+z+C},ne.makeEditable=function(C,D){var B=D.gd,z=D.delegate,Y=g.dispatch("edit","input","cancel"),G=z||C;if(C.style({"pointer-events":z?"none":"all"}),1!==C.size())throw new Error("boo");function J(){var ae,U,V,q,ie;ae=g.select(B).select(".svg-container"),U=ae.append("div"),V=C.node().style,q=parseFloat(V.fontSize||12),void 0===(ie=D.text)&&(ie=C.attr("data-unformatted")),U.classed("plugin-editable editable",!0).style({position:"absolute","font-family":V.fontFamily||"Arial","font-size":q,color:D.fill||V.fill||"black",opacity:1,"background-color":D.background||"transparent",outline:"#ffffff33 1px solid",margin:[-q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ie).call(O(C,ae,D)).on("blur",function(){B._editing=!1,C.text(this.textContent).style({opacity:1});var H,ee=g.select(this).attr("class");(H=ee?"."+ee.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(C.node().parentNode).select(H).style({opacity:0});var Q=this.textContent;g.select(this).transition().duration(0).remove(),g.select(document).on("mouseup",null),Y.edit.call(C,Q)}).on("focus",function(){var H=this;B._editing=!0,g.select(document).on("mouseup",function(){if(g.event.target===H)return!1;document.activeElement===U.node()&&U.node().blur()})}).on("keyup",function(){27===g.event.which?(B._editing=!1,C.style({opacity:1}),g.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Y.cancel.call(C,this.textContent)):(Y.input.call(C,this.textContent),g.select(this).call(O(C,ae,D)))}).on("keydown",function(){13===g.event.which&&this.blur()}).call(te),C.style({opacity:0});var X,K=G.attr("class");(X=K?"."+K.split(" ")[0]+"-math-group":"[class*=-math-group]")&&g.select(C.node().parentNode).select(X).style({opacity:0})}function te(X){var K=X.node(),ae=document.createRange();ae.selectNodeContents(K);var U=window.getSelection();U.removeAllRanges(),U.addRange(ae),K.focus()}return D.immediate?J():G.on("click",J),g.rebind(C,Y,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(v,re,ne){"use strict";var g={};function m(b){b&&null!==b.timer&&(clearTimeout(b.timer),b.timer=null)}ne.throttle=function(b,y,e){var r=g[b],n=Date.now();if(!r){for(var a in g)g[a].ts<n-6e4&&delete g[a];r=g[b]={ts:0,timer:null}}function t(){e(),r.ts=Date.now(),r.onDone&&(r.onDone(),r.onDone=null)}m(r),n>r.ts+y?t():r.timer=setTimeout(function(){t(),r.timer=null},y)},ne.done=function(b){var y=g[b];return y&&y.timer?new Promise(function(e){var r=y.onDone;y.onDone=function(){r&&r(),e(),y.onDone=null}}):Promise.resolve()},ne.clear=function(b){if(b)m(g[b]),delete g[b];else for(var y in g)ne.clear(y)}},{}],543:[function(v,re,ne){"use strict";var g=v("fast-isnumeric");re.exports=function(m,b){if(m>0)return Math.log(m)/Math.LN10;var y=Math.log(Math.min(b[0],b[1]))/Math.LN10;return g(y)||(y=Math.log(Math.max(b[0],b[1]))/Math.LN10-6),y}},{"fast-isnumeric":190}],544:[function(v,re,ne){"use strict";var g=re.exports={},m=v("../plots/geo/constants").locationmodeToLayer,b=v("topojson-client").feature;g.getTopojsonName=function(y){return[y.scope.replace(/ /g,"-"),"_",y.resolution.toString(),"m"].join("")},g.getTopojsonPath=function(y,e){return y+e+".json"},g.getTopojsonFeatures=function(y,e){return b(e,e.objects[m[y.locationmode]]).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(v,re,ne){"use strict";re.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(v,re,ne){"use strict";re.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(v,re,ne){"use strict";var g=v("../registry");re.exports=function(m){for(var b,y,e=g.layoutArrayContainers,r=g.layoutArrayRegexes,n=m.split("[")[0],a=0;a<r.length;a++)if((y=m.match(r[a]))&&0===y.index){b=y[0];break}if(b||(b=e[e.indexOf(n)]),!b)return!1;var t=m.substr(b.length);return t?!!(y=t.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:b,index:Number(y[1]),property:y[3]||""}:{array:b,index:"",property:""}}},{"../registry":647}],548:[function(v,re,ne){"use strict";var g=v("../lib"),m=g.extendFlat,b=g.isPlainObject,y={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},r=y.flags.slice().concat(["fullReplot"]),n=e.flags.slice().concat("layoutReplot");function a(s){for(var i={},f=0;f<s.length;f++)i[s[f]]=!1;return i}function t(s,i,f){var c=m({},s);for(var l in c){var h=c[l];b(h)&&(c[l]=p(h,i,0,l))}return"from-root"===f&&(c.editType=i),c}function p(s,i,f,c){if(s.valType){var l=m({},s);if(l.editType=i,Array.isArray(s.items)){l.items=new Array(s.items.length);for(var h=0;h<s.items.length;h++)l.items[h]=p(s.items[h],i)}return l}return t(s,i,"_"===c.charAt(0)?"nested":"from-root")}re.exports={traces:y,layout:e,traceFlags:function(){return a(r)},layoutFlags:function(){return a(n)},update:function(s,i){var f=i.editType;if(f&&"none"!==f)for(var c=f.split("+"),l=0;l<c.length;l++)s[c[l]]=!0},overrideAll:t}},{"../lib":515}],549:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("gl-mat4/fromQuat"),b=v("../registry"),y=v("../lib"),e=v("../plots/plots"),r=v("../plots/cartesian/axis_ids"),n=v("../components/color"),a=r.cleanId,t=r.getFromTrace,p=b.traceIs;function s(u,T){var _=u[T],w=T.charAt(0);_&&"paper"!==_&&(u[T]=a(_,w,!0))}function i(u){function T(_,w){u[_]&&(!u.title||!u.title[w])&&(u.title||(u.title={}),u.title[w]=u[_],delete u[_])}u&&("string"!=typeof u.title&&"number"!=typeof u.title||(u.title={text:u.title}),T("titlefont","font"),T("titleposition","position"),T("titleside","side"),T("titleoffset","offset"))}function f(u){if(!y.isPlainObject(u))return!1;var T=u.name;return delete u.name,delete u.showlegend,("string"==typeof T||"number"==typeof T)&&String(T)}function c(u,T,_,w){if(_&&!w)return u;if(w&&!_||!u.trim())return T;if(!T.trim())return u;var M,I=Math.min(u.length,T.length);for(M=0;M<I&&u.charAt(M)===T.charAt(M);M++);return u.substr(0,M).trim()}function l(u){var T="middle",_="center";return"string"==typeof u&&(-1!==u.indexOf("top")?T="top":-1!==u.indexOf("bottom")&&(T="bottom"),-1!==u.indexOf("left")?_="left":-1!==u.indexOf("right")&&(_="right")),T+" "+_}function h(u,T){return T in u&&"object"==typeof u[T]&&0===Object.keys(u[T]).length}ne.clearPromiseQueue=function(u){Array.isArray(u._promises)&&u._promises.length>0&&y.log("Clearing previous rejected promises from queue."),u._promises=[]},ne.cleanLayout=function(u){var T,_;u||(u={}),u.xaxis1&&(u.xaxis||(u.xaxis=u.xaxis1),delete u.xaxis1),u.yaxis1&&(u.yaxis||(u.yaxis=u.yaxis1),delete u.yaxis1),u.scene1&&(u.scene||(u.scene=u.scene1),delete u.scene1);var w=(e.subplotsRegistry.cartesian||{}).attrRegex,M=(e.subplotsRegistry.polar||{}).attrRegex,I=(e.subplotsRegistry.ternary||{}).attrRegex,S=(e.subplotsRegistry.gl3d||{}).attrRegex,R=Object.keys(u);for(T=0;T<R.length;T++){var O=R[T];if(w&&w.test(O)){var C=u[O];C.anchor&&"free"!==C.anchor&&(C.anchor=a(C.anchor)),C.overlaying&&(C.overlaying=a(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":!1===C.isdate&&!1===C.islog&&(C.type="linear")),"withzero"!==C.autorange&&"tozero"!==C.autorange||(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,h(C,"domain")&&delete C.domain,void 0!==C.autotick&&(void 0===C.tickmode&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),i(C)}else if(M&&M.test(O))i(u[O].radialaxis);else if(I&&I.test(O)){var D=u[O];i(D.aaxis),i(D.baxis),i(D.caxis)}else if(S&&S.test(O)){var B=u[O],z=B.cameraposition;if(Array.isArray(z)&&4===z[0].length){var G=z[1],J=z[2],te=m([],z[0]),X=[];for(_=0;_<3;++_)X[_]=G[_]+J*te[2+4*_];B.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:G[0],y:G[1],z:G[2]},up:{x:0,y:0,z:1}},delete B.cameraposition}i(B.xaxis),i(B.yaxis),i(B.zaxis)}}var K=Array.isArray(u.annotations)?u.annotations.length:0;for(T=0;T<K;T++){var ae=u.annotations[T];y.isPlainObject(ae)&&(ae.ref&&("paper"===ae.ref?(ae.xref="paper",ae.yref="paper"):"data"===ae.ref&&(ae.xref="x",ae.yref="y"),delete ae.ref),s(ae,"xref"),s(ae,"yref"))}var U=Array.isArray(u.shapes)?u.shapes.length:0;for(T=0;T<U;T++){var V=u.shapes[T];y.isPlainObject(V)&&(s(V,"xref"),s(V,"yref"))}var q=Array.isArray(u.images)?u.images.length:0;for(T=0;T<q;T++){var ie=u.images[T];y.isPlainObject(ie)&&(s(ie,"xref"),s(ie,"yref"))}var H=u.legend;return H&&(H.x>3?(H.x=1.02,H.xanchor="left"):H.x<-2&&(H.x=-.02,H.xanchor="right"),H.y>3?(H.y=1.02,H.yanchor="bottom"):H.y<-2&&(H.y=-.02,H.yanchor="top")),i(u),"rotate"===u.dragmode&&(u.dragmode="orbit"),n.clean(u),u.template&&u.template.layout&&ne.cleanLayout(u.template.layout),u},ne.cleanData=function(u){for(var T=0;T<u.length;T++){var _,w=u[T];if("histogramy"===w.type&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var M=n.defaults,I=w.error_y.color||(p(w,"bar")?n.defaultLine:M[T%M.length]);w.error_y.color=n.addOpacity(n.rgb(I),n.opacity(I)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&("h"!==w.bardir||!p(w,"bar")&&"histogram"!==w.type.substr(0,9)||(w.orientation="h",ne.swapXYData(w)),delete w.bardir),"histogramy"===w.type&&ne.swapXYData(w),"histogramx"!==w.type&&"histogramy"!==w.type||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=a(w.xaxis,"x")),w.yaxis&&(w.yaxis=a(w.yaxis,"y")),p(w,"gl3d")&&w.scene&&(w.scene=e.subplotsRegistry.gl3d.cleanId(w.scene)),!p(w,"pie-like")&&!p(w,"bar-like"))if(Array.isArray(w.textposition))for(_=0;_<w.textposition.length;_++)w.textposition[_]=l(w.textposition[_]);else w.textposition&&(w.textposition=l(w.textposition));var S=b.getModule(w);if(S&&S.colorbar){var R=S.colorbar.container,O=R?w[R]:w;O&&O.colorscale&&("YIGnBu"===O.colorscale&&(O.colorscale="YlGnBu"),"YIOrRd"===O.colorscale&&(O.colorscale="YlOrRd"))}if("surface"===w.type&&y.isPlainObject(w.contours)){var C=["x","y","z"];for(_=0;_<C.length;_++){var D=w.contours[C[_]];y.isPlainObject(D)&&(D.highlightColor&&(D.highlightcolor=D.highlightColor,delete D.highlightColor),D.highlightWidth&&(D.highlightwidth=D.highlightWidth,delete D.highlightWidth))}}if("candlestick"===w.type||"ohlc"===w.type){var B=!1!==(w.increasing||{}).showlegend,z=!1!==(w.decreasing||{}).showlegend,Y=f(w.increasing),G=f(w.decreasing);if(!1!==Y&&!1!==G){var J=c(Y,G,B,z);J&&(w.name=J)}else!Y&&!G||w.name||(w.name=Y||G)}if(Array.isArray(w.transforms)){var te=w.transforms;for(_=0;_<te.length;_++){var X=te[_];if(y.isPlainObject(X))switch(X.type){case"filter":X.filtersrc&&(X.target=X.filtersrc,delete X.filtersrc),X.calendar&&(X.valuecalendar||(X.valuecalendar=X.calendar),delete X.calendar);break;case"groupby":if(X.styles=X.styles||X.style,X.styles&&!Array.isArray(X.styles)){var K=X.styles,ae=Object.keys(K);X.styles=[];for(var U=0;U<ae.length;U++)X.styles.push({target:ae[U],value:K[ae[U]]})}}}}h(w,"line")&&delete w.line,"marker"in w&&(h(w.marker,"line")&&delete w.marker.line,h(w,"marker")&&delete w.marker),n.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),i(w),w.colorbar&&i(w.colorbar),w.marker&&w.marker.colorbar&&i(w.marker.colorbar),w.line&&w.line.colorbar&&i(w.line.colorbar),w.aaxis&&i(w.aaxis),w.baxis&&i(w.baxis)}},ne.swapXYData=function(u){var T;if(y.swapAttrs(u,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(u.z)&&Array.isArray(u.z[0])&&(u.transpose?delete u.transpose:u.transpose=!0),u.error_x&&u.error_y){var _=u.error_y,w="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);y.swapAttrs(u,["error_?.copy_ystyle"]),w&&y.swapAttrs(u,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof u.hoverinfo){var M=u.hoverinfo.split("+");for(T=0;T<M.length;T++)"x"===M[T]?M[T]="y":"y"===M[T]&&(M[T]="x");u.hoverinfo=M.join("+")}},ne.coerceTraceIndices=function(u,T){if(g(T))return[T];if(!Array.isArray(T)||!T.length)return u.data.map(function(M,I){return I});if(Array.isArray(T)){for(var _=[],w=0;w<T.length;w++)y.isIndex(T[w],u.data.length)?_.push(T[w]):y.warn("trace index (",T[w],") is not a number or is out of bounds");return _}return T},ne.manageArrayContainers=function(u,T,_){var w=u.obj,M=u.parts,I=M.length,S=M[I-1],R=g(S);if(R&&null===T){var O=M.slice(0,I-1).join(".");y.nestedProperty(w,O).get().splice(S,1)}else R&&void 0===u.get()&&void 0===u.get()&&(_[u.astr]=null),u.set(T)};var d=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function o(u){var T=u.search(d);if(T>0)return u.substr(0,T)}ne.hasParent=function(u,T){for(var _=o(T);_;){if(_ in u)return!0;_=o(_)}return!1};var x=["x","y","z"];ne.clearAxisTypes=function(u,T,_){for(var w=0;w<T.length;w++)for(var M=u._fullData[w],I=0;I<3;I++){var S=t(u,M,x[I]);if(S&&"log"!==S.type){var R=S._name,O=S._id.substr(1);if("scene"===O.substr(0,5)){if(void 0!==_[O])continue;R=O+"."+R}var C=R+".type";void 0===_[R]&&void 0===_[C]&&y.nestedProperty(u.layout,C).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(v,re,ne){"use strict";var g=v("./plot_api");ne._doPlot=g._doPlot,ne.newPlot=g.newPlot,ne.restyle=g.restyle,ne.relayout=g.relayout,ne.redraw=g.redraw,ne.update=g.update,ne._guiRestyle=g._guiRestyle,ne._guiRelayout=g._guiRelayout,ne._guiUpdate=g._guiUpdate,ne._storeDirectGUIEdit=g._storeDirectGUIEdit,ne.react=g.react,ne.extendTraces=g.extendTraces,ne.prependTraces=g.prependTraces,ne.addTraces=g.addTraces,ne.deleteTraces=g.deleteTraces,ne.moveTraces=g.moveTraces,ne.purge=g.purge,ne.addFrames=g.addFrames,ne.deleteFrames=g.deleteFrames,ne.animate=g.animate,ne.setPlotConfig=g.setPlotConfig,ne.toImage=v("./to_image"),ne.validate=v("./validate"),ne.downloadImage=v("../snapshot/download");var m=v("./template_api");ne.makeTemplate=m.makeTemplate,ne.validateTemplate=m.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(v,re,ne){"use strict";var g=v("../lib/is_plain_object"),m=v("../lib/noop"),b=v("../lib/loggers"),y=v("../lib/search").sorterAsc,e=v("../registry");ne.containerArrayMatch=v("./container_array_match");var r=ne.isAddVal=function(a){return"add"===a||g(a)},n=ne.isRemoveVal=function(a){return null===a||"remove"===a};ne.applyContainerArrayChanges=function(a,t,p,s,i){var f=t.astr,c=e.getComponentMethod(f,"supplyLayoutDefaults"),l=e.getComponentMethod(f,"draw"),h=e.getComponentMethod(f,"drawOne"),d=s.replot||s.recalc||c===m||l===m,o=a.layout,x=a._fullLayout;if(p[""]){Object.keys(p).length>1&&b.warn("Full array edits are incompatible with other edits",f);var u=p[""][""];if(n(u))t.set(null);else{if(!Array.isArray(u))return b.warn("Unrecognized full array edit value",f,u),!0;t.set(u)}return!d&&(c(o,x),l(a),!0)}var T,_,w,M,I,S,R,C=Object.keys(p).map(Number).sort(y),D=t.get(),B=D||[],z=i(x,f).get(),Y=[],G=-1,J=B.length;for(T=0;T<C.length;T++)if(M=p[w=C[T]],I=Object.keys(M),R=r(S=M[""]),w<0||w>B.length-(R?0:1))b.warn("index out of range",f,w);else if(void 0!==S)I.length>1&&b.warn("Insertion & removal are incompatible with edits to the same index.",f,w),n(S)?Y.push(w):R?("add"===S&&(S={}),B.splice(w,0,S),z&&z.splice(w,0,{})):b.warn("Unrecognized full object edit value",f,w,S),-1===G&&(G=w);else for(_=0;_<I.length;_++)i(B[w],I[_],f+"["+w+"].").set(M[I[_]]);for(T=Y.length-1;T>=0;T--)B.splice(Y[T],1),z&&z.splice(Y[T],1);if(B.length?D||t.set(B):t.set(null),d)return!1;if(c(o,x),h!==m){var te;if(-1===G)te=C;else{for(J=Math.max(B.length,J),te=[],T=0;T<C.length&&!((w=C[T])>=G);T++)te.push(w);for(T=G;T<J;T++)te.push(T)}for(T=0;T<te.length;T++)h(a,te[T])}else l(a);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("has-hover"),y=v("../lib"),e=y.nestedProperty,r=v("../lib/events"),n=v("../lib/queue"),a=v("../registry"),t=v("./plot_schema"),p=v("../plots/plots"),s=v("../plots/cartesian/axes"),i=v("../components/drawing"),f=v("../components/color"),c=v("../plots/cartesian/graph_interact").initInteractions,l=v("../constants/xmlns_namespaces"),h=v("../components/selections").clearOutline,d=v("./plot_config").dfltConfig,o=v("./manage_arrays"),x=v("./helpers"),u=v("./subroutines"),T=v("./edit_types"),_=v("../plots/cartesian/constants").AX_NAME_PATTERN,w=0;function M(ve){var Te=ve._fullLayout;Te._redrawFromAutoMarginCount?Te._redrawFromAutoMarginCount--:ve.emit("plotly_afterplot")}function I(ve,Te){try{ve._fullLayout._paper.style("background",Te)}catch(Ie){y.error(Ie)}}function S(ve,Te){I(ve,f.combine(Te,"white"))}function R(ve,Te){if(!ve._context){ve._context=y.extendDeep({},d);var Ie=g.select("base");ve._context._baseUrl=Ie.size()&&Ie.attr("href")?window.location.href.split("#")[0]:""}var De,Fe,Ue,qe=ve._context;if(Te){for(Fe=Object.keys(Te),De=0;De<Fe.length;De++)"editable"!==(Ue=Fe[De])&&"edits"!==Ue&&Ue in qe&&(qe[Ue]="setBackground"===Ue&&"opaque"===Te[Ue]?S:Te[Ue]);Te.plot3dPixelRatio&&!qe.plotGlPixelRatio&&(qe.plotGlPixelRatio=qe.plot3dPixelRatio);var je=Te.editable;if(void 0!==je)for(qe.editable=je,Fe=Object.keys(qe.edits),De=0;De<Fe.length;De++)qe.edits[Fe[De]]=je;if(Te.edits)for(Fe=Object.keys(Te.edits),De=0;De<Fe.length;De++)(Ue=Fe[De])in qe.edits&&(qe.edits[Ue]=Te.edits[Ue]);qe._exportedPlot=Te._exportedPlot}qe.staticPlot&&(qe.editable=!1,qe.edits={},qe.autosizable=!1,qe.scrollZoom=!1,qe.doubleClick=!1,qe.showTips=!1,qe.showLink=!1,qe.displayModeBar=!1),"hover"!==qe.displayModeBar||b||(qe.displayModeBar=!0),"transparent"!==qe.setBackground&&"function"==typeof qe.setBackground||(qe.setBackground=I),qe._hasZeroHeight=qe._hasZeroHeight||0===ve.clientHeight,qe._hasZeroWidth=qe._hasZeroWidth||0===ve.clientWidth;var rt=qe.scrollZoom,Ne=qe._scrollZoom={};if(!0===rt)Ne.cartesian=1,Ne.gl3d=1,Ne.geo=1,Ne.mapbox=1;else if("string"==typeof rt){var Be=rt.split("+");for(De=0;De<Be.length;De++)Ne[Be[De]]=1}else!1!==rt&&(Ne.gl3d=1,Ne.geo=1,Ne.mapbox=1)}function O(ve,Te){var Ie,De,Fe=Te+1,Ue=[];for(Ie=0;Ie<ve.length;Ie++)(De=ve[Ie])<0?Ue.push(Fe+De):Ue.push(De);return Ue}function C(ve,Te,Ie){var De,Fe;for(De=0;De<Te.length;De++){if((Fe=Te[De])!==parseInt(Fe,10))throw new Error("all values in "+Ie+" must be integers");if(Fe>=ve.data.length||Fe<-ve.data.length)throw new Error(Ie+" must be valid indices for gd.data.");if(Te.indexOf(Fe,De+1)>-1||Fe>=0&&Te.indexOf(-ve.data.length+Fe)>-1||Fe<0&&Te.indexOf(ve.data.length+Fe)>-1)throw new Error("each index in "+Ie+" must be unique.")}}function D(ve,Te,Ie){if(!Array.isArray(ve.data))throw new Error("gd.data must be an array.");if(void 0===Te)throw new Error("currentIndices is a required argument.");if(Array.isArray(Te)||(Te=[Te]),C(ve,Te,"currentIndices"),void 0===Ie||Array.isArray(Ie)||(Ie=[Ie]),void 0!==Ie&&C(ve,Ie,"newIndices"),void 0!==Ie&&Te.length!==Ie.length)throw new Error("current and new indices must be of equal length.")}function B(ve,Te,Ie,De,Fe){!function(Ye,lt,mt,Tt){var It=y.isPlainObject(Tt);if(!Array.isArray(Ye.data))throw new Error("gd.data must be an array");if(!y.isPlainObject(lt))throw new Error("update must be a key:value object");if(void 0===mt)throw new Error("indices must be an integer or array of integers");for(var Ct in C(Ye,mt,"indices"),lt){if(!Array.isArray(lt[Ct])||lt[Ct].length!==mt.length)throw new Error("attribute "+Ct+" must be an array of length equal to indices array length");if(It&&(!(Ct in Tt)||!Array.isArray(Tt[Ct])||Tt[Ct].length!==lt[Ct].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ve,Te,Ie,De);for(var Ue=function(Ye,lt,mt,Tt){var Ct,ct,at,St,Xt=y.isPlainObject(Tt),tn=[];for(var hn in Array.isArray(mt)||(mt=[mt]),mt=O(mt,Ye.data.length-1),lt)for(var cn=0;cn<mt.length;cn++){if(Ct=(ct=e(Ye.data[mt[cn]],hn)).get(),!y.isArrayOrTypedArray(at=lt[hn][cn]))throw new Error("attribute: "+hn+" index: "+cn+" must be an array");if(!y.isArrayOrTypedArray(Ct))throw new Error("cannot extend missing or non-array attribute: "+hn);if(Ct.constructor!==at.constructor)throw new Error("cannot extend array with an array of a different type: "+hn);m(St=Xt?Tt[hn][cn]:Tt)||(St=-1),tn.push({prop:ct,target:Ct,insert:at,maxp:Math.floor(St)})}return tn}(ve,Te,Ie,De),qe={},je={},rt=0;rt<Ue.length;rt++){var Ne=Ue[rt].prop,We=Fe(Ue[rt].target,Ue[rt].insert,Ue[rt].maxp);Ne.set(We[0]),Array.isArray(qe[Ne.astr])||(qe[Ne.astr]=[]),qe[Ne.astr].push(We[1]),Array.isArray(je[Ne.astr])||(je[Ne.astr]=[]),je[Ne.astr].push(Ue[rt].target.length)}return{update:qe,maxPoints:je}}function z(ve,Te){var Ie=new ve.constructor(ve.length+Te.length);return Ie.set(ve),Ie.set(Te,ve.length),Ie}function Y(ve,Te,Ie,De){ve=y.getGraphDiv(ve),x.clearPromiseQueue(ve);var Fe={};if("string"==typeof Te)Fe[Te]=Ie;else{if(!y.isPlainObject(Te))return y.warn("Restyle fail.",Te,Ie,De),Promise.reject();Fe=y.extendFlat({},Te),void 0===De&&(De=Ie)}Object.keys(Fe).length&&(ve.changed=!0);var Ue=x.coerceTraceIndices(ve,De),qe=X(ve,Fe,Ue),je=qe.flags;je.calc&&(ve.calcdata=void 0),je.clearAxisTypes&&x.clearAxisTypes(ve,Ue,{});var rt=[];je.fullReplot?rt.push(ne._doPlot):(rt.push(p.previousPromises),p.supplyDefaults(ve),je.markerSize&&(p.doCalcdata(ve),V(rt)),je.style&&rt.push(u.doTraceStyle),je.colorbars&&rt.push(u.doColorBars),rt.push(M)),rt.push(p.rehover,p.redrag,p.reselect),n.add(ve,Y,[ve,qe.undoit,qe.traces],Y,[ve,qe.redoit,qe.traces]);var Ne=y.syncOrAsync(rt,ve);return Ne&&Ne.then||(Ne=Promise.resolve()),Ne.then(function(){return ve.emit("plotly_restyle",qe.eventData),ve})}function G(ve){return void 0===ve?null:ve}function J(ve,Te){return Te?function(Ie,De,Fe){var Ue=e(Ie,De),qe=Ue.set;return Ue.set=function(je){te((Fe||"")+De,Ue.get(),je,ve),qe(je)},Ue}:e}function te(ve,Te,Ie,De){if(Array.isArray(Te)||Array.isArray(Ie))for(var Fe=Array.isArray(Te)?Te:[],Ue=Array.isArray(Ie)?Ie:[],qe=Math.max(Fe.length,Ue.length),je=0;je<qe;je++)te(ve+"["+je+"]",Fe[je],Ue[je],De);else if(y.isPlainObject(Te)||y.isPlainObject(Ie)){var rt=y.isPlainObject(Te)?Te:{},Ne=y.isPlainObject(Ie)?Ie:{},Be=y.extendFlat({},rt,Ne);for(var We in Be)te(ve+"."+We,rt[We],Ne[We],De)}else void 0===De[ve]&&(De[ve]=G(Te))}function X(ve,Te,Ie){var De,Fe=ve._fullLayout,Ue=ve._fullData,qe=ve.data,je=Fe._guiEditing,rt=J(Fe._preGUI,je),Ne=y.extendDeepAll({},Te);K(Te);var Be,We=T.traceFlags(),Ye={},lt={};function mt(){return Ie.map(function(){})}function Tt(dt){var xt=s.id2name(dt);-1===Be.indexOf(xt)&&Be.push(xt)}function It(dt){return"LAYOUT"+dt+".autorange"}function Ct(dt){return"LAYOUT"+dt+".range"}function ct(dt){for(var xt=dt;xt<Ue.length;xt++)if(Ue[xt]._input===qe[dt])return Ue[xt]}function at(dt,xt,Rt){if(Array.isArray(dt))dt.forEach(function(Kt){at(Kt,xt,Rt)});else if(!(dt in Te)&&!x.hasParent(Te,dt)){var Yt;if("LAYOUT"===dt.substr(0,6))Yt=rt(ve.layout,dt.replace("LAYOUT",""));else{var nn=Ie[Rt];Yt=J(Fe._tracePreGUI[ct(nn)._fullInput.uid],je)(qe[nn],dt)}dt in lt||(lt[dt]=mt()),void 0===lt[dt][Rt]&&(lt[dt][Rt]=G(Yt.get())),void 0!==xt&&Yt.set(xt)}}function St(dt){return function(xt){return Ue[xt][dt]}}function Xt(dt){return function(xt,Rt){return!1===xt?Ue[Ie[Rt]][dt]:null}}for(var tn in Te){if(x.hasParent(Te,tn))throw new Error("cannot set "+tn+" and a parent attribute simultaneously");var hn,cn,yn,en,Xe,tt,ye=Te[tn];if("autobinx"!==tn&&"autobiny"!==tn||(tn=tn.charAt(tn.length-1)+"bins",ye=Array.isArray(ye)?ye.map(Xt(tn)):!1===ye?Ie.map(St(tn)):null),Ye[tn]=ye,"LAYOUT"!==tn.substr(0,6)){for(lt[tn]=mt(),De=0;De<Ie.length;De++)if(hn=qe[Ie[De]],cn=ct(Ie[De]),en=(yn=J(Fe._tracePreGUI[cn._fullInput.uid],je)(hn,tn)).get(),void 0!==(Xe=Array.isArray(ye)?ye[De%ye.length]:ye)){var ke=yn.parts[yn.parts.length-1],Ve=tn.substr(0,tn.length-ke.length-1),Je=Ve?Ve+".":"",nt=Ve?e(cn,Ve).get():cn;if((tt=t.getTraceValObject(cn,yn.parts))&&tt.impliedEdits&&null!==Xe)for(var Ke in tt.impliedEdits)at(y.relativeAttr(tn,Ke),tt.impliedEdits[Ke],De);else if("thicknessmode"!==ke&&"lenmode"!==ke||en===Xe||"fraction"!==Xe&&"pixels"!==Xe||!nt){if("type"===tn&&("pie"===Xe!=("pie"===en)||"funnelarea"===Xe!=("funnelarea"===en))){var vt="x",gt="y";"bar"!==Xe&&"bar"!==en||"h"!==hn.orientation||(vt="y",gt="x"),y.swapAttrs(hn,["?","?src"],"labels",vt),y.swapAttrs(hn,["d?","?0"],"label",vt),y.swapAttrs(hn,["?","?src"],"values",gt),"pie"===en||"funnelarea"===en?(e(hn,"marker.color").set(e(hn,"marker.colors").get()),Fe._pielayer.selectAll("g.trace").remove()):a.traceIs(hn,"cartesian")&&e(hn,"marker.colors").set(e(hn,"marker.color").get())}}else{var Ot=Fe._size,Vt=nt.orient,ft="top"===Vt||"bottom"===Vt;if("thicknessmode"===ke){var bt=ft?Ot.h:Ot.w;at(Je+"thickness",nt.thickness*("fraction"===Xe?1/bt:bt),De)}else{var Wt=ft?Ot.w:Ot.h;at(Je+"len",nt.len*("fraction"===Xe?1/Wt:Wt),De)}}if(lt[tn][De]=G(en),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(tn)){if("orientation"===tn){yn.set(Xe);var Pt=hn.x&&!hn.y?"h":"v";if((yn.get()||Pt)===cn.orientation)continue}else"orientationaxes"===tn&&(hn.orientation={v:"h",h:"v"}[cn.orientation]);x.swapXYData(hn),We.calc=We.clearAxisTypes=!0}else-1!==p.dataArrayContainers.indexOf(yn.parts[0])?(x.manageArrayContainers(yn,Xe,lt),We.calc=!0):(tt?tt.arrayOk&&!a.traceIs(cn,"regl")&&(y.isArrayOrTypedArray(Xe)||y.isArrayOrTypedArray(en))?We.calc=!0:T.update(We,tt):We.calc=!0,yn.set(Xe))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(tn)&&s.swap(ve,Ie),"orientationaxes"===tn){var Bt=e(ve.layout,"hovermode"),Pe=Bt.get();"x"===Pe?Bt.set("y"):"y"===Pe?Bt.set("x"):"x unified"===Pe?Bt.set("y unified"):"y unified"===Pe&&Bt.set("x unified")}if(-1!==["orientation","type"].indexOf(tn)){for(Be=[],De=0;De<Ie.length;De++){var et=qe[Ie[De]];a.traceIs(et,"cartesian")&&(Tt(et.xaxis||"x"),Tt(et.yaxis||"y"))}at(Be.map(It),!0,0),at(Be.map(Ct),[0,1],0)}}else yn=rt(ve.layout,tn.replace("LAYOUT","")),lt[tn]=[G(yn.get())],yn.set(Array.isArray(ye)?ye[0]:ye),We.calc=!0}return(We.calc||We.plot)&&(We.fullReplot=!0),{flags:We,undoit:lt,redoit:Ye,traces:Ie,eventData:y.extendDeepNoArrays([],[Ne,Ie])}}function K(ve){var Te,Ie,De,Fe=y.counterRegex("axis",".title",!1,!1),Ue=/colorbar\.title$/,qe=Object.keys(ve);for(Te=0;Te<qe.length;Te++)De=ve[Ie=qe[Te]],"title"!==Ie&&!Fe.test(Ie)&&!Ue.test(Ie)||"string"!=typeof De&&"number"!=typeof De?Ie.indexOf("titlefont")>-1&&-1===Ie.indexOf("grouptitlefont")?je(Ie,Ie.replace("titlefont","title.font")):Ie.indexOf("titleposition")>-1?je(Ie,Ie.replace("titleposition","title.position")):Ie.indexOf("titleside")>-1?je(Ie,Ie.replace("titleside","title.side")):Ie.indexOf("titleoffset")>-1&&je(Ie,Ie.replace("titleoffset","title.offset")):je(Ie,Ie.replace("title","title.text"));function je(rt,Ne){ve[Ne]=ve[rt],delete ve[rt]}}function ae(ve,Te,Ie){ve=y.getGraphDiv(ve),x.clearPromiseQueue(ve);var De={};if("string"==typeof Te)De[Te]=Ie;else{if(!y.isPlainObject(Te))return y.warn("Relayout fail.",Te,Ie),Promise.reject();De=y.extendFlat({},Te)}Object.keys(De).length&&(ve.changed=!0);var Fe=ee(ve,De),Ue=Fe.flags;Ue.calc&&(ve.calcdata=void 0);var qe=[p.previousPromises];Ue.layoutReplot?qe.push(u.layoutReplot):Object.keys(De).length&&(U(ve,Ue,Fe)||p.supplyDefaults(ve),Ue.legend&&qe.push(u.doLegend),Ue.layoutstyle&&qe.push(u.layoutStyles),Ue.axrange&&V(qe,Fe.rangesAltered),Ue.ticks&&qe.push(u.doTicksRelayout),Ue.modebar&&qe.push(u.doModeBar),Ue.camera&&qe.push(u.doCamera),Ue.colorbars&&qe.push(u.doColorBars),qe.push(M)),qe.push(p.rehover,p.redrag,p.reselect),n.add(ve,ae,[ve,Fe.undoit],ae,[ve,Fe.redoit]);var je=y.syncOrAsync(qe,ve);return je&&je.then||(je=Promise.resolve(ve)),je.then(function(){return ve.emit("plotly_relayout",Fe.eventData),ve})}function U(ve,Te,Ie){var De=ve._fullLayout;if(!Te.axrange)return!1;for(var Fe in Te)if("axrange"!==Fe&&Te[Fe])return!1;for(var Ue in Ie.rangesAltered){var qe=s.id2name(Ue),je=ve.layout[qe],rt=De[qe];if(rt.autorange=je.autorange,je.range&&(rt.range=je.range.slice()),rt.cleanRange(),rt._matchGroup)for(var Ne in rt._matchGroup)if(Ne!==Ue){var Be=De[s.id2name(Ne)];Be.autorange=rt.autorange,Be.range=rt.range.slice(),Be._input.range=rt.range.slice()}}return!0}function V(ve,Te){ve.push(h,u.doAutoRangeAndConstraints,Te?function(De){var Fe=[],Ue=!0;for(var qe in Te){var je=s.getFromId(De,qe);if(Fe.push(qe),-1!==(je.ticklabelposition||"").indexOf("inside")&&je._anchorAxis&&Fe.push(je._anchorAxis._id),je._matchGroup)for(var rt in je._matchGroup)Te[rt]||Fe.push(rt);je.automargin&&(Ue=!1)}return s.draw(De,Fe,{skipTitle:Ue})}:function(De){return s.draw(De,"redraw")},u.drawData,u.finalDraw)}var q=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,H=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ee(ve,Te){var Ie,De,Fe,Ue=ve.layout,qe=ve._fullLayout,rt=J(qe._preGUI,qe._guiEditing),Ne=Object.keys(Te),Be=s.list(ve),We=y.extendDeepAll({},Te),Ye={};for(K(Te),Ne=Object.keys(Te),De=0;De<Ne.length;De++)if(0===Ne[De].indexOf("allaxes")){for(Fe=0;Fe<Be.length;Fe++){var lt=Be[Fe]._id.substr(1),mt=-1!==lt.indexOf("scene")?lt+".":"",Tt=Ne[De].replace("allaxes",mt+Be[Fe]._name);Te[Tt]||(Te[Tt]=Te[Ne[De]])}delete Te[Ne[De]]}var It=T.layoutFlags(),Ct={},ct={};function at(nn,Kt){if(Array.isArray(nn))nn.forEach(function(Un){at(Un,Kt)});else if(!(nn in Te)&&!x.hasParent(Te,nn)){var Mn=rt(Ue,nn);nn in ct||(ct[nn]=G(Mn.get())),void 0!==Kt&&Mn.set(Kt)}}var St,Xt={};function tn(nn){var Kt=s.name2id(nn.split(".")[0]);return Xt[Kt]=1,Kt}for(var hn in Te){if(x.hasParent(Te,hn))throw new Error("cannot set "+hn+" and a parent attribute simultaneously");for(var cn=rt(Ue,hn),yn=Te[hn],en=cn.parts.length-1;en>0&&"string"!=typeof cn.parts[en];)en--;var Xe=cn.parts[en],tt=cn.parts[en-1]+"."+Xe,ye=cn.parts.slice(0,en).join("."),ke=e(ve.layout,ye).get(),Ve=e(qe,ye).get(),Je=cn.get();if(void 0!==yn){Ct[hn]=yn,ct[hn]="reverse"===Xe?yn:G(Je);var nt=t.getLayoutValObject(qe,cn.parts);if(nt&&nt.impliedEdits&&null!==yn)for(var Ke in nt.impliedEdits)at(y.relativeAttr(hn,Ke),nt.impliedEdits[Ke]);if(-1!==["width","height"].indexOf(hn))if(yn){at("autosize",null);var vt="height"===hn?"width":"height";at(vt,qe[vt])}else qe[hn]=ve._initialAutoSize[hn];else if("autosize"===hn)at("width",yn?null:qe.width),at("height",yn?null:qe.height);else if(tt.match(q))tn(tt),e(qe,ye+"._inputRange").set(null);else if(tt.match(ie)){tn(tt),e(qe,ye+"._inputRange").set(null);var gt=e(qe,ye).get();gt._inputDomain&&(gt._input.domain=gt._inputDomain.slice())}else tt.match(H)&&e(qe,ye+"._inputDomain").set(null);if("type"===Xe){St=ke;var Ot="linear"===Ve.type&&"log"===yn;if(Ot||"log"===Ve.type&&"linear"===yn){if(St&&St.range)if(Ve.autorange)Ot&&(St.range=St.range[1]>St.range[0]?[1,2]:[2,1]);else{var ft=St.range[0],bt=St.range[1];Ot?(ft<=0&&bt<=0&&at(ye+".autorange",!0),ft<=0?ft=bt/1e6:bt<=0&&(bt=ft/1e6),at(ye+".range[0]",Math.log(ft)/Math.LN10),at(ye+".range[1]",Math.log(bt)/Math.LN10)):(at(ye+".range[0]",Math.pow(10,ft)),at(ye+".range[1]",Math.pow(10,bt)))}else at(ye+".autorange",!0);Array.isArray(qe._subplots.polar)&&qe._subplots.polar.length&&qe[cn.parts[0]]&&"radialaxis"===cn.parts[1]&&delete qe[cn.parts[0]]._subplot.viewInitial["radialaxis.range"],a.getComponentMethod("annotations","convertCoords")(ve,Ve,yn,at),a.getComponentMethod("images","convertCoords")(ve,Ve,yn,at)}else at(ye+".autorange",!0),at(ye+".range",null);e(qe,ye+"._inputRange").set(null)}else if(Xe.match(_)){var Wt=e(qe,hn).get(),Pt=(yn||{}).type;Pt&&"-"!==Pt||(Pt="linear"),a.getComponentMethod("annotations","convertCoords")(ve,Wt,Pt,at),a.getComponentMethod("images","convertCoords")(ve,Wt,Pt,at)}var Bt=o.containerArrayMatch(hn);if(Bt){Ie=Bt.array;var Pe=Bt.property,et=nt||{editType:"calc"};""!==(De=Bt.index)&&""===Pe&&(o.isAddVal(yn)?ct[hn]=null:o.isRemoveVal(yn)?ct[hn]=(e(Ue,Ie).get()||[])[De]:y.warn("unrecognized full object value",Te)),T.update(It,et),Ye[Ie]||(Ye[Ie]={});var dt=Ye[Ie][De];dt||(dt=Ye[Ie][De]={}),dt[Pe]=yn,delete Te[hn]}else"reverse"===Xe?(ke.range?ke.range.reverse():(at(ye+".autorange",!0),ke.range=[1,0]),Ve.autorange?It.calc=!0:It.plot=!0):("dragmode"===hn&&(!1===yn&&!1!==Je||!1!==yn&&!1===Je)||qe._has("scatter-like")&&qe._has("regl")&&"dragmode"===hn&&("lasso"===yn||"select"===yn)&&"lasso"!==Je&&"select"!==Je||qe._has("gl2d")?It.plot=!0:nt?T.update(It,nt):It.calc=!0,cn.set(yn))}}for(Ie in Ye)o.applyContainerArrayChanges(ve,rt(Ue,Ie),Ye[Ie],It,rt)||(It.plot=!0);for(var xt in Xt){var Rt=(St=s.getFromId(ve,xt))&&St._constraintGroup;if(Rt)for(var Yt in It.calc=!0,Rt)Xt[Yt]||(s.getFromId(ve,Yt)._constraintShrinkable=!0)}return(Q(ve)||Te.height||Te.width)&&(It.plot=!0),(It.plot||It.calc)&&(It.layoutReplot=!0),{flags:It,rangesAltered:Xt,undoit:ct,redoit:Ct,eventData:We}}function Q(ve){var Te=ve._fullLayout,Ie=Te.width,De=Te.height;return ve.layout.autosize&&p.plotAutoSize(ve,ve.layout,Te),Te.width!==Ie||Te.height!==De}function oe(ve,Te,Ie,De){ve=y.getGraphDiv(ve),x.clearPromiseQueue(ve),y.isPlainObject(Te)||(Te={}),y.isPlainObject(Ie)||(Ie={}),Object.keys(Te).length&&(ve.changed=!0),Object.keys(Ie).length&&(ve.changed=!0);var Fe=x.coerceTraceIndices(ve,De),Ue=X(ve,y.extendFlat({},Te),Fe),qe=Ue.flags,je=ee(ve,y.extendFlat({},Ie)),rt=je.flags;(qe.calc||rt.calc)&&(ve.calcdata=void 0),qe.clearAxisTypes&&x.clearAxisTypes(ve,Fe,Ie);var Ne=[];rt.layoutReplot?Ne.push(u.layoutReplot):qe.fullReplot?Ne.push(ne._doPlot):(Ne.push(p.previousPromises),U(ve,rt,je)||p.supplyDefaults(ve),qe.style&&Ne.push(u.doTraceStyle),(qe.colorbars||rt.colorbars)&&Ne.push(u.doColorBars),rt.legend&&Ne.push(u.doLegend),rt.layoutstyle&&Ne.push(u.layoutStyles),rt.axrange&&V(Ne,je.rangesAltered),rt.ticks&&Ne.push(u.doTicksRelayout),rt.modebar&&Ne.push(u.doModeBar),rt.camera&&Ne.push(u.doCamera),Ne.push(M)),Ne.push(p.rehover,p.redrag,p.reselect),n.add(ve,oe,[ve,Ue.undoit,je.undoit,Ue.traces],oe,[ve,Ue.redoit,je.redoit,Ue.traces]);var Be=y.syncOrAsync(Ne,ve);return Be&&Be.then||(Be=Promise.resolve(ve)),Be.then(function(){return ve.emit("plotly_update",{data:Ue.eventData,layout:je.eventData}),ve})}function le(ve){return function(Te){Te._fullLayout._guiEditing=!0;var Ie=ve.apply(null,arguments);return Te._fullLayout._guiEditing=!1,Ie}}var de=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],fe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function be(ve,Te){for(var Ie=0;Ie<Te.length;Ie++){var De=Te[Ie],Fe=ve.match(De.pattern);if(Fe){var Ue=Fe[1]||"";return{head:Ue,tail:ve.substr(Ue.length+1),attr:De.attr}}}}function he(ve,Te){var Ie=e(Te,ve).get();if(void 0!==Ie)return Ie;var De=ve.split(".");for(De.pop();De.length>1;)if(De.pop(),void 0!==(Ie=e(Te,De.join(".")+".uirevision").get()))return Ie;return Te.uirevision}function _e(ve,Te){for(var Ie=0;Ie<Te.length;Ie++)if(Te[Ie]._fullInput.uid===ve)return Ie;return-1}function Ce(ve,Te,Ie){for(var De=0;De<Te.length;De++)if(Te[De].uid===ve)return De;return!Te[Ie]||Te[Ie].uid?-1:Ie}function Ee(ve,Te){var Ie=y.isPlainObject(ve),De=Array.isArray(ve);return Ie||De?(Ie&&y.isPlainObject(Te)||De&&Array.isArray(Te))&&JSON.stringify(ve)===JSON.stringify(Te):ve===Te}function Ae(ve,Te,Ie,De){var Fe,Ue,qe,je=De.getValObject,rt=De.flags,Ne=De.immutable,Be=De.inArray,We=De.arrayIndex;function Ye(){var ke=Fe.editType;Be&&-1!==ke.indexOf("arraydraw")?y.pushUnique(rt.arrays[Be],We):(T.update(rt,Fe),"none"!==ke&&rt.nChanges++,De.transition&&Fe.anim&&rt.nChangesAnim++,(q.test(qe)||ie.test(qe))&&(rt.rangesAltered[Ie[0]]=1),H.test(qe)&&e(Te,"_inputDomain").set(null),"datarevision"===Ue&&(rt.newDataRevision=1))}function lt(ke){return"data_array"===ke.valType||ke.arrayOk}for(Ue in ve){if(rt.calc&&!De.transition)return;var mt=ve[Ue],Tt=Te[Ue],It=Ie.concat(Ue);if(qe=It.join("."),"_"!==Ue.charAt(0)&&"function"!=typeof mt&&mt!==Tt){if(("tick0"===Ue||"dtick"===Ue)&&"geo"!==Ie[0]){var Ct=Te.tickmode;if("auto"===Ct||"array"===Ct||!Ct)continue}if(("range"!==Ue||!Te.autorange)&&("zmin"!==Ue&&"zmax"!==Ue||"contourcarpet"!==Te.type)&&(Fe=je(It))&&(!Fe._compareAsJSON||JSON.stringify(mt)!==JSON.stringify(Tt))){var ct,at=Fe.valType,St=lt(Fe),Xt=Array.isArray(mt),tn=Array.isArray(Tt);if(Xt&&tn){var hn="_input_"+Ue,cn=ve[hn],yn=Te[hn];if(Array.isArray(cn)&&cn===yn)continue}if(void 0===Tt)St&&Xt?rt.calc=!0:Ye();else if(Fe._isLinkedToArray){var en=[],Xe=!1;Be||(rt.arrays[Ue]=en);var tt=Math.min(mt.length,Tt.length),ye=Math.max(mt.length,Tt.length);if(tt!==ye){if("arraydraw"!==Fe.editType){Ye();continue}Xe=!0}for(ct=0;ct<tt;ct++)Ae(mt[ct],Tt[ct],It.concat(ct),y.extendFlat({inArray:Ue,arrayIndex:ct},De));if(Xe)for(ct=tt;ct<ye;ct++)en.push(ct)}else!at&&y.isPlainObject(mt)?Ae(mt,Tt,It,De):St?Xt&&tn?(Ne&&(rt.calc=!0),(Ne||De.newDataRevision)&&Ye()):Xt!==tn?rt.calc=!0:Ye():Xt&&tn&&mt.length===Tt.length&&String(mt)===String(Tt)||Ye()}}}for(Ue in Te)if(!(Ue in ve)&&"_"!==Ue.charAt(0)&&"function"!=typeof Te[Ue]){if(lt(Fe=je(Ie.concat(Ue)))&&Array.isArray(Te[Ue]))return void(rt.calc=!0);Ye()}}function ze(ve){var Te=ve._fullLayout,Ie=ve.getBoundingClientRect();if(!y.equalDomRects(Ie,Te._lastBBox)){var De=Te._invTransform=y.inverseTransformMatrix(y.getFullTransformMatrix(ve));Te._invScaleX=Math.sqrt(De[0][0]*De[0][0]+De[0][1]*De[0][1]+De[0][2]*De[0][2]),Te._invScaleY=Math.sqrt(De[1][0]*De[1][0]+De[1][1]*De[1][1]+De[1][2]*De[1][2]),Te._lastBBox=Ie}}ne.animate=function(ve,Te,Ie){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var De=ve._transitionData;De._frameQueue||(De._frameQueue=[]);var Fe=(Ie=p.supplyAnimationDefaults(Ie)).transition,Ue=Ie.frame;function qe(Ne){return Array.isArray(Fe)?Ne>=Fe.length?Fe[0]:Fe[Ne]:Fe}function je(Ne){return Array.isArray(Ue)?Ne>=Ue.length?Ue[0]:Ue[Ne]:Ue}function rt(Ne,Be){var We=0;return function(){if(Ne&&++We===Be)return Ne()}}return void 0===De._frameWaitingCnt&&(De._frameWaitingCnt=0),new Promise(function(Ne,Be){function Ye(){ve.emit("plotly_animating"),De._lastFrameAt=-1/0,De._timeToNext=0,De._runningTransitions=0,De._currentFrame=null;var cn=function(){De._animationRaf=window.requestAnimationFrame(cn),Date.now()-De._lastFrameAt>De._timeToNext&&function We(){De._currentFrame&&De._currentFrame.onComplete&&De._currentFrame.onComplete();var cn=De._currentFrame=De._frameQueue.shift();if(cn){var yn=cn.name?cn.name.toString():null;ve._fullLayout._currentFrame=yn,De._lastFrameAt=Date.now(),De._timeToNext=cn.frameOpts.duration,p.transition(ve,cn.frame.data,cn.frame.layout,x.coerceTraceIndices(ve,cn.frame.traces),cn.frameOpts,cn.transitionOpts).then(function(){cn.onComplete&&cn.onComplete()}),ve.emit("plotly_animatingframe",{name:yn,frame:cn.frame,animation:{frame:cn.frameOpts,transition:cn.transitionOpts}})}else ve.emit("plotly_animated"),window.cancelAnimationFrame(De._animationRaf),De._animationRaf=null}()};cn()}var lt,mt,Tt=0;function It(cn){return cn.transitionOpts=Array.isArray(Fe)?Tt>=Fe.length?Fe[Tt]:Fe[0]:Fe,Tt++,cn}var Ct=[],ct=null==Te,at=Array.isArray(Te);if(ct||at||!y.isPlainObject(Te)){if(ct||-1!==["string","number"].indexOf(typeof Te))for(lt=0;lt<De._frames.length;lt++)(mt=De._frames[lt])&&(ct||String(mt.group)===String(Te))&&Ct.push({type:"byname",name:String(mt.name),data:It({name:mt.name})});else if(at)for(lt=0;lt<Te.length;lt++){var St=Te[lt];-1!==["number","string"].indexOf(typeof St)?(St=String(St),Ct.push({type:"byname",name:St,data:It({name:St})})):y.isPlainObject(St)&&Ct.push({type:"object",data:It(y.extendFlat({},St))})}}else Ct.push({type:"object",data:It(y.extendFlat({},Te))});for(lt=0;lt<Ct.length;lt++)if("byname"===(mt=Ct[lt]).type&&!De._frameHash[mt.data.name])return y.warn('animate failure: frame not found: "'+mt.data.name+'"'),void Be();-1!==["next","immediate"].indexOf(Ie.mode)&&function(){if(0!==De._frameQueue.length){for(;De._frameQueue.length;){var cn=De._frameQueue.pop();cn.onInterrupt&&cn.onInterrupt()}ve.emit("plotly_animationinterrupted",[])}}(),"reverse"===Ie.direction&&Ct.reverse();var Xt=ve._fullLayout._currentFrame;if(Xt&&Ie.fromcurrent){var tn=-1;for(lt=0;lt<Ct.length;lt++)if("byname"===(mt=Ct[lt]).type&&mt.name===Xt){tn=lt;break}if(tn>0&&tn<Ct.length-1){var hn=[];for(lt=0;lt<Ct.length;lt++)mt=Ct[lt],("byname"!==Ct[lt].type||lt>tn)&&hn.push(mt);Ct=hn}}Ct.length>0?function(cn){if(0!==cn.length){for(var yn=0;yn<cn.length;yn++){var en;en="byname"===cn[yn].type?p.computeFrame(ve,cn[yn].name):cn[yn].data;var Xe=je(yn),tt=qe(yn);tt.duration=Math.min(tt.duration,Xe.duration);var ye={frame:en,name:cn[yn].name,frameOpts:Xe,transitionOpts:tt};yn===cn.length-1&&(ye.onComplete=rt(Ne,2),ye.onInterrupt=Be),De._frameQueue.push(ye)}"immediate"===Ie.mode&&(De._lastFrameAt=-1/0),De._animationRaf||Ye()}}(Ct):(ve.emit("plotly_animated"),Ne())})},ne.addFrames=function(ve,Te,Ie){if(ve=y.getGraphDiv(ve),null==Te)return Promise.resolve();if(!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var De,Fe,Ue,qe,je=ve._transitionData._frames,rt=ve._transitionData._frameHash;if(!Array.isArray(Te))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Te);var Ne=je.length+2*Te.length,Be=[],We={};for(De=Te.length-1;De>=0;De--)if(y.isPlainObject(Te[De])){var Ye=Te[De].name,lt=(rt[Ye]||We[Ye]||{}).name,mt=Te[De].name;lt&&mt&&"number"==typeof mt&&(rt[lt]||We[lt])&&w<5&&(w++,y.warn('addFrames: overwriting frame "'+(rt[lt]||We[lt]).name+'" with a frame whose name of type "number" also equates to "'+lt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===w&&y.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),We[Ye]={name:Ye},Be.push({frame:p.supplyFrameDefaults(Te[De]),index:Ie&&null!=Ie[De]?Ie[De]:Ne+De})}Be.sort(function(hn,cn){return hn.index>cn.index?-1:hn.index<cn.index?1:0});var It=[],Ct=[],ct=je.length;for(De=Be.length-1;De>=0;De--){if("number"==typeof(Fe=Be[De].frame).name&&y.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Fe.name)for(;rt[Fe.name="frame "+ve._transitionData._counter++];);if(rt[Fe.name]){for(Ue=0;Ue<je.length&&(je[Ue]||{}).name!==Fe.name;Ue++);It.push({type:"replace",index:Ue,value:Fe}),Ct.unshift({type:"replace",index:Ue,value:je[Ue]})}else qe=Math.max(0,Math.min(Be[De].index,ct)),It.push({type:"insert",index:qe,value:Fe}),Ct.unshift({type:"delete",index:qe}),ct++}return n&&n.add(ve,p.modifyFrames,[ve,Ct],p.modifyFrames,[ve,It]),p.modifyFrames(ve,It)},ne.deleteFrames=function(ve,Te){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);var Ie,De,Fe=ve._transitionData._frames,Ue=[],qe=[];if(!Te)for(Te=[],Ie=0;Ie<Fe.length;Ie++)Te.push(Ie);for((Te=Te.slice()).sort(),Ie=Te.length-1;Ie>=0;Ie--)Ue.push({type:"delete",index:De=Te[Ie]}),qe.unshift({type:"insert",index:De,value:Fe[De]});return n&&n.add(ve,p.modifyFrames,[ve,qe],p.modifyFrames,[ve,Ue]),p.modifyFrames(ve,Ue)},ne.addTraces=function ve(Te,Ie,De){Te=y.getGraphDiv(Te);var Fe,Ue,qe=[],je=ne.deleteTraces,rt=ve,Ne=[Te,qe],Be=[Te,Ie];for(function(We,Ye,lt){var mt,Tt;if(!Array.isArray(We.data))throw new Error("gd.data must be an array.");if(void 0===Ye)throw new Error("traces must be defined.");for(Array.isArray(Ye)||(Ye=[Ye]),mt=0;mt<Ye.length;mt++)if("object"!=typeof(Tt=Ye[mt])||Array.isArray(Tt)||null===Tt)throw new Error("all values in traces array must be non-array objects");if(void 0===lt||Array.isArray(lt)||(lt=[lt]),void 0!==lt&&lt.length!==Ye.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Te,Ie,De),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(We){return y.extendFlat({},We)}),x.cleanData(Ie),Fe=0;Fe<Ie.length;Fe++)Te.data.push(Ie[Fe]);for(Fe=0;Fe<Ie.length;Fe++)qe.push(-Ie.length+Fe);if(void 0===De)return Ue=ne.redraw(Te),n.add(Te,je,Ne,rt,Be),Ue;Array.isArray(De)||(De=[De]);try{D(Te,qe,De)}catch(We){throw Te.data.splice(Te.data.length-Ie.length,Ie.length),We}return n.startSequence(Te),n.add(Te,je,Ne,rt,Be),Ue=ne.moveTraces(Te,qe,De),n.stopSequence(Te),Ue},ne.deleteTraces=function ve(Te,Ie){Te=y.getGraphDiv(Te);var De,Fe,Ue=[],qe=ne.addTraces,je=ve,rt=[Te,Ue,Ie],Ne=[Te,Ie];if(void 0===Ie)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),C(Te,Ie,"indices"),(Ie=O(Ie,Te.data.length-1)).sort(y.sorterDes),De=0;De<Ie.length;De+=1)Fe=Te.data.splice(Ie[De],1)[0],Ue.push(Fe);var Be=ne.redraw(Te);return n.add(Te,qe,rt,je,Ne),Be},ne.extendTraces=function ve(Te,Ie,De,Fe){function Ue(Ne,Be,We){var Ye,lt;if(y.isTypedArray(Ne))if(We<0){var mt=new Ne.constructor(0),Tt=z(Ne,Be);We<0?(Ye=Tt,lt=mt):(Ye=mt,lt=Tt)}else if(Ye=new Ne.constructor(We),lt=new Ne.constructor(Ne.length+Be.length-We),We===Be.length)Ye.set(Be),lt.set(Ne);else if(We<Be.length){var It=Be.length-We;Ye.set(Be.subarray(It)),lt.set(Ne),lt.set(Be.subarray(0,It),Ne.length)}else{var Ct=We-Be.length,ct=Ne.length-Ct;Ye.set(Ne.subarray(ct)),Ye.set(Be,Ct),lt.set(Ne.subarray(0,ct))}else Ye=Ne.concat(Be),lt=We>=0&&We<Ye.length?Ye.splice(0,Ye.length-We):[];return[Ye,lt]}var qe=B(Te=y.getGraphDiv(Te),Ie,De,Fe,Ue),je=ne.redraw(Te);return n.add(Te,ne.prependTraces,[Te,qe.update,De,qe.maxPoints],ve,arguments),je},ne.moveTraces=function ve(Te,Ie,De){var Fe,Ue=[],qe=[],je=ve,rt=ve,Ne=[Te=y.getGraphDiv(Te),De,Ie],Be=[Te,Ie,De];if(D(Te,Ie,De),Ie=Array.isArray(Ie)?Ie:[Ie],void 0===De)for(De=[],Fe=0;Fe<Ie.length;Fe++)De.push(-Ie.length+Fe);for(De=Array.isArray(De)?De:[De],Ie=O(Ie,Te.data.length-1),De=O(De,Te.data.length-1),Fe=0;Fe<Te.data.length;Fe++)-1===Ie.indexOf(Fe)&&Ue.push(Te.data[Fe]);for(Fe=0;Fe<Ie.length;Fe++)qe.push({newIndex:De[Fe],trace:Te.data[Ie[Fe]]});for(qe.sort(function(Ye,lt){return Ye.newIndex-lt.newIndex}),Fe=0;Fe<qe.length;Fe+=1)Ue.splice(qe[Fe].newIndex,0,qe[Fe].trace);Te.data=Ue;var We=ne.redraw(Te);return n.add(Te,je,Ne,rt,Be),We},ne.prependTraces=function ve(Te,Ie,De,Fe){function Ue(Ne,Be,We){var Ye,lt;if(y.isTypedArray(Ne))if(We<=0){var mt=new Ne.constructor(0),Tt=z(Be,Ne);We<0?(Ye=Tt,lt=mt):(Ye=mt,lt=Tt)}else if(Ye=new Ne.constructor(We),lt=new Ne.constructor(Ne.length+Be.length-We),We===Be.length)Ye.set(Be),lt.set(Ne);else if(We<Be.length){var It=Be.length-We;Ye.set(Be.subarray(0,It)),lt.set(Be.subarray(It)),lt.set(Ne,It)}else{var Ct=We-Be.length;Ye.set(Be),Ye.set(Ne.subarray(0,Ct),Be.length),lt.set(Ne.subarray(Ct))}else Ye=Be.concat(Ne),lt=We>=0&&We<Ye.length?Ye.splice(We,Ye.length):[];return[Ye,lt]}var qe=B(Te=y.getGraphDiv(Te),Ie,De,Fe,Ue),je=ne.redraw(Te);return n.add(Te,ne.extendTraces,[Te,qe.update,De,qe.maxPoints],ve,arguments),je},ne.newPlot=function(ve,Te,Ie,De){return ve=y.getGraphDiv(ve),p.cleanPlot([],{},ve._fullData||[],ve._fullLayout||{}),p.purge(ve),ne._doPlot(ve,Te,Ie,De)},ne._doPlot=function(ve,Te,Ie,De){var Fe;if(ve=y.getGraphDiv(ve),r.init(ve),y.isPlainObject(Te)){var Ue=Te;Te=Ue.data,Ie=Ue.layout,De=Ue.config,Fe=Ue.frames}if(!1===r.triggerHandler(ve,"plotly_beforeplot",[Te,Ie,De]))return Promise.reject();Te||Ie||y.isPlotDiv(ve)||y.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ve),R(ve,De),Ie||(Ie={}),g.select(ve).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(ve._promises)||(ve._promises=[]);var qe=0===(ve.data||[]).length&&Array.isArray(Te);Array.isArray(Te)&&(x.cleanData(Te),qe?ve.data=Te:ve.data.push.apply(ve.data,Te),ve.empty=!1),ve.layout&&!qe||(ve.layout=x.cleanLayout(Ie)),p.supplyDefaults(ve);var je=ve._fullLayout,rt=je._has("cartesian");je._replotting=!0,(qe||je._shouldCreateBgLayer)&&(function(Ct){var ct=g.select(Ct),at=Ct._fullLayout;if(at._calcInverseTransform=ze,at._calcInverseTransform(Ct),at._container=ct.selectAll(".plot-container").data([0]),at._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),at._paperdiv=at._container.selectAll(".svg-container").data([0]),at._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),at._glcontainer=at._paperdiv.selectAll(".gl-container").data([{}]),at._glcontainer.enter().append("div").classed("gl-container",!0),at._paperdiv.selectAll(".main-svg").remove(),at._paperdiv.select(".modebar-container").remove(),at._paper=at._paperdiv.insert("svg",":first-child").classed("main-svg",!0),at._toppaper=at._paperdiv.append("svg").classed("main-svg",!0),at._modebardiv=at._paperdiv.append("div"),delete at._modeBar,at._hoverpaper=at._paperdiv.append("svg").classed("main-svg",!0),!at._uid){var St={};g.selectAll("defs").each(function(){this.id&&(St[this.id.split("-")[1]]=1)}),at._uid=y.randstr(St)}at._paperdiv.selectAll(".main-svg").attr(l.svgAttrs),at._defs=at._paper.append("defs").attr("id","defs-"+at._uid),at._clips=at._defs.append("g").classed("clips",!0),at._topdefs=at._toppaper.append("defs").attr("id","topdefs-"+at._uid),at._topclips=at._topdefs.append("g").classed("clips",!0),at._bgLayer=at._paper.append("g").classed("bglayer",!0),at._draggers=at._paper.append("g").classed("draglayer",!0);var Xt=at._paper.append("g").classed("layer-below",!0);at._imageLowerLayer=Xt.append("g").classed("imagelayer",!0),at._shapeLowerLayer=Xt.append("g").classed("shapelayer",!0),at._cartesianlayer=at._paper.append("g").classed("cartesianlayer",!0),at._polarlayer=at._paper.append("g").classed("polarlayer",!0),at._smithlayer=at._paper.append("g").classed("smithlayer",!0),at._ternarylayer=at._paper.append("g").classed("ternarylayer",!0),at._geolayer=at._paper.append("g").classed("geolayer",!0),at._funnelarealayer=at._paper.append("g").classed("funnelarealayer",!0),at._pielayer=at._paper.append("g").classed("pielayer",!0),at._iciclelayer=at._paper.append("g").classed("iciclelayer",!0),at._treemaplayer=at._paper.append("g").classed("treemaplayer",!0),at._sunburstlayer=at._paper.append("g").classed("sunburstlayer",!0),at._indicatorlayer=at._toppaper.append("g").classed("indicatorlayer",!0),at._glimages=at._paper.append("g").classed("glimages",!0);var tn=at._toppaper.append("g").classed("layer-above",!0);at._imageUpperLayer=tn.append("g").classed("imagelayer",!0),at._shapeUpperLayer=tn.append("g").classed("shapelayer",!0),at._selectionLayer=at._toppaper.append("g").classed("selectionlayer",!0),at._infolayer=at._toppaper.append("g").classed("infolayer",!0),at._menulayer=at._toppaper.append("g").classed("menulayer",!0),at._zoomlayer=at._toppaper.append("g").classed("zoomlayer",!0),at._hoverlayer=at._hoverpaper.append("g").classed("hoverlayer",!0),at._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ct.emit("plotly_framework")}(ve),je._shouldCreateBgLayer&&delete je._shouldCreateBgLayer),i.initGradients(ve),i.initPatterns(ve),qe&&s.saveShowSpikeInitial(ve);var Ne=!ve.calcdata||ve.calcdata.length!==(ve._fullData||[]).length;Ne&&p.doCalcdata(ve);for(var Be=0;Be<ve.calcdata.length;Be++)ve.calcdata[Be][0].trace=ve._fullData[Be];ve._context.responsive?ve._responsiveChartHandler||(ve._responsiveChartHandler=function(){y.isHidden(ve)||p.resize(ve)},window.addEventListener("resize",ve._responsiveChartHandler)):y.clearResponsive(ve);var We=y.extendFlat({},je._size),Ye=0;function lt(){if(p.clearAutoMarginIds(ve),u.drawMarginPushers(ve),s.allowAutoMargin(ve),je._has("pie"))for(var Ct=ve._fullData,ct=0;ct<Ct.length;ct++){var at=Ct[ct];"pie"===at.type&&at.automargin&&p.allowAutoMargin(ve,"pie."+at.uid+".automargin")}return p.doAutoMargin(ve),p.previousPromises(ve)}function mt(){ve._transitioning||(u.doAutoRangeAndConstraints(ve),qe&&s.saveRangeInitial(ve),a.getComponentMethod("rangeslider","calcAutorange")(ve))}var Tt=[p.previousPromises,function(){if(Fe)return ne.addFrames(ve,Fe)},function Ct(){for(var ct=je._basePlotModules,at=0;at<ct.length;at++)ct[at].drawFramework&&ct[at].drawFramework(ve);!je._glcanvas&&je._has("gl")&&(je._glcanvas=je._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(hn){return hn.key}),je._glcanvas.enter().append("canvas").attr("class",function(hn){return"gl-canvas gl-canvas-"+hn.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var St=ve._context.plotGlPixelRatio;if(je._glcanvas){je._glcanvas.attr("width",je.width*St).attr("height",je.height*St).style("width",je.width+"px").style("height",je.height+"px");var Xt=je._glcanvas.data()[0].regl;if(Xt&&(Math.floor(je.width*St)!==Xt._gl.drawingBufferWidth||Math.floor(je.height*St)!==Xt._gl.drawingBufferHeight)){var tn="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ye)return y.log(tn+" Clearing graph and plotting again."),p.cleanPlot([],{},ve._fullData,je),p.supplyDefaults(ve),je=ve._fullLayout,p.doCalcdata(ve),Ye++,Ct();y.error(tn)}}return"h"===je.modebar.orientation?je._modebardiv.style("height",null).style("width","100%"):je._modebardiv.style("width",null).style("height",je.height+"px"),p.previousPromises(ve)},lt,function(){if(p.didMarginChange(We,je._size))return y.syncOrAsync([lt,u.layoutStyles],ve)}];rt&&Tt.push(function(){if(Ne)return y.syncOrAsync([a.getComponentMethod("shapes","calcAutorange"),a.getComponentMethod("annotations","calcAutorange"),mt],ve);mt()}),Tt.push(u.layoutStyles),rt&&Tt.push(function(){return s.draw(ve,qe?"":"redraw")},function(Ct){Ct._fullLayout._insideTickLabelsAutorange&&ae(Ct,Ct._fullLayout._insideTickLabelsAutorange).then(function(){Ct._fullLayout._insideTickLabelsAutorange=void 0})}),Tt.push(u.drawData,u.finalDraw,c,p.addLinks,p.rehover,p.redrag,p.reselect,p.doAutoMargin,function(Ct){Ct._fullLayout._insideTickLabelsAutorange&&qe&&s.saveRangeInitial(Ct,!0)},p.previousPromises);var It=y.syncOrAsync(Tt,ve);return It&&It.then||(It=Promise.resolve()),It.then(function(){return M(ve),ve})},ne.purge=function(ve){var Te=(ve=y.getGraphDiv(ve))._fullLayout||{};return p.cleanPlot([],{},ve._fullData||[],Te),p.purge(ve),r.purge(ve),Te._container&&Te._container.remove(),delete ve._context,ve},ne.react=function(ve,Te,Ie,De){var Fe,Ue;ve=y.getGraphDiv(ve),x.clearPromiseQueue(ve);var ye,ke,Ve,Je,nt,Ke,qe=ve._fullData,je=ve._fullLayout;if(y.isPlotDiv(ve)&&qe&&je){if(y.isPlainObject(Te)){var rt=Te;Te=rt.data,Ie=rt.layout,De=rt.config,Fe=rt.frames}var Ne=!1;if(De){var Be=y.extendDeep({},ve._context);ve._context=void 0,R(ve,De),Ne=function ye(ke,Ve){var Je;for(Je in ke)if("_"!==Je.charAt(0)){var nt=ke[Je],Ke=Ve[Je];if(nt!==Ke)if(y.isPlainObject(nt)&&y.isPlainObject(Ke)){if(ye(nt,Ke))return!0}else{if(!Array.isArray(nt)||!Array.isArray(Ke)||nt.length!==Ke.length)return!0;for(var vt=0;vt<nt.length;vt++)if(nt[vt]!==Ke[vt]&&(!y.isPlainObject(nt[vt])||!y.isPlainObject(Ke[vt])||ye(nt[vt],Ke[vt])))return!0}}}(Be,ve._context)}ve.data=Te||[],x.cleanData(ve.data),ve.layout=Ie||{},x.cleanLayout(ve.layout),function(ye,ke,Ve,Je){var nt,Ke,vt,gt,Ot,Vt,ft,bt,Wt,Pt,Bt=Je._preGUI,Pe=[],et={},dt={};for(nt in Bt){if(Ot=be(nt,de)){if(Wt=Ot.head,Pt=Ot.tail,(gt=(vt=e(Je,Ke=Ot.attr||Wt+".uirevision").get())&&he(Ke,ke))&&gt===vt){if(null===(Vt=Bt[nt])&&(Vt=void 0),Ee(bt=(ft=e(ke,nt)).get(),Vt)){void 0===bt&&"autorange"===Pt&&Pe.push(Wt),ft.set(G(e(Je,nt).get()));continue}if("autorange"===Pt||"range["===Pt.substr(0,6)){var Yt=Bt[Wt+".autorange"];if(Yt||null===Yt&&null===Bt[Wt+".range[0]"]&&null===Bt[Wt+".range[1]"]){if(!(Wt in et)){var nn=e(ke,Wt).get();et[Wt]=nn&&(nn.autorange||!1!==nn.autorange&&(!nn.range||2!==nn.range.length))}if(et[Wt]){ft.set(G(e(Je,nt).get()));continue}}}}}else y.warn("unrecognized GUI edit: "+nt);delete Bt[nt],Ot&&"range["===Ot.tail.substr(0,6)&&(dt[Ot.head]=1)}for(var Kt=0;Kt<Pe.length;Kt++){var Mn=Pe[Kt];if(dt[Mn]){var Un=e(ke,Mn).get();Un&&delete Un.autorange}}var Tn=Je._tracePreGUI;for(var un in Tn){var an,fn=Tn[un],pn=null;for(nt in fn){if(!pn){var Sn=_e(un,Ve);if(Sn<0){delete Tn[un];break}var Nn=Ce(un,ye,(an=Ve[Sn]._fullInput).index);if(Nn<0){delete Tn[un];break}pn=ye[Nn]}if(Ot=be(nt,fe)){if(Ot.attr?gt=(vt=e(Je,Ot.attr).get())&&he(Ot.attr,ke):(vt=an.uirevision,void 0===(gt=pn.uirevision)&&(gt=ke.uirevision)),gt&&gt===vt&&(null===(Vt=fn[nt])&&(Vt=void 0),Ee(bt=(ft=e(pn,nt)).get(),Vt))){ft.set(G(e(an,nt).get()));continue}}else y.warn("unrecognized GUI edit: "+nt+" in trace uid "+un);delete fn[nt]}}}(ve.data,ve.layout,qe,je),p.supplyDefaults(ve,{skipUpdateCalc:!0});var We=ve._fullData,Ye=ve._fullLayout,lt=void 0===Ye.datarevision,mt=Ye.transition,Tt=(ye=ve,ke=je,Ve=Ye,Je=lt,nt=mt,(Ke=T.layoutFlags()).arrays={},Ke.rangesAltered={},Ke.nChanges=0,Ke.nChangesAnim=0,Ae(ke,Ve,[],{getValObject:function vt(gt){return t.getLayoutValObject(Ve,gt)},flags:Ke,immutable:Je,transition:nt,gd:ye}),(Ke.plot||Ke.calc)&&(Ke.layoutReplot=!0),nt&&Ke.nChanges&&Ke.nChangesAnim&&(Ke.anim=Ke.nChanges===Ke.nChangesAnim?"all":"some"),Ke),Ct=function(ye,ke,Ve,Je,nt,Ke){var vt=ke.length===Ve.length;if(!nt&&!vt)return{fullReplot:!0,calc:!0};var gt,Ot,Vt=T.traceFlags();Vt.arrays={},Vt.nChanges=0,Vt.nChangesAnim=0;var ft={getValObject:function(Wt){var Pt=t.getTraceValObject(Ot,Wt);return!Ot._module.animatable&&Pt.anim&&(Pt.anim=!1),Pt},flags:Vt,immutable:Je,transition:nt,newDataRevision:Ke,gd:ye},bt={};for(gt=0;gt<ke.length;gt++)if(Ve[gt]){if(p.hasMakesDataTransform(Ot=Ve[gt]._fullInput)&&(Ot=Ve[gt]),bt[Ot.uid])continue;bt[Ot.uid]=1,Ae(ke[gt]._fullInput,Ot,[],ft)}return(Vt.calc||Vt.plot)&&(Vt.fullReplot=!0),nt&&Vt.nChanges&&Vt.nChangesAnim&&(Vt.anim=Vt.nChanges===Vt.nChangesAnim&&vt?"all":"some"),Vt}(ve,qe,We,lt,mt,Tt.newDataRevision);if(Q(ve)&&(Tt.layoutReplot=!0),Ct.calc||Tt.calc){ve.calcdata=void 0;for(var ct=Object.getOwnPropertyNames(Ye),at=0;at<ct.length;at++){var St=ct[at],Xt=St.substring(0,5);if("xaxis"===Xt||"yaxis"===Xt){var tn=Ye[St]._emptyCategories;tn&&tn()}}}else p.supplyDefaultsUpdateCalc(ve.calcdata,We);var hn=[];if(Fe&&(ve._transitionData={},p.createTransitionData(ve),hn.push(function(){return ne.addFrames(ve,Fe)})),Ye.transition&&!Ne&&(Ct.anim||Tt.anim))Tt.ticks&&hn.push(u.doTicksRelayout),p.doCalcdata(ve),u.doAutoRangeAndConstraints(ve),hn.push(function(){return p.transitionFromReact(ve,Ct,Tt,je)});else if(Ct.fullReplot||Tt.layoutReplot||Ne)ve._fullLayout._skipDefaults=!0,hn.push(ne._doPlot);else{for(var cn in Tt.arrays){var yn=Tt.arrays[cn];if(yn.length){var en=a.getComponentMethod(cn,"drawOne");if(en!==y.noop)for(var Xe=0;Xe<yn.length;Xe++)en(ve,yn[Xe]);else{var tt=a.getComponentMethod(cn,"draw");if(tt===y.noop)throw new Error("cannot draw components: "+cn);tt(ve)}}}hn.push(p.previousPromises),Ct.style&&hn.push(u.doTraceStyle),(Ct.colorbars||Tt.colorbars)&&hn.push(u.doColorBars),Tt.legend&&hn.push(u.doLegend),Tt.layoutstyle&&hn.push(u.layoutStyles),Tt.axrange&&V(hn),Tt.ticks&&hn.push(u.doTicksRelayout),Tt.modebar&&hn.push(u.doModeBar),Tt.camera&&hn.push(u.doCamera),hn.push(M)}hn.push(p.rehover,p.redrag,p.reselect),(Ue=y.syncOrAsync(hn,ve))&&Ue.then||(Ue=Promise.resolve(ve))}else Ue=ne.newPlot(ve,Te,Ie,De);return Ue.then(function(){return ve.emit("plotly_react",{data:Te,layout:Ie}),ve})},ne.redraw=function(ve){if(ve=y.getGraphDiv(ve),!y.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);return x.cleanData(ve.data),x.cleanLayout(ve.layout),ve.calcdata=void 0,ne._doPlot(ve).then(function(){return ve.emit("plotly_redraw"),ve})},ne.relayout=ae,ne.restyle=Y,ne.setPlotConfig=function(ve){return y.extendFlat(d,ve)},ne.update=oe,ne._guiRelayout=le(ae),ne._guiRestyle=le(Y),ne._guiUpdate=le(oe),ne._storeDirectGUIEdit=function(ve,Te,Ie){for(var De in Ie)te(De,e(ve,De).get(),Ie[De],Te)}},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(v,re,ne){"use strict";var g={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},m={};(function b(y,e){for(var r in y){var n=y[r];n.valType?e[r]=n.dflt:(e[r]||(e[r]={}),b(n,e[r]))}})(g,m),re.exports={configAttributes:g,dfltConfig:m}},{}],554:[function(v,re,ne){"use strict";var g=v("../registry"),m=v("../lib"),b=v("../plots/attributes"),y=v("../plots/layout_attributes"),e=v("../plots/frame_attributes"),r=v("../plots/animation_attributes"),n=v("./plot_config").configAttributes,a=v("./edit_types"),t=m.extendDeepAll,p=m.isPlainObject,s=m.isArrayOrTypedArray,i=m.nestedProperty,f=m.valObjectMeta,c=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function l(_,w,M){if(!_)return!1;if(_._isLinkedToArray)if(h(w[M]))M++;else if(M<w.length)return!1;for(;M<w.length;M++){var I=_[w[M]];if(!p(I)||(_=I,M===w.length-1))break;if(_._isLinkedToArray){if(!h(w[++M]))return!1}else if("info_array"===_.valType){var S=w[++M];if(!h(S))return!1;var R=_.items;if(Array.isArray(R)){if(S>=R.length)return!1;if(2===_.dimensions){if(M++,w.length===M)return _;var O=w[M];if(!h(O))return!1;_=R[S][O]}else _=R[S]}else _=R}}return _}function h(_){return _===Math.round(_)&&_>=0}function d(){var _,w,M={};for(_ in t(M,y),g.subplotsRegistry)if((w=g.subplotsRegistry[_]).layoutAttributes)if(Array.isArray(w.attr))for(var I=0;I<w.attr.length;I++)u(M,w,w.attr[I]);else u(M,w,"subplot"===w.attr?w.name:w.attr);for(_ in g.componentsRegistry){var S=(w=g.componentsRegistry[_]).schema;if(S&&(S.subplots||S.layout)){var R=S.subplots;if(R&&R.xaxis&&!R.yaxis)for(var O in R.xaxis)delete M.yaxis[O]}else"colorscale"===w.name?t(M,w.layoutAttributes):w.layoutAttributes&&T(M,w.layoutAttributes,w.name)}return{layoutAttributes:x(M)}}function o(){var _={frames:t({},e)};return x(_),_.frames}function x(_){return ne.crawl(_,function(M,I,S){ne.isValObject(M)?!0!==M.arrayOk&&"data_array"!==M.valType||(S[I+"src"]={valType:"string",editType:"none"}):p(M)&&(M.role="object")}),ne.crawl(_,function(M,I,S){if(M){var R=M._isLinkedToArray;R&&(delete M._isLinkedToArray,S[I]={items:{}},S[I].items[R]=M,S[I].role="object")}}),function(w){!function M(I){for(var S in I)if(p(I[S]))M(I[S]);else if(Array.isArray(I[S]))for(var R=0;R<I[S].length;R++)M(I[S][R]);else I[S]instanceof RegExp&&(I[S]=I[S].toString())}(w)}(_),_}function u(_,w,M){var I=i(_,M),S=t({},w.layoutAttributes);S._isSubplotObj=!0,I.set(S)}function T(_,w,M){var I=i(_,M);I.set(t(I.get()||{},w))}ne.IS_SUBPLOT_OBJ="_isSubplotObj",ne.IS_LINKED_TO_ARRAY="_isLinkedToArray",ne.DEPRECATED="_deprecated",ne.UNDERSCORE_ATTRS=c,ne.get=function(){var _={};g.allTypes.forEach(function(M){_[M]=function(I){var S,R;R=(S=g.modules[I]._module).basePlotModule;var O={type:null},C=t({},b),D=t({},S.attributes);ne.crawl(D,function(Y,G,J,te,X){i(C,X).set(void 0),void 0===Y&&i(D,X).set(void 0)}),t(O,C),g.traceIs(I,"noOpacity")&&delete O.opacity,g.traceIs(I,"showLegend")||(delete O.showlegend,delete O.legendgroup),g.traceIs(I,"noHover")&&(delete O.hoverinfo,delete O.hoverlabel),S.selectPoints||delete O.selectedpoints,t(O,D),R.attributes&&t(O,R.attributes),O.type=I;var B={meta:S.meta||{},categories:S.categories||{},animatable:Boolean(S.animatable),type:I,attributes:x(O)};if(S.layoutAttributes){var z={};t(z,S.layoutAttributes),B.layoutAttributes=x(z)}return S.animatable||ne.crawl(B,function(Y){ne.isValObject(Y)&&"anim"in Y&&delete Y.anim}),B}(M)});var w={};return Object.keys(g.transformsRegistry).forEach(function(M){var I,R;w[M]=(R=t({},g.transformsRegistry[I=M].attributes),Object.keys(g.componentsRegistry).forEach(function(O){var C=g.componentsRegistry[O];C.schema&&C.schema.transforms&&C.schema.transforms[I]&&Object.keys(C.schema.transforms[I]).forEach(function(D){T(R,C.schema.transforms[I][D],D)})}),{attributes:x(R)})}),{defs:{valObjects:f,metaKeys:c.concat(["description","role","editType","impliedEdits"]),editType:{traces:a.traces,layout:a.layout},impliedEdits:{}},traces:_,layout:d(),transforms:w,frames:o(),animation:x(r),config:x(n)}},ne.crawl=function(_,w,M,I){var S=M||0;I=I||"",Object.keys(_).forEach(function(R){var O=_[R];if(-1===c.indexOf(R)){var C=(I?I+".":"")+R;w(O,R,_,S,C),ne.isValObject(O)||p(O)&&"impliedEdits"!==R&&ne.crawl(O,w,S+1,C)}})},ne.isValObject=function(_){return _&&void 0!==_.valType},ne.findArrayAttributes=function(_){var w,M,I=[],S=[],R=[];function O(Y,G,J,te){S=S.slice(0,te).concat([G]),R=R.slice(0,te).concat([Y&&Y._isLinkedToArray]),Y&&("data_array"===Y.valType||!0===Y.arrayOk)&&("colorbar"!==S[te-1]||"ticktext"!==G&&"tickvals"!==G)&&function X(K,ae,U){var V=K[S[ae]],q=U+S[ae];if(ae===S.length-1)s(V)&&I.push(M+q);else if(R[ae]){if(Array.isArray(V))for(var ie=0;ie<V.length;ie++)p(V[ie])&&X(V[ie],ae+1,q+"["+ie+"].")}else p(V)&&X(V,ae+1,q+".")}(w,0,"")}w=_,M="",ne.crawl(b,O),_._module&&_._module.attributes&&ne.crawl(_._module.attributes,O);var C=_.transforms;if(C)for(var D=0;D<C.length;D++){var B=C[D],z=B._module;z&&(M="transforms["+D+"].",w=B,ne.crawl(z.attributes,O))}return I},ne.getTraceValObject=function(_,w){var M,I,S=w[0],R=1;if("transforms"===S){if(1===w.length)return b.transforms;var O=_.transforms;if(!Array.isArray(O)||!O.length)return!1;var C=w[1];if(!h(C)||C>=O.length)return!1;I=(M=(g.transformsRegistry[O[C].type]||{}).attributes)&&M[w[2]],R=3}else{var D=_._module;if(D||(D=(g.modules[_.type||b.type.dflt]||{})._module),!D)return!1;if(!(I=(M=D.attributes)&&M[S])){var B=D.basePlotModule;B&&B.attributes&&(I=B.attributes[S])}I||(I=b[S])}return l(I,w,R)},ne.getLayoutValObject=function(_,w){return l(function(M,I){var S,R,O,C,D=M._basePlotModules;if(D){var B;for(S=0;S<D.length;S++){if((O=D[S]).attrRegex&&O.attrRegex.test(I)){if(O.layoutAttrOverrides)return O.layoutAttrOverrides;!B&&O.layoutAttributes&&(B=O.layoutAttributes)}var z=O.baseLayoutAttrOverrides;if(z&&I in z)return z[I]}if(B)return B}var Y=M._modules;if(Y)for(S=0;S<Y.length;S++)if((C=Y[S].layoutAttributes)&&I in C)return C[I];for(R in g.componentsRegistry){if("colorscale"===(O=g.componentsRegistry[R]).name&&0===I.indexOf("coloraxis"))return O.layoutAttributes[I];if(!O.schema&&I===O.name)return O.layoutAttributes}return I in y&&y[I]}(_,w[0]),w,1)}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plots/attributes"),b={name:{valType:"string",editType:"none"}};function y(r){return r&&"string"==typeof r}function e(r){return"s"!==r.charAt(r.length-1)&&g.warn("bad argument to arrayDefaultKey: "+r),r.substr(0,r.length-1)+"defaults"}b.templateitemname={valType:"string",editType:"calc"},ne.templatedArray=function(r,n){return n._isLinkedToArray=r,n.name=b.name,n.templateitemname=b.templateitemname,n},ne.traceTemplater=function(r){var n,a,t={};for(n in r)a=r[n],Array.isArray(a)&&a.length&&(t[n]=0);return{newTrace:function(p){var s={type:n=g.coerce(p,{},m,"type"),_template:null};if(n in t){var i=t[n]%(a=r[n]).length;t[n]++,s._template=a[i]}return s}}},ne.newContainer=function(r,n,a){var t=r._template,p=t&&(t[n]||a&&t[a]);return g.isPlainObject(p)||(p=null),r[n]={_template:p}},ne.arrayTemplater=function(r,n,a){var t=r._template,p=t&&t[e(n)],s=t&&t[n];Array.isArray(s)&&s.length||(s=[]);var i={};return{newItem:function(f){var c={name:f.name,_input:f},l=c.templateitemname=f.templateitemname;if(!y(l))return c._template=p,c;for(var h=0;h<s.length;h++){var d=s[h];if(d.name===l)return i[l]=1,c._template=d,c}return c[a]=f[a]||!1,c._template=!1,c},defaultItems:function(){for(var f=[],c=0;c<s.length;c++){var l=s[c],h=l.name;if(y(h)&&!i[h]){var d={_template:l,name:h,_input:{_templateitemname:h}};d.templateitemname=l.templateitemname,f.push(d),i[h]=1}}return f}}},ne.arrayDefaultKey=e,ne.arrayEditor=function(r,n,a){var t=(g.nestedProperty(r,n).get()||[]).length,p=a._index,s=p>=t&&(a._input||{})._templateitemname;s&&(p=t);var i,f=n+"["+p+"]";function c(){i={},s&&(i[f]={},i[f].templateitemname=s)}function l(d,o){s?g.nestedProperty(i[f],d).set(o):i[f+"."+d]=o}function h(){var d=i;return c(),d}return c(),{modifyBase:function(d,o){i[d]=o},modifyItem:l,getUpdateObj:h,applyUpdate:function(d,o){d&&l(d,o);var x=h();for(var u in x)g.nestedProperty(r,u).set(x[u])}}}},{"../lib":515,"../plots/attributes":562}],556:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../registry"),b=v("../plots/plots"),y=v("../lib"),e=v("../lib/clear_gl_canvases"),r=v("../components/color"),n=v("../components/drawing"),a=v("../components/titles"),t=v("../components/modebar"),p=v("../plots/cartesian/axes"),s=v("../constants/alignment"),i=v("../plots/cartesian/constraints"),f=i.enforce,c=i.clean,l=v("../plots/cartesian/autorange").doAutoRange;function h(w,M,I){for(var S=0;S<I.length;S++){var R=I[S][0],O=I[S][1];if(!(R[0]>=w[1]||R[1]<=w[0])&&O[0]<M[1]&&O[1]>M[0])return!0}return!1}function d(w){var M,I,S,R,O,C,D=w._fullLayout,B=D._size,z=B.p,Y=p.list(w,"",!0);if(D._paperdiv.style({width:w._context.responsive&&D.autosize&&!w._context._hasZeroWidth&&!w.layout.width?"100%":D.width+"px",height:w._context.responsive&&D.autosize&&!w._context._hasZeroHeight&&!w.layout.height?"100%":D.height+"px"}).selectAll(".main-svg").call(n.setSize,D.width,D.height),w._context.setBackground(w,D.paper_bgcolor),ne.drawMainTitle(w),t.manage(w),!D._has("cartesian"))return b.previousPromises(w);function G(Ye,lt,mt){var Tt=Ye._lw/2;return"x"===Ye._id.charAt(0)?lt?"top"===mt?lt._offset-z-Tt:lt._offset+lt._length+z+Tt:B.t+B.h*(1-(Ye.position||0))+Tt%1:lt?"right"===mt?lt._offset+lt._length+z+Tt:lt._offset-z-Tt:B.l+B.w*(Ye.position||0)+Tt%1}for(M=0;M<Y.length;M++){var J=(R=Y[M])._anchorAxis;R._linepositions={},R._lw=n.crispRound(w,R.linewidth,1),R._mainLinePosition=G(R,J,R.side),R._mainMirrorPosition=R.mirror&&J?G(R,J,s.OPPOSITE_SIDE[R.side]):null}var te=[],X=[],K=[],ae=1===r.opacity(D.paper_bgcolor)&&1===r.opacity(D.plot_bgcolor)&&D.paper_bgcolor===D.plot_bgcolor;for(I in D._plots)if((S=D._plots[I]).mainplot)S.bg&&S.bg.remove(),S.bg=void 0;else{var U=S.xaxis.domain,V=S.yaxis.domain,q=S.plotgroup;if(h(U,V,K)){var ie=q.node(),H=S.bg=y.ensureSingle(q,"rect","bg");ie.insertBefore(H.node(),ie.childNodes[0]),X.push(I)}else q.select("rect.bg").remove(),K.push([U,V]),ae||(te.push(I),X.push(I))}var ee,Q,oe,le,de,fe,be,he,_e,Ce,Ee,Ae,ze,ve=D._bgLayer.selectAll(".bg").data(te);for(ve.enter().append("rect").classed("bg",!0),ve.exit().remove(),ve.each(function(Ye){D._plots[Ye].bg=g.select(this)}),M=0;M<X.length;M++)O=(S=D._plots[X[M]]).xaxis,C=S.yaxis,S.bg&&void 0!==O._offset&&void 0!==C._offset&&S.bg.call(n.setRect,O._offset-z,C._offset-z,O._length+2*z,C._length+2*z).call(r.fill,D.plot_bgcolor).style("stroke-width",0);if(!D._hasOnlyLargeSploms)for(I in D._plots){O=(S=D._plots[I]).xaxis,C=S.yaxis;var Te,Ie,De=S.clipId="clip"+D._uid+I+"plot",Fe=y.ensureSingleById(D._clips,"clipPath",De,function(Ye){Ye.classed("plotclip",!0).append("rect")});S.clipRect=Fe.select("rect").attr({width:O._length,height:C._length}),n.setTranslate(S.plot,O._offset,C._offset),S._hasClipOnAxisFalse?(Te=null,Ie=De):(Te=De,Ie=null),n.setClipUrl(S.plot,Te,w),S.layerClipId=Ie}function Ue(Ye){return"M"+ee+","+Ye+"H"+Q}function qe(Ye){return"M"+O._offset+","+Ye+"h"+O._length}function je(Ye){return"M"+Ye+","+he+"V"+be}function rt(Ye){return"M"+Ye+","+C._offset+"v"+C._length}function Ne(Ye,lt,mt){if(!Ye.showline||I!==Ye._mainSubplot)return"";if(!Ye._anchorAxis)return mt(Ye._mainLinePosition);var Tt=lt(Ye._mainLinePosition);return Ye.mirror&&(Tt+=lt(Ye._mainMirrorPosition)),Tt}for(I in D._plots){C=(S=D._plots[I]).yaxis;var Be="M0,0";o(O=S.xaxis,I)&&(de=u(O,"left",C,Y),ee=O._offset-(de?z+de:0),fe=u(O,"right",C,Y),Q=O._offset+O._length+(fe?z+fe:0),oe=G(O,C,"bottom"),le=G(O,C,"top"),!(ze=!O._anchorAxis||I!==O._mainSubplot)||"allticks"!==O.mirror&&"all"!==O.mirror||(O._linepositions[I]=[oe,le]),Be=Ne(O,Ue,qe),ze&&O.showline&&("all"===O.mirror||"allticks"===O.mirror)&&(Be+=Ue(oe)+Ue(le)),S.xlines.style("stroke-width",O._lw+"px").call(r.stroke,O.showline?O.linecolor:"rgba(0,0,0,0)")),S.xlines.attr("d",Be);var We="M0,0";o(C,I)&&(Ee=u(C,"bottom",O,Y),be=C._offset+C._length+(Ee?z:0),Ae=u(C,"top",O,Y),he=C._offset-(Ae?z:0),_e=G(C,O,"left"),Ce=G(C,O,"right"),!(ze=!C._anchorAxis||I!==C._mainSubplot)||"allticks"!==C.mirror&&"all"!==C.mirror||(C._linepositions[I]=[_e,Ce]),We=Ne(C,je,rt),ze&&C.showline&&("all"===C.mirror||"allticks"===C.mirror)&&(We+=je(_e)+je(Ce)),S.ylines.style("stroke-width",C._lw+"px").call(r.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),S.ylines.attr("d",We)}return p.makeClipPaths(w),b.previousPromises(w)}function o(w,M){return(w.ticks||w.showline)&&(M===w._mainSubplot||"all"===w.mirror||"allticks"===w.mirror)}function x(w,M,I){if(!I.showline||!I._lw)return!1;if("all"===I.mirror||"allticks"===I.mirror)return!0;var S=I._anchorAxis;if(!S)return!1;var R=s.FROM_BL[M];return I.side===M?S.domain[R]===w.domain[R]:I.mirror&&S.domain[1-R]===w.domain[1-R]}function u(w,M,I,S){if(x(w,M,I))return I._lw;for(var R=0;R<S.length;R++){var O=S[R];if(O._mainAxis===I._mainAxis&&x(w,M,O))return O._lw}return 0}function T(w,M){var I=w.title,S=w._size,R=0;return"paper"===("start"===M?R=I.pad.l:"end"===M&&(R=-I.pad.r),I.xref)?S.l+S.w*I.x+R:w.width*I.x+R}function _(w,M){var I=w.title,S=w._size,R=0;return"0em"!==M&&M?M===s.CAP_SHIFT+"em"&&(R=I.pad.t):R=-I.pad.b,"auto"===I.y?S.t/2:"paper"===I.yref?S.t+S.h-S.h*I.y+R:w.height-w.height*I.y+R}ne.layoutStyles=function(w){return y.syncOrAsync([b.doAutoMargin,d],w)},ne.drawMainTitle=function(w){var O,C,M=w._fullLayout,I=(C="middle",y.isRightAnchor(O=M.title)?C="end":y.isLeftAnchor(O)&&(C="start"),C),S=function(R){var O=R.title,C="0em";return y.isTopAnchor(O)?C=s.CAP_SHIFT+"em":y.isMiddleAnchor(O)&&(C=s.MID_SHIFT+"em"),C}(M);a.draw(w,"gtitle",{propContainer:M,propName:"title.text",placeholder:M._dfltTitle.plot,attributes:{x:T(M,I),y:_(M,S),"text-anchor":I,dy:S}})},ne.doTraceStyle=function(w){var M,I=w.calcdata,S=[];for(M=0;M<I.length;M++){var R=I[M],O=R[0]||{},C=O.trace||{},D=C._module||{},B=D.arraysToCalcdata;B&&B(R,C);var z=D.editStyle;z&&S.push({fn:z,cd0:O})}if(S.length){for(M=0;M<S.length;M++){var Y=S[M];Y.fn(w,Y.cd0)}e(w),ne.redrawReglTraces(w)}return b.style(w),m.getComponentMethod("legend","draw")(w),b.previousPromises(w)},ne.doColorBars=function(w){return m.getComponentMethod("colorbar","draw")(w),b.previousPromises(w)},ne.layoutReplot=function(w){var M=w.layout;return w.layout=void 0,m.call("_doPlot",w,"",M)},ne.doLegend=function(w){return m.getComponentMethod("legend","draw")(w),b.previousPromises(w)},ne.doTicksRelayout=function(w){return p.draw(w,"redraw"),w._fullLayout._hasOnlyLargeSploms&&(m.subplotsRegistry.splom.updateGrid(w),e(w),ne.redrawReglTraces(w)),ne.drawMainTitle(w),b.previousPromises(w)},ne.doModeBar=function(w){var M=w._fullLayout;t.manage(w);for(var I=0;I<M._basePlotModules.length;I++){var S=M._basePlotModules[I].updateFx;S&&S(w)}return b.previousPromises(w)},ne.doCamera=function(w){for(var M=w._fullLayout,I=M._subplots.gl3d,S=0;S<I.length;S++){var R=M[I[S]];R._scene.setViewport(R)}},ne.drawData=function(w){var M=w._fullLayout;e(w);for(var I=M._basePlotModules,S=0;S<I.length;S++)I[S].plot(w);return ne.redrawReglTraces(w),b.style(w),m.getComponentMethod("selections","draw")(w),m.getComponentMethod("shapes","draw")(w),m.getComponentMethod("annotations","draw")(w),m.getComponentMethod("images","draw")(w),M._replotting=!1,b.previousPromises(w)},ne.redrawReglTraces=function(w){var M=w._fullLayout;if(M._has("regl")){var I,S,R=w._fullData,O=[],C=[];for(M._hasOnlyLargeSploms&&M._splomGrid.draw(),I=0;I<R.length;I++){var D=R[I];!0===D.visible&&0!==D._length&&("splom"===D.type?M._splomScenes[D.uid].draw():"scattergl"===D.type?y.pushUnique(O,D.xaxis+D.yaxis):"scatterpolargl"===D.type&&y.pushUnique(C,D.subplot))}for(I=0;I<O.length;I++)(S=M._plots[O[I]])._scene&&S._scene.draw();for(I=0;I<C.length;I++)(S=M[C[I]]._subplot)._scene&&S._scene.draw()}},ne.doAutoRangeAndConstraints=function(w){for(var M,I=p.list(w,"",!0),S={},R=0;R<I.length;R++)if(!S[(M=I[R])._id]){S[M._id]=1,c(w,M),l(w,M);var O=M._matchGroup;if(O)for(var C in O){var D=p.getFromId(w,C);l(w,D,M.range),S[C]=1}}f(w)},ne.finalDraw=function(w){m.getComponentMethod("rangeslider","draw")(w),m.getComponentMethod("rangeselector","draw")(w)},ne.drawMarginPushers=function(w){m.getComponentMethod("legend","draw")(w),m.getComponentMethod("rangeselector","draw")(w),m.getComponentMethod("sliders","draw")(w),m.getComponentMethod("updatemenus","draw")(w),m.getComponentMethod("colorbar","draw")(w)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(v,re,ne){"use strict";var g=v("../lib"),m=g.isPlainObject,b=v("./plot_schema"),y=v("../plots/plots"),e=v("../plots/attributes"),r=v("./plot_template"),n=v("./plot_config").dfltConfig;function a(h,d){h=g.extendDeep({},h);var o,x,u=Object.keys(h).sort();function T(S,R,O){if(m(R)&&m(S))a(S,R);else if(Array.isArray(R)&&Array.isArray(S)){var C=r.arrayTemplater({_template:h},O);for(x=0;x<R.length;x++){var D=R[x],B=C.newItem(D)._template;B&&a(B,D)}var z=C.defaultItems();for(x=0;x<z.length;x++)R.push(z[x]._template);for(x=0;x<R.length;x++)delete R[x].templateitemname}}for(o=0;o<u.length;o++){var _=u[o],w=h[_];if(_ in d?T(w,d[_],_):d[_]=w,t(_)===_)for(var M in d){var I=t(M);M===I||I!==_||M in h||T(w,d[M],_)}}}function t(h){return h.replace(/[0-9]+$/,"")}function p(h,d,o,x,u){var T=u&&o(u);for(var _ in h){var w=h[_],M=f(h,_,x),I=f(h,_,u),S=o(I);if(!S){var R=t(_);R!==_&&(S=o(I=f(h,R,u)))}if(!(T&&T===S||!S||S._noTemplating||"data_array"===S.valType||S.arrayOk&&Array.isArray(w)))if(!S.valType&&m(w))p(w,d,o,M,I);else if(S._isLinkedToArray&&Array.isArray(w))for(var O=!1,C=0,D={},B=0;B<w.length;B++){var z=w[B];if(m(z)){var Y=z.name;if(Y)D[Y]||(p(z,d,o,f(w,C,M),f(w,C,I)),C++,D[Y]=1);else if(!O){var G=f(h,r.arrayDefaultKey(_),x),J=f(w,C,M);p(z,d,o,J,f(w,C,I));var te=g.nestedProperty(d,J);g.nestedProperty(d,G).set(te.get()),te.set(null),O=!0}}}else g.nestedProperty(d,M).set(w)}}function s(h,d){return b.getLayoutValObject(h,g.nestedProperty({},d).parts)}function i(h,d){return b.getTraceValObject(h,g.nestedProperty({},d).parts)}function f(h,d,o){return o?Array.isArray(h)?o+"["+d+"]":o+"."+d:d}function c(h){for(var d=0;d<h.length;d++)if(m(h[d]))return!0}function l(h){var d;switch(h.code){case"data":d="The template has no key data.";break;case"layout":d="The template has no key layout.";break;case"missing":d=h.path?"There are no templates for item "+h.path+" with name "+h.templateitemname:"There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":d=h.path?"The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?"Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":"The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":d="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type."}return h.msg=d,h}ne.makeTemplate=function(h){h=g.isPlainObject(h)?h:g.getGraphDiv(h),h=g.extendDeep({_context:n},{data:h.data,layout:h.layout}),y.supplyDefaults(h);var d=h.data||[],o=h.layout||{};o._basePlotModules=h._fullLayout._basePlotModules,o._modules=h._fullLayout._modules;var x={data:{},layout:{}};d.forEach(function(C){var D={};p(C,D,i.bind(null,C));var B=g.coerce(C,{},e,"type"),z=x.data[B];z||(z=x.data[B]=[]),z.push(D)}),p(o,x.layout,s.bind(null,o)),delete x.layout.template;var u=o.template;if(m(u)){var T,_,w,M,I,S,R=u.layout;m(R)&&a(R,x.layout);var O=u.data;if(m(O)){for(_ in x.data)if(w=O[_],Array.isArray(w)){for(S=(I=x.data[_]).length,M=w.length,T=0;T<S;T++)a(w[T%M],I[T]);for(T=S;T<M;T++)I.push(g.extendDeep({},w[T]))}for(_ in O)_ in x.data||(x.data[_]=g.extendDeep([],O[_]))}}return x},ne.validateTemplate=function(h,d){var o=g.extendDeep({},{_context:n,data:h.data,layout:h.layout}),x=o.layout||{};m(d)||(d=x.template||{});var u=d.layout,T=d.data,_=[];o.layout=x,o.layout.template=d,y.supplyDefaults(o);var w=o._fullLayout,M=o._fullData,I={};if(m(u)?(function z(Y,G){for(var J in Y)if("_"!==J.charAt(0)&&m(Y[J])){var te,X=t(J),K=[];for(te=0;te<G.length;te++)K.push(f(Y,J,G[te])),X!==J&&K.push(f(Y,X,G[te]));for(te=0;te<K.length;te++)I[K[te]]=1;z(Y[J],K)}}(w,["layout"]),function z(Y,G){for(var J in Y)if(-1===J.indexOf("defaults")&&m(Y[J])){var te=f(Y,J,G);I[te]?z(Y[J],te):_.push({code:"unused",path:te})}}(u,"layout")):_.push({code:"layout"}),m(T)){for(var S,R={},O=0;O<M.length;O++){var C=M[O];R[S=C.type]=(R[S]||0)+1,C._fullInput._template||_.push({code:"missing",index:C._fullInput.index,traceType:S})}for(S in T){var D=T[S].length,B=R[S]||0;D>B?_.push({code:"unused",traceType:S,templateCount:D,dataCount:B}):B>D&&_.push({code:"reused",traceType:S,templateCount:D,dataCount:B})}}else _.push({code:"data"});if(function z(Y,G){for(var J in Y)if("_"!==J.charAt(0)){var te=Y[J],X=f(Y,J,G);m(te)?(Array.isArray(Y)&&!1===te._template&&te.templateitemname&&_.push({code:"missing",path:X,templateitemname:te.templateitemname}),z(te,X)):Array.isArray(te)&&c(te)&&z(te,X)}}({data:M,layout:w},""),_.length)return _.map(l)}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("./plot_api"),b=v("../plots/plots"),y=v("../lib"),e=v("../snapshot/helpers"),r=v("../snapshot/tosvg"),n=v("../snapshot/svgtoimg"),a=v("../version").version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};re.exports=function(p,s){var i,f,c,l;function h(B){return!(B in s)||y.validate(s[B],t[B])}if(s=s||{},y.isPlainObject(p)?(i=p.data||[],f=p.layout||{},c=p.config||{},l={}):(p=y.getGraphDiv(p),i=y.extendDeep([],p.data),f=y.extendDeep({},p.layout),c=p._context,l=p._fullLayout||{}),!h("width")&&null!==s.width||!h("height")&&null!==s.height)throw new Error("Height and width should be pixel values.");if(!h("format"))throw new Error("Export format is not "+y.join2(t.format.values,", "," or ")+".");var d={};function o(B,z){return y.coerce(s,d,t,B,z)}var x=o("format"),u=o("width"),T=o("height"),_=o("scale"),w=o("setBackground"),M=o("imageDataOnly"),I=document.createElement("div");I.style.position="absolute",I.style.left="-5000px",document.body.appendChild(I);var S=y.extendFlat({},f);u?S.width=u:null===s.width&&g(l.width)&&(S.width=l.width),T?S.height=T:null===s.height&&g(l.height)&&(S.height=l.height);var R=y.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),O=e.getRedrawFunc(I);function C(){return new Promise(function(B){setTimeout(B,e.getDelay(I._fullLayout))})}function D(){return new Promise(function(B,z){var Y=r(I,x,_),G=I._fullLayout.width,J=I._fullLayout.height;function te(){m.purge(I),document.body.removeChild(I)}if("full-json"===x){var X=b.graphJson(I,!1,"keepdata","object",!0,!0);return X.version=a,X=JSON.stringify(X),te(),B(M?X:e.encodeJSON(X))}if(te(),"svg"===x)return B(M?Y:e.encodeSVG(Y));var K=document.createElement("canvas");K.id=y.randstr(),n({format:x,width:G,height:J,scale:_,canvas:K,svg:Y,promise:!0}).then(B).catch(z)})}return new Promise(function(B,z){m.newPlot(I,i,S,R).then(O).then(C).then(D).then(function(Y){var G;B((G=Y,M?G.replace(e.IMAGE_URL_PREFIX,""):G))}).catch(function(Y){z(Y)})})}},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plots/plots"),b=v("./plot_schema"),y=v("./plot_config").dfltConfig,e=g.isPlainObject,r=Array.isArray,n=g.isArrayOrTypedArray;function a(d,o,x,u,T,_){_=_||[];for(var w=Object.keys(d),M=0;M<w.length;M++){var I=w[M];if("transforms"!==I){var S=_.slice();S.push(I);var R=d[I],O=o[I],C=c(x,I),D=(C||{}).valType,B="info_array"===D,z="colorscale"===D,Y=(C||{}).items;if(f(x,I))if(e(R)&&e(O)&&"any"!==D)a(R,O,C,u,T,S);else if(B&&r(R)){R.length>O.length&&u.push(i("unused",T,S.concat(O.length)));var G,J,X,K,ae=O.length,U=Array.isArray(Y);if(U&&(ae=Math.min(ae,Y.length)),2===C.dimensions)for(J=0;J<ae;J++)if(r(R[J])){R[J].length>O[J].length&&u.push(i("unused",T,S.concat(J,O[J].length)));var V=O[J].length;for(G=0;G<(U?Math.min(V,Y[J].length):V);G++)K=O[J][G],g.validate(X=R[J][G],U?Y[J][G]:Y)?K!==X&&K!==+X&&u.push(i("dynamic",T,S.concat(J,G),X,K)):u.push(i("value",T,S.concat(J,G),X))}else u.push(i("array",T,S.concat(J),R[J]));else for(J=0;J<ae;J++)K=O[J],g.validate(X=R[J],U?Y[J]:Y)?K!==X&&K!==+X&&u.push(i("dynamic",T,S.concat(J),X,K)):u.push(i("value",T,S.concat(J),X))}else if(C.items&&!B&&r(R)){var q,ie,H=Y[Object.keys(Y)[0]],ee=[];for(q=0;q<O.length;q++){var Q=O[q]._index||q;if((ie=S.slice()).push(Q),e(R[Q])&&e(O[q])){ee.push(Q);var oe=R[Q],le=O[q];e(oe)&&!1!==oe.visible&&!1===le.visible?u.push(i("invisible",T,ie)):a(oe,le,H,u,T,ie)}}for(q=0;q<R.length;q++)(ie=S.slice()).push(q),e(R[q])?-1===ee.indexOf(q)&&u.push(i("unused",T,ie)):u.push(i("object",T,ie,R[q]))}else!e(R)&&e(O)?u.push(i("object",T,S,R)):n(R)||!n(O)||B||z?I in o?g.validate(R,C)?"enumerated"===C.valType&&(C.coerceNumber&&R!==+O||R!==O)&&u.push(i("dynamic",T,S,R,O)):u.push(i("value",T,S,R)):u.push(i("unused",T,S,R)):u.push(i("array",T,S,R));else u.push(i("schema",T,S))}}return u}function t(d,o){for(var x=d.layout.layoutAttributes,u=0;u<o.length;u++){var T=o[u],_=d.traces[T.type],w=_.layoutAttributes;w&&g.extendFlat(T.subplot?x[_.attributes.subplot.dflt]:x,w)}return x}re.exports=function(d,o){void 0===d&&(d=[]),void 0===o&&(o={});var x,u,T=b.get(),_=[],w={_context:g.extendFlat({},y)};r(d)?(w.data=g.extendDeep([],d),x=d):(w.data=[],x=[],_.push(i("array","data"))),e(o)?(w.layout=g.extendDeep({},o),u=o):(w.layout={},u={},arguments.length>1&&_.push(i("object","layout"))),m.supplyDefaults(w);for(var M=w._fullData,I=x.length,S=0;S<I;S++){var R=x[S],O=["data",S];if(e(R)){var C=M[S],D=C.type,B=T.traces[D].attributes;B.type={valType:"enumerated",values:[D]},!1===C.visible&&!1!==R.visible&&_.push(i("invisible",O)),a(R,C,B,_,O);var z=R.transforms,Y=C.transforms;if(z){r(z)||_.push(i("array",O,["transforms"])),O.push("transforms");for(var G=0;G<z.length;G++){var J=["transforms",G],te=z[G].type;if(e(z[G])){var X=T.transforms[te]?T.transforms[te].attributes:{};X.type={valType:"enumerated",values:Object.keys(T.transforms)},a(z[G],Y[G],X,_,O,J)}else _.push(i("object",O,J))}}}else _.push(i("object",O))}return a(u,w._fullLayout,t(T,M),_,"layout"),0===_.length?void 0:_};var p={object:function(d,o){return("layout"===d&&""===o?"The layout argument":"data"===d[0]&&""===o?"Trace "+d[1]+" in the data argument":s(d)+"key "+o)+" must be linked to an object container"},array:function(d,o){return("data"===d?"The data argument":s(d)+"key "+o)+" must be linked to an array container"},schema:function(d,o){return s(d)+"key "+o+" is not part of the schema"},unused:function(d,o,x){var u=e(x)?"container":"key";return s(d)+u+" "+o+" did not get coerced"},dynamic:function(d,o,x,u){return[s(d)+"key",o,"(set to '"+x+"')","got reset to","'"+u+"'","during defaults."].join(" ")},invisible:function(d,o){return(o?s(d)+"item "+o:"Trace "+d[1])+" got defaulted to be not visible"},value:function(d,o,x){return[s(d)+"key "+o,"is set to an invalid value ("+x+")"].join(" ")}};function s(d){return r(d)?"In data trace "+d[1]+", ":"In "+d+", "}function i(d,o,x,u,T){var _,w;x=x||"",r(o)?(_=o[0],w=o[1]):(_=o,w=null);var M=function(S){if(!r(S))return String(S);for(var R="",O=0;O<S.length;O++){var C=S[O];"number"==typeof C?R=R.substr(0,R.length-1)+"["+C+"]":R+=C,O<S.length-1&&(R+=".")}return R}(x),I=p[d](o,M,u,T);return g.log(I),{code:d,container:_,trace:w,path:x,astr:M,msg:I}}function f(d,o){var x=h(o),u=x.keyMinusId;return!!(u in d&&d[u]._isSubplotObj&&x.id)||o in d}function c(d,o){return o in d?d[o]:d[h(o).keyMinusId]}var l=g.counterRegex("([a-z]+)");function h(d){var o=d.match(l);return{keyMinusId:o&&o[1],id:o&&o[2]}}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(v,re,ne){"use strict";re.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plot_api/plot_template");re.exports=function(b,y,e){var r,n,a=e.name,t=e.inclusionAttr||"visible",p=y[a],s=g.isArrayOrTypedArray(b[a])?b[a]:[],i=y[a]=[],f=m.arrayTemplater(y,a,t);for(r=0;r<s.length;r++){var c=s[r];g.isPlainObject(c)?n=f.newItem(c):(n=f.newItem({}))[t]=!1,n._index=r,!1!==n[t]&&e.handleItemDefaults(c,n,y,e),i.push(n)}var l=f.defaultItems();for(r=0;r<l.length;r++)(n=l[r])._index=i.length,e.handleItemDefaults({},n,y,e,{}),i.push(n);if(g.isArrayOrTypedArray(p)){var h=Math.min(p.length,i.length);for(r=0;r<h;r++)g.relinkPrivateKeys(i[r],p[r])}return i}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(v,re,ne){"use strict";var g=v("./font_attributes"),m=v("../components/fx/attributes");re.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:g({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:m.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=m.dateTime2ms,y=m.incrementMonth,e=v("../../constants/numerical").ONEAVGMONTH;re.exports=function(r,n,a,t){if("date"!==n.type)return{vals:t};var p=r[a+"periodalignment"];if(!p)return{vals:t};var s,i=r[a+"period"];if(g(i)){if((i=+i)<=0)return{vals:t}}else if("string"==typeof i&&"M"===i.charAt(0)){var f=+i.substring(1);if(!(f>0&&Math.round(f)===f))return{vals:t};s=f}for(var c=n.calendar,l="start"===p,h="end"===p,o=b(r[a+"period0"],c)||0,x=[],u=[],T=[],_=t.length,w=0;w<_;w++){var M,I,S,R=t[w];if(s){for(M=Math.round((R-o)/(s*e)),S=y(o,s*M,c);S>R;)S=y(S,-s,c);for(;S<=R;)S=y(S,s,c);I=y(S,-s,c)}else{for(S=o+(M=Math.round((R-o)/i))*i;S>R;)S-=i;for(;S<=R;)S+=i;I=S-i}x[w]=l?I:h?S:(I+S)/2,u[w]=I,T[w]=S}return{vals:x,starts:u,ends:T}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(v,re,ne){"use strict";re.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("../../lib"),y=v("../../constants/numerical").FP_SAFE,e=v("../../registry"),r=v("../../components/drawing"),n=v("./axis_ids"),a=n.getFromId,t=n.isLinked;function p(u,T){var _,w,M=[],I=u._fullLayout,S=i(I,T,0),R=i(I,T,1),O=f(u,T),C=O.min,D=O.max;if(0===C.length||0===D.length)return b.simpleMap(T.range,T.r2l);var B=C[0].val,z=D[0].val;for(_=1;_<C.length&&B===z;_++)B=Math.min(B,C[_].val);for(_=1;_<D.length&&B===z;_++)z=Math.max(z,D[_].val);var Y=!1;if(T.range){var G=b.simpleMap(T.range,T.r2l);Y=G[1]<G[0]}"reversed"===T.autorange&&(Y=!0,T.autorange=!0);var J,te,X,K,ae,U,V=T.rangemode,q="tozero"===V,ie="nonnegative"===V,H=T._length,ee=H/10,Q=0;for(_=0;_<C.length;_++)for(J=C[_],w=0;w<D.length;w++)(U=(te=D[w]).val-J.val-s(T,J.val,te.val))>0&&((ae=H-S(J)-R(te))>ee?U/ae>Q&&(X=J,K=te,Q=U/ae):U/H>Q&&(X={val:J.val,nopad:1},K={val:te.val,nopad:1},Q=U/H));if(B===z){var oe=B-1,le=B+1;if(q)if(0===B)M=[0,1];else{var de=(B>0?D:C).reduce(function(be,he){return Math.max(be,R(he))},0),fe=B/(1-Math.min(.5,de/H));M=B>0?[0,fe]:[fe,0]}else M=ie?[Math.max(0,oe),Math.max(1,le)]:[oe,le]}else q?(X.val>=0&&(X={val:0,nopad:1}),K.val<=0&&(K={val:0,nopad:1})):ie&&(X.val-Q*S(X)<0&&(X={val:0,nopad:1}),K.val<=0&&(K={val:1,nopad:1})),Q=(K.val-X.val-s(T,J.val,te.val))/(H-S(X)-R(K)),M=[X.val-Q*S(X),K.val+Q*R(K)];return Y&&M.reverse(),b.simpleMap(M,T.l2r||Number)}function s(u,T,_){var w=0;if(u.rangebreaks)for(var M=u.locateBreaks(T,_),I=0;I<M.length;I++){var S=M[I];w+=S.max-S.min}return w}function i(u,T,_){var w=.05*T._length,M=T._anchorAxis||{};if(-1!==(T.ticklabelposition||"").indexOf("inside")||-1!==(M.ticklabelposition||"").indexOf("inside")){var I="reversed"===T.autorange;if(!I){var S=b.simpleMap(T.range,T.r2l);I=S[1]<S[0]}I&&(_=!_)}var R=0;return t(u,T._id)||(R=function(O,C,D){var B=0,z="x"===C._id.charAt(0);for(var Y in O._plots){var G=O._plots[Y];if(C._id===G.xaxis._id||C._id===G.yaxis._id){var J=(z?G.yaxis:G.xaxis)||{};if(-1!==(J.ticklabelposition||"").indexOf("inside")&&(!D&&("left"===J.side||"bottom"===J.side)||D&&("top"===J.side||"right"===J.side))){if(J._vals){var te=b.deg2rad(J._tickAngles[J._id+"tick"]||0),X=Math.abs(Math.cos(te)),K=Math.abs(Math.sin(te));J._vals[0].bb||J._selections[J._id+"tick"].each(function(H){var ee=g.select(this);ee.select(".text-math-group").empty()&&(H.bb=r.bBox(ee.node()))});for(var U=0;U<J._vals.length;U++){var V=J._vals[U].bb;if(V){var q=6+V.width,ie=6+V.height;B=Math.max(B,z?Math.max(q*X,ie*K):Math.max(ie*X,q*K))}}}"inside"===J.ticks&&"inside"===J.ticklabelposition&&(B+=J.ticklen||0)}}}return B}(u,T,_)),w=Math.max(R,w),"domain"===T.constrain&&T._inputDomain&&(w*=(T._inputDomain[1]-T._inputDomain[0])/(T.domain[1]-T.domain[0])),function(O){return O.nopad?0:O.pad+(O.extrapad?w:R)}}function f(u,T,_){var w,M,I,S=T._id,O=u._fullLayout,C=[],D=[];function B(te,X){for(w=0;w<X.length;w++){var K=te[X[w]],ae=(K._extremes||{})[S];if(!0===K.visible&&ae){for(M=0;M<ae.min.length;M++)c(C,(I=ae.min[M]).val,I.pad,{extrapad:I.extrapad});for(M=0;M<ae.max.length;M++)l(D,(I=ae.max[M]).val,I.pad,{extrapad:I.extrapad})}}}if(B(u._fullData,T._traceIndices),B(O.annotations||[],T._annIndices||[]),B(O.shapes||[],T._shapeIndices||[]),T._matchGroup&&!_)for(var z in T._matchGroup)if(z!==T._id){var Y=a(u,z),G=f(u,Y,!0),J=T._length/Y._length;for(M=0;M<G.min.length;M++)c(C,(I=G.min[M]).val,I.pad*J,{extrapad:I.extrapad});for(M=0;M<G.max.length;M++)l(D,(I=G.max[M]).val,I.pad*J,{extrapad:I.extrapad})}return{min:C,max:D}}function c(u,T,_,w){h(u,T,_,w,o)}function l(u,T,_,w){h(u,T,_,w,x)}function h(u,T,_,w,M){for(var I=w.tozero,S=w.extrapad,R=!0,O=0;O<u.length&&R;O++){var C=u[O];if(M(C.val,T)&&C.pad>=_&&(C.extrapad||!S)){R=!1;break}M(T,C.val)&&C.pad<=_&&(S||!C.extrapad)&&(u.splice(O,1),O--)}if(R){var D=I&&0===T;u.push({val:T,pad:D?0:_,extrapad:!D&&S})}}function d(u){return m(u)&&Math.abs(u)<y}function o(u,T){return u<=T}function x(u,T){return u>=T}re.exports={getAutoRange:p,makePadFn:i,doAutoRange:function(u,T,_){if(T.setScale(),T.autorange){T.range=_?_.slice():p(u,T),T._r=T.range.slice(),T._rl=b.simpleMap(T._r,T.r2l);var w=T._input,M={};M[T._attr+".range"]=T.range,M[T._attr+".autorange"]=T.autorange,e.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,M),w.range=T.range.slice(),w.autorange=T.autorange}var I=T._anchorAxis;if(I&&I.rangeslider){var S=I.rangeslider[T._name];S&&"auto"===S.rangemode&&(S.range=p(u,T)),I._input.rangeslider[T._name]=b.extendFlat({},S)}},findExtremes:function(u,T,_){_||(_={}),u._m||u.setScale();var w,M,I,S,R,O,C,D,B,z=[],Y=[],G=T.length,J=_.padded||!1,te=_.tozero&&("linear"===u.type||"-"===u.type),X="log"===u.type,K=!1,ae=_.vpadLinearized||!1;function U(le){if(Array.isArray(le))return K=!0,function(fe){return Math.max(Number(le[fe]||0),0)};var de=Math.max(Number(le||0),0);return function(){return de}}var V=U((u._m>0?_.ppadplus:_.ppadminus)||_.ppad||0),q=U((u._m>0?_.ppadminus:_.ppadplus)||_.ppad||0),ie=U(_.vpadplus||_.vpad),H=U(_.vpadminus||_.vpad);if(!K){if(D=1/0,B=-1/0,X)for(w=0;w<G;w++)(M=T[w])<D&&M>0&&(D=M),M>B&&M<y&&(B=M);else for(w=0;w<G;w++)(M=T[w])<D&&M>-y&&(D=M),M>B&&M<y&&(B=M);T=[D,B],G=2}var ee={tozero:te,extrapad:J};function Q(le){m(I=T[le])&&(O=V(le),C=q(le),ae?(S=u.c2l(I)-H(le),R=u.c2l(I)+ie(le)):(D=I-H(le),B=I+ie(le),X&&D<B/10&&(D=B/10),S=u.c2l(D),R=u.c2l(B)),te&&(S=Math.min(0,S),R=Math.max(0,R)),d(S)&&c(z,S,C,ee),d(R)&&l(Y,R,O,ee))}var oe=Math.min(6,G);for(w=0;w<oe;w++)Q(w);for(w=G-1;w>=oe;w--)Q(w);return{min:z,max:Y,opts:_}},concatExtremes:f}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("../../plots/plots"),y=v("../../registry"),e=v("../../lib"),r=e.strTranslate,n=v("../../lib/svg_text_utils"),a=v("../../components/titles"),t=v("../../components/color"),p=v("../../components/drawing"),s=v("./layout_attributes"),i=v("./clean_ticks"),f=v("../../constants/numerical"),c=f.ONEMAXYEAR,l=f.ONEAVGYEAR,h=f.ONEMINYEAR,d=f.ONEMAXQUARTER,o=f.ONEAVGQUARTER,x=f.ONEMINQUARTER,u=f.ONEMAXMONTH,T=f.ONEAVGMONTH,_=f.ONEMINMONTH,w=f.ONEWEEK,M=f.ONEDAY,I=M/2,S=f.ONEHOUR,R=f.ONEMIN,O=f.ONESEC,C=f.MINUS_SIGN,D=f.BADNUM,B={K:"zeroline"},z={K:"gridline",L:"path"},Y={K:"minor-gridline",L:"path"},G={K:"tick",L:"path"},J={K:"tick",L:"text"},te={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},X=v("../../constants/alignment"),K=X.MID_SHIFT,ae=X.CAP_SHIFT,U=X.LINE_SPACING,V=X.OPPOSITE_SIDE,q=re.exports={};q.setConvert=v("./set_convert");var ie=v("./axis_autotype"),H=v("./axis_ids"),ee=H.idSort,Q=H.isLinked;q.id2name=H.id2name,q.name2id=H.name2id,q.cleanId=H.cleanId,q.list=H.list,q.listIds=H.listIds,q.getFromId=H.getFromId,q.getFromTrace=H.getFromTrace;var oe=v("./autorange");function le(ye){var ke=1e-4*(ye[1]-ye[0]);return[ye[0]-ke,ye[1]+ke]}q.getAutoRange=oe.getAutoRange,q.findExtremes=oe.findExtremes,q.coerceRef=function(ye,ke,Ve,Je,nt,Ke){var vt=Je.charAt(Je.length-1),gt=Ve._fullLayout._subplots[vt+"axis"],Ot=Je+"ref",Vt={};return nt||(nt=gt[0]||("string"==typeof Ke?Ke:Ke[0])),Ke||(Ke=nt),gt=gt.concat(gt.map(function(ft){return ft+" domain"})),Vt[Ot]={valType:"enumerated",values:gt.concat(Ke?"string"==typeof Ke?[Ke]:Ke:[]),dflt:nt},e.coerce(ye,ke,Vt,Ot)},q.getRefType=function(ye){return void 0===ye?ye:"paper"===ye?"paper":"pixel"===ye?"pixel":/( domain)$/.test(ye)?"domain":"range"},q.coercePosition=function(ye,ke,Ve,Je,nt,Ke){var vt,gt;if("range"!==q.getRefType(Je))vt=e.ensureNumber,gt=Ve(nt,Ke);else{var Ot=q.getFromId(ke,Je);gt=Ve(nt,Ke=Ot.fraction2r(Ke)),vt=Ot.cleanPos}ye[nt]=vt(gt)},q.cleanPosition=function(ye,ke,Ve){return("paper"===Ve||"pixel"===Ve?e.ensureNumber:q.getFromId(ke,Ve).cleanPos)(ye)},q.redrawComponents=function(ye,ke){ke=ke||q.listIds(ye);var Ve=ye._fullLayout;function Je(nt,Ke,vt,gt){for(var Ot=y.getComponentMethod(nt,Ke),Vt={},ft=0;ft<ke.length;ft++)for(var bt=Ve[q.id2name(ke[ft])][vt],Wt=0;Wt<bt.length;Wt++){var Pt=bt[Wt];if(!Vt[Pt]&&(Ot(ye,Pt),Vt[Pt]=1,gt))return}}Je("annotations","drawOne","_annIndices"),Je("shapes","drawOne","_shapeIndices"),Je("images","draw","_imgIndices",!0),Je("selections","drawOne","_selectionIndices")};var de=q.getDataConversions=function(ye,ke,Ve,Je){var nt,Ke="x"===Ve||"y"===Ve||"z"===Ve?Ve:Je;if(Array.isArray(Ke)){if(nt={type:ie(Je,void 0,{autotypenumbers:ye._fullLayout.autotypenumbers}),_categories:[]},q.setConvert(nt),"category"===nt.type)for(var vt=0;vt<Je.length;vt++)nt.d2c(Je[vt])}else nt=q.getFromTrace(ye,ke,Ke);return nt?{d2c:nt.d2c,c2d:nt.c2d}:"ids"===Ke?{d2c:be,c2d:be}:{d2c:fe,c2d:fe}};function fe(ye){return+ye}function be(ye){return String(ye)}function he(ye,ke){return Math.abs((ye/ke+.5)%1-.5)<.001}function _e(ye,ke){return Math.abs(ye/ke-1)<.001}function Ce(ye){return+ye.substring(1)}function Ee(ye){var ke=le(e.simpleMap(ye.range,ye.r2l)),Ve=Math.min(ke[0],ke[1]),Je=Math.max(ke[0],ke[1]),nt="category"===ye.type?ye.d2l_noadd:ye.d2l;"log"===ye.type&&"L"!==String(ye.dtick).charAt(0)&&(ye.dtick="L"+Math.pow(10,Math.floor(Math.min(ye.range[0],ye.range[1]))-1));for(var Ke=[],vt=0;vt<=1;vt++)if(!vt||ye.minor){var gt=vt?ye.minor.tickvals:ye.tickvals,Ot=vt?[]:ye.ticktext;if(gt){Array.isArray(Ot)||(Ot=[]);for(var Vt=0;Vt<gt.length;Vt++){var ft=nt(gt[Vt]);if(ft>Ve&&ft<Je){var bt=void 0===Ot[Vt]?q.tickText(ye,ft):je(ye,ft,String(Ot[Vt]));vt&&(bt.minor=!0,bt.text=""),Ke.push(bt)}}}}return ye.rangebreaks&&(Ke=Ke.filter(function(Wt){return ye.maskBreaks(Wt.x)!==D})),Ke}q.getDataToCoordFunc=function(ye,ke,Ve,Je){return de(ye,ke,Ve,Je).d2c},q.counterLetter=function(ye){var ke=ye.charAt(0);return"x"===ke?"y":"y"===ke?"x":void 0},q.minDtick=function(ye,ke,Ve,Je){-1===["log","category","multicategory"].indexOf(ye.type)&&Je?void 0===ye._minDtick?(ye._minDtick=ke,ye._forceTick0=Ve):ye._minDtick&&((ye._minDtick/ke+1e-6)%1<2e-6&&((Ve-ye._forceTick0)/ke%1+1.000001)%1<2e-6?(ye._minDtick=ke,ye._forceTick0=Ve):((ke/ye._minDtick+1e-6)%1>2e-6||((Ve-ye._forceTick0)/ye._minDtick%1+1.000001)%1>2e-6)&&(ye._minDtick=0)):ye._minDtick=0},q.saveRangeInitial=function(ye,ke){for(var Ve=q.list(ye,"",!0),Je=!1,nt=0;nt<Ve.length;nt++){var Ke=Ve[nt],vt=void 0===Ke._rangeInitial;(vt&&!1===Ke.autorange||ke&&(vt||Ke.range[0]!==Ke._rangeInitial[0]||Ke.range[1]!==Ke._rangeInitial[1]))&&(Ke._rangeInitial=Ke.range.slice(),Je=!0)}return Je},q.saveShowSpikeInitial=function(ye,ke){for(var Ve=q.list(ye,"",!0),Je=!1,nt="on",Ke=0;Ke<Ve.length;Ke++){var vt=Ve[Ke],gt=void 0===vt._showSpikeInitial;(gt||ke&&(gt||vt.showspikes!==vt._showspikes))&&(vt._showSpikeInitial=vt.showspikes,Je=!0),"on"!==nt||vt.showspikes||(nt="off")}return ye._fullLayout._cartesianSpikesEnabled=nt,Je},q.autoBin=function(ye,ke,Ve,Je,nt,Ke){var vt,gt=e.aggNums(Math.min,null,ye),Ot=e.aggNums(Math.max,null,ye);if("category"===ke.type||"multicategory"===ke.type)return{start:gt-.5,end:Ot+.5,size:Math.max(1,Math.round(Ke)||1),_dataSpan:Ot-gt};if(nt||(nt=ke.calendar),vt="log"===ke.type?{type:"linear",range:[gt,Ot]}:{type:ke.type,range:e.simpleMap([gt,Ot],ke.c2r,0,nt),calendar:nt},q.setConvert(vt),Ke=Ke&&i.dtick(Ke,vt.type))vt.dtick=Ke,vt.tick0=i.tick0(void 0,vt.type,nt);else{var Vt;if(Ve)Vt=(Ot-gt)/Ve;else{var ft=e.distinctVals(ye),bt=Math.pow(10,Math.floor(Math.log(ft.minDiff)/Math.LN10)),Wt=bt*e.roundUp(ft.minDiff/bt,[.9,1.9,4.9,9.9],!0);Vt=Math.max(Wt,2*e.stdev(ye)/Math.pow(ye.length,Je?.25:.4)),m(Vt)||(Vt=1)}q.autoTicks(vt,Vt)}var Pt,Bt=vt.dtick,Pe=q.tickIncrement(q.tickFirst(vt),Bt,"reverse",nt);if("number"==typeof Bt)Pt=(Pe=function(et,dt,xt,Rt,Yt){var nn=0,Kt=0,Mn=0,Un=0;function Tn(pn){return(1+100*(pn-et)/xt.dtick)%100<2}for(var un=0;un<dt.length;un++)dt[un]%1==0?Mn++:m(dt[un])||Un++,Tn(dt[un])&&nn++,Tn(dt[un]+xt.dtick/2)&&Kt++;var an=dt.length-Un;if(Mn===an&&"date"!==xt.type)xt.dtick<1?et=Rt-.5*xt.dtick:(et-=.5)+xt.dtick<Rt&&(et+=xt.dtick);else if(Kt<.1*an&&(nn>.3*an||Tn(Rt)||Tn(Yt))){var fn=xt.dtick/2;et+=et+fn<Rt?fn:-fn}return et}(Pe,ye,vt,gt,Ot))+(1+Math.floor((Ot-Pe)/Bt))*Bt;else for("M"===vt.dtick.charAt(0)&&(Pe=function(et,dt,xt,Rt,Yt){var nn=e.findExactDates(dt,Yt);if(nn.exactDays>.8){var Kt=Number(xt.substr(1));nn.exactYears>.8&&Kt%12==0?et=q.tickIncrement(et,"M6","reverse")+1.5*M:nn.exactMonths>.8?et=q.tickIncrement(et,"M1","reverse")+15.5*M:et-=I;var Mn=q.tickIncrement(et,xt);if(Mn<=Rt)return Mn}return et}(Pe,ye,Bt,gt,nt)),Pt=Pe;Pt<=Ot;)Pt=q.tickIncrement(Pt,Bt,!1,nt);return{start:ke.c2r(Pe,0,nt),end:ke.c2r(Pt,0,nt),size:Bt,_dataSpan:Ot-gt}},q.prepMinorTicks=function(ye,ke,Ve){if(!ke.minor.dtick){delete ye.dtick;var Je,nt=ke.dtick&&m(ke._tmin);if(nt){var Ke=q.tickIncrement(ke._tmin,ke.dtick,!0);Je=[ke._tmin,.99*Ke+.01*ke._tmin]}else{var vt=e.simpleMap(ke.range,ke.r2l);Je=[vt[0],.8*vt[0]+.2*vt[1]]}if(ye.range=e.simpleMap(Je,ke.l2r),ye._isMinor=!0,q.prepTicks(ye,Ve),nt){var gt=m(ke.dtick),Ot=m(ye.dtick),Vt=gt?ke.dtick:+ke.dtick.substring(1),ft=Ot?ye.dtick:+ye.dtick.substring(1);gt&&Ot?he(Vt,ft)?Vt===2*w&&ft===2*M&&(ye.dtick=w):ye.dtick=Vt===2*w&&ft===3*M?w:Vt!==w||(ke._input.minor||{}).nticks?_e(Vt/ft,2.5)?Vt/2:Vt:M:"M"===String(ke.dtick).charAt(0)?Ot?ye.dtick="M1":he(Vt,ft)?Vt>=12&&2===ft&&(ye.dtick="M3"):ye.dtick=ke.dtick:"L"===String(ye.dtick).charAt(0)?"L"===String(ke.dtick).charAt(0)?he(Vt,ft)||(ye.dtick=_e(Vt/ft,2.5)?ke.dtick/2:ke.dtick):ye.dtick="D1":"D2"===ye.dtick&&+ke.dtick>1&&(ye.dtick=1)}ye.range=ke.range}void 0===ke.minor._tick0Init&&(ye.tick0=ke.tick0)},q.prepTicks=function(ye,ke){var Ve=e.simpleMap(ye.range,ye.r2l,void 0,void 0,ke);if("auto"===ye.tickmode||!ye.dtick){var Je,nt=ye.nticks;nt||("category"===ye.type||"multicategory"===ye.type?(Je=ye.tickfont?e.bigFont(ye.tickfont.size||12):15,nt=ye._length/Je):(Je="y"===ye._id.charAt(0)?40:80,nt=e.constrain(ye._length/Je,4,9)+1),"radialaxis"===ye._name&&(nt*=2)),ye.minor&&"array"!==ye.minor.tickmode||"array"===ye.tickmode&&(nt*=100),ye._roughDTick=Math.abs(Ve[1]-Ve[0])/nt,q.autoTicks(ye,ye._roughDTick),ye._minDtick>0&&ye.dtick<2*ye._minDtick&&(ye.dtick=ye._minDtick,ye.tick0=ye.l2r(ye._forceTick0))}"period"===ye.ticklabelmode&&function(Ke){var vt;function gt(){return!(m(Ke.dtick)||"M"!==Ke.dtick.charAt(0))}var Ot=gt(),Vt=q.getTickFormat(Ke);if(Vt){var ft=Ke._dtickInit!==Ke.dtick;/%[fLQsSMX]/.test(Vt)||(/%[HI]/.test(Vt)?(vt=S,ft&&!Ot&&Ke.dtick<S&&(Ke.dtick=S)):/%p/.test(Vt)?(vt=I,ft&&!Ot&&Ke.dtick<I&&(Ke.dtick=I)):/%[Aadejuwx]/.test(Vt)?(vt=M,ft&&!Ot&&Ke.dtick<M&&(Ke.dtick=M)):/%[UVW]/.test(Vt)?(vt=w,ft&&!Ot&&Ke.dtick<w&&(Ke.dtick=w)):/%[Bbm]/.test(Vt)?(vt=T,ft&&(Ot?Ce(Ke.dtick)<1:Ke.dtick<_)&&(Ke.dtick="M1")):/%[q]/.test(Vt)?(vt=o,ft&&(Ot?Ce(Ke.dtick)<3:Ke.dtick<x)&&(Ke.dtick="M3")):/%[Yy]/.test(Vt)&&(vt=l,ft&&(Ot?Ce(Ke.dtick)<12:Ke.dtick<h)&&(Ke.dtick="M12")))}(Ot=gt())&&Ke.tick0===Ke._dowTick0&&(Ke.tick0=Ke._rawTick0),Ke._definedDelta=vt}(ye),ye.tick0||(ye.tick0="date"===ye.type?"2000-01-01":0),"date"===ye.type&&ye.dtick<.1&&(ye.dtick=.1),qe(ye)},q.calcTicks=function(ye,ke){for(var Ve,Je,nt=ye.type,Ke=ye.calendar,vt=ye.ticklabelstep,gt="period"===ye.ticklabelmode,Ot=e.simpleMap(ye.range,ye.r2l,void 0,void 0,ke),Vt=Ot[1]<Ot[0],ft=Math.min(Ot[0],Ot[1]),bt=Math.max(Ot[0],Ot[1]),Wt=Math.max(1e3,ye._length||0),Pt=[],Bt=[],Pe=[],et=[],dt=ye.minor&&(ye.minor.ticks||ye.minor.showgrid),xt=1;xt>=(dt?0:1);xt--){var Rt=!xt;xt?(ye._dtickInit=ye.dtick,ye._tick0Init=ye.tick0):(ye.minor._dtickInit=ye.minor.dtick,ye.minor._tick0Init=ye.minor.tick0);var Yt=xt?ye:e.extendFlat({},ye,ye.minor);if(Rt?q.prepMinorTicks(Yt,ye,ke):q.prepTicks(Yt,ke),"array"!==Yt.tickmode){var nn=le(Ot),Kt=nn[0],Mn=nn[1],Un=m(Yt.dtick),Tn="log"===nt&&!(Un||"L"===Yt.dtick.charAt(0)),un=q.tickFirst(Yt,ke);if(xt){if(ye._tmin=un,un<Kt!==Vt)break;"category"!==nt&&"multicategory"!==nt||(Mn=Vt?Math.max(-.5,Mn):Math.min(ye._categories.length-.5,Mn))}var an,fn,pn=null,Sn=un;xt&&(Un?fn=ye.dtick:"date"===nt?"string"==typeof ye.dtick&&"M"===ye.dtick.charAt(0)&&(fn=T*ye.dtick.substring(1)):fn=ye._roughDTick,an=Math.round((ye.r2l(Sn)-ye.r2l(ye.tick0))/fn)-1);var Nn=Yt.dtick;for(Yt.rangebreaks&&Yt._tick0Init!==Yt.tick0&&(Sn=en(Sn,ye),Vt||(Sn=q.tickIncrement(Sn,Nn,!Vt,Ke))),xt&&gt&&(Sn=q.tickIncrement(Sn,Nn,!Vt,Ke),an--);Vt?Sn>=Mn:Sn<=Mn;Sn=q.tickIncrement(Sn,Nn,Vt,Ke)){if(xt&&an++,Yt.rangebreaks&&!Vt){if(Sn<Kt)continue;if(Yt.maskBreaks(Sn)===D&&en(Sn,Yt)>=bt)break}if(Pe.length>Wt||Sn===pn)break;pn=Sn;var Kn={value:Sn};xt?(Tn&&Sn!==(0|Sn)&&(Kn.simpleLabel=!0),vt>1&&an%vt&&(Kn.skipLabel=!0),Pe.push(Kn)):(Kn.minor=!0,et.push(Kn))}}else xt?(Pe=[],Pt=Ee(ye)):(et=[],Bt=Ee(ye))}if(dt&&!("inside"===ye.minor.ticks&&"outside"===ye.ticks||"outside"===ye.minor.ticks&&"inside"===ye.ticks)){for(var Bn=Pe.map(function(Zr){return Zr.value}),cr=[],Lr=0;Lr<et.length;Lr++){var Qn=et[Lr],qr=Qn.value;if(-1===Bn.indexOf(qr)){for(var sr=!1,hr=0;!sr&&hr<Pe.length;hr++)1e7+Pe[hr].value===1e7+qr&&(sr=!0);sr||cr.push(Qn)}}et=cr}if(gt&&function(Zr,Ii,dn){for(var Cn=0;Cn<Zr.length;Cn++){var jt=Zr[Cn].value,bn=Cn,An=Cn+1;Cn<Zr.length-1?(bn=Cn,An=Cn+1):Cn>0?(bn=Cn-1,An=Cn):(bn=Cn,An=Cn);var $n,Hn=Math.abs(Zr[An].value-Zr[bn].value),Ln=dn||Hn,On=0;Ln>=h?On=Hn>=h&&Hn<=c?Hn:l:dn===o&&Ln>=x?On=Hn>=x&&Hn<=d?Hn:o:Ln>=_?On=Hn>=_&&Hn<=u?Hn:T:dn===w&&Ln>=w?On=w:Ln>=M?On=M:dn===I&&Ln>=I?On=I:dn===S&&Ln>=S&&(On=S),On>=Hn&&(On=Hn,$n=!0);var Dn=jt+On;if(Ii.rangebreaks&&On>0){for(var Yn=0,rr=0;rr<84;rr++){var ar=(rr+.5)/84;Ii.maskBreaks(jt*(1-ar)+ar*Dn)!==D&&Yn++}(On*=Yn/84)||(Zr[Cn].drop=!0),$n&&Hn>w&&(On=Hn)}(On>0||0===Cn)&&(Zr[Cn].periodX=jt+On/2)}}(Pe,ye,ye._definedDelta),ye.rangebreaks){var jr="y"===ye._id.charAt(0),di=1;"auto"===ye.tickmode&&(di=ye.tickfont?ye.tickfont.size:12);var Jn=NaN;for(Ve=Pe.length-1;Ve>-1;Ve--)if(Pe[Ve].drop)Pe.splice(Ve,1);else{Pe[Ve].value=en(Pe[Ve].value,ye);var Ar=ye.c2p(Pe[Ve].value);(jr?Jn>Ar-di:Jn<Ar+di)?Pe.splice(Vt?Ve+1:Ve,1):Jn=Ar}}yn(ye)&&360===Math.abs(Ot[1]-Ot[0])&&Pe.pop(),ye._tmax=(Pe[Pe.length-1]||{}).value,ye._prevDateHead="",ye._inCalcTicks=!0;var mr,lr,ri=function(Zr){Zr.text="",ye._prevDateHead=Je};for(Pe=Pe.concat(et),Ve=0;Ve<Pe.length;Ve++){var Tr=Pe[Ve].value;Pe[Ve].minor?Bt.push({x:Tr,minor:!0}):(Je=ye._prevDateHead,mr=q.tickText(ye,Tr,!1,Pe[Ve].simpleLabel),void 0!==(lr=Pe[Ve].periodX)&&(mr.periodX=lr,(lr>bt||lr<ft)&&(lr>bt&&(mr.periodX=bt),lr<ft&&(mr.periodX=ft),ri(mr))),Pe[Ve].skipLabel&&ri(mr),Pt.push(mr))}return Pt=Pt.concat(Bt),ye._inCalcTicks=!1,gt&&Pt.length&&(Pt[0].noTick=!0),Pt};var Ae=[2,5,10],ze=[1,2,3,6,12],ve=[1,2,5,10,15,30],Te=[1,2,3,7,14],Ie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],De=[-.301,0,.301,.699,1],Fe=[15,30,45,90,180];function Ue(ye,ke,Ve){return ke*e.roundUp(ye/ke,Ve)}function qe(ye){var ke=ye.dtick;if(ye._tickexponent=0,m(ke)||"string"==typeof ke||(ke=1),"category"!==ye.type&&"multicategory"!==ye.type||(ye._tickround=null),"date"===ye.type){var Ve=ye.r2l(ye.tick0),Je=ye.l2r(Ve).replace(/(^-|i)/g,""),nt=Je.length;if("M"===String(ke).charAt(0))ye._tickround=nt>10||"01-01"!==Je.substr(5)?"d":+ke.substr(1)%12==0?"y":"m";else if(ke>=M&&nt<=10||ke>=15*M)ye._tickround="d";else if(ke>=R&&nt<=16||ke>=S)ye._tickround="M";else if(ke>=O&&nt<=19||ke>=R)ye._tickround="S";else{var Ke=ye.l2r(Ve+ke).replace(/^-/,"").length;ye._tickround=Math.max(nt,Ke)-20,ye._tickround<0&&(ye._tickround=4)}}else if(m(ke)||"L"===ke.charAt(0)){var vt=ye.range.map(ye.r2d||Number);m(ke)||(ke=Number(ke.substr(1))),ye._tickround=2-Math.floor(Math.log(ke)/Math.LN10+.01);var gt=Math.max(Math.abs(vt[0]),Math.abs(vt[1])),Ot=Math.floor(Math.log(gt)/Math.LN10+.01),Vt=void 0===ye.minexponent?3:ye.minexponent;Math.abs(Ot)>Vt&&(ye._tickexponent=Ne(ye.exponentformat)&&!Be(Ot)?3*Math.round((Ot-1)/3):Ot)}else ye._tickround=null}function je(ye,ke,Ve){var Je=ye.tickfont||{};return{x:ke,dx:0,dy:0,text:Ve||"",fontSize:Je.size,font:Je.family,fontColor:Je.color}}q.autoTicks=function(ye,ke,Ve){var Je;function nt(bt){return Math.pow(bt,Math.floor(Math.log(ke)/Math.LN10))}if("date"===ye.type){ye.tick0=e.dateTick0(ye.calendar,0);var Ke=2*ke;if(Ke>l)ke/=l,Je=nt(10),ye.dtick="M"+12*Ue(ke,Je,Ae);else if(Ke>T)ye.dtick="M"+Ue(ke/=T,1,ze);else if(Ke>M){if(ye.dtick=Ue(ke,M,ye._hasDayOfWeekBreaks?[1,2,7,14]:Te),!Ve){var vt=q.getTickFormat(ye),gt="period"===ye.ticklabelmode;gt&&(ye._rawTick0=ye.tick0),ye.tick0=/%[uVW]/.test(vt)?e.dateTick0(ye.calendar,2):e.dateTick0(ye.calendar,1),gt&&(ye._dowTick0=ye.tick0)}}else Ke>S?ye.dtick=Ue(ke,S,ze):Ke>R?ye.dtick=Ue(ke,R,ve):Ke>O?ye.dtick=Ue(ke,O,ve):(Je=nt(10),ye.dtick=Ue(ke,Je,Ae))}else if("log"===ye.type){ye.tick0=0;var Ot=e.simpleMap(ye.range,ye.r2l);if(ye._isMinor&&(ke*=1.5),ke>.7)ye.dtick=Math.ceil(ke);else if(Math.abs(Ot[1]-Ot[0])<1){var Vt=1.5*Math.abs((Ot[1]-Ot[0])/ke);ke=Math.abs(Math.pow(10,Ot[1])-Math.pow(10,Ot[0]))/Vt,Je=nt(10),ye.dtick="L"+Ue(ke,Je,Ae)}else ye.dtick=ke>.3?"D2":"D1"}else"category"===ye.type||"multicategory"===ye.type?(ye.tick0=0,ye.dtick=Math.ceil(Math.max(ke,1))):yn(ye)?(ye.tick0=0,ye.dtick=Ue(ke,Je=1,Fe)):(ye.tick0=0,Je=nt(10),ye.dtick=Ue(ke,Je,Ae));if(0===ye.dtick&&(ye.dtick=1),!m(ye.dtick)&&"string"!=typeof ye.dtick){var ft=ye.dtick;throw ye.dtick=1,"ax.dtick error: "+String(ft)}},q.tickIncrement=function(ye,ke,Ve,Je){var nt=Ve?-1:1;if(m(ke))return e.increment(ye,nt*ke);var Ke=ke.charAt(0),vt=nt*Number(ke.substr(1));if("M"===Ke)return e.incrementMonth(ye,vt,Je);if("L"===Ke)return Math.log(Math.pow(10,ye)+vt)/Math.LN10;if("D"===Ke){var gt="D2"===ke?De:Ie,Ot=ye+.01*nt,Vt=e.roundUp(e.mod(Ot,1),gt,Ve);return Math.floor(Ot)+Math.log(g.round(Math.pow(10,Vt),1))/Math.LN10}throw"unrecognized dtick "+String(ke)},q.tickFirst=function(ye,ke){var Ve=ye.r2l||Number,Je=e.simpleMap(ye.range,Ve,void 0,void 0,ke),nt=Je[1]<Je[0],Ke=nt?Math.floor:Math.ceil,vt=le(Je)[0],gt=ye.dtick,Ot=Ve(ye.tick0);if(m(gt)){var Vt=Ke((vt-Ot)/gt)*gt+Ot;return"category"!==ye.type&&"multicategory"!==ye.type||(Vt=e.constrain(Vt,0,ye._categories.length-1)),Vt}var ft=gt.charAt(0),bt=Number(gt.substr(1));if("M"===ft){for(var Wt,Pt,Bt,Pe=0,et=Ot;Pe<10;){if(((Wt=q.tickIncrement(et,gt,nt,ye.calendar))-vt)*(et-vt)<=0)return nt?Math.min(et,Wt):Math.max(et,Wt);Pt=(vt-(et+Wt)/2)/(Wt-et),Bt=ft+(Math.abs(Math.round(Pt))||1)*bt,et=q.tickIncrement(et,Bt,Pt<0?!nt:nt,ye.calendar),Pe++}return e.error("tickFirst did not converge",ye),et}if("L"===ft)return Math.log(Ke((Math.pow(10,vt)-Ot)/bt)*bt+Ot)/Math.LN10;if("D"===ft){var dt="D2"===gt?De:Ie,xt=e.roundUp(e.mod(vt,1),dt,nt);return Math.floor(vt)+Math.log(g.round(Math.pow(10,xt),1))/Math.LN10}throw"unrecognized dtick "+String(gt)},q.tickText=function(ye,ke,Ve,Je){var nt,Ke=je(ye,ke),vt="array"===ye.tickmode,gt=Ve||vt,Ot=ye.type,Vt="category"===Ot?ye.d2l_noadd:ye.d2l;if(vt&&Array.isArray(ye.ticktext)){var ft=e.simpleMap(ye.range,ye.r2l),bt=(Math.abs(ft[1]-ft[0])-(ye._lBreaks||0))/1e4;for(nt=0;nt<ye.ticktext.length&&!(Math.abs(ke-Vt(ye.tickvals[nt]))<bt);nt++);if(nt<ye.ticktext.length)return Ke.text=String(ye.ticktext[nt]),Ke}function Wt(Pe){return void 0===Pe||(Ve?"none"===Pe:"all"!==Pe&&ke!=={first:ye._tmin,last:ye._tmax}[Pe])}var et,dt,Pt=Ve?"never":"none"!==ye.exponentformat&&Wt(ye.showexponent)?"hide":"";if("date"===Ot?function(Pe,et,dt,xt){var Rt=Pe._tickround,Yt=dt&&Pe.hoverformat||q.getTickFormat(Pe);xt&&(Rt=m(Rt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Rt]);var nn,Kt=e.formatDate(et.x,Yt,Rt,Pe._dateFormat,Pe.calendar,Pe._extraFormat),Mn=Kt.indexOf("\n");if(-1!==Mn&&(nn=Kt.substr(Mn+1),Kt=Kt.substr(0,Mn)),xt&&("00:00:00"===Kt||"00:00"===Kt?(Kt=nn,nn=""):8===Kt.length&&(Kt=Kt.replace(/:00$/,""))),nn)if(dt)"d"===Rt?Kt+=", "+nn:Kt=nn+(Kt?", "+Kt:"");else if(Pe._inCalcTicks&&Pe._prevDateHead===nn){var Un=Xe(Pe),Tn=Pe._trueSide||Pe.side;(!Un&&"top"===Tn||Un&&"bottom"===Tn)&&(Kt+="<br> ")}else Pe._prevDateHead=nn,Kt+="<br>"+nn;et.text=Kt}(ye,Ke,Ve,gt):"log"===Ot?function(Pe,et,dt,xt,Rt){var Yt=Pe.dtick,nn=et.x,Kt=Pe.tickformat,Mn="string"==typeof Yt&&Yt.charAt(0);if("never"===Rt&&(Rt=""),xt&&"L"!==Mn&&(Yt="L3",Mn="L"),Kt||"L"===Mn)et.text=We(Math.pow(10,nn),Pe,Rt,xt);else if(m(Yt)||"D"===Mn&&e.mod(nn+.01,1)<.1){var Un=Math.round(nn),Tn=Math.abs(Un),un=Pe.exponentformat;"power"===un||Ne(un)&&Be(Un)?(et.text=0===Un?1:1===Un?"10":"10<sup>"+(Un>1?"":C)+Tn+"</sup>",et.fontSize*=1.25):("e"===un||"E"===un)&&Tn>2?et.text="1"+un+(Un>0?"+":C)+Tn:(et.text=We(Math.pow(10,nn),Pe,"","fakehover"),"D1"===Yt&&"y"===Pe._id.charAt(0)&&(et.dy-=et.fontSize/6))}else{if("D"!==Mn)throw"unrecognized dtick "+String(Yt);et.text=String(Math.round(Math.pow(10,e.mod(nn,1)))),et.fontSize*=.75}if("D1"===Pe.dtick){var an=String(et.text).charAt(0);"0"!==an&&"1"!==an||("y"===Pe._id.charAt(0)?et.dx-=et.fontSize/4:(et.dy+=et.fontSize/2,et.dx+=(Pe.range[1]>Pe.range[0]?1:-1)*et.fontSize*(nn<0?.5:.25)))}}(ye,Ke,0,gt,Pt):"category"===Ot?(et=Ke,void 0===(dt=ye._categories[Math.round(et.x)])&&(dt=""),et.text=String(dt)):"multicategory"===Ot?function(Pe,et,dt){var xt=Math.round(et.x),Rt=Pe._categories[xt]||[],Yt=void 0===Rt[1]?"":String(Rt[1]),nn=void 0===Rt[0]?"":String(Rt[0]);dt?et.text=nn+" - "+Yt:(et.text=Yt,et.text2=nn)}(ye,Ke,Ve):yn(ye)?function(Pe,et,dt,xt,Rt){if("radians"!==Pe.thetaunit||dt)et.text=We(et.x,Pe,Rt,xt);else{var Yt=et.x/180;if(0===Yt)et.text="0";else{var nn=function(Mn){function Un(fn,pn){return Math.abs(fn-pn)<=1e-6}var Tn=function(fn){for(var pn=1;!Un(Math.round(fn*pn)/pn,fn);)pn*=10;return pn}(Mn),un=Mn*Tn,an=Math.abs(function fn(pn,Sn){return Un(Sn,0)?pn:fn(Sn,pn%Sn)}(un,Tn));return[Math.round(un/an),Math.round(Tn/an)]}(Yt);if(nn[1]>=100)et.text=We(e.deg2rad(et.x),Pe,Rt,xt);else{var Kt=et.x<0;et.text=1===nn[1]?1===nn[0]?"\u03c0":nn[0]+"\u03c0":["<sup>",nn[0],"</sup>","\u2044","<sub>",nn[1],"</sub>","\u03c0"].join(""),Kt&&(et.text=C+et.text)}}}}(ye,Ke,Ve,gt,Pt):function(Pe,et,dt,xt,Rt){"never"===Rt?Rt="":"all"===Pe.showexponent&&Math.abs(et.x/Pe.dtick)<1e-6&&(Rt="hide"),et.text=We(et.x,Pe,Rt,xt)}(ye,Ke,0,gt,Pt),Je||(ye.tickprefix&&!Wt(ye.showtickprefix)&&(Ke.text=ye.tickprefix+Ke.text),ye.ticksuffix&&!Wt(ye.showticksuffix)&&(Ke.text+=ye.ticksuffix)),"boundaries"===ye.tickson||ye.showdividers){var Bt=function(Pe){var et=ye.l2p(Pe);return et>=0&&et<=ye._length?Pe:null};Ke.xbnd=[Bt(Ke.x-.5),Bt(Ke.x+ye.dtick-.5)]}return Ke},q.hoverLabelText=function(ye,ke,Ve){Ve&&(ye=e.extendFlat({},ye,{hoverformat:Ve}));var Je=Array.isArray(ke)?ke[0]:ke,nt=Array.isArray(ke)?ke[1]:void 0;if(void 0!==nt&&nt!==Je)return q.hoverLabelText(ye,Je,Ve)+" - "+q.hoverLabelText(ye,nt,Ve);var Ke="log"===ye.type&&Je<=0,vt=q.tickText(ye,ye.c2l(Ke?-Je:Je),"hover").text;return Ke?0===Je?"0":C+vt:vt};var rt=["f","p","n","\u03bc","m","","k","M","G","T"];function Ne(ye){return"SI"===ye||"B"===ye}function Be(ye){return ye>14||ye<-15}function We(ye,ke,Ve,Je){var nt=ye<0,Ke=ke._tickround,vt=Ve||ke.exponentformat||"B",gt=ke._tickexponent,Ot=q.getTickFormat(ke),Vt=ke.separatethousands;if(Je){var ft={exponentformat:vt,minexponent:ke.minexponent,dtick:"none"===ke.showexponent?ke.dtick:m(ye)&&Math.abs(ye)||1,range:"none"===ke.showexponent?ke.range.map(ke.r2d):[0,ye||1]};qe(ft),Ke=(Number(ft._tickround)||0)+4,gt=ft._tickexponent,ke.hoverformat&&(Ot=ke.hoverformat)}if(Ot)return ke._numFormat(Ot)(ye).replace(/-/g,C);var bt,Wt=Math.pow(10,-Ke)/2;if("none"===vt&&(gt=0),(ye=Math.abs(ye))<Wt)ye="0",nt=!1;else{if(ye+=Wt,gt&&(ye*=Math.pow(10,-gt),Ke+=gt),0===Ke)ye=String(Math.floor(ye));else if(Ke<0){ye=(ye=String(Math.round(ye))).substr(0,ye.length+Ke);for(var Pt=Ke;Pt<0;Pt++)ye+="0"}else{var Bt=(ye=String(ye)).indexOf(".")+1;Bt&&(ye=ye.substr(0,Bt+Ke).replace(/\.?0+$/,""))}ye=e.numSeparate(ye,ke._separators,Vt)}return gt&&"hide"!==vt&&(Ne(vt)&&Be(gt)&&(vt="power"),bt=gt<0?C+-gt:"power"!==vt?"+"+gt:String(gt),"e"===vt||"E"===vt?ye+=vt+bt:"power"===vt?ye+="\xd710<sup>"+bt+"</sup>":"B"===vt&&9===gt?ye+="B":Ne(vt)&&(ye+=rt[gt/3+5])),nt?C+ye:ye}function Ye(ye,ke){if(ye){var Ve=Object.keys(te).reduce(function(Je,nt){return-1!==ke.indexOf(nt)&&te[nt].forEach(function(Ke){Je[Ke]=1}),Je},{});Object.keys(ye).forEach(function(Je){Ve[Je]||(1===Je.length?ye[Je]=0:delete ye[Je])})}}function lt(ye,ke){for(var Ve=[],Je={},nt=0;nt<ke.length;nt++){var Ke=ke[nt];Je[Ke.text2]?Je[Ke.text2].push(Ke.x):Je[Ke.text2]=[Ke.x]}for(var vt in Je)Ve.push(je(ye,e.interp(Je[vt],.5),vt));return Ve}function mt(ye){return void 0!==ye.periodX?ye.periodX:ye.x}function Tt(ye){return[ye.text,ye.x,ye.axInfo,ye.font,ye.fontSize,ye.fontColor].join("_")}function It(ye){var ke=ye.title.font.size,Ve=(ye.title.text.match(n.BR_TAG_ALL)||[]).length;return ye.title.hasOwnProperty("standoff")?Ve?ke*(ae+Ve*U):ke*ae:Ve?ke*(Ve+1)*U:ke}function Ct(ye,ke){var Ve=ye.l2p(ke);return Ve>1&&Ve<ye._length-1}function ct(ye){var ke=g.select(ye),Ve=ke.select(".text-math-group");return Ve.empty()?ke.select("text"):Ve}function at(ye){return ye._id+".automargin"}function St(ye){return at(ye)+".mirror"}function Xt(ye){return ye._id+".rangeslider"}function tn(ye,ke){for(var Ve=0;Ve<ke.length;Ve++)-1===ye.indexOf(ke[Ve])&&ye.push(ke[Ve])}function hn(ye,ke,Ve){var Je,nt,Ke=[],vt=[],gt=ye.layout;for(Je=0;Je<ke.length;Je++)Ke.push(q.getFromId(ye,ke[Je]));for(Je=0;Je<Ve.length;Je++)vt.push(q.getFromId(ye,Ve[Je]));var Ot=Object.keys(s),Vt=["anchor","domain","overlaying","position","side","tickangle","editType"],ft=["linear","log"];for(Je=0;Je<Ot.length;Je++){var bt=Ot[Je],Wt=Ke[0][bt],Pt=vt[0][bt],Bt=!0,Pe=!1,et=!1;if("_"!==bt.charAt(0)&&"function"!=typeof Wt&&-1===Vt.indexOf(bt)){for(nt=1;nt<Ke.length&&Bt;nt++){var dt=Ke[nt][bt];"type"===bt&&-1!==ft.indexOf(Wt)&&-1!==ft.indexOf(dt)&&Wt!==dt?Pe=!0:dt!==Wt&&(Bt=!1)}for(nt=1;nt<vt.length&&Bt;nt++){var xt=vt[nt][bt];"type"===bt&&-1!==ft.indexOf(Pt)&&-1!==ft.indexOf(xt)&&Pt!==xt?et=!0:vt[nt][bt]!==Pt&&(Bt=!1)}Bt&&(Pe&&(gt[Ke[0]._name].type="linear"),et&&(gt[vt[0]._name].type="linear"),cn(gt,bt,Ke,vt,ye._fullLayout._dfltTitle))}}for(Je=0;Je<ye._fullLayout.annotations.length;Je++){var Rt=ye._fullLayout.annotations[Je];-1!==ke.indexOf(Rt.xref)&&-1!==Ve.indexOf(Rt.yref)&&e.swapAttrs(gt.annotations[Je],["?"])}}function cn(ye,ke,Ve,Je,nt){var Ke,vt=e.nestedProperty,gt=vt(ye[Ve[0]._name],ke).get(),Ot=vt(ye[Je[0]._name],ke).get();for("title"===ke&&(gt&&gt.text===nt.x&&(gt.text=nt.y),Ot&&Ot.text===nt.y&&(Ot.text=nt.x)),Ke=0;Ke<Ve.length;Ke++)vt(ye,Ve[Ke]._name+"."+ke).set(Ot);for(Ke=0;Ke<Je.length;Ke++)vt(ye,Je[Ke]._name+"."+ke).set(gt)}function yn(ye){return"angularaxis"===ye._id}function en(ye,ke){for(var Ve=ke._rangebreaks.length,Je=0;Je<Ve;Je++){var nt=ke._rangebreaks[Je];if(ye>=nt.min&&ye<nt.max)return nt.max}return ye}function Xe(ye){return-1!==(ye.ticklabelposition||"").indexOf("inside")}function tt(ye,ke){Xe(ye._anchorAxis||{})&&ye._hideCounterAxisInsideTickLabels&&ye._hideCounterAxisInsideTickLabels(ke)}q.getTickFormat=function(ye){var ke,Ve,Je,nt,Ke,vt,gt,Ot,Wt,Pt,Bt,Pe,et,dt;function Vt(Wt){return"string"!=typeof Wt?Wt:Number(Wt.replace("M",""))*T}function ft(Wt,Pt){var Bt=["L","D"];if(typeof Wt==typeof Pt){if("number"==typeof Wt)return Wt-Pt;var Pe=Bt.indexOf(Wt.charAt(0)),et=Bt.indexOf(Pt.charAt(0));return Pe===et?Number(Wt.replace(/(L|D)/g,""))-Number(Pt.replace(/(L|D)/g,"")):Pe-et}return"number"==typeof Wt?1:-1}if(ye.tickformatstops&&ye.tickformatstops.length>0)switch(ye.type){case"date":case"linear":for(ke=0;ke<ye.tickformatstops.length;ke++)if((Je=ye.tickformatstops[ke]).enabled&&(nt=ye.dtick,vt=void 0,void 0,void 0,vt=Vt||function(Wt){return Wt},Ot=(Ke=Je.dtickrange)[1],(!(gt=Ke[0])&&"number"!=typeof gt||vt(gt)<=vt(nt))&&(!Ot&&"number"!=typeof Ot||vt(Ot)>=vt(nt)))){Ve=Je;break}break;case"log":for(ke=0;ke<ye.tickformatstops.length;ke++)if((Je=ye.tickformatstops[ke]).enabled&&(Bt=void 0,Pe=void 0,et=void 0,dt=void 0,Bt=null===(Pt=Je.dtickrange)[0],Pe=null===Pt[1],et=ft(Wt=ye.dtick,Pt[0])>=0,dt=ft(Wt,Pt[1])<=0,(Bt||et)&&(Pe||dt))){Ve=Je;break}}return Ve?Ve.value:ye.tickformat},q.getSubplots=function(ye,ke){var Ve=ye._fullLayout._subplots,Je=Ve.cartesian.concat(Ve.gl2d||[]),nt=ke?q.findSubplotsWithAxis(Je,ke):Je;return nt.sort(function(Ke,vt){var gt=Ke.substr(1).split("y"),Ot=vt.substr(1).split("y");return gt[0]===Ot[0]?+gt[1]-+Ot[1]:+gt[0]-+Ot[0]}),nt},q.findSubplotsWithAxis=function(ye,ke){for(var Ve=new RegExp("x"===ke._id.charAt(0)?"^"+ke._id+"y":ke._id+"$"),Je=[],nt=0;nt<ye.length;nt++){var Ke=ye[nt];Ve.test(Ke)&&Je.push(Ke)}return Je},q.makeClipPaths=function(ye){var ke=ye._fullLayout;if(!ke._hasOnlyLargeSploms){var Ve,Je,nt={_offset:0,_length:ke.width,_id:""},Ke={_offset:0,_length:ke.height,_id:""},vt=q.list(ye,"x",!0),gt=q.list(ye,"y",!0),Ot=[];for(Ve=0;Ve<vt.length;Ve++)for(Ot.push({x:vt[Ve],y:Ke}),Je=0;Je<gt.length;Je++)0===Ve&&Ot.push({x:nt,y:gt[Je]}),Ot.push({x:vt[Ve],y:gt[Je]});var Vt=ke._clips.selectAll(".axesclip").data(Ot,function(ft){return ft.x._id+ft.y._id});Vt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(ft){return"clip"+ke._uid+ft.x._id+ft.y._id}).append("rect"),Vt.exit().remove(),Vt.each(function(ft){g.select(this).select("rect").attr({x:ft.x._offset||0,y:ft.y._offset||0,width:ft.x._length||1,height:ft.y._length||1})})}},q.draw=function(ye,ke,Ve){var Je=ye._fullLayout;"redraw"===ke&&Je._paper.selectAll("g.subplot").each(function(Ke){var gt=Je._plots[Ke[0]];if(gt){var Ot=gt.xaxis,Vt=gt.yaxis;gt.xaxislayer.selectAll("."+Ot._id+"tick").remove(),gt.yaxislayer.selectAll("."+Vt._id+"tick").remove(),gt.xaxislayer.selectAll("."+Ot._id+"tick2").remove(),gt.yaxislayer.selectAll("."+Vt._id+"tick2").remove(),gt.xaxislayer.selectAll("."+Ot._id+"divider").remove(),gt.yaxislayer.selectAll("."+Vt._id+"divider").remove(),gt.minorGridlayer&&gt.minorGridlayer.selectAll("path").remove(),gt.gridlayer&&gt.gridlayer.selectAll("path").remove(),gt.zerolinelayer&&gt.zerolinelayer.selectAll("path").remove(),Je._infolayer.select(".g-"+Ot._id+"title").remove(),Je._infolayer.select(".g-"+Vt._id+"title").remove()}});var nt=ke&&"redraw"!==ke?ke:q.listIds(ye);return e.syncOrAsync(nt.map(function(Ke){return function(){if(Ke){var vt=q.getFromId(ye,Ke),gt=q.drawOne(ye,vt,Ve);return vt._r=vt.range.slice(),vt._rl=e.simpleMap(vt._r,vt.r2l),gt}}}))},q.drawOne=function(ye,ke,Ve){var Je,nt,Ke;Ve=Ve||{},ke.setScale();var vt=ye._fullLayout,gt=ke._id,Ot=gt.charAt(0),Vt=q.counterLetter(gt),ft=vt._plots[ke._mainSubplot];if(ft){var bt=ft[Ot+"axislayer"],Wt=ke._mainLinePosition,Pt=ke._mainMirrorPosition,Bt=ke._vals=q.calcTicks(ke),Pe=[ke.mirror,Wt,Pt].join("_");for(Je=0;Je<Bt.length;Je++)Bt[Je].axInfo=Pe;ke._selections={},ke._tickAngles&&(ke._prevTickAngles=ke._tickAngles),ke._tickAngles={},ke._depth=null;var et={};if(ke.visible){var dt,xt,Rt=q.makeTransTickFn(ke),Yt=q.makeTransTickLabelFn(ke),nn="inside"===ke.ticks,Kt="outside"===ke.ticks;if("boundaries"===ke.tickson){var Mn=function(dn,Cn){var jt,bn=[],An=function($n,Gn){var zn=$n.xbnd[Gn];null!==zn&&bn.push(e.extendFlat({},$n,{x:zn}))};if(Cn.length){for(jt=0;jt<Cn.length;jt++)An(Cn[jt],0);An(Cn[jt-1],1)}return bn}(0,Bt);xt=q.clipEnds(ke,Mn),dt=nn?xt:Mn}else xt=q.clipEnds(ke,Bt),dt=nn&&"period"!==ke.ticklabelmode?xt:Bt;var Un,Tn=ke._gridVals=xt,un=function(dn,Cn){var jt,bn,An=[],$n=Cn.length&&Cn[Cn.length-1].x<Cn[0].x,Gn=function(Hn,Ln){var On=Hn.xbnd[Ln];null!==On&&An.push(e.extendFlat({},Hn,{x:On}))};if(dn.showdividers&&Cn.length){for(jt=0;jt<Cn.length;jt++){var zn=Cn[jt];zn.text2!==bn&&Gn(zn,$n?1:0),bn=zn.text2}Gn(Cn[jt-1],$n?0:1)}return An}(ke,Bt);if(!vt._hasOnlyLargeSploms){var an=ke._subplotsWith,fn={};for(Je=0;Je<an.length;Je++){var pn=(Ke=vt._plots[nt=an[Je]])[Vt+"axis"],Sn=pn._mainAxis._id;if(!fn[Sn]){fn[Sn]=1;var Nn="x"===Ot?"M0,"+pn._offset+"v"+pn._length:"M"+pn._offset+",0h"+pn._length;q.drawGrid(ye,ke,{vals:Tn,counterAxis:pn,layer:Ke.gridlayer.select("."+gt),minorLayer:Ke.minorGridlayer.select("."+gt),path:Nn,transFn:Rt}),q.drawZeroLine(ye,ke,{counterAxis:pn,layer:Ke.zerolinelayer,path:Nn,transFn:Rt})}}}var Kn=q.getTickSigns(ke),Bn=q.getTickSigns(ke,"minor");if(ke.ticks||ke.minor&&ke.minor.ticks){var cr,Lr,Qn,qr,sr=q.makeTickPath(ke,Wt,Kn[2]),hr=q.makeTickPath(ke,Wt,Bn[2],{minor:!0});if(ke._anchorAxis&&ke.mirror&&!0!==ke.mirror?(cr=q.makeTickPath(ke,Pt,Kn[3]),Lr=q.makeTickPath(ke,Pt,Bn[3],{minor:!0}),Qn=sr+cr,qr=hr+Lr):(cr="",Lr="",Qn=sr,qr=hr),ke.showdividers&&Kt&&"boundaries"===ke.tickson){var jr={};for(Je=0;Je<un.length;Je++)jr[un[Je].x]=1;Un=function(dn){return jr[dn.x]?cr:Qn}}else Un=function(dn){return dn.minor?qr:Qn}}if(q.drawTicks(ye,ke,{vals:dt,layer:bt,path:Un,transFn:Rt}),"allticks"===ke.mirror){var di=Object.keys(ke._linepositions||{});for(Je=0;Je<di.length;Je++){Ke=vt._plots[nt=di[Je]];var Jn=ke._linepositions[nt]||[],mr=Jn[1],lr=Jn[2],ri=q.makeTickPath(ke,Jn[0],lr?Kn[0]:Bn[0],{minor:lr})+q.makeTickPath(ke,mr,lr?Kn[1]:Bn[1],{minor:lr});q.drawTicks(ye,ke,{vals:dt,layer:Ke[Ot+"axislayer"],path:ri,transFn:Rt})}}var si=[];if(si.push(function(){return q.drawLabels(ye,ke,{vals:Bt,layer:bt,plotinfo:Ke,transFn:Yt,labelFns:q.makeLabelFns(ke,Wt)})}),"multicategory"===ke.type){var Tr={x:2,y:10}[Ot];si.push(function(){var dn={x:"height",y:"width"}[Ot],Cn=Ii()[dn]+Tr+(ke._tickAngles[gt+"tick"]?ke.tickfont.size*U:0);return q.drawLabels(ye,ke,{vals:lt(ke,Bt),layer:bt,cls:gt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Rt,labelFns:q.makeLabelFns(ke,Wt+Cn*Kn[4])})}),si.push(function(){return ke._depth=Kn[4]*(Ii("tick2")[ke.side]-Wt),dn=ye,Cn=ke,An=(jt={vals:un,layer:bt,path:q.makeTickPath(ke,Wt,Kn[4],{len:ke._depth}),transFn:Rt}).vals,($n=jt.layer.selectAll("path."+(bn=Cn._id+"divider")).data(An,Tt)).exit().remove(),$n.enter().insert("path",":first-child").classed(bn,1).classed("crisp",1).call(t.stroke,Cn.dividercolor).style("stroke-width",p.crispRound(dn,Cn.dividerwidth,1)+"px"),void $n.attr("transform",jt.transFn).attr("d",jt.path);var dn,Cn,jt,bn,An,$n})}else ke.title.hasOwnProperty("standoff")&&si.push(function(){ke._depth=Kn[4]*(Ii()[ke.side]-Wt)});var Zr=y.getComponentMethod("rangeslider","isVisible")(ke);return si.push(function(){var dn,Cn,jt,bn,An=ke.side.charAt(0),$n=V[ke.side].charAt(0),Gn=q.getPxPosition(ye,ke),zn=Kt?ke.ticklen:0;if((ke.automargin||Zr)&&("multicategory"===ke.type?dn=Ii("tick2"):(dn=Ii(),"x"===Ot&&"b"===An&&(ke._depth=Math.max(dn.width>0?dn.bottom-Gn:0,zn)))),ke.automargin){Cn={x:0,y:0,r:0,l:0,t:0,b:0};var Hn=[0,1];if("x"===Ot){if("b"===An?Cn[An]=ke._depth:(Cn[An]=ke._depth=Math.max(dn.width>0?Gn-dn.top:0,zn),Hn.reverse()),dn.width>0){var Ln=dn.right-(ke._offset+ke._length);Ln>0&&(Cn.xr=1,Cn.r=Ln);var On=ke._offset-dn.left;On>0&&(Cn.xl=0,Cn.l=On)}}else if("l"===An?Cn[An]=ke._depth=Math.max(dn.height>0?Gn-dn.left:0,zn):(Cn[An]=ke._depth=Math.max(dn.height>0?dn.right-Gn:0,zn),Hn.reverse()),dn.height>0){var Dn=dn.bottom-(ke._offset+ke._length);Dn>0&&(Cn.yb=0,Cn.b=Dn);var Yn=ke._offset-dn.top;Yn>0&&(Cn.yt=1,Cn.t=Yn)}Cn[Vt]="free"===ke.anchor?ke.position:ke._anchorAxis.domain[Hn[0]],ke.title.text!==vt._dfltTitle[Ot]&&(Cn[An]+=It(ke)+(ke.title.standoff||0)),ke.mirror&&"free"!==ke.anchor&&((jt={x:0,y:0,r:0,l:0,t:0,b:0})[$n]=ke.linewidth,ke.mirror&&!0!==ke.mirror&&(jt[$n]+=zn),!0===ke.mirror||"ticks"===ke.mirror?jt[Vt]=ke._anchorAxis.domain[Hn[1]]:"all"!==ke.mirror&&"allticks"!==ke.mirror||(jt[Vt]=[ke._counterDomainMin,ke._counterDomainMax][Hn[1]]))}Zr&&(bn=y.getComponentMethod("rangeslider","autoMarginOpts")(ye,ke)),"string"==typeof ke.automargin&&(Ye(Cn,ke.automargin),Ye(jt,ke.automargin)),b.autoMargin(ye,at(ke),Cn),b.autoMargin(ye,St(ke),jt),b.autoMargin(ye,Xt(ke),bn)}),Ve.skipTitle||Zr&&"bottom"===ke.side||si.push(function(){return function(dn,Cn){var jt,bn=dn._fullLayout,An=Cn._id,$n=An.charAt(0),Gn=Cn.title.font.size;if(Cn.title.hasOwnProperty("standoff"))jt=Cn._depth+Cn.title.standoff+It(Cn);else{var zn=Xe(Cn);if("multicategory"===Cn.type)jt=Cn._depth;else{var Hn=1.5*Gn;zn&&(Hn=.5*Gn,"outside"===Cn.ticks&&(Hn+=Cn.ticklen)),jt=10+Hn+(Cn.linewidth?Cn.linewidth-1:0)}zn||(jt+="x"===$n?"top"===Cn.side?Gn*(Cn.showticklabels?1:0):Gn*(Cn.showticklabels?1.5:.5):"right"===Cn.side?Gn*(Cn.showticklabels?1:.5):Gn*(Cn.showticklabels?.5:0))}var Ln,On,Dn,Yn,rr=q.getPxPosition(dn,Cn);if("x"===$n?(On=Cn._offset+Cn._length/2,Dn="top"===Cn.side?rr-jt:rr+jt):(Dn=Cn._offset+Cn._length/2,On="right"===Cn.side?rr+jt:rr-jt,Ln={rotate:"-90",offset:0}),"multicategory"!==Cn.type){var ar=Cn._selections[Cn._id+"tick"];if(Yn={selection:ar,side:Cn.side},ar&&ar.node()&&ar.node().parentNode){var vr=p.getTranslate(ar.node().parentNode);Yn.offsetLeft=vr.x,Yn.offsetTop=vr.y}Cn.title.hasOwnProperty("standoff")&&(Yn.pad=0)}return a.draw(dn,An+"title",{propContainer:Cn,propName:Cn._name+".title.text",placeholder:bn._dfltTitle[$n],avoid:Yn,transform:Ln,attributes:{x:On,y:Dn,"text-anchor":"middle"}})}(ye,ke)}),e.syncOrAsync(si)}}function Ii(dn){var jt,bn,An,$n,Gn,zn,Cn=gt+(dn||"tick");return et[Cn]||(et[Cn]=((jt=ke)._selections[bn=Cn].size()?(An=1/0,$n=-1/0,Gn=1/0,zn=-1/0,jt._selections[bn].each(function(){var Hn=ct(this),Ln=p.bBox(Hn.node().parentNode);An=Math.min(An,Ln.top),$n=Math.max($n,Ln.bottom),Gn=Math.min(Gn,Ln.left),zn=Math.max(zn,Ln.right)})):(An=0,$n=0,Gn=0,zn=0),{top:An,bottom:$n,left:Gn,right:zn,height:$n-An,width:zn-Gn})),et[Cn]}},q.getTickSigns=function(ye,ke){var Ve=ye._id.charAt(0),nt=ye.side==={x:"top",y:"right"}[Ve]?1:-1,Ke=[-1,1,nt,-nt];return"inside"!==(ke?(ye.minor||{}).ticks:ye.ticks)==("x"===Ve)&&(Ke=Ke.map(function(vt){return-vt})),ye.side&&Ke.push({l:-1,t:-1,r:1,b:1}[ye.side.charAt(0)]),Ke},q.makeTransTickFn=function(ye){return"x"===ye._id.charAt(0)?function(ke){return r(ye._offset+ye.l2p(ke.x),0)}:function(ke){return r(0,ye._offset+ye.l2p(ke.x))}},q.makeTransTickLabelFn=function(ye){var ke=function(nt){var Ke=nt.ticklabelposition||"",vt=function(dt){return-1!==Ke.indexOf(dt)},gt=vt("top"),Ot=vt("left"),Vt=vt("right"),ft=vt("bottom"),bt=vt("inside"),Wt=ft||Ot||gt||Vt;if(!Wt&&!bt)return[0,0];var Pt=nt.side,Bt=Wt?(nt.tickwidth||0)/2:0,Pe=3,et=nt.tickfont?nt.tickfont.size:12;return(ft||gt)&&(Bt+=et*ae,Pe+=(nt.linewidth||0)/2),(Ot||Vt)&&(Bt+=(nt.linewidth||0)/2,Pe+=3),bt&&"top"===Pt&&(Pe-=et*(1-ae)),(Ot||gt)&&(Bt=-Bt),"bottom"!==Pt&&"right"!==Pt||(Pe=-Pe),[Wt?Bt:0,bt?Pe:0]}(ye),Ve=ke[0],Je=ke[1];return"x"===ye._id.charAt(0)?function(nt){return r(Ve+ye._offset+ye.l2p(mt(nt)),Je)}:function(nt){return r(Je,Ve+ye._offset+ye.l2p(mt(nt)))}},q.makeTickPath=function(ye,ke,Ve,Je){Je||(Je={});var nt=Je.minor;if(nt&&!ye.minor)return"";var Ke=void 0!==Je.len?Je.len:nt?ye.minor.ticklen:ye.ticklen,vt=ye._id.charAt(0),gt=(ye.linewidth||1)/2;return"x"===vt?"M0,"+(ke+gt*Ve)+"v"+Ke*Ve:"M"+(ke+gt*Ve)+",0h"+Ke*Ve},q.makeLabelFns=function(ye,ke,Ve){var Je=ye.ticklabelposition||"",nt=function(an){return-1!==Je.indexOf(an)},Ke=nt("top"),vt=nt("left"),gt=nt("right"),Ot=nt("bottom")||vt||Ke||gt,Vt=nt("inside"),ft="inside"===Je&&"inside"===ye.ticks||!Vt&&"outside"===ye.ticks&&"boundaries"!==ye.tickson,bt=0,Wt=0,Pt=ft?ye.ticklen:0;if(Vt?Pt*=-1:Ot&&(Pt=0),ft&&(bt+=Pt,Ve)){var Bt=e.deg2rad(Ve);bt=Pt*Math.cos(Bt)+1,Wt=Pt*Math.sin(Bt)}ye.showticklabels&&(ft||ye.showline)&&(bt+=.2*ye.tickfont.size);var Pe,et,dt,xt,Rt,Yt={labelStandoff:bt+=(ye.linewidth||1)/2*(Vt?-1:1),labelShift:Wt},nn=0,Kt=ye.side,Mn=ye._id.charAt(0),Un=ye.tickangle;if("x"===Mn)xt=(Rt=!Vt&&"bottom"===Kt||Vt&&"top"===Kt)?1:-1,Vt&&(xt*=-1),Pe=Wt*xt,et=ke+bt*xt,dt=Rt?1:-.2,90===Math.abs(Un)&&(Vt?dt+=K:dt=-90===Un&&"bottom"===Kt?ae:90===Un&&"top"===Kt?K:.5,nn=K/2*(Un/90)),Yt.xFn=function(an){return an.dx+Pe+nn*an.fontSize},Yt.yFn=function(an){return an.dy+et+an.fontSize*dt},Yt.anchorFn=function(an,fn){if(Ot){if(vt)return"end";if(gt)return"start"}return m(fn)&&0!==fn&&180!==fn?fn*xt<0!==Vt?"end":"start":"middle"},Yt.heightFn=function(an,fn,pn){return fn<-60||fn>60?-.5*pn:"top"===ye.side!==Vt?-pn:0};else if("y"===Mn){if(xt=(Rt=!Vt&&"left"===Kt||Vt&&"right"===Kt)?1:-1,Vt&&(xt*=-1),Pe=bt,et=Wt*xt,dt=0,Vt||90!==Math.abs(Un)||(dt=-90===Un&&"left"===Kt||90===Un&&"right"===Kt?ae:.5),Vt){var Tn=m(Un)?+Un:0;if(0!==Tn){var un=e.deg2rad(Tn);nn=Math.abs(Math.sin(un))*ae*xt,dt=0}}Yt.xFn=function(an){return an.dx+ke-(Pe+an.fontSize*dt)*xt+nn*an.fontSize},Yt.yFn=function(an){return an.dy+et+an.fontSize*K},Yt.anchorFn=function(an,fn){return m(fn)&&90===Math.abs(fn)?"middle":Rt?"end":"start"},Yt.heightFn=function(an,fn,pn){return"right"===ye.side&&(fn*=-1),fn<-30?-pn:fn<30?-.5*pn:0}}return Yt},q.drawTicks=function(ye,ke,Ve){Ve=Ve||{};var Je=ke._id+"tick",nt=[].concat(ke.minor&&ke.minor.ticks?Ve.vals.filter(function(vt){return vt.minor&&!vt.noTick}):[]).concat(ke.ticks?Ve.vals.filter(function(vt){return!vt.minor&&!vt.noTick}):[]),Ke=Ve.layer.selectAll("path."+Je).data(nt,Tt);Ke.exit().remove(),Ke.enter().append("path").classed(Je,1).classed("ticks",1).classed("crisp",!1!==Ve.crisp).each(function(vt){return t.stroke(g.select(this),vt.minor?ke.minor.tickcolor:ke.tickcolor)}).style("stroke-width",function(vt){return p.crispRound(ye,vt.minor?ke.minor.tickwidth:ke.tickwidth,1)+"px"}).attr("d",Ve.path).style("display",null),tt(ke,[G]),Ke.attr("transform",Ve.transFn)},q.drawGrid=function(ye,ke,Ve){Ve=Ve||{};var Je=ke._id+"grid",nt=ke.minor&&ke.minor.showgrid,Ke=nt?Ve.vals.filter(function(dt){return dt.minor}):[],vt=ke.showgrid?Ve.vals.filter(function(dt){return!dt.minor}):[],gt=Ve.counterAxis;if(gt&&q.shouldShowZeroLine(ye,ke,gt))for(var Ot="array"===ke.tickmode,Vt=0;Vt<vt.length;Vt++){var ft=vt[Vt].x;if(Ot?!ft:Math.abs(ft)<ke.dtick/100){if(vt=vt.slice(0,Vt).concat(vt.slice(Vt+1)),!Ot)break;Vt--}}ke._gw=p.crispRound(ye,ke.gridwidth,1);for(var bt=nt?p.crispRound(ye,ke.minor.gridwidth,1):0,Wt=Ve.layer,Pt=Ve.minorLayer,Bt=1;Bt>=0;Bt--){var Pe=Bt?Wt:Pt;if(Pe){var et=Pe.selectAll("path."+Je).data(Bt?vt:Ke,Tt);et.exit().remove(),et.enter().append("path").classed(Je,1).classed("crisp",!1!==Ve.crisp),et.attr("transform",Ve.transFn).attr("d",Ve.path).each(function(dt){return t.stroke(g.select(this),dt.minor?ke.minor.gridcolor:ke.gridcolor||"#ddd")}).style("stroke-dasharray",function(dt){return p.dashStyle(dt.minor?ke.minor.griddash:ke.griddash,dt.minor?ke.minor.gridwidth:ke.gridwidth)}).style("stroke-width",function(dt){return(dt.minor?bt:ke._gw)+"px"}).style("display",null),"function"==typeof Ve.path&&et.attr("d",Ve.path)}}tt(ke,[z,Y])},q.drawZeroLine=function(ye,ke,Ve){var Je=ke._id+"zl",nt=q.shouldShowZeroLine(ye,ke,(Ve=Ve||Ve).counterAxis),Ke=Ve.layer.selectAll("path."+Je).data(nt?[{x:0,id:ke._id}]:[]);Ke.exit().remove(),Ke.enter().append("path").classed(Je,1).classed("zl",1).classed("crisp",!1!==Ve.crisp).each(function(){Ve.layer.selectAll("path").sort(function(vt,gt){return ee(vt.id,gt.id)})}),Ke.attr("transform",Ve.transFn).attr("d",Ve.path).call(t.stroke,ke.zerolinecolor||t.defaultLine).style("stroke-width",p.crispRound(ye,ke.zerolinewidth,ke._gw||1)+"px").style("display",null),tt(ke,[B])},q.drawLabels=function(ye,ke,Ve){Ve=Ve||{};var Je=ye._fullLayout,nt=ke._id,Ke=nt.charAt(0),vt=Ve.cls||nt+"tick",gt=Ve.vals.filter(function(xt){return xt.text}),Ot=Ve.labelFns,Vt=Ve.secondary?0:ke.tickangle,ft=(ke._prevTickAngles||{})[vt],bt=Ve.layer.selectAll("g."+vt).data(ke.showticklabels?gt:[],Tt),Wt=[];function Pt(xt,Rt){xt.each(function(Yt){var nn=g.select(this),Kt=nn.select(".text-math-group"),Mn=Ot.anchorFn(Yt,Rt),Un=Ve.transFn.call(nn.node(),Yt)+(m(Rt)&&0!=+Rt?" rotate("+Rt+","+Ot.xFn(Yt)+","+(Ot.yFn(Yt)-Yt.fontSize/2)+")":""),Tn=n.lineCount(nn),un=U*Yt.fontSize,an=Ot.heightFn(Yt,m(Rt)?+Rt:0,(Tn-1)*un);if(an&&(Un+=r(0,an)),Kt.empty()){var fn=nn.select("text");fn.attr({transform:Un,"text-anchor":Mn}),fn.style("opacity",1),ke._adjustTickLabelsOverflow&&ke._adjustTickLabelsOverflow()}else{var pn=p.bBox(Kt.node()).width*{end:-.5,start:.5}[Mn];Kt.attr("transform",Un+r(pn,0))}})}bt.enter().append("g").classed(vt,1).append("text").attr("text-anchor","middle").each(function(xt){var Rt=g.select(this),Yt=ye._promises.length;Rt.call(n.positionText,Ot.xFn(xt),Ot.yFn(xt)).call(p.font,xt.font,xt.fontSize,xt.fontColor).text(xt.text).call(n.convertToTspans,ye),ye._promises[Yt]?Wt.push(ye._promises.pop().then(function(){Pt(Rt,Vt)})):Pt(Rt,Vt)}),tt(ke,[J]),bt.exit().remove(),Ve.repositionOnUpdate&&bt.each(function(xt){g.select(this).select("text").call(n.positionText,Ot.xFn(xt),Ot.yFn(xt))}),ke._adjustTickLabelsOverflow=function(){var xt=ke.ticklabeloverflow;if(xt&&"allow"!==xt){var Rt=-1!==xt.indexOf("hide"),Yt="x"===ke._id.charAt(0),nn=0,Kt=Yt?ye._fullLayout.width:ye._fullLayout.height;if(-1!==xt.indexOf("domain")){var Mn=e.simpleMap(ke.range,ke.r2l);nn=ke.l2p(Mn[0])+ke._offset,Kt=ke.l2p(Mn[1])+ke._offset}var Un=Math.min(nn,Kt),Tn=Math.max(nn,Kt),un=ke.side,an=1/0,fn=-1/0;for(var pn in bt.each(function(Kn){var Bn=g.select(this);if(Bn.select(".text-math-group").empty()){var cr=p.bBox(Bn.node()),Lr=0;Yt?(cr.right>Tn||cr.left<Un)&&(Lr=1):(cr.bottom>Tn||cr.top+(ke.tickangle?0:Kn.fontSize/4)<Un)&&(Lr=1);var Qn=Bn.select("text");Lr?Rt&&Qn.style("opacity",0):(Qn.style("opacity",1),an="bottom"===un||"right"===un?Math.min(an,Yt?cr.top:cr.left):-1/0,fn="top"===un||"left"===un?Math.max(fn,Yt?cr.bottom:cr.right):1/0)}}),Je._plots){var Sn=Je._plots[pn];if(ke._id===Sn.xaxis._id||ke._id===Sn.yaxis._id){var Nn=Yt?Sn.yaxis:Sn.xaxis;Nn&&(Nn["_visibleLabelMin_"+ke._id]=an,Nn["_visibleLabelMax_"+ke._id]=fn)}}}},ke._hideCounterAxisInsideTickLabels=function(xt){var Rt="x"===ke._id.charAt(0),Yt=[];for(var nn in Je._plots){var Kt=Je._plots[nn];ke._id!==Kt.xaxis._id&&ke._id!==Kt.yaxis._id||Yt.push(Rt?Kt.yaxis:Kt.xaxis)}Yt.forEach(function(Mn,Un){Mn&&Xe(Mn)&&(xt||[B,Y,z,G,J]).forEach(function(Tn){var un="tick"===Tn.K&&"text"===Tn.L&&"period"===ke.ticklabelmode,an=Je._plots[ke._mainSubplot];(Tn.K===B.K?an.zerolinelayer.selectAll("."+ke._id+"zl"):Tn.K===Y.K?an.minorGridlayer.selectAll("."+ke._id):Tn.K===z.K?an.gridlayer.selectAll("."+ke._id):an[ke._id.charAt(0)+"axislayer"]).each(function(){var fn=g.select(this);Tn.L&&(fn=fn.selectAll(Tn.L)),fn.each(function(pn){var Sn=ke.l2p(un?mt(pn):pn.x)+ke._offset,Nn=g.select(this);Sn<ke["_visibleLabelMax_"+Mn._id]&&Sn>ke["_visibleLabelMin_"+Mn._id]?Nn.style("display","none"):"tick"!==Tn.K||Un||Nn.style("display",null)})})})})},Pt(bt,ft+1?ft:Vt);var Bt=null;ke._selections&&(ke._selections[vt]=bt);var Pe=[function(){return Wt.length&&Promise.all(Wt)}];ke.automargin&&Je._redrawFromAutoMarginCount&&90===ft?(Bt=90,Pe.push(function(){Pt(bt,ft)})):Pe.push(function(){if(Pt(bt,Vt),gt.length&&"x"===Ke&&!m(Vt)&&("log"!==ke.type||"D"!==String(ke.dtick).charAt(0))){Bt=0;var xt,Rt=0,Yt=[];if(bt.each(function(Bn){Rt=Math.max(Rt,Bn.fontSize);var cr=ke.l2p(Bn.x),Lr=ct(this),Qn=p.bBox(Lr.node());Yt.push({top:0,bottom:10,height:10,left:cr-Qn.width/2,right:cr+Qn.width/2+2,width:Qn.width+2})}),"boundaries"!==ke.tickson&&!ke.showdividers||Ve.secondary){var nn=gt.length,Kt=Math.abs((gt[nn-1].x-gt[0].x)*ke._m)/(nn-1),Mn=ke.ticklabelposition||"",Un=function(Bn){return-1!==Mn.indexOf(Bn)},Tn=Un("top"),un=Un("left"),an=Un("right"),fn=Un("bottom")||un||Tn||an?(ke.tickwidth||0)+6:0,pn=Kt<2.5*Rt||"multicategory"===ke.type||"realaxis"===ke._name;for(xt=0;xt<Yt.length-1;xt++)if(e.bBoxIntersect(Yt[xt],Yt[xt+1],fn)){Bt=pn?90:30;break}}else{var Sn=2;for(ke.ticks&&(Sn+=ke.tickwidth/2),xt=0;xt<Yt.length;xt++){var Nn=gt[xt].xbnd,Kn=Yt[xt];if(null!==Nn[0]&&Kn.left-ke.l2p(Nn[0])<Sn||null!==Nn[1]&&ke.l2p(Nn[1])-Kn.right<Sn){Bt=90;break}}}Bt&&Pt(bt,Bt)}}),ke._tickAngles&&Pe.push(function(){ke._tickAngles[vt]=null===Bt?m(Vt)?Vt:0:Bt});var et=ke._anchorAxis;et&&et.autorange&&Xe(ke)&&!Q(Je,ke._id)&&(Je._insideTickLabelsAutorange||(Je._insideTickLabelsAutorange={}),Je._insideTickLabelsAutorange[et._name+".autorange"]=et.autorange,Pe.push(function(){bt.each(function(xt,Rt){var Yt=ct(this);Yt.select(".text-math-group").empty()&&(ke._vals[Rt].bb=p.bBox(Yt.node()))})}));var dt=e.syncOrAsync(Pe);return dt&&dt.then&&ye._promises.push(dt),dt},q.getPxPosition=function(ye,ke){var Ve,Je=ye._fullLayout._size,nt=ke._id.charAt(0),Ke=ke.side;return"free"!==ke.anchor?Ve=ke._anchorAxis:"x"===nt?Ve={_offset:Je.t+(1-(ke.position||0))*Je.h,_length:0}:"y"===nt&&(Ve={_offset:Je.l+(ke.position||0)*Je.w,_length:0}),"top"===Ke||"left"===Ke?Ve._offset:"bottom"===Ke||"right"===Ke?Ve._offset+Ve._length:void 0},q.shouldShowZeroLine=function(ye,ke,Ve){var Je=e.simpleMap(ke.range,ke.r2l);return Je[0]*Je[1]<=0&&ke.zeroline&&("linear"===ke.type||"-"===ke.type)&&!(ke.rangebreaks&&ke.maskBreaks(0)===D)&&(Ct(ke,0)||!function(nt,Ke,vt,gt){var Ot=vt._mainAxis;if(Ot){var Vt=nt._fullLayout,ft=Ke._id.charAt(0),bt=q.counterLetter(Ke._id),Wt=Ke._offset+(Math.abs(gt[0])<Math.abs(gt[1])==("x"===ft)?0:Ke._length),Bt=Vt._plots[vt._mainSubplot];if(!(Bt.mainplotinfo||Bt).overlays.length)return Pt(vt);for(var Pe=q.list(nt,bt),et=0;et<Pe.length;et++){var dt=Pe[et];if(dt._mainAxis===Ot&&Pt(dt))return!0}}function Pt(xt){if(!xt.showline||!xt.linewidth)return!1;var Rt=Math.max((xt.linewidth+Ke.zerolinewidth)/2,1);function Yt(Mn){return"number"==typeof Mn&&Math.abs(Mn-Wt)<Rt}if(Yt(xt._mainLinePosition)||Yt(xt._mainMirrorPosition))return!0;var nn=xt._linepositions||{};for(var Kt in nn)if(Yt(nn[Kt][0])||Yt(nn[Kt][1]))return!0}}(ye,ke,Ve,Je)||function(nt,Ke){for(var vt=nt._fullData,gt=Ke._mainSubplot,Ot=Ke._id.charAt(0),Vt=0;Vt<vt.length;Vt++){var ft=vt[Vt];if(!0===ft.visible&&ft.xaxis+ft.yaxis===gt&&(y.traceIs(ft,"bar-like")&&ft.orientation==={x:"h",y:"v"}[Ot]||ft.fill&&ft.fill.charAt(ft.fill.length-1)===Ot))return!0}return!1}(ye,ke))},q.clipEnds=function(ye,ke){return ke.filter(function(Ve){return Ct(ye,Ve.x)})},q.allowAutoMargin=function(ye){for(var ke=q.list(ye,"",!0),Ve=0;Ve<ke.length;Ve++){var Je=ke[Ve];Je.automargin&&(b.allowAutoMargin(ye,at(Je)),Je.mirror&&b.allowAutoMargin(ye,St(Je))),y.getComponentMethod("rangeslider","isVisible")(Je)&&b.allowAutoMargin(ye,Xt(Je))}},q.swap=function(ye,ke){for(var Ve=function(nt,Ke){var vt,gt,Ot=[];for(vt=0;vt<Ke.length;vt++){var Vt=[],ft=nt._fullData[Ke[vt]].xaxis,bt=nt._fullData[Ke[vt]].yaxis;if(ft&&bt){for(gt=0;gt<Ot.length;gt++)-1===Ot[gt].x.indexOf(ft)&&-1===Ot[gt].y.indexOf(bt)||Vt.push(gt);if(Vt.length){var Wt,Pt=Ot[Vt[0]];if(Vt.length>1)for(gt=1;gt<Vt.length;gt++)tn(Pt.x,(Wt=Ot[Vt[gt]]).x),tn(Pt.y,Wt.y);tn(Pt.x,[ft]),tn(Pt.y,[bt])}else Ot.push({x:[ft],y:[bt]})}}return Ot}(ye,ke),Je=0;Je<Ve.length;Je++)hn(ye,Ve[Je].x,Ve[Je].y)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../constants/numerical").BADNUM,y=m.isArrayOrTypedArray,e=m.isDateTime,r=m.cleanNumber,n=Math.round;function a(p,s){return s?g(p):"number"==typeof p}function t(p){return Math.max(1,(p-1)/1e3)}re.exports=function(p,s,i){var x,f=p,c=i.noMultiCategory;if(y(f)&&!f.length)return"-";if(!c&&y((x=f)[0])&&y(x[1]))return"multicategory";if(c&&Array.isArray(f[0])){for(var l=[],h=0;h<f.length;h++)if(y(f[h]))for(var d=0;d<f[h].length;d++)l.push(f[h][d]);f=l}if(function(x,u){for(var T=x.length,_=t(T),w=0,M=0,I={},S=0;S<T;S+=_){var O=x[n(S)],C=String(O);I[C]||(I[C]=1,e(O,u)&&w++,g(O)&&M++)}return w>2*M}(f,s))return"date";var o="strict"!==i.autotypenumbers;return function(x,u){for(var T=x.length,_=t(T),w=0,M=0,I={},S=0;S<T;S+=_){var O=x[n(S)],C=String(O);if(!I[C]){I[C]=1;var D=typeof O;"boolean"===D?M++:(u?r(O)!==b:"number"===D)?w++:"string"===D&&M++}}return M>2*w}(f,o)?"category":function(x,u){for(var T=x.length,_=0;_<T;_++)if(a(x[_],u))return!0;return!1}(f,o)?"linear":"-"}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../registry"),b=v("../../lib"),y=v("../../plot_api/plot_template"),e=v("../array_container_defaults"),r=v("./layout_attributes"),n=v("./tick_value_defaults"),a=v("./tick_mark_defaults"),t=v("./tick_label_defaults"),p=v("./prefix_suffix_defaults"),s=v("./category_order_defaults"),i=v("./line_grid_defaults"),f=v("./set_convert"),c=v("./constants").WEEKDAY_PATTERN,l=v("./constants").HOUR_PATTERN;function h(x,u,T){function _(D,B){return b.coerce(x,u,r.rangebreaks,D,B)}if(_("enabled")){var w=_("bounds");if(w&&w.length>=2){var M,I,S="";if(2===w.length)for(M=0;M<2;M++)if(I=o(w[M])){S=c;break}var R=_("pattern",S);if(R===c)for(M=0;M<2;M++)(I=o(w[M]))&&(u.bounds[M]=w[M]=I-1);if(R)for(M=0;M<2;M++)switch(I=w[M],R){case c:if(!g(I)||(I=+I)!==Math.floor(I)||I<0||I>=7)return void(u.enabled=!1);u.bounds[M]=w[M]=I;break;case l:if(!g(I)||(I=+I)<0||I>24)return void(u.enabled=!1);u.bounds[M]=w[M]=I}if(!1===T.autorange){var O=T.range;if(O[0]<O[1]){if(w[0]<O[0]&&w[1]>O[1])return void(u.enabled=!1)}else if(w[0]>O[0]&&w[1]<O[1])return void(u.enabled=!1)}}else{var C=_("values");if(!C||!C.length)return void(u.enabled=!1);_("dvalue")}}}re.exports=function(x,u,T,_,w){var M,I=_.letter,S=_.font||{},R=_.splomStash||{},O=T("visible",!_.visibleDflt),D=u.type||(u._template||{}).type||"-";"date"===D&&(m.getComponentMethod("calendars","handleDefaults")(x,u,"calendar",_.calendar),_.noTicklabelmode||(M=T("ticklabelmode")));var B="";_.noTicklabelposition&&"multicategory"!==D||(B=b.coerce(x,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===M?["outside","inside"]:"x"===I?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||T("ticklabeloverflow",-1!==B.indexOf("inside")?"hide past domain":"category"===D||"multicategory"===D?"allow":"hide past div"),f(u,w);var z=!u.isValidRange(x.range);z&&_.reverseDflt&&(z="reversed"),!T("autorange",z)||"linear"!==D&&"-"!==D||T("rangemode"),T("range"),u.cleanRange(),s(x,u,T,_),"category"===D||_.noHover||T("hoverformat");var Y=T("color"),G=Y!==r.color.dflt?Y:S.color,J=R.label||w._dfltTitle[I];if(p(x,u,T,D,_),!O)return u;T("title.text",J),b.coerceFont(T,"title.font",{family:S.family,size:b.bigFont(S.size),color:G}),n(x,u,T,D);var te=_.hasMinor;if(te&&(y.newContainer(u,"minor"),n(x,u,T,D,{isMinor:!0})),t(x,u,T,D,_),a(x,u,T,_),te){var X=_.isMinor;_.isMinor=!0,a(x,u,T,_),_.isMinor=X}i(x,u,T,{dfltColor:Y,bgColor:_.bgColor,showGrid:_.showGrid,hasMinor:te,attributes:r}),!te||u.minor.ticks||u.minor.showgrid||delete u.minor,(u.showline||u.ticks)&&T("mirror"),_.automargin&&T("automargin");var K,ae="multicategory"===D;if(_.noTickson||"category"!==D&&!ae||!u.ticks&&!u.showgrid||(ae&&(K="boundaries"),"boundaries"===T("tickson",K)&&delete u.ticklabelposition),ae&&T("showdividers")&&(T("dividercolor"),T("dividerwidth")),"date"===D)if(e(x,u,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:h}),u.rangebreaks.length){for(var U=0;U<u.rangebreaks.length;U++)if(u.rangebreaks[U].pattern===c){u._hasDayOfWeekBreaks=!0;break}if(f(u,w),w._has("scattergl")||w._has("splom"))for(var V=0;V<_.data.length;V++){var q=_.data[V];"scattergl"!==q.type&&"splom"!==q.type||(q.visible=!1,b.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}else delete u.rangebreaks;return u};var d={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function o(x){if("string"==typeof x)return d[x.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(v,re,ne){"use strict";var g=v("../../constants/docs"),m=g.FORMAT_LINK,b=g.DATE_FORMAT_LINK;function y(r,n){return["Sets the "+r+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+m+"."].join(" ")}function e(r,n){return y(r,n)+[" And for dates see: "+b+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}re.exports={axisHoverFormat:function(r,n){return{valType:"string",dflt:"",editType:"none",description:(n?y:e)("hover text",r)+["By default the values are formatted using "+(n?"generic number format":"`"+r+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:y,descriptionWithDates:e}},{"../../constants/docs":486}],570:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("./constants");function b(y,e){if(e&&e.length)for(var r=0;r<e.length;r++)if(e[r][y])return!0;return!1}ne.id2name=function(y){if("string"==typeof y&&y.match(m.AX_ID_PATTERN)){var e=y.split(" ")[0].substr(1);return"1"===e&&(e=""),y.charAt(0)+"axis"+e}},ne.name2id=function(y){if(y.match(m.AX_NAME_PATTERN)){var e=y.substr(5);return"1"===e&&(e=""),y.charAt(0)+e}},ne.cleanId=function(y,e,r){var n=/( domain)$/.test(y);if("string"==typeof y&&y.match(m.AX_ID_PATTERN)&&(!e||y.charAt(0)===e)&&(!n||r)){var a=y.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),y.charAt(0)+a+(n&&r?" domain":"")}},ne.list=function(y,e,r){var n=y._fullLayout;if(!n)return[];var a,t=ne.listIds(y,e),p=new Array(t.length);for(a=0;a<t.length;a++){var s=t[a];p[a]=n[s.charAt(0)+"axis"+s.substr(1)]}if(!r){var i=n._subplots.gl3d||[];for(a=0;a<i.length;a++){var f=n[i[a]];e?p.push(f[e+"axis"]):p.push(f.xaxis,f.yaxis,f.zaxis)}}return p},ne.listIds=function(y,e){var r=y._fullLayout;if(!r)return[];var n=r._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},ne.getFromId=function(y,e,r){var n=y._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),n[ne.id2name(e)]},ne.getFromTrace=function(y,e,r){var n=y._fullLayout,a=null;if(g.traceIs(e,"gl3d")){var t=e.scene;"scene"===t.substr(0,5)&&(a=n[t][r+"axis"])}else a=ne.getFromId(y,e[r+"axis"]||r);return a},ne.idSort=function(y,e){var r=y.charAt(0),n=e.charAt(0);return r!==n?r>n?1:-1:+(y.substr(1)||1)-+(e.substr(1)||1)},ne.ref2id=function(y){return!!/^[xyz]/.test(y)&&y.split(" ")[0]},ne.isLinked=function(y,e){return b(e,y._axisMatchGroups)||b(e,y._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y){if("category"===m.type){var e,r=g.categoryarray,n=Array.isArray(r)&&r.length>0;n&&(e="array");var a,t=b("categoryorder",e);"array"===t&&(a=b("categoryarray")),n||"array"!==t||(t=m.categoryorder="trace"),"trace"===t?m._initialCategories=[]:"array"===t?m._initialCategories=a.slice():(a=function(p,s){var i,f,c,l=s.dataAttr||p._id.charAt(0),h={};if(s.axData)i=s.axData;else for(i=[],f=0;f<s.data.length;f++){var d=s.data[f];d[l+"axis"]===p._id&&i.push(d)}for(f=0;f<i.length;f++){var o=i[f][l];for(c=0;c<o.length;c++){var x=o[c];null!=x&&(h[x]=1)}}return Object.keys(h)}(m,y).sort(),"category ascending"===t?m._initialCategories=a:"category descending"===t&&(m._initialCategories=a.reverse()))}}},{}],572:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../constants/numerical"),y=b.ONEDAY,e=b.ONEWEEK;ne.dtick=function(r,n){var a="log"===n,t="date"===n,p="category"===n,s=t?y:1;if(!r)return s;if(g(r))return(r=Number(r))<=0?s:p?Math.max(1,Math.round(r)):t?Math.max(.1,r):r;if("string"!=typeof r||!t&&!a)return s;var i=r.charAt(0),f=r.substr(1);return(f=g(f)?Number(f):0)<=0||!(t&&"M"===i&&f===Math.round(f)||a&&"L"===i||a&&"D"===i&&(1===f||2===f))?s:r},ne.tick0=function(r,n,a,t){return"date"===n?m.cleanDate(r,m.dateTick0(a,t%e==0?1:0)):"D1"!==t&&"D2"!==t?g(r)?Number(r):0:void 0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(v,re,ne){"use strict";var g=v("../../lib/regex").counter;re.exports={idRegex:{x:g("x","( domain)?"),y:g("y","( domain)?")},attrRegex:g("[xy]axis"),xAxisMatch:g("xaxis"),yAxisMatch:g("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./autorange"),b=v("./axis_ids").id2name,y=v("./layout_attributes"),e=v("./scale_zoom"),r=v("./set_convert"),n=v("../../constants/numerical").ALMOST_EQUAL,a=v("../../constants/alignment").FROM_BL;function t(h,d,o){var x=o.axIds,u=o.layoutOut,T=o.hasImage,_=u._axisConstraintGroups,w=u._axisMatchGroups,M=d._id,I=M.charAt(0),S=((u._splomAxes||{})[I]||{})[M]||{},R=d._id,O="x"===R.charAt(0);function C(ie,H){return g.coerce(h,d,y,ie,H)}d._matchGroup=null,d._constraintGroup=null,C("constrain",T?"domain":"range"),g.coerce(h,d,{constraintoward:{valType:"enumerated",values:O?["left","center","right"]:["bottom","middle","top"],dflt:O?"center":"middle"}},"constraintoward");var D,B,z=d.type,Y=[];for(D=0;D<x.length;D++)(B=x[D])!==R&&u[b(B)].type===z&&Y.push(B);var G=s(_,R);if(G){var J=[];for(D=0;D<Y.length;D++)G[B=Y[D]]||J.push(B);Y=J}var te,X,K=Y.length;K&&(h.matches||S.matches)&&(te=g.coerce(h,d,{matches:{valType:"enumerated",values:Y,dflt:-1!==Y.indexOf(S.matches)?S.matches:void 0}},"matches"));var ae=T&&!O?d.anchor:void 0;if(K&&!te&&(h.scaleanchor||ae)&&(X=g.coerce(h,d,{scaleanchor:{valType:"enumerated",values:Y}},"scaleanchor",ae)),te){d._matchGroup=i(w,R,te,1);var U=u[b(te)],V=p(u,d)/p(u,U);O!==("x"===te.charAt(0))&&(V=(O?"x":"y")+V),i(_,R,te,V)}else h.matches&&-1!==x.indexOf(h.matches)&&g.warn("ignored "+d._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if(X){var q=C("scaleratio");q||(q=d.scaleratio=1),i(_,R,X,q)}else h.scaleanchor&&-1!==x.indexOf(h.scaleanchor)&&g.warn("ignored "+d._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function p(h,d){var o=d.domain;return o||(o=h[b(d.overlaying)].domain),o[1]-o[0]}function s(h,d){for(var o=0;o<h.length;o++)if(h[o][d])return h[o];return null}function i(h,d,o,x){var u,T,_,w,M,I=s(h,d);null===I?((I={})[d]=1,M=h.length,h.push(I)):M=h.indexOf(I);var S=Object.keys(I);for(u=0;u<h.length;u++)if(_=h[u],u!==M&&_[o]){var R=_[o];for(T=0;T<S.length;T++)_[w=S[T]]=f(R,f(x,I[w]));return void h.splice(M,1)}if(1!==x)for(T=0;T<S.length;T++){var O=S[T];I[O]=f(x,I[O])}I[o]=1}function f(h,d){var o,x,u="",T="";"string"==typeof h&&(o=(u=h.match(/^[xy]*/)[0]).length,h=+h.substr(o)),"string"==typeof d&&(x=(T=d.match(/^[xy]*/)[0]).length,d=+d.substr(x));var _=h*d;return o||x?o&&x&&u.charAt(0)!==T.charAt(0)?o===x?_:(o>x?u.substr(x):T.substr(o))+_:u+T+h*d:_}function c(h,d){for(var o=d._size,x=o.h/o.w,u={},T=Object.keys(h),_=0;_<T.length;_++){var w=T[_],M=h[w];if("string"==typeof M){var I=M.match(/^[xy]*/)[0],S=I.length;M=+M.substr(S);for(var R="y"===I.charAt(0)?x:1/x,O=0;O<S;O++)M*=R}u[w]=M}return u}function l(h,d){var o=h._inputDomain,u=o[0]+(o[1]-o[0])*a[h.constraintoward];h.domain=h._input.domain=[u+(o[0]-u)/d,u+(o[1]-u)/d],h.setScale()}ne.handleDefaults=function(h,d,o){var x,u,T,_,w,M,I,S,R=o.axIds,O=o.axHasImage,C=d._axisConstraintGroups=[],D=d._axisMatchGroups=[];for(x=0;x<R.length;x++)t(w=h[_=b(R[x])],M=d[_],{axIds:R,layoutOut:d,hasImage:O[_]});function B(U,V){for(x=0;x<U.length;x++)for(T in u=U[x])d[b(T)][V]=u}for(B(D,"_matchGroup"),x=0;x<C.length;x++)for(T in u=C[x])if((M=d[b(T)]).fixedrange){for(var z in u){var Y=b(z);!1===(h[Y]||{}).fixedrange&&g.warn("fixedrange was specified as false for axis "+Y+" but was overridden because another axis in its constraint group has fixedrange true"),d[Y].fixedrange=!0}break}for(x=0;x<C.length;){for(T in u=C[x]){(M=d[b(T)])._matchGroup&&Object.keys(M._matchGroup).length===Object.keys(u).length&&(C.splice(x,1),x--);break}x++}B(C,"_constraintGroup");var G=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],J=!1,te=!1;function X(){S=M[I],"rangebreaks"===I&&(te=M._hasDayOfWeekBreaks)}for(x=0;x<D.length;x++){u=D[x];for(var K=0;K<G.length;K++){var ae;for(T in I=G[K],S=null,u)if(w=h[_=b(T)],I in(M=d[_])){if(!M.matches&&(ae=M,I in w)){X();break}null===S&&I in w&&X()}if("range"===I&&S&&(J=!0),"autorange"===I&&null===S&&J&&(S=!1),null===S&&I in ae&&(S=ae[I]),null!==S)for(T in u)(M=d[b(T)])[I]="range"===I?S.slice():S,"rangebreaks"===I&&(M._hasDayOfWeekBreaks=te,r(M,d))}}},ne.enforce=function(h){var d,o,x,u,T,_,w,M,I=h._fullLayout,S=I._axisConstraintGroups||[];for(d=0;d<S.length;d++){x=c(S[d],I);var R=Object.keys(x),O=1/0,C=0,D=1/0,B={},z={},Y=!1;for(o=0;o<R.length;o++)z[u=R[o]]=T=I[b(u)],T._inputDomain?T.domain=T._inputDomain.slice():T._inputDomain=T.domain.slice(),T._inputRange||(T._inputRange=T.range.slice()),T.setScale(),B[u]=_=Math.abs(T._m)/x[u],O=Math.min(O,_),"domain"!==T.constrain&&T._constraintShrinkable||(D=Math.min(D,_)),delete T._constraintShrinkable,C=Math.max(C,_),"domain"===T.constrain&&(Y=!0);if(!(O>n*C)||Y)for(o=0;o<R.length;o++)if(_=B[u=R[o]],w=(T=z[u]).constrain,_!==D||"domain"===w)if(M=_/D,"range"===w)e(T,M);else{var G=T._inputDomain,J=(T.domain[1]-T.domain[0])/(G[1]-G[0]),te=(T.r2l(T.range[1])-T.r2l(T.range[0]))/(T.r2l(T._inputRange[1])-T.r2l(T._inputRange[0]));if((M/=J)*te<1){T.domain=T._input.domain=G.slice(),e(T,M);continue}if(te<1&&(T.range=T._input.range=T._inputRange.slice(),M*=te),T.autorange){var X=T.r2l(T.range[0]),K=T.r2l(T.range[1]),ae=(X+K)/2,U=ae,V=ae,q=Math.abs(K-ae),ie=ae-q*M*1.0001,H=ae+q*M*1.0001,ee=m.makePadFn(I,T,0),Q=m.makePadFn(I,T,1);l(T,M);var oe,le,de=Math.abs(T._m),fe=m.concatExtremes(h,T),be=fe.min,he=fe.max;for(le=0;le<be.length;le++)(oe=be[le].val-ee(be[le])/de)>ie&&oe<U&&(U=oe);for(le=0;le<he.length;le++)(oe=he[le].val+Q(he[le])/de)<H&&oe>V&&(V=oe);M/=(V-U)/(2*q),U=T.l2r(U),V=T.l2r(V),T.range=T._input.range=X<K?[U,V]:[V,U]}l(T,M)}}},ne.getAxisGroup=function(h,d){for(var o=h._axisMatchGroups,x=0;x<o.length;x++)if(o[x][d])return"g"+x;return d},ne.clean=function(h,d){if(d._inputDomain){for(var o=!1,x=d._id,u=h._fullLayout._axisConstraintGroups,T=0;T<u.length;T++)if(u[T][x]){o=!0;break}o&&"domain"===d.constrain||(d._input.domain=d.domain=d._inputDomain,delete d._inputDomain)}}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=m.numberFormat,y=v("tinycolor2"),e=v("has-passive-events"),r=v("../../registry"),n=m.strTranslate,a=v("../../lib/svg_text_utils"),t=v("../../components/color"),p=v("../../components/drawing"),s=v("../../components/fx"),i=v("./axes"),f=v("../../lib/setcursor"),c=v("../../components/dragelement"),l=v("../../components/dragelement/helpers"),h=l.selectingOrDrawing,d=l.freeMode,o=v("../../constants/alignment").FROM_TL,x=v("../../lib/clear_gl_canvases"),u=v("../../plot_api/subroutines").redrawReglTraces,T=v("../plots"),_=v("./axis_ids").getFromId,w=v("../../components/selections").prepSelect,M=v("../../components/selections").clearOutline,I=v("../../components/selections").selectOnClick,S=v("./scale_zoom"),R=v("./constants"),O=R.MINDRAG,C=R.MINZOOM,D=!0;function B(oe,le,de,fe){var be=m.ensureSingle(oe.draglayer,le,de,function(he){he.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",oe.id)});return be.call(f,fe),be.node()}function z(oe,le,de,fe,be,he,_e){var Ce=B(oe,"rect",le,de);return g.select(Ce).call(p.setRect,fe,be,he,_e),Ce}function Y(oe,le){for(var de=0;de<oe.length;de++)if(!oe[de].fixedrange)return le;return""}function G(oe,le,de,fe,be){for(var he=0;he<oe.length;he++){var _e=oe[he];if(!_e.fixedrange)if(_e.rangebreaks){var Ce="y"===_e._id.charAt(0),Ae=Ce?1-de:de;fe[_e._name+".range[0]"]=_e.l2r(_e.p2l((Ce?1-le:le)*_e._length)),fe[_e._name+".range[1]"]=_e.l2r(_e.p2l(Ae*_e._length))}else{var ze=_e._rl[0],ve=_e._rl[1]-ze;fe[_e._name+".range[0]"]=_e.l2r(ze+ve*le),fe[_e._name+".range[1]"]=_e.l2r(ze+ve*de)}}if(be&&be.length){var Te=(le+(1-de))/2;G(be,Te,1-Te,fe,[])}}function J(oe,le){for(var de=0;de<oe.length;de++){var fe=oe[de];if(!fe.fixedrange)if(fe.rangebreaks){var be=fe._length,he=(fe.p2l(0+le)-fe.p2l(0)+(fe.p2l(be+le)-fe.p2l(be)))/2;fe.range=[fe.l2r(fe._rl[0]-he),fe.l2r(fe._rl[1]-he)]}else fe.range=[fe.l2r(fe._rl[0]-le/fe._m),fe.l2r(fe._rl[1]-le/fe._m)]}}function te(oe){return 1-(oe>=0?Math.min(oe,.9):1/(1/Math.max(oe,-.3)+3.222))}function X(oe,le,de,fe,be){return oe.append("path").attr("class","zoombox").style({fill:le>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",n(de,fe)).attr("d",be+"Z")}function K(oe,le,de){return oe.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",n(le,de)).attr("d","M0,0Z")}function ae(oe,le,de,fe,be,he){oe.attr("d",fe+"M"+de.l+","+de.t+"v"+de.h+"h"+de.w+"v-"+de.h+"h-"+de.w+"Z"),U(oe,le,be,he)}function U(oe,le,de,fe){de||(oe.transition().style("fill",fe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),le.transition().style("opacity",1).duration(200))}function V(oe){g.select(oe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function q(oe){D&&oe.data&&oe._context.showTips&&(m.notifier(m._(oe,"Double-click to zoom back out"),"long"),D=!1)}function ie(oe){var le=Math.floor(Math.min(oe.b-oe.t,oe.r-oe.l,C)/2);return"M"+(oe.l-3.5)+","+(oe.t-.5+le)+"h3v"+-le+"h"+le+"v-3h-"+(le+3)+"ZM"+(oe.r+3.5)+","+(oe.t-.5+le)+"h-3v"+-le+"h"+-le+"v-3h"+(le+3)+"ZM"+(oe.r+3.5)+","+(oe.b+.5-le)+"h-3v"+le+"h"+-le+"v3h"+(le+3)+"ZM"+(oe.l-3.5)+","+(oe.b+.5-le)+"h3v"+le+"h"+le+"v3h-"+(le+3)+"Z"}function H(oe,le,de,fe,be){for(var he,_e,Ce,Ee,Ae=!1,ze={},ve={},Te=(be||{}).xaHash,Ie=(be||{}).yaHash,De=0;De<le.length;De++){var Fe=le[De];for(he in de)if(Fe[he]){for(Ce in Fe)be&&(Te[Ce]||Ie[Ce])||("x"===Ce.charAt(0)?de:fe)[Ce]||(ze[Ce]=he);for(_e in fe)be&&(Te[_e]||Ie[_e])||!Fe[_e]||(Ae=!0)}for(_e in fe)if(Fe[_e])for(Ee in Fe)be&&(Te[Ee]||Ie[Ee])||("x"===Ee.charAt(0)?de:fe)[Ee]||(ve[Ee]=_e)}Ae&&(m.extendFlat(ze,ve),ve={});var Ue={},qe=[];for(Ce in ze){var je=_(oe,Ce);qe.push(je),Ue[je._id]=je}var rt={},Ne=[];for(Ee in ve){var Be=_(oe,Ee);Ne.push(Be),rt[Be._id]=Be}return{xaHash:Ue,yaHash:rt,xaxes:qe,yaxes:Ne,xLinks:ze,yLinks:ve,isSubplotConstrained:Ae}}function ee(oe,le){if(e){var de=void 0!==oe.onwheel?"wheel":"mousewheel";oe._onwheel&&oe.removeEventListener(de,oe._onwheel),oe._onwheel=le,oe.addEventListener(de,le,{passive:!1})}else void 0!==oe.onwheel?oe.onwheel=le:void 0!==oe.onmousewheel?oe.onmousewheel=le:oe.isAddedWheelEvent||(oe.isAddedWheelEvent=!0,oe.addEventListener("wheel",le,{passive:!1}))}function Q(oe){var le=[];for(var de in oe)le.push(oe[de]);return le}re.exports={makeDragBox:function(oe,le,de,fe,be,he,_e,Ce){var Ee,Ae,ze,ve,Te,Ie,De,Fe,Ue,qe,je,rt,Ne,Be,We,Ye,lt,mt,Tt,It,Ct,ct,at,St=oe._fullLayout._zoomlayer,Xt=_e+Ce==="nsew",tn=1===(_e+Ce).length;function hn(){if(Ue=(Ee=le.xaxis)._length,qe=(Ae=le.yaxis)._length,De=Ee._offset,Fe=Ae._offset,(ze={})[Ee._id]=Ee,(ve={})[Ae._id]=Ae,_e&&Ce)for(var un=le.overlays,an=0;an<un.length;an++){var fn=un[an].xaxis;ze[fn._id]=fn;var pn=un[an].yaxis;ve[pn._id]=pn}Te=Q(ze),Ie=Q(ve),Ne=Y(Te,Ce),Be=Y(Ie,_e),We=!Be&&!Ne,rt=H(oe,oe._fullLayout._axisMatchGroups,ze,ve);var Sn=(je=H(oe,oe._fullLayout._axisConstraintGroups,ze,ve,rt)).isSubplotConstrained||rt.isSubplotConstrained;Ye=Ce||Sn,lt=_e||Sn;var Nn=oe._fullLayout;mt=Nn._has("scattergl"),Tt=Nn._has("splom"),It=Nn._has("svg")}hn();var un,cn=(un=Be+Ne)?"nsew"===un?Xt?"":"pan"===oe._fullLayout.dragmode?"move":"crosshair":un.toLowerCase()+"-resize":"pointer",yn=z(le,_e+Ce+"drag",cn,de,fe,be,he);if(We&&!Xt)return yn.onmousedown=null,yn.style.pointerEvents="none",yn;var en,Xe,tt,ye,ke,Ve,Je,nt,Ke,vt,gt={element:yn,gd:oe,plotinfo:le};function Ot(){gt.plotinfo.selection=!1,M(oe)}function Vt(un,an){var Qn,qr,sr,hr,jr,fn=gt.gd;if(fn._fullLayout._activeShapeIndex>=0)fn._fullLayout._deactivateShape(fn);else{var pn=fn._fullLayout.clickmode;if(V(fn),2!==un||tn||function Yt(){if(!oe._transitioningWithDuration){var un=oe._context.doubleClick,an=[];Ne&&(an=an.concat(Te)),Be&&(an=an.concat(Ie)),rt.xaxes&&(an=an.concat(rt.xaxes)),rt.yaxes&&(an=an.concat(rt.yaxes));var fn,pn,Sn,Nn={};if("reset+autosize"===un)for(un="autosize",pn=0;pn<an.length;pn++)if((fn=an[pn])._rangeInitial&&(fn.range[0]!==fn._rangeInitial[0]||fn.range[1]!==fn._rangeInitial[1])||!fn._rangeInitial&&!fn.autorange){un="reset";break}if("autosize"===un)for(pn=0;pn<an.length;pn++)(fn=an[pn]).fixedrange||(Nn[fn._name+".autorange"]=!0);else if("reset"===un)for((Ne||je.isSubplotConstrained)&&(an=an.concat(je.xaxes)),Be&&!je.isSubplotConstrained&&(an=an.concat(je.yaxes)),je.isSubplotConstrained&&(Ne?Be||(an=an.concat(Ie)):an=an.concat(Te)),pn=0;pn<an.length;pn++)(fn=an[pn]).fixedrange||(fn._rangeInitial?(Nn[fn._name+".range[0]"]=(Sn=fn._rangeInitial)[0],Nn[fn._name+".range[1]"]=Sn[1]):Nn[fn._name+".autorange"]=!0);oe.emit("plotly_doubleclick",null),r.call("_guiRelayout",oe,Nn)}}(),Xt)pn.indexOf("select")>-1&&I(an,fn,Te,Ie,le.id,gt),pn.indexOf("event")>-1&&s.click(fn,an,le.id);else if(1===un&&tn){var Sn=_e?Ae:Ee,Nn="s"===_e||"w"===Ce?0:1,Kn=Sn._name+".range["+Nn+"]",Bn=(hr=(Qn=Sn).range[qr=Nn],jr=Math.abs(hr-Qn.range[1-qr]),"date"===Qn.type?hr:"log"===Qn.type?(sr=Math.ceil(Math.max(0,-Math.log(jr)/Math.LN10))+3,b("."+sr+"g")(Math.pow(10,hr))):(sr=Math.floor(Math.log(Math.abs(hr))/Math.LN10)-Math.floor(Math.log(jr)/Math.LN10)+4,b("."+String(sr)+"g")(hr))),cr="left",Lr="middle";if(Sn.fixedrange)return;_e?(Lr="n"===_e?"top":"bottom","right"===Sn.side&&(cr="right")):"e"===Ce&&(cr="right"),fn._context.showAxisRangeEntryBoxes&&g.select(yn).call(a.makeEditable,{gd:fn,immediate:!0,background:fn._fullLayout.paper_bgcolor,text:String(Bn),fill:Sn.tickfont?Sn.tickfont.color:"#444",horizontalAlign:cr,verticalAlign:Lr}).on("edit",function(Qn){var qr=Sn.d2r(Qn);void 0!==qr&&r.call("_guiRelayout",fn,Kn,qr)})}}}function ft(un,an){if(oe._transitioningWithDuration)return!1;var Lr,Qn,fn=Math.max(0,Math.min(Ue,ct*un+en)),pn=Math.max(0,Math.min(qe,at*an+Xe)),Sn=Math.abs(fn-en),Nn=Math.abs(pn-Xe);function Kn(){Je="",tt.r=tt.l,tt.t=tt.b,Ke.attr("d","M0,0Z")}if(tt.l=Math.min(en,fn),tt.r=Math.max(en,fn),tt.t=Math.min(Xe,pn),tt.b=Math.max(Xe,pn),je.isSubplotConstrained)Sn>C||Nn>C?(Je="xy",Sn/Ue>Nn/qe?(Nn=Sn*qe/Ue,Xe>pn?tt.t=Xe-Nn:tt.b=Xe+Nn):(Sn=Nn*Ue/qe,en>fn?tt.l=en-Sn:tt.r=en+Sn),Ke.attr("d",ie(tt))):Kn();else if(rt.isSubplotConstrained)if(Sn>C||Nn>C){Je="xy";var Bn=Math.min(tt.l/Ue,(qe-tt.b)/qe),cr=Math.max(tt.r/Ue,(qe-tt.t)/qe);tt.l=Bn*Ue,tt.r=cr*Ue,tt.b=(1-Bn)*qe,tt.t=(1-cr)*qe,Ke.attr("d",ie(tt))}else Kn();else!Be||Nn<Math.min(Math.max(.6*Sn,O),C)?Sn<O||!Ne?Kn():(tt.t=0,tt.b=qe,Je="x",Ke.attr("d","M"+((Lr=tt).l-.5)+","+((Qn=Xe)-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(Lr.r+.5)+","+(Qn-C-.5)+"h3v"+(2*C+1)+"h-3Z")):!Ne||Sn<Math.min(.6*Nn,C)?(tt.l=0,tt.r=Ue,Je="y",Ke.attr("d",function(Lr,Qn){return"M"+(Qn-C-.5)+","+(Lr.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(Qn-C-.5)+","+(Lr.b+.5)+"v3h"+(2*C+1)+"v-3Z"}(tt,en))):(Je="xy",Ke.attr("d",ie(tt)));tt.w=tt.r-tt.l,tt.h=tt.b-tt.t,Je&&(vt=!0),oe._dragged=vt,ae(nt,Ke,tt,ke,Ve,ye),bt(),oe.emit("plotly_relayouting",Ct),Ve=!0}function bt(){Ct={},"xy"!==Je&&"x"!==Je||(G(Te,tt.l/Ue,tt.r/Ue,Ct,je.xaxes),xt("x",Ct)),"xy"!==Je&&"y"!==Je||(G(Ie,(qe-tt.b)/qe,(qe-tt.t)/qe,Ct,je.yaxes),xt("y",Ct))}function Wt(){bt(),V(oe),nn(),q(oe)}gt.prepFn=function(un,an,fn){var pn=gt.dragmode,Sn=oe._fullLayout.dragmode;Sn!==pn&&(gt.dragmode=Sn),hn(),ct=oe._fullLayout._invScaleX,at=oe._fullLayout._invScaleY,We||(Xt?un.shiftKey?"pan"===Sn?Sn="zoom":h(Sn)||(Sn="pan"):un.ctrlKey&&(Sn="pan"):Sn="pan"),gt.minDrag=d(Sn)?1:void 0,h(Sn)?(gt.xaxes=Te,gt.yaxes=Ie,w(un,an,fn,gt,Sn)):(gt.clickFn=Vt,h(pn)&&Ot(),We||("zoom"===Sn?(gt.moveFn=ft,gt.doneFn=Wt,gt.minDrag=1,function(Nn,Kn,Bn){var cr=yn.getBoundingClientRect();en=Kn-cr.left,Xe=Bn-cr.top,oe._fullLayout._calcInverseTransform(oe);var Lr=m.apply3DTransform(oe._fullLayout._invTransform)(en,Xe);tt={l:en=Lr[0],r:en,w:0,t:Xe=Lr[1],b:Xe,h:0},ye=oe._hmpixcount?oe._hmlumcount/oe._hmpixcount:y(oe._fullLayout.plot_bgcolor).getLuminance(),Ve=!1,Je="xy",vt=!1,nt=X(St,ye,De,Fe,ke="M0,0H"+Ue+"V"+qe+"H0V0"),Ke=K(St,De,Fe)}(0,an,fn)):"pan"===Sn&&(gt.moveFn=dt,gt.doneFn=nn))),oe._fullLayout._redrag=function(){var Nn=oe._dragdata;Nn&&Nn.element===yn&&(h(oe._fullLayout.dragmode)||(hn(),Kt([0,0,Ue,qe]),gt.moveFn(Nn.dx,Nn.dy)))}},c.init(gt);var Pt=[0,0,Ue,qe],Bt=null,Pe=R.REDRAWDELAY,et=le.mainplot?oe._fullLayout._plots[le.mainplot]:le;function dt(un,an){if(un*=ct,an*=at,!oe._transitioningWithDuration){if(oe._fullLayout._replotting=!0,"ew"===Ne||"ns"===Be){var fn=Ne?-un:0,pn=Be?-an:0;if(rt.isSubplotConstrained){if(Ne&&Be){var Sn=(un/Ue-an/qe)/2;fn=-(un=Sn*Ue),pn=-(an=-Sn*qe)}Be?fn=-pn*Ue/qe:pn=-fn*qe/Ue}return Ne&&(J(Te,un),xt("x")),Be&&(J(Ie,an),xt("y")),Kt([fn,pn,Ue,qe]),Rt(),void oe.emit("plotly_relayouting",Ct)}var Nn,Kn,Bn="w"===Ne==("n"===Be)?1:-1;if(Ne&&Be&&(je.isSubplotConstrained||rt.isSubplotConstrained)){var cr=(un/Ue+Bn*an/qe)/2;un=cr*Ue,an=Bn*cr*qe}if("w"===Ne?un=sr(Te,0,un):"e"===Ne?un=sr(Te,1,-un):Ne||(un=0),"n"===Be?an=sr(Ie,1,an):"s"===Be?an=sr(Ie,0,-an):Be||(an=0),Nn="w"===Ne?un:0,Kn="n"===Be?an:0,je.isSubplotConstrained&&!rt.isSubplotConstrained||rt.isSubplotConstrained&&Ne&&Be&&Bn>0){var Lr;if(rt.isSubplotConstrained||!Ne&&1===Be.length){for(Lr=0;Lr<Te.length;Lr++)Te[Lr].range=Te[Lr]._r.slice(),S(Te[Lr],1-an/qe);Nn=(un=an*Ue/qe)/2}if(rt.isSubplotConstrained||!Be&&1===Ne.length){for(Lr=0;Lr<Ie.length;Lr++)Ie[Lr].range=Ie[Lr]._r.slice(),S(Ie[Lr],1-un/Ue);Kn=(an=un*qe/Ue)/2}}rt.isSubplotConstrained&&Be||xt("x"),rt.isSubplotConstrained&&Ne||xt("y");var Qn=Ue-un,qr=qe-an;!rt.isSubplotConstrained||Ne&&Be||(Ne?(Kn=Nn?0:un*qe/Ue,qr=Qn*qe/Ue):(Nn=Kn?0:an*Ue/qe,Qn=qr*Ue/qe)),Kt([Nn,Kn,Qn,qr]),Rt(),oe.emit("plotly_relayouting",Ct)}function sr(hr,jr,di){for(var Jn,Ar,mr=1-jr,lr=0;lr<hr.length;lr++){var ri=hr[lr];if(!ri.fixedrange){Jn=ri,Ar=ri._rl[mr]+(ri._rl[jr]-ri._rl[mr])/te(di/ri._length);var si=ri.l2r(Ar);!1!==si&&void 0!==si&&(ri.range[jr]=si)}}return Jn._length*(Jn._rl[jr]-Ar)/(Jn._rl[jr]-Jn._rl[mr])}}function xt(un,an){for(var fn=rt.isSubplotConstrained?{x:Ie,y:Te}[un]:rt[un+"axes"],pn=rt.isSubplotConstrained?{x:Te,y:Ie}[un]:[],Sn=0;Sn<fn.length;Sn++){var Nn=fn[Sn],Kn=Nn._id,Bn=rt.xLinks[Kn]||rt.yLinks[Kn],cr=pn[0]||ze[Bn]||ve[Bn];cr&&(an?(an[Nn._name+".range[0]"]=an[cr._name+".range[0]"],an[Nn._name+".range[1]"]=an[cr._name+".range[1]"]):Nn.range=cr.range.slice())}}function Rt(){var un,an=[];function fn(Nn){for(un=0;un<Nn.length;un++)Nn[un].fixedrange||an.push(Nn[un]._id)}for(Ye&&(fn(Te),fn(je.xaxes),fn(rt.xaxes)),lt&&(fn(Ie),fn(je.yaxes),fn(rt.yaxes)),Ct={},un=0;un<an.length;un++){var Sn=_(oe,an[un]);i.drawOne(oe,Sn,{skipTitle:!0}),Ct[Sn._name+".range[0]"]=Sn.range[0],Ct[Sn._name+".range[1]"]=Sn.range[1]}i.redrawComponents(oe,an)}function nn(){Kt([0,0,Ue,qe]),m.syncOrAsync([T.previousPromises,function(){oe._fullLayout._replotting=!1,r.call("_guiRelayout",oe,Ct)}],oe)}function Kt(un){var an,fn,pn,Sn,Nn=oe._fullLayout,Kn=Nn._plots,Bn=Nn._subplots.cartesian;if(Tt&&r.subplotsRegistry.splom.drag(oe),mt)for(an=0;an<Bn.length;an++)if(pn=(fn=Kn[Bn[an]]).xaxis,Sn=fn.yaxis,fn._scene){var cr=m.simpleMap(pn.range,pn.r2l),Lr=m.simpleMap(Sn.range,Sn.r2l);fn._scene.update({range:[cr[0],Lr[0],cr[1],Lr[1]]})}if((Tt||mt)&&(x(oe),u(oe)),It){var Qn=un[2]/Ee._length,qr=un[3]/Ae._length;for(an=0;an<Bn.length;an++){pn=(fn=Kn[Bn[an]]).xaxis,Sn=fn.yaxis;var sr,hr,jr,di,Ar=(lt||rt.isSubplotConstrained)&&!Sn.fixedrange&&ve[Sn._id];if((Ye||rt.isSubplotConstrained)&&!pn.fixedrange&&ze[pn._id]?(sr=Qn,jr=Ce||rt.isSubplotConstrained?un[0]:Tn(pn,sr)):rt.xaHash[pn._id]?(sr=Qn,jr=un[0]*pn._length/Ee._length):rt.yaHash[pn._id]?(sr=qr,jr="ns"===Be?-un[1]*pn._length/Ae._length:Tn(pn,sr,{n:"top",s:"bottom"}[Be])):jr=Un(pn,sr=Mn(pn,Qn,qr)),Ar?(hr=qr,di=_e||rt.isSubplotConstrained?un[1]:Tn(Sn,hr)):rt.yaHash[Sn._id]?(hr=qr,di=un[1]*Sn._length/Ae._length):rt.xaHash[Sn._id]?(hr=Qn,di="ew"===Ne?-un[0]*Sn._length/Ee._length:Tn(Sn,hr,{e:"right",w:"left"}[Ne])):di=Un(Sn,hr=Mn(Sn,Qn,qr)),sr||hr){sr||(sr=1),hr||(hr=1);var mr=pn._offset-jr/sr,lr=Sn._offset-di/hr;fn.clipRect.call(p.setTranslate,jr,di).call(p.setScale,sr,hr),fn.plot.call(p.setTranslate,mr,lr).call(p.setScale,1/sr,1/hr),sr===fn.xScaleFactor&&hr===fn.yScaleFactor||(p.setPointGroupScale(fn.zoomScalePts,sr,hr),p.setTextPointsScale(fn.zoomScaleTxt,sr,hr)),p.hideOutsideRangePoints(fn.clipOnAxisFalseTraces,fn),fn.xScaleFactor=sr,fn.yScaleFactor=hr}}}}function Mn(un,an,fn){return un.fixedrange?0:Ye&&je.xaHash[un._id]?an:lt&&(je.isSubplotConstrained?je.xaHash:je.yaHash)[un._id]?fn:0}function Un(un,an){return an?(un.range=un._r.slice(),S(un,an),Tn(un,an)):0}function Tn(un,an,fn){return un._length*(1-an)*o[fn||un.constraintoward||"middle"]}return _e.length*Ce.length!=1&&ee(yn,function(un){if(oe._context._scrollZoom.cartesian||oe._fullLayout._enablescrollzoom){if(Ot(),oe._transitioningWithDuration)return un.preventDefault(),void un.stopPropagation();hn(),clearTimeout(Bt);var an=-un.deltaY;if(isFinite(an)||(an=un.wheelDelta/10),isFinite(an)){var fn,pn=Math.exp(-Math.min(Math.max(an,-20),20)/200),Sn=et.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Nn=(un.clientX-Sn.left)/Sn.width,Kn=(Sn.bottom-un.clientY)/Sn.height;if(Ye){for(Ce||(Nn=.5),fn=0;fn<Te.length;fn++)Bn(Te[fn],Nn,pn);xt("x"),Pt[2]*=pn,Pt[0]+=Pt[2]*Nn*(1/pn-1)}if(lt){for(_e||(Kn=.5),fn=0;fn<Ie.length;fn++)Bn(Ie[fn],Kn,pn);xt("y"),Pt[3]*=pn,Pt[1]+=Pt[3]*(1-Kn)*(1/pn-1)}Kt(Pt),Rt(),oe.emit("plotly_relayouting",Ct),Bt=setTimeout(function(){oe._fullLayout&&(Pt=[0,0,Ue,qe],nn())},Pe),un.preventDefault()}else m.log("Did not find wheel motion attributes: ",un)}function Bn(cr,Lr,Qn){if(!cr.fixedrange){var qr=m.simpleMap(cr.range,cr.r2l),sr=qr[0]+(qr[1]-qr[0])*Lr;cr.range=qr.map(function(hr){return cr.l2r(sr+(hr-sr)*Qn)})}}}),yn},makeDragger:B,makeRectDragger:z,makeZoombox:X,makeCorners:K,updateZoombox:ae,xyCorners:ie,transitionZoombox:U,removeZoombox:V,showDoubleClickNotifier:q,attachWheelEventHandler:ee}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/fx"),b=v("../../components/dragelement"),y=v("../../lib/setcursor"),e=v("./dragbox").makeDragBox,r=v("./constants").DRAGGERSIZE;ne.initInteractions=function(n){var a=n._fullLayout;if(n._context.staticPlot)g.select(n).selectAll(".drag").remove();else if(a._has("cartesian")||a._has("splom")){Object.keys(a._plots||{}).sort(function(p,s){if((a._plots[p].mainplot&&!0)===(a._plots[s].mainplot&&!0)){var i=p.split("y"),f=s.split("y");return i[0]===f[0]?Number(i[1]||1)-Number(f[1]||1):Number(i[0]||1)-Number(f[0]||1)}return a._plots[p].mainplot?1:-1}).forEach(function(p){var s=a._plots[p],i=s.xaxis,f=s.yaxis;if(!s.mainplot){var c=e(n,s,i._offset,f._offset,i._length,f._length,"ns","ew");c.onmousemove=function(d){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===p&&n._fullLayout._plots[p]&&m.hover(n,d,p)},m.hover(n,d,p),n._fullLayout._lasthover=c,n._fullLayout._hoversubplot=p},c.onmouseout=function(d){n._dragging||(n._fullLayout._hoversubplot=null,b.unhover(n,d))},n._context.showAxisDragHandles&&(e(n,s,i._offset-r,f._offset-r,r,r,"n","w"),e(n,s,i._offset+i._length,f._offset-r,r,r,"n","e"),e(n,s,i._offset-r,f._offset+f._length,r,r,"s","w"),e(n,s,i._offset+i._length,f._offset+f._length,r,r,"s","e"))}if(n._context.showAxisDragHandles){if(p===i._mainSubplot){var l=i._mainLinePosition;"top"===i.side&&(l-=r),e(n,s,i._offset+.1*i._length,l,.8*i._length,r,"","ew"),e(n,s,i._offset,l,.1*i._length,r,"","w"),e(n,s,i._offset+.9*i._length,l,.1*i._length,r,"","e")}if(p===f._mainSubplot){var h=f._mainLinePosition;"right"!==f.side&&(h-=r),e(n,s,h,f._offset+.1*f._length,r,.8*f._length,"ns",""),e(n,s,h,f._offset+.9*f._length,r,.1*f._length,"s",""),e(n,s,h,f._offset,r,.1*f._length,"n","")}}});var t=a._hoverlayer.node();t.onmousemove=function(p){p.target=n._fullLayout._lasthover,m.hover(n,p,a._hoversubplot)},t.onclick=function(p){p.target=n._fullLayout._lasthover,m.click(n,p)},t.onmousedown=function(p){n._fullLayout._lasthover.onmousedown(p)},ne.updateFx(n)}},ne.updateFx=function(n){var a=n._fullLayout;y(a._draggers,"pan"===a.dragmode?"move":"crosshair")}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("./axis_ids");re.exports=function(y){return function(e,r){var n=e[y];if(Array.isArray(n))for(var a=g.subplotsRegistry.cartesian,t=a.idRegex,p=r._subplots,s=p.xaxis,i=p.yaxis,f=p.cartesian,c=r._has("cartesian")||r._has("gl2d"),l=0;l<n.length;l++){var h=n[l];if(m.isPlainObject(h)){var d=b.cleanId(h.xref,"x",!1),o=b.cleanId(h.yref,"y",!1),x=t.x.test(d),u=t.y.test(o);if(x||u){c||m.pushUnique(r._basePlotModules,a);var T=!1;x&&-1===s.indexOf(d)&&(s.push(d),T=!0),u&&-1===i.indexOf(o)&&(i.push(o),T=!0),T&&x&&u&&f.push(d+o)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../lib"),y=v("../plots"),e=v("../../components/drawing"),r=v("../get_data").getModuleCalcData,n=v("./axis_ids"),a=v("./constants"),t=v("../../constants/xmlns_namespaces"),p=b.ensureSingle;function s(h,d,o){return b.ensureSingle(h,d,o,function(x){x.datum(o)})}function i(h,d,o,x,u){for(var T,_,w,M=a.traceLayerClasses,I=h._fullLayout,S=I._modules,R=[],O=[],C=0;C<S.length;C++){var D=(T=S[C]).name,B=m.modules[D].categories;if(B.svg){var z=T.layerName||D+"layer",Y=T.plot;w=(_=r(o,Y))[0],o=_[1],w.length&&R.push({i:M.indexOf(z),className:z,plotMethod:Y,cdModule:w}),B.zoomScale&&O.push("."+z)}}R.sort(function(te,X){return te.i-X.i});var G=d.plot.selectAll("g.mlayer").data(R,function(te){return te.className});if(G.enter().append("g").attr("class",function(te){return te.className}).classed("mlayer",!0).classed("rangeplot",d.isRangePlot),G.exit().remove(),G.order(),G.each(function(te){var X=g.select(this),K=te.className;te.plotMethod(h,d,te.cdModule,X,x,u),-1===a.clipOnAxisFalseQuery.indexOf("."+K)&&e.setClipUrl(X,d.layerClipId,h)}),I._has("scattergl")&&(T=m.getModule("scattergl"),w=r(o,T)[0],T.plot(h,d,w)),!h._context.staticPlot&&(d._hasClipOnAxisFalse&&(d.clipOnAxisFalseTraces=d.plot.selectAll(a.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),O.length)){var J=d.plot.selectAll(O.join(",")).selectAll(".trace");d.zoomScalePts=J.selectAll("path.point"),d.zoomScaleTxt=J.selectAll(".textpoint")}}function f(h,d){var o=d.plotgroup,x=d.id,u=a.layerValue2layerClass[d.xaxis.layer],T=a.layerValue2layerClass[d.yaxis.layer],_=h._fullLayout._hasOnlyLargeSploms;if(d.mainplot){var w=d.mainplotinfo,M=w.plotgroup,I=x+"-x",S=x+"-y";d.minorGridlayer=w.minorGridlayer,d.gridlayer=w.gridlayer,d.zerolinelayer=w.zerolinelayer,p(w.overlinesBelow,"path",I),p(w.overlinesBelow,"path",S),p(w.overaxesBelow,"g",I),p(w.overaxesBelow,"g",S),d.plot=p(w.overplot,"g",x),p(w.overlinesAbove,"path",I),p(w.overlinesAbove,"path",S),p(w.overaxesAbove,"g",I),p(w.overaxesAbove,"g",S),d.xlines=M.select(".overlines-"+u).select("."+I),d.ylines=M.select(".overlines-"+T).select("."+S),d.xaxislayer=M.select(".overaxes-"+u).select("."+I),d.yaxislayer=M.select(".overaxes-"+T).select("."+S)}else if(_)d.xlines=p(o,"path","xlines-above"),d.ylines=p(o,"path","ylines-above"),d.xaxislayer=p(o,"g","xaxislayer-above"),d.yaxislayer=p(o,"g","yaxislayer-above");else{var R=p(o,"g","layer-subplot");d.shapelayer=p(R,"g","shapelayer"),d.imagelayer=p(R,"g","imagelayer"),d.minorGridlayer=p(o,"g","minor-gridlayer"),d.gridlayer=p(o,"g","gridlayer"),d.zerolinelayer=p(o,"g","zerolinelayer"),p(o,"path","xlines-below"),p(o,"path","ylines-below"),d.overlinesBelow=p(o,"g","overlines-below"),p(o,"g","xaxislayer-below"),p(o,"g","yaxislayer-below"),d.overaxesBelow=p(o,"g","overaxes-below"),d.plot=p(o,"g","plot"),d.overplot=p(o,"g","overplot"),d.xlines=p(o,"path","xlines-above"),d.ylines=p(o,"path","ylines-above"),d.overlinesAbove=p(o,"g","overlines-above"),p(o,"g","xaxislayer-above"),p(o,"g","yaxislayer-above"),d.overaxesAbove=p(o,"g","overaxes-above"),d.xlines=o.select(".xlines-"+u),d.ylines=o.select(".ylines-"+T),d.xaxislayer=o.select(".xaxislayer-"+u),d.yaxislayer=o.select(".yaxislayer-"+T)}_||(s(d.minorGridlayer,"g",d.xaxis._id),s(d.minorGridlayer,"g",d.yaxis._id),d.minorGridlayer.selectAll("g").map(function(O){return O[0]}).sort(n.idSort),s(d.gridlayer,"g",d.xaxis._id),s(d.gridlayer,"g",d.yaxis._id),d.gridlayer.selectAll("g").map(function(O){return O[0]}).sort(n.idSort)),d.xlines.style("fill","none").classed("crisp",!0),d.ylines.style("fill","none").classed("crisp",!0)}function c(h,d){if(h){var o={};for(var x in h.each(function(w){var M=w[0];g.select(this).remove(),l(M,d),o[M]=!0}),d._plots)for(var u=d._plots[x].overlays||[],T=0;T<u.length;T++){var _=u[T];o[_.id]&&_.plot.selectAll(".trace").remove()}}}function l(h,d){d._draggers.selectAll("g."+h).remove(),d._defs.select("#clip"+d._uid+h+"plot").remove()}ne.name="cartesian",ne.attr=["xaxis","yaxis"],ne.idRoot=["x","y"],ne.idRegex=a.idRegex,ne.attrRegex=a.attrRegex,ne.attributes=v("./attributes"),ne.layoutAttributes=v("./layout_attributes"),ne.supplyLayoutDefaults=v("./layout_defaults"),ne.transitionAxes=v("./transition_axes"),ne.finalizeSubplots=function(h,d){var o,x,u,T=d._subplots,_=T.xaxis,w=T.yaxis,M=T.cartesian,I=M.concat(T.gl2d||[]),S={},R={};for(o=0;o<I.length;o++){var O=I[o].split("y");S[O[0]]=1,R["y"+O[1]]=1}for(o=0;o<_.length;o++)S[x=_[o]]||(u=(h[n.id2name(x)]||{}).anchor,a.idRegex.y.test(u)||(u="y"),M.push(x+u),I.push(x+u),R[u]||(R[u]=1,b.pushUnique(w,u)));for(o=0;o<w.length;o++)R[u=w[o]]||(x=(h[n.id2name(u)]||{}).anchor,a.idRegex.x.test(x)||(x="x"),M.push(x+u),I.push(x+u),S[x]||(S[x]=1,b.pushUnique(_,x)));if(!I.length){for(var C in x="",u="",h)a.attrRegex.test(C)&&("x"===C.charAt(0)?(!x||+C.substr(5)<+x.substr(5))&&(x=C):(!u||+C.substr(5)<+u.substr(5))&&(u=C));x=x?n.name2id(x):"x",u=u?n.name2id(u):"y",_.push(x),w.push(u),M.push(x+u)}},ne.plot=function(h,d,o,x){var u,T=h._fullLayout,_=T._subplots.cartesian,w=h.calcdata;if(!Array.isArray(d))for(d=[],u=0;u<w.length;u++)d.push(u);for(u=0;u<_.length;u++){for(var M,I=_[u],S=T._plots[I],R=[],O=0;O<w.length;O++){var C=w[O],D=C[0].trace;D.xaxis+D.yaxis===I&&((-1!==d.indexOf(D.index)||D.carpet)&&(M&&M[0].trace.xaxis+M[0].trace.yaxis===I&&-1!==["tonextx","tonexty","tonext"].indexOf(D.fill)&&-1===R.indexOf(M)&&R.push(M),R.push(C)),M=C)}i(h,S,R,o,x)}},ne.clean=function(h,d,o,x){var u,T,_,w=x._plots||{},M=d._plots||{},I=x._subplots||{};if(x._hasOnlyLargeSploms&&!d._hasOnlyLargeSploms)for(_ in w)(u=w[_]).plotgroup&&u.plotgroup.remove();var S=x._has&&x._has("gl"),R=d._has&&d._has("gl");if(S&&!R)for(_ in w)(u=w[_])._scene&&u._scene.destroy();if(I.xaxis&&I.yaxis){var O=n.listIds({_fullLayout:x});for(T=0;T<O.length;T++){var C=O[T];d[n.id2name(C)]||x._infolayer.selectAll(".g-"+C+"title").remove()}}var D=x._has&&x._has("cartesian"),B=d._has&&d._has("cartesian");if(D&&!B)c(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups,delete x._axisMatchGroups;else if(I.cartesian)for(T=0;T<I.cartesian.length;T++){var z=I.cartesian[T];M[z]||(x._cartesianlayer.selectAll("."+z+",."+z+"-x,."+z+"-y").remove(),l(z,x))}},ne.drawFramework=function(h){var d=h._fullLayout,o=function(u){var T,_,w,M,I,S,R=u._fullLayout,O=R._subplots.cartesian,C=O.length,D=[],B=[];for(T=0;T<C;T++){var G=(I=(M=R._plots[w=O[T]]).xaxis)._mainAxis._id+(S=M.yaxis)._mainAxis._id,J=R._plots[G];M.overlays=[],G!==w&&J?(M.mainplot=G,M.mainplotinfo=J,B.push(w)):(M.mainplot=void 0,M.mainplotinfo=void 0,D.push(w))}for(T=0;T<B.length;T++)(M=R._plots[w=B[T]]).mainplotinfo.overlays.push(M);var te=D.concat(B),X=new Array(C);for(T=0;T<C;T++){var K=[w=te[T],(I=(M=R._plots[w]).xaxis).layer,(S=M.yaxis).layer,I.overlaying||"",S.overlaying||""];for(_=0;_<M.overlays.length;_++)K.push(M.overlays[_].id);X[T]=K}return X}(h),x=d._cartesianlayer.selectAll(".subplot").data(o,String);x.enter().append("g").attr("class",function(u){return"subplot "+u[0]}),x.order(),x.exit().call(c,d),x.each(function(u){var T=u[0],_=d._plots[T];_.plotgroup=g.select(this),f(h,_),_.draglayer=p(d._draggers,"g",T)})},ne.rangePlot=function(h,d,o){f(h,d),i(h,d,o),y.style(h)},ne.toSVG=function(h){var d=h._fullLayout._glimages,o=g.select(h).selectAll(".svg-container");o.filter(function(x,u){return u===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var x=this.toDataURL("image/png");d.append("svg:image").attr({xmlns:t.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},ne.updateFx=v("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(v,re,ne){"use strict";var g=v("../font_attributes"),m=v("../../components/color/attributes"),b=v("../../components/drawing/attributes").dash,y=v("../../lib/extend").extendFlat,e=v("../../plot_api/plot_template").templatedArray,r=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,n=v("../../constants/numerical").ONEDAY,a=v("./constants"),t=a.HOUR_PATTERN,p=a.WEEKDAY_PATTERN,s={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function i(M){return{valType:"integer",min:0,dflt:M?5:0,editType:"ticks"}}var f={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},l={valType:"data_array",editType:"ticks"},h={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function d(M){var I={valType:"number",min:0,editType:"ticks"};return M||(I.dflt=5),I}function o(M){var I={valType:"number",min:0,editType:"ticks"};return M||(I.dflt=1),I}var x={valType:"color",dflt:m.defaultLine,editType:"ticks"},u={valType:"color",dflt:m.lightLine,editType:"ticks"};function T(M){var I={valType:"number",min:0,editType:"ticks"};return M||(I.dflt=1),I}var _=y({},b,{editType:"ticks"}),w={valType:"boolean",editType:"ticks"};re.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:m.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:g({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[p,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:n},editType:"calc"}),tickmode:s,nticks:i(),tick0:f,dtick:c,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:l,ticktext:{valType:"data_array",editType:"ticks"},ticks:h,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:d(),tickwidth:o(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:y({},b,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:g({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:r("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:r("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:w,gridcolor:u,gridwidth:T(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},minor:{tickmode:s,nticks:i("minor"),tick0:f,dtick:c,tickvals:l,ticks:h,ticklen:d("minor"),tickwidth:o("minor"),tickcolor:x,gridcolor:u,gridwidth:T("minor"),griddash:_,showgrid:w,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:g({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color"),b=v("../../components/fx/helpers").isUnifiedHover,y=v("../../components/fx/hovermode_defaults"),e=v("../../plot_api/plot_template"),r=v("../layout_attributes"),n=v("./layout_attributes"),a=v("./type_defaults"),t=v("./axis_defaults"),p=v("./constraints"),s=v("./position_defaults"),i=v("./axis_ids"),f=i.id2name,c=i.name2id,l=v("./constants").AX_ID_PATTERN,h=v("../../registry"),d=h.traceIs,o=h.getComponentMethod;function x(u,T,_){Array.isArray(u[T])?u[T].push(_):u[T]=[_]}re.exports=function(u,T,_){var w,M,I=T.autotypenumbers,S={},R={},O={},C={},D={},B={},z={},Y={},G={},J={};for(w=0;w<_.length;w++){var te=_[w];if(d(te,"cartesian")||d(te,"gl2d")){var X,K;if(te.xaxis)X=f(te.xaxis),x(S,X,te);else if(te.xaxes)for(M=0;M<te.xaxes.length;M++)x(S,f(te.xaxes[M]),te);if(te.yaxis)K=f(te.yaxis),x(S,K,te);else if(te.yaxes)for(M=0;M<te.yaxes.length;M++)x(S,f(te.yaxes[M]),te);"funnel"===te.type?"h"===te.orientation?(X&&(R[X]=!0),K&&(z[K]=!0)):K&&(O[K]=!0):"image"===te.type?(K&&(Y[K]=!0),X&&(Y[X]=!0)):(K&&(D[K]=!0,B[K]=!0),d(te,"carpet")&&("carpet"!==te.type||te._cheater)||X&&(C[X]=!0)),"carpet"===te.type&&te._cheater&&X&&(R[X]=!0),d(te,"2dMap")&&(G[X]=!0,G[K]=!0),d(te,"oriented")&&(J["h"===te.orientation?K:X]=!0)}}var ae=T._subplots,U=ae.xaxis,V=ae.yaxis,q=g.simpleMap(U,f),ie=g.simpleMap(V,f),H=q.concat(ie),ee=m.background;U.length&&V.length&&(ee=g.coerce(u,T,r,"plot_bgcolor"));var Q,oe,le,de,fe,be=m.combine(ee,T.paper_bgcolor);function he(){fe._traceIndices=(S[Q]||[]).map(function(St){return St._expandedIndex}),fe._annIndices=[],fe._shapeIndices=[],fe._selectionIndices=[],fe._imgIndices=[],fe._subplotsWith=[],fe._counterAxes=[],fe._name=fe._attr=Q,fe._id=oe}function _e(at,St){return g.coerce(de,fe,n,at,St)}function Ce(at,St){return g.coerce2(de,fe,n,at,St)}function Ee(at){return"x"===at?V:U}function Ae(at,St){for(var Xt="x"===at?q:ie,tn=[],hn=0;hn<Xt.length;hn++){var cn=Xt[hn];cn===St||(u[cn]||{}).overlaying||tn.push(c(cn))}return tn}var ze={x:Ee("x"),y:Ee("y")},ve=ze.x.concat(ze.y),Te={},Ie=[];function De(){var at=de.matches;l.test(at)&&-1===ve.indexOf(at)&&(Te[at]=de.type,Ie=Object.keys(Te))}var Fe=y(u,T),Ue=b(Fe);for(w=0;w<H.length;w++){oe=c(Q=H[w]),le=Q.charAt(0),g.isPlainObject(u[Q])||(u[Q]={}),de=u[Q],fe=e.newContainer(T,Q,le+"axis"),he();var rt={hasMinor:!0,letter:le,font:T.font,outerTicks:G[Q],showGrid:!J[Q],data:S[Q]||[],bgColor:be,calendar:T.calendar,automargin:!0,visibleDflt:"x"===le&&!C[Q]&&R[Q]||"y"===le&&!D[Q]&&O[Q],reverseDflt:"y"===le&&(!B[Q]&&z[Q]||Y[Q]),autotypenumbersDflt:I,splomStash:((T._splomAxes||{})[le]||{})[oe]};_e("uirevision",T.uirevision),a(de,fe,_e,rt),t(de,fe,_e,rt,T);var Ne=Ue&&le===Fe.charAt(0),Be=Ce("spikecolor",Ue?fe.color:void 0),We=Ce("spikethickness",Ue?1.5:void 0),Ye=Ce("spikedash",Ue?"dot":void 0),lt=Ce("spikemode",Ue?"across":void 0),mt=Ce("spikesnap");_e("showspikes",!!(Ne||Be||We||Ye||lt||mt))||(delete fe.spikecolor,delete fe.spikethickness,delete fe.spikedash,delete fe.spikemode,delete fe.spikesnap),s(de,fe,_e,{letter:le,counterAxes:ze[le],overlayableAxes:Ae(le,Q),grid:T.grid}),_e("title.standoff"),De(),fe._input=de}for(w=0;w<Ie.length;){oe=Ie[w++],le=(Q=f(oe)).charAt(0),g.isPlainObject(u[Q])||(u[Q]={}),de=u[Q],fe=e.newContainer(T,Q,le+"axis"),he();var Tt={letter:le,font:T.font,outerTicks:G[Q],showGrid:!J[Q],data:[],bgColor:be,calendar:T.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:I,splomStash:((T._splomAxes||{})[le]||{})[oe]};_e("uirevision",T.uirevision),fe.type=Te[oe]||"linear",t(de,fe,_e,Tt,T),s(de,fe,_e,{letter:le,counterAxes:ze[le],overlayableAxes:Ae(le,Q),grid:T.grid}),_e("fixedrange"),De(),fe._input=de}var It=o("rangeslider","handleDefaults"),Ct=o("rangeselector","handleDefaults");for(w=0;w<q.length;w++)de=u[Q=q[w]],fe=T[Q],It(u,T,Q),"date"===fe.type&&Ct(de,fe,T,ie,fe.calendar),_e("fixedrange");for(w=0;w<ie.length;w++){de=u[Q=ie[w]];var ct=T[f((fe=T[Q]).anchor)];_e("fixedrange",o("rangeslider","isVisible")(ct))}p.handleDefaults(u,T,{axIds:ve.concat(Ie).sort(i.idSort),axHasImage:Y})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(v,re,ne){"use strict";var g=v("tinycolor2").mix,m=v("../../components/color/attributes"),b=v("../../lib");re.exports=function(y,e,r,n){var a=(n=n||{}).dfltColor;function t(u,T){return b.coerce2(y,e,n.attributes,u,T)}var p=t("linecolor",a),s=t("linewidth");r("showline",n.showLine||!!p||!!s)||(delete e.linecolor,delete e.linewidth);var i=t("gridcolor",g(a,n.bgColor,n.blend||m.lightFraction).toRgbString()),f=t("gridwidth"),c=t("griddash");if(r("showgrid",n.showGrid||!!i||!!f||!!c)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),n.hasMinor){var l=t("minor.gridcolor",g(e.gridcolor,n.bgColor,67).toRgbString()),h=t("minor.gridwidth",e.gridwidth||1),d=t("minor.griddash",e.griddash||"solid");r("minor.showgrid",!!l||!!h||!!d)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!n.noZeroLine){var o=t("zerolinecolor",a),x=t("zerolinewidth");r("zeroline",n.showGrid||!!o||!!x)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib");re.exports=function(b,y,e,r){var n,a,t,p,s=r.counterAxes||[],i=r.overlayableAxes||[],f=r.letter,c=r.grid;c&&(n=c._anchors[y._id],(a=c._domains[f][c._axisMap[y._id]])&&(t=c[f+"side"].split(" ")[0],p=c.domain[f]["right"===t||"top"===t?1:0])),a=a||[0,1],n=n||(g(b.position)?"free":s[0]||"free"),t=t||("x"===f?"bottom":"left"),p=p||0,"free"===m.coerce(b,y,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:n}},"anchor")&&e("position",p),m.coerce(b,y,{side:{valType:"enumerated",values:"x"===f?["bottom","top"]:["left","right"],dflt:t}},"side");var l=!1;if(i.length&&(l=m.coerce(b,y,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!l){var h=e("domain",a);h[0]>h[1]-1/4096&&(y.domain=a),m.noneOrAll(b.domain,y.domain,a)}return e("layer"),y}},{"../../lib":515,"fast-isnumeric":190}],583:[function(v,re,ne){"use strict";var g=v("./show_dflt");re.exports=function(m,b,y,e,r){r||(r={});var n=r.tickSuffixDflt,a=g(m);y("tickprefix")&&y("showtickprefix",a),y("ticksuffix",n)&&y("showticksuffix",a)}},{"./show_dflt":586}],584:[function(v,re,ne){"use strict";var g=v("../../constants/alignment").FROM_BL;re.exports=function(m,b,y){void 0===y&&(y=g[m.constraintoward||"center"]);var e=[m.r2l(m.range[0]),m.r2l(m.range[1])],r=e[0]+(e[1]-e[0])*y;m.range=m._input.range=[m.l2r(r+(e[0]-r)*b),m.l2r(r+(e[1]-r)*b)],m.setScale()}},{"../../constants/alignment":483}],585:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-time-format").utcFormat,b=v("../../lib"),y=b.numberFormat,e=v("fast-isnumeric"),r=b.cleanNumber,n=b.ms2DateTime,a=b.dateTime2ms,t=b.ensureNumber,p=b.isArrayOrTypedArray,s=v("../../constants/numerical"),i=s.FP_SAFE,f=s.BADNUM,c=s.LOG_CLIP,l=s.ONEWEEK,h=s.ONEDAY,d=s.ONEHOUR,o=s.ONEMIN,x=s.ONESEC,u=v("./axis_ids"),T=v("./constants"),_=T.HOUR_PATTERN,w=T.WEEKDAY_PATTERN;function M(S){return Math.pow(10,S)}function I(S){return null!=S}re.exports=function(S,R){R=R||{};var O=S._id||"x",C=O.charAt(0);function D(H,ee){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&ee&&S.range&&2===S.range.length){var Q=S.range[0],oe=S.range[1];return.5*(Q+oe-2*c*Math.abs(Q-oe))}return f}function B(H,ee,Q,oe){if((oe||{}).msUTC&&e(H))return+H;var le=a(H,Q||S.calendar);if(le===f){if(!e(H))return f;H=+H;var de=Math.floor(10*b.mod(H+.05,1)),fe=Math.round(H-de/10);le=a(new Date(fe))+de/10}return le}function z(H,ee,Q){return n(H,ee,Q||S.calendar)}function Y(H){return S._categories[Math.round(H)]}function G(H){if(I(H)){if(void 0===S._categoriesMap&&(S._categoriesMap={}),void 0!==S._categoriesMap[H])return S._categoriesMap[H];S._categories.push("number"==typeof H?String(H):H);var ee=S._categories.length-1;return S._categoriesMap[H]=ee,ee}return f}function J(H){if(S._categoriesMap)return S._categoriesMap[H]}function te(H){var ee=J(H);return void 0!==ee?ee:e(H)?+H:void 0}function X(H){return e(H)?+H:J(H)}function K(H,ee,Q){return g.round(Q+ee*H,2)}function ae(H,ee,Q){return(H-Q)/ee}var U=function(H){return e(H)?K(H,S._m,S._b):f},V=function(H){return ae(H,S._m,S._b)};if(S.rangebreaks){var q="y"===C;U=function(H){if(!e(H))return f;var ee=S._rangebreaks.length;if(!ee)return K(H,S._m,S._b);var Q=q;S.range[0]>S.range[1]&&(Q=!Q);for(var oe=Q?-1:1,le=oe*H,de=0,fe=0;fe<ee;fe++){var be=oe*S._rangebreaks[fe].min,he=oe*S._rangebreaks[fe].max;if(le<be)break;if(!(le>he)){de=le<(be+he)/2?fe:fe+1;break}de=fe+1}var _e=S._B[de]||0;return isFinite(_e)?K(H,S._m2,_e):0},V=function(H){var ee=S._rangebreaks.length;if(!ee)return ae(H,S._m,S._b);for(var Q=0,oe=0;oe<ee&&!(H<S._rangebreaks[oe].pmin);oe++)H>S._rangebreaks[oe].pmax&&(Q=oe+1);return ae(H,S._m2,S._B[Q])}}S.c2l="log"===S.type?D:t,S.l2c="log"===S.type?M:t,S.l2p=U,S.p2l=V,S.c2p="log"===S.type?function(H,ee){return U(D(H,ee))}:U,S.p2c="log"===S.type?function(H){return M(V(H))}:V,-1!==["linear","-"].indexOf(S.type)?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=r,S.c2d=S.c2r=S.l2d=S.l2r=t,S.d2p=S.r2p=function(H){return S.l2p(r(H))},S.p2d=S.p2r=V,S.cleanPos=t):"log"===S.type?(S.d2r=S.d2l=function(H,ee){return D(r(H),ee)},S.r2d=S.r2c=function(H){return M(r(H))},S.d2c=S.r2l=r,S.c2d=S.l2r=t,S.c2r=D,S.l2d=M,S.d2p=function(H,ee){return S.l2p(S.d2r(H,ee))},S.p2d=function(H){return M(V(H))},S.r2p=function(H){return S.l2p(r(H))},S.p2r=V,S.cleanPos=t):"date"===S.type?(S.d2r=S.r2d=b.identity,S.d2c=S.r2c=S.d2l=S.r2l=B,S.c2d=S.c2r=S.l2d=S.l2r=z,S.d2p=S.r2p=function(H,ee,Q){return S.l2p(B(H,0,Q))},S.p2d=S.p2r=function(H,ee,Q){return z(V(H),ee,Q)},S.cleanPos=function(H){return b.cleanDate(H,f,S.calendar)}):"category"===S.type?(S.d2c=S.d2l=G,S.r2d=S.c2d=S.l2d=Y,S.d2r=S.d2l_noadd=te,S.r2c=function(H){var ee=X(H);return void 0!==ee?ee:S.fraction2r(.5)},S.l2r=S.c2r=t,S.r2l=X,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return Y(V(H))},S.r2p=S.d2p,S.p2r=V,S.cleanPos=function(H){return"string"==typeof H&&""!==H?H:t(H)}):"multicategory"===S.type&&(S.r2d=S.c2d=S.l2d=Y,S.d2r=S.d2l_noadd=te,S.r2c=function(H){var ee=te(H);return void 0!==ee?ee:S.fraction2r(.5)},S.r2c_just_indices=J,S.l2r=S.c2r=t,S.r2l=te,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return Y(V(H))},S.r2p=S.d2p,S.p2r=V,S.cleanPos=function(H){return Array.isArray(H)||"string"==typeof H&&""!==H?H:t(H)},S.setupMultiCategory=function(H){var ee,Q,oe=S._traceIndices,le=S._matchGroup;if(le&&0===S._categories.length)for(var de in le)if(de!==O){var fe=R[u.id2name(de)];oe=oe.concat(fe._traceIndices)}var be=[[0,{}],[0,{}]],he=[];for(ee=0;ee<oe.length;ee++){var _e=H[oe[ee]];if(C in _e){var Ce=_e[C],Ee=_e._length||b.minRowLength(Ce);if(p(Ce[0])&&p(Ce[1]))for(Q=0;Q<Ee;Q++){var Ae=Ce[0][Q],ze=Ce[1][Q];I(Ae)&&I(ze)&&(he.push([Ae,ze]),Ae in be[0][1]||(be[0][1][Ae]=be[0][0]++),ze in be[1][1]||(be[1][1][ze]=be[1][0]++))}}}for(he.sort(function(ve,Te){var Ie=be[0][1],De=Ie[ve[0]]-Ie[Te[0]];if(De)return De;var Fe=be[1][1];return Fe[ve[1]]-Fe[Te[1]]}),ee=0;ee<he.length;ee++)G(he[ee])}),S.fraction2r=function(H){var ee=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return S.l2r(ee+H*(Q-ee))},S.r2fraction=function(H){var ee=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return(S.r2l(H)-ee)/(Q-ee)},S.cleanRange=function(H,ee){ee||(ee={}),H||(H="range");var Q,oe,le=b.nestedProperty(S,H).get();if(oe=(oe="date"===S.type?b.dfltRange(S.calendar):"y"===C?T.DFLTRANGEY:"realaxis"===S._name?[0,1]:ee.dfltRange||T.DFLTRANGEX).slice(),"tozero"!==S.rangemode&&"nonnegative"!==S.rangemode||(oe[0]=0),le&&2===le.length)for("date"!==S.type||S.autorange||(le[0]=b.cleanDate(le[0],f,S.calendar),le[1]=b.cleanDate(le[1],f,S.calendar)),Q=0;Q<2;Q++)if("date"===S.type){if(!b.isDateTime(le[Q],S.calendar)){S[H]=oe;break}if(S.r2l(le[0])===S.r2l(le[1])){var de=b.constrain(S.r2l(le[0]),b.MIN_MS+1e3,b.MAX_MS-1e3);le[0]=S.l2r(de-1e3),le[1]=S.l2r(de+1e3);break}}else{if(!e(le[Q])){if(!e(le[1-Q])){S[H]=oe;break}le[Q]=le[1-Q]*(Q?10:.1)}if(le[Q]<-i?le[Q]=-i:le[Q]>i&&(le[Q]=i),le[0]===le[1]){var fe=Math.max(1,Math.abs(1e-6*le[0]));le[0]-=fe,le[1]+=fe}}else b.nestedProperty(S,H).set(oe)},S.setScale=function(H){var ee=R._size;if(S.overlaying){var Q=u.getFromId({_fullLayout:R},S.overlaying);S.domain=Q.domain}var oe=H&&S._r?"_r":"range",le=S.calendar;S.cleanRange(oe);var de,fe,be=S.r2l(S[oe][0],le),he=S.r2l(S[oe][1],le),_e="y"===C;if(_e?(S._offset=ee.t+(1-S.domain[1])*ee.h,S._length=ee.h*(S.domain[1]-S.domain[0]),S._m=S._length/(be-he),S._b=-S._m*he):(S._offset=ee.l+S.domain[0]*ee.w,S._length=ee.w*(S.domain[1]-S.domain[0]),S._m=S._length/(he-be),S._b=-S._m*be),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks&&(S._rangebreaks=S.locateBreaks(Math.min(be,he),Math.max(be,he)),S._rangebreaks.length)){for(de=0;de<S._rangebreaks.length;de++)fe=S._rangebreaks[de],S._lBreaks+=Math.abs(fe.max-fe.min);var Ce=_e;be>he&&(Ce=!Ce),Ce&&S._rangebreaks.reverse();var Ee=Ce?-1:1;for(S._m2=Ee*S._length/(Math.abs(he-be)-S._lBreaks),S._B.push(-S._m2*(_e?he:be)),de=0;de<S._rangebreaks.length;de++)S._B.push(S._B[S._B.length-1]-Ee*S._m2*((fe=S._rangebreaks[de]).max-fe.min));for(de=0;de<S._rangebreaks.length;de++)(fe=S._rangebreaks[de]).pmin=U(fe.min),fe.pmax=U(fe.max)}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw R._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(H){var ee,Q,oe,le,de,fe=S.rangebreaks||[];fe._cachedPatterns||(fe._cachedPatterns=fe.map(function(Ae){return Ae.enabled&&Ae.bounds?b.simpleMap(Ae.bounds,Ae.pattern?r:S.d2c):null})),fe._cachedValues||(fe._cachedValues=fe.map(function(Ae){return Ae.enabled&&Ae.values?b.simpleMap(Ae.values,S.d2c).sort(b.sorterAsc):null}));for(var be=0;be<fe.length;be++){var he=fe[be];if(he.enabled)if(he.bounds){switch(Q=(ee=fe._cachedPatterns[be])[0],oe=ee[1],he.pattern){case w:le=(de=new Date(H)).getUTCDay(),Q>oe&&(oe+=7,le<Q&&(le+=7));break;case _:le=(de=new Date(H)).getUTCHours()+(de.getUTCMinutes()/60+de.getUTCSeconds()/3600+de.getUTCMilliseconds()/36e5),Q>oe&&(oe+=24,le<Q&&(le+=24));break;case"":le=H}if(le>=Q&&le<oe)return f}else for(var Ce=fe._cachedValues[be],Ee=0;Ee<Ce.length;Ee++)if(oe=(Q=Ce[Ee])+he.dvalue,H>=Q&&H<oe)return f}return H},S.locateBreaks=function(H,ee){var Q,oe,le,de,fe=[];if(!S.rangebreaks)return fe;var be=S.rangebreaks.slice().sort(function(Fe,Ue){return Fe.pattern===w&&Ue.pattern===_?-1:Ue.pattern===w&&Fe.pattern===_?1:0}),he=function(Fe,Ue){if((Fe=b.constrain(Fe,H,ee))!==(Ue=b.constrain(Ue,H,ee))){for(var qe=!0,je=0;je<fe.length;je++){var rt=fe[je];Fe<rt.max&&Ue>=rt.min&&(Fe<rt.min&&(rt.min=Fe),Ue>rt.max&&(rt.max=Ue),qe=!1)}qe&&fe.push({min:Fe,max:Ue})}};for(Q=0;Q<be.length;Q++){var _e=be[Q];if(_e.enabled)if(_e.bounds){var Ce=H,Ee=ee;_e.pattern&&(Ce=Math.floor(Ce)),le=(oe=b.simpleMap(_e.bounds,_e.pattern?r:S.r2l))[0],de=oe[1];var Ae,ze,ve=new Date(Ce);switch(_e.pattern){case w:ze=l,Ae=(de-le+(de<le?7:0))*h,Ce+=le*h-(ve.getUTCDay()*h+ve.getUTCHours()*d+ve.getUTCMinutes()*o+ve.getUTCSeconds()*x+ve.getUTCMilliseconds());break;case _:ze=h,Ae=(de-le+(de<le?24:0))*d,Ce+=le*d-(ve.getUTCHours()*d+ve.getUTCMinutes()*o+ve.getUTCSeconds()*x+ve.getUTCMilliseconds());break;default:Ce=Math.min(oe[0],oe[1]),Ae=ze=(Ee=Math.max(oe[0],oe[1]))-Ce}for(var Te=Ce;Te<Ee;Te+=ze)he(Te,Te+Ae)}else for(var Ie=b.simpleMap(_e.values,S.d2c),De=0;De<Ie.length;De++)he(le=Ie[De],de=le+_e.dvalue)}return fe.sort(function(Fe,Ue){return Fe.min-Ue.min}),fe},S.makeCalcdata=function(H,ee,Q){var oe,le,de,fe,be=S.type,he="date"===be&&H[ee+"calendar"];if(ee in H){if(oe=H[ee],fe=H._length||b.minRowLength(oe),b.isTypedArray(oe)&&("linear"===be||"log"===be)){if(fe===oe.length)return oe;if(oe.subarray)return oe.subarray(0,fe)}if("multicategory"===be)return function(Ee,Ae){for(var ze=new Array(Ae),ve=0;ve<Ae;ve++)ze[ve]=J([(Ee[0]||[])[ve],(Ee[1]||[])[ve]]);return ze}(oe,fe);for(le=new Array(fe),de=0;de<fe;de++)le[de]=S.d2c(oe[de],0,he,Q)}else{var _e=ee+"0"in H?S.d2c(H[ee+"0"],0,he):0,Ce=H["d"+ee]?Number(H["d"+ee]):1;for(oe=H[{x:"y",y:"x"}[ee]],fe=H._length||oe.length,le=new Array(fe),de=0;de<fe;de++)le[de]=_e+de*Ce}if(S.rangebreaks)for(de=0;de<fe;de++)le[de]=S.maskBreaks(le[de]);return le},S.isValidRange=function(H){return Array.isArray(H)&&2===H.length&&e(S.r2l(H[0]))&&e(S.r2l(H[1]))},S.isPtWithinRange=function(H,ee){var Q=S.c2l(H[C],null,ee),oe=S.r2l(S.range[0]),le=S.r2l(S.range[1]);return oe<le?oe<=Q&&Q<=le:le<=Q&&Q<=oe},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var H=S._matchGroup;if(H){var ee=null,Q=null;for(var oe in H){var le=R[u.id2name(oe)];if(le._categories){ee=le._categories,Q=le._categoriesMap;break}}ee&&Q?(S._categories=ee,S._categoriesMap=Q):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var de=0;de<S._initialCategories.length;de++)G(S._initialCategories[de])},S.sortByInitialCategories=function(){var H=[];if(S._emptyCategories(),S._initialCategories)for(var ee=0;ee<S._initialCategories.length;ee++)G(S._initialCategories[ee]);H=H.concat(S._traceIndices);var Q=S._matchGroup;for(var oe in Q)if(O!==oe){var le=R[u.id2name(oe)];le._categories=S._categories,le._categoriesMap=S._categoriesMap,H=H.concat(le._traceIndices)}return H};var ie=R._d3locale;"date"===S.type&&(S._dateFormat=ie?ie.timeFormat:m,S._extraFormat=R._extraFormat),S._separators=R.separators,S._numFormat=ie?ie.numberFormat:y,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(v,re,ne){"use strict";re.exports=function(g){var m=["showexponent","showtickprefix","showticksuffix"].filter(function(b){return void 0!==g[b]});if(m.every(function(b){return g[b]===g[m[0]]})||1===m.length)return g[m[0]]}},{}],587:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color").contrast,b=v("./layout_attributes"),y=v("./show_dflt"),e=v("../array_container_defaults");function r(n,a){function t(p,s){return g.coerce(n,a,b.tickformatstops,p,s)}t("enabled")&&(t("dtickrange"),t("value"))}re.exports=function(n,a,t,p,s){s||(s={});var i=y(n);if(t("showticklabels")){var f=s.font||{},c=a.color,l=-1!==(a.ticklabelposition||"").indexOf("inside")?m(s.bgColor):c&&c!==b.color.dflt?c:f.color;if(g.coerceFont(t,"tickfont",{family:f.family,size:f.size,color:l}),s.noTicklabelstep||"multicategory"===p||"log"===p||t("ticklabelstep"),s.noAng||t("tickangle"),"category"!==p){var h=t("tickformat");e(n,a,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:r}),a.tickformatstops.length||delete a.tickformatstops,s.noExp||h||"date"===p||(t("showexponent",i),t("exponentformat"),t("minexponent"),t("separatethousands"))}}}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y,e,r){var n=r.isMinor,a=n?b.minor||{}:b,t=n?y.minor:y,p=n?m.minor:m,s=n?"minor.":"",i=g.coerce2(a,t,p,"ticklen",n?.6*(y.ticklen||5):void 0),f=g.coerce2(a,t,p,"tickwidth",n?y.tickwidth||1:void 0),c=g.coerce2(a,t,p,"tickcolor",(n?y.tickcolor:void 0)||t.color);e(s+"ticks",!n&&r.outerTicks||i||f||c?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(v,re,ne){"use strict";var g=v("./clean_ticks"),m=v("../../lib").isArrayOrTypedArray;re.exports=function(b,y,e,r,n){n||(n={});var a=n.isMinor,t=a?b.minor||{}:b,p=a?y.minor:y,s=a?"minor.":"";function i(o){var x=t[o];return void 0!==x?x:(p._template||{})[o]}var f=i("tick0"),c=i("dtick"),l=i("tickvals"),h=e(s+"tickmode",m(l)?"array":c?"linear":"auto");if("auto"===h)e(s+"nticks");else if("linear"===h){var d=p.dtick=g.dtick(c,r);p.tick0=g.tick0(f,r,y.calendar,d)}else"multicategory"!==r&&(void 0===e(s+"tickvals")?p.tickmode="auto":a||e("ticktext"))}},{"../../lib":515,"./clean_ticks":572}],590:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../lib"),y=v("../../components/drawing"),e=v("./axes");re.exports=function(r,n,a,t){var p=r._fullLayout;if(0!==n.length){var s,i,f,c;t&&(s=t());var l=g.ease(a.easing);return r._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var o={},x=0;x<n.length;x++){var u=n[x],_=u.plotinfo.yaxis;u.xr0&&(o[u.plotinfo.xaxis._name+".range"]=u.xr0.slice()),u.yr0&&(o[_._name+".range"]=u.yr0.slice())}return m.call("relayout",r,o).then(function(){for(var w=0;w<n.length;w++)h(n[w].plotinfo)})}()}),i=Date.now(),c=window.requestAnimationFrame(function o(){f=Date.now();for(var x=Math.min(1,(f-i)/a.duration),u=l(x),T=0;T<n.length;T++)d(n[T],u);f-i>a.duration?(function(){for(var _={},w=0;w<n.length;w++){var M=n[w],S=M.plotinfo.yaxis;M.xr1&&(_[M.plotinfo.xaxis._name+".range"]=M.xr1.slice()),M.yr1&&(_[S._name+".range"]=M.yr1.slice())}s&&s(),m.call("relayout",r,_).then(function(){for(var R=0;R<n.length;R++)h(n[R].plotinfo)})}(),c=window.cancelAnimationFrame(o)):c=window.requestAnimationFrame(o)}),Promise.resolve()}function h(o){var x=o.xaxis,u=o.yaxis;p._defs.select("#"+o.clipId+"> rect").call(y.setTranslate,0,0).call(y.setScale,1,1),o.plot.call(y.setTranslate,x._offset,u._offset).call(y.setScale,1,1);var T=o.plot.selectAll(".scatterlayer .trace");T.selectAll(".point").call(y.setPointGroupScale,1,1),T.selectAll(".textpoint").call(y.setTextPointsScale,1,1),T.call(y.hideOutsideRangePoints,o)}function d(o,x){var u=o.plotinfo,T=u.xaxis,_=u.yaxis,w=T._length,M=_._length,I=!!o.xr1,S=!!o.yr1,R=[];if(I){var O=b.simpleMap(o.xr0,T.r2l),C=b.simpleMap(o.xr1,T.r2l),D=O[1]-O[0],B=C[1]-C[0];R[0]=(O[0]*(1-x)+x*C[0]-O[0])/(O[1]-O[0])*w,R[2]=w*(1-x+x*B/D),T.range[0]=T.l2r(O[0]*(1-x)+x*C[0]),T.range[1]=T.l2r(O[1]*(1-x)+x*C[1])}else R[0]=0,R[2]=w;if(S){var z=b.simpleMap(o.yr0,_.r2l),Y=b.simpleMap(o.yr1,_.r2l),G=z[1]-z[0],J=Y[1]-Y[0];R[1]=(z[1]*(1-x)+x*Y[1]-z[1])/(z[0]-z[1])*M,R[3]=M*(1-x+x*J/G),_.range[0]=T.l2r(z[0]*(1-x)+x*Y[0]),_.range[1]=_.l2r(z[1]*(1-x)+x*Y[1])}else R[1]=0,R[3]=M;e.drawOne(r,T,{skipTitle:!0}),e.drawOne(r,_,{skipTitle:!0}),e.redrawComponents(r,[T._id,_._id]);var te=I?w/R[2]:1,X=S?M/R[3]:1,q=T._offset-(I?R[0]/R[2]*w:0),ie=_._offset-(S?R[1]/R[3]*M:0);u.clipRect.call(y.setTranslate,I?R[0]:0,S?R[1]:0).call(y.setScale,1/te,1/X),u.plot.call(y.setTranslate,q,ie).call(y.setScale,te,X),y.setPointGroupScale(u.zoomScalePts,1/te,1/X),y.setTextPointsScale(u.zoomScaleTxt,1/te,1/X)}e.redrawComponents(r)}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(v,re,ne){"use strict";var g=v("../../registry").traceIs,m=v("./axis_autotype");function b(e){return{v:"x",h:"y"}[e.orientation||"v"]}function y(e,r){var n=b(e),a=g(e,"box-violin"),t=g(e._fullInput||{},"candlestick");return a&&!t&&r===n&&void 0===e[n]&&void 0===e[n+"0"]}re.exports=function(e,r,n,a){n("autotypenumbers",a.autotypenumbersDflt),"-"===n("type",(a.splomStash||{}).type)&&(function(t,p){if("-"===t.type){var s,i=t._id,f=i.charAt(0);-1!==i.indexOf("scene")&&(i=f);var c=function(_,w,M){for(var I=0;I<_.length;I++){var S=_[I];if("splom"===S.type&&S._length>0&&(S["_"+M+"axes"]||{})[w]||(S[M+"axis"]||M)===w&&(y(S,M)||(S[M]||[]).length||S[M+"0"]))return S}}(p,i,f);if(c){if("histogram"===c.type&&f==={v:"y",h:"x"}[c.orientation||"v"])return void(t.type="linear");var l=f+"calendar",h=c[l],d={noMultiCategory:!g(c,"cartesian")||g(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&f==={h:"x",v:"y"}[c.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=t.autotypenumbers,y(c,f)){var o=b(c),x=[];for(s=0;s<p.length;s++){var u=p[s];g(u,"box-violin")&&(u[f+"axis"]||f)===i&&(x.push(void 0!==u[o]?u[o][0]:void 0!==u.name?u.name:"text"),u[l]!==h&&(h=void 0))}t.type=m(x,h,d)}else if("splom"===c.type){var T=c.dimensions[c._axesDim[i]];T.visible&&(t.type=m(T.values,h,d))}else t.type=m(c[f]||[c[f+"0"]],h,d)}}}(r,a.data),"-"===r.type?r.type="linear":e.type=r.type)}},{"../../registry":647,"./axis_autotype":567}],592:[function(v,re,ne){"use strict";var g=v("../registry"),m=v("../lib");function b(n,a,t){var p,s,i,f=!1;if("data"===a.type)p=n._fullData[null!==a.traces?a.traces[0]:0];else{if("layout"!==a.type)return!1;p=n._fullLayout}return s=m.nestedProperty(p,a.prop).get(),(i=t[a.type]=t[a.type]||{}).hasOwnProperty(a.prop)&&i[a.prop]!==s&&(f=!0),i[a.prop]=s,{changed:f,value:s}}function y(n,a){var t=[],p=a[0],s={};if("string"==typeof p)s[p]=a[1];else{if(!m.isPlainObject(p))return t;s=p}return r(s,function(i,f,c){t.push({type:"layout",prop:i,value:c})},"",0),t}function e(n,a){var t,p,s,i,f=[];if(s=a[1],t=a[2],i={},"string"==typeof(p=a[0]))i[p]=s;else{if(!m.isPlainObject(p))return f;i=p,void 0===t&&(t=s)}return void 0===t&&(t=null),r(i,function(c,l,h){var d,o;if(Array.isArray(h)){o=h.slice();var x=Math.min(o.length,n.data.length);t&&(x=Math.min(x,t.length)),d=[];for(var u=0;u<x;u++)d[u]=t?t[u]:u}else o=h,d=t?t.slice():null;if(null===d)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(d)){if(!Array.isArray(o)){var T=o;o=[];for(var _=0;_<d.length;_++)o[_]=T}o.length=Math.min(d.length,o.length)}f.push({type:"data",prop:c,traces:d,value:o})},"",0),f}function r(n,a,t,p){Object.keys(n).forEach(function(s){var i=n[s];if("_"!==s[0]){var f=t+(p>0?".":"")+s;m.isPlainObject(i)?r(i,a,f,p+1):a(f,s,i)}})}ne.manageCommandObserver=function(n,a,t,p){var s={},i=!0;a&&a._commandObserver&&(s=a._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var f=ne.hasSimpleAPICommandBindings(n,t,s.lookupTable);if(a&&a._commandObserver){if(f)return s;if(a._commandObserver.remove)return a._commandObserver.remove(),a._commandObserver=null,s}if(f){b(n,f,s.cache),s.check=function(){if(i){var h=b(n,f,s.cache);return h.changed&&p&&void 0!==s.lookupTable[h.value]&&(s.disable(),Promise.resolve(p({value:h.value,type:f.type,prop:f.prop,traces:f.traces,index:s.lookupTable[h.value]})).then(s.enable,s.enable)),h.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<c.length;l++)n._internalOn(c[l],s.check);s.remove=function(){for(var h=0;h<c.length;h++)n._removeInternalListener(c[h],s.check)}}else m.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){i=!1},s.enable=function(){i=!0},a&&(a._commandObserver=s),s},ne.hasSimpleAPICommandBindings=function(n,a,t){var p,s,i=a.length;for(p=0;p<i;p++){var f,c=a[p],l=c.method,h=c.args;if(Array.isArray(h)||(h=[]),!l)return!1;var d=ne.computeAPICommandBindings(n,l,h);if(1!==d.length)return!1;if(s){if((f=d[0]).type!==s.type||f.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(f.traces))return!1;f.traces.sort();for(var o=0;o<s.traces.length;o++)if(s.traces[o]!==f.traces[o])return!1}else if(f.prop!==s.prop)return!1}else s=d[0],Array.isArray(s.traces)&&s.traces.sort();var x=(f=d[0]).value;if(Array.isArray(x)){if(1!==x.length)return!1;x=x[0]}t&&(t[x]=p)}return s},ne.executeAPICommand=function(n,a,t){if("skip"===a)return Promise.resolve();var p=g.apiMethodRegistry[a],s=[n];Array.isArray(t)||(t=[]);for(var i=0;i<t.length;i++)s.push(t[i]);return p.apply(null,s).catch(function(f){return m.warn("API call to Plotly."+a+" rejected.",f),Promise.reject(f)})},ne.computeAPICommandBindings=function(n,a,t){var p,i;switch(Array.isArray(t)||(t=[]),a){case"restyle":p=e(n,t);break;case"relayout":p=y(0,t);break;case"update":p=e(n,[t[0],t[2]]).concat(y(0,[t[1]]));break;case"animate":i=t,p=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:p=[]}return p}},{"../lib":515,"../registry":647}],593:[function(v,re,ne){"use strict";var g=v("../lib/extend").extendFlat;ne.attributes=function(m,b){b=b||{};var y={valType:"info_array",editType:(m=m||{}).editType,items:[{valType:"number",min:0,max:1,editType:m.editType},{valType:"number",min:0,max:1,editType:m.editType}],dflt:[0,1]},e={x:g({},y,{}),y:g({},y,{}),editType:m.editType};return m.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:m.editType},e.column={valType:"integer",min:0,dflt:0,editType:m.editType}),e},ne.defaults=function(m,b,y,e){var r=e&&e.x||[0,1],n=e&&e.y||[0,1],a=b.grid;if(a){var t=y("domain.column");void 0!==t&&(t<a.columns?r=a._domains.x[t]:delete m.domain.column);var p=y("domain.row");void 0!==p&&(p<a.rows?n=a._domains.y[p]:delete m.domain.row)}var s=y("domain.x",r),i=y("domain.y",n);s[0]<s[1]||(m.domain.x=r.slice()),i[0]<i[1]||(m.domain.y=n.slice())}},{"../lib/extend":505}],594:[function(v,re,ne){"use strict";re.exports=function(g){var m=g.editType,b=g.colorEditType;void 0===b&&(b=m);var y={family:{valType:"string",noBlank:!0,strict:!0,editType:m},size:{valType:"number",min:1,editType:m},color:{valType:"color",editType:b},editType:m};return g.autoSize&&(y.size.dflt="auto"),g.autoColor&&(y.color.dflt="auto"),g.arrayOk&&(y.family.arrayOk=!0,y.size.arrayOk=!0,y.color.arrayOk=!0),y}},{}],595:[function(v,re,ne){"use strict";re.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(v,re,ne){"use strict";ne.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ne.axesNames=["lonaxis","lataxis"],ne.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ne.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ne.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ne.clipPad=.001,ne.precision=.1,ne.landColor="#F0DC82",ne.waterColor="#3399FF",ne.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ne.sphereSVG={type:"Sphere"},ne.fillLayers={ocean:1,land:1,lakes:1},ne.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ne.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ne.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ne.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-geo"),b=m.geoPath,y=m.geoDistance,e=v("d3-geo-projection"),r=v("../../registry"),n=v("../../lib"),a=n.strTranslate,t=v("../../components/color"),p=v("../../components/drawing"),s=v("../../components/fx"),i=v("../plots"),f=v("../cartesian/axes"),c=v("../cartesian/autorange").getAutoRange,l=v("../../components/dragelement"),h=v("../../components/selections").prepSelect,d=v("../../components/selections").clearOutline,o=v("../../components/selections").selectOnClick,x=v("./zoom"),u=v("./constants"),T=v("../../lib/geo_location_utils"),_=v("../../lib/topojson_utils"),w=v("topojson-client").feature;function M(R){this.id=R.id,this.graphDiv=R.graphDiv,this.container=R.container,this.topojsonURL=R.topojsonURL,this.isStatic=R.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var I=M.prototype;function S(R,O){var C=u.clipPad,D=R[0]+C,B=R[1]-C,z=O[0]+C,Y=O[1]-C;D>0&&B<0&&(B+=360);var G=(B-D)/4;return{type:"Polygon",coordinates:[[[D,z],[D,Y],[D+G,Y],[D+2*G,Y],[D+3*G,Y],[B,Y],[B,z],[B-G,z],[B-2*G,z],[B-3*G,z],[D,z]]]}}re.exports=function(R){return new M(R)},I.plot=function(R,O,C){var D=this,B=O[this.id],z=[],Y=!1;for(var G in u.layerNameToAdjective)if("frame"!==G&&B["show"+G]){Y=!0;break}for(var J=0;J<R.length;J++)if(R[0][0].trace.locationmode){Y=!0;break}if(Y){var te=_.getTopojsonName(B);null!==D.topojson&&te===D.topojsonName||(D.topojsonName=te,void 0===PlotlyGeoAssets.topojson[D.topojsonName]&&z.push(D.fetchTopojson()))}z=z.concat(T.fetchTraceGeoData(R)),C.push(new Promise(function(X,K){Promise.all(z).then(function(){D.topojson=PlotlyGeoAssets.topojson[D.topojsonName],D.update(R,O),X()}).catch(K)}))},I.fetchTopojson=function(){var R=this,O=_.getTopojsonPath(R.topojsonURL,R.topojsonName);return new Promise(function(C,D){g.json(O,function(B,z){if(B)return D(404===B.status?new Error(["plotly.js could not find topojson file at",O+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",O].join(" ")));PlotlyGeoAssets.topojson[R.topojsonName]=z,C()})})},I.update=function(R,O){var C=O[this.id];this.hasChoropleth=!1;for(var D=0;D<R.length;D++){var B=R[D],z=B[0].trace;"choropleth"===z.type&&(this.hasChoropleth=!0),!0===z.visible&&z._length>0&&z._module.calcGeoJSON(B,O)}if(!this.updateProjection(R,O)){this.viewInitial&&this.scope===C.scope||this.saveViewInitial(C),this.scope=C.scope,this.updateBaseLayers(O,C),this.updateDims(O,C),this.updateFx(O,C),i.generalUpdatePerTraceModule(this.graphDiv,this,R,C);var Y=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Y.selectAll(".point"),this.dataPoints.text=Y.selectAll("text"),this.dataPaths.line=Y.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this.render()}},I.updateProjection=function(R,O){var C=this.graphDiv,D=O[this.id],B=O._size,z=D.domain,Y=D.projection,G=D.lonaxis,J=D.lataxis,te=G._ax,X=J._ax,K=this.projection=function(ve){var Te=ve.projection,Ie=Te.type,De=u.projNames[Ie];De="geo"+n.titleCase(De);for(var Fe=(m[De]||e[De])(),Ue=ve._isSatellite?180*Math.acos(1/Te.distance)/Math.PI:ve._isClipped?u.lonaxisSpan[Ie]/2:null,qe=["center","rotate","parallels","clipExtent"],je=function(Be){return Be?Fe:[]},rt=0;rt<qe.length;rt++){var Ne=qe[rt];"function"!=typeof Fe[Ne]&&(Fe[Ne]=je)}return Fe.isLonLatOverEdges=function(Be){if(null===Fe(Be))return!0;if(Ue){var We=Fe.rotate();return y(Be,[-We[0],-We[1]])>Ue*Math.PI/180}return!1},Fe.getPath=function(){return b().projection(Fe)},Fe.getBounds=function(Be){return Fe.getPath().bounds(Be)},Fe.precision(u.precision),ve._isSatellite&&Fe.tilt(Te.tilt).distance(Te.distance),Ue&&Fe.clipAngle(Ue-u.clipPad),Fe}(D),ae=[[B.l+B.w*z.x[0],B.t+B.h*(1-z.y[1])],[B.l+B.w*z.x[1],B.t+B.h*(1-z.y[0])]],U=D.center||{},V=Y.rotation||{},q=G.range||[],ie=J.range||[];if(D.fitbounds){te._length=ae[1][0]-ae[0][0],X._length=ae[1][1]-ae[0][1],te.range=c(C,te),X.range=c(C,X);var H=(te.range[0]+te.range[1])/2,ee=(X.range[0]+X.range[1])/2;if(D._isScoped)U={lon:H,lat:ee};else if(D._isClipped){U={lon:H,lat:ee},V={lon:H,lat:ee,roll:V.roll};var Q=Y.type,oe=u.lonaxisSpan[Q]/2||180,le=u.lataxisSpan[Q]/2||90;q=[H-oe,H+oe],ie=[ee-le,ee+le]}else U={lon:H,lat:ee},V={lon:H,lat:V.lat,roll:V.roll}}K.center([U.lon-V.lon,U.lat-V.lat]).rotate([-V.lon,-V.lat,V.roll]).parallels(Y.parallels);var de=S(q,ie);K.fitExtent(ae,de);var fe=this.bounds=K.getBounds(de),be=this.fitScale=K.scale(),he=K.translate();if(D.fitbounds){var _e=K.getBounds(S(te.range,X.range)),Ce=Math.min((fe[1][0]-fe[0][0])/(_e[1][0]-_e[0][0]),(fe[1][1]-fe[0][1])/(_e[1][1]-_e[0][1]));isFinite(Ce)?K.scale(Ce*be):n.warn("Something went wrong during"+this.id+"fitbounds computations.")}else K.scale(Y.scale*be);var Ee=this.midPt=[(fe[0][0]+fe[1][0])/2,(fe[0][1]+fe[1][1])/2];if(K.translate([he[0]+(Ee[0]-he[0]),he[1]+(Ee[1]-he[1])]).clipExtent(fe),D._isAlbersUsa){var Ae=K([U.lon,U.lat]),ze=K.translate();K.translate([ze[0]-(Ae[0]-ze[0]),ze[1]-(Ae[1]-ze[1])])}},I.updateBaseLayers=function(R,O){var C=this,D=C.topojson,B=C.layers,z=C.basePaths;function Y(K){return"lonaxis"===K||"lataxis"===K}function G(K){return Boolean(u.lineLayers[K])}function J(K){return Boolean(u.fillLayers[K])}var te=(this.hasChoropleth?u.layersForChoropleth:u.layers).filter(function(K){return G(K)||J(K)?O["show"+K]:!Y(K)||O[K].showgrid}),X=C.framework.selectAll(".layer").data(te,String);X.exit().each(function(K){delete B[K],delete z[K],g.select(this).remove()}),X.enter().append("g").attr("class",function(K){return"layer "+K}).each(function(K){var ae=B[K]=g.select(this);"bg"===K?C.bgRect=ae.append("rect").style("pointer-events","all"):Y(K)?z[K]=ae.append("path").style("fill","none"):"backplot"===K?ae.append("g").classed("choroplethlayer",!0):"frontplot"===K?ae.append("g").classed("scatterlayer",!0):G(K)?z[K]=ae.append("path").style("fill","none").style("stroke-miterlimit",2):J(K)&&(z[K]=ae.append("path").style("stroke","none"))}),X.order(),X.each(function(K){var ae=z[K],U=u.layerNameToAdjective[K];"frame"===K?ae.datum(u.sphereSVG):G(K)||J(K)?ae.datum(w(D,D.objects[K])):Y(K)&&ae.datum(function(V,q,ie){var H,ee,Q,oe=q[V],le=u.scopeDefaults[q.scope];"lonaxis"===V?(H=le.lonaxisRange,ee=le.lataxisRange,Q=function(ze,ve){return[ze,ve]}):"lataxis"===V&&(H=le.lataxisRange,ee=le.lonaxisRange,Q=function(ze,ve){return[ve,ze]});var de={type:"linear",range:[H[0],H[1]-1e-6],tick0:oe.tick0,dtick:oe.dtick};f.setConvert(de,ie);var fe=f.calcTicks(de);q.isScoped||"lonaxis"!==V||fe.pop();for(var be=fe.length,he=new Array(be),_e=0;_e<be;_e++)for(var Ce=fe[_e].x,Ee=he[_e]=[],Ae=ee[0];Ae<ee[1]+2.5;Ae+=2.5)Ee.push(Q(Ce,Ae));return{type:"MultiLineString",coordinates:he}}(K,O,R)).call(t.stroke,O[K].gridcolor).call(p.dashLine,O[K].griddash,O[K].gridwidth),G(K)?ae.call(t.stroke,O[U+"color"]).call(p.dashLine,"",O[U+"width"]):J(K)&&ae.call(t.fill,O[U+"color"])})},I.updateDims=function(R,O){var C=this.bounds,D=(O.framewidth||0)/2,B=C[0][0]-D,z=C[0][1]-D,Y=C[1][0]-B+D,G=C[1][1]-z+D;p.setRect(this.clipRect,B,z,Y,G),this.bgRect.call(p.setRect,B,z,Y,G).call(t.fill,O.bgcolor),this.xaxis._offset=B,this.xaxis._length=Y,this.yaxis._offset=z,this.yaxis._length=G},I.updateFx=function(R,O){var C=this,D=C.graphDiv,B=C.bgRect,z=R.dragmode,Y=R.clickmode;if(!C.isStatic){var G={element:C.bgRect.node(),gd:D,plotinfo:{id:C.id,xaxis:C.xaxis,yaxis:C.yaxis,fillRangeItems:function(te,X){X.isRect?(te.range={})[C.id]=[J([X.xmin,X.ymin]),J([X.xmax,X.ymax])]:(te.lassoPoints={})[C.id]=X.map(J)}},xaxes:[C.xaxis],yaxes:[C.yaxis],subplot:C.id,clickFn:function(te){2===te&&d(D)}};"pan"===z?(B.node().onmousedown=null,B.call(x(C,O)),B.on("dblclick.zoom",function(){var te=C.viewInitial,X={};for(var K in te)X[C.id+"."+K]=te[K];r.call("_guiRelayout",D,X),D.emit("plotly_doubleclick",null)}),D._context._scrollZoom.geo||B.on("wheel.zoom",null)):"select"!==z&&"lasso"!==z||(B.on(".zoom",null),G.prepFn=function(te,X,K){h(te,X,K,G,z)},l.init(G)),B.on("mousemove",function(){var te=C.projection.invert(n.getPositionFromD3Event());if(!te)return l.unhover(D,g.event);C.xaxis.p2c=function(){return te[0]},C.yaxis.p2c=function(){return te[1]},s.hover(D,g.event,C.id)}),B.on("mouseout",function(){D._dragging||l.unhover(D,g.event)}),B.on("click",function(){"select"!==z&&"lasso"!==z&&(Y.indexOf("select")>-1&&o(g.event,D,[C.xaxis],[C.yaxis],C.id,G),Y.indexOf("event")>-1&&s.click(D,g.event))})}function J(te){return C.projection.invert([te[0]+C.xaxis._offset,te[1]+C.yaxis._offset])}},I.makeFramework=function(){var R=this,O=R.graphDiv,C=O._fullLayout,D="clip"+C._uid+R.id;R.clipDef=C._clips.append("clipPath").attr("id",D),R.clipRect=R.clipDef.append("rect"),R.framework=g.select(R.container).append("g").attr("class","geo "+R.id).call(p.setClipUrl,D,O),R.project=function(B){var z=R.projection(B);return z?[z[0]-R.xaxis._offset,z[1]-R.yaxis._offset]:[null,null]},R.xaxis={_id:"x",c2p:function(B){return R.project(B)[0]}},R.yaxis={_id:"y",c2p:function(B){return R.project(B)[1]}},R.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},f.setConvert(R.mockAxis,C)},I.saveViewInitial=function(R){var C=R.center||{},D=R.projection,B=D.rotation||{};this.viewInitial={fitbounds:R.fitbounds,"projection.scale":D.scale},n.extendFlat(this.viewInitial,R._isScoped?{"center.lon":C.lon,"center.lat":C.lat}:R._isClipped?{"projection.rotation.lon":B.lon,"projection.rotation.lat":B.lat}:{"center.lon":C.lon,"center.lat":C.lat,"projection.rotation.lon":B.lon})},I.render=function(){var R,O=this.projection,C=O.getPath();function D(z){var Y=O(z.lonlat);return Y?a(Y[0],Y[1]):null}function B(z){return O.isLonLatOverEdges(z.lonlat)?"none":null}for(R in this.basePaths)this.basePaths[R].attr("d",C);for(R in this.dataPaths)this.dataPaths[R].attr("d",function(z){return C(z.geojson)});for(R in this.dataPoints)this.dataPoints[R].attr("display",B).attr("transform",D)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(v,re,ne){"use strict";var g=v("../../plots/get_data").getSubplotCalcData,m=v("../../lib").counterRegex,b=v("./geo"),y="geo",e=m(y),r={};r.geo={valType:"subplotid",dflt:y,editType:"calc"},re.exports={attr:y,name:y,idRoot:y,idRegex:e,attrRegex:e,attributes:r,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(n){for(var a=n._fullLayout,t=n.calcdata,p=a._subplots.geo,s=0;s<p.length;s++){var i=p[s],f=g(t,y,i),c=a[i]._subplot;c||(c=b({id:i,graphDiv:n,container:a._geolayer.node(),topojsonURL:n._context.topojsonURL,staticPlot:n._context.staticPlot}),a[i]._subplot=c),c.plot(f,a,n._promises)}},updateFx:function(n){for(var a=n._fullLayout,t=a._subplots.geo,p=0;p<t.length;p++){var s=a[t[p]];s._subplot.updateFx(a,s)}},clean:function(n,a,t,p){for(var s=p._subplots.geo||[],i=0;i<s.length;i++){var f=s[i],c=p[f]._subplot;!a[f]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(v,re,ne){"use strict";var g=v("../../components/color/attributes"),m=v("../domain").attributes,b=v("../../components/drawing/attributes").dash,y=v("./constants"),e=v("../../plot_api/edit_types").overrideAll,r=v("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:g.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:b};(re.exports=e({domain:m({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:r(y.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:r(y.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:g.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:y.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:y.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:y.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:y.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:g.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:g.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:g.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:g.background},lonaxis:n,lataxis:n},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../subplot_defaults"),b=v("../get_data").getSubplotData,y=v("./constants"),e=v("./layout_attributes"),r=y.axesNames;function n(a,t,p,s){var i=b(s.fullData,"geo",s.id).map(function(V){return V._expandedIndex}),f=p("resolution"),c=p("scope"),l=y.scopeDefaults[c],h=p("projection.type",l.projType),d=t._isAlbersUsa="albers usa"===h;d&&(c=t.scope="usa");var o=t._isScoped="world"!==c,x=t._isSatellite="satellite"===h,u=t._isConic=-1!==h.indexOf("conic")||"albers"===h,T=t._isClipped=!!y.lonaxisSpan[h];if(!1===a.visible){var _=g.extendDeep({},t._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),t._template=_}for(var w=p("visible"),M=0;M<r.length;M++){var I,S=r[M],R=[30,10][M];if(o)I=l[S+"Range"];else{var O=y[S+"Span"],C=(O[h]||O["*"])/2,D=p("projection.rotation."+S.substr(0,3),l.projRotate[M]);I=[D-C,D+C]}var B=p(S+".range",I);p(S+".tick0"),p(S+".dtick",R),p(S+".showgrid",!!w&&void 0)&&(p(S+".gridcolor"),p(S+".gridwidth"),p(S+".griddash")),t[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:i,setScale:g.identity,c2l:g.identity,r2l:g.identity,autorange:!0,range:B.slice(),_m:1,_input:{}}}var z=t.lonaxis.range,Y=t.lataxis.range,G=z[0],J=z[1];G>0&&J<0&&(J+=360);var te,X,K,ae=(G+J)/2;if(!d){var U=o?l.projRotate:[ae,0,0];te=p("projection.rotation.lon",U[0]),p("projection.rotation.lat",U[1]),p("projection.rotation.roll",U[2]),p("showcoastlines",!o&&w)&&(p("coastlinecolor"),p("coastlinewidth")),p("showocean",!!w&&void 0)&&p("oceancolor")}d?(X=-96.6,K=38.7):(X=o?ae:te,K=(Y[0]+Y[1])/2),p("center.lon",X),p("center.lat",K),x&&(p("projection.tilt"),p("projection.distance")),u&&p("projection.parallels",l.projParallels||[0,60]),p("projection.scale"),p("showland",!!w&&void 0)&&p("landcolor"),p("showlakes",!!w&&void 0)&&p("lakecolor"),p("showrivers",!!w&&void 0)&&(p("rivercolor"),p("riverwidth")),p("showcountries",o&&"usa"!==c&&w)&&(p("countrycolor"),p("countrywidth")),("usa"===c||"north america"===c&&50===f)&&(p("showsubunits",w),p("subunitcolor"),p("subunitwidth")),o||p("showframe",w)&&(p("framecolor"),p("framewidth")),p("bgcolor"),p("fitbounds")&&(delete t.projection.scale,o?(delete t.center.lon,delete t.center.lat):T?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}re.exports=function(a,t,p){m(a,t,p,{type:"geo",attributes:e,handleDefaults:n,fullData:p,partition:"y"})}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../registry"),y=Math.PI/180,e=180/Math.PI,r={cursor:"pointer"},n={cursor:"auto"};function a(w,M){return g.behavior.zoom().translate(M.translate()).scale(M.scale())}function t(w,M,I){var S=w.id,R=w.graphDiv,O=R.layout,C=O[S],D=R._fullLayout,B=D[S],z={},Y={};function G(J,te){z[S+"."+J]=m.nestedProperty(C,J).get(),b.call("_storeDirectGUIEdit",O,D._preGUI,z);var X=m.nestedProperty(B,J);X.get()!==te&&(X.set(te),m.nestedProperty(C,J).set(te),Y[S+"."+J]=te)}I(G),G("projection.scale",M.scale()/w.fitScale),G("fitbounds",!1),R.emit("plotly_relayout",Y)}function p(w,M){var I=a(0,M);function S(R){var O=M.invert(w.midPt);R("center.lon",O[0]),R("center.lat",O[1])}return I.on("zoomstart",function(){g.select(this).style(r)}).on("zoom",function(){M.scale(g.event.scale).translate(g.event.translate),w.render();var R=M.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/w.fitScale,"geo.center.lon":R[0],"geo.center.lat":R[1]})}).on("zoomend",function(){g.select(this).style(n),t(w,M,S)}),I}function s(w,M){var I,S,R,O,C,D,B,z,Y,G=a(0,M);function J(X){return M.invert(X)}function te(X){var K=M.rotate(),ae=M.invert(w.midPt);X("projection.rotation.lon",-K[0]),X("center.lon",ae[0]),X("center.lat",ae[1])}return G.on("zoomstart",function(){g.select(this).style(r),I=g.mouse(this),S=M.rotate(),R=M.translate(),O=S,C=J(I)}).on("zoom",function(){if(D=g.mouse(this),function(ae){var U=J(ae);if(!U)return!0;var V=M(U);return Math.abs(V[0]-ae[0])>2||Math.abs(V[1]-ae[1])>2}(I))return G.scale(M.scale()),void G.translate(M.translate());M.scale(g.event.scale),M.translate([R[0],g.event.translate[1]]),C?J(D)&&(z=J(D),M.rotate(B=[O[0]+(z[0]-C[0]),S[1],S[2]]),O=B):C=J(I=D),Y=!0,w.render();var X=M.rotate(),K=M.invert(w.midPt);w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/w.fitScale,"geo.center.lon":K[0],"geo.center.lat":K[1],"geo.projection.rotation.lon":-X[0]})}).on("zoomend",function(){g.select(this).style(n),Y&&t(w,M,te)}),G}function i(w,M){var I,S={r:M.rotate(),k:M.scale()},R=a(0,M),O=function(J){for(var te=0,X=arguments.length,K=[];++te<X;)K.push(arguments[te]);var ae=g.dispatch.apply(null,K);return ae.of=function(U,V){return function(q){var ie;try{ie=q.sourceEvent=g.event,q.target=J,g.event=q,ae[q.type].apply(U,V)}finally{g.event=ie}}},ae}(R,"zoomstart","zoom","zoomend"),C=0,D=R.on;function B(J){C++||J({type:"zoomstart"})}function z(J){J({type:"zoom"})}function Y(J){--C||J({type:"zoomend"})}function G(J){var te=M.rotate();J("projection.rotation.lon",-te[0]),J("projection.rotation.lat",-te[1])}return R.on("zoomstart",function(){g.select(this).style(r);var J=g.mouse(this),te=M.rotate(),X=te,K=M.translate(),ae=c(te);I=f(M,J),D.call(R,"zoom",function(){var U=g.mouse(this);if(M.scale(S.k=g.event.scale),I){if(f(M,U)){M.rotate(te).translate(K);var V=f(M,U),q=h(I,V),ie=T(l(ae,q)),H=S.r=d(ie,I,X);isFinite(H[0])&&isFinite(H[1])&&isFinite(H[2])||(H=X),M.rotate(H),X=H}}else I=f(M,J=U);z(O.of(this,arguments))}),B(O.of(this,arguments))}).on("zoomend",function(){g.select(this).style(n),D.call(R,"zoom",null),Y(O.of(this,arguments)),t(w,M,G)}).on("zoom.redraw",function(){w.render();var J=M.rotate();w.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":M.scale()/w.fitScale,"geo.projection.rotation.lon":-J[0],"geo.projection.rotation.lat":-J[1]})}),g.rebind(R,O,"on")}function f(w,M){var S,R,O,C,I=w.invert(M);return I&&isFinite(I[0])&&isFinite(I[1])&&(R=(S=I)[0]*y,O=S[1]*y,[(C=Math.cos(O))*Math.cos(R),C*Math.sin(R),Math.sin(O)])}function c(w){var M=.5*w[0]*y,I=.5*w[1]*y,S=.5*w[2]*y,R=Math.sin(M),O=Math.cos(M),C=Math.sin(I),D=Math.cos(I),B=Math.sin(S),z=Math.cos(S);return[O*D*z+R*C*B,R*D*z-O*C*B,O*C*z+R*D*B,O*D*B-R*C*z]}function l(w,M){var I=w[0],S=w[1],R=w[2],O=w[3],C=M[0],D=M[1],B=M[2],z=M[3];return[I*C-S*D-R*B-O*z,I*D+S*C+R*z-O*B,I*B-S*z+R*C+O*D,I*z+S*B-R*D+O*C]}function h(w,M){if(w&&M){var I=[(C=w)[1]*(D=M)[2]-C[2]*D[1],C[2]*D[0]-C[0]*D[2],C[0]*D[1]-C[1]*D[0]],S=Math.sqrt(_(I,I)),R=.5*Math.acos(Math.max(-1,Math.min(1,_(w,M)))),O=Math.sin(R)/S;return S&&[Math.cos(R),I[2]*O,-I[1]*O,I[0]*O]}var C,D}function d(w,M,I){var S=u(M,2,w[0]);S=u(S,1,w[1]),S=u(S,0,w[2]-I[2]);var R,O,C=M[0],D=M[1],B=M[2],z=S[0],Y=S[1],G=S[2],J=Math.atan2(D,C)*e,te=Math.sqrt(C*C+D*D);Math.abs(Y)>te?(O=(Y>0?90:-90)-J,R=0):(O=Math.asin(Y/te)*e-J,R=Math.sqrt(te*te-Y*Y));var X=180-O-2*J,K=(Math.atan2(G,z)-Math.atan2(B,R))*e,ae=(Math.atan2(G,z)-Math.atan2(B,-R))*e;return o(I[0],I[1],O,K)<=o(I[0],I[1],X,ae)?[O,K,I[2]]:[X,ae,I[2]]}function o(w,M,I,S){var R=x(I-w),O=x(S-M);return Math.sqrt(R*R+O*O)}function x(w){return(w%360+540)%360-180}function u(w,M,I){var S=I*y,R=w.slice(),O=0===M?1:0,C=2===M?1:2,D=Math.cos(S),B=Math.sin(S);return R[O]=w[O]*D-w[C]*B,R[C]=w[C]*D+w[O]*B,R}function T(w){return[Math.atan2(2*(w[0]*w[1]+w[2]*w[3]),1-2*(w[1]*w[1]+w[2]*w[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(w[0]*w[2]-w[3]*w[1]))))*e,Math.atan2(2*(w[0]*w[3]+w[1]*w[2]),1-2*(w[2]*w[2]+w[3]*w[3]))*e]}function _(w,M){for(var I=0,S=0,R=w.length;S<R;++S)I+=w[S]*M[S];return I}re.exports=function(w,M){return(M._isScoped?p:M._isClipped?i:s)(w,w.projection)}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(v,re,ne){"use strict";var g=v("../registry"),m=v("./cartesian/constants").SUBPLOT_PATTERN;ne.getSubplotCalcData=function(b,y,e){var r=g.subplotsRegistry[y];if(!r)return[];for(var n=r.attr,a=[],t=0;t<b.length;t++){var p=b[t];p[0].trace[n]===e&&a.push(p)}return a},ne.getModuleCalcData=function(b,y){var e,r=[],n=[];if(!(e="string"==typeof y?g.getModule(y).plot:"function"==typeof y?y:y.plot))return[r,b];for(var a=0;a<b.length;a++){var t=b[a],p=t[0].trace;!0===p.visible&&0!==p._length&&(p._module.plot===e?r.push(t):n.push(t))}return[r,n]},ne.getSubplotData=function(b,y,e){if(!g.subplotsRegistry[y])return[];var r,n,a,t=g.subplotsRegistry[y].attr,p=[];if("gl2d"===y){var s=e.match(m);n="x"+s[1],a="y"+s[2]}for(var i=0;i<b.length;i++)r=b[i],"gl2d"===y&&g.traceIs(r,"gl2d")?r[t[0]]===n&&r[t[1]]===a&&p.push(r):r[t]===e&&p.push(r);return p}},{"../registry":647,"./cartesian/constants":573}],603:[function(v,re,ne){"use strict";var g=v("mouse-change"),m=v("mouse-wheel"),b=v("mouse-event-offset"),y=v("../cartesian/constants"),e=v("has-passive-events");function r(n,a){this.element=n,this.plot=a,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}re.exports=function(n){var a=n.mouseContainer,t=n.glplot,p=new r(a,t);function s(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function i(f,c,l){var h,d,o=n.calcDataBox(),x=t.viewBox,u=p.lastPos[0],T=p.lastPos[1],_=y.MINDRAG*t.pixelRatio,w=y.MINZOOM*t.pixelRatio;function M(D,B,z){var Y=Math.min(B,z),G=Math.max(B,z);Y!==G?(o[D]=Y,o[D+2]=G,p.dataBox=o,n.setRanges(o)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(c*=t.pixelRatio,l=x[3]-x[1]-(l*=t.pixelRatio),n.fullLayout.dragmode){case"zoom":if(f){var I=c/(x[2]-x[0])*(o[2]-o[0])+o[0],S=l/(x[3]-x[1])*(o[3]-o[1])+o[1];p.boxInited||(p.boxStart[0]=I,p.boxStart[1]=S,p.dragStart[0]=c,p.dragStart[1]=l),p.boxEnd[0]=I,p.boxEnd[1]=S,p.boxInited=!0,p.boxEnabled||p.boxStart[0]===p.boxEnd[0]&&p.boxStart[1]===p.boxEnd[1]||(p.boxEnabled=!0);var R=Math.abs(p.dragStart[0]-c)<w,O=Math.abs(p.dragStart[1]-l)<w;if(!function(){for(var D=n.graphDiv._fullLayout._axisConstraintGroups,B=n.xaxis._id,z=n.yaxis._id,Y=0;Y<D.length;Y++)if(-1!==D[Y][B]){if(-1!==D[Y][z])return!0;break}return!1}()||R&&O)R&&(p.boxEnd[0]=p.boxStart[0]),O&&(p.boxEnd[1]=p.boxStart[1]);else{h=p.boxEnd[0]-p.boxStart[0],d=p.boxEnd[1]-p.boxStart[1];var C=(o[3]-o[1])/(o[2]-o[0]);Math.abs(h*C)>Math.abs(d)?(p.boxEnd[1]=p.boxStart[1]+Math.abs(h)*C*(d>=0?1:-1),p.boxEnd[1]<o[1]?(p.boxEnd[1]=o[1],p.boxEnd[0]=p.boxStart[0]+(o[1]-p.boxStart[1])/Math.abs(C)):p.boxEnd[1]>o[3]&&(p.boxEnd[1]=o[3],p.boxEnd[0]=p.boxStart[0]+(o[3]-p.boxStart[1])/Math.abs(C))):(p.boxEnd[0]=p.boxStart[0]+Math.abs(d)/C*(h>=0?1:-1),p.boxEnd[0]<o[0]?(p.boxEnd[0]=o[0],p.boxEnd[1]=p.boxStart[1]+(o[0]-p.boxStart[0])*Math.abs(C)):p.boxEnd[0]>o[2]&&(p.boxEnd[0]=o[2],p.boxEnd[1]=p.boxStart[1]+(o[2]-p.boxStart[0])*Math.abs(C)))}}else p.boxEnabled?(d=p.boxStart[1]!==p.boxEnd[1],(h=p.boxStart[0]!==p.boxEnd[0])||d?(h&&(M(0,p.boxStart[0],p.boxEnd[0]),n.xaxis.autorange=!1),d&&(M(1,p.boxStart[1],p.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),p.boxEnabled=!1,p.boxInited=!1):p.boxInited&&(p.boxInited=!1);break;case"pan":p.boxEnabled=!1,p.boxInited=!1,f?(p.panning||(p.dragStart[0]=c,p.dragStart[1]=l),Math.abs(p.dragStart[0]-c)<_&&(c=p.dragStart[0]),Math.abs(p.dragStart[1]-l)<_&&(l=p.dragStart[1]),d=(T-l)*(o[3]-o[1])/(t.viewBox[3]-t.viewBox[1]),o[0]+=h=(u-c)*(o[2]-o[0])/(t.viewBox[2]-t.viewBox[0]),o[2]+=h,o[1]+=d,o[3]+=d,n.setRanges(o),p.panning=!0,p.lastInputTime=Date.now(),s(),n.cameraChanged(),n.handleAnnotations()):p.panning&&(p.panning=!1,n.relayoutCallback())}p.lastPos[0]=c,p.lastPos[1]=l}return p.mouseListener=g(a,i),a.addEventListener("touchstart",function(f){var c=b(f.changedTouches[0],a);i(0,c[0],c[1]),i(1,c[0],c[1]),f.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchmove",function(f){f.preventDefault();var c=b(f.changedTouches[0],a);i(1,c[0],c[1]),f.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchend",function(f){i(0,p.lastPos[0],p.lastPos[1]),f.preventDefault()},!!e&&{passive:!1}),p.wheelListener=m(a,function(f,c){if(!n.scrollZoom)return!1;var l=n.calcDataBox(),h=t.viewBox,d=p.lastPos[0],o=p.lastPos[1],x=Math.exp(5*c/(h[3]-h[1])),u=d/(h[2]-h[0])*(l[2]-l[0])+l[0],T=o/(h[3]-h[1])*(l[3]-l[1])+l[1];return l[0]=(l[0]-u)*x+u,l[2]=(l[2]-u)*x+u,l[1]=(l[1]-T)*x+T,l[3]=(l[3]-T)*x+T,n.setRanges(l),p.lastInputTime=Date.now(),s(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),p}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(v,re,ne){"use strict";var g=v("../cartesian/axes"),m=v("../../lib/str2rgbarray");function b(r){this.scene=r,this.gl=r.gl,this.pixelRatio=r.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var y=b.prototype,e=["xaxis","yaxis"];y.merge=function(r){var n,a,t,p,s,i,f,c,l,h,d;for(this.titleEnable=!1,this.backgroundColor=m(r.plot_bgcolor),h=0;h<2;++h){var o=(n=e[h]).charAt(0);for(t=(a=r[this.scene[n]._name]).title.text===this.scene.fullLayout._dfltTitle[o]?"":a.title.text,d=0;d<=2;d+=2)this.labelEnable[h+d]=!1,this.labels[h+d]=t,this.labelColor[h+d]=m(a.title.font.color),this.labelFont[h+d]=a.title.font.family,this.labelSize[h+d]=a.title.font.size,this.labelPad[h+d]=this.getLabelPad(n,a),this.tickEnable[h+d]=!1,this.tickColor[h+d]=m((a.tickfont||{}).color),this.tickAngle[h+d]="auto"===a.tickangle?0:Math.PI*-a.tickangle/180,this.tickPad[h+d]=this.getTickPad(a),this.tickMarkLength[h+d]=0,this.tickMarkWidth[h+d]=a.tickwidth||0,this.tickMarkColor[h+d]=m(a.tickcolor),this.borderLineEnable[h+d]=!1,this.borderLineColor[h+d]=m(a.linecolor),this.borderLineWidth[h+d]=a.linewidth||0;f=this.hasSharedAxis(a),s=this.hasAxisInDfltPos(n,a)&&!f,i=this.hasAxisInAltrPos(n,a)&&!f,p=a.mirror||!1,c=f?-1!==String(p).indexOf("all"):!!p,l=f?"allticks"===p:-1!==String(p).indexOf("ticks"),s?this.labelEnable[h]=!0:i&&(this.labelEnable[h+2]=!0),s?this.tickEnable[h]=a.showticklabels:i&&(this.tickEnable[h+2]=a.showticklabels),(s||c)&&(this.borderLineEnable[h]=a.showline),(i||c)&&(this.borderLineEnable[h+2]=a.showline),(s||l)&&(this.tickMarkLength[h]=this.getTickMarkLength(a)),(i||l)&&(this.tickMarkLength[h+2]=this.getTickMarkLength(a)),this.gridLineEnable[h]=a.showgrid,this.gridLineColor[h]=m(a.gridcolor),this.gridLineWidth[h]=a.gridwidth,this.zeroLineEnable[h]=a.zeroline,this.zeroLineColor[h]=m(a.zerolinecolor),this.zeroLineWidth[h]=a.zerolinewidth}},y.hasSharedAxis=function(r){var n=this.scene;return 0!==g.findSubplotsWithAxis(n.fullLayout._subplots.gl2d,r).indexOf(n.id)},y.hasAxisInDfltPos=function(r,n){var a=n.side;return"xaxis"===r?"bottom"===a:"yaxis"===r?"left"===a:void 0},y.hasAxisInAltrPos=function(r,n){var a=n.side;return"xaxis"===r?"top"===a:"yaxis"===r?"right"===a:void 0},y.getLabelPad=function(r,n){var a=n.title.font.size,t=n.showticklabels;return"xaxis"===r?"top"===n.side?a*(1.5+(t?1:0))-10:a*(1.5+(t?.5:0))-10:"yaxis"===r?"right"===n.side?10+a*(1.5+(t?1:.5)):10+a*(1.5+(t?.5:0)):void 0},y.getTickPad=function(r){return"outside"===r.ticks?10+r.ticklen:15},y.getTickMarkLength=function(r){if(!r.ticks)return 0;var n=r.ticklen;return"inside"===r.ticks?-n:n},re.exports=function(r){return new b(r)}},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(v,re,ne){"use strict";var g=v("../../plot_api/edit_types").overrideAll,m=v("./scene2d"),b=v("../layout_attributes"),y=v("../../constants/xmlns_namespaces"),e=v("../cartesian/constants"),r=v("../cartesian"),n=v("../../components/fx/layout_attributes"),a=v("../get_data").getSubplotData;ne.name="gl2d",ne.attr=["xaxis","yaxis"],ne.idRoot=["x","y"],ne.idRegex=e.idRegex,ne.attrRegex=e.attrRegex,ne.attributes=v("../cartesian/attributes"),ne.supplyLayoutDefaults=function(t,p,s){p._has("cartesian")||r.supplyLayoutDefaults(t,p,s)},ne.layoutAttrOverrides=g(r.layoutAttributes,"plot","from-root"),ne.baseLayoutAttrOverrides=g({plot_bgcolor:b.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),ne.plot=function(t){for(var p=t._fullLayout,s=t._fullData,i=p._subplots.gl2d,f=0;f<i.length;f++){var c=i[f],l=p._plots[c],h=a(s,"gl2d",c),d=l._scene2d;void 0===d&&(d=new m({id:c,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},p),l._scene2d=d),d.plot(h,t.calcdata,p,t.layout)}},ne.clean=function(t,p,s,i){for(var f=i._subplots.gl2d||[],c=0;c<f.length;c++){var l=f[c],h=i._plots[l];h._scene2d&&0===a(t,"gl2d",l).length&&(h._scene2d.destroy(),delete i._plots[l])}r.clean.apply(this,arguments)},ne.drawFramework=function(t){t._context.staticPlot||r.drawFramework(t)},ne.toSVG=function(t){for(var p=t._fullLayout,s=p._subplots.gl2d,i=0;i<s.length;i++){var f=p._plots[s[i]]._scene2d,c=f.toImage("png");p._glimages.append("svg:image").attr({xmlns:y.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),f.destroy()}},ne.updateFx=function(t){for(var p=t._fullLayout,s=p._subplots.gl2d,i=0;i<s.length;i++)p._plots[s[i]]._scene2d.updateFx(p.dragmode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(v,re,ne){"use strict";var g,m,b=v("../../registry"),y=v("../../plots/cartesian/axes"),e=v("../../components/fx"),r=v("../../../stackgl_modules").gl_plot2d,n=v("../../../stackgl_modules").gl_spikes2d,a=v("../../../stackgl_modules").gl_select_box,t=v("webgl-context"),p=v("./convert"),s=v("./camera"),i=v("../../lib/show_no_webgl_msg"),f=v("../cartesian/constraints"),c=f.enforce,l=f.clean,h=v("../cartesian/autorange").doAutoRange,d=v("../../components/dragelement/helpers"),o=d.drawMode,x=d.selectMode,u=["xaxis","yaxis"],T=v("../cartesian/constants").SUBPLOT_PATTERN;function _(M,I){this.container=M.container,this.graphDiv=M.graphDiv,this.pixelRatio=M.plotGlPixelRatio||window.devicePixelRatio,this.id=M.id,this.staticPlot=!!M.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(I),this.makeFramework(),this.stopped||(this.glplotOptions=p(this),this.glplotOptions.merge(I),this.glplot=r(this.glplotOptions),this.camera=s(this),this.traces={},this.spikes=n(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}re.exports=_;var w=_.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(m||(g=document.createElement("canvas"),m=t({canvas:g,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=g,this.gl=m}else{var M=this.container.querySelector(".gl-canvas-focus"),I=t({canvas:M,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!I)return i(this),void(this.stopped=!0);this.canvas=M,this.gl=I}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var R=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none";var O=this.mouseContainer=document.createElement("div");O.style.position="absolute",O.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var C=this.container;C.appendChild(R),C.appendChild(O);var D=this;O.addEventListener("mouseout",function(){D.isMouseOver=!1,D.unhover()}),O.addEventListener("mouseover",function(){D.isMouseOver=!0})},w.toImage=function(M){M||(M="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(g),this.updateSize(this.canvas);var I=this.glplot.gl,S=I.drawingBufferWidth,R=I.drawingBufferHeight;I.clearColor(1,1,1,0),I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(S*R*4);I.readPixels(0,0,S,R,I.RGBA,I.UNSIGNED_BYTE,O);for(var C=0,D=R-1;C<D;++C,--D)for(var B=0;B<S;++B)for(var z=0;z<4;++z){var Y=O[4*(S*C+B)+z];O[4*(S*C+B)+z]=O[4*(S*D+B)+z],O[4*(S*D+B)+z]=Y}var G=document.createElement("canvas");G.width=S,G.height=R;var J,te=G.getContext("2d",{willReadFrequently:!0}),X=te.createImageData(S,R);switch(X.data.set(O),te.putImageData(X,0,0),M){case"jpeg":J=G.toDataURL("image/jpeg");break;case"webp":J=G.toDataURL("image/webp");break;default:J=G.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(g),J},w.updateSize=function(M){M||(M=this.canvas);var I=this.pixelRatio,S=this.fullLayout,O=S.height,C=0|Math.ceil(I*S.width),D=0|Math.ceil(I*O);return M.width===C&&M.height===D||(M.width=C,M.height=D),M},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var M=[y.calcTicks(this.xaxis),y.calcTicks(this.yaxis)],I=0;I<2;++I)for(var S=0;S<M[I].length;++S)M[I][S].text=M[I][S].text+"";return M},w.updateRefs=function(M){this.fullLayout=M;var I=this.id.match(T),R="yaxis"+I[2];this.xaxis=this.fullLayout["xaxis"+I[1]],this.yaxis=this.fullLayout[R]},w.relayoutCallback=function(){var M=this.graphDiv,I=this.xaxis,S=this.yaxis,R=M.layout,O={},C=O[I._name+".range"]=I.range.slice(),D=O[S._name+".range"]=S.range.slice();O[I._name+".autorange"]=I.autorange,O[S._name+".autorange"]=S.autorange,b.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,O);var B=R[I._name];B.range=C,B.autorange=I.autorange;var z=R[S._name];z.range=D,z.autorange=S.autorange,O.lastInputTime=this.camera.lastInputTime,M.emit("plotly_relayout",O)},w.cameraChanged=function(){var M=this.camera;this.glplot.setDataBox(this.calcDataBox());var I=this.computeTickMarks();(function(S,R){for(var O=0;O<2;++O){var C=S[O],D=R[O];if(C.length!==D.length)return!0;for(var B=0;B<C.length;++B)if(C[B].x!==D[B].x)return!0}return!1})(I,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=I,this.glplotOptions.dataBox=M.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var M=this.graphDiv,I=this.fullLayout.annotations,S=0;S<I.length;S++){var R=I[S];R.xref===this.xaxis._id&&R.yref===this.yaxis._id&&b.getComponentMethod("annotations","drawOne")(M,S)}},w.destroy=function(){if(this.glplot){var M=this.traces;M&&Object.keys(M).map(function(I){M[I].dispose(),delete M[I]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(M,I,S){var R=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(M,I),this.updateFx(S.dragmode);var O=S.width,C=S.height;this.updateSize(this.canvas);var D=this.glplotOptions;D.merge(S),D.screenBox=[0,0,O,C];var B={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};l(B,this.xaxis),l(B,this.yaxis);var z,Y,G=S._size,J=this.xaxis.domain,te=this.yaxis.domain;for(D.viewBox=[G.l+J[0]*G.w,G.b+te[0]*G.h,O-G.r-(1-J[1])*G.w,C-G.t-(1-te[1])*G.h],this.mouseContainer.style.width=G.w*(J[1]-J[0])+"px",this.mouseContainer.style.height=G.h*(te[1]-te[0])+"px",this.mouseContainer.height=G.h*(te[1]-te[0]),this.mouseContainer.style.left=G.l+J[0]*G.w+"px",this.mouseContainer.style.top=G.t+(1-te[1])*G.h+"px",Y=0;Y<2;++Y)(z=this[u[Y]])._length=D.viewBox[Y+2]-D.viewBox[Y],h(this.graphDiv,z),z.setScale();c(B),D.ticks=this.computeTickMarks(),D.dataBox=this.calcDataBox(),D.merge(S),R.update(D),this.glplot.draw()},w.calcDataBox=function(){var M=this.xaxis,I=this.yaxis,S=M.range,R=I.range,O=M.r2l,C=I.r2l;return[O(S[0]),C(R[0]),O(S[1]),C(R[1])]},w.setRanges=function(M){var I=this.xaxis,S=this.yaxis,R=I.l2r,O=S.l2r;I.range=[R(M[0]),R(M[2])],S.range=[O(M[1]),O(M[3])]},w.updateTraces=function(M,I){var S,R,O,C=Object.keys(this.traces);this.fullData=M;e:for(S=0;S<C.length;S++){var D=C[S],B=this.traces[D];for(R=0;R<M.length;R++)if((O=M[R]).uid===D&&O.type===B.type)continue e;B.dispose(),delete this.traces[D]}for(S=0;S<M.length;S++){var z=I[S],Y=this.traces[(O=M[S]).uid];Y?Y.update(O,z):(Y=O._module.plot(this,O,z),this.traces[O.uid]=Y)}this.glplot.objects.sort(function(G,J){return G._trace.index-J._trace.index})},w.updateFx=function(M){x(M)||o(M)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===M?"move":"zoom"===M?"crosshair":null},w.emitPointAction=function(M,I){for(var S,R=M.trace.uid,O=M.pointIndex,C=0;C<this.fullData.length;C++)this.fullData[C].uid===R&&(S=this.fullData[C]);var D={x:M.traceCoord[0],y:M.traceCoord[1],curveNumber:S.index,pointNumber:O,data:S._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(D,S,O),this.graphDiv.emit(I,{points:[D]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var M=this.glplot,I=this.camera,S=I.mouseListener,R=1===this.lastButtonState&&0===S.buttons,O=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var C,D=S.x*M.pixelRatio,B=this.canvas.height-M.pixelRatio*S.y;if(I.boxEnabled&&"zoom"===O.dragmode){this.selectBox.enabled=!0;for(var z=this.selectBox.selectBox=[Math.min(I.boxStart[0],I.boxEnd[0]),Math.min(I.boxStart[1],I.boxEnd[1]),Math.max(I.boxStart[0],I.boxEnd[0]),Math.max(I.boxStart[1],I.boxEnd[1])],Y=0;Y<2;Y++)I.boxStart[Y]===I.boxEnd[Y]&&(z[Y]=M.dataBox[Y],z[Y+2]=M.dataBox[Y+2]);M.setDirty()}else if(!I.panning&&this.isMouseOver){this.selectBox.enabled=!1;var G=O._size,X=(C=M.pick(D/M.pixelRatio+G.l+this.xaxis.domain[0]*G.w,B/M.pixelRatio-(G.t+(1-this.yaxis.domain[1])*G.h)))&&C.object._trace.handlePick(C);if(X&&R&&this.emitPointAction(X,"plotly_click"),C&&"skip"!==C.object._trace.hoverinfo&&O.hovermode&&X&&(!this.lastPickResult||this.lastPickResult.traceUid!==X.trace.uid||this.lastPickResult.dataCoord[0]!==X.dataCoord[0]||this.lastPickResult.dataCoord[1]!==X.dataCoord[1])){var K=X;this.lastPickResult={traceUid:X.trace?X.trace.uid:null,dataCoord:X.dataCoord.slice()},this.spikes.update({center:C.dataCoord}),K.screenCoord=[((M.viewBox[2]-M.viewBox[0])*(C.dataCoord[0]-M.dataBox[0])/(M.dataBox[2]-M.dataBox[0])+M.viewBox[0])/M.pixelRatio,(this.canvas.height-(M.viewBox[3]-M.viewBox[1])*(C.dataCoord[1]-M.dataBox[1])/(M.dataBox[3]-M.dataBox[1])-M.viewBox[1])/M.pixelRatio],this.emitPointAction(X,"plotly_hover");var ae=this.fullData[K.trace.index]||{},U=K.pointIndex,V=e.castHoverinfo(ae,O,U);if(V&&"all"!==V){var q=V.split("+");-1===q.indexOf("x")&&(K.traceCoord[0]=void 0),-1===q.indexOf("y")&&(K.traceCoord[1]=void 0),-1===q.indexOf("z")&&(K.traceCoord[2]=void 0),-1===q.indexOf("text")&&(K.textLabel=void 0),-1===q.indexOf("name")&&(K.name=void 0)}e.loneHover({x:K.screenCoord[0],y:K.screenCoord[1],xLabel:this.hoverFormatter("xaxis",K.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",K.traceCoord[1]),zLabel:K.traceCoord[2],text:K.textLabel,name:K.name,color:e.castHoverOption(ae,U,"bgcolor")||K.color,borderColor:e.castHoverOption(ae,U,"bordercolor"),fontFamily:e.castHoverOption(ae,U,"font.family"),fontSize:e.castHoverOption(ae,U,"font.size"),fontColor:e.castHoverOption(ae,U,"font.color"),nameLength:e.castHoverOption(ae,U,"namelength"),textAlign:e.castHoverOption(ae,U,"align")},{container:this.svgContainer,gd:this.graphDiv})}}C||this.unhover(),M.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},w.hoverFormatter=function(M,I){if(void 0!==I){var S=this[M];return y.tickText(S,S.c2l(I),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(v,re,ne){"use strict";var g=v("../../plot_api/edit_types").overrideAll,m=v("../../components/fx/layout_attributes"),b=v("./scene"),y=v("../get_data").getSubplotData,e=v("../../lib"),r=v("../../constants/xmlns_namespaces");ne.name="gl3d",ne.attr="scene",ne.idRoot="scene",ne.idRegex=ne.attrRegex=e.counterRegex("scene"),ne.attributes=v("./layout/attributes"),ne.layoutAttributes=v("./layout/layout_attributes"),ne.baseLayoutAttrOverrides=g({hoverlabel:m.hoverlabel},"plot","nested"),ne.supplyLayoutDefaults=v("./layout/defaults"),ne.plot=function(n){for(var a=n._fullLayout,t=n._fullData,p=a._subplots.gl3d,s=0;s<p.length;s++){var i=p[s],f=y(t,"gl3d",i),c=a[i],l=c.camera,h=c._scene;h||(h=new b({id:i,graphDiv:n,container:n.querySelector(".gl-container"),staticPlot:n._context.staticPlot,plotGlPixelRatio:n._context.plotGlPixelRatio,camera:l},a),c._scene=h),h.viewInitial||(h.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),h.plot(f,a,n.layout)}},ne.clean=function(n,a,t,p){for(var s=p._subplots.gl3d||[],i=0;i<s.length;i++){var f=s[i];!a[f]&&p[f]._scene&&(p[f]._scene.destroy(),p._infolayer&&p._infolayer.selectAll(".annotation-"+f).remove())}},ne.toSVG=function(n){for(var a=n._fullLayout,t=a._subplots.gl3d,p=a._size,s=0;s<t.length;s++){var i=a[t[s]],f=i.domain,c=i._scene,l=c.toImage("png");a._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":l,x:p.l+p.w*f.x[0],y:p.t+p.h*(1-f.y[1]),width:p.w*(f.x[1]-f.x[0]),height:p.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"}),c.destroy()}},ne.cleanId=function(n){if(n.match(/^scene[0-9]*$/)){var a=n.substr(5);return"1"===a&&(a=""),"scene"+a}},ne.updateFx=function(n){for(var a=n._fullLayout,t=a._subplots.gl3d,p=0;p<t.length;p++)a[t[p]]._scene.updateFx(a.dragmode,a.hovermode)}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(v,re,ne){"use strict";re.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(v,re,ne){"use strict";var g=v("../../../components/color"),m=v("../../cartesian/layout_attributes"),b=v("../../../lib/extend").extendFlat,y=v("../../../plot_api/edit_types").overrideAll;re.exports=y({visible:m.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:g.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:m.color,categoryorder:m.categoryorder,categoryarray:m.categoryarray,title:{text:m.title.text,font:m.title.font},type:b({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:m.autorange,rangemode:m.rangemode,range:b({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,mirror:m.mirror,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,tickfont:m.tickfont,tickangle:m.tickangle,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:m.showline,linecolor:m.linecolor,linewidth:m.linewidth,showgrid:m.showgrid,gridcolor:b({},m.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:m.gridwidth,zeroline:m.zeroline,zerolinecolor:m.zerolinecolor,zerolinewidth:m.zerolinewidth,_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(v,re,ne){"use strict";var g=v("tinycolor2").mix,m=v("../../../lib"),b=v("../../../plot_api/plot_template"),y=v("./axis_attributes"),e=v("../../cartesian/type_defaults"),r=v("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"];re.exports=function(a,t,p){var s,i;function f(h,d){return m.coerce(s,i,y,h,d)}for(var c=0;c<n.length;c++){var l=n[c];s=a[l]||{},(i=b.newContainer(t,l))._id=l[0]+p.scene,i._name=l,e(s,i,f,p),r(s,i,f,{font:p.font,letter:l[0],data:p.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:p.bgColor,calendar:p.calendar},p.fullLayout),f("gridcolor",g(i.color,p.bgColor,13600/187).toRgbString()),f("title.text",l[0]),i.setScale=m.noop,f("showspikes")&&(f("spikesides"),f("spikethickness"),f("spikecolor",i.color)),f("showaxeslabels"),f("showbackground")&&f("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(v,re,ne){"use strict";var g=v("../../../lib/str2rgbarray"),m=v("../../../lib"),b=["xaxis","yaxis","zaxis"];function y(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}y.prototype.merge=function(e,r){for(var n=0;n<3;++n){var a=r[b[n]];a.visible?(this.labels[n]=e._meta?m.templateString(a.title.text,e._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(this.labelColor[n]=g(a.title.font.color)),a.title.font.family&&(this.labelFont[n]=a.title.font.family),a.title.font.size&&(this.labelSize[n]=a.title.font.size)),"showline"in a&&(this.lineEnable[n]=a.showline),"linecolor"in a&&(this.lineColor[n]=g(a.linecolor)),"linewidth"in a&&(this.lineWidth[n]=a.linewidth),"showgrid"in a&&(this.gridEnable[n]=a.showgrid),"gridcolor"in a&&(this.gridColor[n]=g(a.gridcolor)),"gridwidth"in a&&(this.gridWidth[n]=a.gridwidth),"log"===a.type?this.zeroEnable[n]=!1:"zeroline"in a&&(this.zeroEnable[n]=a.zeroline),"zerolinecolor"in a&&(this.zeroLineColor[n]=g(a.zerolinecolor)),"zerolinewidth"in a&&(this.zeroLineWidth[n]=a.zerolinewidth),this.lineTickEnable[n]=!(!("ticks"in a)||!a.ticks),"ticklen"in a&&(this.lineTickLength[n]=this._defaultLineTickLength[n]=a.ticklen),"tickcolor"in a&&(this.lineTickColor[n]=g(a.tickcolor)),"tickwidth"in a&&(this.lineTickWidth[n]=a.tickwidth),"tickangle"in a&&(this.tickAngle[n]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(this.tickEnable[n]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(this.tickColor[n]=g(a.tickfont.color)),a.tickfont.family&&(this.tickFont[n]=a.tickfont.family),a.tickfont.size&&(this.tickSize[n]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(this.lineTickMirror[n]=!0,this.lineMirror[n]=!0):!0===a.mirror?(this.lineTickMirror[n]=!1,this.lineMirror[n]=!0):(this.lineTickMirror[n]=!1,this.lineMirror[n]=!1):this.lineMirror[n]=!1,"showbackground"in a&&!1!==a.showbackground?(this.backgroundEnable[n]=!0,this.backgroundColor[n]=g(a.backgroundcolor)):this.backgroundEnable[n]=!1):(this.tickEnable[n]=!1,this.labelEnable[n]=!1,this.lineEnable[n]=!1,this.lineTickEnable[n]=!1,this.gridEnable[n]=!1,this.zeroEnable[n]=!1,this.backgroundEnable[n]=!1)}},re.exports=function(e,r){var n=new y;return n.merge(e,r),n}},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(v,re,ne){"use strict";var g=v("../../../lib"),m=v("../../../components/color"),b=v("../../../registry"),y=v("../../subplot_defaults"),e=v("./axis_defaults"),r=v("./layout_attributes"),n=v("../../get_data").getSubplotData;function a(t,p,s,i){for(var f=s("bgcolor"),c=m.combine(f,i.paper_bgcolor),l=["up","center","eye"],h=0;h<l.length;h++)s("camera."+l[h]+".x"),s("camera."+l[h]+".y"),s("camera."+l[h]+".z");s("camera.projection.type");var d=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),o=s("aspectmode",d?"manual":"auto");d||(t.aspectratio=p.aspectratio={x:1,y:1,z:1},"manual"===o&&(p.aspectmode="auto"),t.aspectmode=p.aspectmode);var x=n(i.fullData,"gl3d",i.id);e(t,p,{font:i.font,scene:i.id,data:x,bgColor:c,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),b.getComponentMethod("annotations3d","handleDefaults")(t,p,i);var u=i.getDfltFromLayout("dragmode");if(!1!==u&&!u)if(u="orbit",t.camera&&t.camera.up){var T=t.camera.up.x,_=t.camera.up.y,w=t.camera.up.z;0!==w&&(T&&_&&w?w/Math.sqrt(T*T+_*_+w*w)>.999&&(u="turntable"):u="turntable")}else u="turntable";s("dragmode",u),s("hovermode",i.getDfltFromLayout("hovermode"))}re.exports=function(t,p,s){var i=p._basePlotModules.length>1;y(t,p,s,{type:"gl3d",attributes:r,handleDefaults:a,fullLayout:p,font:p.font,fullData:s,getDfltFromLayout:function(f){if(!i)return g.validate(t[f],r[f])?t[f]:void 0},autotypenumbersDflt:p.autotypenumbers,paper_bgcolor:p.paper_bgcolor,calendar:p.calendar})}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(v,re,ne){"use strict";var g=v("./axis_attributes"),m=v("../../domain").attributes,b=v("../../../lib/extend").extendFlat,y=v("../../../lib").counterRegex;function e(r,n,a){return{x:{valType:"number",dflt:r,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:a,editType:"camera"},editType:"camera"}}re.exports={_arrayAttrRegexps:[y("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:b(e(0,0,1),{}),center:b(e(0,0,0),{}),eye:b(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:m({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:g,yaxis:g,zaxis:g,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(v,re,ne){"use strict";var g=v("../../../lib/str2rgbarray"),m=["xaxis","yaxis","zaxis"];function b(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}b.prototype.merge=function(y){for(var e=0;e<3;++e){var r=y[m[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=g(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},re.exports=function(y){var e=new b;return e.merge(y),e}},{"../../../lib/str2rgbarray":540}],615:[function(v,re,ne){"use strict";re.exports=function(e){for(var r=e.axesOptions,n=e.glplot.axesPixels,a=e.fullSceneLayout,t=[[],[],[]],p=0;p<3;++p){var s=a[b[p]];if(s._length=(n[p].hi-n[p].lo)*n[p].pixelsPerDataUnit/e.dataScale[p],Math.abs(s._length)===1/0||isNaN(s._length))t[p]=[];else{s._input_range=s.range.slice(),s.range[0]=n[p].lo/e.dataScale[p],s.range[1]=n[p].hi/e.dataScale[p],s._m=1/(e.dataScale[p]*n[p].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var i=s.tickmode;if("auto"===s.tickmode){s.tickmode="linear";var f=s.nticks||m.constrain(s._length/40,4,9);g.autoTicks(s,Math.abs(s.range[1]-s.range[0])/f)}for(var c=g.calcTicks(s,{msUTC:!0}),l=0;l<c.length;++l)c[l].x=c[l].x*e.dataScale[p],"date"===s.type&&(c[l].text=c[l].text.replace(/\<br\>/g," "));t[p]=c,s.tickmode=i}}for(r.ticks=t,p=0;p<3;++p)for(y[p]=.5*(e.glplot.bounds[0][p]+e.glplot.bounds[1][p]),l=0;l<2;++l)r.bounds[l][p]=e.glplot.bounds[l][p];e.contourLevels=function(h){for(var d=new Array(3),o=0;o<3;++o){for(var x=h[o],u=new Array(x.length),T=0;T<x.length;++T)u[T]=x[T].x;d[o]=u}return d}(t)};var g=v("../../cartesian/axes"),m=v("../../../lib"),b=["xaxis","yaxis","zaxis"],y=[0,0,0]},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(v,re,ne){"use strict";function g(m,b){var y,e,r=[0,0,0,0];for(y=0;y<4;++y)for(e=0;e<4;++e)r[e]+=m[4*y+e]*b[y];return r}re.exports=function(m,b){return g(m.projection,g(m.view,g(m.model,[b[0],b[1],b[2],1])))}},{}],617:[function(v,re,ne){"use strict";var g,m,b=v("../../../stackgl_modules").gl_plot3d,y=b.createCamera,e=b.createScene,r=v("webgl-context"),n=v("has-passive-events"),a=v("../../registry"),t=v("../../lib"),p=t.preserveDrawingBuffer(),s=v("../../plots/cartesian/axes"),i=v("../../components/fx"),f=v("../../lib/str2rgbarray"),c=v("../../lib/show_no_webgl_msg"),l=v("./project"),h=v("./layout/convert"),d=v("./layout/spikes"),o=v("./layout/tick_marks");function x(M,I){var S=document.createElement("div"),R=M.container;this.graphDiv=M.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",S.appendChild(O),this.svgContainer=O,S.id=M.id,S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",R.appendChild(S),this.fullLayout=I,this.id=M.id||"scene",this.fullSceneLayout=I[this.id],this.plotArgs=[[],{},{}],this.axesOptions=h(I,I[this.id]),this.spikeOptions=d(I[this.id]),this.container=S,this.staticMode=!!M.staticPlot,this.pixelRatio=this.pixelRatio||M.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var u=x.prototype;u.prepareOptions=function(){var M={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:p,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(m||(g=document.createElement("canvas"),m=r({canvas:g,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");M.gl=m,M.canvas=g}return M};var T=!0;u.tryCreatePlot=function(){var M=this.prepareOptions(),I=!0;try{this.glplot=e(M)}catch{if(this.staticMode||!T||p)I=!1;else{t.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{p=M.glOptions.preserveDrawingBuffer=!0,this.glplot=e(M)}catch{p=M.glOptions.preserveDrawingBuffer=!1,I=!1}}}return T=!1,I},u.initializeGLCamera=function(){var M=this.fullSceneLayout.camera;this.camera=y(this.container,{center:[M.center.x,M.center.y,M.center.z],eye:[M.eye.x,M.eye.y,M.eye.z],up:[M.up.x,M.up.y,M.up.z],_ortho:"orthographic"===M.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},u.initializeGLPlot=function(){var M=this;if(M.initializeGLCamera(),!M.tryCreatePlot())return c(M);M.traces={},M.make4thDimension();var I=M.graphDiv,S=I.layout,R=function(){var C={};return M.isCameraChanged(S)&&(C[M.id+".camera"]=M.getCamera()),M.isAspectChanged(S)&&(C[M.id+".aspectratio"]=M.glplot.getAspectratio(),"manual"!==S[M.id].aspectmode&&(M.fullSceneLayout.aspectmode=S[M.id].aspectmode=C[M.id+".aspectmode"]="manual")),C},O=function(C){if(!1!==C.fullSceneLayout.dragmode){var D=R();C.saveLayout(S),C.graphDiv.emit("plotly_relayout",D)}};return M.glplot.canvas&&(M.glplot.canvas.addEventListener("mouseup",function(){O(M)}),M.glplot.canvas.addEventListener("wheel",function(C){if(I._context._scrollZoom.gl3d){if(M.camera._ortho){var D=C.deltaX>C.deltaY?1.1:.9090909090909091,B=M.glplot.getAspectratio();M.glplot.setAspectratio({x:D*B.x,y:D*B.y,z:D*B.z})}O(M)}},!!n&&{passive:!1}),M.glplot.canvas.addEventListener("mousemove",function(){if(!1!==M.fullSceneLayout.dragmode&&0!==M.camera.mouseListener.buttons){var C=R();M.graphDiv.emit("plotly_relayouting",C)}}),M.staticMode||M.glplot.canvas.addEventListener("webglcontextlost",function(C){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:C,layer:M.id})},!1)),M.glplot.oncontextloss=function(){M.recoverContext()},M.glplot.onrender=function(){M.render()},!0},u.render=function(){var M,I=this,S=I.graphDiv,R=I.svgContainer,O=I.container.getBoundingClientRect();S._fullLayout._calcInverseTransform(S);var B=O.width*S._fullLayout._invScaleX,z=O.height*S._fullLayout._invScaleY;R.setAttributeNS(null,"viewBox","0 0 "+B+" "+z),R.setAttributeNS(null,"width",B),R.setAttributeNS(null,"height",z),o(I),I.glplot.axes.update(I.axesOptions);for(var Y=Object.keys(I.traces),G=null,J=I.glplot.selection,te=0;te<Y.length;++te)"skip"!==(M=I.traces[Y[te]]).data.hoverinfo&&M.handlePick(J)&&(G=M),M.setContourLevels&&M.setContourLevels();function X(fe,be,he){var _e=I.fullSceneLayout[fe+"axis"];return"log"!==_e.type&&(be=_e.d2l(be)),s.hoverLabelText(_e,be,he)}if(null!==G){var ae,K=l(I.glplot.cameraParams,J.dataCoordinate),U=S._fullData[(M=G.data).index],V=J.index,q={xLabel:X("x",J.traceCoordinate[0],M.xhoverformat),yLabel:X("y",J.traceCoordinate[1],M.yhoverformat),zLabel:X("z",J.traceCoordinate[2],M.zhoverformat)},ie=i.castHoverinfo(U,I.fullLayout,V),H=(ie||"").split("+"),ee=ie&&"all"===ie;U.hovertemplate||ee||(-1===H.indexOf("x")&&(q.xLabel=void 0),-1===H.indexOf("y")&&(q.yLabel=void 0),-1===H.indexOf("z")&&(q.zLabel=void 0),-1===H.indexOf("text")&&(J.textLabel=void 0),-1===H.indexOf("name")&&(G.name=void 0));var Q=[];"cone"===M.type||"streamtube"===M.type?(q.uLabel=X("x",J.traceCoordinate[3],M.uhoverformat),(ee||-1!==H.indexOf("u"))&&Q.push("u: "+q.uLabel),q.vLabel=X("y",J.traceCoordinate[4],M.vhoverformat),(ee||-1!==H.indexOf("v"))&&Q.push("v: "+q.vLabel),q.wLabel=X("z",J.traceCoordinate[5],M.whoverformat),(ee||-1!==H.indexOf("w"))&&Q.push("w: "+q.wLabel),q.normLabel=J.traceCoordinate[6].toPrecision(3),(ee||-1!==H.indexOf("norm"))&&Q.push("norm: "+q.normLabel),"streamtube"===M.type&&(q.divergenceLabel=J.traceCoordinate[7].toPrecision(3),(ee||-1!==H.indexOf("divergence"))&&Q.push("divergence: "+q.divergenceLabel)),J.textLabel&&Q.push(J.textLabel),ae=Q.join("<br>")):"isosurface"===M.type||"volume"===M.type?(q.valueLabel=s.hoverLabelText(I._mockAxis,I._mockAxis.d2l(J.traceCoordinate[3]),M.valuehoverformat),Q.push("value: "+q.valueLabel),J.textLabel&&Q.push(J.textLabel),ae=Q.join("<br>")):ae=J.textLabel;var oe={x:J.traceCoordinate[0],y:J.traceCoordinate[1],z:J.traceCoordinate[2],data:U._input,fullData:U,curveNumber:U.index,pointNumber:V};i.appendArrayPointValue(oe,U,V),M._module.eventData&&(oe=U._module.eventData(oe,J,U,{},V));var le={points:[oe]};if(I.fullSceneLayout.hovermode){var de=[];i.loneHover({trace:U,x:(.5+.5*K[0]/K[3])*B,y:(.5-.5*K[1]/K[3])*z,xLabel:q.xLabel,yLabel:q.yLabel,zLabel:q.zLabel,text:ae,name:G.name,color:i.castHoverOption(U,V,"bgcolor")||G.color,borderColor:i.castHoverOption(U,V,"bordercolor"),fontFamily:i.castHoverOption(U,V,"font.family"),fontSize:i.castHoverOption(U,V,"font.size"),fontColor:i.castHoverOption(U,V,"font.color"),nameLength:i.castHoverOption(U,V,"namelength"),textAlign:i.castHoverOption(U,V,"align"),hovertemplate:t.castOption(U,V,"hovertemplate"),hovertemplateLabels:t.extendFlat({},oe,q),eventData:[oe]},{container:R,gd:S,inOut_bbox:de}),oe.bbox=de[0]}S.emit(J.buttons&&J.distance<5?"plotly_click":"plotly_hover",le),this.oldEventData=le}else i.loneUnhover(R),this.oldEventData&&S.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;I.drawAnnotations(I)},u.recoverContext=function(){var M=this;M.glplot.dispose();var I=function(){M.glplot.gl.isContextLost()?requestAnimationFrame(I):M.initializeGLPlot()?M.plot.apply(M,M.plotArgs):t.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(I)};var _=["xaxis","yaxis","zaxis"];function w(M,I,S){for(var R=M.fullSceneLayout,O=0;O<3;O++){var C=_[O],D=C.charAt(0),B=R[C],z=I[D],Y=I[D+"calendar"],G=I["_"+D+"length"];if(t.isArrayOrTypedArray(z))for(var J,te=0;te<(G||z.length);te++)if(t.isArrayOrTypedArray(z[te]))for(var X=0;X<z[te].length;++X)J=B.d2l(z[te][X],0,Y),!isNaN(J)&&isFinite(J)&&(S[0][O]=Math.min(S[0][O],J),S[1][O]=Math.max(S[1][O],J));else J=B.d2l(z[te],0,Y),!isNaN(J)&&isFinite(J)&&(S[0][O]=Math.min(S[0][O],J),S[1][O]=Math.max(S[1][O],J));else S[0][O]=Math.min(S[0][O],0),S[1][O]=Math.max(S[1][O],G-1)}}u.plot=function(M,I,S){if(this.plotArgs=[M,I,S],!this.glplot.contextLost){var R,O,C,D,B,z,Y=I[this.id],G=S[this.id];this.fullLayout=I,this.fullSceneLayout=Y,this.axesOptions.merge(I,Y),this.spikeOptions.merge(Y),this.setViewport(Y),this.updateFx(Y.dragmode,Y.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(f(Y.bgcolor)),this.setConvert(B),M?Array.isArray(M)||(M=[M]):M=[];var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(C=0;C<M.length;++C)!0===(R=M[C]).visible&&0!==R._length&&w(this,R,J);!function(Ie,De){for(var Fe=Ie.fullSceneLayout,Ue=Fe.annotations||[],qe=0;qe<3;qe++)for(var je=_[qe],rt=je.charAt(0),Ne=Fe[je],Be=0;Be<Ue.length;Be++){var We=Ue[Be];if(We.visible){var Ye=Ne.r2l(We[rt]);!isNaN(Ye)&&isFinite(Ye)&&(De[0][qe]=Math.min(De[0][qe],Ye),De[1][qe]=Math.max(De[1][qe],Ye))}}}(this,J);var te=[1,1,1];for(D=0;D<3;++D)te[D]=J[1][D]===J[0][D]?1:1/(J[1][D]-J[0][D]);for(this.dataScale=te,this.convertAnnotations(this),C=0;C<M.length;++C)!0===(R=M[C]).visible&&0!==R._length&&((O=this.traces[R.uid])?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),this.traces[R.uid]=O):(O=R._module.plot(this,R),this.traces[R.uid]=O),O.name=R.name);var X=Object.keys(this.traces);e:for(C=0;C<X.length;++C){for(D=0;D<M.length;++D)if(M[D].uid===X[C]&&!0===M[D].visible&&0!==M[D]._length)continue e;(O=this.traces[X[C]]).dispose(),delete this.traces[X[C]]}this.glplot.objects.sort(function(Ie,De){return Ie._trace.data.index-De._trace.data.index});var K,ae=[[0,0,0],[0,0,0]],U=[],V={};for(C=0;C<3;++C){if((z=(B=Y[_[C]]).type)in V?(V[z].acc*=te[C],V[z].count+=1):V[z]={acc:te[C],count:1},B.autorange){ae[0][C]=1/0,ae[1][C]=-1/0;var q=this.glplot.objects,ie=this.fullSceneLayout.annotations||[],H=B._name.charAt(0);for(D=0;D<q.length;D++){var ee=q[D],Q=ee.bounds,oe=ee._trace.data._pad||0;ae[0][C]="ErrorBars"===ee.constructor.name&&B._lowerLogErrorBound?Math.min(ae[0][C],B._lowerLogErrorBound):Math.min(ae[0][C],Q[0][C]/te[C]-oe),ae[1][C]=Math.max(ae[1][C],Q[1][C]/te[C]+oe)}for(D=0;D<ie.length;D++){var le=ie[D];if(le.visible){var de=B.r2l(le[H]);ae[0][C]=Math.min(ae[0][C],de),ae[1][C]=Math.max(ae[1][C],de)}}if("rangemode"in B&&"tozero"===B.rangemode&&(ae[0][C]=Math.min(ae[0][C],0),ae[1][C]=Math.max(ae[1][C],0)),ae[0][C]>ae[1][C])ae[0][C]=-1,ae[1][C]=1;else{var fe=ae[1][C]-ae[0][C];ae[0][C]-=fe/32,ae[1][C]+=fe/32}if("reversed"===B.autorange){var be=ae[0][C];ae[0][C]=ae[1][C],ae[1][C]=be}}else{var he=B.range;ae[0][C]=B.r2l(he[0]),ae[1][C]=B.r2l(he[1])}ae[0][C]===ae[1][C]&&(ae[0][C]-=1,ae[1][C]+=1),U[C]=ae[1][C]-ae[0][C],this.glplot.setBounds(C,{min:ae[0][C]*te[C],max:ae[1][C]*te[C]})}var _e=Y.aspectmode;if("cube"===_e)K=[1,1,1];else if("manual"===_e){var Ce=Y.aspectratio;K=[Ce.x,Ce.y,Ce.z]}else{if("auto"!==_e&&"data"!==_e)throw new Error("scene.js aspectRatio was not one of the enumerated types");var Ee=[1,1,1];for(C=0;C<3;++C){var Ae=V[z=(B=Y[_[C]]).type];Ee[C]=Math.pow(Ae.acc,1/Ae.count)/te[C]}K="data"===_e||Math.max.apply(null,Ee)/Math.min.apply(null,Ee)<=4?Ee:[1,1,1]}Y.aspectratio.x=G.aspectratio.x=K[0],Y.aspectratio.y=G.aspectratio.y=K[1],Y.aspectratio.z=G.aspectratio.z=K[2],this.glplot.setAspectratio(Y.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:Y.aspectratio.x,y:Y.aspectratio.y,z:Y.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=Y.aspectmode);var ze=Y.domain||null,ve=I._size||null;if(ze&&ve){var Te=this.container.style;Te.position="absolute",Te.left=ve.l+ze.x[0]*ve.w+"px",Te.top=ve.t+(1-ze.y[1])*ve.h+"px",Te.width=ve.w*(ze.x[1]-ze.x[0])+"px",Te.height=ve.h*(ze.y[1]-ze.y[0])+"px"}this.glplot.redraw()}},u.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},u.getCamera=function(){var M;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(M=this.camera).up[0],y:M.up[1],z:M.up[2]},center:{x:M.center[0],y:M.center[1],z:M.center[2]},eye:{x:M.eye[0],y:M.eye[1],z:M.eye[2]},projection:{type:!0===M._ortho?"orthographic":"perspective"}}},u.setViewport=function(M){var I,S=M.camera;this.camera.lookAt.apply(this,[[(I=S).eye.x,I.eye.y,I.eye.z],[I.center.x,I.center.y,I.center.z],[I.up.x,I.up.y,I.up.z]]),this.glplot.setAspectratio(M.aspectratio),"orthographic"===S.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},u.isCameraChanged=function(M){var I=this.getCamera(),S=t.nestedProperty(M,this.id+".camera").get();var B,z,Y,G,J,te,O=!1;if(void 0===S)O=!0;else{for(var C=0;C<3;C++)for(var D=0;D<3;D++)if(B=I,G=D,J=void 0,te=void 0,te=["x","y","z"],!(z=S)[(J=["up","center","eye"])[Y=C]]||B[J[Y]][te[G]]!==z[J[Y]][te[G]]){O=!0;break}(!S.projection||I.projection&&I.projection.type!==S.projection.type)&&(O=!0)}return O},u.isAspectChanged=function(M){var I=this.glplot.getAspectratio(),S=t.nestedProperty(M,this.id+".aspectratio").get();return void 0===S||S.x!==I.x||S.y!==I.y||S.z!==I.z},u.saveLayout=function(M){var I,S,R,O,C,D,B=this.fullLayout,z=this.isCameraChanged(M),Y=this.isAspectChanged(M),G=z||Y;if(G){var J={};z&&(I=this.getCamera(),R=(S=t.nestedProperty(M,this.id+".camera")).get(),J[this.id+".camera"]=R),Y&&(O=this.glplot.getAspectratio(),D=(C=t.nestedProperty(M,this.id+".aspectratio")).get(),J[this.id+".aspectratio"]=D),a.call("_storeDirectGUIEdit",M,B._preGUI,J),z&&(S.set(I),t.nestedProperty(B,this.id+".camera").set(I)),Y&&(C.set(O),t.nestedProperty(B,this.id+".aspectratio").set(O),this.glplot.redraw())}return G},u.updateFx=function(M,I){var S=this.camera;if(S)if("orbit"===M)S.mode="orbit",S.keyBindingMode="rotate";else if("turntable"===M){S.up=[0,0,1],S.mode="turntable",S.keyBindingMode="rotate";var R=this.graphDiv,O=R._fullLayout,C=this.fullSceneLayout.camera,D=C.up.x,B=C.up.y,z=C.up.z;if(z/Math.sqrt(D*D+B*B+z*z)<.999){var Y=this.id+".camera.up",G={x:0,y:0,z:1},J={};J[Y]=G;var te=R.layout;a.call("_storeDirectGUIEdit",te,O._preGUI,J),C.up=G,t.nestedProperty(te,Y).set(G)}}else S.keyBindingMode=M;this.fullSceneLayout.hovermode=I},u.toImage=function(M){M||(M="png"),this.staticMode&&this.container.appendChild(g),this.glplot.redraw();var I=this.glplot.gl,S=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(S*R*4);I.readPixels(0,0,S,R,I.RGBA,I.UNSIGNED_BYTE,O),function(Y,G,J){for(var te=0,X=J-1;te<X;++te,--X)for(var K=0;K<G;++K)for(var ae=0;ae<4;++ae){var U=4*(G*te+K)+ae,V=4*(G*X+K)+ae,q=Y[U];Y[U]=Y[V],Y[V]=q}}(O,S,R),function(Y,G,J){for(var te=0;te<J;++te)for(var X=0;X<G;++X){var K=4*(G*te+X),ae=Y[K+3];if(ae>0)for(var U=255/ae,V=0;V<3;++V)Y[K+V]=Math.min(U*Y[K+V],255)}}(O,S,R);var C=document.createElement("canvas");C.width=S,C.height=R;var D,B=C.getContext("2d",{willReadFrequently:!0}),z=B.createImageData(S,R);switch(z.data.set(O),B.putImageData(z,0,0),M){case"jpeg":D=C.toDataURL("image/jpeg");break;case"webp":D=C.toDataURL("image/webp");break;default:D=C.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(g),D},u.setConvert=function(){for(var M=0;M<3;M++){var I=this.fullSceneLayout[_[M]];s.setConvert(I,this.fullLayout),I.setScale=t.noop}},u.make4thDimension=function(){var M=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(this._mockAxis,M)},re.exports=x},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y){y=y||g.length;for(var e=new Array(y),r=0;r<y;r++)e[r]=[g[r],m[r],b[r]];return e}},{}],619:[function(v,re,ne){"use strict";var g=v("./font_attributes"),m=v("./animation_attributes"),b=v("../components/color/attributes"),y=v("../components/shapes/draw_newshape/attributes"),e=v("../components/selections/draw_newselection/attributes"),r=v("./pad_attributes"),n=v("../lib/extend").extendFlat,a=g({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=b.defaultLine,re.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:g({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:n(r({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:b.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:b.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:b.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:y.newshape,activeshape:y.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:n({},m.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:g({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(v,re,ne){"use strict";var g=v("../../lib/sort_object_keys"),m='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',b=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),y=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:y,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=g(e);re.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":538}],621:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){var y=m.split(" "),e=y[0],r=y[1],n=g.isArrayOrTypedArray(b)?g.mean(b):b,a=.5+n/100,t=1.5+n/100,p=["",""],s=[0,0];switch(e){case"top":p[0]="top",s[1]=-t;break;case"bottom":p[0]="bottom",s[1]=t}switch(r){case"left":p[1]="right",s[0]=-a;break;case"right":p[1]="left",s[0]=a}return{anchor:p[0]&&p[1]?p.join("-"):p[0]?p[0]:p[1]?p[1]:"center",offset:s}}},{"../../lib":515}],622:[function(v,re,ne){"use strict";var g=v("mapbox-gl/dist/mapbox-gl-unminified"),m=v("../../lib"),b=m.strTranslate,y=m.strScale,e=v("../../plots/get_data").getSubplotCalcData,r=v("../../constants/xmlns_namespaces"),n=v("@plotly/d3"),a=v("../../components/drawing"),t=v("../../lib/svg_text_utils"),p=v("./mapbox"),s=ne.constants=v("./constants");function i(f){return"string"==typeof f&&(-1!==s.styleValuesMapbox.indexOf(f)||0===f.indexOf("mapbox://"))}ne.name="mapbox",ne.attr="subplot",ne.idRoot="mapbox",ne.idRegex=ne.attrRegex=m.counterRegex("mapbox"),ne.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ne.layoutAttributes=v("./layout_attributes"),ne.supplyLayoutDefaults=v("./layout_defaults"),ne.plot=function(f){var c=f._fullLayout,l=f.calcdata,h=c._subplots.mapbox;if(g.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var d=function(w,M){var I=w._fullLayout;if(""===w._context.mapboxAccessToken)return"";for(var S=[],R=[],O=!1,C=!1,D=0;D<M.length;D++){var B=I[M[D]],z=B.accesstoken;i(B.style)&&(z?m.pushUnique(S,z):(i(B._input.style)&&(m.error("Uses Mapbox map style, but did not set an access token."),O=!0),C=!0)),z&&m.pushUnique(R,z)}if(C){var Y=O?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw m.error(Y),new Error(Y)}return S.length?(S.length>1&&m.warn(s.multipleTokensErrorMsg),S[0]):(R.length&&m.log(["Listed mapbox access token(s)",R.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(f,h);g.accessToken=d;for(var o=0;o<h.length;o++){var x=h[o],u=e(l,"mapbox",x),T=c[x],_=T._subplot;_||(_=new p(f,x),c[x]._subplot=_),_.viewInitial||(_.viewInitial={center:m.extendFlat({},T.center),zoom:T.zoom,bearing:T.bearing,pitch:T.pitch}),_.plot(u,c,f._promises)}},ne.clean=function(f,c,l,h){for(var d=h._subplots.mapbox||[],o=0;o<d.length;o++){var x=d[o];!c[x]&&h[x]._subplot&&h[x]._subplot.destroy()}},ne.toSVG=function(f){for(var c=f._fullLayout,l=c._subplots.mapbox,h=c._size,d=0;d<l.length;d++){var o=c[l[d]],x=o.domain,u=o._subplot.toImage("png");c._glimages.append("svg:image").attr({xmlns:r.svg,"xlink:href":u,x:h.l+h.w*x.x[0],y:h.t+h.h*(1-x.y[1]),width:h.w*(x.x[1]-x.x[0]),height:h.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var T=n.select(o._subplot.div);if(null!==T.select(".mapboxgl-ctrl-logo").node().offsetParent){var _=c._glimages.append("g");_.attr("transform",b(h.l+h.w*x.x[0]+10,h.t+h.h*(1-x.y[0])-31)),_.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var w=T.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),M=c._glimages.append("g"),I=M.append("text");I.text(w).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":w});var S=a.bBox(I.node()),R=h.w*(x.x[1]-x.x[0]);if(S.width>R/2){var O=w.split("|").join("<br>");I.text(O).attr("data-unformatted",O).call(t.convertToTspans,f),S=a.bBox(I.node())}I.attr("transform",b(-3,8-S.height)),M.insert("rect",".static-attribution").attr({x:-S.width-6,y:-S.height-3,width:S.width+6,height:S.height+3,fill:"rgba(255, 255, 255, 0.75)"});var C=1;S.width+6>R&&(C=R/(S.width+6));var D=[h.l+h.w*x.x[1],h.t+h.h*(1-x.y[0])];M.attr("transform",b(D[0],D[1])+y(C))}},ne.updateFx=function(f){for(var c=f._fullLayout,l=c._subplots.mapbox,h=0;h<l.length;h++)c[l[h]]._subplot.updateFx(c)}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../lib/svg_text_utils").sanitizeHTML,b=v("./convert_text_opts"),y=v("./constants");function e(t,p){this.subplot=t,this.uid=t.uid+"-"+p,this.index=p,this.idSource="source-"+this.uid,this.idLayer=y.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var r=e.prototype;function n(t){if(!t.visible)return!1;var p=t.source;if(Array.isArray(p)&&p.length>0){for(var s=0;s<p.length;s++)if("string"!=typeof p[s]||0===p[s].length)return!1;return!0}return g.isPlainObject(p)||"string"==typeof p&&p.length>0}function a(t){var p={},s={};switch(t.type){case"circle":g.extendFlat(s,{"circle-radius":t.circle.radius,"circle-color":t.color,"circle-opacity":t.opacity});break;case"line":g.extendFlat(s,{"line-width":t.line.width,"line-color":t.color,"line-opacity":t.opacity,"line-dasharray":t.line.dash});break;case"fill":g.extendFlat(s,{"fill-color":t.color,"fill-outline-color":t.fill.outlinecolor,"fill-opacity":t.opacity});break;case"symbol":var i=t.symbol,f=b(i.textposition,i.iconsize);g.extendFlat(p,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":f.anchor,"text-offset":f.offset,"symbol-placement":i.placement}),g.extendFlat(s,{"icon-color":t.color,"text-color":i.textfont.color,"text-opacity":t.opacity});break;case"raster":g.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":t.opacity})}return{layout:p,paint:s}}r.update=function(t){this.visible?this.needsNewImage(t)?this.updateImage(t):this.needsNewSource(t)?(this.removeLayer(),this.updateSource(t),this.updateLayer(t)):this.needsNewLayer(t)?this.updateLayer(t):this.updateStyle(t):(this.updateSource(t),this.updateLayer(t)),this.visible=n(t)},r.needsNewImage=function(t){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===t.sourcetype&&(this.source!==t.source||JSON.stringify(this.coordinates)!==JSON.stringify(t.coordinates))},r.needsNewSource=function(t){return this.sourceType!==t.sourcetype||JSON.stringify(this.source)!==JSON.stringify(t.source)||this.layerType!==t.type},r.needsNewLayer=function(t){return this.layerType!==t.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},r.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},r.updateImage=function(t){this.subplot.map.getSource(this.idSource).updateImage({url:t.source,coordinates:t.coordinates});var p=this.findFollowingMapboxLayerId(this.lookupBelow());null!==p&&this.subplot.map.moveLayer(this.idLayer,p)},r.updateSource=function(t){var i,f,c,l,h,p=this.subplot.map;if(p.getSource(this.idSource)&&p.removeSource(this.idSource),this.sourceType=t.sourcetype,this.source=t.source,n(t)){var s=(l=(i=t).source,h={type:c=i.sourcetype},"geojson"===c?f="data":"vector"===c?f="string"==typeof l?"url":"tiles":"raster"===c?(f="tiles",h.tileSize=256):"image"===c&&(f="url",h.coordinates=i.coordinates),h[f]=l,i.sourceattribution&&(h.attribution=m(i.sourceattribution)),h);p.addSource(this.idSource,s)}},r.findFollowingMapboxLayerId=function(t){if("traces"===t)for(var p=this.subplot.getMapLayers(),s=0;s<p.length;s++){var i=p[s].id;if("string"==typeof i&&0===i.indexOf(y.traceLayerPrefix)){t=i;break}}return t},r.updateLayer=function(t){var p=this.subplot,s=a(t),i=this.lookupBelow(),f=this.findFollowingMapboxLayerId(i);this.removeLayer(),n(t)&&p.addLayer({id:this.idLayer,source:this.idSource,"source-layer":t.sourcelayer||"",type:t.type,minzoom:t.minzoom,maxzoom:t.maxzoom,layout:s.layout,paint:s.paint},f),this.layerType=t.type,this.below=i},r.updateStyle=function(t){if(n(t)){var p=a(t);this.subplot.setOptions(this.idLayer,"setLayoutProperty",p.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",p.paint)}},r.removeLayer=function(){var t=this.subplot.map;t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer)},r.dispose=function(){var t=this.subplot.map;t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer),t.getSource(this.idSource)&&t.removeSource(this.idSource)},re.exports=function(t,p,s){var i=new e(t,p);return i.update(s),i}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color").defaultLine,b=v("../domain").attributes,y=v("../font_attributes"),e=v("../../traces/scatter/attributes").textposition,r=v("../../plot_api/edit_types").overrideAll,n=v("../../plot_api/plot_template").templatedArray,a=v("./constants"),t=y({});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(re.exports=r({_arrayAttrRegexps:[g.counterRegex("mapbox",".layers",!0)],domain:b({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:m},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:m}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:g.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../subplot_defaults"),b=v("../array_container_defaults"),y=v("./layout_attributes");function e(n,a,t,p){t("accesstoken",p.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch"),b(n,a,{name:"layers",handleItemDefaults:r}),a._input=n}function r(n,a){function t(c,l){return g.coerce(n,a,y.layers,c,l)}if(t("visible")){var p,s=t("sourcetype"),i="raster"===s||"image"===s;t("source"),t("sourceattribution"),"vector"===s&&t("sourcelayer"),"image"===s&&t("coordinates"),i&&(p="raster");var f=t("type",p);i&&"raster"!==f&&(f=a.type="raster",g.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),"circle"===f&&t("circle.radius"),"line"===f&&(t("line.width"),t("line.dash")),"fill"===f&&t("fill.outlinecolor"),"symbol"===f&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),g.coerceFont(t,"symbol.textfont"),t("symbol.textposition"),t("symbol.placement"))}}re.exports=function(n,a,t){m(n,a,t,{type:"mapbox",attributes:y,handleDefaults:e,partition:"y",accessToken:a._mapboxAccessToken})}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(v,re,ne){"use strict";var g=v("mapbox-gl/dist/mapbox-gl-unminified"),m=v("../../lib"),b=v("../../lib/geo_location_utils"),y=v("../../registry"),e=v("../cartesian/axes"),r=v("../../components/dragelement"),n=v("../../components/fx"),a=v("../../components/dragelement/helpers"),t=a.drawMode,p=a.selectMode,s=v("../../components/selections").prepSelect,i=v("../../components/selections").clearOutline,f=v("../../components/selections").clearSelectionsCache,c=v("../../components/selections").selectOnClick,l=v("./constants"),h=v("./layers");function d(w,M){this.id=M,this.gd=w;var I=w._fullLayout,S=w._context;this.container=I._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=I._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(I),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var o=d.prototype;o.plot=function(w,M,I){var S,R=this;R.map&&M[R.id].accesstoken!==R.accessToken&&(R.map.remove(),R.map=null,R.styleObj=null,R.traceHash={},R.layerList=[]),S=new Promise(R.map?function(C,D){R.updateMap(w,M,C,D)}:function(C,D){R.createMap(w,M,C,D)}),I.push(S)},o.createMap=function(w,M,I,S){var R=this,O=M[R.id],C=R.styleObj=u(O.style);R.accessToken=O.accesstoken;var D=R.map=new g.Map({container:R.div,style:C.style,center:_(O.center),zoom:O.zoom,bearing:O.bearing,pitch:O.pitch,interactive:!R.isStatic,preserveDrawingBuffer:R.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new g.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",R.rejectOnError(S),R.isStatic||R.initFx(w,M);var B=[];B.push(new Promise(function(z){D.once("load",z)})),B=B.concat(b.fetchTraceGeoData(w)),Promise.all(B).then(function(){R.fillBelowLookup(w,M),R.updateData(w),R.updateLayout(M),R.resolveOnRender(I)}).catch(S)},o.updateMap=function(w,M,I,S){var R=this,O=R.map,C=M[this.id];R.rejectOnError(S);var D=[],B=u(C.style);JSON.stringify(R.styleObj)!==JSON.stringify(B)&&(R.styleObj=B,O.setStyle(B.style),R.traceHash={},D.push(new Promise(function(z){O.once("styledata",z)}))),D=D.concat(b.fetchTraceGeoData(w)),Promise.all(D).then(function(){R.fillBelowLookup(w,M),R.updateData(w),R.updateLayout(M),R.resolveOnRender(I)}).catch(S)},o.fillBelowLookup=function(w,M){var I,S,R=M[this.id].layers,O=this.belowLookup={},C=!1;for(I=0;I<w.length;I++){var D=w[I][0].trace,B=D._module;"string"==typeof D.below?S=D.below:B.getBelow&&(S=B.getBelow(D,this)),""===S&&(C=!0),O["trace-"+D.uid]=S||""}for(I=0;I<R.length;I++){var z=R[I];O["layout-"+I]=S="string"==typeof z.below?z.below:C?"traces":""}var Y,G,J={};for(Y in O)J[S=O[Y]]?J[S].push(Y):J[S]=[Y];for(S in J){var te=J[S];if(te.length>1)for(I=0;I<te.length;I++)0===(Y=te[I]).indexOf("trace-")?(G=Y.split("trace-")[1],this.traceHash[G]&&(this.traceHash[G].below=null)):0===Y.indexOf("layout-")&&(G=Y.split("layout-")[1],this.layerList[G]&&(this.layerList[G].below=null))}};var x={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function u(w){var M={};return m.isPlainObject(w)?(M.id=w.id,M.style=w):"string"==typeof w?(M.id=w,M.style=-1!==l.styleValuesMapbox.indexOf(w)?T(w):l.stylesNonMapbox[w]?l.stylesNonMapbox[w]:w):(M.id=l.styleValueDflt,M.style=T(l.styleValueDflt)),M.transition={duration:0,delay:0},M}function T(w){return l.styleUrlPrefix+w+"-"+l.styleUrlSuffix}function _(w){return[w.lon,w.lat]}o.updateData=function(w){var M,I,S,R,O=this.traceHash,C=w.slice().sort(function(G,J){return x[G[0].trace.type]-x[J[0].trace.type]});for(S=0;S<C.length;S++){var D=C[S],B=!1;(M=O[(I=D[0].trace).uid])&&(M.type===I.type?(M.update(D),B=!0):M.dispose()),!B&&I._module&&(O[I.uid]=I._module.plot(this,D))}var z=Object.keys(O);e:for(S=0;S<z.length;S++){var Y=z[S];for(R=0;R<w.length;R++)if(Y===(I=w[R][0].trace).uid)continue e;(M=O[Y]).dispose(),delete O[Y]}},o.updateLayout=function(w){var M=this.map,I=w[this.id];this.dragging||this.wheeling||(M.setCenter(_(I.center)),M.setZoom(I.zoom),M.setBearing(I.bearing),M.setPitch(I.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?M.scrollZoom.enable():M.scrollZoom.disable()},o.resolveOnRender=function(w){var M=this.map;M.on("render",function I(){M.loaded()&&(M.off("render",I),setTimeout(w,10))})},o.rejectOnError=function(w){var M=this.map;function I(){w(new Error(l.mapOnErrorMsg))}M.once("error",I),M.once("style.error",I),M.once("source.error",I),M.once("tile.error",I),M.once("layer.error",I)},o.createFramework=function(w){var M=this,I=M.div=document.createElement("div");I.id=M.uid,I.style.position="absolute",M.container.appendChild(I),M.xaxis={_id:"x",c2p:function(S){return M.project(S).x}},M.yaxis={_id:"y",c2p:function(S){return M.project(S).y}},M.updateFramework(w),M.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(M.mockAxis,w)},o.initFx=function(w,M){var I=this,S=I.gd,R=I.map;function O(){n.loneUnhover(M._hoverlayer)}function C(){var D=I.getView();S.emit("plotly_relayouting",I.getViewEditsWithDerived(D))}R.on("moveend",function(D){if(I.map){var B=S._fullLayout;if(D.originalEvent||I.wheeling){var z=B[I.id];y.call("_storeDirectGUIEdit",S.layout,B._preGUI,I.getViewEdits(z));var Y=I.getView();z._input.center=z.center=Y.center,z._input.zoom=z.zoom=Y.zoom,z._input.bearing=z.bearing=Y.bearing,z._input.pitch=z.pitch=Y.pitch,S.emit("plotly_relayout",I.getViewEditsWithDerived(Y))}D.originalEvent&&"mouseup"===D.originalEvent.type?I.dragging=!1:I.wheeling&&(I.wheeling=!1),B._rehover&&B._rehover()}}),R.on("wheel",function(){I.wheeling=!0}),R.on("mousemove",function(D){var B=I.div.getBoundingClientRect(),z=[D.originalEvent.offsetX,D.originalEvent.offsetY];D.target.getBoundingClientRect=function(){return B},I.xaxis.p2c=function(){return R.unproject(z).lng},I.yaxis.p2c=function(){return R.unproject(z).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===I.id&&S._fullLayout[I.id]&&n.hover(S,D,I.id)},n.hover(S,D,I.id),S._fullLayout._hoversubplot=I.id}),R.on("dragstart",function(){I.dragging=!0,O()}),R.on("zoomstart",O),R.on("mouseout",function(){S._fullLayout._hoversubplot=null}),R.on("drag",C),R.on("zoom",C),R.on("dblclick",function(){var D=S._fullLayout[I.id];y.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,I.getViewEdits(D));var B=I.viewInitial;R.setCenter(_(B.center)),R.setZoom(B.zoom),R.setBearing(B.bearing),R.setPitch(B.pitch);var z=I.getView();D._input.center=D.center=z.center,D._input.zoom=D.zoom=z.zoom,D._input.bearing=D.bearing=z.bearing,D._input.pitch=D.pitch=z.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",I.getViewEditsWithDerived(z))}),I.clearOutline=function(){f(I.dragOptions),i(I.dragOptions.gd)},I.onClickInPanFn=function(D){return function(B){var z=S._fullLayout.clickmode;z.indexOf("select")>-1&&c(B.originalEvent,S,[I.xaxis],[I.yaxis],I.id,D),z.indexOf("event")>-1&&n.click(S,B.originalEvent)}}},o.updateFx=function(w){var M=this,I=M.map;if(!M.isStatic){var O=w.dragmode;M.dragOptions=m.extendDeep(M.dragOptions||{},{dragmode:w.dragmode,element:M.div,gd:M.gd,plotinfo:{id:M.id,domain:w[M.id].domain,xaxis:M.xaxis,yaxis:M.yaxis,fillRangeItems:function(B,z){z.isRect?(B.range={})[M.id]=[D([z.xmin,z.ymin]),D([z.xmax,z.ymax])]:(B.lassoPoints={})[M.id]=z.map(D)}},xaxes:[M.xaxis],yaxes:[M.yaxis],subplot:M.id}),I.off("click",M.onClickInPanHandler),p(O)||t(O)?(I.dragPan.disable(),I.on("zoomstart",M.clearSelect),M.dragOptions.prepFn=function(B,z,Y){s(B,z,Y,M.dragOptions,O)},r.init(M.dragOptions)):(I.dragPan.enable(),I.off("zoomstart",M.clearSelect),M.div.onmousedown=null,M.onClickInPanHandler=M.onClickInPanFn(M.dragOptions),I.on("click",M.onClickInPanHandler))}function D(B){var z=M.map.unproject(B);return[z.lng,z.lat]}},o.updateFramework=function(w){var M=w[this.id].domain,I=w._size,S=this.div.style;S.width=I.w*(M.x[1]-M.x[0])+"px",S.height=I.h*(M.y[1]-M.y[0])+"px",S.left=I.l+M.x[0]*I.w+"px",S.top=I.t+(1-M.y[1])*I.h+"px",this.xaxis._offset=I.l+M.x[0]*I.w,this.xaxis._length=I.w*(M.x[1]-M.x[0]),this.yaxis._offset=I.t+(1-M.y[1])*I.h,this.yaxis._length=I.h*(M.y[1]-M.y[0])},o.updateLayers=function(w){var M,I=w[this.id].layers,S=this.layerList;if(I.length!==S.length){for(M=0;M<S.length;M++)S[M].dispose();for(S=this.layerList=[],M=0;M<I.length;M++)S.push(h(this,M,I[M]))}else for(M=0;M<I.length;M++)S[M].update(I[M])},o.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},o.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},o.setOptions=function(w,M,I){for(var S in I)this.map[M](w,S,I[S])},o.getMapLayers=function(){return this.map.getStyle().layers},o.addLayer=function(w,M){var I=this.map;if("string"==typeof M){if(""===M)return void I.addLayer(w,M);for(var S=this.getMapLayers(),R=0;R<S.length;R++)if(M===S[R].id)return void I.addLayer(w,M);m.warn(["Trying to add layer with *below* value",M,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}I.addLayer(w)},o.project=function(w){return this.map.project(new g.LngLat(w[0],w[1]))},o.getView=function(){var w=this.map,M=w.getCenter(),I={lon:M.lng,lat:M.lat},S=w.getCanvas(),R=parseInt(S.style.width),O=parseInt(S.style.height);return{center:I,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([R,0]).toArray(),w.unproject([R,O]).toArray(),w.unproject([0,O]).toArray()]}}},o.getViewEdits=function(w){for(var M=this.id,I=["center","zoom","bearing","pitch"],S={},R=0;R<I.length;R++){var O=I[R];S[M+"."+O]=w[O]}return S},o.getViewEditsWithDerived=function(w){var M=this.id,I=this.getViewEdits(w);return I[M+"._derived"]=w._derived,I},re.exports=d},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(v,re,ne){"use strict";re.exports=function(g){var m=g.editType;return{t:{valType:"number",dflt:0,editType:m},r:{valType:"number",dflt:0,editType:m},b:{valType:"number",dflt:0,editType:m},l:{valType:"number",dflt:0,editType:m},editType:m}}},{}],628:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-time-format").timeFormatLocale,b=v("d3-format").formatLocale,y=v("fast-isnumeric"),e=v("../registry"),r=v("../plot_api/plot_schema"),n=v("../plot_api/plot_template"),a=v("../lib"),t=v("../components/color"),p=v("../constants/numerical").BADNUM,s=v("./cartesian/axis_ids"),i=v("../components/shapes/handle_outline").clearOutline,f=v("./animation_attributes"),c=v("./frame_attributes"),l=v("../plots/get_data").getModuleCalcData,h=a.relinkPrivateKeys,d=a._,o=re.exports={};a.extendFlat(o,e),o.attributes=v("./attributes"),o.attributes.type.values=o.allTypes,o.fontAttrs=v("./font_attributes"),o.layoutAttributes=v("./layout_attributes"),o.fontWeight="normal";var x=o.transformsRegistry,u=v("./command");o.executeAPICommand=u.executeAPICommand,o.computeAPICommandBindings=u.computeAPICommandBindings,o.manageCommandObserver=u.manageCommandObserver,o.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,o.redrawText=function(G){return G=a.getGraphDiv(G),new Promise(function(J){setTimeout(function(){G._fullLayout&&(e.getComponentMethod("annotations","draw")(G),e.getComponentMethod("legend","draw")(G),e.getComponentMethod("colorbar","draw")(G),J(o.previousPromises(G)))},300)})},o.resize=function(G){var J;G=a.getGraphDiv(G);var te=new Promise(function(X,K){G&&!a.isHidden(G)||K(new Error("Resize must be passed a displayed plot div element.")),G._redrawTimer&&clearTimeout(G._redrawTimer),G._resolveResize&&(J=G._resolveResize),G._resolveResize=X,G._redrawTimer=setTimeout(function(){if(!G.layout||G.layout.width&&G.layout.height||a.isHidden(G))X(G);else{delete G.layout.width,delete G.layout.height;var ae=G.changed;G.autoplay=!0,e.call("relayout",G,{autosize:!0}).then(function(){G.changed=ae,G._resolveResize===X&&(delete G._resolveResize,X(G))})}},100)});return J&&J(te),te},o.previousPromises=function(G){if((G._promises||[]).length)return Promise.all(G._promises).then(function(){G._promises=[]})},o.addLinks=function(G){if(G._context.showLink||G._context.showSources){var J=G._fullLayout,te=a.ensureSingle(J._paper,"text","js-plot-link-container",function(q){q.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var ie=g.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),X=te.node(),K={y:J._paper.attr("height")-9};document.body.contains(X)&&X.getComputedTextLength()>=J.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=J._paper.attr("width")-7),te.attr(K);var ae=te.select(".js-link-to-tool"),U=te.select(".js-link-spacer"),V=te.select(".js-sourcelinks");G._context.showSources&&G._context.showSources(G),G._context.showLink&&function(q,ie){ie.text("");var H=ie.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(q._context.linkText+" "+String.fromCharCode(187));if(q._context.sendData)H.on("click",function(){o.sendDataToCloud(q)});else{var ee=window.location.pathname.split("/"),Q=window.location.search;H.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+ee[2].split(".")[0]+"/"+ee[1]+Q})}}(G,ae),U.text(ae.text()&&V.text()?" - ":"")}},o.sendDataToCloud=function(G){var J=(window.PLOTLYENV||{}).BASE_URL||G._context.plotlyServerURL;if(J){G.emit("plotly_beforeexport");var te=g.select(G).append("div").attr("id","hiddenform").style("display","none"),X=te.append("form").attr({action:J+"/external",method:"post",target:"_blank"});return X.append("input").attr({type:"text",name:"data"}).node().value=o.graphJson(G,!1,"keepdata"),X.node().submit(),te.remove(),G.emit("plotly_afterexport"),!1}};var T=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function w(G,J){var te=G._context.locale;te||(te="en-US");var X=!1,K={};function ae(ee){for(var Q=!0,oe=0;oe<J.length;oe++){var le=J[oe];K[le]||(ee[le]?K[le]=ee[le]:Q=!1)}Q&&(X=!0)}for(var U=0;U<2;U++){for(var V=G._context.locales,q=0;q<2;q++){var ie=(V[te]||{}).format;if(ie&&(ae(ie),X))break;V=e.localeRegistry}var H=te.split("-")[0];if(X||H===te)break;te=H}return X||ae(e.localeRegistry.en.format),K}function M(G,J){var te={_fullLayout:J},X="x"===G._id.charAt(0),K=G._mainAxis._anchorAxis,ae="",U="",V="";if(K&&(V=K._mainAxis._id,ae=X?G._id+V:V+G._id),!ae||!J._plots[ae]){ae="";for(var q=G._counterAxes,ie=0;ie<q.length;ie++){var H=q[ie],ee=X?G._id+H:H+G._id;U||(U=ee);var Q=s.getFromId(te,H);if(V&&Q.overlaying===V){ae=ee;break}}}return ae||U}function I(G){var J=G.transforms;if(Array.isArray(J)&&J.length)for(var te=0;te<J.length;te++){var X=J[te],K=X._module||x[X.type];if(K&&K.makesData)return!0}return!1}function S(G,J,te,X){for(var K=G.transforms,ae=[G],U=0;U<K.length;U++){var V=K[U],q=x[V.type];q&&q.transform&&(ae=q.transform(ae,{transform:V,fullTrace:G,fullData:J,layout:te,fullLayout:X,transformIndex:U}))}return ae}function R(G){return"string"==typeof G&&"px"===G.substr(G.length-2)&&parseFloat(G)}function O(G){var J=G.margin;if(!G._size){var te=G._size={l:Math.round(J.l),r:Math.round(J.r),t:Math.round(J.t),b:Math.round(J.b),p:Math.round(J.pad)};te.w=Math.round(G.width)-te.l-te.r,te.h=Math.round(G.height)-te.t-te.b}G._pushmargin||(G._pushmargin={}),G._pushmarginIds||(G._pushmarginIds={})}o.supplyDefaults=function(G,J){var Be,We,te=J&&J.skipUpdateCalc,X=G._fullLayout||{};if(X._skipDefaults)delete X._skipDefaults;else{var K,ae=G._fullLayout={},U=G.layout||{},V=G._fullData||[],q=G._fullData=[],ie=G.data||[],H=G.calcdata||[],ee=G._context||{};G._transitionData||o.createTransitionData(G),ae._dfltTitle={plot:d(G,"Click to enter Plot title"),x:d(G,"Click to enter X axis title"),y:d(G,"Click to enter Y axis title"),colorbar:d(G,"Click to enter Colorscale title"),annotation:d(G,"new text")},ae._traceWord=d(G,"trace");var Q=w(G,T);if(ae._mapboxAccessToken=ee.mapboxAccessToken,X._initialAutoSizeIsDone){var oe=X.width,le=X.height;o.supplyLayoutGlobalDefaults(U,ae,Q),U.width||(ae.width=oe),U.height||(ae.height=le),o.sanitizeMargins(ae)}else{o.supplyLayoutGlobalDefaults(U,ae,Q);var de=!U.width||!U.height,fe=ae.autosize;de&&(fe||ee.autosizable)?o.plotAutoSize(G,U,ae):de&&o.sanitizeMargins(ae),!fe&&de&&(U.width=ae.width,U.height=ae.height)}ae._d3locale=((Be=Q).decimal=(We=ae.separators).charAt(0),Be.thousands=We.charAt(1),{numberFormat:function(Ye){try{Ye=b(Be).format(a.adjustFormat(Ye))}catch{return a.warnBadFormat(Ye),a.noFormat}return Ye},timeFormat:m(Be).utcFormat}),ae._extraFormat=w(G,_),ae._initialAutoSizeIsDone=!0,ae._dataLength=ie.length,ae._modules=[],ae._visibleModules=[],ae._basePlotModules=[];var he=ae._subplots=function(){var Be,We,Ye=e.collectableSubplotTypes,lt={};if(!Ye){Ye=[];var mt=e.subplotsRegistry;for(var Tt in mt){var It=mt[Tt].attr;if(It&&(Ye.push(Tt),Array.isArray(It)))for(We=0;We<It.length;We++)a.pushUnique(Ye,It[We])}}for(Be=0;Be<Ye.length;Be++)lt[Ye[Be]]=[];return lt}(),_e=ae._splomAxes={x:{},y:{}},Ce=ae._splomSubplots={};ae._splomGridDflt={},ae._scatterStackOpts={},ae._firstScatter={},ae._alignmentOpts={},ae._colorAxes={},ae._requestRangeslider={},ae._traceUids=function(Be,We){var Ye,lt,mt=We.length,Tt=[];for(Ye=0;Ye<Be.length;Ye++){var It=Be[Ye]._fullInput;It!==lt&&Tt.push(It),lt=It}var Ct=Tt.length,ct=new Array(mt),at={};function St(hn,cn){ct[cn]=hn,at[hn]=1}function Xt(hn,cn){if(hn&&"string"==typeof hn&&!at[hn])return St(hn,cn),!0}for(Ye=0;Ye<mt;Ye++){var tn=We[Ye].uid;"number"==typeof tn&&(tn=String(tn)),Xt(tn,Ye)||Ye<Ct&&Xt(Tt[Ye].uid,Ye)||St(a.randstr(at),Ye)}return ct}(V,ie),ae._globalTransforms=(G._context||{}).globalTransforms,o.supplyDataDefaults(ie,q,U,ae);var Ee=Object.keys(_e.x),Ae=Object.keys(_e.y);if(Ee.length>1&&Ae.length>1){for(e.getComponentMethod("grid","sizeDefaults")(U,ae),K=0;K<Ee.length;K++)a.pushUnique(he.xaxis,Ee[K]);for(K=0;K<Ae.length;K++)a.pushUnique(he.yaxis,Ae[K]);for(var ze in Ce)a.pushUnique(he.cartesian,ze)}if(ae._has=o._hasPlotType.bind(ae),V.length===q.length)for(K=0;K<q.length;K++)h(q[K],V[K]);o.supplyLayoutModuleDefaults(U,ae,q,G._transitionData);var ve=ae._visibleModules,Te=[];for(K=0;K<ve.length;K++){var Ie=ve[K].crossTraceDefaults;Ie&&a.pushUnique(Te,Ie)}for(K=0;K<Te.length;K++)Te[K](q,ae);ae._hasOnlyLargeSploms=1===ae._basePlotModules.length&&"splom"===ae._basePlotModules[0].name&&Ee.length>15&&Ae.length>15&&0===ae.shapes.length&&0===ae.images.length,o.linkSubplots(q,ae,V,X),o.cleanPlot(q,ae,V,X);var De=!(!X._has||!X._has("gl2d")),Fe=!(!ae._has||!ae._has("gl2d")),Ue=!(!X._has||!X._has("cartesian"))||De,qe=!(!ae._has||!ae._has("cartesian"))||Fe;Ue&&!qe?X._bgLayer.remove():qe&&!Ue&&(ae._shouldCreateBgLayer=!0),X._zoomlayer&&!G._dragging&&i({_fullLayout:X}),function(Be,We){var Ye,lt=[];We.meta&&(Ye=We._meta={meta:We.meta,layout:{meta:We.meta}});for(var mt=0;mt<Be.length;mt++){var Tt=Be[mt];Tt.meta?lt[Tt.index]=Tt._meta={meta:Tt.meta}:We.meta&&(Tt._meta={meta:We.meta}),We.meta&&(Tt._meta.layout={meta:We.meta})}lt.length&&(Ye||(Ye=We._meta={}),Ye.data=lt)}(q,ae),h(ae,X),e.getComponentMethod("colorscale","crossTraceDefaults")(q,ae),ae._preGUI||(ae._preGUI={}),ae._tracePreGUI||(ae._tracePreGUI={});var je,rt=ae._tracePreGUI,Ne={};for(je in rt)Ne[je]="old";for(K=0;K<q.length;K++)Ne[je=q[K]._fullInput.uid]||(rt[je]={}),Ne[je]="new";for(je in Ne)"old"===Ne[je]&&delete rt[je];O(ae),e.getComponentMethod("rangeslider","makeData")(ae),te||H.length!==q.length||o.supplyDefaultsUpdateCalc(H,q)}},o.supplyDefaultsUpdateCalc=function(G,J){for(var te=0;te<J.length;te++){var X=J[te],K=(G[te]||[])[0];if(K&&K.trace){var ae=K.trace;if(ae._hasCalcTransform){var U,V,q,ie=ae._arrayAttrs;for(U=0;U<ie.length;U++)q=a.nestedProperty(ae,V=ie[U]).get().slice(),a.nestedProperty(X,V).set(q)}K.trace=X}}},o.createTransitionData=function(G){G._transitionData||(G._transitionData={}),G._transitionData._frames||(G._transitionData._frames=[]),G._transitionData._frameHash||(G._transitionData._frameHash={}),G._transitionData._counter||(G._transitionData._counter=0),G._transitionData._interruptCallbacks||(G._transitionData._interruptCallbacks=[])},o._hasPlotType=function(G){var J,te=this._basePlotModules||[];for(J=0;J<te.length;J++)if(te[J].name===G)return!0;var X=this._modules||[];for(J=0;J<X.length;J++){var K=X[J].name;if(K===G)return!0;var ae=e.modules[K];if(ae&&ae.categories[G])return!0}return!1},o.cleanPlot=function(G,J,te,X){var K,ae,U=X._basePlotModules||[];for(K=0;K<U.length;K++){var V=U[K];V.clean&&V.clean(G,J,te,X)}var q=X._has&&X._has("gl"),ie=J._has&&J._has("gl");q&&!ie&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);var H=!!X._infolayer;e:for(K=0;K<te.length;K++){var ee=te[K].uid;for(ae=0;ae<G.length;ae++)if(ee===G[ae].uid)continue e;H&&X._infolayer.select(".cb"+ee).remove()}},o.linkSubplots=function(G,J,te,X){var K,ae,U=X._plots||{},V=J._plots={},q=J._subplots,ie={_fullData:G,_fullLayout:J},H=q.cartesian.concat(q.gl2d||[]);for(K=0;K<H.length;K++){var ee,Q=H[K],oe=U[Q],le=s.getFromId(ie,Q,"x"),de=s.getFromId(ie,Q,"y");for(oe?ee=V[Q]=oe:(ee=V[Q]={}).id=Q,le._counterAxes.push(de._id),de._counterAxes.push(le._id),le._subplotsWith.push(Q),de._subplotsWith.push(Q),ee.xaxis=le,ee.yaxis=de,ee._hasClipOnAxisFalse=!1,ae=0;ae<G.length;ae++){var fe=G[ae];if(fe.xaxis===ee.xaxis._id&&fe.yaxis===ee.yaxis._id&&!1===fe.cliponaxis){ee._hasClipOnAxisFalse=!0;break}}}var be,he=s.list(ie,null,!0);for(K=0;K<he.length;K++){var _e=null;(be=he[K]).overlaying&&(_e=s.getFromId(ie,be.overlaying))&&_e.overlaying&&(be.overlaying=!1,_e=null),be._mainAxis=_e||be,_e&&(be.domain=_e.domain.slice()),be._anchorAxis="free"===be.anchor?null:s.getFromId(ie,be.anchor)}for(K=0;K<he.length;K++)if((be=he[K])._counterAxes.sort(s.idSort),be._subplotsWith.sort(a.subplotSort),be._mainSubplot=M(be,J),be._counterAxes.length&&(be.spikemode&&-1!==be.spikemode.indexOf("across")||be.automargin&&be.mirror&&"free"!==be.anchor||e.getComponentMethod("rangeslider","isVisible")(be))){var Ce=1,Ee=0;for(ae=0;ae<be._counterAxes.length;ae++){var Ae=s.getFromId(ie,be._counterAxes[ae]);Ce=Math.min(Ce,Ae.domain[0]),Ee=Math.max(Ee,Ae.domain[1])}Ce<Ee&&(be._counterDomainMin=Ce,be._counterDomainMax=Ee)}},o.clearExpandedTraceDefaultColors=function(G){var J,te,X;for(te=[],(J=G._module._colorAttrs)||(G._module._colorAttrs=J=[],r.crawl(G._module.attributes,function(K,ae,U,V){te[V]=ae,te.length=V+1,"color"===K.valType&&void 0===K.dflt&&J.push(te.join("."))})),X=0;X<J.length;X++)a.nestedProperty(G,"_input."+J[X]).get()||a.nestedProperty(G,J[X]).set(null)},o.supplyDataDefaults=function(G,J,te,X){var K,ae,U,V=X._modules,q=X._visibleModules,ie=X._basePlotModules,H=0,ee=0;function Q(ze){J.push(ze);var ve=ze._module;ve&&(a.pushUnique(V,ve),!0===ze.visible&&a.pushUnique(q,ve),a.pushUnique(ie,ze._module.basePlotModule),H++,!1!==ze._input.visible&&ee++)}X._transformModules=[];var oe={},le=[],fe=n.traceTemplater((te.template||{}).data||{});for(K=0;K<G.length;K++){if((ae=fe.newTrace(U=G[K])).uid=X._traceUids[K],o.supplyTraceDefaults(U,ae,ee,X,K),ae.index=K,ae._input=U,ae._expandedIndex=H,ae.transforms&&ae.transforms.length)for(var be=!1!==U.visible&&!1===ae.visible,he=S(ae,J,te,X),_e=0;_e<he.length;_e++){var Ce=he[_e],Ee={_template:ae._template,type:ae.type,uid:ae.uid+_e};be&&!1===Ce.visible&&delete Ce.visible,o.supplyTraceDefaults(Ce,Ee,H,X,K),h(Ee,Ce),Ee.index=K,Ee._input=U,Ee._fullInput=ae,Ee._expandedIndex=H,Ee._expandedInput=Ce,Q(Ee)}else ae._fullInput=ae,ae._expandedInput=ae,Q(ae);e.traceIs(ae,"carpetAxis")&&(oe[ae.carpet]=ae),e.traceIs(ae,"carpetDependent")&&le.push(K)}for(K=0;K<le.length;K++)if((ae=J[le[K]]).visible){var Ae=oe[ae.carpet];ae._carpet=Ae,Ae&&Ae.visible?(ae.xaxis=Ae.xaxis,ae.yaxis=Ae.yaxis):ae.visible=!1}},o.supplyAnimationDefaults=function(G){var J;G=G||{};var te={};function X(K,ae){return a.coerce(G||{},te,f,K,ae)}if(X("mode"),X("direction"),X("fromcurrent"),Array.isArray(G.frame))for(te.frame=[],J=0;J<G.frame.length;J++)te.frame[J]=o.supplyAnimationFrameDefaults(G.frame[J]||{});else te.frame=o.supplyAnimationFrameDefaults(G.frame||{});if(Array.isArray(G.transition))for(te.transition=[],J=0;J<G.transition.length;J++)te.transition[J]=o.supplyAnimationTransitionDefaults(G.transition[J]||{});else te.transition=o.supplyAnimationTransitionDefaults(G.transition||{});return te},o.supplyAnimationFrameDefaults=function(G){var J={};function te(X,K){return a.coerce(G||{},J,f.frame,X,K)}return te("duration"),te("redraw"),J},o.supplyAnimationTransitionDefaults=function(G){var J={};function te(X,K){return a.coerce(G||{},J,f.transition,X,K)}return te("duration"),te("easing"),J},o.supplyFrameDefaults=function(G){var J={};function te(X,K){return a.coerce(G,J,c,X,K)}return te("group"),te("name"),te("traces"),te("baseframe"),te("data"),te("layout"),J},o.supplyTraceDefaults=function(G,J,te,X,K){var ae,U=X.colorway||t.defaults,V=U[te%U.length];function q(he,_e){return a.coerce(G,J,o.attributes,he,_e)}var ie=q("visible");q("type"),q("name",X._traceWord+" "+K),q("uirevision",X.uirevision);var H=o.getModule(J);if(J._module=H,H){var ee=H.basePlotModule,Q=ee.attr,oe=ee.attributes;if(Q&&oe){var le=X._subplots,de="";if(ie||"gl2d"!==ee.name){if(Array.isArray(Q))for(ae=0;ae<Q.length;ae++){var fe=Q[ae],be=a.coerce(G,J,oe,fe);le[fe]&&a.pushUnique(le[fe],be),de+=be}else de=a.coerce(G,J,oe,Q);le[ee.name]&&a.pushUnique(le[ee.name],de)}}}return ie&&(q("customdata"),q("ids"),q("meta"),e.traceIs(J,"showLegend")?(a.coerce(G,J,H.attributes.showlegend?H.attributes:o.attributes,"showlegend"),q("legendgroup"),q("legendgrouptitle.text"),q("legendrank"),J._dfltShowLegend=!0):J._dfltShowLegend=!1,H&&H.supplyDefaults(G,J,V,X),e.traceIs(J,"noOpacity")||q("opacity"),e.traceIs(J,"notLegendIsolatable")&&(J.visible=!!J.visible),e.traceIs(J,"noHover")||(J.hovertemplate||a.coerceHoverinfo(G,J,X),"parcats"!==J.type&&e.getComponentMethod("fx","supplyDefaults")(G,J,V,X)),H&&H.selectPoints&&q("selectedpoints"),o.supplyTransformDefaults(G,J,X)),J},o.hasMakesDataTransform=I,o.supplyTransformDefaults=function(G,J,te){if(J._length||I(G)){var X=te._globalTransforms||[],K=te._transformModules||[];if(Array.isArray(G.transforms)||0!==X.length)for(var U=X.concat(G.transforms||[]),V=J.transforms=[],q=0;q<U.length;q++){var ie,H=U[q],ee=H.type,Q=x[ee],oe=!(H._module&&H._module===Q),le=Q&&"function"==typeof Q.transform;Q||a.warn("Unrecognized transform type "+ee+"."),Q&&Q.supplyDefaults&&(oe||le)?((ie=Q.supplyDefaults(H,J,te,G)).type=ee,ie._module=Q,a.pushUnique(K,Q)):ie=a.extendFlat({},H),V.push(ie)}}},o.supplyLayoutGlobalDefaults=function(G,J,te){function X(q,ie){return a.coerce(G,J,o.layoutAttributes,q,ie)}var K=G.template;a.isPlainObject(K)&&(J.template=K,J._template=K.layout,J._dataTemplate=K.data),X("autotypenumbers");var ae=a.coerceFont(X,"font");a.coerceFont(X,"title.font",a.extendFlat({},ae,{size:Math.round(1.4*ae.size)})),X("title.text",J._dfltTitle.plot),X("title.xref"),X("title.yref"),X("title.x"),X("title.y"),X("title.xanchor"),X("title.yanchor"),X("title.pad.t"),X("title.pad.r"),X("title.pad.b"),X("title.pad.l"),X("uniformtext.mode")&&X("uniformtext.minsize"),X("autosize",!(G.width&&G.height)),X("width"),X("height"),X("margin.l"),X("margin.r"),X("margin.t"),X("margin.b"),X("margin.pad"),X("margin.autoexpand"),G.width&&G.height&&o.sanitizeMargins(J),e.getComponentMethod("grid","sizeDefaults")(G,J),X("paper_bgcolor"),X("separators",te.decimal+te.thousands),X("hidesources"),X("colorway"),X("datarevision");var V=X("uirevision");X("editrevision",V),X("selectionrevision",V),e.getComponentMethod("modebar","supplyLayoutDefaults")(G,J),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(G,J,X),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(G,J,X),X("meta"),a.isPlainObject(G.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(G,J,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(G,J,X)},o.plotAutoSize=function(G,J,te){var X,K,ae=G._context||{},U=ae.frameMargins,V=a.isPlotDiv(G);if(V&&G.emit("plotly_autosize"),ae.fillFrame)X=window.innerWidth,K=window.innerHeight,document.body.style.overflow="hidden";else{var q=V?window.getComputedStyle(G):{};if(X=R(q.width)||R(q.maxWidth)||te.width,K=R(q.height)||R(q.maxHeight)||te.height,y(U)&&U>0){var ie=1-2*U;X=Math.round(ie*X),K=Math.round(ie*K)}}var H=o.layoutAttributes.width.min,ee=o.layoutAttributes.height.min;X<H&&(X=H),K<ee&&(K=ee);var Q=!J.width&&Math.abs(te.width-X)>1,oe=!J.height&&Math.abs(te.height-K)>1;(oe||Q)&&(Q&&(te.width=X),oe&&(te.height=K)),G._initialAutoSize||(G._initialAutoSize={width:X,height:K}),o.sanitizeMargins(te)},o.supplyLayoutModuleDefaults=function(G,J,te,X){var K,ae,U,V=e.componentsRegistry,q=J._basePlotModules,ie=e.subplotsRegistry.cartesian;for(K in V)(U=V[K]).includeBasePlot&&U.includeBasePlot(G,J);for(var H in q.length||q.push(ie),J._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(G,J),ie.finalizeSubplots(G,J)),J._subplots)J._subplots[H].sort(a.subplotSort);for(ae=0;ae<q.length;ae++)(U=q[ae]).supplyLayoutDefaults&&U.supplyLayoutDefaults(G,J,te);var ee=J._modules;for(ae=0;ae<ee.length;ae++)(U=ee[ae]).supplyLayoutDefaults&&U.supplyLayoutDefaults(G,J,te);var Q=J._transformModules;for(ae=0;ae<Q.length;ae++)(U=Q[ae]).supplyLayoutDefaults&&U.supplyLayoutDefaults(G,J,te,X);for(K in V)(U=V[K]).supplyLayoutDefaults&&U.supplyLayoutDefaults(G,J,te)},o.purge=function(G){var J=G._fullLayout||{};void 0!==J._glcontainer&&(J._glcontainer.selectAll(".gl-canvas").remove(),J._glcontainer.remove(),J._glcanvas=null),J._modeBar&&J._modeBar.destroy(),G._transitionData&&(G._transitionData._interruptCallbacks&&(G._transitionData._interruptCallbacks.length=0),G._transitionData._animationRaf&&window.cancelAnimationFrame(G._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(G),delete G.data,delete G.layout,delete G._fullData,delete G._fullLayout,delete G.calcdata,delete G.empty,delete G.fid,delete G.undoqueue,delete G.undonum,delete G.autoplay,delete G.changed,delete G._promises,delete G._redrawTimer,delete G._hmlumcount,delete G._hmpixcount,delete G._transitionData,delete G._transitioning,delete G._initialAutoSize,delete G._transitioningWithDuration,delete G._dragging,delete G._dragged,delete G._dragdata,delete G._hoverdata,delete G._snapshotInProgress,delete G._editing,delete G._mouseDownTime,delete G._legendMouseDownTime,G.removeAllListeners&&G.removeAllListeners()},o.style=function(G){var J,te=G._fullLayout._visibleModules,X=[];for(J=0;J<te.length;J++){var K=te[J];K.style&&a.pushUnique(X,K.style)}for(J=0;J<X.length;J++)X[J](G)},o.sanitizeMargins=function(G){if(G&&G.margin){var J,te=G.width,X=G.height,K=G.margin,U=X-(K.t+K.b);te-(K.l+K.r)<0&&(J=(te-1)/(K.l+K.r),K.l=Math.floor(J*K.l),K.r=Math.floor(J*K.r)),U<0&&(J=(X-1)/(K.t+K.b),K.t=Math.floor(J*K.t),K.b=Math.floor(J*K.b))}},o.clearAutoMarginIds=function(G){G._fullLayout._pushmarginIds={}},o.allowAutoMargin=function(G,J){G._fullLayout._pushmarginIds[J]=1},o.autoMargin=function(G,J,te){var X=G._fullLayout,K=X.width,ae=X.height,U=X.margin,V=a.constrain(K-U.l-U.r,2,64),q=a.constrain(ae-U.t-U.b,2,64),ie=Math.max(0,K-V),H=Math.max(0,ae-q),ee=X._pushmargin,Q=X._pushmarginIds;if(!1!==U.autoexpand){if(te){var oe=te.pad;if(void 0===oe&&(oe=Math.min(12,U.l,U.r,U.t,U.b)),ie){var le=(te.l+te.r)/ie;le>1&&(te.l/=le,te.r/=le)}if(H){var de=(te.t+te.b)/H;de>1&&(te.t/=de,te.b/=de)}ee[J]={l:{val:void 0!==te.xl?te.xl:te.x,size:te.l+oe},r:{val:void 0!==te.xr?te.xr:te.x,size:te.r+oe},b:{val:void 0!==te.yb?te.yb:te.y,size:te.b+oe},t:{val:void 0!==te.yt?te.yt:te.y,size:te.t+oe}},Q[J]=1}else delete ee[J],delete Q[J];if(!X._replotting)return o.doAutoMargin(G)}},o.doAutoMargin=function(G){var J=G._fullLayout,te=J.width,X=J.height;J._size||(J._size={}),O(J);var K=J._size,ae=J.margin,U=a.extendFlat({},K),V=ae.l,q=ae.r,ie=ae.t,H=ae.b,ee=J._pushmargin,Q=J._pushmarginIds;if(!1!==J.margin.autoexpand){for(var oe in ee)Q[oe]||delete ee[oe];for(var le in ee.base={l:{val:0,size:V},r:{val:1,size:q},t:{val:1,size:ie},b:{val:0,size:H}},ee){var de=ee[le].l||{},fe=ee[le].b||{},be=de.val,he=de.size,_e=fe.val,Ce=fe.size;for(var Ee in ee){if(y(he)&&ee[Ee].r){var Ae=ee[Ee].r.val,ze=ee[Ee].r.size;if(Ae>be){var ve=(he*Ae+(ze-te)*be)/(Ae-be),Te=(ze*(1-be)+(he-te)*(1-Ae))/(Ae-be);ve+Te>V+q&&(V=ve,q=Te)}}if(y(Ce)&&ee[Ee].t){var Ie=ee[Ee].t.val,De=ee[Ee].t.size;if(Ie>_e){var Fe=(Ce*Ie+(De-X)*_e)/(Ie-_e),Ue=(De*(1-_e)+(Ce-X)*(1-Ie))/(Ie-_e);Fe+Ue>H+ie&&(H=Fe,ie=Ue)}}}}}var mt,qe=a.constrain(te-ae.l-ae.r,2,64),je=a.constrain(X-ae.t-ae.b,2,64),rt=Math.max(0,te-qe),Ne=Math.max(0,X-je);if(rt){var Be=(V+q)/rt;Be>1&&(V/=Be,q/=Be)}if(Ne){var We=(H+ie)/Ne;We>1&&(H/=We,ie/=We)}if(K.l=Math.round(V),K.r=Math.round(q),K.t=Math.round(ie),K.b=Math.round(H),K.p=Math.round(ae.pad),K.w=Math.round(te)-K.l-K.r,K.h=Math.round(X)-K.t-K.b,!J._replotting&&o.didMarginChange(U,K)){"_redrawFromAutoMarginCount"in J?J._redrawFromAutoMarginCount++:J._redrawFromAutoMarginCount=1;var Ye=3*(1+Object.keys(Q).length);if(J._redrawFromAutoMarginCount<Ye)return e.call("_doPlot",G);J._size=U,a.warn("Too many auto-margin redraws.")}mt=s.list(G,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Tt){for(var It=0;It<mt.length;It++){var Ct=mt[It][Tt];Ct&&Ct()}})};var C=["l","r","t","b","p","w","h"];function D(G,J,te){var X=!1,ae=a.syncOrAsync([o.previousPromises,function(){if(G._transitionData)return G._transitioning=!1,function(U){var V=Promise.resolve();if(!U)return V;for(;U.length;)V=V.then(U.shift());return V}(G._transitionData._interruptCallbacks)},te.prepareFn,o.rehover,o.reselect,function(){return G.emit("plotly_transitioning",[]),new Promise(function(U){G._transitioning=!0,J.duration>0&&(G._transitioningWithDuration=!0),G._transitionData._interruptCallbacks.push(function(){X=!0}),te.redraw&&G._transitionData._interruptCallbacks.push(function(){return e.call("redraw",G)}),G._transitionData._interruptCallbacks.push(function(){G.emit("plotly_transitioninterrupted",[])});var V=0,q=0;function ie(){return V++,function(){var H;q++,X||q!==V||(H=U,!G._transitionData||(function(ee){if(ee)for(;ee.length;)ee.shift()}(G._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(te.redraw)return e.call("redraw",G)}).then(function(){G._transitioning=!1,G._transitioningWithDuration=!1,G.emit("plotly_transitioned",[])}).then(H)))}}te.runFn(ie),setTimeout(ie())})}],G);return ae&&ae.then||(ae=Promise.resolve()),ae.then(function(){return G})}o.didMarginChange=function(G,J){for(var te=0;te<C.length;te++){var X=C[te],K=G[X],ae=J[X];if(!y(K)||Math.abs(ae-K)>1)return!0}return!1},o.graphJson=function(G,J,te,X,K,ae){(K&&J&&!G._fullData||K&&!J&&!G._fullLayout)&&o.supplyDefaults(G);var V=K?G._fullLayout:G.layout,q=(G._transitionData||{})._frames;function ie(Q,oe){if("function"==typeof Q)return oe?"_function_":null;if(a.isPlainObject(Q)){var le,de={};return Object.keys(Q).sort().forEach(function(fe){if(-1===["_","["].indexOf(fe.charAt(0)))if("function"!=typeof Q[fe]){if("keepdata"===te){if("src"===fe.substr(fe.length-3))return}else if("keepstream"===te){if("string"==typeof(le=Q[fe+"src"])&&le.indexOf(":")>0&&!a.isPlainObject(Q.stream))return}else if("keepall"!==te&&"string"==typeof(le=Q[fe+"src"])&&le.indexOf(":")>0)return;de[fe]=ie(Q[fe],oe)}else oe&&(de[fe]="_function")}),de}return Array.isArray(Q)?Q.map(function(fe){return ie(fe,oe)}):a.isTypedArray(Q)?a.simpleMap(Q,a.identity):a.isJSDate(Q)?a.ms2DateTimeLocal(+Q):Q}var H={data:((K?G._fullData:G.data)||[]).map(function(Q){var oe=ie(Q);return J&&delete oe.fit,oe})};if(!J&&(H.layout=ie(V),K)){var ee=V._size;H.layout.computed={margin:{b:ee.b,l:ee.l,r:ee.r,t:ee.t}}}return q&&(H.frames=ie(q)),ae&&(H.config=ie(G._context,!0)),"object"===X?H:JSON.stringify(H)},o.modifyFrames=function(G,J){var te,X,K,ae=G._transitionData._frames,U=G._transitionData._frameHash;for(te=0;te<J.length;te++)switch((X=J[te]).type){case"replace":var V=(ae[X.index]||{}).name,q=(K=X.value).name;ae[X.index]=U[q]=K,q!==V&&(delete U[V],U[q]=K);break;case"insert":U[(K=X.value).name]=K,ae.splice(X.index,0,K);break;case"delete":delete U[(K=ae[X.index]).name],ae.splice(X.index,1)}return Promise.resolve()},o.computeFrame=function(G,J){var te,X,K,ae,U=G._transitionData._frameHash;if(!J)throw new Error("computeFrame must be given a string frame name");var V=U[J.toString()];if(!V)return!1;for(var q=[V],ie=[V.name];V.baseframe&&(V=U[V.baseframe.toString()])&&-1===ie.indexOf(V.name);)q.push(V),ie.push(V.name);for(var H={};V=q.pop();)if(V.layout&&(H.layout=o.extendLayout(H.layout,V.layout)),V.data){if(H.data||(H.data=[]),!(X=V.traces))for(X=[],te=0;te<V.data.length;te++)X[te]=te;for(H.traces||(H.traces=[]),te=0;te<V.data.length;te++)null!=(K=X[te])&&(-1===(ae=H.traces.indexOf(K))&&(H.traces[ae=H.data.length]=K),H.data[ae]=o.extendTrace(H.data[ae],V.data[te]))}return H},o.recomputeFrameHash=function(G){for(var J=G._transitionData._frameHash={},te=G._transitionData._frames,X=0;X<te.length;X++){var K=te[X];K&&K.name&&(J[K.name]=K)}},o.extendObjectWithContainers=function(G,J,te){var X,K,ae,U,V,q,ie,H=a.extendDeepNoArrays({},J||{}),ee=a.expandObjectPaths(H),Q={};if(te&&te.length)for(ae=0;ae<te.length;ae++)void 0===(K=(X=a.nestedProperty(ee,te[ae])).get())?a.nestedProperty(Q,te[ae]).set(null):(X.set(null),a.nestedProperty(Q,te[ae]).set(K));if(G=a.extendDeepNoArrays(G||{},ee),te&&te.length)for(ae=0;ae<te.length;ae++)if(q=a.nestedProperty(Q,te[ae]).get()){for(ie=(V=a.nestedProperty(G,te[ae])).get(),Array.isArray(ie)||V.set(ie=[]),U=0;U<q.length;U++){var oe=q[U];ie[U]=null===oe?null:o.extendObjectWithContainers(ie[U],oe)}V.set(ie)}return G},o.dataArrayContainers=["transforms","dimensions"],o.layoutArrayContainers=e.layoutArrayContainers,o.extendTrace=function(G,J){return o.extendObjectWithContainers(G,J,o.dataArrayContainers)},o.extendLayout=function(G,J){return o.extendObjectWithContainers(G,J,o.layoutArrayContainers)},o.transition=function(G,J,te,X,K,ae){var U={redraw:K.redraw},V={},q=[];return U.prepareFn=function(){for(var ie=Array.isArray(J)?J.length:0,H=X.slice(0,ie),ee=0;ee<H.length;ee++){var Q=H[ee],oe=G._fullData[Q]._module;if(oe){if(oe.animatable){var le=oe.basePlotModule.name;V[le]||(V[le]=[]),V[le].push(Q)}G.data[H[ee]]=o.extendTrace(G.data[H[ee]],J[ee])}}var de=a.expandObjectPaths(a.extendDeepNoArrays({},te)),fe=/^[xy]axis[0-9]*$/;for(var be in de)fe.test(be)&&delete de[be].range;o.extendLayout(G.layout,de),delete G.calcdata,o.supplyDefaults(G),o.doCalcdata(G);var he=a.expandObjectPaths(te);if(he){var _e=G._fullLayout._plots;for(var Ce in _e){var Ee=_e[Ce],Ae=Ee.xaxis,ze=Ee.yaxis,ve=Ae.range.slice(),Te=ze.range.slice(),Ie=null,De=null,Fe=null,Ue=null;Array.isArray(he[Ae._name+".range"])?Ie=he[Ae._name+".range"].slice():Array.isArray((he[Ae._name]||{}).range)&&(Ie=he[Ae._name].range.slice()),Array.isArray(he[ze._name+".range"])?De=he[ze._name+".range"].slice():Array.isArray((he[ze._name]||{}).range)&&(De=he[ze._name].range.slice()),ve&&Ie&&(Ae.r2l(ve[0])!==Ae.r2l(Ie[0])||Ae.r2l(ve[1])!==Ae.r2l(Ie[1]))&&(Fe={xr0:ve,xr1:Ie}),Te&&De&&(ze.r2l(Te[0])!==ze.r2l(De[0])||ze.r2l(Te[1])!==ze.r2l(De[1]))&&(Ue={yr0:Te,yr1:De}),(Fe||Ue)&&q.push(a.extendFlat({plotinfo:Ee},Fe,Ue))}}return Promise.resolve()},U.runFn=function(ie){var H,ee,Q=G._fullLayout._basePlotModules,oe=q.length;if(te)for(ee=0;ee<Q.length;ee++)Q[ee].transitionAxes&&Q[ee].transitionAxes(G,q,ae,ie);for(var le in oe?((H=a.extendFlat({},ae)).duration=0,delete V.cartesian):H=ae,V){var de=V[le];G._fullData[de[0]]._module.basePlotModule.plot(G,de,H,ie)}},D(G,ae,U)},o.transitionFromReact=function(G,J,te,X){var K=G._fullLayout,ae=K.transition,U={},V=[];return U.prepareFn=function(){var q=K._plots;for(var ie in U.redraw=!1,"some"===J.anim&&(U.redraw=!0),"some"===te.anim&&(U.redraw=!0),q){var H=q[ie],ee=H.xaxis,Q=H.yaxis,oe=X[ee._name].range.slice(),le=X[Q._name].range.slice(),de=ee.range.slice(),fe=Q.range.slice();ee.setScale(),Q.setScale();var be=null,he=null;ee.r2l(oe[0])===ee.r2l(de[0])&&ee.r2l(oe[1])===ee.r2l(de[1])||(be={xr0:oe,xr1:de}),Q.r2l(le[0])===Q.r2l(fe[0])&&Q.r2l(le[1])===Q.r2l(fe[1])||(he={yr0:le,yr1:fe}),(be||he)&&V.push(a.extendFlat({plotinfo:H},be,he))}return Promise.resolve()},U.runFn=function(q){for(var ie,H,ee,Q=G._fullData,oe=G._fullLayout._basePlotModules,le=[],de=0;de<Q.length;de++)le.push(de);function fe(){if(G._fullLayout)for(var he=0;he<oe.length;he++)oe[he].transitionAxes&&oe[he].transitionAxes(G,V,ie,q)}function be(){if(G._fullLayout)for(var he=0;he<oe.length;he++)oe[he].plot(G,ee,H,q)}V.length&&J.anim?"traces first"===ae.ordering?(ie=a.extendFlat({},ae,{duration:0}),ee=le,H=ae,setTimeout(fe,ae.duration),be()):(ie=ae,ee=null,H=a.extendFlat({},ae,{duration:0}),setTimeout(be,ie.duration),fe()):V.length?(ie=ae,fe()):J.anim&&(ee=le,H=ae,be())},D(G,ae,U)},o.doCalcdata=function(G,J){var te,X,K,ae,U=s.list(G),V=G._fullData,q=G._fullLayout,ie=new Array(V.length),H=(G.calcdata||[]).slice();for(G.calcdata=ie,q._numBoxes=0,q._numViolins=0,q._violinScaleGroupStats={},G._hmpixcount=0,G._hmlumcount=0,q._piecolormap={},q._sunburstcolormap={},q._treemapcolormap={},q._iciclecolormap={},q._funnelareacolormap={},K=0;K<V.length;K++)Array.isArray(J)&&-1===J.indexOf(K)&&(ie[K]=H[K]);for(K=0;K<V.length;K++)(te=V[K])._arrayAttrs=r.findArrayAttributes(te),te._extremes={};var ee=q._subplots.polar||[];for(K=0;K<ee.length;K++)U.push(q[ee[K]].radialaxis,q[ee[K]].angularaxis);for(var Q in q._colorAxes){var oe=q[Q];!1!==oe.cauto&&(delete oe.cmin,delete oe.cmax)}var le=!1;function de(he){if(X=(te=V[he])._module,!0===te.visible&&te.transforms){if(X&&X.calc){var _e=X.calc(G,te);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(ae=0;ae<te.transforms.length;ae++){var Ce=te.transforms[ae];(X=x[Ce.type])&&X.calcTransform&&(te._hasCalcTransform=!0,le=!0,X.calcTransform(G,te,Ce))}}}function fe(he,_e){if(!!(X=(te=V[he])._module).isContainer===_e){var Ce=[];if(!0===te.visible&&0!==te._length){delete te._indexToPoints;var Ee=te.transforms||[];for(ae=Ee.length-1;ae>=0;ae--)if(Ee[ae].enabled){te._indexToPoints=Ee[ae]._indexToPoints;break}X&&X.calc&&(Ce=X.calc(G,te))}Array.isArray(Ce)&&Ce[0]||(Ce=[{x:p,y:p}]),Ce[0].t||(Ce[0].t={}),Ce[0].trace=te,ie[he]=Ce}}for(z(U,V,q),K=0;K<V.length;K++)fe(K,!0);for(K=0;K<V.length;K++)de(K);for(le&&z(U,V,q),K=0;K<V.length;K++)fe(K,!0);for(K=0;K<V.length;K++)fe(K,!1);Y(G);var be=function(he,_e){var Ce,Ee,Ae,ze,ve,Te=[];function Ie(en,Xe,tt){var ye=Xe._id.charAt(0);if("histogram2dcontour"===en){var ke=Xe._counterAxes[0],Ve=s.getFromId(_e,ke),Je="x"===ye||"x"===ke&&"category"===Ve.type,nt="y"===ye||"y"===ke&&"category"===Ve.type;return function(Ke,vt){return 0===Ke||0===vt||Je&&Ke===tt[vt].length-1||nt&&vt===tt.length-1?-1:("y"===ye?vt:Ke)-1}}return function(Ke,vt){return"y"===ye?vt:Ke}}var De={min:function(en){return a.aggNums(Math.min,null,en)},max:function(en){return a.aggNums(Math.max,null,en)},sum:function(en){return a.aggNums(function(Xe,tt){return Xe+tt},null,en)},total:function(en){return a.aggNums(function(Xe,tt){return Xe+tt},null,en)},mean:function(en){return a.mean(en)},median:function(en){return a.median(en)}};for(Ce=0;Ce<he.length;Ce++){var Fe=he[Ce];if("category"===Fe.type){var Ue=Fe.categoryorder.match(B);if(Ue){var qe=Ue[1],je=Ue[2],rt=Fe._id.charAt(0),Ne="x"===rt,Be=[];for(Ee=0;Ee<Fe._categories.length;Ee++)Be.push([Fe._categories[Ee],[]]);for(Ee=0;Ee<Fe._traceIndices.length;Ee++){var We=Fe._traceIndices[Ee],Ye=_e._fullData[We];if(!0===Ye.visible){var lt=Ye.type;e.traceIs(Ye,"histogram")&&(delete Ye._xautoBinFinished,delete Ye._yautoBinFinished);var mt="splom"===lt,Tt="scattergl"===lt,It=_e.calcdata[We];for(Ae=0;Ae<It.length;Ae++){var Ct,ct,at=It[Ae];if(mt){var St=Ye._axesDim[Fe._id];if(!Ne){var Xt=Ye._diag[St][0];Xt&&(Fe=_e._fullLayout[s.id2name(Xt)])}var tn=at.trace.dimensions[St].values;for(ze=0;ze<tn.length;ze++)for(Ct=Fe._categoriesMap[tn[ze]],ve=0;ve<at.trace.dimensions.length;ve++)ve!==St&&Be[Ct][1].push(at.trace.dimensions[ve].values[ze])}else if(Tt){for(ze=0;ze<at.t.x.length;ze++)Ne?(Ct=at.t.x[ze],ct=at.t.y[ze]):(Ct=at.t.y[ze],ct=at.t.x[ze]),Be[Ct][1].push(ct);at.t&&at.t._scene&&delete at.t._scene.dirty}else if(at.hasOwnProperty("z")){var cn=Ie(Ye.type,Fe,ct=at.z);for(ze=0;ze<ct.length;ze++)for(ve=0;ve<ct[ze].length;ve++)(Ct=cn(ve,ze))+1&&Be[Ct][1].push(ct[ze][ve])}else for(void 0===(Ct=at.p)&&(Ct=at[rt]),void 0===(ct=at.s)&&(ct=at.v),void 0===ct&&(ct=Ne?at.y:at.x),Array.isArray(ct)||(ct=void 0===ct?[]:[ct]),ze=0;ze<ct.length;ze++)Be[Ct][1].push(ct[ze])}}}Fe._categoriesValue=Be;var yn=[];for(Ee=0;Ee<Be.length;Ee++)yn.push([Be[Ee][0],De[qe](Be[Ee][1])]);yn.sort(function(en,Xe){return en[1]-Xe[1]}),Fe._categoriesAggregatedValue=yn,Fe._initialCategories=yn.map(function(en){return en[0]}),"descending"===je&&Fe._initialCategories.reverse(),Te=Te.concat(Fe.sortByInitialCategories())}}}return Te}(U,G);if(be.length){for(q._numBoxes=0,q._numViolins=0,K=0;K<be.length;K++)fe(be[K],!0);for(K=0;K<be.length;K++)fe(be[K],!1);Y(G)}e.getComponentMethod("fx","calc")(G),e.getComponentMethod("errorbars","calc")(G)};var B=/(total|sum|min|max|mean|median) (ascending|descending)/;function z(G,J,te){var X={};function K(q){q.clearCalc(),"multicategory"===q.type&&q.setupMultiCategory(J),X[q._id]=1}a.simpleMap(G,K);for(var ae=te._axisMatchGroups||[],U=0;U<ae.length;U++)for(var V in ae[U])X[V]||K(te[s.id2name(V)])}function Y(G){var J,te,X,K=G._fullLayout,ae=K._visibleModules,U={};for(te=0;te<ae.length;te++){var V=ae[te],q=V.crossTraceCalc;if(q){var ie=V.basePlotModule.name;U[ie]?a.pushUnique(U[ie],q):U[ie]=[q]}}for(X in U){var H=U[X],ee=K._subplots[X];if(Array.isArray(ee))for(J=0;J<ee.length;J++){var Q=ee[J],oe="cartesian"===X?K._plots[Q]:K[Q];for(te=0;te<H.length;te++)H[te](G,oe,Q)}else for(te=0;te<H.length;te++)H[te](G)}}o.rehover=function(G){G._fullLayout._rehover&&G._fullLayout._rehover()},o.redrag=function(G){G._fullLayout._redrag&&G._fullLayout._redrag()},o.reselect=function(G){var J=G._fullLayout,te=(G.layout||{}).selections,X=J._previousSelections;J._previousSelections=te;var K=J._reselect||JSON.stringify(te)!==JSON.stringify(X);e.getComponentMethod("selections","reselect")(G,K)},o.generalUpdatePerTraceModule=function(G,J,te,X){var K,ae=J.traceHash,U={};for(K=0;K<te.length;K++){var V=te[K],q=V[0].trace;q.visible&&(U[q.type]=U[q.type]||[],U[q.type].push(V))}for(var ie in ae)if(!U[ie]){var H=ae[ie][0];H[0].trace.visible=!1,U[ie]=[H]}for(var ee in U){var Q=U[ee];Q[0][0].trace._module.plot(G,J,a.filterVisible(Q),X)}J.traceHash=U},o.plotBasePlot=function(G,J,te,X,K){var ae=e.getModule(G),U=l(J.calcdata,ae)[0];ae.plot(J,U,X,K)},o.cleanBasePlot=function(G,J,te,X,K){var ae=K._has&&K._has(G),U=te._has&&te._has(G);ae&&!U&&K["_"+G+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(v,re,ne){"use strict";re.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../lib/polygon").tester,b=g.findIndexOfMin,y=g.isAngleInsideSector,e=g.angleDelta,r=g.angleDist;function n(s,i,f,c){var l,h,d=c[0],o=c[1],x=t(Math.sin(i)-Math.sin(s)),u=t(Math.cos(i)-Math.cos(s)),T=Math.tan(f),_=t(1/T),w=x/u,M=o-w*d;return _?x&&u?h=T*(l=M/(T-w)):u?(l=o*_,h=o):(l=d,h=d*T):x&&u?(l=0,h=M):u?(l=0,h=o):l=h=NaN,[l,h]}function a(s,i,f,c){return g.isFullCircle([i,f])?function(l,h){var d,o=h.length,x=new Array(o+1);for(d=0;d<o;d++){var u=h[d];x[d]=[l*Math.cos(u),l*Math.sin(u)]}return x[d]=x[0].slice(),x}(s,c):function(l,h,d,o){var x,u,T=o.length,_=[];function w(z){return[l*Math.cos(z),l*Math.sin(z)]}function M(z,Y,G){return n(z,Y,G,w(z))}function I(z){return g.mod(z,T)}function S(z){return y(z,[h,d])}var R=b(o,function(z){return S(z)?r(z,h):1/0}),O=M(o[R],o[I(R-1)],h);for(_.push(O),x=R,u=0;u<T;x++,u++){var C=o[I(x)];if(!S(C))break;_.push(w(C))}var D=b(o,function(z){return S(z)?r(z,d):1/0}),B=M(o[D],o[I(D+1)],d);return _.push(B),_.push([0,0]),_.push(_[0].slice()),_}(s,i,f,c)}function t(s){return Math.abs(s)>1e-10?s:0}function p(s,i,f){i=i||0,f=f||0;for(var c=s.length,l=new Array(c),h=0;h<c;h++){var d=s[h];l[h]=[i+d[0],f-d[1]]}return l}re.exports={isPtInsidePolygon:function(s,i,f,c,l){if(!y(i,c))return!1;var h,d;f[0]<f[1]?(h=f[0],d=f[1]):(h=f[1],d=f[0]);var o=m(a(h,c[0],c[1],l)),x=m(a(d,c[0],c[1],l)),u=[s*Math.cos(i),s*Math.sin(i)];return x.contains(u)&&!o.contains(u)},findPolygonOffset:function(s,i,f,c){for(var l=1/0,h=1/0,d=a(s,i,f,c),o=0;o<d.length;o++){var x=d[o];l=Math.min(l,x[0]),h=Math.min(h,-x[1])}return[l,h]},findEnclosingVertexAngles:function(s,i){var f=b(i,function(l){var h=e(l,s);return h>0?h:1/0}),c=g.mod(f+1,i.length);return[i[f],i[c]]},findIntersectionXY:n,findXYatLength:function(s,i,f,c){var l=-i*f,h=i*i+1,d=2*(i*l-f),x=Math.sqrt(d*d-4*h*(l*l+f*f-s*s)),u=(-d+x)/(2*h),T=(-d-x)/(2*h);return[[u,i*u+l+c],[T,i*T+l+c]]},clampTiny:t,pathPolygon:function(s,i,f,c,l,h){return"M"+p(a(s,i,f,c),l,h).join("L")},pathPolygonAnnulus:function(s,i,f,c,l,h,d){var o,x;s<i?(o=s,x=i):(o=i,x=s);var u=p(a(o,f,c,l),h,d);return"M"+p(a(x,f,c,l),h,d).reverse().join("L")+"M"+u.join("L")}}},{"../../lib":515,"../../lib/polygon":527}],631:[function(v,re,ne){"use strict";var g=v("../get_data").getSubplotCalcData,m=v("../../lib").counterRegex,b=v("./polar"),y=v("./constants"),e=y.attr,r=y.name,n=m(r),a={};a[e]={valType:"subplotid",dflt:r,editType:"calc"},re.exports={attr:e,name:r,idRoot:r,idRegex:n,attrRegex:n,attributes:a,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(t){for(var p=t._fullLayout,s=t.calcdata,i=p._subplots[r],f=0;f<i.length;f++){var c=i[f],l=g(s,r,c),h=p[c]._subplot;h||(h=b(t,c),p[c]._subplot=h),h.plot(l,p,t._promises)}},clean:function(t,p,s,i){for(var f=i._subplots[r]||[],c=i._has&&i._has("gl"),l=p._has&&p._has("gl"),h=c&&!l,d=0;d<f.length;d++){var o=f[d],x=i[o]._subplot;if(!p[o]&&x)for(var u in x.framework.remove(),x.layers["radial-axis-title"].remove(),x.clipPaths)x.clipPaths[u].remove();h&&x._scene&&(x._scene.destroy(),x._scene=null)}},toSVG:v("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(v,re,ne){"use strict";var g=v("../../components/color/attributes"),m=v("../cartesian/layout_attributes"),b=v("../domain").attributes,y=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,r=e({color:m.color,showline:y({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:y({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,griddash:m.griddash},"plot","from-root"),n=e({tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,layer:m.layer},"plot","from-root"),a={visible:y({},m.visible,{dflt:!0}),type:y({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:y({},m.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:y({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:m.categoryorder,categoryarray:m.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:y({},m.title.text,{editType:"plot",dflt:""}),font:y({},m.title.font,{editType:"plot"}),editType:"plot"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};y(a,r,n);var t={visible:y({},m.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:m.autotypenumbers,categoryorder:m.categoryorder,categoryarray:m.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};y(t,r,n),re.exports={domain:b({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:g.background},radialaxis:a,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color"),b=v("../../plot_api/plot_template"),y=v("../subplot_defaults"),e=v("../get_data").getSubplotData,r=v("../cartesian/tick_value_defaults"),n=v("../cartesian/tick_mark_defaults"),a=v("../cartesian/tick_label_defaults"),t=v("../cartesian/prefix_suffix_defaults"),p=v("../cartesian/category_order_defaults"),s=v("../cartesian/line_grid_defaults"),i=v("../cartesian/axis_autotype"),f=v("./layout_attributes"),c=v("./set_convert"),l=v("./constants"),h=l.axisNames;function d(x,u,T,_){var w=T("bgcolor");_.bgColor=m.combine(w,_.paper_bgcolor);var M=T("sector");T("hole");var I,S=e(_.fullData,l.name,_.id),R=_.layoutOut;function O(ie,H){return T(I+"."+ie,H)}for(var C=0;C<h.length;C++){g.isPlainObject(x[I=h[C]])||(x[I]={});var D=x[I],B=b.newContainer(u,I);B._id=B._name=I,B._attr=_.id+"."+I,B._traceIndices=S.map(function(ie){return ie._expandedIndex});var z=l.axisName2dataArray[I],Y=o(D,B,O,S,z,_);p(D,B,O,{axData:S,dataAttr:z});var G=O("visible");switch(c(B,u,R),O("uirevision",u.uirevision),B._m=1,I){case"radialaxis":var J=O("autorange",!B.isValidRange(D.range));D.autorange=J,!J||"linear"!==Y&&"-"!==Y||O("rangemode"),"reversed"===J&&(B._m=-1),O("range"),B.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===Y){g.log("Polar plots do not support date angular axes yet.");for(var te=0;te<S.length;te++)S[te].visible=!1;Y=D.type=B.type="linear"}O("linear"===Y?"thetaunit":"period");var X=O("direction");O("rotation",{counterclockwise:0,clockwise:90}[X])}if(t(D,B,O,B.type,{tickSuffixDflt:"degrees"===B.thetaunit?"\xb0":void 0}),G){var K,ae,U,V,q=_.font||{};ae=(K=O("color"))===D.color?K:q.color,U=q.size,V=q.family,r(D,B,O,B.type),a(D,B,O,B.type,{font:{color:ae,size:U,family:V}}),n(D,B,O,{outerTicks:!0}),s(D,B,O,{dfltColor:K,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[I]}),O("layer"),"radialaxis"===I&&(O("side"),O("angle",M[0]),O("title.text"),g.coerceFont(O,"title.font",{color:ae,size:g.bigFont(U),family:V}))}"category"!==Y&&O("hoverformat"),B._input=D}"category"===u.angularaxis.type&&T("gridshape")}function o(x,u,T,_,w,M){var I=T("autotypenumbers",M.autotypenumbersDflt);if("-"===T("type")){for(var S,R=0;R<_.length;R++)if(_[R].visible){S=_[R];break}S&&S[w]&&(u.type=i(S[w],"gregorian",{noMultiCategory:!0,autotypenumbers:I})),"-"===u.type?u.type="linear":x.type=u.type}return u.type}re.exports=function(x,u,T){y(x,u,T,{type:l.name,attributes:f,handleDefaults:d,font:u.font,autotypenumbersDflt:u.autotypenumbers,paper_bgcolor:u.paper_bgcolor,fullData:T,layoutOut:u})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("tinycolor2"),b=v("../../registry"),y=v("../../lib"),e=y.strRotate,r=y.strTranslate,n=v("../../components/color"),a=v("../../components/drawing"),t=v("../plots"),p=v("../../plots/cartesian/axes"),s=v("../cartesian/set_convert"),i=v("./set_convert"),f=v("../cartesian/autorange").doAutoRange,c=v("../cartesian/dragbox"),l=v("../../components/dragelement"),h=v("../../components/fx"),d=v("../../components/titles"),o=v("../../components/selections").prepSelect,x=v("../../components/selections").selectOnClick,u=v("../../components/selections").clearOutline,T=v("../../lib/setcursor"),_=v("../../lib/clear_gl_canvases"),w=v("../../plot_api/subroutines").redrawReglTraces,M=v("../../constants/alignment").MID_SHIFT,I=v("./constants"),S=v("./helpers"),R=v("../smith/helpers"),O=R.smith,C=R.reactanceArc,D=R.resistanceArc,B=R.smithTransform,z=y._,Y=y.mod,G=y.deg2rad,J=y.rad2deg;function te(V,q,ie){this.isSmith=ie||!1,this.id=q,this.gd=V,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var H=V._fullLayout;this.clipIds.forTraces="clip"+H._uid+q+"-for-traces",this.clipPaths.forTraces=H._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=H["_"+(ie?"smith":"polar")+"layer"].append("g").attr("class",q),this.getHole=function(Q){return this.isSmith?0:Q.hole},this.getSector=function(Q){return this.isSmith?[0,360]:Q.sector},this.getRadial=function(Q){return this.isSmith?Q.realaxis:Q.radialaxis},this.getAngular=function(Q){return this.isSmith?Q.imaginaryaxis:Q.angularaxis},ie||(this.radialTickLayout=null,this.angularTickLayout=null)}var X=te.prototype;function K(V){var q=V.ticks+String(V.ticklen)+String(V.showticklabels);return"side"in V&&(q+=V.side),q}function ae(V,q){return q[y.findIndexOfMin(q,function(ie){return y.angleDist(V,ie)})]}function U(V,q,ie){return q?(V.attr("display",null),V.attr(ie)):V&&V.attr("display","none"),V}re.exports=function(V,q,ie){return new te(V,q,ie)},X.plot=function(V,q){for(var ie=q[this.id],H=!1,ee=0;ee<V.length;ee++)if(!1===V[ee][0].trace.cliponaxis){H=!0;break}this._hasClipOnAxisFalse=H,this.updateLayers(q,ie),this.updateLayout(q,ie),t.generalUpdatePerTraceModule(this.gd,this,V,ie),this.updateFx(q,ie),this.isSmith&&(delete ie.realaxis.range,delete ie.imaginaryaxis.range)},X.updateLayers=function(V,q){var ie=this.isSmith,H=this.layers,ee=this.getRadial(q),Q=this.getAngular(q),oe=I.layerNames,le=oe.indexOf("frontplot"),de=oe.slice(0,le),fe="below traces"===Q.layer,be="below traces"===ee.layer;fe&&de.push("angular-line"),be&&de.push("radial-line"),fe&&de.push("angular-axis"),be&&de.push("radial-axis"),de.push("frontplot"),fe||de.push("angular-line"),be||de.push("radial-line"),fe||de.push("angular-axis"),be||de.push("radial-axis");var he=(ie?"smith":"polar")+"sublayer",_e=this.framework.selectAll("."+he).data(de,String);_e.enter().append("g").attr("class",function(Ce){return he+" "+Ce}).each(function(Ce){var Ee=H[Ce]=g.select(this);switch(Ce){case"frontplot":ie||Ee.append("g").classed("barlayer",!0),Ee.append("g").classed("scatterlayer",!0);break;case"backplot":Ee.append("g").classed("maplayer",!0);break;case"plotbg":H.bg=Ee.append("path");break;case"radial-grid":case"angular-grid":Ee.style("fill","none");break;case"radial-line":Ee.append("line").style("fill","none");break;case"angular-line":Ee.append("path").style("fill","none")}}),_e.order()},X.updateLayout=function(V,q){var ie=this.layers,H=V._size,ee=this.getRadial(q),Q=this.getAngular(q),oe=q.domain.x,le=q.domain.y;this.xOffset=H.l+H.w*oe[0],this.yOffset=H.t+H.h*(1-le[1]);var de=this.xLength=H.w*(oe[1]-oe[0]),fe=this.yLength=H.h*(le[1]-le[0]),be=this.getSector(q);this.sectorInRad=be.map(G);var he,_e,Ce,Ee,Ae,Tt,at,St,Xt,tn,hn,cn,yn,en,Xe,ze=this.sectorBBox=(Xt=(Tt=be)[1]-(St=Tt[0]),hn=(tn=Y(St,360))+Xt,cn=Math.cos(G(tn)),yn=Math.sin(G(tn)),en=Math.cos(G(hn)),Xe=Math.sin(G(hn)),at=tn<=90&&hn>=90||tn>90&&hn>=450?1:yn<=0&&Xe<=0?0:Math.max(yn,Xe),[tn<=180&&hn>=180||tn>180&&hn>=540?-1:cn>=0&&en>=0?0:Math.min(cn,en),tn<=270&&hn>=270||tn>270&&hn>=630?-1:yn>=0&&Xe>=0?0:Math.min(yn,Xe),hn>=360?1:cn<=0&&en<=0?0:Math.max(cn,en),at]),ve=ze[2]-ze[0],Ie=fe/de,De=Math.abs((ze[3]-ze[1])/ve);Ie>De?(he=de,Ae=(fe-(_e=de*De))/H.h/2,Ce=[oe[0],oe[1]],Ee=[le[0]+Ae,le[1]-Ae]):(_e=fe,Ae=(de-(he=fe/De))/H.w/2,Ce=[oe[0]+Ae,oe[1]-Ae],Ee=[le[0],le[1]]),this.xLength2=he,this.yLength2=_e,this.xDomain2=Ce,this.yDomain2=Ee;var Fe,Ue=this.xOffset2=H.l+H.w*Ce[0],qe=this.yOffset2=H.t+H.h*(1-Ee[1]),je=this.radius=he/ve,rt=this.innerRadius=this.getHole(q)*je,Ne=this.cx=Ue-je*ze[0],Be=this.cy=qe+je*ze[3],We=this.cxx=Ne-Ue,Ye=this.cyy=Be-qe,lt=ee.side;"counterclockwise"===lt?(Fe=lt,lt="top"):"clockwise"===lt&&(Fe=lt,lt="bottom"),this.radialAxis=this.mockAxis(V,q,ee,{_id:"x",side:lt,_trueSide:Fe,domain:[rt/H.w,je/H.w]}),this.angularAxis=this.mockAxis(V,q,Q,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(V,q),this.updateAngularAxis(V,q),this.updateRadialAxis(V,q),this.updateRadialAxisTitle(V,q),this.xaxis=this.mockCartesianAxis(V,q,{_id:"x",domain:Ce}),this.yaxis=this.mockCartesianAxis(V,q,{_id:"y",domain:Ee});var mt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",mt).attr("transform",r(We,Ye)),ie.frontplot.attr("transform",r(Ue,qe)).call(a.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ie.bg.attr("d",mt).attr("transform",r(Ne,Be)).call(n.fill,q.bgcolor)},X.mockAxis=function(V,q,ie,H){var ee=y.extendFlat({},ie,H);return i(ee,q,V),ee},X.mockCartesianAxis=function(V,q,ie){var H=this,ee=H.isSmith,Q=ie._id,oe=y.extendFlat({type:"linear"},ie);s(oe,V);var le={x:[0,2],y:[1,3]};return oe.setRange=function(){var de=H.sectorBBox,fe=le[Q],be=H.radialAxis._rl,he=(be[1]-be[0])/(1-H.getHole(q));oe.range=[de[fe[0]]*he,de[fe[1]]*he]},oe.isPtWithinRange="x"!==Q||ee?function(){return!0}:function(de){return H.isPtInside(de)},oe.setRange(),oe.setScale(),oe},X.doAutoRange=function(V,q){var ie=this.gd,H=this.radialAxis,ee=this.getRadial(q);f(ie,H);var Q=H.range;ee.range=Q.slice(),ee._input.range=Q.slice(),H._rl=[H.r2l(Q[0],null,"gregorian"),H.r2l(Q[1],null,"gregorian")]},X.updateRadialAxis=function(V,q){var ie=this,H=ie.gd,ee=ie.layers,Q=ie.radius,oe=ie.innerRadius,le=ie.cx,de=ie.cy,fe=ie.getRadial(q),be=Y(ie.getSector(q)[0],360),he=ie.radialAxis,_e=oe<Q,Ce=ie.isSmith;Ce||(ie.fillViewInitialKey("radialaxis.angle",fe.angle),ie.fillViewInitialKey("radialaxis.range",he.range.slice()),he.setGeometry()),"auto"===he.tickangle&&be>90&&be<=270&&(he.tickangle=180);var Ee=Ce?function(je){var rt=B(ie,O([je.x,0]));return r(rt[0]-le,rt[1]-de)}:function(je){return r(he.l2p(je.x)+oe,0)},Ae=Ce?function(je){return D(ie,je.x,-1/0,1/0)}:function(je){return ie.pathArc(he.r2p(je.x)+oe)},ze=K(fe);if(ie.radialTickLayout!==ze&&(ee["radial-axis"].selectAll(".xtick").remove(),ie.radialTickLayout=ze),_e){he.setScale();var ve=0,Te=Ce?(he.tickvals||[]).filter(function(je){return je>=0}).map(function(je){return p.tickText(he,je,!0,!1)}):p.calcTicks(he),Ie=Ce?Te:p.clipEnds(he,Te),De=p.getTickSigns(he)[2];Ce&&(("top"===he.ticks&&"bottom"===he.side||"bottom"===he.ticks&&"top"===he.side)&&(De=-De),"top"===he.ticks&&"top"===he.side&&(ve=-he.ticklen),"bottom"===he.ticks&&"bottom"===he.side&&(ve=he.ticklen)),p.drawTicks(H,he,{vals:Te,layer:ee["radial-axis"],path:p.makeTickPath(he,0,De),transFn:Ee,crisp:!1}),p.drawGrid(H,he,{vals:Ie,layer:ee["radial-grid"],path:Ae,transFn:y.noop,crisp:!1}),p.drawLabels(H,he,{vals:Te,layer:ee["radial-axis"],transFn:Ee,labelFns:p.makeLabelFns(he,ve)})}var Fe=ie.radialAxisAngle=ie.vangles?J(ae(G(fe.angle),ie.vangles)):fe.angle,Ue=r(le,de),qe=Ue+e(-Fe);U(ee["radial-axis"],_e&&(fe.showticklabels||fe.ticks),{transform:qe}),U(ee["radial-grid"],_e&&fe.showgrid,{transform:Ce?"":Ue}),U(ee["radial-line"].select("line"),_e&&fe.showline,{x1:Ce?-Q:oe,y1:0,x2:Q,y2:0,transform:qe}).attr("stroke-width",fe.linewidth).call(n.stroke,fe.linecolor)},X.updateRadialAxisTitle=function(V,q,ie){if(!this.isSmith){var H=this.gd,ee=this.radius,Q=this.cx,oe=this.cy,le=this.getRadial(q),de=this.id+"title",fe=0;if(le.title){var be=a.bBox(this.layers["radial-axis"].node()).height,he=le.title.font.size,_e=le.side;fe="top"===_e?he:"counterclockwise"===_e?-(be+.4*he):be+.8*he}var Ce=void 0!==ie?ie:this.radialAxisAngle,Ee=G(Ce),Ae=Math.cos(Ee),ze=Math.sin(Ee),ve=Q+ee/2*Ae+fe*ze,Te=oe-ee/2*ze+fe*Ae;this.layers["radial-axis-title"]=d.draw(H,de,{propContainer:le,propName:this.id+".radialaxis.title",placeholder:z(H,"Click to enter radial axis title"),attributes:{x:ve,y:Te,"text-anchor":"middle"},transform:{rotate:-Ce}})}},X.updateAngularAxis=function(V,q){var ie=this,H=ie.gd,ee=ie.layers,Q=ie.radius,oe=ie.innerRadius,le=ie.cx,de=ie.cy,fe=ie.getAngular(q),be=ie.angularAxis,he=ie.isSmith;he||(ie.fillViewInitialKey("angularaxis.rotation",fe.rotation),be.setGeometry(),be.setScale());var _e=he?function(je){var rt=B(ie,O([0,je.x]));return Math.atan2(rt[0]-le,rt[1]-de)-Math.PI/2}:function(je){return be.t2g(je.x)};"linear"===be.type&&"radians"===be.thetaunit&&(be.tick0=J(be.tick0),be.dtick=J(be.dtick));var Ce=function(je){return r(le+Q*Math.cos(je),de-Q*Math.sin(je))},Ee=he?function(je){var rt=B(ie,O([0,je.x]));return r(rt[0],rt[1])}:function(je){return Ce(_e(je))},Ae=he?function(je){var rt=B(ie,O([0,je.x])),Ne=Math.atan2(rt[0]-le,rt[1]-de)-Math.PI/2;return r(rt[0],rt[1])+e(-J(Ne))}:function(je){var rt=_e(je);return Ce(rt)+e(-J(rt))},ze=he?function(je){return C(ie,je.x,0,1/0)}:function(je){var rt=_e(je),Ne=Math.cos(rt),Be=Math.sin(rt);return"M"+[le+oe*Ne,de-oe*Be]+"L"+[le+Q*Ne,de-Q*Be]},ve=p.makeLabelFns(be,0).labelStandoff,Te={xFn:function(je){var rt=_e(je);return Math.cos(rt)*ve},yFn:function(je){var rt=_e(je),Ne=Math.sin(rt)>0?.2:1;return-Math.sin(rt)*(ve+je.fontSize*Ne)+Math.abs(Math.cos(rt))*(je.fontSize*M)},anchorFn:function(je){var rt=_e(je),Ne=Math.cos(rt);return Math.abs(Ne)<.1?"middle":Ne>0?"start":"end"},heightFn:function(je,rt,Ne){var Be=_e(je);return-.5*(1+Math.sin(Be))*Ne}},Ie=K(fe);ie.angularTickLayout!==Ie&&(ee["angular-axis"].selectAll("."+be._id+"tick").remove(),ie.angularTickLayout=Ie);var De,Fe=he?[1/0].concat(be.tickvals||[]).map(function(je){return p.tickText(be,je,!0,!1)}):p.calcTicks(be);if(he&&(Fe[0].text="\u221e",Fe[0].fontSize*=1.75),"linear"===q.gridshape?(De=Fe.map(_e),y.angleDelta(De[0],De[1])<0&&(De=De.slice().reverse())):De=null,ie.vangles=De,"category"===be.type&&(Fe=Fe.filter(function(je){return y.isAngleInsideSector(_e(je),ie.sectorInRad)})),be.visible){var Ue="inside"===be.ticks?-1:1;p.drawTicks(H,be,{vals:Fe,layer:ee["angular-axis"],path:"M"+Ue*((be.linewidth||1)/2)+",0h"+Ue*be.ticklen,transFn:Ae,crisp:!1}),p.drawGrid(H,be,{vals:Fe,layer:ee["angular-grid"],path:ze,transFn:y.noop,crisp:!1}),p.drawLabels(H,be,{vals:Fe,layer:ee["angular-axis"],repositionOnUpdate:!0,transFn:Ee,labelFns:Te})}U(ee["angular-line"].select("path"),fe.showline,{d:ie.pathSubplot(),transform:r(le,de)}).attr("stroke-width",fe.linewidth).call(n.stroke,fe.linecolor)},X.updateFx=function(V,q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(V),this.updateRadialDrag(V,q,0),this.updateRadialDrag(V,q,1)),this.updateHoverAndMainDrag(V))},X.updateHoverAndMainDrag=function(V){var q,ie,H=this,ee=H.isSmith,Q=H.gd,le=V._zoomlayer,de=I.MINZOOM,fe=I.OFFEDGE,be=H.radius,he=H.innerRadius,_e=H.cx,Ce=H.cy,Ee=H.cxx,Ae=H.cyy,ze=H.sectorInRad,ve=H.vangles,Te=H.radialAxis,Ie=S.clampTiny,De=S.findXYatLength,Fe=S.findEnclosingVertexAngles,Ue=I.cornerHalfWidth,qe=I.cornerLen/2,je=c.makeDragger(H.layers,"path","maindrag",!1===V.dragmode?"none":"crosshair");g.select(je).attr("d",H.pathSubplot()).attr("transform",r(_e,Ce)),je.onmousemove=function(Je){h.hover(Q,Je,H.id),Q._fullLayout._lasthover=je,Q._fullLayout._hoversubplot=H.id},je.onmouseout=function(Je){Q._dragging||l.unhover(Q,Je)};var rt,Ne,Be,We,Ye,lt,mt,Tt,It,Ct={element:je,gd:Q,subplot:H.id,plotinfo:{id:H.id,xaxis:H.xaxis,yaxis:H.yaxis},xaxes:[H.xaxis],yaxes:[H.yaxis]};function ct(Je,nt){return Math.sqrt(Je*Je+nt*nt)}function at(Je,nt){return ct(Je-Ee,nt-Ae)}function St(Je,nt){return Math.atan2(Ae-nt,Je-Ee)}function Xt(Je,nt){return[Je*Math.cos(nt),Je*Math.sin(-nt)]}function tn(Je,nt){if(0===Je)return H.pathSector(2*Ue);var Ke=qe/Je,vt=nt-Ke,gt=nt+Ke,Ot=Math.max(0,Math.min(Je,be)),Vt=Ot-Ue,ft=Ot+Ue;return"M"+Xt(Vt,vt)+"A"+[Vt,Vt]+" 0,0,0 "+Xt(Vt,gt)+"L"+Xt(ft,gt)+"A"+[ft,ft]+" 0,0,1 "+Xt(ft,vt)+"Z"}function hn(Je,nt,Ke){if(0===Je)return H.pathSector(2*Ue);var vt,gt,Ot=Xt(Je,nt),Vt=Xt(Je,Ke),ft=Ie((Ot[0]+Vt[0])/2),bt=Ie((Ot[1]+Vt[1])/2);if(ft&&bt){var Wt=bt/ft,Pt=-1/Wt,Bt=De(Ue,Wt,ft,bt);vt=De(qe,Pt,Bt[0][0],Bt[0][1]),gt=De(qe,Pt,Bt[1][0],Bt[1][1])}else{var Pe,et;bt?(Pe=qe,et=Ue):(Pe=Ue,et=qe),vt=[[ft-Pe,bt-et],[ft+Pe,bt-et]],gt=[[ft-Pe,bt+et],[ft+Pe,bt+et]]}return"M"+vt.join("L")+"L"+gt.reverse().join("L")+"Z"}function cn(Je,nt){return nt=Math.max(Math.min(nt,be),he),Je<fe?Je=0:be-Je<fe?Je=be:nt<fe?nt=0:be-nt<fe&&(nt=be),Math.abs(nt-Je)>de?(Je<nt?(Be=Je,We=nt):(Be=nt,We=Je),!0):(Be=null,We=null,!1)}function yn(Je,nt){nt=nt||"M0,0Z",Tt.attr("d",Je=Je||Ye),It.attr("d",nt),c.transitionZoombox(Tt,It,lt,mt),lt=!0;var Ke={};ke(Ke),Q.emit("plotly_relayouting",Ke)}function en(Je,nt){var Ke,vt,gt=rt+(Je*=q),Ot=Ne+(nt*=ie),Vt=at(rt,Ne),ft=Math.min(at(gt,Ot),be),bt=St(rt,Ne);cn(Vt,ft)&&(Ke=Ye+H.pathSector(We),Be&&(Ke+=H.pathSector(Be)),vt=tn(Be,bt)+tn(We,bt)),yn(Ke,vt)}function Xe(Je,nt,Ke,vt){var gt=S.findIntersectionXY(Ke,vt,Ke,[Je-Ee,Ae-nt]);return ct(gt[0],gt[1])}function tt(Je,nt){var Ke,vt,gt=rt+Je,Ot=Ne+nt,Vt=St(rt,Ne),ft=St(gt,Ot),bt=Fe(Vt,ve),Wt=Fe(ft,ve);cn(Xe(rt,Ne,bt[0],bt[1]),Math.min(Xe(gt,Ot,Wt[0],Wt[1]),be))&&(Ke=Ye+H.pathSector(We),Be&&(Ke+=H.pathSector(Be)),vt=[hn(Be,bt[0],bt[1]),hn(We,bt[0],bt[1])].join(" ")),yn(Ke,vt)}function ye(){if(c.removeZoombox(Q),null!==Be&&null!==We){var Je={};ke(Je),c.showDoubleClickNotifier(Q),b.call("_guiRelayout",Q,Je)}}function ke(Je){var nt=Te._rl,Ke=(nt[1]-nt[0])/(1-he/be)/be;Je[H.id+".radialaxis.range"]=[nt[0]+(Be-he)*Ke,nt[0]+(We-he)*Ke]}function Ve(Je,nt){var Ke=Q._fullLayout.clickmode;if(c.removeZoombox(Q),2===Je){var vt={};for(var gt in H.viewInitial)vt[H.id+"."+gt]=H.viewInitial[gt];Q.emit("plotly_doubleclick",null),b.call("_guiRelayout",Q,vt)}Ke.indexOf("select")>-1&&1===Je&&x(nt,Q,[H.xaxis],[H.yaxis],H.id,Ct),Ke.indexOf("event")>-1&&h.click(Q,nt,H.id)}Ct.prepFn=function(Je,nt,Ke){var vt=Q._fullLayout.dragmode,gt=je.getBoundingClientRect();Q._fullLayout._calcInverseTransform(Q),q=Q._fullLayout._invScaleX,ie=Q._fullLayout._invScaleY;var Vt=y.apply3DTransform(Q._fullLayout._invTransform)(nt-gt.left,Ke-gt.top);if(rt=Vt[0],Ne=Vt[1],ve){var ft=S.findPolygonOffset(be,ze[0],ze[1],ve);rt+=Ee+ft[0],Ne+=Ae+ft[1]}switch(vt){case"zoom":Ct.clickFn=Ve,ee||(Ct.moveFn=ve?tt:en,Ct.doneFn=ye,Be=null,We=null,Ye=H.pathSubplot(),lt=!1,mt=m(Q._fullLayout[H.id].bgcolor).getLuminance(),(Tt=c.makeZoombox(le,mt,_e,Ce,Ye)).attr("fill-rule","evenodd"),It=c.makeCorners(le,_e,Ce),u(Q));break;case"select":case"lasso":o(Je,nt,Ke,Ct,vt)}},l.init(Ct)},X.updateRadialDrag=function(V,q,ie){var H=this,ee=H.gd,Q=H.layers,oe=H.radius,le=H.innerRadius,de=H.cx,fe=H.cy,be=H.radialAxis,he=I.radialDragBoxSize,_e=he/2;if(be.visible){var Ce,Ee,Ae,ze=G(H.radialAxisAngle),ve=be._rl,Te=ve[0],Ie=ve[1],De=ve[ie],Fe=.75*(ve[1]-ve[0])/(1-H.getHole(q))/oe;ie?(Ce=de+(oe+_e)*Math.cos(ze),Ee=fe-(oe+_e)*Math.sin(ze),Ae="radialdrag"):(Ce=de+(le-_e)*Math.cos(ze),Ee=fe-(le-_e)*Math.sin(ze),Ae="radialdrag-inner");var Ue,qe,je,rt=c.makeRectDragger(Q,Ae,"crosshair",-_e,-_e,he,he),Ne={element:rt,gd:ee};!1===V.dragmode&&(Ne.dragmode=!1),U(g.select(rt),be.visible&&le<oe,{transform:r(Ce,Ee)}),Ne.prepFn=function(){Ue=null,qe=null,je=null,Ne.moveFn=Be,Ne.doneFn=We,u(ee)},Ne.clampFn=function(mt,Tt){return Math.sqrt(mt*mt+Tt*Tt)<I.MINDRAG&&(mt=0,Tt=0),[mt,Tt]},l.init(Ne)}function Be(mt,Tt){if(Ue)Ue(mt,Tt);else{var It=[mt,-Tt],Ct=[Math.cos(ze),Math.sin(ze)],ct=Math.abs(y.dot(It,Ct)/Math.sqrt(y.dot(It,It)));isNaN(ct)||(Ue=ct<.5?Ye:lt)}var St,at={};St=at,null!==qe?St[H.id+".radialaxis.angle"]=qe:null!==je&&(St[H.id+".radialaxis.range["+ie+"]"]=je),ee.emit("plotly_relayouting",at)}function We(){null!==qe?b.call("_guiRelayout",ee,H.id+".radialaxis.angle",qe):null!==je&&b.call("_guiRelayout",ee,H.id+".radialaxis.range["+ie+"]",je)}function Ye(mt,Tt){if(0!==ie){qe=Math.atan2(fe-(Ee+Tt),Ce+mt-de),H.vangles&&(qe=ae(qe,H.vangles)),qe=J(qe);var ct=r(de,fe)+e(-qe);Q["radial-axis"].attr("transform",ct),Q["radial-line"].select("line").attr("transform",ct);var at=H.gd._fullLayout;H.updateRadialAxisTitle(at,at[H.id],qe)}}function lt(mt,Tt){var It=y.dot([mt,-Tt],[Math.cos(ze),Math.sin(ze)]);if(je=De-Fe*It,Fe>0==(ie?je>Te:je<Ie)){var Ct=ee._fullLayout,ct=Ct[H.id];be.range[ie]=je,be._rl[ie]=je,H.updateRadialAxis(Ct,ct),H.xaxis.setRange(),H.xaxis.setScale(),H.yaxis.setRange(),H.yaxis.setScale();var at=!1;for(var St in H.traceHash){var Xt=H.traceHash[St],tn=y.filterVisible(Xt);Xt[0][0].trace._module.plot(ee,H,tn,ct),b.traceIs(St,"gl")&&tn.length&&(at=!0)}at&&(_(ee),w(ee))}else je=null}},X.updateAngularDrag=function(V){var q=this,ie=q.gd,H=q.layers,ee=q.radius,Q=q.angularAxis,oe=q.cx,le=q.cy,de=q.cxx,fe=q.cyy,be=I.angularDragBoxSize,he=c.makeDragger(H,"path","angulardrag",!1===V.dragmode?"none":"move"),_e={element:he,gd:ie};function Ce(Ne,Be){return Math.atan2(fe+be-Be,Ne-de-be)}!1===V.dragmode?_e.dragmode=!1:g.select(he).attr("d",q.pathAnnulus(ee,ee+be)).attr("transform",r(oe,le)).call(T,"move");var Ee,Ae,ze,ve,Te,Ie,De=H.frontplot.select(".scatterlayer").selectAll(".trace"),Fe=De.selectAll(".point"),Ue=De.selectAll(".textpoint");function qe(Ne,Be){var We=q.gd._fullLayout,Ye=We[q.id],lt=Ce(Ee+Ne*V._invScaleX,Ae+Be*V._invScaleY),mt=J(lt-Ie);if(ve=ze+mt,H.frontplot.attr("transform",r(q.xOffset2,q.yOffset2)+e([-mt,de,fe])),q.vangles){Te=q.radialAxisAngle+mt;var Tt=r(oe,le)+e(-mt),It=r(oe,le)+e(-Te);H.bg.attr("transform",Tt),H["radial-grid"].attr("transform",Tt),H["radial-axis"].attr("transform",It),H["radial-line"].select("line").attr("transform",It),q.updateRadialAxisTitle(We,Ye,Te)}else q.clipPaths.forTraces.select("path").attr("transform",r(de,fe)+e(mt));Fe.each(function(){var tn=g.select(this),hn=a.getTranslate(tn);tn.attr("transform",r(hn.x,hn.y)+e([mt]))}),Ue.each(function(){var tn=g.select(this),hn=tn.select("text"),cn=a.getTranslate(tn);tn.attr("transform",e([mt,hn.attr("x"),hn.attr("y")])+r(cn.x,cn.y))}),Q.rotation=y.modHalf(ve,360),q.updateAngularAxis(We,Ye),q._hasClipOnAxisFalse&&!y.isFullCircle(q.sectorInRad)&&De.call(a.hideOutsideRangePoints,q);var Ct=!1;for(var ct in q.traceHash)if(b.traceIs(ct,"gl")){var at=q.traceHash[ct],St=y.filterVisible(at);at[0][0].trace._module.plot(ie,q,St,Ye),St.length&&(Ct=!0)}Ct&&(_(ie),w(ie));var Xt={};je(Xt),ie.emit("plotly_relayouting",Xt)}function je(Ne){Ne[q.id+".angularaxis.rotation"]=ve,q.vangles&&(Ne[q.id+".radialaxis.angle"]=Te)}function rt(){Ue.select("text").attr("transform",null);var Ne={};je(Ne),b.call("_guiRelayout",ie,Ne)}_e.prepFn=function(Ne,Be,We){ze=V[q.id].angularaxis.rotation;var lt=he.getBoundingClientRect();Ee=Be-lt.left,Ae=We-lt.top,ie._fullLayout._calcInverseTransform(ie);var mt=y.apply3DTransform(V._invTransform)(Ee,Ae);Ie=Ce(Ee=mt[0],Ae=mt[1]),_e.moveFn=qe,_e.doneFn=rt,u(ie)},q.vangles&&!y.isFullCircle(q.sectorInRad)&&(_e.prepFn=y.noop,T(g.select(he),null)),l.init(_e)},X.isPtInside=function(V){if(this.isSmith)return!0;var q=this.sectorInRad,ie=this.vangles,H=this.angularAxis.c2g(V.theta),ee=this.radialAxis,Q=ee.c2l(V.r);return(ie?S.isPtInsidePolygon:y.isPtInsideSector)(Q,H,ee._rl,q,ie)},X.pathArc=function(V){var q=this.sectorInRad,ie=this.vangles;return(ie?S.pathPolygon:y.pathArc)(V,q[0],q[1],ie)},X.pathSector=function(V){var q=this.sectorInRad,ie=this.vangles;return(ie?S.pathPolygon:y.pathSector)(V,q[0],q[1],ie)},X.pathAnnulus=function(V,q){var ie=this.sectorInRad,H=this.vangles;return(H?S.pathPolygonAnnulus:y.pathAnnulus)(V,q,ie[0],ie[1],H)},X.pathSubplot=function(){var V=this.innerRadius,q=this.radius;return V?this.pathAnnulus(V,q):this.pathSector(q)},X.fillViewInitialKey=function(V,q){V in this.viewInitial||(this.viewInitial[V]=q)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../cartesian/set_convert"),b=g.deg2rad,y=g.rad2deg;re.exports=function(e,r,n){switch(m(e,n),e._id){case"x":case"radialaxis":p=r._subplot,(a=e).setGeometry=function(){var s=a._rl[0],i=a._rl[1],f=p.innerRadius,c=(p.radius-f)/(i-s),l=f/c,h=s>i?function(d){return d<=0}:function(d){return d>=0};a.c2g=function(d){var o=a.c2l(d)-s;return(h(o)?o:0)+l},a.g2c=function(d){return a.l2c(d+s-l)},a.g2p=function(d){return d*c},a.c2p=function(d){return a.g2p(a.c2g(d))}};break;case"angularaxis":!function(a,t){var p=a.type;if("linear"===p){var s=a.d2c,i=a.c2d;a.d2c=function(f,c){return l=s(f),"degrees"===c?b(l):l;var l},a.c2d=function(f,c){return i((l=f,"degrees"===c?y(l):l));var l}}a.makeCalcdata=function(f,c){var l,h,d=f[c],o=f._length,x=function(M){return a.d2c(M,f.thetaunit)};if(d){if(g.isTypedArray(d)&&"linear"===p){if(o===d.length)return d;if(d.subarray)return d.subarray(0,o)}for(l=new Array(o),h=0;h<o;h++)l[h]=x(d[h])}else{var u=c+"0",T="d"+c,_=u in f?x(f[u]):0,w=f[T]?x(f[T]):(a.period||2*Math.PI)/o;for(l=new Array(o),h=0;h<o;h++)l[h]=_+h*w}return l},a.setGeometry=function(){var f,c,l,h,d=t.sector,o=d.map(b),x={clockwise:-1,counterclockwise:1}[a.direction],u=b(a.rotation),T=function(I){return x*I+u},_=function(I){return(I-u)/x};switch(p){case"linear":c=f=g.identity,h=b,l=y,a.range=g.isFullCircle(o)?[d[0],d[0]+360]:o.map(_).map(y);break;case"category":var w=a._categories.length,M=a.period?Math.max(a.period,w):w;0===M&&(M=1),c=h=function(I){return 2*I*Math.PI/M},f=l=function(I){return I*M/Math.PI/2},a.range=[0,M]}a.c2g=function(I){return T(c(I))},a.g2c=function(I){return f(_(I))},a.t2g=function(I){return T(h(I))},a.g2t=function(I){return l(_(I))}}}(e,r)}var a,p}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(v,re,ne){"use strict";re.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(v,re,ne){"use strict";function g(e){return e<0?-1:e>0?1:0}function m(e){var r=e[0],n=e[1];if(!isFinite(r)||!isFinite(n))return[1,0];var a=(r+1)*(r+1)+n*n;return[(r*r+n*n-1)/a,2*n/a]}function b(e,r){return[r[0]*e.radius+e.cx,-r[1]*e.radius+e.cy]}function y(e,r){return r*e.radius}re.exports={smith:m,reactanceArc:function(e,r,n,a){var t=b(e,m([n,r])),p=t[0],s=t[1],i=b(e,m([a,r])),f=i[0],c=i[1];if(0===r)return["M"+p+","+s,"L"+f+","+c].join(" ");var l=y(e,1/Math.abs(r));return["M"+p+","+s,"A"+l+","+l+" 0 0,"+(r<0?1:0)+" "+f+","+c].join(" ")},resistanceArc:function(e,r,n,a){var t=y(e,1/(r+1)),p=b(e,m([r,n])),s=p[0],i=p[1],f=b(e,m([r,a])),c=f[0],l=f[1];if(g(n)!==g(a)){var h=b(e,m([r,0]));return["M"+s+","+i,"A"+t+","+t+" 0 0,"+(0<n?0:1)+" "+h[0]+","+h[1],"A"+t+","+t+" 0 0,"+(a<0?0:1)+c+","+l].join(" ")}return["M"+s+","+i,"A"+t+","+t+" 0 0,"+(a<n?0:1)+" "+c+","+l].join(" ")},smithTransform:b}},{}],638:[function(v,re,ne){"use strict";var g=v("../get_data").getSubplotCalcData,m=v("../../lib").counterRegex,b=v("../polar/polar"),y=v("./constants"),e=y.attr,r=y.name,n=m(r),a={};a[e]={valType:"subplotid",dflt:r,editType:"calc"},re.exports={attr:e,name:r,idRoot:r,idRegex:n,attrRegex:n,attributes:a,layoutAttributes:v("./layout_attributes"),supplyLayoutDefaults:v("./layout_defaults"),plot:function(t){for(var p=t._fullLayout,s=t.calcdata,i=p._subplots[r],f=0;f<i.length;f++){var c=i[f],l=g(s,r,c),h=p[c]._subplot;h||(h=b(t,c,!0),p[c]._subplot=h),h.plot(l,p,t._promises)}},clean:function(t,p,s,i){for(var f=i._subplots[r]||[],c=0;c<f.length;c++){var l=f[c],h=i[l]._subplot;if(!p[l]&&h)for(var d in h.framework.remove(),h.clipPaths)h.clipPaths[d].remove()}},toSVG:v("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(v,re,ne){"use strict";var g=v("../../components/color/attributes"),m=v("../cartesian/layout_attributes"),b=v("../domain").attributes,y=v("../../lib").extendFlat,e=v("../../plot_api/edit_types").overrideAll,r=e({color:m.color,showline:y({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:y({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,griddash:m.griddash},"plot","from-root"),n=e({ticklen:m.ticklen,tickwidth:y({},m.tickwidth,{dflt:2}),tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,tickfont:m.tickfont,tickformat:m.tickformat,hoverformat:m.hoverformat,layer:m.layer},"plot","from-root"),a=y({visible:y({},m.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:y({},m.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},r,n),t=y({visible:y({},m.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:m.ticks,editType:"calc"},r,n);re.exports={domain:b({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:g.background},realaxis:a,imaginaryaxis:t,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(v,re,ne){"use strict";var g,m,b,y=v("../../lib"),e=v("../../components/color"),r=v("../../plot_api/plot_template"),n=v("../subplot_defaults"),a=v("../get_data").getSubplotData,t=v("../cartesian/prefix_suffix_defaults"),p=v("../cartesian/tick_label_defaults"),s=v("../cartesian/line_grid_defaults"),i=v("../cartesian/set_convert"),f=v("./layout_attributes"),c=v("./constants"),l=c.axisNames,h=(g=function(o){return o.slice().reverse().map(function(x){return-x}).concat([0]).concat(o)},m=String,b={},function(o){var x=m?m(o):o;if(x in b)return b[x];var u=g(o);return b[x]=u,u});function d(o,x,u,T){var _=u("bgcolor");T.bgColor=e.combine(_,T.paper_bgcolor);var w,M=a(T.fullData,c.name,T.id),I=T.layoutOut;function S(X,K){return u(w+"."+X,K)}for(var R=0;R<l.length;R++){y.isPlainObject(o[w=l[R]])||(o[w]={});var O=o[w],C=r.newContainer(x,w);C._id=C._name=w,C._attr=T.id+"."+w,C._traceIndices=M.map(function(X){return X._expandedIndex});var D=S("visible");if(C.type="linear",i(C,I),t(O,C,S,C.type),D){var B,z,Y,G,J="realaxis"===w;J&&S("side"),J?S("tickvals"):S("tickvals",h(x.realaxis.tickvals||f.realaxis.tickvals.dflt));var te=T.font||{};D&&(z=(B=S("color"))===O.color?B:te.color,Y=te.size,G=te.family),p(O,C,S,C.type,{noTicklabelstep:!0,noAng:!J,noExp:!0,font:{color:z,size:Y,family:G}}),y.coerce2(o,x,f,w+".ticklen"),y.coerce2(o,x,f,w+".tickwidth"),y.coerce2(o,x,f,w+".tickcolor",x.color),S("ticks")||(delete x[w].ticklen,delete x[w].tickwidth,delete x[w].tickcolor),s(O,C,S,{dfltColor:B,bgColor:T.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[w]}),S("layer")}S("hoverformat"),delete C.type,C._input=O}}re.exports=function(o,x,u){n(o,x,u,{noUirevision:!0,type:c.name,attributes:f,handleDefaults:d,font:x.font,paper_bgcolor:x.paper_bgcolor,fullData:u,layoutOut:x})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plot_api/plot_template"),b=v("./domain").defaults;re.exports=function(y,e,r,n){var a,t,s=n.attributes,i=n.handleDefaults,f=n.partition||"x",c=e._subplots[n.type],l=c.length,h=l&&c[0].replace(/\d+$/,"");function d(T,_){return g.coerce(a,t,s,T,_)}for(var o=0;o<l;o++){var x=c[o];a=y[x]?y[x]:y[x]={},t=m.newContainer(e,x,h),n.noUirevision||d("uirevision",e.uirevision);var u={};u[f]=[o/l,(o+1)/l],b(t,e,d,u),n.id=x,i(a,t,d,n)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(v,re,ne){"use strict";function m(b){var y=b.description?" "+b.description:"",e=b.keys||[];if(e.length>0){for(var r=[],n=0;n<e.length;n++)r[n]="`"+e[n]+"`";y+="Finally, the template string has access to ",y=1===e.length?"variable "+r[0]:"variables "+r.slice(0,-1).join(", ")+" and "+r.slice(-1)+"."}return y}v("../constants/docs"),ne.hovertemplateAttrs=function(b,y){b=b||{},m(y=y||{});var e={valType:"string",dflt:"",editType:b.editType||"none"};return!1!==b.arrayOk&&(e.arrayOk=!0),e},ne.texttemplateAttrs=function(b,y){b=b||{},m(y=y||{});var e={valType:"string",dflt:"",editType:b.editType||"calc"};return!1!==b.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(v,re,ne){"use strict";var g=v("./ternary"),m=v("../../plots/get_data").getSubplotCalcData,b=v("../../lib").counterRegex;ne.name="ternary";var y=ne.attr="subplot";ne.idRoot="ternary",ne.idRegex=ne.attrRegex=b("ternary"),(ne.attributes={})[y]={valType:"subplotid",dflt:"ternary",editType:"calc"},ne.layoutAttributes=v("./layout_attributes"),ne.supplyLayoutDefaults=v("./layout_defaults"),ne.plot=function(e){for(var r=e._fullLayout,n=e.calcdata,a=r._subplots.ternary,t=0;t<a.length;t++){var p=a[t],s=m(n,"ternary",p),i=r[p]._subplot;i||(i=new g({id:p,graphDiv:e,container:r._ternarylayer.node()},r),r[p]._subplot=i),i.plot(s,r,e._promises)}},ne.clean=function(e,r,n,a){for(var t=a._subplots.ternary||[],p=0;p<t.length;p++){var s=t[p],i=a[s]._subplot;!r[s]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(v,re,ne){"use strict";var g=v("../../components/color/attributes"),m=v("../domain").attributes,b=v("../cartesian/layout_attributes"),y=v("../../plot_api/edit_types").overrideAll,e=v("../../lib/extend").extendFlat,r={title:{text:b.title.text,font:b.title.font},color:b.color,tickmode:b.tickmode,nticks:e({},b.nticks,{dflt:6,min:1}),tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,ticklabelstep:b.ticklabelstep,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:e({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:e({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,griddash:b.griddash,layer:b.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},n=re.exports=y({domain:m({name:"ternary"}),bgcolor:{valType:"color",dflt:g.background},sum:{valType:"number",dflt:1,min:0},aaxis:r,baxis:r,caxis:r},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("../../plot_api/plot_template"),b=v("../../lib"),y=v("../subplot_defaults"),e=v("../cartesian/tick_label_defaults"),r=v("../cartesian/prefix_suffix_defaults"),n=v("../cartesian/tick_mark_defaults"),a=v("../cartesian/tick_value_defaults"),t=v("../cartesian/line_grid_defaults"),p=v("./layout_attributes"),s=["aaxis","baxis","caxis"];function i(c,l,h,d){var o,x,u,T=h("bgcolor"),_=h("sum");d.bgColor=g.combine(T,d.paper_bgcolor);for(var w=0;w<s.length;w++)x=c[o=s[w]]||{},(u=m.newContainer(l,o))._name=o,f(x,u,d,l);var M=l.aaxis,I=l.baxis,S=l.caxis;M.min+I.min+S.min>=_&&(M.min=0,I.min=0,S.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function f(c,l,h,d){var o=p[l._name];function x(I,S){return b.coerce(c,l,o,I,S)}x("uirevision",d.uirevision),l.type="linear";var u=x("color"),T=u!==o.color.dflt?u:h.font.color,_=l._name.charAt(0).toUpperCase(),w="Component "+_,M=x("title.text",w);l._hovertitle=M===w?M:_,b.coerceFont(x,"title.font",{family:h.font.family,size:b.bigFont(h.font.size),color:T}),x("min"),a(c,l,x,"linear"),r(c,l,x,"linear"),e(c,l,x,"linear"),n(c,l,x,{outerTicks:!0}),x("showticklabels")&&(b.coerceFont(x,"tickfont",{family:h.font.family,size:h.font.size,color:T}),x("tickangle"),x("tickformat")),t(c,l,x,{dfltColor:u,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o}),x("hoverformat"),x("layer")}re.exports=function(c,l,h){y(c,l,h,{type:"ternary",attributes:p,handleDefaults:i,font:l.font,paper_bgcolor:l.paper_bgcolor})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("tinycolor2"),b=v("../../registry"),y=v("../../lib"),e=y.strTranslate,r=y._,n=v("../../components/color"),a=v("../../components/drawing"),t=v("../cartesian/set_convert"),p=v("../../lib/extend").extendFlat,s=v("../plots"),i=v("../cartesian/axes"),f=v("../../components/dragelement"),c=v("../../components/fx"),l=v("../../components/dragelement/helpers"),h=l.freeMode,d=l.rectMode,o=v("../../components/titles"),x=v("../../components/selections").prepSelect,u=v("../../components/selections").selectOnClick,T=v("../../components/selections").clearOutline,_=v("../../components/selections").clearSelectionsCache,w=v("../cartesian/constants");function M(Y,G){this.id=Y.id,this.graphDiv=Y.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}re.exports=M;var I=M.prototype;I.init=function(Y){this.container=Y._ternarylayer,this.defs=Y._defs,this.layoutId=Y._uid,this.traceHash={},this.layers={}},I.plot=function(Y,G){var J=G[this.id],te=G._size;this._hasClipOnAxisFalse=!1;for(var X=0;X<Y.length;X++)if(!1===Y[X][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(J),this.adjustLayout(J,te),s.generalUpdatePerTraceModule(this.graphDiv,this,Y,J),this.layers.plotbg.select("path").call(n.fill,J.bgcolor)},I.makeFramework=function(Y){var G=this.graphDiv,J=Y[this.id],te=this.clipId="clip"+this.layoutId+this.id,X=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=y.ensureSingleById(Y._clips,"clipPath",te,function(K){K.append("path").attr("d","M0,0Z")}),this.clipDefRelative=y.ensureSingleById(Y._clips,"clipPath",X,function(K){K.append("path").attr("d","M0,0Z")}),this.plotContainer=y.ensureSingle(this.container,"g",this.id),this.updateLayers(J),a.setClipUrl(this.layers.backplot,te,G),a.setClipUrl(this.layers.grids,te,G)},I.updateLayers=function(Y){var G=this.layers,J=["draglayer","plotbg","backplot","grids"];"below traces"===Y.aaxis.layer&&J.push("aaxis","aline"),"below traces"===Y.baxis.layer&&J.push("baxis","bline"),"below traces"===Y.caxis.layer&&J.push("caxis","cline"),J.push("frontplot"),"above traces"===Y.aaxis.layer&&J.push("aaxis","aline"),"above traces"===Y.baxis.layer&&J.push("baxis","bline"),"above traces"===Y.caxis.layer&&J.push("caxis","cline");var te=this.plotContainer.selectAll("g.toplevel").data(J,String),X=["agrid","bgrid","cgrid"];te.enter().append("g").attr("class",function(K){return"toplevel "+K}).each(function(K){var ae=g.select(this);G[K]=ae,"frontplot"===K?ae.append("g").classed("scatterlayer",!0):"backplot"===K?ae.append("g").classed("maplayer",!0):"plotbg"===K?ae.append("path").attr("d","M0,0Z"):"aline"===K||"bline"===K||"cline"===K?ae.append("path"):"grids"===K&&X.forEach(function(U){G[U]=ae.append("g").classed("grid "+U,!0)})}),te.order()};var S=Math.sqrt(4/3);I.adjustLayout=function(Y,G){var J,te,X,K,ae,U,V=this,q=Y.domain,ie=(q.x[0]+q.x[1])/2,H=(q.y[0]+q.y[1])/2,ee=q.x[1]-q.x[0],Q=q.y[1]-q.y[0],oe=ee*G.w,le=Q*G.h,de=Y.sum,fe=Y.aaxis.min,be=Y.baxis.min,he=Y.caxis.min;oe>S*le?X=(K=le)*S:K=(X=oe)/S,ae=ee*X/oe,U=Q*K/le,te=G.t+G.h*(1-H)-K/2,V.x0=J=G.l+G.w*ie-X/2,V.y0=te,V.w=X,V.h=K,V.sum=de,V.xaxis={type:"linear",range:[fe+2*he-de,de-fe-2*be],domain:[ie-ae/2,ie+ae/2],_id:"x"},t(V.xaxis,V.graphDiv._fullLayout),V.xaxis.setScale(),V.xaxis.isPtWithinRange=function(Ue){return Ue.a>=V.aaxis.range[0]&&Ue.a<=V.aaxis.range[1]&&Ue.b>=V.baxis.range[1]&&Ue.b<=V.baxis.range[0]&&Ue.c>=V.caxis.range[1]&&Ue.c<=V.caxis.range[0]},V.yaxis={type:"linear",range:[fe,de-be-he],domain:[H-U/2,H+U/2],_id:"y"},t(V.yaxis,V.graphDiv._fullLayout),V.yaxis.setScale(),V.yaxis.isPtWithinRange=function(){return!0};var _e=V.yaxis.domain[0],Ce=V.aaxis=p({},Y.aaxis,{range:[fe,de-be-he],side:"left",tickangle:(+Y.aaxis.tickangle||0)-30,domain:[_e,_e+U*S],anchor:"free",position:0,_id:"y",_length:X});t(Ce,V.graphDiv._fullLayout),Ce.setScale();var Ee=V.baxis=p({},Y.baxis,{range:[de-fe-he,be],side:"bottom",domain:V.xaxis.domain,anchor:"free",position:0,_id:"x",_length:X});t(Ee,V.graphDiv._fullLayout),Ee.setScale();var Ae=V.caxis=p({},Y.caxis,{range:[de-fe-be,he],side:"right",tickangle:(+Y.caxis.tickangle||0)+30,domain:[_e,_e+U*S],anchor:"free",position:0,_id:"y",_length:X});t(Ae,V.graphDiv._fullLayout),Ae.setScale();var ze="M"+J+","+(te+K)+"h"+X+"l-"+X/2+",-"+K+"Z";V.clipDef.select("path").attr("d",ze),V.layers.plotbg.select("path").attr("d",ze);var ve="M0,"+K+"h"+X+"l-"+X/2+",-"+K+"Z";V.clipDefRelative.select("path").attr("d",ve);var Te=e(J,te);V.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Te),V.clipDefRelative.select("path").attr("transform",null);var Ie=e(J-Ee._offset,te+K);V.layers.baxis.attr("transform",Ie),V.layers.bgrid.attr("transform",Ie);var De=e(J+X/2,te)+"rotate(30)"+e(0,-Ce._offset);V.layers.aaxis.attr("transform",De),V.layers.agrid.attr("transform",De);var Fe=e(J+X/2,te)+"rotate(-30)"+e(0,-Ae._offset);V.layers.caxis.attr("transform",Fe),V.layers.cgrid.attr("transform",Fe),V.drawAxes(!0),V.layers.aline.select("path").attr("d",Ce.showline?"M"+J+","+(te+K)+"l"+X/2+",-"+K:"M0,0").call(n.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),V.layers.bline.select("path").attr("d",Ee.showline?"M"+J+","+(te+K)+"h"+X:"M0,0").call(n.stroke,Ee.linecolor||"#000").style("stroke-width",(Ee.linewidth||0)+"px"),V.layers.cline.select("path").attr("d",Ae.showline?"M"+(J+X/2)+","+te+"l"+X/2+","+K:"M0,0").call(n.stroke,Ae.linecolor||"#000").style("stroke-width",(Ae.linewidth||0)+"px"),V.graphDiv._context.staticPlot||V.initInteractions(),a.setClipUrl(V.layers.frontplot,V._hasClipOnAxisFalse?null:V.clipId,V.graphDiv)},I.drawAxes=function(Y){var G=this.graphDiv,J=this.id.substr(7)+"title",te=this.layers,X=this.aaxis,K=this.baxis,ae=this.caxis;if(this.drawAx(X),this.drawAx(K),this.drawAx(ae),Y){var U=Math.max(X.showticklabels?X.tickfont.size/2:0,(ae.showticklabels?.75*ae.tickfont.size:0)+("outside"===ae.ticks?.87*ae.ticklen:0)),V=(K.showticklabels?K.tickfont.size:0)+("outside"===K.ticks?K.ticklen:0)+3;te["a-title"]=o.draw(G,"a"+J,{propContainer:X,propName:this.id+".aaxis.title",placeholder:r(G,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-X.title.font.size/3-U,"text-anchor":"middle"}}),te["b-title"]=o.draw(G,"b"+J,{propContainer:K,propName:this.id+".baxis.title",placeholder:r(G,"Click to enter Component B title"),attributes:{x:this.x0-V,y:this.y0+this.h+.83*K.title.font.size+V,"text-anchor":"middle"}}),te["c-title"]=o.draw(G,"c"+J,{propContainer:ae,propName:this.id+".caxis.title",placeholder:r(G,"Click to enter Component C title"),attributes:{x:this.x0+this.w+V,y:this.y0+this.h+.83*ae.title.font.size+V,"text-anchor":"middle"}})}},I.drawAx=function(Y){var G,J=this.graphDiv,te=Y._name,X=te.charAt(0),K=Y._id,ae=this.layers[te],U=X+"tickLayout",V=(G=Y).ticks+String(G.ticklen)+String(G.showticklabels);this[U]!==V&&(ae.selectAll("."+K+"tick").remove(),this[U]=V),Y.setScale();var q=i.calcTicks(Y),ie=i.clipEnds(Y,q),H=i.makeTransTickFn(Y),ee=i.getTickSigns(Y)[2],Q=y.deg2rad(30),oe=ee*(Y.linewidth||1)/2,le=ee*Y.ticklen,de=this.w,fe=this.h,be="b"===X?"M0,"+oe+"l"+Math.sin(Q)*le+","+Math.cos(Q)*le:"M"+oe+",0l"+Math.cos(Q)*le+","+-Math.sin(Q)*le,he={a:"M0,0l"+fe+",-"+de/2,b:"M0,0l-"+de/2+",-"+fe,c:"M0,0l-"+fe+","+de/2}[X];i.drawTicks(J,Y,{vals:"inside"===Y.ticks?ie:q,layer:ae,path:be,transFn:H,crisp:!1}),i.drawGrid(J,Y,{vals:ie,layer:this.layers[X+"grid"],path:he,transFn:H,crisp:!1}),i.drawLabels(J,Y,{vals:q,layer:ae,transFn:H,labelFns:i.makeLabelFns(Y,0,30)})};var R=w.MINZOOM/2+.87,O="m-0.87,.5h"+R+"v3h-"+(R+5.2)+"l"+(R/2+2.6)+",-"+(.87*R+4.5)+"l2.6,1.5l-"+R/2+","+.87*R+"Z",C="m0.87,.5h-"+R+"v3h"+(R+5.2)+"l-"+(R/2+2.6)+",-"+(.87*R+4.5)+"l-2.6,1.5l"+R/2+","+.87*R+"Z",D="m0,1l"+R/2+","+.87*R+"l2.6,-1.5l-"+(R/2+2.6)+",-"+(.87*R+4.5)+"l-"+(R/2+2.6)+","+(.87*R+4.5)+"l2.6,1.5l"+R/2+",-"+.87*R+"Z",B=!0;function z(Y){g.select(Y).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}I.clearOutline=function(){_(this.dragOptions),T(this.dragOptions.gd)},I.initInteractions=function(){var Y,G,J,te,X,K,ae,U,V,q,ie,H,ee=this,Q=ee.layers.plotbg.select("path").node(),oe=ee.graphDiv,le=oe._fullLayout._zoomlayer;function de(ve){var Te={};return Te[ee.id+".aaxis.min"]=ve.a,Te[ee.id+".baxis.min"]=ve.b,Te[ee.id+".caxis.min"]=ve.c,Te}function fe(ve,Te){var Ie=oe._fullLayout.clickmode;z(oe),2===ve&&(oe.emit("plotly_doubleclick",null),b.call("_guiRelayout",oe,de({a:0,b:0,c:0}))),Ie.indexOf("select")>-1&&1===ve&&u(Te,oe,[ee.xaxis],[ee.yaxis],ee.id,ee.dragOptions),Ie.indexOf("event")>-1&&c.click(oe,Te,ee.id)}function be(ve,Te){return 1-Te/ee.h}function he(ve,Te){return 1-(ve+(ee.h-Te)/Math.sqrt(3))/ee.w}function _e(ve,Te){return(ve-(ee.h-Te)/Math.sqrt(3))/ee.w}function Ce(ve,Te){var Ie=J+ve*Y,De=te+Te*G,Fe=Math.max(0,Math.min(1,be(0,te),be(0,De))),Ue=Math.max(0,Math.min(1,he(J,te),he(Ie,De))),qe=Math.max(0,Math.min(1,_e(J,te),_e(Ie,De))),je=(Fe/2+qe)*ee.w,rt=(1-Fe/2-Ue)*ee.w,Ne=(je+rt)/2,Be=rt-je,We=(1-Fe)*ee.h,Ye=We-Be/S;Be<w.MINZOOM?(ae=X,ie.attr("d",V),H.attr("d","M0,0Z")):(ae={a:X.a+Fe*K,b:X.b+Ue*K,c:X.c+qe*K},ie.attr("d",V+"M"+je+","+We+"H"+rt+"L"+Ne+","+Ye+"L"+je+","+We+"Z"),H.attr("d","M"+J+","+te+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+je+","+We+O+"M"+rt+","+We+C+"M"+Ne+","+Ye+D)),q||(ie.transition().style("fill",U>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),H.transition().style("opacity",1).duration(200),q=!0),oe.emit("plotly_relayouting",de(ae))}function Ee(){z(oe),ae!==X&&(b.call("_guiRelayout",oe,de(ae)),B&&oe.data&&oe._context.showTips&&(y.notifier(r(oe,"Double-click to zoom back out"),"long"),B=!1))}function Ae(ve,Te){var Ie=ve/ee.xaxis._m,De=Te/ee.yaxis._m,Fe=[(ae={a:X.a-De,b:X.b+(Ie+De)/2,c:X.c-(Ie-De)/2}).a,ae.b,ae.c].sort(y.sorterAsc),Ue=Fe.indexOf(ae.a),qe=Fe.indexOf(ae.b),je=Fe.indexOf(ae.c);Fe[0]<0&&(Fe[1]+Fe[0]/2<0?(Fe[2]+=Fe[0]+Fe[1],Fe[0]=Fe[1]=0):(Fe[2]+=Fe[0]/2,Fe[1]+=Fe[0]/2,Fe[0]=0),Te=(X.a-(ae={a:Fe[Ue],b:Fe[qe],c:Fe[je]}).a)*ee.yaxis._m,ve=(X.c-ae.c-X.b+ae.b)*ee.xaxis._m);var rt=e(ee.x0+ve,ee.y0+Te);ee.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",rt);var Ne=e(-ve,-Te);ee.clipDefRelative.select("path").attr("transform",Ne),ee.aaxis.range=[ae.a,ee.sum-ae.b-ae.c],ee.baxis.range=[ee.sum-ae.a-ae.c,ae.b],ee.caxis.range=[ee.sum-ae.a-ae.b,ae.c],ee.drawAxes(!1),ee._hasClipOnAxisFalse&&ee.plotContainer.select(".scatterlayer").selectAll(".trace").call(a.hideOutsideRangePoints,ee),oe.emit("plotly_relayouting",de(ae))}function ze(){b.call("_guiRelayout",oe,de(ae))}this.dragOptions={element:Q,gd:oe,plotinfo:{id:ee.id,domain:oe._fullLayout[ee.id].domain,xaxis:ee.xaxis,yaxis:ee.yaxis},subplot:ee.id,prepFn:function(ve,Te,Ie){ee.dragOptions.xaxes=[ee.xaxis],ee.dragOptions.yaxes=[ee.yaxis],Y=oe._fullLayout._invScaleX,G=oe._fullLayout._invScaleY;var De=ee.dragOptions.dragmode=oe._fullLayout.dragmode;ee.dragOptions.minDrag=h(De)?1:void 0,"zoom"===De?(ee.dragOptions.moveFn=Ce,ee.dragOptions.clickFn=fe,ee.dragOptions.doneFn=Ee,function(Fe,Ue,qe){var je=Q.getBoundingClientRect();J=Ue-je.left,te=qe-je.top,oe._fullLayout._calcInverseTransform(oe);var Ne=y.apply3DTransform(oe._fullLayout._invTransform)(J,te);J=Ne[0],te=Ne[1],ae=X={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},K=ee.aaxis.range[1]-X.a,U=m(ee.graphDiv._fullLayout[ee.id].bgcolor).getLuminance(),V="M0,"+ee.h+"L"+ee.w/2+", 0L"+ee.w+","+ee.h+"Z",q=!1,ie=le.append("path").attr("class","zoombox").attr("transform",e(ee.x0,ee.y0)).style({fill:U>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",V),H=le.append("path").attr("class","zoombox-corners").attr("transform",e(ee.x0,ee.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ee.clearOutline(oe)}(0,Te,Ie)):"pan"===De?(ee.dragOptions.moveFn=Ae,ee.dragOptions.clickFn=fe,ee.dragOptions.doneFn=ze,ae=X={a:ee.aaxis.range[0],b:ee.baxis.range[1],c:ee.caxis.range[1]},ee.clearOutline(oe)):(d(De)||h(De))&&x(ve,Te,Ie,ee.dragOptions,De)}},Q.onmousemove=function(ve){c.hover(oe,ve,ee.id),oe._fullLayout._lasthover=Q,oe._fullLayout._hoversubplot=ee.id},Q.onmouseout=function(ve){oe._dragging||f.unhover(oe,ve)},f.init(this.dragOptions)}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(v,re,ne){"use strict";var g=v("./lib/loggers"),m=v("./lib/noop"),b=v("./lib/push_unique"),y=v("./lib/is_plain_object"),e=v("./lib/dom").addStyleRule,r=v("./lib/extend"),n=v("./plots/attributes"),a=v("./plots/layout_attributes"),t=r.extendFlat,p=r.extendDeepAll;function s(u){var T=u.name,_=u.categories,w=u.meta;if(ne.modules[T])g.log("Type "+T+" already registered");else{ne.subplotsRegistry[u.basePlotModule.name]||function(B){var z=B.name;if(ne.subplotsRegistry[z])g.log("Plot type "+z+" already registered.");else for(var Y in l(B),ne.subplotsRegistry[z]=B,ne.componentsRegistry)o(Y,B.name)}(u.basePlotModule);for(var M={},I=0;I<_.length;I++)M[_[I]]=!0,ne.allCategories[_[I]]=!0;for(var S in ne.modules[T]={_module:u,categories:M},w&&Object.keys(w).length&&(ne.modules[T].meta=w),ne.allTypes.push(T),ne.componentsRegistry)h(S,T);u.layoutAttributes&&t(ne.traceLayoutAttributes,u.layoutAttributes);var R=u.basePlotModule,O=R.name;if("mapbox"===O){var C=R.constants.styleRules;for(var D in C)e(".js-plotly-plot .plotly .mapboxgl-"+D,C[D])}"geo"!==O&&"mapbox"!==O||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function i(u){if("string"!=typeof u.name)throw new Error("Component module *name* must be a string.");var T=u.name;for(var _ in ne.componentsRegistry[T]=u,u.layoutAttributes&&(u.layoutAttributes._isLinkedToArray&&b(ne.layoutArrayContainers,T),l(u)),ne.modules)h(T,_);for(var w in ne.subplotsRegistry)o(T,w);for(var M in ne.transformsRegistry)d(T,M);u.schema&&u.schema.layout&&p(a,u.schema.layout)}function f(u){if("string"!=typeof u.name)throw new Error("Transform module *name* must be a string.");var T="Transform module "+u.name,_="function"==typeof u.transform,w="function"==typeof u.calcTransform;if(!_&&!w)throw new Error(T+" is missing a *transform* or *calcTransform* method.");for(var M in _&&w&&g.log([T+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),y(u.attributes)||g.log(T+" registered without an *attributes* object."),"function"!=typeof u.supplyDefaults&&g.log(T+" registered without a *supplyDefaults* method."),ne.transformsRegistry[u.name]=u,ne.componentsRegistry)d(M,u.name)}function c(u){var T=u.name,_=T.split("-")[0],w=u.dictionary,M=u.format,I=w&&Object.keys(w).length,S=M&&Object.keys(M).length,R=ne.localeRegistry,O=R[T];if(O||(R[T]=O={}),_!==T){var C=R[_];C||(R[_]=C={}),I&&C.dictionary===O.dictionary&&(C.dictionary=w),S&&C.format===O.format&&(C.format=M)}I&&(O.dictionary=w),S&&(O.format=M)}function l(u){if(u.layoutAttributes){var T=u.layoutAttributes._arrayAttrRegexps;if(T)for(var _=0;_<T.length;_++)b(ne.layoutArrayRegexes,T[_])}}function h(u,T){var _=ne.componentsRegistry[u].schema;if(_&&_.traces){var w=_.traces[T];w&&p(ne.modules[T]._module.attributes,w)}}function d(u,T){var _=ne.componentsRegistry[u].schema;if(_&&_.transforms){var w=_.transforms[T];w&&p(ne.transformsRegistry[T].attributes,w)}}function o(u,T){var _=ne.componentsRegistry[u].schema;if(_&&_.subplots){var w=ne.subplotsRegistry[T],M=w.layoutAttributes,I="subplot"===w.attr?w.name:w.attr;Array.isArray(I)&&(I=I[0]);var S=_.subplots[I];M&&S&&p(M,S)}}function x(u){return"object"==typeof u&&(u=u.type),u}ne.modules={},ne.allCategories={},ne.allTypes=[],ne.subplotsRegistry={},ne.transformsRegistry={},ne.componentsRegistry={},ne.layoutArrayContainers=[],ne.layoutArrayRegexes=[],ne.traceLayoutAttributes={},ne.localeRegistry={},ne.apiMethodRegistry={},ne.collectableSubplotTypes=null,ne.register=function(u){if(ne.collectableSubplotTypes=null,!u)throw new Error("No argument passed to Plotly.register.");u&&!Array.isArray(u)&&(u=[u]);for(var T=0;T<u.length;T++){var _=u[T];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":s(_);break;case"transform":f(_);break;case"component":i(_);break;case"locale":c(_);break;case"apiMethod":ne.apiMethodRegistry[_.name]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ne.getModule=function(u){var T=ne.modules[x(u)];return!!T&&T._module},ne.traceIs=function(u,T){if("various"===(u=x(u)))return!1;var _=ne.modules[u];return _||(u&&g.log("Unrecognized trace type "+u+"."),_=ne.modules[n.type.dflt]),!!_.categories[T]},ne.getTransformIndices=function(u,T){for(var _=[],w=u.transforms||[],M=0;M<w.length;M++)w[M].type===T&&_.push(M);return _},ne.hasTransform=function(u,T){for(var _=u.transforms||[],w=0;w<_.length;w++)if(_[w].type===T)return!0;return!1},ne.getComponentMethod=function(u,T){var _=ne.componentsRegistry[u];return _&&_[T]||m},ne.call=function(){var u=arguments[0],T=[].slice.call(arguments,1);return ne.apiMethodRegistry[u].apply(null,T)}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(v,re,ne){"use strict";var g=v("../registry"),m=v("../lib"),b=m.extendFlat,y=m.extendDeep;function e(r){var n;switch(r){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}re.exports=function(r,n){var a,s=r.layout,i=y([],r.data),f=y({},s,e(n.tileClass)),c=r._context||{};if(n.width&&(f.width=n.width),n.height&&(f.height=n.height),"thumbnail"===n.tileClass||"themes__thumb"===n.tileClass){f.annotations=[];var l=Object.keys(f);for(a=0;a<l.length;a++)["xaxis","yaxis","zaxis"].indexOf(l[a].slice(0,5))>-1&&(f[l[a]].title={text:""});for(a=0;a<i.length;a++){var h=i[a];h.showscale=!1,h.marker&&(h.marker.showscale=!1),g.traceIs(h,"pie-like")&&(h.textposition="none")}}if(Array.isArray(n.annotations))for(a=0;a<n.annotations.length;a++)f.annotations.push(n.annotations[a]);var d=Object.keys(f).filter(function(_){return _.match(/^scene\d*$/)});if(d.length){var o={};for("thumbnail"===n.tileClass&&(o={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),a=0;a<d.length;a++){var x=f[d[a]];x.xaxis||(x.xaxis={}),x.yaxis||(x.yaxis={}),x.zaxis||(x.zaxis={}),b(x.xaxis,o),b(x.yaxis,o),b(x.zaxis,o),x._scene=null}}var u=document.createElement("div");n.tileClass&&(u.className=n.tileClass);var T={gd:u,td:u,layout:f,data:i,config:{staticPlot:void 0===n.staticPlot||n.staticPlot,plotGlPixelRatio:void 0===n.plotGlPixelRatio?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==n.setBackground&&(T.config.setBackground=n.setBackground||"opaque"),T.gd.defaultLayout=e(n.tileClass),T}},{"../lib":515,"../registry":647}],649:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plot_api/to_image"),b=v("./filesaver"),y=v("./helpers");re.exports=function(e,r){var n;return g.isPlainObject(e)||(n=g.getGraphDiv(e)),(r=r||{}).format=r.format||"png",r.width=r.width||null,r.height=r.height||null,r.imageDataOnly=!0,new Promise(function(a,t){n&&n._snapshotInProgress&&t(new Error("Snapshotting already in progress.")),g.isIE()&&"svg"!==r.format&&t(new Error(y.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var p=m(e,r),s=r.filename||e.fn||"newplot";s+="."+r.format.replace("-","."),p.then(function(i){return n&&(n._snapshotInProgress=!1),b(i,s,r.format)}).then(function(i){a(i)}).catch(function(i){n&&(n._snapshotInProgress=!1),t(i)})})}},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("./helpers");re.exports=function(b,y,e){var r=document.createElement("a"),n="download"in r;return new Promise(function(a,t){var p,s;return g.isIE()?(p=m.createBlob(b,"svg"),window.navigator.msSaveBlob(p,y),p=null,a(y)):n?(p=m.createBlob(b,e),s=m.createObjectURL(p),r.href=s,r.download=y,document.body.appendChild(r),r.click(),document.body.removeChild(r),m.revokeObjectURL(s),p=null,a(y)):g.isSafari()?(m.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(b)),a(y)):void t(new Error("download error"))})}},{"../lib":515,"./helpers":651}],651:[function(v,re,ne){"use strict";var g=v("../registry");ne.getDelay=function(b){return b._has&&(b._has("gl3d")||b._has("gl2d")||b._has("mapbox"))?500:0},ne.getRedrawFunc=function(b){return function(){g.getComponentMethod("colorbar","draw")(b)}},ne.encodeSVG=function(b){return"data:image/svg+xml,"+encodeURIComponent(b)},ne.encodeJSON=function(b){return"data:application/json,"+encodeURIComponent(b)};var m=window.URL||window.webkitURL;ne.createObjectURL=function(b){return m.createObjectURL(b)},ne.revokeObjectURL=function(b){return m.revokeObjectURL(b)},ne.createBlob=function(b,y){if("svg"===y)return new window.Blob([b],{type:"image/svg+xml;charset=utf-8"});if("full-json"===y)return new window.Blob([b],{type:"application/json;charset=utf-8"});var e=function(r){for(var n=r.length,a=new ArrayBuffer(n),t=new Uint8Array(a),p=0;p<n;p++)t[p]=r.charCodeAt(p);return a}(window.atob(b));return new window.Blob([e],{type:"image/"+y})},ne.octetStream=function(b){document.location.href="data:application/octet-stream"+b},ne.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ne.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(v,re,ne){"use strict";var g=v("./helpers"),m={getDelay:g.getDelay,getRedrawFunc:g.getRedrawFunc,clone:v("./cloneplot"),toSVG:v("./tosvg"),svgToImg:v("./svgtoimg"),toImage:v("./toimage"),downloadImage:v("./download")};re.exports=m},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("events").EventEmitter,b=v("./helpers");re.exports=function(y){var e=y.emitter||new m,r=new Promise(function(n,a){var t=window.Image,p=y.svg,s=y.format||"png";if(g.isIE()&&"svg"!==s){var i=new Error(b.MSG_IE_BAD_FORMAT);return a(i),y.promise?r:e.emit("error",i)}var f,c,l=y.canvas,h=y.scale||1,x=h*(y.width||300),u=h*(y.height||150),T=l.getContext("2d",{willReadFrequently:!0}),_=new t;"svg"===s||g.isSafari()?c=b.encodeSVG(p):(f=b.createBlob(p,"svg"),c=b.createObjectURL(f)),l.width=x,l.height=u,_.onload=function(){var w;switch(f=null,b.revokeObjectURL(c),"svg"!==s&&T.drawImage(_,0,0,x,u),s){case"jpeg":w=l.toDataURL("image/jpeg");break;case"png":w=l.toDataURL("image/png");break;case"webp":w=l.toDataURL("image/webp");break;case"svg":w=c;break;default:var M="Image format is not jpeg, png, svg or webp.";if(a(new Error(M)),!y.promise)return e.emit("error",M)}n(w),y.promise||e.emit("success",w)},_.onerror=function(w){if(f=null,b.revokeObjectURL(c),a(w),!y.promise)return e.emit("error",w)},_.src=c});return y.promise?r:e}},{"../lib":515,"./helpers":651,events:84}],654:[function(v,re,ne){"use strict";var g=v("events").EventEmitter,m=v("../registry"),b=v("../lib"),y=v("./helpers"),e=v("./cloneplot"),r=v("./tosvg"),n=v("./svgtoimg");re.exports=function(a,t){var p=new g,s=e(a,{format:"png"}),i=s.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var f=y.getRedrawFunc(i);return m.call("_doPlot",i,s.data,s.layout,s.config).then(f).then(function(){var c=y.getDelay(i._fullLayout);setTimeout(function(){var l=r(i),h=document.createElement("canvas");h.id=b.randstr(),(p=n({format:t.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:h,emitter:p,svg:l})).clean=function(){i&&document.body.removeChild(i)}},c)}).catch(function(c){p.emit("error",c)}),p}},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../lib"),b=v("../components/drawing"),y=v("../components/color"),e=v("../constants/xmlns_namespaces"),r=/"/g,n=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");re.exports=function(a,t,p){var s,i=a._fullLayout,f=i._paper,c=i._toppaper,l=i.width,h=i.height;f.insert("rect",":first-child").call(b.setRect,0,0,l,h).call(y.fill,i.paper_bgcolor);var d=i._basePlotModules||[];for(s=0;s<d.length;s++){var o=d[s];o.toSVG&&o.toSVG(a)}if(c){var x=c.node().childNodes,u=Array.prototype.slice.call(x);for(s=0;s<u.length;s++){var T=u[s];T.childNodes.length&&f.node().appendChild(T)}}i._draggers&&i._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var w=g.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){w.style({visibility:null,display:null});var M=this.style.fontFamily;M&&-1!==M.indexOf('"')&&w.style("font-family",M.replace(r,"TOBESTRIPPED"))}else w.remove()}),f.selectAll(".gradient_filled,.pattern_filled").each(function(){var w=g.select(this),M=this.style.fill;M&&-1!==M.indexOf("url(")&&w.style("fill",M.replace(r,"TOBESTRIPPED"));var I=this.style.stroke;I&&-1!==I.indexOf("url(")&&w.style("stroke",I.replace(r,"TOBESTRIPPED"))}),"pdf"!==t&&"eps"!==t||f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(e.xmlns,"xmlns",e.svg),f.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===t&&p&&(f.attr("width",p*l),f.attr("height",p*h),f.attr("viewBox","0 0 "+l+" "+h));var w,M,I,_=(new window.XMLSerializer).serializeToString(f.node());return w=_,M=g.select("body").append("div").style({display:"none"}).html(""),I=w.replace(/(&[^;]*;)/gi,function(S){return"&lt;"===S?"&#60;":"&rt;"===S?"&#62;":-1!==S.indexOf("<")||-1!==S.indexOf(">")?"":M.html(S).text()}),M.remove(),_=(_=(_=I).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(n,"'"),m.isIE()&&(_=(_=(_=_.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),_}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){for(var y=0;y<m.length;y++)m[y].i=y;g.mergeArray(b.text,m,"tx"),g.mergeArray(b.hovertext,m,"htx");var e=b.marker;if(e){g.mergeArray(e.opacity,m,"mo",!0),g.mergeArray(e.color,m,"mc");var r=e.line;r&&(g.mergeArray(r.color,m,"mlc"),g.mergeArrayCastPositive(r.width,m,"mlw"))}}},{"../../lib":515}],657:[function(v,re,ne){"use strict";var g=v("../scatter/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),r=v("../../plots/font_attributes"),n=v("./constants"),a=v("../../components/drawing/attributes").pattern,t=v("../../lib/extend").extendFlat,p=r({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=t({},g.marker.line.width,{dflt:0}),i=t({width:s,editType:"calc"},e("marker.line")),f=t({line:i,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:a});re.exports={x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:g.text,texttemplate:y({editType:"plot"},{keys:n.eventDataKeys}),hovertext:g.hovertext,hovertemplate:b({},{keys:n.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},p,{}),insidetextfont:t({},p,{}),outsidetextfont:t({},p,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},g.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:f,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:g.selected.marker.opacity,color:g.selected.marker.color,editType:"style"},textfont:g.selected.textfont,editType:"style"},unselected:{marker:{opacity:g.unselected.marker.opacity,color:g.unselected.marker.color,editType:"style"},textfont:g.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../plots/cartesian/align_period"),b=v("../../components/colorscale/helpers").hasColorscale,y=v("../../components/colorscale/calc"),e=v("./arrays_to_calcdata"),r=v("../scatter/calc_selection");re.exports=function(n,a){var t,p,s,i,f,c,l=g.getFromId(n,a.xaxis||"x"),h=g.getFromId(n,a.yaxis||"y"),d={msUTC:!(!a.base&&0!==a.base)};"h"===a.orientation?(t=l.makeCalcdata(a,"x",d),s=h.makeCalcdata(a,"y"),i=m(a,h,"y",s),f=!!a.yperiodalignment,c="y"):(t=h.makeCalcdata(a,"y",d),s=l.makeCalcdata(a,"x"),i=m(a,l,"x",s),f=!!a.xperiodalignment,c="x"),p=i.vals;for(var o=Math.min(p.length,t.length),x=new Array(o),u=0;u<o;u++)x[u]={p:p[u],s:t[u]},f&&(x[u].orig_p=s[u],x[u][c+"End"]=i.ends[u],x[u][c+"Start"]=i.starts[u]),a.ids&&(x[u].id=String(a.ids[u]));return b(a,"marker")&&y(n,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),b(a,"marker.line")&&y(n,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(x,a),r(x,a),x}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(v,re,ne){"use strict";re.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib").isArrayOrTypedArray,b=v("../../constants/numerical").BADNUM,y=v("../../registry"),e=v("../../plots/cartesian/axes"),r=v("../../plots/cartesian/constraints").getAxisGroup,n=v("./sieve.js");function a(o,x,u,T,_){if(T.length){var w,M,I,S;switch(function(R,O){var C,D;for(C=0;C<O.length;C++){var B,z=O[C],Y=z[0].trace,G="funnel"===Y.type?Y._base:Y.base,J="h"===Y.orientation?Y.xcalendar:Y.ycalendar,te="category"===R.type||"multicategory"===R.type?function(){return null}:R.d2c;if(m(G)){for(D=0;D<Math.min(G.length,z.length);D++)B=te(G[D],0,J),g(B)?(z[D].b=+B,z[D].hasB=1):z[D].b=0;for(;D<z.length;D++)z[D].b=0}else{B=te(G,0,J);var X=g(B);for(B=X?B:0,D=0;D<z.length;D++)z[D].b=B,X&&(z[D].hasB=1)}}}(u,T),_.mode){case"overlay":t(x,u,T,_);break;case"group":for(w=[],M=[],I=0;I<T.length;I++)void 0===(S=T[I])[0].trace.offset?M.push(S):w.push(S);M.length&&(R=o,C=u,z=new n(M,{posAxis:O=x,sepNegVal:!1,overlapNoMerge:!(B=_).norm}),function(Y,G,J,te){for(var X=Y._fullLayout,U=J.minDiff,V=J.traces,q=V.length,ie=J.positions.length!==J.distinctPositions.length,H=U*(1-te.gap),ee=r(X,G._id)+V[0][0].trace.orientation,Q=X._alignmentOpts[ee]||{},oe=0;oe<q;oe++){var le,de,fe=V[oe],be=fe[0].trace,_e=Object.keys((Q[be.alignmentgroup]||{}).offsetGroups||{}).length,Ce=(le=_e?H/_e:ie?H/q:H)*(1-(te.groupgap||0));de=_e?((2*be._offsetIndex+1-_e)*le-Ce)/2:ie?((2*oe+1-q)*le-Ce)/2:-Ce/2;var Ee=fe[0].t;Ee.barwidth=Ce,Ee.poffset=de,Ee.bargroupwidth=H,Ee.bardelta=U}J.binWidth=V[0][0].t.barwidth/100,s(J),i(G,J),f(G,J,ie)}(R,O,z,B),function(Y,G){for(var J=Y.traces,te=0;te<J.length;te++){var X=J[te];if(void 0===X[0].trace.base)for(var K=new n([X],{posAxis:G,sepNegVal:!0,overlapNoMerge:!0}),ae=0;ae<X.length;ae++){var U=X[ae];if(U.p!==b){var V=K.put(U.p,U.b+U.s);V&&(U.b=V)}}}}(z,O),B.norm?(l(z),h(C,z,B)):c(C,z)),w.length&&t(x,u,w,_);break;case"stack":case"relative":for(w=[],M=[],I=0;I<T.length;I++)void 0===(S=T[I])[0].trace.base?M.push(S):w.push(S);M.length&&function(R,O,C,D,B){var z=new n(D,{posAxis:O,sepNegVal:"relative"===B.mode,overlapNoMerge:!(B.norm||"stack"===B.mode||"relative"===B.mode)});p(O,z,B),function(X,K,ae){var U,V,q,ie,H,ee,Q=d(X),oe=K.traces;for(ie=0;ie<oe.length;ie++)if("funnel"===(V=(U=oe[ie])[0].trace).type)for(H=0;H<U.length;H++)(ee=U[H]).s!==b&&K.put(ee.p,-.5*ee.s);for(ie=0;ie<oe.length;ie++){q="funnel"===(V=(U=oe[ie])[0].trace).type;var le=[];for(H=0;H<U.length;H++)if((ee=U[H]).s!==b){var de,fe=K.put(ee.p,de=q?ee.s:ee.s+ee.b),be=fe+de;ee.b=fe,ee[Q]=be,ae.norm||(le.push(be),ee.hasB&&le.push(fe))}ae.norm||(V._extremes[X._id]=e.findExtremes(X,le,{tozero:!0,padded:!0}))}}(C,z,B);for(var Y=0;Y<D.length;Y++)for(var G=D[Y],J=0;J<G.length;J++){var te=G[J];te.s!==b&&te.b+te.s===z.get(te.p,te.s)&&(te._outmost=!0)}B.norm&&h(C,z,B)}(0,x,u,M,_),w.length&&t(x,u,w,_)}!function(R,O){var C,D,B,z=d(O),Y={},G=1/0,J=-1/0;for(C=0;C<R.length;C++)for(B=R[C],D=0;D<B.length;D++){var te=B[D].p;g(te)&&(G=Math.min(G,te),J=Math.max(J,te))}var X=1e4/(J-G),K=Y.round=function(ee){return String(Math.round(X*(ee-G)))};for(C=0;C<R.length;C++){(B=R[C])[0].t.extents=Y;var ae=B[0].t.poffset,U=Array.isArray(ae);for(D=0;D<B.length;D++){var V=B[D],q=V[z]-V.w/2;if(g(q)){var ie=V[z]+V.w/2,H=K(V.p);Y[H]=Y[H]?[Math.min(q,Y[H][0]),Math.max(ie,Y[H][1])]:[q,ie]}V.p0=V.p+(U?ae[D]:ae),V.p1=V.p0+V.w,V.s0=V.b,V.s1=V.s0+V.s}}}(T,x)}var R,O,C,B,z}function t(o,x,u,T){for(var _=0;_<u.length;_++){var M=new n([u[_]],{posAxis:o,sepNegVal:!1,overlapNoMerge:!T.norm});p(o,M,T),T.norm?(l(M),h(x,M,T)):c(x,M)}}function p(o,x,u){for(var T=x.minDiff,_=x.traces,w=T*(1-u.gap),M=w*(1-(u.groupgap||0)),I=-M/2,S=0;S<_.length;S++){var R=_[S][0].t;R.barwidth=M,R.poffset=I,R.bargroupwidth=w,R.bardelta=T}x.binWidth=_[0][0].t.barwidth/100,s(x),i(o,x),f(o,x)}function s(o){var x,u,T=o.traces;for(x=0;x<T.length;x++){var _,w=T[x],M=w[0],I=M.trace,S=M.t,R=I._offset||I.offset,O=S.poffset;if(m(R)){for(_=Array.prototype.slice.call(R,0,w.length),u=0;u<_.length;u++)g(_[u])||(_[u]=O);for(u=_.length;u<w.length;u++)_.push(O);S.poffset=_}else void 0!==R&&(S.poffset=R);var C=I._width||I.width,D=S.barwidth;if(m(C)){var B=Array.prototype.slice.call(C,0,w.length);for(u=0;u<B.length;u++)g(B[u])||(B[u]=D);for(u=B.length;u<w.length;u++)B.push(D);if(S.barwidth=B,void 0===R){for(_=[],u=0;u<w.length;u++)_.push(O+(D-B[u])/2);S.poffset=_}}else void 0!==C&&(S.barwidth=C,void 0===R&&(S.poffset=O+(D-C)/2))}}function i(o,x){for(var u=x.traces,T=d(o),_=0;_<u.length;_++)for(var w=u[_],M=w[0].t,I=M.poffset,S=Array.isArray(I),R=M.barwidth,O=Array.isArray(R),C=0;C<w.length;C++){var D=w[C],B=D.w=O?R[C]:R;D[T]=D.p+(S?I[C]:I)+B/2}}function f(o,x,u){var T=x.traces,_=x.minDiff/2;e.minDtick(o,x.minDiff,x.distinctPositions[0],u);for(var w=0;w<T.length;w++){var M,I,S,R,O=T[w],C=O[0],D=C.trace,B=[];for(R=0;R<O.length;R++)I=(M=O[R]).p-_,B.push(I,S=M.p+_);if(D.width||D.offset){var z=C.t,Y=z.poffset,G=z.barwidth,J=Array.isArray(Y),te=Array.isArray(G);for(R=0;R<O.length;R++)S=(I=(M=O[R]).p+(J?Y[R]:Y))+(te?G[R]:G),B.push(I,S)}D._extremes[o._id]=e.findExtremes(o,B,{padded:!1})}}function c(o,x){for(var u=x.traces,T=d(o),_=0;_<u.length;_++){for(var w=u[_],M=w[0].trace,I=[],S=!1,R=0;R<w.length;R++){var O=w[R],C=O.b,D=C+O.s;O[T]=D,I.push(D),O.hasB&&I.push(C),O.hasB&&O.b||(S=!0)}M._extremes[o._id]=e.findExtremes(o,I,{tozero:S,padded:!0})}}function l(o){for(var x=o.traces,u=0;u<x.length;u++)for(var T=x[u],_=0;_<T.length;_++){var w=T[_];w.s!==b&&o.put(w.p,w.b+w.s)}}function h(o,x,u){var T=x.traces,_=d(o),w="fraction"===u.norm?1:100,M=w/1e9,I=o.l2c(o.c2l(0)),S="stack"===u.mode?w:I;function R(ae){return g(o.c2l(ae))&&(ae<I-M||ae>S+M||!g(I))}for(var O=0;O<T.length;O++){for(var C=T[O],D=C[0].trace,B=[],z=!1,Y=!1,G=0;G<C.length;G++){var J=C[G];if(J.s!==b){var te=Math.abs(w/x.get(J.p,J.s));J.b*=te,J.s*=te;var X=J.b,K=X+J.s;J[_]=K,B.push(K),Y=Y||R(K),J.hasB&&(B.push(X),Y=Y||R(X)),J.hasB&&J.b||(z=!0)}}D._extremes[o._id]=e.findExtremes(o,B,{tozero:z,padded:Y})}}function d(o){return o._id.charAt(0)}re.exports={crossTraceCalc:function(o,x){for(var u=x.xaxis,T=x.yaxis,_=o._fullLayout,w=o._fullData,M=o.calcdata,I=[],S=[],R=0;R<w.length;R++){var O=w[R];if(!0===O.visible&&y.traceIs(O,"bar")&&O.xaxis===u._id&&O.yaxis===T._id&&("h"===O.orientation?I.push(M[R]):S.push(M[R]),O._computePh))for(var C=o.calcdata[R],D=0;D<C.length;D++)"function"==typeof C[D].ph0&&(C[D].ph0=C[D].ph0()),"function"==typeof C[D].ph1&&(C[D].ph1=C[D].ph1())}var B={xCat:"category"===u.type||"multicategory"===u.type,yCat:"category"===T.type||"multicategory"===T.type,mode:_.barmode,norm:_.barnorm,gap:_.bargap,groupgap:_.bargroupgap};a(o,u,T,S,B),a(o,T,u,I,B)},setGroupPositions:a}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color"),b=v("../../registry"),y=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),r=v("./style_defaults"),n=v("../../plots/cartesian/constraints").getAxisGroup,a=v("./attributes"),t=g.coerceFont;function p(i,f,c,l){var h=f.orientation,o=n(c,f[{v:"x",h:"y"}[h]+"axis"])+h,x=c._alignmentOpts||{},u=l("alignmentgroup"),T=x[o];T||(T=x[o]={});var _=T[u];_?_.traces.push(f):_=T[u]={traces:[f],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var w=l("offsetgroup"),M=_.offsetGroups,I=M[w];w&&(I||(I=M[w]={offsetIndex:Object.keys(M).length}),f._offsetIndex=I.offsetIndex)}function s(i,f,c,l,h,d){var o=!1!==(d=d||{}).moduleHasSelected,x=!1!==d.moduleHasUnselected,u=!1!==d.moduleHasConstrain,T=!1!==d.moduleHasCliponaxis,_=!1!==d.moduleHasTextangle,w=!1!==d.moduleHasInsideanchor,M=!!d.hasPathbar,I=Array.isArray(h)||"auto"===h,S=I||"inside"===h,R=I||"outside"===h;if(S||R){var O=t(l,"textfont",c.font),C=g.extendFlat({},O),D=!(i.textfont&&i.textfont.color);if(D&&delete C.color,t(l,"insidetextfont",C),M){var B=g.extendFlat({},O);D&&delete B.color,t(l,"pathbar.textfont",B)}R&&t(l,"outsidetextfont",O),o&&l("selected.textfont.color"),x&&l("unselected.textfont.color"),u&&l("constraintext"),T&&l("cliponaxis"),_&&l("textangle"),l("texttemplate")}S&&w&&l("insidetextanchor")}re.exports={supplyDefaults:function(i,f,c,l){function h(u,T){return g.coerce(i,f,a,u,T)}if(y(i,f,l,h)){e(i,f,l,h),h("xhoverformat"),h("yhoverformat"),h("orientation",f.x&&!f.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var d=h("textposition");s(i,0,l,h,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),r(i,f,h,c,l);var o=(f.marker.line||{}).color,x=b.getComponentMethod("errorbars","supplyDefaults");x(i,f,o||m.defaultLine,{axis:"y"}),x(i,f,o||m.defaultLine,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(f,h)}else f.visible=!1},crossTraceDefaults:function(i,f){var c;function l(d){return g.coerce(c._input,c,a,d)}if("group"===f.barmode)for(var h=0;h<i.length;h++)"bar"===(c=i[h]).type&&p(0,c,f,l)},handleGroupingDefaults:p,handleText:s}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(v,re,ne){"use strict";re.exports=function(g,m,b){return g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),"h"===b.orientation?(g.label=g.y,g.value=g.x):(g.label=g.x,g.value=g.y),g}},{}],663:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("tinycolor2"),b=v("../../lib").isArrayOrTypedArray;ne.coerceString=function(y,e,r){if("string"==typeof e){if(e||!y.noBlank)return e}else if(("number"==typeof e||!0===e)&&!y.strict)return String(e);return void 0!==r?r:y.dflt},ne.coerceNumber=function(y,e,r){if(g(e)){e=+e;var n=y.min,a=y.max;if(!(void 0!==n&&e<n||void 0!==a&&e>a))return e}return void 0!==r?r:y.dflt},ne.coerceColor=function(y,e,r){return m(e).isValid()?e:void 0!==r?r:y.dflt},ne.coerceEnumerated=function(y,e,r){return y.coerceNumber&&(e=+e),-1!==y.values.indexOf(e)?e:void 0!==r?r:y.dflt},ne.getValue=function(y,e){var r;return Array.isArray(y)?e<y.length&&(r=y[e]):r=y,r},ne.getLineWidth=function(y,e){return 0<e.mlw?e.mlw:b(y.marker.line.width)?0:y.marker.line.width}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(v,re,ne){"use strict";var g=v("../../components/fx"),m=v("../../registry"),b=v("../../components/color"),y=v("../../lib").fillText,e=v("./helpers").getLineWidth,r=v("../../plots/cartesian/axes").hoverLabelText,n=v("../../constants/numerical").BADNUM;function a(p,s,i,f,c){var l,h,d,o,x,u,T,_=p.cd,w=_[0].trace,M=_[0].t,I="closest"===f,S="waterfall"===w.type,R=p.maxHoverDistance,O=p.maxSpikeDistance;"h"===w.orientation?(l=i,h=s,d="y",o="x",x=U,u=K):(l=s,h=i,d="x",o="y",u=U,x=K);var C=w[d+"period"],D=I||C;function B(le){return Y(le,-1)}function z(le){return Y(le,1)}function Y(le,de){return le[d]+de*le.w/2}function G(le){return le[d+"End"]-le[d+"Start"]}var J=I?B:C?function(le){return le.p-G(le)/2}:function(le){return Math.min(B(le),le.p-M.bardelta/2)},te=I?z:C?function(le){return le.p+G(le)/2}:function(le){return Math.max(z(le),le.p+M.bardelta/2)};function X(le,de,fe){return c.finiteRange&&(fe=0),g.inbox(le-l,de-l,fe+Math.min(1,Math.abs(de-le)/T)-1)}function K(le){return X(J(le),te(le),R)}function ae(le){var de=le[o];if(S){var fe=Math.abs(le.rawS)||0;h>0?de+=fe:h<0&&(de-=fe)}return de}function U(le){var de=h,fe=le.b,be=ae(le);return g.inbox(fe-de,be-de,R+(be-de)/(be-fe)-1)}var V=p[d+"a"],q=p[o+"a"];T=Math.abs(V.r2c(V.range[1])-V.r2c(V.range[0]));var le,de,fe,be,ie=g.getDistanceFunction(f,x,u,function(le){return(x(le)+u(le))/2});if(g.getClosest(_,ie,p),!1!==p.index&&_[p.index].p!==n){D||(J=function(le){return Math.min(B(le),le.p-M.bargroupwidth/2)},te=function(le){return Math.max(z(le),le.p+M.bargroupwidth/2)});var H=_[p.index],ee=w.base?H.b+H.s:H.s;p[o+"0"]=p[o+"1"]=q.c2p(H[o],!0),p[o+"LabelVal"]=ee;var Q=M.extents[M.extents.round(H.p)];return p[d+"0"]=V.c2p(I?J(H):Q[0],!0),p[d+"1"]=V.c2p(I?te(H):Q[1],!0),p[d+"LabelVal"]=void 0!==H.orig_p?H.orig_p:H.p,p.labelLabel=r(V,p[d+"LabelVal"],w[d+"hoverformat"]),p.valueLabel=r(q,p[o+"LabelVal"],w[o+"hoverformat"]),p.baseLabel=r(q,H.b,w[o+"hoverformat"]),p.spikeDistance=(de=h,fe=(le=H).b,be=ae(le),(g.inbox(fe-de,be-de,O+(be-de)/(be-fe)-1)+function(le){return X(B(le),z(le),O)}(H))/2),p[d+"Spike"]=V.c2p(H.p,!0),y(H,w,p),p.hovertemplate=w.hovertemplate,p}}function t(p,s){var i=s.mcc||p.marker.color,f=s.mlcc||p.marker.line.color,c=e(p,s);return b.opacity(i)?i:b.opacity(f)&&c?f:void 0}re.exports={hoverPoints:function(p,s,i,f,c){var l=a(p,s,i,f,c);if(l){var h=l.cd,d=h[0].trace,o=h[l.index];return l.color=t(d,o),m.getComponentMethod("errorbars","hoverInfo")(o,d,l),[l]}},hoverOnBars:a,getTraceColor:t}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,colorbar:v("../scatter/marker_colorbar"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"bar",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(v,re,ne){"use strict";re.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../plots/cartesian/axes"),b=v("../../lib"),y=v("./layout_attributes");re.exports=function(e,r,n){function a(d,o){return b.coerce(e,r,y,d,o)}for(var t=!1,p=!1,s=!1,i={},f=a("barmode"),c=0;c<n.length;c++){var l=n[c];if(g.traceIs(l,"bar")&&l.visible){if(t=!0,"group"===f){var h=l.xaxis+l.yaxis;i[h]&&(s=!0),i[h]=!0}l.visible&&"histogram"===l.type&&"category"!==m.getFromId({_fullLayout:r},l["v"===l.orientation?"xaxis":"yaxis"]).type&&(p=!0)}}t?("overlay"!==f&&a("barnorm"),a("bargap",p&&!s?0:.2),a("bargroupgap")):delete r.barmode}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("../../lib"),y=v("../../lib/svg_text_utils"),e=v("../../components/color"),r=v("../../components/drawing"),n=v("../../registry"),a=v("../../plots/cartesian/axes").tickText,t=v("./uniform_text"),p=t.recordMinTextSize,s=t.clearMinTextSize,i=v("./style"),f=v("./helpers"),c=v("./constants"),l=v("./attributes"),h=l.text,d=l.textposition,o=v("../../components/fx/helpers").appendArrayPointValue,x=c.TEXTPAD;function u(O){return O.id}function _(O,C){return O<C?1:-1}function w(O,C,D,B){var z;return!C.uniformtext.mode&&M(D)?(B&&(z=B()),O.transition().duration(D.duration).ease(D.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()})):O}function M(O){return O&&O.duration>0}function I(O){return"auto"===O?0:O}function S(O,C){var D=Math.PI/180*C,B=Math.abs(Math.sin(D)),z=Math.abs(Math.cos(D));return{x:O.width*z+O.height*B,y:O.width*B+O.height*z}}function R(O,C,D,B,z,Y){var G=!!Y.isHorizontal,J=!!Y.constrained,te=Y.angle||0,X=Y.anchor||"end",K="end"===X,ae="start"===X,U=((Y.leftToRight||0)+1)/2,V=1-U,q=z.width,ie=z.height,H=Math.abs(C-O),ee=Math.abs(B-D),Q=H>2*x&&ee>2*x?x:0;H-=2*Q,ee-=2*Q;var oe=I(te);"auto"!==te||q<=H&&ie<=ee||!(q>H||ie>ee)||(q>ee||ie>H)&&q<ie==H<ee||(oe+=90);var le=S(z,oe),de=1;J&&(de=Math.min(1,H/le.x,ee/le.y));var fe=z.left*V+z.right*U,be=(z.top+z.bottom)/2,he=(O+x)*V+(C-x)*U,_e=(D+B)/2,Ce=0,Ee=0;if(ae||K){var Ae=(G?le.x:le.y)/2,ze=G?_(O,C):_(D,B);G?ae?(he=O+ze*Q,Ce=-ze*Ae):(he=C-ze*Q,Ce=ze*Ae):ae?(_e=D+ze*Q,Ee=-ze*Ae):(_e=B-ze*Q,Ee=ze*Ae)}return{textX:fe,textY:be,targetX:he,targetY:_e,anchorX:Ce,anchorY:Ee,scale:de,rotate:oe}}re.exports={plot:function(O,C,D,B,z,Y){var G=C.xaxis,J=C.yaxis,te=O._fullLayout;z||(z={mode:te.barmode,norm:te.barmode,gap:te.bargap,groupgap:te.bargroupgap},s("bar",te));var X=b.makeTraceGroups(B,D,"trace bars").each(function(K){var ae=g.select(this),U=K[0].trace,ie="bar"===U.type||"funnel"===U.type,H=0;"waterfall"===U.type&&U.connector.visible&&"between"===U.connector.mode&&(H=U.connector.line.width/2);var ee="h"===U.orientation,Q=M(z),oe=b.ensureSingle(ae,"g","points"),le=function T(O){if(O.ids)return u}(U),de=oe.selectAll("g.point").data(b.identity,le);de.enter().append("g").classed("point",!0),de.exit().remove(),de.each(function(be,he){var _e,Ce,Ne,Be,We,Ye,lt,mt,Tt,It,Ee=g.select(this),Ae=(Be=G,We=J,mt=[],It=(Ye=ee)?We:Be,(lt=[])[0]=(Tt=Ye?Be:We).c2p((Ne=be).s0,!0),mt[0]=It.c2p(Ne.p0,!0),lt[1]=Tt.c2p(Ne.s1,!0),mt[1]=It.c2p(Ne.p1,!0),Ye?[lt,mt]:[mt,lt]),ze=Ae[0][0],ve=Ae[0][1],Te=Ae[1][0],Ie=Ae[1][1],De=0==(ee?ve-ze:Ie-Te);if(De&&ie&&f.getLineWidth(U,be)&&(De=!1),De||(De=!(m(ze)&&m(ve)&&m(Te)&&m(Ie))),be.isBlank=De,De&&(ee?ve=ze:Ie=Te),H&&!De&&(ee?(ze-=_(ze,ve)*H,ve+=_(ze,ve)*H):(Te-=_(Te,Ie)*H,Ie+=_(Te,Ie)*H)),"waterfall"===U.type){if(!De){var Fe=U[be.dir].marker;_e=Fe.line.width,Ce=Fe.color}}else _e=f.getLineWidth(U,be),Ce=be.mc||U.marker.color;function Ue(Ne){var Be=g.round(_e/2%1,2);return 0===z.gap&&0===z.groupgap?g.round(Math.round(Ne)-Be,2):Ne}if(!O._context.staticPlot){var qe=e.opacity(Ce)<1||_e>.01?Ue:function(Ne,Be,We){return We&&Ne===Be?Ne:Math.abs(Ne-Be)>=2?Ue(Ne):Ne>Be?Math.ceil(Ne):Math.floor(Ne)};ze=qe(ze,ve,ee),ve=qe(ve,ze,ee),Te=qe(Te,Ie,!ee),Ie=qe(Ie,Te,!ee)}var je=w(b.ensureSingle(Ee,"path"),te,z,Y);if(je.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ve-ze)*(Ie-Te))||De&&O._context.staticPlot?"M0,0Z":"M"+ze+","+Te+"V"+Ie+"H"+ve+"V"+Te+"Z").call(r.setClipUrl,C.layerClipId,O),!te.uniformtext.mode&&Q){var rt=r.makePointStyleFns(U);r.singlePointStyle(be,je,U,rt,O)}(function(Ne,Be,We,Ye,lt,mt,Tt,It,Ct,ct,at){var St,Xt=Be.xaxis,tn=Be.yaxis,hn=Ne._fullLayout;function cn(nn,Kt,Mn){return b.ensureSingle(nn,"text").text(Kt).attr({class:"bartext bartext-"+St,"text-anchor":"middle","data-notex":1}).call(r.font,Mn).call(y.convertToTspans,Ne)}var Kt,Mn,Un,Tn,un,an,yn=Ye[0].trace,en="h"===yn.orientation,Xe=(Mn=lt,Un=Xt,Tn=tn,un=(an=(Kt=Ye)[0].trace).texttemplate?function(fn,pn,Sn,Nn,Kn){var Bn=pn[0].trace,cr=b.castOption(Bn,Sn,"texttemplate");if(!cr)return"";var Lr,Qn,qr,sr,hr="histogram"===Bn.type,jr="waterfall"===Bn.type,di="funnel"===Bn.type,Jn="h"===Bn.orientation;function Ar(Ii){return a(sr,sr.c2l(Ii),!0).text}Jn?(Lr="y",Qn=Kn,qr="x",sr=Nn):(Lr="x",Qn=Nn,qr="y",sr=Kn);var mr=pn[Sn],lr={};lr.label=mr.p,lr.labelLabel=lr[Lr+"Label"]=a(Qn,Qn.c2l(mr.p),!0).text;var si=b.castOption(Bn,mr.i,"text");(0===si||si)&&(lr.text=si),lr.value=mr.s,lr.valueLabel=lr[qr+"Label"]=Ar(mr.s);var Tr={};o(Tr,Bn,mr.i),(hr||void 0===Tr.x)&&(Tr.x=Jn?lr.value:lr.label),(hr||void 0===Tr.y)&&(Tr.y=Jn?lr.label:lr.value),(hr||void 0===Tr.xLabel)&&(Tr.xLabel=Jn?lr.valueLabel:lr.labelLabel),(hr||void 0===Tr.yLabel)&&(Tr.yLabel=Jn?lr.labelLabel:lr.valueLabel),jr&&(lr.delta=+mr.rawS||mr.s,lr.deltaLabel=Ar(lr.delta),lr.final=mr.v,lr.finalLabel=Ar(lr.final),lr.initial=lr.final-lr.delta,lr.initialLabel=Ar(lr.initial)),di&&(lr.value=mr.s,lr.valueLabel=Ar(lr.value),lr.percentInitial=mr.begR,lr.percentInitialLabel=b.formatPercent(mr.begR),lr.percentPrevious=mr.difR,lr.percentPreviousLabel=b.formatPercent(mr.difR),lr.percentTotal=mr.sumR,lr.percenTotalLabel=b.formatPercent(mr.sumR));var Zr=b.castOption(Bn,mr.i,"customdata");return Zr&&(lr.customdata=Zr),b.texttemplateString(cr,lr,fn._d3locale,Tr,lr,Bn._meta||{})}(hn,Kt,Mn,Un,Tn):an.textinfo?function(fn,pn,Sn,Nn){var Kn=fn[0].trace,Bn="h"===Kn.orientation,cr="waterfall"===Kn.type,Lr="funnel"===Kn.type;function Qn(Zr){return a(Bn?Sn:Nn,+Zr,!0).text}var qr,hr=fn[pn],jr=Kn.textinfo.split("+"),di=[],Jn=function(Zr){return-1!==jr.indexOf(Zr)};if(Jn("label")&&di.push(a(Bn?Nn:Sn,fn[pn].p,!0).text),Jn("text")&&(0===(qr=b.castOption(Kn,hr.i,"text"))||qr)&&di.push(qr),cr){var mr=+hr.rawS||hr.s,lr=hr.v,ri=lr-mr;Jn("initial")&&di.push(Qn(ri)),Jn("delta")&&di.push(Qn(mr)),Jn("final")&&di.push(Qn(lr))}if(Lr){Jn("value")&&di.push(Qn(hr.s));var si=0;Jn("percent initial")&&si++,Jn("percent previous")&&si++,Jn("percent total")&&si++;var Tr=si>1;Jn("percent initial")&&(qr=b.formatPercent(hr.begR),Tr&&(qr+=" of initial"),di.push(qr)),Jn("percent previous")&&(qr=b.formatPercent(hr.difR),Tr&&(qr+=" of previous"),di.push(qr)),Jn("percent total")&&(qr=b.formatPercent(hr.sumR),Tr&&(qr+=" of total"),di.push(qr))}return di.join("<br>")}(Kt,Mn,Un,Tn):f.getValue(an.text,Mn),f.coerceString(h,un));St=function(nn,Kt){var Mn=f.getValue(nn.textposition,Kt);return f.coerceEnumerated(d,Mn)}(yn,lt);var ye=Ye[lt],ke=!("stack"===ct.mode||"relative"===ct.mode)||ye._outmost;if(Xe&&"none"!==St&&(!ye.isBlank&&mt!==Tt&&It!==Ct||"auto"!==St&&"inside"!==St)){var Ve=hn.font,Je=i.getBarColor(Ye[lt],yn),nt=i.getInsideTextFont(yn,lt,Ve,Je),Ke=i.getOutsideTextFont(yn,lt,Ve),vt=We.datum();en?"log"===Xt.type&&vt.s0<=0&&(mt=Xt.range[0]<Xt.range[1]?0:Xt._length):"log"===tn.type&&vt.s0<=0&&(It=tn.range[0]<tn.range[1]?tn._length:0);var gt,Ot,Vt,ft,bt,Wt=Math.abs(Tt-mt)-2*x,Pt=Math.abs(Ct-It)-2*x;if("outside"===St&&(ke||ye.hasB||(St="inside")),"auto"===St&&(ke?(St="inside",gt=cn(We,Xe,bt=b.ensureUniformFontSize(Ne,nt)),ft=(Ot=r.bBox(gt.node())).height,(Vt=Ot.width)>0&&ft>0&&(Vt<=Wt&&ft<=Pt||Vt<=Pt&&ft<=Wt||(en?Wt>=Vt*(Pt/ft):Pt>=ft*(Wt/Vt)))?St="inside":(St="outside",gt.remove(),gt=null)):St="inside"),!gt){var dt=(gt=cn(We,Xe,bt=b.ensureUniformFontSize(Ne,"outside"===St?Ke:nt))).attr("transform");if(gt.attr("transform",""),Vt=(Ot=r.bBox(gt.node())).width,ft=Ot.height,gt.attr("transform",dt),Vt<=0||ft<=0)return void gt.remove()}var xt,Yt=yn.textangle;xt="outside"===St?function(nn,Kt,Mn,Un,Tn,un){var an,fn=!!un.isHorizontal,pn=!!un.constrained,Sn=un.angle||0,Nn=Tn.width,Kn=Tn.height,Bn=Math.abs(Kt-nn),cr=Math.abs(Un-Mn);an=fn?cr>2*x?x:0:Bn>2*x?x:0;var Lr=1;pn&&(Lr=fn?Math.min(1,cr/Kn):Math.min(1,Bn/Nn));var Qn=I(Sn),qr=S(Tn,Qn),sr=(fn?qr.x:qr.y)/2,hr=(Tn.left+Tn.right)/2,jr=(Tn.top+Tn.bottom)/2,di=(nn+Kt)/2,Jn=(Mn+Un)/2,Ar=0,mr=0,lr=fn?_(Kt,nn):_(Mn,Un);return fn?(di=Kt-lr*an,Ar=lr*sr):(Jn=Un+lr*an,mr=-lr*sr),{textX:hr,textY:jr,targetX:di,targetY:Jn,anchorX:Ar,anchorY:mr,scale:Lr,rotate:Qn}}(mt,Tt,It,Ct,Ot,{isHorizontal:en,constrained:"both"===yn.constraintext||"outside"===yn.constraintext,angle:Yt}):R(mt,Tt,It,Ct,Ot,{isHorizontal:en,constrained:"both"===yn.constraintext||"inside"===yn.constraintext,angle:Yt,anchor:yn.insidetextanchor}),xt.fontSize=bt.size,p("histogram"===yn.type?"bar":yn.type,xt,hn),ye.transform=xt,w(gt,hn,ct,at).attr("transform",b.getTextTransform(xt))}else We.select("text").remove()})(O,C,Ee,K,he,ze,ve,Te,Ie,z,Y),C.layerClipId&&r.hideOutsideRangePoint(be,Ee.select("text"),G,J,U.xcalendar,U.ycalendar)}),r.setClipUrl(ae,!1===U.cliponaxis?null:C.layerClipId,O)});n.getComponentMethod("errorbars","plot")(O,X,C,z)},toMoveInsideBar:R}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(v,re,ne){"use strict";function g(m,b,y,e,r){var n=b.c2p(e?m.s0:m.p0,!0),a=b.c2p(e?m.s1:m.p1,!0),t=y.c2p(e?m.p0:m.s0,!0),p=y.c2p(e?m.p1:m.s1,!0);return r?[(n+a)/2,(t+p)/2]:e?[a,(t+p)/2]:[(n+a)/2,p]}re.exports=function(m,b){var y,e=m.cd,r=m.xaxis,n=m.yaxis,a=e[0].trace,t="funnel"===a.type,p="h"===a.orientation,s=[];if(!1===b)for(y=0;y<e.length;y++)e[y].selected=0;else for(y=0;y<e.length;y++){var i=e[y],f="ct"in i?i.ct:g(i,r,n,p,t);b.contains(f,!1,y,m)?(s.push({pointNumber:y,x:r.c2d(i.x),y:n.c2d(i.y)}),i.selected=1):i.selected=0}return s}},{}],670:[function(v,re,ne){"use strict";re.exports=b;var g=v("../../lib").distinctVals,m=v("../../constants/numerical").BADNUM;function b(y,e){this.traces=y,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var r=1/0,n=[],a=0;a<y.length;a++){for(var t=y[a],p=0;p<t.length;p++){var s=t[p];s.p!==m&&n.push(s.p)}t[0]&&t[0].width1&&(r=Math.min(t[0].width1,r))}this.positions=n;var i=g(n);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&r!==1/0?r:Math.min(i.minDiff,r);var f=(e.posAxis||{}).type;"category"!==f&&"multicategory"!==f||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(y,e){var r=this.getLabel(y,e),n=this.bins[r]||0;return this.bins[r]=n+e,n},b.prototype.get=function(y,e){var r=this.getLabel(y,e);return this.bins[r]||0},b.prototype.getLabel=function(y,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?y:Math.round(y/this.binWidth))}},{"../../constants/numerical":491,"../../lib":515}],671:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/color"),b=v("../../components/drawing"),y=v("../../lib"),e=v("../../registry"),r=v("./uniform_text").resizeText,n=v("./attributes"),a=n.textfont,t=n.insidetextfont,p=n.outsidetextfont,s=v("./helpers");function i(u,T,_){b.pointStyle(u.selectAll("path"),T,_),f(u,T,_)}function f(u,T,_){u.selectAll("text").each(function(w){var M=g.select(this),I=y.ensureUniformFontSize(_,c(M,w,T,_));b.font(M,I)})}function c(u,T,_,w){var M=w._fullLayout.font,I=_.textfont;if(u.classed("bartext-inside")){var S=x(T,_);I=h(_,T.i,M,S)}else u.classed("bartext-outside")&&(I=d(_,T.i,M));return I}function l(u,T,_){return o(a,u.textfont,T,_)}function h(u,T,_,w){var M=l(u,T,_);return(void 0===u._input.textfont||void 0===u._input.textfont.color||Array.isArray(u.textfont.color)&&void 0===u.textfont.color[T])&&(M={color:m.contrast(w),family:M.family,size:M.size}),o(t,u.insidetextfont,T,M)}function d(u,T,_){var w=l(u,T,_);return o(p,u.outsidetextfont,T,w)}function o(u,T,_,w){var M=s.getValue((T=T||{}).family,_),I=s.getValue(T.size,_),S=s.getValue(T.color,_);return{family:s.coerceString(u.family,M,w.family),size:s.coerceNumber(u.size,I,w.size),color:s.coerceColor(u.color,S,w.color)}}function x(u,T){return"waterfall"===T.type?T[u.dir].marker.color:u.mcc||u.mc||T.marker.color}re.exports={style:function(u){var T=g.select(u).selectAll("g.barlayer").selectAll("g.trace");r(u,T,"bar");var _=T.size(),w=u._fullLayout;T.style("opacity",function(M){return M[0].trace.opacity}).each(function(M){("stack"===w.barmode&&_>1||0===w.bargap&&0===w.bargroupgap&&!M[0].trace.marker.line.width)&&g.select(this).attr("shape-rendering","crispEdges")}),T.selectAll("g.points").each(function(M){i(g.select(this),M[0].trace,u)}),e.getComponentMethod("errorbars","style")(T)},styleTextPoints:f,styleOnSelect:function(u,T,_){var M,I,S,R,O,C,w=T[0].trace;w.selectedpoints?(I=w,S=u,b.selectedPointStyle((M=_).selectAll("path"),I),R=M.selectAll("text"),O=I,C=S,R.each(function(D){var B,z=g.select(this);if(D.selected){B=y.ensureUniformFontSize(C,c(z,D,O,C));var Y=O.selected.textfont&&O.selected.textfont.color;Y&&(B.color=Y),b.font(z,B)}else b.selectedTextStyle(z,O)})):(i(_,w,u),e.getComponentMethod("errorbars","style")(_))},getInsideTextFont:h,getOutsideTextFont:d,getBarColor:x,resizeText:r}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("../../lib").coercePattern;re.exports=function(e,r,n,a,t){var p=n("marker.color",a),s=m(e,"marker");s&&b(e,r,t,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",g.defaultLine),m(e,"marker.line")&&b(e,r,t,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),y(n,"marker.pattern",p,s),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib");function b(y){return"_"+y+"Text_minsize"}re.exports={recordMinTextSize:function(y,e,r){if(r.uniformtext.mode){var n=b(y),a=r.uniformtext.minsize,t=e.scale*e.fontSize;e.hide=t<a,r[n]=r[n]||1/0,e.hide||(r[n]=Math.min(r[n],Math.max(t,a)))}},clearMinTextSize:function(y,e){e[b(y)]=void 0},resizeText:function(y,e,r){var n=y._fullLayout,a=n["_"+r+"Text_minsize"];if(a){var t,p="hide"===n.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":t="g.slice";break;case"treemap":case"icicle":t="g.slice, g.pathbar";break;default:t="g.points > g.point"}e.selectAll(t).each(function(s){var i=s.transform;i&&(i.scale=p&&i.hide?0:a/i.fontSize,g.select(this).select("text").attr("transform",m.getTextTransform(i)))})}}}},{"../../lib":515,"@plotly/d3":58}],674:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../lib/extend").extendFlat,b=v("../scatterpolar/attributes"),y=v("../bar/attributes");re.exports={r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,base:m({},y.base,{}),offset:m({},y.offset,{}),width:m({},y.width,{}),text:m({},y.text,{}),hovertext:m({},y.hovertext,{}),marker:y.marker,hoverinfo:b.hoverinfo,hovertemplate:g(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/calc"),b=v("../bar/arrays_to_calcdata"),y=v("../bar/cross_trace_calc").setGroupPositions,e=v("../scatter/calc_selection"),r=v("../../registry").traceIs,n=v("../../lib").extendFlat;re.exports={calc:function(a,t){for(var p=a._fullLayout,s=t.subplot,f=p[s].angularaxis,c=p[s].radialaxis.makeCalcdata(t,"r"),l=f.makeCalcdata(t,"theta"),h=t._length,d=new Array(h),o=c,x=l,u=0;u<h;u++)d[u]={p:x[u],s:o[u]};function T(_){var w=t[_];void 0!==w&&(t["_"+_]=Array.isArray(w)?f.makeCalcdata(t,_):f.d2c(w,t.thetaunit))}return"linear"===f.type&&(T("width"),T("offset")),g(t,"marker")&&m(a,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),g(t,"marker.line")&&m(a,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(d,t),e(d,t),d},crossTraceCalc:function(a,t,p){for(var s=a.calcdata,i=[],f=0;f<s.length;f++){var c=s[f],l=c[0].trace;!0===l.visible&&r(l,"bar")&&l.subplot===p&&i.push(c)}var h=n({},t.radialaxis,{_id:"x"});y(a,t.angularaxis,h,i,{mode:t.barmode,norm:t.barnorm,gap:t.bargap,groupgap:t.bargroupgap})}}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatterpolar/defaults").handleRThetaDefaults,b=v("../bar/style_defaults"),y=v("./attributes");re.exports=function(e,r,n,a){function t(p,s){return g.coerce(e,r,y,p,s)}m(e,r,a,t)?(t("thetaunit"),t("base"),t("offset"),t("width"),t("text"),t("hovertext"),t("hovertemplate"),b(e,r,t,n,a),g.coerceSelectionMarkerOpacity(r,t)):r.visible=!1}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(v,re,ne){"use strict";var g=v("../../components/fx"),m=v("../../lib"),b=v("../bar/hover").getTraceColor,y=m.fillText,e=v("../scatterpolar/hover").makeHoverPointText,r=v("../../plots/polar/helpers").isPtInsidePolygon;re.exports=function(n,a,t){var p=n.cd,s=p[0].trace,i=n.subplot,f=i.radialAxis,l=i.vangles,h=l?r:m.isPtInsideSector,d=n.maxHoverDistance,o=i.angularAxis._period||2*Math.PI,x=Math.abs(f.g2p(Math.sqrt(a*a+t*t))),u=Math.atan2(t,a);if(f.range[0]>f.range[1]&&(u+=Math.PI),g.getClosest(p,function(w){return h(x,u,[w.rp0,w.rp1],[w.thetag0,w.thetag1],l)?d+Math.min(1,Math.abs(w.thetag1-w.thetag0)/o)-1+(w.rp1-x)/(w.rp1-w.rp0)-1:1/0},n),!1!==n.index){var T=p[n.index];n.x0=n.x1=T.ct[0],n.y0=n.y1=T.ct[1];var _=m.extendFlat({},T,{r:T.s,theta:T.p});return y(T,s,n),e(_,s,i,n),n.hovertemplate=s.hovertemplate,n.color=b(s,T),n.xLabelVal=n.yLabelVal=void 0,T.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"barpolar",basePlotModule:v("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("../scatterpolar/format_labels"),style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(v,re,ne){"use strict";re.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y,e){var r,n={};function a(s,i){return g.coerce(b[r]||{},y[r],m,s,i)}for(var t=0;t<e.length;t++){var p=e[t];"barpolar"===p.type&&!0===p.visible&&(n[r=p.subplot]||(a("barmode"),a("bargap"),n[r]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("fast-isnumeric"),b=v("../../lib"),y=v("../../components/drawing"),e=v("../../plots/polar/helpers");re.exports=function(r,n,a){var l,h,d,t=n.xaxis,p=n.yaxis,s=n.radialAxis,i=n.angularAxis,f=(h=(l=n).cxx,d=l.cyy,l.vangles?function(o,x,u,T){var _,w;b.angleDelta(u,T)>0?(_=u,w=T):(_=T,w=u);var M=[e.findEnclosingVertexAngles(_,l.vangles)[0],(_+w)/2,e.findEnclosingVertexAngles(w,l.vangles)[1]];return e.pathPolygonAnnulus(o,x,_,w,M,h,d)}:function(o,x,u,T){return b.pathAnnulus(o,x,u,T,h,d)}),c=n.layers.frontplot.select("g.barlayer");b.makeTraceGroups(c,a,"trace bars").each(function(){var l=g.select(this),h=b.ensureSingle(l,"g","points").selectAll("g.point").data(b.identity);h.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),h.exit().remove(),h.each(function(d){var o,x=g.select(this),u=d.rp0=s.c2p(d.s0),T=d.rp1=s.c2p(d.s1),_=d.thetag0=i.c2g(d.p0),w=d.thetag1=i.c2g(d.p1);if(m(u)&&m(T)&&m(_)&&m(w)&&u!==T&&_!==w){var M=s.c2g(d.s1),I=(_+w)/2;d.ct=[t.c2p(M*Math.cos(I)),p.c2p(M*Math.sin(I))],o=f(u,T,_,w)}else o="M0,0Z";b.ensureSingle(x,"path").attr("d",o)}),y.setClipUrl(l,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(v,re,ne){"use strict";var g=v("../scatter/attributes"),m=v("../bar/attributes"),b=v("../../components/color/attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../lib/extend").extendFlat,n=g.marker,a=n.line;re.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:r({},n.symbol,{arrayOk:!1,editType:"plot"}),opacity:r({},n.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:r({},n.size,{arrayOk:!1,editType:"calc"}),color:r({},n.color,{arrayOk:!1,editType:"style"}),line:{color:r({},a.color,{arrayOk:!1,dflt:b.defaultLine,editType:"style"}),width:r({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:g.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:{marker:g.selected.marker,editType:"style"},unselected:{marker:g.unselected.marker,editType:"style"},text:r({},g.text,{}),hovertext:r({},g.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../plots/cartesian/axes"),b=v("../../plots/cartesian/align_period"),y=v("../../lib"),e=v("../../constants/numerical").BADNUM,r=y._;re.exports=function(h,d){var o,x,u,T,_,w,M,I=h._fullLayout,S=m.getFromId(h,d.xaxis||"x"),R=m.getFromId(h,d.yaxis||"y"),O=[],C="violin"===d.type?"_numViolins":"_numBoxes";"h"===d.orientation?(u=S,T="x",_=R,w="y",M=!!d.yperiodalignment):(u=R,T="y",_=S,w="x",M=!!d.xperiodalignment);var D,B,z,Y,G,J,te=function(We,Ye,lt,mt){var Tt,It=Ye+"0"in We;if(Ye in We||It&&"d"+Ye in We){var ct=lt.makeCalcdata(We,Ye);return[b(We,lt,Ye,ct).vals,ct]}Tt=It?We[Ye+"0"]:"name"in We&&("category"===lt.type||g(We.name)&&-1!==["linear","log"].indexOf(lt.type)||y.isDateTime(We.name)&&"date"===lt.type)?We.name:mt;for(var at="multicategory"===lt.type?lt.r2c_just_indices(Tt):lt.d2c(Tt,0,We[Ye+"calendar"]),St=We._length,Xt=new Array(St),tn=0;tn<St;tn++)Xt[tn]=at;return[Xt]}(d,w,_,I[C]),X=te[0],K=te[1],ae=y.distinctVals(X,_),U=ae.vals,V=ae.minDiff/2,q="all"===(d.boxpoints||d.points)?y.identity:function(We){return We.v<D.lf||We.v>D.uf};if(d._hasPreCompStats){var ie=d[T],H=function(We){return u.d2c((d[We]||[])[o])},ee=1/0,Q=-1/0;for(o=0;o<d._length;o++){var oe=X[o];if(g(oe)){if((D={}).pos=D[w]=oe,M&&K&&(D.orig_p=K[o]),D.q1=H("q1"),D.med=H("median"),D.q3=H("q3"),B=[],ie&&y.isArrayOrTypedArray(ie[o]))for(x=0;x<ie[o].length;x++)(J=u.d2c(ie[o][x]))!==e&&(a(G={v:J,i:[o,x]},d,[o,x]),B.push(G));if(D.pts=B.sort(t),Y=(z=D[T]=B.map(p)).length,D.med!==e&&D.q1!==e&&D.q3!==e&&D.med>=D.q1&&D.q3>=D.med){var le=H("lowerfence");D.lf=le!==e&&le<=D.q1?le:s(D,z,Y);var de=H("upperfence");D.uf=de!==e&&de>=D.q3?de:i(D,z,Y);var fe=H("mean");D.mean=fe!==e?fe:Y?y.mean(z,Y):(D.q1+D.q3)/2;var be=H("sd");D.sd=fe!==e&&be>=0?be:Y?y.stdev(z,Y,D.mean):D.q3-D.q1,D.lo=f(D),D.uo=c(D);var he=H("notchspan");he=he!==e&&he>0?he:l(D,Y),D.ln=D.med-he,D.un=D.med+he;var _e=D.lf,Ce=D.uf;d.boxpoints&&z.length&&(_e=Math.min(_e,z[0]),Ce=Math.max(Ce,z[Y-1])),d.notched&&(_e=Math.min(_e,D.ln),Ce=Math.max(Ce,D.un)),D.min=_e,D.max=Ce}else{var Ee;y.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+D.q1,"median = "+D.med,"q3 = "+D.q3].join("\n")),D.med=Ee=D.med!==e?D.med:D.q1!==e?D.q3!==e?(D.q1+D.q3)/2:D.q1:D.q3!==e?D.q3:0,D.q1=D.q3=Ee,D.lf=D.uf=Ee,D.mean=D.sd=Ee,D.ln=D.un=Ee,D.min=D.max=Ee}ee=Math.min(ee,D.min),Q=Math.max(Q,D.max),D.pts2=B.filter(q),O.push(D)}}d._extremes[u._id]=m.findExtremes(u,[ee,Q],{padded:!0})}else{var Ae=u.makeCalcdata(d,T),ze=function(We,Ye){for(var lt=We.length,mt=new Array(lt+1),Tt=0;Tt<lt;Tt++)mt[Tt]=We[Tt]-Ye;return mt[lt]=We[lt-1]+Ye,mt}(U,V),ve=U.length,Te=function(We){for(var Ye=new Array(We),lt=0;lt<We;lt++)Ye[lt]=[];return Ye}(ve);for(o=0;o<d._length;o++)if(g(J=Ae[o])){var Ie=y.findBin(X[o],ze);Ie>=0&&Ie<ve&&(a(G={v:J,i:o},d,o),Te[Ie].push(G))}var De=1/0,Fe=-1/0,Ue=d.quartilemethod,qe="exclusive"===Ue,je="inclusive"===Ue;for(o=0;o<ve;o++)if(Te[o].length>0){var rt,Ne;(D={}).pos=D[w]=U[o],B=D.pts=Te[o].sort(t),Y=(z=D[T]=B.map(p)).length,D.min=z[0],D.max=z[Y-1],D.mean=y.mean(z,Y),D.sd=y.stdev(z,Y,D.mean),D.med=y.interp(z,.5),Y%2&&(qe||je)?(qe?(rt=z.slice(0,Y/2),Ne=z.slice(Y/2+1)):je&&(rt=z.slice(0,Y/2+1),Ne=z.slice(Y/2)),D.q1=y.interp(rt,.5),D.q3=y.interp(Ne,.5)):(D.q1=y.interp(z,.25),D.q3=y.interp(z,.75)),D.lf=s(D,z,Y),D.uf=i(D,z,Y),D.lo=f(D),D.uo=c(D);var Be=l(D,Y);D.ln=D.med-Be,D.un=D.med+Be,De=Math.min(De,D.ln),Fe=Math.max(Fe,D.un),D.pts2=B.filter(q),O.push(D)}d._extremes[u._id]=m.findExtremes(u,d.notched?Ae.concat([De,Fe]):Ae,{padded:!0})}return function(We,Ye){if(y.isArrayOrTypedArray(Ye.selectedpoints))for(var lt=0;lt<We.length;lt++){for(var mt=We[lt].pts||[],Tt={},It=0;It<mt.length;It++)Tt[mt[It].i]=It;y.tagSelected(mt,Ye,Tt)}}(O,d),O.length>0?(O[0].t={num:I[C],dPos:V,posLetter:w,valLetter:T,labels:{med:r(h,"median:"),min:r(h,"min:"),q1:r(h,"q1:"),q3:r(h,"q3:"),max:r(h,"max:"),mean:r(h,"sd"===d.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:r(h,"lower fence:"),uf:r(h,"upper fence:")}},I[C]++,O):[{t:{empty:!0}}]};var n={text:"tx",hovertext:"htx"};function a(h,d,o){for(var x in n)y.isArrayOrTypedArray(d[x])&&(Array.isArray(o)?y.isArrayOrTypedArray(d[x][o[0]])&&(h[n[x]]=d[x][o[0]][o[1]]):h[n[x]]=d[x][o])}function t(h,d){return h.v-d.v}function p(h){return h.v}function s(h,d,o){return 0===o?h.q1:Math.min(h.q1,d[Math.min(y.findBin(2.5*h.q1-1.5*h.q3,d,!0)+1,o-1)])}function i(h,d,o){return 0===o?h.q3:Math.max(h.q3,d[Math.max(y.findBin(2.5*h.q3-1.5*h.q1,d),0)])}function f(h){return 4*h.q1-3*h.q3}function c(h){return 4*h.q3-3*h.q1}function l(h,d){return 0===d?0:1.57*(h.q3-h.q1)/Math.sqrt(d)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../lib"),b=v("../../plots/cartesian/constraints").getAxisGroup,y=["v","h"];function e(r,n,a,t){var p,s,i,f=n.calcdata,c=n._fullLayout,l=t._id,h=l.charAt(0),d=[],o=0;for(p=0;p<a.length;p++)for(i=f[a[p]],s=0;s<i.length;s++)d.push(t.c2l(i[s].pos,!0)),o+=(i[s].pts2||[]).length;if(d.length){var x=m.distinctVals(d);"category"!==t.type&&"multicategory"!==t.type||(x.minDiff=1);var u=x.minDiff/2;g.minDtick(t,x.minDiff,x.vals[0],!0);var T=c["violin"===r?"_numViolins":"_numBoxes"],_="group"===c[r+"mode"]&&T>1,w=1-c[r+"gap"],M=1-c[r+"groupgap"];for(p=0;p<a.length;p++){var I,S,R,O,C,D,B=(i=f[a[p]])[0].trace,z=i[0].t,Y=B.width,G=B.side;if(Y)I=S=O=Y/2,R=0;else if(I=u,_){var J=b(c,t._id)+B.orientation,X=Object.keys(((c._alignmentOpts[J]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length,K=X||T;S=I*w*M/K,R=2*I*(((X?B._offsetIndex:z.num)+.5)/K-.5)*w,O=I*w/K}else S=I*w*M,R=0,O=I;z.dPos=I,z.bPos=R,z.bdPos=S,z.wHover=O;var ae,U,V,q,ie,H,ee=R+S,Q=Boolean(Y);if("positive"===G?(C=I*(Y?1:.5),ae=ee,D=ae=R):"negative"===G?(C=ae=R,D=I*(Y?1:.5),U=ee):(C=D=I,ae=U=ee),(B.boxpoints||B.points)&&o>0){var oe=B.pointpos,le=B.jitter,de=B.marker.size/2,fe=0;oe+le>=0&&((fe=ee*(oe+le))>C?(Q=!0,ie=de,V=fe):fe>ae&&(ie=de,V=C)),fe<=C&&(V=C);var be=0;oe-le<=0&&((be=-ee*(oe-le))>D?(Q=!0,H=de,q=be):be>U&&(H=de,q=D)),be<=D&&(q=D)}else V=C,q=D;var he=new Array(i.length);for(s=0;s<i.length;s++)he[s]=i[s].pos;B._extremes[l]=g.findExtremes(t,he,{padded:Q,vpadminus:q,vpadplus:V,vpadLinearized:!0,ppadminus:{x:H,y:ie}[h],ppadplus:{x:ie,y:H}[h]})}}}re.exports={crossTraceCalc:function(r,n){for(var a=r.calcdata,t=n.xaxis,p=n.yaxis,s=0;s<y.length;s++){for(var i=y[s],f="h"===i?p:t,c=[],l=0;l<a.length;l++){var h=a[l],o=h[0].trace;!0!==o.visible||"box"!==o.type&&"candlestick"!==o.type||h[0].t.empty||(o.orientation||"v")!==i||o.xaxis!==t._id||o.yaxis!==p._id||c.push(l)}e("box",r,c,f)}},setPositionOffset:e}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry"),b=v("../../components/color"),y=v("../scatter/period_defaults"),e=v("../bar/defaults").handleGroupingDefaults,r=v("../../plots/cartesian/axis_autotype"),n=v("./attributes");function a(p,s,i,f){function c(G){var J=0;return G&&G.length&&(J+=1,g.isArrayOrTypedArray(G[0])&&G[0].length&&(J+=1)),J}function l(G){return g.validate(p[G],n[G])}var h,d=i("y"),o=i("x");if("box"===s.type){var x=i("q1"),u=i("median"),T=i("q3");s._hasPreCompStats=x&&x.length&&u&&u.length&&T&&T.length,h=Math.min(g.minRowLength(x),g.minRowLength(u),g.minRowLength(T))}var _,w,M=c(d),I=c(o),S=M&&g.minRowLength(d),R=I&&g.minRowLength(o),O=f.calendar,C={autotypenumbers:f.autotypenumbers};if(s._hasPreCompStats)switch(String(I)+String(M)){case"00":var D=l("x0")||l("dx");_=!l("y0")&&!l("dy")||D?"v":"h",w=h;break;case"10":_="v",w=Math.min(h,R);break;case"20":_="h",w=Math.min(h,o.length);break;case"01":_="h",w=Math.min(h,S);break;case"02":_="v",w=Math.min(h,d.length);break;case"12":_="v",w=Math.min(h,R,d.length);break;case"21":_="h",w=Math.min(h,o.length,S);break;case"11":w=0;break;case"22":var B,z=!1;for(B=0;B<o.length;B++)if("category"===r(o[B],O,C)){z=!0;break}if(z)_="v",w=Math.min(h,R,d.length);else{for(B=0;B<d.length;B++)if("category"===r(d[B],O,C)){z=!0;break}z?(_="h",w=Math.min(h,o.length,S)):(_="v",w=Math.min(h,R,d.length))}}else M>0?(_="v",w=I>0?Math.min(R,S):Math.min(S)):I>0?(_="h",w=Math.min(R)):w=0;if(w){s._length=w;var Y=i("orientation",_);s._hasPreCompStats?"v"===Y&&0===I?(i("x0",0),i("dx",1)):"h"===Y&&0===M&&(i("y0",0),i("dy",1)):"v"===Y&&0===I?i("x0"):"h"===Y&&0===M&&i("y0"),m.getComponentMethod("calendars","handleTraceDefaults")(p,s,["x","y"],f)}else s.visible=!1}function t(p,s,i,f){var c=f.prefix,l=g.coerce2(p,s,n,"marker.outliercolor"),h=i("marker.line.outliercolor"),d="outliers";s._hasPreCompStats?d="all":(l||h)&&(d="suspectedoutliers");var o=i(c+"points",d);o?(i("jitter","all"===o?.3:0),i("pointpos","all"===o?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.color",s.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===o&&(i("marker.line.outliercolor",s.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete s.marker;var x=i("hoveron");"all"!==x&&-1===x.indexOf("points")||i("hovertemplate"),g.coerceSelectionMarkerOpacity(s,i)}re.exports={supplyDefaults:function(p,s,i,f){function c(T,_){return g.coerce(p,s,n,T,_)}if(a(p,s,c,f),!1!==s.visible){y(p,s,f,c),c("xhoverformat"),c("yhoverformat");var l=s._hasPreCompStats;l&&(c("lowerfence"),c("upperfence")),c("line.color",(p.marker||{}).color||i),c("line.width"),c("fillcolor",b.addOpacity(s.line.color,.5));var h=!1;if(l){var d=c("mean"),o=c("sd");d&&d.length&&(h=!0,o&&o.length&&(h="sd"))}c("boxmean",h),c("whiskerwidth"),c("width"),c("quartilemethod");var x=!1;if(l){var u=c("notchspan");u&&u.length&&(x=!0)}else g.validate(p.notchwidth,n.notchwidth)&&(x=!0);c("notched",x)&&c("notchwidth"),t(p,s,c,{prefix:"box"})}},crossTraceDefaults:function(p,s){var f;function c(d){return g.coerce(f._input,f,n,d)}for(var l=0;l<p.length;l++){var h=(f=p[l]).type;"box"!==h&&"violin"!==h||"group"===s[h+"mode"]&&e(f._input,f,s,c)}},handleSampleDefaults:a,handlePointsDefaults:t}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(v,re,ne){"use strict";re.exports=function(g,m){return m.hoverOnBox&&(g.hoverOnBox=m.hoverOnBox),"xVal"in m&&(g.x=m.xVal),"yVal"in m&&(g.y=m.yVal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g}},{}],687:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../lib"),b=v("../../components/fx"),y=v("../../components/color"),e=m.fillText;function r(a,t,p,s){var i,f,c,l,h,d,o,x,u,T,_,w,M,I,S=a.cd,R=a.xa,O=a.ya,C=S[0].trace,D=S[0].t,B="violin"===C.type,z=D.bdPos,Y=D.wHover,G=function(Ee){return c.c2l(Ee.pos)+D.bPos-c.c2l(d)};B&&"both"!==C.side?("positive"===C.side&&(u=function(Ee){var Ae=G(Ee);return b.inbox(Ae,Ae+Y,T)},w=z,M=0),"negative"===C.side&&(u=function(Ee){var Ae=G(Ee);return b.inbox(Ae-Y,Ae,T)},w=0,M=z)):(u=function(Ee){var Ae=G(Ee);return b.inbox(Ae-Y,Ae+Y,T)},w=M=z),I=B?function(Ee){return b.inbox(Ee.span[0]-h,Ee.span[1]-h,T)}:function(Ee){return b.inbox(Ee.min-h,Ee.max-h,T)},"h"===C.orientation?(h=t,d=p,o=I,x=u,i="y",c=O,f="x",l=R):(h=p,d=t,o=u,x=I,i="x",c=R,f="y",l=O);var J=Math.min(1,z/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function te(Ee){return(o(Ee)+x(Ee))/2}T=a.maxHoverDistance-J,_=a.maxSpikeDistance-J;var X=b.getDistanceFunction(s,o,x,te);if(b.getClosest(S,X,a),!1===a.index)return[];var K=S[a.index],ae=C.line.color,U=(C.marker||{}).color;a.color=y.opacity(ae)&&C.line.width?ae:y.opacity(U)&&C.boxpoints?U:C.fillcolor,a[i+"0"]=c.c2p(K.pos+D.bPos-M,!0),a[i+"1"]=c.c2p(K.pos+D.bPos+w,!0),a[i+"LabelVal"]=void 0!==K.orig_p?K.orig_p:K.pos;var V=i+"Spike";a.spikeDistance=te(K)*_/T,a[V]=c.c2p(K.pos,!0);var q=C.boxmean||(C.meanline||{}).visible,ie=C.boxpoints||C.points,H=ie&&q?["max","uf","q3","med","mean","q1","lf","min"]:ie&&!q?["max","uf","q3","med","q1","lf","min"]:!ie&&q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];C.orientation===(l.range[1]<l.range[0]?"v":"h")&&H.reverse();for(var Q=a.spikeDistance,oe=a[V],le=[],de=0;de<H.length;de++){var fe=H[de];if(fe in K){var be=K[fe],he=l.c2p(be,!0),_e=m.extendFlat({},a);_e.attr=fe,_e[f+"0"]=_e[f+"1"]=he,_e[f+"LabelVal"]=be,_e[f+"Label"]=(D.labels?D.labels[fe]+" ":"")+g.hoverLabelText(l,be,C[f+"hoverformat"]),_e.hoverOnBox=!0,"mean"===fe&&"sd"in K&&"sd"===C.boxmean&&(_e[f+"err"]=K.sd),_e.hovertemplate=!1,le.push(_e)}}a.name="",a.spikeDistance=void 0,a[V]=void 0;for(var Ce=0;Ce<le.length;Ce++)"med"!==le[Ce].attr?(le[Ce].name="",le[Ce].spikeDistance=void 0,le[Ce][V]=void 0):(le[Ce].spikeDistance=Q,le[Ce][V]=oe);return le}function n(a,t,p){for(var s,i,f,c=a.cd,l=a.xa,h=a.ya,d=c[0].trace,o=l.c2p(t),x=h.c2p(p),u=b.quadrature(function(B){var z=Math.max(3,B.mrc||0);return Math.max(Math.abs(l.c2p(B.x)-o)-z,1-3/z)},function(B){var z=Math.max(3,B.mrc||0);return Math.max(Math.abs(h.c2p(B.y)-x)-z,1-3/z)}),T=!1,_=0;_<c.length;_++){i=c[_];for(var w=0;w<(i.pts||[]).length;w++){var M=u(f=i.pts[w]);M<=a.distance&&(a.distance=M,T=[_,w])}}if(!T)return!1;f=(i=c[T[0]]).pts[T[1]];var I=l.c2p(f.x,!0),S=h.c2p(f.y,!0),R=f.mrc||1;s=m.extendFlat({},a,{index:f.i,color:(d.marker||{}).color,name:d.name,x0:I-R,x1:I+R,y0:S-R,y1:S+R,spikeDistance:a.distance,hovertemplate:d.hovertemplate});var O,C=i.orig_p,D=void 0!==C?C:i.pos;return"h"===d.orientation?(O=h,s.xLabelVal=f.x,s.yLabelVal=D):(O=l,s.xLabelVal=D,s.yLabelVal=f.y),s[O._id.charAt(0)+"Spike"]=O.c2p(i.pos,!0),e(f,d,s),s}re.exports={hoverPoints:function(a,t,p,s){var i,f=a.cd[0].trace.hoveron,c=[];return-1!==f.indexOf("boxes")&&(c=c.concat(r(a,t,p,s))),-1!==f.indexOf("points")&&(i=n(a,t,p)),"closest"===s?i?[i]:c:(i&&c.push(i),c)},hoverOnBoxes:r,hoverOnPoints:n}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults").supplyLayoutDefaults,calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"box",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(v,re,ne){"use strict";re.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("./layout_attributes");function y(e,r,n,a,t){for(var p=t+"Layout",s=!1,i=0;i<n.length;i++)if(g.traceIs(n[i],p)){s=!0;break}s&&(a(t+"mode"),a(t+"gap"),a(t+"groupgap"))}re.exports={supplyLayoutDefaults:function(e,r,n){y(0,0,n,function(a,t){return m.coerce(e,r,b,a,t)},"box")},_supply:y}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing");function y(n,a,t,p){var s,i,f="h"===t.orientation,c=a.val,l=a.pos,h=!!l.rangebreaks,d=p.bPos,o=p.wdPos||0,x=p.bPosPxOffset||0,u=t.whiskerwidth||0,T=t.notched||!1,_=T?1-2*t.notchwidth:1;Array.isArray(p.bdPos)?(s=p.bdPos[0],i=p.bdPos[1]):(s=p.bdPos,i=p.bdPos);var w=n.selectAll("path.box").data("violin"!==t.type||t.box.visible?m.identity:[]);w.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),w.exit().remove(),w.each(function(M){if(M.empty)return"M0,0Z";var I=l.c2l(M.pos+d,!0),S=l.l2p(I-s)+x,R=l.l2p(I+i)+x,O=h?(S+R)/2:l.l2p(I)+x,C=t.whiskerwidth,D=h?S*C+(1-C)*O:l.l2p(I-o)+x,B=h?R*C+(1-C)*O:l.l2p(I+o)+x,z=l.l2p(I-s*_)+x,Y=l.l2p(I+i*_)+x,G=c.c2p(M.q1,!0),J=c.c2p(M.q3,!0),te=m.constrain(c.c2p(M.med,!0),Math.min(G,J)+1,Math.max(G,J)-1),X=void 0===M.lf||!1===t.boxpoints,K=c.c2p(X?M.min:M.lf,!0),ae=c.c2p(X?M.max:M.uf,!0),U=c.c2p(M.ln,!0),V=c.c2p(M.un,!0);f?g.select(this).attr("d","M"+te+","+z+"V"+Y+"M"+G+","+S+"V"+R+(T?"H"+U+"L"+te+","+Y+"L"+V+","+R:"")+"H"+J+"V"+S+(T?"H"+V+"L"+te+","+z+"L"+U+","+S:"")+"ZM"+G+","+O+"H"+K+"M"+J+","+O+"H"+ae+(0===u?"":"M"+K+","+D+"V"+B+"M"+ae+","+D+"V"+B)):g.select(this).attr("d","M"+z+","+te+"H"+Y+"M"+S+","+G+"H"+R+(T?"V"+U+"L"+Y+","+te+"L"+R+","+V:"")+"V"+J+"H"+S+(T?"V"+V+"L"+z+","+te+"L"+S+","+U:"")+"ZM"+O+","+G+"V"+K+"M"+O+","+J+"V"+ae+(0===u?"":"M"+D+","+K+"H"+B+"M"+D+","+ae+"H"+B))})}function e(n,a,t,p){var s=a.x,i=a.y,f=p.bdPos,c=p.bPos,l=t.boxpoints||t.points;m.seedPseudoRandom();var h=n.selectAll("g.points").data(l?function(o){return o.forEach(function(x){x.t=p,x.trace=t}),o}:[]);h.enter().append("g").attr("class","points"),h.exit().remove();var d=h.selectAll("path").data(function(o){var x,u,T=o.pts2,_=Math.max((o.max-o.min)/10,o.q3-o.q1),w=1e-9*_,M=.01*_,I=[],S=0;if(t.jitter){if(0===_)for(S=1,I=new Array(T.length),x=0;x<T.length;x++)I[x]=1;else for(x=0;x<T.length;x++){var R=Math.max(0,x-5),O=T[R].v,C=Math.min(T.length-1,x+5),D=T[C].v;"all"!==l&&(T[x].v<o.lf?D=Math.min(D,o.lf):O=Math.max(O,o.uf));var B=Math.sqrt(M*(C-R)/(D-O+w))||0;B=m.constrain(Math.abs(B),0,1),I.push(B),S=Math.max(B,S)}u=2*t.jitter/(S||1)}for(x=0;x<T.length;x++){var z=T[x],Y=z.v,G=t.jitter?u*I[x]*(m.pseudoRandom()-.5):0,J=o.pos+c+f*(t.pointpos+G);"h"===t.orientation?(z.y=J,z.x=Y):(z.x=J,z.y=Y),"suspectedoutliers"===l&&Y<o.uo&&Y>o.lo&&(z.so=!0)}return T});d.enter().append("path").classed("point",!0),d.exit().remove(),d.call(b.translatePoints,s,i)}function r(n,a,t,p){var s,i,f=a.val,c=a.pos,l=!!c.rangebreaks,h=p.bPos,d=p.bPosPxOffset||0,o=t.boxmean||(t.meanline||{}).visible;Array.isArray(p.bdPos)?(s=p.bdPos[0],i=p.bdPos[1]):(s=p.bdPos,i=p.bdPos);var x=n.selectAll("path.mean").data("box"===t.type&&t.boxmean||"violin"===t.type&&t.box.visible&&t.meanline.visible?m.identity:[]);x.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),x.exit().remove(),x.each(function(u){var T=c.c2l(u.pos+h,!0),_=c.l2p(T-s)+d,w=c.l2p(T+i)+d,M=l?(_+w)/2:c.l2p(T)+d,I=f.c2p(u.mean,!0),S=f.c2p(u.mean-u.sd,!0),R=f.c2p(u.mean+u.sd,!0);"h"===t.orientation?g.select(this).attr("d","M"+I+","+_+"V"+w+("sd"===o?"m0,0L"+S+","+M+"L"+I+","+_+"L"+R+","+M+"Z":"")):g.select(this).attr("d","M"+_+","+I+"H"+w+("sd"===o?"m0,0L"+M+","+S+"L"+_+","+I+"L"+M+","+R+"Z":""))})}re.exports={plot:function(n,a,t,p){var s=a.xaxis,i=a.yaxis;m.makeTraceGroups(p,t,"trace boxes").each(function(f){var c,l,h=g.select(this),d=f[0],o=d.t,x=d.trace;o.wdPos=o.bdPos*x.whiskerwidth,!0!==x.visible||o.empty?h.remove():("h"===x.orientation?(c=i,l=s):(c=s,l=i),y(h,{pos:c,val:l},x,o),e(h,{x:s,y:i},x,o),r(h,{pos:c,val:l},x,o))})},plotBoxAndWhiskers:y,plotPoints:e,plotBoxMean:r}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(v,re,ne){"use strict";re.exports=function(g,m){var b,y,e=g.cd,r=g.xaxis,n=g.yaxis,a=[];if(!1===m)for(b=0;b<e.length;b++)for(y=0;y<(e[b].pts||[]).length;y++)e[b].pts[y].selected=0;else for(b=0;b<e.length;b++)for(y=0;y<(e[b].pts||[]).length;y++){var t=e[b].pts[y],p=r.c2p(t.x),s=n.c2p(t.y);m.contains([p,s],null,t.i,g)?(a.push({pointNumber:t.i,x:r.c2d(t.x),y:n.c2d(t.y)}),t.selected=1):t.selected=0}return a}},{}],693:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/color"),b=v("../../components/drawing");re.exports={style:function(y,e,r){var n=r||g.select(y).selectAll("g.trace.boxes");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var t=g.select(this),p=a[0].trace,s=p.line.width;function i(l,h,d,o){l.style("stroke-width",h+"px").call(m.stroke,d).call(m.fill,o)}var f=t.selectAll("path.box");if("candlestick"===p.type)f.each(function(l){if(!l.empty){var h=g.select(this),d=p[l.dir];i(h,d.line.width,d.line.color,d.fillcolor),h.style("opacity",p.selectedpoints&&!l.selected?.3:1)}});else{i(f,s,p.line.color,p.fillcolor),t.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(m.stroke,p.line.color);var c=t.selectAll("path.point");b.pointStyle(c,p,y)}})},styleOnSelect:function(y,e,r){var n=e[0].trace,a=r.selectAll("path.point");n.selectedpoints?b.selectedPointStyle(a,n):b.pointStyle(a,n,y)}}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(v,re,ne){"use strict";var g=v("../../lib").extendFlat,m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../ohlc/attributes"),y=v("../box/attributes");function e(r){return{line:{color:g({},y.line.color,{dflt:r}),width:y.line.width,editType:"style"},fillcolor:y.fillcolor,editType:"style"}}re.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:b.x,open:b.open,high:b.high,low:b.low,close:b.close,line:{width:g({},y.line.width,{}),editType:"style"},increasing:e(b.increasing.line.color.dflt),decreasing:e(b.decreasing.line.color.dflt),text:b.text,hovertext:b.hovertext,whiskerwidth:g({},y.whiskerwidth,{dflt:0}),hoverlabel:b.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../../plots/cartesian/align_period"),y=v("../ohlc/calc").calcCommon;function e(r,n,a,t){return{min:a,q1:Math.min(r,t),med:t,q3:Math.max(r,t),max:n}}re.exports=function(r,n){var a=r._fullLayout,t=m.getFromId(r,n.xaxis),p=m.getFromId(r,n.yaxis),s=t.makeCalcdata(n,"x"),i=b(n,t,"x",s).vals,f=y(r,n,s,i,p,e);return f.length?(g.extendFlat(f[0].t,{num:a._numBoxes,dPos:g.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),a._numBoxes++,f):[{t:{empty:!0}}]}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color"),b=v("../ohlc/ohlc_defaults"),y=v("../scatter/period_defaults"),e=v("./attributes");function r(n,a,t,p){var s=t(p+".line.color");t(p+".line.width",a.line.width),t(p+".fillcolor",m.addOpacity(s,.5))}re.exports=function(n,a,t,p){function s(i,f){return g.coerce(n,a,e,i,f)}b(n,a,s,p)?(y(n,a,p,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),r(0,a,s,"increasing"),r(0,a,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),p._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"candlestick",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:v("./attributes"),layoutAttributes:v("../box/layout_attributes"),supplyLayoutDefaults:v("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:v("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("../box/plot").plot,layerName:"boxlayer",style:v("../box/style").style,hoverPoints:v("../ohlc/hover").hoverPoints,selectPoints:v("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(v,re,ne){"use strict";var g=v("./axis_defaults"),m=v("../../plot_api/plot_template");re.exports=function(b,y,e,r,n){var a,t,p,s;r("a")||(r("da"),r("a0")),r("b")||(r("db"),r("b0")),a=b,t=y,p=e,s=n,["aaxis","baxis"].forEach(function(i){var f=i.charAt(0),c=a[i]||{},l=m.newContainer(t,i);g(c,l,{noTicklabelstep:!0,tickfont:"x",id:f+"axis",letter:f,font:t.font,name:i,data:a[f],calendar:t.calendar,dfltColor:s,bgColor:p.paper_bgcolor,autotypenumbersDflt:p.autotypenumbers,fullLayout:p}),l._categories=l._categories||[],a[i]||"-"===c.type||(a[i]={type:c.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(v,re,ne){"use strict";var g=v("../../lib").isArrayOrTypedArray;re.exports=function(m){return function b(y,e){if(!g(y)||e>=10)return null;for(var r=1/0,n=-1/0,a=y.length,t=0;t<a;t++){var p=y[t];if(g(p)){var s=b(p,e+1);s&&(r=Math.min(s[0],r),n=Math.max(s[1],n))}else r=Math.min(p,r),n=Math.max(p,n)}return[r,n]}(m,0)}},{"../../lib":515}],700:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("./axis_attributes"),b=v("../../components/color/attributes"),y=g({editType:"calc"});y.family.dflt='"Open Sans", verdana, arial, sans-serif',y.size.dflt=12,y.color.dflt=b.defaultLine,re.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:m,baxis:m,font:y,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(v,re,ne){"use strict";var g=v("../../lib").isArrayOrTypedArray;re.exports=function(m,b,y,e){var r,n,a,t,p,s,i,f,c,l,h,d,o,x=g(y)?"a":"b",u=("a"===x?m.aaxis:m.baxis).smoothing,T="a"===x?m.a2i:m.b2j,_="a"===x?y:e,w="a"===x?e:y,M="a"===x?b.a.length:b.b.length,I="a"===x?b.b.length:b.a.length,S=Math.floor("a"===x?m.b2j(w):m.a2i(w)),R="a"===x?function(ae){return m.evalxy([],ae,S)}:function(ae){return m.evalxy([],S,ae)};u&&(a=Math.max(0,Math.min(I-2,S)),t=S-a,n="a"===x?function(ae,U){return m.dxydi([],ae,a,U,t)}:function(ae,U){return m.dxydj([],a,ae,t,U)});var O=T(_[0]),C=T(_[1]),D=O<C?1:-1,B=1e-8*(C-O),z=D>0?Math.floor:Math.ceil,Y=D>0?Math.ceil:Math.floor,G=D>0?Math.min:Math.max,J=D>0?Math.max:Math.min,te=z(O+B),X=Y(C-B),K=[[i=R(O)]];for(r=te;r*D<X*D;r+=D)p=[],h=J(O,r),o=(d=G(C,r+D))-h,s=Math.max(0,Math.min(M-2,Math.floor(.5*(h+d)))),f=R(d),u&&(c=n(s,h-s),l=n(s,d-s),p.push([i[0]+c[0]/3*o,i[1]+c[1]/3*o]),p.push([f[0]-l[0]/3*o,f[1]-l[1]/3*o])),p.push(f),K.push(p),i=f;return K}},{"../../lib":515}],702:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("../../components/color/attributes"),b=v("../../plots/cartesian/layout_attributes"),y=v("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=v("../../plot_api/edit_types").overrideAll,r=v("../../components/drawing/attributes").dash,n=v("../../lib/extend").extendFlat;re.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:g({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:b.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:g({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:y("tick label")},tickformatstops:e(b.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:n({},r,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:n({},r,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:m.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:g({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(v,re,ne){"use strict";var g=v("./attributes"),m=v("../../components/color").addOpacity,b=v("../../registry"),y=v("../../lib"),e=v("../../plots/cartesian/tick_value_defaults"),r=v("../../plots/cartesian/tick_label_defaults"),n=v("../../plots/cartesian/prefix_suffix_defaults"),a=v("../../plots/cartesian/category_order_defaults"),t=v("../../plots/cartesian/set_convert"),p=v("../../plots/cartesian/axis_autotype");re.exports=function(s,i,f){var c=f.letter,l=f.font||{},h=g[c+"axis"];function d(D,B){return y.coerce(s,i,h,D,B)}function o(D,B){return y.coerce2(s,i,h,D,B)}f.name&&(i._name=f.name,i._id=f.name),d("autotypenumbers",f.autotypenumbersDflt);var x=d("type");"-"===x&&(f.data&&function(D,B){if("-"===D.type){var z=D._id.charAt(0);D.type=p(B,D[z+"calendar"],{autotypenumbers:D.autotypenumbers})}}(i,f.data),"-"===i.type?i.type="linear":x=s.type=i.type),d("smoothing"),d("cheatertype"),d("showticklabels"),d("labelprefix",c+" = "),d("labelsuffix"),d("showtickprefix"),d("showticksuffix"),d("separatethousands"),d("tickformat"),d("exponentformat"),d("minexponent"),d("showexponent"),d("categoryorder"),d("tickmode"),d("tickvals"),d("ticktext"),d("tick0"),d("dtick"),"array"===i.tickmode&&(d("arraytick0"),d("arraydtick")),d("labelpadding"),i._hovertitle=c,"date"===x&&b.getComponentMethod("calendars","handleDefaults")(s,i,"calendar",f.calendar),t(i,f.fullLayout),i.c2p=y.identity;var u=d("color",f.dfltColor),T=u===s.color?u:l.color;d("title.text")&&(y.coerceFont(d,"title.font",{family:l.family,size:y.bigFont(l.size),color:T}),d("title.offset")),d("tickangle"),d("autorange",!i.isValidRange(s.range))&&d("rangemode"),d("range"),i.cleanRange(),d("fixedrange"),e(s,i,d,x),n(s,i,d,x,f),r(s,i,d,x,f),a(s,i,d,{data:f.data,dataAttr:c});var _=o("gridcolor",m(u,.3)),w=o("gridwidth"),M=o("griddash"),I=d("showgrid");I||(delete i.gridcolor,delete i.gridwidth,delete i.griddash);var S=o("startlinecolor",u),R=o("startlinewidth",w);d("startline",i.showgrid||!!S||!!R)||(delete i.startlinecolor,delete i.startlinewidth);var O=o("endlinecolor",u),C=o("endlinewidth",w);return d("endline",i.showgrid||!!O||!!C)||(delete i.endlinecolor,delete i.endlinewidth),I?(d("minorgridcount"),d("minorgridwidth",w),d("minorgriddash",M),d("minorgridcolor",m(_,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgriddash,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridwidth,delete i.griddash),"none"===i.showticklabels&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,d("tickmode"),i}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../lib").isArray1D,b=v("./cheater_basis"),y=v("./array_minmax"),e=v("./calc_gridlines"),r=v("./calc_labels"),n=v("./calc_clippath"),a=v("../heatmap/clean_2d_array"),t=v("./smooth_fill_2d_array"),p=v("../heatmap/convert_column_xyz"),s=v("./set_convert");re.exports=function(i,f){var c=g.getFromId(i,f.xaxis),l=g.getFromId(i,f.yaxis),h=f.aaxis,d=f.baxis,o=f.x,x=f.y,u=[];o&&m(o)&&u.push("x"),x&&m(x)&&u.push("y"),u.length&&p(f,h,d,"a","b",u);var T=f._a=f._a||f.a,_=f._b=f._b||f.b;o=f._x||f.x,x=f._y||f.y;var w={};f._cheater&&(o=b("index"===h.cheatertype?T.length:T,"index"===d.cheatertype?_.length:_,f.cheaterslope)),f._x=o=a(o),f._y=x=a(x),t(o,T,_),t(x,T,_),s(f),f.setScale();var S=y(o),R=y(x),O=.5*(S[1]-S[0]),C=.5*(S[1]+S[0]),D=.5*(R[1]-R[0]),B=.5*(R[1]+R[0]);return R=[B-1.3*D,B+1.3*D],f._extremes[c._id]=g.findExtremes(c,S=[C-1.3*O,C+1.3*O],{padded:!0}),f._extremes[l._id]=g.findExtremes(l,R,{padded:!0}),e(f,"a","b"),e(f,"b","a"),r(f,h),r(f,d),w.clipsegments=n(f._xctrl,f._yctrl,h,d),w.x=o,w.y=x,w.a=T,w.b=_,[w]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y){var e,r,n,a=[],t=!!b.smoothing,p=!!y.smoothing,s=g[0].length-1,i=g.length-1;for(e=0,r=[],n=[];e<=s;e++)r[e]=g[0][e],n[e]=m[0][e];for(a.push({x:r,y:n,bicubic:t}),e=0,r=[],n=[];e<=i;e++)r[e]=g[e][s],n[e]=m[e][s];for(a.push({x:r,y:n,bicubic:p}),e=s,r=[],n=[];e>=0;e--)r[s-e]=g[i][e],n[s-e]=m[i][e];for(a.push({x:r,y:n,bicubic:t}),e=i,r=[],n=[];e>=0;e--)r[i-e]=g[e][0],n[i-e]=m[e][0];return a.push({x:r,y:n,bicubic:p}),a}},{}],706:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../lib/extend").extendFlat;re.exports=function(b,y,e){var r,n,a,t,p,s,i,f,c,l,h,d,o,x,u=b["_"+y],T=b[y+"axis"],_=T._gridlines=[],w=T._minorgridlines=[],M=T._boundarylines=[],I=b["_"+e],S=b[e+"axis"];"array"===T.tickmode&&(T.tickvals=u.slice());var R=b._xctrl,O=b._yctrl,C=R[0].length,D=R.length,B=b._a.length,z=b._b.length;g.prepTicks(T),"array"===T.tickmode&&delete T.tickvals;var Y=T.smoothing?3:1;function G(te){var X,K,ae,U,V,q,ie,H,ee,Q,oe,le,de=[],fe=[],be={};if("b"===y)for(K=b.b2j(te),ae=Math.floor(Math.max(0,Math.min(z-2,K))),U=K-ae,be.length=z,be.crossLength=B,be.xy=function(he){return b.evalxy([],he,K)},be.dxy=function(he,_e){return b.dxydi([],he,ae,_e,U)},X=0;X<B;X++)q=Math.min(B-2,X),ie=X-q,H=b.evalxy([],X,K),S.smoothing&&X>0&&(ee=b.dxydi([],X-1,ae,0,U),de.push(V[0]+ee[0]/3),fe.push(V[1]+ee[1]/3),Q=b.dxydi([],X-1,ae,1,U),de.push(H[0]-Q[0]/3),fe.push(H[1]-Q[1]/3)),de.push(H[0]),fe.push(H[1]),V=H;else for(X=b.a2i(te),q=Math.floor(Math.max(0,Math.min(B-2,X))),ie=X-q,be.length=B,be.crossLength=z,be.xy=function(he){return b.evalxy([],X,he)},be.dxy=function(he,_e){return b.dxydj([],q,he,ie,_e)},K=0;K<z;K++)ae=Math.min(z-2,K),U=K-ae,H=b.evalxy([],X,K),S.smoothing&&K>0&&(oe=b.dxydj([],q,K-1,ie,0),de.push(V[0]+oe[0]/3),fe.push(V[1]+oe[1]/3),le=b.dxydj([],q,K-1,ie,1),de.push(H[0]-le[0]/3),fe.push(H[1]-le[1]/3)),de.push(H[0]),fe.push(H[1]),V=H;return be.axisLetter=y,be.axis=T,be.crossAxis=S,be.value=te,be.constvar=e,be.index=f,be.x=de,be.y=fe,be.smoothing=S.smoothing,be}function J(te){var X,K,ae,U,V,q=[],ie=[],H={};if(H.length=u.length,H.crossLength=I.length,"b"===y)for(ae=Math.max(0,Math.min(z-2,te)),V=Math.min(1,Math.max(0,te-ae)),H.xy=function(ee){return b.evalxy([],ee,te)},H.dxy=function(ee,Q){return b.dxydi([],ee,ae,Q,V)},X=0;X<C;X++)q[X]=R[te*Y][X],ie[X]=O[te*Y][X];else for(K=Math.max(0,Math.min(B-2,te)),U=Math.min(1,Math.max(0,te-K)),H.xy=function(ee){return b.evalxy([],te,ee)},H.dxy=function(ee,Q){return b.dxydj([],K,ee,U,Q)},X=0;X<D;X++)q[X]=R[X][te*Y],ie[X]=O[X][te*Y];return H.axisLetter=y,H.axis=T,H.crossAxis=S,H.value=u[te],H.constvar=e,H.index=te,H.x=q,H.y=ie,H.smoothing=S.smoothing,H}if("array"===T.tickmode){for(t=5e-15,s=(p=[Math.floor((u.length-1-T.arraytick0)/T.arraydtick*(1+t)),Math.ceil(-T.arraytick0/T.arraydtick/(1+t))].sort(function(te,X){return te-X}))[0]-1,i=p[1]+1,f=s;f<i;f++)(n=T.arraytick0+T.arraydtick*f)<0||n>u.length-1||_.push(m(J(n),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(f=s;f<i;f++)if(a=T.arraytick0+T.arraydtick*f,h=Math.min(a+T.arraydtick,u.length-1),!(a<0||a>u.length-1||h<0||h>u.length-1))for(d=u[a],o=u[h],r=0;r<T.minorgridcount;r++)(x=h-a)<=0||(l=d+(o-d)*(r+1)/(T.minorgridcount+1)*(T.arraydtick/x))<u[0]||l>u[u.length-1]||w.push(m(G(l),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash}));T.startline&&M.push(m(J(0),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&M.push(m(J(u.length-1),{color:T.endlinecolor,width:T.endlinewidth}))}else{for(t=5e-15,s=(p=[Math.floor((u[u.length-1]-T.tick0)/T.dtick*(1+t)),Math.ceil((u[0]-T.tick0)/T.dtick/(1+t))].sort(function(te,X){return te-X}))[0],i=p[1],f=s;f<=i;f++)_.push(m(G(c=T.tick0+T.dtick*f),{color:T.gridcolor,width:T.gridwidth,dash:T.griddash}));for(f=s-1;f<i+1;f++)for(c=T.tick0+T.dtick*f,r=0;r<T.minorgridcount;r++)(l=c+T.dtick*(r+1)/(T.minorgridcount+1))<u[0]||l>u[u.length-1]||w.push(m(G(l),{color:T.minorgridcolor,width:T.minorgridwidth,dash:T.minorgriddash}));T.startline&&M.push(m(G(u[0]),{color:T.startlinecolor,width:T.startlinewidth})),T.endline&&M.push(m(G(u[u.length-1]),{color:T.endlinecolor,width:T.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../lib/extend").extendFlat;re.exports=function(b,y){var e,r,n,a=y._labels=[],t=y._gridlines;for(e=0;e<t.length;e++)n=t[e],-1!==["start","both"].indexOf(y.showticklabels)&&(r=g.tickText(y,n.value),m(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:n.xy(0),dxy:n.dxy(0,0),axis:n.axis,length:n.crossAxis.length,font:n.axis.tickfont,isFirst:0===e,isLast:e===t.length-1}),a.push(r)),-1!==["end","both"].indexOf(y.showticklabels)&&(r=g.tickText(y,n.value),m(r,{endAnchor:!1,xy:n.xy(n.crossLength-1),dxy:n.dxy(n.crossLength-2,1),axis:n.axis,length:n.crossAxis.length,font:n.axis.tickfont,isFirst:0===e,isLast:e===t.length-1}),a.push(r))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y){var e=g[0]-m[0],r=g[1]-m[1],n=b[0]-m[0],a=b[1]-m[1],t=Math.pow(e*e+r*r,.25),p=Math.pow(n*n+a*a,.25),s=(p*p*e-t*t*n)*y,i=(p*p*r-t*t*a)*y,f=p*(t+p)*3,c=t*(t+p)*3;return[[m[0]+(f&&s/f),m[1]+(f&&i/f)],[m[0]-(c&&s/c),m[1]-(c&&i/c)]]}},{}],709:[function(v,re,ne){"use strict";var g=v("../../lib").isArrayOrTypedArray;re.exports=function(m,b,y){var e,r,n,a,t,p,s=[],i=g(m)?m.length:m,f=g(b)?b.length:b,c=g(m)?m:null,l=g(b)?b:null;c&&(n=(c.length-1)/(c[c.length-1]-c[0])/(i-1)),l&&(a=(l.length-1)/(l[l.length-1]-l[0])/(f-1));var h=1/0,d=-1/0;for(r=0;r<f;r++)for(s[r]=[],t=l?(l[r]-l[0])*a:r/(f-1),e=0;e<i;e++)p=(c?(c[e]-c[0])*n:e/(i-1))-t*y,h=Math.min(p,h),d=Math.max(p,d),s[r][e]=p;var o=1/(d-h),x=-h*o;for(r=0;r<f;r++)for(e=0;e<i;e++)s[r][e]=o*s[r][e]+x;return s}},{"../../lib":515}],710:[function(v,re,ne){"use strict";var g=v("./catmull_rom"),m=v("../../lib").ensureArray;function b(y,e,r){return[(2*(-.5*r[0]+1.5*e[0])+y[0])/3,(2*(-.5*r[1]+1.5*e[1])+y[1])/3]}re.exports=function(y,e,r,n,a,t){var p,s,i,f,c,l,h,d,o,x,u=r[0].length,T=r.length,_=a?3*u-2:u,w=t?3*T-2:T;for(y=m(y,w),e=m(e,w),i=0;i<w;i++)y[i]=m(y[i],_),e[i]=m(e[i],_);for(s=0,f=0;s<T;s++,f+=t?3:1)for(c=y[f],l=e[f],h=r[s],d=n[s],p=0,i=0;p<u;p++,i+=a?3:1)c[i]=h[p],l[i]=d[p];if(a)for(s=0,f=0;s<T;s++,f+=t?3:1){for(p=1,i=3;p<u-1;p++,i+=3)o=g([r[s][p-1],n[s][p-1]],[r[s][p],n[s][p]],[r[s][p+1],n[s][p+1]],a),y[f][i-1]=o[0][0],e[f][i-1]=o[0][1],y[f][i+1]=o[1][0],e[f][i+1]=o[1][1];x=b([y[f][0],e[f][0]],[y[f][2],e[f][2]],[y[f][3],e[f][3]]),y[f][1]=x[0],e[f][1]=x[1],x=b([y[f][_-1],e[f][_-1]],[y[f][_-3],e[f][_-3]],[y[f][_-4],e[f][_-4]]),y[f][_-2]=x[0],e[f][_-2]=x[1]}if(t)for(i=0;i<_;i++){for(f=3;f<w-3;f+=3)o=g([y[f-3][i],e[f-3][i]],[y[f][i],e[f][i]],[y[f+3][i],e[f+3][i]],t),y[f-1][i]=o[0][0],e[f-1][i]=o[0][1],y[f+1][i]=o[1][0],e[f+1][i]=o[1][1];x=b([y[0][i],e[0][i]],[y[2][i],e[2][i]],[y[3][i],e[3][i]]),y[1][i]=x[0],e[1][i]=x[1],x=b([y[w-1][i],e[w-1][i]],[y[w-3][i],e[w-3][i]],[y[w-4][i],e[w-4][i]]),y[w-2][i]=x[0],e[w-2][i]=x[1]}if(a&&t)for(f=1;f<w;f+=(f+1)%3==0?2:1){for(i=3;i<_-3;i+=3)o=g([y[f][i-3],e[f][i-3]],[y[f][i],e[f][i]],[y[f][i+3],e[f][i+3]],a),y[f][i-1]=.5*(y[f][i-1]+o[0][0]),e[f][i-1]=.5*(e[f][i-1]+o[0][1]),y[f][i+1]=.5*(y[f][i+1]+o[1][0]),e[f][i+1]=.5*(e[f][i+1]+o[1][1]);x=b([y[f][0],e[f][0]],[y[f][2],e[f][2]],[y[f][3],e[f][3]]),y[f][1]=.5*(y[f][1]+x[0]),e[f][1]=.5*(e[f][1]+x[1]),x=b([y[f][_-1],e[f][_-1]],[y[f][_-3],e[f][_-3]],[y[f][_-4],e[f][_-4]]),y[f][_-2]=.5*(y[f][_-2]+x[0]),e[f][_-2]=.5*(e[f][_-2]+x[1])}return[y,e]}},{"../../lib":515,"./catmull_rom":708}],711:[function(v,re,ne){"use strict";re.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(v,re,ne){"use strict";re.exports=function(g,m,b){return m&&b?function(y,e,r,n,a){var t,f,c;y||(y=[]),e*=3,r*=3;var l=n*n,h=1-n,d=h*h,o=h*n*2,x=-3*d,u=3*(d-o),T=3*(o-l),_=3*l,w=a*a,M=w*a,I=1-a,S=I*I,R=S*I;for(c=0;c<g.length;c++)t=x*(f=g[c])[r][e]+u*f[r][e+1]+T*f[r][e+2]+_*f[r][e+3],y[c]=R*t+3*(S*a*(x*f[r+1][e]+u*f[r+1][e+1]+T*f[r+1][e+2]+_*f[r+1][e+3])+I*w*(x*f[r+2][e]+u*f[r+2][e+1]+T*f[r+2][e+2]+_*f[r+2][e+3]))+M*(x*f[r+3][e]+u*f[r+3][e+1]+T*f[r+3][e+2]+_*f[r+3][e+3]);return y}:m?function(y,e,r,n,a){var t,s,i;y||(y=[]),e*=3;var f=n*n,c=1-n,l=c*c,h=c*n*2,d=-3*l,o=3*(l-h),x=3*(h-f),u=3*f,T=1-a;for(s=0;s<g.length;s++)t=d*(i=g[s])[r][e]+o*i[r][e+1]+x*i[r][e+2]+u*i[r][e+3],y[s]=T*t+a*(d*i[r+1][e]+o*i[r+1][e+1]+x*i[r+1][e+2]+u*i[r+1][e+3]);return y}:b?function(y,e,r,n,a){var t,f,c;y||(y=[]),r*=3;var l=a*a,h=l*a,d=1-a,o=d*d,x=o*d;for(f=0;f<g.length;f++)t=(c=g[f])[r][e+1]-c[r][e],y[f]=x*t+3*(o*a*(c[r+1][e+1]-c[r+1][e])+d*l*(c[r+2][e+1]-c[r+2][e]))+h*(c[r+3][e+1]-c[r+3][e]);return y}:function(y,e,r,n,a){var t,s,i;y||(y=[]);var f=1-a;for(s=0;s<g.length;s++)t=(i=g[s])[r][e+1]-i[r][e],y[s]=f*t+a*(i[r+1][e+1]-i[r+1][e]);return y}}},{}],713:[function(v,re,ne){"use strict";re.exports=function(g,m,b){return m&&b?function(y,e,r,n,a){var t,f,c;y||(y=[]),e*=3,r*=3;var l=n*n,h=l*n,d=1-n,o=d*d,x=o*d,u=a*a,T=1-a,_=T*T,w=T*a*2,M=-3*_,I=3*(_-w),S=3*(w-u),R=3*u;for(c=0;c<g.length;c++)t=M*(f=g[c])[r][e]+I*f[r+1][e]+S*f[r+2][e]+R*f[r+3][e],y[c]=x*t+3*(o*n*(M*f[r][e+1]+I*f[r+1][e+1]+S*f[r+2][e+1]+R*f[r+3][e+1])+d*l*(M*f[r][e+2]+I*f[r+1][e+2]+S*f[r+2][e+2]+R*f[r+3][e+2]))+h*(M*f[r][e+3]+I*f[r+1][e+3]+S*f[r+2][e+3]+R*f[r+3][e+3]);return y}:m?function(y,e,r,n,a){var t,f,c;y||(y=[]),e*=3;var l=a*a,h=l*a,d=1-a,o=d*d,x=o*d;for(f=0;f<g.length;f++)t=(c=g[f])[r+1][e]-c[r][e],y[f]=x*t+3*(o*a*(c[r+1][e+1]-c[r][e+1])+d*l*(c[r+1][e+2]-c[r][e+2]))+h*(c[r+1][e+3]-c[r][e+3]);return y}:b?function(y,e,r,n,a){var t,s,i;y||(y=[]),r*=3;var f=1-n,c=a*a,l=1-a,h=l*l,d=l*a*2,o=-3*h,x=3*(h-d),u=3*(d-c),T=3*c;for(s=0;s<g.length;s++)t=o*(i=g[s])[r][e]+x*i[r+1][e]+u*i[r+2][e]+T*i[r+3][e],y[s]=f*t+n*(o*i[r][e+1]+x*i[r+1][e+1]+u*i[r+2][e+1]+T*i[r+3][e+1]);return y}:function(y,e,r,n,a){var t,s,i;y||(y=[]);var f=1-n;for(s=0;s<g.length;s++)t=(i=g[s])[r+1][e]-i[r][e],y[s]=f*t+n*(i[r+1][e+1]-i[r][e+1]);return y}}},{}],714:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e){var r=m-2,n=b-2;return y&&e?function(a,t,p){var s,l,h;a||(a=[]);var d=Math.max(0,Math.min(Math.floor(t),r)),o=Math.max(0,Math.min(Math.floor(p),n)),x=Math.max(0,Math.min(1,t-d)),u=Math.max(0,Math.min(1,p-o));d*=3,o*=3;var T=x*x,_=T*x,w=1-x,M=w*w,I=M*w,S=u*u,R=S*u,O=1-u,C=O*O,D=C*O;for(h=0;h<g.length;h++)s=I*(l=g[h])[o][d]+3*(M*x*l[o][d+1]+w*T*l[o][d+2])+_*l[o][d+3],a[h]=D*s+3*(C*u*(I*l[o+1][d]+3*(M*x*l[o+1][d+1]+w*T*l[o+1][d+2])+_*l[o+1][d+3])+O*S*(I*l[o+2][d]+3*(M*x*l[o+2][d+1]+w*T*l[o+2][d+2])+_*l[o+2][d+3]))+R*(I*l[o+3][d]+3*(M*x*l[o+3][d+1]+w*T*l[o+3][d+2])+_*l[o+3][d+3]);return a}:y?function(a,t,p){a||(a=[]);var s,l,h,d=Math.max(0,Math.min(Math.floor(t),r)),o=Math.max(0,Math.min(Math.floor(p),n)),x=Math.max(0,Math.min(1,t-d)),u=Math.max(0,Math.min(1,p-o));d*=3;var T=x*x,_=T*x,w=1-x,M=w*w,I=M*w,S=1-u;for(l=0;l<g.length;l++)s=S*(h=g[l])[o][d]+u*h[o+1][d],a[l]=I*s+3*(M*x*(S*h[o][d+1]+u*h[o+1][d+1])+w*T*(S*h[o][d+2]+u*h[o+1][d+1]))+_*(S*h[o][d+3]+u*h[o+1][d+1]);return a}:e?function(a,t,p){a||(a=[]);var s,l,h,d=Math.max(0,Math.min(Math.floor(t),r)),o=Math.max(0,Math.min(Math.floor(p),n)),x=Math.max(0,Math.min(1,t-d)),u=Math.max(0,Math.min(1,p-o));o*=3;var T=u*u,_=T*u,w=1-u,M=w*w,I=M*w,S=1-x;for(l=0;l<g.length;l++)s=S*(h=g[l])[o][d]+x*h[o][d+1],a[l]=I*s+3*(M*u*(S*h[o+1][d]+x*h[o+1][d+1])+w*T*(S*h[o+2][d]+x*h[o+2][d+1]))+_*(S*h[o+3][d]+x*h[o+3][d+1]);return a}:function(a,t,p){a||(a=[]);var s,f,c,l=Math.max(0,Math.min(Math.floor(t),r)),h=Math.max(0,Math.min(Math.floor(p),n)),d=Math.max(0,Math.min(1,t-l)),o=Math.max(0,Math.min(1,p-h)),x=1-o,u=1-d;for(f=0;f<g.length;f++)s=u*(c=g[f])[h][l]+d*c[h][l+1],a[f]=x*s+o*(u*c[h+1][l]+d*c[h+1][l+1]);return a}}},{}],715:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./xy_defaults"),b=v("./ab_defaults"),y=v("./attributes"),e=v("../../components/color/attributes");re.exports=function(r,n,a,t){function p(i,f){return g.coerce(r,n,y,i,f)}n._clipPathId="clip"+n.uid+"carpet";var s=p("color",e.defaultLine);g.coerceFont(p,"font"),p("carpet"),b(r,n,t,p,s),n.a&&n.b?(n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0),m(r,n,p)||(n.visible=!1),n._cheater&&p("cheaterslope")):n.visible=!1}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),plot:v("./plot"),calc:v("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(v,re,ne){"use strict";re.exports=function(g,m){for(var b,y=g._fullData.length,e=0;e<y;e++){var r=g._fullData[e];if(r.index!==m.index&&"carpet"===r.type&&(b||(b=r),r.carpet===m.carpet))return r}return b}},{}],718:[function(v,re,ne){"use strict";re.exports=function(g,m,b){if(0===g.length)return"";var y,e=[],r=b?3:1;for(y=0;y<g.length;y+=r)e.push(g[y]+","+m[y]),b&&y<g.length-r&&(e.push("C"),e.push([g[y+1]+","+m[y+1],g[y+2]+","+m[y+2]+" "].join(" ")));return e.join(b?"":"L")}},{}],719:[function(v,re,ne){"use strict";var g=v("../../lib").isArrayOrTypedArray;re.exports=function(m,b,y){var e;for(g(m)?m.length>b.length&&(m=m.slice(0,b.length)):m=[],e=0;e<b.length;e++)m[e]=y(b[e]);return m}},{"../../lib":515}],720:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e,r){var n=e[0]*g.dpdx(m),a=e[1]*g.dpdy(b),t=1,p=1;if(r){var s=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(r[0]*r[0]+r[1]*r[1]);p=Math.max(0,(e[0]*r[0]+e[1]*r[1])/s/i)}var c=180*Math.atan2(a,n)/Math.PI;return c<-90?(c+=180,t=-t):c>90&&(c-=180,t=-t),{angle:c,flip:t,p:g.c2p(y,m,b),offsetMultplier:p}}},{}],721:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("./map_1d_array"),y=v("./makepath"),e=v("./orient_text"),r=v("../../lib/svg_text_utils"),n=v("../../lib"),a=n.strRotate,t=n.strTranslate,p=v("../../constants/alignment");function s(h,d,o,x,u,T){var _="const-"+u+"-lines",w=o.selectAll("."+_).data(T);w.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),w.each(function(M){var I=M,R=I.y,O=b([],I.x,h.c2p),C=b([],R,d.c2p),D="M"+y(O,C,I.smoothing);g.select(this).attr("d",D).style("stroke-width",I.width).style("stroke",I.color).style("stroke-dasharray",m.dashStyle(I.dash,I.width)).style("fill","none")}),w.exit().remove()}function i(h,d,o,x,u,T,_,w){var M=T.selectAll("text."+w).data(_);M.enter().append("text").classed(w,!0);var I=0,S={};return M.each(function(R,O){var C;if("auto"===R.axis.tickangle)C=e(x,d,o,R.xy,R.dxy);else{var D=(R.axis.tickangle+180)*Math.PI/180;C=e(x,d,o,R.xy,[Math.cos(D),Math.sin(D)])}O||(S={angle:C.angle,flip:C.flip});var B=(R.endAnchor?-1:1)*C.flip,z=g.select(this).attr({"text-anchor":B>0?"start":"end","data-notex":1}).call(m.font,R.font).text(R.text).call(r.convertToTspans,h),Y=m.bBox(this);z.attr("transform",t(C.p[0],C.p[1])+a(C.angle)+t(R.axis.labelpadding*B,.3*Y.height)),I=Math.max(I,Y.width+R.axis.labelpadding)}),M.exit().remove(),S.maxExtent=I,S}re.exports=function(h,d,o,x){var u=d.xaxis,T=d.yaxis,_=h._fullLayout._clips;n.makeTraceGroups(x,o,"trace").each(function(w){var M=g.select(this),I=w[0],S=I.trace,R=S.aaxis,O=S.baxis,C=n.ensureSingle(M,"g","minorlayer"),D=n.ensureSingle(M,"g","majorlayer"),B=n.ensureSingle(M,"g","boundarylayer"),z=n.ensureSingle(M,"g","labellayer");M.style("opacity",S.opacity),s(u,T,D,0,"a",R._gridlines),s(u,T,D,0,"b",O._gridlines),s(u,T,C,0,"a",R._minorgridlines),s(u,T,C,0,"b",O._minorgridlines),s(u,T,B,0,"a-boundary",R._boundarylines),s(u,T,B,0,"b-boundary",O._boundarylines);var J,te,X,ae,U,V,q,ie,H,ee,Q,oe,le,de,fe,Y=i(h,u,T,S,0,z,R._labels,"a-label"),G=i(h,u,T,S,0,z,O._labels,"b-label");J=h,te=z,X=S,ae=u,U=T,V=Y,q=G,oe=n.aggNums(Math.min,null,X.a),le=n.aggNums(Math.max,null,X.a),de=n.aggNums(Math.min,null,X.b),fe=n.aggNums(Math.max,null,X.b),ee=X.ab2xy(ie=.5*(oe+le),H=de,!0),Q=X.dxyda_rough(ie,H),void 0===V.angle&&n.extendFlat(V,e(X,ae,U,ee,X.dxydb_rough(ie,H))),l(J,te,X,0,ee,Q,X.aaxis,ae,U,V,"a-title"),ee=X.ab2xy(ie=oe,H=.5*(de+fe),!0),Q=X.dxydb_rough(ie,H),void 0===q.angle&&n.extendFlat(q,e(X,ae,U,ee,X.dxyda_rough(ie,H))),l(J,te,X,0,ee,Q,X.baxis,ae,U,q,"b-title"),function(J,te,X,K,ae){var U,V,q,ie,H=X.select("#"+J._clipPathId);H.size()||(H=X.append("clipPath").classed("carpetclip",!0));var ee=n.ensureSingle(H,"path","carpetboundary"),Q=te.clipsegments,oe=[];for(ie=0;ie<Q.length;ie++)V=b([],(U=Q[ie]).x,K.c2p),q=b([],U.y,ae.c2p),oe.push(y(V,q,U.bicubic));var le="M"+oe.join("L")+"Z";H.attr("id",J._clipPathId),ee.attr("d",le)}(S,I,_,u,T)})};var f=p.LINE_SPACING,c=(1-p.MID_SHIFT)/f+1;function l(h,d,o,x,u,T,_,w,M,I,S){var R=[];_.title.text&&R.push(_.title.text);var O=d.selectAll("text."+S).data(R),C=I.maxExtent;O.enter().append("text").classed(S,!0),O.each(function(){var D=e(o,w,M,u,T);-1===["start","both"].indexOf(_.showticklabels)&&(C=0);var B=_.title.font.size;C+=B+_.title.offset;var z=(I.angle+(I.flip<0?180:0)-D.angle+450)%360,Y=z>90&&z<270,G=g.select(this);G.text(_.title.text).call(r.convertToTspans,h),Y&&(C=(-r.lineCount(G)+c)*f*B-C),G.attr("transform",t(D.p[0],D.p[1])+a(D.angle)+t(0,C)).attr("text-anchor","middle").call(m.font,_.title.font)}),O.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(v,re,ne){"use strict";var g=v("./constants"),m=v("../../lib/search").findBin,b=v("./compute_control_points"),y=v("./create_spline_evaluator"),e=v("./create_i_derivative_evaluator"),r=v("./create_j_derivative_evaluator");re.exports=function(n){var a=n._a,t=n._b,p=a.length,s=t.length,i=n.aaxis,f=n.baxis,c=a[0],l=a[p-1],h=t[0],d=t[s-1],o=a[a.length-1]-a[0],x=t[t.length-1]-t[0],u=o*g.RELATIVE_CULL_TOLERANCE,T=x*g.RELATIVE_CULL_TOLERANCE;c-=u,l+=u,h-=T,d+=T,n.isVisible=function(_,w){return _>c&&_<l&&w>h&&w<d},n.isOccluded=function(_,w){return _<c||_>l||w<h||w>d},n.setScale=function(){var M=b(n._xctrl,n._yctrl,n._x,n._y,i.smoothing,f.smoothing);n._xctrl=M[0],n._yctrl=M[1],n.evalxy=y([n._xctrl,n._yctrl],p,s,i.smoothing,f.smoothing),n.dxydi=e([n._xctrl,n._yctrl],i.smoothing,f.smoothing),n.dxydj=r([n._xctrl,n._yctrl],i.smoothing,f.smoothing)},n.i2a=function(_){var w=Math.max(0,Math.floor(_[0]),p-2),M=_[0]-w;return(1-M)*a[w]+M*a[w+1]},n.j2b=function(_){var w=Math.max(0,Math.floor(_[1]),p-2),M=_[1]-w;return(1-M)*t[w]+M*t[w+1]},n.ij2ab=function(_){return[n.i2a(_[0]),n.j2b(_[1])]},n.a2i=function(_){var w=Math.max(0,Math.min(m(_,a),p-2)),M=a[w];return Math.max(0,Math.min(p-1,w+(_-M)/(a[w+1]-M)))},n.b2j=function(_){var w=Math.max(0,Math.min(m(_,t),s-2)),M=t[w];return Math.max(0,Math.min(s-1,w+(_-M)/(t[w+1]-M)))},n.ab2ij=function(_){return[n.a2i(_[0]),n.b2j(_[1])]},n.i2c=function(_,w){return n.evalxy([],_,w)},n.ab2xy=function(_,w,M){if(!M&&(_<a[0]||_>a[p-1]|w<t[0]||w>t[s-1]))return[!1,!1];var I=n.a2i(_),S=n.b2j(w),R=n.evalxy([],I,S);if(M){var O,C,D,B,z=0,Y=0,G=[];_<a[0]?(O=0,C=0,z=(_-a[0])/(a[1]-a[0])):_>a[p-1]?(O=p-2,C=1,z=(_-a[p-1])/(a[p-1]-a[p-2])):C=I-(O=Math.max(0,Math.min(p-2,Math.floor(I)))),w<t[0]?(D=0,B=0,Y=(w-t[0])/(t[1]-t[0])):w>t[s-1]?(D=s-2,B=1,Y=(w-t[s-1])/(t[s-1]-t[s-2])):B=S-(D=Math.max(0,Math.min(s-2,Math.floor(S)))),z&&(n.dxydi(G,O,D,C,B),R[0]+=G[0]*z,R[1]+=G[1]*z),Y&&(n.dxydj(G,O,D,C,B),R[0]+=G[0]*Y,R[1]+=G[1]*Y)}return R},n.c2p=function(_,w,M){return[w.c2p(_[0]),M.c2p(_[1])]},n.p2x=function(_,w,M){return[w.p2c(_[0]),M.p2c(_[1])]},n.dadi=function(_){var w=Math.max(0,Math.min(a.length-2,_));return a[w+1]-a[w]},n.dbdj=function(_){var w=Math.max(0,Math.min(t.length-2,_));return t[w+1]-t[w]},n.dxyda=function(_,w,M,I){var S=n.dxydi(null,_,w,M,I),R=n.dadi(_,M);return[S[0]/R,S[1]/R]},n.dxydb=function(_,w,M,I){var S=n.dxydj(null,_,w,M,I),R=n.dbdj(w,I);return[S[0]/R,S[1]/R]},n.dxyda_rough=function(_,w,M){var I=o*(M||.1),S=n.ab2xy(_+I,w,!0),R=n.ab2xy(_-I,w,!0);return[.5*(S[0]-R[0])/I,.5*(S[1]-R[1])/I]},n.dxydb_rough=function(_,w,M){var I=x*(M||.1),S=n.ab2xy(_,w+I,!0),R=n.ab2xy(_,w-I,!0);return[.5*(S[0]-R[0])/I,.5*(S[1]-R[1])/I]},n.dpdx=function(_){return _._m},n.dpdy=function(_){return _._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b,y){var e,r,n,a=[],t=[],p=m[0].length,s=m.length;var f,c,l,h,d,o,x,u,T,_,te,X,K,ae,U,M=0;for(e=0;e<p;e++)for(r=0;r<s;r++)void 0===m[r][e]&&(a.push(e),t.push(r),m[r][e]=(X=r,K=void 0,ae=void 0,U=void 0,ae=0,U=0,(te=e)>0&&void 0!==(K=m[X][te-1])&&(U++,ae+=K),te<p-1&&void 0!==(K=m[X][te+1])&&(U++,ae+=K),X>0&&void 0!==(K=m[X-1][te])&&(U++,ae+=K),X<s-1&&void 0!==(K=m[X+1][te])&&(U++,ae+=K),ae/Math.max(1,U))),M=Math.max(M,Math.abs(m[r][e]));if(!a.length)return m;var I=0,S=0,R=a.length;do{for(I=0,n=0;n<R;n++){r=t[n];var C,D,B,z,Y,G=0,J=0;0===(e=a[n])?(D=b[z=Math.min(p-1,2)],J+=(C=m[r][1])+(C-m[r][z])*(b[0]-(B=b[1]))/(B-D),G++):e===p-1&&(D=b[z=Math.max(0,p-3)],J+=(C=m[r][p-2])+(C-m[r][z])*(b[p-1]-(B=b[p-2]))/(B-D),G++),(0===e||e===p-1)&&r>0&&r<s-1&&(J+=((c=y[r]-y[r-1])*m[r+1][e]+(f=y[r+1]-y[r])*m[r-1][e])/(c+f),G++),0===r?(D=y[Y=Math.min(s-1,2)],J+=(C=m[1][e])+(C-m[Y][e])*(y[0]-(B=y[1]))/(B-D),G++):r===s-1&&(D=y[Y=Math.max(0,s-3)],J+=(C=m[s-2][e])+(C-m[Y][e])*(y[s-1]-(B=y[s-2]))/(B-D),G++),(0===r||r===s-1)&&e>0&&e<p-1&&(J+=((c=b[e]-b[e-1])*m[r][e+1]+(f=b[e+1]-b[e])*m[r][e-1])/(c+f),G++),G?J/=G:(u=(d=y[r+1]-y[r])*(o=y[r]-y[r-1])*(d+o),J=((x=(l=b[e+1]-b[e])*(h=b[e]-b[e-1])*(l+h))*(o*m[r+1][e]+d*m[r-1][e])+u*(h*m[r][e+1]+l*m[r][e-1]))/(u*(h+l)+x*(o+d))),I+=(_=(T=J-m[r][e])/M)*_,m[r][e]+=T*(1+(G?0:.85))}I=Math.sqrt(I)}while(S++<100&&I>1e-5);return g.log("Smoother converged to",I,"after",S,"iterations"),m}},{"../../lib":515}],724:[function(v,re,ne){"use strict";var g=v("../../lib").isArray1D;re.exports=function(m,b,y){var e=y("x"),r=e&&e.length,n=y("y"),a=n&&n.length;if(!r&&!a)return!1;if(b._cheater=!e,r&&!g(e)||a&&!g(n))b._length=null;else{var t=r?e.length:1/0;a&&(t=Math.min(t,n.length)),b.a&&b.a.length&&(t=Math.min(t,b.a.length)),b.b&&b.b.length&&(t=Math.min(t,b.b.length)),b._length=t}return!0}},{"../../lib":515}],725:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../scattergeo/attributes"),b=v("../../components/colorscale/attributes"),y=v("../../plots/attributes"),e=v("../../components/color/attributes").defaultLine,r=v("../../lib/extend").extendFlat,n=m.marker.line;re.exports=r({locations:{valType:"data_array",editType:"calc"},locationmode:m.locationmode,z:{valType:"data_array",editType:"calc"},geojson:r({},m.geojson,{}),featureidkey:m.featureidkey,text:r({},m.text,{}),hovertext:r({},m.hovertext,{}),marker:{line:{color:r({},n.color,{dflt:e}),width:r({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:m.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:r({},y.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:g(),showlegend:r({},y.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../constants/numerical").BADNUM,b=v("../../components/colorscale/calc"),y=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection");function r(n){return n&&"string"==typeof n}re.exports=function(n,a){var t,p=a._length,s=new Array(p);t=a.geojson?function(h){return r(h)||g(h)}:r;for(var i=0;i<p;i++){var f=s[i]={},c=a.locations[i],l=a.z[i];t(c)&&g(l)?(f.loc=c,f.z=l):(f.loc=null,f.z=m),f.index=i}return y(s,a),b(n,a,{vals:a.z,containerStr:"",cLetter:"z"}),e(s,a),s}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/defaults"),b=v("./attributes");re.exports=function(y,e,r,n){function a(f,c){return g.coerce(y,e,b,f,c)}var t=a("locations"),p=a("z");if(t&&t.length&&g.isArrayOrTypedArray(p)&&p.length){e._length=Math.min(t.length,p.length);var s,i=a("geojson");("string"==typeof i&&""!==i||g.isPlainObject(i))&&(s="geojson-id"),"geojson-id"===a("locationmode",s)&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),m(y,e,n,a,{prefix:"",cLetter:"z"}),g.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e){g.location=m.location,g.z=m.z;var r=y[e];return r.fIn&&r.fIn.properties&&(g.properties=r.fIn.properties),g.ct=r.ct,g}},{}],729:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("./attributes"),b=v("../../lib").fillText;re.exports=function(y,e,r){var n,a,t,p,s=y.cd,i=s[0].trace,f=y.subplot,c=[e,r],l=[e+360,r];for(a=0;a<s.length;a++)if(p=!1,(n=s[a])._polygons){for(t=0;t<n._polygons.length;t++)n._polygons[t].contains(c)&&(p=!p),n._polygons[t].contains(l)&&(p=!p);if(p)break}if(p&&n)return y.x0=y.x1=y.xa.c2p(n.ct),y.y0=y.y1=y.ya.c2p(n.ct),y.index=n.index,y.location=n.loc,y.z=n.z,y.zLabel=g.tickText(f.mockAxis,f.mockAxis.c2l(n.z),"hover").text,y.hovertemplate=n.hovertemplate,function(h,d,o){if(!d.hovertemplate){var x=o.hi||d.hoverinfo,u=String(o.loc),T="all"===x?m.hoverinfo.flags:x.split("+"),_=-1!==T.indexOf("name"),w=-1!==T.indexOf("location"),M=-1!==T.indexOf("z"),I=-1!==T.indexOf("text"),S=[];!_&&w?h.nameOverride=u:(_&&(h.nameOverride=d.name),w&&S.push(u)),M&&S.push(h.zLabel),I&&b(o,d,S),h.extraText=S.join("<br>")}}(y,i,n),[y]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"choropleth",basePlotModule:v("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../lib/geo_location_utils"),y=v("../../lib/topojson_utils").getTopojsonFeatures,e=v("../../plots/cartesian/autorange").findExtremes,r=v("./style").style;re.exports={calcGeoJSON:function(n,a){for(var t=n[0].trace,p=a[t.geo],s=p._subplot,i=t.locationmode,f=t._length,c="geojson-id"===i?b.extractTraceFeature(n):y(t,s.topojson),l=[],h=[],d=0;d<f;d++){var o=n[d],x="geojson-id"===i?o.fOut:b.locationToFeature(i,o.loc,c);if(x){o.geojson=x,o.ct=x.properties.ct,o._polygons=b.feature2polygons(x);var u=b.computeBbox(x);l.push(u[0],u[2]),h.push(u[1],u[3])}else o.geojson=null}if("geojson"===p.fitbounds&&"geojson-id"===i){var T=b.computeBbox(b.getTraceGeojson(t));l=[T[0],T[2]],h=[T[1],T[3]]}var _={padded:!0};t._extremes.lon=e(p.lonaxis._ax,l,_),t._extremes.lat=e(p.lataxis._ax,h,_)},plot:function(n,a,t){var p=a.layers.backplot.select(".choroplethlayer");m.makeTraceGroups(p,t,"trace choropleth").each(function(s){var i=g.select(this).selectAll("path.choroplethlocation").data(m.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),r(n,s)})}}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(v,re,ne){"use strict";re.exports=function(g,m){var b,y,e,r,n,a=g.cd,t=g.xaxis,p=g.yaxis,s=[];if(!1===m)for(b=0;b<a.length;b++)a[b].selected=0;else for(b=0;b<a.length;b++)(e=(y=a[b]).ct)&&(r=t.c2p(e),n=p.c2p(e),m.contains([r,n],null,b,g)?(s.push({pointNumber:b,lon:e[0],lat:e[1]}),y.selected=1):y.selected=0);return s}},{}],733:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/color"),b=v("../../components/drawing"),y=v("../../components/colorscale");function e(r,n){var a=n[0].trace,t=n[0].node3.selectAll(".choroplethlocation"),p=a.marker||{},s=p.line||{},i=y.makeColorScaleFuncFromTrace(a);t.each(function(f){g.select(this).attr("fill",i(f.z)).call(m.stroke,f.mlc||s.color).call(b.dashLine,"",f.mlw||s.width||0).style("opacity",p.opacity)}),b.selectedPointStyle(t,a,r)}re.exports={style:function(r,n){n&&e(r,n)},styleOnSelect:function(r,n){var t=n[0].trace;t.selectedpoints?b.selectedPointStyle(n[0].node3.selectAll(".choroplethlocation"),t,r):e(r,n)}}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(v,re,ne){"use strict";var g=v("../choropleth/attributes"),m=v("../../components/colorscale/attributes"),b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat;re.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},g.featureidkey,{}),below:{valType:"string",editType:"plot"},text:g.text,hovertext:g.hovertext,marker:{line:{color:e({},g.marker.line.color,{editType:"plot"}),width:e({},g.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},g.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},g.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},g.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:g.hoverinfo,hovertemplate:b({},{keys:["properties"]}),showlegend:e({},y.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../components/colorscale"),y=v("../../components/drawing"),e=v("../../lib/geojson_utils").makeBlank,r=v("../../lib/geo_location_utils");function n(a){var t,p=a[0].trace,s=p._opts;if(p.selectedpoints){for(var i=y.makeSelectedPointStyleFns(p),f=0;f<a.length;f++){var c=a[f];c.fOut&&(c.fOut.properties.mo2=i.selectedOpacityFn(c))}t={type:"identity",property:"mo2"}}else t=m.isArrayOrTypedArray(p.marker.opacity)?{type:"identity",property:"mo"}:p.marker.opacity;return m.extendFlat(s.fill.paint,{"fill-opacity":t}),m.extendFlat(s.line.paint,{"line-opacity":t}),s}re.exports={convert:function(a){var t=a[0].trace,p=!0===t.visible&&0!==t._length,s={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},f=t._opts={fill:s,line:i,geojson:e()};if(!p)return f;var c=r.extractTraceFeature(a);if(!c)return f;var l,h,d,o=b.makeColorScaleFuncFromTrace(t),x=t.marker,u=x.line||{};m.isArrayOrTypedArray(x.opacity)&&(l=function(S){var R=S.mo;return g(R)?+m.constrain(R,0,1):0}),m.isArrayOrTypedArray(u.color)&&(h=function(S){return S.mlc}),m.isArrayOrTypedArray(u.width)&&(d=function(S){return S.mlw});for(var T=0;T<a.length;T++){var _=a[T],w=_.fOut;if(w){var M=w.properties;M.fc=o(_.z),l&&(M.mo=l(_)),h&&(M.mlc=h(_)),d&&(M.mlw=d(_)),_.ct=M.ct,_._polygons=r.feature2polygons(w)}}var I=l?{type:"identity",property:"mo"}:x.opacity;return m.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":I}),m.extendFlat(i.paint,{"line-color":h?{type:"identity",property:"mlc"}:u.color,"line-width":d?{type:"identity",property:"mlw"}:u.width,"line-opacity":I}),s.layout.visibility="visible",i.layout.visibility="visible",f.geojson={type:"FeatureCollection",features:c},n(a),f},convertOnSelect:n}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/defaults"),b=v("./attributes");re.exports=function(y,e,r,n){function a(i,f){return g.coerce(y,e,b,i,f)}var t=a("locations"),p=a("z"),s=a("geojson");g.isArrayOrTypedArray(t)&&t.length&&g.isArrayOrTypedArray(p)&&p.length&&("string"==typeof s&&""!==s||g.isPlainObject(s))?(a("featureidkey"),e._length=Math.min(t.length,p.length),a("below"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),m(y,e,n,a,{prefix:"",cLetter:"z"}),g.coerceSelectionMarkerOpacity(e,a)):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../choropleth/calc"),plot:v("./plot"),hoverPoints:v("../choropleth/hover"),eventData:v("../choropleth/event_data"),selectPoints:v("../choropleth/select"),styleOnSelect:function(g,m){m&&m[0].trace._glTrace.updateOnSelect(m)},getBelow:function(g,m){for(var b=m.getMapLayers(),y=b.length-2;y>=0;y--){var e=b[y].id;if("string"==typeof e&&0===e.indexOf("water"))for(var r=y+1;r<b.length;r++)if("string"==typeof(e=b[r].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(v,re,ne){"use strict";var g=v("./convert").convert,m=v("./convert").convertOnSelect,b=v("../../plots/mapbox/constants").traceLayerPrefix;function y(r,n){this.type="choroplethmapbox",this.subplot=r,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",b+n+"-fill"],["line",b+n+"-line"]],this.below=null}var e=y.prototype;e.update=function(r){this._update(g(r))},e.updateOnSelect=function(r){this._update(m(r))},e._update=function(r){var n=this.subplot,a=this.layerList,t=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(r.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(r,t),this.below=t);for(var p=0;p<a.length;p++){var s=a[p],f=s[1],c=r[s[0]];n.setOptions(f,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&n.setOptions(f,"setPaintProperty",c.paint)}},e._addLayers=function(r,n){for(var a=this.subplot,t=this.layerList,p=this.sourceId,s=0;s<t.length;s++){var i=t[s],f=i[0],c=r[f];a.addLayer({type:f,id:i[1],source:p,layout:c.layout,paint:c.paint},n)}},e._removeLayers=function(){for(var r=this.subplot.map,n=this.layerList,a=n.length-1;a>=0;a--)r.removeLayer(n[a][1])},e.dispose=function(){var r=this.subplot.map;this._removeLayers(),r.removeSource(this.sourceId)},re.exports=function(r,n){var a=n[0].trace,t=new y(r,a.uid),p=t.sourceId,s=g(n),i=t.below=r.belowLookup["trace-"+a.uid];return r.map.addSource(p,{type:"geojson",data:s.geojson}),t._addLayers(s,i),n[0].trace._glTrace=t,t}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../mesh3d/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["norm"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(n,g("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){n[a]=y[a]}),n.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,re.exports=n},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/calc");re.exports=function(m,b){for(var y=b.u,e=b.v,r=b.w,n=Math.min(b.x.length,b.y.length,b.z.length,y.length,e.length,r.length),a=-1/0,t=1/0,p=0;p<n;p++){var s=y[p],i=e[p],f=r[p],c=Math.sqrt(s*s+i*i+f*f);a=Math.max(a,c),t=Math.min(t,c)}b._len=n,b._normMax=a,g(m,b,{vals:[t,a],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_cone3d,m=v("../../../stackgl_modules").gl_cone3d.createConeMesh,b=v("../../lib").simpleMap,y=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,r=v("../../plots/gl3d/zip3");function n(f,c){this.scene=f,this.uid=c,this.mesh=null,this.data=null}var a=n.prototype;a.handlePick=function(f){if(f.object===this.mesh){var c=f.index=f.data.index,o=this.data.u[c],x=this.data.v[c],u=this.data.w[c];f.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c],o,x,u,Math.sqrt(o*o+x*x+u*u)];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&void 0!==T[c]?f.textLabel=T[c]:T&&(f.textLabel=T),!0}};var t={xaxis:0,yaxis:1,zaxis:2},p={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function i(f,c){var l=f.fullSceneLayout,h=f.dataScale,d={};function o(_,w){var M=l[w],I=h[t[w]];return b(_,function(S){return M.d2l(S)*I})}d.vectors=r(o(c.u,"xaxis"),o(c.v,"yaxis"),o(c.w,"zaxis"),c._len),d.positions=r(o(c.x,"xaxis"),o(c.y,"yaxis"),o(c.z,"zaxis"),c._len);var x=e(c);d.colormap=y(c),d.vertexIntensityBounds=[x.min/c._normMax,x.max/c._normMax],d.coneOffset=p[c.anchor],d.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var u=g(d),T=c.lightposition;return u.lightPosition=[T.x,T.y,T.z],u.ambient=c.lighting.ambient,u.diffuse=c.lighting.diffuse,u.specular=c.lighting.specular,u.roughness=c.lighting.roughness,u.fresnel=c.lighting.fresnel,u.opacity=c.opacity,c._pad=s[c.anchor]*u.vectorScale*u.coneScale*c._normMax,u}a.update=function(f){this.data=f;var c=i(this.scene,f);this.mesh.update(c)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},re.exports=function(f,c){var l=f.glplot.gl,h=i(f,c),d=m(l,h),o=new n(f,c.uid);return o.mesh=d,o.data=c,d._trace=o,f.glplot.add(d),o}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/defaults"),b=v("./attributes");re.exports=function(y,e,r,n){function a(l,h){return g.coerce(y,e,b,l,h)}var t=a("u"),p=a("v"),s=a("w"),i=a("x"),f=a("y"),c=a("z");t&&t.length&&p&&p.length&&s&&s.length&&i&&i.length&&f&&f.length&&c&&c.length?(a("sizeref"),a("sizemode"),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),m(y,e,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"cone",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),eventData:function(g,m){return g.norm=m.traceCoordinate[6],g},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(v,re,ne){"use strict";var g=v("../heatmap/attributes"),m=v("../scatter/attributes"),b=v("../../plots/cartesian/axis_format_attributes"),y=b.axisHoverFormat,e=b.descriptionOnlyNumbers,r=v("../../components/colorscale/attributes"),n=v("../../components/drawing/attributes").dash,a=v("../../plots/font_attributes"),t=v("../../lib/extend").extendFlat,p=v("../../constants/filter_ops"),s=p.COMPARISON_OPS2,i=p.INTERVAL_OPS,f=m.line;re.exports=t({z:g.z,x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,text:g.text,hovertext:g.hovertext,transpose:g.transpose,xtype:g.xtype,ytype:g.ytype,xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:g.hovertemplate,texttemplate:t({},g.texttemplate,{}),textfont:t({},g.textfont,{}),hoverongaps:g.hoverongaps,connectgaps:t({},g.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:a({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},f.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:n,smoothing:t({},f.smoothing,{}),editType:"plot"}},r("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(v,re,ne){"use strict";var g=v("../../components/colorscale"),m=v("../heatmap/calc"),b=v("./set_contours"),y=v("./end_plus");re.exports=function(e,r){var n=m(e,r),a=n[0].z;b(r,a);var t,p=r.contours,s=g.extractOpts(r);if("heatmap"===p.coloring&&s.auto&&!1===r.autocontour){var i=p.start,f=y(p),c=p.size||1,l=Math.floor((f-i)/c)+1;isFinite(c)||(c=1,l=1);var h=i-c/2;t=[h,h+l*c]}else t=a;return g.calc(e,r,{vals:t,cLetter:"z"}),n}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(v,re,ne){"use strict";re.exports=function(g,m){var b,y=g[0],e=y.z;switch(m.type){case"levels":var r=Math.min(e[0][0],e[0][1]);for(b=0;b<g.length;b++){var n=g[b];n.prefixBoundary=!n.edgepaths.length&&(r>n.level||n.starts.length&&r===n.level)}break;case"constraint":if(y.prefixBoundary=!1,y.edgepaths.length)return;var a=y.x.length,t=y.y.length,p=-1/0,s=1/0;for(b=0;b<t;b++)s=Math.min(s,e[b][0]),s=Math.min(s,e[b][a-1]),p=Math.max(p,e[b][0]),p=Math.max(p,e[b][a-1]);for(b=1;b<a-1;b++)s=Math.min(s,e[0][b]),s=Math.min(s,e[t-1][b]),p=Math.max(p,e[0][b]),p=Math.max(p,e[t-1][b]);var i,f,c=m.value;switch(m._operation){case">":c>p&&(y.prefixBoundary=!0);break;case"<":(c<s||y.starts.length&&c===s)&&(y.prefixBoundary=!0);break;case"[]":i=Math.min(c[0],c[1]),((f=Math.max(c[0],c[1]))<s||i>p||y.starts.length&&f===s)&&(y.prefixBoundary=!0);break;case"][":i=Math.min(c[0],c[1]),f=Math.max(c[0],c[1]),i<s&&f>p&&(y.prefixBoundary=!0)}}}},{}],747:[function(v,re,ne){"use strict";var g=v("../../components/colorscale"),m=v("./make_color_map"),b=v("./end_plus");re.exports={min:"zmin",max:"zmax",calc:function(y,e,r){var n=e.contours,a=e.line,t=n.size||1,p=n.coloring,s=m(e,{isColorbar:!0});if("heatmap"===p){var i=g.extractOpts(e);r._fillgradient=i.reversescale?g.flipScale(i.colorscale):i.colorscale,r._zrange=[i.min,i.max]}else"fill"===p&&(r._fillcolor=s);r._line={color:"lines"===p?s:a.color,width:!1!==n.showlines?a.width:0,dash:a.dash},r._levels={start:n.start,end:b(n),size:t}}}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(v,re,ne){"use strict";re.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("./label_defaults"),b=v("../../components/color"),y=b.addOpacity,e=b.opacity,r=v("../../constants/filter_ops"),n=r.CONSTRAINT_REDUCTION,a=r.COMPARISON_OPS2;re.exports=function(t,p,s,i,f,c){var l,h,d,u,T,_,o=p.contours,x=s("contours.operation");o._operation=n[x],u=s,-1===a.indexOf((T=o).operation)?(u("contours.value",[0,1]),Array.isArray(T.value)?T.value.length>2?T.value=T.value.slice(2):0===T.length?T.value=[0,1]:T.length<2?(_=parseFloat(T.value[0]),T.value=[_,_+1]):T.value=[parseFloat(T.value[0]),parseFloat(T.value[1])]:g(T.value)&&(_=parseFloat(T.value),T.value=[_,_+1])):(u("contours.value",0),g(T.value)||(T.value=Array.isArray(T.value)?parseFloat(T.value[0]):0)),"="===x?l=o.showlines=!0:(l=s("contours.showlines"),d=s("fillcolor",y((t.line||{}).color||f,.5))),l&&(h=s("line.color",d&&e(d)?y(p.fillcolor,1):f),s("line.width",2),s("line.dash")),s("line.smoothing"),m(s,i,h,c)}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(v,re,ne){"use strict";var g=v("../../constants/filter_ops"),m=v("fast-isnumeric");function b(r,n){var a,t=Array.isArray(n);function p(s){return m(s)?+s:null}return-1!==g.COMPARISON_OPS2.indexOf(r)?a=p(t?n[0]:n):-1!==g.INTERVAL_OPS.indexOf(r)?a=t?[p(n[0]),p(n[1])]:[p(n),p(n)]:-1!==g.SET_OPS.indexOf(r)&&(a=t?n.map(p):[p(n)]),a}function y(r){return function(n){n=b(r,n);var a=Math.min(n[0],n[1]),t=Math.max(n[0],n[1]);return{start:a,end:t,size:t-a}}}function e(r){return function(n){return{start:n=b(r,n),end:1/0,size:1/0}}}re.exports={"[]":y("[]"),"][":y("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y){var e=y("contours.start"),r=y("contours.end"),n=!1===e||!1===r,a=b("contours.size");!(n?m.autocontour=!0:b("autocontour",!1))&&a||b("ncontours")}},{}],752:[function(v,re,ne){"use strict";var g=v("../../lib");function m(b){return g.extendFlat({},b,{edgepaths:g.extendDeep([],b.edgepaths),paths:g.extendDeep([],b.paths),starts:g.extendDeep([],b.starts)})}re.exports=function(b,y){var e,r,n,a=function(s){return s.reverse()},t=function(s){return s};switch(y){case"=":case"<":return b;case">":for(1!==b.length&&g.warn("Contour data invalid for the specified inequality operation."),r=b[0],e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=a(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=a(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=a(r.starts[e]);return b;case"][":var p=a;a=t,t=p;case"[]":for(2!==b.length&&g.warn("Contour data invalid for the specified inequality range operation."),r=m(b[0]),n=m(b[1]),e=0;e<r.edgepaths.length;e++)r.edgepaths[e]=a(r.edgepaths[e]);for(e=0;e<r.paths.length;e++)r.paths[e]=a(r.paths[e]);for(e=0;e<r.starts.length;e++)r.starts[e]=a(r.starts[e]);for(;n.edgepaths.length;)r.edgepaths.push(t(n.edgepaths.shift()));for(;n.paths.length;)r.paths.push(t(n.paths.shift()));for(;n.starts.length;)r.starts.push(t(n.starts.shift()));return[r]}}},{"../../lib":515}],753:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../heatmap/xyz_defaults"),b=v("../scatter/period_defaults"),y=v("./constraint_defaults"),e=v("./contours_defaults"),r=v("./style_defaults"),n=v("../heatmap/label_defaults"),a=v("./attributes");re.exports=function(t,p,s,i){function f(l,h){return g.coerce(t,p,a,l,h)}if(m(t,p,f,i)){b(t,p,i,f),f("xhoverformat"),f("yhoverformat"),f("text"),f("hovertext"),f("hoverongaps"),f("hovertemplate");var c="constraint"===f("contours.type");f("connectgaps",g.isArray1D(p.z)),c?y(t,p,f,i,s):(e(t,p,f,function(l){return g.coerce2(t,p,a,l)}),r(t,p,f,i)),p.contours&&"heatmap"===p.contours.coloring&&n(f,i)}else p.visible=!1}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./constraint_mapping"),b=v("./end_plus");re.exports=function(y,e,r){for(var n="constraint"===y.type?m[y._operation](y.value):y,a=n.size,t=[],p=b(n),s=r.trace._carpetTrace,i=s?{xaxis:s.aaxis,yaxis:s.baxis,x:r.a,y:r.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:r.x,y:r.y},f=n.start;f<p;f+=a)if(t.push(g.extendFlat({level:f,crossings:{},starts:[],edgepaths:[],paths:[],z:r.z,smoothing:r.trace.line.smoothing},i)),t.length>1e3){g.warn("Too many contours, clipping at 1000",y);break}return t}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(v,re,ne){"use strict";re.exports=function(g){return g.end+g.size/1e6}},{}],756:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./constants");function b(r,n,a,t){return Math.abs(r[0]-n[0])<a&&Math.abs(r[1]-n[1])<t}function y(r,n,a,t,p){var s,ee,oe,le,de,i=n.join(","),f=r.crossings[i],c=(oe=n,le=0,de=0,(ee=f)>20&&a?208===ee||1114===ee?le=0===oe[0]?1:-1:de=0===oe[1]?1:-1:-1!==m.BOTTOMSTART.indexOf(ee)?de=1:-1!==m.LEFTSTART.indexOf(ee)?le=1:-1!==m.TOPSTART.indexOf(ee)?de=-1:le=-1,[le,de]),l=[e(r,n,[-c[0],-c[1]])],h=r.z.length,d=r.z[0].length,o=n.slice(),x=c.slice();for(s=0;s<1e4;s++){if(f>20?r.crossings[i]=m.SADDLEREMAINDER[f=m.CHOOSESADDLE[f][(c[0]||c[1])<0?0:1]]:delete r.crossings[i],!(c=m.NEWDELTA[f])){g.log("Found bad marching index:",f,n,r.level);break}if(l.push(e(r,n,c)),n[0]+=c[0],n[1]+=c[1],i=n.join(","),b(l[l.length-1],l[l.length-2],t,p)&&l.pop(),n[0]===o[0]&&n[1]===o[1]&&c[0]===x[0]&&c[1]===x[1]||a&&(c[0]&&(n[0]<0||n[0]>d-2)||c[1]&&(n[1]<0||n[1]>h-2)))break;f=r.crossings[i]}1e4===s&&g.log("Infinite loop in contour?");var T,_,w,M,I,S,R,O,C,D,B,z,Y,G,J,te=b(l[0],l[l.length-1],t,p),X=0,K=.2*r.smoothing,ae=[],U=0;for(s=1;s<l.length;s++)void 0,void 0,G=(z=l[s])[2]-(Y=l[s-1])[2],J=z[3]-Y[3],X+=R=Math.sqrt(G*G+J*J),ae.push(R);var V=X/ae.length*K;function q(ee){return l[ee%l.length]}for(s=l.length-2;s>=U;s--)if((T=ae[s])<V){for(w=0,_=s-1;_>=U&&T+ae[_]<V;_--)T+=ae[_];if(te&&s===l.length-2)for(w=0;w<_&&T+ae[w]<V;w++)T+=ae[w];I=s-_+w+1,S=Math.floor((s+_+w+2)/2),M=te||s!==l.length-2?te||-1!==_?I%2?q(S):[(q(S)[0]+q(S+1)[0])/2,(q(S)[1]+q(S+1)[1])/2]:l[0]:l[l.length-1],l.splice(_+1,s-_+1,M),s=_+1,w&&(U=w),te&&(s===l.length-2?l[w]=l[l.length-1]:0===s&&(l[l.length-1]=l[0]))}for(l.splice(0,U),s=0;s<l.length;s++)l[s].length=2;if(!(l.length<2))if(te)l.pop(),r.paths.push(l);else{a||g.log("Unclosed interior contour?",r.level,o.join(","),l.join("L"));var ie=!1;for(O=0;O<r.edgepaths.length;O++)if(D=r.edgepaths[O],!ie&&b(D[0],l[l.length-1],t,p)){l.pop(),ie=!0;var H=!1;for(C=0;C<r.edgepaths.length;C++)if(b((B=r.edgepaths[C])[B.length-1],l[0],t,p)){H=!0,l.shift(),r.edgepaths.splice(O,1),C===O?r.paths.push(l.concat(B)):(C>O&&C--,r.edgepaths[C]=B.concat(l,D));break}H||(r.edgepaths[O]=l.concat(D))}for(O=0;O<r.edgepaths.length&&!ie;O++)b((D=r.edgepaths[O])[D.length-1],l[0],t,p)&&(l.shift(),r.edgepaths[O]=D.concat(l),ie=!0);ie||r.edgepaths.push(l)}}function e(r,n,a){var t=n[0]+Math.max(a[0],0),p=n[1]+Math.max(a[1],0),s=r.z[p][t],i=r.xaxis,f=r.yaxis;if(a[1]){var c=(r.level-s)/(r.z[p][t+1]-s),l=(1!==c?(1-c)*i.c2l(r.x[t]):0)+(0!==c?c*i.c2l(r.x[t+1]):0);return[i.c2p(i.l2c(l),!0),f.c2p(r.y[p],!0),t+c,p]}var h=(r.level-s)/(r.z[p+1][t]-s),d=(1!==h?(1-h)*f.c2l(r.y[p]):0)+(0!==h?h*f.c2l(r.y[p+1]):0);return[i.c2p(r.x[t],!0),f.c2p(f.l2c(d),!0),t,p+h]}re.exports=function(r,n,a){var t,p,s,i;for(n=n||.01,a=a||.01,p=0;p<r.length;p++){for(s=r[p],i=0;i<s.starts.length;i++)y(s,s.starts[i],"edge",n,a);for(t=0;Object.keys(s.crossings).length&&t<1e4;)t++,y(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,n,a);1e4===t&&g.log("Infinite loop in contour?")}}},{"../../lib":515,"./constants":748}],757:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("../heatmap/hover");re.exports=function(b,y,e,r,n){n||(n={}),n.isContour=!0;var a=m(b,y,e,r,n);return a&&a.forEach(function(t){var p=t.trace;"constraint"===p.contours.type&&(p.fillcolor&&g.opacity(p.fillcolor)?t.color=g.addOpacity(p.fillcolor,1):p.contours.showlines&&g.opacity(p.line.color)&&(t.color=g.addOpacity(p.line.color,1)))}),a}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot").plot,style:v("./style"),colorbar:v("./colorbar"),hoverPoints:v("./hover"),moduleType:"trace",name:"contour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b,y,e){if(e||(e={}),m("contours.showlabels")){var r=b.font;g.coerceFont(m,"contours.labelfont",{family:r.family,size:r.size,color:y}),m("contours.labelformat")}!1!==e.hasHover&&m("zhoverformat")}},{"../../lib":515}],760:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/colorscale"),b=v("./end_plus");re.exports=function(y){var e=y.contours,r=e.start,n=b(e),a=e.size||1,t=Math.floor((n-r)/a)+1,p="lines"===e.coloring?0:1,s=m.extractOpts(y);isFinite(a)||(a=1,t=1);var i,f,c=s.reversescale?m.flipScale(s.colorscale):s.colorscale,l=c.length,h=new Array(l),d=new Array(l);if("heatmap"===e.coloring){var o=s.min,x=s.max;for(f=0;f<l;f++)h[f]=(i=c[f])[0]*(x-o)+o,d[f]=i[1];var u=g.extent([o,x,e.start,e.start+a*(t-1)]),T=u[o<x?0:1],_=u[o<x?1:0];T!==o&&(h.splice(0,0,T),d.splice(0,0,d[0])),_!==x&&(h.push(_),d.push(d[d.length-1]))}else for(f=0;f<l;f++)h[f]=((i=c[f])[0]*(t+p-1)-p/2)*a+r,d[f]=i[1];return m.makeColorScaleFunc({domain:h,range:d},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(v,re,ne){"use strict";var g=v("./constants");function m(b,y){var e=(y[0][0]>b?0:1)+(y[0][1]>b?0:2)+(y[1][1]>b?0:4)+(y[1][0]>b?0:8);return 5===e||10===e?b>(y[0][0]+y[0][1]+y[1][0]+y[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}re.exports=function(b){var y,e,r,n,a,t,p,s,i,f=b[0].z,c=f.length,l=f[0].length,h=2===c||2===l;for(e=0;e<c-1;e++)for(n=[],0===e&&(n=n.concat(g.BOTTOMSTART)),e===c-2&&(n=n.concat(g.TOPSTART)),y=0;y<l-1;y++)for(r=n.slice(),0===y&&(r=r.concat(g.LEFTSTART)),y===l-2&&(r=r.concat(g.RIGHTSTART)),a=y+","+e,t=[[f[e][y],f[e][y+1]],[f[e+1][y],f[e+1][y+1]]],i=0;i<b.length;i++)(p=m((s=b[i]).level,t))&&(s.crossings[a]=p,-1!==r.indexOf(p)&&(s.starts.push([y,e]),h&&-1!==r.indexOf(p,r.indexOf(p)+1)&&s.starts.push([y,e])))}},{"./constants":748}],762:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing"),y=v("../../components/colorscale"),e=v("../../lib/svg_text_utils"),r=v("../../plots/cartesian/axes"),n=v("../../plots/cartesian/set_convert"),a=v("../heatmap/plot"),t=v("./make_crossings"),p=v("./find_all_paths"),s=v("./empty_pathinfo"),i=v("./convert_to_constraints"),f=v("./close_boundaries"),c=v("./constants"),l=c.LABELOPTIMIZER;function h(x,u){var T,_,w,M,I,S,O="",C=0,D=x.edgepaths.map(function(te,X){return X}),B=!0;function z(te){return Math.abs(te[1]-u[2][1])<.01}function G(te){return Math.abs(te[0]-u[2][0])<.01}for(;D.length;){for(S=b.smoothopen(x.edgepaths[C],x.smoothing),O+=B?S:S.replace(/^M/,"L"),D.splice(D.indexOf(C),1),T=x.edgepaths[C][x.edgepaths[C].length-1],M=-1,w=0;w<4;w++){if(!T){m.log("Missing end?",C,x);break}for(Math.abs(T[1]-u[0][1])<.01&&!G(T)?_=u[1]:Math.abs(T[0]-u[0][0])<.01?_=u[0]:z(T)?_=u[3]:G(T)&&(_=u[2]),I=0;I<x.edgepaths.length;I++){var J=x.edgepaths[I][0];Math.abs(T[0]-_[0])<.01?Math.abs(T[0]-J[0])<.01&&(J[1]-T[1])*(_[1]-J[1])>=0&&(_=J,M=I):Math.abs(T[1]-_[1])<.01?Math.abs(T[1]-J[1])<.01&&(J[0]-T[0])*(_[0]-J[0])>=0&&(_=J,M=I):m.log("endpt to newendpt is not vert. or horz.",T,_,J)}if(T=_,M>=0)break;O+="L"+_}if(M===x.edgepaths.length){m.log("unclosed perimeter path");break}(B=-1===D.indexOf(C=M))&&(C=D[0],O+="Z")}for(C=0;C<x.paths.length;C++)O+=b.smoothclosed(x.paths[C],x.smoothing);return O}function d(x,u,T,_){var w=u.width/2,M=u.height/2,I=x.x,S=x.y,R=x.theta,O=Math.cos(R)*w,C=Math.sin(R)*w,D=(I>_.center?_.right-I:I-_.left)/(O+Math.abs(Math.sin(R)*M)),B=(S>_.middle?_.bottom-S:S-_.top)/(Math.abs(C)+Math.cos(R)*M);if(D<1||B<1)return 1/0;var z=l.EDGECOST*(1/(D-1)+1/(B-1));z+=l.ANGLECOST*R*R;for(var Y=I-O,G=S-C,J=I+O,te=S+C,X=0;X<T.length;X++){var K=T[X],ae=Math.cos(K.theta)*K.width/2,U=Math.sin(K.theta)*K.width/2,V=2*m.segmentDistance(Y,G,J,te,K.x-ae,K.y-U,K.x+ae,K.y+U)/(u.height+K.height),q=K.level===u.level,ie=q?l.SAMELEVELDISTANCE:1;if(V<=ie)return 1/0;z+=l.NEIGHBORCOST*(q?l.SAMELEVELFACTOR:1)/(V-ie)}return z}function o(x){var u,T,_=x.trace._emptypoints,w=[],M=x.z.length,I=x.z[0].length,S=[];for(u=0;u<I;u++)S.push(1);for(u=0;u<M;u++)w.push(S.slice());for(u=0;u<_.length;u++)w[(T=_[u])[0]][T[1]]=0;return x.zmask=w,w}ne.plot=function(x,u,T,_){var w=u.xaxis,M=u.yaxis;m.makeTraceGroups(_,T,"contour").each(function(I){var S=g.select(this),R=I[0],C=R.x,D=R.y,B=R.trace.contours,z=s(B,u,R),Y=m.ensureSingle(S,"g","heatmapcoloring"),G=[];"heatmap"===B.coloring&&(G=[I]),a(x,u,G,Y),t(z),p(z);var q,ie,H,J=w.c2p(C[0],!0),te=w.c2p(C[C.length-1],!0),X=M.c2p(D[0],!0),K=M.c2p(D[D.length-1],!0),ae=[[J,K],[te,K],[te,X],[J,X]],U=z;"constraint"===B.type&&(U=i(z,B._operation)),q=ae,ie=B,(H=m.ensureSingle(S,"g","contourbg").selectAll("path").data("fill"===ie.coloring?[0]:[])).enter().append("path"),H.exit().remove(),H.attr("d","M"+q.join("L")+"Z").style("stroke","none"),function(V,q,ie,H){var ee="fill"===H.coloring||"constraint"===H.type&&"="!==H._operation,Q="M"+ie.join("L")+"Z";ee&&f(q,H);var oe=m.ensureSingle(V,"g","contourfill").selectAll("path").data(ee?q:[]);oe.enter().append("path"),oe.exit().remove(),oe.each(function(le){var de=(le.prefixBoundary?Q:"")+h(le,ie);de?g.select(this).attr("d",de).style("stroke","none"):g.select(this).remove()})}(S,U,ae,B),function(V,q,ie,H,ee){var Q=m.ensureSingle(V,"g","contourlines"),oe=!1!==ee.showlines,le=ee.showlabels,de=oe&&le,fe=ne.createLines(Q,oe||le,q),be=ne.createLineClip(Q,de,ie,H.trace.uid),he=V.selectAll("g.contourlabels").data(le?[0]:[]);if(he.exit().remove(),he.enter().append("g").classed("contourlabels",!0),le){var _e=[],Ce=[];m.clearLocationCache();var Ee=ne.labelFormatter(ie,H),Ae=b.tester.append("text").attr("data-notex",1).call(b.font,ee.labelfont),ze=q[0].xaxis,ve=q[0].yaxis,Te=ze._length,Ie=ve._length,De=ze.range,Fe=ve.range,Ue=m.aggNums(Math.min,null,H.x),qe=m.aggNums(Math.max,null,H.x),je=m.aggNums(Math.min,null,H.y),rt=m.aggNums(Math.max,null,H.y),Ne=Math.max(ze.c2p(Ue,!0),0),Be=Math.min(ze.c2p(qe,!0),Te),We=Math.max(ve.c2p(rt,!0),0),Ye=Math.min(ve.c2p(je,!0),Ie),lt={};De[0]<De[1]?(lt.left=Ne,lt.right=Be):(lt.left=Be,lt.right=Ne),Fe[0]<Fe[1]?(lt.top=We,lt.bottom=Ye):(lt.top=Ye,lt.bottom=We),lt.middle=(lt.top+lt.bottom)/2,lt.center=(lt.left+lt.right)/2,_e.push([[lt.left,lt.top],[lt.right,lt.top],[lt.right,lt.bottom],[lt.left,lt.bottom]]);var mt=Math.sqrt(Te*Te+Ie*Ie),Tt=c.LABELDISTANCE*mt/Math.max(1,q.length/c.LABELINCREASE);fe.each(function(It){var Ct=ne.calcTextOpts(It.level,Ee,Ae,ie);g.select(this).selectAll("path").each(function(){var ct=m.getVisibleSegment(this,lt,Ct.height/2);if(ct&&!(ct.len<(Ct.width+Ct.height)*c.LABELMIN))for(var at=Math.min(Math.ceil(ct.len/Tt),c.LABELMAX),St=0;St<at;St++){var Xt=ne.findBestTextLocation(this,ct,Ct,Ce,lt);if(!Xt)break;ne.addLabelData(Xt,Ct,Ce,_e)}})}),Ae.remove(),ne.drawLabels(he,Ce,ie,be,de?_e:null)}le&&!oe&&fe.remove()}(S,z,x,R,B),function(V,q,ie,H,ee){var Q=H.trace,le="clip"+Q.uid,de=ie._fullLayout._clips.selectAll("#"+le).data(Q.connectgaps?[]:[0]);if(de.enter().append("clipPath").classed("contourclip",!0).attr("id",le),de.exit().remove(),!1===Q.connectgaps){var fe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:q.xaxis,yaxis:q.yaxis,x:H.x,y:H.y,z:o(H),smoothing:0};t([fe]),p([fe]),f([fe],{type:"levels"}),m.ensureSingle(de,"path","").attr("d",(fe.prefixBoundary?"M"+ee.join("L")+"Z":"")+h(fe,ee))}else le=null;b.setClipUrl(V,le,ie)}(S,u,x,R,ae)})},ne.createLines=function(x,u,T){var _=T[0].smoothing,w=x.selectAll("g.contourlevel").data(u?T:[]);if(w.exit().remove(),w.enter().append("g").classed("contourlevel",!0),u){var M=w.selectAll("path.openline").data(function(S){return S.pedgepaths||S.edgepaths});M.exit().remove(),M.enter().append("path").classed("openline",!0),M.attr("d",function(S){return b.smoothopen(S,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var I=w.selectAll("path.closedline").data(function(S){return S.ppaths||S.paths});I.exit().remove(),I.enter().append("path").classed("closedline",!0),I.attr("d",function(S){return b.smoothclosed(S,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return w},ne.createLineClip=function(x,u,T,_){var w=u?"clipline"+_:null,M=T._fullLayout._clips.selectAll("#"+w).data(u?[0]:[]);return M.exit().remove(),M.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),b.setClipUrl(x,w,T),M},ne.labelFormatter=function(x,u){var T=x._fullLayout,_=u.trace,w=_.contours,M={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)M.tickformat=w.labelformat,n(M,T);else{var I=y.extractOpts(_);if(I&&I.colorbar&&I.colorbar._axis)M=I.colorbar._axis;else{if("constraint"===w.type){var S=w.value;M.range=Array.isArray(S)?[S[0],S[S.length-1]]:[S,S]}else M.range=[w.start,w.end],M.nticks=(w.end-w.start)/w.size;M.range[0]===M.range[1]&&(M.range[1]+=M.range[0]||1),M.nticks||(M.nticks=1e3),n(M,T),r.prepTicks(M),M._tmin=null,M._tmax=null}}return function(R){return r.tickText(M,R).text}},ne.calcTextOpts=function(x,u,T,_){var w=u(x);T.text(w).call(e.convertToTspans,_);var M=T.node(),I=b.bBox(M,!0);return{text:w,width:I.width,height:I.height,fontSize:+M.style["font-size"].replace("px",""),level:x,dy:(I.top+I.bottom)/2}},ne.findBestTextLocation=function(x,u,T,_,w){var M,I,S,R,O,C=T.width;u.isClosed?(M=u.min+(I=u.len/l.INITIALSEARCHPOINTS)/2,S=u.max):(M=u.min+(I=(u.len-C)/(l.INITIALSEARCHPOINTS+1))+C/2,S=u.max-(I+C)/2);for(var D=1/0,B=0;B<l.ITERATIONS;B++){for(var z=M;z<S;z+=I){var Y=m.getTextLocation(x,u.total,z,C),G=d(Y,T,_,w);G<D&&(D=G,O=Y,R=z)}if(D>2*l.MAXCOST)break;B&&(I/=2),S=(M=R-I/2)+1.5*I}if(D<=l.MAXCOST)return O},ne.addLabelData=function(x,u,T,_){var w=u.fontSize,M=u.width+w/3,I=Math.max(0,u.height-w/3),S=x.x,R=x.y,O=x.theta,C=Math.sin(O),D=Math.cos(O),B=function(Y,G){return[S+Y*D-G*C,R+Y*C+G*D]},z=[B(-M/2,-I/2),B(-M/2,I/2),B(M/2,I/2),B(M/2,-I/2)];T.push({text:u.text,x:S,y:R,dy:u.dy,theta:O,level:u.level,width:M,height:I}),_.push(z)},ne.drawLabels=function(x,u,T,_,w){var M=x.selectAll("text").data(u,function(R){return R.text+","+R.x+","+R.y+","+R.theta});if(M.exit().remove(),M.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(R){var O=R.x+Math.sin(R.theta)*R.dy,C=R.y-Math.cos(R.theta)*R.dy;g.select(this).text(R.text).attr({x:O,y:C,transform:"rotate("+180*R.theta/Math.PI+" "+O+" "+C+")"}).call(e.convertToTspans,T)}),w){for(var I="",S=0;S<w.length;S++)I+="M"+w[S].join("L")+"Z";m.ensureSingle(_,"path","").attr("d",I)}}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../lib");function b(y,e,r){var n={type:"linear",range:[y,e]};return g.autoTicks(n,(e-y)/(r||15)),n}re.exports=function(y,e){var r=y.contours;if(y.autocontour){var n=y.zmin,a=y.zmax;(y.zauto||void 0===n)&&(n=m.aggNums(Math.min,null,e)),(y.zauto||void 0===a)&&(a=m.aggNums(Math.max,null,e));var t=b(n,a,y.ncontours);r.size=t.dtick,r.start=g.tickFirst(t),t.range.reverse(),r.end=g.tickFirst(t),r.start===n&&(r.start+=r.size),r.end===a&&(r.end-=r.size),r.start>r.end&&(r.start=r.end=(r.start+r.end)/2),y._input.contours||(y._input.contours={}),m.extendFlat(y._input.contours,{start:r.start,end:r.end,size:r.size}),y._input.autocontour=!0}else if("constraint"!==r.type){var p,s=r.start,i=r.end,f=y._input.contours;s>i&&(r.start=f.start=i,i=r.end=f.end=s,s=r.start),!(r.size>0)&&(p=s===i?1:b(s,i,y.ncontours).dtick,f.size=r.size=p)}}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("../heatmap/style"),y=v("./make_color_map");re.exports=function(e){var r=g.select(e).selectAll("g.contour");r.style("opacity",function(n){return n[0].trace.opacity}),r.each(function(n){var a=g.select(this),t=n[0].trace,p=t.contours,s=t.line,i=p.size||1,f=p.start,c="constraint"===p.type,l=!c&&"lines"===p.coloring,h=!c&&"fill"===p.coloring,d=l||h?y(t):null;a.selectAll("g.contourlevel").each(function(u){g.select(this).selectAll("path").call(m.lineGroupStyle,s.width,l?d(u.level):s.color,s.dash)});var o=p.labelfont;if(a.selectAll("g.contourlabels text").each(function(u){m.font(g.select(this),{family:o.family,size:o.size,color:o.color||(l?d(u.level):s.color)})}),c)a.selectAll("g.contourfill path").style("fill",t.fillcolor);else if(h){var x;a.selectAll("g.contourfill path").style("fill",function(u){return void 0===x&&(x=u.level),d(u.level+.5*i)}),void 0===x&&(x=f),a.selectAll("g.contourbg path").style("fill",d(x-.5*i))}}),b(e)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/defaults"),m=v("./label_defaults");re.exports=function(b,y,e,r,n){var a,t=e("contours.coloring"),p="";"fill"===t&&(a=e("contours.showlines")),!1!==a&&("lines"!==t&&(p=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==t&&(!0!==b.showlegend&&(y.showlegend=!1),y._dfltShowLegend=!1,g(b,y,r,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),m(e,r,p,n)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(v,re,ne){"use strict";var g=v("../heatmap/attributes"),m=v("../contour/attributes"),b=v("../../components/colorscale/attributes"),y=v("../../lib/extend").extendFlat,e=m.contours;re.exports=y({carpet:{valType:"string",editType:"calc"},z:g.z,a:g.x,a0:g.x0,da:g.dx,b:g.y,b0:g.y0,db:g.dy,text:g.text,hovertext:g.hovertext,transpose:g.transpose,atype:g.xtype,btype:g.ytype,fillcolor:m.fillcolor,autocontour:m.autocontour,ncontours:m.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:m.line.color,width:m.line.width,dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},transforms:void 0},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/calc"),m=v("../../lib"),b=v("../heatmap/convert_column_xyz"),y=v("../heatmap/clean_2d_array"),e=v("../heatmap/interp2d"),r=v("../heatmap/find_empties"),n=v("../heatmap/make_bound_array"),a=v("./defaults"),t=v("../carpet/lookup_carpetid"),p=v("../contour/set_contours");re.exports=function(s,i){var f=i._carpetTrace=t(s,i);if(f&&f.visible&&"legendonly"!==f.visible){if(!i.a||!i.b){var c=s.data[f.index],l=s.data[i.index];l.a||(l.a=c.a),l.b||(l.b=c.b),a(l,i,i._defaultColor,s._fullLayout)}var h=function(d,o){var x,u,T,_,w,M,I,S=o._carpetTrace,R=S.aaxis,O=S.baxis;R._minDtick=0,O._minDtick=0,m.isArray1D(o.z)&&b(o,R,O,"a","b",["z"]),x=o._a=o._a||o.a,_=o._b=o._b||o.b,x=x?R.makeCalcdata(o,"_a"):[],_=_?O.makeCalcdata(o,"_b"):[],u=o.a0||0,T=o.da||1,w=o.b0||0,M=o.db||1,I=o._z=y(o._z||o.z,o.transpose),o._emptypoints=r(I),e(I,o._emptypoints);var C=m.maxRowLength(I),G={a:n(o,"scaled"===o.xtype?"":x,u,T,C,R),b:n(o,"scaled"===o.ytype?"":_,w,M,I.length,O),z:I};return"levels"===o.contours.type&&"none"!==o.contours.coloring&&g(d,o,{vals:I,containerStr:"",cLetter:"z"}),[G]}(s,i);return p(i,i._z),h}}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../heatmap/xyz_defaults"),b=v("./attributes"),y=v("../contour/constraint_defaults"),e=v("../contour/contours_defaults"),r=v("../contour/style_defaults");re.exports=function(n,a,t,p){function s(i,f){return g.coerce(n,a,b,i,f)}if(s("carpet"),n.a&&n.b){if(!m(n,a,s,p,"a","b"))return void(a.visible=!1);s("text"),"constraint"===s("contours.type")?y(n,a,s,p,t,{hasHover:!1}):(e(n,a,s,function(i){return g.coerce2(n,a,b,i)}),r(n,a,s,p,{hasHover:!1}))}else a._defaultColor=t,a._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../contour/colorbar"),calc:v("./calc"),plot:v("./plot"),style:v("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../carpet/map_1d_array"),b=v("../carpet/makepath"),y=v("../../components/drawing"),e=v("../../lib"),r=v("../contour/make_crossings"),n=v("../contour/find_all_paths"),a=v("../contour/plot"),t=v("../contour/constants"),p=v("../contour/convert_to_constraints"),s=v("../contour/empty_pathinfo"),i=v("../contour/close_boundaries"),f=v("../carpet/lookup_carpetid"),c=v("../carpet/axis_aligned_line");function l(o,x,u){var T=o.getPointAtLength(x),_=o.getPointAtLength(u),w=_.x-T.x,M=_.y-T.y,I=Math.sqrt(w*w+M*M);return[w/I,M/I]}function h(o){var x=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return[o[0]/x,o[1]/x]}function d(o,x){var u=Math.abs(o[0]*x[0]+o[1]*x[1]);return Math.sqrt(1-u*u)/u}re.exports=function(o,x,u,T){var _=x.xaxis,w=x.yaxis;e.makeTraceGroups(T,u,"contour").each(function(M){var I=g.select(this),S=M[0],R=S.trace,O=R._carpetTrace=f(o,R),C=o.calcdata[O.index][0];if(O.visible&&"legendonly"!==O.visible){var D=S.a,B=S.b,z=R.contours,Y=s(z,x,S),G="constraint"===z.type,J=z._operation,te=G?"="===J?"lines":"fill":z.coloring,X=[[D[0],B[B.length-1]],[D[D.length-1],B[B.length-1]],[D[D.length-1],B[0]],[D[0],B[0]]];r(Y),n(Y,1e-8*(D[D.length-1]-D[0]),1e-8*(B[B.length-1]-B[0]));var U,V,q,ie,H=Y;"constraint"===z.type&&(H=p(Y,J)),function(le,de){var fe,be,he,_e,Ce,Ee,Ae,ze,ve;for(fe=0;fe<le.length;fe++){for(Ce=(_e=le[fe]).pedgepaths=[],Ee=_e.ppaths=[],be=0;be<_e.edgepaths.length;be++){for(ve=_e.edgepaths[be],Ae=[],he=0;he<ve.length;he++)Ae[he]=de(ve[he]);Ce.push(Ae)}for(be=0;be<_e.paths.length;be++){for(ve=_e.paths[be],ze=[],he=0;he<ve.length;he++)ze[he]=de(ve[he]);Ee.push(ze)}}}(Y,oe);var ee=[];for(ie=C.clipsegments.length-1;ie>=0;ie--)V=m([],(U=C.clipsegments[ie]).x,_.c2p),q=m([],U.y,w.c2p),V.reverse(),q.reverse(),ee.push(b(V,q,U.bicubic));var Q="M"+ee.join("L")+"Z";(function(le,de,fe,be,he,_e){var Ce,Ee,Ae,ze,ve=e.ensureSingle(le,"g","contourbg").selectAll("path").data("fill"!==_e||he?[]:[0]);ve.enter().append("path"),ve.exit().remove();var Te=[];for(ze=0;ze<de.length;ze++)Ee=m([],(Ce=de[ze]).x,fe.c2p),Ae=m([],Ce.y,be.c2p),Te.push(b(Ee,Ae,Ce.bicubic));ve.attr("d","M"+Te.join("L")+"Z").style("stroke","none")})(I,C.clipsegments,_,w,G,te),function(le,de,fe,be,he,_e,Ce,Ee,Ae,ze,ve){var Te="fill"===ze;Te&&i(he,le.contours);var Ie=e.ensureSingle(de,"g","contourfill").selectAll("path").data(Te?he:[]);Ie.enter().append("path"),Ie.exit().remove(),Ie.each(function(De){var Fe=(De.prefixBoundary?ve:"")+function(Ue,qe,je,rt,Ne,Be,We,Ye){var lt,mt,Tt,It,Ct,ct,at,St="",Xt=qe.edgepaths.map(function(Je,nt){return nt}),tn=!0,hn=1e-4*Math.abs(je[0][0]-je[2][0]),cn=1e-4*Math.abs(je[0][1]-je[2][1]);function yn(Je){return Math.abs(Je[1]-je[0][1])<cn}function en(Je){return Math.abs(Je[1]-je[2][1])<cn}function Xe(Je){return Math.abs(Je[0]-je[0][0])<hn}function tt(Je){return Math.abs(Je[0]-je[2][0])<hn}function ye(Je,nt){var Ke,vt,gt,Ot,Vt="";for(yn(Je)&&!tt(Je)||en(Je)&&!Xe(Je)?(Ot=Ne.aaxis,gt=c(Ne,Be,[Je[0],nt[0]],.5*(Je[1]+nt[1]))):(Ot=Ne.baxis,gt=c(Ne,Be,.5*(Je[0]+nt[0]),[Je[1],nt[1]])),Ke=1;Ke<gt.length;Ke++)for(Vt+=Ot.smoothing?"C":"L",vt=0;vt<gt[Ke].length;vt++){var ft=gt[Ke][vt];Vt+=[We.c2p(ft[0]),Ye.c2p(ft[1])]+" "}return Vt}for(lt=0,mt=null;Xt.length;){for(mt&&(St+=ye(mt,qe.edgepaths[lt][0])),at=y.smoothopen(qe.edgepaths[lt].map(rt),qe.smoothing),St+=tn?at:at.replace(/^M/,"L"),Xt.splice(Xt.indexOf(lt),1),mt=qe.edgepaths[lt][qe.edgepaths[lt].length-1],Ct=-1,It=0;It<4;It++){if(!mt){e.log("Missing end?",lt,qe);break}for(yn(mt)&&!tt(mt)?Tt=je[1]:Xe(mt)?Tt=je[0]:en(mt)?Tt=je[3]:tt(mt)&&(Tt=je[2]),ct=0;ct<qe.edgepaths.length;ct++){var Ve=qe.edgepaths[ct][0];Math.abs(mt[0]-Tt[0])<hn?Math.abs(mt[0]-Ve[0])<hn&&(Ve[1]-mt[1])*(Tt[1]-Ve[1])>=0&&(Tt=Ve,Ct=ct):Math.abs(mt[1]-Tt[1])<cn?Math.abs(mt[1]-Ve[1])<cn&&(Ve[0]-mt[0])*(Tt[0]-Ve[0])>=0&&(Tt=Ve,Ct=ct):e.log("endpt to newendpt is not vert. or horz.",mt,Tt,Ve)}if(Ct>=0)break;St+=ye(mt,Tt),mt=Tt}if(Ct===qe.edgepaths.length){e.log("unclosed perimeter path");break}(tn=-1===Xt.indexOf(lt=Ct))&&(lt=Xt[0],St+=ye(mt,Tt)+"Z",mt=null)}for(lt=0;lt<qe.paths.length;lt++)St+=y.smoothclosed(qe.paths[lt].map(rt),qe.smoothing);return St}(0,De,_e,Ce,Ee,Ae,fe,be);Fe?g.select(this).attr("d",Fe).style("stroke","none"):g.select(this).remove()})}(R,I,_,w,H,X,oe,O,C,te,Q),function(le,de,fe,be,he,_e,Ce){var Ee=e.ensureSingle(le,"g","contourlines"),Ae=!1!==he.showlines,ze=he.showlabels,ve=Ae&&ze,Te=a.createLines(Ee,Ae||ze,de),Ie=a.createLineClip(Ee,ve,fe,be.trace.uid),De=le.selectAll("g.contourlabels").data(ze?[0]:[]);if(De.exit().remove(),De.enter().append("g").classed("contourlabels",!0),ze){var qe=_e.xaxis._length,je=_e.yaxis._length,rt=[[[0,0],[qe,0],[qe,je],[0,je]]],Ne=[];e.clearLocationCache();var Be=a.labelFormatter(fe,be),We=y.tester.append("text").attr("data-notex",1).call(y.font,he.labelfont),Ye={left:0,right:qe,center:qe/2,top:0,bottom:je,middle:je/2},lt=Math.sqrt(qe*qe+je*je),mt=t.LABELDISTANCE*lt/Math.max(1,de.length/t.LABELINCREASE);Te.each(function(Tt){var It=a.calcTextOpts(Tt.level,Be,We,fe);g.select(this).selectAll("path").each(function(Ct){var ct=e.getVisibleSegment(this,Ye,It.height/2);if(ct&&(function(tn,hn,cn,yn,en,Xe){for(var tt,ye=0;ye<cn.pedgepaths.length;ye++)hn===cn.pedgepaths[ye]&&(tt=cn.edgepaths[ye]);if(tt){var ke=en.a[0],Ve=en.a[en.a.length-1],Je=en.b[0],nt=en.b[en.b.length-1],vt=l(tn,0,1),gt=l(tn,yn.total,yn.total-1),Ot=Ke(tt[0],vt),Vt=yn.total-Ke(tt[tt.length-1],gt);yn.min<Ot&&(yn.min=Ot),yn.max>Vt&&(yn.max=Vt),yn.len=yn.max-yn.min}function Ke(ft,bt){var Wt,Pt=0;return(Math.abs(ft[0]-ke)<.1||Math.abs(ft[0]-Ve)<.1)&&(Wt=h(en.dxydb_rough(ft[0],ft[1],.1)),Pt=Math.max(Pt,Xe*d(bt,Wt)/2)),(Math.abs(ft[1]-Je)<.1||Math.abs(ft[1]-nt)<.1)&&(Wt=h(en.dxyda_rough(ft[0],ft[1],.1)),Pt=Math.max(Pt,Xe*d(bt,Wt)/2)),Pt}}(this,Ct,Tt,ct,Ce,It.height),!(ct.len<(It.width+It.height)*t.LABELMIN)))for(var at=Math.min(Math.ceil(ct.len/mt),t.LABELMAX),St=0;St<at;St++){var Xt=a.findBestTextLocation(this,ct,It,Ne,Ye);if(!Xt)break;a.addLabelData(Xt,It,Ne,rt)}})}),We.remove(),a.drawLabels(De,Ne,fe,Ie,ve?rt:null)}ze&&!Ae&&Te.remove()}(I,Y,o,S,z,x,O),y.setClipUrl(I,O._clipPathId,o)}function oe(le){var de=O.ab2xy(le[0],le[1],!0);return[_.c2p(de[0]),w.c2p(de[1])]}})}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/attributes"),m=v("../../plots/template_attributes").hovertemplateAttrs,b=v("../../plots/attributes"),y=v("../scattermapbox/attributes"),e=v("../../lib/extend").extendFlat;re.exports=e({lon:y.lon,lat:y.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:m(),showlegend:e({},b.showlegend,{dflt:!1})},g("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib").isArrayOrTypedArray,b=v("../../constants/numerical").BADNUM,y=v("../../components/colorscale/calc"),e=v("../../lib")._;re.exports=function(r,n){for(var a=n._length,t=new Array(a),p=n.z,s=m(p)&&p.length,i=0;i<a;i++){var f=t[i]={},c=n.lon[i],l=n.lat[i];if(f.lonlat=g(c)&&g(l)?[+c,+l]:[b,b],s){var h=p[i];f.z=g(h)?h:b}}return y(r,n,{vals:s?p:[0,1],containerStr:"",cLetter:"z"}),a&&(t[0].t={labels:{lat:e(r,"lat:")+" ",lon:e(r,"lon:")+" "}}),t}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../components/color"),y=v("../../components/colorscale"),e=v("../../constants/numerical").BADNUM,r=v("../../lib/geojson_utils").makeBlank;re.exports=function(n){var a=n[0].trace,t=!0===a.visible&&0!==a._length,p=a._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:r()};if(!t)return p;var s,i=[],f=a.z,c=a.radius,l=m.isArrayOrTypedArray(f)&&f.length,h=m.isArrayOrTypedArray(c);for(s=0;s<n.length;s++){var d=n[s],o=d.lonlat;if(o[0]!==e){var x={};if(l){var u=d.z;x.z=u!==e?u:0}h&&(x.r=g(c[s])&&c[s]>0?+c[s]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:o},properties:x})}}var T=y.extractOpts(a),_=T.reversescale?y.flipScale(T.colorscale):T.colorscale,w=_[0][1],M=["interpolate",["linear"],["heatmap-density"],0,b.opacity(w)<1?w:b.addOpacity(w,0)];for(s=1;s<_.length;s++)M.push(_[s][0],_[s][1]);return m.extendFlat(p.heatmap.paint,{"heatmap-weight":l?["interpolate",["linear"],["get","z"],T.min,0,T.max,1]:1/(T.max-T.min),"heatmap-color":M,"heatmap-radius":h?{type:"identity",property:"r"}:a.radius,"heatmap-opacity":a.opacity}),p.geojson={type:"FeatureCollection",features:i},p.heatmap.layout.visibility="visible",p}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/defaults"),b=v("./attributes");re.exports=function(y,e,r,n){function a(i,f){return g.coerce(y,e,b,i,f)}var t=a("lon")||[],p=a("lat")||[],s=Math.min(t.length,p.length);s?(e._length=s,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),m(y,e,n,a,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(v,re,ne){"use strict";re.exports=function(g,m){return g.lon=m.lon,g.lat=m.lat,g.z=m.z,g}},{}],776:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../scattermapbox/hover").hoverPoints,b=v("../scattermapbox/hover").getExtraText;re.exports=function(y,e,r){var n=m(y,e,r);if(n){var a=n[0],t=a.cd,p=t[0].trace,s=t[a.index];if(delete a.color,"z"in s){var i=a.subplot.mockAxis;a.z=s.z,a.zLabel=g.tickText(i,i.c2l(s.z),"hover").text}return a.extraText=b(p,s,t[0].t.labels),[a]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),formatLabels:v("../scattermapbox/format_labels"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover"),eventData:v("./event_data"),getBelow:function(g,m){for(var b=m.getMapLayers(),y=0;y<b.length;y++){var e=b[y],r=e.id;if("symbol"===e.type&&"string"==typeof r&&-1===r.indexOf("plotly-"))return r}},moduleType:"trace",name:"densitymapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(v,re,ne){"use strict";var g=v("./convert"),m=v("../../plots/mapbox/constants").traceLayerPrefix;function b(e,r){this.type="densitymapbox",this.subplot=e,this.uid=r,this.sourceId="source-"+r,this.layerList=[["heatmap",m+r+"-heatmap"]],this.below=null}var y=b.prototype;y.update=function(e){var r=this.subplot,n=this.layerList,a=g(e),t=r.belowLookup["trace-"+this.uid];r.map.getSource(this.sourceId).setData(a.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(a,t),this.below=t);for(var p=0;p<n.length;p++){var s=n[p],f=s[1],c=a[s[0]];r.setOptions(f,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&r.setOptions(f,"setPaintProperty",c.paint)}},y._addLayers=function(e,r){for(var n=this.subplot,a=this.layerList,t=this.sourceId,p=0;p<a.length;p++){var s=a[p],i=s[0],f=e[i];n.addLayer({type:i,id:s[1],source:t,layout:f.layout,paint:f.paint},r)}},y._removeLayers=function(){for(var e=this.subplot.map,r=this.layerList,n=r.length-1;n>=0;n--)e.removeLayer(r[n][1])},y.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},re.exports=function(e,r){var n=r[0].trace,a=new b(e,n.uid),t=a.sourceId,p=g(r),s=a.below=e.belowLookup["trace-"+n.uid];return e.map.addSource(t,{type:"geojson",data:p.geojson}),a._addLayers(p,s),a}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){for(var y=0;y<m.length;y++)m[y].i=y;g.mergeArray(b.text,m,"tx"),g.mergeArray(b.hovertext,m,"htx");var e=b.marker;if(e){g.mergeArray(e.opacity,m,"mo"),g.mergeArray(e.color,m,"mc");var r=e.line;r&&(g.mergeArray(r.color,m,"mlc"),g.mergeArrayCastPositive(r.width,m,"mlw"))}}},{"../../lib":515}],780:[function(v,re,ne){"use strict";var g,m=v("../bar/attributes"),b=v("../scatter/attributes").line,y=v("../../plots/attributes"),e=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../plots/template_attributes").texttemplateAttrs,a=v("./constants"),t=v("../../lib/extend").extendFlat,p=v("../../components/color");re.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:m.hovertext,hovertemplate:r({},{keys:a.eventDataKeys}),hoverinfo:t({},y.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:m.text,textposition:m.textposition,insidetextanchor:t({},m.insidetextanchor,{dflt:"middle"}),textangle:t({},m.textangle,{dflt:0}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:t({},m.orientation,{}),offset:t({},m.offset,{arrayOk:!1}),width:t({},m.width,{arrayOk:!1}),marker:(g=t({},m.marker),delete g.pattern,g),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:t({},b.color,{dflt:p.defaultLine}),width:t({},b.width,{dflt:0,editType:"plot"}),dash:b.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../plots/cartesian/align_period"),b=v("./arrays_to_calcdata"),y=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function r(n){return n===e?0:n}re.exports=function(n,a){var t,p,s,i,f,c,l,h,d=g.getFromId(n,a.xaxis||"x"),o=g.getFromId(n,a.yaxis||"y");"h"===a.orientation?(t=d.makeCalcdata(a,"x"),s=o.makeCalcdata(a,"y"),i=m(a,o,"y",s),f=!!a.yperiodalignment,c="y"):(t=o.makeCalcdata(a,"y"),s=d.makeCalcdata(a,"x"),i=m(a,d,"x",s),f=!!a.xperiodalignment,c="x"),p=i.vals;var x,u=Math.min(p.length,t.length),T=new Array(u);for(a._base=[],l=0;l<u;l++){t[l]<0&&(t[l]=e);var _=!1;t[l]!==e&&l+1<u&&t[l+1]!==e&&(_=!0),h=T[l]={p:p[l],s:t[l],cNext:_},a._base[l]=-.5*h.s,f&&(T[l].orig_p=s[l],T[l][c+"End"]=i.ends[l],T[l][c+"Start"]=i.starts[l]),a.ids&&(h.id=String(a.ids[l])),0===l&&(T[0].vTotal=0),T[0].vTotal+=r(h.s),h.begR=r(h.s)/r(T[0].s)}for(l=0;l<u;l++)(h=T[l]).s!==e&&(h.sumR=h.s/T[0].vTotal,h.difR=void 0!==x?h.s/x:1,x=h.s);return b(T,a),y(T,a),T}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(v,re,ne){"use strict";re.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(v,re,ne){"use strict";var g=v("../bar/cross_trace_calc").setGroupPositions;re.exports=function(m,b){var y,e,r=m._fullLayout,n=m._fullData,a=m.calcdata,t=b.xaxis,p=b.yaxis,s=[],i=[],f=[];for(e=0;e<n.length;e++){var c=n[e];!0===c.visible&&c.xaxis===t._id&&c.yaxis===p._id&&"funnel"===c.type&&(y=a[e],"h"===c.orientation?f.push(y):i.push(y),s.push(y))}var h={mode:r.funnelmode,norm:r.funnelnorm,gap:r.funnelgap,groupgap:r.funnelgroupgap};for(g(m,t,p,i,h),g(m,p,t,f,h),e=0;e<s.length;e++){y=s[e];for(var d=0;d<y.length;d++)d+1<y.length&&(y[d].nextP0=y[d+1].p0,y[d].nextS0=y[d+1].s0,y[d].nextP1=y[d+1].p1,y[d].nextS1=y[d+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../bar/defaults").handleGroupingDefaults,b=v("../bar/defaults").handleText,y=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),r=v("./attributes"),n=v("../../components/color");re.exports={supplyDefaults:function(a,t,p,s){function i(h,d){return g.coerce(a,t,r,h,d)}if(y(a,t,s,i)){e(a,t,s,i),i("xhoverformat"),i("yhoverformat"),i("orientation",t.y&&!t.x?"v":"h"),i("offset"),i("width");var f=i("text");i("hovertext"),i("hovertemplate");var c=i("textposition");b(a,t,s,i,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===t.textposition||t.texttemplate||i("textinfo",Array.isArray(f)?"text+value":"value");var l=i("marker.color",p);i("marker.line.color",n.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",(d=g.isArrayOrTypedArray(h=l)?"#000":h,n.addOpacity(d,.5*n.opacity(d)))),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash")))}else t.visible=!1;var h,d},crossTraceDefaults:function(a,t){var p,s;function i(c){return g.coerce(s._input,s,r,c)}if("group"===t.funnelmode)for(var f=0;f<a.length;f++)p=(s=a[f])._input,m(p,s,t,i)}}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(v,re,ne){"use strict";re.exports=function(g,m){return g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(g.percentInitial=m.percentInitial),"percentPrevious"in m&&(g.percentPrevious=m.percentPrevious),"percentTotal"in m&&(g.percentTotal=m.percentTotal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g}},{}],786:[function(v,re,ne){"use strict";var g=v("../../components/color").opacity,m=v("../bar/hover").hoverOnBars,b=v("../../lib").formatPercent;re.exports=function(y,e,r,n,a){var u,T,_,w,M,t=m(y,e,r,n,a);if(t){var p=t.cd,s=p[0].trace,f=p[t.index];t[("h"===s.orientation?"x":"y")+"LabelVal"]=f.s,t.percentInitial=f.begR,t.percentInitialLabel=b(f.begR,1),t.percentPrevious=f.difR,t.percentPreviousLabel=b(f.difR,1),t.percentTotal=f.sumR,t.percentTotalLabel=b(f.sumR,1);var c=f.hi||s.hoverinfo,l=[];if(c&&"none"!==c&&"skip"!==c){var h="all"===c,d=c.split("+"),o=function(x){return h||-1!==d.indexOf(x)};o("percent initial")&&l.push(t.percentInitialLabel+" of initial"),o("percent previous")&&l.push(t.percentPreviousLabel+" of previous"),o("percent total")&&l.push(t.percentTotalLabel+" of total")}return t.extraText=l.join("<br>"),t.color=(T=s.marker,w=(u=f).mlc||T.line.color,M=u.mlw||T.line.width,g(_=u.mc||T.color)?_:g(w)&&M?w:void 0),[t]}}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(v,re,ne){"use strict";re.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y,e){var r=!1;function n(p,s){return g.coerce(b,y,m,p,s)}for(var a=0;a<e.length;a++){var t=e[a];if(t.visible&&"funnel"===t.type){r=!0;break}}r&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing"),y=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),r=v("../bar/uniform_text").clearMinTextSize;function n(a,t,p,s){var i=[],f=[],c=s?t:p,l=s?p:t;return i[0]=c.c2p(a.s0,!0),f[0]=l.c2p(a.p0,!0),i[1]=c.c2p(a.s1,!0),f[1]=l.c2p(a.p1,!0),i[2]=c.c2p(a.nextS0,!0),f[2]=l.c2p(a.nextP0,!0),i[3]=c.c2p(a.nextS1,!0),f[3]=l.c2p(a.nextP1,!0),s?[i,f]:[f,i]}re.exports=function(a,t,p,s){var f,c,d,o,i=a._fullLayout;r("funnel",i),f=a,d=(c=t).xaxis,o=c.yaxis,m.makeTraceGroups(s,p,"trace bars").each(function(x){var u=g.select(this),T=x[0].trace,_=m.ensureSingle(u,"g","regions");if(T.connector&&T.connector.visible){var w="h"===T.orientation,M=_.selectAll("g.region").data(m.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var I=M.size();M.each(function(S,R){if(R===I-1||S.cNext){var O=n(S,d,o,w),C=O[0],D=O[1],B="";C[0]!==y&&D[0]!==y&&C[1]!==y&&D[1]!==y&&C[2]!==y&&D[2]!==y&&C[3]!==y&&D[3]!==y&&(B+=w?"M"+C[0]+","+D[1]+"L"+C[2]+","+D[2]+"H"+C[3]+"L"+C[1]+","+D[1]+"Z":"M"+C[1]+","+D[1]+"L"+C[2]+","+D[3]+"V"+D[2]+"L"+C[1]+","+D[0]+"Z"),""===B&&(B="M0,0Z"),m.ensureSingle(g.select(this),"path").attr("d",B).call(b.setClipUrl,c.layerClipId,f)}})}else _.remove()}),function(f,c,l,h){var d=c.xaxis,o=c.yaxis;m.makeTraceGroups(h,l,"trace bars").each(function(x){var u=g.select(this),T=x[0].trace,_=m.ensureSingle(u,"g","lines");if(T.connector&&T.connector.visible&&T.connector.line.width){var w="h"===T.orientation,M=_.selectAll("g.line").data(m.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var I=M.size();M.each(function(S,R){if(R===I-1||S.cNext){var O=n(S,d,o,w),C=O[0],D=O[1],B="";void 0!==C[3]&&void 0!==D[3]&&(w?(B+="M"+C[0]+","+D[1]+"L"+C[2]+","+D[2],B+="M"+C[1]+","+D[1]+"L"+C[3]+","+D[2]):(B+="M"+C[1]+","+D[1]+"L"+C[2]+","+D[3],B+="M"+C[1]+","+D[0]+"L"+C[2]+","+D[2])),""===B&&(B="M0,0Z"),m.ensureSingle(g.select(this),"path").attr("d",B).call(b.setClipUrl,c.layerClipId,f)}})}else _.remove()})}(a,t,p,s),e.plot(a,t,p,s,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("../../components/color"),y=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),r=v("../bar/uniform_text").resizeText,n=e.styleTextPoints;re.exports={style:function(a,t,p){var s=p||g.select(a).selectAll("g.funnellayer").selectAll("g.trace");r(a,s,"funnel"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var f=g.select(this),c=i[0].trace;f.selectAll(".point > path").each(function(l){if(!l.isBlank){var h=c.marker;g.select(this).call(b.fill,l.mc||h.color).call(b.stroke,l.mlc||h.line.color).call(m.dashLine,h.line.dash,l.mlw||h.line.width).style("opacity",c.selectedpoints&&!l.selected?y:1)}}),n(f,c,a),f.selectAll(".regions").each(function(){g.select(this).selectAll("path").style("stroke-width",0).call(b.fill,c.connector.fillcolor)}),f.selectAll(".lines").each(function(){var l=c.connector.line;m.lineGroupStyle(g.select(this).selectAll("path"),l.width,l.color,l.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(v,re,ne){"use strict";var g=v("../pie/attributes"),m=v("../../plots/attributes"),b=v("../../plots/domain").attributes,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,r=v("../../lib/extend").extendFlat;re.exports={labels:g.labels,label0:g.label0,dlabel:g.dlabel,values:g.values,marker:{colors:g.marker.colors,line:{color:r({},g.marker.line.color,{dflt:null}),width:r({},g.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:g.text,hovertext:g.hovertext,scalegroup:r({},g.scalegroup,{}),textinfo:r({},g.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:r({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:y({},{keys:["label","color","value","text","percent"]}),textposition:r({},g.textposition,{values:["inside","none"],dflt:"inside"}),textfont:g.textfont,insidetextfont:g.insidetextfont,title:{text:g.title.text,font:g.title.font,position:r({},g.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:b({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(v,re,ne){"use strict";var g=v("../../plots/plots");ne.name="funnelarea",ne.plot=function(m,b,y,e){g.plotBasePlot(ne.name,m,b,y,e)},ne.clean=function(m,b,y,e){g.cleanBasePlot(ne.name,m,b,y,e)}},{"../../plots/plots":628}],794:[function(v,re,ne){"use strict";var g=v("../pie/calc");re.exports={calc:function(m,b){return g.calc(m,b)},crossTraceCalc:function(m){g.crossTraceCalc(m,{type:"funnelarea"})}}},{"../pie/calc":912}],795:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../../plots/domain").defaults,y=v("../bar/defaults").handleText,e=v("../pie/defaults").handleLabelsAndValues;re.exports=function(r,n,a,t){function p(x,u){return g.coerce(r,n,m,x,u)}var s=p("labels"),i=p("values"),f=e(s,i),c=f.len;if(n._hasLabels=f.hasLabels,n._hasValues=f.hasValues,!n._hasLabels&&n._hasValues&&(p("label0"),p("dlabel")),c){n._length=c,p("marker.line.width")&&p("marker.line.color",t.paper_bgcolor),p("marker.colors"),p("scalegroup");var l,h=p("text"),d=p("texttemplate");if(d||(l=p("textinfo",Array.isArray(h)?"text+percent":"percent")),p("hovertext"),p("hovertemplate"),d||l&&"none"!==l){var o=p("textposition");y(r,n,t,p,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}b(n,t,p),p("title.text")&&(p("title.position"),g.coerceFont(p,"title.font",t.font)),p("aspectratio"),p("baseratio")}else n.visible=!1}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"funnelarea",basePlotModule:v("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style"),styleOne:v("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(v,re,ne){"use strict";var g=v("../pie/layout_attributes").hiddenlabels;re.exports={hiddenlabels:g,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y){function e(r,n){return g.coerce(b,y,m,r,n)}e("hiddenlabels"),e("funnelareacolorway",y.colorway),e("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("../../lib"),y=b.strScale,e=b.strTranslate,r=v("../../lib/svg_text_utils"),n=v("../bar/plot").toMoveInsideBar,a=v("../bar/uniform_text"),t=a.recordMinTextSize,p=a.clearMinTextSize,s=v("../pie/helpers"),i=v("../pie/plot"),f=i.attachFxHandlers,c=i.determineInsideTextFont,l=i.layoutAreas,h=i.prerenderTitles,d=i.positionTitleOutside,o=i.formatSliceLabel;function x(u,T){return"l"+(T[0]-u[0])+","+(T[1]-u[1])}re.exports=function(u,T){var _=u._fullLayout;p("funnelarea",_),h(T,u),l(T,_._size),b.makeTraceGroups(_._funnelarealayer,T,"trace").each(function(w){var M=g.select(this),I=w[0],S=I.trace;(function(R){if(R.length){var O=R[0],C=O.trace,D=C.aspectratio,B=C.baseratio;B>.999&&(B=.999);var z,K,ae,Y=Math.pow(B,2),G=O.vTotal,J=G,te=G*Y/(1-Y)/G,U=[];for(U.push(X()),K=R.length-1;K>-1;K--)(ae=R[K]).hidden||(te+=ae.v/J,U.push(X()));var q=1/0,ie=-1/0;for(K=0;K<U.length;K++)z=U[K],q=Math.min(q,z[1]),ie=Math.max(ie,z[1]);for(K=0;K<U.length;K++)U[K][1]-=(ie+q)/2;var ee=O.r,Q=(ie-q)/2,oe=ee/U[U.length-1][0],le=ee/Q*D;for(O.r=le*Q,K=0;K<U.length;K++)U[K][0]*=oe,U[K][1]*=le;var Ce,Ee,de=[-(z=U[0])[0],z[1]],fe=[z[0],z[1]],be=0;for(K=R.length-1;K>-1;K--)if(!(ae=R[K]).hidden){var he=U[be+=1][0],_e=U[be][1];ae.TL=[-he,_e],ae.TR=[he,_e],ae.BL=de,ae.BR=fe,ae.pxmid=[.5*((Ce=ae.TR)[0]+(Ee=ae.BR)[0]),.5*(Ce[1]+Ee[1])],de=ae.TL,fe=ae.TR}}function X(){var Ae,ze={x:Ae=Math.sqrt(te),y:-Ae};return[ze.x,ze.y]}})(w),M.each(function(){var R=g.select(this).selectAll("g.slice").data(w);R.enter().append("g").classed("slice",!0),R.exit().remove(),R.each(function(C,D){if(C.hidden)g.select(this).selectAll("path,g").remove();else{C.pointNumber=C.i,C.curveNumber=S.index;var B=I.cx,z=I.cy,Y=g.select(this),G=Y.selectAll("path.surface").data([C]);G.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Y.call(f,u,w);var J="M"+(B+C.TR[0])+","+(z+C.TR[1])+x(C.TR,C.BR)+x(C.BR,C.BL)+x(C.BL,C.TL)+"Z";G.attr("d",J),o(u,C,I);var te=s.castOption(S.textposition,C.pts),X=Y.selectAll("g.slicetext").data(C.text&&"none"!==te?[0]:[]);X.enter().append("g").classed("slicetext",!0),X.exit().remove(),X.each(function(){var K=b.ensureSingle(g.select(this),"text","",function(Q){Q.attr("data-notex",1)}),ae=b.ensureUniformFontSize(u,c(S,C,_.font));K.text(C.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(m.font,ae).call(r.convertToTspans,u);var U,V,q,ie=m.bBox(K.node()),H=Math.min(C.BL[1],C.BR[1])+z,ee=Math.max(C.TL[1],C.TR[1])+z;V=Math.max(C.TL[0],C.BL[0])+B,q=Math.min(C.TR[0],C.BR[0])+B,(U=n(V,q,H,ee,ie,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ae.size,t(S.type,U,_),w[D].transform=U,K.attr("transform",b.getTextTransform(U))})}});var O=g.select(this).selectAll("g.titletext").data(S.title.text?[0]:[]);O.enter().append("g").classed("titletext",!0),O.exit().remove(),O.each(function(){var C=b.ensureSingle(g.select(this),"text","",function(z){z.attr("data-notex",1)}),D=S.title.text;S._meta&&(D=b.templateString(D,S._meta)),C.text(D).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(m.font,S.title.font).call(r.convertToTspans,u);var B=d(I,_._size);C.attr("transform",e(B.x,B.y)+y(Math.min(1,B.scale))+e(B.tx,B.ty))})})})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../pie/style_one"),b=v("../bar/uniform_text").resizeText;re.exports=function(y){var e=y._fullLayout._funnelarealayer.selectAll(".trace");b(y,e,"funnelarea"),e.each(function(r){var n=r[0].trace,a=g.select(this);a.style({opacity:n.opacity}),a.selectAll("path.surface").each(function(t){g.select(this).call(m,t,n)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(v,re,ne){"use strict";var g=v("../scatter/attributes"),m=v("../../plots/attributes"),b=v("../../plots/font_attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/template_attributes").texttemplateAttrs,n=v("../../components/colorscale/attributes"),a=v("../../lib/extend").extendFlat;re.exports=a({z:{valType:"data_array",editType:"calc"},x:a({},g.x,{impliedEdits:{xtype:"array"}}),x0:a({},g.x0,{impliedEdits:{xtype:"scaled"}}),dx:a({},g.dx,{impliedEdits:{xtype:"scaled"}}),y:a({},g.y,{impliedEdits:{ytype:"array"}}),y0:a({},g.y0,{impliedEdits:{ytype:"scaled"}}),dy:a({},g.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:a({},g.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:a({},g.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:a({},g.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:a({},g.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:a({},g.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:a({},g.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:e(),texttemplate:r({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:b({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:a({},m.showlegend,{dflt:!1})},{transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/align_period"),e=v("../histogram2d/calc"),r=v("../../components/colorscale/calc"),n=v("./convert_column_xyz"),a=v("./clean_2d_array"),t=v("./interp2d"),p=v("./find_empties"),s=v("./make_bound_array"),i=v("../../constants/numerical").BADNUM;function f(c){for(var l=[],h=c.length,d=0;d<h;d++){var o=c[d];o!==i&&l.push(o)}return l}re.exports=function(c,l){var h,d,o,x,u,T,_,w,M,I,S,R=b.getFromId(c,l.xaxis||"x"),O=b.getFromId(c,l.yaxis||"y"),C=g.traceIs(l,"contour"),D=g.traceIs(l,"histogram"),B=g.traceIs(l,"gl2d"),z=C?"best":l.zsmooth;if(R._minDtick=0,O._minDtick=0,D)x=(S=e(c,l)).orig_x,h=S.x,d=S.x0,o=S.dx,w=S.orig_y,u=S.y,T=S.y0,_=S.dy,M=S.z;else{var Y=l.z;m.isArray1D(Y)?(n(l,R,O,"x","y",["z"]),h=l._x,u=l._y,Y=l._z):(x=l.x?R.makeCalcdata(l,"x"):[],w=l.y?O.makeCalcdata(l,"y"):[],h=y(l,R,"x",x).vals,u=y(l,O,"y",w).vals,l._x=h,l._y=u),d=l.x0,o=l.dx,T=l.y0,_=l.dy,M=a(Y,l,R,O)}function G(Q){z=l._input.zsmooth=l.zsmooth=!1,m.warn('cannot use zsmooth: "fast": '+Q)}if((R.rangebreaks||O.rangebreaks)&&(M=function(Q,oe,le){for(var de=[],fe=-1,be=0;be<le.length;be++)if(oe[be]!==i){de[++fe]=[];for(var he=0;he<le[be].length;he++)Q[he]!==i&&de[fe].push(le[be][he])}return de}(h,u,M),D||(h=f(h),u=f(u),l._x=h,l._y=u)),D||!C&&!l.connectgaps||(l._emptypoints=p(M),t(M,l._emptypoints)),"fast"===z)if("log"===R.type||"log"===O.type)G("log axis found");else if(!D){if(h.length){var J=(h[h.length-1]-h[0])/(h.length-1),te=Math.abs(J/100);for(I=0;I<h.length-1;I++)if(Math.abs(h[I+1]-h[I]-J)>te){G("x scale is not linear");break}}if(u.length&&"fast"===z){var X=(u[u.length-1]-u[0])/(u.length-1),K=Math.abs(X/100);for(I=0;I<u.length-1;I++)if(Math.abs(u[I+1]-u[I]-X)>K){G("y scale is not linear");break}}}var ae=m.maxRowLength(M),U="scaled"===l.xtype?"":h,V=s(l,U,d,o,ae,R),q="scaled"===l.ytype?"":u,ie=s(l,q,T,_,M.length,O);B||(l._extremes[R._id]=b.findExtremes(R,V),l._extremes[O._id]=b.findExtremes(O,ie));var H={x:V,y:ie,z:M,text:l._text||l.text,hovertext:l._hovertext||l.hovertext};if(l.xperiodalignment&&x&&(H.orig_x=x),l.yperiodalignment&&w&&(H.orig_y=w),U&&U.length===V.length-1&&(H.xCenter=U),q&&q.length===ie.length-1&&(H.yCenter=q),D&&(H.xRanges=S.xRanges,H.yRanges=S.yRanges,H.pts=S.pts),C||r(c,l,{vals:M,cLetter:"z"}),C&&l.contours&&"heatmap"===l.contours.coloring){var ee={type:"contour"===l.type?"heatmap":"histogram2d",xcalendar:l.xcalendar,ycalendar:l.ycalendar};H.xfill=s(ee,U,d,o,ae,R),H.yfill=s(ee,q,T,_,M.length,O)}return[H]}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../constants/numerical").BADNUM;re.exports=function(y,e,r,n){var a,t,p,s,i,f;function c(u){if(g(u))return+u}if(e&&e.transpose){for(a=0,i=0;i<y.length;i++)a=Math.max(a,y[i].length);if(0===a)return!1;p=function(u){return u.length},s=function(u,T,_){return(u[_]||[])[T]}}else a=y.length,p=function(u,T){return u[T].length},s=function(u,T,_){return(u[T]||[])[_]};function h(u){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&u&&"category"===u.type&&e["_"+u._id.charAt(0)].length){var T=u._id.charAt(0),_={},w=e["_"+T+"CategoryMap"]||e[T];for(i=0;i<w.length;i++)_[w[i]]=i;return function(M){var I=_[u._categories[M]];return I+1?I:b}}return m.identity}var d=h(r),o=h(n);n&&"category"===n.type&&(a=n._categories.length);var u,T,_,x=new Array(a);for(i=0;i<a;i++)for(t=r&&"category"===r.type?r._categories.length:p(y,i),x[i]=new Array(t),f=0;f<t;f++)x[i][f]=c((u=y,T=o(i),_=d(f),T===b||_===b?b:s(u,T,_)));return x}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(v,re,ne){"use strict";re.exports={min:"zmin",max:"zmax"}},{}],805:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../constants/numerical").BADNUM,b=v("../../plots/cartesian/align_period");re.exports=function(y,e,r,n,a,t){var p=y._length,s=e.makeCalcdata(y,n),i=r.makeCalcdata(y,a);s=b(y,e,n,s).vals,i=b(y,r,a,i).vals;var f,c,l,h,d=y.text,o=void 0!==d&&g.isArray1D(d),x=y.hovertext,u=void 0!==x&&g.isArray1D(x),T=g.distinctVals(s),_=T.vals,w=g.distinctVals(i),M=w.vals,I=[],S=M.length,R=_.length;for(f=0;f<t.length;f++)I[f]=g.init2dArray(S,R);o&&(l=g.init2dArray(S,R)),u&&(h=g.init2dArray(S,R));var O=g.init2dArray(S,R);for(f=0;f<p;f++)if(s[f]!==m&&i[f]!==m){var C=g.findBin(s[f]+T.minDiff/2,_),D=g.findBin(i[f]+w.minDiff/2,M);for(c=0;c<t.length;c++)I[c][D][C]=y[t[c]][f],O[D][C]=f;o&&(l[D][C]=d[f]),u&&(h[D][C]=x[f])}for(y["_"+n]=_,y["_"+a]=M,c=0;c<t.length;c++)y["_"+t[c]]=I[c];o&&(y._text=l),u&&(y._hovertext=h),e&&"category"===e.type&&(y["_"+n+"CategoryMap"]=_.map(function(z){return e._categories[z]})),r&&"category"===r.type&&(y["_"+a+"CategoryMap"]=M.map(function(z){return r._categories[z]})),y._after2before=O}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./xyz_defaults"),b=v("./label_defaults"),y=v("../scatter/period_defaults"),e=v("./style_defaults"),r=v("../../components/colorscale/defaults"),n=v("./attributes");re.exports=function(a,t,p,s){function i(f,c){return g.coerce(a,t,n,f,c)}m(a,t,i,s)?(y(a,t,s,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),b(i,s),e(a,t,i,s),i("hoverongaps"),i("connectgaps",g.isArray1D(t.z)&&!1!==t.zsmooth),r(a,t,s,i,{prefix:"",cLetter:"z"})):t.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(v,re,ne){"use strict";var g=v("../../lib").maxRowLength;re.exports=function(m){var b,y,e,r,n,a,t,p,s=[],i={},f=[],c=m[0],l=[],h=[0,0,0],d=g(m);for(y=0;y<m.length;y++)for(b=l,l=c,c=m[y+1]||[],e=0;e<d;e++)void 0===l[e]&&((a=(void 0!==l[e-1]?1:0)+(void 0!==l[e+1]?1:0)+(void 0!==b[e]?1:0)+(void 0!==c[e]?1:0))?(0===y&&a++,0===e&&a++,y===m.length-1&&a++,e===l.length-1&&a++,a<4&&(i[[y,e]]=[y,e,a]),s.push([y,e,a])):f.push([y,e]));for(;f.length;){for(t={},p=!1,n=f.length-1;n>=0;n--)(a=((i[[(y=(r=f[n])[0])-1,e=r[1]]]||h)[2]+(i[[y+1,e]]||h)[2]+(i[[y,e-1]]||h)[2]+(i[[y,e+1]]||h)[2])/20)&&(t[r]=[y,e,a],f.splice(n,1),p=!0);if(!p)throw"findEmpties iterated with no new neighbors";for(r in t)i[r]=t[r],s.push(t[r])}return s.sort(function(o,x){return x[2]-o[2]})}},{"../../lib":515}],808:[function(v,re,ne){"use strict";var g=v("../../components/fx"),m=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("../../components/colorscale").extractOpts;re.exports=function(e,r,n,a,t){t||(t={});var p,s,i,f,c=t.isContour,l=e.cd[0],h=l.trace,d=e.xa,o=e.ya,x=l.x,u=l.y,T=l.z,_=l.xCenter,w=l.yCenter,M=l.zmask,I=h.zhoverformat,S=x,R=u;if(!1!==e.index){try{i=Math.round(e.index[1]),f=Math.round(e.index[0])}catch{return void m.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(i<0||i>=T[0].length||f<0||f>T.length)return}else{if(g.inbox(r-x[0],r-x[x.length-1],0)>0||g.inbox(n-u[0],n-u[u.length-1],0)>0)return;if(c){var O;for(S=[2*x[0]-x[1]],O=1;O<x.length;O++)S.push((x[O]+x[O-1])/2);for(S.push([2*x[x.length-1]-x[x.length-2]]),R=[2*u[0]-u[1]],O=1;O<u.length;O++)R.push((u[O]+u[O-1])/2);R.push([2*u[u.length-1]-u[u.length-2]])}i=Math.max(0,Math.min(S.length-2,m.findBin(r,S))),f=Math.max(0,Math.min(R.length-2,m.findBin(n,R)))}var C,D,B=d.c2p(x[i]),z=d.c2p(x[i+1]),Y=o.c2p(u[f]),G=o.c2p(u[f+1]);c?(z=B,p=(C=l.orig_x||x)[i],G=Y,s=(D=l.orig_y||u)[f]):(C=l.orig_x||_||x,D=l.orig_y||w||u,p=_?C[i]:(C[i]+C[i+1])/2,s=w?D[f]:(D[f]+D[f+1])/2,d&&"category"===d.type&&(p=x[i]),o&&"category"===o.type&&(s=u[f]),h.zsmooth&&(B=z=d.c2p(p),Y=G=o.c2p(s)));var J=T[f][i];if(M&&!M[f][i]&&(J=void 0),void 0!==J||h.hoverongaps){var te;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[f])?te=l.hovertext[f][i]:Array.isArray(l.text)&&Array.isArray(l.text[f])&&(te=l.text[f][i]);var X=y(h),ae=b.tickText({type:"linear",range:[X.min,X.max],hoverformat:I,_separators:d._separators,_numFormat:d._numFormat},J,"hover").text;return[m.extendFlat(e,{index:h._after2before?h._after2before[f][i]:[f,i],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:B,x1:z,y0:Y,y1:G,xLabelVal:p,yLabelVal:s,zLabelVal:J,zLabel:ae,text:te})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:v("./colorbar"),style:v("./style"),hoverPoints:v("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(v,re,ne){"use strict";var g=v("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];function b(e){return.5-.25*Math.min(1,.5*e)}function y(e,r,n){var a,t,p,s,i,f,c,l,h,d,o,x,u,T=0;for(s=0;s<r.length;s++){for(o=e[t=(a=r[s])[0]][p=a[1]],d=0,h=0,i=0;i<4;i++)(c=e[t+(f=m[i])[0]])&&void 0!==(l=c[p+f[1]])&&(0===d?x=u=l:(x=Math.min(x,l),u=Math.max(u,l)),h++,d+=l);if(0===h)throw"iterateInterp2d order is wrong: no defined neighbors";e[t][p]=d/h,void 0===o?h<4&&(T=1):(e[t][p]=(1+n)*e[t][p]-n*o,u>x&&(T=Math.max(T,Math.abs(e[t][p]-o)/(u-x))))}return T}re.exports=function(e,r){var n,a=1;for(y(e,r),n=0;n<r.length&&!(r[n][2]<4);n++);for(r=r.slice(n),n=0;n<100&&a>.01;n++)a=y(e,r,b(a));return a>.01&&g.log("interp2d didn't converge quickly",a),e}},{"../../lib":515}],811:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){m("texttemplate");var y=g.extendFlat({},b.font,{color:"auto",size:"auto"});g.coerceFont(m,"textfont",y)}},{"../../lib":515}],812:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib").isArrayOrTypedArray;re.exports=function(b,y,e,r,n,a){var t,p,s,i=[],f=g.traceIs(b,"contour"),c=g.traceIs(b,"histogram"),l=g.traceIs(b,"gl2d");if(m(y)&&y.length>1&&!c&&"category"!==a.type){var h=y.length;if(!(h<=n))return y.slice(0,f?n:n+1);if(f||l)i=y.slice(0,n);else if(1===n)i=[y[0]-.5,y[0]+.5];else{for(i=[1.5*y[0]-.5*y[1]],s=1;s<h;s++)i.push(.5*(y[s-1]+y[s]));i.push(1.5*y[h-1]-.5*y[h-2])}if(h<n){var d=i[i.length-1],o=d-i[i.length-2];for(s=h;s<n;s++)i.push(d+=o)}}else{var x=b[a._id.charAt(0)+"calendar"];for(t=c?a.r2c(e,0,x):m(y)&&1===y.length?y[0]:void 0===e?0:("log"===a.type?a.d2c:a.r2c)(e,0,x),p=r||1,s=f||l?0:-.5;s<n;s++)i.push(t+p*s)}return i}},{"../../lib":515,"../../registry":647}],813:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("tinycolor2"),b=v("../../registry"),y=v("../../components/drawing"),e=v("../../plots/cartesian/axes"),r=v("../../lib"),n=v("../../lib/svg_text_utils"),a=v("../scatter/format_labels"),t=v("../../components/color"),p=v("../../components/colorscale").extractOpts,s=v("../../components/colorscale").makeColorScaleFuncFromTrace,i=v("../../constants/xmlns_namespaces"),f=v("../../constants/alignment").LINE_SPACING;function c(x){return x.selectAll("g.heatmap-label")}function l(x){c(x).remove()}function h(x,u){var T=u.length-2,_=r.constrain(r.findBin(x,u),0,T),w=u[_],I=r.constrain(_+(x-w)/(u[_+1]-w)-.5,0,T),S=Math.round(I),R=Math.abs(I-S);return I&&I!==T&&R?{bin0:S,frac:R,bin1:Math.round(S+R/(I-S))}:{bin0:S,bin1:S,frac:0}}function d(x,u){var T=u.length-1,_=r.constrain(r.findBin(x,u),0,T),w=u[_],M=(x-w)/(u[_+1]-w)||0;return M<=0?{bin0:_,bin1:_,frac:0}:M<.5?{bin0:_,bin1:_+1,frac:M}:{bin0:_+1,bin1:_,frac:1-M}}function o(x,u,T){x[u]=T[0],x[u+1]=T[1],x[u+2]=T[2],x[u+3]=Math.round(255*T[3])}re.exports=function(x,u,T,_){var w=u.xaxis,M=u.yaxis;r.makeTraceGroups(_,T,"hm").each(function(I){var S,R,O,C,D,B,z,Y,G=g.select(this),J=I[0],te=J.trace,X=te.xgap||0,K=te.ygap||0,ae=J.z,U=J.x,V=J.y,q=J.xCenter,ie=J.yCenter,H=b.traceIs(te,"contour"),ee=H?"best":te.zsmooth,Q=ae.length,oe=r.maxRowLength(ae),le=!1,de=!1;for(B=0;void 0===S&&B<U.length-1;)S=w.c2p(U[B]),B++;for(B=U.length-1;void 0===R&&B>0;)R=w.c2p(U[B]),B--;for(R<S&&(O=R,R=S,S=O,le=!0),B=0;void 0===C&&B<V.length-1;)C=M.c2p(V[B]),B++;for(B=V.length-1;void 0===D&&B>0;)D=M.c2p(V[B]),B--;if(D<C&&(O=C,C=D,D=O,de=!0),H&&(q=U,ie=V,U=J.xfill,V=J.yfill),"fast"!==ee){var fe="best"===ee?0:.5;S=Math.max(-fe*w._length,S),R=Math.min((1+fe)*w._length,R),C=Math.max(-fe*M._length,C),D=Math.min((1+fe)*M._length,D)}var be,he,_e=Math.round(R-S),Ce=Math.round(D-C);if(_e<=0||Ce<=0)return G.selectAll("image").data([]).exit().remove(),void l(G);"fast"===ee?(be=oe,he=Q):(be=_e,he=Ce);var Ee=document.createElement("canvas");Ee.width=be,Ee.height=he;var Ae,ze,ve=Ee.getContext("2d"),Te=s(te,{noNumericCheck:!0,returnArray:!0});"fast"===ee?(Ae=le?function(sr){return oe-1-sr}:r.identity,ze=de?function(sr){return Q-1-sr}:r.identity):(Ae=function(sr){return r.constrain(Math.round(w.c2p(U[sr])-S),0,_e)},ze=function(sr){return r.constrain(Math.round(M.c2p(V[sr])-C),0,Ce)});var Ie,De,Fe,Ue,qe=ze(0),je=[qe,qe],rt=le?0:1,Ne=de?0:1,Be=0,We=0,Ye=0,lt=0;function mt(sr,hr){if(void 0!==sr){var jr=Te(sr);return jr[0]=Math.round(jr[0]),jr[1]=Math.round(jr[1]),jr[2]=Math.round(jr[2]),Be+=hr,We+=jr[0]*hr,Ye+=jr[1]*hr,lt+=jr[2]*hr,jr}return[0,0,0,0]}function Tt(sr,hr,jr,di){var Jn=sr[jr.bin0];if(void 0===Jn)return mt(void 0,1);var mr=sr[jr.bin1],lr=hr[jr.bin0],ri=hr[jr.bin1];return mt(Jn+jr.frac*(mr-Jn||0)+di.frac*((lr-Jn||0)+jr.frac*(void 0===mr?void 0===ri?0:void 0===lr?2*(ri-Jn):2*(2*ri-lr-Jn)/3:void 0===ri?void 0===lr?0:2*(2*Jn-mr-lr)/3:void 0===lr?2*(2*ri-mr-Jn)/3:ri+Jn-mr-lr)))}if(ee){var It,Ct=0;try{It=new Uint8Array(_e*Ce*4)}catch{It=new Array(_e*Ce*4)}if("best"===ee){var ct,at,St,Xt=q||U,tn=ie||V,hn=new Array(Xt.length),cn=new Array(tn.length),yn=new Array(_e),en=q?d:h,Xe=ie?d:h;for(B=0;B<Xt.length;B++)hn[B]=Math.round(w.c2p(Xt[B])-S);for(B=0;B<tn.length;B++)cn[B]=Math.round(M.c2p(tn[B])-C);for(B=0;B<_e;B++)yn[B]=en(B,hn);for(z=0;z<Ce;z++)for(at=ae[(ct=Xe(z,cn)).bin0],St=ae[ct.bin1],B=0;B<_e;B++,Ct+=4)o(It,Ct,Ue=Tt(at,St,yn[B],ct))}else for(z=0;z<Q;z++)for(Fe=ae[z],je=ze(z),B=0;B<_e;B++)Ue=mt(Fe[B],1),o(It,Ct=4*(je*_e+Ae(B)),Ue);var tt=ve.createImageData(_e,Ce);try{tt.data.set(It)}catch{var ye=tt.data,ke=ye.length;for(z=0;z<ke;z++)ye[z]=It[z]}ve.putImageData(tt,0,0)}else{var Ve=Math.floor(X/2),Je=Math.floor(K/2);for(z=0;z<Q;z++)if(Fe=ae[z],je.reverse(),je[Ne]=ze(z+1),je[0]!==je[1]&&void 0!==je[0]&&void 0!==je[1])for(Ie=[De=Ae(0),De],B=0;B<oe;B++)Ie.reverse(),Ie[rt]=Ae(B+1),Ie[0]!==Ie[1]&&void 0!==Ie[0]&&void 0!==Ie[1]&&(Ue=mt(Fe[B],(Ie[1]-Ie[0])*(je[1]-je[0])),ve.fillStyle="rgba("+Ue.join(",")+")",ve.fillRect(Ie[0]+Ve,je[0]+Je,Ie[1]-Ie[0]-X,je[1]-je[0]-K))}We=Math.round(We/Be),Ye=Math.round(Ye/Be),lt=Math.round(lt/Be);var nt=m("rgb("+We+","+Ye+","+lt+")");x._hmpixcount=(x._hmpixcount||0)+Be,x._hmlumcount=(x._hmlumcount||0)+Be*nt.getLuminance();var Ke=G.selectAll("image").data(I);Ke.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),Ke.attr({height:Ce,width:_e,x:S,y:C,"xlink:href":Ee.toDataURL("image/png")}),l(G);var vt=te.texttemplate;if(vt){var gt=p(te),Ot={type:"linear",range:[gt.min,gt.max],_separators:w._separators,_numFormat:w._numFormat},Vt="histogram2dcontour"===te.type,ft="contour"===te.type,bt=ft?Q-1:Q,Wt=ft?1:0,Pt=ft?oe-1:oe,Bt=[];for(B=ft?1:0;B<bt;B++){var Pe;if(ft)Pe=J.y[B];else if(Vt){if(0===B||B===Q-1)continue;Pe=J.y[B]}else if(J.yCenter)Pe=J.yCenter[B];else{if(B+1===Q&&void 0===J.y[B+1])continue;Pe=(J.y[B]+J.y[B+1])/2}var et=Math.round(M.c2p(Pe));if(!(0>et||et>M._length))for(z=Wt;z<Pt;z++){var dt;if(ft)dt=J.x[z];else if(Vt){if(0===z||z===oe-1)continue;dt=J.x[z]}else if(J.xCenter)dt=J.xCenter[z];else{if(z+1===oe&&void 0===J.x[z+1])continue;dt=(J.x[z]+J.x[z+1])/2}var xt=Math.round(w.c2p(dt));if(!(0>xt||xt>w._length)){var Rt=a({x:dt,y:Pe},te,x._fullLayout);Rt.x=dt,Rt.y=Pe;var Yt=J.z[B][z];void 0===Yt?(Rt.z="",Rt.zLabel=""):(Rt.z=Yt,Rt.zLabel=e.tickText(Ot,Yt,"hover").text);var nn=J.text&&J.text[B]&&J.text[B][z];void 0!==nn&&!1!==nn||(nn=""),Rt.text=nn;var Kt=r.texttemplateString(vt,Rt,x._fullLayout._d3locale,Rt,te._meta||{});if(Kt){var Mn=Kt.split("<br>"),Un=Mn.length,Tn=0;for(Y=0;Y<Un;Y++)Tn=Math.max(Tn,Mn[Y].length);Bt.push({l:Un,c:Tn,t:Kt,x:xt,y:et,z:Yt})}}}}var un=te.textfont,an=un.family,fn=un.size,pn=x._fullLayout.font.size;if(!fn||"auto"===fn){var Sn=1/0,Nn=1/0,Kn=0,Bn=0;for(Y=0;Y<Bt.length;Y++){var cr=Bt[Y];if(Kn=Math.max(Kn,cr.l),Bn=Math.max(Bn,cr.c),Y<Bt.length-1){var Lr=Bt[Y+1],Qn=Math.abs(Lr.x-cr.x),qr=Math.abs(Lr.y-cr.y);Qn&&(Sn=Math.min(Sn,Qn)),qr&&(Nn=Math.min(Nn,qr))}}isFinite(Sn)&&isFinite(Nn)?(Sn-=X,Nn-=K,Sn/=Bn,Nn/=Kn,Sn/=f/2,Nn/=f,fn=Math.min(Math.floor(Sn),Math.floor(Nn),pn)):fn=pn}if(fn<=0||!isFinite(fn))return;c(G).data(Bt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(sr){var di,hr=g.select(this),jr=un.color;jr&&"auto"!==jr||(jr=t.contrast("rgba("+Te(sr.z).join()+")")),hr.attr("data-notex",1).call(n.positionText,(di=sr,di.x),function(di){return di.y-fn*(di.l*f/2-1)}(sr)).call(y.font,an,fn,jr).text(sr.t).call(n.convertToTspans,x)})}})}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(v,re,ne){"use strict";var g=v("@plotly/d3");re.exports=function(m){g.select(m).selectAll(".hm image").style("opacity",function(b){return b.trace.opacity})}},{"@plotly/d3":58}],815:[function(v,re,ne){"use strict";re.exports=function(g,m,b){!1===b("zsmooth")&&(b("xgap"),b("ygap")),b("zhoverformat")}},{}],816:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../registry");function y(e,r){var n=r(e);return"scaled"===(n?r(e+"type","array"):"scaled")&&(r(e+"0"),r("d"+e)),n}re.exports=function(e,r,n,a,t,p){var s,i,f=n("z");if(t=t||"x",p=p||"y",void 0===f||!f.length)return 0;if(m.isArray1D(e.z)){s=n(t),i=n(p);var c=m.minRowLength(s),l=m.minRowLength(i);if(0===c||0===l)return 0;r._length=Math.min(c,l,f.length)}else{if(s=y(t,n),i=y(p,n),!function(h){for(var d,o=!0,x=!1,u=!1,T=0;T<h.length;T++){if(!m.isArrayOrTypedArray(d=h[T])){o=!1;break}d.length>0&&(x=!0);for(var _=0;_<d.length;_++)if(g(d[_])){u=!0;break}}return o&&x&&u}(f))return 0;n("transpose"),r._length=null}return"heatmapgl"===e.type||b.getComponentMethod("calendars","handleTraceDefaults")(e,r,[t,p],a),!0}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(v,re,ne){"use strict";for(var g=v("../heatmap/attributes"),m=v("../../components/colorscale/attributes"),b=v("../../lib/extend").extendFlat,y=v("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],r={},n=0;n<e.length;n++){var a=e[n];r[a]=g[a]}r.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},b(r,m("",{cLetter:"z",autoColorDflt:!1})),re.exports=y(r,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_heatmap2d,m=v("../../plots/cartesian/axes"),b=v("../../lib/str2rgbarray");function y(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=g(r.glplot,this.options),this.heatmap._trace=this}var e=y.prototype;e.handlePick=function(r){var n=this.options,a=n.shape,t=r.pointId,p=t%a[0],s=Math.floor(t/a[0]);return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[p],n.y[s],n.z[t]],textLabel:this.textLabels[t],name:this.name,pointIndex:[s,p],hoverinfo:this.hoverinfo}},e.update=function(r,n){var a=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var t=a.z;this.options.z=[].concat.apply([],t),this.options.shape=[t[0].length,t.length],this.options.x=a.x,this.options.y=a.y,this.options.zsmooth=r.zsmooth;var i=function(d){for(var o=d.colorscale,x=d.zmin,u=d.zmax,T=o.length,_=new Array(T),w=new Array(4*T),M=0;M<T;M++){var I=o[M],S=b(I[1]);_[M]=x+I[0]*(u-x);for(var R=0;R<4;R++)w[4*M+R]=S[R]}return{colorLevels:_,colorValues:w}}(r);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var f,c,l=this.scene.xaxis,h=this.scene.yaxis;!1===r.zsmooth&&(f={ppad:a.x[1]-a.x[0]},c={ppad:a.y[1]-a.y[0]}),r._extremes[l._id]=m.findExtremes(l,a.x,f),r._extremes[h._id]=m.findExtremes(h,a.y,c)},e.dispose=function(){this.heatmap.dispose()},re.exports=function(r,n,a){var t=new y(r,n.uid);return t.update(n,a),t}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../heatmap/xyz_defaults"),b=v("../../components/colorscale/defaults"),y=v("./attributes");re.exports=function(e,r,n,a){function t(p,s){return g.coerce(e,r,y,p,s)}m(e,r,t,a)?(t("text"),t("zsmooth"),b(e,r,a,t,{prefix:"",cLetter:"z"})):r.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(v,re,ne){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../heatmap/colorbar"),calc:v("../heatmap/calc"),plot:v("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(v,re,ne){"use strict";var g=v("../bar/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../plots/font_attributes"),r=v("./bin_attributes"),n=v("./constants"),a=v("../../lib/extend").extendFlat;re.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:m("x"),yhoverformat:m("y"),text:a({},g.text,{}),hovertext:a({},g.hovertext,{}),orientation:g.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:r("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:r("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({},{keys:n.eventDataKeys}),texttemplate:y({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:a({},g.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:g.insidetextanchor,textangle:g.textangle,cliponaxis:g.cliponaxis,constraintext:g.constraintext,marker:g.marker,offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:g.selected,unselected:g.unselected,_deprecated:{bardir:g._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(v,re,ne){"use strict";re.exports=function(g,m){for(var b=g.length,y=0,e=0;e<b;e++)m[e]?(g[e]/=m[e],y+=g[e]):g[e]=null;return y}},{}],823:[function(v,re,ne){"use strict";re.exports=function(g,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(v,re,ne){"use strict";var g=v("fast-isnumeric");re.exports={count:function(m,b,y){return y[m]++,1},sum:function(m,b,y,e){var r=e[b];return g(r)?(r=Number(r),y[m]+=r,r):0},avg:function(m,b,y,e,r){var n=e[b];return g(n)&&(n=Number(n),y[m]+=n,r[m]++),0},min:function(m,b,y,e){var r=e[b];if(g(r)){if(r=Number(r),!g(y[m]))return y[m]=r,r;if(y[m]>r){var n=r-y[m];return y[m]=r,n}}return 0},max:function(m,b,y,e){var r=e[b];if(g(r)){if(r=Number(r),!g(y[m]))return y[m]=r,r;if(y[m]<r){var n=r-y[m];return y[m]=r,n}}return 0}}},{"fast-isnumeric":190}],825:[function(v,re,ne){"use strict";var g=v("../../constants/numerical"),m=g.ONEAVGYEAR,b=g.ONEAVGMONTH,y=g.ONEDAY,e=g.ONEHOUR,r=g.ONEMIN,n=g.ONESEC,a=v("../../plots/cartesian/axes").tickIncrement;function t(f,c,l,h){if(f*c<=0)return 1/0;for(var d=Math.abs(c-f),o="date"===l.type,x=p(d,o),u=0;u<10;u++){var T=p(80*x,o);if(x===T||!s(T,f,c,o,l,h))break;x=T}return x}function p(f,c){return c&&f>n?f>y?f>1.1*m?m:f>1.1*b?b:y:f>e?e:f>r?r:n:Math.pow(10,Math.floor(Math.log(f)/Math.LN10))}function s(f,c,l,h,d,o){if(h&&f>y){var x=i(c,d,o),u=i(l,d,o),T=f===m?0:1;return x[T]!==u[T]}return Math.floor(l/f)-Math.floor(c/f)>.1}function i(f,c,l){var h=c.c2d(f,m,l).split("-");return""===h[0]&&(h.unshift(),h[0]="-"+h[0]),h}re.exports=function(f,c,l,h,d){var o,x,u=-1.1*c,T=-.1*c,_=f-T,w=l[0],M=l[1],I=Math.min(t(w+T,w+_,h,d),t(M+T,M+_,h,d)),S=Math.min(t(w+u,w+T,h,d),t(M+u,M+T,h,d));if(I>S&&S<Math.abs(M-w)/4e3?(o=I,x=!1):(o=Math.min(I,S),x=!0),"date"===h.type&&o>y){var R=o===m?1:6,O=o===m?"M12":"M1";return function(C,D){var B=h.c2d(C,m,d),z=B.indexOf("-",R);z>0&&(B=B.substr(0,z));var Y=h.d2c(B,0,d);if(Y<C){var G=a(Y,O,!1,d);(Y+G)/2<C+f&&(Y=G)}return D&&x?a(Y,O,!0,d):Y}}return function(C,D){var B=o*Math.round(C/o);return B+o/10<C&&B+.9*o<C+f&&(B+=o),D&&x&&(B-=o),B}}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../registry"),y=v("../../plots/cartesian/axes"),e=v("../bar/arrays_to_calcdata"),r=v("./bin_functions"),n=v("./norm_functions"),a=v("./average"),t=v("./bin_label_vals");function p(s,i,f,c,l){var h,d,o,x,u,T,_,w=c+"bins",M=s._fullLayout,S=M._histogramBinOpts[i["_"+c+"bingroup"]],R="overlay"===M.barmode,O=function(he){return f.r2c(he,0,x)},C=function(he){return f.c2r(he,0,x)},D="date"===f.type?function(he){return he||0===he?m.cleanDate(he,null,x):null}:function(he){return g(he)?Number(he):null};function B(he,_e,Ce){_e[he+"Found"]?(_e[he]=D(_e[he]),null===_e[he]&&(_e[he]=Ce[he])):(T[he]=_e[he]=Ce[he],m.nestedProperty(d[0],w+"."+he).set(Ce[he]))}if(i["_"+c+"autoBinFinished"])delete i["_"+c+"autoBinFinished"];else{d=S.traces;var z=[],Y=!0,G=!1,J=!1;for(h=0;h<d.length;h++)if((o=d[h]).visible){var te=S.dirs[h];u=o["_"+te+"pos0"]=f.makeCalcdata(o,te),z=m.concat(z,u),delete o["_"+c+"autoBinFinished"],!0===i.visible&&(Y?Y=!1:(delete o._autoBin,o["_"+c+"autoBinFinished"]=1),b.traceIs(o,"2dMap")&&(G=!0),"histogram2dcontour"===o.type&&(J=!0))}var X=y.autoBin(z,f,S.nbins,G,x=d[0][c+"calendar"],S.sizeFound&&S.size),K=d[0]._autoBin={};if(T=K[S.dirs[0]]={},J&&(S.size||(X.start=C(y.tickIncrement(O(X.start),X.size,!0,x))),void 0===S.end&&(X.end=C(y.tickIncrement(O(X.end),X.size,!1,x)))),R&&!b.traceIs(i,"2dMap")&&0===X._dataSpan&&"category"!==f.type&&"multicategory"!==f.type){if(l)return[X,u,!0];X=function(he,_e,Ce,Ee,Ae){var ze,ve,Te,Ie=he._fullLayout,De=function(Tt,It){for(var Ct=It.xaxis,ct=It.yaxis,at=It.orientation,St=[],Xt=Tt._fullData,tn=0;tn<Xt.length;tn++){var hn=Xt[tn];"histogram"===hn.type&&!0===hn.visible&&hn.orientation===at&&hn.xaxis===Ct&&hn.yaxis===ct&&St.push(hn)}return St}(he,_e),Fe=!1,Ue=1/0,qe=[_e];for(ze=0;ze<De.length;ze++)if((ve=De[ze])===_e)Fe=!0;else if(Fe){var je=p(he,ve,Ce,Ee,!0),rt=je[0],Ne=je[2];ve["_"+Ee+"autoBinFinished"]=1,ve["_"+Ee+"pos0"]=je[1],Ne?qe.push(ve):Ue=Math.min(Ue,rt.size)}else Te=Ie._histogramBinOpts[ve["_"+Ee+"bingroup"]],Ue=Math.min(Ue,Te.size||ve[Ae].size);var Be=new Array(qe.length);for(ze=0;ze<qe.length;ze++)for(var We=qe[ze]["_"+Ee+"pos0"],Ye=0;Ye<We.length;Ye++)if(void 0!==We[Ye]){Be[ze]=We[Ye];break}for(isFinite(Ue)||(Ue=m.distinctVals(Be).minDiff),ze=0;ze<qe.length;ze++){var lt=(ve=qe[ze])[Ee+"calendar"],mt={start:Ce.c2r(Be[ze]-Ue/2,0,lt),end:Ce.c2r(Be[ze]+Ue/2,0,lt),size:Ue};ve._input[Ae]=ve[Ae]=mt,(Te=Ie._histogramBinOpts[ve["_"+Ee+"bingroup"]])&&m.extendFlat(Te,mt)}return _e[Ae]}(s,i,f,c,w)}(_=o.cumulative||{}).enabled&&"include"!==_.currentbin&&("decreasing"===_.direction?X.start=C(y.tickIncrement(O(X.start),X.size,!0,x)):X.end=C(y.tickIncrement(O(X.end),X.size,!1,x))),S.size=X.size,S.sizeFound||(T.size=X.size,m.nestedProperty(d[0],w+".size").set(X.size)),B("start",S,X),B("end",S,X)}u=i["_"+c+"pos0"],delete i["_"+c+"pos0"];var ae=i._input[w]||{},U=m.extendFlat({},S),V=S.start,q=f.r2l(ae.start),ie=void 0!==q;if((S.startFound||ie)&&q!==f.r2l(V)){var H=ie?q:m.aggNums(Math.min,null,u),ee={type:"category"===f.type||"multicategory"===f.type?"linear":f.type,r2l:f.r2l,dtick:S.size,tick0:V,calendar:x,range:[H,y.tickIncrement(H,S.size,!1,x)].map(f.l2r)},Q=y.tickFirst(ee);Q>f.r2l(H)&&(Q=y.tickIncrement(Q,S.size,!0,x)),U.start=f.l2r(Q),ie||m.nestedProperty(i,w+".start").set(U.start)}var oe=S.end,le=f.r2l(ae.end),de=void 0!==le;if((S.endFound||de)&&le!==f.r2l(oe)){var fe=de?le:m.aggNums(Math.max,null,u);U.end=f.l2r(fe),de||m.nestedProperty(i,w+".start").set(U.end)}var be="autobin"+c;return!1===i._input[be]&&(i._input[w]=m.extendFlat({},i[w]||{}),delete i._input[be],delete i[be]),[U,u]}re.exports={calc:function(s,i){var f,c,l,h,d=[],o=[],x="h"===i.orientation,u=y.getFromId(s,x?i.yaxis:i.xaxis),T=x?"y":"x",_={x:"y",y:"x"}[T],w=i[T+"calendar"],M=i.cumulative,I=p(s,i,u,T),S=I[0],R=I[1],O="string"==typeof S.size,C=[],D=O?C:S,B=[],z=[],Y=[],G=0,J=i.histnorm,te=i.histfunc,X=-1!==J.indexOf("density");M.enabled&&X&&(J=J.replace(/ ?density$/,""),X=!1);var K,ae="max"===te||"min"===te?null:0,U=r.count,V=n[J],q=!1,ie=function(ve){return u.r2c(ve,0,w)};for(m.isArrayOrTypedArray(i[_])&&"count"!==te&&(K=i[_],q="avg"===te,U=r[te]),f=ie(S.start),l=ie(S.end)+(f-y.tickIncrement(f,S.size,!1,w))/1e6;f<l&&d.length<1e6&&(c=y.tickIncrement(f,S.size,!1,w),d.push((f+c)/2),o.push(ae),Y.push([]),C.push(f),X&&B.push(1/(c-f)),q&&z.push(0),!(c<=f));)f=c;C.push(f),O||"date"!==u.type||(D={start:ie(D.start),end:ie(D.end),size:D.size}),s._fullLayout._roundFnOpts||(s._fullLayout._roundFnOpts={});var H=i["_"+T+"bingroup"],ee={leftGap:1/0,rightGap:1/0};H&&(s._fullLayout._roundFnOpts[H]||(s._fullLayout._roundFnOpts[H]=ee),ee=s._fullLayout._roundFnOpts[H]);var Q,oe=o.length,le=!0,de=ee.leftGap,fe=ee.rightGap,be={};for(f=0;f<R.length;f++){var he=R[f];(h=m.findBin(he,D))>=0&&h<oe&&(G+=U(h,f,o,K,z),le&&Y[h].length&&he!==R[Y[h][0]]&&(le=!1),Y[h].push(f),be[f]=h,de=Math.min(de,he-C[h]),fe=Math.min(fe,C[h+1]-he))}ee.leftGap=de,ee.rightGap=fe,le||(Q=function(ve,Te){return function(){var Ie=s._fullLayout._roundFnOpts[H];return t(Ie.leftGap,Ie.rightGap,C,u,w)(ve,Te)}}),q&&(G=a(o,z)),V&&V(o,G,B),M.enabled&&function(ve,Te,Ie){var De,Fe,Ue;function qe(rt){Ue=ve[rt],ve[rt]/=2}function je(rt){ve[rt]=Ue+(Fe=ve[rt])/2,Ue+=Fe}if("half"===Ie)if("increasing"===Te)for(qe(0),De=1;De<ve.length;De++)je(De);else for(qe(ve.length-1),De=ve.length-2;De>=0;De--)je(De);else if("increasing"===Te){for(De=1;De<ve.length;De++)ve[De]+=ve[De-1];"exclude"===Ie&&(ve.unshift(0),ve.pop())}else{for(De=ve.length-2;De>=0;De--)ve[De]+=ve[De+1];"exclude"===Ie&&(ve.push(0),ve.shift())}}(o,M.direction,M.currentbin);var _e=Math.min(d.length,o.length),Ce=[],Ee=0,Ae=_e-1;for(f=0;f<_e;f++)if(o[f]){Ee=f;break}for(f=_e-1;f>=Ee;f--)if(o[f]){Ae=f;break}for(f=Ee;f<=Ae;f++)if(g(d[f])&&g(o[f])){var ze={p:d[f],s:o[f],b:0};M.enabled||(ze.pts=Y[f],le?ze.ph0=ze.ph1=Y[f].length?R[Y[f][0]]:d[f]:(i._computePh=!0,ze.ph0=Q(C[f]),ze.ph1=Q(C[f+1],!0))),Ce.push(ze)}return 1===Ce.length&&(Ce[0].width1=y.tickIncrement(Ce[0].p,S.size,!1,w)-Ce[0].p),e(Ce,i),m.isArrayOrTypedArray(i.selectedpoints)&&m.tagSelected(Ce,i,be),Ce},calcAllAutoBins:p}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(v,re,ne){"use strict";re.exports={eventDataKeys:["binNumber"]}},{}],828:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axis_ids"),b=v("../../registry").traceIs,y=v("../bar/defaults").handleGroupingDefaults,e=g.nestedProperty,r=v("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];re.exports=function(t,p){var s,i,f,c,l,h,d,o=p._histogramBinOpts={},x=[],u={},T=[];function _(X,K){return g.coerce(s._input,s,s._module.attributes,X,K)}function w(X){return"v"===X.orientation?"x":"y"}function M(X,K,ae){var U=X.uid+"__"+ae;K||(K=U);var V=m.getFromTrace({_fullLayout:p},X,ae).type,q=X[ae+"calendar"]||"",ie=o[K],H=!0;ie&&(V===ie.axType&&q===ie.calendar?(H=!1,ie.traces.push(X),ie.dirs.push(ae)):(K=U,V!==ie.axType&&g.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+V,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),q!==ie.calendar&&g.warn(["Attempted to group the bins of trace",X.index,"set with a",q,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),H&&(o[K]={traces:[X],dirs:[ae],axType:V,calendar:X[ae+"calendar"]||""}),X["_"+ae+"bingroup"]=K}for(l=0;l<t.length;l++)b(s=t[l],"histogram")&&(x.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,b(s,"2dMap")||y(s._input,s,p,_));var I=p._alignmentOpts||{};for(l=0;l<x.length;l++){if(f="",!b(s=x[l],"2dMap")){if(c=w(s),"group"===p.barmode&&s.alignmentgroup){var R=r(p,s[c+"axis"])+s.orientation;(I[R]||{})[s.alignmentgroup]&&(f=R)}f||"overlay"===p.barmode||(f=r(p,s.xaxis)+r(p,s.yaxis)+w(s))}f?(u[f]||(u[f]=[]),u[f].push(s)):T.push(s)}for(f in u)if(1!==(i=u[f]).length){var O=!1;for(i.length&&(s=i[0],O=_("bingroup")),f=O||f,l=0;l<i.length;l++){var C=(s=i[l])._input.bingroup;C&&C!==f&&g.warn(["Trace",s.index,"must match","within bingroup",f+".","Ignoring its bingroup:",C,"setting."].join(" ")),s.bingroup=f,M(s,f,w(s))}}else T.push(i[0]);for(l=0;l<T.length;l++){s=T[l];var D=_("bingroup");if(b(s,"2dMap"))for(d=0;d<2;d++){var B=_((c=a[d])+"bingroup",D?D+"__"+c:null);M(s,B,c)}else M(s,D,w(s))}for(f in o){var z=o[f];for(i=z.traces,h=0;h<n.length;h++){var Y,G,J=n[h],te=J.name;if("nbins"!==te||!z.sizeFound){for(l=0;l<i.length;l++){if(void 0!==e((s=i[l])._input,Y=J.aStr[c=z.dirs[l]]).get()){z[te]=_(Y),z[te+"Found"]=!0;break}(G=(s._autoBin||{})[c]||{})[te]&&e(s,Y).set(G[te])}if("start"===te||"end"===te)for(;l<i.length;l++)(s=i[l])["_"+c+"bingroup"]&&_(Y,(G=(s._autoBin||{})[c]||{})[te]);"nbins"!==te||z.sizeFound||z.nbinsFound||(s=i[0],z[te]=_(Y))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../../components/color"),y=v("../bar/defaults").handleText,e=v("../bar/style_defaults"),r=v("./attributes");re.exports=function(n,a,t,p){function s(T,_){return m.coerce(n,a,r,T,_)}var i=s("x"),f=s("y");s("cumulative.enabled")&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var c=s("textposition");y(n,a,p,s,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var l=s("orientation",f&&!i?"h":"v"),h="v"===l?"x":"y",d="v"===l?"y":"x",o=i&&f?Math.min(m.minRowLength(i)&&m.minRowLength(f)):m.minRowLength(a[h]||[]);if(o){a._length=o,g.getComponentMethod("calendars","handleTraceDefaults")(n,a,["x","y"],p),a[d]&&s("histfunc"),s("histnorm"),s("autobin"+h),e(n,a,s,t,p),m.coerceSelectionMarkerOpacity(a,s);var x=(a.marker.line||{}).color,u=g.getComponentMethod("errorbars","supplyDefaults");u(n,a,x||b.defaultLine,{axis:"y"}),u(n,a,x||b.defaultLine,{axis:"x",inherit:"y"})}else a.visible=!1}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e){if(g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(g.z=m.zLabelVal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),!(b.cumulative||{}).enabled){var r,n=Array.isArray(e)?y[0].pts[e[0]][e[1]]:y[e].pts;if(g.pointNumbers=n,g.binNumber=g.pointNumber,delete g.pointNumber,delete g.pointIndex,b._indexToPoints){r=[];for(var a=0;a<n.length;a++)r=r.concat(b._indexToPoints[n[a]])}else r=n;g.pointIndices=r}return g}},{}],831:[function(v,re,ne){"use strict";var g=v("../bar/hover").hoverPoints,m=v("../../plots/cartesian/axes").hoverLabelText;re.exports=function(b,y,e,r,n){var a=g(b,y,e,r,n);if(a){var t=(b=a[0]).cd[b.index],p=b.cd[0].trace;if(!p.cumulative.enabled){var s="h"===p.orientation?"y":"x";b[s+"Label"]=m(b[s+"a"],[t.ph0,t.ph1],p[s+"hoverformat"])}return a}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),layoutAttributes:v("../bar/layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),supplyLayoutDefaults:v("../bar/layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("../bar/cross_trace_calc").crossTraceCalc,plot:v("../bar/plot").plot,layerName:"barlayer",style:v("../bar/style").style,styleOnSelect:v("../bar/style").styleOnSelect,colorbar:v("../scatter/marker_colorbar"),hoverPoints:v("./hover"),selectPoints:v("../bar/select"),eventData:v("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(v,re,ne){"use strict";re.exports={percent:function(g,m){for(var b=g.length,y=100/m,e=0;e<b;e++)g[e]*=y},probability:function(g,m){for(var b=g.length,y=0;y<b;y++)g[y]/=m},density:function(g,m,b,y){var e=g.length;y=y||1;for(var r=0;r<e;r++)g[r]*=b[r]*y},"probability density":function(g,m,b,y){var e=g.length;y&&(m/=y);for(var r=0;r<e;r++)g[r]*=b[r]/m}}},{}],834:[function(v,re,ne){"use strict";var g=v("../histogram/attributes"),m=v("../histogram/bin_attributes"),b=v("../heatmap/attributes"),y=v("../../plots/attributes"),e=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,r=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../plots/template_attributes").texttemplateAttrs,a=v("../../components/colorscale/attributes"),t=v("../../lib/extend").extendFlat;re.exports=t({x:g.x,y:g.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:g.histnorm,histfunc:g.histfunc,nbinsx:g.nbinsx,xbins:m("x"),nbinsy:g.nbinsy,ybins:m("y"),autobinx:g.autobinx,autobiny:g.autobiny,bingroup:t({},g.bingroup,{}),xbingroup:t({},g.bingroup,{}),ybingroup:t({},g.bingroup,{}),xgap:b.xgap,ygap:b.ygap,zsmooth:b.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:r({},{keys:"z"}),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:b.textfont,showlegend:t({},y.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../histogram/bin_functions"),y=v("../histogram/norm_functions"),e=v("../histogram/average"),r=v("../histogram/bin_label_vals"),n=v("../histogram/calc").calcAllAutoBins;function a(s,i,f,c){var l,h=new Array(s);if(c)for(l=0;l<s;l++)h[l]=1/(i[l+1]-i[l]);else{var d=1/f;for(l=0;l<s;l++)h[l]=d}return h}function t(s,i){return{start:s(i.start),end:s(i.end),size:i.size}}function p(s,i,f,c,l,h){var d,o=s.length-1,x=new Array(o),u=r(f,c,s,l,h);for(d=0;d<o;d++){var T=(i||[])[d];x[d]=void 0===T?[u(s[d]),u(s[d+1],!0)]:[T,T]}return x}re.exports=function(s,i){var f,c,l,h,d=m.getFromId(s,i.xaxis),o=m.getFromId(s,i.yaxis),x=i.xcalendar,u=i.ycalendar,T=function(ct){return d.r2c(ct,0,x)},_=function(ct){return o.r2c(ct,0,u)},w=n(s,i,d,"x"),M=w[0],I=w[1],S=n(s,i,o,"y"),R=S[0],O=S[1],C=i._length;I.length>C&&I.splice(C,I.length-C),O.length>C&&O.splice(C,O.length-C);var D=[],B=[],z=[],Y="string"==typeof M.size,G="string"==typeof R.size,J=[],te=[],X=Y?J:M,K=G?te:R,ae=0,U=[],V=[],q=i.histnorm,ie=i.histfunc,H=-1!==q.indexOf("density"),ee="max"===ie||"min"===ie?null:0,Q=b.count,oe=y[q],le=!1,de=[],fe=[],be="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";be&&"count"!==ie&&(le="avg"===ie,Q=b[ie]);var he=M.size,_e=T(M.start),Ce=T(M.end)+(_e-m.tickIncrement(_e,he,!1,x))/1e6;for(f=_e;f<Ce;f=m.tickIncrement(f,he,!1,x))B.push(ee),J.push(f),le&&z.push(0);J.push(f);var Ae=B.length,ze=(f-_e)/Ae,ve=d.c2r(_e+ze/2,0,x),Te=R.size,Ie=_(R.start),De=_(R.end)+(Ie-m.tickIncrement(Ie,Te,!1,u))/1e6;for(f=Ie;f<De;f=m.tickIncrement(f,Te,!1,u)){D.push(B.slice()),te.push(f);var Fe=new Array(Ae);for(c=0;c<Ae;c++)Fe[c]=[];V.push(Fe),le&&U.push(z.slice())}te.push(f);var Ue=D.length,qe=(f-Ie)/Ue,je=o.c2r(Ie+qe/2,0,u);H&&(de=a(B.length,X,ze,Y),fe=a(D.length,K,qe,G)),Y||"date"!==d.type||(X=t(T,X)),G||"date"!==o.type||(K=t(_,K));var rt=!0,Ne=!0,Be=new Array(Ae),We=new Array(Ue),Ye=1/0,lt=1/0,mt=1/0,Tt=1/0;for(f=0;f<C;f++){var It=I[f],Ct=O[f];l=g.findBin(It,X),h=g.findBin(Ct,K),l>=0&&l<Ae&&h>=0&&h<Ue&&(ae+=Q(l,f,D[h],be,U[h]),V[h][l].push(f),rt&&(void 0===Be[l]?Be[l]=It:Be[l]!==It&&(rt=!1)),Ne&&(void 0===We[h]?We[h]=Ct:We[h]!==Ct&&(Ne=!1)),Ye=Math.min(Ye,It-J[l]),lt=Math.min(lt,J[l+1]-It),mt=Math.min(mt,Ct-te[h]),Tt=Math.min(Tt,te[h+1]-Ct))}if(le)for(h=0;h<Ue;h++)ae+=e(D[h],U[h]);if(oe)for(h=0;h<Ue;h++)oe(D[h],ae,de,fe[h]);return{x:I,xRanges:p(J,rt&&Be,Ye,lt,d,x),x0:ve,dx:ze,y:O,yRanges:p(te,Ne&&We,mt,Tt,o,u),y0:je,dy:qe,z:D,pts:V}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./sample_defaults"),b=v("../heatmap/style_defaults"),y=v("../../components/colorscale/defaults"),e=v("../heatmap/label_defaults"),r=v("./attributes");re.exports=function(n,a,t,p){function s(i,f){return g.coerce(n,a,r,i,f)}m(n,a,s,p),!1!==a.visible&&(b(n,a,s,p),y(n,a,p,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),e(s,p),s("xhoverformat"),s("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(v,re,ne){"use strict";var g=v("../heatmap/hover"),m=v("../../plots/cartesian/axes").hoverLabelText;re.exports=function(b,y,e,r,n){var a=g(b,y,e,r,n);if(a){var t=(b=a[0]).index,i=b.cd[0],f=i.trace,c=i.xRanges[t[1]],l=i.yRanges[t[0]];return b.xLabel=m(b.xa,[c[0],c[1]],f.xhoverformat),b.yLabel=m(b.ya,[l[0],l[1]],f.yhoverformat),a}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../heatmap/calc"),plot:v("../heatmap/plot"),layerName:"heatmaplayer",colorbar:v("../heatmap/colorbar"),style:v("../heatmap/style"),hoverPoints:v("./hover"),eventData:v("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib");re.exports=function(b,y,e,r){var n=e("x"),a=e("y"),t=m.minRowLength(n),p=m.minRowLength(a);t&&p?(y._length=Math.min(t,p),g.getComponentMethod("calendars","handleTraceDefaults")(b,y,["x","y"],r),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):y.visible=!1}},{"../../lib":515,"../../registry":647}],840:[function(v,re,ne){"use strict";var g=v("../histogram2d/attributes"),m=v("../contour/attributes"),b=v("../../components/colorscale/attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../lib/extend").extendFlat;re.exports=e({x:g.x,y:g.y,z:g.z,marker:g.marker,histnorm:g.histnorm,histfunc:g.histfunc,nbinsx:g.nbinsx,xbins:g.xbins,nbinsy:g.nbinsy,ybins:g.ybins,autobinx:g.autobinx,autobiny:g.autobiny,bingroup:g.bingroup,xbingroup:g.xbingroup,ybingroup:g.ybingroup,autocontour:m.autocontour,ncontours:m.ncontours,contours:m.contours,line:{color:m.line.color,width:e({},m.line.width,{dflt:.5}),dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},xhoverformat:y("x"),yhoverformat:y("y"),zhoverformat:y("z",1),hovertemplate:g.hovertemplate,texttemplate:m.texttemplate,textfont:m.textfont},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../histogram2d/sample_defaults"),b=v("../contour/contours_defaults"),y=v("../contour/style_defaults"),e=v("../heatmap/label_defaults"),r=v("./attributes");re.exports=function(n,a,t,p){function s(i,f){return g.coerce(n,a,r,i,f)}m(n,a,s,p),!1!==a.visible&&(b(n,a,s,function(i){return g.coerce2(n,a,r,i)}),y(n,a,s,p),s("xhoverformat"),s("yhoverformat"),s("hovertemplate"),a.contours&&"heatmap"===a.contours.coloring&&e(s,p))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../histogram/cross_trace_defaults"),calc:v("../contour/calc"),plot:v("../contour/plot").plot,layerName:"contourlayer",style:v("../contour/style"),colorbar:v("../contour/colorbar"),hoverPoints:v("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../components/colorscale/attributes"),y=v("../../plots/domain").attributes,e=v("../pie/attributes"),r=v("../sunburst/attributes"),n=v("../treemap/attributes"),a=v("../treemap/constants"),t=v("../../lib/extend").extendFlat;re.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:n.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:r.marker.colors,line:r.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:r.leaf,pathbar:n.pathbar,text:e.text,textinfo:r.textinfo,texttemplate:m({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:g({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n.outsidetextfont,textposition:n.textposition,sort:e.sort,root:r.root,domain:y({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(v,re,ne){"use strict";var g=v("../../plots/plots");ne.name="icicle",ne.plot=function(m,b,y,e){g.plotBasePlot(ne.name,m,b,y,e)},ne.clean=function(m,b,y,e){g.cleanBasePlot(ne.name,m,b,y,e)}},{"../../plots/plots":628}],845:[function(v,re,ne){"use strict";var g=v("../sunburst/calc");ne.calc=function(m,b){return g.calc(m,b)},ne.crossTraceCalc=function(m){return g._runCrossTraceCalc("icicle",m)}},{"../sunburst/calc":1060}],846:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../../components/color"),y=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,r=v("../bar/constants").TEXTPAD,n=v("../../components/colorscale"),a=n.hasColorscale,t=n.handleDefaults;re.exports=function(p,s,i,f){function c(T,_){return g.coerce(p,s,m,T,_)}var l=c("labels"),h=c("parents");if(l&&l.length&&h&&h.length){var d=c("values");c(d&&d.length?"branchvalues":"count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var o=c("text");c("texttemplate"),s.texttemplate||c("textinfo",Array.isArray(o)?"text+label":"label"),c("hovertext"),c("hovertemplate");var x=c("pathbar.visible");e(p,s,f,c,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",f.paper_bgcolor),c("marker.colors");var u=s._hasColorscale=a(p,"marker","colors")||(p.marker||{}).coloraxis;u&&t(p,s,f,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",u?1:.7),s._hovered={marker:{line:{width:2,color:b.contrast(f.paper_bgcolor)}}},x&&(c("pathbar.thickness",s.pathbar.textfont.size+2*r),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),y(s,f,c),s._length=null}else s.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing"),y=v("../../lib/svg_text_utils"),e=v("./partition"),r=v("./style").styleOne,n=v("../treemap/constants"),a=v("../sunburst/helpers"),t=v("../sunburst/fx"),p=v("../sunburst/plot").formatSliceLabel;re.exports=function(s,i,f,c,l){var h=l.width,d=l.height,o=l.viewX,x=l.viewY,u=l.pathSlice,T=l.toMoveInsideSlice,_=l.strTransform,w=l.hasTransition,M=l.handleSlicesExit,I=l.makeUpdateSliceInterpolator,S=l.makeUpdateTextInterpolator,R=l.prevEntry,O=s._fullLayout,C=i[0].trace,D=-1!==C.textposition.indexOf("left"),B=-1!==C.textposition.indexOf("right"),z=-1!==C.textposition.indexOf("bottom"),Y=e(f,[h,d],{flipX:C.tiling.flip.indexOf("x")>-1,flipY:C.tiling.flip.indexOf("y")>-1,orientation:C.tiling.orientation,pad:{inner:C.tiling.pad},maxDepth:C._maxDepth}).descendants(),G=1/0,J=-1/0;Y.forEach(function(U){var V=U.depth;V>=C._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):(G=Math.min(G,V),J=Math.max(J,V))}),c=c.data(Y,a.getPtId),C._maxVisibleLayers=isFinite(J)?J-G+1:0,c.enter().append("g").classed("slice",!0),M(c,!1,{},[h,d],u),c.order();var te=null;if(w&&R){var X=a.getPtId(R);c.each(function(U){null===te&&a.getPtId(U)===X&&(te={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}var K=function(){return te||{x0:0,x1:h,y0:0,y1:d}},ae=c;return w&&(ae=ae.transition().each("end",function(){var U=g.select(this);a.setSliceCursor(U,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ae.each(function(U){U._x0=o(U.x0),U._x1=o(U.x1),U._y0=x(U.y0),U._y1=x(U.y1),U._hoverX=o(U.x1-C.tiling.pad),U._hoverY=x(z?U.y1-C.tiling.pad/2:U.y0+C.tiling.pad/2);var V=g.select(this),q=m.ensureSingle(V,"path","surface",function(Q){Q.style("pointer-events","all")});w?q.transition().attrTween("d",function(Q){var oe=I(Q,!1,K(),[h,d],{orientation:C.tiling.orientation,flipX:C.tiling.flip.indexOf("x")>-1,flipY:C.tiling.flip.indexOf("y")>-1});return function(le){return u(oe(le))}}):q.attr("d",u),V.call(t,f,s,i,{styleOne:r,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),q.call(r,U,C,{hovered:!1}),U._text=U.x0===U.x1||U.y0===U.y1?"":p(U,f,C,i,O)||"";var ie=m.ensureSingle(V,"g","slicetext"),H=m.ensureSingle(ie,"text","",function(Q){Q.attr("data-notex",1)}),ee=m.ensureUniformFontSize(s,a.determineTextFont(C,U,O.font));H.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":D?"start":"middle").call(b.font,ee).call(y.convertToTspans,s),U.textBB=b.bBox(H.node()),U.transform=T(U,{fontSize:ee.size}),U.transform.fontSize=ee.size,w?H.transition().attrTween("transform",function(Q){var oe=S(Q,!1,K(),[h,d]);return function(le){return _(oe(le))}}):H.attr("transform",_(U))}),te}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"icicle",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(v,re,ne){"use strict";re.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y){function e(r,n){return g.coerce(b,y,m,r,n)}e("iciclecolorway",y.colorway),e("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(v,re,ne){"use strict";var g=v("d3-hierarchy"),m=v("../treemap/flip_tree");re.exports=function(b,y,e){var r=e.flipX,n=e.flipY,a="h"===e.orientation,t=e.maxDepth,p=y[0],s=y[1];t&&(p=(b.height+1)*y[0]/Math.min(b.height+1,t),s=(b.height+1)*y[1]/Math.min(b.height+1,t));var i=g.partition().padding(e.pad.inner).size(a?[y[1],p]:[y[0],s])(b);return(a||r||n)&&m(i,y,{swapXY:a,flipX:r,flipY:n}),i}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(v,re,ne){"use strict";var g=v("../treemap/draw"),m=v("./draw_descendants");re.exports=function(b,y,e,r){return g(b,y,e,r,{type:"icicle",drawDescendants:m})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/color"),b=v("../../lib"),y=v("../bar/uniform_text").resizeText;function e(r,n,a){var t=n.data.data,p=!n.children,s=t.i,i=b.castOption(a,s,"marker.line.color")||m.defaultLine,f=b.castOption(a,s,"marker.line.width")||0;r.style("stroke-width",f).call(m.fill,t.color).call(m.stroke,i).style("opacity",p?a.leaf.opacity:null)}re.exports={style:function(r){var n=r._fullLayout._iciclelayer.selectAll(".trace");y(r,n,"icicle"),n.each(function(a){var t=g.select(this),p=a[0].trace;t.style("opacity",p.opacity),t.selectAll("path.surface").each(function(s){g.select(this).call(e,s,p)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(v,re,ne){"use strict";for(var g=v("../../plots/attributes"),m=v("../../plots/template_attributes").hovertemplateAttrs,b=v("../../lib/extend").extendFlat,y=v("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],r=[],n=[],a=0;a<e.length;a++){var t=y[e[a]];r.push("For the `"+e[a]+"` colormodel, it is ["+(t.zminDflt||t.min).join(", ")+"]."),n.push("For the `"+e[a]+"` colormodel, it is ["+(t.zmaxDflt||t.max).join(", ")+"].")}re.exports=b({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:b({},g.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:m({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./constants"),b=v("fast-isnumeric"),y=v("../../plots/cartesian/axes"),e=v("../../lib").maxRowLength,r=v("./helpers").getImageSize;function n(t,p,s,i){return function(f){return g.constrain((f-t)*p,s,i)}}function a(t,p){return function(s){return g.constrain(s,t,p)}}re.exports=function(t,p){var s,i;if(p._hasZ)s=p.z.length,i=e(p.z);else if(p._hasSource){var f=r(p.source);s=f.height,i=f.width}var c,l=y.getFromId(t,p.xaxis||"x"),h=y.getFromId(t,p.yaxis||"y"),d=l.d2c(p.x0)-p.dx/2,o=h.d2c(p.y0)-p.dy/2,x=[d,d+i*p.dx],u=[o,o+s*p.dy];if(l&&"log"===l.type)for(c=0;c<i;c++)x.push(d+c*p.dx);if(h&&"log"===h.type)for(c=0;c<s;c++)u.push(o+c*p.dy);return p._extremes[l._id]=y.findExtremes(l,x),p._extremes[h._id]=y.findExtremes(h,u),p._scaler=function(T){var _=m.colormodel[T.colormodel],w=(_.colormodel||T.colormodel).length;T._sArray=[];for(var M=0;M<w;M++)T._sArray.push(_.min[M]!==T.zmin[M]||_.max[M]!==T.zmax[M]?n(T.zmin[M],(_.max[M]-_.min[M])/(T.zmax[M]-T.zmin[M]),_.min[M],_.max[M]):a(_.min[M],_.max[M]));return function(I){for(var S=I.slice(0,w),R=0;R<w;R++){var O=S[R];if(!b(O))return!1;S[R]=T._sArray[R](O)}return S}}(p),[{x0:d,y0:o,z:p.z,w:i,h:s}]}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(v,re,ne){"use strict";re.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(g){return g.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(g){return g.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(g){return g.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(g){var m=g.slice(0,3);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(g){var m=g.slice(0,4);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("./constants"),y=v("../../snapshot/helpers").IMAGE_URL_PREFIX;re.exports=function(e,r){function n(p,s){return g.coerce(e,r,m,p,s)}n("source"),r.source&&!r.source.match(y)&&delete r.source,r._hasSource=!!r.source;var a,t=n("z");r._hasZ=!(void 0===t||!t.length||!t[0]||!t[0].length),r._hasZ||r._hasSource?(n("x0"),n("y0"),n("dx"),n("dy"),r._hasZ?(n("colormodel","rgb"),n("zmin",(a=b.colormodel[r.colormodel]).zminDflt||a.min),n("zmax",a.zmaxDflt||a.max)):r._hasSource&&(r.colormodel="rgba256",r.zmin=(a=b.colormodel[r.colormodel]).zminDflt,r.zmax=a.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),r._length=null):r.visible=!1}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(v,re,ne){"use strict";re.exports=function(g,m){return"xVal"in m&&(g.x=m.xVal),"yVal"in m&&(g.y=m.yVal),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g.color=m.color,g.colormodel=m.trace.colormodel,g.z||(g.z=m.color),g}},{}],859:[function(v,re,ne){"use strict";var g=v("probe-image-size/sync"),m=v("../../snapshot/helpers").IMAGE_URL_PREFIX,b=v("buffer/").Buffer;ne.getImageSize=function(y){var e=y.replace(m,""),r=new b(e,"base64");return g(r)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(v,re,ne){"use strict";var g=v("../../components/fx"),m=v("../../lib"),b=v("./constants");re.exports=function(y,e,r){var n=y.cd[0],a=n.trace,t=y.xa,p=y.ya;if(!(g.inbox(e-n.x0,e-(n.x0+n.w*a.dx),0)>0||g.inbox(r-n.y0,r-(n.y0+n.h*a.dy),0)>0)){var s,i=Math.floor((e-n.x0)/a.dx),f=Math.floor(Math.abs(r-n.y0)/a.dy);if(a._hasZ?s=n.z[f][i]:a._hasSource&&(s=a._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(i,f,1,1).data),s){var c,l=n.hi||a.hoverinfo;if(l){var h=l.split("+");-1!==h.indexOf("all")&&(h=["color"]),-1!==h.indexOf("color")&&(c=!0)}var d,o=b.colormodel[a.colormodel],x=o.colormodel||a.colormodel,u=x.length,T=a._scaler(s),_=o.suffix,w=[];(a.hovertemplate||c)&&(w.push("["+[T[0]+_[0],T[1]+_[1],T[2]+_[2]].join(", ")),4===u&&w.push(", "+T[3]+_[3]),w.push("]"),w=w.join(""),y.extraText=x.toUpperCase()+": "+w),Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[f])?d=a.hovertext[f][i]:Array.isArray(a.text)&&Array.isArray(a.text[f])&&(d=a.text[f][i]);var M=p.c2p(n.y0+(f+.5)*a.dy),I=n.x0+(i+.5)*a.dx,S=n.y0+(f+.5)*a.dy,R="["+s.slice(0,a.colormodel.length).join(", ")+"]";return[m.extendFlat(y,{index:[f,i],x0:t.c2p(n.x0+i*a.dx),x1:t.c2p(n.x0+(i+1)*a.dx),y0:M,y1:M,color:T,xVal:I,xLabelVal:I,yVal:S,yLabelVal:S,zLabelVal:R,text:d,hovertemplateLabels:{zLabel:R,colorLabel:w,"color[0]Label":T[0]+_[0],"color[1]Label":T[1]+_[1],"color[2]Label":T[2]+_[2],"color[3]Label":T[3]+_[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover"),eventData:v("./event_data"),moduleType:"trace",name:"image",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=m.strTranslate,y=v("../../constants/xmlns_namespaces"),e=v("./constants"),r=m.isIOS()||m.isSafari()||m.isIE();re.exports=function(n,a,t,p){var s=a.xaxis,i=a.yaxis,f=!(r||n._context._exportedPlot);m.makeTraceGroups(p,t,"im").each(function(c){var l=g.select(this),h=c[0],d=h.trace,o=("fast"===d.zsmooth||!1===d.zsmooth&&f)&&!d._hasZ&&d._hasSource&&"linear"===s.type&&"linear"===i.type;d._realImage=o;var x,u,T,_,w,M,I=h.z,S=h.x0,R=h.y0,O=h.w,C=h.h,D=d.dx,B=d.dy;for(M=0;void 0===x&&M<O;)x=s.c2p(S+M*D),M++;for(M=O;void 0===u&&M>0;)u=s.c2p(S+M*D),M--;for(M=0;void 0===_&&M<C;)_=i.c2p(R+M*B),M++;for(M=C;void 0===w&&M>0;)w=i.c2p(R+M*B),M--;u<x&&(T=u,u=x,x=T),w<_&&(T=_,_=w,w=T),!o&&(x=Math.max(-.5*s._length,x),u=Math.min(1.5*s._length,u),_=Math.max(-.5*i._length,_),w=Math.min(1.5*i._length,w));var z=Math.round(u-x),Y=Math.round(w-_);if(z<=0||Y<=0)l.selectAll("image").data([]).exit().remove();else{var G=l.selectAll("image").data([c]);G.enter().append("svg:image").attr({xmlns:y.svg,preserveAspectRatio:"none"}),G.exit().remove();var J=!1===d.zsmooth?e.pixelatedStyle:"";if(o){var te=m.simpleMap(s.range,s.r2l),X=m.simpleMap(i.range,i.r2l),K=te[1]<te[0],ae=X[1]>X[0];if(K||ae){var U=x+z/2,V=_+Y/2;J+="transform:"+b(U+"px",V+"px")+"scale("+(K?-1:1)+","+(ae?-1:1)+")"+b(-U+"px",-V+"px")+";"}}G.attr("style",J);var q=new Promise(function(H){if(d._hasZ)H();else if(d._hasSource)if(d._canvas&&d._canvas.el.width===O&&d._canvas.el.height===C&&d._canvas.source===d.source)H();else{var ee=document.createElement("canvas");ee.width=O,ee.height=C;var Q=ee.getContext("2d",{willReadFrequently:!0});d._image=d._image||new Image;var oe=d._image;oe.onload=function(){Q.drawImage(oe,0,0),d._canvas={el:ee,source:d.source},H()},oe.setAttribute("src",d.source)}}).then(function(){var H;if(d._hasZ)H=ie(function(Q,oe){return I[oe][Q]}).toDataURL("image/png");else if(d._hasSource)if(o)H=d.source;else{var ee=d._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,O,C).data;H=ie(function(Q,oe){var le=4*(oe*O+Q);return[ee[le],ee[le+1],ee[le+2],ee[le+3]]}).toDataURL("image/png")}G.attr({"xlink:href":H,height:Y,width:z,x,y:_})});n._promises.push(q)}function ie(H){var ee=document.createElement("canvas");ee.width=z,ee.height=Y;var Q,oe=ee.getContext("2d",{willReadFrequently:!0}),le=function(ve){return m.constrain(Math.round(s.c2p(S+ve*D)-x),0,z)},de=function(ve){return m.constrain(Math.round(i.c2p(R+ve*B)-_),0,Y)},fe=e.colormodel[d.colormodel],be=fe.colormodel||d.colormodel,he=fe.fmt;for(M=0;M<h.w;M++){var _e=le(M),Ce=le(M+1);if(Ce!==_e&&!isNaN(Ce)&&!isNaN(_e))for(var Ee=0;Ee<h.h;Ee++){var Ae=de(Ee),ze=de(Ee+1);ze===Ae||isNaN(ze)||isNaN(Ae)||!H(M,Ee)||(Q=d._scaler(H(M,Ee)),oe.fillStyle=Q?be+"("+he(Q).join(",")+")":"rgba(0,0,0,0)",oe.fillRect(_e,Ae,Ce-_e,ze-Ae))}}return ee}})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(v,re,ne){"use strict";var g=v("@plotly/d3");re.exports=function(m){g.select(m).selectAll(".im image").style("opacity",function(b){return b[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(v,re,ne){"use strict";var g=v("../../lib/extend").extendFlat,m=v("../../lib/extend").extendDeep,b=v("../../plot_api/edit_types").overrideAll,y=v("../../plots/font_attributes"),e=v("../../components/color/attributes"),r=v("../../plots/domain").attributes,n=v("../../plots/cartesian/layout_attributes"),a=v("../../plot_api/plot_template").templatedArray,t=v("../../constants/delta.js"),p=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=y({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},f={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=a("step",m({},i,{range:f}));re.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:r({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:g({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:p("value")},font:g({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:p("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:g({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:m({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:b({range:f,visible:g({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:g({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,tickfont:y({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:g({},i.line.color,{}),width:g({},i.line.width,{dflt:1}),editType:"plot"},thickness:g({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(v,re,ne){"use strict";var g=v("../../plots/plots");ne.name="indicator",ne.plot=function(m,b,y,e){g.plotBasePlot(ne.name,m,b,y,e)},ne.clean=function(m,b,y,e){g.cleanBasePlot(ne.name,m,b,y,e)}},{"../../plots/plots":628}],866:[function(v,re,ne){"use strict";re.exports={calc:function(g,m){var b=[],y=m.value;"number"!=typeof m._lastValue&&(m._lastValue=m.value);var e=m._lastValue,r=e;return m._hasDelta&&"number"==typeof m.delta.reference&&(r=m.delta.reference),b[0]={y,lastY:e,delta:y-r,relativeDelta:(y-r)/r},b}}},{}],867:[function(v,re,ne){"use strict";re.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../../plots/domain").defaults,y=v("../../plot_api/plot_template"),e=v("../../plots/array_container_defaults"),r=v("./constants.js"),n=v("../../plots/cartesian/tick_value_defaults"),a=v("../../plots/cartesian/tick_mark_defaults"),t=v("../../plots/cartesian/tick_label_defaults"),p=v("../../plots/cartesian/prefix_suffix_defaults");function s(i,f){function c(l,h){return g.coerce(i,f,m.gauge.steps,l,h)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}re.exports={supplyDefaults:function(i,f,c,l){function h(O,C){return g.coerce(i,f,m,O,C)}b(f,l,h),h("mode"),f._hasNumber=-1!==f.mode.indexOf("number"),f._hasDelta=-1!==f.mode.indexOf("delta"),f._hasGauge=-1!==f.mode.indexOf("gauge");var d=h("value");f._range=[0,"number"==typeof d?1.5*d:1];var o,x,u,T,_,w,M=new Array(2);function I(O,C){return g.coerce(u,T,m.gauge,O,C)}function S(O,C){return g.coerce(_,w,m.gauge.axis,O,C)}if(f._hasNumber&&(h("number.valueformat"),h("number.font.color",l.font.color),h("number.font.family",l.font.family),h("number.font.size"),void 0===f.number.font.size&&(f.number.font.size=r.defaultNumberFontSize,M[0]=!0),h("number.prefix"),h("number.suffix"),o=f.number.font.size),f._hasDelta&&(h("delta.font.color",l.font.color),h("delta.font.family",l.font.family),h("delta.font.size"),void 0===f.delta.font.size&&(f.delta.font.size=(f._hasNumber?.5:1)*(o||r.defaultNumberFontSize),M[1]=!0),h("delta.reference",f.value),h("delta.relative"),h("delta.valueformat",f.delta.relative?"2%":""),h("delta.increasing.symbol"),h("delta.increasing.color"),h("delta.decreasing.symbol"),h("delta.decreasing.color"),h("delta.position"),h("delta.prefix"),h("delta.suffix"),x=f.delta.font.size),f._scaleNumbers=(!f._hasNumber||M[0])&&(!f._hasDelta||M[1])||!1,h("title.font.color",l.font.color),h("title.font.family",l.font.family),h("title.font.size",.25*(o||x||r.defaultNumberFontSize)),h("title.text"),f._hasGauge){(u=i.gauge)||(u={}),T=y.newContainer(f,"gauge"),I("shape"),(f._isBullet="bullet"===f.gauge.shape)||h("title.align","center"),(f._isAngular="angular"===f.gauge.shape)||h("align","center"),I("bgcolor",l.paper_bgcolor),I("borderwidth"),I("bordercolor"),I("bar.color"),I("bar.line.color"),I("bar.line.width"),I("bar.thickness",r.valueThickness*("bullet"===f.gauge.shape?.5:1)),e(u,T,{name:"steps",handleItemDefaults:s}),I("threshold.value"),I("threshold.thickness"),I("threshold.line.width"),I("threshold.line.color"),_={},u&&(_=u.axis||{}),w=y.newContainer(T,"axis"),S("visible"),f._range=S("range",f._range);var R={outerTicks:!0};n(_,w,S,"linear"),p(_,w,S,"linear",R),t(_,w,S,"linear",R),a(_,w,S,R)}else h("title.align","center"),h("align","center"),f._isAngular=f._isBullet=!1;f._length=null}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"indicator",basePlotModule:v("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc").calc,plot:v("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-interpolate").interpolate,b=v("d3-interpolate").interpolateNumber,y=v("../../lib"),e=y.strScale,r=y.strTranslate,n=y.rad2deg,a=v("../../constants/alignment").MID_SHIFT,t=v("../../components/drawing"),p=v("./constants"),s=v("../../lib/svg_text_utils"),i=v("../../plots/cartesian/axes"),f=v("../../plots/cartesian/axis_defaults"),c=v("../../plots/cartesian/position_defaults"),l=v("../../plots/cartesian/layout_attributes"),h=v("../../components/color"),d={left:"start",center:"middle",right:"end"},o={left:0,center:.5,right:1},x=/[yzafpn\xb5mkMGTPEZY]/;function u(S){return S&&S.duration>0}function T(S){S.each(function(R){h.stroke(g.select(this),R.line.color)}).each(function(R){h.fill(g.select(this),R.color)}).style("stroke-width",function(R){return R.line.width})}function _(S,R,O){var C=S._fullLayout,D=y.extendFlat({type:"linear",ticks:"outside",range:O,showline:!0},R),B={type:"linear",_id:"x"+R._id},z={letter:"x",font:C.font,noHover:!0,noTickson:!0};function Y(G,J){return y.coerce(D,B,l,G,J)}return f(D,B,Y,z,C),c(D,B,Y,z),B}function w(S,R,O){return[Math.min(R/S.width,O/S.height),S,R+"x"+O]}function M(S,R,O,C){var D=document.createElementNS("http://www.w3.org/2000/svg","text"),B=g.select(D);return B.text(S).attr("x",0).attr("y",0).attr("text-anchor",O).attr("data-unformatted",S).call(s.convertToTspans,C).call(t.font,R),t.bBox(B.node())}function I(S,R,O,C,D,B){var z="_cache"+R;S[z]&&S[z].key===D||(S[z]={key:D,value:O});var Y=y.aggNums(B,null,[S[z].value,C],2);return S[z].value=Y,Y}re.exports=function(S,R,O,C){var D,B=S._fullLayout;u(O)&&C&&(D=C()),y.makeTraceGroups(B._indicatorlayer,R,"trace").each(function(z){var Y,G,J,te,X,K=z[0].trace,ae=g.select(this),U=K._hasGauge,V=K._isAngular,q=K._isBullet,ie=K.domain,H={w:B._size.w*(ie.x[1]-ie.x[0]),h:B._size.h*(ie.y[1]-ie.y[0]),l:B._size.l+B._size.w*ie.x[0],r:B._size.r+B._size.w*(1-ie.x[1]),t:B._size.t+B._size.h*(1-ie.y[1]),b:B._size.b+B._size.h*ie.y[0]},ee=H.l+H.w/2,Q=H.t+H.h/2,oe=Math.min(H.w/2,H.h),le=p.innerRadius*oe,de=K.align||"center";if(G=Q,U){if(V&&(Y=ee,G=Q+oe/2,J=function(ze){return ve=ze,[(Te=.9*le)/Math.sqrt(ve.width/2*(ve.width/2)+ve.height*ve.height),ve,Te];var ve,Te}),q){var fe=p.bulletPadding,be=1-p.bulletNumberDomainSize+fe;Y=H.l+(be+(1-be)*o[de])*H.w,J=function(ze){return w(ze,(p.bulletNumberDomainSize-fe)*H.w,H.h)}}}else Y=H.l+o[de]*H.w,J=function(ze){return w(ze,H.w,H.h)};(function(ze,ve,Te,Ie){var De,Fe,Ue,qe=Te[0].trace,je=Ie.numbersX,rt=Ie.numbersY,Ne=qe.align||"center",Be=d[Ne],We=Ie.transitionOpts,Ye=Ie.onComplete,lt=y.ensureSingle(ve,"g","numbers"),mt=[];qe._hasNumber&&mt.push("number"),qe._hasDelta&&(mt.push("delta"),"left"===qe.delta.position&&mt.reverse());var Tt=lt.selectAll("text").data(mt);function It(cn,yn,en,Xe){if(!cn.match("s")||en>=0==Xe>=0||yn(en).slice(-1).match(x)||yn(Xe).slice(-1).match(x))return yn;var tt=cn.slice().replace("s","f").replace(/\d+/,function(ke){return parseInt(ke)-1}),ye=_(ze,{tickformat:tt});return function(ke){return Math.abs(ke)<1?i.tickText(ye,ke).text:yn(ke)}}Tt.enter().append("text"),Tt.attr("text-anchor",function(){return Be}).attr("class",function(cn){return cn}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Tt.exit().remove();var Ct,ct=qe.mode+qe.align;if(qe._hasDelta&&(Ct=function(){var cn=_(ze,{tickformat:qe.delta.valueformat},qe._range);cn.setScale(),i.prepTicks(cn);var yn=function(nt){return i.tickText(cn,nt).text},en=qe.delta.suffix,Xe=qe.delta.prefix,tt=function(nt){return qe.delta.relative?nt.relativeDelta:nt.delta},ye=function(nt,Ke){return 0===nt||"number"!=typeof nt||isNaN(nt)?"-":(nt>0?qe.delta.increasing.symbol:qe.delta.decreasing.symbol)+Xe+Ke(nt)+en},ke=function(nt){return nt.delta>=0?qe.delta.increasing.color:qe.delta.decreasing.color};void 0===qe._deltaLastValue&&(qe._deltaLastValue=tt(Te[0]));var Ve=lt.select("text.delta");function Je(){Ve.text(ye(tt(Te[0]),yn)).call(h.fill,ke(Te[0])).call(s.convertToTspans,ze)}return Ve.call(t.font,qe.delta.font).call(h.fill,ke({delta:qe._deltaLastValue})),u(We)?Ve.transition().duration(We.duration).ease(We.easing).tween("text",function(){var nt=g.select(this),Ke=tt(Te[0]),vt=qe._deltaLastValue,gt=It(qe.delta.valueformat,yn,vt,Ke),Ot=b(vt,Ke);return qe._deltaLastValue=Ke,function(Vt){nt.text(ye(Ot(Vt),gt)),nt.call(h.fill,ke({delta:Ot(Vt)}))}}).each("end",function(){Je(),Ye&&Ye()}).each("interrupt",function(){Je(),Ye&&Ye()}):Je(),Fe=M(ye(tt(Te[0]),yn),qe.delta.font,Be,ze),Ve}(),ct+=qe.delta.position+qe.delta.font.size+qe.delta.font.family+qe.delta.valueformat,ct+=qe.delta.increasing.symbol+qe.delta.decreasing.symbol,Ue=Fe),qe._hasNumber&&(function(){var cn=_(ze,{tickformat:qe.number.valueformat},qe._range);cn.setScale(),i.prepTicks(cn);var yn=function(ke){return i.tickText(cn,ke).text},en=qe.number.suffix,Xe=qe.number.prefix,tt=lt.select("text.number");function ye(){var ke="number"==typeof Te[0].y?Xe+yn(Te[0].y)+en:"-";tt.text(ke).call(t.font,qe.number.font).call(s.convertToTspans,ze)}u(We)?tt.transition().duration(We.duration).ease(We.easing).each("end",function(){ye(),Ye&&Ye()}).each("interrupt",function(){ye(),Ye&&Ye()}).attrTween("text",function(){var ke=g.select(this),Ve=b(Te[0].lastY,Te[0].y);qe._lastValue=Te[0].y;var Je=It(qe.number.valueformat,yn,Te[0].lastY,Te[0].y);return function(nt){ke.text(Xe+Je(Ve(nt))+en)}}):ye(),De=M(Xe+yn(Te[0].y)+en,qe.number.font,Be,ze)}(),ct+=qe.number.font.size+qe.number.font.family+qe.number.valueformat+qe.number.suffix+qe.number.prefix,Ue=De),qe._hasDelta&&qe._hasNumber){var at,St,Xt=[(De.left+De.right)/2,(De.top+De.bottom)/2],tn=[(Fe.left+Fe.right)/2,(Fe.top+Fe.bottom)/2],hn=.75*qe.delta.font.size;"left"===qe.delta.position&&(at=I(qe,"deltaPos",0,-1*(De.width*o[qe.align]+Fe.width*(1-o[qe.align])+hn),ct,Math.min),St=Xt[1]-tn[1],Ue={width:De.width+Fe.width+hn,height:Math.max(De.height,Fe.height),left:Fe.left+at,right:De.right,top:Math.min(De.top,Fe.top+St),bottom:Math.max(De.bottom,Fe.bottom+St)}),"right"===qe.delta.position&&(at=I(qe,"deltaPos",0,De.width*(1-o[qe.align])+Fe.width*o[qe.align]+hn,ct,Math.max),St=Xt[1]-tn[1],Ue={width:De.width+Fe.width+hn,height:Math.max(De.height,Fe.height),left:De.left,right:Fe.right+at,top:Math.min(De.top,Fe.top+St),bottom:Math.max(De.bottom,Fe.bottom+St)}),"bottom"===qe.delta.position&&(at=null,St=Fe.height,Ue={width:Math.max(De.width,Fe.width),height:De.height+Fe.height,left:Math.min(De.left,Fe.left),right:Math.max(De.right,Fe.right),top:De.bottom-De.height,bottom:De.bottom+Fe.height}),"top"===qe.delta.position&&(at=null,St=De.top,Ue={width:Math.max(De.width,Fe.width),height:De.height+Fe.height,left:Math.min(De.left,Fe.left),right:Math.max(De.right,Fe.right),top:De.bottom-De.height-Fe.height,bottom:De.bottom}),Ct.attr({dx:at,dy:St})}(qe._hasNumber||qe._hasDelta)&&lt.attr("transform",function(){var yn,cn=Ie.numbersScaler(Ue),en=I(qe,"numbersScale",1,cn[0],ct+=cn[2],Math.min);qe._scaleNumbers||(en=1),qe._numbersTop=en*Ue.top+(yn=qe._isAngular?rt-en*Ue.bottom:rt-en*(Ue.top+Ue.bottom)/2);var Xe=Ue[Ne];"center"===Ne&&(Xe=(Ue.left+Ue.right)/2);var tt=je-en*Xe;return tt=I(qe,"numbersTranslate",0,tt,ct,Math.max),r(tt,yn)+e(en)})})(S,ae,z,{numbersX:Y,numbersY:G,numbersScaler:J,transitionOpts:O,onComplete:D}),U&&(te={range:K.gauge.axis.range,color:K.gauge.bgcolor,line:{color:K.gauge.bordercolor,width:0},thickness:1},X={range:K.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:K.gauge.bordercolor,width:K.gauge.borderwidth},thickness:1});var he=ae.selectAll("g.angular").data(V?z:[]);he.exit().remove();var _e=ae.selectAll("g.angularaxis").data(V?z:[]);_e.exit().remove(),V&&function(ze,ve,Te,Ie){var De,Fe,Ue,qe,je=Te[0].trace,rt=Ie.size,Ne=Ie.radius,Be=Ie.innerRadius,We=Ie.gaugeBg,Ye=Ie.gaugeOutline,lt=[rt.l+rt.w/2,rt.t+rt.h/2+Ne/2],mt=Ie.gauge,Tt=Ie.layer,It=Ie.transitionOpts,Ct=Ie.onComplete,ct=Math.PI/2;function at(Vt){var ft=je.gauge.axis.range[0],bt=(Vt-ft)/(je.gauge.axis.range[1]-ft)*Math.PI-ct;return bt<-ct?-ct:bt>ct?ct:bt}function St(Vt){return g.svg.arc().innerRadius((Be+Ne)/2-Vt/2*(Ne-Be)).outerRadius((Be+Ne)/2+Vt/2*(Ne-Be)).startAngle(-ct)}function Xt(Vt){Vt.attr("d",function(ft){return St(ft.thickness).startAngle(at(ft.range[0])).endAngle(at(ft.range[1]))()})}mt.enter().append("g").classed("angular",!0),mt.attr("transform",r(lt[0],lt[1])),Tt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Tt.selectAll("g.xangularaxistick,path,text").remove(),(De=_(ze,je.gauge.axis)).type="linear",De.range=je.gauge.axis.range,De._id="xangularaxis",De.ticklabeloverflow="allow",De.setScale();var tn=function(Vt){return(De.range[0]-Vt.x)/(De.range[1]-De.range[0])*Math.PI+Math.PI},hn={},cn=i.makeLabelFns(De,0).labelStandoff;hn.xFn=function(Vt){var ft=tn(Vt);return Math.cos(ft)*cn},hn.yFn=function(Vt){var ft=tn(Vt),bt=Math.sin(ft)>0?.2:1;return-Math.sin(ft)*(cn+Vt.fontSize*bt)+Math.abs(Math.cos(ft))*(Vt.fontSize*a)},hn.anchorFn=function(Vt){var ft=tn(Vt),bt=Math.cos(ft);return Math.abs(bt)<.1?"middle":bt>0?"start":"end"},hn.heightFn=function(Vt,ft,bt){var Wt=tn(Vt);return-.5*(1+Math.sin(Wt))*bt};var yn=function(Vt){return r(lt[0]+Ne*Math.cos(Vt),lt[1]-Ne*Math.sin(Vt))};Ue=function(Vt){return yn(tn(Vt))},Fe=i.calcTicks(De),qe=i.getTickSigns(De)[2],De.visible&&(i.drawTicks(ze,De,{vals:Fe,layer:Tt,path:"M"+(qe="inside"===De.ticks?-1:1)*((De.linewidth||1)/2)+",0h"+qe*De.ticklen,transFn:function(Vt){var ft=tn(Vt);return yn(ft)+"rotate("+-n(ft)+")"}}),i.drawLabels(ze,De,{vals:Fe,layer:Tt,transFn:Ue,labelFns:hn}));var Xe=[We].concat(je.gauge.steps),tt=mt.selectAll("g.bg-arc").data(Xe);tt.enter().append("g").classed("bg-arc",!0).append("path"),tt.select("path").call(Xt).call(T),tt.exit().remove();var ye=St(je.gauge.bar.thickness),ke=mt.selectAll("g.value-arc").data([je.gauge.bar]);ke.enter().append("g").classed("value-arc",!0).append("path");var Je,nt,Ke,Ve=ke.select("path");u(It)?(Ve.transition().duration(It.duration).ease(It.easing).each("end",function(){Ct&&Ct()}).each("interrupt",function(){Ct&&Ct()}).attrTween("d",(Je=ye,nt=at(Te[0].lastY),Ke=at(Te[0].y),function(){var Vt=m(nt,Ke);return function(ft){return Je.endAngle(Vt(ft))()}})),je._lastValue=Te[0].y):Ve.attr("d","number"==typeof Te[0].y?ye.endAngle(at(Te[0].y)):"M0,0Z"),Ve.call(T),ke.exit().remove(),Xe=[];var vt=je.gauge.threshold.value;(vt||0===vt)&&Xe.push({range:[vt,vt],color:je.gauge.threshold.color,line:{color:je.gauge.threshold.line.color,width:je.gauge.threshold.line.width},thickness:je.gauge.threshold.thickness});var gt=mt.selectAll("g.threshold-arc").data(Xe);gt.enter().append("g").classed("threshold-arc",!0).append("path"),gt.select("path").call(Xt).call(T),gt.exit().remove();var Ot=mt.selectAll("g.gauge-outline").data([Ye]);Ot.enter().append("g").classed("gauge-outline",!0).append("path"),Ot.select("path").call(Xt).call(T),Ot.exit().remove()}(S,0,z,{radius:oe,innerRadius:le,gauge:he,layer:_e,size:H,gaugeBg:te,gaugeOutline:X,transitionOpts:O,onComplete:D});var Ce=ae.selectAll("g.bullet").data(q?z:[]);Ce.exit().remove();var Ee=ae.selectAll("g.bulletaxis").data(q?z:[]);Ee.exit().remove(),q&&function(ze,ve,Te,Ie){var De,Fe,Ue,qe,je,rt=Te[0].trace,Ne=Ie.gauge,Be=Ie.layer,We=Ie.gaugeBg,Ye=Ie.gaugeOutline,lt=Ie.size,mt=rt.domain,Tt=Ie.transitionOpts,It=Ie.onComplete;Ne.enter().append("g").classed("bullet",!0),Ne.attr("transform",r(lt.l,lt.t)),Be.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Be.selectAll("g.xbulletaxistick,path,text").remove();var Ct=lt.h,ct=rt.gauge.bar.thickness*Ct,at=mt.x[0],St=mt.x[0]+(mt.x[1]-mt.x[0])*(rt._hasNumber||rt._hasDelta?1-p.bulletNumberDomainSize:1);function Xt(tt){tt.attr("width",function(ye){return Math.max(0,De.c2p(ye.range[1])-De.c2p(ye.range[0]))}).attr("x",function(ye){return De.c2p(ye.range[0])}).attr("y",function(ye){return.5*(1-ye.thickness)*Ct}).attr("height",function(ye){return ye.thickness*Ct})}(De=_(ze,rt.gauge.axis))._id="xbulletaxis",De.domain=[at,St],De.setScale(),Fe=i.calcTicks(De),Ue=i.makeTransTickFn(De),qe=i.getTickSigns(De)[2],je=lt.t+lt.h,De.visible&&(i.drawTicks(ze,De,{vals:"inside"===De.ticks?i.clipEnds(De,Fe):Fe,layer:Be,path:i.makeTickPath(De,je,qe),transFn:Ue}),i.drawLabels(ze,De,{vals:Fe,layer:Be,transFn:Ue,labelFns:i.makeLabelFns(De,je)}));var tn=[We].concat(rt.gauge.steps),hn=Ne.selectAll("g.bg-bullet").data(tn);hn.enter().append("g").classed("bg-bullet",!0).append("rect"),hn.select("rect").call(Xt).call(T),hn.exit().remove();var cn=Ne.selectAll("g.value-bullet").data([rt.gauge.bar]);cn.enter().append("g").classed("value-bullet",!0).append("rect"),cn.select("rect").attr("height",ct).attr("y",(Ct-ct)/2).call(T),u(Tt)?cn.select("rect").transition().duration(Tt.duration).ease(Tt.easing).each("end",function(){It&&It()}).each("interrupt",function(){It&&It()}).attr("width",Math.max(0,De.c2p(Math.min(rt.gauge.axis.range[1],Te[0].y)))):cn.select("rect").attr("width","number"==typeof Te[0].y?Math.max(0,De.c2p(Math.min(rt.gauge.axis.range[1],Te[0].y))):0),cn.exit().remove();var yn=Te.filter(function(){return rt.gauge.threshold.value||0===rt.gauge.threshold.value}),en=Ne.selectAll("g.threshold-bullet").data(yn);en.enter().append("g").classed("threshold-bullet",!0).append("line"),en.select("line").attr("x1",De.c2p(rt.gauge.threshold.value)).attr("x2",De.c2p(rt.gauge.threshold.value)).attr("y1",(1-rt.gauge.threshold.thickness)/2*Ct).attr("y2",(1-(1-rt.gauge.threshold.thickness)/2)*Ct).call(h.stroke,rt.gauge.threshold.line.color).style("stroke-width",rt.gauge.threshold.line.width),en.exit().remove();var Xe=Ne.selectAll("g.gauge-outline").data([Ye]);Xe.enter().append("g").classed("gauge-outline",!0).append("rect"),Xe.select("rect").call(Xt).call(T),Xe.exit().remove()}(S,0,z,{gauge:Ce,layer:Ee,size:H,gaugeBg:te,gaugeOutline:X,transitionOpts:O,onComplete:D});var Ae=ae.selectAll("text.title").data(z);Ae.exit().remove(),Ae.enter().append("text").classed("title",!0),Ae.attr("text-anchor",function(){return q?d.right:d[K.title.align]}).text(K.title.text).call(t.font,K.title.font).call(s.convertToTspans,S),Ae.attr("transform",function(){var ze,ve=H.l+H.w*o[K.title.align],Te=p.titlePadding,Ie=t.bBox(Ae.node());return U?(V&&(ze=K.gauge.axis.visible?t.bBox(_e.node()).top-Te-Ie.bottom:H.t+H.h/2-oe/2-Ie.bottom-Te),q&&(ze=G-(Ie.top+Ie.bottom)/2,ve=H.l-p.bulletPadding*H.w)):ze=K._numbersTop-Te-Ie.bottom,r(ve,ze)})})}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../mesh3d/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,n=v("../../plot_api/edit_types").overrideAll,a=re.exports=n(r({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),valuehoverformat:m("value",1),showlegend:r({},e.showlegend,{dflt:!1})},g("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,lightposition:y.lightposition,lighting:y.lighting,flatshading:y.flatshading,contour:y.contour,hoverinfo:r({},e.hoverinfo)}),"calc","nested");a.flatshading.dflt=!0,a.lighting.facenormalsepsilon.dflt=0,a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/calc"),m=v("../streamtube/calc").processGrid,b=v("../streamtube/calc").filter;re.exports=function(y,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=b(e.x,e._len),e._y=b(e.y,e._len),e._z=b(e.z,e._len),e._value=b(e.value,e._len);var r=m(e);e._gridFill=r.fill,e._Xs=r.Xs,e._Ys=r.Ys,e._Zs=r.Zs,e._len=r.len;for(var n=1/0,a=-1/0,t=0;t<e._len;t++){var p=e._value[t];n=Math.min(n,p),a=Math.max(a,p)}e._minValues=n,e._maxValues=a,e._vMin=e.isomin??n,e._vMax=void 0===e.isomax||null===e.isomin?a:e.isomax,g(y,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_mesh3d,m=v("../../lib/gl_format_color").parseColorScale,b=v("../../lib/str2rgbarray"),y=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),r=function(s,i){for(var f=i.length-1;f>0;f--){var c=Math.min(i[f],i[f-1]),l=Math.max(i[f],i[f-1]);if(l>c&&c<s&&s<=l)return{id:f,distRatio:(l-s)/(l-c)}}return{id:0,distRatio:0}};function n(s,i,f){this.scene=s,this.uid=f,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var a=n.prototype;a.handlePick=function(s){if(s.object===this.mesh){var i=s.data.index,c=this.data._meshY[i],l=this.data._meshZ[i],h=this.data._Ys.length,d=this.data._Zs.length,o=r(this.data._meshX[i],this.data._Xs).id,x=r(c,this.data._Ys).id,u=r(l,this.data._Zs).id,T=s.index=u+d*x+d*h*o;s.traceCoordinate=[this.data._meshX[T],this.data._meshY[T],this.data._meshZ[T],this.data._value[T]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&void 0!==_[T]?s.textLabel=_[T]:_&&(s.textLabel=_),!0}},a.update=function(s){var i=this.scene,f=i.fullSceneLayout;function c(d,o,x,u){return o.map(function(T){return d.d2l(T,0,u)*x})}this.data=p(s);var l={positions:e(c(f.xaxis,s._meshX,i.dataScale[0],s.xcalendar),c(f.yaxis,s._meshY,i.dataScale[1],s.ycalendar),c(f.zaxis,s._meshZ,i.dataScale[2],s.zcalendar)),cells:e(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:b(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},h=y(s);l.vertexIntensity=s._meshIntensity,l.vertexIntensityBounds=[h.min,h.max],l.colormap=m(s),this.mesh.update(l)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var t=["xyz","xzy","yxz","yzx","zxy","zyx"];function p(s){s._meshI=[],s._meshJ=[],s._meshK=[];var i,f,c,l,h,d,o,x=s.surface.show,u=s.spaceframe.show,T=s.surface.fill,_=s.spaceframe.fill,w=!1,M=!1,I=0,S=s._Xs,R=s._Ys,O=s._Zs,C=S.length,D=R.length,B=O.length,z=t.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),Y=function(Ne,Be,We){switch(z){case 5:return We+B*Be+B*D*Ne;case 4:return We+B*Ne+B*C*Be;case 3:return Be+D*We+D*B*Ne;case 2:return Be+D*Ne+D*C*We;case 1:return Ne+C*We+C*B*Be;default:return Ne+C*Be+C*D*We}},G=s._minValues,J=s._maxValues,te=s._vMin,X=s._vMax;function K(Ne,Be,We){for(var Ye=d.length,lt=f;lt<Ye;lt++)if(Ne===c[lt]&&Be===l[lt]&&We===h[lt])return lt;return-1}function ae(){f=i}function U(){c=[],l=[],h=[],d=[],i=0,ae()}function V(Ne,Be,We,Ye){return c.push(Ne),l.push(Be),h.push(We),d.push(Ye),++i-1}function q(Ne,Be,We){for(var Ye=[],lt=0;lt<Ne.length;lt++)Ye[lt]=Ne[lt]*(1-We)+We*Be[lt];return Ye}function ie(Ne){o=Ne}function H(Ne,Be){return"all"===Ne||null===Ne||Ne.indexOf(Be)>-1}function ee(Ne,Be){return null===Ne?Be:Ne}function Q(Ne,Be,We){ae();var lt,mt,en,Xe,tt,ye,ke,Ve,Je,nt,Ke,vt,gt,Ot,Vt,Tt=[Be],It=[We];if(o>=1)Tt=[Be],It=[We];else if(o>0){var Ct=(Xe=We,nt=q(Ve=function(ft,bt,Wt){for(var Pt=[],Bt=0;Bt<ft.length;Bt++)Pt[Bt]=(ft[Bt]+bt[Bt]+Wt[Bt])/3;return Pt}(tt=(en=Be)[0],ye=en[1],ke=en[2]),tt,Je=Math.sqrt(1-o)),{xyzv:[[tt,ye,Ke=q(Ve,ye,Je)],[Ke,nt,tt],[ye,ke,vt=q(Ve,ke,Je)],[vt,Ke,ye],[ke,tt,nt],[nt,vt,ke]],abc:[[gt=Xe[0],Ot=Xe[1],-1],[-1,-1,gt],[Ot,Vt=Xe[2],-1],[-1,-1,Ot],[Vt,gt,-1],[-1,-1,Vt]]});Tt=Ct.xyzv,It=Ct.abc}for(var ct=0;ct<Tt.length;ct++){Be=Tt[ct],We=It[ct];for(var at=[],St=0;St<3;St++){var Xt=Be[St][0],tn=Be[St][1],hn=Be[St][2],cn=Be[St][3],yn=We[St]>-1?We[St]:K(Xt,tn,hn);at[St]=yn>-1?yn:V(Xt,tn,hn,ee(Ne,cn))}lt=at[1],mt=at[2],s._meshI.push(at[0]),s._meshJ.push(lt),s._meshK.push(mt),++I}}function oe(Ne,Be,We,Ye){var lt=Ne[3];lt<We&&(lt=We),lt>Ye&&(lt=Ye);for(var mt=(Ne[3]-lt)/(Ne[3]-Be[3]+1e-9),Tt=[],It=0;It<4;It++)Tt[It]=(1-mt)*Ne[It]+mt*Be[It];return Tt}function le(Ne,Be,We){return Ne>=Be&&Ne<=We}function de(Ne){var Be=.001*(X-te);return Ne>=te-Be&&Ne<=X+Be}function fe(Ne){for(var Be=[],We=0;We<4;We++){var Ye=Ne[We];Be.push([s._x[Ye],s._y[Ye],s._z[Ye],s._value[Ye]])}return Be}function be(Ne,Be,We,Ye,lt,mt){mt||(mt=1),We=[-1,-1,-1];var Tt=!1,It=[le(Be[0][3],Ye,lt),le(Be[1][3],Ye,lt),le(Be[2][3],Ye,lt)];if(!It[0]&&!It[1]&&!It[2])return!1;var Ct=function(at,St,Xt){return de(St[0][3])&&de(St[1][3])&&de(St[2][3])?(Q(at,St,Xt),!0):mt<3&&be(at,St,Xt,te,X,++mt)};if(It[0]&&It[1]&&It[2])return Ct(Ne,Be,We)||Tt;var ct=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(at){if(It[at[0]]&&It[at[1]]&&!It[at[2]]){var St=Be[at[0]],Xt=Be[at[1]],tn=Be[at[2]],hn=oe(tn,St,Ye,lt),cn=oe(tn,Xt,Ye,lt);Tt=Ct(Ne,[cn,hn,St],[-1,-1,We[at[0]]])||Tt,Tt=Ct(Ne,[St,Xt,cn],[We[at[0]],We[at[1]],-1])||Tt,ct=!0}}),ct||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(at){if(It[at[0]]&&!It[at[1]]&&!It[at[2]]){var St=Be[at[0]],tn=Be[at[2]],hn=oe(Be[at[1]],St,Ye,lt),cn=oe(tn,St,Ye,lt);Tt=Ct(Ne,[cn,hn,St],[-1,-1,We[at[0]]])||Tt,ct=!0}}),Tt}function he(Ne,Be,We,Ye){var Ct,ct,at,St,lt=!1,mt=fe(Be),Tt=[le(mt[0][3],We,Ye),le(mt[1][3],We,Ye),le(mt[2][3],We,Ye),le(mt[3][3],We,Ye)];if(!(Tt[0]||Tt[1]||Tt[2]||Tt[3]))return lt;if(Tt[0]&&Tt[1]&&Tt[2]&&Tt[3])return M&&(Ct=Ne,ct=mt,at=Be,(St=function(Xt,tn,hn){Q(Ct,[ct[Xt],ct[tn],ct[hn]],[at[Xt],at[tn],at[hn]])})(0,1,2),St(3,0,1),St(2,3,0),lt=void St(1,2,3)||lt),lt;var It=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Ct){if(Tt[Ct[0]]&&Tt[Ct[1]]&&Tt[Ct[2]]&&!Tt[Ct[3]]){var ct=mt[Ct[0]],at=mt[Ct[1]],St=mt[Ct[2]],Xt=mt[Ct[3]];if(M)lt=Q(Ne,[ct,at,St],[Be[Ct[0]],Be[Ct[1]],Be[Ct[2]]])||lt;else{var tn=oe(Xt,ct,We,Ye),hn=oe(Xt,at,We,Ye),cn=oe(Xt,St,We,Ye);lt=Q(null,[tn,hn,cn],[-1,-1,-1])||lt}It=!0}}),It||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Ct){if(Tt[Ct[0]]&&Tt[Ct[1]]&&!Tt[Ct[2]]&&!Tt[Ct[3]]){var ct=mt[Ct[0]],at=mt[Ct[1]],St=mt[Ct[2]],Xt=mt[Ct[3]],tn=oe(St,ct,We,Ye),hn=oe(St,at,We,Ye),cn=oe(Xt,at,We,Ye),yn=oe(Xt,ct,We,Ye);M?(lt=Q(Ne,[ct,yn,tn],[Be[Ct[0]],-1,-1])||lt,lt=Q(Ne,[at,hn,cn],[Be[Ct[1]],-1,-1])||lt):(null,Xe=[tn,hn,cn,yn],tt=[-1,-1,-1,-1],(ye=function(ke,Ve,Je){Q(null,[Xe[ke],Xe[Ve],Xe[Je]],[tt[ke],tt[Ve],tt[Je]])})(0,1,2),lt=void ye(2,3,0)||lt),It=!0}var Xe,tt,ye}),It||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Ct){if(Tt[Ct[0]]&&!Tt[Ct[1]]&&!Tt[Ct[2]]&&!Tt[Ct[3]]){var ct=mt[Ct[0]],St=mt[Ct[2]],Xt=mt[Ct[3]],tn=oe(mt[Ct[1]],ct,We,Ye),hn=oe(St,ct,We,Ye),cn=oe(Xt,ct,We,Ye);M?(lt=Q(Ne,[ct,tn,hn],[Be[Ct[0]],-1,-1])||lt,lt=Q(Ne,[ct,hn,cn],[Be[Ct[0]],-1,-1])||lt,lt=Q(Ne,[ct,cn,tn],[Be[Ct[0]],-1,-1])||lt):lt=Q(null,[tn,hn,cn],[-1,-1,-1])||lt,It=!0}})),lt}function _e(Ne,Be,We,Ye,lt,mt,Tt,It,Ct,ct,at){var St=!1;return w&&(H(Ne,"A")&&(St=he(null,[Be,We,Ye,mt],ct,at)||St),H(Ne,"B")&&(St=he(null,[We,Ye,lt,Ct],ct,at)||St),H(Ne,"C")&&(St=he(null,[We,mt,Tt,Ct],ct,at)||St),H(Ne,"D")&&(St=he(null,[Ye,mt,It,Ct],ct,at)||St),H(Ne,"E")&&(St=he(null,[We,Ye,mt,Ct],ct,at)||St)),M&&(St=he(Ne,[We,Ye,mt,Ct],ct,at)||St),St}function Ce(Ne,Be,We,Ye,lt,mt,Tt,It){return[!0===It[0]||be(Ne,fe([Be,We,Ye]),[Be,We,Ye],mt,Tt),!0===It[1]||be(Ne,fe([Ye,lt,Be]),[Ye,lt,Be],mt,Tt)]}function Ee(Ne,Be,We,Ye,lt,mt,Tt,It,Ct){return It?Ce(Ne,Be,We,lt,Ye,mt,Tt,Ct):Ce(Ne,We,lt,Ye,Be,mt,Tt,Ct)}function Ae(Ne,Be,We,Ye,lt,mt,Tt){var It,Ct,ct,at,St=!1,Xt=function(){St=be(Ne,[It,Ct,ct],[-1,-1,-1],lt,mt)||St,St=be(Ne,[ct,at,It],[-1,-1,-1],lt,mt)||St},tn=Tt[0],hn=Tt[1],cn=Tt[2];return tn&&(It=q(fe([Y(Be,We-0,Ye-0)])[0],fe([Y(Be-1,We-0,Ye-0)])[0],tn),Ct=q(fe([Y(Be,We-0,Ye-1)])[0],fe([Y(Be-1,We-0,Ye-1)])[0],tn),ct=q(fe([Y(Be,We-1,Ye-1)])[0],fe([Y(Be-1,We-1,Ye-1)])[0],tn),at=q(fe([Y(Be,We-1,Ye-0)])[0],fe([Y(Be-1,We-1,Ye-0)])[0],tn),Xt()),hn&&(It=q(fe([Y(Be-0,We,Ye-0)])[0],fe([Y(Be-0,We-1,Ye-0)])[0],hn),Ct=q(fe([Y(Be-0,We,Ye-1)])[0],fe([Y(Be-0,We-1,Ye-1)])[0],hn),ct=q(fe([Y(Be-1,We,Ye-1)])[0],fe([Y(Be-1,We-1,Ye-1)])[0],hn),at=q(fe([Y(Be-1,We,Ye-0)])[0],fe([Y(Be-1,We-1,Ye-0)])[0],hn),Xt()),cn&&(It=q(fe([Y(Be-0,We-0,Ye)])[0],fe([Y(Be-0,We-0,Ye-1)])[0],cn),Ct=q(fe([Y(Be-0,We-1,Ye)])[0],fe([Y(Be-0,We-1,Ye-1)])[0],cn),ct=q(fe([Y(Be-1,We-1,Ye)])[0],fe([Y(Be-1,We-1,Ye-1)])[0],cn),at=q(fe([Y(Be-1,We-0,Ye)])[0],fe([Y(Be-1,We-0,Ye-1)])[0],cn),Xt()),St}function ze(Ne,Be,We,Ye,lt,mt,Tt,It,Ct,ct,at,St){var Xt=Ne;return St?(w&&"even"===Ne&&(Xt=null),_e(Xt,Be,We,Ye,lt,mt,Tt,It,Ct,ct,at)):(w&&"odd"===Ne&&(Xt=null),_e(Xt,Ct,It,Tt,mt,lt,Ye,We,Be,ct,at))}function ve(Ne,Be,We,Ye,lt){for(var mt=[],Tt=0,It=0;It<Be.length;It++)for(var Ct=Be[It],ct=1;ct<B;ct++)for(var at=1;at<D;at++)mt.push(Ee(Ne,Y(Ct,at-1,ct-1),Y(Ct,at-1,ct),Y(Ct,at,ct-1),Y(Ct,at,ct),We,Ye,(Ct+at+ct)%2,lt&&lt[Tt]?lt[Tt]:[])),Tt++;return mt}function Te(Ne,Be,We,Ye,lt){for(var mt=[],Tt=0,It=0;It<Be.length;It++)for(var Ct=Be[It],ct=1;ct<C;ct++)for(var at=1;at<B;at++)mt.push(Ee(Ne,Y(ct-1,Ct,at-1),Y(ct,Ct,at-1),Y(ct-1,Ct,at),Y(ct,Ct,at),We,Ye,(ct+Ct+at)%2,lt&&lt[Tt]?lt[Tt]:[])),Tt++;return mt}function Ie(Ne,Be,We,Ye,lt){for(var mt=[],Tt=0,It=0;It<Be.length;It++)for(var Ct=Be[It],ct=1;ct<D;ct++)for(var at=1;at<C;at++)mt.push(Ee(Ne,Y(at-1,ct-1,Ct),Y(at-1,ct,Ct),Y(at,ct-1,Ct),Y(at,ct,Ct),We,Ye,(at+ct+Ct)%2,lt&&lt[Tt]?lt[Tt]:[])),Tt++;return mt}function De(Ne,Be,We){for(var Ye=1;Ye<B;Ye++)for(var lt=1;lt<D;lt++)for(var mt=1;mt<C;mt++)ze(Ne,Y(mt-1,lt-1,Ye-1),Y(mt-1,lt-1,Ye),Y(mt-1,lt,Ye-1),Y(mt-1,lt,Ye),Y(mt,lt-1,Ye-1),Y(mt,lt-1,Ye),Y(mt,lt,Ye-1),Y(mt,lt,Ye),Be,We,(mt+lt+Ye)%2)}function Fe(Ne,Be,We){w=!0,De(Ne,Be,We),w=!1}function Ue(Ne,Be,We,Ye,lt,mt){for(var Tt=[],Ct=0;Ct<Be.length;Ct++)for(var ct=Be[Ct],at=1;at<B;at++)for(var St=1;St<D;St++)Tt.push(Ae(Ne,ct,St,at,We,Ye,lt[Ct]));return Tt}function qe(Ne,Be,We,Ye,lt,mt){for(var Tt=[],Ct=0;Ct<Be.length;Ct++)for(var ct=Be[Ct],at=1;at<C;at++)for(var St=1;St<B;St++)Tt.push(Ae(Ne,at,ct,St,We,Ye,lt[Ct]));return Tt}function je(Ne,Be,We,Ye,lt,mt){for(var Tt=[],Ct=0;Ct<Be.length;Ct++)for(var ct=Be[Ct],at=1;at<D;at++)for(var St=1;St<C;St++)Tt.push(Ae(Ne,St,at,ct,We,Ye,lt[Ct]));return Tt}function rt(Ne,Be){for(var We=[],Ye=Ne;Ye<Be;Ye++)We.push(Ye);return We}return function(){if(U(),function(){for(var It=0;It<C;It++)for(var Ct=0;Ct<D;Ct++)for(var ct=0;ct<B;ct++){var at=Y(It,Ct,ct);V(s._x[at],s._y[at],s._z[at],s._value[at])}}(),u&&_&&(ie(_),M=!0,De(null,te,X),M=!1),x&&T){ie(T);for(var Ne=s.surface.pattern,Be=s.surface.count,We=0;We<Be;We++){var Ye=1===Be?.5:We/(Be-1),lt=(1-Ye)*te+Ye*X,mt=Math.abs(lt-G)>Math.abs(lt-J)?[G,lt]:[lt,J];Fe(Ne,mt[0],mt[1])}}var Tt=[[Math.min(te,J),Math.max(te,J)],[Math.min(G,X),Math.max(G,X)]];["x","y","z"].forEach(function(It){for(var Ct=[],ct=0;ct<Tt.length;ct++){var at=0,St=Tt[ct][0],Xt=Tt[ct][1],tn=s.slices[It];if(tn.show&&tn.fill){ie(tn.fill);var hn=[],cn=[],yn=[];if(tn.locations.length)for(var en=0;en<tn.locations.length;en++){var Xe=r(tn.locations[en],"x"===It?S:"y"===It?R:O);0===Xe.distRatio?hn.push(Xe.id):Xe.id>0&&(cn.push(Xe.id),yn.push("x"===It?[Xe.distRatio,0,0]:"y"===It?[0,Xe.distRatio,0]:[0,0,Xe.distRatio]))}else hn=rt(1,"x"===It?C-1:"y"===It?D-1:B-1);cn.length>0&&(Ct[at]="x"===It?Ue(null,cn,St,Xt,yn):"y"===It?qe(null,cn,St,Xt,yn):je(null,cn,St,Xt,yn),at++),hn.length>0&&(Ct[at]="x"===It?ve(null,hn,St,Xt,Ct[at]):"y"===It?Te(null,hn,St,Xt,Ct[at]):Ie(null,hn,St,Xt,Ct[at]),at++)}var tt=s.caps[It];tt.show&&tt.fill&&(ie(tt.fill),Ct[at]="x"===It?ve(null,[0,C-1],St,Xt,Ct[at]):"y"===It?Te(null,[0,D-1],St,Xt,Ct[at]):Ie(null,[0,B-1],St,Xt,Ct[at]),at++)}}),0===I&&U(),s._meshX=c,s._meshY=l,s._meshZ=h,s._meshIntensity=d,s._Xs=S,s._Ys=R,s._Zs=O}(),s}re.exports={findNearestOnAxis:r,generateIsoMeshes:p,createIsosurfaceTrace:function(s,i){var c=g({gl:s.glplot.gl}),l=new n(s,c,i.uid);return c._trace=l,l.update(i),s.glplot.add(c),l}}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry"),b=v("./attributes"),y=v("../../components/colorscale/defaults");function e(r,n,a,t,p){var s=p("isomin"),i=p("isomax");null!=i&&null!=s&&s>i&&(n.isomin=null,n.isomax=null);var f=p("x"),c=p("y"),l=p("z"),h=p("value");f&&f.length&&c&&c.length&&l&&l.length&&h&&h.length?(m.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y","z"],t),p("valuehoverformat"),["x","y","z"].forEach(function(d){p(d+"hoverformat");var o="caps."+d;p(o+".show")&&p(o+".fill");var x="slices."+d;p(x+".show")&&(p(x+".fill"),p(x+".locations"))}),p("spaceframe.show")&&p("spaceframe.fill"),p("surface.show")&&(p("surface.count"),p("surface.fill"),p("surface.pattern")),p("contour.show")&&(p("contour.color"),p("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(d){p(d)}),y(r,n,t,p,{prefix:"",cLetter:"c"}),n._length=null):n.visible=!1}re.exports={supplyDefaults:function(r,n,a,t){e(r,n,0,t,function(p,s){return g.coerce(r,n,b,p,s)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../surface/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat;re.exports=r({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"}),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},g("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:y.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:r({},y.contours.x.show,{}),color:y.contours.x.color,width:y.contours.x.width,editType:"calc"},lightposition:{x:r({},y.lightposition.x,{dflt:1e5}),y:r({},y.lightposition.y,{dflt:1e5}),z:r({},y.lightposition.z,{dflt:0}),editType:"calc"},lighting:r({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},y.lighting),hoverinfo:r({},e.hoverinfo,{editType:"calc"}),showlegend:r({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/calc");re.exports=function(m,b){b.intensity&&g(m,b,{vals:b.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_mesh3d,m=v("../../../stackgl_modules").delaunay_triangulate,b=v("../../../stackgl_modules").alpha_shape,y=v("../../../stackgl_modules").convex_hull,e=v("../../lib/gl_format_color").parseColorScale,r=v("../../lib/str2rgbarray"),n=v("../../components/colorscale").extractOpts,a=v("../../plots/gl3d/zip3");function t(l,h,d){this.scene=l,this.uid=d,this.mesh=h,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var p=t.prototype;function s(l){for(var h=[],d=l.length,o=0;o<d;o++)h[o]=r(l[o]);return h}function i(l,h,d,o){for(var x=[],u=h.length,T=0;T<u;T++)x[T]=l.d2l(h[T],0,o)*d;return x}function f(l){for(var h=[],d=l.length,o=0;o<d;o++)h[o]=Math.round(l[o]);return h}function c(l,h){for(var d=l.length,o=0;o<d;o++)if(l[o]<=-.5||l[o]>=h-.5)return!1;return!0}p.handlePick=function(l){if(l.object===this.mesh){var h=l.index=l.data.index;l.traceCoordinate=l.data._cellCenter?l.data.dataCoordinate:[this.data.x[h],this.data.y[h],this.data.z[h]];var d=this.data.hovertext||this.data.text;return Array.isArray(d)&&void 0!==d[h]?l.textLabel=d[h]:d&&(l.textLabel=d),!0}},p.update=function(l){var h=this.scene,d=h.fullSceneLayout;this.data=l;var o,x=l.x.length,u=a(i(d.xaxis,l.x,h.dataScale[0],l.xcalendar),i(d.yaxis,l.y,h.dataScale[1],l.ycalendar),i(d.zaxis,l.z,h.dataScale[2],l.zcalendar));if(l.i&&l.j&&l.k){if(l.i.length!==l.j.length||l.j.length!==l.k.length||!c(l.i,x)||!c(l.j,x)||!c(l.k,x))return;o=a(f(l.i),f(l.j),f(l.k))}else o=0===l.alphahull?y(u):l.alphahull>0?b(l.alphahull,u):function(M,I){for(var S=["x","y","z"].indexOf(M),R=[],O=I.length,C=0;C<O;C++)R[C]=[I[C][(S+1)%3],I[C][(S+2)%3]];return m(R)}(l.delaunayaxis,u);var T={positions:u,cells:o,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,contourEnable:l.contour.show,contourColor:r(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading};if(l.intensity){var _=n(l);this.color="#fff";var w=l.intensitymode;T[w+"Intensity"]=l.intensity,T[w+"IntensityBounds"]=[_.min,_.max],T.colormap=e(l)}else l.vertexcolor?(this.color=l.vertexcolor[0],T.vertexColors=s(l.vertexcolor)):l.facecolor?(this.color=l.facecolor[0],T.cellColors=s(l.facecolor)):(this.color=l.color,T.meshColor=r(l.color));this.mesh.update(T)},p.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},re.exports=function(l,h){var o=g({gl:l.glplot.gl}),x=new t(l,o,h.uid);return o._trace=x,x.update(h),l.glplot.add(o),x}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../../components/colorscale/defaults"),y=v("./attributes");re.exports=function(e,r,n,a){function t(s,i){return m.coerce(e,r,y,s,i)}function p(s){var i=s.map(function(f){var c=t(f);return c&&m.isArrayOrTypedArray(c)?c:null});return i.every(function(f){return f&&f.length===i[0].length})&&i}p(["x","y","z"])?(p(["i","j","k"]),(!r.i||r.j&&r.k)&&(!r.j||r.k&&r.i)&&(!r.k||r.i&&r.j)?(g.getComponentMethod("calendars","handleTraceDefaults")(e,r,["x","y","z"],a),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(s){t(s)}),t("contour.show")&&(t("contour.color"),t("contour.width")),"intensity"in e?(t("intensity"),t("intensitymode"),b(e,r,a,t,{prefix:"",cLetter:"c"})):(r.showscale=!1,"facecolor"in e?t("facecolor"):"vertexcolor"in e?t("vertexcolor"):t("color",n)),t("text"),t("hovertext"),t("hovertemplate"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),r._length=null):r.visible=!1):r.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(v,re,ne){"use strict";var g=v("../../lib").extendFlat,m=v("../scatter/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../components/drawing/attributes").dash,e=v("../../components/fx/attributes"),r=v("../../constants/delta.js"),n=r.INCREASING.COLOR,a=r.DECREASING.COLOR,t=m.line;function p(s){return{line:{color:g({},t.color,{dflt:s}),width:t.width,dash:y,editType:"style"},editType:"style"}}re.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:g({},t.width,{}),dash:g({},y,{}),editType:"style"},increasing:p(n),decreasing:p(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:g({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(v,re,ne){"use strict";var g=v("../../lib"),m=g._,b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM;function r(a,t,p,s){return{o:a,h:t,l:p,c:s}}function n(a,t,p,s,i,f){for(var c=i.makeCalcdata(t,"open"),l=i.makeCalcdata(t,"high"),h=i.makeCalcdata(t,"low"),d=i.makeCalcdata(t,"close"),o=Array.isArray(t.text),x=Array.isArray(t.hovertext),u=!0,T=null,_=!!t.xperiodalignment,w=[],M=0;M<s.length;M++){var I=s[M],S=c[M],R=l[M],O=h[M],C=d[M];if(I!==e&&S!==e&&R!==e&&O!==e&&C!==e){C===S?null!==T&&C!==T&&(u=C>T):u=C>S,T=C;var D=f(S,R,O,C);D.pos=I,D.yc=(S+C)/2,D.i=M,D.dir=u?"increasing":"decreasing",D.x=D.pos,D.y=[O,R],_&&(D.orig_p=p[M]),o&&(D.tx=t.text[M]),x&&(D.htx=t.hovertext[M]),w.push(D)}else w.push({pos:I,empty:!0})}return t._extremes[i._id]=b.findExtremes(i,g.concat(h,l),{padded:!0}),w.length&&(w[0].t={labels:{open:m(a,"open:")+" ",high:m(a,"high:")+" ",low:m(a,"low:")+" ",close:m(a,"close:")+" "}}),w}re.exports={calc:function(a,t){var p=b.getFromId(a,t.xaxis),s=b.getFromId(a,t.yaxis),i=function(d,o,x){var u=x._minDiff;if(!u){var T,_=d._fullData,w=[];for(u=1/0,T=0;T<_.length;T++){var M=_[T];if("ohlc"===M.type&&!0===M.visible&&M.xaxis===o._id){w.push(M);var I=o.makeCalcdata(M,"x");M._origX=I;var S=y(x,o,"x",I).vals;M._xcalc=S;var R=g.distinctVals(S).minDiff;R&&isFinite(R)&&(u=Math.min(u,R))}}for(u===1/0&&(u=1),T=0;T<w.length;T++)w[T]._minDiff=u}return u*x.tickwidth}(a,p,t),f=t._minDiff;t._minDiff=null;var c=t._origX;t._origX=null;var l=t._xcalc;t._xcalc=null;var h=n(a,t,c,l,s,r);return t._extremes[p._id]=b.findExtremes(p,l,{vpad:f/2}),h.length?(g.extendFlat(h[0].t,{wHover:f/2,tickLen:i}),h):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./ohlc_defaults"),b=v("../scatter/period_defaults"),y=v("./attributes");function e(r,n,a,t){a(t+".line.color"),a(t+".line.width",n.line.width),a(t+".line.dash",n.line.dash)}re.exports=function(r,n,a,t){function p(s,i){return g.coerce(r,n,y,s,i)}m(r,n,p,t)?(b(r,n,t,p,{x:!0}),p("xhoverformat"),p("yhoverformat"),p("line.width"),p("line.dash"),e(0,n,p,"increasing"),e(0,n,p,"decreasing"),p("text"),p("hovertext"),p("tickwidth"),t._requestRangeslider[n.xaxis]=!0):n.visible=!1}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../lib"),b=v("../../components/fx"),y=v("../../components/color"),e=v("../../lib").fillText,r=v("../../constants/delta.js"),n={increasing:r.INCREASING.SYMBOL,decreasing:r.DECREASING.SYMBOL};function a(s,i,f,c){var l,h,d=s.cd,o=s.xa,x=d[0].trace,u=d[0].t,T=x.type,_="ohlc"===T?"l":"min",w="ohlc"===T?"h":"max",M=u.bPos||0,I=u.bdPos||u.tickLen,S=u.wHover,R=Math.min(1,I/Math.abs(o.r2c(o.range[1])-o.r2c(o.range[0])));function O(J){var te=J.pos+M-i;return b.inbox(te-S,te+S,l)}function C(J){var te=J[_],X=J[w];return te===X||b.inbox(te-f,X-f,l)}function D(J){return(O(J)+C(J))/2}l=s.maxHoverDistance-R,h=s.maxSpikeDistance-R;var B=b.getDistanceFunction(c,O,C,D);if(b.getClosest(d,B,s),!1===s.index)return null;var z=d[s.index];if(z.empty)return null;var Y=x[z.dir],G=Y.line.color;return s.color=y.opacity(G)&&Y.line.width?G:Y.fillcolor,s.x0=o.c2p(z.pos+M-I,!0),s.x1=o.c2p(z.pos+M+I,!0),s.xLabelVal=void 0!==z.orig_p?z.orig_p:z.pos,s.spikeDistance=D(z)*h/l,s.xSpike=o.c2p(z.pos,!0),s}function t(s,i,f,c){var l=s.cd,h=s.ya,d=l[0].trace,o=l[0].t,x=[],u=a(s,i,f,c);if(!u)return[];var T=l[u.index].hi||d.hoverinfo,_=T.split("+");if("all"!==T&&-1===_.indexOf("y"))return[];for(var w=["high","open","close","low"],M={},I=0;I<w.length;I++){var S,R=w[I],O=d[R][u.index],C=h.c2p(O,!0);O in M?(S=M[O]).yLabel+="<br>"+o.labels[R]+g.hoverLabelText(h,O,d.yhoverformat):((S=m.extendFlat({},u)).y0=S.y1=C,S.yLabelVal=O,S.yLabel=o.labels[R]+g.hoverLabelText(h,O,d.yhoverformat),S.name="",x.push(S),M[O]=S)}return x}function p(s,i,f,c){var l=s.cd,h=s.ya,d=l[0].trace,o=l[0].t,x=a(s,i,f,c);if(!x)return[];var u=l[x.index],T=x.index=u.i,_=u.dir;function w(D){return o.labels[D]+g.hoverLabelText(h,d[D][T],d.yhoverformat)}var M=u.hi||d.hoverinfo,I=M.split("+"),S="all"===M,R=S||-1!==I.indexOf("y"),O=S||-1!==I.indexOf("text"),C=R?[w("open"),w("high"),w("low"),w("close")+"  "+n[_]]:[];return O&&e(u,d,C),x.extraText=C.join("<br>"),x.y0=x.y1=h.c2p(u.yc,!0),[x]}re.exports={hoverPoints:function(s,i,f,c){return s.cd[0].trace.hoverlabel.split?t(s,i,f,c):p(s,i,f,c)},hoverSplit:t,hoverOnPoints:p}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"ohlc",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc").calc,plot:v("./plot"),style:v("./style"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib");re.exports=function(b,y,e,r){var n=e("x"),a=e("open"),t=e("high"),p=e("low"),s=e("close");if(e("hoverlabel.split"),g.getComponentMethod("calendars","handleTraceDefaults")(b,y,["x"],r),a&&t&&p&&s){var i=Math.min(a.length,t.length,p.length,s.length);return n&&(i=Math.min(i,m.minRowLength(n))),y._length=i,i}}},{"../../lib":515,"../../registry":647}],887:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib");re.exports=function(b,y,e,r){var n=y.yaxis,a=y.xaxis,t=!!a.rangebreaks;m.makeTraceGroups(r,e,"trace ohlc").each(function(p){var s=g.select(this),i=p[0],f=i.t;if(!0!==i.trace.visible||f.empty)s.remove();else{var c=f.tickLen,l=s.selectAll("path").data(m.identity);l.enter().append("path"),l.exit().remove(),l.attr("d",function(h){if(h.empty)return"M0,0Z";var d=a.c2p(h.pos-c,!0),o=a.c2p(h.pos+c,!0),x=t?(d+o)/2:a.c2p(h.pos,!0);return"M"+d+","+n.c2p(h.o,!0)+"H"+x+"M"+x+","+n.c2p(h.h,!0)+"V"+n.c2p(h.l,!0)+"M"+o+","+n.c2p(h.c,!0)+"H"+x})}})}},{"../../lib":515,"@plotly/d3":58}],888:[function(v,re,ne){"use strict";re.exports=function(g,m){var b,y=g.cd,e=g.xaxis,r=g.yaxis,n=[],a=y[0].t.bPos||0;if(!1===m)for(b=0;b<y.length;b++)y[b].selected=0;else for(b=0;b<y.length;b++){var t=y[b];m.contains([e.c2p(t.pos+a),r.c2p(t.yc)],null,t.i,g)?(n.push({pointNumber:t.i,x:e.c2d(t.pos),y:r.c2d(t.yc)}),t.selected=1):t.selected=0}return n}},{}],889:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("../../components/color");re.exports=function(y,e,r){var n=r||g.select(y).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var t=a[0].trace;g.select(this).selectAll("path").each(function(p){if(!p.empty){var s=t[p.dir].line;g.select(this).style("fill","none").call(b.stroke,s.color).call(m.dashLine,s.dash,s.width).style("opacity",t.selectedpoints&&!p.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(v,re,ne){"use strict";var g=v("../../lib/extend").extendFlat,m=v("../../plots/attributes"),b=v("../../plots/font_attributes"),y=v("../../components/colorscale/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/domain").attributes,n=g({editType:"calc"},y("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});re.exports={domain:r({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:g({},m.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:b({editType:"calc"}),tickfont:b({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(v,re,ne){"use strict";var g=v("../../plots/get_data").getModuleCalcData,m=v("./plot");ne.name="parcats",ne.plot=function(b,y,e,r){var n=g(b.calcdata,"parcats");n.length&&m(b,n[0],e,r)},ne.clean=function(b,y,e,r){var n=r._has&&r._has("parcats"),a=y._has&&y._has("parcats");n&&!a&&r._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(v,re,ne){"use strict";var g=v("../../lib/gup").wrap,m=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/calc"),y=v("../../lib/filter_unique.js"),e=v("../../components/drawing"),r=v("../../lib"),n=v("fast-isnumeric");function a(s,i,f){s.valueInds.push(i),s.count+=f}function t(s,i,f){return{categoryInds:s,color:i,rawColor:f,valueInds:[],count:0}}function p(s,i,f){s.valueInds.push(i),s.count+=f}re.exports=function(s,i){var f=r.filterVisible(i.dimensions);if(0===f.length)return[];var c,l,h,d=f.map(function(K){var ae;if("trace"===K.categoryorder)ae=null;else if("array"===K.categoryorder)ae=K.categoryarray;else{ae=y(K.values);for(var U=!0,V=0;V<ae.length;V++)if(!n(ae[V])){U=!1;break}ae.sort(U?r.sorterAsc:void 0),"category descending"===K.categoryorder&&(ae=ae.reverse())}return function(q,ie){ie=null==ie?[]:ie.map(function(be){return be});var H={},ee={},Q=[];ie.forEach(function(be,he){H[be]=0,ee[be]=he});for(var oe=0;oe<q.length;oe++){var le,de=q[oe];void 0===H[de]?(H[de]=1,le=ie.push(de)-1,ee[de]=le):(H[de]++,le=ee[de]),Q.push(le)}var fe=ie.map(function(be){return H[be]});return{uniqueValues:ie,uniqueCounts:fe,inds:Q}}(K.values,ae)});c=r.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function(K){var ae;if(function(U){for(var V=new Array(U.length),q=0;q<U.length;q++){if(U[q]<0||U[q]>=U.length||void 0!==V[U[q]])return!1;V[U[q]]=!0}return!0}(K.map(function(U){return U.displayindex})))for(ae=0;ae<K.length;ae++)K[ae]._displayindex=K[ae].displayindex;else for(ae=0;ae<K.length;ae++)K[ae]._displayindex=ae}(f),f.forEach(function(K,ae){!function(U,V){U._categoryarray=V.uniqueValues,U._ticktext=null==U.ticktext?[]:U.ticktext.slice();for(var q=U._ticktext.length;q<V.uniqueValues.length;q++)U._ticktext.push(V.uniqueValues[q])}(K,d[ae])});var o,x=i.line;x?(m(i,"line")&&b(s,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),o=e.tryColorscale(x)):o=r.identity;var u,T,_,w,M,I=f[0].values.length,S={},R=d.map(function(K){return K.inds});for(h=0,u=0;u<I;u++){var O=[];for(T=0;T<R.length;T++)O.push(R[T][u]);h+=l=c[u%c.length];var C=(_=u,w=void 0,M=void 0,r.isArrayOrTypedArray(x.color)?M=w=x.color[_%x.color.length]:w=x.color,{color:o(w),rawColor:M}),D=O+"-"+C.rawColor;void 0===S[D]&&(S[D]=t(O,C.color,C.rawColor)),p(S[D],u,l)}var B,K,ae,U,V,z=f.map(function(K,ae){return{dimensionInd:ae,containerInd:K._index,displayInd:K._displayindex,dimensionLabel:K.label,count:h,categories:[],dragX:null}});for(u=0;u<I;u++)for(l=c[u%c.length],T=0;T<z.length;T++){var Y=z[T].containerInd,G=d[T].inds[u],J=z[T].categories;void 0===J[G]&&(J[G]={dimensionInd:T,categoryInd:B=G,categoryValue:i.dimensions[Y]._categoryarray[G],displayInd:B,categoryLabel:i.dimensions[Y]._ticktext[G],valueInds:[],count:0,dragY:null}),a(J[G],u,l)}return g((ae=S,U=h,V=(K=z).map(function(q){return q.categories.length}).reduce(function(q,ie){return Math.max(q,ie)}),{dimensions:K,paths:ae,trace:void 0,maxCats:V,count:U}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),r=v("./attributes"),n=v("../parcoords/merge_length");function a(t,p){function s(o,x){return g.coerce(t,p,r.dimensions,o,x)}var i=s("values"),f=s("visible");if(i&&i.length||(f=p.visible=!1),f){s("label"),s("displayindex",p._index);var c,l=t.categoryarray,h=Array.isArray(l)&&l.length>0;h&&(c="array");var d=s("categoryorder",c);"array"===d?(s("categoryarray"),s("ticktext")):(delete t.categoryarray,delete t.ticktext),h||"array"!==d||(p.categoryorder="trace")}}re.exports=function(t,p,s,i){function f(o,x){return g.coerce(t,p,r,o,x)}var c=e(t,p,{name:"dimensions",handleItemDefaults:a}),l=function(o,x,u,T,_){_("line.shape"),_("line.hovertemplate");var w=_("line.color",T.colorway[0]);if(m(o,"line")&&g.isArrayOrTypedArray(w)){if(w.length)return _("line.colorscale"),b(o,x,T,_,{prefix:"line.",cLetter:"c"}),w.length;x.line.color=u}return 1/0}(t,p,s,i,f);y(p,i,f),Array.isArray(c)&&c.length||(p.visible=!1),n(p,c,"values",l),f("hoveron"),f("hovertemplate"),f("arrangement"),f("bundlecolors"),f("sortpaths"),f("counts");var h={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};g.coerceFont(f,"labelfont",h);var d={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};g.coerceFont(f,"tickfont",d)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-interpolate").interpolateNumber,b=v("../../plot_api/plot_api"),y=v("../../components/fx"),e=v("../../lib"),r=e.strTranslate,n=v("../../components/drawing"),a=v("tinycolor2"),t=v("../../lib/svg_text_utils");function p(U,V,q,ie){var H=U.map(J.bind(0,V,q)),ee=ie.selectAll("g.parcatslayer").data([null]);ee.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var Q=ee.selectAll("g.trace.parcats").data(H,s),oe=Q.enter().append("g").attr("class","trace parcats");Q.attr("transform",function(Ae){return r(Ae.x,Ae.y)}),oe.append("g").attr("class","paths");var le=Q.select("g.paths").selectAll("path.path").data(function(Ae){return Ae.paths},s);le.attr("fill",function(Ae){return Ae.model.color});var de=le.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ae){return Ae.model.color}).attr("fill-opacity",0);x(de),le.attr("d",function(Ae){return Ae.svgD}),de.empty()||le.sort(f),le.exit().remove(),le.on("mouseover",c).on("mouseout",l).on("click",o),oe.append("g").attr("class","dimensions");var fe=Q.select("g.dimensions").selectAll("g.dimension").data(function(Ae){return Ae.dimensions},s);fe.enter().append("g").attr("class","dimension"),fe.attr("transform",function(Ae){return r(Ae.x,0)}),fe.exit().remove();var be=fe.selectAll("g.category").data(function(Ae){return Ae.categories},s),he=be.enter().append("g").attr("class","category");be.attr("transform",function(Ae){return r(0,Ae.y)}),he.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Ae){return Ae.width}).attr("height",function(Ae){return Ae.height}),T(he);var _e=be.selectAll("rect.bandrect").data(function(Ae){return Ae.bands},s);_e.each(function(){e.raiseToTop(this)}),_e.attr("fill",function(Ae){return Ae.color});var Ce=_e.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ae){return Ae.color}).attr("fill-opacity",0);_e.attr("fill",function(Ae){return Ae.color}).attr("width",function(Ae){return Ae.width}).attr("height",function(Ae){return Ae.height}).attr("y",function(Ae){return Ae.y}).attr("cursor",function(Ae){return"fixed"===Ae.parcatsViewModel.arrangement?"default":"perpendicular"===Ae.parcatsViewModel.arrangement?"ns-resize":"move"}),_(Ce),_e.exit().remove(),he.append("text").attr("class","catlabel").attr("pointer-events","none");var Ee=V._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Ae){return i(Ae)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",t.makeTextShadow(Ee)).style("fill","rgb(0, 0, 0)").attr("x",function(Ae){return i(Ae)?Ae.width+5:-5}).attr("y",function(Ae){return Ae.height/2}).text(function(Ae){return Ae.model.categoryLabel}).each(function(Ae){n.font(g.select(this),Ae.parcatsViewModel.categorylabelfont),t.convertToTspans(g.select(this),V)}),he.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ae){return"fixed"===Ae.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Ae){return Ae.width/2}).attr("y",-5).text(function(Ae,ze){return 0===ze?Ae.parcatsViewModel.model.dimensions[Ae.model.dimensionInd].dimensionLabel:null}).each(function(Ae){n.font(g.select(this),Ae.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),be.exit().remove(),fe.call(g.behavior.drag().origin(function(Ae){return{x:Ae.x,y:0}}).on("dragstart",C).on("drag",D).on("dragend",B)),Q.each(function(Ae){Ae.traceSelection=g.select(this),Ae.pathSelection=g.select(this).selectAll("g.paths").selectAll("path.path"),Ae.dimensionSelection=g.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),Q.exit().remove()}function s(U){return U.key}function i(U){return U.model.dimensionInd===U.parcatsViewModel.dimensions[U.parcatsViewModel.dimensions.length-1].model.dimensionInd}function f(U,V){return U.model.rawColor>V.model.rawColor?1:U.model.rawColor<V.model.rawColor?-1:0}function c(U){if(!U.parcatsViewModel.dragDimension&&-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),u(g.select(this));var V=h(U),q=d(U);if(U.parcatsViewModel.graphDiv.emit("plotly_hover",{points:V,event:g.event,constraints:q}),-1===U.parcatsViewModel.hoverinfoItems.indexOf("none")){var ie,H,ee,Q=g.mouse(this)[0],oe=U.parcatsViewModel.graphDiv,le=U.parcatsViewModel.trace,de=oe._fullLayout,fe=de._paperdiv.node().getBoundingClientRect(),be=U.parcatsViewModel.graphDiv.getBoundingClientRect();for(ee=0;ee<U.leftXs.length-1;ee++)if(U.leftXs[ee]+U.dimWidths[ee]-2<=Q&&Q<=U.leftXs[ee+1]+2){var he=U.parcatsViewModel.dimensions[ee];ie=(he.x+he.width+U.parcatsViewModel.dimensions[ee+1].x)/2,H=(U.topYs[ee]+U.topYs[ee+1]+U.height)/2;break}var Ce=U.parcatsViewModel.x+ie,Ee=U.parcatsViewModel.y+H,Ae=a.mostReadable(U.model.color,["black","white"]),ze=U.model.count,ve=ze/U.parcatsViewModel.model.count,Te={countLabel:ze,probabilityLabel:ve.toFixed(3)},Ie=[];-1!==U.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ie.push(["Count:",Te.countLabel].join(" ")),-1!==U.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ie.push(["P:",Te.probabilityLabel].join(" "));var De=Ie.join("<br>"),Fe=g.mouse(oe)[0];y.loneHover({trace:le,x:Ce-fe.left+be.left,y:Ee-fe.top+be.top,text:De,color:U.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ae,idealAlign:Fe<Ce?"right":"left",hovertemplate:(le.line||{}).hovertemplate,hovertemplateLabels:Te,eventData:[{data:le._input,fullData:le,count:ze,probability:ve}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:oe})}}}function l(U){if(!U.parcatsViewModel.dragDimension&&(x(g.select(this)),y.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),U.parcatsViewModel.pathSelection.sort(f),-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var V=h(U),q=d(U);U.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:V,event:g.event,constraints:q})}}function h(U){for(var V=[],q=z(U.parcatsViewModel),ie=0;ie<U.model.valueInds.length;ie++)V.push({curveNumber:q,pointNumber:U.model.valueInds[ie]});return V}function d(U){for(var V={},q=U.parcatsViewModel.model.dimensions,ie=0;ie<q.length;ie++){var H=q[ie];V[H.containerInd]=H.categories[U.model.categoryInds[ie]].categoryValue}return void 0!==U.model.rawColor&&(V.color=U.model.rawColor),V}function o(U){if(-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")){var V=h(U),q=d(U);U.parcatsViewModel.graphDiv.emit("plotly_click",{points:V,event:g.event,constraints:q})}}function x(U){U.attr("fill",function(V){return V.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function u(U){U.attr("fill-opacity",.8).attr("stroke",function(V){return a.mostReadable(V.model.color,["black","white"])}).attr("stroke-width",.3)}function T(U){U.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function _(U){U.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(U){var q=U.categoryViewModel.model.dimensionInd,ie=U.categoryViewModel.model.categoryInd;return U.parcatsViewModel.pathSelection.filter(function(H){return H.model.categoryInds[q]===ie&&H.model.color===U.color})}function M(U,V,q){var ie=g.select(U).datum(),H=ie.categoryViewModel.model,ee=ie.parcatsViewModel.graphDiv,Q=g.select(U.parentNode).selectAll("rect.bandrect"),oe=[];Q.each(function(de){w(de).each(function(fe){Array.prototype.push.apply(oe,h(fe))})});var le={};le[H.dimensionInd]=H.categoryValue,ee.emit(V,{points:oe,event:q,constraints:le})}function I(U,V,q){var ie=g.select(U).datum(),H=ie.categoryViewModel.model,ee=ie.parcatsViewModel.graphDiv,Q=w(ie),oe=[];Q.each(function(de){Array.prototype.push.apply(oe,h(de))});var le={};le[H.dimensionInd]=H.categoryValue,void 0!==ie.rawColor&&(le.color=ie.rawColor),ee.emit(V,{points:oe,event:q,constraints:le})}function S(U,V,q){U._fullLayout._calcInverseTransform(U);var ie,H,ee=U._fullLayout._invScaleX,Q=U._fullLayout._invScaleY,oe=g.select(q.parentNode).select("rect.catrect"),le=oe.node().getBoundingClientRect(),de=oe.datum(),fe=de.parcatsViewModel,he=fe.trace,_e=le.top+le.height/2;fe.dimensions.length>1&&fe.model.dimensions[de.model.dimensionInd].displayInd===fe.dimensions.length-1?(ie=le.left,H="left"):(ie=le.left+le.width,H="right");var Ce=de.model.count,Ee=de.model.categoryLabel,Ae=Ce/de.parcatsViewModel.model.count,ze={countLabel:Ce,categoryLabel:Ee,probabilityLabel:Ae.toFixed(3)},ve=[];-1!==de.parcatsViewModel.hoverinfoItems.indexOf("count")&&ve.push(["Count:",ze.countLabel].join(" ")),-1!==de.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ve.push(["P("+ze.categoryLabel+"):",ze.probabilityLabel].join(" "));var Te=ve.join("<br>");return{trace:he,x:ee*(ie-V.left),y:Q*(_e-V.top),text:Te,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:H,hovertemplate:he.hovertemplate,hovertemplateLabels:ze,eventData:[{data:he._input,fullData:he,count:Ce,category:Ee,probability:Ae}]}}function R(U){if(!U.parcatsViewModel.dragDimension&&-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(g.mouse(this)[1]<-1)return;var V,q=U.parcatsViewModel.graphDiv,ie=q._fullLayout,H=ie._paperdiv.node().getBoundingClientRect(),ee=U.parcatsViewModel.hoveron;"color"===ee?(u(le=w(oe=g.select(this).datum())),le.each(function(){e.raiseToTop(this)}),g.select(this.parentNode).selectAll("rect.bandrect").filter(function(de){return de.color===oe.color}).each(function(){e.raiseToTop(this),g.select(this).attr("stroke","black").attr("stroke-width",1.5)}),I(this,"plotly_hover",g.event)):(function(Q){g.select(Q.parentNode).selectAll("rect.bandrect").each(function(oe){var le=w(oe);u(le),le.each(function(){e.raiseToTop(this)})}),g.select(Q.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),M(this,"plotly_hover",g.event)),-1===U.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===ee?V=S(q,H,this):"color"===ee?V=function(Q,oe,le){Q._fullLayout._calcInverseTransform(Q);var de,fe,be=Q._fullLayout._invScaleX,he=Q._fullLayout._invScaleY,_e=le.getBoundingClientRect(),Ce=g.select(le).datum(),Ee=Ce.categoryViewModel,Ae=Ee.parcatsViewModel,ve=Ae.trace,Te=_e.y+_e.height/2;Ae.dimensions.length>1&&Ae.model.dimensions[Ee.model.dimensionInd].displayInd===Ae.dimensions.length-1?(de=_e.left,fe="left"):(de=_e.left+_e.width,fe="right");var Ie=Ee.model.categoryLabel,De=Ce.parcatsViewModel.model.count,Fe=0;Ce.categoryViewModel.bands.forEach(function(mt){mt.color===Ce.color&&(Fe+=mt.count)});var Ue=Ee.model.count,qe=0;Ae.pathSelection.each(function(mt){mt.model.color===Ce.color&&(qe+=mt.model.count)});var je=Fe/De,rt=Fe/qe,Ne=Fe/Ue,Be={countLabel:De,categoryLabel:Ie,probabilityLabel:je.toFixed(3)},We=[];-1!==Ee.parcatsViewModel.hoverinfoItems.indexOf("count")&&We.push(["Count:",Be.countLabel].join(" ")),-1!==Ee.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(We.push("P(color \u2229 "+Ie+"): "+Be.probabilityLabel),We.push("P("+Ie+" | color): "+rt.toFixed(3)),We.push("P(color | "+Ie+"): "+Ne.toFixed(3)));var Ye=We.join("<br>"),lt=a.mostReadable(Ce.color,["black","white"]);return{trace:ve,x:be*(de-oe.left),y:he*(Te-oe.top),text:Ye,color:Ce.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:lt,fontSize:10,idealAlign:fe,hovertemplate:ve.hovertemplate,hovertemplateLabels:Be,eventData:[{data:ve._input,fullData:ve,category:Ie,count:De,probability:je,categorycount:Ue,colorcount:qe,bandcolorcount:Fe}]}}(q,H,this):"dimension"===ee&&(V=function(Q,oe,le){var de=[];return g.select(le.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){de.push(S(Q,oe,this))}),de}(q,H,this)),V&&y.loneHover(V,{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:q}))}var oe,le}function O(U){var V=U.parcatsViewModel;!V.dragDimension&&(x(V.pathSelection),T(V.dimensionSelection.selectAll("g.category")),_(V.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),y.loneUnhover(V.graphDiv._fullLayout._hoverlayer.node()),V.pathSelection.sort(f),-1===V.hoverinfoItems.indexOf("skip"))&&("color"===U.parcatsViewModel.hoveron?I(this,"plotly_unhover",g.event):M(this,"plotly_unhover",g.event))}function C(U){"fixed"!==U.parcatsViewModel.arrangement&&(U.dragDimensionDisplayInd=U.model.displayInd,U.initialDragDimensionDisplayInds=U.parcatsViewModel.model.dimensions.map(function(V){return V.displayInd}),U.dragHasMoved=!1,U.dragCategoryDisplayInd=null,g.select(this).selectAll("g.category").select("rect.catrect").each(function(V){var q=g.mouse(this)[0],ie=g.mouse(this)[1];-2<=q&&q<=V.width+2&&-2<=ie&&ie<=V.height+2&&(U.dragCategoryDisplayInd=V.model.displayInd,U.initialDragCategoryDisplayInds=U.model.categories.map(function(H){return H.displayInd}),V.model.dragY=V.y,e.raiseToTop(this.parentNode),g.select(this.parentNode).selectAll("rect.bandrect").each(function(H){H.y<ie&&ie<=H.y+H.height&&(U.potentialClickBand=this)}))}),U.parcatsViewModel.dragDimension=U,y.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function D(U){if("fixed"!==U.parcatsViewModel.arrangement&&(U.dragHasMoved=!0,null!==U.dragDimensionDisplayInd)){var V=U.dragDimensionDisplayInd,q=V-1,ie=V+1,H=U.parcatsViewModel.dimensions[V];if(null!==U.dragCategoryDisplayInd){var ee=H.categories[U.dragCategoryDisplayInd];ee.model.dragY+=g.event.dy;var Q=ee.model.dragY,oe=ee.model.displayInd,le=H.categories,de=le[oe-1],fe=le[oe+1];void 0!==de&&Q<de.y+de.height/2&&(ee.model.displayInd=de.model.displayInd,de.model.displayInd=oe),void 0!==fe&&Q+ee.height>fe.y+fe.height/2&&(ee.model.displayInd=fe.model.displayInd,fe.model.displayInd=oe),U.dragCategoryDisplayInd=ee.model.displayInd}if(null===U.dragCategoryDisplayInd||"freeform"===U.parcatsViewModel.arrangement){H.model.dragX=g.event.x;var be=U.parcatsViewModel.dimensions[q],he=U.parcatsViewModel.dimensions[ie];void 0!==be&&H.model.dragX<be.x+be.width&&(H.model.displayInd=be.model.displayInd,be.model.displayInd=V),void 0!==he&&H.model.dragX+H.width>he.x&&(H.model.displayInd=he.model.displayInd,he.model.displayInd=U.dragDimensionDisplayInd),U.dragDimensionDisplayInd=H.model.displayInd}K(U.parcatsViewModel),X(U.parcatsViewModel),G(U.parcatsViewModel),Y(U.parcatsViewModel)}}function B(U){if("fixed"!==U.parcatsViewModel.arrangement&&null!==U.dragDimensionDisplayInd){g.select(this).selectAll("text").attr("font-weight","normal");var V={},q=z(U.parcatsViewModel),ie=U.parcatsViewModel.model.dimensions.map(function(fe){return fe.displayInd}),H=U.initialDragDimensionDisplayInds.some(function(fe,be){return fe!==ie[be]});H&&ie.forEach(function(fe,be){V["dimensions["+U.parcatsViewModel.model.dimensions[be].containerInd+"].displayindex"]=fe});var ee=!1;if(null!==U.dragCategoryDisplayInd){var Q=U.model.categories.map(function(fe){return fe.displayInd});if(ee=U.initialDragCategoryDisplayInds.some(function(fe,be){return fe!==Q[be]})){var oe=U.model.categories.slice().sort(function(fe,be){return fe.displayInd-be.displayInd}),le=oe.map(function(fe){return fe.categoryValue}),de=oe.map(function(fe){return fe.categoryLabel});V["dimensions["+U.model.containerInd+"].categoryarray"]=[le],V["dimensions["+U.model.containerInd+"].ticktext"]=[de],V["dimensions["+U.model.containerInd+"].categoryorder"]="array"}}-1===U.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!U.dragHasMoved&&U.potentialClickBand&&("color"===U.parcatsViewModel.hoveron?I(U.potentialClickBand,"plotly_click",g.event.sourceEvent):M(U.potentialClickBand,"plotly_click",g.event.sourceEvent)),U.model.dragX=null,null!==U.dragCategoryDisplayInd&&(U.parcatsViewModel.dimensions[U.dragDimensionDisplayInd].categories[U.dragCategoryDisplayInd].model.dragY=null,U.dragCategoryDisplayInd=null),U.dragDimensionDisplayInd=null,U.parcatsViewModel.dragDimension=null,U.dragHasMoved=null,U.potentialClickBand=null,K(U.parcatsViewModel),X(U.parcatsViewModel),g.transition().duration(300).ease("cubic-in-out").each(function(){G(U.parcatsViewModel,!0),Y(U.parcatsViewModel,!0)}).each("end",function(){(H||ee)&&b.restyle(U.parcatsViewModel.graphDiv,V,[q])})}}function z(U){for(var V,q=U.graphDiv._fullData,ie=0;ie<q.length;ie++)if(U.key===q[ie].uid){V=ie;break}return V}function Y(U,V){var q;void 0===V&&(V=!1),U.pathSelection.data(function(ie){return ie.paths},s),(q=U.pathSelection,V?q.transition():q).attr("d",function(ie){return ie.svgD})}function G(U,V){function q(Q){return V?Q.transition():Q}void 0===V&&(V=!1),U.dimensionSelection.data(function(Q){return Q.dimensions},s);var ie=U.dimensionSelection.selectAll("g.category").data(function(Q){return Q.categories},s);q(U.dimensionSelection).attr("transform",function(Q){return r(Q.x,0)}),q(ie).attr("transform",function(Q){return r(0,Q.y)}),ie.select(".dimlabel").text(function(Q,oe){return 0===oe?Q.parcatsViewModel.model.dimensions[Q.model.dimensionInd].dimensionLabel:null}),ie.select(".catlabel").attr("text-anchor",function(Q){return i(Q)?"start":"end"}).attr("x",function(Q){return i(Q)?Q.width+5:-5}).each(function(Q){var oe,le;i(Q)?(oe=Q.width+5,le="start"):(oe=-5,le="end"),g.select(this).selectAll("tspan").attr("x",oe).attr("text-anchor",le)});var H=ie.selectAll("rect.bandrect").data(function(Q){return Q.bands},s),ee=H.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(Q){return Q.color}).attr("fill-opacity",0);H.attr("fill",function(Q){return Q.color}).attr("width",function(Q){return Q.width}).attr("height",function(Q){return Q.height}).attr("y",function(Q){return Q.y}),_(ee),H.each(function(){e.raiseToTop(this)}),H.exit().remove()}function J(U,V,q){var ie,H=q[0],ee=V.margin||{l:80,r:80,t:100,b:80},Q=H.trace,oe=Q.domain,le=V.width,de=V.height,fe=Math.floor(le*(oe.x[1]-oe.x[0])),be=Math.floor(de*(oe.y[1]-oe.y[0])),he=oe.x[0]*le+ee.l,_e=V.height-oe.y[1]*V.height+ee.t,Ce=Q.line.shape;ie="all"===Q.hoverinfo?["count","probability"]:(Q.hoverinfo||"").split("+");var Ee={trace:Q,key:Q.uid,model:H,x:he,y:_e,width:fe,height:be,hoveron:Q.hoveron,hoverinfoItems:ie,arrangement:Q.arrangement,bundlecolors:Q.bundlecolors,sortpaths:Q.sortpaths,labelfont:Q.labelfont,categorylabelfont:Q.tickfont,pathShape:Ce,dragDimension:null,margin:ee,paths:[],dimensions:[],graphDiv:U,traceSelection:null,pathSelection:null,dimensionSelection:null};return H.dimensions&&(K(Ee),X(Ee)),Ee}function te(U,V,q,ie,H){var ee,Q,oe=[],le=[];for(Q=0;Q<q.length-1;Q++)ee=m(q[Q]+U[Q],U[Q+1]),oe.push(ee(H)),le.push(ee(1-H));var de="M "+U[0]+","+V[0];for(de+="l"+q[0]+",0 ",Q=1;Q<q.length;Q++)de+="C"+oe[Q-1]+","+V[Q-1]+" "+le[Q-1]+","+V[Q]+" "+U[Q]+","+V[Q],de+="l"+q[Q]+",0 ";for(de+="l0,"+ie+" ",de+="l -"+q[q.length-1]+",0 ",Q=q.length-2;Q>=0;Q--)de+="C"+le[Q]+","+(V[Q+1]+ie)+" "+oe[Q]+","+(V[Q]+ie)+" "+(U[Q]+q[Q])+","+(V[Q]+ie),de+="l-"+q[Q]+",0 ";return de+"Z"}function X(U){var V=U.dimensions,q=U.model,ie=V.map(function(We){return We.categories.map(function(Ye){return Ye.y})}),H=U.model.dimensions.map(function(We){return We.categories.map(function(Ye){return Ye.displayInd})}),ee=U.model.dimensions.map(function(We){return We.displayInd}),Q=U.dimensions.map(function(We){return We.model.dimensionInd}),oe=V.map(function(We){return We.x}),le=V.map(function(We){return We.width}),de=[];for(var fe in q.paths)q.paths.hasOwnProperty(fe)&&de.push(q.paths[fe]);function be(We){var Ye=We.categoryInds.map(function(lt,mt){return H[mt][lt]});return Q.map(function(lt){return Ye[lt]})}de.sort(function(We,Ye){var lt=be(We),mt=be(Ye);return"backward"===U.sortpaths&&(lt.reverse(),mt.reverse()),lt.push(We.valueInds[0]),mt.push(Ye.valueInds[0]),U.bundlecolors&&(lt.unshift(We.rawColor),mt.unshift(Ye.rawColor)),lt<mt?-1:lt>mt?1:0});for(var he=new Array(de.length),_e=V[0].model.count,Ce=V[0].categories.map(function(We){return We.height}).reduce(function(We,Ye){return We+Ye}),Ee=0;Ee<de.length;Ee++){var Ae,ze=de[Ee];Ae=_e>0?Ce*(ze.count/_e):0;for(var ve,Te=new Array(ie.length),Ie=0;Ie<ze.categoryInds.length;Ie++){var Fe=H[Ie][ze.categoryInds[Ie]],Ue=ee[Ie];Te[Ue]=ie[Ue][Fe],ie[Ue][Fe]+=Ae;var qe=U.dimensions[Ue].categories[Fe],je=qe.bands.length,rt=qe.bands[je-1];if(void 0===rt||ze.rawColor!==rt.rawColor){var Ne=void 0===rt?0:rt.y+rt.height;qe.bands.push({key:Ne,color:ze.color,rawColor:ze.rawColor,height:Ae,width:qe.width,count:ze.count,y:Ne,categoryViewModel:qe,parcatsViewModel:U})}else{var Be=qe.bands[je-1];Be.height+=Ae,Be.count+=ze.count}}ve=te(oe,Te,le,Ae,"hspline"===U.pathShape?.5:0),he[Ee]={key:ze.valueInds[0],model:ze,height:Ae,leftXs:oe,topYs:Te,dimWidths:le,svgD:ve,parcatsViewModel:U}}U.paths=he}function K(U){var V=U.model.dimensions.map(function(Q){return{displayInd:Q.displayInd,dimensionInd:Q.dimensionInd}});V.sort(function(Q,oe){return Q.displayInd-oe.displayInd});var q=[];for(var ie in V)q.push(ae(U,U.model.dimensions[V[ie].dimensionInd]));U.dimensions=q}function ae(U,V){var q,ie=U.model.dimensions.length;q=40+(ie>1?(U.width-80-16)/(ie-1):0)*V.displayInd;var ee,Q,oe,de,fe=[],be=U.model.maxCats,he=V.categories.length,_e=V.count,Ce=U.height-8*(be-1),Ee=8*(be-he)/2,Ae=V.categories.map(function(ze){return{displayInd:ze.displayInd,categoryInd:ze.categoryInd}});for(Ae.sort(function(ze,ve){return ze.displayInd-ve.displayInd}),de=0;de<he;de++)oe={key:(Q=V.categories[Ae[de].categoryInd]).valueInds[0],model:Q,width:16,height:ee=_e>0?Q.count/_e*Ce:0,y:null!==Q.dragY?Q.dragY:Ee,bands:[],parcatsViewModel:U},Ee=Ee+ee+8,fe.push(oe);return{key:V.dimensionInd,x:null!==V.dragX?V.dragX:q,y:0,width:16,model:V,categories:fe,parcatsViewModel:U,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}re.exports=function(U,V,q,ie){p(q,U,ie,V)}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(v,re,ne){"use strict";var g=v("./parcats");re.exports=function(m,b,y,e){var r=m._fullLayout,a=r._size;g(m,r._paper,b,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},y,e)}},{"./parcats":895}],897:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/layout_attributes"),b=v("../../plots/font_attributes"),y=v("../../plots/domain").attributes,e=v("../../lib/extend").extendFlat,r=v("../../plot_api/plot_template").templatedArray;re.exports={domain:y({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:b({editType:"plot"}),tickfont:b({editType:"plot"}),rangefont:b({editType:"plot"}),dimensions:r("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},m.tickvals,{editType:"plot"}),ticktext:e({},m.ticktext,{editType:"plot"}),tickformat:e({},m.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},g("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(v,re,ne){"use strict";var g=v("./constants"),m=v("@plotly/d3"),b=v("../../lib/gup").keyFun,y=v("../../lib/gup").repeat,e=v("../../lib").sorterAsc,r=v("../../lib").strTranslate,n=g.bar.snapRatio;function a(S,R){return S*(1-n)+R*n}var t=g.bar.snapClose;function p(S,R){return S*(1-t)+R*t}function s(S,R,O,C){if(function(ae,U){for(var V=0;V<U.length;V++)if(ae>=U[V][0]&&ae<=U[V][1])return!0;return!1}(O,C))return O;var D=S?-1:1,B=0,z=R.length-1;if(D<0){var Y=B;B=z,z=Y}for(var G=R[B],J=G,te=B;D*te<D*z;te+=D){var X=te+D,K=R[X];if(D*O<D*p(G,K))return a(G,J);if(D*O<D*K||X===z)return a(K,G);J=G,G=K}}function i(S){S.attr("x",-g.bar.captureWidth/2).attr("width",g.bar.captureWidth)}function f(S){S.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(S){if(!S.brush.filterSpecified)return"0,"+S.height;for(var R,O,C,D=l(S.brush.filter.getConsolidated(),S.height),B=[0],z=D.length?D[0][0]:null,Y=0;Y<D.length;Y++)O=(R=D[Y])[1]-R[0],B.push(z),B.push(O),(C=Y+1)<D.length&&(z=D[C][0]-R[1]);return B.push(S.height),B}function l(S,R){return S.map(function(O){return O.map(function(C){return Math.max(0,C*R)}).sort(e)})}function h(){m.select(document.body).style("cursor",null)}function d(S){S.attr("stroke-dasharray",c)}function o(S,R){var O=m.select(S).selectAll(".highlight, .highlight-shadow");d(R?O.transition().duration(g.bar.snapDuration).each("end",R):O)}function x(S,R){var O,C=S.brush,D=NaN,B={};if(C.filterSpecified){var z=S.height,Y=C.filter.getConsolidated(),G=l(Y,z),J=NaN,te=NaN,X=NaN;for(O=0;O<=G.length;O++){var K=G[O];if(K&&K[0]<=R&&R<=K[1]){J=O;break}if(te=O?O-1:NaN,K&&K[0]>R){X=O;break}}if(D=J,isNaN(D)&&(D=isNaN(te)||isNaN(X)?isNaN(te)?X:te:R-G[te][1]<G[X][0]-R?te:X),!isNaN(D)){var ae=G[D],U=function(H,ee){var Q=g.bar.handleHeight;if(!(ee>H[1]+Q||ee<H[0]-Q))return ee>=.9*H[1]+.1*H[0]?"n":ee<=.9*H[0]+.1*H[1]?"s":"ns"}(ae,R);U&&(B.interval=Y[D],B.intervalPix=ae,B.region=U)}}if(S.ordinal&&!B.region){var V=S.unitTickvals,q=S.unitToPaddedPx.invert(R);for(O=0;O<V.length;O++){var ie=[.25*V[Math.max(O-1,0)]+.75*V[O],.25*V[Math.min(O+1,V.length-1)]+.75*V[O]];if(q>=ie[0]&&q<=ie[1]){B.clickableOrdinalRange=ie;break}}}return B}function u(S,R){m.event.sourceEvent.stopPropagation();var O=R.height-m.mouse(S)[1]-2*g.verticalPadding,C=R.brush.svgBrush;C.wasDragged=!0,C._dragging=!0,C.newExtent=C.grabbingBar?[O-C.grabPoint,O+C.barLength-C.grabPoint].map(R.unitToPaddedPx.invert):[C.startExtent,R.unitToPaddedPx.invert(O)].sort(e),R.brush.filterSpecified=!0,C.extent=C.stayingIntervals.concat([C.newExtent]),C.brushCallback(R),o(S.parentNode)}function T(S,R){var O=x(R,R.height-m.mouse(S)[1]-2*g.verticalPadding),C="crosshair";O.clickableOrdinalRange?C="pointer":O.region&&(C=O.region+"-resize"),m.select(document.body).style("cursor",C)}function _(S){S.on("mousemove",function(R){m.event.preventDefault(),R.parent.inBrushDrag||T(this,R)}).on("mouseleave",function(R){R.parent.inBrushDrag||h()}).call(m.behavior.drag().on("dragstart",function(R){!function(O,C){m.event.sourceEvent.stopPropagation();var D=C.height-m.mouse(O)[1]-2*g.verticalPadding,B=C.unitToPaddedPx.invert(D),z=C.brush,Y=x(C,D),G=Y.interval,J=z.svgBrush;if(J.wasDragged=!1,J.grabbingBar="ns"===Y.region,J.grabbingBar){var te=G.map(C.unitToPaddedPx);J.grabPoint=D-te[0]-g.verticalPadding,J.barLength=te[1]-te[0]}J.clickableOrdinalRange=Y.clickableOrdinalRange,J.stayingIntervals=C.multiselect&&z.filterSpecified?z.filter.getConsolidated():[],G&&(J.stayingIntervals=J.stayingIntervals.filter(function(X){return X[0]!==G[0]&&X[1]!==G[1]})),J.startExtent=Y.region?G["s"===Y.region?1:0]:B,C.parent.inBrushDrag=!0,J.brushStartCallback()}(this,R)}).on("drag",function(R){u(this,R)}).on("dragend",function(R){!function(O,C){var D=C.brush,B=D.filter,z=D.svgBrush;z._dragging||(T(O,C),u(O,C),C.brush.svgBrush.wasDragged=!1),z._dragging=!1,m.event.sourceEvent.stopPropagation();var Y=z.grabbingBar;if(z.grabbingBar=!1,z.grabLocation=void 0,C.parent.inBrushDrag=!1,h(),!z.wasDragged)return z.wasDragged=void 0,z.clickableOrdinalRange?D.filterSpecified&&C.multiselect?z.extent.push(z.clickableOrdinalRange):(z.extent=[z.clickableOrdinalRange],D.filterSpecified=!0):Y?(z.extent=z.stayingIntervals,0===z.extent.length&&M(D)):M(D),z.brushCallback(C),o(O.parentNode),void z.brushEndCallback(D.filterSpecified?B.getConsolidated():[]);var G=function(){B.set(B.getConsolidated())};if(C.ordinal){var J=C.unitTickvals;J[J.length-1]<J[0]&&J.reverse(),z.newExtent=[s(0,J,z.newExtent[0],z.stayingIntervals),s(1,J,z.newExtent[1],z.stayingIntervals)];var te=z.newExtent[1]>z.newExtent[0];z.extent=z.stayingIntervals.concat(te?[z.newExtent]:[]),z.extent.length||M(D),z.brushCallback(C),te?o(O.parentNode,G):(G(),o(O.parentNode))}else G();z.brushEndCallback(D.filterSpecified?B.getConsolidated():[])}(this,R)}))}function w(S,R){return S[0]-R[0]}function M(S){S.filterSpecified=!1,S.svgBrush.extent=[[-1/0,1/0]]}function I(S){for(var R,O=S.slice(),C=[],D=O.shift();D;){for(R=D.slice();(D=O.shift())&&D[0]<=R[1];)R[1]=Math.max(R[1],D[1]);C.push(R)}return 1===C.length&&C[0][0]>C[0][1]&&(C=[]),C}re.exports={makeBrush:function(S,R,O,C,D,B){var z,G,J,te,Y=(te=[],{set:function(X){1===(te=X.map(function(K){return K.slice().sort(e)}).sort(w)).length&&te[0][0]===-1/0&&te[0][1]===1/0&&(te=[[0,-1]]),G=I(te),J=te.reduce(function(K,ae){return[Math.min(K[0],ae[0]),Math.max(K[1],ae[1])]},[1/0,-1/0])},get:function(){return te.slice()},getConsolidated:function(){return G},getBounds:function(){return J}});return Y.set(O),{filter:Y,filterSpecified:R,svgBrush:{extent:[],brushStartCallback:C,brushCallback:(z=D,function(G){var X,J=G.brush,te=(X=J,X.svgBrush.extent.map(function(K){return K.slice()})).slice();J.filter.set(te),z()}),brushEndCallback:B}}},ensureAxisBrush:function(S,R){var O=S.selectAll("."+g.cn.axisBrush).data(y,b);O.enter().append("g").classed(g.cn.axisBrush,!0),function(C,D){var B=C.selectAll(".background").data(y);B.enter().append("rect").classed("background",!0).call(i).call(f).style("pointer-events","auto").attr("transform",r(0,g.verticalPadding)),B.call(_).attr("height",function(G){return G.height-g.verticalPadding});var z=C.selectAll(".highlight-shadow").data(y);z.enter().append("line").classed("highlight-shadow",!0).attr("x",-g.bar.width/2).attr("stroke-width",g.bar.width+g.bar.strokeWidth).attr("stroke",D).attr("opacity",g.bar.strokeOpacity).attr("stroke-linecap","butt"),z.attr("y1",function(G){return G.height}).call(d);var Y=C.selectAll(".highlight").data(y);Y.enter().append("line").classed("highlight",!0).attr("x",-g.bar.width/2).attr("stroke-width",g.bar.width-g.bar.strokeWidth).attr("stroke",g.bar.fillColor).attr("opacity",g.bar.fillOpacity).attr("stroke-linecap","butt"),Y.attr("y1",function(G){return G.height}).call(d)}(O,R)},cleanRanges:function(S,R){if(Array.isArray(S[0])?(S=S.map(function(C){return C.sort(e)}),S=R.multiselect?I(S.sort(w)):[S[0]]):S=[S.sort(e)],R.tickvals){var O=R.tickvals.slice().sort(e);if(!(S=S.map(function(C){var D=[s(0,O,C[0],[]),s(1,O,C[1],[])];if(D[1]>D[0])return D}).filter(function(C){return C})).length)return}return S.length>1?S:S[0]}}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:v("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../plots/get_data").getModuleCalcData,b=v("./plot"),y=v("../../constants/xmlns_namespaces");ne.name="parcoords",ne.plot=function(e){var r=m(e.calcdata,"parcoords")[0];r.length&&b(e,r)},ne.clean=function(e,r,n,a){var t=a._has&&a._has("parcoords"),p=r._has&&r._has("parcoords");t&&!p&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},ne.toSVG=function(e){var r=e._fullLayout._glimages,n=g.select(e).selectAll(".svg-container");n.filter(function(a,t){return t===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:y.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){g.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(v,re,ne){"use strict";var g=v("../../lib").isArrayOrTypedArray,m=v("../../components/colorscale"),b=v("../../lib/gup").wrap;re.exports=function(y,e){var r,n;return m.hasColorscale(e,"line")&&g(e.line.color)?(r=e.line.color,n=m.extractOpts(e.line).colorscale,m.calc(y,e,{vals:r,containerStr:"line",cLetter:"c"})):(r=function(a){for(var t=new Array(a),p=0;p<a;p++)t[p]=.5;return t}(e._length),n=[[0,e.line.color],[1,e.line.color]]),b({lineColor:r,cscale:n})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(v,re,ne){"use strict";re.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("../../plots/domain").defaults,e=v("../../plots/array_container_defaults"),r=v("../../plots/cartesian/axes"),n=v("./attributes"),a=v("./axisbrush"),t=v("./constants").maxDimensionCount,p=v("./merge_length");function s(i,f,c,l){function h(T,_){return g.coerce(i,f,n.dimensions,T,_)}var d=h("values"),o=h("visible");if(d&&d.length||(o=f.visible=!1),o){h("label"),h("tickvals"),h("ticktext"),h("tickformat");var x=h("range");f._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:x},r.setConvert(f._ax,l.layout),h("multiselect");var u=h("constraintrange");u&&(f.constraintrange=a.cleanRanges(u,f))}}re.exports=function(i,f,c,l){function h(T,_){return g.coerce(i,f,n,T,_)}var d=i.dimensions;Array.isArray(d)&&d.length>t&&(g.log("parcoords traces support up to "+t+" dimensions at the moment"),d.splice(t));var o=e(i,f,{name:"dimensions",layout:l,handleItemDefaults:s}),x=function(T,_,w,M,I){var S=I("line.color",w);if(m(T,"line")&&g.isArrayOrTypedArray(S)){if(S.length)return I("line.colorscale"),b(T,_,M,I,{prefix:"line.",cLetter:"c"}),S.length;_.line.color=w}return 1/0}(i,f,c,l,h);y(f,l,h),Array.isArray(o)&&o.length||(f.visible=!1),p(f,o,"values",x);var u={family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};g.coerceFont(h,"labelfont",u),g.coerceFont(h,"tickfont",u),g.coerceFont(h,"rangefont",u),h("labelangle"),h("labelside"),h("unselected.line.color"),h("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(v,re,ne){"use strict";var g=v("../../lib").isTypedArray;ne.convertTypedArray=function(m){return g(m)?Array.prototype.slice.call(m):m},ne.isOrdinal=function(m){return!!m.tickvals},ne.isVisible=function(m){return m.visible||!("visible"in m)}},{"../../lib":515}],905:[function(v,re,ne){"use strict";var g=v("./base_index");g.plot=v("./plot"),re.exports=g},{"./base_index":899,"./plot":909}],906:[function(v,re,ne){"use strict";var g=v("glslify"),m=g(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),b=g(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),y=v("./constants").maxDimensionCount,e=v("../../lib"),r=new Uint8Array(4),n=new Uint8Array(4),a={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function t(o,x,u,T,_){var w=o._gl;w.enable(w.SCISSOR_TEST),w.scissor(x,u,T,_),o.clear({color:[0,0,0,0],depth:1})}function p(o,x,u,T,_,w){var M=w.key;u.drawCompleted||(o.read({x:0,y:0,width:1,height:1,data:r}),u.drawCompleted=!0),function I(S){var R=Math.min(T,_-S*T);0===S&&(window.cancelAnimationFrame(u.currentRafs[M]),delete u.currentRafs[M],t(o,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),u.clearOnly||(w.count=2*R,w.offset=2*S*T,x(w),S*T+R<_&&(u.currentRafs[M]=window.requestAnimationFrame(function(){I(S+1)})),u.drawCompleted=!1)}(0)}function s(o,x){for(var u=new Array(256),T=0;T<256;T++)u[T]=o(T/255).concat(x);return u}function i(o,x){return(o>>>8*x)%256/255}function f(o,x,u){for(var T=new Array(8*x),_=0,w=0;w<x;w++)for(var M=0;M<2;M++)for(var I=0;I<4;I++){var S=4*o+I,R=u[64*w+S];63===S&&0===M&&(R*=-1),T[_++]=R}return T}function c(o){var x="0"+o;return x.substr(x.length-2)}function l(o){return o<y?"p"+c(o+1)+"_"+c(o+4):"colors"}function h(o,x,u,T,_,w,M,I,S,R,O,C,D,B){for(var z=[[],[]],Y=0;Y<64;Y++)z[0][Y]=Y===_?1:0,z[1][Y]=Y===w?1:0;var G=o.lines.canvasOverdrag*B,J=o.domain,te=o.canvasWidth*B,X=o.canvasHeight*B,K=o.pad.l*B,ae=o.pad.b*B,U=o.layoutHeight*B,V=o.layoutWidth*B,q=o.deselectedLines.color,ie=o.deselectedLines.opacity;return e.extendFlat({key:O,resolution:[te,X],viewBoxPos:[(M*=B)+G,I*=B],viewBoxSize:[S*=B,R*=B],i0:_,i1:w,dim0A:z[0].slice(0,16),dim0B:z[0].slice(16,32),dim0C:z[0].slice(32,48),dim0D:z[0].slice(48,64),dim1A:z[1].slice(0,16),dim1B:z[1].slice(16,32),dim1C:z[1].slice(32,48),dim1D:z[1].slice(48,64),drwLayer:C,contextColor:[q[0]/255,q[1]/255,q[2]/255,"auto"!==ie?q[3]*ie:Math.max(1/255,Math.pow(1/o.lines.color.length,1/3))],scissorX:(T===x?0:M+G)+(K-G)+V*J.x[0],scissorWidth:(T===u?te-M+G:S+.5)+(T===x?M+G:0),scissorY:I+ae+U*J.y[0],scissorHeight:R,viewportX:K-G+V*J.x[0],viewportY:ae+U*J.y[0],viewportWidth:te,viewportHeight:X},D)}function d(o){var x=Math.max(0,Math.floor(2047*o[0]),0),u=Math.min(2047,Math.ceil(2047*o[1]),2047);return[Math.min(x,u),Math.max(x,u)]}re.exports=function(o,x){var u,_,w,M,I=x.context,S=x.pick,R=x.regl,O=R._gl,C=O.getParameter(O.ALIASED_LINE_WIDTH_RANGE),D=Math.max(C[0],Math.min(C[1],x.viewModel.plotGlPixelRatio)),B={currentRafs:{},drawCompleted:!0,clearOnly:!1},z=function(X){for(var K={},ae=0;ae<=y;ae+=4)K[l(ae)]=X.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return K}(R),Y=R.texture(a),G=[];te(x);var J=R({profile:!1,blend:{enable:I,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!I,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:R.prop("scissorX"),y:R.prop("scissorY"),width:R.prop("scissorWidth"),height:R.prop("scissorHeight")}},viewport:{x:R.prop("viewportX"),y:R.prop("viewportY"),width:R.prop("viewportWidth"),height:R.prop("viewportHeight")},dither:!1,vert:m,frag:b,primitive:"lines",lineWidth:D,attributes:z,uniforms:{resolution:R.prop("resolution"),viewBoxPos:R.prop("viewBoxPos"),viewBoxSize:R.prop("viewBoxSize"),dim0A:R.prop("dim0A"),dim1A:R.prop("dim1A"),dim0B:R.prop("dim0B"),dim1B:R.prop("dim1B"),dim0C:R.prop("dim0C"),dim1C:R.prop("dim1C"),dim0D:R.prop("dim0D"),dim1D:R.prop("dim1D"),loA:R.prop("loA"),hiA:R.prop("hiA"),loB:R.prop("loB"),hiB:R.prop("hiB"),loC:R.prop("loC"),hiC:R.prop("hiC"),loD:R.prop("loD"),hiD:R.prop("hiD"),palette:Y,contextColor:R.prop("contextColor"),maskTexture:R.prop("maskTexture"),drwLayer:R.prop("drwLayer"),maskHeight:R.prop("maskHeight")},offset:R.prop("offset"),count:R.prop("count")});function te(X){u=X.model,_=X.viewModel.dimensions.slice(),w=_[0]?_[0].values.length:0;var K=u.lines,ae=S?K.color.map(function(V,q){return q/K.color.length}):K.color,U=function(V,q,ie){for(var ee=new Array(V*(y+4)),Q=0,oe=0;oe<V;oe++){for(var le=0;le<y;le++)ee[Q++]=le<q.length?q[le].paddedUnitValues[oe]:.5;ee[Q++]=i(oe,2),ee[Q++]=i(oe,1),ee[Q++]=i(oe,0),ee[Q++]=Math.max(1e-6,Math.min(.999999,ie[oe]))}return ee}(w,_,ae);(function(V,q,ie){for(var H=0;H<=y;H+=4)V[l(H)](f(H/4,q,ie))})(z,w,U),I||S||(Y=R.texture(e.extendFlat({data:s(u.unitToColor,255)},a)))}return{render:function(X,K,ae){var U,V,q,ie=X.length,H=1/0,ee=-1/0;for(U=0;U<ie;U++)X[U].dim0.canvasX<H&&(H=X[U].dim0.canvasX,V=U),X[U].dim1.canvasX>ee&&(ee=X[U].dim1.canvasX,q=U);0===ie&&t(R,0,0,u.canvasWidth,u.canvasHeight);var Q=function(Ae){var ze,ve,Te,Ie=[[],[]];for(Te=0;Te<64;Te++){var De=!Ae&&Te<_.length?_[Te].brush.filter.getBounds():[-1/0,1/0];Ie[0][Te]=De[0],Ie[1][Te]=De[1]}var Fe=new Array(16384);for(ze=0;ze<16384;ze++)Fe[ze]=255;if(!Ae)for(ze=0;ze<_.length;ze++){var Ue=ze%8,qe=(ze-Ue)/8,je=Math.pow(2,Ue),rt=_[ze].brush.filter.get();if(!(rt.length<2)){var Ne=d(rt[0])[1];for(ve=1;ve<rt.length;ve++){var Be=d(rt[ve]);for(Te=Ne+1;Te<Be[0];Te++)Fe[8*Te+qe]&=~je;Ne=Math.max(Ne,Be[1])}}}var We={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Fe};return M?M(We):M=R.texture(We),{maskTexture:M,maskHeight:2048,loA:Ie[0].slice(0,16),loB:Ie[0].slice(16,32),loC:Ie[0].slice(32,48),loD:Ie[0].slice(48,64),hiA:Ie[1].slice(0,16),hiB:Ie[1].slice(16,32),hiC:Ie[1].slice(32,48),hiD:Ie[1].slice(48,64)}}(I);for(U=0;U<ie;U++){var oe=X[U],le=oe.dim0.crossfilterDimensionIndex,de=oe.dim1.crossfilterDimensionIndex,fe=oe.canvasX,be=oe.canvasY,he=fe+oe.panelSizeX,_e=oe.plotGlPixelRatio;if(K||!G[le]||G[le][0]!==fe||G[le][1]!==he){G[le]=[fe,he];var Ce=h(u,V,q,U,le,de,fe,be,oe.panelSizeX,oe.panelSizeY,oe.dim0.crossfilterDimensionIndex,I?0:S?2:1,Q,_e);B.clearOnly=ae,p(R,J,B,K?u.lines.blockLineCount:w,w,Ce)}}},readPixel:function(X,K){return R.read({x:X,y:K,width:1,height:1,data:n}),n},readPixels:function(X,K,ae,U){var V=new Uint8Array(4*ae*U);return R.read({x:X,y:K,width:ae,height:U,data:V}),V},destroy:function(){for(var X in o.style["pointer-events"]="none",Y.destroy(),M&&M.destroy(),z)z[X].destroy()},update:te}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y){var e,r;for(y||(y=1/0),e=0;e<m.length;e++)(r=m[e]).visible&&(y=Math.min(y,r[b].length));for(y===1/0&&(y=0),g._length=y,e=0;e<m.length;e++)(r=m[e]).visible&&(r._length=y);return y}},{}],908:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=m.numberFormat,y=v("color-rgba"),e=v("../../plots/cartesian/axes"),r=m.strRotate,n=m.strTranslate,a=v("../../lib/svg_text_utils"),t=v("../../components/drawing"),p=v("../../components/colorscale"),s=v("../../lib/gup"),i=s.keyFun,f=s.repeat,c=s.unwrap,l=v("./helpers"),h=v("./constants"),d=v("./axisbrush"),o=v("./lines");function x(G,J,te){return m.aggNums(G,null,J,te)}function u(G,J){return _(x(Math.min,G,J),x(Math.max,G,J))}function T(G){var J=G.range;return J?_(J[0],J[1]):u(G.values,G._length)}function _(G,J){return!isNaN(G)&&isFinite(G)||(G=0),!isNaN(J)&&isFinite(J)||(J=0),G===J&&(0===G?(G-=1,J+=1):(G*=.9,J*=1.1)),[G,J]}function w(G,J,te,X,K){var ae,U,V=T(te);return X?g.scale.ordinal().domain(X.map((ae=b(te.tickformat),U=K,U?function(q,ie){return U[ie]??ae(q)}:ae))).range(X.map(function(q){return G-J+(q-V[0])/(V[1]-V[0])*(2*J-G)})):g.scale.linear().domain(V).range([G-J,J])}function M(G){if(G.tickvals){var J=T(G);return g.scale.ordinal().domain(G.tickvals).range(G.tickvals.map(function(te){return(te-J[0])/(J[1]-J[0])}))}}function I(G){var J=G.map(function(K){return K[0]}),te=G.map(function(K){var ae=y(K[1]);return g.rgb("rgb("+ae[0]+","+ae[1]+","+ae[2]+")")}),X="rgb".split("").map(function(K){return g.scale.linear().clamp(!0).domain(J).range(te.map((ae=K,function(U){return U[ae]})));var ae});return function(K){return X.map(function(ae){return ae(K)})}}function S(G){return G.dimensions.some(function(J){return J.brush.filterSpecified})}function R(G,J,te){var X=c(J),K=X.trace,ae=l.convertTypedArray(X.lineColor),U=K.line,V={color:y(K.unselected.line.color),opacity:K.unselected.line.opacity},q=p.extractOpts(U),ie=q.reversescale?p.flipScale(X.cscale):X.cscale,H=K.domain,ee=K.dimensions,Q=G.width,oe=K.labelangle,le=K.labelside,de=K.labelfont,fe=K.tickfont,be=K.rangefont,he=m.extendDeepNoArrays({},U,{color:ae.map(g.scale.linear().domain(T({values:ae,range:[q.min,q.max],_length:K._length}))),blockLineCount:h.blockLineCount,canvasOverdrag:h.overdrag*h.canvasPixelRatio}),_e=Math.floor(Q*(H.x[1]-H.x[0])),Ce=Math.floor(G.height*(H.y[1]-H.y[0])),Ee=G.margin||{l:80,r:80,t:100,b:80},Ae=_e,ze=Ce;return{key:te,colCount:ee.filter(l.isVisible).length,dimensions:ee,tickDistance:h.tickDistance,unitToColor:I(ie),lines:he,deselectedLines:V,labelAngle:oe,labelSide:le,labelFont:de,tickFont:fe,rangeFont:be,layoutWidth:Q,layoutHeight:G.height,domain:H,translateX:H.x[0]*Q,translateY:G.height-H.y[1]*G.height,pad:Ee,canvasWidth:Ae*h.canvasPixelRatio+2*he.canvasOverdrag,canvasHeight:ze*h.canvasPixelRatio,width:Ae,height:ze,canvasPixelRatio:h.canvasPixelRatio}}function O(G,J,te){var Q,oe,X=te.width,K=te.height,ae=te.dimensions,U=te.canvasPixelRatio,V=function(Q){return X*Q/Math.max(1,te.colCount-1)},q=h.verticalPadding/K,ie=(Q=K,oe=h.verticalPadding,g.scale.linear().range([oe,Q-oe])),H={key:te.key,xScale:V,model:te,inBrushDrag:!1},ee={};return H.dimensions=ae.filter(l.isVisible).map(function(Q,oe){var Fe,Ue,le=(Fe=Q,Ue=q,g.scale.linear().domain(T(Fe)).range([Ue,1-Ue])),de=ee[Q.label];ee[Q.label]=(de||0)+1;var fe=Q.label+(de?"__"+de:""),be=Q.constraintrange,he=be&&be.length;he&&!Array.isArray(be[0])&&(be=[be]);var _e=he?be.map(function(Fe){return Fe.map(le)}):[[-1/0,1/0]],Ce=Q.values;Ce.length>Q._length&&(Ce=Ce.slice(0,Q._length));var Ee,Ae=Q.tickvals;function ze(Fe,Ue){return{val:Fe,text:Ee[Ue]}}function ve(Fe,Ue){return Fe.val-Ue.val}if(Array.isArray(Ae)&&Ae.length){Ee=Q.ticktext,Array.isArray(Ee)&&Ee.length?Ee.length>Ae.length?Ee=Ee.slice(0,Ae.length):Ae.length>Ee.length&&(Ae=Ae.slice(0,Ee.length)):Ee=Ae.map(b(Q.tickformat));for(var Te=1;Te<Ae.length;Te++)if(Ae[Te]<Ae[Te-1]){for(var Ie=Ae.map(ze).sort(ve),De=0;De<Ae.length;De++)Ae[De]=Ie[De].val,Ee[De]=Ie[De].text;break}}else Ae=void 0;return Ce=l.convertTypedArray(Ce),{key:fe,label:Q.label,tickFormat:Q.tickformat,tickvals:Ae,ticktext:Ee,ordinal:l.isOrdinal(Q),multiselect:Q.multiselect,xIndex:oe,crossfilterDimensionIndex:oe,visibleIndex:Q._index,height:K,values:Ce,paddedUnitValues:Ce.map(le),unitTickvals:Ae&&Ae.map(le),xScale:V,x:V(oe),canvasX:V(oe)*U,unitToPaddedPx:ie,domainScale:w(K,h.verticalPadding,Q,Ae,Ee),ordinalScale:M(Q),parent:H,model:te,brush:d.makeBrush(G,he,_e,function(){G.linePickActive(!1)},function(){var Fe=H;Fe.focusLayer&&Fe.focusLayer.render(Fe.panels,!0);var Ue=S(Fe);!G.contextShown()&&Ue?(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0),G.contextShown(!0)):G.contextShown()&&!Ue&&(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0,!0),G.contextShown(!1))},function(Fe){if(H.focusLayer.render(H.panels,!0),H.pickLayer&&H.pickLayer.render(H.panels,!0),G.linePickActive(!0),J&&J.filterChanged){var Ue=le.invert,qe=Fe.map(function(je){return je.map(Ue).sort(m.sorterAsc)}).sort(function(je,rt){return je[0]-rt[0]});J.filterChanged(H.key,Q._index,qe)}})}}),H}function C(G){G.classed(h.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function D(G,J){var X=G*Math.PI/180;return{dir:"top"===J?1:-1,dx:Math.sin(X),dy:Math.cos(X),degrees:G}}function B(G,J,te){for(var X=J.panels||(J.panels=[]),K=G.data(),ae=0;ae<K.length-1;ae++){var U=X[ae]||(X[ae]={}),V=K[ae],q=K[ae+1];U.dim0=V,U.dim1=q,U.canvasX=V.canvasX,U.panelSizeX=q.canvasX-V.canvasX,U.panelSizeY=J.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=te}}function z(G,J){return e.tickText(G._ax,J,!1).text}function Y(G,J){if(G.ordinal)return"";var te=G.domainScale.domain();return z(G.model.dimensions[G.visibleIndex],te[J?te.length-1:0])}re.exports=function(G,J,te,X){var K=G._fullLayout,ae=K._toppaper,U=K._glcontainer,V=G._context.plotGlPixelRatio,q=G._fullLayout.paper_bgcolor;!function(De){for(var Fe=0;Fe<De.length;Fe++)for(var Ue=0;Ue<De[Fe].length;Ue++)for(var qe=De[Fe][Ue].trace,je=qe.dimensions,rt=0;rt<je.length;rt++){var Ne=je[rt].values,Be=je[rt]._ax;Be&&(Be.range=Be.range?_(Be.range[0],Be.range[1]):u(Ne,qe._length),Be.dtick||(Be.dtick=.01*(Math.abs(Be.range[1]-Be.range[0])||1)),Be.tickformat=je[rt].tickformat,e.calcTicks(Be),Be.cleanRange())}}(J);var ie,H,ee=(ie=!0,H=!1,{linePickActive:function(De){return arguments.length?ie=!!De:ie},contextShown:function(De){return arguments.length?H=!!De:H}}),Q=J.filter(function(De){return c(De).trace.visible}).map(R.bind(0,te)).map(O.bind(0,ee,X));U.each(function(De,Fe){return m.extendFlat(De,Q[Fe])});var oe=U.selectAll(".gl-canvas").each(function(De){De.viewModel=Q[0],De.viewModel.plotGlPixelRatio=V,De.viewModel.paperColor=q,De.model=De.viewModel?De.viewModel.model:null}),le=null;oe.filter(function(De){return De.pick}).style("pointer-events","auto").on("mousemove",function(De){if(ee.linePickActive()&&De.lineLayer&&X&&X.hover){var Fe=g.event,Ue=this.width,qe=this.height,je=g.mouse(this),rt=je[0],Ne=je[1];if(rt<0||Ne<0||rt>=Ue||Ne>=qe)return;var Be=De.lineLayer.readPixel(rt,qe-1-Ne),We=0!==Be[3],Ye=We?Be[2]+256*(Be[1]+256*Be[0]):null,lt={x:rt,y:Ne,clientX:Fe.clientX,clientY:Fe.clientY,dataIndex:De.model.key,curveNumber:Ye};Ye!==le&&(We?X.hover(lt):X.unhover&&X.unhover(lt),le=Ye)}}),oe.style("opacity",function(De){return De.pick?0:1}),ae.style("background","rgba(255, 255, 255, 0)");var de=ae.selectAll("."+h.cn.parcoords).data(Q,i);de.exit().remove(),de.enter().append("g").classed(h.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(De){return n(De.model.translateX,De.model.translateY)});var fe=de.selectAll("."+h.cn.parcoordsControlView).data(f,i);fe.enter().append("g").classed(h.cn.parcoordsControlView,!0),fe.attr("transform",function(De){return n(De.model.pad.l,De.model.pad.t)});var be=fe.selectAll("."+h.cn.yAxis).data(function(De){return De.dimensions},i);be.enter().append("g").classed(h.cn.yAxis,!0),fe.each(function(De){B(be,De,V)}),oe.each(function(De){De.viewModel&&(!De.lineLayer||X?De.lineLayer=o(this,De):De.lineLayer.update(De),(De.key||0===De.key)&&(De.viewModel[De.key]=De.lineLayer),De.lineLayer.render(De.viewModel.panels,!De.context||X))}),be.attr("transform",function(De){return n(De.xScale(De.xIndex),0)}),be.call(g.behavior.drag().origin(function(De){return De}).on("drag",function(De){var Fe=De.parent;ee.linePickActive(!1),De.x=Math.max(-h.overdrag,Math.min(De.model.width+h.overdrag,g.event.x)),De.canvasX=De.x*De.model.canvasPixelRatio,be.sort(function(Ue,qe){return Ue.x-qe.x}).each(function(Ue,qe){Ue.xIndex=qe,Ue.x=De===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),B(be,Fe,V),be.filter(function(Ue){return 0!==Math.abs(De.xIndex-Ue.xIndex)}).attr("transform",function(Ue){return n(Ue.xScale(Ue.xIndex),0)}),g.select(this).attr("transform",n(De.x,0)),be.each(function(Ue,qe,je){je===De.parent.key&&(Fe.dimensions[qe]=Ue)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!S(Fe)),Fe.focusLayer.render&&Fe.focusLayer.render(Fe.panels)}).on("dragend",function(De){var Fe=De.parent;De.x=De.xScale(De.xIndex),De.canvasX=De.x*De.model.canvasPixelRatio,B(be,Fe,V),g.select(this).attr("transform",function(Ue){return n(Ue.x,0)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!S(Fe)),Fe.focusLayer&&Fe.focusLayer.render(Fe.panels),Fe.pickLayer&&Fe.pickLayer.render(Fe.panels,!0),ee.linePickActive(!0),X&&X.axesMoved&&X.axesMoved(Fe.key,Fe.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),be.exit().remove();var he=be.selectAll("."+h.cn.axisOverlays).data(f,i);he.enter().append("g").classed(h.cn.axisOverlays,!0),he.selectAll("."+h.cn.axis).remove();var _e=he.selectAll("."+h.cn.axis).data(f,i);_e.enter().append("g").classed(h.cn.axis,!0),_e.each(function(De){var Fe=De.model.height/De.model.tickDistance,Ue=De.domainScale,qe=Ue.domain();g.select(this).call(g.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Fe,De.tickFormat).tickValues(De.ordinal?qe:null).tickFormat(function(je){return l.isOrdinal(De)?je:z(De.model.dimensions[De.visibleIndex],je)}).scale(Ue)),t.font(_e.selectAll("text"),De.model.tickFont)}),_e.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),_e.selectAll("text").style("text-shadow",a.makeTextShadow(q)).style("cursor","default");var Ce=he.selectAll("."+h.cn.axisHeading).data(f,i);Ce.enter().append("g").classed(h.cn.axisHeading,!0);var Ee=Ce.selectAll("."+h.cn.axisTitle).data(f,i);Ee.enter().append("text").classed(h.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Ee.text(function(De){return De.label}).each(function(De){var Fe=g.select(this);t.font(Fe,De.model.labelFont),a.convertToTspans(Fe,G)}).attr("transform",function(De){var Fe=D(De.model.labelAngle,De.model.labelSide),Ue=h.axisTitleOffset;return(Fe.dir>0?"":n(0,2*Ue+De.model.height))+r(Fe.degrees)+n(-Ue*Fe.dx,-Ue*Fe.dy)}).attr("text-anchor",function(De){var Fe=D(De.model.labelAngle,De.model.labelSide);return 2*Math.abs(Fe.dx)>Math.abs(Fe.dy)?Fe.dir*Fe.dx<0?"start":"end":"middle"});var Ae=he.selectAll("."+h.cn.axisExtent).data(f,i);Ae.enter().append("g").classed(h.cn.axisExtent,!0);var ze=Ae.selectAll("."+h.cn.axisExtentTop).data(f,i);ze.enter().append("g").classed(h.cn.axisExtentTop,!0),ze.attr("transform",n(0,-h.axisExtentOffset));var ve=ze.selectAll("."+h.cn.axisExtentTopText).data(f,i);ve.enter().append("text").classed(h.cn.axisExtentTopText,!0).call(C),ve.text(function(De){return Y(De,!0)}).each(function(De){t.font(g.select(this),De.model.rangeFont)});var Te=Ae.selectAll("."+h.cn.axisExtentBottom).data(f,i);Te.enter().append("g").classed(h.cn.axisExtentBottom,!0),Te.attr("transform",function(De){return n(0,De.model.height+h.axisExtentOffset)});var Ie=Te.selectAll("."+h.cn.axisExtentBottomText).data(f,i);Ie.enter().append("text").classed(h.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(C),Ie.text(function(De){return Y(De,!1)}).each(function(De){t.font(g.select(this),De.model.rangeFont)}),d.ensureAxisBrush(he,q)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(v,re,ne){"use strict";var g=v("./parcoords"),m=v("../../lib/prepare_regl"),b=v("./helpers").isVisible,y={};function e(r,n,a){var t=n.indexOf(a),p=r.indexOf(t);return-1===p&&(p+=n.length),p}(re.exports=function(r,n){var a=r._fullLayout;if(m(r,[],y)){var t={},p={},s={},i={},f=a._size;n.forEach(function(c,l){var h=c[0].trace;s[l]=h.index;var d=i[l]=h._fullInput.index;t[l]=r.data[d].dimensions,p[l]=r.data[d].dimensions.slice()}),g(r,n,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},{filterChanged:function(c,l,h){var d=p[c][l],o=h.map(function(M){return M.slice()}),x="dimensions["+l+"].constraintrange",u=a._tracePreGUI[r._fullData[s[c]]._fullInput.uid];void 0===u[x]&&(u[x]=d.constraintrange||null);var _=r._fullData[s[c]].dimensions[l];o.length?(1===o.length&&(o=o[0]),d.constraintrange=o,_.constraintrange=o.slice(),o=[o]):(delete d.constraintrange,delete _.constraintrange,o=null);var w={};w[x]=o,r.emit("plotly_restyle",[w,[i[c]]])},hover:function(c){r.emit("plotly_hover",c)},unhover:function(c){r.emit("plotly_unhover",c)},axesMoved:function(c,l){var d,o,h=(d=l,o=p[c].filter(b),function(x,u){return e(d,o,x)-e(d,o,u)});t[c].sort(h),p[c].filter(function(d){return!b(d)}).sort(function(d){return p[c].indexOf(d)}).forEach(function(d){t[c].splice(t[c].indexOf(d),1),t[c].splice(p[c].indexOf(d),0,d)}),r.emit("plotly_restyle",[{dimensions:[t[c]]},[i[c]]])}})}}).reglPrecompiled=y},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(v,re,ne){"use strict";var g=v("../../plots/attributes"),m=v("../../plots/domain").attributes,b=v("../../plots/font_attributes"),y=v("../../components/color/attributes"),e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/template_attributes").texttemplateAttrs,n=v("../../lib/extend").extendFlat,a=b({editType:"plot",arrayOk:!0,colorEditType:"plot"});re.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:y.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},g.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:r({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},a,{}),outsidetextfont:n({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:m({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(v,re,ne){"use strict";var g=v("../../plots/plots");ne.name="pie",ne.plot=function(m,b,y,e){g.plotBasePlot(ne.name,m,b,y,e)},ne.clean=function(m,b,y,e){g.cleanBasePlot(ne.name,m,b,y,e)}},{"../../plots/plots":628}],912:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("tinycolor2"),b=v("../../components/color"),y={};function e(n){return function(a,t){return!!a&&!!(a=m(a)).isValid()&&(a=b.addOpacity(a,a.getAlpha()),n[t]||(n[t]=a),a)}}function r(n,a){var t,p=JSON.stringify(n),s=a[p];if(!s){for(s=n.slice(),t=0;t<n.length;t++)s.push(m(n[t]).lighten(20).toHexString());for(t=0;t<n.length;t++)s.push(m(n[t]).darken(20).toHexString());a[p]=s}return s}re.exports={calc:function(n,a){var t,p,s=[],i=n._fullLayout,f=i.hiddenlabels||[],c=a.labels,l=a.marker.colors||[],h=a.values,d=a._length,o=a._hasValues&&d;if(a.dlabel)for(c=new Array(d),t=0;t<d;t++)c[t]=String(a.label0+t*a.dlabel);var x={},u=e(i["_"+a.type+"colormap"]),T=0,_=!1;for(t=0;t<d;t++){var w,M,I;if(o){if(!g(w=h[t]))continue;w=+w}else w=1;void 0!==(M=c[t])&&""!==M||(M=t);var S=x[M=String(M)];void 0===S?(x[M]=s.length,(I=-1!==f.indexOf(M))||(T+=w),s.push({v:w,label:M,color:u(l[t],M),i:t,pts:[t],hidden:I})):(_=!0,(p=s[S]).v+=w,p.pts.push(t),p.hidden||(T+=w),!1===p.color&&l[t]&&(p.color=u(l[t],M)))}return s=s.filter(function(R){return R.v>=0}),("funnelarea"===a.type?_:a.sort)&&s.sort(function(R,O){return O.v-R.v}),s[0]&&(s[0].vTotal=T),s},crossTraceCalc:function(n,a){var t=(a||{}).type;t||(t="pie");var p=n._fullLayout,s=n.calcdata,i=p[t+"colorway"],f=p["_"+t+"colormap"];p["extend"+t+"colors"]&&(i=r(i,y));for(var c=0,l=0;l<s.length;l++){var h=s[l];if(h[0].trace.type===t)for(var d=0;d<h.length;d++){var o=h[d];!1===o.color&&(f[o.label]?o.color=f[o.label]:(f[o.label]=o.color=i[c%i.length],c++))}}},makePullColorFn:e,generateExtendedColors:r}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("./attributes"),y=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText;function r(n,a){var t=Array.isArray(n),p=m.isArrayOrTypedArray(a),s=Math.min(t?n.length:1/0,p?a.length:1/0);if(isFinite(s)||(s=0),s&&p){for(var i,f=0;f<s;f++){var c=a[f];if(g(c)&&c>0){i=!0;break}}i||(s=0)}return{hasLabels:t,hasValues:p,len:s}}re.exports={handleLabelsAndValues:r,supplyDefaults:function(n,a,t,p){function s(u,T){return m.coerce(n,a,b,u,T)}var i=r(s("labels"),s("values")),f=i.len;if(a._hasLabels=i.hasLabels,a._hasValues=i.hasValues,!a._hasLabels&&a._hasValues&&(s("label0"),s("dlabel")),f){a._length=f,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var c,l=s("text"),h=s("texttemplate");if(h||(c=s("textinfo",Array.isArray(l)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),h||c&&"none"!==c){var d=s("textposition");e(n,a,p,s,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(d)||"auto"===d||"outside"===d)&&s("automargin"),("inside"===d||"auto"===d||Array.isArray(d))&&s("insidetextorientation")}y(a,p,s);var o=s("hole");if(s("title.text")){var x=s("title.position",o?"middle center":"top center");o||"middle center"!==x||(a.title.position="top center"),m.coerceFont(s,"title.font",p.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else a.visible=!1}}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(v,re,ne){"use strict";var g=v("../../components/fx/helpers").appendArrayMultiPointValues;re.exports=function(m,b){var y={curveNumber:b.index,pointNumbers:m.pts,data:b._input,fullData:b,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,bbox:m.bbox,v:m.v};return 1===m.pts.length&&(y.pointNumber=y.i=m.pts[0]),g(y,b,m.pts),"funnelarea"===b.type&&(delete y.v,delete y.i),y}},{"../../components/fx/helpers":403}],915:[function(v,re,ne){"use strict";var g=v("../../lib");function m(b){return-1!==b.indexOf("e")?b.replace(/[.]?0+e/,"e"):-1!==b.indexOf(".")?b.replace(/[.]?0+$/,""):b}ne.formatPiePercent=function(b,y){var e=m((100*b).toPrecision(3));return g.numSeparate(e,y)+"%"},ne.formatPieValue=function(b,y){var e=m(b.toPrecision(10));return g.numSeparate(e,y)},ne.getFirstFilled=function(b,y){if(Array.isArray(b))for(var e=0;e<y.length;e++){var r=b[y[e]];if(r||0===r||""===r)return r}},ne.castOption=function(b,y){return Array.isArray(b)?ne.getFirstFilled(b,y):b||void 0},ne.getRotationAngle=function(b){return("auto"===b?0:b)*Math.PI/180}},{"../../lib":515}],916:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,supplyLayoutDefaults:v("./layout_defaults"),layoutAttributes:v("./layout_attributes"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style"),styleOne:v("./style_one"),moduleType:"trace",name:"pie",basePlotModule:v("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(v,re,ne){"use strict";re.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y){function e(r,n){return g.coerce(b,y,m,r,n)}e("hiddenlabels"),e("piecolorway",y.colorway),e("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../plots/plots"),b=v("../../components/fx"),y=v("../../components/color"),e=v("../../components/drawing"),r=v("../../lib"),n=r.strScale,a=r.strTranslate,t=v("../../lib/svg_text_utils"),p=v("../bar/uniform_text"),s=p.recordMinTextSize,i=p.clearMinTextSize,f=v("../bar/constants").TEXTPAD,c=v("./helpers"),l=v("./event_data"),h=v("../../lib").isValidTextValue;function d(J,te,X){var K=X[0],ae=K.cx,U=K.cy,V=K.trace,q="funnelarea"===V.type;"_hasHoverLabel"in V||(V._hasHoverLabel=!1),"_hasHoverEvent"in V||(V._hasHoverEvent=!1),J.on("mouseover",function(ie){var H=te._fullLayout,ee=te._fullData[V.index];if(!te._dragging&&!1!==H.hovermode){var Q=ee.hoverinfo;if(Array.isArray(Q)&&(Q=b.castHoverinfo({hoverinfo:[c.castOption(Q,ie.pts)],_module:V._module},H,0)),"all"===Q&&(Q="label+text+value+percent+name"),ee.hovertemplate||"none"!==Q&&"skip"!==Q&&Q){var oe=ie.rInscribed||0,le=ae+ie.pxmid[0]*(1-oe),de=U+ie.pxmid[1]*(1-oe),fe=H.separators,be=[];if(Q&&-1!==Q.indexOf("label")&&be.push(ie.label),ie.text=c.castOption(ee.hovertext||ee.text,ie.pts),Q&&-1!==Q.indexOf("text")){var he=ie.text;r.isValidTextValue(he)&&be.push(he)}ie.value=ie.v,ie.valueLabel=c.formatPieValue(ie.v,fe),Q&&-1!==Q.indexOf("value")&&be.push(ie.valueLabel),ie.percent=ie.v/K.vTotal,ie.percentLabel=c.formatPiePercent(ie.percent,fe),Q&&-1!==Q.indexOf("percent")&&be.push(ie.percentLabel);var _e=ee.hoverlabel,Ce=_e.font,Ee=[];b.loneHover({trace:V,x0:le-oe*K.r,x1:le+oe*K.r,y:de,_x0:q?ae+ie.TL[0]:le-oe*K.r,_x1:q?ae+ie.TR[0]:le+oe*K.r,_y0:q?U+ie.TL[1]:de-oe*K.r,_y1:q?U+ie.BL[1]:de+oe*K.r,text:be.join("<br>"),name:ee.hovertemplate||-1!==Q.indexOf("name")?ee.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:c.castOption(_e.bgcolor,ie.pts)||ie.color,borderColor:c.castOption(_e.bordercolor,ie.pts),fontFamily:c.castOption(Ce.family,ie.pts),fontSize:c.castOption(Ce.size,ie.pts),fontColor:c.castOption(Ce.color,ie.pts),nameLength:c.castOption(_e.namelength,ie.pts),textAlign:c.castOption(_e.align,ie.pts),hovertemplate:c.castOption(ee.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[l(ie,ee)]},{container:H._hoverlayer.node(),outerContainer:H._paper.node(),gd:te,inOut_bbox:Ee}),ie.bbox=Ee[0],V._hasHoverLabel=!0}V._hasHoverEvent=!0,te.emit("plotly_hover",{points:[l(ie,ee)],event:g.event})}}),J.on("mouseout",function(ie){var H=te._fullLayout,ee=te._fullData[V.index],Q=g.select(this).datum();V._hasHoverEvent&&(ie.originalEvent=g.event,te.emit("plotly_unhover",{points:[l(Q,ee)],event:g.event}),V._hasHoverEvent=!1),V._hasHoverLabel&&(b.loneUnhover(H._hoverlayer.node()),V._hasHoverLabel=!1)}),J.on("click",function(ie){te._dragging||!1===te._fullLayout.hovermode||(te._hoverdata=[l(ie,te._fullData[V.index])],b.click(te,g.event))})}function o(J,te,X){var K=c.castOption(J.insidetextfont.color,te.pts);!K&&J._input.textfont&&(K=c.castOption(J._input.textfont.color,te.pts));var ae=c.castOption(J.insidetextfont.family,te.pts)||c.castOption(J.textfont.family,te.pts)||X.family,U=c.castOption(J.insidetextfont.size,te.pts)||c.castOption(J.textfont.size,te.pts)||X.size;return{color:K||y.contrast(te.color),family:ae,size:U}}function x(J,te){for(var X,K,ae=0;ae<J.length;ae++)if((K=(X=J[ae][0]).trace).title.text){var U=K.title.text;K._meta&&(U=r.templateString(U,K._meta));var V=e.tester.append("text").attr("data-notex",1).text(U).call(e.font,K.title.font).call(t.convertToTspans,te),q=e.bBox(V.node(),!0);X.titleBox={width:q.width,height:q.height},V.remove()}}function u(J,te,X){var K=X.r||te.rpx1,ae=te.rInscribed;if(te.startangle===te.stopangle)return{rCenter:1-ae,scale:0,rotate:0,textPosAngle:0};var U,V=te.ring,q=1===V&&Math.abs(te.startangle-te.stopangle)===2*Math.PI,ie=te.halfangle,H=te.midangle,ee=X.trace.insidetextorientation,Q="horizontal"===ee,oe="tangential"===ee,le="radial"===ee,de="auto"===ee,fe=[];if(!de){var be,he=function(ve,Te){if(rt=(Ue=te).stopangle,(je=Ue.startangle)>(qe=ve)&&qe>rt||je<qe&&qe<rt){var Ie=Math.abs(ve-te.startangle),De=Math.abs(ve-te.stopangle),Fe=Ie<De?Ie:De;(U="tan"===Te?_(J,K,V,Fe,0):T(J,K,V,Fe,Math.PI/2)).textPosAngle=ve,fe.push(U)}var Ue,qe,je,rt};if(Q||oe){for(be=4;be>=-4;be-=2)he(Math.PI*be,"tan");for(be=4;be>=-4;be-=2)he(Math.PI*(be+1),"tan")}if(Q||le){for(be=4;be>=-4;be-=2)he(Math.PI*(be+1.5),"rad");for(be=4;be>=-4;be-=2)he(Math.PI*(be+.5),"rad")}}if(q||de||Q){var _e=Math.sqrt(J.width*J.width+J.height*J.height);if((U={scale:ae*K*2/_e,rCenter:1-ae,rotate:0}).textPosAngle=(te.startangle+te.stopangle)/2,U.scale>=1)return U;fe.push(U)}(de||le)&&((U=T(J,K,V,ie,H)).textPosAngle=(te.startangle+te.stopangle)/2,fe.push(U)),(de||oe)&&((U=_(J,K,V,ie,H)).textPosAngle=(te.startangle+te.stopangle)/2,fe.push(U));for(var Ce=0,Ee=0,Ae=0;Ae<fe.length;Ae++){var ze=fe[Ae].scale;if(Ee<ze&&(Ee=ze,Ce=Ae),!de&&Ee>=1)break}return fe[Ce]}function T(J,te,X,K,ae){te=Math.max(0,te-2*f);var U=J.width/J.height,V=I(U,K,te,X);return{scale:2*V/J.height,rCenter:w(U,V/te),rotate:M(ae)}}function _(J,te,X,K,ae){te=Math.max(0,te-2*f);var U=J.height/J.width,V=I(U,K,te,X);return{scale:2*V/J.width,rCenter:w(U,V/te),rotate:M(ae+Math.PI/2)}}function w(J,te){return Math.cos(te)-J*te}function M(J){return(180/Math.PI*J+720)%180-90}function I(J,te,X,K){var ae=J+1/(2*Math.tan(te));return X*Math.min(1/(Math.sqrt(ae*ae+.5)+ae),K/(Math.sqrt(J*J+K/2)+J))}function S(J,te){return J.v!==te.vTotal||te.trace.hole?Math.min(1/(1+1/Math.sin(J.halfangle)),J.ring/2):1}function R(J,te){var X=te.pxmid[0],K=te.pxmid[1],ae=J.width/2,U=J.height/2;return X<0&&(ae*=-1),K<0&&(U*=-1),{scale:1,rCenter:1,rotate:0,x:ae+Math.abs(U)*(ae>0?1:-1)/2,y:U/(1+X*X/(K*K)),outside:!0}}function O(J,te){var X,K,ae,U=J.trace,V={x:J.cx,y:J.cy},q={tx:0,ty:0};q.ty+=U.title.font.size,ae=D(U),-1!==U.title.position.indexOf("top")?(V.y-=(1+ae)*J.r,q.ty-=J.titleBox.height):-1!==U.title.position.indexOf("bottom")&&(V.y+=(1+ae)*J.r);var H,ee=J.r/(void 0===(H=J.trace.aspectratio)?1:H),Q=te.w*(U.domain.x[1]-U.domain.x[0])/2;return-1!==U.title.position.indexOf("left")?(Q+=ee,V.x-=(1+ae)*ee,q.tx+=J.titleBox.width/2):-1!==U.title.position.indexOf("center")?Q*=2:-1!==U.title.position.indexOf("right")&&(Q+=ee,V.x+=(1+ae)*ee,q.tx-=J.titleBox.width/2),X=Q/J.titleBox.width,K=C(J,te)/J.titleBox.height,{x:V.x,y:V.y,scale:Math.min(X,K),tx:q.tx,ty:q.ty}}function C(J,te){var X=J.trace;return Math.min(J.titleBox.height,te.h*(X.domain.y[1]-X.domain.y[0])/2)}function D(J){var te,X=J.pull;if(!X)return 0;if(Array.isArray(X))for(X=0,te=0;te<J.pull.length;te++)J.pull[te]>X&&(X=J.pull[te]);return X}function B(J,te){for(var X=[],K=0;K<J.length;K++){var ae=J[K][0],U=ae.trace,V=U.domain,q=te.w*(V.x[1]-V.x[0]),ie=te.h*(V.y[1]-V.y[0]);U.title.text&&"middle center"!==U.title.position&&(ie-=C(ae,te));var ee=ie/2;"funnelarea"!==U.type||U.scalegroup||(ee/=U.aspectratio),ae.r=Math.min(q/2,ee)/(1+D(U)),ae.cx=te.l+te.w*(U.domain.x[1]+U.domain.x[0])/2,ae.cy=te.t+te.h*(1-U.domain.y[0])-ie/2,U.title.text&&-1!==U.title.position.indexOf("bottom")&&(ae.cy-=C(ae,te)),U.scalegroup&&-1===X.indexOf(U.scalegroup)&&X.push(U.scalegroup)}!function(Q,oe){for(var le,de,fe,be=0;be<oe.length;be++){var he=1/0,_e=oe[be];for(de=0;de<Q.length;de++)if((fe=(le=Q[de][0]).trace).scalegroup===_e){var Ce;if("pie"===fe.type)Ce=le.r*le.r;else if("funnelarea"===fe.type){var Ee,Ae;fe.aspectratio>1?Ae=(Ee=le.r)/fe.aspectratio:Ee=(Ae=le.r)*fe.aspectratio,Ce=(Ee*=(1+fe.baseratio)/2)*Ae}he=Math.min(he,Ce/le.vTotal)}for(de=0;de<Q.length;de++)if((fe=(le=Q[de][0]).trace).scalegroup===_e){var ze=he*le.vTotal;"funnelarea"===fe.type&&(ze/=(1+fe.baseratio)/2,ze/=fe.aspectratio),le.r=Math.sqrt(ze)}}}(J,X)}function z(J,te){return[J*Math.sin(te),-J*Math.cos(te)]}function Y(J,te,X){var Ce,K=J._fullLayout,ae=X.trace,U=ae.texttemplate,V=ae.textinfo;if(!U&&V&&"none"!==V){var q,ie=V.split("+"),H=function(Ce){return-1!==ie.indexOf(Ce)},ee=H("label"),Q=H("text"),oe=H("value"),le=H("percent"),de=K.separators;if(q=ee?[te.label]:[],Q){var fe=c.getFirstFilled(ae.text,te.pts);h(fe)&&q.push(fe)}oe&&q.push(c.formatPieValue(te.v,de)),le&&q.push(c.formatPiePercent(te.v/X.vTotal,de)),te.text=q.join("<br>")}if(U){var be=r.castOption(ae,te.i,"texttemplate");if(be){var he={label:(Ce=te).label,value:Ce.v,valueLabel:c.formatPieValue(Ce.v,K.separators),percent:Ce.v/X.vTotal,percentLabel:c.formatPiePercent(Ce.v/X.vTotal,K.separators),color:Ce.color,text:Ce.text,customdata:r.castOption(ae,Ce.i,"customdata")},_e=c.getFirstFilled(ae.text,te.pts);(h(_e)||""===_e)&&(he.text=_e),te.text=r.texttemplateString(be,he,J._fullLayout._d3locale,he,ae._meta||{})}else te.text=""}}function G(J,te){var X=J.rotate*Math.PI/180,K=Math.cos(X),ae=Math.sin(X),U=(te.left+te.right)/2,V=(te.top+te.bottom)/2;J.textX=U*K-V*ae,J.textY=U*ae+V*K,J.noCenter=!0}re.exports={plot:function(J,te){var X=J._fullLayout,K=X._size;i("pie",X),x(te,J),B(te,K);var ae=r.makeTraceGroups(X._pielayer,te,"trace").each(function(U){var V=g.select(this),q=U[0],ie=q.trace;(function(H){var ee,Q,oe,le=H[0],de=le.r,fe=le.trace,be=c.getRotationAngle(fe.rotation),he=2*Math.PI/le.vTotal,_e="px0",Ce="px1";if("counterclockwise"===fe.direction){for(ee=0;ee<H.length&&H[ee].hidden;ee++);if(ee===H.length)return;be+=he*H[ee].v,he*=-1,_e="px1",Ce="px0"}for(oe=z(de,be),ee=0;ee<H.length;ee++)(Q=H[ee]).hidden||(Q[_e]=oe,Q.startangle=be,Q.pxmid=z(de,be+=he*Q.v/2),Q.midangle=be,oe=z(de,be+=he*Q.v/2),Q.stopangle=be,Q[Ce]=oe,Q.largeArc=Q.v>le.vTotal/2?1:0,Q.halfangle=Math.PI*Math.min(Q.v/le.vTotal,.5),Q.ring=1-fe.hole,Q.rInscribed=S(Q,le))})(U),V.attr("stroke-linejoin","round"),V.each(function(){var H=g.select(this).selectAll("g.slice").data(U);H.enter().append("g").classed("slice",!0),H.exit().remove();var ee=[[[],[]],[[],[]]],Q=!1;H.each(function(Ce,Ee){if(Ce.hidden)g.select(this).selectAll("path,g").remove();else{Ce.pointNumber=Ce.i,Ce.curveNumber=ie.index,ee[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var Ae=q.cx,ze=q.cy,ve=g.select(this),Te=ve.selectAll("path.surface").data([Ce]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),ve.call(d,J,U),ie.pull){var Ie=+c.castOption(ie.pull,Ce.pts)||0;Ie>0&&(Ae+=Ie*Ce.pxmid[0],ze+=Ie*Ce.pxmid[1])}Ce.cxFinal=Ae,Ce.cyFinal=ze;var De=ie.hole;if(Ce.v===q.vTotal){var Fe="M"+(Ae+Ce.px0[0])+","+(ze+Ce.px0[1])+Ne(Ce.px0,Ce.pxmid,!0,1)+Ne(Ce.pxmid,Ce.px0,!0,1)+"Z";Te.attr("d",De?"M"+(Ae+De*Ce.px0[0])+","+(ze+De*Ce.px0[1])+Ne(Ce.px0,Ce.pxmid,!1,De)+Ne(Ce.pxmid,Ce.px0,!1,De)+"Z"+Fe:Fe)}else{var Ue=Ne(Ce.px0,Ce.px1,!0,1);if(De){var qe=1-De;Te.attr("d","M"+(Ae+De*Ce.px1[0])+","+(ze+De*Ce.px1[1])+Ne(Ce.px1,Ce.px0,!1,De)+"l"+qe*Ce.px0[0]+","+qe*Ce.px0[1]+Ue+"Z")}else Te.attr("d","M"+Ae+","+ze+"l"+Ce.px0[0]+","+Ce.px0[1]+Ue+"Z")}Y(J,Ce,q);var je=c.castOption(ie.textposition,Ce.pts),rt=ve.selectAll("g.slicetext").data(Ce.text&&"none"!==je?[0]:[]);rt.enter().append("g").classed("slicetext",!0),rt.exit().remove(),rt.each(function(){var ct,at,St,Be=r.ensureSingle(g.select(this),"text","",function(ct){ct.attr("data-notex",1)}),We=r.ensureUniformFontSize(J,"outside"===je?(St=X.font,{color:c.castOption((ct=ie).outsidetextfont.color,(at=Ce).pts)||c.castOption(ct.textfont.color,at.pts)||St.color,family:c.castOption(ct.outsidetextfont.family,at.pts)||c.castOption(ct.textfont.family,at.pts)||St.family,size:c.castOption(ct.outsidetextfont.size,at.pts)||c.castOption(ct.textfont.size,at.pts)||St.size}):o(ie,Ce,X.font));Be.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,We).call(t.convertToTspans,J);var Ye,lt=e.bBox(Be.node());if("outside"===je)Ye=R(lt,Ce);else if(Ye=u(lt,Ce,q),"auto"===je&&Ye.scale<1){var mt=r.ensureUniformFontSize(J,ie.outsidetextfont);Be.call(e.font,mt),Ye=R(lt=e.bBox(Be.node()),Ce)}var Tt=Ye.textPosAngle,It=void 0===Tt?Ce.pxmid:z(q.r,Tt);if(Ye.targetX=Ae+It[0]*Ye.rCenter+(Ye.x||0),Ye.targetY=ze+It[1]*Ye.rCenter+(Ye.y||0),G(Ye,lt),Ye.outside){var Ct=Ye.targetY;Ce.yLabelMin=Ct-lt.height/2,Ce.yLabelMid=Ct,Ce.yLabelMax=Ct+lt.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,Q=!0}Ye.fontSize=We.size,s(ie.type,Ye,X),U[Ee].transform=Ye,Be.attr("transform",r.getTextTransform(Ye))})}function Ne(Be,We,Ye,lt){return"a"+lt*q.r+","+lt*q.r+" 0 "+Ce.largeArc+(Ye?" 1 ":" 0 ")+lt*(We[0]-Be[0])+","+lt*(We[1]-Be[1])}});var Ee,oe=g.select(this).selectAll("g.titletext").data(ie.title.text?[0]:[]);if(oe.enter().append("g").classed("titletext",!0),oe.exit().remove(),oe.each(function(){var Ce,ze,ve,Ee=r.ensureSingle(g.select(this),"text","",function(ze){ze.attr("data-notex",1)}),Ae=ie.title.text;ie._meta&&(Ae=r.templateString(Ae,ie._meta)),Ee.text(Ae).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ie.title.font).call(t.convertToTspans,J),Ce="middle center"===ie.title.position?(ze=q,ve=Math.sqrt(ze.titleBox.width*ze.titleBox.width+ze.titleBox.height*ze.titleBox.height),{x:ze.cx,y:ze.cy,scale:ze.trace.hole*ze.r*2/ve,tx:0,ty:-ze.titleBox.height/2+ze.trace.title.font.size}):O(q,K),Ee.attr("transform",a(Ce.x,Ce.y)+n(Math.min(1,Ce.scale))+a(Ce.tx,Ce.ty))}),Q&&function(Ce,Ee){var Ae,ze,ve,Te,Ie,De,Fe,Ue,qe,je,rt,Ne,Be;function We(Tt,It){return Tt.pxmid[1]-It.pxmid[1]}function Ye(Tt,It){return It.pxmid[1]-Tt.pxmid[1]}function lt(Tt,It){It||(It={});var Ct,ct,at,St,Xt=It.labelExtraY+(ze?It.yLabelMax:It.yLabelMin),tn=ze?Tt.yLabelMin:Tt.yLabelMax,hn=ze?Tt.yLabelMax:Tt.yLabelMin,cn=Tt.cyFinal+Ie(Tt.px0[1],Tt.px1[1]),yn=Xt-tn;if(yn*Fe>0&&(Tt.labelExtraY=yn),Array.isArray(Ee.pull))for(ct=0;ct<je.length;ct++)(at=je[ct])===Tt||(c.castOption(Ee.pull,Tt.pts)||0)>=(c.castOption(Ee.pull,at.pts)||0)||((Tt.pxmid[1]-at.pxmid[1])*Fe>0?(yn=at.cyFinal+Ie(at.px0[1],at.px1[1])-tn-Tt.labelExtraY)*Fe>0&&(Tt.labelExtraY+=yn):(hn+Tt.labelExtraY-cn)*Fe>0&&(Ct=3*De*Math.abs(ct-je.indexOf(Tt)),(St=at.cxFinal+Te(at.px0[0],at.px1[0])+Ct-(Tt.cxFinal+Tt.pxmid[0])-Tt.labelExtraX)*De>0&&(Tt.labelExtraX+=St)))}for(ze=0;ze<2;ze++)for(ve=ze?We:Ye,Ie=ze?Math.max:Math.min,Fe=ze?1:-1,Ae=0;Ae<2;Ae++){for(Te=Ae?Math.max:Math.min,De=Ae?1:-1,(Ue=Ce[ze][Ae]).sort(ve),je=(qe=Ce[1-ze][Ae]).concat(Ue),Ne=[],rt=0;rt<Ue.length;rt++)void 0!==Ue[rt].yLabelMid&&Ne.push(Ue[rt]);for(Be=!1,rt=0;ze&&rt<qe.length;rt++)if(void 0!==qe[rt].yLabelMid){Be=qe[rt];break}for(rt=0;rt<Ne.length;rt++){var mt=rt&&Ne[rt-1];Be&&!rt&&(mt=Be),lt(Ne[rt],mt)}}}(ee,ie),Ee=ie,H.each(function(Ae){var ze=g.select(this);if(Ae.labelExtraX||Ae.labelExtraY){var ve=ze.select("g.slicetext text");Ae.transform.targetX+=Ae.labelExtraX,Ae.transform.targetY+=Ae.labelExtraY,ve.attr("transform",r.getTextTransform(Ae.transform));var Te=Ae.cxFinal+Ae.pxmid[0],Ie="M"+Te+","+(Ae.cyFinal+Ae.pxmid[1]),De=(Ae.yLabelMax-Ae.yLabelMin)*(Ae.pxmid[0]<0?-1:1)/4;if(Ae.labelExtraX){var Fe=Ae.labelExtraX*Ae.pxmid[1]/Ae.pxmid[0],Ue=Ae.yLabelMid+Ae.labelExtraY-(Ae.cyFinal+Ae.pxmid[1]);Math.abs(Fe)>Math.abs(Ue)?Ie+="l"+Ue*Ae.pxmid[0]/Ae.pxmid[1]+","+Ue+"H"+(Te+Ae.labelExtraX+De):Ie+="l"+Ae.labelExtraX+","+Fe+"v"+(Ue-Fe)+"h"+De}else Ie+="V"+(Ae.yLabelMid+Ae.labelExtraY)+"h"+De;r.ensureSingle(ze,"path","textline").call(y.stroke,Ee.outsidetextfont.color).attr({"stroke-width":Math.min(2,Ee.outsidetextfont.size/8),d:Ie,fill:"none"})}else ze.select("path.textline").remove()}),Q&&ie.automargin){var le=e.bBox(V.node()),de=ie.domain,he=(K.w*(de.x[1]-de.x[0])*.5-q.r)/K.w,_e=(K.h*(de.y[1]-de.y[0])*.5-q.r)/K.h;m.autoMargin(J,"pie."+ie.uid+".automargin",{xl:de.x[0]-he,xr:de.x[1]+he,yb:de.y[0]-_e,yt:de.y[1]+_e,l:Math.max(q.cx-q.r-le.left,0),r:Math.max(le.right-(q.cx+q.r),0),b:Math.max(le.bottom-(q.cy+q.r),0),t:Math.max(q.cy-q.r-le.top,0),pad:5})}})});setTimeout(function(){ae.selectAll("tspan").each(function(){var U=g.select(this);U.attr("dy")&&U.attr("dy",U.attr("dy"))})},0)},formatSliceLabel:Y,transformInsideText:u,determineInsideTextFont:o,positionTitleOutside:O,prerenderTitles:x,layoutAreas:B,attachFxHandlers:d,computeTransform:G}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("./style_one"),b=v("../bar/uniform_text").resizeText;re.exports=function(y){var e=y._fullLayout._pielayer.selectAll(".trace");b(y,e,"pie"),e.each(function(r){var n=r[0].trace,a=g.select(this);a.style({opacity:n.opacity}),a.selectAll("path.surface").each(function(t){g.select(this).call(m,t,n)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("./helpers").castOption;re.exports=function(b,y,e){var r=e.marker.line,n=m(r.color,y.pts)||g.defaultLine,a=m(r.width,y.pts)||0;b.style("stroke-width",a).call(g.fill,y.color).call(g.stroke,n)}},{"../../components/color":367,"./helpers":915}],922:[function(v,re,ne){"use strict";var g=v("../scatter/attributes");re.exports={x:g.x,y:g.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:g.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_pointcloud2d,m=v("../../lib/str2rgbarray"),b=v("../../plots/cartesian/autorange").findExtremes,y=v("../scatter/get_trace_color");function e(n,a){this.scene=n,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=g(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var r=e.prototype;r.handlePick=function(n){var a=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:Array.isArray(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},r.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=y(n,{})},r.updateFast=function(n){var a,t,p,s,i,f,c=this.xData=this.pickXData=n.x,l=this.yData=this.pickYData=n.y,h=this.pickXYData=n.xy,o=n.indices,x=this.bounds;if(h){if(p=h,a=h.length>>>1,n.xbounds&&n.ybounds)x[0]=n.xbounds[0],x[2]=n.xbounds[1],x[1]=n.ybounds[0],x[3]=n.ybounds[1];else for(f=0;f<a;f++)i=p[2*f+1],(s=p[2*f])<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),i<x[1]&&(x[1]=i),i>x[3]&&(x[3]=i);if(o)t=o;else for(t=new Int32Array(a),f=0;f<a;f++)t[f]=f}else for(a=c.length,p=new Float32Array(2*a),t=new Int32Array(a),f=0;f<a;f++)s=c[f],i=l[f],t[f]=f,p[2*f]=s,p[2*f+1]=i,s<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),i<x[1]&&(x[1]=i),i>x[3]&&(x[3]=i);this.idToIndex=t,this.pointcloudOptions.idToIndex=t,this.pointcloudOptions.positions=p;var u=m(n.marker.color),T=m(n.marker.border.color),_=n.opacity*n.marker.opacity;u[3]*=_,this.pointcloudOptions.color=u;var w=n.marker.blend;null===w&&(w=c.length<100||l.length<100),this.pointcloudOptions.blend=w,T[3]*=_,this.pointcloudOptions.borderColor=T;var M=n.marker.sizemin,I=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=M,this.pointcloudOptions.sizeMax=I,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var S=this.scene.xaxis,R=this.scene.yaxis,O=I/2||.5;n._extremes[S._id]=b(S,[x[0],x[2]],{ppad:O}),n._extremes[R._id]=b(R,[x[1],x[3]],{ppad:O})},r.dispose=function(){this.pointcloud.dispose()},re.exports=function(n,a){var t=new e(n,a.uid);return t.update(a),t}},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes");re.exports=function(b,y,e){function r(n,a){return g.coerce(b,y,m,n,a)}r("x"),r("y"),r("xbounds"),r("ybounds"),b.xy&&b.xy instanceof Float32Array&&(y.xy=b.xy),b.indices&&b.indices instanceof Int32Array&&(y.indices=b.indices),r("text"),r("marker.color",e),r("marker.opacity"),r("marker.blend"),r("marker.sizemin"),r("marker.sizemax"),r("marker.border.color",e),r("marker.border.arearatio"),y._length=null}},{"../../lib":515,"./attributes":922}],925:[function(v,re,ne){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../scatter3d/calc"),plot:v("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:v("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(v,re,ne){"use strict";var g=v("../../plots/font_attributes"),m=v("../../plots/attributes"),b=v("../../components/color/attributes"),y=v("../../components/fx/attributes"),e=v("../../plots/domain").attributes,r=v("../../plots/template_attributes").hovertemplateAttrs,n=v("../../components/colorscale/attributes"),a=v("../../plot_api/plot_template").templatedArray,t=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,p=v("../../lib/extend").extendFlat,s=v("../../plot_api/edit_types").overrideAll;(re.exports=s({hoverinfo:p({},m.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:y.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:g({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:y.hoverlabel,hovertemplate:r({},{keys:["value","label"]}),colorscales:a("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:p(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(v,re,ne){"use strict";var g=v("../../plot_api/edit_types").overrideAll,m=v("../../plots/get_data").getModuleCalcData,b=v("./plot"),y=v("../../components/fx/layout_attributes"),e=v("../../lib/setcursor"),r=v("../../components/dragelement"),n=v("../../components/selections").prepSelect,a=v("../../lib"),t=v("../../registry");function p(s,i){var f=s._fullData[i],c=s._fullLayout,l=c.dragmode,d=f._bgRect;if(d&&"pan"!==l&&"zoom"!==l){e(d,"pan"===c.dragmode?"move":"crosshair");var o={_id:"x",c2p:a.identity,_offset:f._sankey.translateX,_length:f._sankey.width},x={_id:"y",c2p:a.identity,_offset:f._sankey.translateY,_length:f._sankey.height},u={gd:s,element:d.node(),plotinfo:{id:i,xaxis:o,yaxis:x,fillRangeItems:a.noop},subplot:i,xaxes:[o],yaxes:[x],doneFnCompleted:function(T){var _,w=s._fullData[i],M=w.node.groups.slice(),I=[];function S(D){for(var B=w._sankey.graph.nodes,z=0;z<B.length;z++)if(B[z].pointNumber===D)return B[z]}for(var R=0;R<T.length;R++){var O=S(T[R].pointNumber);if(O)if(O.group){for(var C=0;C<O.childrenNodes.length;C++)I.push(O.childrenNodes[C].pointNumber);M[O.pointNumber-w.node._count]=!1}else I.push(O.pointNumber)}_=M.filter(Boolean).concat([I]),t.call("_guiRestyle",s,{"node.groups":[_]},i)},prepFn:function(T,_,w){n(T,_,w,u,l)}};r.init(u)}}ne.name="sankey",ne.baseLayoutAttrOverrides=g({hoverlabel:y.hoverlabel},"plot","nested"),ne.plot=function(s){var i=m(s.calcdata,"sankey")[0];b(s,i),ne.updateFx(s)},ne.clean=function(s,i,f,c){var l=c._has&&c._has("sankey"),h=i._has&&i._has("sankey");l&&!h&&(c._paperdiv.selectAll(".sankey").remove(),c._paperdiv.selectAll(".bgsankey").remove())},ne.updateFx=function(s){for(var i=0;i<s._fullData.length;i++)p(s,i)}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(v,re,ne){"use strict";var g=v("strongly-connected-components"),m=v("../../lib"),b=v("../../lib/gup").wrap,y=m.isArrayOrTypedArray,e=m.isIndex,r=v("../../components/colorscale");re.exports=function(a,t){var p=function n(a){var t,p=a.node,s=a.link,i=[],f=y(s.color),c=y(s.customdata),l={},h={},d=s.colorscales.length;for(t=0;t<d;t++){var o=s.colorscales[t],x=r.extractScale(o,{cLetter:"c"}),u=r.makeColorScaleFunc(x);h[o.label]=u}var T=0;for(t=0;t<s.value.length;t++)s.source[t]>T&&(T=s.source[t]),s.target[t]>T&&(T=s.target[t]);var _,w=T+1;a.node._count=w;var M=a.node.groups,I={};for(t=0;t<M.length;t++){var S=M[t];for(_=0;_<S.length;_++){var R=S[_],O=w+t;I.hasOwnProperty(R)?m.warn("Node "+R+" is already part of a group."):I[R]=O}}var C={source:[],target:[]};for(t=0;t<s.value.length;t++){var D=s.value[t],B=s.source[t],z=s.target[t];if(D>0&&e(B,w)&&e(z,w)&&(!I.hasOwnProperty(B)||!I.hasOwnProperty(z)||I[B]!==I[z])){I.hasOwnProperty(z)&&(z=I[z]),I.hasOwnProperty(B)&&(B=I[B]),l[B=+B]=l[z=+z]=!0;var Y="";s.label&&s.label[t]&&(Y=s.label[t]);var G=null;Y&&h.hasOwnProperty(Y)&&(G=h[Y]),i.push({pointNumber:t,label:Y,color:f?s.color[t]:s.color,customdata:c?s.customdata[t]:s.customdata,concentrationscale:G,source:B,target:z,value:+D}),C.source.push(B),C.target.push(z)}}var J=w+M.length,te=y(p.color),X=y(p.customdata),K=[];for(t=0;t<J;t++)l[t]&&K.push({group:t>w-1,childrenNodes:[],pointNumber:t,label:p.label[t],color:te?p.color[t]:p.color,customdata:X?p.customdata[t]:p.customdata});var U=!1;return function(V,q,ie){for(var H=m.init2dArray(V,0),ee=0;ee<Math.min(q.length,ie.length);ee++)if(m.isIndex(q[ee],V)&&m.isIndex(ie[ee],V)){if(q[ee]===ie[ee])return!0;H[q[ee]].push(ie[ee])}return g(H).components.some(function(Q){return Q.length>1})}(J,C.source,C.target)&&(U=!0),{circular:U,links:i,nodes:K,groups:M,groupLookup:I}}(t);return b({circular:p.circular,_nodes:p.nodes,_links:p.links,_groups:p.groups,_groupLookup:p.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(v,re,ne){"use strict";re.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../../components/color"),y=v("tinycolor2"),e=v("../../plots/domain").defaults,r=v("../../components/fx/hoverlabel_defaults"),n=v("../../plot_api/plot_template"),a=v("../../plots/array_container_defaults");function t(p,s){function i(f,c){return g.coerce(p,s,m.link.colorscales,f,c)}i("label"),i("cmin"),i("cmax"),i("colorscale")}re.exports=function(p,s,i,f){function c(I,S){return g.coerce(p,s,m,I,S)}var l=g.extendDeep(f.hoverlabel,p.hoverlabel),h=p.node,d=n.newContainer(s,"node");function o(I,S){return g.coerce(h,d,m.node,I,S)}o("label"),o("groups"),o("x"),o("y"),o("pad"),o("thickness"),o("line.color"),o("line.width"),o("hoverinfo",p.hoverinfo),r(h,d,o,l),o("hovertemplate");var x=f.colorway;o("color",d.label.map(function(I,S){return b.addOpacity(x[S%x.length],.8)})),o("customdata");var u=p.link||{},T=n.newContainer(s,"link");function _(I,S){return g.coerce(u,T,m.link,I,S)}_("label"),_("arrowlen"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",p.hoverinfo),r(u,T,_,l),_("hovertemplate");var w,M=y(f.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",g.repeat(M,T.value.length)),_("customdata"),a(u,T,{name:"colorscales",handleItemDefaults:t}),e(s,f,c),c("orientation"),c("valueformat"),c("valuesuffix"),d.x.length&&d.y.length&&(w="freeform"),c("arrangement",w),g.coerceFont(c,"textfont",g.extendFlat({},f.font)),s._length=null}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"sankey",basePlotModule:v("./base_plot"),selectPoints:v("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=m.numberFormat,y=v("./render"),e=v("../../components/fx"),r=v("../../components/color"),n=v("./constants").cn,a=m._;function t(u){return""!==u}function p(u,T){return u.filter(function(_){return _.key===T.traceId})}function s(u,T){g.select(u).select("path").style("fill-opacity",T),g.select(u).select("rect").style("fill-opacity",T)}function i(u){g.select(u).select("text.name").style("fill","black")}function f(u){return function(T){return-1!==u.node.sourceLinks.indexOf(T.link)||-1!==u.node.targetLinks.indexOf(T.link)}}function c(u){return function(T){return-1!==T.node.sourceLinks.indexOf(u.link)||-1!==T.node.targetLinks.indexOf(u.link)}}function l(u,T,_){T&&_&&p(_,T).selectAll("."+n.sankeyLink).filter(f(T)).call(d.bind(0,T,_,!1))}function h(u,T,_){T&&_&&p(_,T).selectAll("."+n.sankeyLink).filter(f(T)).call(o.bind(0,T,_,!1))}function d(u,T,_,w){var M=w.datum().link.label;w.style("fill-opacity",function(I){if(!I.link.concentrationscale)return.4}),M&&p(T,u).selectAll("."+n.sankeyLink).filter(function(I){return I.link.label===M}).style("fill-opacity",function(I){if(!I.link.concentrationscale)return.4}),_&&p(T,u).selectAll("."+n.sankeyNode).filter(c(u)).call(l)}function o(u,T,_,w){var M=w.datum().link.label;w.style("fill-opacity",function(I){return I.tinyColorAlpha}),M&&p(T,u).selectAll("."+n.sankeyLink).filter(function(I){return I.link.label===M}).style("fill-opacity",function(I){return I.tinyColorAlpha}),_&&p(T,u).selectAll(n.sankeyNode).filter(c(u)).call(h)}function x(u,T){var w=m.nestedProperty(u.hoverlabel||{},T).get();return!Array.isArray(w)&&w}re.exports=function(u,T){for(var _=u._fullLayout,w=_._paper,M=_._size,I=0;I<u._fullData.length;I++)if(u._fullData[I].visible&&u._fullData[I].type===n.sankey&&!u._fullData[I]._viewInitial){var S=u._fullData[I].node;u._fullData[I]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var R=a(u,"source:")+" ",O=a(u,"target:")+" ",C=a(u,"concentration:")+" ",D=a(u,"incoming flow count:")+" ",B=a(u,"outgoing flow count:")+" ";y(u,w,T,{width:M.w,height:M.h,margin:{t:M.t,r:M.r,b:M.b,l:M.l}},{linkEvents:{hover:function(z,Y,G){!1!==u._fullLayout.hovermode&&(g.select(z).call(d.bind(0,Y,G,!0)),"skip"!==Y.link.trace.link.hoverinfo&&(Y.link.fullData=Y.link.trace,u.emit("plotly_hover",{event:g.event,points:[Y.link]})))},follow:function(z,Y){if(!1!==u._fullLayout.hovermode){var G=Y.link.trace.link;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){for(var J=[],te=0,X=0;X<Y.flow.links.length;X++){var K=Y.flow.links[X];if("closest"!==u._fullLayout.hovermode||Y.link.pointNumber===K.pointNumber){Y.link.pointNumber===K.pointNumber&&(te=X),K.fullData=K.trace,G=Y.link.trace.link;var ae=V(K),U={valueLabel:b(Y.valueFormat)(K.value)+Y.valueSuffix};J.push({x:ae[0],y:ae[1],name:U.valueLabel,text:[K.label||"",R+K.source.label,O+K.target.label,K.concentrationscale?C+b("%0.2f")(K.flow.labelConcentration):""].filter(t).join("<br>"),color:x(G,"bgcolor")||r.addOpacity(K.color,1),borderColor:x(G,"bordercolor"),fontFamily:x(G,"font.family"),fontSize:x(G,"font.size"),fontColor:x(G,"font.color"),nameLength:x(G,"namelength"),textAlign:x(G,"align"),idealAlign:g.event.x<ae[0]?"right":"left",hovertemplate:G.hovertemplate,hovertemplateLabels:U,eventData:[K]})}}e.loneHover(J,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:u,anchorIndex:te}).each(function(){Y.link.concentrationscale||s(this,.65),i(this)})}}function V(q){var ie,H;q.circular?(ie=(q.circularPathData.leftInnerExtent+q.circularPathData.rightInnerExtent)/2,H=q.circularPathData.verticalFullExtent):(ie=(q.source.x1+q.target.x0)/2,H=(q.y0+q.y1)/2);var ee=[ie,H];return"v"===q.trace.orientation&&ee.reverse(),ee[0]+=Y.parent.translateX,ee[1]+=Y.parent.translateY,ee}},unhover:function(z,Y,G){!1!==u._fullLayout.hovermode&&(g.select(z).call(o.bind(0,Y,G,!0)),"skip"!==Y.link.trace.link.hoverinfo&&(Y.link.fullData=Y.link.trace,u.emit("plotly_unhover",{event:g.event,points:[Y.link]})),e.loneUnhover(_._hoverlayer.node()))},select:function(z,Y){var G=Y.link;G.originalEvent=g.event,u._hoverdata=[G],e.click(u,{target:!0})}},nodeEvents:{hover:function(z,Y,G){!1!==u._fullLayout.hovermode&&(g.select(z).call(l,Y,G),"skip"!==Y.node.trace.node.hoverinfo&&(Y.node.fullData=Y.node.trace,u.emit("plotly_hover",{event:g.event,points:[Y.node]})))},follow:function(z,Y){if(!1!==u._fullLayout.hovermode){var G=Y.node.trace.node;if("none"!==G.hoverinfo&&"skip"!==G.hoverinfo){var J=g.select(z).select("."+n.nodeRect),te=u._fullLayout._paperdiv.node().getBoundingClientRect(),X=J.node().getBoundingClientRect(),K=X.left-2-te.left,ae=X.right+2-te.left,U=X.top+X.height/4-te.top,V={valueLabel:b(Y.valueFormat)(Y.node.value)+Y.valueSuffix};Y.node.fullData=Y.node.trace,u._fullLayout._calcInverseTransform(u);var q=u._fullLayout._invScaleX,H=e.loneHover({x0:q*K,x1:q*ae,y:u._fullLayout._invScaleY*U,name:b(Y.valueFormat)(Y.node.value)+Y.valueSuffix,text:[Y.node.label,D+Y.node.targetLinks.length,B+Y.node.sourceLinks.length].filter(t).join("<br>"),color:x(G,"bgcolor")||Y.tinyColorHue,borderColor:x(G,"bordercolor"),fontFamily:x(G,"font.family"),fontSize:x(G,"font.size"),fontColor:x(G,"font.color"),nameLength:x(G,"namelength"),textAlign:x(G,"align"),idealAlign:"left",hovertemplate:G.hovertemplate,hovertemplateLabels:V,eventData:[Y.node]},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:u});s(H,.85),i(H)}}},unhover:function(z,Y,G){!1!==u._fullLayout.hovermode&&(g.select(z).call(h,Y,G),"skip"!==Y.node.trace.node.hoverinfo&&(Y.node.fullData=Y.node.trace,u.emit("plotly_unhover",{event:g.event,points:[Y.node]})),e.loneUnhover(_._hoverlayer.node()))},select:function(z,Y,G){var J=Y.node;J.originalEvent=g.event,u._hoverdata=[J],g.select(z).call(h,Y,G),e.click(u,{target:!0})}}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(v,re,ne){"use strict";var g=v("d3-force"),m=v("d3-interpolate").interpolateNumber,b=v("@plotly/d3"),y=v("@plotly/d3-sankey"),e=v("@plotly/d3-sankey-circular"),r=v("./constants"),n=v("tinycolor2"),a=v("../../components/color"),t=v("../../components/drawing"),p=v("../../lib"),s=p.strTranslate,i=p.strRotate,f=v("../../lib/gup"),c=f.keyFun,l=f.repeat,h=f.unwrap,d=v("../../lib/svg_text_utils"),o=v("../../registry"),x=v("../../constants/alignment"),u=x.CAP_SHIFT,T=x.LINE_SPACING;function _(X,K,ae){var U,V=h(K),q=V.trace,ie=q.domain,H="h"===q.orientation,ee=q.node.pad,Q=q.node.thickness,oe=X.width*(ie.x[1]-ie.x[0]),le=X.height*(ie.y[1]-ie.y[0]),de=V._nodes,fe=V._links,be=V.circular;(U=be?e.sankeyCircular().circularLinkGap(0):y.sankey()).iterations(r.sankeyIterations).size(H?[oe,le]:[le,oe]).nodeWidth(Q).nodePadding(ee).nodeId(function(Fe){return Fe.pointNumber}).nodes(de).links(fe);var he,_e,Ce,Ee=U();for(var Ae in U.nodePadding()<ee&&p.warn("node.pad was reduced to ",U.nodePadding()," to fit within the figure."),V._groupLookup){var ze,ve=parseInt(V._groupLookup[Ae]);for(he=0;he<Ee.nodes.length;he++)if(Ee.nodes[he].pointNumber===ve){ze=Ee.nodes[he];break}if(ze){var Te={pointNumber:parseInt(Ae),x0:ze.x0,x1:ze.x1,y0:ze.y0,y1:ze.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ee.nodes.unshift(Te),ze.childrenNodes.unshift(Te)}}if(function(){for(he=0;he<Ee.nodes.length;he++){var Fe,Ue,qe=Ee.nodes[he],je={};for(_e=0;_e<qe.targetLinks.length;_e++)Fe=(Ue=qe.targetLinks[_e]).source.pointNumber+":"+Ue.target.pointNumber,je.hasOwnProperty(Fe)||(je[Fe]=[]),je[Fe].push(Ue);var rt=Object.keys(je);for(_e=0;_e<rt.length;_e++){var Ne=je[Fe=rt[_e]],Be=0,We={};for(Ce=0;Ce<Ne.length;Ce++)We[(Ue=Ne[Ce]).label]||(We[Ue.label]=0),We[Ue.label]+=Ue.value,Be+=Ue.value;for(Ce=0;Ce<Ne.length;Ce++)(Ue=Ne[Ce]).flow={value:Be,labelConcentration:We[Ue.label]/Be,concentration:Ue.value/Be,links:Ne},Ue.concentrationscale&&(Ue.color=n(Ue.concentrationscale(Ue.flow.labelConcentration)))}var Ye=0;for(_e=0;_e<qe.sourceLinks.length;_e++)Ye+=qe.sourceLinks[_e].value;for(_e=0;_e<qe.sourceLinks.length;_e++)(Ue=qe.sourceLinks[_e]).concentrationOut=Ue.value/Ye;var lt=0;for(_e=0;_e<qe.targetLinks.length;_e++)lt+=qe.targetLinks[_e].value;for(_e=0;_e<qe.targetLinks.length;_e++)(Ue=qe.targetLinks[_e]).concenrationIn=Ue.value/lt}}(),q.node.x.length&&q.node.y.length){for(he=0;he<Math.min(q.node.x.length,q.node.y.length,Ee.nodes.length);he++)if(q.node.x[he]&&q.node.y[he]){var Ie=[q.node.x[he]*oe,q.node.y[he]*le];Ee.nodes[he].x0=Ie[0]-Q/2,Ee.nodes[he].x1=Ie[0]+Q/2;var De=Ee.nodes[he].y1-Ee.nodes[he].y0;Ee.nodes[he].y0=Ie[1]-De/2,Ee.nodes[he].y1=Ie[1]+De/2}"snap"===q.arrangement&&function(Fe){var Ue,qe,je=Fe.map(function(Ye,lt){return{x0:Ye.x0,index:lt}}).sort(function(Ye,lt){return Ye.x0-lt.x0}),rt=[],Ne=-1,Be=-1/0;for(he=0;he<je.length;he++){var We=Fe[je[he].index];We.x0>Be+Q&&(Ne+=1,Ue=We.x0),Be=We.x0,rt[Ne]||(rt[Ne]=[]),rt[Ne].push(We),We.x0+=qe=Ue-We.x0,We.x1+=qe}return rt}(de=Ee.nodes).forEach(function(Ue){var qe,je,rt,Ne=0,Be=Ue.length;for(Ue.sort(function(We,Ye){return We.y0-Ye.y0}),rt=0;rt<Be;++rt)(qe=Ue[rt]).y0>=Ne||(je=Ne-qe.y0)>1e-6&&(qe.y0+=je,qe.y1+=je),Ne=qe.y1+ee}),U.update(Ee)}return{circular:be,key:ae,trace:q,guid:p.randstr(),horizontal:H,width:oe,height:le,nodePad:q.node.pad,nodeLineColor:q.node.line.color,nodeLineWidth:q.node.line.width,linkLineColor:q.link.line.color,linkLineWidth:q.link.line.width,linkArrowLength:q.link.arrowlen,valueFormat:q.valueformat,valueSuffix:q.valuesuffix,textFont:q.textfont,translateX:ie.x[0]*X.width+X.margin.l,translateY:X.height-ie.y[1]*X.height+X.margin.t,dragParallel:H?le:oe,dragPerpendicular:H?oe:le,arrangement:q.arrangement,sankey:U,graph:Ee,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(X,K,ae){var U=n(K.color),V=K.source.label+"|"+K.target.label+"__"+ae;return K.trace=X.trace,K.curveNumber=X.trace.index,{circular:X.circular,key:V,traceId:X.key,pointNumber:K.pointNumber,link:K,tinyColorHue:a.tinyRGB(U),tinyColorAlpha:U.getAlpha(),linkPath:M,linkLineColor:X.linkLineColor,linkLineWidth:X.linkLineWidth,linkArrowLength:X.linkArrowLength,valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,parent:X,interactionState:X.interactionState,flow:K.flow}}function M(){return function(X){var _e,Ce,Ee,Ae,K=X.linkArrowLength;if(X.link.circular)return Ce=K,Ee=(_e=X.link).width/2,Ae=_e.circularPathData,"top"===_e.circularLinkType?"M "+(Ae.targetX-Ce)+" "+(Ae.targetY+Ee)+" L"+(Ae.rightInnerExtent-Ce)+" "+(Ae.targetY+Ee)+"A"+(Ae.rightLargeArcRadius+Ee)+" "+(Ae.rightSmallArcRadius+Ee)+" 0 0 1 "+(Ae.rightFullExtent-Ee-Ce)+" "+(Ae.targetY-Ae.rightSmallArcRadius)+"L"+(Ae.rightFullExtent-Ee-Ce)+" "+Ae.verticalRightInnerExtent+"A"+(Ae.rightLargeArcRadius+Ee)+" "+(Ae.rightLargeArcRadius+Ee)+" 0 0 1 "+(Ae.rightInnerExtent-Ce)+" "+(Ae.verticalFullExtent-Ee)+"L"+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent-Ee)+"A"+(Ae.leftLargeArcRadius+Ee)+" "+(Ae.leftLargeArcRadius+Ee)+" 0 0 1 "+(Ae.leftFullExtent+Ee)+" "+Ae.verticalLeftInnerExtent+"L"+(Ae.leftFullExtent+Ee)+" "+(Ae.sourceY-Ae.leftSmallArcRadius)+"A"+(Ae.leftLargeArcRadius+Ee)+" "+(Ae.leftSmallArcRadius+Ee)+" 0 0 1 "+Ae.leftInnerExtent+" "+(Ae.sourceY+Ee)+"L"+Ae.sourceX+" "+(Ae.sourceY+Ee)+"L"+Ae.sourceX+" "+(Ae.sourceY-Ee)+"L"+Ae.leftInnerExtent+" "+(Ae.sourceY-Ee)+"A"+(Ae.leftLargeArcRadius-Ee)+" "+(Ae.leftSmallArcRadius-Ee)+" 0 0 0 "+(Ae.leftFullExtent-Ee)+" "+(Ae.sourceY-Ae.leftSmallArcRadius)+"L"+(Ae.leftFullExtent-Ee)+" "+Ae.verticalLeftInnerExtent+"A"+(Ae.leftLargeArcRadius-Ee)+" "+(Ae.leftLargeArcRadius-Ee)+" 0 0 0 "+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent+Ee)+"L"+(Ae.rightInnerExtent-Ce)+" "+(Ae.verticalFullExtent+Ee)+"A"+(Ae.rightLargeArcRadius-Ee)+" "+(Ae.rightLargeArcRadius-Ee)+" 0 0 0 "+(Ae.rightFullExtent+Ee-Ce)+" "+Ae.verticalRightInnerExtent+"L"+(Ae.rightFullExtent+Ee-Ce)+" "+(Ae.targetY-Ae.rightSmallArcRadius)+"A"+(Ae.rightLargeArcRadius-Ee)+" "+(Ae.rightSmallArcRadius-Ee)+" 0 0 0 "+(Ae.rightInnerExtent-Ce)+" "+(Ae.targetY-Ee)+"L"+(Ae.targetX-Ce)+" "+(Ae.targetY-Ee)+(Ce>0?"L"+Ae.targetX+" "+Ae.targetY:"")+"Z":"M "+(Ae.targetX-Ce)+" "+(Ae.targetY-Ee)+" L"+(Ae.rightInnerExtent-Ce)+" "+(Ae.targetY-Ee)+"A"+(Ae.rightLargeArcRadius+Ee)+" "+(Ae.rightSmallArcRadius+Ee)+" 0 0 0 "+(Ae.rightFullExtent-Ee-Ce)+" "+(Ae.targetY+Ae.rightSmallArcRadius)+"L"+(Ae.rightFullExtent-Ee-Ce)+" "+Ae.verticalRightInnerExtent+"A"+(Ae.rightLargeArcRadius+Ee)+" "+(Ae.rightLargeArcRadius+Ee)+" 0 0 0 "+(Ae.rightInnerExtent-Ce)+" "+(Ae.verticalFullExtent+Ee)+"L"+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent+Ee)+"A"+(Ae.leftLargeArcRadius+Ee)+" "+(Ae.leftLargeArcRadius+Ee)+" 0 0 0 "+(Ae.leftFullExtent+Ee)+" "+Ae.verticalLeftInnerExtent+"L"+(Ae.leftFullExtent+Ee)+" "+(Ae.sourceY+Ae.leftSmallArcRadius)+"A"+(Ae.leftLargeArcRadius+Ee)+" "+(Ae.leftSmallArcRadius+Ee)+" 0 0 0 "+Ae.leftInnerExtent+" "+(Ae.sourceY-Ee)+"L"+Ae.sourceX+" "+(Ae.sourceY-Ee)+"L"+Ae.sourceX+" "+(Ae.sourceY+Ee)+"L"+Ae.leftInnerExtent+" "+(Ae.sourceY+Ee)+"A"+(Ae.leftLargeArcRadius-Ee)+" "+(Ae.leftSmallArcRadius-Ee)+" 0 0 1 "+(Ae.leftFullExtent-Ee)+" "+(Ae.sourceY+Ae.leftSmallArcRadius)+"L"+(Ae.leftFullExtent-Ee)+" "+Ae.verticalLeftInnerExtent+"A"+(Ae.leftLargeArcRadius-Ee)+" "+(Ae.leftLargeArcRadius-Ee)+" 0 0 1 "+Ae.leftInnerExtent+" "+(Ae.verticalFullExtent-Ee)+"L"+(Ae.rightInnerExtent-Ce)+" "+(Ae.verticalFullExtent-Ee)+"A"+(Ae.rightLargeArcRadius-Ee)+" "+(Ae.rightLargeArcRadius-Ee)+" 0 0 1 "+(Ae.rightFullExtent+Ee-Ce)+" "+Ae.verticalRightInnerExtent+"L"+(Ae.rightFullExtent+Ee-Ce)+" "+(Ae.targetY+Ae.rightSmallArcRadius)+"A"+(Ae.rightLargeArcRadius-Ee)+" "+(Ae.rightSmallArcRadius-Ee)+" 0 0 1 "+(Ae.rightInnerExtent-Ce)+" "+(Ae.targetY+Ee)+"L"+(Ae.targetX-Ce)+" "+(Ae.targetY+Ee)+(Ce>0?"L"+Ae.targetX+" "+Ae.targetY:"")+"Z";var ae=Math.abs((X.link.target.x0-X.link.source.x1)/2);K>ae&&(K=ae);var U=X.link.source.x1,V=X.link.target.x0-K,q=m(U,V),ie=q(.5),H=q(.5),ee=X.link.y0-X.link.width/2,Q=X.link.y0+X.link.width/2,oe=X.link.y1-X.link.width/2,le=X.link.y1+X.link.width/2,he=K>0?"L"+(V+K)+","+(oe+X.link.width/2):"";return"M"+U+","+ee+"C"+ie+","+ee+" "+H+","+oe+" "+V+","+oe+(he+="L"+V+","+le)+"C"+H+","+le+" "+ie+","+Q+" "+U+","+Q+"Z"}}function I(X,K){var ae=n(K.color),U=r.nodePadAcross,V=X.nodePad/2;K.dx=K.x1-K.x0,K.dy=K.y1-K.y0;var q=K.dx,ie=Math.max(.5,K.dy),H="node_"+K.pointNumber;return K.group&&(H=p.randstr()),K.trace=X.trace,K.curveNumber=X.trace.index,{index:K.pointNumber,key:H,partOfGroup:K.partOfGroup||!1,group:K.group,traceId:X.key,trace:X.trace,node:K,nodePad:X.nodePad,nodeLineColor:X.nodeLineColor,nodeLineWidth:X.nodeLineWidth,textFont:X.textFont,size:X.horizontal?X.height:X.width,visibleWidth:Math.ceil(q),visibleHeight:ie,zoneX:-U,zoneY:-V,zoneWidth:q+2*U,zoneHeight:ie+2*V,labelY:X.horizontal?K.dy/2+1:K.dx/2+1,left:1===K.originalLayer,sizeAcross:X.width,forceLayouts:X.forceLayouts,horizontal:X.horizontal,darkBackground:ae.getBrightness()<=128,tinyColorHue:a.tinyRGB(ae),tinyColorAlpha:ae.getAlpha(),valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,graph:X.graph,arrangement:X.arrangement,uniqueNodeLabelPathId:[X.guid,X.key,H].join("_"),interactionState:X.interactionState,figure:X}}function S(X){X.attr("transform",function(K){return s(K.node.x0.toFixed(3),K.node.y0.toFixed(3))})}function R(X){X.call(S)}function O(X,K){X.call(R),K.attr("d",M())}function C(X){X.attr("width",function(K){return K.node.x1-K.node.x0}).attr("height",function(K){return K.visibleHeight})}function D(X){return X.link.width>1||X.linkLineWidth>0}function B(X){return s(X.translateX,X.translateY)+(X.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function z(X,K,ae){X.on(".basic",null).on("mouseover.basic",function(U){U.interactionState.dragInProgress||U.partOfGroup||(ae.hover(this,U,K),U.interactionState.hovered=[this,U])}).on("mousemove.basic",function(U){U.interactionState.dragInProgress||U.partOfGroup||(ae.follow(this,U),U.interactionState.hovered=[this,U])}).on("mouseout.basic",function(U){U.interactionState.dragInProgress||U.partOfGroup||(ae.unhover(this,U,K),U.interactionState.hovered=!1)}).on("click.basic",function(U){U.interactionState.hovered&&(ae.unhover(this,U,K),U.interactionState.hovered=!1),U.interactionState.dragInProgress||U.partOfGroup||ae.select(this,U,K)})}function Y(X,K,ae,U){var V=b.behavior.drag().origin(function(q){return{x:q.node.x0+q.visibleWidth/2,y:q.node.y0+q.visibleHeight/2}}).on("dragstart",function(q){if("fixed"!==q.arrangement&&(p.ensureSingle(U._fullLayout._infolayer,"g","dragcover",function(H){U._fullLayout._dragCover=H}),p.raiseToTop(this),q.interactionState.dragInProgress=q.node,J(q.node),q.interactionState.hovered&&(ae.nodeEvents.unhover.apply(0,q.interactionState.hovered),q.interactionState.hovered=!1),"snap"===q.arrangement)){var ie=q.traceId+"|"+q.key;q.forceLayouts[ie]?q.forceLayouts[ie].alpha(1):function(H,ee,Q,oe){!function(de){for(var fe=0;fe<de.length;fe++)de[fe].y=(de[fe].y0+de[fe].y1)/2,de[fe].x=(de[fe].x0+de[fe].x1)/2}(Q.graph.nodes);var fe,be,he,le=Q.graph.nodes.filter(function(de){return de.originalX===Q.node.originalX}).filter(function(de){return!de.partOfGroup});Q.forceLayouts[ee]=g.forceSimulation(le).alphaDecay(0).force("collide",g.forceCollide().radius(function(de){return de.dy/2+Q.nodePad/2}).strength(1).iterations(r.forceIterations)).force("constrain",(fe=ee,be=le,he=Q,function(){for(var _e=0,Ce=0;Ce<be.length;Ce++){var Ee=be[Ce];Ee===he.interactionState.dragInProgress?(Ee.x=Ee.lastDraggedX,Ee.y=Ee.lastDraggedY):(Ee.vx=(Ee.originalX-Ee.x)/r.forceTicksPerFrame,Ee.y=Math.min(he.size-Ee.dy/2,Math.max(Ee.dy/2,Ee.y))),_e=Math.max(_e,Math.abs(Ee.vx),Math.abs(Ee.vy))}!he.interactionState.dragInProgress&&_e<.1&&he.forceLayouts[fe].alpha()>0&&he.forceLayouts[fe].alpha(0)})).stop()}(0,ie,q),H=X,ee=K,Q=q,oe=ie,le=U,window.requestAnimationFrame(function de(){var fe;for(fe=0;fe<r.forceTicksPerFrame;fe++)Q.forceLayouts[oe].tick();if(function(he){for(var _e=0;_e<he.length;_e++)he[_e].y0=he[_e].y-he[_e].dy/2,he[_e].y1=he[_e].y0+he[_e].dy,he[_e].x0=he[_e].x-he[_e].dx/2,he[_e].x1=he[_e].x0+he[_e].dx}(Q.graph.nodes),Q.sankey.update(Q.graph),O(H.filter(te(Q)),ee),Q.forceLayouts[oe].alpha()>0)window.requestAnimationFrame(de);else{var be=Q.node.originalX;Q.node.x0=be-Q.visibleWidth/2,Q.node.x1=be+Q.visibleWidth/2,G(Q,le)}})}var H,ee,Q,oe,le}).on("drag",function(q){if("fixed"!==q.arrangement){var ie=b.event.x,H=b.event.y;"snap"===q.arrangement?(q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2,q.node.y0=H-q.visibleHeight/2,q.node.y1=H+q.visibleHeight/2):("freeform"===q.arrangement&&(q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2),H=Math.max(0,Math.min(q.size-q.visibleHeight/2,H)),q.node.y0=H-q.visibleHeight/2,q.node.y1=H+q.visibleHeight/2),J(q.node),"snap"!==q.arrangement&&(q.sankey.update(q.graph),O(X.filter(te(q)),K))}}).on("dragend",function(q){if("fixed"!==q.arrangement){q.interactionState.dragInProgress=!1;for(var ie=0;ie<q.node.childrenNodes.length;ie++)q.node.childrenNodes[ie].x=q.node.x,q.node.childrenNodes[ie].y=q.node.y;"snap"!==q.arrangement&&G(q,U)}});X.on(".drag",null).call(V)}function G(X,K){for(var ae=[],U=[],V=0;V<X.graph.nodes.length;V++){var ie=(X.graph.nodes[V].y0+X.graph.nodes[V].y1)/2;ae.push((X.graph.nodes[V].x0+X.graph.nodes[V].x1)/2/X.figure.width),U.push(ie/X.figure.height)}o.call("_guiRestyle",K,{"node.x":[ae],"node.y":[U]},X.trace.index).then(function(){K._fullLayout._dragCover&&K._fullLayout._dragCover.remove()})}function J(X){X.lastDraggedX=X.x0+X.dx/2,X.lastDraggedY=X.y0+X.dy/2}function te(X){return function(K){return K.node.originalX===X.node.originalX}}re.exports=function(X,K,ae,U,V){var q=!1;p.ensureSingle(X._fullLayout._infolayer,"g","first-render",function(){q=!0});var ie=X._fullLayout._dragCover,H=ae.filter(function(he){return h(he).trace.visible}).map(_.bind(null,U)),ee=K.selectAll("."+r.cn.sankey).data(H,c);ee.exit().remove(),ee.enter().append("g").classed(r.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",B),ee.each(function(he,_e){X._fullData[_e]._sankey=he;var Ce="bgsankey-"+he.trace.uid+"-"+_e;p.ensureSingle(X._fullLayout._draggers,"rect",Ce),X._fullData[_e]._bgRect=b.select("."+Ce),X._fullData[_e]._bgRect.style("pointer-events","all").attr("width",he.width).attr("height",he.height).attr("x",he.translateX).attr("y",he.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ee.transition().ease(r.ease).duration(r.duration).attr("transform",B);var Q=ee.selectAll("."+r.cn.sankeyLinks).data(l,c);Q.enter().append("g").classed(r.cn.sankeyLinks,!0).style("fill","none");var oe=Q.selectAll("."+r.cn.sankeyLink).data(function(he){return he.graph.links.filter(function(_e){return _e.value}).map(w.bind(null,he))},c);oe.enter().append("path").classed(r.cn.sankeyLink,!0).call(z,ee,V.linkEvents),oe.style("stroke",function(he){return D(he)?a.tinyRGB(n(he.linkLineColor)):he.tinyColorHue}).style("stroke-opacity",function(he){return D(he)?a.opacity(he.linkLineColor):he.tinyColorAlpha}).style("fill",function(he){return he.tinyColorHue}).style("fill-opacity",function(he){return he.tinyColorAlpha}).style("stroke-width",function(he){return D(he)?he.linkLineWidth:1}).attr("d",M()),oe.style("opacity",function(){return X._context.staticPlot||q||ie?1:0}).transition().ease(r.ease).duration(r.duration).style("opacity",1),oe.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var le=ee.selectAll("."+r.cn.sankeyNodeSet).data(l,c);le.enter().append("g").classed(r.cn.sankeyNodeSet,!0),le.style("cursor",function(he){switch(he.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var de=le.selectAll("."+r.cn.sankeyNode).data(function(he){var _e=he.graph.nodes;return function(Ce){var Ee,Ae=[];for(Ee=0;Ee<Ce.length;Ee++)Ce[Ee].originalX=(Ce[Ee].x0+Ce[Ee].x1)/2,Ce[Ee].originalY=(Ce[Ee].y0+Ce[Ee].y1)/2,-1===Ae.indexOf(Ce[Ee].originalX)&&Ae.push(Ce[Ee].originalX);for(Ae.sort(function(ze,ve){return ze-ve}),Ee=0;Ee<Ce.length;Ee++)Ce[Ee].originalLayerIndex=Ae.indexOf(Ce[Ee].originalX),Ce[Ee].originalLayer=Ce[Ee].originalLayerIndex/(Ae.length-1)}(_e),_e.map(I.bind(null,he))},c);de.enter().append("g").classed(r.cn.sankeyNode,!0).call(S).style("opacity",function(he){return!X._context.staticPlot&&!q||he.partOfGroup?0:1}),de.call(z,ee,V.nodeEvents).call(Y,oe,V,X),de.transition().ease(r.ease).duration(r.duration).call(S).style("opacity",function(he){return he.partOfGroup?0:1}),de.exit().transition().ease(r.ease).duration(r.duration).style("opacity",0).remove();var fe=de.selectAll("."+r.cn.nodeRect).data(l);fe.enter().append("rect").classed(r.cn.nodeRect,!0).call(C),fe.style("stroke-width",function(he){return he.nodeLineWidth}).style("stroke",function(he){return a.tinyRGB(n(he.nodeLineColor))}).style("stroke-opacity",function(he){return a.opacity(he.nodeLineColor)}).style("fill",function(he){return he.tinyColorHue}).style("fill-opacity",function(he){return he.tinyColorAlpha}),fe.transition().ease(r.ease).duration(r.duration).call(C);var be=de.selectAll("."+r.cn.nodeLabel).data(l);be.enter().append("text").classed(r.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(he){return he.node.label}).each(function(he){var _e=b.select(this);t.font(_e,he.textFont),d.convertToTspans(_e,X)}).style("text-shadow",d.makeTextShadow(X._fullLayout.paper_bgcolor)).attr("text-anchor",function(he){return he.horizontal&&he.left?"end":"start"}).attr("transform",function(he){var _e=b.select(this),Ce=d.lineCount(_e),Ae=he.nodeLineWidth/2+3,ze=((he.horizontal?he.visibleHeight:he.visibleWidth)-he.textFont.size*((Ce-1)*T-u))/2;he.horizontal&&(he.left?Ae=-Ae:Ae+=he.visibleWidth);var ve=he.horizontal?"":"scale(-1,1)"+i(90);return s(he.horizontal?Ae:ze,he.horizontal?ze:Ae)+ve}),be.transition().ease(r.ease).duration(r.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(v,re,ne){"use strict";re.exports=function(g,m){for(var b=[],y=g.cd[0].trace,e=y._sankey.graph.nodes,r=0;r<e.length;r++){var n=e[r];if(!n.partOfGroup){var a=[(n.x0+n.x1)/2,(n.y0+n.y1)/2];"v"===y.orientation&&a.reverse(),m&&m.contains(a,!1,r,g)&&b.push({pointNumber:n.pointNumber})}}return b}},{}],935:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){for(var y=0;y<m.length;y++)m[y].i=y;g.mergeArray(b.text,m,"tx"),g.mergeArray(b.texttemplate,m,"txt"),g.mergeArray(b.hovertext,m,"htx"),g.mergeArray(b.customdata,m,"data"),g.mergeArray(b.textposition,m,"tp"),b.textfont&&(g.mergeArrayCastPositive(b.textfont.size,m,"ts"),g.mergeArray(b.textfont.color,m,"tc"),g.mergeArray(b.textfont.family,m,"tf"));var e=b.marker;if(e){g.mergeArrayCastPositive(e.size,m,"ms"),g.mergeArrayCastPositive(e.opacity,m,"mo"),g.mergeArray(e.symbol,m,"mx"),g.mergeArray(e.color,m,"mc");var r=e.line;e.line&&(g.mergeArray(r.color,m,"mlc"),g.mergeArrayCastPositive(r.width,m,"mlw"));var n=e.gradient;n&&"none"!==n.type&&(g.mergeArray(n.type,m,"mgt"),g.mergeArray(n.color,m,"mgc"))}}},{"../../lib":515}],936:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../components/colorscale/attributes"),e=v("../../plots/font_attributes"),r=v("../../components/drawing/attributes").dash,n=v("../../components/drawing/attributes").pattern,a=v("../../components/drawing"),t=v("./constants"),p=v("../../lib/extend").extendFlat;re.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:g("x"),yhoverformat:g("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:m({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:b({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:p({},r,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:n,marker:p({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:p({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},y("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},y("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../plots/cartesian/axes"),y=v("../../plots/cartesian/align_period"),e=v("../../constants/numerical").BADNUM,r=v("./subtypes"),n=v("./colorscale_calc"),a=v("./arrays_to_calcdata"),t=v("./calc_selection");function p(l,h,d,o,x,u,T){var _=h._length,w=l._fullLayout,M=d._id,I=o._id,S=w._firstScatter[f(h)]===h.uid,R=(c(h,w,d,o)||{}).orientation,O=h.fill;d._minDtick=0,o._minDtick=0;var C={padded:!0},D={padded:!0};T&&(C.ppad=D.ppad=T);var B=_<2||x[0]!==x[_-1]||u[0]!==u[_-1];B&&("tozerox"===O||"tonextx"===O&&(S||"h"===R))?C.tozero=!0:(h.error_y||{}).visible||"tonexty"!==O&&"tozeroy"!==O&&(r.hasMarkers(h)||r.hasText(h))||(C.padded=!1,C.ppad=0),B&&("tozeroy"===O||"tonexty"===O&&(S||"v"===R))?D.tozero=!0:"tonextx"!==O&&"tozerox"!==O||(D.padded=!1),M&&(h._extremes[M]=b.findExtremes(d,x,C)),I&&(h._extremes[I]=b.findExtremes(o,u,D))}function s(l,h){if(r.hasMarkers(l)){var d,o=l.marker,x=1.6*(l.marker.sizeref||1);if(d="area"===l.marker.sizemode?function(M){return Math.max(Math.sqrt((M||0)/x),3)}:function(M){return Math.max((M||0)/x,3)},m.isArrayOrTypedArray(o.size)){var u={type:"linear"};b.setConvert(u);for(var T=u.makeCalcdata(l.marker,"size"),_=new Array(h),w=0;w<h;w++)_[w]=d(T[w]);return _}return d(o.size)}}function i(l,h){var d=f(h),o=l._firstScatter;o[d]||(o[d]=h.uid)}function f(l){var h=l.stackgroup;return l.xaxis+l.yaxis+l.type+(h?"-"+h:"")}function c(l,h,d,o){var x=l.stackgroup;if(x){var u=h._scatterStackOpts[d._id+o._id][x],T="v"===u.orientation?o:d;return"linear"===T.type||"log"===T.type?u:void 0}}re.exports={calc:function(l,h){var d,o,x,u,T,_,w=l._fullLayout,M=b.getFromId(l,h.xaxis||"x"),I=b.getFromId(l,h.yaxis||"y"),S=M.makeCalcdata(h,"x"),R=I.makeCalcdata(h,"y"),O=y(h,M,"x",S),C=y(h,I,"y",R),D=O.vals,B=C.vals,z=h._length,Y=new Array(z),G=h.ids,J=c(h,w,M,I),te=!1;i(w,h);var X,K="x",ae="y";J?(m.pushUnique(J.traceIndices,h._expandedIndex),(d="v"===J.orientation)?(ae="s",X="x"):(K="s",X="y"),T="interpolate"===J.stackgaps):p(l,h,M,I,D,B,s(h,z));var U=!!h.xperiodalignment,V=!!h.yperiodalignment;for(o=0;o<z;o++){var q=Y[o]={},ie=g(D[o]),H=g(B[o]);ie&&H?(q[K]=D[o],q[ae]=B[o],U&&(q.orig_x=S[o],q.xEnd=O.ends[o],q.xStart=O.starts[o]),V&&(q.orig_y=R[o],q.yEnd=C.ends[o],q.yStart=C.starts[o])):J&&(d?ie:H)?(q[X]=d?D[o]:B[o],q.gap=!0,T?(q.s=e,te=!0):q.s=0):q[K]=q[ae]=e,G&&(q.id=String(G[o]))}if(a(Y,h),n(l,h),t(Y,h),J){for(o=0;o<Y.length;)Y[o][X]===e?Y.splice(o,1):o++;if(m.sort(Y,function(le,de){return le[X]-de[X]||le.i-de.i}),te){for(o=0;o<Y.length-1&&Y[o].gap;)o++;for((_=Y[o].s)||(_=Y[o].s=0),x=0;x<o;x++)Y[x].s=_;for(u=Y.length-1;u>o&&Y[u].gap;)u--;for(_=Y[u].s,x=Y.length-1;x>u;x--)Y[x].s=_;for(;o<u;)if(Y[++o].gap){for(x=o+1;Y[x].gap;)x++;for(var ee=Y[o-1][X],Q=Y[o-1].s,oe=(Y[x].s-Q)/(Y[x][X]-ee);o<x;)Y[o].s=Q+(Y[o][X]-ee)*oe,o++}}}return Y},calcMarkerSize:s,calcAxisExpansion:p,setFirstScatter:i,getStackOpts:c}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){g.isArrayOrTypedArray(b.selectedpoints)&&g.tagSelected(m,b)}},{"../../lib":515}],939:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/helpers").hasColorscale,m=v("../../components/colorscale/calc"),b=v("./subtypes");re.exports=function(y,e){b.hasLines(e)&&g(e,"line")&&m(y,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),b.hasMarkers(e)&&(g(e,"marker")&&m(y,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),g(e,"marker.line")&&m(y,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(v,re,ne){"use strict";re.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(v,re,ne){"use strict";var g=v("./calc");function m(b,y,e,r,n,a,t){n[r]=!0;var i,f,l,h,d,p={i:null,gap:!0,s:0};if(p[t]=e,b.splice(y,0,p),y&&e===b[y-1][t]){var s=b[y-1];p.s=s.s,p.i=s.i,p.gap=s.gap}else a&&(p.s=(l=t,h=(i=b)[(f=y)-1],(d=i[f+1])?h?h.s+(d.s-h.s)*(e-h[l])/(d[l]-h[l]):d.s:h.s));y||(b[0].t=b[1].t,b[0].trace=b[1].trace,delete b[1].t,delete b[1].trace)}re.exports=function(b,y){var e=y.xaxis,r=y.yaxis,a=b._fullLayout._scatterStackOpts[e._id+r._id];if(a){var t,p,s,i,f,c,l,h,d,o,x,u,T,_,w,M=b.calcdata;for(var I in a){var S=(o=a[I]).traceIndices;if(S.length){for(x="interpolate"===o.stackgaps,u=o.groupnorm,"v"===o.orientation?(T="x",_="y"):(T="y",_="x"),w=new Array(S.length),t=0;t<w.length;t++)w[t]=!1;c=M[S[0]];var R=new Array(c.length);for(t=0;t<c.length;t++)R[t]=c[t][T];for(t=1;t<S.length;t++){for(f=M[S[t]],p=s=0;p<f.length;p++){for(l=f[p][T];l>R[s]&&s<R.length;s++)m(f,p,R[s],t,w,x,T),p++;if(l!==R[s]){for(i=0;i<t;i++)m(M[S[i]],s,l,i,w,x,T);R.splice(s,0,l)}s++}for(;s<R.length;s++)m(f,p,R[s],t,w,x,T),p++}var O=R.length;for(p=0;p<c.length;p++){for(h=c[p][_]=c[p].s,t=1;t<S.length;t++)(f=M[S[t]])[0].trace._rawLength=f[0].trace._length,f[0].trace._length=O,f[p][_]=h+=f[p].s;if(u)for(d=("fraction"===u?h:h/100)||1,t=0;t<S.length;t++){var C=M[S[t]][p];C[_]/=d,C.sNorm=C.s/d}}for(t=0;t<S.length;t++){var D=(f=M[S[t]])[0].trace,B=g.calcMarkerSize(D,D._rawLength),z=Array.isArray(B);if(B&&w[t]||z){var Y=B;for(B=new Array(O),p=0;p<O;p++)B[p]=f[p].gap?0:z?Y[f[p].i]:Y}var G=new Array(O),J=new Array(O);for(p=0;p<O;p++)G[p]=f[p].x,J[p]=f[p].y;g.calcAxisExpansion(b,D,e,r,G,J,B),f[0].t.orientation=o.orientation}}}}}},{"./calc":937}],942:[function(v,re,ne){"use strict";re.exports=function(g){for(var m=0;m<g.length;m++){var b=g[m];if("scatter"===b.type){var y=b.fill;if("none"!==y&&"toself"!==y&&(b.opacity=void 0,"tonexty"===y||"tonextx"===y))for(var e=m-1;e>=0;e--){var r=g[e];if("scatter"===r.type&&r.xaxis===b.xaxis&&r.yaxis===b.yaxis){r.opacity=void 0;break}}}}}},{}],943:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry"),b=v("./attributes"),y=v("./constants"),e=v("./subtypes"),r=v("./xy_defaults"),n=v("./period_defaults"),a=v("./stack_defaults"),t=v("./marker_defaults"),p=v("./line_defaults"),s=v("./line_shape_defaults"),i=v("./text_defaults"),f=v("./fillcolor_defaults"),c=v("../../lib").coercePattern;re.exports=function(l,h,d,o){function x(R,O){return g.coerce(l,h,b,R,O)}var u=r(l,h,o,x);if(u||(h.visible=!1),h.visible){n(l,h,o,x),x("xhoverformat"),x("yhoverformat");var T=a(l,h,o,x),_=!T&&u<y.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("mode",_),e.hasLines(h)&&(p(l,h,d,o,x),s(l,h,x),x("connectgaps"),x("line.simplify")),e.hasMarkers(h)&&t(l,h,d,o,x,{gradient:!0}),e.hasText(h)&&(x("texttemplate"),i(l,h,o,x));var w=[];(e.hasMarkers(h)||e.hasText(h))&&(x("cliponaxis"),x("marker.maxdisplayed"),w.push("points")),x("fill",T?T.fillDflt:"none"),"none"!==h.fill&&(f(l,h,d,x),e.hasLines(h)||s(l,h,x),c(x,"fillpattern",h.fillcolor,!1));var M=(h.line||{}).color,I=(h.marker||{}).color;"tonext"!==h.fill&&"toself"!==h.fill||w.push("fills"),x("hoveron",w.join("+")||"points"),"fills"!==h.hoveron&&x("hovertemplate");var S=m.getComponentMethod("errorbars","supplyDefaults");S(l,h,M||I||d,{axis:"y"}),S(l,h,M||I||d,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(h,x)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("../../lib").isArrayOrTypedArray;re.exports=function(b,y,e,r){var n=!1;if(y.marker){var a=y.marker.color,t=(y.marker.line||{}).color;a&&!m(a)?n=a:t&&!m(t)&&(n=t)}r("fillcolor",g.addOpacity((y.line||{}).color||n||e,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes");re.exports=function(m,b,y){var e={},r={_fullLayout:y},n=g.getFromTrace(r,b,"x"),a=g.getFromTrace(r,b,"y");return e.xLabel=g.tickText(n,n.c2l(m.x),!0).text,e.yLabel=g.tickText(a,a.c2l(m.y),!0).text,e}},{"../../plots/cartesian/axes":566}],946:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("./subtypes");re.exports=function(b,y){var e,r;if("lines"===b.mode)return(e=b.line.color)&&g.opacity(e)?e:b.fillcolor;if("none"===b.mode)return b.fill?b.fillcolor:"";var n=y.mcc||(b.marker||{}).color,a=y.mlcc||((b.marker||{}).line||{}).color;return(r=n&&g.opacity(n)?n:a&&g.opacity(a)&&(y.mlw||((b.marker||{}).line||{}).width)?a:"")?g.opacity(r)<.3?g.addOpacity(r,.3):r:(e=(b.line||{}).color)&&g.opacity(e)&&m.hasLines(b)&&b.line.width?e:b.fillcolor}},{"../../components/color":367,"./subtypes":961}],947:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/fx"),b=v("../../registry"),y=v("./get_trace_color"),e=v("../../components/color"),r=g.fillText;re.exports=function(n,a,t,p){var s=n.cd,i=s[0].trace,f=n.xa,c=n.ya,l=f.c2p(a),h=c.c2p(t),d=[l,h],o=i.hoveron||"",x=-1!==i.mode.indexOf("markers")?3:.5,u=!!i.xperiodalignment,T=!!i.yperiodalignment;if(-1!==o.indexOf("points")){var _=function(fe){var be=Math.max(x,fe.mrc||0),he=f.c2p(fe.x)-l,_e=c.c2p(fe.y)-h;return Math.max(Math.sqrt(he*he+_e*_e)-be,1-x/be)},w=m.getDistanceFunction(p,function(fe){if(u){var be=f.c2p(fe.xStart),he=f.c2p(fe.xEnd);return l>=Math.min(be,he)&&l<=Math.max(be,he)?0:1/0}var _e=Math.max(3,fe.mrc||0),Ce=1-1/_e,Ee=Math.abs(f.c2p(fe.x)-l);return Ee<_e?Ce*Ee/_e:Ee-_e+Ce},function(fe){if(T){var be=c.c2p(fe.yStart),he=c.c2p(fe.yEnd);return h>=Math.min(be,he)&&h<=Math.max(be,he)?0:1/0}var _e=Math.max(3,fe.mrc||0),Ce=1-1/_e,Ee=Math.abs(c.c2p(fe.y)-h);return Ee<_e?Ce*Ee/_e:Ee-_e+Ce},_);if(m.getClosest(s,w,n),!1!==n.index){var M=s[n.index],I=f.c2p(M.x,!0),S=c.c2p(M.y,!0),R=M.mrc||1;n.index=M.i;var O=s[0].t.orientation,C=O&&(M.sNorm||M.s),D="h"===O?C:void 0!==M.orig_x?M.orig_x:M.x,B="v"===O?C:void 0!==M.orig_y?M.orig_y:M.y;return g.extendFlat(n,{color:y(i,M),x0:I-R,x1:I+R,xLabelVal:D,y0:S-R,y1:S+R,yLabelVal:B,spikeDistance:_(M),hovertemplate:i.hovertemplate}),r(M,i,n),b.getComponentMethod("errorbars","hoverInfo")(M,i,n),[n]}}if(-1!==o.indexOf("fills")&&i._polygons){var z,Y,G,J,te,X,ae,U,V=i._polygons,q=[],ie=!1,H=1/0,ee=-1/0,Q=1/0,oe=-1/0;for(z=0;z<V.length;z++)(G=V[z]).contains(d)&&(ie=!ie,q.push(G),Q=Math.min(Q,G.ymin),oe=Math.max(oe,G.ymax));if(ie){var le=((Q=Math.max(Q,0))+(oe=Math.min(oe,c._length)))/2;for(z=0;z<q.length;z++)for(J=q[z].pts,Y=1;Y<J.length;Y++)(ae=J[Y-1][1])>le!=(U=J[Y][1])>=le&&(X=J[Y-1][0],U-ae&&(te=X+(J[Y][0]-X)*(le-ae)/(U-ae),H=Math.min(H,te),ee=Math.max(ee,te)));H=Math.max(H,0),ee=Math.min(ee,f._length);var de=e.defaultLine;return e.opacity(i.fillcolor)?de=i.fillcolor:e.opacity((i.line||{}).color)&&(de=i.line.color),g.extendFlat(n,{distance:n.maxHoverDistance,x0:H,x1:ee,y0:le,y1:le,color:de,hovertemplate:!1}),delete n.index,n.text=i.text&&!Array.isArray(i.text)?String(i.text):i.name,[n]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(v,re,ne){"use strict";var g=v("./subtypes");re.exports={hasLines:g.hasLines,hasMarkers:g.hasMarkers,hasText:g.hasText,isBubble:g.isBubble,attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("./cross_trace_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./cross_trace_calc"),arraysToCalcdata:v("./arrays_to_calcdata"),plot:v("./plot"),colorbar:v("./marker_colorbar"),formatLabels:v("./format_labels"),style:v("./style").style,styleOnSelect:v("./style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(v,re,ne){"use strict";var g=v("../../lib").isArrayOrTypedArray,m=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults");re.exports=function(y,e,r,n,a,t){var p=(y.marker||{}).color;a("line.color",r),m(y,"line")?b(y,e,n,a,{prefix:"line.",cLetter:"c"}):a("line.color",!g(p)&&p||r),a("line.width"),(t||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(v,re,ne){"use strict";var g=v("../../constants/numerical"),m=g.BADNUM,b=g.LOG_CLIP,y=b+.5,e=b-.5,r=v("../../lib"),n=r.segmentsIntersect,a=r.constrain,t=v("./constants");re.exports=function(p,s){var i,f,c,l,h,d,o,x,u,T,_,w,M,I,S,R,O,C,D=s.xaxis,B=s.yaxis,z="log"===D.type,Y="log"===B.type,G=D._length,J=B._length,te=s.connectGaps,X=s.baseTolerance,K=s.shape,ae="linear"===K,U=s.fill&&"none"!==s.fill,V=[],q=t.minTolerance,ie=p.length,H=new Array(ie),ee=0;function Q(Ye){var lt=p[Ye];if(!lt)return!1;var mt=s.linearized?D.l2p(lt.x):D.c2p(lt.x),Tt=s.linearized?B.l2p(lt.y):B.c2p(lt.y);if(mt===m){if(z&&(mt=D.c2p(lt.x,!0)),mt===m)return!1;Y&&Tt===m&&(mt*=Math.abs(D._m*J*(D._m>0?y:e)/(B._m*G*(B._m>0?y:e)))),mt*=1e3}if(Tt===m){if(Y&&(Tt=B.c2p(lt.y,!0)),Tt===m)return!1;Tt*=1e3}return[mt,Tt]}function oe(Ye,lt,mt,Tt){var It=mt-Ye,Ct=Tt-lt,ct=.5-Ye,at=.5-lt,St=It*It+Ct*Ct,Xt=It*ct+Ct*at;if(Xt>0&&Xt<St){var tn=ct*Ct-at*It;if(tn*tn<St)return!0}}function le(Ye,lt){var mt=Ye[0]/G,Tt=Ye[1]/J,It=Math.max(0,-mt,mt-1,-Tt,Tt-1);return It&&void 0!==O&&oe(mt,Tt,O,C)&&(It=0),It&&lt&&oe(mt,Tt,lt[0]/G,lt[1]/J)&&(It=0),(1+t.toleranceGrowth*It)*X}function de(Ye,lt){var mt=Ye[0]-lt[0],Tt=Ye[1]-lt[1];return Math.sqrt(mt*mt+Tt*Tt)}var fe,be,he,_e,Ce,Ee,Ae,ze=t.maxScreensAway,ve=-G*ze,Te=G*(1+ze),Ie=-J*ze,De=J*(1+ze),Fe=[[ve,Ie,Te,Ie],[Te,Ie,Te,De],[Te,De,ve,De],[ve,De,ve,Ie]];function Ue(Ye){if(Ye[0]<ve||Ye[0]>Te||Ye[1]<Ie||Ye[1]>De)return[a(Ye[0],ve,Te),a(Ye[1],Ie,De)]}function qe(Ye,lt){return Ye[0]===lt[0]&&(Ye[0]===ve||Ye[0]===Te)||Ye[1]===lt[1]&&(Ye[1]===Ie||Ye[1]===De)||void 0}function je(Ye,lt,mt){return function(Tt,It){var Ct=Ue(Tt),ct=Ue(It),at=[];if(Ct&&ct&&qe(Ct,ct))return at;Ct&&at.push(Ct),ct&&at.push(ct);var St=2*r.constrain((Tt[Ye]+It[Ye])/2,lt,mt)-((Ct||Tt)[Ye]+(ct||It)[Ye]);return St&&((Ct&&ct?St>0==Ct[Ye]>ct[Ye]?Ct:ct:Ct||ct)[Ye]+=St),at}}function rt(Ye){var lt=Ye[0],mt=Ye[1],Tt=lt===H[ee-1][0],It=mt===H[ee-1][1];if(!Tt||!It)if(ee>1){var Ct=lt===H[ee-2][0],ct=mt===H[ee-2][1];Tt&&(lt===ve||lt===Te)&&Ct?ct?ee--:H[ee-1]=Ye:It&&(mt===Ie||mt===De)&&ct?Ct?ee--:H[ee-1]=Ye:H[ee++]=Ye}else H[ee++]=Ye}function Ne(Ye){H[ee-1][0]!==Ye[0]&&H[ee-1][1]!==Ye[1]&&rt([he,_e]),rt(Ye),Ce=null,he=_e=0}function Be(Ye){if(O=Ye[0]/G,C=Ye[1]/J,be=Ye[1]<Ie?Ie:Ye[1]>De?De:0,(fe=Ye[0]<ve?ve:Ye[0]>Te?Te:0)||be){if(ee)if(Ce){var lt=Ae(Ce,Ye);lt.length>1&&(Ne(lt[0]),H[ee++]=lt[1])}else Ee=Ae(H[ee-1],Ye)[0],H[ee++]=Ee;else H[ee++]=[fe||Ye[0],be||Ye[1]];var mt=H[ee-1];fe&&be&&(mt[0]!==fe||mt[1]!==be)?(Ce&&(he!==fe&&_e!==be?rt(he&&_e?(Ct=(It=Ye)[0]-(Tt=Ce)[0],ct=(It[1]-Tt[1])/Ct,(Tt[1]*It[0]-It[1]*Tt[0])/Ct>0?[ct>0?ve:Te,De]:[ct>0?Te:ve,Ie]):[he||fe,_e||be]):he&&_e&&rt([he,_e])),rt([fe,be])):he-fe&&_e-be&&rt([fe||he,be||_e]),Ce=Ye,he=fe,_e=be}else Ce&&Ne(Ae(Ce,Ye)[0]),H[ee++]=Ye;var Tt,It,Ct,ct}for("linear"===K||"spline"===K?Ae=function(Ye,lt){for(var mt=[],Tt=0,It=0;It<4;It++){var Ct=Fe[It],ct=n(Ye[0],Ye[1],lt[0],lt[1],Ct[0],Ct[1],Ct[2],Ct[3]);ct&&(!Tt||Math.abs(ct.x-mt[0][0])>1||Math.abs(ct.y-mt[0][1])>1)&&(ct=[ct.x,ct.y],Tt&&de(ct,Ye)<de(mt[0],Ye)?mt.unshift(ct):mt.push(ct),Tt++)}return mt}:"hv"===K||"vh"===K?Ae=function(Ye,lt){var mt=[],Tt=Ue(Ye),It=Ue(lt);return Tt&&It&&qe(Tt,It)||(Tt&&mt.push(Tt),It&&mt.push(It)),mt}:"hvh"===K?Ae=je(0,ve,Te):"vhv"===K&&(Ae=je(1,Ie,De)),i=0;i<ie;i++)if(f=Q(i)){for(ee=0,Ce=null,Be(f),i++;i<ie;i++){if(!(l=Q(i))){if(te)continue;break}if(ae&&s.simplify){var We=Q(i+1);if(T=de(l,f),U&&(0===ee||ee===ie-1)||!(T<le(l,We)*q)){for(x=[(l[0]-f[0])/T,(l[1]-f[1])/T],h=f,_=T,w=I=S=0,o=!1,c=l,i++;i<p.length;i++){if(d=We,We=Q(i+1),!d){if(te)continue;break}if(R=(u=[d[0]-f[0],d[1]-f[1]])[0]*x[1]-u[1]*x[0],I=Math.min(I,R),(S=Math.max(S,R))-I>le(d,We))break;c=d,(M=u[0]*x[0]+u[1]*x[1])>_?(_=M,l=d,o=!1):M<w&&(w=M,h=d,o=!0)}if(o?(Be(l),c!==h&&Be(h)):(h!==f&&Be(h),c!==l&&Be(l)),Be(c),i>=p.length||!d)break;Be(d),f=d}}else Be(l)}Ce&&rt([he||Ce[0],_e||Ce[1]]),V.push(H.slice(0,ee))}return V}},{"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(v,re,ne){"use strict";re.exports=function(g,m,b){"spline"===b("line.shape")&&b("line.smoothing")}},{}],952:[function(v,re,ne){"use strict";var g={tonextx:1,tonexty:1,tonext:1};re.exports=function(m,b,y){var e,r,n,a,t,p={},s=!1,i=-1,f=0,c=-1;for(r=0;r<y.length;r++)(n=(e=y[r][0].trace).stackgroup||"")?n in p?t=p[n]:(t=p[n]=f,f++):e.fill in g&&c>=0?t=c:(t=c=f,f++),t<i&&(s=!0),e._groupIndex=i=t;var l=y.slice();s&&l.sort(function(d,o){var x=d[0].trace,u=o[0].trace;return x._groupIndex-u._groupIndex||x.index-u.index});var h={};for(r=0;r<l.length;r++)n=(e=l[r][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in g&&(e._prevtrace=(a=h[n])||null,a&&(a._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),h[n]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return l}},{}],953:[function(v,re,ne){"use strict";var g=v("fast-isnumeric");re.exports=function(m,b){b||(b=2);var y=m.marker,e=y.sizeref||1,r=y.sizemin||0,n="area"===y.sizemode?function(a){return Math.sqrt(a/e)}:function(a){return a/e};return function(a){var t=n(a/b);return g(t)&&t>0?Math.max(t,r):0}}},{"fast-isnumeric":190}],954:[function(v,re,ne){"use strict";re.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("../../components/colorscale/helpers").hasColorscale,b=v("../../components/colorscale/defaults"),y=v("./subtypes");re.exports=function(e,r,n,a,t,p){var s=y.isBubble(e),i=(e.line||{}).color;p=p||{},i&&(n=i),t("marker.symbol"),t("marker.opacity",s?.7:1),t("marker.size"),t("marker.color",n),m(e,"marker")&&b(e,r,a,t,{prefix:"marker.",cLetter:"c"}),p.noSelect||(t("selected.marker.color"),t("unselected.marker.color"),t("selected.marker.size"),t("unselected.marker.size")),p.noLine||(t("marker.line.color",i&&!Array.isArray(i)&&r.marker.color!==i?i:s?g.background:g.defaultLine),m(e,"marker.line")&&b(e,r,a,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width",s?1:0)),s&&(t("marker.sizeref"),t("marker.sizemin"),t("marker.sizemode")),p.gradient&&"none"!==t("marker.gradient.type")&&t("marker.gradient.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(v,re,ne){"use strict";var g=v("../../lib").dateTick0,m=v("../../constants/numerical").ONEWEEK;function b(y,e){return g(e,y%m==0?1:0)}re.exports=function(y,e,r,n,a){if(a||(a={x:!0,y:!0}),a.x){var t=n("xperiod");t&&(n("xperiod0",b(t,e.xcalendar)),n("xperiodalignment"))}if(a.y){var p=n("yperiod");p&&(n("yperiod0",b(p,e.ycalendar)),n("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../lib"),y=b.ensureSingle,e=b.identity,r=v("../../components/drawing"),n=v("./subtypes"),a=v("./line_points"),t=v("./link_traces"),p=v("../../lib/polygon").tester;function s(i,f,c,l,h,d,o){var x;!function(Te,Ie,De,Fe,Ue){var qe=De.xaxis,je=De.yaxis,rt=g.extent(b.simpleMap(qe.range,qe.r2c)),Ne=g.extent(b.simpleMap(je.range,je.r2c)),Be=Fe[0].trace;if(n.hasMarkers(Be)){var We=Be.marker.maxdisplayed;if(0!==We){var Ye=Fe.filter(function(It){return It.x>=rt[0]&&It.x<=rt[1]&&It.y>=Ne[0]&&It.y<=Ne[1]}),lt=Math.ceil(Ye.length/We),mt=0;Ue.forEach(function(It,Ct){var ct=It[0].trace;n.hasMarkers(ct)&&ct.marker.maxdisplayed>0&&Ct<Ie&&mt++});var Tt=Math.round(mt*lt/3+Math.floor(mt/3)*lt/7.1);Fe.forEach(function(It){delete It.vis}),Ye.forEach(function(It,Ct){0===Math.round((Ct+Tt)%lt)&&(It.vis=!0)})}}}(0,f,c,l,h);var u=!!o&&o.duration>0;function T(Te){return u?Te.transition():Te}var _=c.xaxis,w=c.yaxis,M=l[0].trace,I=M.line,S=g.select(d),R=y(S,"g","errorbars"),O=y(S,"g","lines"),C=y(S,"g","points"),D=y(S,"g","text");if(m.getComponentMethod("errorbars","plot")(i,R,c,o),!0===M.visible){var B,z;T(S).style("opacity",M.opacity);var Y=M.fill.charAt(M.fill.length-1);"x"!==Y&&"y"!==Y&&(Y=""),l[0][c.isRangePlot?"nodeRangePlot3":"node3"]=S;var G,J,te="",X=[],K=M._prevtrace;K&&(te=K._prevRevpath||"",z=K._nextFill,X=K._polygons);var ae,U,V,q,ie,H,ee,Q="",oe="",le=[],de=b.noop;if(B=M._ownFill,n.hasLines(M)||"none"!==M.fill){for(z&&z.datum(l),-1!==["hv","vh","hvh","vhv"].indexOf(I.shape)?(ae=r.steps(I.shape),U=r.steps(I.shape.split("").reverse().join(""))):ae=U="spline"===I.shape?function(Te){var Ie=Te[Te.length-1];return Te.length>1&&Te[0][0]===Ie[0]&&Te[0][1]===Ie[1]?r.smoothclosed(Te.slice(1),I.smoothing):r.smoothopen(Te,I.smoothing)}:function(Te){return"M"+Te.join("L")},V=function(Te){return U(Te.reverse())},le=a(l,{xaxis:_,yaxis:w,connectGaps:M.connectgaps,baseTolerance:Math.max(I.width||1,3)/4,shape:I.shape,simplify:I.simplify,fill:M.fill}),ee=M._polygons=new Array(le.length),x=0;x<le.length;x++)M._polygons[x]=p(le[x]);le.length&&(q=le[0][0],H=(ie=le[le.length-1])[ie.length-1]),de=function(Te){return function(Ie){if(G=ae(Ie),J=V(Ie),Q?Y?(Q+="L"+G.substr(1),oe=J+"L"+oe.substr(1)):(Q+="Z"+G,oe=J+"Z"+oe):(Q=G,oe=J),n.hasLines(M)&&Ie.length>1){var De=g.select(this);if(De.datum(l),Te)T(De.style("opacity",0).attr("d",G).call(r.lineGroupStyle)).style("opacity",1);else{var Fe=T(De);Fe.attr("d",G),r.singleLineStyle(l,Fe)}}}}}var fe=O.selectAll(".js-line").data(le);T(fe.exit()).style("opacity",0).remove(),fe.each(de(!1)),fe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(r.lineGroupStyle).each(de(!0)),r.setClipUrl(fe,c.layerClipId,i),le.length?(B?(B.datum(l),q&&H&&(Y?("y"===Y?q[1]=H[1]=w.c2p(0,!0):"x"===Y&&(q[0]=H[0]=_.c2p(0,!0)),T(B).attr("d","M"+H+"L"+q+"L"+Q.substr(1)).call(r.singleFillStyle,i)):T(B).attr("d",Q+"Z").call(r.singleFillStyle,i))):z&&("tonext"===M.fill.substr(0,6)&&Q&&te?("tonext"===M.fill?T(z).attr("d",Q+"Z"+te+"Z").call(r.singleFillStyle,i):T(z).attr("d",Q+"L"+te.substr(1)+"Z").call(r.singleFillStyle,i),M._polygons=M._polygons.concat(X)):(he(z),M._polygons=null)),M._prevRevpath=oe,M._prevPolygons=ee):(B?he(B):z&&he(z),M._polygons=M._prevRevpath=M._prevPolygons=null),C.datum(l),D.datum(l),function(Te,Ie,De){var Fe,Ue=De[0].trace,qe=n.hasMarkers(Ue),je=n.hasText(Ue),rt=function ze(Te){if(Te.ids)return Ae}(Ue),Ne=ve,Be=ve;if(qe||je){var We=e,Ye=Ue.stackgroup,lt=Ye&&"infer zero"===i._fullLayout._scatterStackOpts[_._id+w._id][Ye].stackgaps;Ue.marker.maxdisplayed||Ue._needsCull?We=lt?Ce:_e:Ye&&!lt&&(We=Ee),qe&&(Ne=We),je&&(Be=We)}var mt,Tt=(Fe=Te.selectAll("path.point").data(Ne,rt)).enter().append("path").classed("point",!0);u&&Tt.call(r.pointStyle,Ue,i).call(r.translatePoints,_,w).style("opacity",0).transition().style("opacity",1),Fe.order(),qe&&(mt=r.makePointStyleFns(Ue)),Fe.each(function(It){var Ct=g.select(this),ct=T(Ct);r.translatePoint(It,ct,_,w)?(r.singlePointStyle(It,ct,Ue,mt,i),c.layerClipId&&r.hideOutsideRangePoint(It,ct,_,w,Ue.xcalendar,Ue.ycalendar),Ue.customdata&&Ct.classed("plotly-customdata",null!=It.data)):ct.remove()}),u?Fe.exit().transition().style("opacity",0).remove():Fe.exit().remove(),(Fe=Ie.selectAll("g").data(Be,rt)).enter().append("g").classed("textpoint",!0).append("text"),Fe.order(),Fe.each(function(It){var Ct=g.select(this),ct=T(Ct.select("text"));r.translatePoint(It,ct,_,w)?c.layerClipId&&r.hideOutsideRangePoint(It,Ct,_,w,Ue.xcalendar,Ue.ycalendar):Ct.remove()}),Fe.selectAll("text").call(r.textPointStyle,Ue,i).each(function(It){var Ct=_.c2p(It.x),ct=w.c2p(It.y);g.select(this).selectAll("tspan.line").each(function(){T(g.select(this)).attr({x:Ct,y:ct})})}),Fe.exit().remove()}(C,D,l);var be=!1===M.cliponaxis?null:c.layerClipId;r.setClipUrl(C,be,i),r.setClipUrl(D,be,i)}function he(Te){T(Te).attr("d","M0,0Z")}function _e(Te){return Te.filter(function(Ie){return!Ie.gap&&Ie.vis})}function Ce(Te){return Te.filter(function(Ie){return Ie.vis})}function Ee(Te){return Te.filter(function(Ie){return!Ie.gap})}function Ae(Te){return Te.id}function ve(){return!1}}re.exports=function(i,f,c,l,h,d){var o,x,w,I,u=!h,T=!!h&&h.duration>0,_=t(i,f,c);(o=l.selectAll("g.trace").data(_,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),o.order(),w=i,I=f,o.each(function(S){var R=y(g.select(this),"g","fills");r.setClipUrl(R,I.layerClipId,w);var O=S[0].trace,C=[];O._ownfill&&C.push("_ownFill"),O._nexttrace&&C.push("_nextFill");var D=R.selectAll("g").data(C,e);D.enter().append("g"),D.exit().each(function(B){O[B]=null}).remove(),D.order().each(function(B){O[B]=y(g.select(this),"path","js-fill")})}),T?(d&&(x=d()),g.transition().duration(h.duration).ease(h.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()}).each(function(){l.selectAll("g.trace").each(function(w,M){s(i,M,f,w,_,this,h)})})):o.each(function(w,M){s(i,M,f,w,_,this,h)}),u&&o.exit().remove(),l.selectAll("path:not([d])").remove()}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(v,re,ne){"use strict";var g=v("./subtypes");re.exports=function(m,b){var y,e,r,n,a=m.cd,t=m.xaxis,p=m.yaxis,s=[],i=a[0].trace;if(!g.hasMarkers(i)&&!g.hasText(i))return[];if(!1===b)for(y=0;y<a.length;y++)a[y].selected=0;else for(y=0;y<a.length;y++)r=t.c2p((e=a[y]).x),n=p.c2p(e.y),null!==e.i&&b.contains([r,n],!1,y,m)?(s.push({pointNumber:e.i,x:t.c2d(e.x),y:p.c2d(e.y)}),e.selected=1):e.selected=0;return s}},{"./subtypes":961}],959:[function(v,re,ne){"use strict";var g=["orientation","groupnorm","stackgaps"];re.exports=function(m,b,y,e){var r=y._scatterStackOpts,n=e("stackgroup");if(n){var a=b.xaxis+b.yaxis,t=r[a];t||(t=r[a]={});var p=t[n],s=!1;p?p.traces.push(b):(p=t[n]={traceIndices:[],traces:[b]},s=!0);for(var i={orientation:b.x&&!b.y?"h":"v"},f=0;f<g.length;f++){var c=g[f],l=c+"Found";if(!p[l]){var h=void 0!==m[c],d="orientation"===c;if((h||s)&&(p[c]=e(c,i[c]),d&&(p.fillDflt="h"===p[c]?"tonextx":"tonexty"),h&&(p[l]=!0,!s&&(delete p.traces[0][c],d))))for(var o=0;o<p.traces.length-1;o++){var x=p.traces[o];x._input.fill!==x.fill&&(x.fill=p.fillDflt)}}}return p}}},{}],960:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("../../registry");function y(r,n,a){m.pointStyle(r.selectAll("path.point"),n,a)}function e(r,n,a){m.textPointStyle(r.selectAll("text"),n,a)}re.exports={style:function(r){var n=g.select(r).selectAll("g.trace.scatter");n.style("opacity",function(a){return a[0].trace.opacity}),n.selectAll("g.points").each(function(a){y(g.select(this),a.trace||a[0].trace,r)}),n.selectAll("g.text").each(function(a){e(g.select(this),a.trace||a[0].trace,r)}),n.selectAll("g.trace path.js-line").call(m.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(m.fillGroupStyle,r),b.getComponentMethod("errorbars","style")(n)},stylePoints:y,styleText:e,styleOnSelect:function(r,n,a){var t=n[0].trace;t.selectedpoints?(m.selectedPointStyle(a.selectAll("path.point"),t),m.selectedTextStyle(a.selectAll("text"),t)):(y(a,t,r),e(a,t,r))}}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports={hasLines:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("lines")},hasMarkers:function(m){return m.visible&&(m.mode&&-1!==m.mode.indexOf("markers")||"splom"===m.type)},hasText:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("text")},isBubble:function(m){return g.isPlainObject(m.marker)&&g.isArrayOrTypedArray(m.marker.size)}}},{"../../lib":515}],962:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b,y,e,r){r=r||{},e("textposition"),g.coerceFont(e,"textfont",y.font),r.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry");re.exports=function(b,y,e,r){var n,a=r("x"),t=r("y");if(m.getComponentMethod("calendars","handleTraceDefaults")(b,y,["x","y"],e),a){var p=g.minRowLength(a);t?n=Math.min(p,g.minRowLength(t)):(n=p,r("y0"),r("dy"))}else{if(!t)return 0;n=g.minRowLength(t),r("x0"),r("dx")}return y._length=n,n}},{"../../lib":515,"../../registry":647}],964:[function(v,re,ne){"use strict";var g=v("../scatter/attributes"),m=v("../../components/colorscale/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/template_attributes").texttemplateAttrs,r=v("../../plots/attributes"),n=v("../../constants/gl3d_dashes"),a=v("../../constants/gl3d_markers"),t=v("../../lib/extend").extendFlat,p=v("../../plot_api/edit_types").overrideAll,s=v("../../lib/sort_object_keys"),f=g.marker,c=f.line,l=t({width:g.line.width,dash:{valType:"enumerated",values:s(n),dflt:"solid"}},m("line")),h=re.exports=p({x:g.x,y:g.y,z:{valType:"data_array"},text:t({},g.text,{}),texttemplate:e({},{}),hovertext:t({},g.hovertext,{}),hovertemplate:y(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),mode:t({},g.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:g.connectgaps,line:l,marker:t({symbol:{valType:"enumerated",values:s(a),dflt:"circle",arrayOk:!0},size:t({},f.size,{dflt:8}),sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:t({},f.opacity,{arrayOk:!1}),colorbar:f.colorbar,line:t({width:t({},c.width,{arrayOk:!1})},m("marker.line"))},m("marker")),textposition:t({},g.textposition,{dflt:"top center"}),textfont:{color:g.textfont.color,size:g.textfont.size,family:t({},g.textfont.family,{arrayOk:!1})},opacity:r.opacity,hoverinfo:t({},r.hoverinfo)},"calc","nested");h.x.editType=h.y.editType=h.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(v,re,ne){"use strict";var g=v("../scatter/arrays_to_calcdata"),m=v("../scatter/colorscale_calc");re.exports=function(b,y){var e=[{x:!1,y:!1,trace:y,t:{}}];return g(e,y),m(b,y),e}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(v,re,ne){"use strict";var g=v("../../registry");function m(b,y,e,r){if(!y||!y.visible)return null;for(var n=g.getComponentMethod("errorbars","makeComputeError")(y),a=new Array(b.length),t=0;t<b.length;t++){var p=n(+b[t],t);if("log"===r.type){var s=r.c2l(b[t]),i=b[t]-p[0],f=b[t]+p[1];if(a[t]=[(r.c2l(i,!0)-s)*e,(r.c2l(f,!0)-s)*e],i>0){var c=r.c2l(i);r._lowerLogErrorBound||(r._lowerLogErrorBound=c),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,c)}}else a[t]=[-p[0]*e,p[1]*e]}return a}re.exports=function(b,y,e){var r=[m(b.x,b.error_x,y[0],e.xaxis),m(b.y,b.error_y,y[1],e.yaxis),m(b.z,b.error_z,y[2],e.zaxis)],n=function(f){for(var c=0;c<f.length;c++)if(f[c])return f[c].length;return 0}(r);if(0===n)return null;for(var a=new Array(n),t=0;t<n;t++){for(var p=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(r[s])for(var i=0;i<2;i++)p[i][s]=r[s][t][i];a[t]=p}return a}},{"../../registry":647}],967:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_line3d,m=v("../../../stackgl_modules").gl_scatter3d,b=v("../../../stackgl_modules").gl_error3d,y=v("../../../stackgl_modules").gl_mesh3d,e=v("../../../stackgl_modules").delaunay_triangulate,r=v("../../lib"),n=v("../../lib/str2rgbarray"),a=v("../../lib/gl_format_color").formatColor,t=v("../scatter/make_bubble_size_func"),p=v("../../constants/gl3d_dashes"),s=v("../../constants/gl3d_markers"),i=v("../../plots/cartesian/axes"),f=v("../../components/fx/helpers").appendArrayPointValue,c=v("./calc_errors");function l(I,S){this.scene=I,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=l.prototype;function d(I){return null==I?0:I.indexOf("left")>-1?-1:I.indexOf("right")>-1?1:0}function o(I){return null==I?0:I.indexOf("top")>-1?-1:I.indexOf("bottom")>-1?1:0}function x(I,S){return S(4*I)}function u(I){return s[I]}function T(I,S,R,O,C){var D=null;if(r.isArrayOrTypedArray(I)){D=[];for(var B=0;B<S;B++)D[B]=void 0===I[B]?O:R(I[B],C)}else D=R(I,r.identity);return D}function w(I){if(r.isArrayOrTypedArray(I)){var S=I[0];return r.isArrayOrTypedArray(S)&&(I=S),"rgb("+I.slice(0,3).map(function(R){return Math.round(255*R)})+")"}return null}function M(I){return r.isArrayOrTypedArray(I)?4===I.length&&"number"==typeof I[0]?w(I):I.map(w):null}h.handlePick=function(I){if(I.object&&(I.object===this.linePlot||I.object===this.delaunayMesh||I.object===this.textMarkers||I.object===this.scatterPlot)){var S=I.index=I.data.index;return I.object.highlight&&I.object.highlight(null),this.scatterPlot&&(I.object=this.scatterPlot,this.scatterPlot.highlight(I.data)),I.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||0===this.textLabels[S])&&(I.textLabel=this.textLabels[S]):I.textLabel=this.textLabels),I.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},h.update=function(I){var S,R,O,C,D=this.scene.glplot.gl,B=p.solid;this.data=I;var z=function _(I,S){var R,O,C,D,B,z,Y=[],G=I.fullSceneLayout,J=I.dataScale,te=G.xaxis,X=G.yaxis,K=G.zaxis,ae=S.marker,U=S.line,V=S.x||[],q=S.y||[],ie=S.z||[],H=V.length,ee=S.xcalendar,Q=S.ycalendar,oe=S.zcalendar;for(B=0;B<H;B++)R=te.d2l(V[B],0,ee)*J[0],O=X.d2l(q[B],0,Q)*J[1],C=K.d2l(ie[B],0,oe)*J[2],Y[B]=[R,O,C];if(Array.isArray(S.text))z=S.text;else if(void 0!==S.text)for(z=new Array(H),B=0;B<H;B++)z[B]=S.text;function le(Fe,Ue){var qe=G[Fe];return i.tickText(qe,qe.d2l(Ue),!0).text}var de=S.texttemplate;if(de){var fe=I.fullLayout._d3locale,be=Array.isArray(de),he=be?Math.min(de.length,H):H,_e=be?function(Fe){return de[Fe]}:function(){return de};for(z=new Array(he),B=0;B<he;B++){var Ce={x:V[B],y:q[B],z:ie[B]},Ee={xLabel:le("xaxis",V[B]),yLabel:le("yaxis",q[B]),zLabel:le("zaxis",ie[B])},Ae={};f(Ae,S,B);var ze=S._meta||{};z[B]=r.texttemplateString(_e(B),Ee,fe,Ae,Ce,ze)}}if(D={position:Y,mode:S.mode,text:z},"line"in S&&(D.lineColor=a(U,1,H),D.lineWidth=U.width,D.lineDashes=U.dash),"marker"in S){var ve=t(S);D.scatterColor=a(ae,1,H),D.scatterSize=T(ae.size,H,x,20,ve),D.scatterMarker=T(ae.symbol,H,u,"\u25cf"),D.scatterLineWidth=ae.line.width,D.scatterLineColor=a(ae.line,1,H),D.scatterAngle=0}"textposition"in S&&(D.textOffset=function(Fe){var Ue=[0,0];if(Array.isArray(Fe))for(var qe=0;qe<Fe.length;qe++)Ue[qe]=[0,0],Fe[qe]&&(Ue[qe][0]=d(Fe[qe]),Ue[qe][1]=o(Fe[qe]));else Ue[0]=d(Fe),Ue[1]=o(Fe);return Ue}(S.textposition),D.textColor=a(S.textfont,1,H),D.textSize=T(S.textfont.size,H,r.identity,12),D.textFont=S.textfont.family,D.textAngle=0);var Te=["x","y","z"];for(D.project=[!1,!1,!1],D.projectScale=[1,1,1],D.projectOpacity=[1,1,1],B=0;B<3;++B){var Ie=S.projection[Te[B]];(D.project[B]=Ie.show)&&(D.projectOpacity[B]=Ie.opacity,D.projectScale[B]=Ie.scale)}D.errorBounds=c(S,J,G);var De=function(Fe){for(var Ue=[0,0,0],qe=[[0,0,0],[0,0,0],[0,0,0]],je=[1,1,1],rt=0;rt<3;rt++){var Ne=Fe[rt];Ne&&!1!==Ne.copy_zstyle&&!1!==Fe[2].visible&&(Ne=Fe[2]),Ne&&Ne.visible&&(Ue[rt]=Ne.width/2,qe[rt]=n(Ne.color),je[rt]=Ne.thickness)}return{capSize:Ue,color:qe,lineWidth:je}}([S.error_x,S.error_y,S.error_z]);return D.errorColor=De.color,D.errorLineWidth=De.lineWidth,D.errorCapSize=De.capSize,D.delaunayAxis=S.surfaceaxis,D.delaunayColor=n(S.surfacecolor),D}(this.scene,I);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in p&&(B=p[z.lineDashes]),this.color=M(z.scatterColor)||M(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:I.opacity,connectGaps:I.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(S):(this.linePlot=g(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Y=I.opacity;if(I.marker&&I.marker.opacity&&(Y*=I.marker.opacity),R={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:Y,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(R):(this.scatterPlot=m(R),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),C={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:I.opacity},this.textLabels=I.hovertext||I.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(C):(this.textMarkers=m(C),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),O={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:I.opacity},this.errorBars?z.errorBounds?this.errorBars.update(O):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=b(O),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var G=function(J,te,X){var K,ae=(X+1)%3,U=(X+2)%3,V=[],q=[];for(K=0;K<J.length;++K){var ie=J[K];!isNaN(ie[ae])&&isFinite(ie[ae])&&!isNaN(ie[U])&&isFinite(ie[U])&&(V.push([ie[ae],ie[U]]),q.push(K))}var H=e(V);for(K=0;K<H.length;++K)for(var ee=H[K],Q=0;Q<ee.length;++Q)ee[Q]=q[ee[Q]];return{positions:J,cells:H,meshColor:te}}(z.position,z.delaunayColor,z.delaunayAxis);G.opacity=I.opacity,this.delaunayMesh?this.delaunayMesh.update(G):(G.gl=D,this.delaunayMesh=y(G),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},re.exports=function(I,S){var R=new l(I,S.uid);return R.update(S),R}},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../scatter/subtypes"),y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/text_defaults"),n=v("./attributes");re.exports=function(a,t,p,s){function i(x,u){return m.coerce(a,t,n,x,u)}if(x=a,u=t,_=s,w=0,M=(T=i)("x"),I=T("y"),S=T("z"),g.getComponentMethod("calendars","handleTraceDefaults")(x,u,["x","y","z"],_),M&&I&&S&&(w=Math.min(M.length,I.length,S.length),u._length=u._xlength=u._ylength=u._zlength=w),w){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),b.hasLines(t)&&(i("connectgaps"),e(a,t,p,s,i)),b.hasMarkers(t)&&y(a,t,p,s,i,{noSelect:!0}),b.hasText(t)&&(i("texttemplate"),r(a,t,s,i,{noSelect:!0}));var f=(t.line||{}).color,c=(t.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",f||c);for(var l=["x","y","z"],h=0;h<3;++h){var d="projection."+l[h];i(d+".show")&&(i(d+".opacity"),i(d+".scale"))}var o=g.getComponentMethod("errorbars","supplyDefaults");o(a,t,f||c||p,{axis:"z"}),o(a,t,f||c||p,{axis:"y",inherit:"z"}),o(a,t,f||c||p,{axis:"x",inherit:"z"})}else t.visible=!1;var x,u,T,_,w,M,I,S}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(v,re,ne){"use strict";re.exports={plot:v("./convert"),attributes:v("./attributes"),markerSymbols:v("../../constants/gl3d_markers"),supplyDefaults:v("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:v("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(v,re,ne){"use strict";var g=v("../scatter/attributes"),m=v("../../plots/attributes"),b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../../plots/template_attributes").texttemplateAttrs,e=v("../../components/colorscale/attributes"),r=v("../../lib/extend").extendFlat,n=g.marker,a=g.line,t=n.line;re.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:r({},g.mode,{dflt:"markers"}),text:r({},g.text,{}),texttemplate:y({editType:"plot"},{keys:["a","b","text"]}),hovertext:r({},g.hovertext,{}),line:{color:a.color,width:a.width,dash:a.dash,shape:r({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:g.connectgaps,fill:r({},g.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:g.fillcolor,marker:r({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:r({width:t.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:g.textfont,textposition:g.textposition,selected:g.selected,unselected:g.unselected,hoverinfo:r({},m.hoverinfo,{flags:["a","b","text","name"]}),hoveron:g.hoveron,hovertemplate:b()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../scatter/colorscale_calc"),b=v("../scatter/arrays_to_calcdata"),y=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,r=v("../carpet/lookup_carpetid");re.exports=function(n,a){var t=a._carpetTrace=r(n,a);if(t&&t.visible&&"legendonly"!==t.visible){var p;a.xaxis=t.xaxis,a.yaxis=t.yaxis;var s,i,f=a._length,c=new Array(f),l=!1;for(p=0;p<f;p++)if(i=a.b[p],g(s=a.a[p])&&g(i)){var h=t.ab2xy(+s,+i,!0),d=t.isVisible(+s,+i);d||(l=!0),c[p]={x:h[0],y:h[1],a:s,b:i,vis:d}}else c[p]={x:!1,y:!1};return a._needsCull=l,c[0].carpet=t,c[0].trace=a,e(a,f),m(n,a),b(c,a),y(c,a),c}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/constants"),b=v("../scatter/subtypes"),y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/line_shape_defaults"),n=v("../scatter/text_defaults"),a=v("../scatter/fillcolor_defaults"),t=v("./attributes");re.exports=function(p,s,i,f){function c(x,u){return g.coerce(p,s,t,x,u)}c("carpet"),s.xaxis="x",s.yaxis="y";var l=c("a"),h=c("b"),d=Math.min(l.length,h.length);if(d){s._length=d,c("text"),c("texttemplate"),c("hovertext"),c("mode",d<m.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(s)&&(e(p,s,i,f,c),r(p,s,c),c("connectgaps")),b.hasMarkers(s)&&y(p,s,i,f,c,{gradient:!0}),b.hasText(s)&&n(p,s,f,c);var o=[];(b.hasMarkers(s)||b.hasText(s))&&(c("marker.maxdisplayed"),o.push("points")),c("fill"),"none"!==s.fill&&(a(p,s,i,c),b.hasLines(s)||r(p,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||o.push("fills"),"fills"!==c("hoveron",o.join("+")||"points")&&c("hovertemplate"),g.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e){var r=y[e];return g.a=r.a,g.b=r.b,g.y=r.y,g}},{}],974:[function(v,re,ne){"use strict";re.exports=function(g,m){var b={},y=m._carpet,e=y.ab2ij([g.a,g.b]),r=Math.floor(e[0]),n=e[0]-r,a=Math.floor(e[1]),p=y.evalxy([],r,a,n,e[1]-a);return b.yLabel=p[1].toFixed(3),b}},{}],975:[function(v,re,ne){"use strict";var g=v("../scatter/hover"),m=v("../../lib").fillText;re.exports=function(b,y,e,r){var n=g(b,y,e,r);if(n&&!1!==n[0].index){var a=n[0];if(void 0===a.index){var p=b.xa._length,s=p*(1-a.y0/b.ya._length)/2,i=p-s;return a.x0=Math.max(Math.min(a.x0,i),s),a.x1=Math.max(Math.min(a.x1,i),s),n}var f=a.cd[a.index];a.a=f.a,a.b=f.b,a.xLabelVal=void 0,a.yLabelVal=void 0;var c=a.trace,l=c._carpet,h=c._module.formatLabels(f,c);a.yLabel=h.yLabel,delete a.text;var d=[];if(!c.hovertemplate){var o=(f.hi||c.hoverinfo).split("+");-1!==o.indexOf("all")&&(o=["a","b","text"]),-1!==o.indexOf("a")&&x(l.aaxis,f.a),-1!==o.indexOf("b")&&x(l.baxis,f.b),d.push("y: "+a.yLabel),-1!==o.indexOf("text")&&m(f,c,d),a.extraText=d.join("<br>")}return n}function x(u,T){var _;_=u.labelprefix&&u.labelprefix.length>0?u.labelprefix.replace(/ = $/,""):u._hovertitle,d.push(_+": "+T.toFixed(3)+u.labelsuffix)}}},{"../../lib":515,"../scatter/hover":947}],976:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:v("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(v,re,ne){"use strict";var g=v("../scatter/plot"),m=v("../../plots/cartesian/axes"),b=v("../../components/drawing");re.exports=function(y,e,r,n){var a,p,s=r[0][0].carpet,i={xaxis:m.getFromId(y,s.xaxis||"x"),yaxis:m.getFromId(y,s.yaxis||"y"),plot:e.plot};for(g(y,i,r,n),a=0;a<r.length;a++)p=n.selectAll("g.trace"+r[a][0].trace.uid+" .js-line"),b.setClipUrl(p,r[a][0].carpet._clipPathId,y)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../scatter/attributes"),y=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),r=v("../../components/drawing/attributes").dash,n=v("../../lib/extend").extendFlat,a=v("../../plot_api/edit_types").overrideAll,t=b.marker,p=b.line,s=t.line;re.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},b.mode,{dflt:"markers"}),text:n({},b.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},b.hovertext,{}),textfont:b.textfont,textposition:b.textposition,line:{color:p.color,width:p.width,dash:r},connectgaps:b.connectgaps,marker:n({symbol:t.symbol,opacity:t.opacity,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,colorbar:t.colorbar,line:n({width:s.width},e("marker.line")),gradient:t.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:b.fillcolor,selected:b.selected,unselected:b.unselected,hoverinfo:n({},y.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:g()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../constants/numerical").BADNUM,b=v("../scatter/colorscale_calc"),y=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),r=v("../../lib")._;function n(a){return a&&"string"==typeof a}re.exports=function(a,t){var p,s=Array.isArray(t.locations),i=s?t.locations.length:t._length,f=new Array(i);p=t.geojson?function(x){return n(x)||g(x)}:n;for(var c=0;c<i;c++){var l=f[c]={};if(s){var h=t.locations[c];l.loc=p(h)?h:null}else{var d=t.lon[c],o=t.lat[c];l.lonlat=g(d)&&g(o)?[+d,+o]:[m,m]}}return y(f,t),b(a,t),e(f,t),i&&(f[0].t={labels:{lat:r(a,"lat:")+" ",lon:r(a,"lon:")+" "}}),f}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),r=v("../scatter/fillcolor_defaults"),n=v("./attributes");re.exports=function(a,t,p,s){function i(x,u){return g.coerce(a,t,n,x,u)}var f,c=i("locations");if(c&&c.length){var l,h=i("geojson");("string"==typeof h&&""!==h||g.isPlainObject(h))&&(l="geojson-id"),"geojson-id"===i("locationmode",l)&&i("featureidkey"),f=c.length}else{var d=i("lon")||[],o=i("lat")||[];f=Math.min(d.length,o.length)}f?(t._length=f,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),m.hasLines(t)&&(y(a,t,p,s,i),i("connectgaps")),m.hasMarkers(t)&&b(a,t,p,s,i,{gradient:!0}),m.hasText(t)&&(i("texttemplate"),e(a,t,s,i)),i("fill"),"none"!==t.fill&&r(a,t,p,i),g.coerceSelectionMarkerOpacity(t,i)):t.visible=!1}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e){g.lon=m.lon,g.lat=m.lat,g.location=m.loc?m.loc:null;var r=y[e];return r.fIn&&r.fIn.properties&&(g.properties=r.fIn.properties),g}},{}],982:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes");re.exports=function(m,b,y){var e={},r=y[b.geo]._subplot.mockAxis,n=m.lonlat;return e.lonLabel=g.tickText(r,r.c2l(n[0]),!0).text,e.latLabel=g.tickText(r,r.c2l(n[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],983:[function(v,re,ne){"use strict";var g=v("../../components/fx"),m=v("../../constants/numerical").BADNUM,b=v("../scatter/get_trace_color"),y=v("../../lib").fillText,e=v("./attributes");re.exports=function(r,n,a){var t=r.cd,p=t[0].trace,s=r.xa,i=r.ya,f=r.subplot,c=f.projection.isLonLatOverEdges,l=f.project;if(g.getClosest(t,function(_){var w=_.lonlat;if(w[0]===m||c(w))return 1/0;var M=l(w),I=l([n,a]),S=Math.abs(M[0]-I[0]),R=Math.abs(M[1]-I[1]),O=Math.max(3,_.mrc||0);return Math.max(Math.sqrt(S*S+R*R)-O,1-3/O)},r),!1!==r.index){var h=t[r.index],d=h.lonlat,o=[s.c2p(d),i.c2p(d)],x=h.mrc||1;r.x0=o[0]-x,r.x1=o[0]+x,r.y0=o[1]-x,r.y1=o[1]+x,r.loc=h.loc,r.lon=d[0],r.lat=d[1];var u={};u[p.geo]={_subplot:f};var T=p._module.formatLabels(h,p,u);return r.lonLabel=T.lonLabel,r.latLabel=T.latLabel,r.color=b(p,h),r.extraText=function(_,w,M,I){if(!_.hovertemplate){var S=w.hi||_.hoverinfo,R="all"===S?e.hoverinfo.flags:S.split("+"),O=-1!==R.indexOf("location")&&Array.isArray(_.locations),C=-1!==R.indexOf("lon"),D=-1!==R.indexOf("lat"),B=-1!==R.indexOf("text"),z=[];return O?z.push(w.loc):C&&D?z.push("("+Y(M.latLabel)+", "+Y(M.lonLabel)+")"):C?z.push(I.lon+Y(M.lonLabel)):D&&z.push(I.lat+Y(M.latLabel)),B&&y(w,_,z),z.join("<br>")}function Y(G){return G+"\xb0"}}(p,h,r,t[0].t.labels),r.hovertemplate=p.hovertemplate,[r]}}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),calcGeoJSON:v("./plot").calcGeoJSON,plot:v("./plot").plot,style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:v("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../lib/topojson_utils").getTopojsonFeatures,y=v("../../lib/geojson_utils"),e=v("../../lib/geo_location_utils"),r=v("../../plots/cartesian/autorange").findExtremes,n=v("../../constants/numerical").BADNUM,a=v("../scatter/calc").calcMarkerSize,t=v("../scatter/subtypes"),p=v("./style");re.exports={calcGeoJSON:function(s,i){var f,c,l=s[0].trace,h=i[l.geo],d=h._subplot,o=l._length;if(Array.isArray(l.locations)){var x=l.locationmode,u="geojson-id"===x?e.extractTraceFeature(s):b(l,d.topojson);for(f=0;f<o;f++){c=s[f];var T="geojson-id"===x?c.fOut:e.locationToFeature(x,c.loc,u);c.lonlat=T?T.properties.ct:[n,n]}}var _,w,M={padded:!0};if("geojson"===h.fitbounds&&"geojson-id"===l.locationmode){var I=e.computeBbox(e.getTraceGeojson(l));_=[I[0],I[2]],w=[I[1],I[3]]}else{for(_=new Array(o),w=new Array(o),f=0;f<o;f++)_[f]=(c=s[f]).lonlat[0],w[f]=c.lonlat[1];M.ppad=a(l,o)}l._extremes.lon=r(h.lonaxis._ax,_,M),l._extremes.lat=r(h.lataxis._ax,w,M)},plot:function(s,i,f){var c=i.layers.frontplot.select(".scatterlayer"),l=m.makeTraceGroups(c,f,"trace scattergeo");function h(d,o){d.lonlat[0]===n&&g.select(o).remove()}l.selectAll("*").remove(),l.each(function(d){var o=g.select(this),x=d[0].trace;if(t.hasLines(x)||"none"!==x.fill){var u=y.calcTraceToLineCoords(d),T="none"!==x.fill?y.makePolygon(u):y.makeLine(u);o.selectAll("path.js-line").data([{geojson:T,trace:x}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(x)&&o.selectAll("path.point").data(m.identity).enter().append("path").classed("point",!0).each(function(_){h(_,this)}),t.hasText(x)&&o.selectAll("g").data(m.identity).enter().append("g").append("text").each(function(_){h(_,this)}),p(s,d)})}}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(v,re,ne){"use strict";var g=v("../scatter/subtypes"),m=v("../../constants/numerical").BADNUM;re.exports=function(b,y){var e,r,n,a,t,p=b.cd,s=b.xaxis,i=b.yaxis,f=[],c=p[0].trace;if(!g.hasMarkers(c)&&!g.hasText(c))return[];if(!1===y)for(t=0;t<p.length;t++)p[t].selected=0;else for(t=0;t<p.length;t++)(r=(e=p[t]).lonlat)[0]!==m&&(n=s.c2p(r),a=i.c2p(r),y.contains([n,a],null,t,b)?(f.push({pointNumber:t,lon:r[0],lat:r[1]}),e.selected=1):e.selected=0);return f}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("../../components/color"),y=v("../scatter/style"),e=y.stylePoints,r=y.styleText;re.exports=function(n,a){var t,p,s,i;a&&(t=n,s=(p=a)[0].trace,(i=p[0].node3).style("opacity",p[0].trace.opacity),e(i,s,t),r(i,s,t),i.selectAll("path.js-line").style("fill","none").each(function(f){var c=g.select(this),l=f.trace,h=l.line||{};c.call(b.stroke,h.color).call(m.dashLine,h.dash||"",h.width||0),"none"!==l.fill&&c.call(b.fill,l.fillcolor)}))}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(v,re,ne){"use strict";var g=v("../../plots/attributes"),m=v("../scatter/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../components/colorscale/attributes"),e=v("../../lib/sort_object_keys"),r=v("../../lib/extend").extendFlat,n=v("../../plot_api/edit_types").overrideAll,a=v("./constants").DASHES,t=m.line,p=m.marker,s=p.line,i=re.exports=n({x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:m.text,hovertext:m.hovertext,textposition:m.textposition,textfont:m.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:t.color,width:t.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(a),dflt:"solid"}},marker:r({},y("marker"),{symbol:p.symbol,size:p.size,sizeref:p.sizeref,sizemin:p.sizemin,sizemode:p.sizemode,opacity:p.opacity,colorbar:p.colorbar,line:r({},y("marker.line"),{width:s.width})}),connectgaps:m.connectgaps,fill:r({},m.fill,{dflt:"none"}),fillcolor:m.fillcolor,selected:{marker:m.selected.marker,textfont:m.selected.textfont},unselected:{marker:m.unselected.marker,textfont:m.unselected.textfont},opacity:g.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=m.hovertemplate,i.texttemplate=m.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(v,re,ne){"use strict";var g=v("./hover");re.exports={moduleType:"trace",name:"scattergl",basePlotModule:v("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../scatter/cross_trace_defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:g.hoverPoints,selectPoints:v("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(v,re,ne){"use strict";var g=v("@plotly/point-cluster"),m=v("../../lib"),b=v("../../plots/cartesian/axis_ids"),y=v("../../plots/cartesian/autorange").findExtremes,e=v("../../plots/cartesian/align_period"),r=v("../scatter/calc"),n=r.calcMarkerSize,a=r.calcAxisExpansion,t=r.setFirstScatter,p=v("../scatter/colorscale_calc"),s=v("./convert"),i=v("./scene_update"),f=v("../../constants/numerical").BADNUM,c=v("./constants").TOO_MANY_POINTS;function l(h,d,o){var x=h._extremes[d._id],u=y(d,o._bnds,{padded:!0});x.min=x.min.concat(u.min),x.max=x.max.concat(u.max)}re.exports=function(h,d){var o,x=h._fullLayout,u=b.getFromId(h,d.xaxis),T=b.getFromId(h,d.yaxis),_=x._plots[d.xaxis+d.yaxis],w=d._length,M=w>=c,I=2*w,S={},R=u.makeCalcdata(d,"x"),O=T.makeCalcdata(d,"y"),C=e(d,u,"x",R),D=e(d,T,"y",O),B=C.vals,z=D.vals;d._x=B,d._y=z,d.xperiodalignment&&(d._origX=R,d._xStarts=C.starts,d._xEnds=C.ends),d.yperiodalignment&&(d._origY=O,d._yStarts=D.starts,d._yEnds=D.ends);var Y=new Array(I),G=new Array(w);for(o=0;o<w;o++)Y[2*o]=B[o]===f?NaN:B[o],Y[2*o+1]=z[o]===f?NaN:z[o],G[o]=o;if("log"===u.type)for(o=0;o<I;o+=2)Y[o]=u.c2l(Y[o]);if("log"===T.type)for(o=1;o<I;o+=2)Y[o]=T.c2l(Y[o]);M&&"log"!==u.type&&"log"!==T.type?S.tree=g(Y):S.ids=G,p(h,d);var J,te=function(K,ae,U,V,q,ie){var H=s.style(K,U);if(H.marker&&(H.marker.positions=V),H.line&&V.length>1&&m.extendFlat(H.line,s.linePositions(K,U,V)),H.errorX||H.errorY){var ee=s.errorBarPositions(K,U,V,q,ie);H.errorX&&m.extendFlat(H.errorX,ee.x),H.errorY&&m.extendFlat(H.errorY,ee.y)}return H.text&&(m.extendFlat(H.text,{positions:V},s.textPosition(K,U,H.text,H.marker)),m.extendFlat(H.textSel,{positions:V},s.textPosition(K,U,H.text,H.markerSel)),m.extendFlat(H.textUnsel,{positions:V},s.textPosition(K,U,H.text,H.markerUnsel))),H}(h,0,d,Y,B,z),X=i(h,_);return t(x,d),M?te.marker&&(J=te.marker.sizeAvg||Math.max(te.marker.size,3)):J=n(d,w),a(h,d,u,T,B,z,J),te.errorX&&l(d,u,te.errorX),te.errorY&&l(d,T,te.errorY),te.fill&&!X.fill2d&&(X.fill2d=!0),te.marker&&!X.scatter2d&&(X.scatter2d=!0),te.line&&!X.line2d&&(X.line2d=!0),!te.errorX&&!te.errorY||X.error2d||(X.error2d=!0),te.text&&!X.glText&&(X.glText=!0),te.marker&&(te.marker.snap=w),X.lineOptions.push(te.line),X.errorXOptions.push(te.errorX),X.errorYOptions.push(te.errorY),X.fillOptions.push(te.fill),X.markerOptions.push(te.marker),X.markerSelectedOptions.push(te.markerSel),X.markerUnselectedOptions.push(te.markerUnsel),X.textOptions.push(te.text),X.textSelectedOptions.push(te.textSel),X.textUnselectedOptions.push(te.textUnsel),X.selectBatch.push([]),X.unselectBatch.push([]),S._scene=X,S.index=X.count,S.x=B,S.y=z,S.positions=Y,X.count++,[{x:!1,y:!1,t:S,trace:d}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(v,re,ne){"use strict";re.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("svg-path-sdf"),b=v("color-normalize"),y=v("../../registry"),e=v("../../lib"),r=v("../../components/drawing"),n=v("../../plots/cartesian/axis_ids"),a=v("../../lib/gl_format_color").formatColor,t=v("../scatter/subtypes"),p=v("../scatter/make_bubble_size_func"),s=v("./helpers"),i=v("./constants"),f=v("../../constants/interactions").DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},l=v("../../components/fx/helpers").appendArrayPointValue;function h(R,O){var C,D=R._fullLayout,B=O._length,z=O.textfont,Y=O.textposition,G=Array.isArray(Y)?Y:[Y],J=z.color,te=z.size,X=z.family,K={},ae=R._context.plotGlPixelRatio,U=O.texttemplate;if(U){K.text=[];var V=D._d3locale,q=Array.isArray(U),ie=q?Math.min(U.length,B):B,H=q?function(be){return U[be]}:function(){return U};for(C=0;C<ie;C++){var ee={i:C},Q=O._module.formatLabels(ee,O,D),oe={};l(oe,O,C);var le=O._meta||{};K.text.push(e.texttemplateString(H(C),Q,V,oe,ee,le))}}else K.text=Array.isArray(O.text)&&O.text.length<B?O.text.slice():O.text;if(Array.isArray(K.text))for(C=K.text.length;C<B;C++)K.text[C]="";for(K.opacity=O.opacity,K.font={},K.align=[],K.baseline=[],C=0;C<G.length;C++){var de=G[C].split(/\s+/);switch(de[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(de[1])}switch(de[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(de[0])}}if(Array.isArray(J))for(K.color=new Array(B),C=0;C<B;C++)K.color[C]=J[C];else K.color=J;if(e.isArrayOrTypedArray(te)||Array.isArray(X))for(K.font=new Array(B),C=0;C<B;C++){var fe=K.font[C]={};fe.size=(e.isTypedArray(te)?te[C]:Array.isArray(te)?g(te[C])?te[C]:0:te)*ae,fe.family=Array.isArray(X)?X[C]:X}else K.font={size:te*ae,family:X};return K}function d(R){var O,C,D=R._length,B=R.marker,z={},Y=e.isArrayOrTypedArray(B.symbol),G=e.isArrayOrTypedArray(B.color),J=e.isArrayOrTypedArray(B.line.color),te=e.isArrayOrTypedArray(B.opacity),X=e.isArrayOrTypedArray(B.size),K=e.isArrayOrTypedArray(B.line.width);if(Y||(C=s.isOpenSymbol(B.symbol)),Y||G||J||te){z.colors=new Array(D),z.borderColors=new Array(D);var ae=a(B,B.opacity,D),U=a(B.line,B.opacity,D);if(!Array.isArray(U[0])){var V=U;for(U=Array(D),O=0;O<D;O++)U[O]=V}if(!Array.isArray(ae[0])){var q=ae;for(ae=Array(D),O=0;O<D;O++)ae[O]=q}for(z.colors=ae,z.borderColors=U,O=0;O<D;O++)Y&&(C=s.isOpenSymbol(B.symbol[O])),C&&(U[O]=ae[O].slice(),ae[O]=ae[O].slice(),ae[O][3]=0);z.opacity=R.opacity}else C?(z.color=b(B.color,"uint8"),z.color[3]=0,z.borderColor=b(B.color,"uint8")):(z.color=b(B.color,"uint8"),z.borderColor=b(B.line.color,"uint8")),z.opacity=R.opacity*B.opacity;if(Y)for(z.markers=new Array(D),O=0;O<D;O++)z.markers[O]=S(B.symbol[O]);else z.marker=S(B.symbol);var H,ee=p(R,1);if(X||K){var Q,oe=z.sizes=new Array(D),le=z.borderSizes=new Array(D),de=0;if(X){for(O=0;O<D;O++)oe[O]=ee(B.size[O]),de+=oe[O];Q=de/D}else for(H=ee(B.size),O=0;O<D;O++)oe[O]=H;if(K)for(O=0;O<D;O++)le[O]=B.line.width[O];else for(H=B.line.width,O=0;O<D;O++)le[O]=H;z.sizeAvg=Q}else z.size=ee(B&&B.size||10),z.borderSizes=ee(B.line.width);return z}function o(R,O){var D={};return O&&(O.marker&&O.marker.symbol?D=d(e.extendFlat({},R.marker,O.marker)):O.marker&&(O.marker.size&&(D.size=O.marker.size),O.marker.color&&(D.colors=O.marker.color),void 0!==O.marker.opacity&&(D.opacity=O.marker.opacity))),D}function x(R,O,C){var D={};if(!C)return D;if(C.textfont){var B={opacity:1,text:O.text,texttemplate:O.texttemplate,textposition:O.textposition,textfont:e.extendFlat({},O.textfont)};C.textfont&&e.extendFlat(B.textfont,C.textfont),D=h(R,B)}return D}function u(R,O,C){var D={capSize:2*O.width*C,lineWidth:O.thickness*C,color:O.color};return O.copy_ystyle&&(D=R.error_y),D}var T=i.SYMBOL_SDF_SIZE,_=i.SYMBOL_SIZE,w=i.SYMBOL_STROKE,M={},I=r.symbolFuncs[0](.05*_);function S(R){if("circle"===R)return null;var O,C,D=r.symbolNumber(R),B=r.symbolFuncs[D%100],z=!!r.symbolNoDot[D%100],Y=!!r.symbolNoFill[D%100],G=s.isDotSymbol(R);return M[R]?M[R]:(O=G&&!z?B(1.1*_)+I:B(_),C=m(O,{w:T,h:T,viewBox:[-_,-_,_,_],stroke:Y?w:-w}),M[R]=C,C||null)}re.exports={style:function(R,O){var C,D={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=R._context.plotGlPixelRatio;if(!0!==O.visible)return D;if(t.hasText(O)&&(D.text=h(R,O),D.textSel=x(R,O,O.selected),D.textUnsel=x(R,O,O.unselected)),t.hasMarkers(O)&&(D.marker=d(O),D.markerSel=o(O,O.selected),D.markerUnsel=o(O,O.unselected),!O.unselected&&e.isArrayOrTypedArray(O.marker.opacity))){var z=O.marker.opacity;for(D.markerUnsel.opacity=new Array(z.length),C=0;C<z.length;C++)D.markerUnsel.opacity[C]=f*z[C]}if(t.hasLines(O)){D.line={overlay:!0,thickness:O.line.width*B,color:O.line.color,opacity:O.opacity};var Y=(i.DASHES[O.line.dash]||[1]).slice();for(C=0;C<Y.length;++C)Y[C]*=O.line.width*B;D.line.dashes=Y}return O.error_x&&O.error_x.visible&&(D.errorX=u(O,O.error_x,B)),O.error_y&&O.error_y.visible&&(D.errorY=u(O,O.error_y,B)),O.fill&&"none"!==O.fill&&(D.fill={closed:!0,fill:O.fillcolor,thickness:0}),D},markerStyle:d,markerSelection:o,linePositions:function(R,O,C){var D,B,z=C.length,Y=z/2;if(t.hasLines(O)&&Y)if("hv"===O.line.shape){for(D=[],B=0;B<Y-1;B++)isNaN(C[2*B])||isNaN(C[2*B+1])?D.push(NaN,NaN,NaN,NaN):(D.push(C[2*B],C[2*B+1]),isNaN(C[2*B+2])||isNaN(C[2*B+3])?D.push(NaN,NaN):D.push(C[2*B+2],C[2*B+1]));D.push(C[z-2],C[z-1])}else if("hvh"===O.line.shape){for(D=[],B=0;B<Y-1;B++)if(isNaN(C[2*B])||isNaN(C[2*B+1])||isNaN(C[2*B+2])||isNaN(C[2*B+3]))isNaN(C[2*B])||isNaN(C[2*B+1])?D.push(NaN,NaN):D.push(C[2*B],C[2*B+1]),D.push(NaN,NaN);else{var G=(C[2*B]+C[2*B+2])/2;D.push(C[2*B],C[2*B+1],G,C[2*B+1],G,C[2*B+3])}D.push(C[z-2],C[z-1])}else if("vhv"===O.line.shape){for(D=[],B=0;B<Y-1;B++)if(isNaN(C[2*B])||isNaN(C[2*B+1])||isNaN(C[2*B+2])||isNaN(C[2*B+3]))isNaN(C[2*B])||isNaN(C[2*B+1])?D.push(NaN,NaN):D.push(C[2*B],C[2*B+1]),D.push(NaN,NaN);else{var J=(C[2*B+1]+C[2*B+3])/2;D.push(C[2*B],C[2*B+1],C[2*B],J,C[2*B+2],J)}D.push(C[z-2],C[z-1])}else if("vh"===O.line.shape){for(D=[],B=0;B<Y-1;B++)isNaN(C[2*B])||isNaN(C[2*B+1])?D.push(NaN,NaN,NaN,NaN):(D.push(C[2*B],C[2*B+1]),isNaN(C[2*B+2])||isNaN(C[2*B+3])?D.push(NaN,NaN):D.push(C[2*B],C[2*B+3]));D.push(C[z-2],C[z-1])}else D=C;var te=!1;for(B=0;B<D.length;B++)if(isNaN(D[B])){te=!0;break}var X=te||D.length>i.TOO_MANY_POINTS||t.hasMarkers(O)?"rect":"round";if(te&&O.connectgaps){var K=D[0],ae=D[1];for(B=0;B<D.length;B+=2)isNaN(D[B])||isNaN(D[B+1])?(D[B]=K,D[B+1]=ae):(K=D[B],ae=D[B+1])}return{join:X,positions:D}},errorBarPositions:function(R,O,C,D,B){var z=y.getComponentMethod("errorbars","makeComputeError"),Y=n.getFromId(R,O.xaxis),G=n.getFromId(R,O.yaxis),J=C.length/2,te={};function X(K,ae){var U=ae._id.charAt(0),V=O["error_"+U];if(V&&V.visible&&("linear"===ae.type||"log"===ae.type)){for(var q=z(V),ie={x:0,y:1}[U],H={x:[0,1,2,3],y:[2,3,0,1]}[U],ee=new Float64Array(4*J),Q=1/0,oe=-1/0,le=0,de=0;le<J;le++,de+=4){var fe=K[le];if(g(fe)){var be=C[2*le+ie],he=q(fe,le),_e=he[0],Ce=he[1];if(g(_e)&&g(Ce)){var Ae=fe+Ce;ee[de+H[0]]=be-ae.c2l(fe-_e),ee[de+H[1]]=ae.c2l(Ae)-be,ee[de+H[2]]=0,ee[de+H[3]]=0,Q=Math.min(Q,fe-_e),oe=Math.max(oe,fe+Ce)}}}te[U]={positions:C,errors:ee,_bnds:[Q,oe]}}}return X(D,Y),X(B,G),te},textPosition:function(R,O,C,D){var B,z=O._length,Y={};if(t.hasMarkers(O)){var G=C.font,J=C.align,te=C.baseline;for(Y.offset=new Array(z),B=0;B<z;B++){var X=D.sizes?D.sizes[B]:D.size,K=Array.isArray(G)?G[B].size:G.size,ae=Array.isArray(J)?J.length>1?J[B]:J[0]:J,U=Array.isArray(te)?te.length>1?te[B]:te[0]:te,q=c[U],ie=X?X/.8+1:0;Y.offset[B]=[c[ae]*ie/K,(-q*ie-.5*q)/K]}}return Y}}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../registry"),b=v("./helpers"),y=v("./attributes"),e=v("../scatter/constants"),r=v("../scatter/subtypes"),n=v("../scatter/xy_defaults"),a=v("../scatter/period_defaults"),t=v("../scatter/marker_defaults"),p=v("../scatter/line_defaults"),s=v("../scatter/fillcolor_defaults"),i=v("../scatter/text_defaults");re.exports=function(f,c,l,h){function d(I,S){return g.coerce(f,c,y,I,S)}var o=!!f.marker&&b.isOpenSymbol(f.marker.symbol),x=r.isBubble(f),u=n(f,c,h,d);if(u){a(f,c,h,d),d("xhoverformat"),d("yhoverformat");var T=u<e.PTS_LINESONLY?"lines+markers":"lines";d("text"),d("hovertext"),d("hovertemplate"),d("mode",T),r.hasLines(c)&&(d("connectgaps"),p(f,c,l,h,d),d("line.shape")),r.hasMarkers(c)&&(t(f,c,l,h,d),d("marker.line.width",o||x?1:0)),r.hasText(c)&&(d("texttemplate"),i(f,c,h,d));var _=(c.line||{}).color,w=(c.marker||{}).color;d("fill"),"none"!==c.fill&&s(f,c,l,d);var M=m.getComponentMethod("errorbars","supplyDefaults");M(f,c,_||w||l,{axis:"y"}),M(f,c,_||w||l,{axis:"x",inherit:"y"}),g.coerceSelectionMarkerOpacity(c,d)}else c.visible=!1}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color"),b=v("../../constants/interactions").DESELECTDIM;re.exports={styleTextSelection:function(y){var e,r,n=y[0],a=n.trace,t=n.t,p=t._scene,s=t.index,i=p.selectBatch[s],f=p.unselectBatch[s],c=p.textOptions[s],l=p.textSelectedOptions[s]||{},h=p.textUnselectedOptions[s]||{},d=g.extendFlat({},c);if(i.length||f.length){var o=l.color,x=h.color,u=c.color,T=Array.isArray(u);for(d.color=new Array(a._length),e=0;e<i.length;e++)d.color[r=i[e]]=o||(T?u[r]:u);for(e=0;e<f.length;e++){r=f[e];var _=T?u[r]:u;d.color[r]=x||(o?_:m.addOpacity(_,b))}}p.glText[s].update(d)}}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(v,re,ne){"use strict";var g=v("../scatter/format_labels");re.exports=function(m,b,y){var e=m.i;return"x"in m||(m.x=b._x[e]),"y"in m||(m.y=b._y[e]),g(m,b,y)}},{"../scatter/format_labels":945}],996:[function(v,re,ne){"use strict";var g=v("./constants");ne.isOpenSymbol=function(m){return"string"==typeof m?g.OPEN_RE.test(m):m%200>100},ne.isDotSymbol=function(m){return"string"==typeof m?g.DOT_RE.test(m):m>200}},{"./constants":991}],997:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../scatter/get_trace_color");function y(e,r,n,a){var t=e.xa,p=e.ya,s=e.distance,i=e.dxy,f=e.index,c={pointNumber:f,x:r[f],y:n[f]};c.tx=Array.isArray(a.text)?a.text[f]:a.text,c.htx=Array.isArray(a.hovertext)?a.hovertext[f]:a.hovertext,c.data=Array.isArray(a.customdata)?a.customdata[f]:a.customdata,c.tp=Array.isArray(a.textposition)?a.textposition[f]:a.textposition;var l=a.textfont;l&&(c.ts=m.isArrayOrTypedArray(l.size)?l.size[f]:l.size,c.tc=Array.isArray(l.color)?l.color[f]:l.color,c.tf=Array.isArray(l.family)?l.family[f]:l.family);var h=a.marker;h&&(c.ms=m.isArrayOrTypedArray(h.size)?h.size[f]:h.size,c.mo=m.isArrayOrTypedArray(h.opacity)?h.opacity[f]:h.opacity,c.mx=m.isArrayOrTypedArray(h.symbol)?h.symbol[f]:h.symbol,c.mc=m.isArrayOrTypedArray(h.color)?h.color[f]:h.color);var d=h&&h.line;d&&(c.mlc=Array.isArray(d.color)?d.color[f]:d.color,c.mlw=m.isArrayOrTypedArray(d.width)?d.width[f]:d.width);var o=h&&h.gradient;o&&"none"!==o.type&&(c.mgt=Array.isArray(o.type)?o.type[f]:o.type,c.mgc=Array.isArray(o.color)?o.color[f]:o.color);var x=t.c2p(c.x,!0),u=p.c2p(c.y,!0),T=c.mrc||1,_=a.hoverlabel;_&&(c.hbg=Array.isArray(_.bgcolor)?_.bgcolor[f]:_.bgcolor,c.hbc=Array.isArray(_.bordercolor)?_.bordercolor[f]:_.bordercolor,c.hts=m.isArrayOrTypedArray(_.font.size)?_.font.size[f]:_.font.size,c.htc=Array.isArray(_.font.color)?_.font.color[f]:_.font.color,c.htf=Array.isArray(_.font.family)?_.font.family[f]:_.font.family,c.hnl=m.isArrayOrTypedArray(_.namelength)?_.namelength[f]:_.namelength);var w=a.hoverinfo;w&&(c.hi=Array.isArray(w)?w[f]:w);var M=a.hovertemplate;M&&(c.ht=Array.isArray(M)?M[f]:M);var I={};I[e.index]=c;var S=a._origX,R=a._origY,O=m.extendFlat({},e,{color:b(a,c),x0:x-T,x1:x+T,xLabelVal:S?S[f]:c.x,y0:u-T,y1:u+T,yLabelVal:R?R[f]:c.y,cd:I,distance:s,spikeDistance:i,hovertemplate:c.ht});return c.htx?O.text=c.htx:c.tx?O.text=c.tx:a.text&&(O.text=a.text),m.fillText(c,a,O),g.getComponentMethod("errorbars","hoverInfo")(c,a,O),O}re.exports={hoverPoints:function(e,r,n,a){var t,p,s,i,f,c,l,h,d,o,x=e.cd,u=x[0].t,T=x[0].trace,_=e.xa,w=e.ya,M=u.x,I=u.y,S=_.c2p(r),R=w.c2p(n),O=e.distance;if(u.tree){var C=_.p2c(S-O),D=_.p2c(S+O),B=w.p2c(R-O),z=w.p2c(R+O);t="x"===a?u.tree.range(Math.min(C,D),Math.min(w._rl[0],w._rl[1]),Math.max(C,D),Math.max(w._rl[0],w._rl[1])):u.tree.range(Math.min(C,D),Math.min(B,z),Math.max(C,D),Math.max(B,z))}else t=u.ids;var Y=O;if("x"===a){var G=!!T.xperiodalignment,J=!!T.yperiodalignment;for(c=0;c<t.length;c++){if(i=M[p=t[c]],l=Math.abs(_.c2p(i)-S),G){var te=_.c2p(T._xStarts[p]),X=_.c2p(T._xEnds[p]);l=S>=Math.min(te,X)&&S<=Math.max(te,X)?0:1/0}if(l<Y){if(Y=l,h=w.c2p(f=I[p])-R,J){var K=w.c2p(T._yStarts[p]),ae=w.c2p(T._yEnds[p]);h=R>=Math.min(K,ae)&&R<=Math.max(K,ae)?0:1/0}o=Math.sqrt(l*l+h*h),s=t[c]}}}else for(c=t.length-1;c>-1;c--)i=M[p=t[c]],f=I[p],l=_.c2p(i)-S,h=w.c2p(f)-R,(d=Math.sqrt(l*l+h*h))<Y&&(Y=o=d,s=p);return e.index=s,e.distance=Y,e.dxy=o,void 0===s?[e]:[y(e,M,I,T)]},calcHover:y}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(v,re,ne){arguments[4][905][0].apply(ne,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(v,re,ne){"use strict";var g=v("regl-scatter2d"),m=v("regl-line2d"),b=v("regl-error2d"),y=v("gl-text"),e=v("../../lib"),r=v("../../components/dragelement/helpers").selectMode,n=v("../../lib/prepare_regl"),a=v("../scatter/subtypes"),t=v("../scatter/link_traces"),p=v("./edit_style").styleTextSelection,s={};function i(f,c,l,h){var d=f._size,M=d.w*h,I=d.h*h;return[d.l*h+c.domain[0]*M,d.b*h+l.domain[0]*I,f.width*h-d.r*h-(1-c.domain[1])*M,f.height*h-d.t*h-(1-l.domain[1])*I]}(re.exports=function(f,c,l){if(l.length){var h,d,o=f._fullLayout,x=c._scene,u=c.xaxis,T=c.yaxis;if(x)if(n(f,["ANGLE_instanced_arrays","OES_element_index_uint"],s)){var _=x.count,w=o._glcanvas.data()[0].regl;if(t(f,c,l),x.dirty){if(!0===x.error2d&&(x.error2d=b(w)),!0===x.line2d&&(x.line2d=m(w)),!0===x.scatter2d&&(x.scatter2d=g(w)),!0===x.fill2d&&(x.fill2d=m(w)),!0===x.glText)for(x.glText=new Array(_),h=0;h<_;h++)x.glText[h]=new y(w);if(x.glText){if(_>x.glText.length){var M=_-x.glText.length;for(h=0;h<M;h++)x.glText.push(new y(w))}else _<x.glText.length&&x.glText.splice(_,x.glText.length-_).forEach(function(ee){ee.destroy()});for(h=0;h<_;h++)x.glText[h].update(x.textOptions[h])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(ee){if(ee&&ee.positions){for(var Q=ee.positions,oe=0;oe<Q.length&&(isNaN(Q[oe])||isNaN(Q[oe+1]));)oe+=2;for(var le=Q.length-2;le>oe&&(isNaN(Q[le])||isNaN(Q[le+1]));)le-=2;ee.positions=Q.slice(oe,le+2)}return ee}),x.line2d.update(x.lineOptions)),x.error2d){var S=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(S)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=e.repeat(null,_),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(ee,Q){var oe=l[Q];if(ee&&oe&&oe[0]&&oe[0].trace){var le,de,fe=oe[0],be=fe.trace,he=fe.t,_e=x.lineOptions[Q],Ce=[];be._ownfill&&Ce.push(Q),be._nexttrace&&Ce.push(Q+1),Ce.length&&(x.fillOrder[Q]=Ce);var Ee,Ae,ze=[],ve=_e&&_e.positions||he.positions;if("tozeroy"===be.fill){for(Ee=0;Ee<ve.length&&isNaN(ve[Ee+1]);)Ee+=2;for(Ae=ve.length-2;Ae>Ee&&isNaN(ve[Ae+1]);)Ae-=2;0!==ve[Ee+1]&&(ze=[ve[Ee],0]),ze=ze.concat(ve.slice(Ee,Ae+2)),0!==ve[Ae+1]&&(ze=ze.concat([ve[Ae],0]))}else if("tozerox"===be.fill){for(Ee=0;Ee<ve.length&&isNaN(ve[Ee]);)Ee+=2;for(Ae=ve.length-2;Ae>Ee&&isNaN(ve[Ae]);)Ae-=2;0!==ve[Ee]&&(ze=[0,ve[Ee+1]]),ze=ze.concat(ve.slice(Ee,Ae+2)),0!==ve[Ae]&&(ze=ze.concat([0,ve[Ae+1]]))}else if("toself"===be.fill||"tonext"===be.fill){for(ze=[],le=0,ee.splitNull=!0,de=0;de<ve.length;de+=2)(isNaN(ve[de])||isNaN(ve[de+1]))&&((ze=ze.concat(ve.slice(le,de))).push(ve[le],ve[le+1]),ze.push(null,null),le=de+2);ze=ze.concat(ve.slice(le)),le&&ze.push(ve[le],ve[le+1])}else{var Te=be._nexttrace;if(Te){var Ie=x.lineOptions[Q+1];if(Ie){var De=Ie.positions;if("tonexty"===be.fill){for(ze=ve.slice(),Q=Math.floor(De.length/2);Q--;){var Fe=De[2*Q],Ue=De[2*Q+1];isNaN(Fe)||isNaN(Ue)||ze.push(Fe,Ue)}ee.fill=Te.fillcolor}}}}if(be._prevtrace&&"tonext"===be._prevtrace.fill){var qe=x.lineOptions[Q-1].positions,je=ze.length/2,rt=[le=je];for(de=0;de<qe.length;de+=2)(isNaN(qe[de])||isNaN(qe[de+1]))&&(rt.push(de/2+je+1),le=de+2);ze=ze.concat(qe),ee.hole=rt}return ee.fillmode=be.fill,ee.opacity=be.opacity,ee.positions=ze,ee}}),x.fill2d.update(x.fillOptions))}var O=r(o.dragmode),C=o.clickmode.indexOf("select")>-1;for(h=0;h<_;h++){var D=l[h][0],B=D.trace,z=D.t,Y=z.index,G=B._length,J=z.x,te=z.y;if(B.selectedpoints||O||C){if(O||(O=!0),B.selectedpoints){var X=x.selectBatch[Y]=e.selIndices2selPoints(B),K={};for(d=0;d<X.length;d++)K[X[d]]=1;var ae=[];for(d=0;d<G;d++)K[d]||ae.push(d);x.unselectBatch[Y]=ae}var U=z.xpx=new Array(G),V=z.ypx=new Array(G);for(d=0;d<G;d++)U[d]=u.c2p(J[d]),V[d]=T.c2p(te[d])}else z.xpx=z.ypx=null}if(O){if(x.select2d||(x.select2d=g(o._glcanvas.data()[1].regl)),x.scatter2d){var q=new Array(_);for(h=0;h<_;h++)q[h]=x.selectBatch[h].length||x.unselectBatch[h].length?x.markerUnselectedOptions[h]:{};x.scatter2d.update(q)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&l.forEach(function(ee){a.hasText(((ee||[])[0]||{}).trace||{})&&p(ee)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var ie={viewport:i(o,u,T,f._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(T._rl||T.range)[0],(u._rl||u.range)[1],(T._rl||T.range)[1]]},H=e.repeat(ie,x.count);x.fill2d&&x.fill2d.update(H),x.line2d&&x.line2d.update(H),x.error2d&&x.error2d.update(H.concat(H)),x.scatter2d&&x.scatter2d.update(H),x.select2d&&x.select2d.update(H),x.glText&&x.glText.forEach(function(ee){ee.update(ie)})}else x.init()}}).reglPrecompiled=s},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){var y=b._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},r={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return b._scene||((y=b._scene={}).init=function(){g.extendFlat(y,r,e)},y.init(),y.update=function(n){var a=g.repeat(n,y.count);if(y.fill2d&&y.fill2d.update(a),y.scatter2d&&y.scatter2d.update(a),y.line2d&&y.line2d.update(a),y.error2d&&y.error2d.update(a.concat(a)),y.select2d&&y.select2d.update(a),y.glText)for(var t=0;t<y.count;t++)y.glText[t].update(n)},y.draw=function(){for(var n=y.count,a=y.fill2d,t=y.error2d,p=y.line2d,s=y.scatter2d,i=y.glText,f=y.select2d,c=y.selectBatch,l=y.unselectBatch,h=0;h<n;h++){if(a&&y.fillOrder[h]&&a.draw(y.fillOrder[h]),p&&y.lineOptions[h]&&p.draw(h),t&&(y.errorXOptions[h]&&t.draw(h),y.errorYOptions[h]&&t.draw(h+n)),s&&y.markerOptions[h])if(l[h].length){var d=g.repeat([],y.count);d[h]=l[h],s.draw(d)}else c[h].length||s.draw(h);i[h]&&y.textOptions[h]&&i[h].render()}f&&f.draw(c),y.dirty=!1},y.destroy=function(){y.fill2d&&y.fill2d.destroy&&y.fill2d.destroy(),y.scatter2d&&y.scatter2d.destroy&&y.scatter2d.destroy(),y.error2d&&y.error2d.destroy&&y.error2d.destroy(),y.line2d&&y.line2d.destroy&&y.line2d.destroy(),y.select2d&&y.select2d.destroy&&y.select2d.destroy(),y.glText&&y.glText.forEach(function(n){n.destroy&&n.destroy()}),y.lineOptions=null,y.fillOptions=null,y.markerOptions=null,y.markerSelectedOptions=null,y.markerUnselectedOptions=null,y.errorXOptions=null,y.errorYOptions=null,y.textOptions=null,y.textSelectedOptions=null,y.textUnselectedOptions=null,y.selectBatch=null,y.unselectBatch=null,b._scene=null}),y.dirty||g.extendFlat(y,e),y}},{"../../lib":515}],1001:[function(v,re,ne){"use strict";var g=v("../scatter/subtypes"),m=v("./edit_style").styleTextSelection;re.exports=function(b,y){var e=b.cd,r=b.xaxis,n=b.yaxis,a=[],t=e[0].trace,p=e[0].t,s=t._length,i=p.x,f=p.y,c=p._scene,l=p.index;if(!c)return a;var h=g.hasText(t),d=g.hasMarkers(t);if(!0!==t.visible||!d&&!h)return a;var x=[],u=[];if(!1!==y&&!y.degenerate)for(var T=0;T<s;T++)y.contains([p.xpx[T],p.ypx[T]],!1,T,b)?(x.push(T),a.push({pointNumber:T,x:r.c2d(i[T]),y:n.c2d(f[T])})):u.push(T);if(d){var _=c.scatter2d;if(x.length||u.length){if(!c.selectBatch[l].length&&!c.unselectBatch[l].length){var w=new Array(c.count);w[l]=c.markerUnselectedOptions[l],_.update.apply(_,w)}}else{var M=new Array(c.count);M[l]=c.markerOptions[l],_.update.apply(_,M)}}return c.selectBatch[l]=x,c.unselectBatch[l]=u,h&&m(e),a}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../scattergeo/attributes"),y=v("../scatter/attributes"),e=v("../../plots/mapbox/layout_attributes"),r=v("../../plots/attributes"),n=v("../../components/colorscale/attributes"),a=v("../../lib/extend").extendFlat,t=v("../../plot_api/edit_types").overrideAll,p=b.line,s=b.marker;re.exports=t({lon:b.lon,lat:b.lat,mode:a({},y.mode,{dflt:"markers"}),text:a({},y.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:a({},y.hovertext,{}),line:{color:p.color,width:p.width},connectgaps:y.connectgaps,marker:a({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},n("marker")),fill:b.fill,fillcolor:y.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:y.selected.marker},unselected:{marker:y.unselected.marker},hoverinfo:a({},r.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:g()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../lib"),b=v("../../constants/numerical").BADNUM,y=v("../../lib/geojson_utils"),e=v("../../components/colorscale"),r=v("../../components/drawing"),n=v("../scatter/make_bubble_size_func"),a=v("../scatter/subtypes"),t=v("../../plots/mapbox/convert_text_opts"),p=v("../../components/fx/helpers").appendArrayPointValue,s=v("../../lib/svg_text_utils").NEWLINES,i=v("../../lib/svg_text_utils").BR_TAG_ALL;function f(){return{geojson:y.makeBlank(),layout:{visibility:"none"},paint:{}}}function c(d,o){return m.isArrayOrTypedArray(d)?o?function(x){return g(d[x])?+d[x]:0}:function(x){return d[x]}:d?function(){return d}:l}function l(){return""}function h(d){return d[0]===b}re.exports=function(d,o){var x,u=o[0].trace,T=!0===u.visible&&0!==u._length,_="none"!==u.fill,w=a.hasLines(u),M=a.hasMarkers(u),I=a.hasText(u),S=M&&"circle"===u.marker.symbol,R=M&&"circle"!==u.marker.symbol,O=f(),C=f(),D=f(),B=f(),z={fill:O,line:C,circle:D,symbol:B};if(!T)return z;if((_||w)&&(x=y.calcTraceToLineCoords(o)),_&&(O.geojson=y.makePolygon(x),O.layout.visibility="visible",m.extendFlat(O.paint,{"fill-color":u.fillcolor})),w&&(C.geojson=y.makeLine(x),C.layout.visibility="visible",m.extendFlat(C.paint,{"line-width":u.line.width,"line-color":u.line.color,"line-opacity":u.opacity})),S){var Y=function(te){var X,K,ae,U,V=te[0].trace,q=V.marker,ie=V.selectedpoints,H=m.isArrayOrTypedArray(q.color),ee=m.isArrayOrTypedArray(q.size),Q=m.isArrayOrTypedArray(q.opacity);function oe(Ee){return V.opacity*Ee}H&&(K=e.hasColorscale(V,"marker")?e.makeColorScaleFuncFromTrace(q):m.identity),ee&&(ae=n(V)),Q&&(U=function(Ee){return oe(g(Ee)?+m.constrain(Ee,0,1):0)});var le,Ce,de=[];for(X=0;X<te.length;X++){var fe=te[X],be=fe.lonlat;if(!h(be)){var he={};K&&(he.mcc=fe.mcc=K(fe.mc)),ae&&(he.mrc=fe.mrc=ae(fe.ms)),U&&(he.mo=U(fe.mo)),ie&&(he.selected=fe.selected||0),de.push({type:"Feature",geometry:{type:"Point",coordinates:be},properties:he})}}if(ie)for(le=r.makeSelectedPointStyleFns(V),X=0;X<de.length;X++){var _e=de[X].properties;le.selectedOpacityFn&&(_e.mo=oe(le.selectedOpacityFn(_e))),le.selectedColorFn&&(_e.mcc=le.selectedColorFn(_e)),le.selectedSizeFn&&(_e.mrc=le.selectedSizeFn(_e))}return{geojson:{type:"FeatureCollection",features:de},mcc:H||le&&le.selectedColorFn?{type:"identity",property:"mcc"}:q.color,mrc:ee||le&&le.selectedSizeFn?{type:"identity",property:"mrc"}:(Ce=q.size,Ce/2),mo:Q||le&&le.selectedOpacityFn?{type:"identity",property:"mo"}:oe(q.opacity)}}(o);D.geojson=Y.geojson,D.layout.visibility="visible",m.extendFlat(D.paint,{"circle-color":Y.mcc,"circle-radius":Y.mrc,"circle-opacity":Y.mo})}if((R||I)&&(B.geojson=function(te,X){for(var K=X._fullLayout,ae=te[0].trace,U=ae.marker||{},V=U.symbol,q=U.angle,ie="circle"!==V?c(V):l,H="auto"!==q?c(q,!0):l,ee=a.hasText(ae)?c(ae.text):l,Q=[],oe=0;oe<te.length;oe++){var le=te[oe];if(!h(le.lonlat)){var de,fe=ae.texttemplate;if(fe){var be=Array.isArray(fe)?fe[oe]||"":fe,he=ae._module.formatLabels(le,ae,K),_e={};p(_e,ae,le.i),de=m.texttemplateString(be,he,K._d3locale,_e,le,ae._meta||{})}else de=ee(oe);de&&(de=de.replace(s,"").replace(i,"\n")),Q.push({type:"Feature",geometry:{type:"Point",coordinates:le.lonlat},properties:{symbol:ie(oe),angle:H(oe),text:de}})}}return{type:"FeatureCollection",features:Q}}(o,d),m.extendFlat(B.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),R&&(m.extendFlat(B.layout,{"icon-size":u.marker.size/10}),"angle"in u.marker&&"auto"!==u.marker.angle&&m.extendFlat(B.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),B.layout["icon-allow-overlap"]=u.marker.allowoverlap,m.extendFlat(B.paint,{"icon-opacity":u.opacity*u.marker.opacity,"icon-color":u.marker.color})),I)){var J=t(u.textposition,(u.marker||{}).size);m.extendFlat(B.layout,{"text-size":u.textfont.size,"text-anchor":J.anchor,"text-offset":J.offset}),m.extendFlat(B.paint,{"text-color":u.textfont.color,"text-opacity":u.opacity})}return z}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/text_defaults"),r=v("../scatter/fillcolor_defaults"),n=v("./attributes");re.exports=function(a,t,p,s){function i(c,l){return g.coerce(a,t,n,c,l)}if(l=t,d=(h=i)("lon")||[],o=h("lat")||[],x=Math.min(d.length,o.length),l._length=x,x){if(i("text"),i("texttemplate"),i("hovertext"),i("hovertemplate"),i("mode"),i("below"),m.hasLines(t)&&(y(a,t,p,s,i,{noDash:!0}),i("connectgaps")),m.hasMarkers(t)){b(a,t,p,s,i,{noLine:!0}),i("marker.allowoverlap"),i("marker.angle");var f=t.marker;"circle"!==f.symbol&&(g.isArrayOrTypedArray(f.size)&&(f.size=f.size[0]),g.isArrayOrTypedArray(f.color)&&(f.color=f.color[0]))}m.hasText(t)&&e(a,t,s,i,{noSelect:!0}),i("fill"),"none"!==t.fill&&r(a,t,p,i),g.coerceSelectionMarkerOpacity(t,i)}else t.visible=!1;var l,h,d,o,x}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(v,re,ne){"use strict";re.exports=function(g,m){return g.lon=m.lon,g.lat=m.lat,g}},{}],1006:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes");re.exports=function(m,b,y){var e={},r=y[b.subplot]._subplot.mockAxis,n=m.lonlat;return e.lonLabel=g.tickText(r,r.c2l(n[0]),!0).text,e.latLabel=g.tickText(r,r.c2l(n[1]),!0).text,e}},{"../../plots/cartesian/axes":566}],1007:[function(v,re,ne){"use strict";var g=v("../../components/fx"),m=v("../../lib"),b=v("../scatter/get_trace_color"),y=m.fillText,e=v("../../constants/numerical").BADNUM;function r(n,a,t){if(!n.hovertemplate){var p=(a.hi||n.hoverinfo).split("+"),s=-1!==p.indexOf("all"),i=-1!==p.indexOf("lon"),f=-1!==p.indexOf("lat"),c=a.lonlat,l=[];return s||i&&f?l.push("("+h(c[1])+", "+h(c[0])+")"):i?l.push(t.lon+h(c[0])):f&&l.push(t.lat+h(c[1])),(s||-1!==p.indexOf("text"))&&y(a,n,l),l.join("<br>")}function h(d){return d+"\xb0"}}re.exports={hoverPoints:function(n,a,t){var p=n.cd,s=p[0].trace,i=n.xa,f=n.ya,c=n.subplot,l=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),h=a-l;if(g.getClosest(p,function(I){var S=I.lonlat;if(S[0]===e)return 1/0;var R=m.modHalf(S[0],360),O=S[1],C=c.project([R,O]),D=C.x-i.c2p([h,O]),B=C.y-f.c2p([R,t]),z=Math.max(3,I.mrc||0);return Math.max(Math.sqrt(D*D+B*B)-z,1-3/z)},n),!1!==n.index){var d=p[n.index],o=d.lonlat,x=[m.modHalf(o[0],360)+l,o[1]],u=i.c2p(x),T=f.c2p(x),_=d.mrc||1;n.x0=u-_,n.x1=u+_,n.y0=T-_,n.y1=T+_;var w={};w[s.subplot]={_subplot:c};var M=s._module.formatLabels(d,s,w);return n.lonLabel=M.lonLabel,n.latLabel=M.latLabel,n.color=b(s,d),n.extraText=r(s,d,p[0].t.labels),n.hovertemplate=s.hovertemplate,[n]}},getExtraText:r}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946}],1008:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("../scattergeo/calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,eventData:v("./event_data"),selectPoints:v("./select"),styleOnSelect:function(g,m){m&&m[0].trace._glTrace.update(m)},moduleType:"trace",name:"scattermapbox",basePlotModule:v("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(v,re,ne){"use strict";var g=v("./convert"),m=v("../../plots/mapbox/constants").traceLayerPrefix,b=["fill","line","circle","symbol"];function y(r,n){this.type="scattermapbox",this.subplot=r,this.uid=n,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol"},this.layerIds={fill:m+n+"-fill",line:m+n+"-line",circle:m+n+"-circle",symbol:m+n+"-symbol"},this.below=null}var e=y.prototype;e.addSource=function(r,n){this.subplot.map.addSource(this.sourceIds[r],{type:"geojson",data:n.geojson})},e.setSourceData=function(r,n){this.subplot.map.getSource(this.sourceIds[r]).setData(n.geojson)},e.addLayer=function(r,n,a){this.subplot.addLayer({type:r,id:this.layerIds[r],source:this.sourceIds[r],layout:n.layout,paint:n.paint},a)},e.update=function(r){var n,a,t,p=this.subplot,s=p.map,i=g(p.gd,r),f=p.belowLookup["trace-"+this.uid];if(f!==this.below){for(n=b.length-1;n>=0;n--)s.removeLayer(this.layerIds[a=b[n]]);for(n=0;n<b.length;n++)t=i[a=b[n]],this.addLayer(a,t,f);this.below=f}for(n=0;n<b.length;n++)t=i[a=b[n]],p.setOptions(this.layerIds[a],"setLayoutProperty",t.layout),"visible"===t.layout.visibility&&(this.setSourceData(a,t),p.setOptions(this.layerIds[a],"setPaintProperty",t.paint));r[0].trace._glTrace=this},e.dispose=function(){for(var r=this.subplot.map,n=b.length-1;n>=0;n--){var a=b[n];r.removeLayer(this.layerIds[a]),r.removeSource(this.sourceIds[a])}},re.exports=function(r,n){for(var a=n[0].trace,t=new y(r,a.uid),p=g(r.gd,n),s=t.below=r.belowLookup["trace-"+a.uid],i=0;i<b.length;i++){var f=b[i],c=p[f];t.addSource(f,c),t.addLayer(f,c,s)}return n[0].trace._glTrace=t,t}},{"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/subtypes"),b=v("../../constants/numerical").BADNUM;re.exports=function(y,e){var r,n=y.cd,a=y.xaxis,t=y.yaxis,p=[];if(!m.hasMarkers(n[0].trace))return[];if(!1===e)for(r=0;r<n.length;r++)n[r].selected=0;else for(r=0;r<n.length;r++){var i=n[r],f=i.lonlat;if(f[0]!==b){var c=[g.modHalf(f[0],360),f[1]],l=[a.c2p(c),t.c2p(c)];e.contains(l,null,r,y)?(p.push({pointNumber:r,lon:f[0],lat:f[1]}),i.selected=1):i.selected=0}}return p}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../lib/extend").extendFlat,y=v("../scatter/attributes"),e=v("../../plots/attributes"),r=y.line;re.exports={mode:y.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:b({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:b({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:b({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:y.hoveron,hovertemplate:g(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../constants/numerical").BADNUM,b=v("../../plots/cartesian/axes"),y=v("../scatter/colorscale_calc"),e=v("../scatter/arrays_to_calcdata"),r=v("../scatter/calc_selection"),n=v("../scatter/calc").calcMarkerSize;re.exports=function(a,t){for(var p=a._fullLayout,s=t.subplot,i=p[s].radialaxis,f=p[s].angularaxis,c=i.makeCalcdata(t,"r"),l=f.makeCalcdata(t,"theta"),h=t._length,d=new Array(h),o=0;o<h;o++){var x=c[o],u=l[o],T=d[o]={};g(x)&&g(u)?(T.r=x,T.theta=u):T.r=m}var _=n(t,h);return t._extremes.x=b.findExtremes(i,c,{ppad:_}),y(a,t),e(d,t),r(d,t),d}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),r=v("../scatter/text_defaults"),n=v("../scatter/fillcolor_defaults"),a=v("../scatter/constants").PTS_LINESONLY,t=v("./attributes");function p(s,i,f,c){var l,h=c("r"),d=c("theta");if(h)d?l=Math.min(h.length,d.length):(l=h.length,c("theta0"),c("dtheta"));else{if(!d)return 0;l=i.theta.length,c("r0"),c("dr")}return i._length=l,l}re.exports={handleRThetaDefaults:p,supplyDefaults:function(s,i,f,c){function l(o,x){return g.coerce(s,i,t,o,x)}var h=p(0,i,0,l);if(h){l("thetaunit"),l("mode",h<a?"lines+markers":"lines"),l("text"),l("hovertext"),"fills"!==i.hoveron&&l("hovertemplate"),m.hasLines(i)&&(y(s,i,f,c,l),e(s,i,l),l("connectgaps")),m.hasMarkers(i)&&b(s,i,f,c,l,{gradient:!0}),m.hasText(i)&&(l("texttemplate"),r(s,i,c,l));var d=[];(m.hasMarkers(i)||m.hasText(i))&&(l("cliponaxis"),l("marker.maxdisplayed"),d.push("points")),l("fill"),"none"!==i.fill&&(n(s,i,f,l),m.hasLines(i)||e(s,i,l)),"tonext"!==i.fill&&"toself"!==i.fill||d.push("fills"),l("hoveron",d.join("+")||"points"),g.coerceSelectionMarkerOpacity(i,l)}else i.visible=!1}}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes");re.exports=function(b,y,e){var r,n,a={},t=e[y.subplot]._subplot;t?(r=t.radialAxis,n=t.angularAxis):(r=(t=e[y.subplot]).radialaxis,n=t.angularaxis);var p=r.c2l(b.r);a.rLabel=m.tickText(r,p,!0).text;var s="degrees"===n.thetaunit?g.rad2deg(b.theta):b.theta;return a.thetaLabel=m.tickText(n,s,!0).text,a}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(v,re,ne){"use strict";var g=v("../scatter/hover");function m(b,y,e,r){var n=e.radialAxis,a=e.angularAxis;n._hovertitle="r",a._hovertitle="\u03b8";var t={};t[y.subplot]={_subplot:e};var p=y._module.formatLabels(b,y,t);r.rLabel=p.rLabel,r.thetaLabel=p.thetaLabel;var i=[];function f(l,h){i.push(l._hovertitle+": "+h)}if(!y.hovertemplate){var c=(b.hi||y.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["r","theta","text"]),-1!==c.indexOf("r")&&f(n,r.rLabel),-1!==c.indexOf("theta")&&f(a,r.thetaLabel),-1!==c.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}re.exports={hoverPoints:function(b,y,e,r){var n=g(b,y,e,r);if(n&&!1!==n[0].index){var a=n[0];if(void 0===a.index)return n;var t=b.subplot,p=a.cd[a.index],s=a.trace;if(t.isPtInside(p))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(p,s,t,a),a.hovertemplate=s.hovertemplate,n}},makeHoverPointText:m}},{"../scatter/hover":947}],1016:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:v("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(v,re,ne){"use strict";var g=v("../scatter/plot"),m=v("../../constants/numerical").BADNUM;re.exports=function(b,y,e){for(var r=y.layers.frontplot.select("g.scatterlayer"),n={xaxis:y.xaxis,yaxis:y.yaxis,plot:y.framework,layerClipId:y._hasClipOnAxisFalse?y.clipIds.forTraces:null},a=y.radialAxis,t=y.angularAxis,p=0;p<e.length;p++)for(var s=e[p],i=0;i<s.length;i++){var f=s[i],c=f.r;if(c===m)f.x=f.y=m;else{var l=a.c2g(c),h=t.c2g(f.theta);f.x=l*Math.cos(h),f.y=l*Math.sin(h)}}g(b,n,e,r)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(v,re,ne){"use strict";var g=v("../scatterpolar/attributes"),m=v("../scattergl/attributes"),b=v("../../plots/template_attributes").texttemplateAttrs;re.exports={mode:g.mode,r:g.r,theta:g.theta,r0:g.r0,dr:g.dr,theta0:g.theta0,dtheta:g.dtheta,thetaunit:g.thetaunit,text:g.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:g.hovertext,hovertemplate:g.hovertemplate,line:m.line,connectgaps:m.connectgaps,marker:m.marker,fill:m.fill,fillcolor:m.fillcolor,textposition:m.textposition,textfont:m.textfont,hoverinfo:g.hoverinfo,selected:g.selected,unselected:g.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:v("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(v,re,ne){"use strict";var g=v("../scatter/colorscale_calc"),m=v("../scatter/calc").calcMarkerSize,b=v("../scattergl/convert"),y=v("../../plots/cartesian/axes"),e=v("../scattergl/constants").TOO_MANY_POINTS;re.exports=function(r,n){var a=r._fullLayout,t=n.subplot,p=a[t].radialaxis,s=a[t].angularaxis,i=n._r=p.makeCalcdata(n,"r"),f=n._theta=s.makeCalcdata(n,"theta"),c=n._length,l={};c<i.length&&(i=i.slice(0,c)),c<f.length&&(f=f.slice(0,c)),l.r=i,l.theta=f,g(r,n);var h,d=l.opts=b.style(r,n);return c<e?h=m(n,c):d.marker&&(h=2*(d.marker.sizeAvg||Math.max(d.marker.size,3))),n._extremes.x=y.findExtremes(p,i,{ppad:h}),[{x:!1,y:!1,t:l,trace:n}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/subtypes"),b=v("../scatterpolar/defaults").handleRThetaDefaults,y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/text_defaults"),n=v("../scatter/fillcolor_defaults"),a=v("../scatter/constants").PTS_LINESONLY,t=v("./attributes");re.exports=function(p,s,i,f){function c(h,d){return g.coerce(p,s,t,h,d)}var l=b(p,s,f,c);l?(c("thetaunit"),c("mode",l<a?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),m.hasLines(s)&&(e(p,s,i,f,c),c("connectgaps")),m.hasMarkers(s)&&y(p,s,i,f,c),m.hasText(s)&&(c("texttemplate"),r(p,s,f,c)),c("fill"),"none"!==s.fill&&n(p,s,i,c),g.coerceSelectionMarkerOpacity(s,c)):s.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(v,re,ne){"use strict";var g=v("../scatterpolar/format_labels");re.exports=function(m,b,y){var e=m.i;return"r"in m||(m.r=b._r[e]),"theta"in m||(m.theta=b._theta[e]),g(m,b,y)}},{"../scatterpolar/format_labels":1014}],1023:[function(v,re,ne){"use strict";var g=v("../scattergl/hover"),m=v("../scatterpolar/hover").makeHoverPointText;re.exports={hoverPoints:function(b,y,e,r){var n=b.cd[0].t,a=n.r,t=n.theta,p=g.hoverPoints(b,y,e,r);if(p&&!1!==p[0].index){var s=p[0];if(void 0===s.index)return p;var i=b.subplot,f=s.cd[s.index],c=s.trace;if(f.r=a[s.index],f.theta=t[s.index],i.isPtInside(f))return s.xLabelVal=void 0,s.yLabelVal=void 0,m(f,c,i,s),p}}}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(v,re,ne){arguments[4][905][0].apply(ne,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(v,re,ne){"use strict";var g=v("@plotly/point-cluster"),m=v("fast-isnumeric"),b=v("../scattergl/plot"),y=v("../scattergl/scene_update"),e=v("../scattergl/convert"),r=v("../../lib"),n=v("../scattergl/constants").TOO_MANY_POINTS;re.exports=function(a,t,p){if(p.length){var s=t.radialAxis,i=t.angularAxis,f=y(a,t);return p.forEach(function(c){if(c&&c[0]&&c[0].trace){var l,h=c[0],d=h.trace,o=h.t,x=d._length,u=o.r,T=o.theta,_=o.opts,w=u.slice(),M=T.slice();for(l=0;l<u.length;l++)t.isPtInside({r:u[l],theta:T[l]})||(w[l]=NaN,M[l]=NaN);var I=new Array(2*x),S=Array(x),R=Array(x);for(l=0;l<x;l++){var O,C,D=w[l];if(m(D)){var B=s.c2g(D),z=i.c2g(M[l],d.thetaunit);O=B*Math.cos(z),C=B*Math.sin(z)}else O=C=NaN;S[l]=I[2*l]=O,R[l]=I[2*l+1]=C}o.tree=g(I),_.marker&&x>=n&&(_.marker.cluster=o.tree),_.marker&&(_.markerSel.positions=_.markerUnsel.positions=_.marker.positions=I),_.line&&I.length>1&&r.extendFlat(_.line,e.linePositions(a,d,I)),_.text&&(r.extendFlat(_.text,{positions:I},e.textPosition(a,d,_.text,_.marker)),r.extendFlat(_.textSel,{positions:I},e.textPosition(a,d,_.text,_.markerSel)),r.extendFlat(_.textUnsel,{positions:I},e.textPosition(a,d,_.text,_.markerUnsel))),_.fill&&!f.fill2d&&(f.fill2d=!0),_.marker&&!f.scatter2d&&(f.scatter2d=!0),_.line&&!f.line2d&&(f.line2d=!0),_.text&&!f.glText&&(f.glText=!0),f.lineOptions.push(_.line),f.fillOptions.push(_.fill),f.markerOptions.push(_.marker),f.markerSelectedOptions.push(_.markerSel),f.markerUnselectedOptions.push(_.markerUnsel),f.textOptions.push(_.text),f.textSelectedOptions.push(_.textSel),f.textUnselectedOptions.push(_.textUnsel),f.selectBatch.push([]),f.unselectBatch.push([]),o.x=S,o.y=R,o.rawx=S,o.rawy=R,o.r=u,o.theta=T,o.positions=I,o._scene=f,o.index=f.count,f.count++}}),b(a,t,p)}},re.exports.reglPrecompiled={}},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../lib/extend").extendFlat,y=v("../scatter/attributes"),e=v("../../plots/attributes"),r=y.line;re.exports={mode:y.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:y.text,texttemplate:m({editType:"plot"},{keys:["real","imag","text"]}),hovertext:y.hovertext,line:{color:r.color,width:r.width,dash:r.dash,shape:b({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:y.connectgaps,marker:y.marker,cliponaxis:b({},y.cliponaxis,{dflt:!1}),textposition:y.textposition,textfont:y.textfont,fill:b({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:y.hoveron,hovertemplate:g(),selected:y.selected,unselected:y.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../../constants/numerical").BADNUM,b=v("../scatter/colorscale_calc"),y=v("../scatter/arrays_to_calcdata"),e=v("../scatter/calc_selection"),r=v("../scatter/calc").calcMarkerSize;re.exports=function(n,a){for(var t=n._fullLayout,p=a.subplot,i=t[p].imaginaryaxis,f=t[p].realaxis.makeCalcdata(a,"real"),c=i.makeCalcdata(a,"imag"),l=a._length,h=new Array(l),d=0;d<l;d++){var o=f[d],x=c[d],u=h[d]={};g(o)&&g(x)?(u.real=o,u.imag=x):u.real=m}return r(a,l),b(n,a),y(h,a),e(h,a),h}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/subtypes"),b=v("../scatter/marker_defaults"),y=v("../scatter/line_defaults"),e=v("../scatter/line_shape_defaults"),r=v("../scatter/text_defaults"),n=v("../scatter/fillcolor_defaults"),a=v("../scatter/constants").PTS_LINESONLY,t=v("./attributes");re.exports=function(p,s,i,f){function c(d,o){return g.coerce(p,s,t,d,o)}var o,u,T,_,w,l=(o=s,_=(u=c)("real"),w=u("imag"),_&&w&&(T=Math.min(_.length,w.length)),o._length=T,T);if(l){c("mode",l<a?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),m.hasLines(s)&&(y(p,s,i,f,c),e(p,s,c),c("connectgaps")),m.hasMarkers(s)&&b(p,s,i,f,c,{gradient:!0}),m.hasText(s)&&(c("texttemplate"),r(p,s,f,c));var h=[];(m.hasMarkers(s)||m.hasText(s))&&(c("cliponaxis"),c("marker.maxdisplayed"),h.push("points")),c("fill"),"none"!==s.fill&&(n(p,s,i,c),m.hasLines(s)||e(p,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||h.push("fills"),c("hoveron",h.join("+")||"points"),g.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes");re.exports=function(m,b,y){var e={},r=y[b.subplot]._subplot;return e.realLabel=g.tickText(r.radialAxis,m.real,!0).text,e.imagLabel=g.tickText(r.angularAxis,m.imag,!0).text,e}},{"../../plots/cartesian/axes":566}],1030:[function(v,re,ne){"use strict";var g=v("../scatter/hover");function m(b,y,e,r){var n=e.radialAxis,a=e.angularAxis;n._hovertitle="real",a._hovertitle="imag";var t={};t[y.subplot]={_subplot:e};var p=y._module.formatLabels(b,y,t);r.realLabel=p.realLabel,r.imagLabel=p.imagLabel;var i=[];function f(l,h){i.push(l._hovertitle+": "+h)}if(!y.hovertemplate){var c=(b.hi||y.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["real","imag","text"]),-1!==c.indexOf("real")&&f(n,r.realLabel),-1!==c.indexOf("imag")&&f(a,r.imagLabel),-1!==c.indexOf("text")&&r.text&&(i.push(r.text),delete r.text),r.extraText=i.join("<br>")}}re.exports={hoverPoints:function(b,y,e,r){var n=g(b,y,e,r);if(n&&!1!==n[0].index){var a=n[0];if(void 0===a.index)return n;var t=b.subplot,p=a.cd[a.index],s=a.trace;if(t.isPtInside(p))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(p,s,t,a),a.hovertemplate=s.hovertemplate,n}},makeHoverPointText:m}},{"../scatter/hover":947}],1031:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"scattersmith",basePlotModule:v("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover").hoverPoints,selectPoints:v("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(v,re,ne){"use strict";var g=v("../scatter/plot"),m=v("../../constants/numerical").BADNUM,b=v("../../plots/smith/helpers").smith;re.exports=function(y,e,r){for(var n=e.layers.frontplot.select("g.scatterlayer"),a={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},t=0;t<r.length;t++)for(var p=r[t],s=0;s<p.length;s++){var i=p[s],f=i.real;if(f===m)i.x=i.y=m;else{var c=b([f,i.imag]);i.x=c[0],i.y=c[1]}}g(y,a,r,n)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../scatter/attributes"),y=v("../../plots/attributes"),e=v("../../components/colorscale/attributes"),r=v("../../components/drawing/attributes").dash,n=v("../../lib/extend").extendFlat,a=b.marker,t=b.line,p=a.line;re.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},b.mode,{dflt:"markers"}),text:n({},b.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},b.hovertext,{}),line:{color:t.color,width:t.width,dash:r,shape:n({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:b.connectgaps,cliponaxis:b.cliponaxis,fill:n({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,marker:n({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:n({width:p.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:b.textfont,textposition:b.textposition,selected:b.selected,unselected:b.unselected,hoverinfo:n({},y.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:b.hoveron,hovertemplate:g()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(v,re,ne){"use strict";var g=v("fast-isnumeric"),m=v("../scatter/colorscale_calc"),b=v("../scatter/arrays_to_calcdata"),y=v("../scatter/calc_selection"),e=v("../scatter/calc").calcMarkerSize,r=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};re.exports=function(a,t){var p,s,i,f,c,l,h=a._fullLayout[t.subplot].sum,d=t.sum||h,o={a:t.a,b:t.b,c:t.c};for(p=0;p<r.length;p++)if(!o[i=r[p]]){for(c=o[n[i][0]],l=o[n[i][1]],f=new Array(c.length),s=0;s<c.length;s++)f[s]=d-c[s]-l[s];o[i]=f}var x,u,T,_,I=t._length,S=new Array(I);for(p=0;p<I;p++)u=o.b[p],T=o.c[p],g(x=o.a[p])&&g(u)&&g(T)?(1!=(_=h/((x=+x)+(u=+u)+(T=+T)))&&(x*=_,u*=_,T*=_),S[p]={x:T-u,y:x,a:x,b:u,c:T}):S[p]={x:!1,y:!1};return e(t,I),m(a,t),b(S,t),y(S,t),S}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/constants"),b=v("../scatter/subtypes"),y=v("../scatter/marker_defaults"),e=v("../scatter/line_defaults"),r=v("../scatter/line_shape_defaults"),n=v("../scatter/text_defaults"),a=v("../scatter/fillcolor_defaults"),t=v("./attributes");re.exports=function(p,s,i,f){function c(u,T){return g.coerce(p,s,t,u,T)}var l,h=c("a"),d=c("b"),o=c("c");if(h?(l=h.length,d?(l=Math.min(l,d.length),o&&(l=Math.min(l,o.length))):l=o?Math.min(l,o.length):0):d&&o&&(l=Math.min(d.length,o.length)),l){s._length=l,c("sum"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),c("mode",l<m.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(s)&&(e(p,s,i,f,c),r(p,s,c),c("connectgaps")),b.hasMarkers(s)&&y(p,s,i,f,c,{gradient:!0}),b.hasText(s)&&(c("texttemplate"),n(p,s,f,c));var x=[];(b.hasMarkers(s)||b.hasText(s))&&(c("cliponaxis"),c("marker.maxdisplayed"),x.push("points")),c("fill"),"none"!==s.fill&&(a(p,s,i,c),b.hasLines(s)||r(p,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||x.push("fills"),c("hoveron",x.join("+")||"points"),g.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(v,re,ne){"use strict";re.exports=function(g,m,b,y,e){if(m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),y[e]){var r=y[e];g.a=r.a,g.b=r.b,g.c=r.c}else g.a=m.a,g.b=m.b,g.c=m.c;return g}},{}],1037:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes");re.exports=function(m,b,y){var e={},r=y[b.subplot]._subplot;return e.aLabel=g.tickText(r.aaxis,m.a,!0).text,e.bLabel=g.tickText(r.baxis,m.b,!0).text,e.cLabel=g.tickText(r.caxis,m.c,!0).text,e}},{"../../plots/cartesian/axes":566}],1038:[function(v,re,ne){"use strict";var g=v("../scatter/hover");re.exports=function(m,b,y,e){var r=g(m,b,y,e);if(r&&!1!==r[0].index){var n=r[0];if(void 0===n.index){var t=m.xa._length,p=t*(1-n.y0/m.ya._length)/2,s=t-p;return n.x0=Math.max(Math.min(n.x0,s),p),n.x1=Math.max(Math.min(n.x1,s),p),r}var i=n.cd[n.index],f=n.trace,c=n.subplot;n.a=i.a,n.b=i.b,n.c=i.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var l={};l[f.subplot]={_subplot:c};var h=f._module.formatLabels(i,f,l);n.aLabel=h.aLabel,n.bLabel=h.bLabel,n.cLabel=h.cLabel;var o=[];if(!f.hovertemplate){var x=(i.hi||f.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","c"]),-1!==x.indexOf("a")&&u(c.aaxis,n.aLabel),-1!==x.indexOf("b")&&u(c.baxis,n.bLabel),-1!==x.indexOf("c")&&u(c.caxis,n.cLabel)}return n.extraText=o.join("<br>"),n.hovertemplate=f.hovertemplate,r}function u(T,_){o.push(T._hovertitle+": "+_)}}},{"../scatter/hover":947}],1039:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),formatLabels:v("./format_labels"),calc:v("./calc"),plot:v("./plot"),style:v("../scatter/style").style,styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../scatter/select"),eventData:v("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:v("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(v,re,ne){"use strict";var g=v("../scatter/plot");re.exports=function(m,b,y){var e=b.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var r={xaxis:b.xaxis,yaxis:b.yaxis,plot:e,layerClipId:b._hasClipOnAxisFalse?b.clipIdRelative:null},n=b.layers.frontplot.select("g.scatterlayer");g(m,r,y,n)}},{"../scatter/plot":957}],1041:[function(v,re,ne){"use strict";var g=v("../scatter/attributes"),m=v("../../components/colorscale/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../scattergl/attributes"),r=v("../../plots/cartesian/constants").idRegex,n=v("../../plot_api/plot_template").templatedArray,a=v("../../lib/extend").extendFlat,t=g.marker,p=t.line,s=a(m("marker.line",{editTypeOverride:"calc"}),{width:a({},p.width,{editType:"calc"}),editType:"calc"}),i=a(m("marker"),{symbol:t.symbol,size:a({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:s,editType:"calc"});function f(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:r[c],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",re.exports={dimensions:n("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},e.text,{}),hovertext:a({},e.hovertext,{}),hovertemplate:y(),xhoverformat:b("x"),yhoverformat:b("y"),marker:i,xaxes:f("x"),yaxes:f("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../components/grid");re.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:v("../scatter/marker_colorbar"),calc:v("./calc"),plot:v("./plot"),hoverPoints:v("./hover").hoverPoints,selectPoints:v("./select"),editStyle:v("./edit_style"),meta:{}},g.register(m)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(v,re,ne){"use strict";var g=v("regl-line2d"),m=v("../../registry"),b=v("../../lib/prepare_regl"),y=v("../../plots/get_data").getModuleCalcData,e=v("../../plots/cartesian"),r=v("../../plots/cartesian/axis_ids").getFromId,n=v("../../plots/cartesian/axes").shouldShowZeroLine,a={};function t(s,i,f){for(var l=i._visibleDims,h=f.viewOpts.ranges=new Array(f.matrixOptions.data.length),d=0;d<l.length;d++){var o=l[d],x=h[d]=new Array(4),u=r(s,i._diag[o][0]);u&&(x[0]=u.r2l(u.range[0]),x[2]=u.r2l(u.range[1]));var T=r(s,i._diag[o][1]);T&&(x[1]=T.r2l(T.range[0]),x[3]=T.r2l(T.range[1]))}f.selectBatch.length||f.unselectBatch.length?f.matrix.update({ranges:h},{ranges:h}):f.matrix.update({ranges:h})}function p(s){var i=s._fullLayout,f=i._glcanvas.data()[0].regl,c=i._splomGrid;c||(c=i._splomGrid=g(f)),c.update(function(l){var h,d=l._context.plotGlPixelRatio,o=l._fullLayout,x=o._size,u=[0,0,o.width*d,o.height*d],T={};function _(X,K,ae,U,V,q){ae*=d,U*=d,V*=d,q*=d;var ie=K[X+"color"],H=K[X+"width"],ee=String(ie+H);ee in T?T[ee].data.push(NaN,NaN,ae,U,V,q):T[ee]={data:[ae,U,V,q],join:"rect",thickness:H*d,color:ie,viewport:u,range:u,overlay:!1}}for(h in o._splomSubplots){var w,M,I=o._plots[h],S=I.xaxis,R=I.yaxis,O=S._gridVals,C=R._gridVals,D=S._offset,B=S._length,z=R._length,Y=x.b+R.domain[0]*x.h,G=-R._m,J=-G*R.r2l(R.range[0],R.calendar);if(S.showgrid)for(h=0;h<O.length;h++)w=D+S.l2p(O[h].x),_("grid",S,w,Y,w,Y+z);if(R.showgrid)for(h=0;h<C.length;h++)_("grid",R,D,M=Y+J+G*C[h].x,D+B,M);n(l,S,R)&&(w=D+S.l2p(0),_("zeroline",S,w,Y,w,Y+z)),n(l,R,S)&&_("zeroline",R,D,M=Y+J+0,D+B,M)}var te=[];for(h in T)te.push(T[h]);return te}(s))}re.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(s){var i=s._fullLayout,f=m.getModule("splom"),c=y(s.calcdata,f)[0];b(s,["ANGLE_instanced_arrays","OES_element_index_uint"],a)&&(i._hasOnlyLargeSploms&&p(s),f.plot(s,{},c))},drag:function(s){var i=s.calcdata,f=s._fullLayout;f._hasOnlyLargeSploms&&p(s);for(var c=0;c<i.length;c++){var l=i[c][0].trace,h=f._splomScenes[l.uid];"splom"===l.type&&h&&h.matrix&&t(s,l,h)}},updateGrid:p,clean:function(s,i,f,c){var l,h={};if(c._splomScenes){for(l=0;l<s.length;l++){var d=s[l];"splom"===d.type&&(h[d.uid]=1)}for(l=0;l<f.length;l++){var o=f[l];if(!h[o.uid]){var x=c._splomScenes[o.uid];x&&x.destroy&&x.destroy(),c._splomScenes[o.uid]=null,delete c._splomScenes[o.uid]}}}0===Object.keys(c._splomScenes||{}).length&&delete c._splomScenes,c._splomGrid&&!i._hasOnlyLargeSploms&&c._hasOnlyLargeSploms&&(c._splomGrid.destroy(),c._splomGrid=null,delete c._splomGrid),e.clean(s,i,f,c)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:a}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axis_ids"),b=v("../scatter/calc").calcMarkerSize,y=v("../scatter/calc").calcAxisExpansion,e=v("../scatter/colorscale_calc"),r=v("../scattergl/convert").markerSelection,n=v("../scattergl/convert").markerStyle,a=v("./scene_update"),t=v("../../constants/numerical").BADNUM,p=v("../scattergl/constants").TOO_MANY_POINTS;re.exports=function(s,i){var f,c,l,h,d,o,x=i.dimensions,u=i._length,T={},_=T.cdata=[],w=T.data=[],M=i._visibleDims=[];function I(R,O){for(var C=R.makeCalcdata({v:O.values,vcalendar:i.calendar},"v"),D=0;D<C.length;D++)C[D]=C[D]===t?NaN:C[D];_.push(C),w.push("log"===R.type?g.simpleMap(C,R.c2l):C)}for(f=0;f<x.length;f++)if((l=x[f]).visible){if(h=m.getFromId(s,i._diag[f][0]),d=m.getFromId(s,i._diag[f][1]),h&&d&&h.type!==d.type){g.log("Skipping splom dimension "+f+" with conflicting axis types");continue}h?(I(h,l),d&&"category"===d.type&&(d._categories=h._categories.slice())):I(d,l),M.push(f)}for(e(s,i),g.extendFlat(T,n(i)),o=_.length*u>p?T.sizeAvg||Math.max(T.size,3):b(i,u),c=0;c<M.length;c++)l=x[f=M[c]],h=m.getFromId(s,i._diag[f][0])||{},d=m.getFromId(s,i._diag[f][1])||{},y(s,i,h,d,_[c],_[c],o);var S=a(s,i);return S.matrix||(S.matrix=!0),S.matrixOptions=T,S.selectedOptions=r(i,i.selected),S.unselectedOptions=r(i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/array_container_defaults"),b=v("./attributes"),y=v("../scatter/subtypes"),e=v("../scatter/marker_defaults"),r=v("../parcoords/merge_length"),n=v("../scattergl/helpers").isOpenSymbol;function a(t,p){function s(f,c){return g.coerce(t,p,b.dimensions,f,c)}s("label");var i=s("values");i&&i.length?s("visible"):p.visible=!1,s("axis.type"),s("axis.matches")}re.exports=function(t,p,s,i){function f(u,T){return g.coerce(t,p,b,u,T)}var c=m(t,p,{name:"dimensions",handleItemDefaults:a}),l=f("diagonal.visible"),h=f("showupperhalf"),d=f("showlowerhalf");if(r(p,c,"values")&&(l||h||d)){f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),e(t,p,s,i,f);var o=n(p.marker.symbol),x=y.isBubble(p);f("marker.line.width",o||x?1:0),function(u,T,_,w){var M,I,S=T.dimensions,R=S.length,O=T.showupperhalf,C=T.showlowerhalf,D=T.diagonal.visible,B=new Array(R),z=new Array(R);for(M=0;M<R;M++){var Y=M?M+1:"";B[M]="x"+Y,z[M]="y"+Y}var G=w("xaxes",B),J=w("yaxes",z),te=T._diag=new Array(R);T._xaxes={},T._yaxes={};var X=[],K=[];function ae(le,de,fe,be){if(le){var he=le.charAt(0),_e=_._splomAxes[he];if(T["_"+he+"axes"][le]=1,be.push(le),!(le in _e)){var Ce=_e[le]={};fe&&(Ce.label=fe.label||"",fe.visible&&fe.axis&&(fe.axis.type&&(Ce.type=fe.axis.type),fe.axis.matches&&(Ce.matches=de)))}}}var U=!D&&!C,V=!D&&!O;for(T._axesDim={},M=0;M<R;M++){var q=S[M],ie=0===M,H=M===R-1,ee=ie&&U||H&&V?void 0:G[M],Q=ie&&V||H&&U?void 0:J[M];ae(ee,Q,q,X),ae(Q,ee,q,K),te[M]=[ee,Q],T._axesDim[ee]=M,T._axesDim[Q]=M}for(M=0;M<X.length;M++)for(I=0;I<K.length;I++){var oe=X[M]+K[I];M>I&&O||M<I&&C?_._splomSubplots[oe]=1:M!==I||!D&&C&&O||(_._splomSubplots[oe]=1)}(!C||!D&&O&&C)&&(_._splomGridDflt.xside="bottom",_._splomGridDflt.yside="left")}(0,p,i,f),g.coerceSelectionMarkerOpacity(p,f)}else p.visible=!1}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../scatter/colorscale_calc"),b=v("../scattergl/convert").markerStyle;re.exports=function(y,e){var r=e.trace,n=y._fullLayout._splomScenes[r.uid];if(n){m(y,r),g.extendFlat(n.matrixOptions,b(r));var a=g.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(a,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(v,re,ne){"use strict";ne.getDimIndex=function(g,m){for(var b=m._id,y={x:0,y:1}[b.charAt(0)],e=g._visibleDims,r=0;r<e.length;r++)if(g._diag[e[r]][y]===b)return r;return!1}},{}],1048:[function(v,re,ne){"use strict";var g=v("./helpers"),m=v("../scattergl/hover").calcHover;re.exports={hoverPoints:function(b,y,e){var r=b.cd[0].trace,n=b.scene.matrixOptions.cdata,a=b.xa,t=b.ya,p=a.c2p(y),s=t.c2p(e),i=b.distance,f=g.getDimIndex(r,a),c=g.getDimIndex(r,t);if(!1===f||!1===c)return[b];for(var l,h,d=n[f],o=n[c],x=i,u=0;u<d.length;u++){var _=o[u],w=a.c2p(d[u])-p,M=t.c2p(_)-s,I=Math.sqrt(w*w+M*M);I<x&&(x=h=I,l=u)}return b.index=l,b.distance=x,b.dxy=h,void 0===l?[b]:[m(b,d,o,r)]}}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(v,re,ne){"use strict";var g=v("./base_index");g.basePlotModule=v("./base_plot"),re.exports=g},{"./base_index":1042,"./base_plot":1043}],1050:[function(v,re,ne){"use strict";var g=v("regl-splom"),m=v("../../lib"),b=v("../../plots/cartesian/axis_ids"),y=v("../../components/dragelement/helpers").selectMode;function e(r,n){var a,t,p,s,i,f=r._fullLayout,c=f._size,l=n.trace,h=n.t,d=f._splomScenes[l.uid],o=d.matrixOptions,x=o.cdata,u=f._glcanvas.data()[0].regl,T=f.dragmode;if(0!==x.length){o.lower=l.showupperhalf,o.upper=l.showlowerhalf,o.diagonal=l.diagonal.visible;var _=l._visibleDims,w=x.length,M=d.viewOpts={};for(M.ranges=new Array(w),M.domains=new Array(w),i=0;i<_.length;i++){p=_[i];var I=M.ranges[i]=new Array(4),S=M.domains[i]=new Array(4);(a=b.getFromId(r,l._diag[p][0]))&&(I[0]=a._rl[0],I[2]=a._rl[1],S[0]=a.domain[0],S[2]=a.domain[1]),(t=b.getFromId(r,l._diag[p][1]))&&(I[1]=t._rl[0],I[3]=t._rl[1],S[1]=t.domain[0],S[3]=t.domain[1])}var R=r._context.plotGlPixelRatio,O=c.l*R,C=c.b*R;M.viewport=[O,C,c.w*R+O,c.h*R+C],!0===d.matrix&&(d.matrix=g(u));var z=f.clickmode.indexOf("select")>-1,Y=!0;if(y(T)||l.selectedpoints||z){var G=l._length;if(l.selectedpoints){d.selectBatch=l.selectedpoints;var J=l.selectedpoints,te={};for(p=0;p<J.length;p++)te[J[p]]=!0;var X=[];for(p=0;p<G;p++)te[p]||X.push(p);d.unselectBatch=X}var K=h.xpx=new Array(w),ae=h.ypx=new Array(w);for(i=0;i<_.length;i++){if(a=b.getFromId(r,l._diag[p=_[i]][0]))for(K[i]=new Array(G),s=0;s<G;s++)K[i][s]=a.c2p(x[i][s]);if(t=b.getFromId(r,l._diag[p][1]))for(ae[i]=new Array(G),s=0;s<G;s++)ae[i][s]=t.c2p(x[i][s])}if(d.selectBatch.length||d.unselectBatch.length){var U=m.extendFlat({},o,d.unselectedOptions,M),V=m.extendFlat({},o,d.selectedOptions,M);d.matrix.update(U,V),Y=!1}}else h.xpx=h.ypx=null;if(Y){var q=m.extendFlat({},o,M);d.matrix.update(q,null)}}}re.exports=function(r,n,a){if(a.length)for(var t=0;t<a.length;t++)e(r,a[t][0])}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(v,re,ne){"use strict";var g=v("../../lib");re.exports=function(m,b){var y=m._fullLayout,e=b.uid,r=y._splomScenes;r||(r=y._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},a=r[b.uid];return a||((a=r[e]=g.extendFlat({},n,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){a.matrix&&a.matrix.draw&&(a.selectBatch.length||a.unselectBatch.length?a.matrix.draw(a.unselectBatch,a.selectBatch):a.matrix.draw()),a.dirty=!1},a.destroy=function(){a.matrix&&a.matrix.destroy&&a.matrix.destroy(),a.matrixOptions=null,a.selectBatch=null,a.unselectBatch=null,a=null}),a.dirty||g.extendFlat(a,n),a}},{"../../lib":515}],1052:[function(v,re,ne){"use strict";var g=v("../../lib"),m=g.pushUnique,b=v("../scatter/subtypes"),y=v("./helpers");re.exports=function(e,r){var n=e.cd,a=n[0].trace,t=n[0].t,p=e.scene,s=p.matrixOptions.cdata,i=e.xaxis,f=e.yaxis,c=[];if(!p)return c;var l=!b.hasMarkers(a)&&!b.hasText(a);if(!0!==a.visible||l)return c;var h=y.getDimIndex(a,i),d=y.getDimIndex(a,f);if(!1===h||!1===d)return c;var o=t.xpx[h],x=t.ypx[d],u=s[h],T=s[d],_=(e.scene.selectBatch||[]).slice(),w=[];if(!1!==r&&!r.degenerate)for(var M=0;M<u.length;M++)r.contains([o[M],x[M]],null,M,e)?(c.push({pointNumber:M,x:u[M],y:T[M]}),m(_,M)):-1!==_.indexOf(M)?m(_,M):w.push(M);var I=p.matrixOptions;return _.length||w.length?p.selectBatch.length||p.unselectBatch.length||p.matrix.update(p.unselectedOptions,g.extendFlat({},I,p.selectedOptions,p.viewOpts)):p.matrix.update(I,null),p.selectBatch=_,p.unselectBatch=w,c}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/attributes"),m=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=v("../../plots/template_attributes").hovertemplateAttrs,y=v("../mesh3d/attributes"),e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:r({},e.showlegend,{dflt:!1})};r(n,g("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){n[a]=y[a]}),n.hoverinfo=r({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,re.exports=n},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/calc");function b(r){var n,a,t,p,s,i,f,c,l,h,d,o,x=r._x,u=r._y,T=r._z,_=r._len,w=-1/0,M=1/0,I=-1/0,S=1/0,R=-1/0,O=1/0,C="";for(_&&(f=x[0],l=u[0],d=T[0]),_>1&&(c=x[_-1],h=u[_-1],o=T[_-1]),n=0;n<_;n++)w=Math.max(w,x[n]),M=Math.min(M,x[n]),I=Math.max(I,u[n]),S=Math.min(S,u[n]),R=Math.max(R,T[n]),O=Math.min(O,T[n]),p||x[n]===f||(p=!0,C+="x"),s||u[n]===l||(s=!0,C+="y"),i||T[n]===d||(i=!0,C+="z");p||(C+="x"),s||(C+="y"),i||(C+="z");var D=y(r._x),B=y(r._y),z=y(r._z);C=(C=(C=C.replace("x",(f>c?"-":"+")+"x")).replace("y",(l>h?"-":"+")+"y")).replace("z",(d>o?"-":"+")+"z");var Y=function(){_=0,D=[],B=[],z=[]};(!_||_<D.length*B.length*z.length)&&Y();var G=function(he){return"x"===he?x:"y"===he?u:T},J=function(he){return"x"===he?D:"y"===he?B:z},te=function(he){return he[_-1]<he[0]?-1:1},X=G(C[1]),K=G(C[3]),ae=G(C[5]),U=J(C[1]).length,V=J(C[3]).length,q=J(C[5]).length,ie=!1,H=function(he,_e,Ce){return U*(V*he+_e)+Ce},ee=te(G(C[1])),Q=te(G(C[3])),oe=te(G(C[5]));for(n=0;n<q-1;n++){for(a=0;a<V-1;a++){for(t=0;t<U-1;t++){var le=H(n,a,t),de=H(n,a,t+1),fe=H(n,a+1,t),be=H(n+1,a,t);if(X[le]*ee<X[de]*ee&&K[le]*Q<K[fe]*Q&&ae[le]*oe<ae[be]*oe||(ie=!0),ie)break}if(ie)break}if(ie)break}return ie&&(g.warn("Encountered arbitrary coordinates! Unable to input data grid."),Y()),{xMin:M,yMin:S,zMin:O,xMax:w,yMax:I,zMax:R,Xs:D,Ys:B,Zs:z,len:_,fill:C}}function y(r){return g.distinctVals(r).vals}function e(r,n){if(void 0===n&&(n=r.length),g.isTypedArray(r))return r.subarray(0,n);for(var a=[],t=0;t<n;t++)a[t]=+r[t];return a}re.exports={calc:function(r,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=e(n.u,n._len),n._v=e(n.v,n._len),n._w=e(n.w,n._len),n._x=e(n.x,n._len),n._y=e(n.y,n._len),n._z=e(n.z,n._len);var a=b(n);n._gridFill=a.fill,n._Xs=a.Xs,n._Ys=a.Ys,n._Zs=a.Zs,n._len=a.len;var t,p,s,i=0;n.starts&&(t=e(n.starts.x||[]),p=e(n.starts.y||[]),s=e(n.starts.z||[]),i=Math.min(t.length,p.length,s.length)),n._startsX=t||[],n._startsY=p||[],n._startsZ=s||[];var f,c=0,l=1/0;for(f=0;f<n._len;f++){var h=n._u[f],d=n._v[f],o=n._w[f],x=Math.sqrt(h*h+d*d+o*o);c=Math.max(c,x),l=Math.min(l,x)}for(m(r,n,{vals:[l,c],containerStr:"",cLetter:"c"}),f=0;f<i;f++){var u=t[f];a.xMax=Math.max(a.xMax,u),a.xMin=Math.min(a.xMin,u);var T=p[f];a.yMax=Math.max(a.yMax,T),a.yMin=Math.min(a.yMin,T);var _=s[f];a.zMax=Math.max(a.zMax,_),a.zMin=Math.min(a.zMin,_)}n._slen=i,n._normMax=c,n._xbnds=[a.xMin,a.xMax],n._ybnds=[a.yMin,a.yMax],n._zbnds=[a.zMin,a.zMax]},filter:e,processGrid:b}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_streamtube3d,m=g.createTubeMesh,b=v("../../lib"),y=v("../../lib/gl_format_color").parseColorScale,e=v("../../components/colorscale").extractOpts,r=v("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function a(f,c){this.scene=f,this.uid=c,this.mesh=null,this.data=null}var t=a.prototype;function p(f){var c=f.length;return c>2?f.slice(1,c-1):2===c?[(f[0]+f[1])/2]:f}function s(f){var c=f.length;return 1===c?[.5,.5]:[f[1]-f[0],f[c-1]-f[c-2]]}function i(f,c){var l=f.fullSceneLayout,h=f.dataScale,d=c._len,o={};function x(U,V){var q=l[V],ie=h[n[V]];return b.simpleMap(U,function(H){return q.d2l(H)*ie})}if(o.vectors=r(x(c._u,"xaxis"),x(c._v,"yaxis"),x(c._w,"zaxis"),d),!d)return{positions:[],cells:[]};var u=x(c._Xs,"xaxis"),T=x(c._Ys,"yaxis"),_=x(c._Zs,"zaxis");if(o.meshgrid=[u,T,_],o.gridFill=c._gridFill,c._slen)o.startingPositions=r(x(c._startsX,"xaxis"),x(c._startsY,"yaxis"),x(c._startsZ,"zaxis"));else{for(var w=T[0],M=p(u),I=p(_),S=new Array(M.length*I.length),R=0,O=0;O<M.length;O++)for(var C=0;C<I.length;C++)S[R++]=[M[O],w,I[C]];o.startingPositions=S}o.colormap=y(c),o.tubeSize=c.sizeref,o.maxLength=c.maxdisplayed;var D=x(c._xbnds,"xaxis"),B=x(c._ybnds,"yaxis"),z=x(c._zbnds,"zaxis"),Y=s(u),G=s(T),J=s(_),X=g(o,[[D[0]-Y[0],B[0]-G[0],z[0]-J[0]],[D[1]+Y[1],B[1]+G[1],z[1]+J[1]]]),K=e(c);X.vertexIntensityBounds=[K.min/c._normMax,K.max/c._normMax];var ae=c.lightposition;return X.lightPosition=[ae.x,ae.y,ae.z],X.ambient=c.lighting.ambient,X.diffuse=c.lighting.diffuse,X.specular=c.lighting.specular,X.roughness=c.lighting.roughness,X.fresnel=c.lighting.fresnel,X.opacity=c.opacity,c._pad=X.tubeScale*c.sizeref*2,X}t.handlePick=function(f){var c=this.scene.fullSceneLayout,l=this.scene.dataScale;function h(x,u){var _=l[n[u]];return c[u].l2c(x)/_}if(f.object===this.mesh){var d=f.data.position,o=f.data.velocity;return f.traceCoordinate=[h(d[0],"xaxis"),h(d[1],"yaxis"),h(d[2],"zaxis"),h(o[0],"xaxis"),h(o[1],"yaxis"),h(o[2],"zaxis"),f.data.intensity*this.data._normMax,f.data.divergence],f.textLabel=this.data.hovertext||this.data.text,!0}},t.update=function(f){this.data=f;var c=i(this.scene,f);this.mesh.update(c)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},re.exports=function(f,c){var l=f.glplot.gl,h=i(f,c),d=m(l,h),o=new a(f,c.uid);return o.mesh=d,o.data=c,d._trace=o,f.glplot.add(d),o}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/colorscale/defaults"),b=v("./attributes");re.exports=function(y,e,r,n){function a(l,h){return g.coerce(y,e,b,l,h)}var t=a("u"),p=a("v"),s=a("w"),i=a("x"),f=a("y"),c=a("z");t&&t.length&&p&&p.length&&s&&s.length&&i&&i.length&&f&&f.length&&c&&c.length?(a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),m(y,e,n,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"streamtube",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:v("./attributes"),supplyDefaults:v("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:v("./calc").calc,plot:v("./convert"),eventData:function(g,m){return g.tubex=g.x,g.tubey=g.y,g.tubez=g.z,g.tubeu=m.traceCoordinate[3],g.tubev=m.traceCoordinate[4],g.tubew=m.traceCoordinate[5],g.norm=m.traceCoordinate[6],g.divergence=m.traceCoordinate[7],delete g.x,delete g.y,delete g.z,g},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(v,re,ne){"use strict";var g=v("../../plots/attributes"),m=v("../../plots/template_attributes").hovertemplateAttrs,b=v("../../plots/template_attributes").texttemplateAttrs,y=v("../../components/colorscale/attributes"),e=v("../../plots/domain").attributes,r=v("../pie/attributes"),n=v("./constants"),a=v("../../lib/extend").extendFlat;re.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:a({colors:{valType:"data_array",editType:"calc"},line:{color:a({},r.marker.line.color,{dflt:null}),width:a({},r.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},y("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:r.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:b({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:r.hovertext,hoverinfo:a({},g.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:m({},{keys:n.eventDataKeys}),textfont:r.textfont,insidetextorientation:r.insidetextorientation,insidetextfont:r.insidetextfont,outsidetextfont:a({},r.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:r.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(v,re,ne){"use strict";var g=v("../../plots/plots");ne.name="sunburst",ne.plot=function(m,b,y,e){g.plotBasePlot(ne.name,m,b,y,e)},ne.clean=function(m,b,y,e){g.cleanBasePlot(ne.name,m,b,y,e)}},{"../../plots/plots":628}],1060:[function(v,re,ne){"use strict";var g=v("d3-hierarchy"),m=v("fast-isnumeric"),b=v("../../lib"),y=v("../../components/colorscale").makeColorScaleFuncFromTrace,e=v("../pie/calc").makePullColorFn,r=v("../pie/calc").generateExtendedColors,n=v("../../components/colorscale").calc,a=v("../../constants/numerical").ALMOST_EQUAL,t={},p={},s={};ne.calc=function(i,f){var c,l,h,d,o,x,u=i._fullLayout,T=f.ids,_=b.isArrayOrTypedArray(T),w=f.labels,M=f.parents,I=f.values,S=b.isArrayOrTypedArray(I),R=[],O={},C={},D=function(Q){return Q||"number"==typeof Q},B=function(Q){return!S||m(I[Q])&&I[Q]>=0};_?(c=Math.min(T.length,M.length),l=function(Q){return D(T[Q])&&B(Q)},h=function(Q){return String(T[Q])}):(c=Math.min(w.length,M.length),l=function(Q){return D(w[Q])&&B(Q)},h=function(Q){return String(w[Q])}),S&&(c=Math.min(c,I.length));for(var z=0;z<c;z++)if(l(z)){var Y=h(z),G=D(M[z])?String(M[z]):"",J={i:z,id:Y,pid:G,label:D(w[z])?String(w[z]):""};S&&(J.v=+I[z]),R.push(J),o=Y,O[d=G]?O[d].push(o):O[d]=[o],C[o]=1}if(O[""]){if(O[""].length>1){for(var te=b.randstr(),X=0;X<R.length;X++)""===R[X].pid&&(R[X].pid=te);R.unshift({hasMultipleRoots:!0,id:te,pid:"",label:""})}}else{var K,ae=[];for(K in O)C[K]||ae.push(K);if(1!==ae.length)return b.warn(["Multiple implied roots, cannot build",f.type,"hierarchy of",f.name+".","These roots include:",ae.join(", ")].join(" "));R.unshift({hasImpliedRoot:!0,id:K=ae[0],pid:"",label:K})}try{x=g.stratify().id(function(Q){return Q.id}).parentId(function(Q){return Q.pid})(R)}catch(Q){return b.warn(["Failed to build",f.type,"hierarchy of",f.name+".","Error:",Q.message].join(" "))}var U=g.hierarchy(x),V=!1;if(S)switch(f.branchvalues){case"remainder":U.sum(function(Q){return Q.data.v});break;case"total":U.each(function(Q){var oe=Q.data.data,le=oe.v;if(Q.children){var de=Q.children.reduce(function(fe,be){return fe+be.data.data.v},0);if((oe.hasImpliedRoot||oe.hasMultipleRoots)&&(le=de),le<de*a)return V=!0,b.warn(["Total value for node",Q.data.data.id,"of",f.name,"is smaller than the sum of its children.","\nparent value =",le,"\nchildren sum =",de].join(" "))}Q.value=le})}else!function Q(oe,le,de){var fe=0,be=oe.children;if(be){for(var he=be.length,_e=0;_e<he;_e++)fe+=Q(be[_e],le,de);de.branches&&fe++}else de.leaves&&fe++;return oe.value=oe.data.data.value=fe,le._values||(le._values=[]),le._values[oe.data.data.i]=fe,fe}(U,f,{branches:-1!==f.count.indexOf("branches"),leaves:-1!==f.count.indexOf("leaves")});if(!V){var q,ie;f.sort&&U.sort(function(Q,oe){return oe.value-Q.value});var H=f.marker.colors||[];return f._hasColorscale?(!!H.length||(H=S?f.values:f._values),n(i,f,{vals:H,containerStr:"marker",cLetter:"c"}),ie=y(f.marker)):q=e(u["_"+f.type+"colormap"]),U.each(function(Q){var oe=Q.data.data;oe.color=f._hasColorscale?ie(H[oe.i]):q(H[oe.i],oe.id)}),R[0].hierarchy=U,R}},ne._runCrossTraceCalc=function(i,f){var c=f._fullLayout,l=f.calcdata,h=c[i+"colorway"],d=c["_"+i+"colormap"];c["extend"+i+"colors"]&&(h=r(h,"icicle"===i?s:"treemap"===i?p:t));var o,x=0;function u(w){var M=w.data.data,I=M.id;!1===M.color&&(d[I]?M.color=d[I]:w.parent?w.parent.parent?M.color=w.parent.data.data.color:(d[I]=M.color=h[x%h.length],x++):M.color=o)}for(var T=0;T<l.length;T++){var _=l[T][0];_.trace.type===i&&_.hierarchy&&(o=_.trace.root.color,_.hierarchy.each(u))}},ne.crossTraceCalc=function(i){return ne._runCrossTraceCalc("sunburst",i)}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(v,re,ne){"use strict";re.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../../plots/domain").defaults,y=v("../bar/defaults").handleText,e=v("../../components/colorscale"),r=e.hasColorscale,n=e.handleDefaults;re.exports=function(a,t,p,s){function i(o,x){return g.coerce(a,t,m,o,x)}var f=i("labels"),c=i("parents");if(f&&f.length&&c&&c.length){var l=i("values");i(l&&l.length?"branchvalues":"count"),i("level"),i("maxdepth"),i("marker.line.width")&&i("marker.line.color",s.paper_bgcolor),i("marker.colors");var h=t._hasColorscale=r(a,"marker","colors")||(a.marker||{}).coloraxis;h&&n(a,t,s,i,{prefix:"marker.",cLetter:"c"}),i("leaf.opacity",h?1:.7);var d=i("text");i("texttemplate"),t.texttemplate||i("textinfo",Array.isArray(d)?"text+label":"label"),i("hovertext"),i("hovertemplate"),y(a,t,s,i,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),i("insidetextorientation"),i("sort"),i("rotation"),i("root.color"),b(t,s,i),t._length=null}else t.visible=!1}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../registry"),b=v("../../components/fx/helpers").appendArrayPointValue,y=v("../../components/fx"),e=v("../../lib"),r=v("../../lib/events"),n=v("./helpers"),a=v("../pie/helpers").formatPieValue;function t(p,s,i){for(var f=p.data.data,c={curveNumber:s.index,pointNumber:f.i,data:s._input,fullData:s},l=0;l<i.length;l++){var h=i[l];h in p&&(c[h]=p[h])}return"parentString"in p&&!n.isHierarchyRoot(p)&&(c.parent=p.parentString),b(c,s,f.i),c}re.exports=function(p,s,i,f,c){var l=f[0],h=l.trace,d=l.hierarchy,o="sunburst"===h.type,x="treemap"===h.type||"icicle"===h.type;"_hasHoverLabel"in h||(h._hasHoverLabel=!1),"_hasHoverEvent"in h||(h._hasHoverEvent=!1),p.on("mouseover",function(u){var T=i._fullLayout;if(!i._dragging&&!1!==T.hovermode){var _,w=i._fullData[h.index],M=u.data.data,I=M.i,S=n.isHierarchyRoot(u),R=n.getParent(d,u),O=n.getValue(u),C=function(ee){return e.castOption(w,I,ee)},D=C("hovertemplate"),B=y.castHoverinfo(w,T,I),z=T.separators;if(D||B&&"none"!==B&&"skip"!==B){var Y,G;o&&(Y=l.cx+u.pxmid[0]*(1-u.rInscribed),G=l.cy+u.pxmid[1]*(1-u.rInscribed)),x&&(Y=u._hoverX,G=u._hoverY);var J,te={},X=[],K=[],ae=function(ee){return-1!==X.indexOf(ee)};B&&(X="all"===B?w._module.attributes.hoverinfo.flags:B.split("+")),te.label=M.label,ae("label")&&te.label&&K.push(te.label),M.hasOwnProperty("v")&&(te.value=M.v,te.valueLabel=a(te.value,z),ae("value")&&K.push(te.valueLabel)),te.currentPath=u.currentPath=n.getPath(u.data),ae("current path")&&!S&&K.push(te.currentPath);var U=[],V=function(){-1===U.indexOf(J)&&(K.push(J),U.push(J))};te.percentParent=u.percentParent=O/n.getValue(R),te.parent=u.parentString=n.getPtLabel(R),ae("percent parent")&&(J=n.formatPercent(te.percentParent,z)+" of "+te.parent,V()),te.percentEntry=u.percentEntry=O/n.getValue(s),te.entry=u.entry=n.getPtLabel(s),!ae("percent entry")||S||u.onPathbar||(J=n.formatPercent(te.percentEntry,z)+" of "+te.entry,V()),te.percentRoot=u.percentRoot=O/n.getValue(d),te.root=u.root=n.getPtLabel(d),ae("percent root")&&!S&&(J=n.formatPercent(te.percentRoot,z)+" of "+te.root,V()),te.text=C("hovertext")||C("text"),ae("text")&&e.isValidTextValue(J=te.text)&&K.push(J),_=[t(u,w,c.eventDataKeys)];var q={trace:w,y:G,_x0:u._x0,_x1:u._x1,_y0:u._y0,_y1:u._y1,text:K.join("<br>"),name:D||ae("name")?w.name:void 0,color:C("hoverlabel.bgcolor")||M.color,borderColor:C("hoverlabel.bordercolor"),fontFamily:C("hoverlabel.font.family"),fontSize:C("hoverlabel.font.size"),fontColor:C("hoverlabel.font.color"),nameLength:C("hoverlabel.namelength"),textAlign:C("hoverlabel.align"),hovertemplate:D,hovertemplateLabels:te,eventData:_};o&&(q.x0=Y-u.rInscribed*u.rpx1,q.x1=Y+u.rInscribed*u.rpx1,q.idealAlign=u.pxmid[0]<0?"left":"right"),x&&(q.x=Y,q.idealAlign=Y<0?"left":"right");var ie=[];y.loneHover(q,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:i,inOut_bbox:ie}),_[0].bbox=ie[0],h._hasHoverLabel=!0}if(x){var H=p.select("path.surface");c.styleOne(H,u,w,{hovered:!0})}h._hasHoverEvent=!0,i.emit("plotly_hover",{points:_||[t(u,w,c.eventDataKeys)],event:g.event})}}),p.on("mouseout",function(u){var T=i._fullLayout,_=i._fullData[h.index],w=g.select(this).datum();if(h._hasHoverEvent&&(u.originalEvent=g.event,i.emit("plotly_unhover",{points:[t(w,_,c.eventDataKeys)],event:g.event}),h._hasHoverEvent=!1),h._hasHoverLabel&&(y.loneUnhover(T._hoverlayer.node()),h._hasHoverLabel=!1),x){var M=p.select("path.surface");c.styleOne(M,w,_,{hovered:!1})}}),p.on("click",function(u){var T=i._fullLayout,_=i._fullData[h.index],w=o&&(n.isHierarchyRoot(u)||n.isLeaf(u)),M=n.getPtId(u),I=n.isEntry(u)?n.findEntryWithChild(d,M):n.findEntryWithLevel(d,M),S=n.getPtId(I),R={points:[t(u,_,c.eventDataKeys)],event:g.event};w||(R.nextLevel=S);var O=r.triggerHandler(i,"plotly_"+h.type+"click",R);if(!1!==O&&T.hovermode&&(i._hoverdata=[t(u,_,c.eventDataKeys)],y.click(i,g.event)),!w&&!1!==O&&!i._dragging&&!i._transitioning){m.call("_storeDirectGUIEdit",_,T._tracePreGUI[_.uid],{level:_.level});var C={data:[{level:S}],traces:[h.index]},D={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};y.loneUnhover(T._hoverlayer.node()),m.call("animate",i,C,D)}})}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color"),b=v("../../lib/setcursor"),y=v("../pie/helpers");function e(r){return r.data.data.pid}ne.findEntryWithLevel=function(r,n){var a;return n&&r.eachAfter(function(t){if(ne.getPtId(t)===n)return a=t.copy()}),a||r},ne.findEntryWithChild=function(r,n){var a;return r.eachAfter(function(t){for(var p=t.children||[],s=0;s<p.length;s++)if(ne.getPtId(p[s])===n)return a=t.copy()}),a||r},ne.isEntry=function(r){return!r.parent},ne.isLeaf=function(r){return!r.children},ne.getPtId=function(r){return r.data.data.id},ne.getPtLabel=function(r){return r.data.data.label},ne.getValue=function(r){return r.value},ne.isHierarchyRoot=function(r){return""===e(r)},ne.setSliceCursor=function(r,n,a){var t=a.isTransitioning;if(!t){var p=r.datum();t=a.hideOnRoot&&ne.isHierarchyRoot(p)||a.hideOnLeaves&&ne.isLeaf(p)}b(r,t?null:"pointer")},ne.getInsideTextFontKey=function(r,n,a,t,p){var i=a.data.data.i;return g.castOption(n,i,((p||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+r)||g.castOption(n,i,"textfont."+r)||t.size},ne.getOutsideTextFontKey=function(r,n,a,t){var p=a.data.data.i;return g.castOption(n,p,"outsidetextfont."+r)||g.castOption(n,p,"textfont."+r)||t.size},ne.isOutsideText=function(r,n){return!r._hasColorscale&&ne.isHierarchyRoot(n)},ne.determineTextFont=function(r,n,a,t){return ne.isOutsideText(r,n)?{color:ne.getOutsideTextFontKey("color",p=r,s=n,i=a),family:ne.getOutsideTextFontKey("family",p,s,i),size:ne.getOutsideTextFontKey("size",p,s,i)}:function(p,s,i,f){var l=s.data.data,h=l.i,d=g.castOption(p,h,((f||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!d&&p._input.textfont&&(d=g.castOption(p._input,h,"textfont.color")),{color:d||m.contrast(l.color),family:ne.getInsideTextFontKey("family",p,s,i,f),size:ne.getInsideTextFontKey("size",p,s,i,f)}}(r,n,a,t);var p,s,i},ne.hasTransition=function(r){return!!(r&&r.duration>0)},ne.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},ne.isHeader=function(r,n){return!(ne.isLeaf(r)||r.depth===n._maxDepth-1)},ne.getParent=function(r,n){return ne.findEntryWithLevel(r,e(n))},ne.listPath=function(r,n){var a=r.parent;if(!a)return[];var t=n?[a.data[n]]:[a];return ne.listPath(a,n).concat(t)},ne.getPath=function(r){return ne.listPath(r,"label").join("/")+"/"},ne.formatValue=y.formatPieValue,ne.formatPercent=function(r,n){var a=g.formatPercent(r,0);return"0%"===a&&(a=y.formatPiePercent(r,n)),a}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"sunburst",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot").plot,style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(v,re,ne){"use strict";re.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y){function e(r,n){return g.coerce(b,y,m,r,n)}e("sunburstcolorway",y.colorway),e("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-hierarchy"),b=v("d3-interpolate").interpolate,y=v("../../components/drawing"),e=v("../../lib"),r=v("../../lib/svg_text_utils"),n=v("../bar/uniform_text"),a=n.recordMinTextSize,t=n.clearMinTextSize,p=v("../pie/plot"),s=v("../pie/helpers").getRotationAngle,i=p.computeTransform,f=p.transformInsideText,c=v("./style").styleOne,l=v("../bar/style").resizeText,h=v("./fx"),d=v("./constants"),o=v("./helpers");function x(T,_,w,M){var I=T._fullLayout,S=!I.uniformtext.mode&&o.hasTransition(M),R=g.select(w).selectAll("g.slice"),O=_[0],C=O.trace,B=o.findEntryWithLevel(O.hierarchy,C.level),z=o.getMaxDepth(C),Y=I._size,G=C.domain,te=Y.h*(G.y[1]-G.y[0]),X=.5*Math.min(Y.w*(G.x[1]-G.x[0]),te),K=O.cx=Y.l+Y.w*(G.x[1]+G.x[0])/2,ae=O.cy=Y.t+Y.h*(1-G.y[0])-te/2;if(!B)return R.remove();var U=null,V={};S&&R.each(function(ze){V[o.getPtId(ze)]={rpx0:ze.rpx0,rpx1:ze.rpx1,x0:ze.x0,x1:ze.x1,transform:ze.transform},!U&&o.isEntry(ze)&&(U=ze)});var ze,q=(ze=B,m.partition().size([2*Math.PI,ze.height+1])(ze)).descendants(),ie=B.height+1,H=0,ee=z;O.hasMultipleRoots&&o.isHierarchyRoot(B)&&(q=q.slice(1),ie-=1,H=1,ee+=1),q=q.filter(function(ze){return ze.y1<=ee});var Q=s(C.rotation);Q&&q.forEach(function(ze){ze.x0+=Q,ze.x1+=Q});var oe=Math.min(ie,z),le=function(ze){return(ze-H)/oe*X},de=function(ze,ve){return[ze*Math.cos(ve),-ze*Math.sin(ve)]},fe=function(ze){return e.pathAnnulus(ze.rpx0,ze.rpx1,ze.x0,ze.x1,K,ae)},be=function(ze){return K+u(ze)[0]*(ze.transform.rCenter||0)+(ze.transform.x||0)},he=function(ze){return ae+u(ze)[1]*(ze.transform.rCenter||0)+(ze.transform.y||0)};(R=R.data(q,o.getPtId)).enter().append("g").classed("slice",!0),S?R.exit().transition().each(function(){var ze=g.select(this);ze.select("path.surface").transition().attrTween("d",function(ve){var Te=function(Ie){var De,Fe=o.getPtId(Ie),Ue=V[Fe],qe=V[o.getPtId(B)];if(qe){var je=(Ie.x1>qe.x1?2*Math.PI:0)+Q;De=Ie.rpx1<qe.rpx1?{x0:Ie.x0,x1:Ie.x1,rpx0:0,rpx1:0}:{x0:je,x1:je,rpx0:Ie.rpx0,rpx1:Ie.rpx1}}else{var rt,Ne=o.getPtId(Ie.parent);R.each(function(mt){if(o.getPtId(mt)===Ne)return rt=mt});var Be,We=rt.children;We.forEach(function(mt,Tt){if(o.getPtId(mt)===Fe)return Be=Tt});var Ye=We.length,lt=b(rt.x0,rt.x1);De={rpx0:X,rpx1:X,x0:lt(Be/Ye),x1:lt((Be+1)/Ye)}}return b(Ue,De)}(ve);return function(Ie){return fe(Te(Ie))}}),ze.select("g.slicetext").attr("opacity",0)}).remove():R.exit().remove(),R.order();var _e=null;if(S&&U){var Ce=o.getPtId(U);R.each(function(ze){null===_e&&o.getPtId(ze)===Ce&&(_e=ze.x1)})}var Ee=R;function Ae(ze){var ve=ze.parent,Te=V[o.getPtId(ve)],Ie={};if(Te){var De=ve.children,Fe=De.indexOf(ze),Ue=De.length,qe=b(Te.x0,Te.x1);Ie.x0=qe(Fe/Ue),Ie.x1=qe(Fe/Ue)}else Ie.x0=Ie.x1=0;return Ie}S&&(Ee=Ee.transition().each("end",function(){var ze=g.select(this);o.setSliceCursor(ze,T,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Ee.each(function(ze){var je,ve=g.select(this),Te=e.ensureSingle(ve,"path","surface",function(je){je.style("pointer-events","all")});ze.rpx0=le(ze.y0),ze.rpx1=le(ze.y1),ze.xmid=(ze.x0+ze.x1)/2,ze.pxmid=de(ze.rpx1,ze.xmid),ze.midangle=-(ze.xmid-Math.PI/2),ze.startangle=-(ze.x0-Math.PI/2),ze.stopangle=-(ze.x1-Math.PI/2),ze.halfangle=.5*Math.min(e.angleDelta(ze.x0,ze.x1)||Math.PI,Math.PI),ze.ring=1-ze.rpx0/ze.rpx1,ze.rInscribed=0===(je=ze).rpx0&&e.isFullCircle([je.x0,je.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(je.halfangle)),je.ring/2)),S?Te.transition().attrTween("d",function(je){var rt=function(Ne){var Be,We=V[o.getPtId(Ne)],Ye={x0:Ne.x0,x1:Ne.x1,rpx0:Ne.rpx0,rpx1:Ne.rpx1};if(We)Be=We;else if(U)if(Ne.parent)if(_e){var lt=(Ne.x1>_e?2*Math.PI:0)+Q;Be={x0:lt,x1:lt}}else e.extendFlat(Be={rpx0:X,rpx1:X},Ae(Ne));else Be={rpx0:0,rpx1:0};else Be={x0:Q,x1:Q};return b(Be,Ye)}(je);return function(Ne){return fe(rt(Ne))}}):Te.attr("d",fe),ve.call(h,B,T,_,{eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,T,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:T._transitioning}),Te.call(c,ze,C);var Ie=e.ensureSingle(ve,"g","slicetext"),De=e.ensureSingle(Ie,"text","",function(je){je.attr("data-notex",1)}),Fe=e.ensureUniformFontSize(T,o.determineTextFont(C,ze,I.font));De.text(ne.formatSliceLabel(ze,B,C,_,I)).classed("slicetext",!0).attr("text-anchor","middle").call(y.font,Fe).call(r.convertToTspans,T);var Ue=y.bBox(De.node());ze.transform=f(Ue,ze,O),ze.transform.targetX=be(ze),ze.transform.targetY=he(ze);var qe=function(je,rt){var Ne=je.transform;return i(Ne,rt),Ne.fontSize=Fe.size,a(C.type,Ne,I),e.getTextTransform(Ne)};S?De.transition().attrTween("transform",function(je){var rt=function(Ne){var Be,We=V[o.getPtId(Ne)],Ye=Ne.transform;if(We)Be=We;else if(Be={rpx1:Ne.rpx1,transform:{textPosAngle:Ye.textPosAngle,scale:0,rotate:Ye.rotate,rCenter:Ye.rCenter,x:Ye.x,y:Ye.y}},U)if(Ne.parent)if(_e){var lt=Ne.x1>_e?2*Math.PI:0;Be.x0=Be.x1=lt}else e.extendFlat(Be,Ae(Ne));else Be.x0=Be.x1=Q;else Be.x0=Be.x1=Q;var mt=b(Be.transform.textPosAngle,Ne.transform.textPosAngle),Tt=b(Be.rpx1,Ne.rpx1),It=b(Be.x0,Ne.x0),Ct=b(Be.x1,Ne.x1),ct=b(Be.transform.scale,Ye.scale),at=b(Be.transform.rotate,Ye.rotate),St=0===Ye.rCenter?3:0===Be.transform.rCenter?1/3:1,Xt=b(Be.transform.rCenter,Ye.rCenter);return function(tn){var hn=Tt(tn),cn=It(tn),yn=Ct(tn),en=Xt(Math.pow(tn,St)),Xe={pxmid:de(hn,(cn+yn)/2),rpx1:hn,transform:{textPosAngle:mt(tn),rCenter:en,x:Ye.x,y:Ye.y}};return a(C.type,Ye,I),{transform:{targetX:be(Xe),targetY:he(Xe),scale:ct(tn),rotate:at(tn),rCenter:en}}}}(je);return function(Ne){return qe(rt(Ne),Ue)}}):De.attr("transform",qe(ze,Ue))})}function u(T){return w=T.transform.textPosAngle,[(_=T.rpx1)*Math.sin(w),-_*Math.cos(w)];var _,w}ne.plot=function(T,_,w,M){var I,S,R=T._fullLayout,O=R._sunburstlayer,C=!w,D=!R.uniformtext.mode&&o.hasTransition(w);t("sunburst",R),(I=O.selectAll("g.trace.sunburst").data(_,function(B){return B[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),I.order(),D?(M&&(S=M()),g.transition().duration(w.duration).ease(w.easing).each("end",function(){S&&S()}).each("interrupt",function(){S&&S()}).each(function(){O.selectAll("g.trace").each(function(B){x(T,B,this,w)})})):(I.each(function(B){x(T,B,this,w)}),R.uniformtext.mode&&l(T,R._sunburstlayer.selectAll(".trace"),"sunburst")),C&&I.exit().remove()},ne.formatSliceLabel=function(T,_,w,M,I){var S=w.texttemplate,R=w.textinfo;if(!(S||R&&"none"!==R))return"";var O=I.separators,D=T.data.data,B=M[0].hierarchy,z=o.isHierarchyRoot(T),Y=o.getParent(B,T),G=o.getValue(T);if(!S){var J,te=R.split("+"),X=function(Q){return-1!==te.indexOf(Q)},K=[];if(X("label")&&D.label&&K.push(D.label),D.hasOwnProperty("v")&&X("value")&&K.push(o.formatValue(D.v,O)),!z){X("current path")&&K.push(o.getPath(T.data));var ae=0;X("percent parent")&&ae++,X("percent entry")&&ae++,X("percent root")&&ae++;var U=ae>1;if(ae){var V,q=function(Q){J=o.formatPercent(V,O),U&&(J+=" of "+Q),K.push(J)};X("percent parent")&&!z&&(V=G/o.getValue(Y),q("parent")),X("percent entry")&&(V=G/o.getValue(_),q("entry")),X("percent root")&&(V=G/o.getValue(B),q("root"))}}return X("text")&&(J=e.castOption(w,D.i,"text"),e.isValidTextValue(J)&&K.push(J)),K.join("<br>")}var ie=e.castOption(w,D.i,"texttemplate");if(!ie)return"";var H={};D.label&&(H.label=D.label),D.hasOwnProperty("v")&&(H.value=D.v,H.valueLabel=o.formatValue(D.v,O)),H.currentPath=o.getPath(T.data),z||(H.percentParent=G/o.getValue(Y),H.percentParentLabel=o.formatPercent(H.percentParent,O),H.parent=o.getPtLabel(Y)),H.percentEntry=G/o.getValue(_),H.percentEntryLabel=o.formatPercent(H.percentEntry,O),H.entry=o.getPtLabel(_),H.percentRoot=G/o.getValue(B),H.percentRootLabel=o.formatPercent(H.percentRoot,O),H.root=o.getPtLabel(B),D.hasOwnProperty("color")&&(H.color=D.color);var ee=e.castOption(w,D.i,"text");return(e.isValidTextValue(ee)||""===ee)&&(H.text=ee),H.customdata=e.castOption(w,D.i,"customdata"),e.texttemplateString(ie,H,I._d3locale,H,w._meta||{})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/color"),b=v("../../lib"),y=v("../bar/uniform_text").resizeText;function e(r,n,a){var t=n.data.data,p=!n.children,s=t.i,i=b.castOption(a,s,"marker.line.color")||m.defaultLine,f=b.castOption(a,s,"marker.line.width")||0;r.style("stroke-width",f).call(m.fill,t.color).call(m.stroke,i).style("opacity",p?a.leaf.opacity:null)}re.exports={style:function(r){var n=r._fullLayout._sunburstlayer.selectAll(".trace");y(r,n,"sunburst"),n.each(function(a){var t=g.select(this),p=a[0].trace;t.style("opacity",p.opacity),t.selectAll("path.surface").each(function(s){g.select(this).call(e,s,p)})})},styleOne:e}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(v,re,ne){"use strict";var g=v("../../components/color"),m=v("../../components/colorscale/attributes"),b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,y=v("../../plots/template_attributes").hovertemplateAttrs,e=v("../../plots/attributes"),r=v("../../lib/extend").extendFlat,n=v("../../plot_api/edit_types").overrideAll;function a(p){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:g.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:g.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var t=re.exports=n(r({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:y(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},m("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:a(),y:a(),z:a()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:r({},m.zauto,{}),zmin:r({},m.zmin,{}),zmax:r({},m.zmax,{})},hoverinfo:r({},e.hoverinfo),showlegend:r({},e.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/calc");re.exports=function(m,b){g(m,b,b.surfacecolor?{vals:b.surfacecolor,containerStr:"",cLetter:"c"}:{vals:b.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_surface3d,m=v("../../../stackgl_modules").ndarray,b=v("../../../stackgl_modules").ndarray_linear_interpolate.d2,y=v("../heatmap/interp2d"),e=v("../heatmap/find_empties"),r=v("../../lib").isArrayOrTypedArray,n=v("../../lib/gl_format_color").parseColorScale,a=v("../../lib/str2rgbarray"),t=v("../../components/colorscale").extractOpts;function p(w,M,I){this.scene=w,this.uid=I,this.surface=M,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=p.prototype;s.getXat=function(w,M,I,S){var R=r(this.data.x)?r(this.data.x[0])?this.data.x[M][w]:this.data.x[w]:w;return void 0===I?R:S.d2l(R,0,I)},s.getYat=function(w,M,I,S){var R=r(this.data.y)?r(this.data.y[0])?this.data.y[M][w]:this.data.y[M]:M;return void 0===I?R:S.d2l(R,0,I)},s.getZat=function(w,M,I,S){var R=this.data.z[M][w];return null===R&&this.data.connectgaps&&this.data._interpolatedZ&&(R=this.data._interpolatedZ[M][w]),void 0===I?R:S.d2l(R,0,I)},s.handlePick=function(w){if(w.object===this.surface){var I=(w.data.index[1]-1)/this.dataScaleY-1,S=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),R=Math.max(Math.min(Math.round(I),this.data._ylength-1),0);w.index=[S,R],w.traceCoordinate=[this.getXat(S,R),this.getYat(S,R),this.getZat(S,R)],w.dataCoordinate=[this.getXat(S,R,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(S,R,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(S,R,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var O=0;O<3;O++)null!=w.dataCoordinate[O]&&(w.dataCoordinate[O]*=this.scene.dataScale[O]);var D=this.data.hovertext||this.data.text;return w.textLabel=Array.isArray(D)&&D[R]&&void 0!==D[R][S]?D[R][S]:D||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function f(w,M){if(w<M)return 0;for(var I=0;0===Math.floor(w%M);)w/=M,I++;return I}function c(w){for(var M=[],I=0;I<i.length;I++)M.push(f(w,i[I]));return M}function l(w){for(var M=c(w),I=w,S=0;S<i.length;S++)if(M[S]>0){I=i[S];break}return I}function h(w,M){if(!(w<1||M<1)){for(var I=c(w),S=c(M),R=1,O=0;O<i.length;O++)R*=Math.pow(i[O],Math.max(I[O],S[O]));return R}}s.calcXnums=function(w){var M,I=[];for(M=1;M<w;M++){var S=this.getXat(M-1,0),R=this.getXat(M,0);I[M-1]=R!==S&&null!=S&&null!=R?Math.abs(R-S):0}var O=0;for(M=1;M<w;M++)O+=I[M-1];for(M=1;M<w;M++)I[M-1]=0===I[M-1]?1:Math.round(O/I[M-1]);return I},s.calcYnums=function(w){var M,I=[];for(M=1;M<w;M++){var S=this.getYat(0,M-1),R=this.getYat(0,M);I[M-1]=R!==S&&null!=S&&null!=R?Math.abs(R-S):0}var O=0;for(M=1;M<w;M++)O+=I[M-1];for(M=1;M<w;M++)I[M-1]=0===I[M-1]?1:Math.round(O/I[M-1]);return I};var d=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],o=d[9],x=d[13];function u(w,M,I){var S=I[8]+I[2]*M[0]+I[5]*M[1];return w[0]=(I[6]+I[0]*M[0]+I[3]*M[1])/S,w[1]=(I[7]+I[1]*M[0]+I[4]*M[1])/S,w}function T(w,M,I){return function(S,R,O,C){for(var D=[0,0],B=S.shape[0],z=S.shape[1],Y=0;Y<B;Y++)for(var G=0;G<z;G++)O(D,[Y,G],C),S.set(Y,G,b(R,D[0],D[1]))}(w,M,u,I),w}function _(w,M){for(var I=!1,S=0;S<w.length;S++)if(M===w[S]){I=!0;break}!1===I&&w.push(M)}s.estimateScale=function(w,M){for(var I=1+function(R){if(0!==R.length){for(var O=1,C=0;C<R.length;C++)O=h(O,R[C]);return O}}(0===M?this.calcXnums(w):this.calcYnums(w));I<o;)I*=2;for(;I>x;)I--,I/=l(I),++I<o&&(I=x);var S=Math.round(I/w);return S>1?S:1},s.refineCoords=function(w){for(var M=this.dataScaleX,I=this.dataScaleY,S=w[0].shape[0],R=w[0].shape[1],O=0|Math.floor(w[0].shape[0]*M+1),C=0|Math.floor(w[0].shape[1]*I+1),D=1+S+1,B=1+R+1,z=m(new Float32Array(D*B),[D,B]),Y=[1/M,0,0,0,1/I,0,0,0,1],G=0;G<w.length;++G){this.surface.padField(z,w[G]);var J=m(new Float32Array(O*C),[O,C]);T(J,z,Y),w[G]=J}},s.setContourLevels=function(){var w,M,S=[[],[],[]],R=[!1,!1,!1],O=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(O=!0,this.contourSize[w]>0&&null!==this.contourStart[w]&&null!==this.contourEnd[w]&&this.contourEnd[w]>this.contourStart[w]))for(R[w]=!0,M=this.contourStart[w];M<this.contourEnd[w];M+=this.contourSize[w])_(S[w],M*this.scene.dataScale[w]);if(O){var C=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(C[w]=R[w]?S[w]:this.scene.contourLevels[w]);this.surface.update({levels:C})}},s.update=function(w){var M,I,S,R,O=this.scene,C=O.fullSceneLayout,D=this.surface,B=n(w),z=O.dataScale,Y=w.z[0].length,G=w._ylength,J=O.contourLevels;this.data=w;var te=[];for(M=0;M<3;M++)for(te[M]=[],I=0;I<Y;I++)te[M][I]=[];for(I=0;I<Y;I++)for(S=0;S<G;S++)te[0][I][S]=this.getXat(I,S,w.xcalendar,C.xaxis),te[1][I][S]=this.getYat(I,S,w.ycalendar,C.yaxis),te[2][I][S]=this.getZat(I,S,w.zcalendar,C.zaxis);if(w.connectgaps)for(w._emptypoints=e(te[2]),y(te[2],w._emptypoints),w._interpolatedZ=[],I=0;I<Y;I++)for(w._interpolatedZ[I]=[],S=0;S<G;S++)w._interpolatedZ[I][S]=te[2][I][S];for(M=0;M<3;M++)for(I=0;I<Y;I++)for(S=0;S<G;S++)null==(R=te[M][I][S])?te[M][I][S]=NaN:R=te[M][I][S]*=z[M];for(M=0;M<3;M++)for(I=0;I<Y;I++)for(S=0;S<G;S++)null!=(R=te[M][I][S])&&(this.minValues[M]>R&&(this.minValues[M]=R),this.maxValues[M]<R&&(this.maxValues[M]=R));for(M=0;M<3;M++)this.objectOffset[M]=.5*(this.minValues[M]+this.maxValues[M]);for(M=0;M<3;M++)for(I=0;I<Y;I++)for(S=0;S<G;S++)null!=(R=te[M][I][S])&&(te[M][I][S]-=this.objectOffset[M]);var X=[m(new Float32Array(Y*G),[Y,G]),m(new Float32Array(Y*G),[Y,G]),m(new Float32Array(Y*G),[Y,G])];for(M=0;M<3;M++)for(I=0;I<Y;I++)for(S=0;S<G;S++)X[M].set(I,S,te[M][I][S]);te=[];var K={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},ae=t(w);if(K.intensityBounds=[ae.min,ae.max],w.surfacecolor){var U=m(new Float32Array(Y*G),[Y,G]);for(I=0;I<Y;I++)for(S=0;S<G;S++)U.set(I,S,w.surfacecolor[S][I]);X.push(U)}else K.intensityBounds[0]*=z[2],K.intensityBounds[1]*=z[2];(x<X[0].shape[0]||x<X[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(X[0].shape[0],0),this.dataScaleY=this.estimateScale(X[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(X)),w.surfacecolor&&(K.intensity=X.pop());var H,ee,Q,V=[!0,!0,!0],q=["x","y","z"];for(M=0;M<3;++M){var ie=w.contours[q[M]];V[M]=ie.highlight,K.showContour[M]=ie.show||ie.highlight,K.showContour[M]&&(K.contourProject[M]=[ie.project.x,ie.project.y,ie.project.z],ie.show?(this.showContour[M]=!0,K.levels[M]=J[M],D.highlightColor[M]=K.contourColor[M]=a(ie.color),D.highlightTint[M]=K.contourTint[M]=ie.usecolormap?0:1,K.contourWidth[M]=ie.width,this.contourStart[M]=ie.start,this.contourEnd[M]=ie.end,this.contourSize[M]=ie.size):(this.showContour[M]=!1,this.contourStart[M]=null,this.contourEnd[M]=null,this.contourSize[M]=0),ie.highlight&&(K.dynamicColor[M]=a(ie.highlightcolor),K.dynamicWidth[M]=ie.highlightwidth))}(ee=(H=B)[0].rgb)[0]===(Q=H[H.length-1].rgb)[0]&&ee[1]===Q[1]&&ee[2]===Q[2]&&ee[3]===Q[3]&&(K.vertexColor=!0),K.objectOffset=this.objectOffset,K.coords=X,D.update(K),D.visible=w.visible,D.enableDynamic=V,D.enableHighlight=V,D.snapToData=!0,"lighting"in w&&(D.ambientLight=w.lighting.ambient,D.diffuseLight=w.lighting.diffuse,D.specularLight=w.lighting.specular,D.roughness=w.lighting.roughness,D.fresnel=w.lighting.fresnel),"lightposition"in w&&(D.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},re.exports=function(w,M){var S=g({gl:w.glplot.gl}),R=new p(w,S,M.uid);return S._trace=R,R.update(M),w.glplot.add(S),R}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(v,re,ne){"use strict";var g=v("../../registry"),m=v("../../lib"),b=v("../../components/colorscale/defaults"),y=v("./attributes");function e(n,a,t,p){var s=p("opacityscale");"max"===s?a.opacityscale=[[0,.1],[1,1]]:"min"===s?a.opacityscale=[[0,1],[1,.1]]:"extremes"===s?a.opacityscale=function(i,f){for(var c=[],l=0;l<32;l++){var h=l/31,d=.1+.9*(1-Math.pow(Math.sin(1*h*Math.PI),2));c.push([h,Math.max(0,Math.min(1,d))])}return c}():function(i){var f=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var c=0;c<i.length;c++){var l=i[c];if(2!==l.length||+l[0]<f)return!1;f=+l[0]}return!0}(s)||(a.opacityscale=void 0)}function r(n,a,t){a in n&&!(t in n)&&(n[t]=n[a])}re.exports={supplyDefaults:function(n,a,t,p){var s,i;function f(_,w){return m.coerce(n,a,y,_,w)}var c=f("x"),l=f("y"),h=f("z");if(!h||!h.length||c&&c.length<1||l&&l.length<1)a.visible=!1;else{a._xlength=Array.isArray(c)&&m.isArrayOrTypedArray(c[0])?h.length:h[0].length,a._ylength=h.length,g.getComponentMethod("calendars","handleTraceDefaults")(n,a,["x","y","z"],p),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(_){f(_)});var d=f("surfacecolor"),o=["x","y","z"];for(s=0;s<3;++s){var x="contours."+o[s],u=f(x+".show"),T=f(x+".highlight");if(u||T)for(i=0;i<3;++i)f(x+".project."+o[i]);u&&(f(x+".color"),f(x+".width"),f(x+".usecolormap")),T&&(f(x+".highlightcolor"),f(x+".highlightwidth")),f(x+".start"),f(x+".end"),f(x+".size")}d||(r(n,"zmin","cmin"),r(n,"zmax","cmax"),r(n,"zauto","cauto")),b(n,a,p,f,{prefix:"",cLetter:"c"}),e(0,a,0,f),a._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:v("./calc"),plot:v("./convert"),moduleType:"trace",name:"surface",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(v,re,ne){"use strict";var g=v("../../components/annotations/attributes"),m=v("../../lib/extend").extendFlat,b=v("../../plot_api/edit_types").overrideAll,y=v("../../plots/font_attributes"),e=v("../../plots/domain").attributes,r=v("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(re.exports=b({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:m({},g.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},y({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:r("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:m({},g.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},y({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(v,re,ne){"use strict";var g=v("../../plots/get_data").getModuleCalcData,m=v("./plot");ne.name="table",ne.plot=function(b){var y=g(b.calcdata,"table")[0];y.length&&m(b,y)},ne.clean=function(b,y,e,r){var n=r._has&&r._has("table"),a=y._has&&y._has("table");n&&!a&&r._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(v,re,ne){"use strict";var g=v("../../lib/gup").wrap;re.exports=function(){return g({})}},{"../../lib/gup":512}],1078:[function(v,re,ne){"use strict";re.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(v,re,ne){"use strict";var g=v("./constants"),m=v("../../lib/extend").extendFlat,b=v("fast-isnumeric");function y(s){if(Array.isArray(s)){for(var i=0,f=0;f<s.length;f++)i=Math.max(i,y(s[f]));return i}return s}function e(s,i){return s+i}function r(s){var i,f=s.slice(),c=1/0,l=0;for(i=0;i<f.length;i++)Array.isArray(f[i])||(f[i]=[f[i]]),c=Math.min(c,f[i].length),l=Math.max(l,f[i].length);if(c!==l)for(i=0;i<f.length;i++){var h=l-f[i].length;h&&(f[i]=f[i].concat(n(h)))}return f}function n(s){for(var i=new Array(s),f=0;f<s;f++)i[f]="";return i}function a(s){return s.calcdata.columns.reduce(function(i,f){return f.xIndex<s.xIndex?i+f.columnWidth:i},0)}function t(s,i){return Object.keys(s).map(function(f){return m({},s[f],{auxiliaryBlocks:i})})}function p(s,i){for(var f,c={},l=0,h=0,d={firstRowIndex:null,lastRowIndex:null,rows:[]},o=0,x=0,u=0;u<s.length;u++)d.rows.push({rowIndex:u,rowHeight:f=s[u]}),((h+=f)>=i||u===s.length-1)&&(c[l]=d,d.key=x++,d.firstRowIndex=o,d.lastRowIndex=u,d={firstRowIndex:null,lastRowIndex:null,rows:[]},l+=h,o=u+1,h=0);return c}re.exports=function(s,i){var f=r(i.cells.values),c=function(z){return z.slice(i.header.values.length,z.length)},l=r(i.header.values);l.length&&!l[0].length&&(l[0]=[""],l=r(l));var h=l.concat(c(f).map(function(){return n((l[0]||[""]).length)})),d=i.domain,o=Math.floor(s._fullLayout._size.w*(d.x[1]-d.x[0])),x=Math.floor(s._fullLayout._size.h*(d.y[1]-d.y[0])),u=i.header.values.length?h[0].map(function(){return i.header.height}):[g.emptyHeaderHeight],T=f.length?f[0].map(function(){return i.cells.height}):[],_=u.reduce(e,0),w=p(T,x-_+g.uplift),M=t(p(u,_),[]),I=t(w,M),S={},R=i._fullInput.columnorder.concat(c(f.map(function(z,Y){return Y}))),O=h.map(function(z,Y){var G=Array.isArray(i.columnwidth)?i.columnwidth[Math.min(Y,i.columnwidth.length-1)]:i.columnwidth;return b(G)?Number(G):1}),C=O.reduce(e,0);O=O.map(function(z){return z/C*o});var D=Math.max(y(i.header.line.width),y(i.cells.line.width)),B={key:i.uid+s._context.staticPlot,translateX:d.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-d.y[1]),size:s._fullLayout._size,width:o,maxLineWidth:D,height:x,columnOrder:R,groupHeight:x,rowBlocks:I,headerRowBlocks:M,scrollY:0,cells:m({},i.cells,{values:f}),headerCells:m({},i.header,{values:h}),gdColumns:h.map(function(z){return z[0]}),gdColumnsOriginalOrder:h.map(function(z){return z[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:h.map(function(z,Y){return S[z]=(S[z]||0)+1,{key:z+"__"+S[z],label:z,specIndex:Y,xIndex:R[Y],xScale:a,x:void 0,calcdata:void 0,columnWidth:O[Y]}})};return B.columns.forEach(function(z){z.calcdata=B,z.x=a(z)}),B}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(v,re,ne){"use strict";var g=v("../../lib/extend").extendFlat;ne.splitToPanels=function(m){var b=[0,0],y=g({},m,{key:"header",type:"header",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:g({},m.calcdata,{cells:m.calcdata.headerCells})});return[g({},m,{key:"cells1",type:"cells",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),g({},m,{key:"cells2",type:"cells",page:1,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),y]},ne.splitToCells=function(m){var y,e,r,b=[r=(e=(y=m).rowBlocks[y.page])?e.rows[0].rowIndex:0,e?r+e.rows.length:0];return(m.values||[]).slice(b[0],b[1]).map(function(y,e){return{keyWithinBlock:e+("string"==typeof y&&y.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:b[0]+e,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:y}})}},{"../../lib/extend":505}],1081:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../../plots/domain").defaults;re.exports=function(y,e,r,n){function a(t,p){return g.coerce(y,e,m,t,p)}b(e,n,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),g.coerceFont(a,"header.font",g.extendFlat({},n.font)),function(t,p){for(var i=t.header.values.length,f=(t.columnorder||[]).slice(0,i),c=f.slice().sort(function(d,o){return d-o}),l=f.map(function(d){return c.indexOf(d)}),h=l.length;h<i;h++)l.push(h);p("columnorder",l)}(e,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),g.coerceFont(a,"cells.font",g.extendFlat({},n.font)),e._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("./calc"),plot:v("./plot"),moduleType:"trace",name:"table",basePlotModule:v("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(v,re,ne){"use strict";var g=v("./constants"),m=v("@plotly/d3"),b=v("../../lib").numberFormat,y=v("../../lib/gup"),e=v("../../components/drawing"),r=v("../../lib/svg_text_utils"),n=v("../../lib").raiseToTop,a=v("../../lib").strTranslate,t=v("../../lib").cancelTransition,p=v("./data_preparation_helper"),s=v("./data_split_helpers"),i=v("../../components/color");function f(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function c(X,K){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+K.key}function l(X,K){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+K.calcdata.key+"_"+K.specIndex}function h(X){return[].concat.apply([],X.map(function(K){return K})).map(function(K){return K.__data__})}function d(X,K,ae){var U=X.selectAll("."+g.cn.scrollbarKit).data(y.repeat,y.keyFun);U.enter().append("g").classed(g.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),U.each(function(ee){var le,Q=ee.scrollbarState;Q.totalHeight=Y(le=ee.rowBlocks,le.length-1)+(le.length?G(le[le.length-1],1/0):1),Q.scrollableAreaHeight=ee.groupHeight-I(ee),Q.currentlyVisibleHeight=Math.min(Q.totalHeight,Q.scrollableAreaHeight),Q.ratio=Q.currentlyVisibleHeight/Q.totalHeight,Q.barLength=Math.max(Q.ratio*Q.currentlyVisibleHeight,g.goldenRatio*g.scrollbarWidth),Q.barWiggleRoom=Q.currentlyVisibleHeight-Q.barLength,Q.wiggleRoom=Math.max(0,Q.totalHeight-Q.scrollableAreaHeight),Q.topY=0===Q.barWiggleRoom?0:ee.scrollY/Q.wiggleRoom*Q.barWiggleRoom,Q.bottomY=Q.topY+Q.barLength,Q.dragMultiplier=Q.wiggleRoom/Q.barWiggleRoom}).attr("transform",function(ee){return a(ee.width+g.scrollbarWidth/2+g.scrollbarOffset,I(ee))});var V=U.selectAll("."+g.cn.scrollbar).data(y.repeat,y.keyFun);V.enter().append("g").classed(g.cn.scrollbar,!0);var q=V.selectAll("."+g.cn.scrollbarSlider).data(y.repeat,y.keyFun);q.enter().append("g").classed(g.cn.scrollbarSlider,!0),q.attr("transform",function(ee){return a(0,ee.scrollbarState.topY||0)});var ie=q.selectAll("."+g.cn.scrollbarGlyph).data(y.repeat,y.keyFun);ie.enter().append("line").classed(g.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",g.scrollbarWidth).attr("stroke-linecap","round").attr("y1",g.scrollbarWidth/2),ie.attr("y2",function(ee){return ee.scrollbarState.barLength-g.scrollbarWidth/2}).attr("stroke-opacity",function(ee){return ee.columnDragInProgress||!ee.scrollbarState.barWiggleRoom||ae?0:.4}),ie.transition().delay(0).duration(0),ie.transition().delay(g.scrollbarHideDelay).duration(g.scrollbarHideDuration).attr("stroke-opacity",0);var H=V.selectAll("."+g.cn.scrollbarCaptureZone).data(y.repeat,y.keyFun);H.enter().append("line").classed(g.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",g.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ee){var Q=m.event.y,oe=this.getBoundingClientRect(),le=ee.scrollbarState,de=Q-oe.top,fe=m.scale.linear().domain([0,le.scrollableAreaHeight]).range([0,le.totalHeight]).clamp(!0);le.topY<=de&&de<=le.bottomY||R(K,X,null,fe(de-le.barLength/2))(ee)}).call(m.behavior.drag().origin(function(ee){return m.event.stopPropagation(),ee.scrollbarState.scrollbarScrollInProgress=!0,ee}).on("drag",R(K,X)).on("dragend",function(){})),H.attr("y2",function(ee){return ee.scrollbarState.scrollableAreaHeight}),K._context.staticPlot&&(ie.remove(),H.remove())}function o(X,K,ae,U){var H,V=function(ie){var H=ie.selectAll("."+g.cn.columnCell).data(s.splitToCells,function(ee){return ee.keyWithinBlock});return H.enter().append("g").classed(g.cn.columnCell,!0),H.exit().remove(),H}(((H=ae.selectAll("."+g.cn.columnCells).data(y.repeat,y.keyFun)).enter().append("g").classed(g.cn.columnCells,!0),H.exit().remove(),H));V.each(function(H,ee){var Q=H.calcdata.cells.font,oe=H.column.specIndex,le={size:T(Q.size,oe,ee),color:T(Q.color,oe,ee),family:T(Q.family,oe,ee)};H.rowNumber=H.key,H.align=T(H.calcdata.cells.align,oe,ee),H.cellBorderWidth=T(H.calcdata.cells.line.width,oe,ee),H.font=le}),function(ie){ie.attr("width",function(H){return H.column.columnWidth}).attr("stroke-width",function(H){return H.cellBorderWidth}).each(function(H){var ee=m.select(this);i.stroke(ee,T(H.calcdata.cells.line.color,H.column.specIndex,H.rowNumber)),i.fill(ee,T(H.calcdata.cells.fill.color,H.column.specIndex,H.rowNumber))})}(function(ie){var H=ie.selectAll("."+g.cn.cellRect).data(y.repeat,function(ee){return ee.keyWithinBlock});return H.enter().append("rect").classed(g.cn.cellRect,!0),H}(V));var q=function(ie){var H=ie.selectAll("."+g.cn.cellText).data(y.repeat,function(ee){return ee.keyWithinBlock});return H.enter().append("text").classed(g.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){m.event.stopPropagation()}),H}(function(ie){var H=ie.selectAll("."+g.cn.cellTextHolder).data(y.repeat,function(ee){return ee.keyWithinBlock});return H.enter().append("g").classed(g.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),H}(V));(function(ie){ie.each(function(H){e.font(m.select(this),H.font)})})(q),x(q,K,U,X),z(V)}function x(X,K,ae,U){X.text(function(V){var q=V.column.specIndex,ie=V.rowNumber,H=V.value,ee="string"==typeof H,Q=ee&&H.match(/<br>/i),oe=!ee||Q;V.mayHaveMarkup=ee&&H.match(/[<&>]/);var le,de="string"==typeof(le=H)&&le.match(g.latexCheck);V.latex=de;var fe,be,he=de?"":T(V.calcdata.cells.prefix,q,ie)||"",_e=de?"":T(V.calcdata.cells.suffix,q,ie)||"",Ce=de?null:T(V.calcdata.cells.format,q,ie)||null,Ee=he+(Ce?b(Ce)(V.value):V.value)+_e;if(V.wrappingNeeded=!V.wrapped&&!oe&&!de&&(fe=u(Ee)),V.cellHeightMayIncrease=Q||de||V.mayHaveMarkup||(void 0===fe?u(Ee):fe),V.needsConvertToTspans=V.mayHaveMarkup||V.wrappingNeeded||V.latex,V.wrappingNeeded){var Ae=(" "===g.wrapSplitCharacter?Ee.replace(/<a href=/gi,"<a_href="):Ee).split(g.wrapSplitCharacter),ze=" "===g.wrapSplitCharacter?Ae.map(function(ve){return ve.replace(/<a_href=/gi,"<a href=")}):Ae;V.fragments=ze.map(function(ve){return{text:ve,width:null}}),V.fragments.push({fragment:g.wrapSpacer,width:null}),be=ze.join(g.lineBreaker)+g.lineBreaker+g.wrapSpacer}else delete V.fragments,be=Ee;return be}).attr("dy",function(V){return V.needsConvertToTspans?0:"0.75em"}).each(function(V){var q=m.select(this);V.needsConvertToTspans?r.convertToTspans(q,U,(V.wrappingNeeded?C:D)(ae,this,K,U,V)):m.select(this.parentNode).attr("transform",function(H){return a(B(H),g.cellPad)}).attr("text-anchor",function(H){return{left:"start",center:"middle",right:"end"}[H.align]})})}function u(X){return-1!==X.indexOf(g.wrapSplitCharacter)}function T(X,K,ae){if(Array.isArray(X)){var U=X[Math.min(K,X.length-1)];return Array.isArray(U)?U[Math.min(ae,U.length-1)]:U}return X}function _(X,K,ae){X.transition().ease(g.releaseTransitionEase).duration(g.releaseTransitionDuration).attr("transform",a(K.x,ae))}function w(X){return"cells"===X.type}function M(X){return"header"===X.type}function I(X){return(X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(K,ae){return K+G(ae,1/0)},0)}function S(X,K,ae){var U=h(K)[0];if(void 0!==U){var V=U.rowBlocks,q=U.calcdata,ie=Y(V,V.length),H=U.calcdata.groupHeight-I(U),ee=q.scrollY=Math.max(0,Math.min(ie-H,q.scrollY)),Q=function(oe,le,de){for(var fe=[],be=0,he=0;he<oe.length;he++){for(var _e=oe[he],Ce=_e.rows,Ee=0,Ae=0;Ae<Ce.length;Ae++)Ee+=Ce[Ae].rowHeight;_e.allRowsHeight=Ee,le<be+Ee&&le+de>be&&fe.push(he),be+=Ee}return fe}(V,ee,H);1===Q.length&&(Q[0]===V.length-1?Q.unshift(Q[0]-1):Q.push(Q[0]+1)),Q[0]%2&&Q.reverse(),K.each(function(oe,le){oe.page=Q[le],oe.scrollY=ee}),K.attr("transform",function(oe){var le=Y(oe.rowBlocks,oe.page)-oe.scrollY;return a(0,le)}),X&&(O(X,ae,K,Q,U.prevPages,U,0),O(X,ae,K,Q,U.prevPages,U,1),d(ae,X))}}function R(X,K,ae,U){return function(V){var q=V.calcdata?V.calcdata:V,ie=K.filter(function(oe){return q.key===oe.key}),ee=q.scrollY;q.scrollY=void 0===U?q.scrollY+(ae||q.scrollbarState.dragMultiplier)*m.event.dy:U;var Q=ie.selectAll("."+g.cn.yColumn).selectAll("."+g.cn.columnBlock).filter(w);return S(X,Q,ie),q.scrollY===ee}}function O(X,K,ae,U,V,q,ie){U[ie]!==V[ie]&&(clearTimeout(q.currentRepaint[ie]),q.currentRepaint[ie]=setTimeout(function(){var H=ae.filter(function(ee,Q){return Q===ie&&U[Q]!==V[Q]});o(X,K,H,ae),V[ie]=U[ie]}))}function C(X,K,ae,U){return function(){var V=m.select(K.parentNode);V.each(function(q){var ie=q.fragments;V.selectAll("tspan.line").each(function(be,he){ie[he].width=this.getComputedTextLength()});var H,ee,Q=ie[ie.length-1].width,oe=ie.slice(0,-1),le=[],de=0,fe=q.column.columnWidth-2*g.cellPad;for(q.value="";oe.length;)de+(ee=(H=oe.shift()).width+Q)>fe&&(q.value+=le.join(g.wrapSpacer)+g.lineBreaker,le=[],de=0),le.push(H.text),de+=ee;de&&(q.value+=le.join(g.wrapSpacer)),q.wrapped=!0}),V.selectAll("tspan.line").remove(),x(V.select("."+g.cn.cellText),ae,X,U),m.select(K.parentNode.parentNode).call(z)}}function D(X,K,ae,U,V){return function(){if(!V.settledY){var q=m.select(K.parentNode),ie=te(V),H=V.key-ie.firstRowIndex,ee=ie.rows[H].rowHeight,Q=V.cellHeightMayIncrease?K.parentNode.getBoundingClientRect().height+2*g.cellPad:ee,oe=Math.max(Q,ee);oe-ie.rows[H].rowHeight&&(ie.rows[H].rowHeight=oe,X.selectAll("."+g.cn.columnCell).call(z),S(null,X.filter(w),0),d(ae,U,!0)),q.attr("transform",function(){var le=this.parentNode.getBoundingClientRect(),de=m.select(this.parentNode).select("."+g.cn.cellRect).node().getBoundingClientRect(),fe=this.transform.baseVal.consolidate(),be=de.top-le.top+(fe?fe.matrix.f:g.cellPad);return a(B(V,m.select(this.parentNode).select("."+g.cn.cellTextHolder).node().getBoundingClientRect().width),be)}),V.settledY=!0}}}function B(X,K){switch(X.align){case"left":default:return g.cellPad;case"right":return X.column.columnWidth-(K||0)-g.cellPad;case"center":return(X.column.columnWidth-(K||0))/2}}function z(X){X.attr("transform",function(K){var ae=K.rowBlocks[0].auxiliaryBlocks.reduce(function(V,q){return V+G(q,1/0)},0),U=G(te(K),K.key);return a(0,U+ae)}).selectAll("."+g.cn.cellRect).attr("height",function(K){return(ae=te(K),U=K.key,ae.rows[U-ae.firstRowIndex]).rowHeight;var ae,U})}function Y(X,K){for(var ae=0,U=K-1;U>=0;U--)ae+=J(X[U]);return ae}function G(X,K){for(var ae=0,U=0;U<X.rows.length&&X.rows[U].rowIndex<K;U++)ae+=X.rows[U].rowHeight;return ae}function J(X){var K=X.allRowsHeight;if(void 0!==K)return K;for(var ae=0,U=0;U<X.rows.length;U++)ae+=X.rows[U].rowHeight;return X.allRowsHeight=ae,ae}function te(X){return X.rowBlocks[X.page]}re.exports=function(X,K){var ae=!X._context.staticPlot,U=X._fullLayout._paper.selectAll("."+g.cn.table).data(K.map(function(_e){var Ce=y.unwrap(_e).trace;return p(X,Ce)}),y.keyFun);U.exit().remove(),U.enter().append("g").classed(g.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),U.attr("width",function(_e){return _e.width+_e.size.l+_e.size.r}).attr("height",function(_e){return _e.height+_e.size.t+_e.size.b}).attr("transform",function(_e){return a(_e.translateX,_e.translateY)});var V=U.selectAll("."+g.cn.tableControlView).data(y.repeat,y.keyFun),q=V.enter().append("g").classed(g.cn.tableControlView,!0).style("box-sizing","content-box");if(ae){var ie="onwheel"in document?"wheel":"mousewheel";q.on("mousemove",function(_e){V.filter(function(Ce){return _e===Ce}).call(d,X)}).on(ie,function(_e){_e.scrollbarState.wheeling||(_e.scrollbarState.wheeling=!0,R(X,V,null,_e.scrollY+m.event.deltaY)(_e)||(m.event.stopPropagation(),m.event.preventDefault()),_e.scrollbarState.wheeling=!1)}).call(d,X,!0)}V.attr("transform",function(_e){return a(_e.size.l,_e.size.t)});var H=V.selectAll("."+g.cn.scrollBackground).data(y.repeat,y.keyFun);H.enter().append("rect").classed(g.cn.scrollBackground,!0).attr("fill","none"),H.attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),V.each(function(_e){e.setClipUrl(m.select(this),c(X,_e),X)});var ee=V.selectAll("."+g.cn.yColumn).data(function(_e){return _e.columns},y.keyFun);ee.enter().append("g").classed(g.cn.yColumn,!0),ee.exit().remove(),ee.attr("transform",function(_e){return a(_e.x,0)}),ae&&ee.call(m.behavior.drag().origin(function(_e){return _(m.select(this),_e,-g.uplift),n(this),_e.calcdata.columnDragInProgress=!0,d(V.filter(function(Ce){return _e.calcdata.key===Ce.key}),X),_e}).on("drag",function(_e){var Ce=m.select(this),Ee=function(Ae){return(_e===Ae?m.event.x:Ae.x)+Ae.columnWidth/2};_e.x=Math.max(-g.overdrag,Math.min(_e.calcdata.width+g.overdrag-_e.columnWidth,m.event.x)),h(ee).filter(function(Ae){return Ae.calcdata.key===_e.calcdata.key}).sort(function(Ae,ze){return Ee(Ae)-Ee(ze)}).forEach(function(Ae,ze){Ae.xIndex=ze,Ae.x=_e===Ae?Ae.x:Ae.xScale(Ae)}),ee.filter(function(Ae){return _e!==Ae}).transition().ease(g.transitionEase).duration(g.transitionDuration).attr("transform",function(Ae){return a(Ae.x,0)}),Ce.call(t).attr("transform",a(_e.x,-g.uplift))}).on("dragend",function(_e){var Ae,ze,ve,Te,Ce=m.select(this),Ee=_e.calcdata;_e.x=_e.xScale(_e),_e.calcdata.columnDragInProgress=!1,_(Ce,_e,0),Ae=X,ze=Ee,ve=Ee.columns.map(function(Ae){return Ae.xIndex}),Te=ze.gdColumnsOriginalOrder,ze.gdColumns.sort(function(Ie,De){return ve[Te.indexOf(Ie)]-ve[Te.indexOf(De)]}),ze.columnorder=ve,Ae.emit("plotly_restyle")})),ee.each(function(_e){e.setClipUrl(m.select(this),l(X,_e),X)});var Q=ee.selectAll("."+g.cn.columnBlock).data(s.splitToPanels,y.keyFun);Q.enter().append("g").classed(g.cn.columnBlock,!0).attr("id",function(_e){return _e.key}),Q.style("cursor",function(_e){return _e.dragHandle?"ew-resize":_e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var oe=Q.filter(M),le=Q.filter(w);ae&&le.call(m.behavior.drag().origin(function(_e){return m.event.stopPropagation(),_e}).on("drag",R(X,V,-1)).on("dragend",function(){})),o(X,V,oe,Q),o(X,V,le,Q);var de=V.selectAll("."+g.cn.scrollAreaClip).data(y.repeat,y.keyFun);de.enter().append("clipPath").classed(g.cn.scrollAreaClip,!0).attr("id",function(_e){return c(X,_e)});var fe=de.selectAll("."+g.cn.scrollAreaClipRect).data(y.repeat,y.keyFun);fe.enter().append("rect").classed(g.cn.scrollAreaClipRect,!0).attr("x",-g.overdrag).attr("y",-g.uplift).attr("fill","none"),fe.attr("width",function(_e){return _e.width+2*g.overdrag}).attr("height",function(_e){return _e.height+g.uplift}),ee.selectAll("."+g.cn.columnBoundary).data(y.repeat,y.keyFun).enter().append("g").classed(g.cn.columnBoundary,!0);var be=ee.selectAll("."+g.cn.columnBoundaryClippath).data(y.repeat,y.keyFun);be.enter().append("clipPath").classed(g.cn.columnBoundaryClippath,!0),be.attr("id",function(_e){return l(X,_e)});var he=be.selectAll("."+g.cn.columnBoundaryRect).data(y.repeat,y.keyFun);he.enter().append("rect").classed(g.cn.columnBoundaryRect,!0).attr("fill","none"),he.attr("width",function(_e){return _e.columnWidth+2*f(_e)}).attr("height",function(_e){return _e.calcdata.height+2*f(_e)+g.uplift}).attr("x",function(_e){return-f(_e)}).attr("y",function(_e){return-f(_e)}),S(null,le,V)}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(v,re,ne){"use strict";var g=v("../../plots/template_attributes").hovertemplateAttrs,m=v("../../plots/template_attributes").texttemplateAttrs,b=v("../../components/colorscale/attributes"),y=v("../../plots/domain").attributes,e=v("../pie/attributes"),r=v("../sunburst/attributes"),n=v("./constants"),a=v("../../lib/extend").extendFlat;re.exports={labels:r.labels,parents:r.parents,values:r.values,branchvalues:r.branchvalues,count:r.count,level:r.level,maxdepth:r.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:a({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:r.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:r.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:a({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:r.textinfo,texttemplate:m({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:r.hoverinfo,hovertemplate:g({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:r.root,domain:y({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(v,re,ne){"use strict";var g=v("../../plots/plots");ne.name="treemap",ne.plot=function(m,b,y,e){g.plotBasePlot(ne.name,m,b,y,e)},ne.clean=function(m,b,y,e){g.cleanBasePlot(ne.name,m,b,y,e)}},{"../../plots/plots":628}],1086:[function(v,re,ne){"use strict";var g=v("../sunburst/calc");ne.calc=function(m,b){return g.calc(m,b)},ne.crossTraceCalc=function(m){return g._runCrossTraceCalc("treemap",m)}},{"../sunburst/calc":1060}],1087:[function(v,re,ne){"use strict";re.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../../components/color"),y=v("../../plots/domain").defaults,e=v("../bar/defaults").handleText,r=v("../bar/constants").TEXTPAD,n=v("../../components/colorscale"),a=n.hasColorscale,t=n.handleDefaults;re.exports=function(p,s,i,f){function c(w,M){return g.coerce(p,s,m,w,M)}var l=c("labels"),h=c("parents");if(l&&l.length&&h&&h.length){var d=c("values");c(d&&d.length?"branchvalues":"count"),c("level"),c("maxdepth"),"squarify"===c("tiling.packing")&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var o=c("text");c("texttemplate"),s.texttemplate||c("textinfo",Array.isArray(o)?"text+label":"label"),c("hovertext"),c("hovertemplate");var x=c("pathbar.visible");e(p,s,f,c,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var u=-1!==s.textposition.indexOf("bottom");c("marker.line.width")&&c("marker.line.color",f.paper_bgcolor);var T=c("marker.colors");(s._hasColorscale=a(p,"marker","colors")||(p.marker||{}).coloraxis)?t(p,s,f,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(T||[]).length);var _=2*s.textfont.size;c("marker.pad.t",u?_/4:_),c("marker.pad.l",_/4),c("marker.pad.r",_/4),c("marker.pad.b",u?_:_/4),s._hovered={marker:{line:{width:2,color:b.contrast(f.paper_bgcolor)}}},x&&(c("pathbar.thickness",s.pathbar.textfont.size+2*r),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),y(s,f,c),s._length=null}else s.visible=!1}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../sunburst/helpers"),b=v("../bar/uniform_text").clearMinTextSize,y=v("../bar/style").resizeText,e=v("./plot_one");re.exports=function(r,n,a,t,p){var s,i,f=p.type,c=p.drawDescendants,l=r._fullLayout,h=l["_"+f+"layer"],d=!a;b(f,l),(s=h.selectAll("g.trace."+f).data(n,function(o){return o[0].trace.uid})).enter().append("g").classed("trace",!0).classed(f,!0),s.order(),!l.uniformtext.mode&&m.hasTransition(a)?(t&&(i=t()),g.transition().duration(a.duration).ease(a.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){h.selectAll("g.trace").each(function(o){e(r,o,this,a,c)})})):(s.each(function(o){e(r,o,this,a,c)}),l.uniformtext.mode&&y(r,h.selectAll(".trace"),f)),d&&s.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing"),y=v("../../lib/svg_text_utils"),e=v("./partition"),r=v("./style").styleOne,n=v("./constants"),a=v("../sunburst/helpers"),t=v("../sunburst/fx");re.exports=function(p,s,i,f,c){var l=c.barDifY,h=c.width,d=c.height,o=c.viewX,x=c.viewY,u=c.pathSlice,T=c.toMoveInsideSlice,_=c.strTransform,w=c.hasTransition,M=c.handleSlicesExit,I=c.makeUpdateSliceInterpolator,S=c.makeUpdateTextInterpolator,R={},O=p._fullLayout,C=s[0],D=C.trace,B=C.hierarchy,z=h/D._entryDepth,Y=a.listPath(i.data,"id"),G=e(B.copy(),[h,d],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(G=G.filter(function(te){var X=Y.indexOf(te.data.id);return-1!==X&&(te.x0=z*X,te.x1=z*(X+1),te.y0=l,te.y1=l+d,te.onPathbar=!0,!0)})).reverse(),(f=f.data(G,a.getPtId)).enter().append("g").classed("pathbar",!0),M(f,!0,R,[h,d],u),f.order();var J=f;w&&(J=J.transition().each("end",function(){var te=g.select(this);a.setSliceCursor(te,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),J.each(function(te){te._x0=o(te.x0),te._x1=o(te.x1),te._y0=x(te.y0),te._y1=x(te.y1),te._hoverX=o(te.x1-Math.min(h,d)/2),te._hoverY=x(te.y1-d/2);var X=g.select(this),K=m.ensureSingle(X,"path","surface",function(q){q.style("pointer-events","all")});w?K.transition().attrTween("d",function(q){var ie=I(q,!0,R,[h,d]);return function(H){return u(ie(H))}}):K.attr("d",u),X.call(t,i,p,s,{styleOne:r,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,p,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:p._transitioning}),K.call(r,te,D,{hovered:!1}),te._text=(a.getPtLabel(te)||"").split("<br>").join(" ")||"";var ae=m.ensureSingle(X,"g","slicetext"),U=m.ensureSingle(ae,"text","",function(q){q.attr("data-notex",1)}),V=m.ensureUniformFontSize(p,a.determineTextFont(D,te,O.font,{onPathbar:!0}));U.text(te._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(b.font,V).call(y.convertToTspans,p),te.textBB=b.bBox(U.node()),te.transform=T(te,{fontSize:V.size,onPathbar:!0}),te.transform.fontSize=V.size,w?U.transition().attrTween("transform",function(q){var ie=S(q,!0,R,[h,d]);return function(H){return _(ie(H))}}):U.attr("transform",_(te))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing"),y=v("../../lib/svg_text_utils"),e=v("./partition"),r=v("./style").styleOne,n=v("./constants"),a=v("../sunburst/helpers"),t=v("../sunburst/fx"),p=v("../sunburst/plot").formatSliceLabel;re.exports=function(s,i,f,c,l){var h=l.width,d=l.height,o=l.viewX,x=l.viewY,u=l.pathSlice,T=l.toMoveInsideSlice,_=l.strTransform,w=l.hasTransition,M=l.handleSlicesExit,I=l.makeUpdateSliceInterpolator,S=l.makeUpdateTextInterpolator,R=l.prevEntry,O=s._fullLayout,C=i[0].trace,D=-1!==C.textposition.indexOf("left"),B=-1!==C.textposition.indexOf("right"),z=-1!==C.textposition.indexOf("bottom"),Y=!z&&!C.marker.pad.t||z&&!C.marker.pad.b,G=e(f,[h,d],{packing:C.tiling.packing,squarifyratio:C.tiling.squarifyratio,flipX:C.tiling.flip.indexOf("x")>-1,flipY:C.tiling.flip.indexOf("y")>-1,pad:{inner:C.tiling.pad,top:C.marker.pad.t,left:C.marker.pad.l,right:C.marker.pad.r,bottom:C.marker.pad.b}}).descendants(),J=1/0,te=-1/0;G.forEach(function(V){var q=V.depth;q>=C._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(J=Math.min(J,q),te=Math.max(te,q))}),c=c.data(G,a.getPtId),C._maxVisibleLayers=isFinite(te)?te-J+1:0,c.enter().append("g").classed("slice",!0),M(c,!1,{},[h,d],u),c.order();var X=null;if(w&&R){var K=a.getPtId(R);c.each(function(V){null===X&&a.getPtId(V)===K&&(X={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var ae=function(){return X||{x0:0,x1:h,y0:0,y1:d}},U=c;return w&&(U=U.transition().each("end",function(){var V=g.select(this);a.setSliceCursor(V,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(V){var q=a.isHeader(V,C);V._x0=o(V.x0),V._x1=o(V.x1),V._y0=x(V.y0),V._y1=x(V.y1),V._hoverX=o(V.x1-C.marker.pad.r),V._hoverY=x(z?V.y1-C.marker.pad.b/2:V.y0+C.marker.pad.t/2);var ie=g.select(this),H=m.ensureSingle(ie,"path","surface",function(le){le.style("pointer-events","all")});w?H.transition().attrTween("d",function(le){var de=I(le,!1,ae(),[h,d]);return function(fe){return u(de(fe))}}):H.attr("d",u),ie.call(t,f,s,i,{styleOne:r,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),H.call(r,V,C,{hovered:!1}),V._text=V.x0===V.x1||V.y0===V.y1?"":q?Y?"":a.getPtLabel(V)||"":p(V,f,C,i,O)||"";var ee=m.ensureSingle(ie,"g","slicetext"),Q=m.ensureSingle(ee,"text","",function(le){le.attr("data-notex",1)}),oe=m.ensureUniformFontSize(s,a.determineTextFont(C,V,O.font));Q.text(V._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":D||q?"start":"middle").call(b.font,oe).call(y.convertToTspans,s),V.textBB=b.bBox(Q.node()),V.transform=T(V,{fontSize:oe.size,isHeader:q}),V.transform.fontSize=oe.size,w?Q.transition().attrTween("transform",function(le){var de=S(le,!1,ae(),[h,d]);return function(fe){return _(de(fe))}}):Q.attr("transform",_(V))}),X}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(v,re,ne){"use strict";re.exports=function g(m,b,y){var e;y.swapXY&&(e=m.x0,m.x0=m.y0,m.y0=e,e=m.x1,m.x1=m.y1,m.y1=e),y.flipX&&(e=m.x0,m.x0=b[0]-m.x1,m.x1=b[0]-e),y.flipY&&(e=m.y0,m.y0=b[1]-m.y1,m.y1=b[1]-e);var r=m.children;if(r)for(var n=0;n<r.length;n++)g(r[n],b,y)}},{}],1093:[function(v,re,ne){"use strict";re.exports={moduleType:"trace",name:"treemap",basePlotModule:v("./base_plot"),categories:[],animatable:!0,attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc").calc,crossTraceCalc:v("./calc").crossTraceCalc,plot:v("./plot"),style:v("./style").style,colorbar:v("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(v,re,ne){"use strict";re.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y){function e(r,n){return g.coerce(b,y,m,r,n)}e("treemapcolorway",y.colorway),e("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(v,re,ne){"use strict";var g=v("d3-hierarchy"),m=v("./flip_tree");re.exports=function(b,y,e){var r,n=e.flipX,a=e.flipY,t="dice-slice"===e.packing,p=e.pad[a?"bottom":"top"],s=e.pad[n?"right":"left"],i=e.pad[n?"left":"right"],f=e.pad[a?"top":"bottom"];t&&(r=s,s=p,p=r,r=i,i=f,f=r);var c=g.treemap().tile(function(l,h){switch(l){case"squarify":return g.treemapSquarify.ratio(h);case"binary":return g.treemapBinary;case"dice":return g.treemapDice;case"slice":return g.treemapSlice;default:return g.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(s).paddingRight(i).paddingTop(p).paddingBottom(f).size(t?[y[1],y[0]]:y)(b);return(t||n||a)&&m(c,y,{swapXY:t,flipX:n,flipY:a}),c}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(v,re,ne){"use strict";var g=v("./draw"),m=v("./draw_descendants");re.exports=function(b,y,e,r){return g(b,y,e,r,{type:"treemap",drawDescendants:m})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("d3-interpolate").interpolate,b=v("../sunburst/helpers"),y=v("../../lib"),e=v("../bar/constants").TEXTPAD,r=v("../bar/plot").toMoveInsideBar,n=v("../bar/uniform_text").recordMinTextSize,a=v("./constants"),t=v("./draw_ancestors");function p(s){return b.isHierarchyRoot(s)?"":b.getPtId(s)}re.exports=function(s,i,f,c,l){var h=s._fullLayout,d=i[0],o=d.trace,x="icicle"===o.type,u=d.hierarchy,T=b.findEntryWithLevel(u,o.level),_=g.select(f),w=_.selectAll("g.pathbar"),M=_.selectAll("g.slice");if(!T)return w.remove(),void M.remove();var I=b.isHierarchyRoot(T),S=!h.uniformtext.mode&&b.hasTransition(c),R=b.getMaxDepth(o),O=h._size,C=o.domain,D=O.w*(C.x[1]-C.x[0]),B=O.h*(C.y[1]-C.y[0]),z=D,Y=o.pathbar.thickness,G=o.marker.line.width+a.gapWithPathbar,J=o.pathbar.visible?o.pathbar.side.indexOf("bottom")>-1?B+G:-(Y+G):0,te={x0:z,x1:z,y0:J,y1:J+Y},X=function(Fe,Ue,qe){var je=o.tiling.pad,rt=function(Ye){return Ye-je<=Ue.x0},Ne=function(Ye){return Ye+je>=Ue.x1},Be=function(Ye){return Ye-je<=Ue.y0},We=function(Ye){return Ye+je>=Ue.y1};return Fe.x0===Ue.x0&&Fe.x1===Ue.x1&&Fe.y0===Ue.y0&&Fe.y1===Ue.y1?{x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1}:{x0:rt(Fe.x0-je)?0:Ne(Fe.x0-je)?qe[0]:Fe.x0,x1:rt(Fe.x1+je)?0:Ne(Fe.x1+je)?qe[0]:Fe.x1,y0:Be(Fe.y0-je)?0:We(Fe.y0-je)?qe[1]:Fe.y0,y1:Be(Fe.y1+je)?0:We(Fe.y1+je)?qe[1]:Fe.y1}},K=null,ae={},U={},V=null,q=function(Fe,Ue){return Ue?ae[p(Fe)]:U[p(Fe)]};d.hasMultipleRoots&&I&&R++,o._maxDepth=R,o._backgroundColor=h.paper_bgcolor,o._entryDepth=T.data.depth,o._atRootLevel=I;var H=-D/2+O.l+O.w*(C.x[1]+C.x[0])/2,ee=-B/2+O.t+O.h*(1-(C.y[1]+C.y[0])/2),Q=function(Fe){return H+Fe},oe=function(Fe){return ee+Fe},le=oe(0),de=Q(0),fe=function(Fe){return de+Fe},be=function(Fe){return le+Fe};function he(Fe,Ue){return Fe+","+Ue}var _e=fe(0),Ce=function(Fe){Fe.x=Math.max(_e,Fe.x)},Ee=o.pathbar.edgeshape,Ae=function(Fe,Ue){var qe=Fe.x0,je=Fe.x1,rt=Fe.y0,Ne=Fe.y1,Be=Fe.textBB,We=function(St){return-1!==o.textposition.indexOf(St)},Ye=We("bottom"),lt=We("top")||Ue.isHeader&&!Ye?"start":Ye?"end":"middle",mt=We("right"),Tt=We("left")||Ue.onPathbar?-1:mt?1:0,It=o[x?"tiling":"marker"].pad;if(Ue.isHeader){if((qe+=(x?It:It.l)-e)>=(je-=(x?It:It.r)-e)){var Ct=(qe+je)/2;qe=Ct,je=Ct}var ct;Ye?rt<(ct=Ne-(x?It:It.b))&&ct<Ne&&(rt=ct):rt<(ct=rt+(x?It:It.t))&&ct<Ne&&(Ne=ct)}var at=r(qe,je,rt,Ne,Be,{isHorizontal:!1,constrained:!0,angle:0,anchor:lt,leftToRight:Tt});return at.fontSize=Ue.fontSize,at.targetX=Q(at.targetX),at.targetY=oe(at.targetY),isNaN(at.targetX)||isNaN(at.targetY)?{}:(qe!==je&&rt!==Ne&&n(o.type,at,h),{scale:at.scale,rotate:at.rotate,textX:at.textX,textY:at.textY,anchorX:at.anchorX,anchorY:at.anchorY,targetX:at.targetX,targetY:at.targetY})},ze=function(Fe,Ue){for(var qe,je=0,rt=Fe;!qe&&je<R;)je++,(rt=rt.parent)?qe=q(rt,Ue):je=R;return qe||{}},ve=function(Fe,Ue,qe,je,rt){var Ne,Be=q(Fe,Ue);if(Be)Ne=Be;else if(Ue)Ne=te;else if(K)if(Fe.parent){var We=V||qe;We&&!Ue?Ne=X(Fe,We,je):y.extendFlat(Ne={},ze(Fe,Ue))}else Ne=y.extendFlat({},Fe),x&&("h"===rt.orientation?rt.flipX?Ne.x0=Fe.x1:Ne.x1=0:rt.flipY?Ne.y0=Fe.y1:Ne.y1=0);else Ne={};return m(Ne,{x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1})},Te=function(Fe,Ue,qe,je){var rt=q(Fe,Ue),Ne={},Be=function(Fe,Ue,qe,je){return Ue?ae[p(u)]||te:Fe.data.depth-T.data.depth<R?X(Fe,U[o.level]||qe,je):{}}(Fe,Ue,qe,je);y.extendFlat(Ne,{transform:Ae({x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1,textBB:Fe.textBB,_text:Fe._text},{isHeader:b.isHeader(Fe,o)})}),rt?Ne=rt:Fe.parent&&y.extendFlat(Ne,ze(Fe,Ue));var We=Fe.transform;return Fe.x0!==Fe.x1&&Fe.y0!==Fe.y1&&n(o.type,We,h),m(Ne,{transform:{scale:We.scale,rotate:We.rotate,textX:We.textX,textY:We.textY,anchorX:We.anchorX,anchorY:We.anchorY,targetX:We.targetX,targetY:We.targetY}})},Ie=function(Fe,Ue,qe,je,rt){var Ne=je[0],Be=je[1];S?Fe.exit().transition().each(function(){var We=g.select(this);We.select("path.surface").transition().attrTween("d",function(Ye){var lt=function(mt,Tt,It,Ct){var ct,at=q(mt,Tt);if(Tt)ct=te;else{var St=q(T,Tt);ct=St?X(mt,St,Ct):{}}return m(at,ct)}(Ye,Ue,0,[Ne,Be]);return function(mt){return rt(lt(mt))}}),We.select("g.slicetext").attr("opacity",0)}).remove():Fe.exit().remove()},De=function(Fe){var Ue=Fe.transform;return Fe.x0!==Fe.x1&&Fe.y0!==Fe.y1&&n(o.type,Ue,h),y.getTextTransform({textX:Ue.textX,textY:Ue.textY,anchorX:Ue.anchorX,anchorY:Ue.anchorY,targetX:Ue.targetX,targetY:Ue.targetY,scale:Ue.scale,rotate:Ue.rotate})};S&&(w.each(function(Fe){ae[p(Fe)]={x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1},Fe.transform&&(ae[p(Fe)].transform={textX:Fe.transform.textX,textY:Fe.transform.textY,anchorX:Fe.transform.anchorX,anchorY:Fe.transform.anchorY,targetX:Fe.transform.targetX,targetY:Fe.transform.targetY,scale:Fe.transform.scale,rotate:Fe.transform.rotate})}),M.each(function(Fe){U[p(Fe)]={x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1},Fe.transform&&(U[p(Fe)].transform={textX:Fe.transform.textX,textY:Fe.transform.textY,anchorX:Fe.transform.anchorX,anchorY:Fe.transform.anchorY,targetX:Fe.transform.targetX,targetY:Fe.transform.targetY,scale:Fe.transform.scale,rotate:Fe.transform.rotate}),!K&&b.isEntry(Fe)&&(K=Fe)})),V=l(s,i,T,M,{width:D,height:B,viewX:Q,viewY:oe,pathSlice:function(Fe){var Ue=Q(Fe.x0),qe=Q(Fe.x1),je=oe(Fe.y0),rt=oe(Fe.y1);return qe-Ue&&rt-je?"M"+he(Ue,je+0)+"L"+he(qe-0,je)+"L"+he(qe,rt-0)+"L"+he(Ue+0,rt)+"Z":""},toMoveInsideSlice:Ae,prevEntry:K,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Ie,hasTransition:S,strTransform:De}),o.pathbar.visible?t(s,i,T,w,{barDifY:J,width:z,height:Y,viewX:fe,viewY:be,pathSlice:function(Fe){var Ue=fe(Math.max(Math.min(Fe.x0,Fe.x0),0)),qe=fe(Math.min(Math.max(Fe.x1,Fe.x1),z)),je=be(Fe.y0),rt=be(Fe.y1),Ne=Y/2,Be={},We={};Be.x=Ue,We.x=qe,Be.y=We.y=(je+rt)/2;var Ye={x:Ue,y:je},lt={x:qe,y:je},mt={x:qe,y:rt},Tt={x:Ue,y:rt};return">"===Ee?(Ye.x-=Ne,lt.x-=Ne,mt.x-=Ne,Tt.x-=Ne):"/"===Ee?(mt.x-=Ne,Tt.x-=Ne,Be.x-=Ne/2,We.x-=Ne/2):"\\"===Ee?(Ye.x-=Ne,lt.x-=Ne,Be.x-=Ne/2,We.x-=Ne/2):"<"===Ee&&(Be.x-=Ne,We.x-=Ne),Ce(Ye),Ce(Tt),Ce(Be),Ce(lt),Ce(mt),Ce(We),"M"+he(Ye.x,Ye.y)+"L"+he(lt.x,lt.y)+"L"+he(We.x,We.y)+"L"+he(mt.x,mt.y)+"L"+he(Tt.x,Tt.y)+"L"+he(Be.x,Be.y)+"Z"},toMoveInsideSlice:Ae,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Ie,hasTransition:S,strTransform:De}):w.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/color"),b=v("../../lib"),y=v("../sunburst/helpers"),e=v("../bar/uniform_text").resizeText;function r(n,a,t,p){var s,i,f=(p||{}).hovered,c=a.data.data,l=c.i,h=c.color,d=y.isHierarchyRoot(a),o=1;if(f)s=t._hovered.marker.line.color,i=t._hovered.marker.line.width;else if(d&&h===t.root.color)o=100,s="rgba(0,0,0,0)",i=0;else if(s=b.castOption(t,l,"marker.line.color")||m.defaultLine,i=b.castOption(t,l,"marker.line.width")||0,!t._hasColorscale&&!a.onPathbar){var x=t.marker.depthfade;if(x){var u,T=m.combine(m.addOpacity(t._backgroundColor,.75),h);if(!0===x){var _=y.getMaxDepth(t);u=isFinite(_)?y.isLeaf(a)?0:t._maxVisibleLayers-(a.data.depth-t._entryDepth):a.data.height+1}else u=a.data.depth-t._entryDepth,t._atRootLevel||u++;if(u>0)for(var w=0;w<u;w++)h=m.combine(m.addOpacity(T,.5*w/u),h)}}n.style("stroke-width",i).call(m.fill,h).call(m.stroke,s).style("opacity",o)}re.exports={style:function(n){var a=n._fullLayout._treemaplayer.selectAll(".trace");e(n,a,"treemap"),a.each(function(t){var p=g.select(this),s=t[0].trace;p.style("opacity",s.opacity),p.selectAll("path.surface").each(function(i){g.select(this).call(r,i,s,{hovered:!1})})})},styleOne:r}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(v,re,ne){"use strict";var g=v("../box/attributes"),m=v("../../lib/extend").extendFlat,b=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat;re.exports={y:g.y,x:g.x,x0:g.x0,y0:g.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:m({},g.name,{}),orientation:m({},g.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:g.fillcolor,points:m({},g.boxpoints,{}),jitter:m({},g.jitter,{}),pointpos:m({},g.pointpos,{}),width:m({},g.width,{}),marker:g.marker,text:g.text,hovertext:g.hovertext,hovertemplate:g.hovertemplate,quartilemethod:g.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup,selected:g.selected,unselected:g.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../box/calc"),y=v("./helpers"),e=v("../../constants/numerical").BADNUM;function r(a,t,p){var s=t.max-t.min;if(!s)return a.bandwidth?a.bandwidth:0;if(a.bandwidth)return Math.max(a.bandwidth,s/1e4);var c,i=p.length,f=g.stdev(p,i-1,t.mean);return Math.max((c=i,1.059*Math.min(f,(t.q3-t.q1)/1.349)*Math.pow(c,-.2)),s/100)}function n(a,t,p,s){var i,f=a.spanmode,c=a.span||[],h=[t.min-2*s,t.max+2*s];function d(x){var u=c[x],T="multicategory"===p.type?p.r2c(u):p.d2c(u,0,a[t.valLetter+"calendar"]);return T===e?h[x]:T}var o={type:"linear",range:i="soft"===f?h:"hard"===f?[t.min,t.max]:[d(0),d(1)]};return m.setConvert(o),o.cleanRange(),i}re.exports=function(a,t){var p=b(a,t);if(p[0].t.empty)return p;for(var s=a._fullLayout,i=m.getFromId(a,t["h"===t.orientation?"xaxis":"yaxis"]),f=1/0,c=-1/0,l=0,h=0,d=0;d<p.length;d++){var o=p[d],x=o.pts.map(y.extractVal),u=o.bandwidth=r(t,o,x),T=o.span=n(t,o,i,u);if(o.min===o.max&&0===u)T=o.span=[o.min,o.max],o.density=[{v:1,t:T[0]}],o.bandwidth=u,l=Math.max(l,1);else{var _=T[1]-T[0],w=Math.ceil(_/(u/3)),M=_/w;if(!isFinite(M)||!isFinite(w))return g.error("Something went wrong with computing the violin span"),p[0].t.empty=!0,p;var I=y.makeKDE(o,t,x);o.density=new Array(w);for(var S=0,R=T[0];R<T[1]+M/2;S++,R+=M){var O=I(R);o.density[S]={v:O,t:R},l=Math.max(l,O)}}h=Math.max(h,x.length),f=Math.min(f,T[0]),c=Math.max(c,T[1])}var C=m.findExtremes(i,[f,c],{padded:!0});if(t._extremes[i._id]=C,t.width)p[0].t.maxKDE=l;else{var D=s._violinScaleGroupStats,B=t.scalegroup,z=D[B];z?(z.maxKDE=Math.max(z.maxKDE,l),z.maxCount=Math.max(z.maxCount,h)):D[B]={maxKDE:l,maxCount:h}}return p[0].t.labels.kde=g._(a,"kde:"),p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(v,re,ne){"use strict";var g=v("../box/cross_trace_calc").setPositionOffset,m=["v","h"];re.exports=function(b,y){for(var e=b.calcdata,r=y.xaxis,n=y.yaxis,a=0;a<m.length;a++){for(var t=m[a],p="h"===t?n:r,s=[],i=0;i<e.length;i++){var f=e[i],l=f[0].trace;!0!==l.visible||"violin"!==l.type||f[0].t.empty||l.orientation!==t||l.xaxis!==r._id||l.yaxis!==n._id||s.push(i)}g("violin",b,s,p)}}},{"../box/cross_trace_calc":684}],1103:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../components/color"),b=v("../box/defaults"),y=v("./attributes");re.exports=function(e,r,n,a){function t(_,w){return g.coerce(e,r,y,_,w)}function p(_,w){return g.coerce2(e,r,y,_,w)}if(b.handleSampleDefaults(e,r,t,a),!1!==r.visible){t("bandwidth"),t("side"),t("width")||(t("scalegroup",r.name),t("scalemode"));var s,i=t("span");Array.isArray(i)&&(s="manual"),t("spanmode",s);var f=t("line.color",(e.marker||{}).color||n),c=t("line.width"),l=t("fillcolor",m.addOpacity(r.line.color,.5));b.handlePointsDefaults(e,r,t,{prefix:""});var h=p("box.width"),d=p("box.fillcolor",l),o=p("box.line.color",f),x=p("box.line.width",c);t("box.visible",Boolean(h||d||o||x))||(r.box={visible:!1});var u=p("meanline.color",f),T=p("meanline.width",c);t("meanline.visible",Boolean(u||T))||(r.meanline={visible:!1}),t("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(v,re,ne){"use strict";var g=v("../../lib"),m=function(b){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*b*b)};ne.makeKDE=function(b,y,e){var r=e.length,n=m,a=b.bandwidth,t=1/(r*a);return function(p){for(var s=0,i=0;i<r;i++)s+=n((p-e[i])/a);return t*s}},ne.getPositionOnKdePath=function(b,y,e){var r,n;"h"===y.orientation?(r="y",n="x"):(r="x",n="y");var a=g.findPointOnPath(b.path,e,n,{pathLength:b.pathLength}),t=b.posCenterPx,p=a[r];return[p,"both"===y.side?2*t-p:t]},ne.getKdeValue=function(b,y,e){var r=b.pts.map(ne.extractVal);return ne.makeKDE(b,y,r)(e)/b.posDensityScale},ne.extractVal=function(b){return b.v}},{"../../lib":515}],1105:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../../plots/cartesian/axes"),b=v("../box/hover"),y=v("./helpers");re.exports=function(e,r,n,a,t){t||(t={});var p,s,i=t.hoverLayer,f=e.cd,c=f[0].trace,l=c.hoveron,h=-1!==l.indexOf("violins"),d=-1!==l.indexOf("kde"),o=[];if(h||d){var x=b.hoverOnBoxes(e,r,n,a);if(d&&x.length>0){var u,T,_,w,M,I=e.xa,S=e.ya;"h"===c.orientation?(M=r,u="y",_=S,T="x",w=I):(M=n,u="x",_=I,T="y",w=S);var R=f[e.index];if(M>=R.span[0]&&M<=R.span[1]){var O=g.extendFlat({},e),C=w.c2p(M,!0),D=y.getKdeValue(R,c,M),B=y.getPositionOnKdePath(R,c,C),z=_._offset,Y=_._length;O[u+"0"]=B[0],O[u+"1"]=B[1],O[T+"0"]=O[T+"1"]=C,O[T+"Label"]=T+": "+m.hoverLabelText(w,M,c[T+"hoverformat"])+", "+f[0].t.labels.kde+" "+D.toFixed(3);for(var G=0,J=0;J<x.length;J++)if("med"===x[J].attr){G=J;break}O.spikeDistance=x[G].spikeDistance;var te=u+"Spike";O[te]=x[G][te],x[G].spikeDistance=void 0,x[G][te]=void 0,O.hovertemplate=!1,o.push(O),(s={stroke:e.color})[u+"1"]=g.constrain(z+B[0],z,z+Y),s[u+"2"]=g.constrain(z+B[1],z,z+Y),s[T+"1"]=s[T+"2"]=w._offset+C}}h&&(o=o.concat(x))}-1!==l.indexOf("points")&&(p=b.hoverOnPoints(e,r,n));var X=i.selectAll(".violinline-"+c.uid).data(s?[0]:[]);return X.enter().append("line").classed("violinline-"+c.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(s),"closest"===a?p?[p]:o:(p&&o.push(p),o)}},{"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults"),crossTraceDefaults:v("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style"),styleOnSelect:v("../scatter/style").styleOnSelect,hoverPoints:v("./hover"),selectPoints:v("../box/select"),moduleType:"trace",name:"violin",basePlotModule:v("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(v,re,ne){"use strict";var g=v("../box/layout_attributes"),m=v("../../lib").extendFlat;re.exports={violinmode:m({},g.boxmode,{}),violingap:m({},g.boxgap,{}),violingroupgap:m({},g.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes"),b=v("../box/layout_defaults");re.exports=function(y,e,r){b._supply(y,e,r,function(n,a){return g.coerce(y,e,m,n,a)},"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing"),y=v("../box/plot"),e=v("../scatter/line_points"),r=v("./helpers");re.exports=function(n,a,t,p){var s=n._fullLayout,i=a.xaxis,f=a.yaxis;function c(l){var h=e(l,{xaxis:i,yaxis:f,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return b.smoothopen(h[0],1)}m.makeTraceGroups(p,t,"trace violins").each(function(l){var h=g.select(this),d=l[0],o=d.t,x=d.trace;if(!0!==x.visible||o.empty)h.remove();else{var u=o.bPos,T=o.bdPos,_=a[o.valLetter+"axis"],w=a[o.posLetter+"axis"],M="both"===x.side,I=M||"positive"===x.side,S=M||"negative"===x.side,R=h.selectAll("path.violin").data(m.identity);R.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),R.exit().remove(),R.each(function(J){var te,X,K,ae,U,V,q,ie,H=g.select(this),ee=J.density,Q=ee.length,oe=w.c2l(J.pos+u,!0),le=w.l2p(oe);if(x.width)te=o.maxKDE/T;else{var de=s._violinScaleGroupStats[x.scalegroup];te="count"===x.scalemode?de.maxKDE/T*(de.maxCount/J.pts.length):de.maxKDE/T}if(I){for(q=new Array(Q),U=0;U<Q;U++)(ie=q[U]={})[o.posLetter]=oe+ee[U].v/te,ie[o.valLetter]=_.c2l(ee[U].t,!0);X=c(q)}if(S){for(q=new Array(Q),V=0,U=Q-1;V<Q;V++,U--)(ie=q[V]={})[o.posLetter]=oe-ee[U].v/te,ie[o.valLetter]=_.c2l(ee[U].t,!0);K=c(q)}if(M)ae=X+"L"+K.substr(1)+"Z";else{var fe=[le,_.c2p(ee[0].t)],be=[le,_.c2p(ee[Q-1].t)];"h"===x.orientation&&(fe.reverse(),be.reverse()),ae=I?"M"+fe+"L"+X.substr(1)+"L"+be:"M"+be+"L"+K.substr(1)+"L"+fe}H.attr("d",ae),J.posCenterPx=le,J.posDensityScale=te*T,J.path=H.node(),J.pathLength=J.path.getTotalLength()/(M?2:1)});var O,C,D,B=x.box,z=B.width,Y=(B.line||{}).width;M?(O=T*z,C=0):I?(O=[0,T*z/2],C=Y*{x:1,y:-1}[o.posLetter]):(O=[T*z/2,0],C=Y*{x:-1,y:1}[o.posLetter]),y.plotBoxAndWhiskers(h,{pos:w,val:_},x,{bPos:u,bdPos:O,bPosPxOffset:C}),y.plotBoxMean(h,{pos:w,val:_},x,{bPos:u,bdPos:O,bPosPxOffset:C}),!x.box.visible&&x.meanline.visible&&(D=m.identity);var G=h.selectAll("path.meanline").data(D||[]);G.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),G.exit().remove(),G.each(function(J){var te=_.c2p(J.mean,!0),X=r.getPositionOnKdePath(J,x,te);g.select(this).attr("d","h"===x.orientation?"M"+te+","+X[0]+"V"+X[1]:"M"+X[0]+","+te+"H"+X[1])}),y.plotPoints(h,{x:i,y:f},x,o)}})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/color"),b=v("../scatter/style").stylePoints;re.exports=function(y){var e=g.select(y).selectAll("g.trace.violins");e.style("opacity",function(r){return r[0].trace.opacity}),e.each(function(r){var n=r[0].trace,a=g.select(this),t=n.box||{},p=t.line||{},s=n.meanline||{},i=s.width;a.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(m.stroke,n.line.color).call(m.fill,n.fillcolor),a.selectAll("path.box").style("stroke-width",p.width+"px").call(m.stroke,p.color).call(m.fill,t.fillcolor);var f={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};a.selectAll("path.mean").style(f).call(m.stroke,s.color),a.selectAll("path.meanline").style(f).call(m.stroke,s.color),b(a,n,y)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(v,re,ne){"use strict";var g=v("../../components/colorscale/attributes"),m=v("../isosurface/attributes"),b=v("../surface/attributes"),y=v("../../plots/attributes"),e=v("../../lib/extend").extendFlat,r=v("../../plot_api/edit_types").overrideAll,n=re.exports=r(e({x:m.x,y:m.y,z:m.z,value:m.value,isomin:m.isomin,isomax:m.isomax,surface:m.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:m.slices,caps:m.caps,text:m.text,hovertext:m.hovertext,xhoverformat:m.xhoverformat,yhoverformat:m.yhoverformat,zhoverformat:m.zhoverformat,valuehoverformat:m.valuehoverformat,hovertemplate:m.hovertemplate},g("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m.colorbar,opacity:m.opacity,opacityscale:b.opacityscale,lightposition:m.lightposition,lighting:m.lighting,flatshading:m.flatshading,contour:m.contour,hoverinfo:e({},y.hoverinfo),showlegend:e({},y.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(v,re,ne){"use strict";var g=v("../../../stackgl_modules").gl_mesh3d,m=v("../../lib/gl_format_color").parseColorScale,b=v("../../lib/str2rgbarray"),y=v("../../components/colorscale").extractOpts,e=v("../../plots/gl3d/zip3"),r=v("../isosurface/convert").findNearestOnAxis,n=v("../isosurface/convert").generateIsoMeshes;function a(p,s,i){this.scene=p,this.uid=i,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var t=a.prototype;t.handlePick=function(p){if(p.object===this.mesh){var s=p.data.index,f=this.data._meshY[s],c=this.data._meshZ[s],l=this.data._Ys.length,h=this.data._Zs.length,d=r(this.data._meshX[s],this.data._Xs).id,o=r(f,this.data._Ys).id,x=r(c,this.data._Zs).id,u=p.index=x+h*o+h*l*d;p.traceCoordinate=[this.data._meshX[u],this.data._meshY[u],this.data._meshZ[u],this.data._value[u]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&void 0!==T[u]?p.textLabel=T[u]:T&&(p.textLabel=T),!0}},t.update=function(p){var s=this.scene,i=s.fullSceneLayout;function f(h,d,o,x){return d.map(function(u){return h.d2l(u,0,x)*o})}this.data=n(p);var c={positions:e(f(i.xaxis,p._meshX,s.dataScale[0],p.xcalendar),f(i.yaxis,p._meshY,s.dataScale[1],p.ycalendar),f(i.zaxis,p._meshZ,s.dataScale[2],p.zcalendar)),cells:e(p._meshI,p._meshJ,p._meshK),lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,opacityscale:p.opacityscale,contourEnable:p.contour.show,contourColor:b(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading},l=y(p);c.vertexIntensity=p._meshIntensity,c.vertexIntensityBounds=[l.min,l.max],c.colormap=m(p),this.mesh.update(c)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},re.exports=function(p,s){var f=g({gl:p.glplot.gl}),c=new a(p,f,s.uid);return f._trace=c,c.update(s),p.glplot.add(f),c}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./attributes"),b=v("../isosurface/defaults").supplyIsoDefaults,y=v("../surface/defaults").opacityscaleDefaults;re.exports=function(e,r,n,a){function t(p,s){return g.coerce(e,r,m,p,s)}b(e,r,n,a,t),y(e,r,a,t)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),supplyDefaults:v("./defaults"),calc:v("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:v("./convert"),moduleType:"trace",name:"volume",basePlotModule:v("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(v,re,ne){"use strict";var g=v("../bar/attributes"),m=v("../scatter/attributes").line,b=v("../../plots/attributes"),y=v("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=v("../../plots/template_attributes").hovertemplateAttrs,r=v("../../plots/template_attributes").texttemplateAttrs,n=v("./constants"),a=v("../../lib/extend").extendFlat,t=v("../../components/color");function p(s){return{marker:{color:a({},g.marker.color,{arrayOk:!1,editType:"style"}),line:{color:a({},g.marker.line.color,{arrayOk:!1,editType:"style"}),width:a({},g.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}re.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:g.x,x0:g.x0,dx:g.dx,y:g.y,y0:g.y0,dy:g.dy,xperiod:g.xperiod,yperiod:g.yperiod,xperiod0:g.xperiod0,yperiod0:g.yperiod0,xperiodalignment:g.xperiodalignment,yperiodalignment:g.yperiodalignment,xhoverformat:y("x"),yhoverformat:y("y"),hovertext:g.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:a({},b.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:r({editType:"plot"},{keys:n.eventDataKeys.concat(["label"])}),text:g.text,textposition:g.textposition,insidetextanchor:g.insidetextanchor,textangle:g.textangle,textfont:g.textfont,insidetextfont:g.insidetextfont,outsidetextfont:g.outsidetextfont,constraintext:g.constraintext,cliponaxis:g.cliponaxis,orientation:g.orientation,offset:g.offset,width:g.width,increasing:p(),decreasing:p(),totals:p(),connector:{line:{color:a({},m.color,{dflt:t.defaultLine}),width:a({},m.width,{editType:"plot"}),dash:m.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:g.offsetgroup,alignmentgroup:g.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes"),m=v("../../plots/cartesian/align_period"),b=v("../../lib").mergeArray,y=v("../scatter/calc_selection"),e=v("../../constants/numerical").BADNUM;function r(a){return"a"===a||"absolute"===a}function n(a){return"t"===a||"total"===a}re.exports=function(a,t){var p,s,i,f,c,l,h=g.getFromId(a,t.xaxis||"x"),d=g.getFromId(a,t.yaxis||"y");"h"===t.orientation?(p=h.makeCalcdata(t,"x"),i=d.makeCalcdata(t,"y"),f=m(t,d,"y",i),c=!!t.yperiodalignment,l="y"):(p=d.makeCalcdata(t,"y"),i=h.makeCalcdata(t,"x"),f=m(t,h,"x",i),c=!!t.xperiodalignment,l="x"),s=f.vals;for(var o,x=Math.min(s.length,p.length),u=new Array(x),T=0,_=!1,w=0;w<x;w++){var M=p[w]||0,I=!1;(p[w]!==e||n(t.measure[w])||r(t.measure[w]))&&w+1<x&&(p[w+1]!==e||n(t.measure[w+1])||r(t.measure[w+1]))&&(I=!0);var S=u[w]={i:w,p:s[w],s:M,rawS:M,cNext:I};r(t.measure[w])?(T=S.s,S.isSum=!0,S.dir="totals",S.s=T):n(t.measure[w])?(S.isSum=!0,S.dir="totals",S.s=T):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",S.s=T+(o=S.s),T+=o),"totals"===S.dir&&(_=!0),c&&(u[w].orig_p=i[w],u[w][l+"End"]=f.ends[w],u[w][l+"Start"]=f.starts[w]),t.ids&&(S.id=String(t.ids[w])),S.v=(t.base||0)+T}return u.length&&(u[0].hasTotals=_),b(t.text,u,"tx"),b(t.hovertext,u,"htx"),y(u,t),u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(v,re,ne){"use strict";re.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(v,re,ne){"use strict";var g=v("../bar/cross_trace_calc").setGroupPositions;re.exports=function(m,b){var y,e,r=m._fullLayout,n=m._fullData,a=m.calcdata,t=b.xaxis,p=b.yaxis,s=[],i=[],f=[];for(e=0;e<n.length;e++){var c=n[e];!0===c.visible&&c.xaxis===t._id&&c.yaxis===p._id&&"waterfall"===c.type&&(y=a[e],"h"===c.orientation?f.push(y):i.push(y),s.push(y))}var l={mode:r.waterfallmode,norm:r.waterfallnorm,gap:r.waterfallgap,groupgap:r.waterfallgroupgap};for(g(m,t,p,i,l),g(m,p,t,f,l),e=0;e<s.length;e++){y=s[e];for(var h=0;h<y.length;h++){var d=y[h];!1===d.isSum&&(d.s0+=0===h?0:y[h-1].s),h+1<y.length&&(y[h].nextP0=y[h+1].p0,y[h].nextS0=y[h+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("../bar/defaults").handleGroupingDefaults,b=v("../bar/defaults").handleText,y=v("../scatter/xy_defaults"),e=v("../scatter/period_defaults"),r=v("./attributes"),n=v("../../components/color"),a=v("../../constants/delta.js"),t=a.INCREASING.COLOR,p=a.DECREASING.COLOR;function s(i,f,c){i(f+".marker.color",c),i(f+".marker.line.color",n.defaultLine),i(f+".marker.line.width")}re.exports={supplyDefaults:function(i,f,c,l){function h(o,x){return g.coerce(i,f,r,o,x)}if(y(i,f,l,h)){e(i,f,l,h),h("xhoverformat"),h("yhoverformat"),h("measure"),h("orientation",f.x&&!f.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var d=h("textposition");b(i,f,l,h,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==f.textposition&&(h("texttemplate"),f.texttemplate||h("textinfo")),s(h,"increasing",t),s(h,"decreasing",p),s(h,"totals","#4499FF"),h("connector.visible")&&(h("connector.mode"),h("connector.line.width")&&(h("connector.line.color"),h("connector.line.dash")))}else f.visible=!1},crossTraceDefaults:function(i,f){var c,l;function h(o){return g.coerce(l._input,l,r,o)}if("group"===f.waterfallmode)for(var d=0;d<i.length;d++)c=(l=i[d])._input,m(c,l,f,h)}}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(v,re,ne){"use strict";re.exports=function(g,m){return g.x="xVal"in m?m.xVal:m.x,g.y="yVal"in m?m.yVal:m.y,"initial"in m&&(g.initial=m.initial),"delta"in m&&(g.delta=m.delta),"final"in m&&(g.final=m.final),m.xa&&(g.xaxis=m.xa),m.ya&&(g.yaxis=m.ya),g}},{}],1121:[function(v,re,ne){"use strict";var g=v("../../plots/cartesian/axes").hoverLabelText,m=v("../../components/color").opacity,b=v("../bar/hover").hoverOnBars,y=v("../../constants/delta.js"),e=y.INCREASING.SYMBOL,r=y.DECREASING.SYMBOL;re.exports=function(n,a,t,p,s){var C,D,B,z,i=b(n,a,t,p,s);if(i){var f=i.cd,c=f[0].trace,l="h"===c.orientation,h=l?"x":"y",d=l?n.xa:n.ya,o=f[i.index],x=o.isSum?o.b+o.s:o.rawS;if(!o.isSum){i.initial=o.b+o.s-x,i.delta=x,i.final=i.initial+i.delta;var u=S(Math.abs(i.delta));i.deltaLabel=x<0?"("+u+")":u,i.finalLabel=S(i.final),i.initialLabel=S(i.initial)}var T=o.hi||c.hoverinfo,_=[];if(T&&"none"!==T&&"skip"!==T){var w="all"===T,M=T.split("+"),I=function(R){return w||-1!==M.indexOf(R)};o.isSum||(!I("final")||I(l?"x":"y")||_.push(i.finalLabel),I("delta")&&_.push(x<0?i.deltaLabel+" "+r:i.deltaLabel+" "+e),I("initial")&&_.push("Initial: "+i.initialLabel))}return _.length&&(i.extraText=_.join("<br>")),i.color=(B=(C=c[o.dir].marker).line.color,z=C.line.width,m(D=C.color)?D:m(B)&&z?B:void 0),[i]}function S(R){return g(d,R,c[h+"hoverformat"])}}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(v,re,ne){"use strict";re.exports={attributes:v("./attributes"),layoutAttributes:v("./layout_attributes"),supplyDefaults:v("./defaults").supplyDefaults,crossTraceDefaults:v("./defaults").crossTraceDefaults,supplyLayoutDefaults:v("./layout_defaults"),calc:v("./calc"),crossTraceCalc:v("./cross_trace_calc"),plot:v("./plot"),style:v("./style").style,hoverPoints:v("./hover"),eventData:v("./event_data"),selectPoints:v("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:v("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(v,re,ne){"use strict";re.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(v,re,ne){"use strict";var g=v("../../lib"),m=v("./layout_attributes");re.exports=function(b,y,e){var r=!1;function n(p,s){return g.coerce(b,y,m,p,s)}for(var a=0;a<e.length;a++){var t=e[a];if(t.visible&&"waterfall"===t.type){r=!0;break}}r&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../lib"),b=v("../../components/drawing"),y=v("../../constants/numerical").BADNUM,e=v("../bar/plot"),r=v("../bar/uniform_text").clearMinTextSize;re.exports=function(n,a,t,p){var i,f,h,d,s=n._fullLayout;r("waterfall",s),e.plot(n,a,t,p,{mode:s.waterfallmode,norm:s.waterfallmode,gap:s.waterfallgap,groupgap:s.waterfallgroupgap}),i=n,h=(f=a).xaxis,d=f.yaxis,m.makeTraceGroups(p,t,"trace bars").each(function(o){var x=g.select(this),u=o[0].trace,T=m.ensureSingle(x,"g","lines");if(u.connector&&u.connector.visible){var _="h"===u.orientation,w=u.connector.mode,M=T.selectAll("g.line").data(m.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var I=M.size();M.each(function(S,R){if(R===I-1||S.cNext){var O=(Y=h,G=d,X=[],ae=(J=_)?G:Y,(te=[])[0]=(K=J?Y:G).c2p((z=S).s0,!0),X[0]=ae.c2p(z.p0,!0),te[1]=K.c2p(z.s1,!0),X[1]=ae.c2p(z.p1,!0),te[2]=K.c2p(z.nextS0,!0),X[2]=ae.c2p(z.nextP0,!0),J?[te,X]:[X,te]),C=O[0],D=O[1],B="";C[0]!==y&&D[0]!==y&&C[1]!==y&&D[1]!==y&&("spanning"===w&&!S.isSum&&R>0&&(B+=_?"M"+C[0]+","+D[1]+"V"+D[0]:"M"+C[1]+","+D[0]+"H"+C[0]),"between"!==w&&(S.isSum||R<I-1)&&(B+=_?"M"+C[1]+","+D[0]+"V"+D[1]:"M"+C[0]+","+D[1]+"H"+C[1]),C[2]!==y&&D[2]!==y&&(B+=_?"M"+C[1]+","+D[1]+"V"+D[2]:"M"+C[1]+","+D[1]+"H"+C[2])),""===B&&(B="M0,0Z"),m.ensureSingle(g.select(this),"path").attr("d",B).call(b.setClipUrl,f.layerClipId,i)}var z,Y,G,J,te,X,K,ae})}else T.remove()})}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(v,re,ne){"use strict";var g=v("@plotly/d3"),m=v("../../components/drawing"),b=v("../../components/color"),y=v("../../constants/interactions").DESELECTDIM,e=v("../bar/style"),r=v("../bar/uniform_text").resizeText,n=e.styleTextPoints;re.exports={style:function(a,t,p){var s=p||g.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");r(a,s,"waterfall"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var f=g.select(this),c=i[0].trace;f.selectAll(".point > path").each(function(l){if(!l.isBlank){var h=c[l.dir].marker;g.select(this).call(b.fill,h.color).call(b.stroke,h.line.color).call(m.dashLine,h.line.dash,h.line.width).style("opacity",c.selectedpoints&&!l.selected?y:1)}}),n(f,c,a),f.selectAll(".lines").each(function(){var l=c.connector.line;m.lineGroupStyle(g.select(this).selectAll("path"),l.width,l.color,l.dash)})})}}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(v,re,ne){"use strict";var g=v("../plots/cartesian/axes"),m=v("../lib"),b=v("../plot_api/plot_schema"),y=v("./helpers").pointsAccessorFunction,e=v("../constants/numerical").BADNUM;ne.moduleType="transform",ne.name="aggregate";var r=ne.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=r.aggregations;function a(i,f,c,l){if(l.enabled){for(var h=l.target,d=m.nestedProperty(f,h),o=d.get(),x=function(_,w){var I=w.d2c,S=w.c2d;switch(_.func){case"count":return t;case"first":return p;case"last":return s;case"sum":return function(R,O){for(var C=0,D=0;D<O.length;D++){var B=I(R[O[D]]);B!==e&&(C+=B)}return S(C)};case"avg":return function(R,O){for(var C=0,D=0,B=0;B<O.length;B++){var z=I(R[O[B]]);z!==e&&(C+=z,D++)}return D?S(C/D):e};case"min":return function(R,O){for(var C=1/0,D=0;D<O.length;D++){var B=I(R[O[D]]);B!==e&&(C=Math.min(C,B))}return C===1/0?e:S(C)};case"max":return function(R,O){for(var C=-1/0,D=0;D<O.length;D++){var B=I(R[O[D]]);B!==e&&(C=Math.max(C,B))}return C===-1/0?e:S(C)};case"range":return function(R,O){for(var C=1/0,D=-1/0,B=0;B<O.length;B++){var z=I(R[O[B]]);z!==e&&(C=Math.min(C,z),D=Math.max(D,z))}return D===-1/0||C===1/0?e:S(D-C)};case"change":return function(R,O){var C=I(R[O[0]]),D=I(R[O[O.length-1]]);return C===e||D===e?e:S(D-C)};case"median":return function(R,O){for(var C=[],D=0;D<O.length;D++){var B=I(R[O[D]]);B!==e&&C.push(B)}if(!C.length)return e;C.sort(m.sorterAsc);var z=(C.length-1)/2;return S((C[Math.floor(z)]+C[Math.ceil(z)])/2)};case"mode":return function(R,O){for(var C={},D=0,B=e,z=0;z<O.length;z++){var Y=I(R[O[z]]);if(Y!==e){var G=C[Y]=(C[Y]||0)+1;G>D&&(D=G,B=Y)}}return D?S(B):e};case"rms":return function(R,O){for(var C=0,D=0,B=0;B<O.length;B++){var z=I(R[O[B]]);z!==e&&(C+=z*z,D++)}return D?S(Math.sqrt(C/D)):e};case"stddev":return function(R,O){var C,D=0,B=0,z=1,Y=e;for(C=0;C<O.length&&Y===e;C++)Y=I(R[O[C]]);if(Y===e)return e;for(;C<O.length;C++){var G=I(R[O[C]]);if(G!==e){var J=G-Y;D+=J,B+=J*J,z++}}var te="sample"===_.funcmode?z-1:z;return te?Math.sqrt((B-D*D/z)/te):0}}}(l,g.getDataConversions(i,f,h,o)),u=new Array(c.length),T=0;T<c.length;T++)u[T]=x(o,c[T]);d.set(u),"count"===l.func&&m.pushUnique(f._arrayAttrs,h)}}function t(i,f){return f.length}function p(i,f){return i[f[0]]}function s(i,f){return i[f[f.length-1]]}ne.supplyDefaults=function(i,f){var c,l={};function h(S,R){return m.coerce(i,l,r,S,R)}if(!h("enabled"))return l;var d=b.findArrayAttributes(f),o={};for(c=0;c<d.length;c++)o[d[c]]=1;var x=h("groups");if(!Array.isArray(x)){if(!o[x])return l.enabled=!1,l;o[x]=0}var u,T=i.aggregations||[],_=l.aggregations=new Array(T.length);function w(S,R){return m.coerce(T[c],u,n,S,R)}for(c=0;c<T.length;c++){u={_index:c};var M=w("target"),I=w("func");w("enabled")&&M&&(o[M]||"count"===I&&void 0===o[M])?("stddev"===I&&w("funcmode"),o[M]=0,_[c]=u):_[c]={enabled:!1,_index:c}}for(c=0;c<d.length;c++)o[d[c]]&&_.push({target:d[c],func:n.func.dflt,enabled:!0,_index:-1});return l},ne.calcTransform=function(i,f,c){if(c.enabled){var l=c.groups,h=m.getTargetArray(f,{target:l});if(h){var d,o,x,T={},_={},w=[],M=y(f.transforms,c),I=h.length;for(f._length&&(I=Math.min(I,f._length)),d=0;d<I;d++)void 0===(x=T[o=h[d]])?(T[o]=w.length,w.push([d]),_[T[o]]=M(d)):(w[x].push(d),_[T[o]]=(_[T[o]]||[]).concat(M(d)));c._indexToPoints=_;var S=c.aggregations;for(d=0;d<S.length;d++)a(i,f,w,S[d]);"string"==typeof l&&a(i,f,w,{target:l,func:"first",enabled:!0}),f._length=w.length}}}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../registry"),b=v("../plots/cartesian/axes"),y=v("./helpers").pointsAccessorFunction,e=v("../constants/filter_ops"),r=e.COMPARISON_OPS,n=e.INTERVAL_OPS,a=e.SET_OPS;ne.moduleType="transform",ne.name="filter",ne.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(r).concat(n).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ne.supplyDefaults=function(t){var p={};function s(c,l){return g.coerce(t,p,ne.attributes,c,l)}if(s("enabled")){var i=s("target");if(g.isArrayOrTypedArray(i)&&0===i.length)return p.enabled=!1,p;s("preservegaps"),s("operation"),s("value");var f=m.getComponentMethod("calendars","handleDefaults");f(t,p,"valuecalendar",null),f(t,p,"targetcalendar",null)}return p},ne.calcTransform=function(t,p,s){if(s.enabled){var i=g.getTargetArray(p,s);if(i){var f=s.target,c=i.length;p._length&&(c=Math.min(c,p._length));var l=s.targetcalendar,h=p._arrayAttrs,d=s.preservegaps;if("string"==typeof f){var o=g.nestedProperty(p,f+"calendar").get();o&&(l=o)}var x,u,T=function(O,C,D){var B=O.operation,z=O.value,Y=Array.isArray(z);function G(K){return-1!==K.indexOf(B)}var J,te=function(K){return C(K,0,O.valuecalendar)},X=function(K){return C(K,0,D)};switch(G(r)?J=te(Y?z[0]:z):G(n)?J=Y?[te(z[0]),te(z[1])]:[te(z),te(z)]:G(a)&&(J=Y?z.map(te):[te(z)]),B){case"=":return function(K){return X(K)===J};case"!=":return function(K){return X(K)!==J};case"<":return function(K){return X(K)<J};case"<=":return function(K){return X(K)<=J};case">":return function(K){return X(K)>J};case">=":return function(K){return X(K)>=J};case"[]":return function(K){var ae=X(K);return ae>=J[0]&&ae<=J[1]};case"()":return function(K){var ae=X(K);return ae>J[0]&&ae<J[1]};case"[)":return function(K){var ae=X(K);return ae>=J[0]&&ae<J[1]};case"(]":return function(K){var ae=X(K);return ae>J[0]&&ae<=J[1]};case"][":return function(K){var ae=X(K);return ae<=J[0]||ae>=J[1]};case")(":return function(K){var ae=X(K);return ae<J[0]||ae>J[1]};case"](":return function(K){var ae=X(K);return ae<=J[0]||ae>J[1]};case")[":return function(K){var ae=X(K);return ae<J[0]||ae>=J[1]};case"{}":return function(K){return-1!==J.indexOf(X(K))};case"}{":return function(K){return-1===J.indexOf(X(K))}}}(s,b.getDataToCoordFunc(t,p,f,i),l),_={},w={},M=0;d?(x=function(O){_[O.astr]=g.extendDeep([],O.get()),O.set(new Array(c))},u=function(O,C){var D=_[O.astr][C];O.get()[C]=D}):(x=function(O){_[O.astr]=g.extendDeep([],O.get()),O.set([])},u=function(O,C){var D=_[O.astr][C];O.get().push(D)}),R(x);for(var I=y(p.transforms,s),S=0;S<c;S++)T(i[S])?(R(u,S),w[M++]=I(S)):d&&M++;s._indexToPoints=w,p._length=M}}function R(O,C){for(var D=0;D<h.length;D++)O(g.nestedProperty(p,h[D]),C)}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plot_api/plot_schema"),b=v("../plots/plots"),y=v("./helpers").pointsAccessorFunction;function e(r,n){var a,t,p,s,i,f,c,l,h,d,o=n.transform,x=n.transformIndex,u=r.transforms[x].groups,T=y(r.transforms,o);if(!g.isArrayOrTypedArray(u)||0===u.length)return[r];var _=g.filterUnique(u),w=new Array(_.length),M=u.length,I=m.findArrayAttributes(r),S=o.styles||[],R={};for(a=0;a<S.length;a++)R[S[a].target]=S[a].value;o.styles&&(d=g.keyedContainer(o,"styles","target","value.name"));var O={},C={};for(a=0;a<_.length;a++){O[f=_[a]]=a,C[f]=0,(c=w[a]=g.extendDeepNoArrays({},r))._group=f,c.transforms[x]._indexToPoints={};var D=null;for(d&&(D=d.get(f)),c.name=D||""===D?D:g.templateString(o.nameformat,{trace:r.name,group:f}),l=c.transforms,c.transforms=[],t=0;t<l.length;t++)c.transforms[t]=g.extendDeepNoArrays({},l[t]);for(t=0;t<I.length;t++)g.nestedProperty(c,I[t]).set([])}for(p=0;p<I.length;p++){for(s=I[p],t=0,h=[];t<_.length;t++)h[t]=g.nestedProperty(w[t],s).get();for(i=g.nestedProperty(r,s).get(),t=0;t<M;t++)h[O[u[t]]].push(i[t])}for(t=0;t<M;t++)(c=w[O[u[t]]]).transforms[x]._indexToPoints[C[u[t]]]=T(t),C[u[t]]++;for(a=0;a<_.length;a++)f=_[a],b.clearExpandedTraceDefaultColors(c=w[a]),c=g.extendDeepNoArrays(c,R[f]||{});return w}ne.moduleType="transform",ne.name="groupby",ne.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ne.supplyDefaults=function(r,n,a){var t,p={};function s(h,d){return g.coerce(r,p,ne.attributes,h,d)}if(!s("enabled"))return p;s("groups"),s("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var i=r.styles,f=p.styles=[];if(i)for(t=0;t<i.length;t++){var c=f[t]={};g.coerce(i[t],f[t],ne.attributes.styles,"target");var l=g.coerce(i[t],f[t],ne.attributes.styles,"value");g.isPlainObject(l)?c.value=g.extendDeep({},l):l&&delete c.value}return p},ne.transform=function(r,n){var a,t,p,s=[];for(t=0;t<r.length;t++)for(a=e(r[t],n),p=0;p<a.length;p++)s.push(a[p]);return s}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(v,re,ne){"use strict";ne.pointsAccessorFunction=function(g,m){for(var b,y,e=0;e<g.length&&(b=g[e])!==m;e++)b._indexToPoints&&!1!==b.enabled&&(y=b._indexToPoints);return y?function(r){return y[r]}:function(r){return[r]}}},{}],1131:[function(v,re,ne){"use strict";var g=v("../lib"),m=v("../plots/cartesian/axes"),b=v("./helpers").pointsAccessorFunction,y=v("../constants/numerical").BADNUM;ne.moduleType="transform",ne.name="sort",ne.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ne.supplyDefaults=function(e){var r={};function n(a,t){return g.coerce(e,r,ne.attributes,a,t)}return n("enabled")&&(n("target"),n("order")),r},ne.calcTransform=function(e,r,n){if(n.enabled){var a=g.getTargetArray(r,n);if(a){var t=n.target,p=a.length;r._length&&(p=Math.min(p,r._length));var s,i,f=r._arrayAttrs,c=function(u,T,_,w){var M,I=new Array(w),S=new Array(w);for(M=0;M<w;M++)I[M]={v:T[M],i:M};for(I.sort(function(R,O){switch(R.order){case"ascending":return function(C,D){var B=O(C.v),z=O(D.v);return B===y?1:z===y?-1:B-z};case"descending":return function(C,D){var B=O(C.v),z=O(D.v);return B===y?1:z===y?-1:z-B}}}(u,_)),M=0;M<w;M++)S[M]=I[M].i;return S}(n,a,m.getDataToCoordFunc(e,r,t,a),p),l=b(r.transforms,n),h={};for(s=0;s<f.length;s++){var d=g.nestedProperty(r,f[s]),o=d.get(),x=new Array(p);for(i=0;i<p;i++)x[i]=o[c[i]];d.set(x)}for(i=0;i<p;i++)h[i]=l(c[i]);n._indexToPoints=h,r._length=p}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(v,re,ne){"use strict";ne.version="2.14.0"},{}],1133:[function(v,re,ne){(function(g){(function(){!function(m){"object"==typeof ne&&void 0!==re?re.exports=m():(typeof window<"u"?window:void 0!==g?g:typeof self<"u"?self:this).stackgl=m()}(function(){return function m(b,y,e){function r(t,p){if(!y[t]){if(!b[t]){var s="function"==typeof v&&v;if(!p&&s)return s(t,!0);if(n)return n(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var f=y[t]={exports:{}};b[t][0].call(f.exports,function(c){return r(b[t][1][c]||c)},f,f.exports,m,b,y,e)}return y[t].exports}for(var n="function"==typeof v&&v,a=0;a<e.length;a++)r(e[a]);return r}({1:[function(m,b,y){"use strict";y.byteLength=function(f){var c=s(f),h=c[1];return 3*(c[0]+h)/4-h},y.toByteArray=function(f){var c,l,M,h=s(f),d=h[0],o=h[1],x=new n(3*(d+(M=o))/4-M),u=0,T=o>0?d-4:d;for(l=0;l<T;l+=4)c=r[f.charCodeAt(l)]<<18|r[f.charCodeAt(l+1)]<<12|r[f.charCodeAt(l+2)]<<6|r[f.charCodeAt(l+3)],x[u++]=c>>16&255,x[u++]=c>>8&255,x[u++]=255&c;return 2===o&&(c=r[f.charCodeAt(l)]<<2|r[f.charCodeAt(l+1)]>>4,x[u++]=255&c),1===o&&(c=r[f.charCodeAt(l)]<<10|r[f.charCodeAt(l+1)]<<4|r[f.charCodeAt(l+2)]>>2,x[u++]=c>>8&255,x[u++]=255&c),x},y.fromByteArray=function(f){for(var c,l=f.length,h=l%3,d=[],o=0,x=l-h;o<x;o+=16383)d.push(i(f,o,o+16383>x?x:o+16383));return 1===h?d.push(e[(c=f[l-1])>>2]+e[c<<4&63]+"=="):2===h&&d.push(e[(c=(f[l-2]<<8)+f[l-1])>>10]+e[c>>4&63]+e[c<<2&63]+"="),d.join("")};for(var e=[],r=[],n=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,p=a.length;t<p;++t)e[t]=a[t],r[a.charCodeAt(t)]=t;function s(f){var c=f.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=f.indexOf("=");return-1===l&&(l=c),[l,l===c?0:4-l%4]}function i(f,c,l){for(var d,o=[],x=c;x<l;x+=3)o.push(e[(d=(f[x]<<16&16711680)+(f[x+1]<<8&65280)+(255&f[x+2]))>>18&63]+e[d>>12&63]+e[d>>6&63]+e[63&d]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},{}],2:[function(m,b,y){},{}],3:[function(m,b,y){(function(e){(function(){"use strict";var r=m("base64-js"),n=m("ieee754");function a(H){if(H>2147483647)throw new RangeError('The value "'+H+'" is invalid for option "size"');var ee=new Uint8Array(H);return ee.__proto__=t.prototype,ee}function t(H,ee,Q){if("number"==typeof H){if("string"==typeof ee)throw new TypeError('The "string" argument must be of type string. Received type number');return i(H)}return p(H,ee,Q)}function p(H,ee,Q){if("string"==typeof H)return function(de,fe){if("string"==typeof fe&&""!==fe||(fe="utf8"),!t.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);var be=0|l(de,fe),he=a(be),_e=he.write(de,fe);return _e!==be&&(he=he.slice(0,_e)),he}(H,ee);if(ArrayBuffer.isView(H))return f(H);if(null==H)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(q(H,ArrayBuffer)||H&&q(H.buffer,ArrayBuffer))return function(de,fe,be){if(fe<0||de.byteLength<fe)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<fe+(be||0))throw new RangeError('"length" is outside of buffer bounds');var he;return(he=void 0===fe&&void 0===be?new Uint8Array(de):void 0===be?new Uint8Array(de,fe):new Uint8Array(de,fe,be)).__proto__=t.prototype,he}(H,ee,Q);if("number"==typeof H)throw new TypeError('The "value" argument must not be of type number. Received type number');var oe=H.valueOf&&H.valueOf();if(null!=oe&&oe!==H)return t.from(oe,ee,Q);var le=function(de){if(t.isBuffer(de)){var fe=0|c(de.length),be=a(fe);return 0===be.length||de.copy(be,0,0,fe),be}return void 0!==de.length?"number"!=typeof de.length||ie(de.length)?a(0):f(de):"Buffer"===de.type&&Array.isArray(de.data)?f(de.data):void 0}(H);if(le)return le;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof H[Symbol.toPrimitive])return t.from(H[Symbol.toPrimitive]("string"),ee,Q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}function s(H){if("number"!=typeof H)throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function i(H){return s(H),a(H<0?0:0|c(H))}function f(H){for(var ee=H.length<0?0:0|c(H.length),Q=a(ee),oe=0;oe<ee;oe+=1)Q[oe]=255&H[oe];return Q}function c(H){if(H>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|H}function l(H,ee){if(t.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||q(H,ArrayBuffer))return H.byteLength;if("string"!=typeof H)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var Q=H.length,oe=arguments.length>2&&!0===arguments[2];if(!oe&&0===Q)return 0;for(var le=!1;;)switch(ee){case"ascii":case"latin1":case"binary":return Q;case"utf8":case"utf-8":return ae(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Q;case"hex":return Q>>>1;case"base64":return U(H).length;default:if(le)return oe?-1:ae(H).length;ee=(""+ee).toLowerCase(),le=!0}}function h(H,ee,Q){var oe=!1;if((void 0===ee||ee<0)&&(ee=0),ee>this.length||((void 0===Q||Q>this.length)&&(Q=this.length),Q<=0)||(Q>>>=0)<=(ee>>>=0))return"";for(H||(H="utf8");;)switch(H){case"hex":return D(this,ee,Q);case"utf8":case"utf-8":return R(this,ee,Q);case"ascii":return O(this,ee,Q);case"latin1":case"binary":return C(this,ee,Q);case"base64":return S(this,ee,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ee,Q);default:if(oe)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),oe=!0}}function d(H,ee,Q){var oe=H[ee];H[ee]=H[Q],H[Q]=oe}function o(H,ee,Q,oe,le){if(0===H.length)return-1;if("string"==typeof Q?(oe=Q,Q=0):Q>2147483647?Q=2147483647:Q<-2147483648&&(Q=-2147483648),ie(Q=+Q)&&(Q=le?0:H.length-1),Q<0&&(Q=H.length+Q),Q>=H.length){if(le)return-1;Q=H.length-1}else if(Q<0){if(!le)return-1;Q=0}if("string"==typeof ee&&(ee=t.from(ee,oe)),t.isBuffer(ee))return 0===ee.length?-1:x(H,ee,Q,oe,le);if("number"==typeof ee)return ee&=255,"function"==typeof Uint8Array.prototype.indexOf?le?Uint8Array.prototype.indexOf.call(H,ee,Q):Uint8Array.prototype.lastIndexOf.call(H,ee,Q):x(H,[ee],Q,oe,le);throw new TypeError("val must be string, number or Buffer")}function x(H,ee,Q,oe,le){var de,fe=1,be=H.length,he=ee.length;if(void 0!==oe&&("ucs2"===(oe=String(oe).toLowerCase())||"ucs-2"===oe||"utf16le"===oe||"utf-16le"===oe)){if(H.length<2||ee.length<2)return-1;fe=2,be/=2,he/=2,Q/=2}function _e(ze,ve){return 1===fe?ze[ve]:ze.readUInt16BE(ve*fe)}if(le){var Ce=-1;for(de=Q;de<be;de++)if(_e(H,de)===_e(ee,-1===Ce?0:de-Ce)){if(-1===Ce&&(Ce=de),de-Ce+1===he)return Ce*fe}else-1!==Ce&&(de-=de-Ce),Ce=-1}else for(Q+he>be&&(Q=be-he),de=Q;de>=0;de--){for(var Ee=!0,Ae=0;Ae<he;Ae++)if(_e(H,de+Ae)!==_e(ee,Ae)){Ee=!1;break}if(Ee)return de}return-1}function u(H,ee,Q,oe){Q=Number(Q)||0;var le=H.length-Q;oe?(oe=Number(oe))>le&&(oe=le):oe=le;var de=ee.length;oe>de/2&&(oe=de/2);for(var fe=0;fe<oe;++fe){var be=parseInt(ee.substr(2*fe,2),16);if(ie(be))return fe;H[Q+fe]=be}return fe}function T(H,ee,Q,oe){return V(ae(ee,H.length-Q),H,Q,oe)}function _(H,ee,Q,oe){return V(function(le){for(var de=[],fe=0;fe<le.length;++fe)de.push(255&le.charCodeAt(fe));return de}(ee),H,Q,oe)}function w(H,ee,Q,oe){return _(H,ee,Q,oe)}function M(H,ee,Q,oe){return V(U(ee),H,Q,oe)}function I(H,ee,Q,oe){return V(function(le,de){for(var fe,be,_e=[],Ce=0;Ce<le.length&&!((de-=2)<0);++Ce)be=(fe=le.charCodeAt(Ce))>>8,_e.push(fe%256),_e.push(be);return _e}(ee,H.length-Q),H,Q,oe)}function S(H,ee,Q){return r.fromByteArray(0===ee&&Q===H.length?H:H.slice(ee,Q))}function R(H,ee,Q){Q=Math.min(H.length,Q);for(var oe=[],le=ee;le<Q;){var de,fe,be,he,_e=H[le],Ce=null,Ee=_e>239?4:_e>223?3:_e>191?2:1;if(le+Ee<=Q)switch(Ee){case 1:_e<128&&(Ce=_e);break;case 2:128==(192&(de=H[le+1]))&&(he=(31&_e)<<6|63&de)>127&&(Ce=he);break;case 3:fe=H[le+2],128==(192&(de=H[le+1]))&&128==(192&fe)&&(he=(15&_e)<<12|(63&de)<<6|63&fe)>2047&&(he<55296||he>57343)&&(Ce=he);break;case 4:fe=H[le+2],be=H[le+3],128==(192&(de=H[le+1]))&&128==(192&fe)&&128==(192&be)&&(he=(15&_e)<<18|(63&de)<<12|(63&fe)<<6|63&be)>65535&&he<1114112&&(Ce=he)}null===Ce?(Ce=65533,Ee=1):Ce>65535&&(oe.push((Ce-=65536)>>>10&1023|55296),Ce=56320|1023&Ce),oe.push(Ce),le+=Ee}return function(Ae){var ze=Ae.length;if(ze<=4096)return String.fromCharCode.apply(String,Ae);for(var ve="",Te=0;Te<ze;)ve+=String.fromCharCode.apply(String,Ae.slice(Te,Te+=4096));return ve}(oe)}function O(H,ee,Q){var oe="";Q=Math.min(H.length,Q);for(var le=ee;le<Q;++le)oe+=String.fromCharCode(127&H[le]);return oe}function C(H,ee,Q){var oe="";Q=Math.min(H.length,Q);for(var le=ee;le<Q;++le)oe+=String.fromCharCode(H[le]);return oe}function D(H,ee,Q){var oe=H.length;(!ee||ee<0)&&(ee=0),(!Q||Q<0||Q>oe)&&(Q=oe);for(var le="",de=ee;de<Q;++de)le+=K(H[de]);return le}function B(H,ee,Q){for(var oe=H.slice(ee,Q),le="",de=0;de<oe.length;de+=2)le+=String.fromCharCode(oe[de]+256*oe[de+1]);return le}function z(H,ee,Q){if(H%1!=0||H<0)throw new RangeError("offset is not uint");if(H+ee>Q)throw new RangeError("Trying to access beyond buffer length")}function Y(H,ee,Q,oe,le,de){if(!t.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(ee>le||ee<de)throw new RangeError('"value" argument is out of bounds');if(Q+oe>H.length)throw new RangeError("Index out of range")}function G(H,ee,Q,oe,le,de){if(Q+oe>H.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("Index out of range")}function J(H,ee,Q,oe,le){return ee=+ee,Q>>>=0,le||G(H,0,Q,4),n.write(H,ee,Q,oe,23,4),Q+4}function te(H,ee,Q,oe,le){return ee=+ee,Q>>>=0,le||G(H,0,Q,8),n.write(H,ee,Q,oe,52,8),Q+8}y.Buffer=t,y.SlowBuffer=function(H){return+H!=H&&(H=0),t.alloc(+H)},y.INSPECT_MAX_BYTES=50,y.kMaxLength=2147483647,(t.TYPED_ARRAY_SUPPORT=function(){try{var H=new Uint8Array(1);return H.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===H.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(H,ee,Q){return p(H,ee,Q)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(H,ee,Q){return le=ee,de=Q,s(oe=H),oe<=0?a(oe):void 0!==le?"string"==typeof de?a(oe).fill(le,de):a(oe).fill(le):a(oe);var oe,le,de},t.allocUnsafe=function(H){return i(H)},t.allocUnsafeSlow=function(H){return i(H)},t.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==t.prototype},t.compare=function(H,ee){if(q(H,Uint8Array)&&(H=t.from(H,H.offset,H.byteLength)),q(ee,Uint8Array)&&(ee=t.from(ee,ee.offset,ee.byteLength)),!t.isBuffer(H)||!t.isBuffer(ee))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===ee)return 0;for(var Q=H.length,oe=ee.length,le=0,de=Math.min(Q,oe);le<de;++le)if(H[le]!==ee[le]){Q=H[le],oe=ee[le];break}return Q<oe?-1:oe<Q?1:0},t.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(H,ee){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return t.alloc(0);var Q;if(void 0===ee)for(ee=0,Q=0;Q<H.length;++Q)ee+=H[Q].length;var oe=t.allocUnsafe(ee),le=0;for(Q=0;Q<H.length;++Q){var de=H[Q];if(q(de,Uint8Array)&&(de=t.from(de)),!t.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(oe,le),le+=de.length}return oe},t.byteLength=l,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var H=this.length;if(H%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ee=0;ee<H;ee+=2)d(this,ee,ee+1);return this},t.prototype.swap32=function(){var H=this.length;if(H%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ee=0;ee<H;ee+=4)d(this,ee,ee+3),d(this,ee+1,ee+2);return this},t.prototype.swap64=function(){var H=this.length;if(H%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ee=0;ee<H;ee+=8)d(this,ee,ee+7),d(this,ee+1,ee+6),d(this,ee+2,ee+5),d(this,ee+3,ee+4);return this},t.prototype.toLocaleString=t.prototype.toString=function(){var H=this.length;return 0===H?"":0===arguments.length?R(this,0,H):h.apply(this,arguments)},t.prototype.equals=function(H){if(!t.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H||0===t.compare(this,H)},t.prototype.inspect=function(){var H="",ee=y.INSPECT_MAX_BYTES;return H=this.toString("hex",0,ee).replace(/(.{2})/g,"$1 ").trim(),this.length>ee&&(H+=" ... "),"<Buffer "+H+">"},t.prototype.compare=function(H,ee,Q,oe,le){if(q(H,Uint8Array)&&(H=t.from(H,H.offset,H.byteLength)),!t.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(void 0===ee&&(ee=0),void 0===Q&&(Q=H?H.length:0),void 0===oe&&(oe=0),void 0===le&&(le=this.length),ee<0||Q>H.length||oe<0||le>this.length)throw new RangeError("out of range index");if(oe>=le&&ee>=Q)return 0;if(oe>=le)return-1;if(ee>=Q)return 1;if(this===H)return 0;for(var de=(le>>>=0)-(oe>>>=0),fe=(Q>>>=0)-(ee>>>=0),be=Math.min(de,fe),he=this.slice(oe,le),_e=H.slice(ee,Q),Ce=0;Ce<be;++Ce)if(he[Ce]!==_e[Ce]){de=he[Ce],fe=_e[Ce];break}return de<fe?-1:fe<de?1:0},t.prototype.includes=function(H,ee,Q){return-1!==this.indexOf(H,ee,Q)},t.prototype.indexOf=function(H,ee,Q){return o(this,H,ee,Q,!0)},t.prototype.lastIndexOf=function(H,ee,Q){return o(this,H,ee,Q,!1)},t.prototype.write=function(H,ee,Q,oe){if(void 0===ee)oe="utf8",Q=this.length,ee=0;else if(void 0===Q&&"string"==typeof ee)oe=ee,Q=this.length,ee=0;else{if(!isFinite(ee))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ee>>>=0,isFinite(Q)?(Q>>>=0,void 0===oe&&(oe="utf8")):(oe=Q,Q=void 0)}var le=this.length-ee;if((void 0===Q||Q>le)&&(Q=le),H.length>0&&(Q<0||ee<0)||ee>this.length)throw new RangeError("Attempt to write outside buffer bounds");oe||(oe="utf8");for(var de=!1;;)switch(oe){case"hex":return u(this,H,ee,Q);case"utf8":case"utf-8":return T(this,H,ee,Q);case"ascii":return _(this,H,ee,Q);case"latin1":case"binary":return w(this,H,ee,Q);case"base64":return M(this,H,ee,Q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,H,ee,Q);default:if(de)throw new TypeError("Unknown encoding: "+oe);oe=(""+oe).toLowerCase(),de=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(H,ee){var Q=this.length;(H=~~H)<0?(H+=Q)<0&&(H=0):H>Q&&(H=Q),(ee=void 0===ee?Q:~~ee)<0?(ee+=Q)<0&&(ee=0):ee>Q&&(ee=Q),ee<H&&(ee=H);var oe=this.subarray(H,ee);return oe.__proto__=t.prototype,oe},t.prototype.readUIntLE=function(H,ee,Q){H>>>=0,ee>>>=0,Q||z(H,ee,this.length);for(var oe=this[H],le=1,de=0;++de<ee&&(le*=256);)oe+=this[H+de]*le;return oe},t.prototype.readUIntBE=function(H,ee,Q){H>>>=0,ee>>>=0,Q||z(H,ee,this.length);for(var oe=this[H+--ee],le=1;ee>0&&(le*=256);)oe+=this[H+--ee]*le;return oe},t.prototype.readUInt8=function(H,ee){return H>>>=0,ee||z(H,1,this.length),this[H]},t.prototype.readUInt16LE=function(H,ee){return H>>>=0,ee||z(H,2,this.length),this[H]|this[H+1]<<8},t.prototype.readUInt16BE=function(H,ee){return H>>>=0,ee||z(H,2,this.length),this[H]<<8|this[H+1]},t.prototype.readUInt32LE=function(H,ee){return H>>>=0,ee||z(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]},t.prototype.readUInt32BE=function(H,ee){return H>>>=0,ee||z(H,4,this.length),16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])},t.prototype.readIntLE=function(H,ee,Q){H>>>=0,ee>>>=0,Q||z(H,ee,this.length);for(var oe=this[H],le=1,de=0;++de<ee&&(le*=256);)oe+=this[H+de]*le;return oe>=(le*=128)&&(oe-=Math.pow(2,8*ee)),oe},t.prototype.readIntBE=function(H,ee,Q){H>>>=0,ee>>>=0,Q||z(H,ee,this.length);for(var oe=ee,le=1,de=this[H+--oe];oe>0&&(le*=256);)de+=this[H+--oe]*le;return de>=(le*=128)&&(de-=Math.pow(2,8*ee)),de},t.prototype.readInt8=function(H,ee){return H>>>=0,ee||z(H,1,this.length),128&this[H]?-1*(255-this[H]+1):this[H]},t.prototype.readInt16LE=function(H,ee){H>>>=0,ee||z(H,2,this.length);var Q=this[H]|this[H+1]<<8;return 32768&Q?4294901760|Q:Q},t.prototype.readInt16BE=function(H,ee){H>>>=0,ee||z(H,2,this.length);var Q=this[H+1]|this[H]<<8;return 32768&Q?4294901760|Q:Q},t.prototype.readInt32LE=function(H,ee){return H>>>=0,ee||z(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},t.prototype.readInt32BE=function(H,ee){return H>>>=0,ee||z(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},t.prototype.readFloatLE=function(H,ee){return H>>>=0,ee||z(H,4,this.length),n.read(this,H,!0,23,4)},t.prototype.readFloatBE=function(H,ee){return H>>>=0,ee||z(H,4,this.length),n.read(this,H,!1,23,4)},t.prototype.readDoubleLE=function(H,ee){return H>>>=0,ee||z(H,8,this.length),n.read(this,H,!0,52,8)},t.prototype.readDoubleBE=function(H,ee){return H>>>=0,ee||z(H,8,this.length),n.read(this,H,!1,52,8)},t.prototype.writeUIntLE=function(H,ee,Q,oe){H=+H,ee>>>=0,Q>>>=0,oe||Y(this,H,ee,Q,Math.pow(2,8*Q)-1,0);var le=1,de=0;for(this[ee]=255&H;++de<Q&&(le*=256);)this[ee+de]=H/le&255;return ee+Q},t.prototype.writeUIntBE=function(H,ee,Q,oe){H=+H,ee>>>=0,Q>>>=0,oe||Y(this,H,ee,Q,Math.pow(2,8*Q)-1,0);var le=Q-1,de=1;for(this[ee+le]=255&H;--le>=0&&(de*=256);)this[ee+le]=H/de&255;return ee+Q},t.prototype.writeUInt8=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,1,255,0),this[ee]=255&H,ee+1},t.prototype.writeUInt16LE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,2,65535,0),this[ee]=255&H,this[ee+1]=H>>>8,ee+2},t.prototype.writeUInt16BE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,2,65535,0),this[ee]=H>>>8,this[ee+1]=255&H,ee+2},t.prototype.writeUInt32LE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,4,4294967295,0),this[ee+3]=H>>>24,this[ee+2]=H>>>16,this[ee+1]=H>>>8,this[ee]=255&H,ee+4},t.prototype.writeUInt32BE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,4,4294967295,0),this[ee]=H>>>24,this[ee+1]=H>>>16,this[ee+2]=H>>>8,this[ee+3]=255&H,ee+4},t.prototype.writeIntLE=function(H,ee,Q,oe){if(H=+H,ee>>>=0,!oe){var le=Math.pow(2,8*Q-1);Y(this,H,ee,Q,le-1,-le)}var de=0,fe=1,be=0;for(this[ee]=255&H;++de<Q&&(fe*=256);)H<0&&0===be&&0!==this[ee+de-1]&&(be=1),this[ee+de]=(H/fe>>0)-be&255;return ee+Q},t.prototype.writeIntBE=function(H,ee,Q,oe){if(H=+H,ee>>>=0,!oe){var le=Math.pow(2,8*Q-1);Y(this,H,ee,Q,le-1,-le)}var de=Q-1,fe=1,be=0;for(this[ee+de]=255&H;--de>=0&&(fe*=256);)H<0&&0===be&&0!==this[ee+de+1]&&(be=1),this[ee+de]=(H/fe>>0)-be&255;return ee+Q},t.prototype.writeInt8=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,1,127,-128),H<0&&(H=255+H+1),this[ee]=255&H,ee+1},t.prototype.writeInt16LE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,2,32767,-32768),this[ee]=255&H,this[ee+1]=H>>>8,ee+2},t.prototype.writeInt16BE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,2,32767,-32768),this[ee]=H>>>8,this[ee+1]=255&H,ee+2},t.prototype.writeInt32LE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,4,2147483647,-2147483648),this[ee]=255&H,this[ee+1]=H>>>8,this[ee+2]=H>>>16,this[ee+3]=H>>>24,ee+4},t.prototype.writeInt32BE=function(H,ee,Q){return H=+H,ee>>>=0,Q||Y(this,H,ee,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[ee]=H>>>24,this[ee+1]=H>>>16,this[ee+2]=H>>>8,this[ee+3]=255&H,ee+4},t.prototype.writeFloatLE=function(H,ee,Q){return J(this,H,ee,!0,Q)},t.prototype.writeFloatBE=function(H,ee,Q){return J(this,H,ee,!1,Q)},t.prototype.writeDoubleLE=function(H,ee,Q){return te(this,H,ee,!0,Q)},t.prototype.writeDoubleBE=function(H,ee,Q){return te(this,H,ee,!1,Q)},t.prototype.copy=function(H,ee,Q,oe){if(!t.isBuffer(H))throw new TypeError("argument should be a Buffer");if(Q||(Q=0),oe||0===oe||(oe=this.length),ee>=H.length&&(ee=H.length),ee||(ee=0),oe>0&&oe<Q&&(oe=Q),oe===Q||0===H.length||0===this.length)return 0;if(ee<0)throw new RangeError("targetStart out of bounds");if(Q<0||Q>=this.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("sourceEnd out of bounds");oe>this.length&&(oe=this.length),H.length-ee<oe-Q&&(oe=H.length-ee+Q);var le=oe-Q;if(this===H&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(ee,Q,oe);else if(this===H&&Q<ee&&ee<oe)for(var de=le-1;de>=0;--de)H[de+ee]=this[de+Q];else Uint8Array.prototype.set.call(H,this.subarray(Q,oe),ee);return le},t.prototype.fill=function(H,ee,Q,oe){if("string"==typeof H){if("string"==typeof ee?(oe=ee,ee=0,Q=this.length):"string"==typeof Q&&(oe=Q,Q=this.length),void 0!==oe&&"string"!=typeof oe)throw new TypeError("encoding must be a string");if("string"==typeof oe&&!t.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);if(1===H.length){var le=H.charCodeAt(0);("utf8"===oe&&le<128||"latin1"===oe)&&(H=le)}}else"number"==typeof H&&(H&=255);if(ee<0||this.length<ee||this.length<Q)throw new RangeError("Out of range index");if(Q<=ee)return this;var de;if(ee>>>=0,Q=void 0===Q?this.length:Q>>>0,H||(H=0),"number"==typeof H)for(de=ee;de<Q;++de)this[de]=H;else{var fe=t.isBuffer(H)?H:t.from(H,oe),be=fe.length;if(0===be)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(de=0;de<Q-ee;++de)this[de+ee]=fe[de%be]}return this};var X=/[^+/0-9A-Za-z-_]/g;function K(H){return H<16?"0"+H.toString(16):H.toString(16)}function ae(H,ee){var Q;ee=ee||1/0;for(var oe=H.length,le=null,de=[],fe=0;fe<oe;++fe){if((Q=H.charCodeAt(fe))>55295&&Q<57344){if(!le){if(Q>56319){(ee-=3)>-1&&de.push(239,191,189);continue}if(fe+1===oe){(ee-=3)>-1&&de.push(239,191,189);continue}le=Q;continue}if(Q<56320){(ee-=3)>-1&&de.push(239,191,189),le=Q;continue}Q=65536+(le-55296<<10|Q-56320)}else le&&(ee-=3)>-1&&de.push(239,191,189);if(le=null,Q<128){if((ee-=1)<0)break;de.push(Q)}else if(Q<2048){if((ee-=2)<0)break;de.push(Q>>6|192,63&Q|128)}else if(Q<65536){if((ee-=3)<0)break;de.push(Q>>12|224,Q>>6&63|128,63&Q|128)}else{if(!(Q<1114112))throw new Error("Invalid code point");if((ee-=4)<0)break;de.push(Q>>18|240,Q>>12&63|128,Q>>6&63|128,63&Q|128)}}return de}function U(H){return r.toByteArray(function(ee){if((ee=(ee=ee.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;ee.length%4!=0;)ee+="=";return ee}(H))}function V(H,ee,Q,oe){for(var le=0;le<oe&&!(le+Q>=ee.length||le>=H.length);++le)ee[le+Q]=H[le];return le}function q(H,ee){return H instanceof ee||null!=H&&null!=H.constructor&&null!=H.constructor.name&&H.constructor.name===ee.name}function ie(H){return H!=H}}).call(this)}).call(this,m("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(m,b,y){y.read=function(e,r,n,a,t){var p,s,i=8*t-a-1,f=(1<<i)-1,c=f>>1,l=-7,h=n?t-1:0,d=n?-1:1,o=e[r+h];for(h+=d,p=o&(1<<-l)-1,o>>=-l,l+=i;l>0;p=256*p+e[r+h],h+=d,l-=8);for(s=p&(1<<-l)-1,p>>=-l,l+=a;l>0;s=256*s+e[r+h],h+=d,l-=8);if(0===p)p=1-c;else{if(p===f)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,a),p-=c}return(o?-1:1)*s*Math.pow(2,p-a)},y.write=function(e,r,n,a,t,p){var s,i,f,c=8*p-t-1,l=(1<<c)-1,h=l>>1,d=23===t?Math.pow(2,-24)-Math.pow(2,-77):0,o=a?0:p-1,x=a?1:-1,u=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(i=isNaN(r)?1:0,s=l):(s=Math.floor(Math.log(r)/Math.LN2),r*(f=Math.pow(2,-s))<1&&(s--,f*=2),(r+=s+h>=1?d/f:d*Math.pow(2,1-h))*f>=2&&(s++,f/=2),s+h>=l?(i=0,s=l):s+h>=1?(i=(r*f-1)*Math.pow(2,t),s+=h):(i=r*Math.pow(2,h-1)*Math.pow(2,t),s=0));t>=8;e[n+o]=255&i,o+=x,i/=256,t-=8);for(s=s<<t|i,c+=t;c>0;e[n+o]=255&s,o+=x,s/=256,c-=8);e[n+o-x]|=128*u}},{}],5:[function(m,b,y){var e,r,n=b.exports={};function a(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}function p(x){if(e===setTimeout)return setTimeout(x,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(x,0);try{return e(x,0)}catch{try{return e.call(null,x,0)}catch{return e.call(this,x,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch{e=a}try{r="function"==typeof clearTimeout?clearTimeout:t}catch{r=t}}();var s,i=[],f=!1,c=-1;function l(){f&&s&&(f=!1,s.length?i=s.concat(i):c=-1,i.length&&h())}function h(){if(!f){var x=p(l);f=!0;for(var u=i.length;u;){for(s=i,i=[];++c<u;)s&&s[c].run();c=-1,u=i.length}s=null,f=!1,function(T){if(r===clearTimeout)return clearTimeout(T);if((r===t||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(T);try{r(T)}catch{try{return r.call(null,T)}catch{return r.call(this,T)}}}(x)}}function d(x,u){this.fun=x,this.array=u}function o(){}n.nextTick=function(x){var u=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)u[T-1]=arguments[T];i.push(new d(x,u)),1!==i.length||f||p(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=o,n.addListener=o,n.once=o,n.off=o,n.removeListener=o,n.removeAllListeners=o,n.emit=o,n.prependListener=o,n.prependOnceListener=o,n.listeners=function(x){return[]},n.binding=function(x){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(x){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(m,b,y){b.exports={alpha_shape:m("alpha-shape"),convex_hull:m("convex-hull"),delaunay_triangulate:m("delaunay-triangulate"),gl_cone3d:m("gl-cone3d"),gl_error3d:m("gl-error3d"),gl_heatmap2d:m("gl-heatmap2d"),gl_line3d:m("gl-line3d"),gl_mesh3d:m("gl-mesh3d"),gl_plot2d:m("gl-plot2d"),gl_plot3d:m("gl-plot3d"),gl_pointcloud2d:m("gl-pointcloud2d"),gl_scatter3d:m("gl-scatter3d"),gl_select_box:m("gl-select-box"),gl_spikes2d:m("gl-spikes2d"),gl_streamtube3d:m("gl-streamtube3d"),gl_surface3d:m("gl-surface3d"),ndarray:m("ndarray"),ndarray_linear_interpolate:m("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(m,b,y){"use strict";b.exports=function(p){var s=(p=p||{}).eye||[0,0,1],i=p.center||[0,0,0],f=p.up||[0,1,0],c=p.distanceLimits||[0,1/0],l=p.mode||"turntable",h=e(),d=r(),o=n();return h.setDistanceLimits(c[0],c[1]),h.lookAt(0,s,i,f),d.setDistanceLimits(c[0],c[1]),d.lookAt(0,s,i,f),o.setDistanceLimits(c[0],c[1]),o.lookAt(0,s,i,f),new a({turntable:h,orbit:d,matrix:o},l)};var e=m("turntable-camera-controller"),r=m("orbit-camera-controller"),n=m("matrix-camera-controller");function a(p,s){this._controllerNames=Object.keys(p),this._controllerList=this._controllerNames.map(function(i){return p[i]}),this._mode=s,this._active=p[s],this._active||(this._mode="turntable",this._active=p.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=a.prototype;t.flush=function(p){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].flush(p)},t.idle=function(p){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].idle(p)},t.lookAt=function(p,s,i,f){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].lookAt(p,s,i,f)},t.rotate=function(p,s,i,f){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].rotate(p,s,i,f)},t.pan=function(p,s,i,f){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].pan(p,s,i,f)},t.translate=function(p,s,i,f){for(var c=this._controllerList,l=0;l<c.length;++l)c[l].translate(p,s,i,f)},t.setMatrix=function(p,s){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].setMatrix(p,s)},t.setDistanceLimits=function(p,s){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].setDistanceLimits(p,s)},t.setDistance=function(p,s){for(var i=this._controllerList,f=0;f<i.length;++f)i[f].setDistance(p,s)},t.recalcMatrix=function(p){this._active.recalcMatrix(p)},t.getDistance=function(p){return this._active.getDistance(p)},t.getDistanceLimits=function(p){return this._active.getDistanceLimits(p)},t.lastT=function(){return this._active.lastT()},t.setMode=function(p){if(p!==this._mode){var s=this._controllerNames.indexOf(p);if(!(s<0)){var i=this._active,f=this._controllerList[s],c=Math.max(i.lastT(),f.lastT());i.recalcMatrix(c),f.setMatrix(c,i.computedMatrix),this._active=f,this._mode=p,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(m,b,y){"use strict";var e=typeof WeakMap>"u"?m("weak-map"):WeakMap,r=m("gl-buffer"),n=m("gl-vao"),a=new e;b.exports=function(t){var p=a.get(t),s=p&&(p._triangleBuffer.handle||p._triangleBuffer.buffer);if(!s||!t.isBuffer(s)){var i=r(t,new Float32Array([-1,-1,-1,4,4,-1]));(p=n(t,[{buffer:i,type:t.FLOAT,size:2}]))._triangleBuffer=i,a.set(t,p)}p.bind(),t.drawArrays(t.TRIANGLES,0,3),p.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(m,b,y){var e=m("pad-left");b.exports=function(r,n,a){n="number"==typeof n?n:1,a=a||": ";var t=r.split(/\r?\n/),p=String(t.length+n-1).length;return t.map(function(s,i){var f=i+n,c=String(f).length;return e(f,p-c)+a+s}).join("\n")}},{"pad-left":264}],10:[function(m,b,y){"use strict";b.exports=function(n){var a=n.length;if(0===a)return[];if(1===a)return[0];for(var t=n[0].length,p=[n[0]],s=[0],i=1;i<a;++i)if(p.push(n[i]),r(p,t)){if(s.push(i),s.length===t+1)return s}else p.pop();return s};var e=m("robust-orientation");function r(n,a){for(var t=new Array(a+1),p=0;p<n.length;++p)t[p]=n[p];for(p=0;p<=n.length;++p){for(var s=n.length;s<=a;++s){for(var i=new Array(a),f=0;f<a;++f)i[f]=Math.pow(s+1-p,f);t[s]=i}if(e.apply(void 0,t))return!0}return!1}},{"robust-orientation":284}],11:[function(m,b,y){"use strict";b.exports=function(n,a){return e(a).filter(function(t){for(var p=new Array(t.length),s=0;s<t.length;++s)p[s]=a[t[s]];return r(p)*n<1})};var e=m("delaunay-triangulate"),r=m("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(m,b,y){b.exports=function(n,a){return r(e(n,a))};var e=m("alpha-complex"),r=m("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(m,b,y){b.exports=function(e){return atob(e)}},{}],14:[function(m,b,y){"use strict";b.exports=function(n,a){for(var t=a.length,p=new Array(t+1),s=0;s<t;++s){for(var i=new Array(t+1),f=0;f<=t;++f)i[f]=n[f][s];p[s]=i}for(p[t]=new Array(t+1),s=0;s<=t;++s)p[t][s]=1;var c=new Array(t+1);for(s=0;s<t;++s)c[s]=a[s];c[t]=1;var l=e(p,c),h=r(l[t+1]);0===h&&(h=1);var d=new Array(t+1);for(s=0;s<=t;++s)d[s]=r(l[s])/h;return d};var e=m("robust-linear-solve");function r(n){for(var a=0,t=0;t<n.length;++t)a+=n[t];return a}},{"robust-linear-solve":283}],15:[function(m,b,y){"use strict";var e=m("./lib/rationalize");b.exports=function(r,n){return e(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(m,b,y){"use strict";b.exports=function(e,r){return e[0].mul(r[1]).cmp(r[0].mul(e[1]))}},{}],17:[function(m,b,y){"use strict";var e=m("./lib/rationalize");b.exports=function(r,n){return e(r[0].mul(n[1]),r[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(m,b,y){"use strict";var e=m("./is-rat"),r=m("./lib/is-bn"),n=m("./lib/num-to-bn"),a=m("./lib/str-to-bn"),t=m("./lib/rationalize"),p=m("./div");b.exports=function s(i,f){if(e(i))return f?p(i,s(f)):[i[0].clone(),i[1].clone()];var c,l,h=0;if(r(i))c=i.clone();else if("string"==typeof i)c=a(i);else{if(0===i)return[n(0),n(1)];if(i===Math.floor(i))c=n(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),h-=256;c=n(i)}}if(e(f))c.mul(f[1]),l=f[0].clone();else if(r(f))l=f.clone();else if("string"==typeof f)l=a(f);else if(f)if(f===Math.floor(f))l=n(f);else{for(;f!==Math.floor(f);)f*=Math.pow(2,256),h+=256;l=n(f)}else l=n(1);return h>0?c=c.ushln(h):h<0&&(l=l.ushln(-h)),t(c,l)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(m,b,y){"use strict";var e=m("./lib/is-bn");b.exports=function(r){return Array.isArray(r)&&2===r.length&&e(r[0])&&e(r[1])}},{"./lib/is-bn":23}],20:[function(m,b,y){"use strict";var e=m("bn.js");b.exports=function(r){return r.cmp(new e(0))}},{"bn.js":33}],21:[function(m,b,y){"use strict";var e=m("./bn-sign");b.exports=function(r){var n=r.length,a=r.words,t=0;if(1===n)t=a[0];else if(2===n)t=a[0]+67108864*a[1];else for(var p=0;p<n;p++)t+=a[p]*Math.pow(67108864,p);return e(r)*t}},{"./bn-sign":20}],22:[function(m,b,y){"use strict";var e=m("double-bits"),r=m("bit-twiddle").countTrailingZeros;b.exports=function(n){var a=r(e.lo(n));if(a<32)return a;var t=r(e.hi(n));return t>20?52:t+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(m,b,y){"use strict";m("bn.js"),b.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(m,b,y){"use strict";var e=m("bn.js"),r=m("double-bits");b.exports=function(n){var a=r.exponent(n);return a<52?new e(n):new e(n*Math.pow(2,52-a)).ushln(a-52)}},{"bn.js":33,"double-bits":64}],25:[function(m,b,y){"use strict";var e=m("./num-to-bn"),r=m("./bn-sign");b.exports=function(n,a){var t=r(n),p=r(a);if(0===t)return[e(0),e(1)];if(0===p)return[e(0),e(0)];p<0&&(n=n.neg(),a=a.neg());var s=n.gcd(a);return s.cmpn(1)?[n.div(s),a.div(s)]:[n,a]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(m,b,y){"use strict";var e=m("bn.js");b.exports=function(r){return new e(r)}},{"bn.js":33}],27:[function(m,b,y){"use strict";var e=m("./lib/rationalize");b.exports=function(r,n){return e(r[0].mul(n[0]),r[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(m,b,y){"use strict";var e=m("./lib/bn-sign");b.exports=function(r){return e(r[0])*e(r[1])}},{"./lib/bn-sign":20}],29:[function(m,b,y){"use strict";var e=m("./lib/rationalize");b.exports=function(r,n){return e(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(m,b,y){"use strict";var e=m("./lib/bn-to-num"),r=m("./lib/ctz");b.exports=function(n){var a=n[0],t=n[1];if(0===a.cmpn(0))return 0;var p=a.abs().divmod(t.abs()),i=e(p.div),f=p.mod,c=a.negative!==t.negative?-1:1;if(0===f.cmpn(0))return c*i;if(i){var l=r(i)+4,h=e(f.ushln(l).divRound(t));return c*(i+h*Math.pow(2,-l))}var d=t.bitLength()-f.bitLength()+53;return h=e(f.ushln(d).divRound(t)),d<1023?c*h*Math.pow(2,-d):c*(h*=Math.pow(2,-1023))*Math.pow(2,1023-d)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(m,b,y){"use strict";function e(s,i,f,c,l){for(var h=l+1;c<=l;){var d=c+l>>>1,o=s[d];(void 0!==f?f(o,i):o-i)>=0?(h=d,l=d-1):c=d+1}return h}function r(s,i,f,c,l){for(var h=l+1;c<=l;){var d=c+l>>>1,o=s[d];(void 0!==f?f(o,i):o-i)>0?(h=d,l=d-1):c=d+1}return h}function n(s,i,f,c,l){for(var h=c-1;c<=l;){var d=c+l>>>1,o=s[d];(void 0!==f?f(o,i):o-i)<0?(h=d,c=d+1):l=d-1}return h}function a(s,i,f,c,l){for(var h=c-1;c<=l;){var d=c+l>>>1,o=s[d];(void 0!==f?f(o,i):o-i)<=0?(h=d,c=d+1):l=d-1}return h}function t(s,i,f,c,l){for(;c<=l;){var h=c+l>>>1,d=s[h],o=void 0!==f?f(d,i):d-i;if(0===o)return h;o<=0?c=h+1:l=h-1}return-1}function p(s,i,f,c,l,h){return"function"==typeof f?h(s,i,f,void 0===c?0:0|c,void 0===l?s.length-1:0|l):h(s,i,void 0,void 0===f?0:0|f,void 0===c?s.length-1:0|c)}b.exports={ge:function(s,i,f,c,l){return p(s,i,f,c,l,e)},gt:function(s,i,f,c,l){return p(s,i,f,c,l,r)},lt:function(s,i,f,c,l){return p(s,i,f,c,l,n)},le:function(s,i,f,c,l){return p(s,i,f,c,l,a)},eq:function(s,i,f,c,l){return p(s,i,f,c,l,t)}}},{}],32:[function(m,b,y){"use strict";function e(n){var a=32;return(n&=-n)&&a--,65535&n&&(a-=16),16711935&n&&(a-=8),252645135&n&&(a-=4),858993459&n&&(a-=2),1431655765&n&&(a-=1),a}y.INT_BITS=32,y.INT_MAX=2147483647,y.INT_MIN=-1<<31,y.sign=function(n){return(n>0)-(n<0)},y.abs=function(n){var a=n>>31;return(n^a)-a},y.min=function(n,a){return a^(n^a)&-(n<a)},y.max=function(n,a){return n^(n^a)&-(n<a)},y.isPow2=function(n){return!(n&n-1||!n)},y.log2=function(n){var a,t;return a=(n>65535)<<4,a|=t=((n>>>=a)>255)<<3,a|=t=((n>>>=t)>15)<<2,(a|=t=((n>>>=t)>3)<<1)|(n>>>=t)>>1},y.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},y.popCount=function(n){return 16843009*((n=(858993459&(n-=n>>>1&1431655765))+(n>>>2&858993459))+(n>>>4)&252645135)>>>24},y.countTrailingZeros=e,y.nextPow2=function(n){return n+=0===n,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,1+((n|=n>>>8)|n>>>16)},y.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,(n|=n>>>16)-(n>>>1)},y.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,27030>>>(n&=15)&1};var r=new Array(256);(function(n){for(var a=0;a<256;++a){var t=a,p=a,s=7;for(t>>>=1;t;t>>>=1)p<<=1,p|=1&t,--s;n[a]=p<<s&255}})(r),y.reverse=function(n){return r[255&n]<<24|r[n>>>8&255]<<16|r[n>>>16&255]<<8|r[n>>>24&255]},y.interleave2=function(n,a){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},y.deinterleave2=function(n,a){return(n=65535&((n=16711935&((n=252645135&((n=858993459&((n=n>>>a&1431655765)|n>>>1))|n>>>2))|n>>>4))|n>>>16))<<16>>16},y.interleave3=function(n,a,t){return n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2),(n|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<2},y.deinterleave3=function(n,a){return(n=1023&((n=4278190335&((n=251719695&((n=3272356035&((n=n>>>a&1227133513)|n>>>2))|n>>>4))|n>>>8))|n>>>16))<<22>>22},y.nextCombination=function(n){var a=n|n-1;return a+1|(~a&-~a)-1>>>e(n)+1}},{}],33:[function(m,b,y){!function(e,r){"use strict";function n(C,D){if(!C)throw new Error(D||"Assertion failed")}function a(C,D){C.super_=D;var B=function(){};B.prototype=D.prototype,C.prototype=new B,C.prototype.constructor=C}function t(C,D,B){if(t.isBN(C))return C;this.negative=0,this.words=null,this.length=0,this.red=null,null!==C&&("le"!==D&&"be"!==D||(B=D,D=10),this._init(C||0,D||10,B||"be"))}var p;"object"==typeof e?e.exports=t:r.BN=t,t.BN=t,t.wordSize=26;try{p=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:m("buffer").Buffer}catch{}function s(C,D){var B=C.charCodeAt(D);return B>=65&&B<=70?B-55:B>=97&&B<=102?B-87:B-48&15}function i(C,D,B){var z=s(C,B);return B-1>=D&&(z|=s(C,B-1)<<4),z}function f(C,D,B,z){for(var Y=0,G=Math.min(C.length,B),J=D;J<G;J++){var te=C.charCodeAt(J)-48;Y*=z,Y+=te>=49?te-49+10:te>=17?te-17+10:te}return Y}t.isBN=function(C){return C instanceof t||null!==C&&"object"==typeof C&&C.constructor.wordSize===t.wordSize&&Array.isArray(C.words)},t.max=function(C,D){return C.cmp(D)>0?C:D},t.min=function(C,D){return C.cmp(D)<0?C:D},t.prototype._init=function(C,D,B){if("number"==typeof C)return this._initNumber(C,D,B);if("object"==typeof C)return this._initArray(C,D,B);"hex"===D&&(D=16),n(D===(0|D)&&D>=2&&D<=36);var z=0;"-"===(C=C.toString().replace(/\s+/g,""))[0]&&(z++,this.negative=1),z<C.length&&(16===D?this._parseHex(C,z,B):(this._parseBase(C,D,z),"le"===B&&this._initArray(this.toArray(),D,B)))},t.prototype._initNumber=function(C,D,B){C<0&&(this.negative=1,C=-C),C<67108864?(this.words=[67108863&C],this.length=1):C<4503599627370496?(this.words=[67108863&C,C/67108864&67108863],this.length=2):(n(C<9007199254740992),this.words=[67108863&C,C/67108864&67108863,1],this.length=3),"le"===B&&this._initArray(this.toArray(),D,B)},t.prototype._initArray=function(C,D,B){if(n("number"==typeof C.length),C.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(C.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var Y,G,J=0;if("be"===B)for(z=C.length-1,Y=0;z>=0;z-=3)this.words[Y]|=(G=C[z]|C[z-1]<<8|C[z-2]<<16)<<J&67108863,this.words[Y+1]=G>>>26-J&67108863,(J+=24)>=26&&(J-=26,Y++);else if("le"===B)for(z=0,Y=0;z<C.length;z+=3)this.words[Y]|=(G=C[z]|C[z+1]<<8|C[z+2]<<16)<<J&67108863,this.words[Y+1]=G>>>26-J&67108863,(J+=24)>=26&&(J-=26,Y++);return this.strip()},t.prototype._parseHex=function(C,D,B){this.length=Math.ceil((C.length-D)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var Y,G=0,J=0;if("be"===B)for(z=C.length-1;z>=D;z-=2)Y=i(C,D,z)<<G,this.words[J]|=67108863&Y,G>=18?(G-=18,this.words[J+=1]|=Y>>>26):G+=8;else for(z=(C.length-D)%2==0?D+1:D;z<C.length;z+=2)Y=i(C,D,z)<<G,this.words[J]|=67108863&Y,G>=18?(G-=18,this.words[J+=1]|=Y>>>26):G+=8;this.strip()},t.prototype._parseBase=function(C,D,B){this.words=[0],this.length=1;for(var z=0,Y=1;Y<=67108863;Y*=D)z++;z--,Y=Y/D|0;for(var G=C.length-B,J=G%z,te=Math.min(G,G-J)+B,X=0,K=B;K<te;K+=z)X=f(C,K,K+z,D),this.imuln(Y),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(0!==J){var ae=1;for(X=f(C,K,C.length,D),K=0;K<J;K++)ae*=D;this.imuln(ae),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},t.prototype.copy=function(C){C.words=new Array(this.length);for(var D=0;D<this.length;D++)C.words[D]=this.words[D];C.length=this.length,C.negative=this.negative,C.red=this.red},t.prototype.clone=function(){var C=new t(null);return this.copy(C),C},t.prototype._expand=function(C){for(;this.length<C;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},t.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(C,D,B){B.negative=D.negative^C.negative;var z=C.length+D.length|0;B.length=z,z=z-1|0;var Y=0|C.words[0],G=0|D.words[0],J=Y*G,X=J/67108864|0;B.words[0]=67108863&J;for(var K=1;K<z;K++){for(var ae=X>>>26,U=67108863&X,V=Math.min(K,D.length-1),q=Math.max(0,K-C.length+1);q<=V;q++)ae+=(J=(Y=0|C.words[K-q|0])*(G=0|D.words[q])+U)/67108864|0,U=67108863&J;B.words[K]=0|U,X=0|ae}return 0!==X?B.words[K]=0|X:B.length--,B.strip()}t.prototype.toString=function(C,D){var B;if(D=0|D||1,16===(C=C||10)||"hex"===C){B="";for(var z=0,Y=0,G=0;G<this.length;G++){var J=this.words[G],te=(16777215&(J<<z|Y)).toString(16);B=0!=(Y=J>>>24-z&16777215)||G!==this.length-1?c[6-te.length]+te+B:te+B,(z+=2)>=26&&(z-=26,G--)}for(0!==Y&&(B=Y.toString(16)+B);B.length%D!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}if(C===(0|C)&&C>=2&&C<=36){var X=l[C],K=h[C];B="";var ae=this.clone();for(ae.negative=0;!ae.isZero();){var U=ae.modn(K).toString(C);B=(ae=ae.idivn(K)).isZero()?U+B:c[X-U.length]+U+B}for(this.isZero()&&(B="0"+B);B.length%D!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}n(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var C=this.words[0];return 2===this.length?C+=67108864*this.words[1]:3===this.length&&1===this.words[2]?C+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-C:C},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(C,D){return n(void 0!==p),this.toArrayLike(p,C,D)},t.prototype.toArray=function(C,D){return this.toArrayLike(Array,C,D)},t.prototype.toArrayLike=function(C,D,B){var z=this.byteLength(),Y=B||Math.max(1,z);n(z<=Y,"byte array longer than desired length"),n(Y>0,"Requested array length <= 0"),this.strip();var G,J,te="le"===D,X=new C(Y),K=this.clone();if(te){for(J=0;!K.isZero();J++)G=K.andln(255),K.iushrn(8),X[J]=G;for(;J<Y;J++)X[J]=0}else{for(J=0;J<Y-z;J++)X[J]=0;for(J=0;!K.isZero();J++)G=K.andln(255),K.iushrn(8),X[Y-J-1]=G}return X},t.prototype._countBits=Math.clz32?function(C){return 32-Math.clz32(C)}:function(C){var D=C,B=0;return D>=4096&&(B+=13,D>>>=13),D>=64&&(B+=7,D>>>=7),D>=8&&(B+=4,D>>>=4),D>=2&&(B+=2,D>>>=2),B+D},t.prototype._zeroBits=function(C){if(0===C)return 26;var D=C,B=0;return 0==(8191&D)&&(B+=13,D>>>=13),0==(127&D)&&(B+=7,D>>>=7),0==(15&D)&&(B+=4,D>>>=4),0==(3&D)&&(B+=2,D>>>=2),0==(1&D)&&B++,B},t.prototype.bitLength=function(){var D=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+D},t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var C=0,D=0;D<this.length;D++){var B=this._zeroBits(this.words[D]);if(C+=B,26!==B)break}return C},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(C){return 0!==this.negative?this.abs().inotn(C).iaddn(1):this.clone()},t.prototype.fromTwos=function(C){return this.testn(C-1)?this.notn(C).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return 0!==this.negative},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(C){for(;this.length<C.length;)this.words[this.length++]=0;for(var D=0;D<C.length;D++)this.words[D]=this.words[D]|C.words[D];return this.strip()},t.prototype.ior=function(C){return n(0==(this.negative|C.negative)),this.iuor(C)},t.prototype.or=function(C){return this.length>C.length?this.clone().ior(C):C.clone().ior(this)},t.prototype.uor=function(C){return this.length>C.length?this.clone().iuor(C):C.clone().iuor(this)},t.prototype.iuand=function(C){var D;D=this.length>C.length?C:this;for(var B=0;B<D.length;B++)this.words[B]=this.words[B]&C.words[B];return this.length=D.length,this.strip()},t.prototype.iand=function(C){return n(0==(this.negative|C.negative)),this.iuand(C)},t.prototype.and=function(C){return this.length>C.length?this.clone().iand(C):C.clone().iand(this)},t.prototype.uand=function(C){return this.length>C.length?this.clone().iuand(C):C.clone().iuand(this)},t.prototype.iuxor=function(C){var D,B;this.length>C.length?(D=this,B=C):(D=C,B=this);for(var z=0;z<B.length;z++)this.words[z]=D.words[z]^B.words[z];if(this!==D)for(;z<D.length;z++)this.words[z]=D.words[z];return this.length=D.length,this.strip()},t.prototype.ixor=function(C){return n(0==(this.negative|C.negative)),this.iuxor(C)},t.prototype.xor=function(C){return this.length>C.length?this.clone().ixor(C):C.clone().ixor(this)},t.prototype.uxor=function(C){return this.length>C.length?this.clone().iuxor(C):C.clone().iuxor(this)},t.prototype.inotn=function(C){n("number"==typeof C&&C>=0);var D=0|Math.ceil(C/26),B=C%26;this._expand(D),B>0&&D--;for(var z=0;z<D;z++)this.words[z]=67108863&~this.words[z];return B>0&&(this.words[z]=~this.words[z]&67108863>>26-B),this.strip()},t.prototype.notn=function(C){return this.clone().inotn(C)},t.prototype.setn=function(C,D){n("number"==typeof C&&C>=0);var B=C/26|0,z=C%26;return this._expand(B+1),this.words[B]=D?this.words[B]|1<<z:this.words[B]&~(1<<z),this.strip()},t.prototype.iadd=function(C){var D,B,z;if(0!==this.negative&&0===C.negative)return this.negative=0,D=this.isub(C),this.negative^=1,this._normSign();if(0===this.negative&&0!==C.negative)return C.negative=0,D=this.isub(C),C.negative=1,D._normSign();this.length>C.length?(B=this,z=C):(B=C,z=this);for(var Y=0,G=0;G<z.length;G++)this.words[G]=67108863&(D=(0|B.words[G])+(0|z.words[G])+Y),Y=D>>>26;for(;0!==Y&&G<B.length;G++)this.words[G]=67108863&(D=(0|B.words[G])+Y),Y=D>>>26;if(this.length=B.length,0!==Y)this.words[this.length]=Y,this.length++;else if(B!==this)for(;G<B.length;G++)this.words[G]=B.words[G];return this},t.prototype.add=function(C){var D;return 0!==C.negative&&0===this.negative?(C.negative=0,D=this.sub(C),C.negative^=1,D):0===C.negative&&0!==this.negative?(this.negative=0,D=C.sub(this),this.negative=1,D):this.length>C.length?this.clone().iadd(C):C.clone().iadd(this)},t.prototype.isub=function(C){if(0!==C.negative){C.negative=0;var D=this.iadd(C);return C.negative=1,D._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(C),this.negative=1,this._normSign();var B,z,Y=this.cmp(C);if(0===Y)return this.negative=0,this.length=1,this.words[0]=0,this;Y>0?(B=this,z=C):(B=C,z=this);for(var G=0,J=0;J<z.length;J++)G=(D=(0|B.words[J])-(0|z.words[J])+G)>>26,this.words[J]=67108863&D;for(;0!==G&&J<B.length;J++)G=(D=(0|B.words[J])+G)>>26,this.words[J]=67108863&D;if(0===G&&J<B.length&&B!==this)for(;J<B.length;J++)this.words[J]=B.words[J];return this.length=Math.max(this.length,J),B!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(C){return this.clone().isub(C)};var o=function(C,D,B){var z,Y,G,J=C.words,te=D.words,X=B.words,K=0,ae=0|J[0],U=8191&ae,V=ae>>>13,q=0|J[1],ie=8191&q,H=q>>>13,ee=0|J[2],Q=8191&ee,oe=ee>>>13,le=0|J[3],de=8191&le,fe=le>>>13,be=0|J[4],he=8191&be,_e=be>>>13,Ce=0|J[5],Ee=8191&Ce,Ae=Ce>>>13,ze=0|J[6],ve=8191&ze,Te=ze>>>13,Ie=0|J[7],De=8191&Ie,Fe=Ie>>>13,Ue=0|J[8],qe=8191&Ue,je=Ue>>>13,rt=0|J[9],Ne=8191&rt,Be=rt>>>13,We=0|te[0],Ye=8191&We,lt=We>>>13,mt=0|te[1],Tt=8191&mt,It=mt>>>13,Ct=0|te[2],ct=8191&Ct,at=Ct>>>13,St=0|te[3],Xt=8191&St,tn=St>>>13,hn=0|te[4],cn=8191&hn,yn=hn>>>13,en=0|te[5],Xe=8191&en,tt=en>>>13,ye=0|te[6],ke=8191&ye,Ve=ye>>>13,Je=0|te[7],nt=8191&Je,Ke=Je>>>13,vt=0|te[8],gt=8191&vt,Ot=vt>>>13,Vt=0|te[9],ft=8191&Vt,bt=Vt>>>13;B.negative=C.negative^D.negative,B.length=19;var Wt=(K+(z=Math.imul(U,Ye))|0)+((8191&(Y=(Y=Math.imul(U,lt))+Math.imul(V,Ye)|0))<<13)|0;K=((G=Math.imul(V,lt))+(Y>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,z=Math.imul(ie,Ye),Y=(Y=Math.imul(ie,lt))+Math.imul(H,Ye)|0,G=Math.imul(H,lt);var Pt=(K+(z=z+Math.imul(U,Tt)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,It)|0)+Math.imul(V,Tt)|0))<<13)|0;K=((G=G+Math.imul(V,It)|0)+(Y>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,z=Math.imul(Q,Ye),Y=(Y=Math.imul(Q,lt))+Math.imul(oe,Ye)|0,G=Math.imul(oe,lt),z=z+Math.imul(ie,Tt)|0,Y=(Y=Y+Math.imul(ie,It)|0)+Math.imul(H,Tt)|0,G=G+Math.imul(H,It)|0;var Bt=(K+(z=z+Math.imul(U,ct)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,at)|0)+Math.imul(V,ct)|0))<<13)|0;K=((G=G+Math.imul(V,at)|0)+(Y>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,z=Math.imul(de,Ye),Y=(Y=Math.imul(de,lt))+Math.imul(fe,Ye)|0,G=Math.imul(fe,lt),z=z+Math.imul(Q,Tt)|0,Y=(Y=Y+Math.imul(Q,It)|0)+Math.imul(oe,Tt)|0,G=G+Math.imul(oe,It)|0,z=z+Math.imul(ie,ct)|0,Y=(Y=Y+Math.imul(ie,at)|0)+Math.imul(H,ct)|0,G=G+Math.imul(H,at)|0;var Pe=(K+(z=z+Math.imul(U,Xt)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,tn)|0)+Math.imul(V,Xt)|0))<<13)|0;K=((G=G+Math.imul(V,tn)|0)+(Y>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,z=Math.imul(he,Ye),Y=(Y=Math.imul(he,lt))+Math.imul(_e,Ye)|0,G=Math.imul(_e,lt),z=z+Math.imul(de,Tt)|0,Y=(Y=Y+Math.imul(de,It)|0)+Math.imul(fe,Tt)|0,G=G+Math.imul(fe,It)|0,z=z+Math.imul(Q,ct)|0,Y=(Y=Y+Math.imul(Q,at)|0)+Math.imul(oe,ct)|0,G=G+Math.imul(oe,at)|0,z=z+Math.imul(ie,Xt)|0,Y=(Y=Y+Math.imul(ie,tn)|0)+Math.imul(H,Xt)|0,G=G+Math.imul(H,tn)|0;var et=(K+(z=z+Math.imul(U,cn)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,yn)|0)+Math.imul(V,cn)|0))<<13)|0;K=((G=G+Math.imul(V,yn)|0)+(Y>>>13)|0)+(et>>>26)|0,et&=67108863,z=Math.imul(Ee,Ye),Y=(Y=Math.imul(Ee,lt))+Math.imul(Ae,Ye)|0,G=Math.imul(Ae,lt),z=z+Math.imul(he,Tt)|0,Y=(Y=Y+Math.imul(he,It)|0)+Math.imul(_e,Tt)|0,G=G+Math.imul(_e,It)|0,z=z+Math.imul(de,ct)|0,Y=(Y=Y+Math.imul(de,at)|0)+Math.imul(fe,ct)|0,G=G+Math.imul(fe,at)|0,z=z+Math.imul(Q,Xt)|0,Y=(Y=Y+Math.imul(Q,tn)|0)+Math.imul(oe,Xt)|0,G=G+Math.imul(oe,tn)|0,z=z+Math.imul(ie,cn)|0,Y=(Y=Y+Math.imul(ie,yn)|0)+Math.imul(H,cn)|0,G=G+Math.imul(H,yn)|0;var dt=(K+(z=z+Math.imul(U,Xe)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,tt)|0)+Math.imul(V,Xe)|0))<<13)|0;K=((G=G+Math.imul(V,tt)|0)+(Y>>>13)|0)+(dt>>>26)|0,dt&=67108863,z=Math.imul(ve,Ye),Y=(Y=Math.imul(ve,lt))+Math.imul(Te,Ye)|0,G=Math.imul(Te,lt),z=z+Math.imul(Ee,Tt)|0,Y=(Y=Y+Math.imul(Ee,It)|0)+Math.imul(Ae,Tt)|0,G=G+Math.imul(Ae,It)|0,z=z+Math.imul(he,ct)|0,Y=(Y=Y+Math.imul(he,at)|0)+Math.imul(_e,ct)|0,G=G+Math.imul(_e,at)|0,z=z+Math.imul(de,Xt)|0,Y=(Y=Y+Math.imul(de,tn)|0)+Math.imul(fe,Xt)|0,G=G+Math.imul(fe,tn)|0,z=z+Math.imul(Q,cn)|0,Y=(Y=Y+Math.imul(Q,yn)|0)+Math.imul(oe,cn)|0,G=G+Math.imul(oe,yn)|0,z=z+Math.imul(ie,Xe)|0,Y=(Y=Y+Math.imul(ie,tt)|0)+Math.imul(H,Xe)|0,G=G+Math.imul(H,tt)|0;var xt=(K+(z=z+Math.imul(U,ke)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,Ve)|0)+Math.imul(V,ke)|0))<<13)|0;K=((G=G+Math.imul(V,Ve)|0)+(Y>>>13)|0)+(xt>>>26)|0,xt&=67108863,z=Math.imul(De,Ye),Y=(Y=Math.imul(De,lt))+Math.imul(Fe,Ye)|0,G=Math.imul(Fe,lt),z=z+Math.imul(ve,Tt)|0,Y=(Y=Y+Math.imul(ve,It)|0)+Math.imul(Te,Tt)|0,G=G+Math.imul(Te,It)|0,z=z+Math.imul(Ee,ct)|0,Y=(Y=Y+Math.imul(Ee,at)|0)+Math.imul(Ae,ct)|0,G=G+Math.imul(Ae,at)|0,z=z+Math.imul(he,Xt)|0,Y=(Y=Y+Math.imul(he,tn)|0)+Math.imul(_e,Xt)|0,G=G+Math.imul(_e,tn)|0,z=z+Math.imul(de,cn)|0,Y=(Y=Y+Math.imul(de,yn)|0)+Math.imul(fe,cn)|0,G=G+Math.imul(fe,yn)|0,z=z+Math.imul(Q,Xe)|0,Y=(Y=Y+Math.imul(Q,tt)|0)+Math.imul(oe,Xe)|0,G=G+Math.imul(oe,tt)|0,z=z+Math.imul(ie,ke)|0,Y=(Y=Y+Math.imul(ie,Ve)|0)+Math.imul(H,ke)|0,G=G+Math.imul(H,Ve)|0;var Rt=(K+(z=z+Math.imul(U,nt)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,Ke)|0)+Math.imul(V,nt)|0))<<13)|0;K=((G=G+Math.imul(V,Ke)|0)+(Y>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,z=Math.imul(qe,Ye),Y=(Y=Math.imul(qe,lt))+Math.imul(je,Ye)|0,G=Math.imul(je,lt),z=z+Math.imul(De,Tt)|0,Y=(Y=Y+Math.imul(De,It)|0)+Math.imul(Fe,Tt)|0,G=G+Math.imul(Fe,It)|0,z=z+Math.imul(ve,ct)|0,Y=(Y=Y+Math.imul(ve,at)|0)+Math.imul(Te,ct)|0,G=G+Math.imul(Te,at)|0,z=z+Math.imul(Ee,Xt)|0,Y=(Y=Y+Math.imul(Ee,tn)|0)+Math.imul(Ae,Xt)|0,G=G+Math.imul(Ae,tn)|0,z=z+Math.imul(he,cn)|0,Y=(Y=Y+Math.imul(he,yn)|0)+Math.imul(_e,cn)|0,G=G+Math.imul(_e,yn)|0,z=z+Math.imul(de,Xe)|0,Y=(Y=Y+Math.imul(de,tt)|0)+Math.imul(fe,Xe)|0,G=G+Math.imul(fe,tt)|0,z=z+Math.imul(Q,ke)|0,Y=(Y=Y+Math.imul(Q,Ve)|0)+Math.imul(oe,ke)|0,G=G+Math.imul(oe,Ve)|0,z=z+Math.imul(ie,nt)|0,Y=(Y=Y+Math.imul(ie,Ke)|0)+Math.imul(H,nt)|0,G=G+Math.imul(H,Ke)|0;var Yt=(K+(z=z+Math.imul(U,gt)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,Ot)|0)+Math.imul(V,gt)|0))<<13)|0;K=((G=G+Math.imul(V,Ot)|0)+(Y>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,z=Math.imul(Ne,Ye),Y=(Y=Math.imul(Ne,lt))+Math.imul(Be,Ye)|0,G=Math.imul(Be,lt),z=z+Math.imul(qe,Tt)|0,Y=(Y=Y+Math.imul(qe,It)|0)+Math.imul(je,Tt)|0,G=G+Math.imul(je,It)|0,z=z+Math.imul(De,ct)|0,Y=(Y=Y+Math.imul(De,at)|0)+Math.imul(Fe,ct)|0,G=G+Math.imul(Fe,at)|0,z=z+Math.imul(ve,Xt)|0,Y=(Y=Y+Math.imul(ve,tn)|0)+Math.imul(Te,Xt)|0,G=G+Math.imul(Te,tn)|0,z=z+Math.imul(Ee,cn)|0,Y=(Y=Y+Math.imul(Ee,yn)|0)+Math.imul(Ae,cn)|0,G=G+Math.imul(Ae,yn)|0,z=z+Math.imul(he,Xe)|0,Y=(Y=Y+Math.imul(he,tt)|0)+Math.imul(_e,Xe)|0,G=G+Math.imul(_e,tt)|0,z=z+Math.imul(de,ke)|0,Y=(Y=Y+Math.imul(de,Ve)|0)+Math.imul(fe,ke)|0,G=G+Math.imul(fe,Ve)|0,z=z+Math.imul(Q,nt)|0,Y=(Y=Y+Math.imul(Q,Ke)|0)+Math.imul(oe,nt)|0,G=G+Math.imul(oe,Ke)|0,z=z+Math.imul(ie,gt)|0,Y=(Y=Y+Math.imul(ie,Ot)|0)+Math.imul(H,gt)|0,G=G+Math.imul(H,Ot)|0;var nn=(K+(z=z+Math.imul(U,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(U,bt)|0)+Math.imul(V,ft)|0))<<13)|0;K=((G=G+Math.imul(V,bt)|0)+(Y>>>13)|0)+(nn>>>26)|0,nn&=67108863,z=Math.imul(Ne,Tt),Y=(Y=Math.imul(Ne,It))+Math.imul(Be,Tt)|0,G=Math.imul(Be,It),z=z+Math.imul(qe,ct)|0,Y=(Y=Y+Math.imul(qe,at)|0)+Math.imul(je,ct)|0,G=G+Math.imul(je,at)|0,z=z+Math.imul(De,Xt)|0,Y=(Y=Y+Math.imul(De,tn)|0)+Math.imul(Fe,Xt)|0,G=G+Math.imul(Fe,tn)|0,z=z+Math.imul(ve,cn)|0,Y=(Y=Y+Math.imul(ve,yn)|0)+Math.imul(Te,cn)|0,G=G+Math.imul(Te,yn)|0,z=z+Math.imul(Ee,Xe)|0,Y=(Y=Y+Math.imul(Ee,tt)|0)+Math.imul(Ae,Xe)|0,G=G+Math.imul(Ae,tt)|0,z=z+Math.imul(he,ke)|0,Y=(Y=Y+Math.imul(he,Ve)|0)+Math.imul(_e,ke)|0,G=G+Math.imul(_e,Ve)|0,z=z+Math.imul(de,nt)|0,Y=(Y=Y+Math.imul(de,Ke)|0)+Math.imul(fe,nt)|0,G=G+Math.imul(fe,Ke)|0,z=z+Math.imul(Q,gt)|0,Y=(Y=Y+Math.imul(Q,Ot)|0)+Math.imul(oe,gt)|0,G=G+Math.imul(oe,Ot)|0;var Kt=(K+(z=z+Math.imul(ie,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(ie,bt)|0)+Math.imul(H,ft)|0))<<13)|0;K=((G=G+Math.imul(H,bt)|0)+(Y>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,z=Math.imul(Ne,ct),Y=(Y=Math.imul(Ne,at))+Math.imul(Be,ct)|0,G=Math.imul(Be,at),z=z+Math.imul(qe,Xt)|0,Y=(Y=Y+Math.imul(qe,tn)|0)+Math.imul(je,Xt)|0,G=G+Math.imul(je,tn)|0,z=z+Math.imul(De,cn)|0,Y=(Y=Y+Math.imul(De,yn)|0)+Math.imul(Fe,cn)|0,G=G+Math.imul(Fe,yn)|0,z=z+Math.imul(ve,Xe)|0,Y=(Y=Y+Math.imul(ve,tt)|0)+Math.imul(Te,Xe)|0,G=G+Math.imul(Te,tt)|0,z=z+Math.imul(Ee,ke)|0,Y=(Y=Y+Math.imul(Ee,Ve)|0)+Math.imul(Ae,ke)|0,G=G+Math.imul(Ae,Ve)|0,z=z+Math.imul(he,nt)|0,Y=(Y=Y+Math.imul(he,Ke)|0)+Math.imul(_e,nt)|0,G=G+Math.imul(_e,Ke)|0,z=z+Math.imul(de,gt)|0,Y=(Y=Y+Math.imul(de,Ot)|0)+Math.imul(fe,gt)|0,G=G+Math.imul(fe,Ot)|0;var Mn=(K+(z=z+Math.imul(Q,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(Q,bt)|0)+Math.imul(oe,ft)|0))<<13)|0;K=((G=G+Math.imul(oe,bt)|0)+(Y>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,z=Math.imul(Ne,Xt),Y=(Y=Math.imul(Ne,tn))+Math.imul(Be,Xt)|0,G=Math.imul(Be,tn),z=z+Math.imul(qe,cn)|0,Y=(Y=Y+Math.imul(qe,yn)|0)+Math.imul(je,cn)|0,G=G+Math.imul(je,yn)|0,z=z+Math.imul(De,Xe)|0,Y=(Y=Y+Math.imul(De,tt)|0)+Math.imul(Fe,Xe)|0,G=G+Math.imul(Fe,tt)|0,z=z+Math.imul(ve,ke)|0,Y=(Y=Y+Math.imul(ve,Ve)|0)+Math.imul(Te,ke)|0,G=G+Math.imul(Te,Ve)|0,z=z+Math.imul(Ee,nt)|0,Y=(Y=Y+Math.imul(Ee,Ke)|0)+Math.imul(Ae,nt)|0,G=G+Math.imul(Ae,Ke)|0,z=z+Math.imul(he,gt)|0,Y=(Y=Y+Math.imul(he,Ot)|0)+Math.imul(_e,gt)|0,G=G+Math.imul(_e,Ot)|0;var Un=(K+(z=z+Math.imul(de,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(de,bt)|0)+Math.imul(fe,ft)|0))<<13)|0;K=((G=G+Math.imul(fe,bt)|0)+(Y>>>13)|0)+(Un>>>26)|0,Un&=67108863,z=Math.imul(Ne,cn),Y=(Y=Math.imul(Ne,yn))+Math.imul(Be,cn)|0,G=Math.imul(Be,yn),z=z+Math.imul(qe,Xe)|0,Y=(Y=Y+Math.imul(qe,tt)|0)+Math.imul(je,Xe)|0,G=G+Math.imul(je,tt)|0,z=z+Math.imul(De,ke)|0,Y=(Y=Y+Math.imul(De,Ve)|0)+Math.imul(Fe,ke)|0,G=G+Math.imul(Fe,Ve)|0,z=z+Math.imul(ve,nt)|0,Y=(Y=Y+Math.imul(ve,Ke)|0)+Math.imul(Te,nt)|0,G=G+Math.imul(Te,Ke)|0,z=z+Math.imul(Ee,gt)|0,Y=(Y=Y+Math.imul(Ee,Ot)|0)+Math.imul(Ae,gt)|0,G=G+Math.imul(Ae,Ot)|0;var Tn=(K+(z=z+Math.imul(he,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(he,bt)|0)+Math.imul(_e,ft)|0))<<13)|0;K=((G=G+Math.imul(_e,bt)|0)+(Y>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,z=Math.imul(Ne,Xe),Y=(Y=Math.imul(Ne,tt))+Math.imul(Be,Xe)|0,G=Math.imul(Be,tt),z=z+Math.imul(qe,ke)|0,Y=(Y=Y+Math.imul(qe,Ve)|0)+Math.imul(je,ke)|0,G=G+Math.imul(je,Ve)|0,z=z+Math.imul(De,nt)|0,Y=(Y=Y+Math.imul(De,Ke)|0)+Math.imul(Fe,nt)|0,G=G+Math.imul(Fe,Ke)|0,z=z+Math.imul(ve,gt)|0,Y=(Y=Y+Math.imul(ve,Ot)|0)+Math.imul(Te,gt)|0,G=G+Math.imul(Te,Ot)|0;var un=(K+(z=z+Math.imul(Ee,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(Ee,bt)|0)+Math.imul(Ae,ft)|0))<<13)|0;K=((G=G+Math.imul(Ae,bt)|0)+(Y>>>13)|0)+(un>>>26)|0,un&=67108863,z=Math.imul(Ne,ke),Y=(Y=Math.imul(Ne,Ve))+Math.imul(Be,ke)|0,G=Math.imul(Be,Ve),z=z+Math.imul(qe,nt)|0,Y=(Y=Y+Math.imul(qe,Ke)|0)+Math.imul(je,nt)|0,G=G+Math.imul(je,Ke)|0,z=z+Math.imul(De,gt)|0,Y=(Y=Y+Math.imul(De,Ot)|0)+Math.imul(Fe,gt)|0,G=G+Math.imul(Fe,Ot)|0;var an=(K+(z=z+Math.imul(ve,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(ve,bt)|0)+Math.imul(Te,ft)|0))<<13)|0;K=((G=G+Math.imul(Te,bt)|0)+(Y>>>13)|0)+(an>>>26)|0,an&=67108863,z=Math.imul(Ne,nt),Y=(Y=Math.imul(Ne,Ke))+Math.imul(Be,nt)|0,G=Math.imul(Be,Ke),z=z+Math.imul(qe,gt)|0,Y=(Y=Y+Math.imul(qe,Ot)|0)+Math.imul(je,gt)|0,G=G+Math.imul(je,Ot)|0;var fn=(K+(z=z+Math.imul(De,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(De,bt)|0)+Math.imul(Fe,ft)|0))<<13)|0;K=((G=G+Math.imul(Fe,bt)|0)+(Y>>>13)|0)+(fn>>>26)|0,fn&=67108863,z=Math.imul(Ne,gt),Y=(Y=Math.imul(Ne,Ot))+Math.imul(Be,gt)|0,G=Math.imul(Be,Ot);var pn=(K+(z=z+Math.imul(qe,ft)|0)|0)+((8191&(Y=(Y=Y+Math.imul(qe,bt)|0)+Math.imul(je,ft)|0))<<13)|0;K=((G=G+Math.imul(je,bt)|0)+(Y>>>13)|0)+(pn>>>26)|0,pn&=67108863;var Sn=(K+(z=Math.imul(Ne,ft))|0)+((8191&(Y=(Y=Math.imul(Ne,bt))+Math.imul(Be,ft)|0))<<13)|0;return K=((G=Math.imul(Be,bt))+(Y>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,X[0]=Wt,X[1]=Pt,X[2]=Bt,X[3]=Pe,X[4]=et,X[5]=dt,X[6]=xt,X[7]=Rt,X[8]=Yt,X[9]=nn,X[10]=Kt,X[11]=Mn,X[12]=Un,X[13]=Tn,X[14]=un,X[15]=an,X[16]=fn,X[17]=pn,X[18]=Sn,0!==K&&(X[19]=K,B.length++),B};function x(C,D,B){return(new u).mulp(C,D,B)}function u(C,D){this.x=C,this.y=D}Math.imul||(o=d),t.prototype.mulTo=function(C,D){var B=this.length+C.length;return 10===this.length&&10===C.length?o(this,C,D):B<63?d(this,C,D):B<1024?function(z,Y,G){G.negative=Y.negative^z.negative,G.length=z.length+Y.length;for(var J=0,te=0,X=0;X<G.length-1;X++){var K=te;te=0;for(var ae=67108863&J,U=Math.min(X,Y.length-1),V=Math.max(0,X-z.length+1);V<=U;V++){var ie=(0|z.words[X-V])*(0|Y.words[V]),H=67108863&ie;ae=67108863&(H=H+ae|0),te+=(K=(K=K+(ie/67108864|0)|0)+(H>>>26)|0)>>>26,K&=67108863}G.words[X]=ae,J=K,K=te}return 0!==J?G.words[X]=J:G.length--,G.strip()}(this,C,D):x(this,C,D)},u.prototype.makeRBT=function(C){for(var D=new Array(C),B=t.prototype._countBits(C)-1,z=0;z<C;z++)D[z]=this.revBin(z,B,C);return D},u.prototype.revBin=function(C,D,B){if(0===C||C===B-1)return C;for(var z=0,Y=0;Y<D;Y++)z|=(1&C)<<D-Y-1,C>>=1;return z},u.prototype.permute=function(C,D,B,z,Y,G){for(var J=0;J<G;J++)z[J]=D[C[J]],Y[J]=B[C[J]]},u.prototype.transform=function(C,D,B,z,Y,G){this.permute(G,C,D,B,z,Y);for(var J=1;J<Y;J<<=1)for(var te=J<<1,X=Math.cos(2*Math.PI/te),K=Math.sin(2*Math.PI/te),ae=0;ae<Y;ae+=te)for(var U=X,V=K,q=0;q<J;q++){var ie=B[ae+q],H=z[ae+q],ee=B[ae+q+J],Q=z[ae+q+J],oe=U*ee-V*Q;Q=U*Q+V*ee,B[ae+q]=ie+(ee=oe),z[ae+q]=H+Q,B[ae+q+J]=ie-ee,z[ae+q+J]=H-Q,q!==te&&(oe=X*U-K*V,V=X*V+K*U,U=oe)}},u.prototype.guessLen13b=function(C,D){var B=1|Math.max(D,C),z=1&B,Y=0;for(B=B/2|0;B;B>>>=1)Y++;return 1<<Y+1+z},u.prototype.conjugate=function(C,D,B){if(!(B<=1))for(var z=0;z<B/2;z++){var Y=C[z];C[z]=C[B-z-1],C[B-z-1]=Y,Y=D[z],D[z]=-D[B-z-1],D[B-z-1]=-Y}},u.prototype.normalize13b=function(C,D){for(var B=0,z=0;z<D/2;z++){var Y=8192*Math.round(C[2*z+1]/D)+Math.round(C[2*z]/D)+B;C[z]=67108863&Y,B=Y<67108864?0:Y/67108864|0}return C},u.prototype.convert13b=function(C,D,B,z){for(var Y=0,G=0;G<D;G++)B[2*G]=8191&(Y+=0|C[G]),B[2*G+1]=8191&(Y>>>=13),Y>>>=13;for(G=2*D;G<z;++G)B[G]=0;n(0===Y),n(0==(-8192&Y))},u.prototype.stub=function(C){for(var D=new Array(C),B=0;B<C;B++)D[B]=0;return D},u.prototype.mulp=function(C,D,B){var z=2*this.guessLen13b(C.length,D.length),Y=this.makeRBT(z),G=this.stub(z),J=new Array(z),te=new Array(z),X=new Array(z),K=new Array(z),ae=new Array(z),U=new Array(z),V=B.words;V.length=z,this.convert13b(C.words,C.length,J,z),this.convert13b(D.words,D.length,K,z),this.transform(J,G,te,X,z,Y),this.transform(K,G,ae,U,z,Y);for(var q=0;q<z;q++){var ie=te[q]*ae[q]-X[q]*U[q];X[q]=te[q]*U[q]+X[q]*ae[q],te[q]=ie}return this.conjugate(te,X,z),this.transform(te,X,V,G,z,Y),this.conjugate(V,G,z),this.normalize13b(V,z),B.negative=C.negative^D.negative,B.length=C.length+D.length,B.strip()},t.prototype.mul=function(C){var D=new t(null);return D.words=new Array(this.length+C.length),this.mulTo(C,D)},t.prototype.mulf=function(C){var D=new t(null);return D.words=new Array(this.length+C.length),x(this,C,D)},t.prototype.imul=function(C){return this.clone().mulTo(C,this)},t.prototype.imuln=function(C){n("number"==typeof C),n(C<67108864);for(var D=0,B=0;B<this.length;B++){var z=(0|this.words[B])*C,Y=(67108863&z)+(67108863&D);D>>=26,D+=z/67108864|0,D+=Y>>>26,this.words[B]=67108863&Y}return 0!==D&&(this.words[B]=D,this.length++),this},t.prototype.muln=function(C){return this.clone().imuln(C)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(C){var D=function(G){for(var J=new Array(G.bitLength()),te=0;te<J.length;te++){var K=te%26;J[te]=(G.words[te/26|0]&1<<K)>>>K}return J}(C);if(0===D.length)return new t(1);for(var B=this,z=0;z<D.length&&0===D[z];z++,B=B.sqr());if(++z<D.length)for(var Y=B.sqr();z<D.length;z++,Y=Y.sqr())0!==D[z]&&(B=B.mul(Y));return B},t.prototype.iushln=function(C){n("number"==typeof C&&C>=0);var D,B=C%26,z=(C-B)/26,Y=67108863>>>26-B<<26-B;if(0!==B){var G=0;for(D=0;D<this.length;D++){var J=this.words[D]&Y;this.words[D]=(0|this.words[D])-J<<B|G,G=J>>>26-B}G&&(this.words[D]=G,this.length++)}if(0!==z){for(D=this.length-1;D>=0;D--)this.words[D+z]=this.words[D];for(D=0;D<z;D++)this.words[D]=0;this.length+=z}return this.strip()},t.prototype.ishln=function(C){return n(0===this.negative),this.iushln(C)},t.prototype.iushrn=function(C,D,B){var z;n("number"==typeof C&&C>=0),z=D?(D-D%26)/26:0;var Y=C%26,G=Math.min((C-Y)/26,this.length),J=67108863^67108863>>>Y<<Y,te=B;if(z-=G,z=Math.max(0,z),te){for(var X=0;X<G;X++)te.words[X]=this.words[X];te.length=G}if(0!==G)if(this.length>G)for(this.length-=G,X=0;X<this.length;X++)this.words[X]=this.words[X+G];else this.words[0]=0,this.length=1;var K=0;for(X=this.length-1;X>=0&&(0!==K||X>=z);X--){var ae=0|this.words[X];this.words[X]=K<<26-Y|ae>>>Y,K=ae&J}return te&&0!==K&&(te.words[te.length++]=K),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(C,D,B){return n(0===this.negative),this.iushrn(C,D,B)},t.prototype.shln=function(C){return this.clone().ishln(C)},t.prototype.ushln=function(C){return this.clone().iushln(C)},t.prototype.shrn=function(C){return this.clone().ishrn(C)},t.prototype.ushrn=function(C){return this.clone().iushrn(C)},t.prototype.testn=function(C){n("number"==typeof C&&C>=0);var D=C%26,B=(C-D)/26;return!(this.length<=B||!(this.words[B]&1<<D))},t.prototype.imaskn=function(C){n("number"==typeof C&&C>=0);var D=C%26,B=(C-D)/26;return n(0===this.negative,"imaskn works only with positive numbers"),this.length<=B?this:(0!==D&&B++,this.length=Math.min(B,this.length),0!==D&&(this.words[this.length-1]&=67108863^67108863>>>D<<D),this.strip())},t.prototype.maskn=function(C){return this.clone().imaskn(C)},t.prototype.iaddn=function(C){return n("number"==typeof C),n(C<67108864),C<0?this.isubn(-C):0!==this.negative?1===this.length&&(0|this.words[0])<C?(this.words[0]=C-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(C),this.negative=1,this):this._iaddn(C)},t.prototype._iaddn=function(C){this.words[0]+=C;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},t.prototype.isubn=function(C){if(n("number"==typeof C),n(C<67108864),C<0)return this.iaddn(-C);if(0!==this.negative)return this.negative=0,this.iaddn(C),this.negative=1,this;if(this.words[0]-=C,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this.strip()},t.prototype.addn=function(C){return this.clone().iaddn(C)},t.prototype.subn=function(C){return this.clone().isubn(C)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(C,D,B){var z,Y;this._expand(C.length+B);var J=0;for(z=0;z<C.length;z++){Y=(0|this.words[z+B])+J;var te=(0|C.words[z])*D;J=((Y-=67108863&te)>>26)-(te/67108864|0),this.words[z+B]=67108863&Y}for(;z<this.length-B;z++)J=(Y=(0|this.words[z+B])+J)>>26,this.words[z+B]=67108863&Y;if(0===J)return this.strip();for(n(-1===J),J=0,z=0;z<this.length;z++)J=(Y=-(0|this.words[z])+J)>>26,this.words[z]=67108863&Y;return this.negative=1,this.strip()},t.prototype._wordDiv=function(C,D){var B,z=this.clone(),Y=C,G=0|Y.words[Y.length-1];0!=(B=26-this._countBits(G))&&(Y=Y.ushln(B),z.iushln(B),G=0|Y.words[Y.length-1]);var J,te=z.length-Y.length;if("mod"!==D){(J=new t(null)).length=te+1,J.words=new Array(J.length);for(var X=0;X<J.length;X++)J.words[X]=0}var K=z.clone()._ishlnsubmul(Y,1,te);0===K.negative&&(z=K,J&&(J.words[te]=1));for(var ae=te-1;ae>=0;ae--){var U=67108864*(0|z.words[Y.length+ae])+(0|z.words[Y.length+ae-1]);for(U=Math.min(U/G|0,67108863),z._ishlnsubmul(Y,U,ae);0!==z.negative;)U--,z.negative=0,z._ishlnsubmul(Y,1,ae),z.isZero()||(z.negative^=1);J&&(J.words[ae]=U)}return J&&J.strip(),z.strip(),"div"!==D&&0!==B&&z.iushrn(B),{div:J||null,mod:z}},t.prototype.divmod=function(C,D,B){return n(!C.isZero()),this.isZero()?{div:new t(0),mod:new t(0)}:0!==this.negative&&0===C.negative?(G=this.neg().divmod(C,D),"mod"!==D&&(z=G.div.neg()),"div"!==D&&(Y=G.mod.neg(),B&&0!==Y.negative&&Y.iadd(C)),{div:z,mod:Y}):0===this.negative&&0!==C.negative?(G=this.divmod(C.neg(),D),"mod"!==D&&(z=G.div.neg()),{div:z,mod:G.mod}):0!=(this.negative&C.negative)?(G=this.neg().divmod(C.neg(),D),"div"!==D&&(Y=G.mod.neg(),B&&0!==Y.negative&&Y.isub(C)),{div:G.div,mod:Y}):C.length>this.length||this.cmp(C)<0?{div:new t(0),mod:this}:1===C.length?"div"===D?{div:this.divn(C.words[0]),mod:null}:"mod"===D?{div:null,mod:new t(this.modn(C.words[0]))}:{div:this.divn(C.words[0]),mod:new t(this.modn(C.words[0]))}:this._wordDiv(C,D);var z,Y,G},t.prototype.div=function(C){return this.divmod(C,"div",!1).div},t.prototype.mod=function(C){return this.divmod(C,"mod",!1).mod},t.prototype.umod=function(C){return this.divmod(C,"mod",!0).mod},t.prototype.divRound=function(C){var D=this.divmod(C);if(D.mod.isZero())return D.div;var B=0!==D.div.negative?D.mod.isub(C):D.mod,z=C.ushrn(1),Y=C.andln(1),G=B.cmp(z);return G<0||1===Y&&0===G?D.div:0!==D.div.negative?D.div.isubn(1):D.div.iaddn(1)},t.prototype.modn=function(C){n(C<=67108863);for(var D=(1<<26)%C,B=0,z=this.length-1;z>=0;z--)B=(D*B+(0|this.words[z]))%C;return B},t.prototype.idivn=function(C){n(C<=67108863);for(var D=0,B=this.length-1;B>=0;B--){var z=(0|this.words[B])+67108864*D;this.words[B]=z/C|0,D=z%C}return this.strip()},t.prototype.divn=function(C){return this.clone().idivn(C)},t.prototype.egcd=function(C){n(0===C.negative),n(!C.isZero());var D=this,B=C.clone();D=0!==D.negative?D.umod(C):D.clone();for(var z=new t(1),Y=new t(0),G=new t(0),J=new t(1),te=0;D.isEven()&&B.isEven();)D.iushrn(1),B.iushrn(1),++te;for(var X=B.clone(),K=D.clone();!D.isZero();){for(var ae=0,U=1;0==(D.words[0]&U)&&ae<26;++ae,U<<=1);if(ae>0)for(D.iushrn(ae);ae-- >0;)(z.isOdd()||Y.isOdd())&&(z.iadd(X),Y.isub(K)),z.iushrn(1),Y.iushrn(1);for(var V=0,q=1;0==(B.words[0]&q)&&V<26;++V,q<<=1);if(V>0)for(B.iushrn(V);V-- >0;)(G.isOdd()||J.isOdd())&&(G.iadd(X),J.isub(K)),G.iushrn(1),J.iushrn(1);D.cmp(B)>=0?(D.isub(B),z.isub(G),Y.isub(J)):(B.isub(D),G.isub(z),J.isub(Y))}return{a:G,b:J,gcd:B.iushln(te)}},t.prototype._invmp=function(C){n(0===C.negative),n(!C.isZero());var D=this,B=C.clone();D=0!==D.negative?D.umod(C):D.clone();for(var z,Y=new t(1),G=new t(0),J=B.clone();D.cmpn(1)>0&&B.cmpn(1)>0;){for(var te=0,X=1;0==(D.words[0]&X)&&te<26;++te,X<<=1);if(te>0)for(D.iushrn(te);te-- >0;)Y.isOdd()&&Y.iadd(J),Y.iushrn(1);for(var K=0,ae=1;0==(B.words[0]&ae)&&K<26;++K,ae<<=1);if(K>0)for(B.iushrn(K);K-- >0;)G.isOdd()&&G.iadd(J),G.iushrn(1);D.cmp(B)>=0?(D.isub(B),Y.isub(G)):(B.isub(D),G.isub(Y))}return(z=0===D.cmpn(1)?Y:G).cmpn(0)<0&&z.iadd(C),z},t.prototype.gcd=function(C){if(this.isZero())return C.abs();if(C.isZero())return this.abs();var D=this.clone(),B=C.clone();D.negative=0,B.negative=0;for(var z=0;D.isEven()&&B.isEven();z++)D.iushrn(1),B.iushrn(1);for(;;){for(;D.isEven();)D.iushrn(1);for(;B.isEven();)B.iushrn(1);var Y=D.cmp(B);if(Y<0){var G=D;D=B,B=G}else if(0===Y||0===B.cmpn(1))break;D.isub(B)}return B.iushln(z)},t.prototype.invm=function(C){return this.egcd(C).a.umod(C)},t.prototype.isEven=function(){return 0==(1&this.words[0])},t.prototype.isOdd=function(){return 1==(1&this.words[0])},t.prototype.andln=function(C){return this.words[0]&C},t.prototype.bincn=function(C){n("number"==typeof C);var D=C%26,B=(C-D)/26,z=1<<D;if(this.length<=B)return this._expand(B+1),this.words[B]|=z,this;for(var Y=z,G=B;0!==Y&&G<this.length;G++){var J=0|this.words[G];Y=(J+=Y)>>>26,this.words[G]=J&=67108863}return 0!==Y&&(this.words[G]=Y,this.length++),this},t.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},t.prototype.cmpn=function(C){var D,B=C<0;if(0!==this.negative&&!B)return-1;if(0===this.negative&&B)return 1;if(this.strip(),this.length>1)D=1;else{B&&(C=-C),n(C<=67108863,"Number is too big");var z=0|this.words[0];D=z===C?0:z<C?-1:1}return 0!==this.negative?0|-D:D},t.prototype.cmp=function(C){if(0!==this.negative&&0===C.negative)return-1;if(0===this.negative&&0!==C.negative)return 1;var D=this.ucmp(C);return 0!==this.negative?0|-D:D},t.prototype.ucmp=function(C){if(this.length>C.length)return 1;if(this.length<C.length)return-1;for(var D=0,B=this.length-1;B>=0;B--){var z=0|this.words[B],Y=0|C.words[B];if(z!==Y){z<Y?D=-1:z>Y&&(D=1);break}}return D},t.prototype.gtn=function(C){return 1===this.cmpn(C)},t.prototype.gt=function(C){return 1===this.cmp(C)},t.prototype.gten=function(C){return this.cmpn(C)>=0},t.prototype.gte=function(C){return this.cmp(C)>=0},t.prototype.ltn=function(C){return-1===this.cmpn(C)},t.prototype.lt=function(C){return-1===this.cmp(C)},t.prototype.lten=function(C){return this.cmpn(C)<=0},t.prototype.lte=function(C){return this.cmp(C)<=0},t.prototype.eqn=function(C){return 0===this.cmpn(C)},t.prototype.eq=function(C){return 0===this.cmp(C)},t.red=function(C){return new R(C)},t.prototype.toRed=function(C){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),C.convertTo(this)._forceRed(C)},t.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(C){return this.red=C,this},t.prototype.forceRed=function(C){return n(!this.red,"Already a number in reduction context"),this._forceRed(C)},t.prototype.redAdd=function(C){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,C)},t.prototype.redIAdd=function(C){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,C)},t.prototype.redSub=function(C){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,C)},t.prototype.redISub=function(C){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,C)},t.prototype.redShl=function(C){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,C)},t.prototype.redMul=function(C){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.mul(this,C)},t.prototype.redIMul=function(C){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,C),this.red.imul(this,C)},t.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(C){return n(this.red&&!C.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,C)};var T={k256:null,p224:null,p192:null,p25519:null};function _(C,D){this.name=C,this.p=new t(D,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function R(C){if("string"==typeof C){var D=t._prime(C);this.m=D.p,this.prime=D}else n(C.gtn(1),"modulus must be greater than 1"),this.m=C,this.prime=null}function O(C){R.call(this,C),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var C=new t(null);return C.words=new Array(Math.ceil(this.n/13)),C},_.prototype.ireduce=function(C){var D,B=C;do{this.split(B,this.tmp),D=(B=(B=this.imulK(B)).iadd(this.tmp)).bitLength()}while(D>this.n);var z=D<this.n?-1:B.ucmp(this.p);return 0===z?(B.words[0]=0,B.length=1):z>0?B.isub(this.p):void 0!==B.strip?B.strip():B._strip(),B},_.prototype.split=function(C,D){C.iushrn(this.n,0,D)},_.prototype.imulK=function(C){return C.imul(this.k)},a(w,_),w.prototype.split=function(C,D){for(var B=Math.min(C.length,9),z=0;z<B;z++)D.words[z]=C.words[z];if(D.length=B,C.length<=9)return C.words[0]=0,void(C.length=1);var Y=C.words[9];for(D.words[D.length++]=4194303&Y,z=10;z<C.length;z++){var G=0|C.words[z];C.words[z-10]=(4194303&G)<<4|Y>>>22,Y=G}C.words[z-10]=Y>>>=22,C.length-=0===Y&&C.length>10?10:9},w.prototype.imulK=function(C){C.words[C.length]=0,C.words[C.length+1]=0,C.length+=2;for(var D=0,B=0;B<C.length;B++){var z=0|C.words[B];C.words[B]=67108863&(D+=977*z),D=64*z+(D/67108864|0)}return 0===C.words[C.length-1]&&(C.length--,0===C.words[C.length-1]&&C.length--),C},a(M,_),a(I,_),a(S,_),S.prototype.imulK=function(C){for(var D=0,B=0;B<C.length;B++){var z=19*(0|C.words[B])+D,Y=67108863&z;z>>>=26,C.words[B]=Y,D=z}return 0!==D&&(C.words[C.length++]=D),C},t._prime=function(C){if(T[C])return T[C];var D;if("k256"===C)D=new w;else if("p224"===C)D=new M;else if("p192"===C)D=new I;else{if("p25519"!==C)throw new Error("Unknown prime "+C);D=new S}return T[C]=D,D},R.prototype._verify1=function(C){n(0===C.negative,"red works only with positives"),n(C.red,"red works only with red numbers")},R.prototype._verify2=function(C,D){n(0==(C.negative|D.negative),"red works only with positives"),n(C.red&&C.red===D.red,"red works only with red numbers")},R.prototype.imod=function(C){return this.prime?this.prime.ireduce(C)._forceRed(this):C.umod(this.m)._forceRed(this)},R.prototype.neg=function(C){return C.isZero()?C.clone():this.m.sub(C)._forceRed(this)},R.prototype.add=function(C,D){this._verify2(C,D);var B=C.add(D);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},R.prototype.iadd=function(C,D){this._verify2(C,D);var B=C.iadd(D);return B.cmp(this.m)>=0&&B.isub(this.m),B},R.prototype.sub=function(C,D){this._verify2(C,D);var B=C.sub(D);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},R.prototype.isub=function(C,D){this._verify2(C,D);var B=C.isub(D);return B.cmpn(0)<0&&B.iadd(this.m),B},R.prototype.shl=function(C,D){return this._verify1(C),this.imod(C.ushln(D))},R.prototype.imul=function(C,D){return this._verify2(C,D),this.imod(C.imul(D))},R.prototype.mul=function(C,D){return this._verify2(C,D),this.imod(C.mul(D))},R.prototype.isqr=function(C){return this.imul(C,C.clone())},R.prototype.sqr=function(C){return this.mul(C,C)},R.prototype.sqrt=function(C){if(C.isZero())return C.clone();var D=this.m.andln(3);if(n(D%2==1),3===D){var B=this.m.add(new t(1)).iushrn(2);return this.pow(C,B)}for(var z=this.m.subn(1),Y=0;!z.isZero()&&0===z.andln(1);)Y++,z.iushrn(1);n(!z.isZero());var G=new t(1).toRed(this),J=G.redNeg(),te=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new t(2*X*X).toRed(this);0!==this.pow(X,te).cmp(J);)X.redIAdd(J);for(var K=this.pow(X,z),ae=this.pow(C,z.addn(1).iushrn(1)),U=this.pow(C,z),V=Y;0!==U.cmp(G);){for(var q=U,ie=0;0!==q.cmp(G);ie++)q=q.redSqr();n(ie<V);var H=this.pow(K,new t(1).iushln(V-ie-1));ae=ae.redMul(H),K=H.redSqr(),U=U.redMul(K),V=ie}return ae},R.prototype.invm=function(C){var D=C._invmp(this.m);return 0!==D.negative?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},R.prototype.pow=function(C,D){if(D.isZero())return new t(1).toRed(this);if(0===D.cmpn(1))return C.clone();var B=new Array(16);B[0]=new t(1).toRed(this),B[1]=C;for(var z=2;z<B.length;z++)B[z]=this.mul(B[z-1],C);var Y=B[0],G=0,J=0,te=D.bitLength()%26;for(0===te&&(te=26),z=D.length-1;z>=0;z--){for(var X=D.words[z],K=te-1;K>=0;K--){var ae=X>>K&1;Y!==B[0]&&(Y=this.sqr(Y)),0!==ae||0!==G?(G<<=1,G|=ae,(4==++J||0===z&&0===K)&&(Y=this.mul(Y,B[G]),J=0,G=0)):J=0}te=26}return Y},R.prototype.convertTo=function(C){var D=C.umod(this.m);return D===C?D.clone():D},R.prototype.convertFrom=function(C){var D=C.clone();return D.red=null,D},t.mont=function(C){return new O(C)},a(O,R),O.prototype.convertTo=function(C){return this.imod(C.ushln(this.shift))},O.prototype.convertFrom=function(C){var D=this.imod(C.mul(this.rinv));return D.red=null,D},O.prototype.imul=function(C,D){if(C.isZero()||D.isZero())return C.words[0]=0,C.length=1,C;var B=C.imul(D),z=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Y=B.isub(z).iushrn(this.shift),G=Y;return Y.cmp(this.m)>=0?G=Y.isub(this.m):Y.cmpn(0)<0&&(G=Y.iadd(this.m)),G._forceRed(this)},O.prototype.mul=function(C,D){if(C.isZero()||D.isZero())return new t(0)._forceRed(this);var B=C.mul(D),z=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Y=B.isub(z).iushrn(this.shift),G=Y;return Y.cmp(this.m)>=0?G=Y.isub(this.m):Y.cmpn(0)<0&&(G=Y.iadd(this.m)),G._forceRed(this)},O.prototype.invm=function(C){return this.imod(C._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===b||b,this)},{buffer:2}],34:[function(m,b,y){"use strict";b.exports=function(e){var r,n,a,t=e.length,p=0;for(r=0;r<t;++r)p+=e[r].length;var s=new Array(p),i=0;for(r=0;r<t;++r){var f=e[r],c=f.length;for(n=0;n<c;++n){var l=s[i++]=new Array(c-1),h=0;for(a=0;a<c;++a)a!==n&&(l[h++]=f[a]);if(1&n){var d=l[1];l[1]=l[0],l[0]=d}}}return s}},{}],35:[function(m,b,y){"use strict";b.exports=function(l,h,d){switch(arguments.length){case 1:return f(l);case 2:return"function"==typeof h?s(l,l,h,!0):c(l,h);case 3:return s(l,h,d,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,r=m("typedarray-pool"),n=m("./lib/sweep"),a=m("./lib/intersect");function t(l,h){for(var d=0;d<l;++d)if(!(h[d]<=h[d+l]))return!0;return!1}function p(l,h,d,o){for(var x=0,u=0,T=0,_=l.length;T<_;++T){var w=l[T];if(!t(h,w)){for(var M=0;M<2*h;++M)d[x++]=w[M];o[u++]=T}}return u}function s(l,h,d,o){var x=l.length,u=h.length;if(!(x<=0||u<=0)){var T=l[0].length>>>1;if(!(T<=0)){var _,w=r.mallocDouble(2*T*x),M=r.mallocInt32(x);if((x=p(l,T,w,M))>0){if(1===T&&o)n.init(x),_=n.sweepComplete(T,d,0,x,w,M,0,x,w,M);else{var I=r.mallocDouble(2*T*u),S=r.mallocInt32(u);(u=p(h,T,I,S))>0&&(n.init(x+u),_=1===T?n.sweepBipartite(T,d,0,x,w,M,0,u,I,S):a(T,d,o,x,w,M,u,I,S),r.free(I),r.free(S))}r.free(w),r.free(M)}return _}}}function i(l,h){e.push([l,h])}function f(l){return e=[],s(l,l,i,!0),e}function c(l,h){return e=[],s(l,h,i,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(m,b,y){"use strict";function e(r){return r?function(n,a,t,p,s,i,f,c,l,h,d){return s-p>l-c?function(o,x,u,T,_,w,M,I,S,R,O){for(var C=2*o,D=T,B=C*T;D<_;++D,B+=C){var z=w[x+B],Y=w[x+B+o],G=M[D];e:for(var J=I,te=C*I;J<S;++J,te+=C){var ae=O[J];if(!(R[x+te+o]<z||Y<R[x+te])){for(var U=x+1;U<o;++U)if(w[U+o+B]<R[U+te]||R[U+o+te]<w[U+B])continue e;var ee=u(G,ae);if(void 0!==ee)return ee}}}}(n,a,t,p,s,i,f,c,l,h,d):function(o,x,u,T,_,w,M,I,S,R,O){for(var C=2*o,D=I,B=C*I;D<S;++D,B+=C){var z=R[x+B],Y=R[x+B+o],G=O[D];e:for(var J=T,te=C*T;J<_;++J,te+=C){var ae=M[J];if(!(Y<w[x+te]||w[x+te+o]<z)){for(var U=x+1;U<o;++U)if(w[U+o+te]<R[U+B]||R[U+o+B]<w[U+te])continue e;var ee=u(ae,G);if(void 0!==ee)return ee}}}}(n,a,t,p,s,i,f,c,l,h,d)}:function(n,a,t,p,s,i,f,c,l,h,d,o){return i-s>h-l?p?function(x,u,T,_,w,M,I,S,R,O,C){for(var D=2*x,B=_,z=D*_;B<w;++B,z+=D){var Y=M[u+z],G=M[u+z+x],J=I[B];e:for(var te=S,X=D*S;te<R;++te,X+=D){var K=O[u+X],ae=C[te];if(!(K<=Y||G<K)){for(var U=u+1;U<x;++U)if(M[U+x+z]<O[U+X]||O[U+x+X]<M[U+z])continue e;var ee=T(ae,J);if(void 0!==ee)return ee}}}}(n,a,t,s,i,f,c,l,h,d,o):function(x,u,T,_,w,M,I,S,R,O,C){for(var D=2*x,B=_,z=D*_;B<w;++B,z+=D){var Y=M[u+z],G=M[u+z+x],J=I[B];e:for(var te=S,X=D*S;te<R;++te,X+=D){var K=O[u+X],ae=C[te];if(!(K<Y||G<K)){for(var U=u+1;U<x;++U)if(M[U+x+z]<O[U+X]||O[U+x+X]<M[U+z])continue e;var ee=T(J,ae);if(void 0!==ee)return ee}}}}(n,a,t,s,i,f,c,l,h,d,o):p?function(x,u,T,_,w,M,I,S,R,O,C){for(var D=2*x,B=S,z=D*S;B<R;++B,z+=D){var Y=O[u+z],G=C[B];e:for(var J=_,te=D*_;J<w;++J,te+=D){var ae=I[J];if(!(Y<=M[u+te]||M[u+te+x]<Y)){for(var U=u+1;U<x;++U)if(M[U+x+te]<O[U+z]||O[U+x+z]<M[U+te])continue e;var ee=T(G,ae);if(void 0!==ee)return ee}}}}(n,a,t,s,i,f,c,l,h,d,o):function(x,u,T,_,w,M,I,S,R,O,C){for(var D=2*x,B=S,z=D*S;B<R;++B,z+=D){var Y=O[u+z],G=C[B];e:for(var J=_,te=D*_;J<w;++J,te+=D){var ae=I[J];if(!(Y<M[u+te]||M[u+te+x]<Y)){for(var U=u+1;U<x;++U)if(M[U+x+te]<O[U+z]||O[U+x+z]<M[U+te])continue e;var ee=T(ae,G);if(void 0!==ee)return ee}}}}(n,a,t,s,i,f,c,l,h,d,o)}}y.partial=e(!1),y.full=e(!0)},{}],37:[function(m,b,y){"use strict";b.exports=function(M,I,S,R,O,C,D,B,z){!function(Ie,De){var Fe=8*r.log2(De+1)*(Ie+1)|0,Ue=r.nextPow2(6*Fe);x.length<Ue&&(e.free(x),x=e.mallocInt32(Ue));var qe=r.nextPow2(2*Fe);u.length<qe&&(e.free(u),u=e.mallocDouble(qe))}(M,R+D);var Y,G=0,J=2*M;for(T(G++,0,0,R,0,D,S?16:0,-1/0,1/0),S||T(G++,0,0,D,0,R,1,-1/0,1/0);G>0;){var te=6*(G-=1),X=x[te],K=x[te+1],ae=x[te+2],U=x[te+3],V=x[te+4],q=x[te+5],ie=2*G,H=u[ie],ee=u[ie+1],Q=1&q,oe=!!(16&q),le=O,de=C,fe=B,be=z;if(Q&&(le=B,de=z,fe=O,be=C),!(2&q&&(ae=l(M,X,K,ae,le,de,ee),K>=ae)||4&q&&(K=h(M,X,K,ae,le,de,H))>=ae)){var he=ae-K,_e=V-U;if(oe){if(M*he*(he+_e)<1<<22){if(void 0!==(Y=p.scanComplete(M,X,I,K,ae,le,de,U,V,fe,be)))return Y;continue}}else{if(M*Math.min(he,_e)<128){if(void 0!==(Y=a(M,X,I,Q,K,ae,le,de,U,V,fe,be)))return Y;continue}if(M*he*_e<1<<22){if(void 0!==(Y=p.scanBipartite(M,X,I,Q,K,ae,le,de,U,V,fe,be)))return Y;continue}}var Ce=f(M,X,K,ae,le,de,H,ee);if(K<Ce)if(M*(Ce-K)<128){if(void 0!==(Y=t(M,X+1,I,K,Ce,le,de,U,V,fe,be)))return Y}else if(X===M-2){if(void 0!==(Y=Q?p.sweepBipartite(M,I,U,V,fe,be,K,Ce,le,de):p.sweepBipartite(M,I,K,Ce,le,de,U,V,fe,be)))return Y}else T(G++,X+1,K,Ce,U,V,Q,-1/0,1/0),T(G++,X+1,U,V,K,Ce,1^Q,-1/0,1/0);if(Ce<ae){var Ee=s(M,X,U,V,fe,be),Ae=fe[J*Ee+X],ze=c(M,X,Ee,V,fe,be,Ae);if(ze<V&&T(G++,X,Ce,ae,ze,V,(4|Q)+(oe?16:0),Ae,ee),U<Ee&&T(G++,X,Ce,ae,U,Ee,(2|Q)+(oe?16:0),H,Ae),Ee+1===ze){if(void 0!==(Y=oe?w(M,X,I,Ce,ae,le,de,Ee,fe,be[Ee]):_(M,X,I,Q,Ce,ae,le,de,Ee,fe,be[Ee])))return Y}else if(Ee<ze){var ve;if(oe){if(Ce<(ve=d(M,X,Ce,ae,le,de,Ae))){var Te=c(M,X,Ce,ve,le,de,Ae);if(X===M-2){if(Ce<Te&&void 0!==(Y=p.sweepComplete(M,I,Ce,Te,le,de,Ee,ze,fe,be))||Te<ve&&void 0!==(Y=p.sweepBipartite(M,I,Te,ve,le,de,Ee,ze,fe,be)))return Y}else Ce<Te&&T(G++,X+1,Ce,Te,Ee,ze,16,-1/0,1/0),Te<ve&&(T(G++,X+1,Te,ve,Ee,ze,0,-1/0,1/0),T(G++,X+1,Ee,ze,Te,ve,1,-1/0,1/0))}}else Ce<(ve=Q?o(M,X,Ce,ae,le,de,Ae):d(M,X,Ce,ae,le,de,Ae))&&(X===M-2?Y=Q?p.sweepBipartite(M,I,Ee,ze,fe,be,Ce,ve,le,de):p.sweepBipartite(M,I,Ce,ve,le,de,Ee,ze,fe,be):(T(G++,X+1,Ce,ve,Ee,ze,Q,-1/0,1/0),T(G++,X+1,Ee,ze,Ce,ve,1^Q,-1/0,1/0)))}}}}};var e=m("typedarray-pool"),r=m("bit-twiddle"),n=m("./brute"),a=n.partial,t=n.full,p=m("./sweep"),s=m("./median"),i=m("./partition"),f=i("!(lo>=p0)&&!(p1>=hi)"),c=i("lo===p0"),l=i("lo<p0"),h=i("hi<=p0"),d=i("lo<=p0&&p0<=hi"),o=i("lo<p0&&p0<=hi"),x=e.mallocInt32(1024),u=e.mallocDouble(1024);function T(M,I,S,R,O,C,D,B,z){var Y=6*M;x[Y]=I,x[Y+1]=S,x[Y+2]=R,x[Y+3]=O,x[Y+4]=C,x[Y+5]=D;var G=2*M;u[G]=B,u[G+1]=z}function _(M,I,S,R,O,C,D,B,z,Y,G){var J=2*M,te=z*J,X=Y[te+I];e:for(var K=O,ae=O*J;K<C;++K,ae+=J){var U=D[ae+I],V=D[ae+I+M];if(!(X<U||V<X||R&&X===U)){for(var q,ie=B[K],H=I+1;H<M;++H)if(U=D[ae+H],(V=D[ae+H+M])<Y[te+H]||Y[te+H+M]<U)continue e;if(void 0!==(q=R?S(G,ie):S(ie,G)))return q}}}function w(M,I,S,R,O,C,D,B,z,Y){var G=2*M,J=B*G,te=z[J+I];e:for(var X=R,K=R*G;X<O;++X,K+=G){var ae=D[X];if(ae!==Y){var U=C[K+I],V=C[K+I+M];if(!(te<U||V<te)){for(var q=I+1;q<M;++q)if(U=C[K+q],(V=C[K+q+M])<z[J+q]||z[J+q+M]<U)continue e;var ee=S(ae,Y);if(void 0!==ee)return ee}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(m,b,y){"use strict";b.exports=function(n,a,t,p,s,i){if(p<=t+1)return t;for(var f=t,c=p,l=p+t>>>1,h=2*n,d=l,o=s[h*l+a];f<c;){if(c-f<8){r(n,a,f,c,s,i),o=s[h*l+a];break}var x=c-f,u=Math.random()*x+f|0,T=s[h*u+a],_=Math.random()*x+f|0,w=s[h*_+a],M=Math.random()*x+f|0,I=s[h*M+a];T<=w?I>=w?(d=_,o=w):T>=I?(d=u,o=T):(d=M,o=I):w>=I?(d=_,o=w):I>=T?(d=u,o=T):(d=M,o=I);for(var S=h*(c-1),R=h*d,O=0;O<h;++O,++S,++R){var C=s[S];s[S]=s[R],s[R]=C}var D=i[c-1];for(i[c-1]=i[d],i[d]=D,S=h*(c-1),R=h*(d=e(n,a,f,c-1,s,i,o)),O=0;O<h;++O,++S,++R)C=s[S],s[S]=s[R],s[R]=C;if(D=i[c-1],i[c-1]=i[d],i[d]=D,l<d){for(c=d-1;f<c&&s[h*(c-1)+a]===o;)c-=1;c+=1}else{if(!(d<l))break;for(f=d+1;f<c&&s[h*f+a]===o;)f+=1}}return e(n,a,t,l,s,i,s[h*l+a])};var e=m("./partition")("lo<p0");function r(n,a,t,p,s,i){for(var f=2*n,c=f*(t+1)+a,l=t+1;l<p;++l,c+=f)for(var h=s[c],d=l,o=f*(l-1);d>t&&s[o+a]>h;--d,o-=f){for(var x=o,u=o+f,T=0;T<f;++T,++x,++u){var _=s[x];s[x]=s[u],s[u]=_}var w=i[d];i[d]=i[d-1],i[d-1]=w}}},{"./partition":39}],39:[function(m,b,y){"use strict";b.exports=function(r){return e[r]};var e={"lo===p0":function(r,n,a,t,p,s,i){for(var f=2*r,c=f*a,l=c,h=a,d=n,o=a;t>o;++o,c+=f)if(p[c+d]===i)if(h===o)h+=1,l+=f;else{for(var x=0;f>x;++x){var u=p[c+x];p[c+x]=p[l],p[l++]=u}var T=s[o];s[o]=s[h],s[h++]=T}return h},"lo<p0":function(r,n,a,t,p,s,i){for(var f=2*r,c=f*a,l=c,h=a,d=n,o=a;t>o;++o,c+=f)if(p[c+d]<i)if(h===o)h+=1,l+=f;else{for(var x=0;f>x;++x){var u=p[c+x];p[c+x]=p[l],p[l++]=u}var T=s[o];s[o]=s[h],s[h++]=T}return h},"lo<=p0":function(r,n,a,t,p,s,i){for(var f=2*r,c=f*a,l=c,h=a,d=r+n,o=a;t>o;++o,c+=f)if(p[c+d]<=i)if(h===o)h+=1,l+=f;else{for(var x=0;f>x;++x){var u=p[c+x];p[c+x]=p[l],p[l++]=u}var T=s[o];s[o]=s[h],s[h++]=T}return h},"hi<=p0":function(r,n,a,t,p,s,i){for(var f=2*r,c=f*a,l=c,h=a,d=r+n,o=a;t>o;++o,c+=f)if(p[c+d]<=i)if(h===o)h+=1,l+=f;else{for(var x=0;f>x;++x){var u=p[c+x];p[c+x]=p[l],p[l++]=u}var T=s[o];s[o]=s[h],s[h++]=T}return h},"lo<p0&&p0<=hi":function(r,n,a,t,p,s,i){for(var f=2*r,c=f*a,l=c,h=a,d=n,o=r+n,x=a;t>x;++x,c+=f)if(p[c+d]<i&&i<=p[c+o])if(h===x)h+=1,l+=f;else{for(var _=0;f>_;++_){var w=p[c+_];p[c+_]=p[l],p[l++]=w}var M=s[x];s[x]=s[h],s[h++]=M}return h},"lo<=p0&&p0<=hi":function(r,n,a,t,p,s,i){for(var f=2*r,c=f*a,l=c,h=a,d=n,o=r+n,x=a;t>x;++x,c+=f)if(p[c+d]<=i&&i<=p[c+o])if(h===x)h+=1,l+=f;else{for(var _=0;f>_;++_){var w=p[c+_];p[c+_]=p[l],p[l++]=w}var M=s[x];s[x]=s[h],s[h++]=M}return h},"!(lo>=p0)&&!(p1>=hi)":function(r,n,a,t,p,s,i,f){for(var c=2*r,l=c*a,h=l,d=a,o=n,x=r+n,u=a;t>u;++u,l+=c)if(!(p[l+o]>=i||f>=p[l+x]))if(d===u)d+=1,h+=c;else{for(var w=0;c>w;++w){var M=p[l+w];p[l+w]=p[h],p[h++]=M}var I=s[u];s[u]=s[d],s[d++]=I}return d}}},{}],40:[function(m,b,y){"use strict";function e(i,f,c){for(var l=2*(i+1),h=i+1;h<=f;++h){for(var d=c[l++],o=c[l++],x=h,u=l-2;x-- >i;){var T=c[u-2],_=c[u-1];if(T<d||T===d&&_<o)break;c[u]=T,c[u+1]=_,u-=2}c[u]=d,c[u+1]=o}}function r(i,f,c){var l=c[i*=2],h=c[i+1];c[i]=c[f*=2],c[i+1]=c[f+1],c[f]=l,c[f+1]=h}function n(i,f,c){c[i*=2]=c[f*=2],c[i+1]=c[f+1]}function a(i,f,c,l){c*=2;var h=l[i*=2],d=l[i+1];l[i]=l[f*=2],l[i+1]=l[f+1],l[f]=l[c],l[f+1]=l[c+1],l[c]=h,l[c+1]=d}function t(i,f,c,l,h){h[i*=2]=h[f*=2],h[f]=c,h[i+1]=h[f+1],h[f+1]=l}function p(i,f,c){var l=c[i*=2],h=c[f*=2];return!(l<h)&&(l!==h||c[i+1]>c[f+1])}function s(i,f,c,l){var h=l[i*=2];return h<f||h===f&&l[i+1]<c}b.exports=function(i,f){f<=128?e(0,f-1,i):function c(l,h,d){var o=(h-l+1)/6|0,x=l+o,u=h-o,T=l+h>>1,_=T-o,w=T+o,M=x,I=_,S=T,R=w,O=u,C=l+1,D=h-1,B=0;p(M,I,d)&&(B=M,M=I,I=B),p(R,O,d)&&(B=R,R=O,O=B),p(M,S,d)&&(B=M,M=S,S=B),p(I,S,d)&&(B=I,I=S,S=B),p(M,R,d)&&(B=M,M=R,R=B),p(S,R,d)&&(B=S,S=R,R=B),p(I,O,d)&&(B=I,I=O,O=B),p(I,S,d)&&(B=I,I=S,S=B),p(R,O,d)&&(B=R,R=O,O=B);for(var z=d[2*I],Y=d[2*I+1],G=d[2*R],J=d[2*R+1],te=2*M,X=2*S,K=2*O,ae=2*x,U=2*T,V=2*u,q=0;q<2;++q){var H=d[X+q],ee=d[K+q];d[ae+q]=d[te+q],d[U+q]=H,d[V+q]=ee}n(_,l,d),n(w,h,d);for(var Q=C;Q<=D;++Q)if(s(Q,z,Y,d))Q!==C&&r(Q,C,d),++C;else if(!s(Q,G,J,d))for(;;){if(s(D,G,J,d)){s(D,z,Y,d)?(a(Q,C,D,d),++C,--D):(r(Q,D,d),--D);break}if(--D<Q)break}t(l,C-1,z,Y,d),t(h,D+1,G,J,d),C-2-l<=32?e(l,C-2,d):c(l,C-2,d),h-(D+2)<=32?e(D+2,h,d):c(D+2,h,d),D-C<=32?e(C,D,d):c(C,D,d)}(0,f-1,i)}},{}],41:[function(m,b,y){"use strict";b.exports={init:function(d){var o=r.nextPow2(d);a.length<o&&(e.free(a),a=e.mallocInt32(o)),t.length<o&&(e.free(t),t=e.mallocInt32(o)),p.length<o&&(e.free(p),p=e.mallocInt32(o)),s.length<o&&(e.free(s),s=e.mallocInt32(o)),i.length<o&&(e.free(i),i=e.mallocInt32(o)),f.length<o&&(e.free(f),f=e.mallocInt32(o));var x=8*o;c.length<x&&(e.free(c),c=e.mallocDouble(x))},sweepBipartite:function(d,o,x,u,T,_,w,M,I,S){for(var R=0,O=2*d,C=d-1,D=O-1,B=x;B<u;++B){var z=_[B],Y=O*B;c[R++]=T[Y+C],c[R++]=-(z+1),c[R++]=T[Y+D],c[R++]=z}for(B=w;B<M;++B){z=S[B]+(1<<28);var G=O*B;c[R++]=I[G+C],c[R++]=-z,c[R++]=I[G+D],c[R++]=z}var J=R>>>1;n(c,J);var te=0,X=0;for(B=0;B<J;++B){var K=0|c[2*B+1];if(K>=1<<28)l(p,s,X--,K=K-(1<<28)|0);else if(K>=0)l(a,t,te--,K);else if(K<=-(1<<28)){K=-K-(1<<28)|0;for(var ae=0;ae<te;++ae)if(void 0!==(U=o(a[ae],K)))return U;h(p,s,X++,K)}else{for(K=-K-1|0,ae=0;ae<X;++ae){var U;if(void 0!==(U=o(K,p[ae])))return U}h(a,t,te++,K)}}},sweepComplete:function(d,o,x,u,T,_,w,M,I,S){for(var R=0,O=2*d,C=d-1,D=O-1,B=x;B<u;++B){var z=_[B]+1<<1,Y=O*B;c[R++]=T[Y+C],c[R++]=-z,c[R++]=T[Y+D],c[R++]=z}for(B=w;B<M;++B){z=S[B]+1<<1;var G=O*B;c[R++]=I[G+C],c[R++]=1|-z,c[R++]=I[G+D],c[R++]=1|z}var J=R>>>1;n(c,J);var te=0,X=0,K=0;for(B=0;B<J;++B){var ae=0|c[2*B+1],U=1&ae;if(B<J-1&&ae>>1==c[2*B+3]>>1&&(U=2,B+=1),ae<0){for(var V=-(ae>>1)-1,q=0;q<K;++q)if(void 0!==(ie=o(i[q],V)))return ie;if(0!==U)for(q=0;q<te;++q)if(void 0!==(ie=o(a[q],V)))return ie;if(1!==U)for(q=0;q<X;++q){var ie;if(void 0!==(ie=o(p[q],V)))return ie}0===U?h(a,t,te++,V):1===U?h(p,s,X++,V):2===U&&h(i,f,K++,V)}else V=(ae>>1)-1,0===U?l(a,t,te--,V):1===U?l(p,s,X--,V):2===U&&l(i,f,K--,V)}},scanBipartite:function(d,o,x,u,T,_,w,M,I,S,R,O){var C=0,D=2*d,B=o,z=o+d,Y=1,G=1;u?G=1<<28:Y=1<<28;for(var J=T;J<_;++J){var te=J+Y,X=D*J;c[C++]=w[X+B],c[C++]=-te,c[C++]=w[X+z],c[C++]=te}for(J=I;J<S;++J)te=J+G,c[C++]=R[D*J+B],c[C++]=-te;var ae=C>>>1;n(c,ae);var U=0;for(J=0;J<ae;++J){var V=0|c[2*J+1];if(V<0){var q=!1;if((te=-V)>=1<<28?(q=!u,te-=1<<28):(q=!!u,te-=1),q)h(a,t,U++,te);else{var ie=O[te],H=D*te,ee=R[H+o+1],Q=R[H+o+1+d];e:for(var oe=0;oe<U;++oe){var le=a[oe],de=D*le;if(!(Q<w[de+o+1]||w[de+o+1+d]<ee)){for(var fe=o+2;fe<d;++fe)if(R[H+fe+d]<w[de+fe]||w[de+fe+d]<R[H+fe])continue e;var be,he=M[le];if(void 0!==(be=u?x(ie,he):x(he,ie)))return be}}}}else l(a,t,U--,V-Y)}},scanComplete:function(d,o,x,u,T,_,w,M,I,S,R){for(var O=0,C=2*d,D=o,B=o+d,z=u;z<T;++z){var Y=z+268435456,G=C*z;c[O++]=_[G+D],c[O++]=-Y,c[O++]=_[G+B],c[O++]=Y}for(z=M;z<I;++z)Y=z+1,c[O++]=S[C*z+D],c[O++]=-Y;var te=O>>>1;n(c,te);var X=0;for(z=0;z<te;++z){var K=0|c[2*z+1];if(K<0)if((Y=-K)>=1<<28)a[X++]=Y-(1<<28);else{var ae=R[Y-=1],U=C*Y,V=S[U+o+1],q=S[U+o+1+d];e:for(var ie=0;ie<X;++ie){var H=a[ie],ee=w[H];if(ee===ae)break;var Q=C*H;if(!(q<_[Q+o+1]||_[Q+o+1+d]<V)){for(var oe=o+2;oe<d;++oe)if(S[U+oe+d]<_[Q+oe]||_[Q+oe+d]<S[U+oe])continue e;var le=x(ee,ae);if(void 0!==le)return le}}}else{for(Y=K-(1<<28),ie=X-1;ie>=0;--ie)if(a[ie]===Y){for(oe=ie+1;oe<X;++oe)a[oe-1]=a[oe];break}--X}}}};var e=m("typedarray-pool"),r=m("bit-twiddle"),n=m("./sort"),a=e.mallocInt32(1024),t=e.mallocInt32(1024),p=e.mallocInt32(1024),s=e.mallocInt32(1024),i=e.mallocInt32(1024),f=e.mallocInt32(1024),c=e.mallocDouble(8192);function l(d,o,x,u){var T=o[u],_=d[x-1];d[T]=_,o[_]=T}function h(d,o,x,u){d[x]=u,o[u]=x}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(m,b,y){"use strict";var e=m("./lib/monotone"),r=m("./lib/triangulation"),n=m("./lib/delaunay"),a=m("./lib/filter");function t(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function p(i,f){return i[0]-f[0]||i[1]-f[1]}function s(i,f,c){return f in i?i[f]:c}b.exports=function(i,f,c){Array.isArray(f)?(c=c||{},f=f||[]):(c=f||{},f=[]);var l=!!s(c,"delaunay",!0),h=!!s(c,"interior",!0),d=!!s(c,"exterior",!0),o=!!s(c,"infinity",!1);if(!h&&!d||0===i.length)return[];var x=e(i,f);if(l||h!==d||o){for(var u=r(i.length,f.map(t).sort(p)),T=0;T<x.length;++T){var _=x[T];u.addTriangle(_[0],_[1],_[2])}return l&&n(i,u),d?h?o?a(u,0,o):u.cells():a(u,1,o):a(u,-1)}return x}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(m,b,y){"use strict";var e=m("robust-in-sphere")[4];function r(n,a,t,p,s,i){var f=a.opposite(p,s);if(!(f<0)){if(s<p){var c=p;p=s,s=c,c=i,i=f,f=c}a.isConstraint(p,s)||e(n[p],n[s],n[i],n[f])<0&&t.push(p,s)}}m("binary-search-bounds"),b.exports=function(n,a){for(var t=[],p=n.length,s=a.stars,i=0;i<p;++i)for(var f=s[i],c=1;c<f.length;c+=2)if(!((o=f[c])<i||a.isConstraint(i,o))){for(var l=f[c-1],h=-1,d=1;d<f.length;d+=2)if(f[d-1]===o){h=f[d];break}h<0||e(n[i],n[o],n[l],n[h])<0&&t.push(i,o)}for(;t.length>0;){for(var o=t.pop(),x=(l=-1,h=-1,f=s[i=t.pop()],1);x<f.length;x+=2){var u=f[x-1],T=f[x];u===o?h=T:T===o&&(l=u)}l<0||h<0||e(n[i],n[o],n[l],n[h])>=0||(a.flip(i,o),r(n,a,t,l,i,h),r(n,a,t,i,h,l),r(n,a,t,h,o,l),r(n,a,t,o,l,h))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(m,b,y){"use strict";var e,r=m("binary-search-bounds");function n(t,p,s,i,f,c,l){this.cells=t,this.neighbor=p,this.flags=i,this.constraint=s,this.active=f,this.next=c,this.boundary=l}function a(t,p){return t[0]-p[0]||t[1]-p[1]||t[2]-p[2]}b.exports=function(t,p,s){var i=function(I,S){for(var R=I.cells(),O=R.length,C=0;C<O;++C){var D=(U=R[C])[0],B=U[1],z=U[2];B<z?B<D&&(U[0]=B,U[1]=z,U[2]=D):z<D&&(U[0]=z,U[1]=D,U[2]=B)}R.sort(a);var Y=new Array(O);for(C=0;C<Y.length;++C)Y[C]=0;var G=[],J=[],te=new Array(3*O),X=new Array(3*O),K=null;S&&(K=[]);var ae=new n(R,te,X,Y,G,J,K);for(C=0;C<O;++C)for(var U=R[C],V=0;V<3;++V){var q=te[3*C+V]=ae.locate(B=U[(V+1)%3],D=U[V],I.opposite(B,D)),ie=X[3*C+V]=I.isConstraint(D,B);q<0&&(ie?J.push(C):(G.push(C),Y[C]=1),S&&K.push([B,D,-1]))}return ae}(t,s);if(0===p)return s?i.cells.concat(i.boundary):i.cells;for(var f=1,c=i.active,l=i.next,h=i.flags,d=i.cells,o=i.constraint,x=i.neighbor;c.length>0||l.length>0;){for(;c.length>0;){var u=c.pop();if(h[u]!==-f){h[u]=f;for(var T=0;T<3;++T){var _=x[3*u+T];_>=0&&0===h[_]&&(o[3*u+T]?l.push(_):(c.push(_),h[_]=f))}}}var w=l;l=c,c=w,l.length=0,f=-f}var M=function(I,S,R){for(var O=0,C=0;C<I.length;++C)S[C]===R&&(I[O++]=I[C]);return I.length=O,I}(d,h,p);return s?M.concat(i.boundary):M},n.prototype.locate=(e=[0,0,0],function(t,p,s){var i=t,f=p,c=s;return p<s?p<t&&(i=p,f=s,c=t):s<t&&(i=s,f=t,c=p),i<0?-1:(e[0]=i,e[1]=f,e[2]=c,r.eq(this.cells,e,a))})},{"binary-search-bounds":31}],45:[function(m,b,y){"use strict";var e=m("binary-search-bounds"),r=m("robust-orientation")[3];function n(l,h,d,o,x){this.a=l,this.b=h,this.idx=d,this.lowerIds=o,this.upperIds=x}function a(l,h,d,o){this.a=l,this.b=h,this.type=d,this.idx=o}function t(l,h){var d=l.a[0]-h.a[0]||l.a[1]-h.a[1]||l.type-h.type;return d||(0!==l.type&&(d=r(l.a,l.b,h.b))?d:l.idx-h.idx)}function p(l,h){return r(l.a,l.b,h)}function s(l,h,d,o,x){for(var u=e.lt(h,o,p),T=e.gt(h,o,p),_=u;_<T;++_){for(var w=h[_],M=w.lowerIds,I=M.length;I>1&&r(d[M[I-2]],d[M[I-1]],o)>0;)l.push([M[I-1],M[I-2],x]),I-=1;M.length=I,M.push(x);var S=w.upperIds;for(I=S.length;I>1&&r(d[S[I-2]],d[S[I-1]],o)<0;)l.push([S[I-2],S[I-1],x]),I-=1;S.length=I,S.push(x)}}function i(l,h){var d;return(d=l.a[0]<h.a[0]?r(l.a,l.b,h.a):r(h.b,h.a,l.a))?d:(d=h.b[0]<l.b[0]?r(l.a,l.b,h.b):r(h.b,h.a,l.b))||l.idx-h.idx}function f(l,h,d){var o=e.le(l,d,i),x=l[o],u=x.upperIds,T=u[u.length-1];x.upperIds=[T],l.splice(o+1,0,new n(d.a,d.b,d.idx,[T],u))}function c(l,h,d){var o=d.a;d.a=d.b,d.b=o;var x=e.eq(l,d,i);l[x-1].upperIds=l[x].upperIds,l.splice(x,1)}b.exports=function(l,h){for(var d=l.length,o=h.length,x=[],u=0;u<d;++u)x.push(new a(l[u],null,0,u));for(u=0;u<o;++u){var T=h[u],_=l[T[0]],w=l[T[1]];_[0]<w[0]?x.push(new a(_,w,2,u),new a(w,_,1,u)):_[0]>w[0]&&x.push(new a(w,_,2,u),new a(_,w,1,u))}x.sort(t);for(var M=x[0].a[0]-(1+Math.abs(x[0].a[0]))*Math.pow(2,-52),I=[new n([M,1],[M,0],-1,[],[],[],[])],S=[],R=(u=0,x.length);u<R;++u){var O=x[u],C=O.type;0===C?s(S,I,l,O.a,O.idx):2===C?f(I,0,O):c(I,0,O)}return S}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(m,b,y){"use strict";var e=m("binary-search-bounds");function r(t,p){this.stars=t,this.edges=p}b.exports=function(t,p){for(var s=new Array(t),i=0;i<t;++i)s[i]=[];return new r(s,p)};var n=r.prototype;function a(t,p,s){for(var i=1,f=t.length;i<f;i+=2)if(t[i-1]===p&&t[i]===s)return t[i-1]=t[f-2],t[i]=t[f-1],void(t.length=f-2)}n.isConstraint=function(){var t=[0,0];function p(s,i){return s[0]-i[0]||s[1]-i[1]}return function(s,i){return t[0]=Math.min(s,i),t[1]=Math.max(s,i),e.eq(this.edges,t,p)>=0}}(),n.removeTriangle=function(t,p,s){var i=this.stars;a(i[t],p,s),a(i[p],s,t),a(i[s],t,p)},n.addTriangle=function(t,p,s){var i=this.stars;i[t].push(p,s),i[p].push(s,t),i[s].push(t,p)},n.opposite=function(t,p){for(var s=this.stars[p],i=1,f=s.length;i<f;i+=2)if(s[i]===t)return s[i-1];return-1},n.flip=function(t,p){var s=this.opposite(t,p),i=this.opposite(p,t);this.removeTriangle(t,p,s),this.removeTriangle(p,t,i),this.addTriangle(t,i,s),this.addTriangle(p,s,i)},n.edges=function(){for(var t=this.stars,p=[],s=0,i=t.length;s<i;++s)for(var f=t[s],c=0,l=f.length;c<l;c+=2)p.push([f[c],f[c+1]]);return p},n.cells=function(){for(var t=this.stars,p=[],s=0,i=t.length;s<i;++s)for(var f=t[s],c=0,l=f.length;c<l;c+=2){var h=f[c],d=f[c+1];s<Math.min(h,d)&&p.push([s,h,d])}return p}},{"binary-search-bounds":31}],47:[function(m,b,y){"use strict";b.exports=function(e){for(var r=1,n=1;n<e.length;++n)for(var a=0;a<n;++a)if(e[n]<e[a])r=-r;else if(e[a]===e[n])return 0;return r}},{}],48:[function(m,b,y){"use strict";var e=m("dup"),r=m("robust-linear-solve");function n(p,s){for(var i=0,f=p.length,c=0;c<f;++c)i+=p[c]*s[c];return i}function a(p){var s=p.length;if(0===s)return[];var i=e([p.length+1,p.length+1],1),f=e([p.length+1],1);i[s][s]=0;for(var c=0;c<s;++c){for(var l=0;l<=c;++l)i[l][c]=i[c][l]=2*n(p[c],p[l]);f[c]=n(p[c],p[c])}var h=r(i,f),d=0,o=h[s+1];for(c=0;c<o.length;++c)d+=o[c];var x=new Array(s);for(c=0;c<s;++c){o=h[c];var u=0;for(l=0;l<o.length;++l)u+=o[l];x[c]=u/d}return x}function t(p){if(0===p.length)return[];for(var s=p[0].length,i=e([s]),f=a(p),c=0;c<p.length;++c)for(var l=0;l<s;++l)i[l]+=p[c][l]*f[c];return i}t.barycenetric=a,b.exports=t},{dup:65,"robust-linear-solve":283}],49:[function(m,b,y){b.exports=function(r){for(var n=e(r),a=0,t=0;t<r.length;++t)for(var p=r[t],s=0;s<n.length;++s)a+=Math.pow(p[s]-n[s],2);return Math.sqrt(a/r.length)};var e=m("circumcenter")},{circumcenter:48}],50:[function(m,b,y){"use strict";b.exports=function(T,_,w){var M,C,B,z;if(w){M=_;for(var I=new Array(_.length),S=0;S<_.length;++S){var R=_[S];I[S]=[R[0],R[1],w[S]]}_=I}for(var O=(B=!!w,void 0,x(_,z=h(C=T,[],l(C)),B),!!z);u(T,_,!!w);)O=!0;if(w&&O)for(M.length=0,w.length=0,S=0;S<_.length;++S)M.push([(R=_[S])[0],R[1]]),w.push(R[2]);return O};var e=m("union-find"),r=m("box-intersect"),n=m("robust-segment-intersect"),a=m("big-rat"),t=m("big-rat/cmp"),p=m("big-rat/to-float"),s=m("rat-vec"),i=m("nextafter"),f=m("./lib/rat-seg-intersect");function c(T){var _=p(T);return[i(_,-1/0),i(_,1/0)]}function l(T){for(var _=new Array(T.length),w=0;w<T.length;++w){var M=T[w];_[w]=[i(M[0],-1/0),i(M[1],-1/0),i(M[0],1/0),i(M[1],1/0)]}return _}function h(T,_,w){for(var M=_.length,I=new e(M),S=[],R=0;R<_.length;++R){var O=_[R],C=c(O[0]),D=c(O[1]);S.push([i(C[0],-1/0),i(D[0],-1/0),i(C[1],1/0),i(D[1],1/0)])}r(S,function(J,te){I.link(J,te)});var B=!0,z=new Array(M);for(R=0;R<M;++R)(G=I.find(R))!==R&&(B=!1,T[G]=[Math.min(T[R][0],T[G][0]),Math.min(T[R][1],T[G][1])]);if(B)return null;var Y=0;for(R=0;R<M;++R){var G;(G=I.find(R))===R?(z[R]=Y,T[Y++]=T[R]):z[R]=-1}for(T.length=Y,R=0;R<M;++R)z[R]<0&&(z[R]=z[I.find(R)]);return z}function d(T,_){return T[0]-_[0]||T[1]-_[1]}function o(T,_){return T[0]-_[0]||T[1]-_[1]||(T[2]<_[2]?-1:T[2]>_[2]?1:0)}function x(T,_,w){if(0!==T.length){if(_)for(var M=0;M<T.length;++M){var I=_[(R=T[M])[0]],S=_[R[1]];R[0]=Math.min(I,S),R[1]=Math.max(I,S)}else for(M=0;M<T.length;++M){var R;I=(R=T[M])[0],S=R[1],R[0]=Math.min(I,S),R[1]=Math.max(I,S)}T.sort(w?o:d);var O=1;for(M=1;M<T.length;++M){var C=T[M-1],D=T[M];(D[0]!==C[0]||D[1]!==C[1]||w&&D[2]!==C[2])&&(T[O++]=D)}T.length=O}}function u(T,_,w){var C,D,z,M=function(C,D){for(var B=new Array(D.length),z=0;z<D.length;++z){var Y=D[z],G=C[Y[0]],J=C[Y[1]];B[z]=[i(Math.min(G[0],J[0]),-1/0),i(Math.min(G[1],J[1]),-1/0),i(Math.max(G[0],J[0]),1/0),i(Math.max(G[1],J[1]),1/0)]}return B}(T,_),I=(C=T,D=_,z=[],r(M,function(Y,G){var J=D[Y],te=D[G];J[0]!==te[0]&&J[0]!==te[1]&&J[1]!==te[0]&&J[1]!==te[1]&&n(C[J[0]],C[J[1]],C[te[0]],C[te[1]])&&z.push([Y,G])}),z),R=function(C,D,B,z){var Y=[];return r(B,z,function(G,J){var te=D[G];if(te[0]!==J&&te[1]!==J){var X=C[J];n(C[te[0]],C[te[1]],X,X)&&Y.push([G,J])}}),Y}(T,_,M,l(T)),O=h(T,function(C,D,B,z,Y){var G,J,te=C.map(function(_e){return[a(_e[0]),a(_e[1])]});for(G=0;G<B.length;++G){var X=B[G],K=X[1],ae=D[J=X[0]],U=D[K],V=f(s(C[ae[0]]),s(C[ae[1]]),s(C[U[0]]),s(C[U[1]]));if(V){var q=C.length;C.push([p(V[0]),p(V[1])]),te.push(V),z.push([J,q],[K,q])}}for(z.sort(function(_e,Ce){if(_e[0]!==Ce[0])return _e[0]-Ce[0];var Ee=te[_e[1]],Ae=te[Ce[1]];return t(Ee[0],Ae[0])||t(Ee[1],Ae[1])}),G=z.length-1;G>=0;--G){var ie=D[J=(be=z[G])[0]],H=ie[0],ee=ie[1],Q=C[H],oe=C[ee];if((Q[0]-oe[0]||Q[1]-oe[1])<0){var le=H;H=ee,ee=le}ie[0]=H;var de,fe=ie[1]=be[1];for(Y&&(de=ie[2]);G>0&&z[G-1][0]===J;){var be,he=(be=z[--G])[1];D.push(Y?[fe,he,de]:[fe,he]),fe=he}D.push(Y?[fe,ee,de]:[fe,ee])}return te}(T,_,I,R,w));return x(_,O,w),!!O||I.length>0||R.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(m,b,y){"use strict";b.exports=function(f,c,l,h){var d=t(c,f),o=t(h,l),x=i(d,o);if(0===a(x))return null;var T=i(o,t(f,l)),_=r(T,x),w=s(d,_);return p(f,w)};var e=m("big-rat/mul"),r=m("big-rat/div"),n=m("big-rat/sub"),a=m("big-rat/sign"),t=m("rat-vec/sub"),p=m("rat-vec/add"),s=m("rat-vec/muls");function i(f,c){return n(e(f[0],c[1]),e(f[1],c[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(m,b,y){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(m,b,y){"use strict";var e=m("./colorScale"),r=m("lerp");function n(p){return[p[0]/255,p[1]/255,p[2]/255,p[3]]}function a(p){for(var s,i="#",f=0;f<3;++f)i+=("00"+(s=(s=p[f]).toString(16))).substr(s.length);return i}function t(p){return"rgba("+p.join(",")+")"}b.exports=function(p){var s,i,f,c,l,h,d,o,x,u;if(p||(p={}),o=(p.nshades||72)-1,d=p.format||"hex",(h=p.colormap)||(h="jet"),"string"==typeof h){if(h=h.toLowerCase(),!e[h])throw Error(h+" not a supported colorscale");l=e[h]}else{if(!Array.isArray(h))throw Error("unsupported colormap option",h);l=h.slice()}if(l.length>o+1)throw new Error(h+" map requires nshades to be at least size "+l.length);x=Array.isArray(p.alpha)?2!==p.alpha.length?[1,1]:p.alpha.slice():"number"==typeof p.alpha?[p.alpha,p.alpha]:[1,1],s=l.map(function(I){return Math.round(I.index*o)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var T=l.map(function(I,S){var R=l[S].index,O=l[S].rgb.slice();return 4===O.length&&O[3]>=0&&O[3]<=1||(O[3]=x[0]+(x[1]-x[0])*R),O}),_=[];for(u=0;u<s.length-1;++u){c=s[u+1]-s[u],i=T[u],f=T[u+1];for(var w=0;w<c;w++){var M=w/c;_.push([Math.round(r(i[0],f[0],M)),Math.round(r(i[1],f[1],M)),Math.round(r(i[2],f[2],M)),r(i[3],f[3],M)])}}return _.push(l[l.length-1].rgb.concat(x[1])),"hex"===d?_=_.map(a):"rgbaString"===d?_=_.map(t):"float"===d&&(_=_.map(n)),_}},{"./colorScale":52,lerp:240}],54:[function(m,b,y){"use strict";b.exports=function(s,i,f,c){var l=e(i,f,c);if(0===l){var h=r(e(s,i,f)),d=r(e(s,i,c));if(h===d){if(0===h){var o=p(s,i,f);return o===p(s,i,c)?0:o?1:-1}return 0}return 0===d?h>0||p(s,i,c)?-1:1:0===h?d>0||p(s,i,f)?1:-1:r(d-h)}var u=e(s,i,f);return u>0?l>0&&e(s,i,c)>0?1:-1:u<0?l>0||e(s,i,c)>0?1:-1:e(s,i,c)>0||p(s,i,f)?1:-1};var e=m("robust-orientation"),r=m("signum"),n=m("two-sum"),a=m("robust-product"),t=m("robust-sum");function p(s,i,f){var c=n(s[0],-i[0]),l=n(s[1],-i[1]),h=n(f[0],-i[0]),d=n(f[1],-i[1]),o=t(a(c,h),a(l,d));return o[o.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(m,b,y){"use strict";b.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(m,b,y){b.exports=function(n,a){var t=n.length,p=n.length-a.length;if(p)return p;switch(t){case 0:return 0;case 1:return n[0]-a[0];case 2:return n[0]+n[1]-a[0]-a[1]||e(n[0],n[1])-e(a[0],a[1]);case 3:var s=n[0]+n[1],i=a[0]+a[1];if(p=s+n[2]-(i+a[2]))return p;var f=e(n[0],n[1]),c=e(a[0],a[1]);return e(f,n[2])-e(c,a[2])||e(f+n[2],s)-e(c+a[2],i);case 4:var l=n[0],h=n[1],d=n[2],o=n[3],x=a[0],u=a[1],T=a[2],_=a[3];return l+h+d+o-(x+u+T+_)||e(l,h,d,o)-e(x,u,T,_,x)||e(l+h,l+d,l+o,h+d,h+o,d+o)-e(x+u,x+T,x+_,u+T,u+_,T+_)||e(l+h+d,l+h+o,l+d+o,h+d+o)-e(x+u+T,x+u+_,x+T+_,u+T+_);default:for(var w=n.slice().sort(r),M=a.slice().sort(r),I=0;I<t;++I)if(p=w[I]-M[I])return p;return 0}};var e=Math.min;function r(n,a){return n-a}},{}],57:[function(m,b,y){"use strict";var e=m("compare-cell"),r=m("cell-orientation");b.exports=function(n,a){return e(n,a)||r(n)-r(a)}},{"cell-orientation":47,"compare-cell":56}],58:[function(m,b,y){"use strict";var e=m("./lib/ch1d"),r=m("./lib/ch2d"),n=m("./lib/chnd");b.exports=function(a){var t=a.length;if(0===t)return[];if(1===t)return[[0]];var p=a[0].length;return 0===p?[]:1===p?e(a):2===p?r(a):n(a,p)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(m,b,y){"use strict";b.exports=function(e){for(var r=0,n=0,a=1;a<e.length;++a)e[a][0]<e[r][0]&&(r=a),e[a][0]>e[n][0]&&(n=a);return r<n?[[r],[n]]:r>n?[[n],[r]]:[[r]]}},{}],60:[function(m,b,y){"use strict";b.exports=function(r){var n=e(r),a=n.length;if(a<=2)return[];for(var t=new Array(a),p=n[a-1],s=0;s<a;++s){var i=n[s];t[s]=[p,i],p=i}return t};var e=m("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(m,b,y){"use strict";b.exports=function(n,a){try{return e(n,!0)}catch{var t=r(n);if(t.length<=a)return[];var p=function(i,f){for(var c=i.length,l=new Array(c),h=0;h<f.length;++h)l[h]=i[f[h]];var d=f.length;for(h=0;h<c;++h)f.indexOf(h)<0&&(l[d++]=i[h]);return l}(n,t);return function(i,f){for(var c=i.length,l=f.length,h=0;h<c;++h)for(var d=i[h],o=0;o<d.length;++o){var x=d[o];if(x<l)d[o]=f[x];else{x-=l;for(var u=0;u<l;++u)x>=f[u]&&(x+=1);d[o]=x}}return i}(e(p,!0),t)}};var e=m("incremental-convex-hull"),r=m("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(m,b,y){"use strict";b.exports=function(e,r,n,a,t,p){var s=t-1,i=t*t,f=s*s,c=(1+2*t)*f,l=t*f,h=i*(3-2*t),d=i*s;if(e.length){p||(p=new Array(e.length));for(var o=e.length-1;o>=0;--o)p[o]=c*e[o]+l*r[o]+h*n[o]+d*a[o];return p}return c*e+l*r+h*n+d*a},b.exports.derivative=function(e,r,n,a,t,p){var s=6*t*t-6*t,i=3*t*t-4*t+1,f=-6*t*t+6*t,c=3*t*t-2*t;if(e.length){p||(p=new Array(e.length));for(var l=e.length-1;l>=0;--l)p[l]=s*e[l]+i*r[l]+f*n[l]+c*a[l];return p}return s*e+i*r+f*n[l]+c*a}},{}],63:[function(m,b,y){"use strict";var e=m("incremental-convex-hull"),r=m("uniq");function n(t,p){this.point=t,this.index=p}function a(t,p){for(var s=t.point,i=p.point,f=s.length,c=0;c<f;++c){var l=i[c]-s[c];if(l)return l}return 0}b.exports=function(t,p){var s=t.length;if(0===s)return[];var i=t[0].length;if(i<1)return[];if(1===i)return function(R,O,C){if(1===R)return C?[[-1,0]]:[];var D=O.map(function(J,te){return[J[0],te]});D.sort(function(J,te){return J[0]-te[0]});for(var B=new Array(R-1),z=1;z<R;++z)B[z-1]=[D[z-1][1],D[z][1]];return C&&B.push([-1,B[0][1]],[B[R-1][1],-1]),B}(s,t,p);for(var f=new Array(s),c=1,l=0;l<s;++l){for(var h=t[l],d=new Array(i+1),o=0,x=0;x<i;++x){var u=h[x];d[x]=u,o+=u*u}d[i]=o,f[l]=new n(d,l),c=Math.max(o,c)}r(f,a),s=f.length;var T=new Array(s+i+1),_=new Array(s+i+1),w=(i+1)*(i+1)*c,M=new Array(i+1);for(l=0;l<=i;++l)M[l]=0;for(M[i]=w,T[0]=M.slice(),_[0]=-1,l=0;l<=i;++l)(d=M.slice())[l]=1,T[l+1]=d,_[l+1]=-1;for(l=0;l<s;++l){var I=f[l];T[l+i+1]=I.point,_[l+i+1]=I.index}var S=e(T,!1);if(S=S.filter(p?function(R){for(var O=0,C=0;C<=i;++C){var D=_[R[C]];if(D<0&&++O>=2)return!1;R[C]=D}return!0}:function(R){for(var O=0;O<=i;++O){var C=_[R[O]];if(C<0)return!1;R[O]=C}return!0}),1&i)for(l=0;l<S.length;++l)d=(I=S[l])[0],I[0]=I[1],I[1]=d;return S}},{"incremental-convex-hull":233,uniq:310}],64:[function(m,b,y){(function(e){(function(){var r=!1;if(typeof Float64Array<"u"){var n=new Float64Array(1),a=new Uint32Array(n.buffer);n[0]=1,r=!0,1072693248===a[1]?(b.exports=function(p){return n[0]=p,[a[0],a[1]]},b.exports.pack=function(p,s){return a[0]=p,a[1]=s,n[0]},b.exports.lo=function(p){return n[0]=p,a[0]},b.exports.hi=function(p){return n[0]=p,a[1]}):1072693248===a[0]?(b.exports=function(p){return n[0]=p,[a[1],a[0]]},b.exports.pack=function(p,s){return a[1]=p,a[0]=s,n[0]},b.exports.lo=function(p){return n[0]=p,a[1]},b.exports.hi=function(p){return n[0]=p,a[0]}):r=!1}if(!r){var t=new e(8);b.exports=function(p){return t.writeDoubleLE(p,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},b.exports.pack=function(p,s){return t.writeUInt32LE(p,0,!0),t.writeUInt32LE(s,4,!0),t.readDoubleLE(0,!0)},b.exports.lo=function(p){return t.writeDoubleLE(p,0,!0),t.readUInt32LE(0,!0)},b.exports.hi=function(p){return t.writeDoubleLE(p,0,!0),t.readUInt32LE(4,!0)}}b.exports.sign=function(p){return b.exports.hi(p)>>>31},b.exports.exponent=function(p){return(b.exports.hi(p)<<1>>>21)-1023},b.exports.fraction=function(p){var s=b.exports.lo(p),i=b.exports.hi(p),f=1048575&i;return 2146435072&i&&(f+=1<<20),[s,f]},b.exports.denormalized=function(p){return!(2146435072&b.exports.hi(p))}}).call(this)}).call(this,m("buffer").Buffer)},{buffer:3}],65:[function(m,b,y){"use strict";b.exports=function(e,r){switch(void 0===r&&(r=0),typeof e){case"number":if(e>0)return function(n,a){var t,p;for(t=new Array(n),p=0;p<n;++p)t[p]=a;return t}(0|e,r);break;case"object":if("number"==typeof e.length)return function n(a,t,p){var s=0|a[p];if(s<=0)return[];var i,f=new Array(s);if(p===a.length-1)for(i=0;i<s;++i)f[i]=t;else for(i=0;i<s;++i)f[i]=n(a,t,p+1);return f}(e,r,0)}return[]}},{}],66:[function(m,b,y){"use strict";b.exports=function(r,n){var a=r.length;if("number"!=typeof n){n=0;for(var t=0;t<a;++t){var p=r[t];n=Math.max(n,p[0],p[1])}n=1+(0|n)}n|=0;var s=new Array(n);for(t=0;t<n;++t)s[t]=[];for(t=0;t<a;++t)s[(p=r[t])[0]].push(p[1]),s[p[1]].push(p[0]);for(var i=0;i<n;++i)e(s[i],function(f,c){return f-c});return s};var e=m("uniq")},{uniq:310}],67:[function(m,b,y){"use strict";b.exports=function(e,r,n){var a=r||0,t=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[a*e[12]+e[8],a*e[13]+e[9],a*e[14]+e[10],a*e[15]+e[11]],[t*e[12]-e[8],t*e[13]-e[9],t*e[14]-e[10],t*e[15]-e[11]]]}},{}],68:[function(m,b,y){"use strict";b.exports=function(s,i,f){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof s?new a(c=p(s),c,0):new a(s,p(s.length),0);case 2:if("number"==typeof i){var c=p(s.length);return new a(s,c,+i)}f=0;case 3:if(s.length!==i.length)throw new Error("state and velocity lengths must match");return new a(s,i,f)}};var e=m("cubic-hermite"),r=m("binary-search-bounds");function n(s,i,f){return Math.min(i,Math.max(s,f))}function a(s,i,f){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var c=0;c<this.dimension;++c)this.bounds[0][c]=-1/0,this.bounds[1][c]=1/0;this._state=s.slice().reverse(),this._velocity=i.slice().reverse(),this._time=[f],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var t=a.prototype;function p(s){for(var i=new Array(s),f=0;f<s;++f)i[f]=0;return i}t.flush=function(s){var i=r.gt(this._time,s)-1;i<=0||(this._time.splice(0,i),this._state.splice(0,i*this.dimension),this._velocity.splice(0,i*this.dimension))},t.curve=function(s){var i=this._time,f=i.length,c=r.le(i,s),l=this._scratch[0],h=this._state,d=this._velocity,o=this.dimension,x=this.bounds;if(c<0)for(var u=o-1,T=0;T<o;++T,--u)l[T]=h[u];else if(c>=f-1){u=h.length-1;var _=s-i[f-1];for(T=0;T<o;++T,--u)l[T]=h[u]+_*d[u]}else{u=o*(c+1)-1;var w=i[c],M=i[c+1]-w||1,I=this._scratch[1],S=this._scratch[2],R=this._scratch[3],O=this._scratch[4],C=!0;for(T=0;T<o;++T,--u)I[T]=h[u],R[T]=d[u]*M,S[T]=h[u+o],O[T]=d[u+o]*M,C=C&&I[T]===S[T]&&R[T]===O[T]&&0===R[T];if(C)for(T=0;T<o;++T)l[T]=I[T];else e(I,R,S,O,(s-w)/M,l)}var D=x[0],B=x[1];for(T=0;T<o;++T)l[T]=n(D[T],B[T],l[T]);return l},t.dcurve=function(s){var i=this._time,f=i.length,c=r.le(i,s),l=this._scratch[0],h=this._state,d=this._velocity,o=this.dimension;if(c>=f-1)for(var x=h.length-1,u=0;u<o;++u,--x)l[u]=d[x];else{x=o*(c+1)-1;var T=i[c],_=i[c+1]-T||1,w=this._scratch[1],M=this._scratch[2],I=this._scratch[3],S=this._scratch[4],R=!0;for(u=0;u<o;++u,--x)w[u]=h[x],I[u]=d[x]*_,M[u]=h[x+o],S[u]=d[x+o]*_,R=R&&w[u]===M[u]&&I[u]===S[u]&&0===I[u];if(R)for(u=0;u<o;++u)l[u]=0;else for(e.derivative(w,I,M,S,(s-T)/_,l),u=0;u<o;++u)l[u]/=_}return l},t.lastT=function(){var s=this._time;return s[s.length-1]},t.stable=function(){for(var s=this._velocity,i=s.length,f=this.dimension-1;f>=0;--f)if(s[--i])return!1;return!0},t.jump=function(s){var i=this.lastT(),f=this.dimension;if(!(s<i||arguments.length!==f+1)){var c=this._state,l=this._velocity,h=c.length-this.dimension,d=this.bounds,o=d[0],x=d[1];this._time.push(i,s);for(var u=0;u<2;++u)for(var T=0;T<f;++T)c.push(c[h++]),l.push(0);for(this._time.push(s),T=f;T>0;--T)c.push(n(o[T-1],x[T-1],arguments[T])),l.push(0)}},t.push=function(s){var i=this.lastT(),f=this.dimension;if(!(s<i||arguments.length!==f+1)){var c=this._state,l=this._velocity,h=c.length-this.dimension,d=s-i,o=this.bounds,x=o[0],u=o[1],T=d>1e-6?1/d:0;this._time.push(s);for(var _=f;_>0;--_){var w=n(x[_-1],u[_-1],arguments[_]);c.push(w),l.push((w-c[h++])*T)}}},t.set=function(s){var i=this.dimension;if(!(s<this.lastT()||arguments.length!==i+1)){var f=this._state,c=this._velocity,l=this.bounds,h=l[0],d=l[1];this._time.push(s);for(var o=i;o>0;--o)f.push(n(h[o-1],d[o-1],arguments[o])),c.push(0)}},t.move=function(s){var i=this.lastT(),f=this.dimension;if(!(s<=i||arguments.length!==f+1)){var c=this._state,l=this._velocity,h=c.length-this.dimension,d=this.bounds,o=d[0],x=d[1],u=s-i,T=u>1e-6?1/u:0;this._time.push(s);for(var _=f;_>0;--_){var w=arguments[_];c.push(n(o[_-1],x[_-1],c[h++]+w)),l.push(w*T)}}},t.idle=function(s){var i=this.lastT();if(!(s<i)){var f=this.dimension,c=this._state,l=this._velocity,h=c.length-f,d=this.bounds,o=d[0],x=d[1],u=s-i;this._time.push(s);for(var T=f-1;T>=0;--T)c.push(n(o[T],x[T],c[h]+u*l[h])),l.push(0),h+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(m,b,y){"use strict";function e(o,x,u,T,_,w){this._color=o,this.key=x,this.value=u,this.left=T,this.right=_,this._count=w}function r(o){return new e(o._color,o.key,o.value,o.left,o.right,o._count)}function n(o,x){return new e(o,x.key,x.value,x.left,x.right,x._count)}function a(o){o._count=1+(o.left?o.left._count:0)+(o.right?o.right._count:0)}function t(o,x){this._compare=o,this.root=x}b.exports=function(o){return new t(o||d,null)};var p=t.prototype;function s(o,x){var u;return x.left&&(u=s(o,x.left))?u:(u=o(x.key,x.value))||(x.right?s(o,x.right):void 0)}function i(o,x,u,T){var _;return x(o,T.key)<=0&&(T.left&&(_=i(o,x,u,T.left))||(_=u(T.key,T.value)))?_:T.right?i(o,x,u,T.right):void 0}function f(o,x,u,T,_){var w,M=u(o,_.key),I=u(x,_.key);return M<=0&&(_.left&&(w=f(o,x,u,T,_.left))||I>0&&(w=T(_.key,_.value)))?w:I>0&&_.right?f(o,x,u,T,_.right):void 0}function c(o,x){this.tree=o,this._stack=x}Object.defineProperty(p,"keys",{get:function(){var o=[];return this.forEach(function(x,u){o.push(x)}),o}}),Object.defineProperty(p,"values",{get:function(){var o=[];return this.forEach(function(x,u){o.push(u)}),o}}),Object.defineProperty(p,"length",{get:function(){return this.root?this.root._count:0}}),p.insert=function(o,x){for(var u=this._compare,T=this.root,_=[],w=[];T;){var M=u(o,T.key);_.push(T),w.push(M),T=M<=0?T.left:T.right}_.push(new e(0,o,x,null,null,1));for(var I=_.length-2;I>=0;--I)T=_[I],_[I]=w[I]<=0?new e(T._color,T.key,T.value,_[I+1],T.right,T._count+1):new e(T._color,T.key,T.value,T.left,_[I+1],T._count+1);for(I=_.length-1;I>1;--I){var S=_[I-1];if(T=_[I],1===S._color||1===T._color)break;var R=_[I-2];if(R.left===S)if(S.left===T){if(!(O=R.right)||0!==O._color){R._color=0,R.left=S.right,S._color=1,S.right=R,_[I-2]=S,_[I-1]=T,a(R),a(S),I>=3&&((C=_[I-3]).left===R?C.left=S:C.right=S);break}S._color=1,R.right=n(1,O),R._color=0,I-=1}else{if(!(O=R.right)||0!==O._color){S.right=T.left,R._color=0,R.left=T.right,T._color=1,T.left=S,T.right=R,_[I-2]=T,_[I-1]=S,a(R),a(S),a(T),I>=3&&((C=_[I-3]).left===R?C.left=T:C.right=T);break}S._color=1,R.right=n(1,O),R._color=0,I-=1}else if(S.right===T){if(!(O=R.left)||0!==O._color){R._color=0,R.right=S.left,S._color=1,S.left=R,_[I-2]=S,_[I-1]=T,a(R),a(S),I>=3&&((C=_[I-3]).right===R?C.right=S:C.left=S);break}S._color=1,R.left=n(1,O),R._color=0,I-=1}else{var O;if(!(O=R.left)||0!==O._color){var C;S.left=T.right,R._color=0,R.right=T.left,T._color=1,T.right=S,T.left=R,_[I-2]=T,_[I-1]=S,a(R),a(S),a(T),I>=3&&((C=_[I-3]).right===R?C.right=T:C.left=T);break}S._color=1,R.left=n(1,O),R._color=0,I-=1}}return _[0]._color=1,new t(u,_[0])},p.forEach=function(o,x,u){if(this.root)switch(arguments.length){case 1:return s(o,this.root);case 2:return i(x,this._compare,o,this.root);case 3:return this._compare(x,u)>=0?void 0:f(x,u,this._compare,o,this.root)}},Object.defineProperty(p,"begin",{get:function(){for(var o=[],x=this.root;x;)o.push(x),x=x.left;return new c(this,o)}}),Object.defineProperty(p,"end",{get:function(){for(var o=[],x=this.root;x;)o.push(x),x=x.right;return new c(this,o)}}),p.at=function(o){if(o<0)return new c(this,[]);for(var x=this.root,u=[];;){if(u.push(x),x.left){if(o<x.left._count){x=x.left;continue}o-=x.left._count}if(!o)return new c(this,u);if(o-=1,!x.right||o>=x.right._count)break;x=x.right}return new c(this,[])},p.ge=function(o){for(var x=this._compare,u=this.root,T=[],_=0;u;){var w=x(o,u.key);T.push(u),w<=0&&(_=T.length),u=w<=0?u.left:u.right}return T.length=_,new c(this,T)},p.gt=function(o){for(var x=this._compare,u=this.root,T=[],_=0;u;){var w=x(o,u.key);T.push(u),w<0&&(_=T.length),u=w<0?u.left:u.right}return T.length=_,new c(this,T)},p.lt=function(o){for(var x=this._compare,u=this.root,T=[],_=0;u;){var w=x(o,u.key);T.push(u),w>0&&(_=T.length),u=w<=0?u.left:u.right}return T.length=_,new c(this,T)},p.le=function(o){for(var x=this._compare,u=this.root,T=[],_=0;u;){var w=x(o,u.key);T.push(u),w>=0&&(_=T.length),u=w<0?u.left:u.right}return T.length=_,new c(this,T)},p.find=function(o){for(var x=this._compare,u=this.root,T=[];u;){var _=x(o,u.key);if(T.push(u),0===_)return new c(this,T);u=_<=0?u.left:u.right}return new c(this,[])},p.remove=function(o){var x=this.find(o);return x?x.remove():this},p.get=function(o){for(var x=this._compare,u=this.root;u;){var T=x(o,u.key);if(0===T)return u.value;u=T<=0?u.left:u.right}};var l=c.prototype;function h(o,x){o.key=x.key,o.value=x.value,o.left=x.left,o.right=x.right,o._color=x._color,o._count=x._count}function d(o,x){return o<x?-1:o>x?1:0}Object.defineProperty(l,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(l,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),l.clone=function(){return new c(this.tree,this._stack.slice())},l.remove=function(){var o=this._stack;if(0===o.length)return this.tree;var x=new Array(o.length),u=o[o.length-1];x[x.length-1]=new e(u._color,u.key,u.value,u.left,u.right,u._count);for(var T=o.length-2;T>=0;--T)x[T]=(u=o[T]).left===o[T+1]?new e(u._color,u.key,u.value,x[T+1],u.right,u._count):new e(u._color,u.key,u.value,u.left,x[T+1],u._count);if((u=x[x.length-1]).left&&u.right){var _=x.length;for(u=u.left;u.right;)x.push(u),u=u.right;var w=x[_-1];for(x.push(new e(u._color,w.key,w.value,u.left,u.right,u._count)),x[_-1].key=u.key,x[_-1].value=u.value,T=x.length-2;T>=_;--T)x[T]=new e((u=x[T])._color,u.key,u.value,u.left,x[T+1],u._count);x[_-1].left=x[_]}if(0===(u=x[x.length-1])._color){var M=x[x.length-2];for(M.left===u?M.left=null:M.right===u&&(M.right=null),x.pop(),T=0;T<x.length;++T)x[T]._count--;return new t(this.tree._compare,x[0])}if(u.left||u.right){for(u.left?h(u,u.left):u.right&&h(u,u.right),u._color=1,T=0;T<x.length-1;++T)x[T]._count--;return new t(this.tree._compare,x[0])}if(1===x.length)return new t(this.tree._compare,null);for(T=0;T<x.length;++T)x[T]._count--;var I=x[x.length-2];return function(S){for(var R,O,C,D,B=S.length-1;B>=0;--B){if(R=S[B],0===B)return void(R._color=1);if((O=S[B-1]).left===R){if((C=O.right).right&&0===C.right._color)return D=(C=O.right=r(C)).right=r(C.right),O.right=C.left,C.left=O,C.right=D,C._color=O._color,R._color=1,O._color=1,D._color=1,a(O),a(C),B>1&&((z=S[B-2]).left===O?z.left=C:z.right=C),void(S[B-1]=C);if(C.left&&0===C.left._color)return D=(C=O.right=r(C)).left=r(C.left),O.right=D.left,C.left=D.right,D.left=O,D.right=C,D._color=O._color,O._color=1,C._color=1,R._color=1,a(O),a(C),a(D),B>1&&((z=S[B-2]).left===O?z.left=D:z.right=D),void(S[B-1]=D);if(1===C._color){if(0===O._color)return O._color=1,void(O.right=n(0,C));O.right=n(0,C);continue}C=r(C),O.right=C.left,C.left=O,C._color=O._color,O._color=0,a(O),a(C),B>1&&((z=S[B-2]).left===O?z.left=C:z.right=C),S[B-1]=C,S[B]=O,B+1<S.length?S[B+1]=R:S.push(R),B+=2}else{if((C=O.left).left&&0===C.left._color)return D=(C=O.left=r(C)).left=r(C.left),O.left=C.right,C.right=O,C.left=D,C._color=O._color,R._color=1,O._color=1,D._color=1,a(O),a(C),B>1&&((z=S[B-2]).right===O?z.right=C:z.left=C),void(S[B-1]=C);if(C.right&&0===C.right._color)return D=(C=O.left=r(C)).right=r(C.right),O.left=D.right,C.right=D.left,D.right=O,D.left=C,D._color=O._color,O._color=1,C._color=1,R._color=1,a(O),a(C),a(D),B>1&&((z=S[B-2]).right===O?z.right=D:z.left=D),void(S[B-1]=D);if(1===C._color){if(0===O._color)return O._color=1,void(O.left=n(0,C));O.left=n(0,C);continue}var z;C=r(C),O.left=C.right,C.right=O,C._color=O._color,O._color=0,a(O),a(C),B>1&&((z=S[B-2]).right===O?z.right=C:z.left=C),S[B-1]=C,S[B]=O,B+1<S.length?S[B+1]=R:S.push(R),B+=2}}}(x),I.left===u?I.left=null:I.right=null,new t(this.tree._compare,x[0])},Object.defineProperty(l,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(l,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(l,"index",{get:function(){var o=0,x=this._stack;if(0===x.length){var u=this.tree.root;return u?u._count:0}x[x.length-1].left&&(o=x[x.length-1].left._count);for(var T=x.length-2;T>=0;--T)x[T+1]===x[T].right&&(++o,x[T].left&&(o+=x[T].left._count));return o},enumerable:!0}),l.next=function(){var o=this._stack;if(0!==o.length){var x=o[o.length-1];if(x.right)for(x=x.right;x;)o.push(x),x=x.left;else for(o.pop();o.length>0&&o[o.length-1].right===x;)x=o[o.length-1],o.pop()}},Object.defineProperty(l,"hasNext",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].right)return!0;for(var x=o.length-1;x>0;--x)if(o[x-1].left===o[x])return!0;return!1}}),l.update=function(o){var x=this._stack;if(0===x.length)throw new Error("Can't update empty node!");var u=new Array(x.length),T=x[x.length-1];u[u.length-1]=new e(T._color,T.key,o,T.left,T.right,T._count);for(var _=x.length-2;_>=0;--_)u[_]=(T=x[_]).left===x[_+1]?new e(T._color,T.key,T.value,u[_+1],T.right,T._count):new e(T._color,T.key,T.value,T.left,u[_+1],T._count);return new t(this.tree._compare,u[0])},l.prev=function(){var o=this._stack;if(0!==o.length){var x=o[o.length-1];if(x.left)for(x=x.left;x;)o.push(x),x=x.right;else for(o.pop();o.length>0&&o[o.length-1].left===x;)x=o[o.length-1],o.pop()}},Object.defineProperty(l,"hasPrev",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].left)return!0;for(var x=o.length-1;x>0;--x)if(o[x-1].right===o[x])return!0;return!1}})},{}],70:[function(m,b,y){"use strict";b.exports=function(_,w){var M=new i(_);return M.update(w),M};var e=m("./lib/text.js"),r=m("./lib/lines.js"),n=m("./lib/background.js"),a=m("./lib/cube.js"),t=m("./lib/ticks.js"),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(_,w){return _[0]=w[0],_[1]=w[1],_[2]=w[2],_}function i(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(_)}var f=i.prototype;function c(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}f.update=function(_){function w(J,te,X){if(X in _){var K,ae=_[X],U=this[X];this[X]=K=(J?Array.isArray(ae)&&Array.isArray(ae[0]):Array.isArray(ae))?[te(ae[0]),te(ae[1]),te(ae[2])]:[te(ae),te(ae),te(ae)];for(var V=0;V<3;++V)if(K[V]!==U[V])return!0}return!1}_=_||{};var M,I=w.bind(this,!1,Number),S=w.bind(this,!1,Boolean),R=w.bind(this,!1,String),O=w.bind(this,!0,function(J){if(Array.isArray(J)){if(3===J.length)return[+J[0],+J[1],+J[2],1];if(4===J.length)return[+J[0],+J[1],+J[2],+J[3]]}return[0,0,0,1]}),C=!1,D=!1;if("bounds"in _)for(var B=_.bounds,z=0;z<2;++z)for(var Y=0;Y<3;++Y)B[z][Y]!==this.bounds[z][Y]&&(D=!0),this.bounds[z][Y]=B[z][Y];if("ticks"in _)for(M=_.ticks,C=!0,this.autoTicks=!1,z=0;z<3;++z)this.tickSpacing[z]=0;else I("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),D=!0,C=!0,this._firstInit=!1),D&&this.autoTicks&&(M=t.create(this.bounds,this.tickSpacing),C=!0),C){for(z=0;z<3;++z)M[z].sort(function(J,te){return J.x-te.x});t.equal(M,this.ticks)?C=!1:this.ticks=M}S("tickEnable"),R("tickFont")&&(C=!0),I("tickSize"),I("tickAngle"),I("tickPad"),O("tickColor");var G=R("labels");R("labelFont")&&(G=!0),S("labelEnable"),I("labelSize"),I("labelPad"),O("labelColor"),S("lineEnable"),S("lineMirror"),I("lineWidth"),O("lineColor"),S("lineTickEnable"),S("lineTickMirror"),I("lineTickLength"),I("lineTickWidth"),O("lineTickColor"),S("gridEnable"),I("gridWidth"),O("gridColor"),S("zeroEnable"),O("zeroLineColor"),I("zeroLineWidth"),S("backgroundEnable"),O("backgroundColor"),this._text?this._text&&(G||C)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&C&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var l=[new c,new c,new c];function h(_,w,M,I,S){for(var R=_.primalOffset,O=_.primalMinor,C=_.mirrorOffset,D=_.mirrorMinor,B=I[w],z=0;z<3;++z)if(w!==z){var Y=R,G=C,J=O,te=D;B&1<<z&&(Y=C,G=R,J=D,te=O),Y[z]=M[0][z],G[z]=M[1][z],S[z]>0?(J[z]=-1,te[z]=0):(J[z]=0,te[z]=1)}}var d=[0,0,0],o={model:p,view:p,projection:p,_ortho:!1};f.isOpaque=function(){return!0},f.isTransparent=function(){return!1},f.drawTransparent=function(_){};var x=[0,0,0],u=[0,0,0],T=[0,0,0];f.draw=function(_){for(var w=this.gl,M=(_=_||o).model||p,I=_.view||p,S=_.projection||p,R=this.bounds,O=_._ortho||!1,C=a(M,I,S,R,O),D=C.cubeEdges,B=C.axis,te=(O?2:1)*this.pixelRatio*(S[3]*I[12]+S[7]*I[13]+S[11]*I[14]+S[15]*I[15])/w.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=D[X],this.lastCubeProps.axis[X]=B[X];var K=l;for(X=0;X<3;++X)h(l[X],X,this.bounds,D,B);w=this.gl;var ae,de,fe,ze,ve,Te,Ie,De,Fe,Ue,qe,je,U=d;for(X=0;X<3;++X)U[X]=this.backgroundEnable[X]?B[X]:0;for(this._background.draw(M,I,S,R,U,this.backgroundColor),this._lines.bind(M,I,S,this),X=0;X<3;++X){var V=[0,0,0];V[X]=B[X]>0?R[1][X]:R[0][X];for(var q=0;q<2;++q){var ie=(X+1+q)%3,H=(X+1+(1^q))%3;this.gridEnable[ie]&&this._lines.drawGrid(ie,H,this.bounds,V,this.gridColor[ie],this.gridWidth[ie]*this.pixelRatio)}for(q=0;q<2;++q)ie=(X+1+q)%3,this.zeroEnable[H=(X+1+(1^q))%3]&&Math.min(R[0][H],R[1][H])<=0&&Math.max(R[0][H],R[1][H])>=0&&this._lines.drawZero(ie,H,this.bounds,V,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,K[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,K[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var ee=s(x,K[X].primalMinor),Q=s(u,K[X].mirrorMinor),oe=this.lineTickLength;for(q=0;q<3;++q){var le=te/M[5*q];ee[q]*=oe[q]*le,Q[q]*=oe[q]*le}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,K[X].primalOffset,ee,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,K[X].mirrorOffset,Q,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function be(ze){(fe=[0,0,0])[ze]=1}for(this._lines.unbind(),this._text.bind(M,I,S,this.pixelRatio),X=0;X<3;++X){var _e=K[X].primalMinor,Ce=K[X].mirrorMinor,Ee=s(T,K[X].primalOffset);for(q=0;q<3;++q)this.lineTickEnable[X]&&(Ee[q]+=te*_e[q]*Math.max(this.lineTickLength[q],0)/M[5*q]);var Ae=[0,0,0];if(Ae[X]=1,this.tickEnable[X]){for(-3600===this.tickAngle[X]?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,ae[0]="auto"===(ae=[this.tickAlign[X],.5,de=1])[0]?0:parseInt(""+ae[0]),fe=[0,0,0],Ie=void 0,De=void 0,Fe=void 0,Ue=void 0,qe=void 0,je=void 0,Ue=(ve=_e)[De=((ze=X)+2)%3],qe=(Te=Ce)[Ie=(ze+1)%3],je=Te[De],(Fe=ve[Ie])>0&&je>0||Fe>0&&je<0||Fe<0&&je>0||Fe<0&&je<0?be(Ie):(Ue>0&&qe>0||Ue>0&&qe<0||Ue<0&&qe>0||Ue<0&&qe<0)&&be(De),q=0;q<3;++q)Ee[q]+=te*_e[q]*this.tickPad[q]/M[5*q];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],Ee,this.tickColor[X],Ae,fe,ae)}if(this.labelEnable[X]){for(de=0,fe=[0,0,0],this.labels[X].length>4&&(be(X),de=1),ae[0]="auto"===(ae=[this.labelAlign[X],.5,de])[0]?0:parseInt(""+ae[0]),q=0;q<3;++q)Ee[q]+=te*_e[q]*this.labelPad[q]/M[5*q];Ee[X]+=.5*(R[0][X]+R[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],Ee,this.labelColor[X],[0,0,0],fe,ae)}}this._text.unbind()},f.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(m,b,y){"use strict";b.exports=function(p){for(var s=[],i=[],f=0,c=0;c<3;++c)for(var l=(c+1)%3,h=(c+2)%3,d=[0,0,0],o=[0,0,0],x=-1;x<=1;x+=2){i.push(f,f+2,f+1,f+1,f+2,f+3),d[c]=x,o[c]=x;for(var u=-1;u<=1;u+=2){d[l]=u;for(var T=-1;T<=1;T+=2)d[h]=T,s.push(d[0],d[1],d[2],o[0],o[1],o[2]),f+=1}var _=l;l=h,h=_}var w=e(p,new Float32Array(s)),M=e(p,new Uint16Array(i),p.ELEMENT_ARRAY_BUFFER),I=r(p,[{buffer:w,type:p.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:p.FLOAT,size:3,offset:12,stride:24}],M),S=n(p);return S.attributes.position.location=0,S.attributes.normal.location=1,new a(p,w,I,S)};var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders").bg;function a(p,s,i,f){this.gl=p,this.buffer=s,this.vao=i,this.shader=f}var t=a.prototype;t.draw=function(p,s,i,f,c,l){for(var h=!1,d=0;d<3;++d)h=h||c[d];if(h){var o=this.gl;o.enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:p,view:s,projection:i,bounds:f,enable:c,colors:l},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),o.disable(o.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(m,b,y){"use strict";b.exports=function(u,T,_,w,M){r(t,T,u),r(t,_,t);for(var I=0,S=0;S<2;++S){i[2]=w[S][2];for(var R=0;R<2;++R){i[1]=w[R][1];for(var O=0;O<2;++O)i[0]=w[O][0],c(p[I],i,t),I+=1}}var C=-1;for(S=0;S<8;++S){for(var D=p[S][3],B=0;B<3;++B)s[S][B]=p[S][B]/D;M&&(s[S][2]*=-1),D<0&&(C<0||s[S][2]<s[C][2])&&(C=S)}if(C<0){C=0;for(var z=0;z<3;++z){for(var Y=(z+2)%3,G=(z+1)%3,J=-1,te=-1,X=0;X<2;++X){var K=(U=X<<z)+(X<<Y)+(1-X<<G),ae=U+(1-X<<Y)+(X<<G);a(s[U],s[K],s[ae],f)<0||(X?J=1:te=1)}if(J<0||te<0)te>J&&(C|=1<<z);else{for(X=0;X<2;++X){K=(U=X<<z)+(X<<Y)+(1-X<<G);var U,V=h([p[U],p[K],p[ae=U+(1-X<<Y)+(X<<G)],p[U+(1<<Y)+(1<<G)]]);X?J=V:te=V}te>J&&(C|=1<<z)}}}var q=7^C,ie=-1;for(S=0;S<8;++S)S!==C&&S!==q&&(ie<0||s[ie][1]>s[S][1])&&(ie=S);var H=-1;for(S=0;S<3;++S)(Q=ie^1<<S)!==C&&Q!==q&&(H<0&&(H=Q),(G=s[Q])[0]<s[H][0]&&(H=Q));var ee=-1;for(S=0;S<3;++S){var Q;(Q=ie^1<<S)!==C&&Q!==q&&Q!==H&&(ee<0&&(ee=Q),(G=s[Q])[0]>s[ee][0]&&(ee=Q))}var oe=d;oe[0]=oe[1]=oe[2]=0,oe[e.log2(H^ie)]=ie&H,oe[e.log2(ie^ee)]=ie&ee;var le=7^ee;le===C||le===q?oe[e.log2(ee^(le=7^H))]=le&ee:oe[e.log2(H^le)]=le&H;var de=o,fe=C;for(z=0;z<3;++z)de[z]=fe&1<<z?-1:1;return x};var e=m("bit-twiddle"),r=m("gl-mat4/multiply"),n=m("split-polygon"),a=m("robust-orientation"),t=new Array(16),p=new Array(8),s=new Array(8),i=new Array(3),f=[0,0,0];function c(u,T,_){for(var w=0;w<4;++w){u[w]=_[12+w];for(var M=0;M<3;++M)u[w]+=T[M]*_[4*M+w]}}!function(){for(var u=0;u<8;++u)p[u]=[1,1,1,1],s[u]=[1,1,1]}();var l=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function h(u){for(var T=0;T<l.length;++T)if((u=n.positive(u,l[T])).length<3)return 0;var _=u[0],w=_[0]/_[3],M=_[1]/_[3],I=0;for(T=1;T+1<u.length;++T){var S=u[T],R=u[T+1];I+=Math.abs((S[0]/S[3]-w)*(R[1]/R[3]-M)-(S[1]/S[3]-M)*(R[0]/R[3]-w))}return I}var d=[1,1,1],o=[0,0,0],x={cubeEdges:d,axis:o}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(m,b,y){"use strict";b.exports=function(d,o,x){var u=[],T=[0,0,0],_=[0,0,0],w=[0,0,0],M=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var I=0;I<3;++I){for(var S=u.length/3|0,R=0;R<x[I].length;++R){var O=+x[I][R].x;u.push(O,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1)}var C=u.length/3|0;T[I]=S,_[I]=C-S,S=u.length/3|0;for(var D=0;D<x[I].length;++D)u.push(O=+x[I][D].x,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1);C=u.length/3|0,w[I]=S,M[I]=C-S}var B=e(d,new Float32Array(u)),z=r(d,[{buffer:B,type:d.FLOAT,size:3,stride:0,offset:0}]),Y=n(d);return Y.attributes.position.location=0,new l(d,B,z,Y,_,T,M,w)};var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders").line,a=[0,0,0],t=[0,0,0],p=[0,0,0],s=[0,0,0],i=[1,1];function f(d){return d[0]=d[1]=d[2]=0,d}function c(d,o){return d[0]=o[0],d[1]=o[1],d[2]=o[2],d}function l(d,o,x,u,T,_,w,M){this.gl=d,this.vertBuffer=o,this.vao=x,this.shader=u,this.tickCount=T,this.tickOffset=_,this.gridCount=w,this.gridOffset=M}var h=l.prototype;h.bind=function(d,o,x){this.shader.bind(),this.shader.uniforms.model=d,this.shader.uniforms.view=o,this.shader.uniforms.projection=x,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},h.unbind=function(){this.vao.unbind()},h.drawAxisLine=function(d,o,x,u,T){var _=f(t);this.shader.uniforms.majorAxis=t,_[d]=o[1][d]-o[0][d],this.shader.uniforms.minorAxis=_;var w,M=c(s,x);M[d]+=o[0][d],this.shader.uniforms.offset=M,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=u,(w=f(p))[(d+2)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6),(w=f(p))[(d+1)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6)},h.drawAxisTicks=function(d,o,x,u,T){if(this.tickCount[d]){var _=f(a);_[d]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=o,this.shader.uniforms.minorAxis=x,this.shader.uniforms.color=u,this.shader.uniforms.lineWidth=T;var w=f(p);w[d]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[d],this.tickOffset[d])}},h.drawGrid=function(d,o,x,u,T,_){if(this.gridCount[d]){var w=f(t);w[o]=x[1][o]-x[0][o],this.shader.uniforms.minorAxis=w;var M=c(s,u);M[o]+=x[0][o],this.shader.uniforms.offset=M;var I=f(a);I[d]=1,this.shader.uniforms.majorAxis=I;var S=f(p);S[d]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,this.gridCount[d],this.gridOffset[d])}},h.drawZero=function(d,o,x,u,T,_){var w=f(t);this.shader.uniforms.majorAxis=w,w[d]=x[1][d]-x[0][d],this.shader.uniforms.minorAxis=w;var M=c(s,u);M[d]+=x[0][d],this.shader.uniforms.offset=M;var I=f(p);I[o]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=T,this.vao.draw(this.gl.TRIANGLES,6)},h.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(m,b,y){"use strict";var e=m("glslify"),r=m("gl-shader"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.line=function(f){return r(f,n,a,null,[{name:"position",type:"vec3"}])};var t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);y.text=function(f){return r(f,t,p,null,[{name:"position",type:"vec3"}])};var s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);y.bg=function(f){return r(f,s,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(m,b,y){(function(e){(function(){"use strict";b.exports=function(l,h,d,o,x,u){var T=r(l),_=n(l,[{buffer:T,size:3}]),w=t(l);w.attributes.position.location=0;var M=new i(l,w,T,_);return M.update(h,d,o,x,u),M};var r=m("gl-buffer"),n=m("gl-vao"),a=m("vectorize-text"),t=m("./shaders").text,p=window||e.global||{},s=p.__TEXT_CACHE||{};function i(l,h,d,o){this.gl=l,this.shader=h,this.buffer=d,this.vao=o,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}p.__TEXT_CACHE={};var f=i.prototype,c=[0,0];f.bind=function(l,h,d,o){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=l,x.view=h,x.projection=d,x.pixelScale=o,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},f.unbind=function(){this.vao.unbind()},f.update=function(l,h,d,o,x){var u=[];function T(C,D,B,z,Y,G){var J=s[B];J||(J=s[B]={});var te=J[D];te||(te=J[D]=function(ee,Q){try{return a(ee,Q)}catch(oe){return console.warn('error vectorizing text:"'+ee+'" error:',oe),{cells:[],positions:[]}}}(D,{triangles:!0,font:B,textAlign:"center",textBaseline:"middle",lineSpacing:Y,styletags:G}));for(var X=(z||12)/12,K=te.positions,ae=te.cells,U=0,V=ae.length;U<V;++U)for(var q=ae[U],ie=2;ie>=0;--ie){var H=K[q[ie]];u.push(X*H[0],-X*H[1],C)}}for(var _=[0,0,0],w=[0,0,0],M=[0,0,0],I=[0,0,0],S={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},R=0;R<3;++R){M[R]=u.length/3|0,T(.5*(l[0][R]+l[1][R]),h[R],d[R],12,1.25,S),I[R]=(u.length/3|0)-M[R],_[R]=u.length/3|0;for(var O=0;O<o[R].length;++O)o[R][O].text&&T(o[R][O].x,o[R][O].text,o[R][O].font||x,o[R][O].fontSize||12,1.25,S);w[R]=(u.length/3|0)-_[R]}this.buffer.update(u),this.tickOffset=_,this.tickCount=w,this.labelOffset=M,this.labelCount=I},f.drawTicks=function(l,h,d,o,x,u,T,_){this.tickCount[l]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=x,this.shader.uniforms.angle=d,this.shader.uniforms.scale=h,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=T,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},f.drawLabel=function(l,h,d,o,x,u,T,_){this.labelCount[l]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=x,this.shader.uniforms.angle=d,this.shader.uniforms.scale=h,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=T,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},f.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,m("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(m,b,y){"use strict";function e(r,n){var a=r+"",t=a.indexOf("."),p=0;t>=0&&(p=a.length-t-1);var s=Math.pow(10,p),i=Math.round(r*n*s),f=i+"";if(f.indexOf("e")>=0)return f;var c=i/s,l=i%s;i<0?(c=0|-Math.ceil(c),l=0|-l):(c=0|Math.floor(c),l|=0);var h=""+c;if(i<0&&(h="-"+h),p){for(var d=""+l;d.length<p;)d="0"+d;return h+"."+d}return h}y.create=function(r,n){for(var a=[],t=0;t<3;++t){for(var p=[],s=0;s*n[t]<=r[1][t];++s)p.push({x:s*n[t],text:e(n[t],s)});for(s=-1;s*n[t]>=r[0][t];--s)p.push({x:s*n[t],text:e(n[t],s)});a.push(p)}return a},y.equal=function(r,n){for(var a=0;a<3;++a){if(r[a].length!==n[a].length)return!1;for(var t=0;t<r[a].length;++t){var p=r[a][t],s=n[a][t];if(p.x!==s.x||p.text!==s.text||p.font!==s.font||p.fontColor!==s.fontColor||p.fontSize!==s.fontSize||p.dx!==s.dx||p.dy!==s.dy)return!1}}return!0}},{}],77:[function(m,b,y){"use strict";b.exports=function(x,u,T,_,w){var M=u.model||s,I=u.view||s,S=u.projection||s,R=u._ortho||!1,O=x.bounds,C=(w=w||n(M,I,S,O,R)).axis;a(i,I,M),a(i,S,i);for(var D=d,B=0;B<3;++B)D[B].lo=1/0,D[B].hi=-1/0,D[B].pixelsPerDataUnit=1/0;var z=e(t(i,i));t(i,i);for(var Y=0;Y<3;++Y){var G=(Y+1)%3,J=(Y+2)%3,te=o;e:for(B=0;B<2;++B){var X=[];if(C[Y]<0!=!!B){te[Y]=O[B][Y];for(var K=0;K<2;++K){te[G]=O[K^B][G];for(var ae=0;ae<2;++ae)te[J]=O[ae^K^B][J],X.push(te.slice())}var U=R?5:4;for(K=U;K===U;++K){if(0===X.length)continue e;X=r.positive(X,z[K])}for(K=0;K<X.length;++K){var V=h(o,i,J=X[K],T,_);for(ae=0;ae<3;++ae)D[ae].lo=Math.min(D[ae].lo,J[ae]),D[ae].hi=Math.max(D[ae].hi,J[ae]),ae!==Y&&(D[ae].pixelsPerDataUnit=Math.min(D[ae].pixelsPerDataUnit,Math.abs(V[ae])))}}}}return D};var e=m("extract-frustum-planes"),r=m("split-polygon"),n=m("./lib/cube.js"),a=m("gl-mat4/multiply"),t=m("gl-mat4/transpose"),p=m("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function f(x,u,T){this.lo=x,this.hi=u,this.pixelsPerDataUnit=T}var c=[0,0,0,1],l=[0,0,0,1];function h(x,u,T,_,w){for(var M=0;M<3;++M){for(var I=c,S=l,R=0;R<3;++R)S[R]=I[R]=T[R];S[3]=I[3]=1,S[M]+=1,p(S,S,u),S[3]<0&&(x[M]=1/0),I[M]-=1,p(I,I,u),I[3]<0&&(x[M]=1/0);var O=(I[0]/I[3]-S[0]/S[3])*_,C=(I[1]/I[3]-S[1]/S[3])*w;x[M]=.25*Math.sqrt(O*O+C*C)}return x}var d=[new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0),new f(1/0,-1/0,1/0)],o=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(m,b,y){"use strict";var e=m("typedarray-pool"),r=m("ndarray-ops"),n=m("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(f,c,l,h,d){this.gl=f,this.type=c,this.handle=l,this.length=h,this.usage=d}var p=t.prototype;function s(f,c,l,h,d,o){var x=d.length*d.BYTES_PER_ELEMENT;if(o<0)return f.bufferData(c,d,h),x;if(x+o>l)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return f.bufferSubData(c,o,d),l}p.bind=function(){this.gl.bindBuffer(this.type,this.handle)},p.unbind=function(){this.gl.bindBuffer(this.type,null)},p.dispose=function(){this.gl.deleteBuffer(this.handle)},p.update=function(f,c){if("number"!=typeof c&&(c=-1),this.bind(),"object"==typeof f&&void 0!==f.shape){var l=f.dtype;if(a.indexOf(l)<0&&(l="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(l=gl.getExtension("OES_element_index_uint")&&"uint16"!==l?"uint32":"uint16"),l===f.dtype&&function(x,u){for(var T=1,_=u.length-1;_>=0;--_){if(u[_]!==T)return!1;T*=x[_]}return!0}(f.shape,f.stride))this.length=s(this.gl,this.type,this.length,this.usage,0===f.offset&&f.data.length===f.shape[0]?f.data:f.data.subarray(f.offset,f.shape[0]),c);else{var h=e.malloc(f.size,l),d=n(h,f.shape);r.assign(d,f),this.length=s(this.gl,this.type,this.length,this.usage,c<0?h:h.subarray(0,f.size),c),e.free(h)}}else if(Array.isArray(f)){var o;o=function i(f,c){for(var l=e.malloc(f.length,c),h=f.length,d=0;d<h;++d)l[d]=f[d];return l}(f,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=s(this.gl,this.type,this.length,this.usage,c<0?o:o.subarray(0,f.length),c),e.free(o)}else if("object"==typeof f&&"number"==typeof f.length)this.length=s(this.gl,this.type,this.length,this.usage,f,c);else{if("number"!=typeof f&&void 0!==f)throw new Error("gl-buffer: Invalid data type");if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(f|=0)<=0&&(f=1),this.gl.bufferData(this.type,0|f,this.usage),this.length=f}},b.exports=function(f,c,l,h){if(h=h||f.DYNAMIC_DRAW,(l=l||f.ARRAY_BUFFER)!==f.ARRAY_BUFFER&&l!==f.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(h!==f.DYNAMIC_DRAW&&h!==f.STATIC_DRAW&&h!==f.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var d=f.createBuffer(),o=new t(f,l,d,0,h);return o.update(c),o}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(m,b,y){"use strict";var e=m("gl-vec3");b.exports=function(n,a){var t=n.positions,p=n.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(0===n.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),s;for(var i=0,f=1/0,c=-1/0,l=1/0,h=-1/0,d=1/0,o=-1/0,x=null,u=null,T=[],_=1/0,w=!1,M=0;M<t.length;M++){var I=t[M];f=Math.min(I[0],f),c=Math.max(I[0],c),l=Math.min(I[1],l),h=Math.max(I[1],h),d=Math.min(I[2],d),o=Math.max(I[2],o);var S=p[M];if(e.length(S)>i&&(i=e.length(S)),M){var R=2*e.distance(x,I)/(e.length(u)+e.length(S));R?(_=Math.min(_,R),w=!1):w=!0}w||(x=I,u=S),T.push(S)}var C=[c,h,o];a&&(a[0]=[f,l,d],a[1]=C),0===i&&(i=1);var D=1/i;isFinite(_)||(_=1),s.vectorScale=_;var B=n.coneSize||.5;n.absoluteConeSize&&(B=n.absoluteConeSize*D),s.coneScale=B,M=0;for(var z=0;M<t.length;M++)for(var Y=(I=t[M])[0],G=I[1],J=I[2],te=T[M],X=e.length(te)*D,K=0;K<8;K++){s.positions.push([Y,G,J,z++]),s.positions.push([Y,G,J,z++]),s.positions.push([Y,G,J,z++]),s.positions.push([Y,G,J,z++]),s.positions.push([Y,G,J,z++]),s.positions.push([Y,G,J,z++]),s.vectors.push(te),s.vectors.push(te),s.vectors.push(te),s.vectors.push(te),s.vectors.push(te),s.vectors.push(te),s.vertexIntensity.push(X,X,X),s.vertexIntensity.push(X,X,X);var ae=s.positions.length;s.cells.push([ae-6,ae-5,ae-4],[ae-3,ae-2,ae-1])}return s};var r=m("./lib/shaders");b.exports.createMesh=m("./create_mesh"),b.exports.createConeMesh=function(n,a){return b.exports.createMesh(n,a,{shaders:r,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(m,b,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("gl-vao"),a=m("gl-texture2d"),t=m("gl-mat4/multiply"),p=m("gl-mat4/invert"),s=m("ndarray"),i=m("colormap"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(o,x,u,T,_,w,M,I,S,R,O){this.gl=o,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=u,this.pickShader=T,this.trianglePositions=_,this.triangleVectors=w,this.triangleColors=I,this.triangleUVs=S,this.triangleIds=M,this.triangleVAO=R,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=f,this._view=f,this._projection=f,this._resolution=[1,1]}var l=c.prototype;function h(o,x){var u=e(o,x.meshShader.vertex,x.meshShader.fragment,null,x.meshShader.attributes);return u.attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.vector.location=4,u}function d(o,x){var u=e(o,x.pickShader.vertex,x.pickShader.fragment,null,x.pickShader.attributes);return u.attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u}l.isOpaque=function(){return this.opacity>=1},l.isTransparent=function(){return this.opacity<1},l.pickSlots=1,l.setPickBase=function(o){this.pickId=o},l.update=function(o){o=o||{};var x=this.gl;this.dirty=!0,"lightPosition"in o&&(this.lightPosition=o.lightPosition),"opacity"in o&&(this.opacity=o.opacity),"ambient"in o&&(this.ambientLight=o.ambient),"diffuse"in o&&(this.diffuseLight=o.diffuse),"specular"in o&&(this.specularLight=o.specular),"roughness"in o&&(this.roughness=o.roughness),"fresnel"in o&&(this.fresnel=o.fresnel),void 0!==o.tubeScale&&(this.tubeScale=o.tubeScale),void 0!==o.vectorScale&&(this.vectorScale=o.vectorScale),void 0!==o.coneScale&&(this.coneScale=o.coneScale),void 0!==o.coneOffset&&(this.coneOffset=o.coneOffset),o.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(ie){for(var H=i({colormap:ie,nshades:256,format:"rgba"}),ee=new Uint8Array(1024),Q=0;Q<256;++Q){for(var oe=H[Q],le=0;le<3;++le)ee[4*Q+le]=oe[le];ee[4*Q+3]=255*oe[3]}return s(ee,[256,256,4],[4,0,1])}(o.colormap)),this.texture.generateMipmap());var u=o.cells,T=o.positions,_=o.vectors;if(T&&u&&_){var w=[],M=[],I=[],S=[],R=[];this.cells=u,this.positions=T,this.vectors=_;var O=o.meshColor||[1,1,1,1],C=o.vertexIntensity,D=1/0,B=-1/0;if(C)if(o.vertexIntensityBounds)D=+o.vertexIntensityBounds[0],B=+o.vertexIntensityBounds[1];else for(var z=0;z<C.length;++z){var Y=C[z];D=Math.min(D,Y),B=Math.max(B,Y)}else for(z=0;z<T.length;++z)Y=T[z][2],D=Math.min(D,Y),B=Math.max(B,Y);for(this.intensity=C||function(ie){for(var H=ie.length,ee=new Array(H),Q=0;Q<H;++Q)ee[Q]=ie[Q][2];return ee}(T),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],z=0;z<T.length;++z)for(var G=T[z],J=0;J<3;++J)!isNaN(G[J])&&isFinite(G[J])&&(this.bounds[0][J]=Math.min(this.bounds[0][J],G[J]),this.bounds[1][J]=Math.max(this.bounds[1][J],G[J]));var te=0;e:for(z=0;z<u.length;++z){var X=u[z];if(3===X.length){for(J=0;J<3;++J){G=T[ae=X[J]];for(var K=0;K<3;++K)if(isNaN(G[K])||!isFinite(G[K]))continue e}for(J=0;J<3;++J){var ae;G=T[ae=X[2-J]],w.push(G[0],G[1],G[2],G[3]);var U=_[ae];M.push(U[0],U[1],U[2],U[3]||0);var V;I.push(O[0],O[1],O[2],3===O.length?1:O[3]),S.push((V=C?[(C[ae]-D)/(B-D),0]:[(G[2]-D)/(B-D),0])[0],V[1]),R.push(z)}te+=1}}this.triangleCount=te,this.trianglePositions.update(w),this.triangleVectors.update(M),this.triangleColors.update(I),this.triangleUVs.update(S),this.triangleIds.update(new Uint32Array(R))}},l.drawTransparent=l.draw=function(o){for(var x=this.gl,u=(o=o||{}).model||f,T=o.view||f,_=o.projection||f,w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)w[0][M]=Math.max(w[0][M],this.clipBounds[0][M]),w[1][M]=Math.min(w[1][M],this.clipBounds[1][M]);var I={model:u,view:T,projection:_,inverseModel:f.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};I.inverseModel=p(I.inverseModel,I.model),x.disable(x.CULL_FACE),this.texture.bind(0);var S=new Array(16);for(t(S,I.view,I.model),t(S,I.projection,S),p(S,S),M=0;M<3;++M)I.eyePosition[M]=S[12+M]/S[15];var R=S[15];for(M=0;M<3;++M)R+=this.lightPosition[M]*S[4*M+3];for(M=0;M<3;++M){for(var O=S[12+M],C=0;C<3;++C)O+=S[4*C+M]*this.lightPosition[C];I.lightPosition[M]=O/R}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=I,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},l.drawPick=function(o){for(var x=this.gl,u=(o=o||{}).model||f,T=o.view||f,_=o.projection||f,w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)w[0][M]=Math.max(w[0][M],this.clipBounds[0][M]),w[1][M]=Math.min(w[1][M],this.clipBounds[1][M]);this._model=[].slice.call(u),this._view=[].slice.call(T),this._projection=[].slice.call(_),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var I={model:u,view:T,projection:_,clipBounds:w,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},S=this.pickShader;S.bind(),S.uniforms=I,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},l.pick=function(o){if(!o||o.id!==this.pickId)return null;var x=o.value[0]+256*o.value[1]+65536*o.value[2],u=this.cells[x],T=this.positions[u[1]].slice(0,3),_={position:T,dataCoordinate:T,index:Math.floor(u[1]/48)};return"cone"===this.traceType?_.index=Math.floor(u[1]/48):"streamtube"===this.traceType&&(_.intensity=this.intensity[u[1]],_.velocity=this.vectors[u[1]].slice(0,3),_.divergence=this.vectors[u[1]][3],_.index=x),_},l.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},b.exports=function(o,x,u){var T=u.shaders;1===arguments.length&&(o=(x=o).gl);var _=h(o,T),w=d(o,T),M=a(o,s(new Uint8Array([255,255,255,255]),[1,1,4]));M.generateMipmap(),M.minFilter=o.LINEAR_MIPMAP_LINEAR,M.magFilter=o.LINEAR;var I=r(o),S=r(o),R=r(o),O=r(o),C=r(o),B=new c(o,M,_,w,I,S,C,R,O,n(o,[{buffer:I,type:o.FLOAT,size:4},{buffer:C,type:o.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:o.FLOAT,size:4},{buffer:O,type:o.FLOAT,size:2},{buffer:S,type:o.FLOAT,size:4}]),u.traceType||"cone");return B.update(x),B}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(m,b,y){var e=m("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},y.pickShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(m,b,y){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(m,b,y){var e=m("./1.0/numbers");b.exports=function(r){return e[r]}},{"./1.0/numbers":82}],84:[function(m,b,y){"use strict";b.exports=function(c){var l=c.gl,h=e(l),d=r(l,[{buffer:h,type:l.FLOAT,size:3,offset:0,stride:40},{buffer:h,type:l.FLOAT,size:4,offset:12,stride:40},{buffer:h,type:l.FLOAT,size:3,offset:28,stride:40}]),o=n(l);o.attributes.position.location=0,o.attributes.color.location=1,o.attributes.offset.location=2;var x=new t(l,h,d,o);return x.update(c),x};var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(c,l,h,d){this.gl=c,this.shader=d,this.buffer=l,this.vao=h,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var p=t.prototype;function s(c,l){for(var h=0;h<3;++h)c[0][h]=Math.min(c[0][h],l[h]),c[1][h]=Math.max(c[1][h],l[h])}p.isOpaque=function(){return!this.hasAlpha},p.isTransparent=function(){return this.hasAlpha},p.drawTransparent=p.draw=function(c){var l=this.gl,h=this.shader.uniforms;this.shader.bind();var d=h.view=c.view||a,o=h.projection=c.projection||a;h.model=c.model||a,h.clipBounds=this.clipBounds,h.opacity=this.opacity;var w=(c._ortho?2:1)*this.pixelRatio*(o[3]*d[12]+o[7]*d[13]+o[11]*d[14]+o[15]*d[15])/l.drawingBufferHeight;this.vao.bind();for(var M=0;M<3;++M)l.lineWidth(this.lineWidth[M]*this.pixelRatio),h.capSize=this.capSize[M]*w,this.lineCount[M]&&l.drawArrays(l.LINES,this.lineOffset[M],this.lineCount[M]);this.vao.unbind()};var i=function(){for(var c=new Array(3),l=0;l<3;++l){for(var h=[],d=1;d<=2;++d)for(var o=-1;o<=1;o+=2){var x=[0,0,0];x[(d+l)%3]=o,h.push(x)}c[l]=h}return c}();function f(c,l,h,d){for(var o=i[d],x=0;x<o.length;++x){var u=o[x];c.push(l[0],l[1],l[2],h[0],h[1],h[2],h[3],u[0],u[1],u[2])}return o.length}p.update=function(c){"lineWidth"in(c=c||{})&&(this.lineWidth=c.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in c&&(this.capSize=c.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in c&&(this.opacity=+c.opacity,this.opacity<1&&(this.hasAlpha=!0));var l=c.color||[[0,0,0],[0,0,0],[0,0,0]],h=c.position,d=c.error;if(Array.isArray(l[0])||(l=[l,l,l]),h&&d){var o=[],x=h.length,u=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var T=0;T<3;++T){this.lineOffset[T]=u;e:for(var _=0;_<x;++_){for(var w=h[_],M=0;M<3;++M)if(isNaN(w[M])||!isFinite(w[M]))continue e;var R,I=d[_],S=l[T];Array.isArray(S[0])&&(S=l[_]),3===S.length?S=[S[0],S[1],S[2],1]:4===S.length&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),isNaN(I[0][T])||isNaN(I[1][T])||(I[0][T]<0&&((R=w.slice())[T]+=I[0][T],o.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,R[0],R[1],R[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,R),u+=2+f(o,R,S,T)),I[1][T]>0&&((R=w.slice())[T]+=I[1][T],o.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,R[0],R[1],R[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,R),u+=2+f(o,R,S,T)))}this.lineCount[T]=u-this.lineOffset[T]}this.buffer.update(o)}},p.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(m,b,y){"use strict";var e=m("glslify"),r=m("gl-shader"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);b.exports=function(t){return r(t,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(m,b,y){"use strict";var e=m("gl-texture2d");b.exports=function(x,u,T,_){r||(r=x.FRAMEBUFFER_UNSUPPORTED,n=x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,t=x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var w=x.getExtension("WEBGL_draw_buffers");if(!p&&w&&function(D,B){var z=D.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);p=new Array(z+1);for(var Y=0;Y<=z;++Y){for(var G=new Array(z),J=0;J<Y;++J)G[J]=D.COLOR_ATTACHMENT0+J;for(J=Y;J<z;++J)G[J]=D.NONE;p[Y]=G}}(x,w),Array.isArray(u)&&(_=T,T=0|u[1],u=0|u[0]),"number"!=typeof u)throw new Error("gl-fbo: Missing shape parameter");var M=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(u<0||u>M||T<0||T>M)throw new Error("gl-fbo: Parameters are too large for FBO");var I=1;if("color"in(_=_||{})){if((I=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(I>1){if(!w)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(I>x.getParameter(w.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+I+" draw buffers")}}var S=x.UNSIGNED_BYTE,R=x.getExtension("OES_texture_float");if(_.float&&I>0){if(!R)throw new Error("gl-fbo: Context does not support floating point textures");S=x.FLOAT}else _.preferFloat&&I>0&&R&&(S=x.FLOAT);var O=!0;"depth"in _&&(O=!!_.depth);var C=!1;return"stencil"in _&&(C=!!_.stencil),new h(x,u,T,S,I,O,C,w)};var r,n,a,t,p=null;function s(x){return[x.getParameter(x.FRAMEBUFFER_BINDING),x.getParameter(x.RENDERBUFFER_BINDING),x.getParameter(x.TEXTURE_BINDING_2D)]}function i(x,u){x.bindFramebuffer(x.FRAMEBUFFER,u[0]),x.bindRenderbuffer(x.RENDERBUFFER,u[1]),x.bindTexture(x.TEXTURE_2D,u[2])}function f(x){switch(x){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case t:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(x,u,T,_,w,M){if(!_)return null;var I=e(x,u,T,w,_);return I.magFilter=x.NEAREST,I.minFilter=x.NEAREST,I.mipSamples=1,I.bind(),x.framebufferTexture2D(x.FRAMEBUFFER,M,x.TEXTURE_2D,I.handle,0),I}function l(x,u,T,_,w){var M=x.createRenderbuffer();return x.bindRenderbuffer(x.RENDERBUFFER,M),x.renderbufferStorage(x.RENDERBUFFER,_,u,T),x.framebufferRenderbuffer(x.FRAMEBUFFER,w,x.RENDERBUFFER,M),M}function h(x,u,T,_,w,M,I,S){this.gl=x,this._shape=[0|u,0|T],this._destroyed=!1,this._ext=S,this.color=new Array(w);for(var R=0;R<w;++R)this.color[R]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=M,this._useStencil=I;var O=this,C=[0|u,0|T];Object.defineProperties(C,{0:{get:function(){return O._shape[0]},set:function(D){return O.width=D}},1:{get:function(){return O._shape[1]},set:function(D){return O.height=D}}}),this._shapeVector=C,function(D){var B=s(D.gl),z=D.gl,Y=D.handle=z.createFramebuffer(),G=D._shape[0],J=D._shape[1],te=D.color.length,X=D._ext,K=D._useStencil,ae=D._useDepth,U=D._colorType;z.bindFramebuffer(z.FRAMEBUFFER,Y);for(var V=0;V<te;++V)D.color[V]=c(z,G,J,U,z.RGBA,z.COLOR_ATTACHMENT0+V);0===te?(D._color_rb=l(z,G,J,z.RGBA4,z.COLOR_ATTACHMENT0),X&&X.drawBuffersWEBGL(p[0])):te>1&&X.drawBuffersWEBGL(p[te]);var q=z.getExtension("WEBGL_depth_texture");q?K?D.depth=c(z,G,J,q.UNSIGNED_INT_24_8_WEBGL,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):ae&&(D.depth=c(z,G,J,z.UNSIGNED_SHORT,z.DEPTH_COMPONENT,z.DEPTH_ATTACHMENT)):ae&&K?D._depth_rb=l(z,G,J,z.DEPTH_STENCIL,z.DEPTH_STENCIL_ATTACHMENT):ae?D._depth_rb=l(z,G,J,z.DEPTH_COMPONENT16,z.DEPTH_ATTACHMENT):K&&(D._depth_rb=l(z,G,J,z.STENCIL_INDEX,z.STENCIL_ATTACHMENT));var ie=z.checkFramebufferStatus(z.FRAMEBUFFER);if(ie!==z.FRAMEBUFFER_COMPLETE){for(D._destroyed=!0,z.bindFramebuffer(z.FRAMEBUFFER,null),z.deleteFramebuffer(D.handle),D.handle=null,D.depth&&(D.depth.dispose(),D.depth=null),D._depth_rb&&(z.deleteRenderbuffer(D._depth_rb),D._depth_rb=null),V=0;V<D.color.length;++V)D.color[V].dispose(),D.color[V]=null;D._color_rb&&(z.deleteRenderbuffer(D._color_rb),D._color_rb=null),i(z,B),f(ie)}i(z,B)}(this)}var d=h.prototype;function o(x,u,T){if(x._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(x._shape[0]!==u||x._shape[1]!==T){var _=x.gl,w=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(u<0||u>w||T<0||T>w)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");x._shape[0]=u,x._shape[1]=T;for(var M=s(_),I=0;I<x.color.length;++I)x.color[I].shape=x._shape;x._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,x._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,x._shape[0],x._shape[1])),x.depth&&(x.depth.shape=x._shape),x._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,x._depth_rb),x._useDepth&&x._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,x._shape[0],x._shape[1]):x._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,x._shape[0],x._shape[1]):x._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,x._shape[0],x._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,x.handle);var S=_.checkFramebufferStatus(_.FRAMEBUFFER);S!==_.FRAMEBUFFER_COMPLETE&&(x.dispose(),i(_,M),f(S)),i(_,M)}}Object.defineProperties(d,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(x){if(Array.isArray(x)||(x=[0|x,0|x]),2!==x.length)throw new Error("gl-fbo: Shape vector must be length 2");var u=0|x[0],T=0|x[1];return o(this,u,T),[u,T]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(x){return o(this,x|=0,this._shape[1]),x},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(x){return o(this,this._shape[0],x|=0),x},enumerable:!1}}),d.bind=function(){if(!this._destroyed){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,this.handle),x.viewport(0,0,this._shape[0],this._shape[1])}},d.dispose=function(){if(!this._destroyed){this._destroyed=!0;var x=this.gl;x.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(x.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var u=0;u<this.color.length;++u)this.color[u].dispose(),this.color[u]=null;this._color_rb&&(x.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(m,b,y){var e=m("sprintf-js").sprintf,r=m("gl-constants/lookup"),n=m("glsl-shader-name"),a=m("add-line-numbers");b.exports=function(t,p,s){"use strict";var i=n(p)||"of unknown name (see npm glsl-shader-name)",f="unknown type";void 0!==s&&(f=s===r.FRAGMENT_SHADER?"fragment":"vertex");for(var c=e("Error compiling %s shader %s:\n",f,i),l=e("%s%s",c,t),h=t.split("\n"),d={},o=0;o<h.length;o++){var x=h[o];if(""!==x&&"\0"!==x){var u=parseInt(x.split(":")[2]);if(isNaN(u))throw new Error(e("Could not parse error: %s",x));d[u]=x}}var T=a(p).split("\n");for(o=0;o<T.length;o++)if((d[o+3]||d[o+2]||d[o+1])&&(c+=T[o]+"\n",d[o+1])){var w=d[o+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),c+=e("^^^ %s\n\n",w)}return{long:c.trim(),short:l.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(m,b,y){"use strict";b.exports=function(l,h){var d=l.gl,M=new s(l,a(d,p.vertex,p.fragment),a(d,p.pickVertex,p.pickFragment),t(d),t(d),t(d),t(d));return M.update(h),l.addObject(M),M};var e=m("binary-search-bounds"),r=m("iota-array"),n=m("typedarray-pool"),a=m("gl-shader"),t=m("gl-buffer"),p=m("./lib/shaders");function s(l,h,d,o,x,u,T){this.plot=l,this.shader=h,this.pickShader=d,this.positionBuffer=o,this.weightBuffer=x,this.colorBuffer=u,this.idBuffer=T,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i,l,h,f=s.prototype,c=[0,0,1,0,0,1,1,0,1,1,0,1];f.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var l=this.plot,h=this.shader,d=this.bounds,o=this.numVertices;if(!(o<=0)){var x=l.gl,u=l.dataBox,_=d[3]-d[1],w=u[2]-u[0],M=u[3]-u[1];i[0]=2*(d[2]-d[0])/w,i[4]=2*_/M,i[6]=2*(d[0]-u[0])/w-1,i[7]=2*(d[1]-u[1])/M-1,h.bind();var I=h.uniforms;I.viewTransform=i,I.shape=this.shape;var S=h.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(x.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(x.UNSIGNED_BYTE,!0),x.drawArrays(x.TRIANGLES,0,o)}}),f.drawPick=(l=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(d){var o=this.plot,x=this.pickShader,u=this.bounds,T=this.numVertices;if(!(T<=0)){var _=o.gl,w=o.dataBox,I=u[3]-u[1],S=w[2]-w[0],R=w[3]-w[1];l[0]=2*(u[2]-u[0])/S,l[4]=2*I/R,l[6]=2*(u[0]-w[0])/S-1,l[7]=2*(u[1]-w[1])/R-1;for(var O=0;O<4;++O)h[O]=d>>8*O&255;this.pickOffset=d,x.bind();var C=x.uniforms;C.viewTransform=l,C.pickOffset=h,C.shape=this.shape;var D=x.attributes;return this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),D.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,T),d+this.shape[0]*this.shape[1]}}),f.pick=function(l,h,d){var o=this.pickOffset;if(d<o||d>=o+this.shape[0]*this.shape[1])return null;var u=d-o;return{object:this,pointId:u,dataCoord:[this.xData[u%this.shape[0]],this.yData[u/this.shape[0]|0]]}},f.update=function(l){var h=(l=l||{}).shape||[0,0],d=l.x||r(h[0]),o=l.y||r(h[1]),x=l.z||new Float32Array(h[0]*h[1]),u=!1!==l.zsmooth;this.xData=d,this.yData=o;var T,_,w,M,I=l.colorLevels||[0],S=l.colorValues||[0,0,0,1],R=I.length,O=this.bounds;u?(T=O[0]=d[0],_=O[1]=o[0],w=O[2]=d[d.length-1],M=O[3]=o[o.length-1]):(T=O[0]=d[0]+(d[1]-d[0])/2,_=O[1]=o[0]+(o[1]-o[0])/2,w=O[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,M=O[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var C=1/(w-T),D=1/(M-_),B=h[0],z=h[1];this.shape=[B,z];var Y=(u?(B-1)*(z-1):B*z)*(c.length>>>1);this.numVertices=Y;for(var G=n.mallocUint8(4*Y),J=n.mallocFloat32(2*Y),te=n.mallocUint8(2*Y),X=n.mallocUint32(Y),K=0,ae=u?B-1:B,U=u?z-1:z,V=0;V<U;++V){var q,ie;u?(q=D*(o[V]-_),ie=D*(o[V+1]-_)):(q=V<z-1?D*(o[V]-(o[V+1]-o[V])/2-_):D*(o[V]-(o[V]-o[V-1])/2-_),ie=V<z-1?D*(o[V]+(o[V+1]-o[V])/2-_):D*(o[V]+(o[V]-o[V-1])/2-_));for(var H=0;H<ae;++H){var ee,Q;u?(ee=C*(d[H]-T),Q=C*(d[H+1]-T)):(ee=H<B-1?C*(d[H]-(d[H+1]-d[H])/2-T):C*(d[H]-(d[H]-d[H-1])/2-T),Q=H<B-1?C*(d[H]+(d[H+1]-d[H])/2-T):C*(d[H]+(d[H]-d[H-1])/2-T));for(var oe=0;oe<c.length;oe+=2){var le,de,fe,be,he=c[oe],_e=c[oe+1],Ce=x[u?(V+_e)*B+(H+he):V*B+H],Ee=e.le(I,Ce);if(Ee<0)le=S[0],de=S[1],fe=S[2],be=S[3];else if(Ee===R-1)le=S[4*R-4],de=S[4*R-3],fe=S[4*R-2],be=S[4*R-1];else{var Ae=(Ce-I[Ee])/(I[Ee+1]-I[Ee]),ze=1-Ae,ve=4*Ee,Te=4*(Ee+1);le=ze*S[ve]+Ae*S[Te],de=ze*S[ve+1]+Ae*S[Te+1],fe=ze*S[ve+2]+Ae*S[Te+2],be=ze*S[ve+3]+Ae*S[Te+3]}G[4*K]=255*le,G[4*K+1]=255*de,G[4*K+2]=255*fe,G[4*K+3]=255*be,J[2*K]=.5*ee+.5*Q,J[2*K+1]=.5*q+.5*ie,te[2*K]=he,te[2*K+1]=_e,X[K]=V*B+H,K+=1}}}this.positionBuffer.update(J),this.weightBuffer.update(te),this.colorBuffer.update(G),this.idBuffer.update(X),n.free(J),n.free(G),n.free(te),n.free(X)},f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(m,b,y){"use strict";var e=m("glslify");b.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(m,b,y){var e=m("glslify"),r=m("gl-shader"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),p=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];y.createShader=function(s){return r(s,n,a,null,p)},y.createPickShader=function(s){return r(s,n,t,null,p)}},{"gl-shader":132,glslify:231}],91:[function(m,b,y){"use strict";b.exports=function(T){var _=T.gl||T.scene&&T.scene.gl,w=f(_);w.attributes.position.location=0,w.attributes.nextPosition.location=1,w.attributes.arcLength.location=2,w.attributes.lineWidth.location=3,w.attributes.color.location=4;var M=c(_);M.attributes.position.location=0,M.attributes.nextPosition.location=1,M.attributes.arcLength.location=2,M.attributes.lineWidth.location=3,M.attributes.color.location=4;for(var I=e(_),S=r(_,[{buffer:I,size:3,offset:0,stride:48},{buffer:I,size:3,offset:12,stride:48},{buffer:I,size:1,offset:24,stride:48},{buffer:I,size:1,offset:28,stride:48},{buffer:I,size:4,offset:32,stride:48}]),R=s(new Array(1024),[256,1,4]),O=0;O<1024;++O)R.data[O]=255;var C=n(_,R);C.wrap=_.REPEAT;var D=new x(_,w,M,I,S,C);return D.update(T),D};var e=m("gl-buffer"),r=m("gl-vao"),n=m("gl-texture2d"),a=new Uint8Array(4),t=new Float32Array(a.buffer),p=m("binary-search-bounds"),s=m("ndarray"),i=m("./lib/shaders"),f=i.createShader,c=i.createPickShader,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(T,_){for(var w=0,M=0;M<3;++M){var I=T[M]-_[M];w+=I*I}return Math.sqrt(w)}function d(T){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)_[0][w]=Math.max(T[0][w],_[0][w]),_[1][w]=Math.min(T[1][w],_[1][w]);return _}function o(T,_,w,M){this.arcLength=T,this.position=_,this.index=w,this.dataCoordinate=M}function x(T,_,w,M,I,S){this.gl=T,this.shader=_,this.pickShader=w,this.buffer=M,this.vao=I,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=S,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var u=x.prototype;u.isTransparent=function(){return this.hasAlpha},u.isOpaque=function(){return!this.hasAlpha},u.pickSlots=1,u.setPickBase=function(T){this.pickId=T},u.drawTransparent=u.draw=function(T){if(this.vertexCount){var _=this.gl,w=this.shader,M=this.vao;w.bind(),w.uniforms={model:T.model||l,view:T.view||l,projection:T.projection||l,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(_.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},u.drawPick=function(T){if(this.vertexCount){var _=this.gl,w=this.pickShader,M=this.vao;w.bind(),w.uniforms={model:T.model||l,view:T.view||l,projection:T.projection||l,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},M.bind(),M.draw(_.TRIANGLE_STRIP,this.vertexCount),M.unbind()}},u.update=function(T){var _,w;this.dirty=!0;var M=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var I=[],S=[],R=[],O=0,C=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=T.position||T.positions;if(B){var z=T.color||T.colors||[0,0,0,1],Y=T.lineWidth||1,G=!1;e:for(_=1;_<B.length;++_){var J,te,X,K=B[_-1],ae=B[_];for(S.push(O),R.push(K.slice()),w=0;w<3;++w){if(isNaN(K[w])||isNaN(ae[w])||!isFinite(K[w])||!isFinite(ae[w])){if(!M&&I.length>0){for(var U=0;U<24;++U)I.push(I[I.length-12]);C+=2,G=!0}continue e}D[0][w]=Math.min(D[0][w],K[w],ae[w]),D[1][w]=Math.max(D[1][w],K[w],ae[w])}Array.isArray(z[0])?(J=z.length>_-1?z[_-1]:z.length>0?z[z.length-1]:[0,0,0,1],te=z.length>_?z[_]:z.length>0?z[z.length-1]:[0,0,0,1]):J=te=z,3===J.length&&(J=[J[0],J[1],J[2],1]),3===te.length&&(te=[te[0],te[1],te[2],1]),!this.hasAlpha&&J[3]<1&&(this.hasAlpha=!0),X=Array.isArray(Y)?Y.length>_-1?Y[_-1]:Y.length>0?Y[Y.length-1]:[0,0,0,1]:Y;var V=O;if(O+=h(K,ae),G){for(w=0;w<2;++w)I.push(K[0],K[1],K[2],ae[0],ae[1],ae[2],V,X,J[0],J[1],J[2],J[3]);C+=2,G=!1}I.push(K[0],K[1],K[2],ae[0],ae[1],ae[2],V,X,J[0],J[1],J[2],J[3],K[0],K[1],K[2],ae[0],ae[1],ae[2],V,-X,J[0],J[1],J[2],J[3],ae[0],ae[1],ae[2],K[0],K[1],K[2],O,-X,te[0],te[1],te[2],te[3],ae[0],ae[1],ae[2],K[0],K[1],K[2],O,X,te[0],te[1],te[2],te[3]),C+=4}}if(this.buffer.update(I),S.push(O),R.push(B[B.length-1].slice()),this.bounds=D,this.vertexCount=C,this.points=R,this.arcLength=S,"dashes"in T){var q=T.dashes.slice();for(q.unshift(0),_=1;_<q.length;++_)q[_]=q[_-1]+q[_];var ie=s(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(w=0;w<4;++w)ie.set(_,0,w,0);1&p.le(q,q[q.length-1]*_/255)?ie.set(_,0,0,0):ie.set(_,0,0,255)}this.texture.setPixels(ie)}},u.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},u.pick=function(T){if(!T||T.id!==this.pickId)return null;var B,z,Y,_=(B=T.value[0],z=T.value[1],Y=T.value[2],a[0]=0,a[1]=Y,a[2]=z,a[3]=B,t[0]),w=p.le(this.arcLength,_);if(w<0)return null;if(w===this.arcLength.length-1)return new o(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),w);for(var M=this.points[w],I=this.points[Math.min(w+1,this.points.length-1)],S=(_-this.arcLength[w])/(this.arcLength[w+1]-this.arcLength[w]),R=1-S,O=[0,0,0],C=0;C<3;++C)O[C]=R*M[C]+S*I[C];var D=Math.min(S<.5?w:w+1,this.points.length-1);return new o(_,O,D,this.points[D])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(m,b,y){b.exports=function(e){var r=new Float32Array(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},{}],93:[function(m,b,y){b.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(m,b,y){b.exports=function(e){var r=e[0],n=e[1],a=e[2],t=e[3],p=e[4],s=e[5],i=e[6],f=e[7],c=e[8],l=e[9],h=e[10],d=e[11],o=e[12],x=e[13],u=e[14],T=e[15];return(r*s-n*p)*(h*T-d*u)-(r*i-a*p)*(l*T-d*x)+(r*f-t*p)*(l*u-h*x)+(n*i-a*s)*(c*T-d*o)-(n*f-t*s)*(c*u-h*o)+(a*f-t*i)*(c*x-l*o)}},{}],95:[function(m,b,y){b.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=r[3],s=n+n,i=a+a,f=t+t,c=n*s,l=a*s,h=a*i,d=t*s,o=t*i,x=t*f,u=p*s,T=p*i,_=p*f;return e[0]=1-h-x,e[1]=l+_,e[2]=d-T,e[3]=0,e[4]=l-_,e[5]=1-c-x,e[6]=o+u,e[7]=0,e[8]=d+T,e[9]=o-u,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],s=r[3],i=a+a,f=t+t,c=p+p,l=a*i,h=a*f,d=a*c,o=t*f,x=t*c,u=p*c,T=s*i,_=s*f,w=s*c;return e[0]=1-(o+u),e[1]=h+w,e[2]=d-_,e[3]=0,e[4]=h-w,e[5]=1-(l+u),e[6]=x+T,e[7]=0,e[8]=d+_,e[9]=x-T,e[10]=1-(l+o),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}},{}],97:[function(m,b,y){b.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(m,b,y){b.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=r[3],s=r[4],i=r[5],f=r[6],c=r[7],l=r[8],h=r[9],d=r[10],o=r[11],x=r[12],u=r[13],T=r[14],_=r[15],w=n*i-a*s,M=n*f-t*s,I=n*c-p*s,S=a*f-t*i,R=a*c-p*i,O=t*c-p*f,C=l*u-h*x,D=l*T-d*x,B=l*_-o*x,z=h*T-d*u,Y=h*_-o*u,G=d*_-o*T,J=w*G-M*Y+I*z+S*B-R*D+O*C;return J?(e[0]=(i*G-f*Y+c*z)*(J=1/J),e[1]=(t*Y-a*G-p*z)*J,e[2]=(u*O-T*R+_*S)*J,e[3]=(d*R-h*O-o*S)*J,e[4]=(f*B-s*G-c*D)*J,e[5]=(n*G-t*B+p*D)*J,e[6]=(T*I-x*O-_*M)*J,e[7]=(l*O-d*I+o*M)*J,e[8]=(s*Y-i*B+c*C)*J,e[9]=(a*B-n*Y-p*C)*J,e[10]=(x*R-u*I+_*w)*J,e[11]=(h*I-l*R-o*w)*J,e[12]=(i*D-s*z-f*C)*J,e[13]=(n*z-a*D+t*C)*J,e[14]=(u*M-x*S-T*w)*J,e[15]=(l*S-h*M+d*w)*J,e):null}},{}],99:[function(m,b,y){var e=m("./identity");b.exports=function(r,n,a,t){var p,s,i,f,c,l,h,d,o,x,u=n[0],T=n[1],_=n[2],w=t[0],M=t[1],I=t[2],S=a[0],R=a[1],O=a[2];return Math.abs(u-S)<1e-6&&Math.abs(T-R)<1e-6&&Math.abs(_-O)<1e-6?e(r):(h=u-S,d=T-R,o=_-O,p=M*(o*=x=1/Math.sqrt(h*h+d*d+o*o))-I*(d*=x),s=I*(h*=x)-w*o,i=w*d-M*h,(x=Math.sqrt(p*p+s*s+i*i))?(p*=x=1/x,s*=x,i*=x):(p=0,s=0,i=0),f=d*i-o*s,c=o*p-h*i,l=h*s-d*p,(x=Math.sqrt(f*f+c*c+l*l))?(f*=x=1/x,c*=x,l*=x):(f=0,c=0,l=0),r[0]=p,r[1]=f,r[2]=h,r[3]=0,r[4]=s,r[5]=c,r[6]=d,r[7]=0,r[8]=i,r[9]=l,r[10]=o,r[11]=0,r[12]=-(p*u+s*T+i*_),r[13]=-(f*u+c*T+l*_),r[14]=-(h*u+d*T+o*_),r[15]=1,r)}},{"./identity":97}],100:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],s=r[3],i=r[4],f=r[5],c=r[6],l=r[7],h=r[8],d=r[9],o=r[10],x=r[11],u=r[12],T=r[13],_=r[14],w=r[15],M=n[0],I=n[1],S=n[2],R=n[3];return e[0]=M*a+I*i+S*h+R*u,e[1]=M*t+I*f+S*d+R*T,e[2]=M*p+I*c+S*o+R*_,e[3]=M*s+I*l+S*x+R*w,e[4]=(M=n[4])*a+(I=n[5])*i+(S=n[6])*h+(R=n[7])*u,e[5]=M*t+I*f+S*d+R*T,e[6]=M*p+I*c+S*o+R*_,e[7]=M*s+I*l+S*x+R*w,e[8]=(M=n[8])*a+(I=n[9])*i+(S=n[10])*h+(R=n[11])*u,e[9]=M*t+I*f+S*d+R*T,e[10]=M*p+I*c+S*o+R*_,e[11]=M*s+I*l+S*x+R*w,e[12]=(M=n[12])*a+(I=n[13])*i+(S=n[14])*h+(R=n[15])*u,e[13]=M*t+I*f+S*d+R*T,e[14]=M*p+I*c+S*o+R*_,e[15]=M*s+I*l+S*x+R*w,e}},{}],101:[function(m,b,y){b.exports=function(e,r,n,a,t,p,s){var i=1/(r-n),f=1/(a-t),c=1/(p-s);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(r+n)*i,e[13]=(t+a)*f,e[14]=(s+p)*c,e[15]=1,e}},{}],102:[function(m,b,y){b.exports=function(e,r,n,a,t){var p=1/Math.tan(r/2),s=1/(a-t);return e[0]=p/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(t+a)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*t*a*s,e[15]=0,e}},{}],103:[function(m,b,y){b.exports=function(e,r,n,a){var t,p,s,i,f,c,l,h,d,o,x,u,T,_,w,M,I,S,R,O,C,D,B,z,Y=a[0],G=a[1],J=a[2],te=Math.sqrt(Y*Y+G*G+J*J);return Math.abs(te)<1e-6?null:(Y*=te=1/te,G*=te,J*=te,t=Math.sin(n),p=Math.cos(n),f=r[1],c=r[2],l=r[3],d=r[5],o=r[6],x=r[7],T=r[9],_=r[10],w=r[11],R=Y*G*(s=1-p)-J*t,O=G*G*s+p,C=J*G*s+Y*t,D=Y*J*s+G*t,B=G*J*s-Y*t,z=J*J*s+p,e[0]=(i=r[0])*(M=Y*Y*s+p)+(h=r[4])*(I=G*Y*s+J*t)+(u=r[8])*(S=J*Y*s-G*t),e[1]=f*M+d*I+T*S,e[2]=c*M+o*I+_*S,e[3]=l*M+x*I+w*S,e[4]=i*R+h*O+u*C,e[5]=f*R+d*O+T*C,e[6]=c*R+o*O+_*C,e[7]=l*R+x*O+w*C,e[8]=i*D+h*B+u*z,e[9]=f*D+d*B+T*z,e[10]=c*D+o*B+_*z,e[11]=l*D+x*B+w*z,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}},{}],104:[function(m,b,y){b.exports=function(e,r,n){var a=Math.sin(n),t=Math.cos(n),p=r[4],s=r[5],i=r[6],f=r[7],c=r[8],l=r[9],h=r[10],d=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=p*t+c*a,e[5]=s*t+l*a,e[6]=i*t+h*a,e[7]=f*t+d*a,e[8]=c*t-p*a,e[9]=l*t-s*a,e[10]=h*t-i*a,e[11]=d*t-f*a,e}},{}],105:[function(m,b,y){b.exports=function(e,r,n){var a=Math.sin(n),t=Math.cos(n),p=r[0],s=r[1],i=r[2],f=r[3],c=r[8],l=r[9],h=r[10],d=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=p*t-c*a,e[1]=s*t-l*a,e[2]=i*t-h*a,e[3]=f*t-d*a,e[8]=p*a+c*t,e[9]=s*a+l*t,e[10]=i*a+h*t,e[11]=f*a+d*t,e}},{}],106:[function(m,b,y){b.exports=function(e,r,n){var a=Math.sin(n),t=Math.cos(n),p=r[0],s=r[1],i=r[2],f=r[3],c=r[4],l=r[5],h=r[6],d=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=p*t+c*a,e[1]=s*t+l*a,e[2]=i*t+h*a,e[3]=f*t+d*a,e[4]=c*t-p*a,e[5]=l*t-s*a,e[6]=h*t-i*a,e[7]=d*t-f*a,e}},{}],107:[function(m,b,y){b.exports=function(e,r,n){var a=n[0],t=n[1],p=n[2];return e[0]=r[0]*a,e[1]=r[1]*a,e[2]=r[2]*a,e[3]=r[3]*a,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*p,e[9]=r[9]*p,e[10]=r[10]*p,e[11]=r[11]*p,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},{}],108:[function(m,b,y){b.exports=function(e,r,n){var a,t,p,s,i,f,c,l,h,d,o,x,u=n[0],T=n[1],_=n[2];return r===e?(e[12]=r[0]*u+r[4]*T+r[8]*_+r[12],e[13]=r[1]*u+r[5]*T+r[9]*_+r[13],e[14]=r[2]*u+r[6]*T+r[10]*_+r[14],e[15]=r[3]*u+r[7]*T+r[11]*_+r[15]):(t=r[1],p=r[2],s=r[3],i=r[4],f=r[5],c=r[6],l=r[7],h=r[8],d=r[9],o=r[10],x=r[11],e[0]=a=r[0],e[1]=t,e[2]=p,e[3]=s,e[4]=i,e[5]=f,e[6]=c,e[7]=l,e[8]=h,e[9]=d,e[10]=o,e[11]=x,e[12]=a*u+i*T+h*_+r[12],e[13]=t*u+f*T+d*_+r[13],e[14]=p*u+c*T+o*_+r[14],e[15]=s*u+l*T+x*_+r[15]),e}},{}],109:[function(m,b,y){b.exports=function(e,r){if(e===r){var n=r[1],a=r[2],t=r[3],p=r[6],s=r[7],i=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=n,e[6]=r[9],e[7]=r[13],e[8]=a,e[9]=p,e[11]=r[14],e[12]=t,e[13]=s,e[14]=i}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}},{}],110:[function(m,b,y){"use strict";var e=m("barycentric"),r=m("polytope-closest-point/lib/closest_point_2d.js");function n(p,s){for(var i=[0,0,0,0],f=0;f<4;++f)for(var c=0;c<4;++c)i[c]+=p[4*f+c]*s[f];return i}function a(p,s,i,f,c){for(var l=n(f,n(i,n(s,[p[0],p[1],p[2],1]))),h=0;h<3;++h)l[h]/=l[3];return[.5*c[0]*(1+l[0]),.5*c[1]*(1-l[1])]}function t(p,s){for(var i=[0,0,0],f=0;f<p.length;++f)for(var c=p[f],l=s[f],h=0;h<3;++h)i[h]+=l*c[h];return i}b.exports=function(p,s,i,f,c,l){if(1===p.length)return[0,p[0].slice()];for(var h=new Array(p.length),d=0;d<p.length;++d)h[d]=a(p[d],i,f,c,l);var o=0,x=1/0;for(d=0;d<h.length;++d){for(var u=0,T=0;T<2;++T)u+=Math.pow(h[d][T]-s[T],2);u<x&&(x=u,o=d)}var _=function(M,I){if(2===M.length){for(var S=0,R=0,O=0;O<2;++O)S+=Math.pow(I[O]-M[0][O],2),R+=Math.pow(I[O]-M[1][O],2);return(S=Math.sqrt(S))+(R=Math.sqrt(R))<1e-6?[1,0]:[R/(S+R),S/(R+S)]}if(3===M.length){var C=[0,0];return r(M[0],M[1],M[2],I,C),e(M,C)}return[]}(h,s),w=0;for(d=0;d<3;++d){if(_[d]<-.001||_[d]>1.0001)return null;w+=_[d]}return Math.abs(w-1)>.001?null:[o,t(p,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(m,b,y){var e=m("glslify"),r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),n=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);y.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.wireShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},y.pointShader={vertex:p,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},y.pickShader={vertex:i,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},y.pointPickShader={vertex:c,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},y.contourShader={vertex:l,fragment:h,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(m,b,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("gl-vao"),a=m("gl-texture2d"),t=m("normals"),p=m("gl-mat4/multiply"),s=m("gl-mat4/invert"),i=m("ndarray"),f=m("colormap"),c=m("simplicial-complex-contour"),l=m("typedarray-pool"),h=m("./lib/shaders"),d=m("./lib/closest-point"),o=h.meshShader,x=h.wireShader,u=h.pointShader,T=h.pickShader,_=h.pointPickShader,w=h.contourShader,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function I(G,J,te,X,K,ae,U,V,q,ie,H,ee,Q,oe,le,de,fe,be,he,_e,Ce,Ee,Ae,ze,ve,Te,Ie){this.gl=G,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=J,this.dirty=!0,this.triShader=te,this.lineShader=X,this.pointShader=K,this.pickShader=ae,this.pointPickShader=U,this.contourShader=V,this.trianglePositions=q,this.triangleColors=H,this.triangleNormals=Q,this.triangleUVs=ee,this.triangleIds=ie,this.triangleVAO=oe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=le,this.edgeColors=fe,this.edgeUVs=be,this.edgeIds=de,this.edgeVAO=he,this.edgeCount=0,this.pointPositions=_e,this.pointColors=Ee,this.pointUVs=Ae,this.pointSizes=ze,this.pointIds=Ce,this.pointVAO=ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=M,this._view=M,this._projection=M,this._resolution=[1,1]}var S=I.prototype;function R(G,J){if(!J||!J.length)return 1;for(var te=0;te<J.length;++te){if(J.length<2)return 1;if(J[te][0]===G)return J[te][1];if(J[te][0]>G&&te>0){var X=(J[te][0]-G)/(J[te][0]-J[te-1][0]);return J[te][1]*(1-X)+X*J[te-1][1]}}return 1}function O(G){var J=e(G,o.vertex,o.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.normal.location=4,J}function C(G){var J=e(G,x.vertex,x.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J}function D(G){var J=e(G,u.vertex,u.fragment);return J.attributes.position.location=0,J.attributes.color.location=2,J.attributes.uv.location=3,J.attributes.pointSize.location=4,J}function B(G){var J=e(G,T.vertex,T.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J}function z(G){var J=e(G,_.vertex,_.fragment);return J.attributes.position.location=0,J.attributes.id.location=1,J.attributes.pointSize.location=4,J}function Y(G){var J=e(G,w.vertex,w.fragment);return J.attributes.position.location=0,J}S.isOpaque=function(){return!this.hasAlpha},S.isTransparent=function(){return this.hasAlpha},S.pickSlots=1,S.setPickBase=function(G){this.pickId=G},S.highlight=function(G){if(G&&this.contourEnable){for(var J=c(this.cells,this.intensity,G.intensity),te=J.cells,X=J.vertexIds,K=J.vertexWeights,ae=te.length,U=l.mallocFloat32(6*ae),V=0,q=0;q<ae;++q)for(var ie=te[q],H=0;H<2;++H){var ee=ie[0];2===ie.length&&(ee=ie[H]);for(var le=K[ee],de=1-le,fe=this.positions[X[ee][0]],be=this.positions[X[ee][1]],he=0;he<3;++he)U[V++]=le*fe[he]+de*be[he]}this.contourCount=V/3|0,this.contourPositions.update(U.subarray(0,V)),l.free(U)}else this.contourCount=0},S.update=function(G){G=G||{};var J=this.gl;this.dirty=!0,"contourEnable"in G&&(this.contourEnable=G.contourEnable),"contourColor"in G&&(this.contourColor=G.contourColor),"lineWidth"in G&&(this.lineWidth=G.lineWidth),"lightPosition"in G&&(this.lightPosition=G.lightPosition),this.hasAlpha=!1,"opacity"in G&&(this.opacity=G.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in G&&(this.opacityscale=G.opacityscale,this.hasAlpha=!0),"ambient"in G&&(this.ambientLight=G.ambient),"diffuse"in G&&(this.diffuseLight=G.diffuse),"specular"in G&&(this.specularLight=G.specular),"roughness"in G&&(this.roughness=G.roughness),"fresnel"in G&&(this.fresnel=G.fresnel),G.texture?(this.texture.dispose(),this.texture=a(J,G.texture)):G.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=J.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=J.LINEAR,this.texture.setPixels(function(tn,hn){for(var cn=f({colormap:tn,nshades:256,format:"rgba"}),yn=new Uint8Array(1024),en=0;en<256;++en){for(var Xe=cn[en],tt=0;tt<3;++tt)yn[4*en+tt]=Xe[tt];yn[4*en+3]=hn?255*R(en/255,hn):255*Xe[3]}return i(yn,[256,256,4],[4,0,1])}(G.colormap,this.opacityscale)),this.texture.generateMipmap());var te=G.cells,X=G.positions;if(X&&te){var K=[],ae=[],U=[],V=[],q=[],ie=[],H=[],ee=[],Q=[],oe=[],le=[],de=[],fe=[],be=[];this.cells=te,this.positions=X;var he=G.vertexNormals,_e=G.cellNormals,Ce=void 0===G.vertexNormalsEpsilon?1e-6:G.vertexNormalsEpsilon;G.useFacetNormals&&!_e&&(_e=t.faceNormals(te,X,void 0===G.faceNormalsEpsilon?1e-6:G.faceNormalsEpsilon)),_e||he||(he=t.vertexNormals(te,X,Ce));var Ae=G.vertexColors,ze=G.cellColors,ve=G.meshColor||[1,1,1,1],Te=G.vertexUVs,Ie=G.vertexIntensity,De=G.cellUVs,Fe=G.cellIntensity,Ue=1/0,qe=-1/0;if(!Te&&!De)if(Ie)if(G.vertexIntensityBounds)Ue=+G.vertexIntensityBounds[0],qe=+G.vertexIntensityBounds[1];else for(var je=0;je<Ie.length;++je){var rt=Ie[je];Ue=Math.min(Ue,rt),qe=Math.max(qe,rt)}else if(Fe)if(G.cellIntensityBounds)Ue=+G.cellIntensityBounds[0],qe=+G.cellIntensityBounds[1];else for(je=0;je<Fe.length;++je)rt=Fe[je],Ue=Math.min(Ue,rt),qe=Math.max(qe,rt);else for(je=0;je<X.length;++je)rt=X[je][2],Ue=Math.min(Ue,rt),qe=Math.max(qe,rt);this.intensity=Ie||Fe||function(tn){for(var hn=tn.length,cn=new Array(hn),yn=0;yn<hn;++yn)cn[yn]=tn[yn][2];return cn}(X),this.pickVertex=!(Fe||ze);var Ne=G.pointSizes,Be=G.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],je=0;je<X.length;++je)for(var We=X[je],Ye=0;Ye<3;++Ye)!isNaN(We[Ye])&&isFinite(We[Ye])&&(this.bounds[0][Ye]=Math.min(this.bounds[0][Ye],We[Ye]),this.bounds[1][Ye]=Math.max(this.bounds[1][Ye],We[Ye]));var lt=0,mt=0,Tt=0;e:for(je=0;je<te.length;++je){var It=te[je];switch(It.length){case 1:for(We=X[ct=It[0]],Ye=0;Ye<3;++Ye)if(isNaN(We[Ye])||!isFinite(We[Ye]))continue e;oe.push(We[0],We[1],We[2]),at=Ae?Ae[ct]:ze?ze[je]:ve,this.opacityscale&&Ie?ae.push(at[0],at[1],at[2],this.opacity*R((Ie[ct]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?le.push(at[0],at[1],at[2],this.opacity):(le.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),de.push((St=Te?Te[ct]:Ie?[(Ie[ct]-Ue)/(qe-Ue),0]:De?De[je]:Fe?[(Fe[je]-Ue)/(qe-Ue),0]:[(We[2]-Ue)/(qe-Ue),0])[0],St[1]),fe.push(Ne?Ne[ct]:Be),be.push(je),Tt+=1;break;case 2:for(Ye=0;Ye<2;++Ye){We=X[ct=It[Ye]];for(var Ct=0;Ct<3;++Ct)if(isNaN(We[Ct])||!isFinite(We[Ct]))continue e}for(Ye=0;Ye<2;++Ye)We=X[ct=It[Ye]],ie.push(We[0],We[1],We[2]),at=Ae?Ae[ct]:ze?ze[je]:ve,this.opacityscale&&Ie?ae.push(at[0],at[1],at[2],this.opacity*R((Ie[ct]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?H.push(at[0],at[1],at[2],this.opacity):(H.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),ee.push((St=Te?Te[ct]:Ie?[(Ie[ct]-Ue)/(qe-Ue),0]:De?De[je]:Fe?[(Fe[je]-Ue)/(qe-Ue),0]:[(We[2]-Ue)/(qe-Ue),0])[0],St[1]),Q.push(je);mt+=1;break;case 3:for(Ye=0;Ye<3;++Ye)for(We=X[ct=It[Ye]],Ct=0;Ct<3;++Ct)if(isNaN(We[Ct])||!isFinite(We[Ct]))continue e;for(Ye=0;Ye<3;++Ye){var ct,at,St,Xt;We=X[ct=It[2-Ye]],K.push(We[0],We[1],We[2]),(at=Ae?Ae[ct]:ze?ze[je]:ve)?this.opacityscale&&Ie?ae.push(at[0],at[1],at[2],this.opacity*R((Ie[ct]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?ae.push(at[0],at[1],at[2],this.opacity):(ae.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)):ae.push(.5,.5,.5,1),V.push((St=Te?Te[ct]:Ie?[(Ie[ct]-Ue)/(qe-Ue),0]:De?De[je]:Fe?[(Fe[je]-Ue)/(qe-Ue),0]:[(We[2]-Ue)/(qe-Ue),0])[0],St[1]),U.push((Xt=he?he[ct]:_e[je])[0],Xt[1],Xt[2]),q.push(je)}lt+=1}}this.pointCount=Tt,this.edgeCount=mt,this.triangleCount=lt,this.pointPositions.update(oe),this.pointColors.update(le),this.pointUVs.update(de),this.pointSizes.update(fe),this.pointIds.update(new Uint32Array(be)),this.edgePositions.update(ie),this.edgeColors.update(H),this.edgeUVs.update(ee),this.edgeIds.update(new Uint32Array(Q)),this.trianglePositions.update(K),this.triangleColors.update(ae),this.triangleUVs.update(V),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(q))}},S.drawTransparent=S.draw=function(G){for(var J=this.gl,te=(G=G||{}).model||M,X=G.view||M,K=G.projection||M,ae=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)ae[0][U]=Math.max(ae[0][U],this.clipBounds[0][U]),ae[1][U]=Math.min(ae[1][U],this.clipBounds[1][U]);var V={model:te,view:X,projection:K,inverseModel:M.slice(),clipBounds:ae,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};V.inverseModel=s(V.inverseModel,V.model),J.disable(J.CULL_FACE),this.texture.bind(0);var q=new Array(16);for(p(q,V.view,V.model),p(q,V.projection,q),s(q,q),U=0;U<3;++U)V.eyePosition[U]=q[12+U]/q[15];var ie,H=q[15];for(U=0;U<3;++U)H+=this.lightPosition[U]*q[4*U+3];for(U=0;U<3;++U){for(var ee=q[12+U],Q=0;Q<3;++Q)ee+=q[4*Q+U]*this.lightPosition[Q];V.lightPosition[U]=ee/H}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=V,this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=V,this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=V,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=V,this.contourVAO.bind(),J.drawArrays(J.LINES,0,this.contourCount),this.contourVAO.unbind())},S.drawPick=function(G){for(var J=this.gl,te=(G=G||{}).model||M,X=G.view||M,K=G.projection||M,ae=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)ae[0][U]=Math.max(ae[0][U],this.clipBounds[0][U]),ae[1][U]=Math.min(ae[1][U],this.clipBounds[1][U]);this._model=[].slice.call(te),this._view=[].slice.call(X),this._projection=[].slice.call(K),this._resolution=[J.drawingBufferWidth,J.drawingBufferHeight];var V,q={model:te,view:X,projection:K,clipBounds:ae,pickId:this.pickId/255};(V=this.pickShader).bind(),V.uniforms=q,this.triangleCount>0&&(this.triangleVAO.bind(),J.drawArrays(J.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),J.lineWidth(this.lineWidth*this.pixelRatio),J.drawArrays(J.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((V=this.pointPickShader).bind(),V.uniforms=q,this.pointVAO.bind(),J.drawArrays(J.POINTS,0,this.pointCount),this.pointVAO.unbind())},S.pick=function(G){if(!G||G.id!==this.pickId)return null;for(var J=G.value[0]+256*G.value[1]+65536*G.value[2],te=this.cells[J],X=this.positions,K=new Array(te.length),ae=0;ae<te.length;++ae)K[ae]=X[te[ae]];var U=G.coord[0],V=G.coord[1];if(!this.pickVertex){var q=this.positions[te[0]],ie=this.positions[te[1]],H=this.positions[te[2]];return{_cellCenter:!0,position:[U,V],index:J,cell:te,cellId:J,intensity:this.intensity[J],dataCoordinate:[(q[0]+ie[0]+H[0])/3,(q[1]+ie[1]+H[1])/3,(q[2]+ie[2]+H[2])/3]}}var Q=d(K,[U*this.pixelRatio,this._resolution[1]-V*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!Q)return null;var oe=Q[2],le=0;for(ae=0;ae<te.length;++ae)le+=oe[ae]*this.intensity[te[ae]];return{position:Q[1],index:te[Q[0]],cell:te,cellId:J,intensity:le,dataCoordinate:this.positions[te[Q[0]]]}},S.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=function(G,J){if(1===arguments.length&&(G=(J=G).gl),!(G.getExtension("OES_standard_derivatives")||G.getExtension("MOZ_OES_standard_derivatives")||G.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var X=O(G),K=C(G),ae=D(G),U=B(G),V=z(G),q=Y(G),ie=a(G,i(new Uint8Array([255,255,255,255]),[1,1,4]));ie.generateMipmap(),ie.minFilter=G.LINEAR_MIPMAP_LINEAR,ie.magFilter=G.LINEAR;var H=r(G),ee=r(G),Q=r(G),oe=r(G),le=r(G),de=n(G,[{buffer:H,type:G.FLOAT,size:3},{buffer:le,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ee,type:G.FLOAT,size:4},{buffer:Q,type:G.FLOAT,size:2},{buffer:oe,type:G.FLOAT,size:3}]),fe=r(G),be=r(G),he=r(G),_e=r(G),Ce=n(G,[{buffer:fe,type:G.FLOAT,size:3},{buffer:_e,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:G.FLOAT,size:4},{buffer:he,type:G.FLOAT,size:2}]),Ee=r(G),Ae=r(G),ze=r(G),ve=r(G),Te=r(G),Ie=n(G,[{buffer:Ee,type:G.FLOAT,size:3},{buffer:Te,type:G.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ae,type:G.FLOAT,size:4},{buffer:ze,type:G.FLOAT,size:2},{buffer:ve,type:G.FLOAT,size:1}]),De=r(G),Ue=new I(G,ie,X,K,ae,U,V,q,H,le,ee,Q,oe,de,fe,_e,be,he,Ce,Ee,Te,Ae,ze,ve,Ie,De,n(G,[{buffer:De,type:G.FLOAT,size:3}]));return Ue.update(J),Ue}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(m,b,y){"use strict";b.exports=function(i){var f=i.gl;return new a(i,e(f,[0,0,0,1,1,0,1,1]),r(f,n.boxVert,n.lineFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("./shaders");function a(i,f,c){this.plot=i,this.vbo=f,this.shader=c}var t,p,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawBox=(t=[0,0],p=[0,0],function(i,f,c,l,h){var o=this.shader,x=this.plot.gl;t[0]=i,t[1]=f,p[0]=c,p[1]=l,o.uniforms.lo=t,o.uniforms.hi=p,o.uniforms.color=h,x.drawArrays(x.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(m,b,y){"use strict";b.exports=function(d){var o=d.gl;return new t(d,e(o),r(o,a.gridVert,a.gridFrag),r(o,a.tickVert,a.gridFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("binary-search-bounds"),a=m("./shaders");function t(d,o,x,u){this.plot=d,this.vbo=o,this.shader=x,this.tickShader=u,this.ticks=[[],[]]}function p(d,o){return d-o}var s,i,f,c,l,d,o,x,u,T,_,h=t.prototype;h.draw=(s=[0,0],i=[0,0],f=[0,0],function(){for(var d=this.plot,o=this.vbo,x=this.shader,u=this.ticks,T=d.gl,_=d._tickBounds,w=d.dataBox,M=d.viewBox,I=d.gridLineWidth,S=d.gridLineColor,R=d.gridLineEnable,O=d.pixelRatio,C=0;C<2;++C){var D=_[C],z=.5*(w[C+2]+w[C]),Y=w[C+2]-w[C];i[C]=2*(_[C+2]-D)/Y,s[C]=2*(D-z)/Y}x.bind(),o.bind(),x.attributes.dataCoord.pointer(),x.uniforms.dataShift=s,x.uniforms.dataScale=i;var G=0;for(C=0;C<2;++C){f[0]=f[1]=0,f[C]=1,x.uniforms.dataAxis=f,x.uniforms.lineWidth=I[C]/(M[C+2]-M[C])*O,x.uniforms.color=S[C];var J=6*u[C].length;R[C]&&J&&T.drawArrays(T.TRIANGLES,G,J),G+=J}}),h.drawTickMarks=(d=[0,0],o=[0,0],x=[1,0],u=[0,1],T=[0,0],_=[0,0],function(){for(var w=this.plot,M=this.vbo,I=this.tickShader,S=this.ticks,R=w.gl,O=w._tickBounds,C=w.dataBox,D=w.viewBox,B=w.pixelRatio,z=w.screenBox,Y=z[2]-z[0],G=z[3]-z[1],J=D[2]-D[0],te=D[3]-D[1],X=0;X<2;++X){var K=O[X],U=.5*(C[X+2]+C[X]),V=C[X+2]-C[X];o[X]=2*(O[X+2]-K)/V,d[X]=2*(K-U)/V}o[0]*=J/Y,d[0]*=J/Y,o[1]*=te/G,d[1]*=te/G,I.bind(),M.bind(),I.attributes.dataCoord.pointer();var q=I.uniforms;q.dataShift=d,q.dataScale=o;var ie=w.tickMarkLength,H=w.tickMarkWidth,ee=w.tickMarkColor,Q=6*S[0].length,oe=Math.min(n.ge(S[0],(C[0]-O[0])/(O[2]-O[0]),p),S[0].length),le=Math.min(n.gt(S[0],(C[2]-O[0])/(O[2]-O[0]),p),S[0].length),de=0+6*oe,fe=6*Math.max(0,le-oe),be=Math.min(n.ge(S[1],(C[1]-O[1])/(O[3]-O[1]),p),S[1].length),he=Math.min(n.gt(S[1],(C[3]-O[1])/(O[3]-O[1]),p),S[1].length),_e=Q+6*be,Ce=6*Math.max(0,he-be);T[0]=2*(D[0]-ie[1])/Y-1,T[1]=(D[3]+D[1])/G-1,_[0]=ie[1]*B/Y,_[1]=H[1]*B/G,Ce&&(q.color=ee[1],q.tickScale=_,q.dataAxis=u,q.screenOffset=T,R.drawArrays(R.TRIANGLES,_e,Ce)),T[0]=(D[2]+D[0])/Y-1,T[1]=2*(D[1]-ie[0])/G-1,_[0]=H[0]*B/Y,_[1]=ie[0]*B/G,fe&&(q.color=ee[0],q.tickScale=_,q.dataAxis=x,q.screenOffset=T,R.drawArrays(R.TRIANGLES,de,fe)),T[0]=2*(D[2]+ie[3])/Y-1,T[1]=(D[3]+D[1])/G-1,_[0]=ie[3]*B/Y,_[1]=H[3]*B/G,Ce&&(q.color=ee[3],q.tickScale=_,q.dataAxis=u,q.screenOffset=T,R.drawArrays(R.TRIANGLES,_e,Ce)),T[0]=(D[2]+D[0])/Y-1,T[1]=2*(D[3]+ie[2])/G-1,_[0]=H[2]*B/Y,_[1]=ie[2]*B/G,fe&&(q.color=ee[2],q.tickScale=_,q.dataAxis=x,q.screenOffset=T,R.drawArrays(R.TRIANGLES,de,fe))}),h.update=(c=[1,1,-1,-1,1,-1],l=[1,-1,1,1,-1,-1],function(d){for(var o=d.ticks,x=d.bounds,u=new Float32Array(18*(o[0].length+o[1].length)),T=0,_=[[],[]],w=0;w<2;++w)for(var M=_[w],I=o[w],S=x[w],R=x[w+2],O=0;O<I.length;++O){var C=(I[O].x-S)/(R-S);M.push(C);for(var D=0;D<6;++D)u[T++]=C,u[T++]=c[D],u[T++]=l[D]}this.ticks=_,this.vbo.update(u)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(m,b,y){"use strict";b.exports=function(i){var f=i.gl;return new a(i,e(f,[-1,-1,-1,1,1,-1,1,1]),r(f,n.lineVert,n.lineFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("./shaders");function a(i,f,c){this.plot=i,this.vbo=f,this.shader=c}var t,p,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawLine=(t=[0,0],p=[0,0],function(i,f,c,l,h,d){var o=this.plot,x=this.shader,u=o.gl;t[0]=i,t[1]=f,p[0]=c,p[1]=l,x.uniforms.start=t,x.uniforms.end=p,x.uniforms.width=h*o.pixelRatio,x.uniforms.color=d,u.drawArrays(u.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(m,b,y){"use strict";var e=m("glslify"),r=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);b.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:r,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:r,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:r,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(m,b,y){"use strict";b.exports=function(o){var x=o.gl;return new p(o,e(x),r(x,t.textVert,t.textFrag))};var e=m("gl-buffer"),r=m("gl-shader"),n=m("text-cache"),a=m("binary-search-bounds"),t=m("./shaders");function p(o,x,u){this.plot=o,this.vbo=x,this.shader=u,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s,i,f,c,l,h,o,x,d=p.prototype;d.drawTicks=(s=[0,0],i=[0,0],f=[0,0],function(o){var x=this.plot,u=this.shader,T=this.tickX[o],_=this.tickOffset[o],w=x.gl,M=x.viewBox,I=x.dataBox,S=x.screenBox,R=x.pixelRatio,O=x.tickEnable,C=x.tickPad,D=x.tickColor,B=x.tickAngle,z=x.labelEnable,Y=x.labelPad,G=x.labelColor,J=x.labelAngle,te=this.labelOffset[o],X=this.labelCount[o],K=a.lt(T,I[o]),ae=a.le(T,I[o+2]);s[0]=s[1]=0,s[o]=1,i[o]=(M[2+o]+M[o])/(S[2+o]-S[o])-1;var U=2/S[2+(1^o)]-S[1^o];i[1^o]=U*M[1^o]-1,O[o]&&(i[1^o]-=U*R*C[o],K<ae&&_[ae]>_[K]&&(u.uniforms.dataAxis=s,u.uniforms.screenOffset=i,u.uniforms.color=D[o],u.uniforms.angle=B[o],w.drawArrays(w.TRIANGLES,_[K],_[ae]-_[K]))),z[o]&&X&&(i[1^o]-=U*R*Y[o],u.uniforms.dataAxis=f,u.uniforms.screenOffset=i,u.uniforms.color=G[o],u.uniforms.angle=J[o],w.drawArrays(w.TRIANGLES,te,X)),i[1^o]=U*M[2+(1^o)]-1,O[o+2]&&(i[1^o]+=U*R*C[o+2],K<ae&&_[ae]>_[K]&&(u.uniforms.dataAxis=s,u.uniforms.screenOffset=i,u.uniforms.color=D[o+2],u.uniforms.angle=B[o+2],w.drawArrays(w.TRIANGLES,_[K],_[ae]-_[K]))),z[o+2]&&X&&(i[1^o]+=U*R*Y[o+2],u.uniforms.dataAxis=f,u.uniforms.screenOffset=i,u.uniforms.color=G[o+2],u.uniforms.angle=J[o+2],w.drawArrays(w.TRIANGLES,te,X))}),d.drawTitle=(o=[0,0],x=[0,0],function(){var u=this.plot,T=this.shader,_=u.gl,w=u.screenBox,M=u.titleCenter,I=u.titleAngle,S=u.titleColor,R=u.pixelRatio;if(this.titleCount){for(var O=0;O<2;++O)x[O]=2*(M[O]*R-w[O])/(w[2+O]-w[O])-1;T.bind(),T.uniforms.dataAxis=o,T.uniforms.screenOffset=x,T.uniforms.angle=I,T.uniforms.color=S,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}),d.bind=(c=[0,0],l=[0,0],h=[0,0],function(){var o=this.plot,x=this.shader,u=o._tickBounds,T=o.dataBox,_=o.screenBox,w=o.viewBox;x.bind();for(var M=0;M<2;++M){var I=u[M],R=.5*(T[M+2]+T[M]),O=T[M+2]-T[M],D=w[M+2]-w[M],z=_[M+2]-_[M];l[M]=2*(u[M+2]-I)/O*D/z,c[M]=2*(I-R)/O*D/z}h[1]=2*o.pixelRatio/(_[3]-_[1]),h[0]=h[1]*(_[3]-_[1])/(_[2]-_[0]),x.uniforms.dataScale=l,x.uniforms.dataShift=c,x.uniforms.textScale=h,this.vbo.bind(),x.attributes.textCoordinate.pointer()}),d.update=function(o){var x,u,T,_,w,M=[],I=o.ticks,S=o.bounds;for(w=0;w<2;++w){var R=[Math.floor(M.length/3)],O=[-1/0],C=I[w];for(x=0;x<C.length;++x){var D=C[x],B=D.x,Y=D.font||"sans-serif";_=D.fontSize||12;for(var G=1/(S[w+2]-S[w]),J=S[w],te=D.text.split("\n"),X=0;X<te.length;X++)for(T=n(Y,te[X]).data,u=0;u<T.length;u+=2)M.push(T[u]*_,-T[u+1]*_-X*_*1.2,(B-J)*G);R.push(Math.floor(M.length/3)),O.push(B)}this.tickOffset[w]=R,this.tickX[w]=O}for(w=0;w<2;++w){for(this.labelOffset[w]=Math.floor(M.length/3),T=n(o.labelFont[w],o.labels[w],{textAlign:"center"}).data,_=o.labelSize[w],x=0;x<T.length;x+=2)M.push(T[x]*_,-T[x+1]*_,0);this.labelCount[w]=Math.floor(M.length/3)-this.labelOffset[w]}for(this.titleOffset=Math.floor(M.length/3),T=n(o.titleFont,o.title).data,_=o.titleSize,x=0;x<T.length;x+=2)M.push(T[x]*_,-T[x+1]*_,0);this.titleCount=Math.floor(M.length/3)-this.titleOffset,this.vbo.update(M)},d.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(m,b,y){"use strict";b.exports=function(c){var l=c.gl,d=new p(l,e(l,[l.drawingBufferWidth,l.drawingBufferHeight]));return d.grid=r(d),d.text=n(d),d.line=a(d),d.box=t(d),d.update(c),d};var e=m("gl-select-static"),r=m("./lib/grid"),n=m("./lib/text"),a=m("./lib/line"),t=m("./lib/box");function p(c,l){this.gl=c,this.pickBuffer=l,this.screenBox=[0,0,c.drawingBufferWidth,c.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=p.prototype;function i(c){for(var l=c.slice(),h=0;h<l.length;++h)l[h]=l[h].slice();return l}function f(c,l){return c.x-l.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var c=this.gl,l=this.screenBox,h=this.viewBox,d=this.dataBox,o=this.pixelRatio,x=this.grid,u=this.line,T=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,c.bindFramebuffer(c.FRAMEBUFFER,null),c.enable(c.SCISSOR_TEST),c.disable(c.DEPTH_TEST),c.depthFunc(c.LESS),c.depthMask(!1),c.enable(c.BLEND),c.blendEquation(c.FUNC_ADD,c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),this.borderColor){c.scissor(l[0],l[1],l[2]-l[0],l[3]-l[1]);var w=this.borderColor;c.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}c.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),c.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]);var M=this.backgroundColor;c.clearColor(M[0]*M[3],M[1]*M[3],M[2]*M[3],M[3]),c.clear(c.COLOR_BUFFER_BIT),x.draw();var I=this.zeroLineEnable,S=this.zeroLineColor,R=this.zeroLineWidth;if(I[0]||I[1]){u.bind();for(var O=0;O<2;++O)if(I[O]&&d[O]<=0&&d[O+2]>=0){var C=l[O]-d[O]*(l[O+2]-l[O])/(d[O+2]-d[O]);0===O?u.drawLine(C,l[1],C,l[3],R[O],S[O]):u.drawLine(l[0],C,l[2],C,R[O],S[O])}}for(O=0;O<_.length;++O)_[O].draw();c.viewport(l[0],l[1],l[2]-l[0],l[3]-l[1]),c.scissor(l[0],l[1],l[2]-l[0],l[3]-l[1]),this.grid.drawTickMarks(),u.bind();var D=this.borderLineEnable,B=this.borderLineWidth,z=this.borderLineColor;for(D[1]&&u.drawLine(h[0],h[1]-.5*B[1]*o,h[0],h[3]+.5*B[3]*o,B[1],z[1]),D[0]&&u.drawLine(h[0]-.5*B[0]*o,h[1],h[2]+.5*B[2]*o,h[1],B[0],z[0]),D[3]&&u.drawLine(h[2],h[1]-.5*B[1]*o,h[2],h[3]+.5*B[3]*o,B[3],z[3]),D[2]&&u.drawLine(h[0]-.5*B[0]*o,h[3],h[2]+.5*B[2]*o,h[3],B[2],z[2]),T.bind(),O=0;O<2;++O)T.drawTicks(O);this.titleEnable&&T.drawTitle();var Y=this.overlays;for(O=0;O<Y.length;++O)Y[O].draw();c.disable(c.SCISSOR_TEST),c.disable(c.BLEND),c.depthMask(!0)}},s.drawPick=function(){if(!this.static){var c=this.pickBuffer;this._pickTimeout=null,c.begin();for(var l=1,h=this.objects,d=0;d<h.length;++d)l=h[d].drawPick(l);c.end()}},s.pick=function(c,l){if(!this.static){var h=this.pixelRatio,d=this.pickPixelRatio,o=this.viewBox,x=0|Math.round((c-o[0]/h)*d),u=0|Math.round((l-o[1]/h)*d),T=this.pickBuffer.query(x,u,this.pickRadius);if(!T)return null;for(var _=T.id+(T.value[0]<<8)+(T.value[1]<<16)+(T.value[2]<<24),w=this.objects,M=0;M<w.length;++M){var I=w[M].pick(x,u,_);if(I)return I}return null}},s.setScreenBox=function(c){var l=this.screenBox,h=this.pixelRatio;l[0]=0|Math.round(c[0]*h),l[1]=0|Math.round(c[1]*h),l[2]=0|Math.round(c[2]*h),l[3]=0|Math.round(c[3]*h),this.setDirty()},s.setDataBox=function(c){var l=this.dataBox;(l[0]!==c[0]||l[1]!==c[1]||l[2]!==c[2]||l[3]!==c[3])&&(l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],this.setDirty())},s.setViewBox=function(c){var l=this.pixelRatio,h=this.viewBox;h[0]=0|Math.round(c[0]*l),h[1]=0|Math.round(c[1]*l),h[2]=0|Math.round(c[2]*l),h[3]=0|Math.round(c[3]*l);var d=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((c[2]-c[0])*d),0|Math.round((c[3]-c[1])*d)],this.setDirty()},s.update=function(c){var l=this.gl;this.pixelRatio=(c=c||{}).pixelRatio||1;var h=this.pixelRatio;this.pickPixelRatio=Math.max(h,1),this.setScreenBox(c.screenBox||[0,0,l.drawingBufferWidth/h,l.drawingBufferHeight/h]),this.setViewBox(c.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/h,.125*(this.screenBox[3]-this.screenBox[1])/h,.875*(this.screenBox[2]-this.screenBox[0])/h,.875*(this.screenBox[3]-this.screenBox[1])/h]);var d=this.viewBox,o=(d[2]-d[0])/(d[3]-d[1]);this.setDataBox(c.dataBox||[-10,-10/o,10,10/o]),this.borderColor=!1!==c.borderColor&&(c.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(c.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(c.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(c.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(c.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(c.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(c.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(c.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(c.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(c.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(c.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(c.titleCenter||[.5*(d[0]+d[2])/h,(d[3]+120)/h]).slice(),this.titleEnable=!("titleEnable"in c)||!!c.titleEnable,this.titleAngle=c.titleAngle||0,this.titleColor=(c.titleColor||[0,0,0,1]).slice(),this.labelPad=(c.labelPad||[15,15,15,15]).slice(),this.labelAngle=(c.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(c.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(c.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(c.tickPad||[15,15,15,15]).slice(),this.tickAngle=(c.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(c.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(c.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(c.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(c.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(c.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var x=c.ticks||[[],[]],u=this._tickBounds;u[0]=u[1]=1/0,u[2]=u[3]=-1/0;for(var T=0;T<2;++T){var _=x[T].slice(0);0!==_.length&&(_.sort(f),u[T]=Math.min(u[T],_[0].x),u[T+2]=Math.max(u[T+2],_[_.length-1].x))}this.grid.update({bounds:u,ticks:x}),this.text.update({bounds:u,ticks:x,labels:c.labels||["x","y"],labelSize:c.labelSize||[12,12],labelFont:c.labelFont||["sans-serif","sans-serif"],title:c.title||"",titleSize:c.titleSize||18,titleFont:c.titleFont||"sans-serif"}),this.static=!!c.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var c=this.objects.length-1;c>=0;--c)this.objects[c].dispose();for(this.objects.length=0,c=this.overlays.length-1;c>=0;--c)this.overlays[c].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(c){this.objects.indexOf(c)<0&&(this.objects.push(c),this.setDirty())},s.removeObject=function(c){for(var l=this.objects,h=0;h<l.length;++h)if(l[h]===c){l.splice(h,1),this.setDirty();break}},s.addOverlay=function(c){this.overlays.indexOf(c)<0&&(this.overlays.push(c),this.setOverlayDirty())},s.removeOverlay=function(c){for(var l=this.overlays,h=0;h<l.length;++h)if(l[h]===c){l.splice(h,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(m,b,y){"use strict";b.exports=function(s,i){s=s||document.body;var f=[.01,1/0];"distanceLimits"in(i=i||{})&&(f[0]=i.distanceLimits[0],f[1]=i.distanceLimits[1]),"zoomMin"in i&&(f[0]=i.zoomMin),"zoomMax"in i&&(f[1]=i.zoomMax);var c=r({center:i.center||[0,0,0],up:i.up||[0,1,0],eye:i.eye||[0,0,10],mode:i.mode||"orbit",distanceLimits:f}),l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0,d=s.clientWidth,o=s.clientHeight,x={keyBindingMode:"rotate",enableWheel:!0,view:c,element:s,delay:i.delay||16,rotateSpeed:i.rotateSpeed||1,zoomSpeed:i.zoomSpeed||1,translateSpeed:i.translateSpeed||1,flipX:!!i.flipX,flipY:!!i.flipY,modes:c.modes,_ortho:i._ortho||i.projection&&"orthographic"===i.projection.type||!1,tick:function(){var u=e(),T=this.delay,_=u-2*T;c.idle(u-T),c.recalcMatrix(_),c.flush(u-(100+2*T));for(var w=!0,M=c.computedMatrix,I=0;I<16;++I)w=w&&l[I]===M[I],l[I]=M[I];var S=s.clientWidth===d&&s.clientHeight===o;return d=s.clientWidth,o=s.clientHeight,w?!S:(h=Math.exp(c.computedRadius[0]),!0)},lookAt:function(u,T,_){c.lookAt(c.lastT(),u,T,_)},rotate:function(u,T,_){c.rotate(c.lastT(),u,T,_)},pan:function(u,T,_){c.pan(c.lastT(),u,T,_)},translate:function(u,T,_){c.translate(c.lastT(),u,T,_)}};return Object.defineProperties(x,{matrix:{get:function(){return c.computedMatrix},set:function(u){return c.setMatrix(c.lastT(),u),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(u){var T=c.computedUp.slice(),_=c.computedEye.slice(),w=c.computedCenter.slice();if(c.setMode(u),"turntable"===u){var M=e();c._active.lookAt(M,_,w,T),c._active.lookAt(M+500,_,w,[0,0,1]),c._active.flush(M)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(u){return c.lookAt(c.lastT(),null,u),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(u){return c.lookAt(c.lastT(),u),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(u){return c.lookAt(c.lastT(),null,null,u),c.computedUp},enumerable:!0},distance:{get:function(){return h},set:function(u){return c.setDistance(c.lastT(),u),u},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(f)},set:function(u){return c.setDistanceLimits(u),u},enumerable:!0}}),s.addEventListener("contextmenu",function(u){return u.preventDefault(),!1}),x._lastX=-1,x._lastY=-1,x._lastMods={shift:!1,control:!1,alt:!1,meta:!1},x.enableMouseListeners=function(){function u(T,_,w,M){var I=x.keyBindingMode;if(!1!==I){var S="rotate"===I,R="pan"===I,O="zoom"===I,C=!!M.control,D=!!M.alt,B=!!M.shift,z=!!(1&T),Y=!!(2&T),G=!!(4&T),J=1/s.clientHeight,te=J*(_-x._lastX),X=J*(w-x._lastY),K=x.flipX?1:-1,ae=x.flipY?1:-1,U=Math.PI*x.rotateSpeed,V=e();if(-1!==x._lastX&&-1!==x._lastY&&((S&&z&&!C&&!D&&!B||z&&!C&&!D&&B)&&c.rotate(V,K*U*te,-ae*U*X,0),(R&&z&&!C&&!D&&!B||Y||z&&C&&!D&&!B)&&c.pan(V,-x.translateSpeed*te*h,x.translateSpeed*X*h,0),O&&z&&!C&&!D&&!B||G||z&&!C&&D&&!B)){var q=-x.zoomSpeed*X/window.innerHeight*(V-c.lastT())*100;c.pan(V,0,0,h*(Math.exp(q)-1))}return x._lastX=_,x._lastY=w,x._lastMods=M,!0}}x.mouseListener=n(s,u),s.addEventListener("touchstart",function(T){var _=t(T.changedTouches[0],s);u(0,_[0],_[1],x._lastMods),u(1,_[0],_[1],x._lastMods)},!!p&&{passive:!0}),s.addEventListener("touchmove",function(T){var _=t(T.changedTouches[0],s);u(1,_[0],_[1],x._lastMods),T.preventDefault()},!!p&&{passive:!1}),s.addEventListener("touchend",function(T){u(0,x._lastX,x._lastY,x._lastMods)},!!p&&{passive:!0}),x.wheelListener=a(s,function(T,_){if(!1!==x.keyBindingMode&&x.enableWheel){var w=x.flipX?1:-1,M=x.flipY?1:-1,I=e();if(Math.abs(T)>Math.abs(_))c.rotate(I,0,0,-T*w*Math.PI*x.rotateSpeed/window.innerWidth);else if(!x._ortho){var S=-x.zoomSpeed*M*_/window.innerHeight*(I-c.lastT())/20;c.pan(I,0,0,h*(Math.exp(S)-1))}}},!0)},x.enableMouseListeners(),x};var e=m("right-now"),r=m("3d-view"),n=m("mouse-change"),a=m("mouse-wheel"),t=m("mouse-event-offset"),p=m("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(m,b,y){var e=m("glslify"),r=m("gl-shader"),n=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);b.exports=function(t){return r(t,n,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(m,b,y){"use strict";var e=m("./camera.js"),r=m("gl-axes3d"),n=m("gl-axes3d/properties"),a=m("gl-spikes3d"),t=m("gl-select-static"),p=m("gl-fbo"),s=m("a-big-triangle"),i=m("mouse-change"),f=m("gl-mat4/perspective"),c=m("gl-mat4/ortho"),l=m("./lib/shader"),h=m("is-mobile")({tablet:!0,featureDetect:!0});function d(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function o(u){var T=Math.round(Math.log(Math.abs(u))/Math.log(10));if(T<0){var _=Math.round(Math.pow(10,-T));return Math.ceil(u*_)/_}return T>0?(_=Math.round(Math.pow(10,T)),Math.ceil(u/_)*_):Math.ceil(u)}function x(u){return"boolean"!=typeof u||u}b.exports={createScene:function(u){(u=u||{}).camera=u.camera||{};var T=u.canvas;T||(T=document.createElement("canvas"),u.container?u.container.appendChild(T):document.body.appendChild(T));var _=u.gl;if(_||(u.glOptions&&(h=!!u.glOptions.preserveDrawingBuffer),_=function(he,_e){var Ce=null;try{(Ce=he.getContext("webgl",_e))||(Ce=he.getContext("experimental-webgl",_e))}catch{return null}return Ce}(T,u.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:h})),!_)throw new Error("webgl not supported");var w=u.bounds||[[-10,-10,-10],[10,10,10]],M=new d,I=p(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!h}),S=l(_),R=u.cameraObject&&!0===u.cameraObject._ortho||u.camera.projection&&"orthographic"===u.camera.projection.type||!1,O={eye:u.camera.eye||[2,0,0],center:u.camera.center||[0,0,0],up:u.camera.up||[0,1,0],zoomMin:u.camera.zoomMax||.1,zoomMax:u.camera.zoomMin||100,mode:u.camera.mode||"turntable",_ortho:R},C=u.axes||{},D=r(_,C);D.enable=!C.disable;var z=a(_,u.spikes||{}),Y=[],G=[],J=[],te=[],X=!0,K=!0,V={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},q=(K=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),ie=u.cameraObject||e(T,O),H={gl:_,contextLost:!1,pixelRatio:u.pixelRatio||1,canvas:T,selection:M,camera:ie,axes:D,axesPixels:null,spikes:z,bounds:w,objects:Y,shape:q,aspect:u.aspectRatio||[1,1,1],pickRadius:u.pickRadius||10,zNear:u.zNear||.01,zFar:u.zFar||1e3,fovy:u.fovy||Math.PI/4,clearColor:u.clearColor||[0,0,0,0],autoResize:x(u.autoResize),autoBounds:x(u.autoBounds),autoScale:!!u.autoScale,autoCenter:x(u.autoCenter),clipToBounds:x(u.clipToBounds),snapToData:!!u.snapToData,onselect:u.onselect||null,onrender:u.onrender||null,onclick:u.onclick||null,cameraParams:V,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(he){this.aspect[0]=he.x,this.aspect[1]=he.y,this.aspect[2]=he.z,K=!0},setBounds:function(he,_e){this.bounds[0][he]=_e.min,this.bounds[1][he]=_e.max},setClearColor:function(he){this.clearColor=he},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ee=[_.drawingBufferWidth/H.pixelRatio|0,_.drawingBufferHeight/H.pixelRatio|0];function Q(){if(!H._stopped&&H.autoResize){var he=T.parentNode,_e=1,Ce=1;he&&he!==document.body?(_e=he.clientWidth,Ce=he.clientHeight):(_e=window.innerWidth,Ce=window.innerHeight);var Ee=0|Math.ceil(_e*H.pixelRatio),Ae=0|Math.ceil(Ce*H.pixelRatio);if(Ee!==T.width||Ae!==T.height){T.width=Ee,T.height=Ae;var ze=T.style;ze.position=ze.position||"absolute",ze.left="0px",ze.top="0px",ze.width=_e+"px",ze.height=Ce+"px",X=!0}}}function oe(){for(var he=Y.length,_e=te.length,Ce=0;Ce<_e;++Ce)J[Ce]=0;e:for(Ce=0;Ce<he;++Ce){var Ee=Y[Ce],Ae=Ee.pickSlots;if(Ae){for(var ze=0;ze<_e;++ze)if(J[ze]+Ae<255){G[Ce]=ze,Ee.setPickBase(J[ze]+1),J[ze]+=Ae;continue e}var ve=t(_,q);G[Ce]=_e,te.push(ve),J.push(Ae),Ee.setPickBase(1),_e+=1}else G[Ce]=-1}for(;_e>0&&0===J[_e-1];)J.pop(),te.pop().dispose()}function le(){if(H.contextLost)return!0;_.isContextLost()&&(H.contextLost=!0,H.mouseListener.enabled=!1,H.selection.object=null,H.oncontextloss&&H.oncontextloss())}H.autoResize&&Q(),window.addEventListener("resize",Q),H.update=function(he){H._stopped||(he=he||{},X=!0,K=!0)},H.add=function(he){H._stopped||(he.axes=D,Y.push(he),G.push(-1),X=!0,K=!0,oe())},H.remove=function(he){if(!H._stopped){var _e=Y.indexOf(he);_e<0||(Y.splice(_e,1),G.pop(),X=!0,K=!0,oe())}},H.dispose=function(){if(!H._stopped&&(H._stopped=!0,window.removeEventListener("resize",Q),T.removeEventListener("webglcontextlost",le),H.mouseListener.enabled=!1,!H.contextLost)){D.dispose(),z.dispose();for(var he=0;he<Y.length;++he)Y[he].dispose();for(I.dispose(),he=0;he<te.length;++he)te[he].dispose();S.dispose(),_=null,D=null,z=null,Y=[]}},H._mouseRotating=!1,H._prevButtons=0,H.enableMouseListeners=function(){H.mouseListener=i(T,function(he,_e,Ce){if(!H._stopped){var Ee=te.length,Ae=Y.length,ze=M.object;M.distance=1/0,M.mouse[0]=_e,M.mouse[1]=Ce,M.object=null,M.screen=null,M.dataCoordinate=M.dataPosition=null;var ve=!1;if(he&&H._prevButtons)H._mouseRotating=!0;else{H._mouseRotating&&(K=!0),H._mouseRotating=!1;for(var Te=0;Te<Ee;++Te){var Ie=te[Te].query(_e,ee[1]-Ce-1,H.pickRadius);if(Ie){if(Ie.distance>M.distance)continue;for(var De=0;De<Ae;++De){var Fe=Y[De];if(G[De]===Te){var Ue=Fe.pick(Ie);Ue&&(M.buttons=he,M.screen=Ie.coord,M.distance=Ie.distance,M.object=Fe,M.index=Ue.distance,M.dataPosition=Ue.position,M.dataCoordinate=Ue.dataCoordinate,M.data=Ue,ve=!0)}}}}}ze&&ze!==M.object&&(ze.highlight&&ze.highlight(null),X=!0),M.object&&(M.object.highlight&&M.object.highlight(M.data),X=!0),(ve=ve||M.object!==ze)&&H.onselect&&H.onselect(M),1&he&&!(1&H._prevButtons)&&H.onclick&&H.onclick(M),H._prevButtons=he}})},T.addEventListener("webglcontextlost",le);var de=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],fe=[de[0].slice(),de[1].slice()];function be(){if(!le()){Q();var he=H.camera.tick();V.view=H.camera.matrix,X=X||he,K=K||he,D.pixelRatio=H.pixelRatio,z.pixelRatio=H.pixelRatio;var _e=Y.length,Ce=de[0],Ee=de[1];Ce[0]=Ce[1]=Ce[2]=1/0,Ee[0]=Ee[1]=Ee[2]=-1/0;for(var Ae=0;Ae<_e;++Ae){(Be=Y[Ae]).pixelRatio=H.pixelRatio,Be.axes=H.axes,X=X||!!Be.dirty,K=K||!!Be.dirty;var ze=Be.bounds;if(ze)for(var ve=ze[0],Te=ze[1],Ie=0;Ie<3;++Ie)Ce[Ie]=Math.min(Ce[Ie],ve[Ie]),Ee[Ie]=Math.max(Ee[Ie],Te[Ie])}var De=H.bounds;if(H.autoBounds)for(Ie=0;Ie<3;++Ie){if(Ee[Ie]<Ce[Ie])Ce[Ie]=-1,Ee[Ie]=1;else{Ce[Ie]===Ee[Ie]&&(Ce[Ie]-=1,Ee[Ie]+=1);var Fe=.05*(Ee[Ie]-Ce[Ie]);Ce[Ie]=Ce[Ie]-Fe,Ee[Ie]=Ee[Ie]+Fe}De[0][Ie]=Ce[Ie],De[1][Ie]=Ee[Ie]}var Ue=!1;for(Ie=0;Ie<3;++Ie)Ue=Ue||fe[0][Ie]!==De[0][Ie]||fe[1][Ie]!==De[1][Ie],fe[0][Ie]=De[0][Ie],fe[1][Ie]=De[1][Ie];if(K=K||Ue,X=X||Ue){if(Ue){var qe=[0,0,0];for(Ae=0;Ae<3;++Ae)qe[Ae]=o((De[1][Ae]-De[0][Ae])/10);D.update(D.autoTicks?{bounds:De,tickSpacing:qe}:{bounds:De})}var je=_.drawingBufferWidth,rt=_.drawingBufferHeight;for(q[0]=je,q[1]=rt,ee[0]=0|Math.max(je/H.pixelRatio,1),ee[1]=0|Math.max(rt/H.pixelRatio,1),function(We,Ye){var lt=We.bounds,mt=We.cameraParams,Tt=mt.projection,It=mt.model,at=We.zNear,St=We.zFar,Xt=We.fovy,tn=We.gl.drawingBufferWidth/We.gl.drawingBufferHeight;Ye?(c(Tt,-tn,tn,-1,1,at,St),mt._ortho=!0):(f(Tt,Xt,tn,at,St),mt._ortho=!1);for(var hn=0;hn<16;++hn)It[hn]=0;It[15]=1;var cn=0;for(hn=0;hn<3;++hn)cn=Math.max(cn,lt[1][hn]-lt[0][hn]);for(hn=0;hn<3;++hn)It[5*hn]=We.autoScale?We.aspect[hn]/(lt[1][hn]-lt[0][hn]):1/cn,We.autoCenter&&(It[12+hn]=.5*-It[5*hn]*(lt[0][hn]+lt[1][hn]))}(H,R),Ae=0;Ae<_e;++Ae)(Be=Y[Ae]).axesBounds=De,H.clipToBounds&&(Be.clipBounds=De);M.object&&(z.position=H.snapToData?M.dataCoordinate:M.dataPosition,z.bounds=De),K&&(K=!1,function(){if(!le()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var We=Y.length,Ye=te.length,lt=0;lt<Ye;++lt){var mt=te[lt];mt.shape=ee,mt.begin();for(var Tt=0;Tt<We;++Tt)if(G[Tt]===lt){var It=Y[Tt];It.drawPick&&(It.pixelRatio=1,It.drawPick(V))}mt.end()}}}()),H.axesPixels=n(H.axes,V,je,rt),H.onrender&&H.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,je,rt),H.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var Ne=!1;for(D.enable&&(Ne=Ne||D.isTransparent(),D.draw(V)),z.axes=D,M.object&&z.draw(V),_.disable(_.CULL_FACE),Ae=0;Ae<_e;++Ae)(Be=Y[Ae]).axes=D,Be.pixelRatio=H.pixelRatio,Be.isOpaque&&Be.isOpaque()&&Be.draw(V),Be.isTransparent&&Be.isTransparent()&&(Ne=!0);if(Ne){for(I.shape=q,I.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),D.enable&&D.isTransparent()&&D.drawTransparent(V),Ae=0;Ae<_e;++Ae)(Be=Y[Ae]).isOpaque&&Be.isOpaque()&&Be.draw(V);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),D.isTransparent()&&D.drawTransparent(V),Ae=0;Ae<_e;++Ae){var Be;(Be=Y[Ae]).isTransparent&&Be.isTransparent()&&Be.drawTransparent(V)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),S.bind(),I.color[0].bind(0),S.uniforms.accumBuffer=0,s(_),_.disable(_.BLEND)}for(X=!1,Ae=0;Ae<_e;++Ae)Y[Ae].dirty=!1}}}return H.enableMouseListeners(),function he(){H._stopped||H.contextLost||(be(),requestAnimationFrame(he))}(),H.redraw=function(){H._stopped||(X=!0,be())},H},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(m,b,y){var e=m("glslify");y.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),y.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),y.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),y.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(m,b,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("typedarray-pool"),a=m("./lib/shader");function t(f,c,l,h,d){this.plot=f,this.offsetBuffer=c,this.pickBuffer=l,this.shader=h,this.pickShader=d,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}b.exports=function(f,c){var l=f.gl,u=new t(f,r(l),r(l),e(l,a.pointVertex,a.pointFragment),e(l,a.pickVertex,a.pickFragment));return u.update(c),f.addObject(u),u};var p,s,i=t.prototype;i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},i.update=function(f){var c;function l(_,w){return _ in f?f[_]:w}f=f||{},this.sizeMin=l("sizeMin",.5),this.sizeMax=l("sizeMax",20),this.color=l("color",[1,0,0,1]).slice(),this.areaRatio=l("areaRatio",1),this.borderColor=l("borderColor",[0,0,0,1]).slice(),this.blend=l("blend",!1);var h=f.positions.length>>>1,d=f.positions instanceof Float32Array,o=f.idToIndex instanceof Int32Array&&f.idToIndex.length>=h,x=f.positions,u=d?x:n.mallocFloat32(x.length),T=o?f.idToIndex:n.mallocInt32(h);if(d||u.set(x),!o)for(u.set(x),c=0;c<h;c++)T[c]=c;this.points=x,this.offsetBuffer.update(u),this.pickBuffer.update(T),d||n.free(u),o||n.free(T),this.pointCount=h,this.pickOffset=0},i.unifiedDraw=(p=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0],function(f){var c=void 0!==f,l=c?this.pickShader:this.shader,h=this.plot.gl,d=this.plot.dataBox;if(0===this.pointCount)return f;var o=d[2]-d[0],x=d[3]-d[1],u=function(M,I){var S,R=0,O=M.length>>>1;for(S=0;S<O;S++){var C=M[2*S],D=M[2*S+1];C>=I[0]&&C<=I[2]&&D>=I[1]&&D<=I[3]&&R++}return R}(this.points,d),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));p[0]=2/o,p[4]=2/x,p[6]=-2*d[0]/o-1,p[7]=-2*d[1]/x-1,this.offsetBuffer.bind(),l.bind(),l.attributes.position.pointer(),l.uniforms.matrix=p,l.uniforms.color=this.color,l.uniforms.borderColor=this.borderColor,l.uniforms.pointCloud=T<5,l.uniforms.pointSize=T,l.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(s[0]=255&f,s[1]=f>>8&255,s[2]=f>>16&255,s[3]=f>>24&255,this.pickBuffer.bind(),l.attributes.pickId.pointer(h.UNSIGNED_BYTE),l.uniforms.pickOffset=s,this.pickOffset=f);var _=h.getParameter(h.BLEND),w=h.getParameter(h.DITHER);return _&&!this.blend&&h.disable(h.BLEND),w&&h.disable(h.DITHER),h.drawArrays(h.POINTS,0,this.pointCount),_&&!this.blend&&h.enable(h.BLEND),w&&h.enable(h.DITHER),f+this.pointCount}),i.draw=i.unifiedDraw,i.drawPick=i.unifiedDraw,i.pick=function(f,c,l){var h=this.pickOffset;if(l<h||l>=h+this.pointCount)return null;var o=l-h,x=this.points;return{object:this,pointId:o,dataCoord:[x[2*o],x[2*o+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(m,b,y){b.exports=function(e,r,n,a){var t,p,s,i,f,c=r[0],l=r[1],h=r[2],d=r[3],o=n[0],x=n[1],u=n[2],T=n[3];return(p=c*o+l*x+h*u+d*T)<0&&(p=-p,o=-o,x=-x,u=-u,T=-T),1-p>1e-6?(t=Math.acos(p),s=Math.sin(t),i=Math.sin((1-a)*t)/s,f=Math.sin(a*t)/s):(i=1-a,f=a),e[0]=i*c+f*o,e[1]=i*l+f*x,e[2]=i*h+f*u,e[3]=i*d+f*T,e}},{}],125:[function(m,b,y){"use strict";b.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(m,b,y){"use strict";var e=m("vectorize-text");b.exports=function(n,a,t){var p=r[a];if(p||(p=r[a]={}),n in p)return p[n];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=e(n,s);s.triangles=!1;var f,c,l=e(n,s);if(t&&1!==t){for(f=0;f<i.positions.length;++f)for(c=0;c<i.positions[f].length;++c)i.positions[f][c]/=t;for(f=0;f<l.positions.length;++f)for(c=0;c<l.positions[f].length;++c)l.positions[f][c]/=t}var h=[[1/0,1/0],[-1/0,-1/0]],d=l.positions.length;for(f=0;f<d;++f){var o=l.positions[f];for(c=0;c<2;++c)h[0][c]=Math.min(h[0][c],o[c]),h[1][c]=Math.max(h[1][c],o[c])}return p[n]=[i,l,h]};var r={}},{"vectorize-text":311}],127:[function(m,b,y){var e=m("gl-shader"),r=m("glslify"),n=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),t=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),p=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),s=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:n,fragment:p,attributes:i},c={vertex:a,fragment:p,attributes:i},l={vertex:t,fragment:p,attributes:i},h={vertex:n,fragment:s,attributes:i},d={vertex:a,fragment:s,attributes:i},o={vertex:t,fragment:s,attributes:i};function x(u,T){var _=e(u,T),w=_.attributes;return w.position.location=0,w.color.location=1,w.glyph.location=2,w.id.location=3,_}y.createPerspective=function(u){return x(u,f)},y.createOrtho=function(u){return x(u,c)},y.createProject=function(u){return x(u,l)},y.createPickPerspective=function(u){return x(u,h)},y.createPickOrtho=function(u){return x(u,d)},y.createPickProject=function(u){return x(u,o)}},{"gl-shader":132,glslify:231}],128:[function(m,b,y){"use strict";var e=m("is-string-blank"),r=m("gl-buffer"),n=m("gl-vao"),a=m("typedarray-pool"),t=m("gl-mat4/multiply"),p=m("./lib/shaders"),s=m("./lib/glyphs"),i=m("./lib/get-simple-string"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(J,te){var X=J[0],K=J[1],ae=J[2],U=J[3];return J[0]=te[0]*X+te[4]*K+te[8]*ae+te[12]*U,J[1]=te[1]*X+te[5]*K+te[9]*ae+te[13]*U,J[2]=te[2]*X+te[6]*K+te[10]*ae+te[14]*U,J[3]=te[3]*X+te[7]*K+te[11]*ae+te[15]*U,J}function l(J,te,X,K){return c(K,K),c(K,K),c(K,K)}function h(J,te){this.index=J,this.dataCoordinate=this.position=te}function d(J){return!0===J||J>1?1:J}function o(J,te,X,K,ae,U,V,q,ie,H,ee,Q){this.gl=J,this.pixelRatio=1,this.shader=te,this.orthoShader=X,this.projectShader=K,this.pointBuffer=ae,this.colorBuffer=U,this.glyphBuffer=V,this.idBuffer=q,this.vao=ie,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=H,this.pickOrthoShader=ee,this.pickProjectShader=Q,this.points=[],this._selectResult=new h(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}b.exports=function(J){var te=J.gl,X=p.createPerspective(te),K=p.createOrtho(te),ae=p.createProject(te),U=p.createPickPerspective(te),V=p.createPickOrtho(te),q=p.createPickProject(te),ie=r(te),H=r(te),ee=r(te),Q=r(te),le=new o(te,X,K,ae,ie,H,ee,Q,n(te,[{buffer:ie,size:3,type:te.FLOAT},{buffer:H,size:4,type:te.FLOAT},{buffer:ee,size:2,type:te.FLOAT},{buffer:Q,size:4,type:te.UNSIGNED_BYTE,normalized:!0}]),U,V,q);return le.update(J),le};var x=o.prototype;x.pickSlots=1,x.setPickBase=function(J){this.pickId=J},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],T=[0,0,0],_=[0,0,0],w=[0,0,0,1],M=[0,0,0,1],I=f.slice(),S=[0,0,0],R=[[0,0,0],[0,0,0]];function O(J){return J[0]=J[1]=J[2]=0,J}function C(J,te){return J[0]=te[0],J[1]=te[1],J[2]=te[2],J[3]=1,J}function D(J,te,X,K){return J[0]=te[0],J[1]=te[1],J[2]=te[2],J[X]=K,J}var z=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function Y(J,te,X,K,ae,U,V){var q=X.gl;if((U===X.projectHasAlpha||V)&&function B(J,te,X,K){var ae,U=te.axesProject,V=te.gl,q=J.uniforms,ie=X.model||f,H=X.view||f,ee=X.projection||f,Q=te.axesBounds,oe=function(De){for(var Fe=R,Ue=0;Ue<2;++Ue)for(var qe=0;qe<3;++qe)Fe[Ue][qe]=Math.max(Math.min(De[Ue][qe],1e8),-1e8);return Fe}(te.clipBounds);ae=te.axes&&te.axes.lastCubeProps?te.axes.lastCubeProps.axis:[1,1,1],u[0]=2/V.drawingBufferWidth,u[1]=2/V.drawingBufferHeight,J.bind(),q.view=H,q.projection=ee,q.screenSize=u,q.highlightId=te.highlightId,q.highlightScale=te.highlightScale,q.clipBounds=oe,q.pickGroup=te.pickId/255,q.pixelRatio=K;for(var le=0;le<3;++le)if(U[le]){q.scale=te.projectScale[le],q.opacity=te.projectOpacity[le];for(var de=I,fe=0;fe<16;++fe)de[fe]=0;for(fe=0;fe<4;++fe)de[5*fe]=1;de[5*le]=0,de[12+le]=ae[le]<0?Q[0][le]:Q[1][le],t(de,ie,de),q.model=de;var be=(le+1)%3,he=(le+2)%3,_e=O(T),Ce=O(_);_e[be]=1,Ce[he]=1;var Ee=l(0,0,0,C(w,_e)),Ae=l(0,0,0,C(M,Ce));if(Math.abs(Ee[1])>Math.abs(Ae[1])){var ze=Ee;Ee=Ae,Ae=ze,ze=_e,_e=Ce,Ce=ze;var ve=be;be=he,he=ve}Ee[0]<0&&(_e[be]=-1),Ae[1]>0&&(Ce[he]=-1);var Te=0,Ie=0;for(fe=0;fe<4;++fe)Te+=Math.pow(ie[4*be+fe],2),Ie+=Math.pow(ie[4*he+fe],2);_e[be]/=Math.sqrt(Te),Ce[he]/=Math.sqrt(Ie),q.axes[0]=_e,q.axes[1]=Ce,q.fragClipBounds[0]=D(S,oe[0],le,-1e8),q.fragClipBounds[1]=D(S,oe[1],le,1e8),te.vao.bind(),te.vao.draw(V.TRIANGLES,te.vertexCount),te.lineWidth>0&&(V.lineWidth(te.lineWidth*K),te.vao.draw(V.LINES,te.lineVertexCount,te.vertexCount)),te.vao.unbind()}}(te,X,K,ae),U===X.hasAlpha||V){J.bind();var ie=J.uniforms;ie.model=K.model||f,ie.view=K.view||f,ie.projection=K.projection||f,u[0]=2/q.drawingBufferWidth,u[1]=2/q.drawingBufferHeight,ie.screenSize=u,ie.highlightId=X.highlightId,ie.highlightScale=X.highlightScale,ie.fragClipBounds=z,ie.clipBounds=X.axes.bounds,ie.opacity=X.opacity,ie.pickGroup=X.pickId/255,ie.pixelRatio=ae,X.vao.bind(),X.vao.draw(q.TRIANGLES,X.vertexCount),X.lineWidth>0&&(q.lineWidth(X.lineWidth*ae),X.vao.draw(q.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}function G(J,te,X,K){var ae;ae=Array.isArray(J)?te<J.length?J[te]:void 0:J,ae=i(ae);var U=!0;e(ae)&&(ae="\u25bc",U=!1);var V=s(ae,X,K);return{mesh:V[0],lines:V[1],bounds:V[2],visible:U}}x.draw=function(J){Y(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,J,this.pixelRatio,!1,!1)},x.drawTransparent=function(J){Y(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,J,this.pixelRatio,!0,!1)},x.drawPick=function(J){Y(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,J,1,!0,!0)},x.pick=function(J){if(!J||J.id!==this.pickId)return null;var te=J.value[2]+(J.value[1]<<8)+(J.value[0]<<16);if(te>=this.pointCount||te<0)return null;var X=this.points[te],K=this._selectResult;K.index=te;for(var ae=0;ae<3;++ae)K.position[ae]=K.dataCoordinate[ae]=X[ae];return K},x.highlight=function(J){if(J){var te=J.index;this.highlightId=[(255&te)/255,(te>>8&255)/255,(te>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},x.update=function(J){if("perspective"in(J=J||{})&&(this.useOrtho=!J.perspective),"orthographic"in J&&(this.useOrtho=!!J.orthographic),"lineWidth"in J&&(this.lineWidth=J.lineWidth),"project"in J)if(Array.isArray(J.project))this.axesProject=J.project;else{var te=!!J.project;this.axesProject=[te,te,te]}if("projectScale"in J)if(Array.isArray(J.projectScale))this.projectScale=J.projectScale.slice();else{var X=+J.projectScale;this.projectScale=[X,X,X]}if(this.projectHasAlpha=!1,"projectOpacity"in J){this.projectOpacity=Array.isArray(J.projectOpacity)?J.projectOpacity.slice():[X=+J.projectOpacity,X,X];for(var K=0;K<3;++K)this.projectOpacity[K]=d(this.projectOpacity[K]),this.projectOpacity[K]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in J&&(this.opacity=d(J.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ae,U,V=J.position,q=J.font||"normal",ie=J.alignment||[0,0];if(2===ie.length)ae=ie[0],U=ie[1];else for(ae=[],U=[],K=0;K<ie.length;++K)ae[K]=ie[K][0],U[K]=ie[K][1];var H=[1/0,1/0,1/0],ee=[-1/0,-1/0,-1/0],Q=J.glyph,oe=J.color,le=J.size,de=J.angle,fe=J.lineColor,be=-1,he=0,_e=0,Ce=0;if(V.length){Ce=V.length;e:for(K=0;K<Ce;++K){for(var Ee=V[K],Ae=0;Ae<3;++Ae)if(isNaN(Ee[Ae])||!isFinite(Ee[Ae]))continue e;var ze=(lt=G(Q,K,q,this.pixelRatio)).mesh,ve=lt.lines,Te=lt.bounds;he+=3*ze.cells.length,_e+=2*ve.edges.length}}var Ie=he+_e,De=a.mallocFloat(3*Ie),Fe=a.mallocFloat(4*Ie),Ue=a.mallocFloat(2*Ie),qe=a.mallocUint32(Ie);if(Ie>0){var je=0,rt=he,Ne=[0,0,0,1],Be=[0,0,0,1],We=Array.isArray(oe)&&Array.isArray(oe[0]),Ye=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(K=0;K<Ce;++K){for(be+=1,Ee=V[K],Ae=0;Ae<3;++Ae){if(isNaN(Ee[Ae])||!isFinite(Ee[Ae]))continue e;ee[Ae]=Math.max(ee[Ae],Ee[Ae]),H[Ae]=Math.min(H[Ae],Ee[Ae])}ze=(lt=G(Q,K,q,this.pixelRatio)).mesh,ve=lt.lines,Te=lt.bounds;var lt,mt=lt.visible;if(mt)if(Array.isArray(oe)){if(3===(Tt=We?K<oe.length?oe[K]:[0,0,0,0]:oe).length){for(Ae=0;Ae<3;++Ae)Ne[Ae]=Tt[Ae];Ne[3]=1}else if(4===Tt.length){for(Ae=0;Ae<4;++Ae)Ne[Ae]=Tt[Ae];!this.hasAlpha&&Tt[3]<1&&(this.hasAlpha=!0)}}else Ne[0]=Ne[1]=Ne[2]=0,Ne[3]=1;else Ne=[1,1,1,0];if(mt)if(Array.isArray(fe)){var Tt;if(3===(Tt=Ye?K<fe.length?fe[K]:[0,0,0,0]:fe).length){for(Ae=0;Ae<3;++Ae)Be[Ae]=Tt[Ae];Be[Ae]=1}else if(4===Tt.length){for(Ae=0;Ae<4;++Ae)Be[Ae]=Tt[Ae];!this.hasAlpha&&Tt[3]<1&&(this.hasAlpha=!0)}}else Be[0]=Be[1]=Be[2]=0,Be[3]=1;else Be=[1,1,1,0];var It=.5;mt?Array.isArray(le)?It=K<le.length?+le[K]:12:le?It=+le:this.useOrtho&&(It=12):It=0;var Ct=0;Array.isArray(de)?Ct=K<de.length?+de[K]:0:de&&(Ct=+de);var ct=Math.cos(Ct),at=Math.sin(Ct);for(Ee=V[K],Ae=0;Ae<3;++Ae)ee[Ae]=Math.max(ee[Ae],Ee[Ae]),H[Ae]=Math.min(H[Ae],Ee[Ae]);var St=ae,Xt=U;St=0,Array.isArray(ae)?St=K<ae.length?ae[K]:0:ae&&(St=ae),Xt=0,Array.isArray(U)?Xt=K<U.length?U[K]:0:U&&(Xt=U);var tn=[St*=St>0?1-Te[0][0]:St<0?1+Te[1][0]:1,Xt*=Xt>0?1-Te[0][1]:Xt<0?1+Te[1][1]:1],hn=ze.cells||[],cn=ze.positions||[];for(Ae=0;Ae<hn.length;++Ae)for(var yn=hn[Ae],en=0;en<3;++en){for(var Xe=0;Xe<3;++Xe)De[3*je+Xe]=Ee[Xe];for(Xe=0;Xe<4;++Xe)Fe[4*je+Xe]=Ne[Xe];qe[je]=be;var tt=cn[yn[en]];Ue[2*je]=It*(ct*tt[0]-at*tt[1]+tn[0]),Ue[2*je+1]=It*(at*tt[0]+ct*tt[1]+tn[1]),je+=1}for(hn=ve.edges,cn=ve.positions,Ae=0;Ae<hn.length;++Ae)for(yn=hn[Ae],en=0;en<2;++en){for(Xe=0;Xe<3;++Xe)De[3*rt+Xe]=Ee[Xe];for(Xe=0;Xe<4;++Xe)Fe[4*rt+Xe]=Be[Xe];qe[rt]=be,Ue[2*rt]=It*(ct*(tt=cn[yn[en]])[0]-at*tt[1]+tn[0]),Ue[2*rt+1]=It*(at*tt[0]+ct*tt[1]+tn[1]),rt+=1}}}this.bounds=[H,ee],this.points=V,this.pointCount=V.length,this.vertexCount=he,this.lineVertexCount=_e,this.pointBuffer.update(De),this.colorBuffer.update(Fe),this.glyphBuffer.update(Ue),this.idBuffer.update(qe),a.free(De),a.free(Fe),a.free(Ue),a.free(qe)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(m,b,y){"use strict";var e=m("glslify");y.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),y.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(m,b,y){"use strict";var e=m("gl-shader"),r=m("gl-buffer"),n=m("./lib/shaders");function a(p,s,i){this.plot=p,this.boxBuffer=s,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}b.exports=function(p,s){var i=p.gl,l=new a(p,r(i,[0,0,0,1,1,0,1,1]),e(i,n.boxVertex,n.boxFragment));return l.update(s),p.addOverlay(l),l};var t=a.prototype;t.draw=function(){if(this.enabled){var p=this.plot,s=this.selectBox,i=this.borderWidth,f=this.innerColor,c=this.outerColor,l=this.borderColor,h=p.box,d=p.screenBox,o=p.dataBox,x=p.viewBox,u=p.pixelRatio,T=(s[0]-o[0])*(x[2]-x[0])/(o[2]-o[0])+x[0],_=(s[1]-o[1])*(x[3]-x[1])/(o[3]-o[1])+x[1],w=(s[2]-o[0])*(x[2]-x[0])/(o[2]-o[0])+x[0],M=(s[3]-o[1])*(x[3]-x[1])/(o[3]-o[1])+x[1];if(T=Math.max(T,x[0]),_=Math.max(_,x[1]),w=Math.min(w,x[2]),M=Math.min(M,x[3]),!(w<T||M<_)){h.bind();var I=d[2]-d[0],S=d[3]-d[1];if(this.outerFill&&(h.drawBox(0,0,I,_,c),h.drawBox(0,_,T,M,c),h.drawBox(0,M,I,S,c),h.drawBox(w,_,I,M,c)),this.innerFill&&h.drawBox(T,_,w,M,f),i>0){var R=i*u;h.drawBox(T-R,_-R,w+R,_+R,l),h.drawBox(T-R,M-R,w+R,M+R,l),h.drawBox(T-R,_-R,T+R,M+R,l),h.drawBox(w-R,_-R,w+R,M+R,l)}}}},t.update=function(p){this.innerFill=!!(p=p||{}).innerFill,this.outerFill=!!p.outerFill,this.innerColor=(p.innerColor||[0,0,0,.5]).slice(),this.outerColor=(p.outerColor||[0,0,0,.5]).slice(),this.borderColor=(p.borderColor||[0,0,0,1]).slice(),this.borderWidth=p.borderWidth||0,this.selectBox=(p.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(m,b,y){"use strict";b.exports=function(i,f){var c=f[0],l=f[1];return new p(i,e(i,c,l,{}),r.mallocUint8(c*l*4))};var e=m("gl-fbo"),r=m("typedarray-pool"),n=m("ndarray"),a=m("bit-twiddle").nextPow2;function t(i,f,c,l,h){this.coord=[i,f],this.id=c,this.value=l,this.distance=h}function p(i,f,c){this.gl=i,this.fbo=f,this.buffer=c,this._readTimeout=null;var l=this;this._readCallback=function(){l.gl&&(f.bind(),i.readPixels(0,0,f.shape[0],f.shape[1],i.RGBA,i.UNSIGNED_BYTE,l.buffer),l._readTimeout=null)}}var s=p.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var f=this.fbo.shape[0],c=this.fbo.shape[1];if(c*f*4>this.buffer.length){r.free(this.buffer);for(var l=this.buffer=r.mallocUint8(a(c*f*4)),h=0;h<c*f*4;++h)l[h]=255}return i}}}),s.begin=function(){var i=this.gl;i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},s.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(i,f,c){if(!this.gl)return null;var l=this.fbo.shape.slice();i|=0,f|=0,"number"!=typeof c&&(c=1);var h=0|Math.min(Math.max(i-c,0),l[0]),d=0|Math.min(Math.max(i+c,0),l[0]),o=0|Math.min(Math.max(f-c,0),l[1]),x=0|Math.min(Math.max(f+c,0),l[1]);if(d<=h||x<=o)return null;var u=[d-h,x-o],T=n(this.buffer,[u[0],u[1],4],[4,4*l[0],1],4*(h+l[0]*o)),_=function(I,S,R){for(var O=1e8,C=-1,D=-1,B=I.shape[0],z=I.shape[1],Y=0;Y<B;Y++)for(var G=0;G<z;G++){var J=I.get(Y,G,0),te=I.get(Y,G,1),X=I.get(Y,G,2),K=I.get(Y,G,3);if(J<255||te<255||X<255||K<255){var ae=S-Y,U=R-G,V=ae*ae+U*U;V<O&&(O=V,C=Y,D=G)}}return[C,D,O]}(T.hi(u[0],u[1],1),c,c),w=_[0],M=_[1];return w<0||Math.pow(this.radius,2)<_[2]?null:new t(w+h|0,M+o|0,T.get(w,M,0),[T.get(w,M,1),T.get(w,M,2),T.get(w,M,3)],Math.sqrt(_[2]))},s.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(m,b,y){"use strict";var e=m("./lib/create-uniforms"),r=m("./lib/create-attributes"),n=m("./lib/reflect"),a=m("./lib/shader-cache"),t=m("./lib/runtime-reflect"),p=m("./lib/GLError");function s(c){this.gl=c,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=s.prototype;function f(c,l){return c.name<l.name?-1:1}i.bind=function(){var c;this.program||this._relink();var l=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),h=this.gl.lastAttribCount;if(l>h)for(c=h;c<l;c++)this.gl.enableVertexAttribArray(c);else if(h>l)for(c=l;c<h;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=l,this.gl.useProgram(this.program)},i.dispose=function(){for(var c=this.gl.lastAttribCount,l=0;l<c;l++)this.gl.disableVertexAttribArray(l);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},i.update=function(c,l,h,d){if(!l||1===arguments.length){var o=c;c=o.vertex,l=o.fragment,h=o.uniforms,d=o.attributes}var x=this,u=x.gl,T=x._vref;x._vref=a.shader(u,u.VERTEX_SHADER,c),T&&T.dispose(),x.vertShader=x._vref.shader;var _=this._fref;if(x._fref=a.shader(u,u.FRAGMENT_SHADER,l),_&&_.dispose(),x.fragShader=x._fref.shader,!h||!d){var w=u.createProgram();if(u.attachShader(w,x.fragShader),u.attachShader(w,x.vertShader),u.linkProgram(w),!u.getProgramParameter(w,u.LINK_STATUS)){var M=u.getProgramInfoLog(w);throw new p(M,"Error linking program:"+M)}h=h||t.uniforms(u,w),d=d||t.attributes(u,w),u.deleteProgram(w)}(d=d.slice()).sort(f);var I,S=[],R=[],O=[];for(I=0;I<d.length;++I){var C=d[I];if(C.type.indexOf("mat")>=0){for(var D=0|C.type.charAt(C.type.length-1),B=new Array(D),z=0;z<D;++z)B[z]=O.length,R.push(C.name+"["+z+"]"),"number"==typeof C.location?O.push(C.location+z):Array.isArray(C.location)&&C.location.length===D&&"number"==typeof C.location[z]?O.push(0|C.location[z]):O.push(-1);S.push({name:C.name,type:C.type,locations:B})}else S.push({name:C.name,type:C.type,locations:[O.length]}),R.push(C.name),O.push("number"==typeof C.location?0|C.location:-1)}var Y=0;for(I=0;I<O.length;++I)if(O[I]<0){for(;O.indexOf(Y)>=0;)Y+=1;O[I]=Y}var G=new Array(h.length);function J(){x.program=a.program(u,x._vref,x._fref,R,O);for(var te=0;te<h.length;++te)G[te]=u.getUniformLocation(x.program,h[te].name)}J(),x._relink=J,x.types={uniforms:n(h),attributes:n(d)},x.attributes=r(u,x,S,O),Object.defineProperty(x,"uniforms",e(u,x,h,G))},b.exports=function(c,l,h,d,o){var x=new s(c);return x.update(l,h,d,o),x}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(m,b,y){function e(r,n,a){this.shortMessage=n||"",this.longMessage=a||"",this.rawError=r||"",this.message="gl-shader: "+(n||r||"")+(a?"\n"+a:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,b.exports=e},{}],134:[function(m,b,y){"use strict";b.exports=function(s,i,f,c){for(var l={},h=0,d=f.length;h<d;++h){var o=f[h],x=o.name,u=o.type,T=o.locations;switch(u){case"bool":case"int":case"float":t(s,i,T[0],c,1,l,x);break;default:if(u.indexOf("vec")>=0){if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+x+": "+u);t(s,i,T[0],c,_,l,x)}else{if(!(u.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+x+": "+u);var _;if((_=u.charCodeAt(u.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+x+": "+u);p(s,i,T,c,_,l,x)}}}return l};var e=m("./GLError");function r(s,i,f,c,l,h){this._gl=s,this._wrapper=i,this._index=f,this._locations=c,this._dimension=l,this._constFunc=h}var n=r.prototype;n.pointer=function(s,i,f,c){var l=this._gl,h=this._locations[this._index];l.vertexAttribPointer(h,this._dimension,s||l.FLOAT,!!i,f||0,c||0),l.enableVertexAttribArray(h)},n.set=function(s,i,f,c){return this._constFunc(this._locations[this._index],s,i,f,c)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=0|s,this._wrapper.program=null),0|s}});var a=[function(s,i,f){return void 0===f.length?s.vertexAttrib1f(i,f):s.vertexAttrib1fv(i,f)},function(s,i,f,c){return void 0===f.length?s.vertexAttrib2f(i,f,c):s.vertexAttrib2fv(i,f)},function(s,i,f,c,l){return void 0===f.length?s.vertexAttrib3f(i,f,c,l):s.vertexAttrib3fv(i,f)},function(s,i,f,c,l,h){return void 0===f.length?s.vertexAttrib4f(i,f,c,l,h):s.vertexAttrib4fv(i,f)}];function t(s,i,f,c,l,h,d){var o=a[l],x=new r(s,i,f,c,l,o);Object.defineProperty(h,d,{set:function(u){return s.disableVertexAttribArray(c[f]),o(s,c[f],u),u},get:function(){return x},enumerable:!0})}function p(s,i,f,c,l,h,d){for(var o=new Array(l),x=new Array(l),u=0;u<l;++u)t(s,i,f[u],c,l,o,u),x[u]=o[u];Object.defineProperty(o,"location",{set:function(w){if(Array.isArray(w))for(var M=0;M<l;++M)x[M].location=w[M];else for(M=0;M<l;++M)x[M].location=w+M;return w},get:function(){for(var w=new Array(l),M=0;M<l;++M)w[M]=c[f[M]];return w},enumerable:!0}),o.pointer=function(w,M,I,S){w=w||s.FLOAT,M=!!M,I=I||l*l,S=S||0;for(var R=0;R<l;++R){var O=c[f[R]];s.vertexAttribPointer(O,l,w,M,I,S+R*l),s.enableVertexAttribArray(O)}};var T=new Array(l),_=s["vertexAttrib"+l+"fv"];Object.defineProperty(h,d,{set:function(w){for(var M=0;M<l;++M){var I=c[f[M]];if(s.disableVertexAttribArray(I),Array.isArray(w[0]))_.call(s,I,w[M]);else{for(var S=0;S<l;++S)T[S]=w[l*M+S];_.call(s,I,T)}}return w},get:function(){return o},enumerable:!0})}},{"./GLError":133}],135:[function(m,b,y){"use strict";var e=m("./reflect"),r=m("./GLError");function n(t){return function(){return t}}function a(t,p){for(var s=new Array(t),i=0;i<t;++i)s[i]=p;return s}b.exports=function(t,p,s,i){function f(d){return function(o){for(var x=function z(Y,G){if("object"!=typeof G)return[[Y,G]];var J=[];for(var te in G){var X=G[te],K=Y;parseInt(te)+""===te?K+="["+te+"]":K+="."+te,"object"==typeof X?J.push.apply(J,z(K,X)):J.push([K,X])}return J}("",d),u=0;u<x.length;++u){var T=x[u],_=T[0],w=T[1];if(i[w]){var M=o;if("string"==typeof _&&(0===_.indexOf(".")||0===_.indexOf("["))){var I=_;if(0===_.indexOf(".")&&(I=_.slice(1)),I.indexOf("]")===I.length-1){var S=I.indexOf("["),R=I.slice(0,S),O=I.slice(S+1,I.length-1);M=R?o[R][O]:o[O]}else M=o[I]}var C,D=s[w].type;switch(D){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(i[w],M);break;case"float":t.uniform1f(i[w],M);break;default:var B=D.indexOf("vec");if(!(0<=B&&B<=1&&D.length===4+B)){if(0===D.indexOf("mat")&&4===D.length){if((C=D.charCodeAt(D.length-1)-48)<2||C>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+D);t["uniformMatrix"+C+"fv"](i[w],!1,M);break}throw new r("","Unknown uniform data type for "+name+": "+D)}if((C=D.charCodeAt(D.length-1)-48)<2||C>4)throw new r("","Invalid data type");switch(D.charAt(0)){case"b":case"i":t["uniform"+C+"iv"](i[w],M);break;case"v":t["uniform"+C+"fv"](i[w],M);break;default:throw new r("","Unrecognized data type for vector "+name+": "+D)}}}}}}function c(d,o,x){if("object"==typeof x){var u=l(x);Object.defineProperty(d,o,{get:n(u),set:f(x),enumerable:!0,configurable:!1})}else i[x]?Object.defineProperty(d,o,{get:(T=x,function(_,w,M){return _.getUniform(w.program,M[T])}),set:f(x),enumerable:!0,configurable:!1}):d[o]=function(_){switch(_){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var w=_.indexOf("vec");if(0<=w&&w<=1&&_.length===4+w){if((M=_.charCodeAt(_.length-1)-48)<2||M>4)throw new r("","Invalid data type");return"b"===_.charAt(0)?a(M,!1):a(M,0)}if(0===_.indexOf("mat")&&4===_.length){var M;if((M=_.charCodeAt(_.length-1)-48)<2||M>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+_);return a(M*M,0)}throw new r("","Unknown uniform data type for "+name+": "+_)}}(s[x].type);var T}function l(d){var o;if(Array.isArray(d)){o=new Array(d.length);for(var x=0;x<d.length;++x)c(o,x,d[x])}else for(var u in o={},d)c(o,u,d[u]);return o}var h=e(s,!0);return{get:n(l(h)),set:f(h),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(m,b,y){"use strict";b.exports=function(e,r){for(var n={},a=0;a<e.length;++a)for(var t=e[a].name.split("."),p=n,s=0;s<t.length;++s){var i=t[s].split("[");if(i.length>1){i[0]in p||(p[i[0]]=[]),p=p[i[0]];for(var f=1;f<i.length;++f){var c=parseInt(i[f]);f<i.length-1||s<t.length-1?(c in p||(p[c]=f<i.length-1?[]:{}),p=p[c]):p[c]=r?a:e[a].type}}else s<t.length-1?(i[0]in p||(p[i[0]]={}),p=p[i[0]]):p[i[0]]=r?a:e[a].type}return n}},{}],137:[function(m,b,y){"use strict";y.uniforms=function(a,t){for(var p=a.getProgramParameter(t,a.ACTIVE_UNIFORMS),s=[],i=0;i<p;++i){var f=a.getActiveUniform(t,i);if(f){var c=n(a,f.type);if(f.size>1)for(var l=0;l<f.size;++l)s.push({name:f.name.replace("[0]","["+l+"]"),type:c});else s.push({name:f.name,type:c})}}return s},y.attributes=function(a,t){for(var p=a.getProgramParameter(t,a.ACTIVE_ATTRIBUTES),s=[],i=0;i<p;++i){var f=a.getActiveAttrib(t,i);f&&s.push({name:f.name,type:n(a,f.type)})}return s};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},r=null;function n(a,t){if(!r){var p=Object.keys(e);r={};for(var s=0;s<p.length;++s){var i=p[s];r[a[i]]=e[i]}}return r[t]}},{}],138:[function(m,b,y){"use strict";y.shader=function(f,c,l){return i(f).getShaderReference(c,l)},y.program=function(f,c,l,h,d){return i(f).getProgram(c,l,h,d)};var e=m("./GLError"),r=m("gl-format-compiler-error"),n=new(typeof WeakMap>"u"?m("weakmap-shim"):WeakMap),a=0;function t(f,c,l,h,d,o,x){this.id=f,this.src=c,this.type=l,this.shader=h,this.count=o,this.programs=[],this.cache=x}function p(f){this.gl=f,this.shaders=[{},{}],this.programs={}}t.prototype.dispose=function(){if(0==--this.count){for(var f=this.cache,c=f.gl,l=this.programs,h=0,d=l.length;h<d;++h){var o=f.programs[l[h]];o&&(delete f.programs[h],c.deleteProgram(o))}c.deleteShader(this.shader),delete f.shaders[this.type===c.FRAGMENT_SHADER|0][this.src]}};var s=p.prototype;function i(f){var c=n.get(f);return c||(c=new p(f),n.set(f,c)),c}s.getShaderReference=function(f,c){var l=this.gl,h=this.shaders[f===l.FRAGMENT_SHADER|0],d=h[c];if(d&&l.isShader(d.shader))d.count+=1;else{var o=function(x,u,T){var _=x.createShader(u);if(x.shaderSource(_,T),x.compileShader(_),!x.getShaderParameter(_,x.COMPILE_STATUS)){var w=x.getShaderInfoLog(_);try{var M=r(w,T,u)}catch(I){throw console.warn("Failed to format compiler error: "+I),new e(w,"Error compiling shader:\n"+w)}throw new e(w,M.short,M.long)}return _}(l,f,c);d=h[c]=new t(a++,c,f,o,[],1,this)}return d},s.getProgram=function(f,c,l,h){var d=[f.id,c.id,l.join(":"),h.join(":")].join("@"),o=this.programs[d];return o&&this.gl.isProgram(o)||(this.programs[d]=o=function(x,u,T,_,w){var M=x.createProgram();x.attachShader(M,u),x.attachShader(M,T);for(var I=0;I<_.length;++I)x.bindAttribLocation(M,w[I],_[I]);if(x.linkProgram(M),!x.getProgramParameter(M,x.LINK_STATUS)){var S=x.getProgramInfoLog(M);throw new e(S,"Error linking program: "+S)}return M}(this.gl,f.shader,c.shader,l,h),f.programs.push(d),c.programs.push(d)),o}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(m,b,y){"use strict";function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}b.exports=function(n,a){var t=new e(n);return t.update(a),n.addOverlay(t),t};var r=e.prototype;r.update=function(n){this.enable=((n=n||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var n=this.enable,a=this.width,t=this.color,p=this.center,s=this.plot,i=s.line,f=s.dataBox,c=s.viewBox;if(i.bind(),f[0]<=p[0]&&p[0]<=f[2]&&f[1]<=p[1]&&p[1]<=f[3]){var l=c[0]+(p[0]-f[0])/(f[2]-f[0])*(c[2]-c[0]),h=c[1]+(p[1]-f[1])/(f[3]-f[1])*(c[3]-c[1]);n[0]&&i.drawLine(l,h,c[0],h,a[0],t[0]),n[1]&&i.drawLine(l,h,l,c[1],a[1],t[1]),n[2]&&i.drawLine(l,h,c[2],h,a[2],t[2]),n[3]&&i.drawLine(l,h,l,c[3],a[3],t[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(m,b,y){"use strict";var e=m("glslify"),r=m("gl-shader"),n=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);b.exports=function(t){return r(t,n,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(m,b,y){"use strict";var e=m("gl-buffer"),r=m("gl-vao"),n=m("./shaders/index");b.exports=function(c,l){var h=[];function d(_,w,M,I,S,R){var O=[_,w,M,0,0,0,1];O[I+3]=1,O[I]=S,h.push.apply(h,O),O[6]=-1,h.push.apply(h,O),O[I]=R,h.push.apply(h,O),h.push.apply(h,O),O[6]=1,h.push.apply(h,O),O[I]=S,h.push.apply(h,O)}d(0,0,0,0,0,1),d(0,0,0,1,0,1),d(0,0,0,2,0,1),d(1,0,0,1,-1,1),d(1,0,0,2,-1,1),d(0,1,0,0,-1,1),d(0,1,0,2,-1,1),d(0,0,1,0,-1,1),d(0,0,1,1,-1,1);var o=e(c,h),x=r(c,[{type:c.FLOAT,buffer:o,size:3,offset:0,stride:28},{type:c.FLOAT,buffer:o,size:3,offset:12,stride:28},{type:c.FLOAT,buffer:o,size:1,offset:24,stride:28}]),u=n(c);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var T=new t(c,o,x,u);return T.update(l),T};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(c,l,h,d){this.gl=c,this.buffer=l,this.vao=h,this.shader=d,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var p=t.prototype,s=[0,0,0],i=[0,0,0],f=[0,0];p.isTransparent=function(){return!1},p.drawTransparent=function(c){},p.draw=function(c){var l=this.gl,h=this.vao,d=this.shader;h.bind(),d.bind();var o,x=c.model||a,u=c.view||a,T=c.projection||a;this.axes&&(o=this.axes.lastCubeProps.axis);for(var _=s,w=i,M=0;M<3;++M)o&&o[M]<0?(_[M]=this.bounds[0][M],w[M]=this.bounds[1][M]):(_[M]=this.bounds[1][M],w[M]=this.bounds[0][M]);for(f[0]=l.drawingBufferWidth,f[1]=l.drawingBufferHeight,d.uniforms.model=x,d.uniforms.view=u,d.uniforms.projection=T,d.uniforms.coordinates=[this.position,_,w],d.uniforms.colors=this.colors,d.uniforms.screenShape=f,M=0;M<3;++M)d.uniforms.lineWidth=this.lineWidth[M]*this.pixelRatio,this.enabled[M]&&(h.draw(l.TRIANGLES,6,6*M),this.drawSides[M]&&h.draw(l.TRIANGLES,12,18+12*M));h.unbind()},p.update=function(c){c&&("bounds"in c&&(this.bounds=c.bounds),"position"in c&&(this.position=c.position),"lineWidth"in c&&(this.lineWidth=c.lineWidth),"colors"in c&&(this.colors=c.colors),"enabled"in c&&(this.enabled=c.enabled),"drawSides"in c&&(this.drawSides=c.drawSides))},p.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(m,b,y){var e=m("glslify"),r=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),n=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),t=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);y.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},y.pickShader={vertex:a,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(m,b,y){"use strict";var e=m("gl-vec3"),r=m("gl-vec4"),n=["xyz","xzy","yxz","yzx","zxy","zyx"],t=function(c,l){var h,d=c.length;for(h=0;h<d;h++){var o=c[h];if(o===l)return h;if(o>l)return h-1}return h},p=function(c,l,h){return c<l?l:c>h?h:c},s=function(c){var l=1/0;c.sort(function(x,u){return x-u});for(var h=c.length,d=1;d<h;d++){var o=Math.abs(c[d]-c[d-1]);o<l&&(l=o)}return l};b.exports=function(c,l){var h=c.startingPositions,d=c.maxLength||1e3,o=c.tubeSize||1,x=c.absoluteTubeSize,u=c.gridFill||"+x+y+z",T={};-1!==u.indexOf("-x")&&(T.reversedX=!0),-1!==u.indexOf("-y")&&(T.reversedY=!0),-1!==u.indexOf("-z")&&(T.reversedZ=!0),T.filled=n.indexOf(u.replace(/-/g,"").replace(/\+/g,""));var fe,be,he,_e,_=c.getVelocity||function(fe){return function(be,he,_e){var Ce=he.vectors,Ee=he.meshgrid,Ae=be[0],ze=be[1],ve=be[2],Te=Ee[0].length,Ie=Ee[1].length,De=Ee[2].length,Fe=t(Ee[0],Ae),Ue=t(Ee[1],ze),qe=t(Ee[2],ve),je=Fe+1,rt=Ue+1,Ne=qe+1;if(Fe=p(Fe,0,Te-1),je=p(je,0,Te-1),Ue=p(Ue,0,Ie-1),rt=p(rt,0,Ie-1),qe=p(qe,0,De-1),Ne=p(Ne,0,De-1),Fe<0||Ue<0||qe<0||je>Te-1||rt>Ie-1||Ne>De-1)return e.create();var Be,We,Ye,lt,mt,Tt,It=Ee[0][Fe],ct=Ee[1][Ue],St=Ee[2][qe],Xt=(Ae-It)/(Ee[0][je]-It),tn=(ze-ct)/(Ee[1][rt]-ct),hn=(ve-St)/(Ee[2][Ne]-St);switch(isFinite(Xt)||(Xt=.5),isFinite(tn)||(tn=.5),isFinite(hn)||(hn=.5),_e.reversedX&&(Fe=Te-1-Fe,je=Te-1-je),_e.reversedY&&(Ue=Ie-1-Ue,rt=Ie-1-rt),_e.reversedZ&&(qe=De-1-qe,Ne=De-1-Ne),_e.filled){case 5:mt=qe,Tt=Ne,Ye=Ue*De,lt=rt*De,Be=Fe*De*Ie,We=je*De*Ie;break;case 4:mt=qe,Tt=Ne,Be=Fe*De,We=je*De,Ye=Ue*De*Te,lt=rt*De*Te;break;case 3:Ye=Ue,lt=rt,mt=qe*Ie,Tt=Ne*Ie,Be=Fe*Ie*De,We=je*Ie*De;break;case 2:Ye=Ue,lt=rt,Be=Fe*Ie,We=je*Ie,mt=qe*Ie*Te,Tt=Ne*Ie*Te;break;case 1:Be=Fe,We=je,mt=qe*Te,Tt=Ne*Te,Ye=Ue*Te*De,lt=rt*Te*De;break;default:Be=Fe,We=je,Ye=Ue*Te,lt=rt*Te,mt=qe*Te*Ie,Tt=Ne*Te*Ie}var cn=Ce[Be+Ye+mt],yn=Ce[Be+Ye+Tt],en=Ce[Be+lt+mt],Xe=Ce[Be+lt+Tt],tt=Ce[We+Ye+mt],ye=Ce[We+Ye+Tt],ke=Ce[We+lt+mt],Ve=Ce[We+lt+Tt],Je=e.create(),nt=e.create(),Ke=e.create(),vt=e.create();e.lerp(Je,cn,tt,Xt),e.lerp(nt,yn,ye,Xt),e.lerp(Ke,en,ke,Xt),e.lerp(vt,Xe,Ve,Xt);var gt=e.create(),Ot=e.create();e.lerp(gt,Je,Ke,tn),e.lerp(Ot,nt,vt,tn);var Vt=e.create();return e.lerp(Vt,gt,Ot,hn),Vt}(fe,c,T)},w=c.getDivergence||function(fe,be){var he=e.create(),_e=1e-4;e.add(he,fe,[_e,0,0]);var Ce=_(he);e.subtract(Ce,Ce,be),e.scale(Ce,Ce,1/_e),e.add(he,fe,[0,_e,0]);var Ee=_(he);e.subtract(Ee,Ee,be),e.scale(Ee,Ee,1/_e),e.add(he,fe,[0,0,_e]);var Ae=_(he);return e.subtract(Ae,Ae,be),e.scale(Ae,Ae,1/_e),e.add(he,Ce,Ee),e.add(he,he,Ae),he},M=[],I=l[0][0],S=l[0][1],R=l[0][2],O=l[1][0],C=l[1][1],D=l[1][2],z=10*e.distance(l[0],l[1])/d,Y=z*z,G=1,J=0,te=h.length;te>1&&(G=function(fe){for(var be=[],he=[],_e=[],Ce={},Ee={},Ae={},ze=fe.length,ve=0;ve<ze;ve++){var Te=fe[ve],Ie=Te[0],De=Te[1],Fe=Te[2];Ce[Ie]||(be.push(Ie),Ce[Ie]=!0),Ee[De]||(he.push(De),Ee[De]=!0),Ae[Fe]||(_e.push(Fe),Ae[Fe]=!0)}var Ue=s(be),qe=s(he),je=s(_e),rt=Math.min(Ue,qe,je);return isFinite(rt)?rt:1}(h));for(var X=0;X<te;X++){var K=e.create();e.copy(K,h[X]);var ae=[K],U=[],V=_(K),q=K;U.push(V);var ie=[],H=w(K,V),ee=e.length(H);isFinite(ee)&&ee>J&&(J=ee),ie.push(ee),M.push({points:ae,velocities:U,divergences:ie});for(var Q=0;Q<100*d&&ae.length<d&&(be=void 0,he=void 0,_e=void 0,he=(fe=K)[1],_e=fe[2],!((be=fe[0])<I||be>O||he<S||he>C||_e<R||_e>D));){Q++;var oe=e.clone(V),le=e.squaredLength(oe);if(0===le)break;le>Y&&e.scale(oe,oe,z/Math.sqrt(le)),e.add(oe,oe,K),V=_(oe),e.squaredDistance(q,oe)-Y>-1e-4*Y&&(ae.push(oe),q=oe,U.push(V),H=w(oe,V),ee=e.length(H),isFinite(ee)&&ee>J&&(J=ee),ie.push(ee)),K=oe}}var de=function(c,l,h,d){for(var o=0,x=0;x<c.length;x++)for(var u=c[x].velocities,T=0;T<u.length;T++)o=Math.max(o,e.length(u[T]));var _=c.map(function(z){return function(Y,G,J,te){for(var X=Y.points,K=Y.velocities,ae=Y.divergences,U=[],V=[],q=[],ie=[],H=[],ee=[],Q=0,oe=0,le=r.create(),de=r.create(),fe=0;fe<X.length;fe++){var be=X[fe],he=K[fe],_e=ae[fe];0===G&&(_e=.05*J),oe=e.length(he)/te,le=r.create(),e.copy(le,he),le[3]=_e;for(var Ce=0;Ce<8;Ce++)H[Ce]=[be[0],be[1],be[2],Ce];if(ie.length>0)for(Ce=0;Ce<8;Ce++){var Ee=(Ce+1)%8;U.push(ie[Ce],H[Ce],H[Ee],H[Ee],ie[Ee],ie[Ce]),q.push(de,le,le,le,de,de),ee.push(Q,oe,oe,oe,Q,Q);var Ae=U.length;V.push([Ae-6,Ae-5,Ae-4],[Ae-3,Ae-2,Ae-1])}var ze=ie;ie=H,H=ze;var ve=de;de=le,le=ve;var Te=Q;Q=oe,oe=Te}return{positions:U,cells:V,vectors:q,vertexIntensity:ee}}(z,h,d,o)}),w=[],M=[],I=[],S=[];for(x=0;x<_.length;x++){var R=_[x],O=w.length;for(w=w.concat(R.positions),I=I.concat(R.vectors),S=S.concat(R.vertexIntensity),T=0;T<R.cells.length;T++){var C=R.cells[T],D=[];M.push(D);for(var B=0;B<C.length;B++)D.push(C[B]+O)}}return{positions:w,cells:M,vectors:I,vertexIntensity:S,colormap:l}}(M,c.colormap,J,G);return x?de.tubeScale=x:(0===J&&(J=1),de.tubeScale=.5*o*G/J),de};var i=m("./lib/shaders"),f=m("gl-cone3d").createMesh;b.exports.createTubeMesh=function(c,l){return f(c,l,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(m,b,y){var e=m("gl-shader"),r=m("glslify"),n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=r(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),t=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),p=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);y.createShader=function(s){var i=e(s,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createPickShader=function(s){var i=e(s,n,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},y.createContourShader=function(s){var i=e(s,t,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},y.createPickContourShader=function(s){var i=e(s,t,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(m,b,y){"use strict";b.exports=function(V){var q=V.gl,ie=u(q),H=_(q),ee=T(q),Q=w(q),oe=r(q),le=n(q,[{buffer:oe,size:4,stride:40,offset:0},{buffer:oe,size:3,stride:40,offset:16},{buffer:oe,size:3,stride:40,offset:28}]),de=r(q),fe=n(q,[{buffer:de,size:4,stride:20,offset:0},{buffer:de,size:1,stride:20,offset:16}]),be=r(q),he=n(q,[{buffer:be,size:2,type:q.FLOAT}]),_e=a(q,1,256,q.RGBA,q.UNSIGNED_BYTE);_e.minFilter=q.LINEAR,_e.magFilter=q.LINEAR;var Ce=new O(q,[0,0],[[0,0,0],[0,0,0]],ie,H,oe,le,_e,ee,Q,de,fe,be,he,[0,0,0]),Ee={levels:[[],[],[]]};for(var Ae in V)Ee[Ae]=V[Ae];return Ee.colormap=Ee.colormap||"jet",Ce.update(Ee),Ce};var e=m("bit-twiddle"),r=m("gl-buffer"),n=m("gl-vao"),a=m("gl-texture2d"),t=m("typedarray-pool"),p=m("colormap"),s=m("ndarray-ops"),i=m("ndarray-pack"),f=m("ndarray"),c=m("surface-nets"),l=m("gl-mat4/multiply"),h=m("gl-mat4/invert"),d=m("binary-search-bounds"),o=m("ndarray-gradient"),x=m("./lib/shaders"),u=x.createShader,T=x.createContourShader,_=x.createPickShader,w=x.createPickContourShader,M=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function R(V,q,ie,H,ee){this.position=V,this.index=q,this.uv=ie,this.level=H,this.dataCoordinate=ee}function O(V,q,ie,H,ee,Q,oe,le,de,fe,be,he,_e,Ce,Ee){this.gl=V,this.shape=q,this.bounds=ie,this.objectOffset=Ee,this.intensityBounds=[],this._shader=H,this._pickShader=ee,this._coordinateBuffer=Q,this._vao=oe,this._colorMap=le,this._contourShader=de,this._contourPickShader=fe,this._contourBuffer=be,this._contourVAO=he,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new R([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=_e,this._dynamicVAO=Ce,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(t.mallocFloat(1024),[0,0]),f(t.mallocFloat(1024),[0,0]),f(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var V=0;V<3;++V){var q=S[V],ie=(V+2)%3;q[(V+1)%3+0]=1,q[ie+3]=1,q[V+6]=1}}();var C=O.prototype;C.genColormap=function(V,q){var ie=!1,H=i([p({colormap:V,nshades:256,format:"rgba"}).map(function(ee,Q){var oe=q?function(le,de){if(!de||!de.length)return 1;for(var fe=0;fe<de.length;++fe){if(de.length<2)return 1;if(de[fe][0]===le)return de[fe][1];if(de[fe][0]>le&&fe>0){var be=(de[fe][0]-le)/(de[fe][0]-de[fe-1][0]);return de[fe][1]*(1-be)+be*de[fe-1][1]}}return 1}(Q/255,q):ee[3];return oe<1&&(ie=!0),[ee[0],ee[1],ee[2],255*oe]})]);return s.divseq(H,255),this.hasAlphaScale=ie,H},C.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},C.isOpaque=function(){return!this.isTransparent()},C.pickSlots=1,C.setPickBase=function(V){this.pickId=V};var D=[0,0,0],B={showSurface:!1,showContour:!1,projections:[M.slice(),M.slice(),M.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(V,q){var ie,H,ee,Q=q.axes&&q.axes.lastCubeProps.axis||D,oe=q.showSurface,le=q.showContour;for(ie=0;ie<3;++ie)for(oe=oe||q.surfaceProject[ie],H=0;H<3;++H)le=le||q.contourProject[ie][H];for(ie=0;ie<3;++ie){var de=B.projections[ie];for(H=0;H<16;++H)de[H]=0;for(H=0;H<4;++H)de[5*H]=1;de[5*ie]=0,de[12+ie]=q.axesBounds[+(Q[ie]>0)][ie],l(de,V.model,de);var fe=B.clipBounds[ie];for(ee=0;ee<2;++ee)for(H=0;H<3;++H)fe[ee][H]=V.clipBounds[ee][H];fe[0][ie]=-1e8,fe[1][ie]=1e8}return B.showSurface=oe,B.showContour=le,B}var Y={model:M,view:M,projection:M,inverseModel:M.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},G=M.slice(),J=[1,0,0,0,1,0,0,0,1];function te(V,q){V=V||{};var ie=this.gl;ie.disable(ie.CULL_FACE),this._colorMap.bind(0);var H=Y;H.model=V.model||M,H.view=V.view||M,H.projection=V.projection||M,H.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],H.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],H.objectOffset=this.objectOffset,H.contourColor=this.contourColor[0],H.inverseModel=h(H.inverseModel,H.model);for(var ee=0;ee<2;++ee)for(var Q=H.clipBounds[ee],oe=0;oe<3;++oe)Q[oe]=Math.min(Math.max(this.clipBounds[ee][oe],-1e8),1e8);H.kambient=this.ambientLight,H.kdiffuse=this.diffuseLight,H.kspecular=this.specularLight,H.roughness=this.roughness,H.fresnel=this.fresnel,H.opacity=this.opacity,H.height=0,H.permutation=J,H.vertexColor=this.vertexColor;var le=G;for(l(le,H.view,H.model),l(le,H.projection,le),h(le,le),ee=0;ee<3;++ee)H.eyePosition[ee]=le[12+ee]/le[15];var de=le[15];for(ee=0;ee<3;++ee)de+=this.lightPosition[ee]*le[4*ee+3];for(ee=0;ee<3;++ee){var fe=le[12+ee];for(oe=0;oe<3;++oe)fe+=le[4*oe+ee]*this.lightPosition[oe];H.lightPosition[ee]=fe/de}var be=z(H,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=H,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ie.TRIANGLES,this._vertexCount),ee=0;ee<3;++ee)this.surfaceProject[ee]&&this.vertexCount&&(this._shader.uniforms.model=be.projections[ee],this._shader.uniforms.clipBounds=be.clipBounds[ee],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var he=this._contourShader;H.kambient=1,H.kdiffuse=0,H.kspecular=0,H.opacity=1,he.bind(),he.uniforms=H;var _e=this._contourVAO;for(_e.bind(),ee=0;ee<3;++ee)for(he.uniforms.permutation=S[ee],ie.lineWidth(this.contourWidth[ee]*this.pixelRatio),oe=0;oe<this.contourLevels[ee].length;++oe)oe===this.highlightLevel[ee]?(he.uniforms.contourColor=this.highlightColor[ee],he.uniforms.contourTint=this.highlightTint[ee]):0!==oe&&oe-1!==this.highlightLevel[ee]||(he.uniforms.contourColor=this.contourColor[ee],he.uniforms.contourTint=this.contourTint[ee]),this._contourCounts[ee][oe]&&(he.uniforms.height=this.contourLevels[ee][oe],_e.draw(ie.LINES,this._contourCounts[ee][oe],this._contourOffsets[ee][oe]));for(ee=0;ee<3;++ee)for(he.uniforms.model=be.projections[ee],he.uniforms.clipBounds=be.clipBounds[ee],oe=0;oe<3;++oe)if(this.contourProject[ee][oe]){he.uniforms.permutation=S[oe],ie.lineWidth(this.contourWidth[oe]*this.pixelRatio);for(var Ce=0;Ce<this.contourLevels[oe].length;++Ce)Ce===this.highlightLevel[oe]?(he.uniforms.contourColor=this.highlightColor[oe],he.uniforms.contourTint=this.highlightTint[oe]):0!==Ce&&Ce-1!==this.highlightLevel[oe]||(he.uniforms.contourColor=this.contourColor[oe],he.uniforms.contourTint=this.contourTint[oe]),this._contourCounts[oe][Ce]&&(he.uniforms.height=this.contourLevels[oe][Ce],_e.draw(ie.LINES,this._contourCounts[oe][Ce],this._contourOffsets[oe][Ce]))}for(_e.unbind(),(_e=this._dynamicVAO).bind(),ee=0;ee<3;++ee)if(0!==this._dynamicCounts[ee])for(he.uniforms.model=H.model,he.uniforms.clipBounds=H.clipBounds,he.uniforms.permutation=S[ee],ie.lineWidth(this.dynamicWidth[ee]*this.pixelRatio),he.uniforms.contourColor=this.dynamicColor[ee],he.uniforms.contourTint=this.dynamicTint[ee],he.uniforms.height=this.dynamicLevel[ee],_e.draw(ie.LINES,this._dynamicCounts[ee],this._dynamicOffsets[ee]),oe=0;oe<3;++oe)this.contourProject[oe][ee]&&(he.uniforms.model=be.projections[oe],he.uniforms.clipBounds=be.clipBounds[oe],_e.draw(ie.LINES,this._dynamicCounts[ee],this._dynamicOffsets[ee]));_e.unbind()}}C.draw=function(V){return te.call(this,V,!1)},C.drawTransparent=function(V){return te.call(this,V,!0)};var X={model:M,view:M,projection:M,inverseModel:M,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function K(V,q){return Array.isArray(V)?[q(V[0]),q(V[1]),q(V[2])]:[q(V),q(V),q(V)]}function ae(V){return Array.isArray(V)?3===V.length?[V[0],V[1],V[2],1]:[V[0],V[1],V[2],V[3]]:[0,0,0,1]}function U(V){if(Array.isArray(V)){if(Array.isArray(V))return[ae(V[0]),ae(V[1]),ae(V[2])];var q=ae(V);return[q.slice(),q.slice(),q.slice()]}}C.drawPick=function(V){V=V||{};var q=this.gl;q.disable(q.CULL_FACE);var ie=X;ie.model=V.model||M,ie.view=V.view||M,ie.projection=V.projection||M,ie.shape=this._field[2].shape,ie.pickId=this.pickId/255,ie.lowerBound=this.bounds[0],ie.upperBound=this.bounds[1],ie.objectOffset=this.objectOffset,ie.permutation=J;for(var H=0;H<2;++H)for(var ee=ie.clipBounds[H],Q=0;Q<3;++Q)ee[Q]=Math.min(Math.max(this.clipBounds[H][Q],-1e8),1e8);var oe=z(ie,this);if(oe.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ie,this._vao.bind(),this._vao.draw(q.TRIANGLES,this._vertexCount),H=0;H<3;++H)this.surfaceProject[H]&&(this._pickShader.uniforms.model=oe.projections[H],this._pickShader.uniforms.clipBounds=oe.clipBounds[H],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(oe.showContour){var le=this._contourPickShader;le.bind(),le.uniforms=ie;var de=this._contourVAO;for(de.bind(),Q=0;Q<3;++Q)for(q.lineWidth(this.contourWidth[Q]*this.pixelRatio),le.uniforms.permutation=S[Q],H=0;H<this.contourLevels[Q].length;++H)this._contourCounts[Q][H]&&(le.uniforms.height=this.contourLevels[Q][H],de.draw(q.LINES,this._contourCounts[Q][H],this._contourOffsets[Q][H]));for(H=0;H<3;++H)for(le.uniforms.model=oe.projections[H],le.uniforms.clipBounds=oe.clipBounds[H],Q=0;Q<3;++Q)if(this.contourProject[H][Q]){le.uniforms.permutation=S[Q],q.lineWidth(this.contourWidth[Q]*this.pixelRatio);for(var fe=0;fe<this.contourLevels[Q].length;++fe)this._contourCounts[Q][fe]&&(le.uniforms.height=this.contourLevels[Q][fe],de.draw(q.LINES,this._contourCounts[Q][fe],this._contourOffsets[Q][fe]))}de.unbind()}},C.pick=function(V){if(!V||V.id!==this.pickId)return null;var q=this._field[2].shape,ie=this._pickResult,H=q[0]*(V.value[0]+(V.value[2]>>4)/16)/255,ee=Math.floor(H),Q=H-ee,oe=q[1]*(V.value[1]+(15&V.value[2])/16)/255,le=Math.floor(oe),de=oe-le;ee+=1,le+=1;var fe=ie.position;fe[0]=fe[1]=fe[2]=0;for(var be=0;be<2;++be)for(var he=be?Q:1-Q,_e=0;_e<2;++_e)for(var Ce=ee+be,Ee=le+_e,Ae=he*(_e?de:1-de),ze=0;ze<3;++ze)fe[ze]+=this._field[ze].get(Ce,Ee)*Ae;for(var ve=this._pickResult.level,Te=0;Te<3;++Te)if(ve[Te]=d.le(this.contourLevels[Te],fe[Te]),ve[Te]<0)this.contourLevels[Te].length>0&&(ve[Te]=0);else if(ve[Te]<this.contourLevels[Te].length-1){var De=this.contourLevels[Te][ve[Te]+1];Math.abs(this.contourLevels[Te][ve[Te]]-fe[Te])>Math.abs(De-fe[Te])&&(ve[Te]+=1)}for(ie.index[0]=Q<.5?ee:ee+1,ie.index[1]=de<.5?le:le+1,ie.uv[0]=H/q[0],ie.uv[1]=oe/q[1],ze=0;ze<3;++ze)ie.dataCoordinate[ze]=this._field[ze].get(ie.index[0],ie.index[1]);return ie},C.padField=function(V,q){var ie=q.shape.slice(),H=V.shape.slice();s.assign(V.lo(1,1).hi(ie[0],ie[1]),q),s.assign(V.lo(1).hi(ie[0],1),q.hi(ie[0],1)),s.assign(V.lo(1,H[1]-1).hi(ie[0],1),q.lo(0,ie[1]-1).hi(ie[0],1)),s.assign(V.lo(0,1).hi(1,ie[1]),q.hi(1)),s.assign(V.lo(H[0]-1,1).hi(1,ie[1]),q.lo(ie[0]-1)),V.set(0,0,q.get(0,0)),V.set(0,H[1]-1,q.get(0,ie[1]-1)),V.set(H[0]-1,0,q.get(ie[0]-1,0)),V.set(H[0]-1,H[1]-1,q.get(ie[0]-1,ie[1]-1))},C.update=function(V){this.objectOffset=(V=V||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in V&&(this.contourWidth=K(V.contourWidth,Number)),"showContour"in V&&(this.showContour=K(V.showContour,Boolean)),"showSurface"in V&&(this.showSurface=!!V.showSurface),"contourTint"in V&&(this.contourTint=K(V.contourTint,Boolean)),"contourColor"in V&&(this.contourColor=U(V.contourColor)),"contourProject"in V&&(this.contourProject=K(V.contourProject,function(nn){return K(nn,Boolean)})),"surfaceProject"in V&&(this.surfaceProject=V.surfaceProject),"dynamicColor"in V&&(this.dynamicColor=U(V.dynamicColor)),"dynamicTint"in V&&(this.dynamicTint=K(V.dynamicTint,Number)),"dynamicWidth"in V&&(this.dynamicWidth=K(V.dynamicWidth,Number)),"opacity"in V&&(this.opacity=V.opacity),"opacityscale"in V&&(this.opacityscale=V.opacityscale),"colorBounds"in V&&(this.colorBounds=V.colorBounds),"vertexColor"in V&&(this.vertexColor=V.vertexColor?1:0),"colormap"in V&&this._colorMap.setPixels(this.genColormap(V.colormap,this.opacityscale));var q=V.field||V.coords&&V.coords[2]||null,ie=!1;if(q||(q=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in V||"coords"in V){var H=(q.shape[0]+2)*(q.shape[1]+2);H>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(e.nextPow2(H))),this._field[2]=f(this._field[2].data,[q.shape[0]+2,q.shape[1]+2]),this.padField(this._field[2],q),this.shape=q.shape.slice();for(var ee=this.shape,Q=0;Q<2;++Q)this._field[2].size>this._field[Q].data.length&&(t.freeFloat(this._field[Q].data),this._field[Q].data=t.mallocFloat(this._field[2].size)),this._field[Q]=f(this._field[Q].data,[ee[0]+2,ee[1]+2]);if(V.coords){var oe=V.coords;if(!Array.isArray(oe)||3!==oe.length)throw new Error("gl-surface: invalid coordinates for x/y");for(Q=0;Q<2;++Q){var le=oe[Q];for(_e=0;_e<2;++_e)if(le.shape[_e]!==ee[_e])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Q],le)}}else if(V.ticks){var de=V.ticks;if(!Array.isArray(de)||2!==de.length)throw new Error("gl-surface: invalid ticks");for(Q=0;Q<2;++Q){var fe=de[Q];if((Array.isArray(fe)||fe.length)&&(fe=f(fe)),fe.shape[0]!==ee[Q])throw new Error("gl-surface: invalid tick length");var be=f(fe.data,ee);be.stride[Q]=fe.stride[0],be.stride[1^Q]=0,this.padField(this._field[Q],be)}}else{for(Q=0;Q<2;++Q){var he=[0,0];he[Q]=1,this._field[Q]=f(this._field[Q].data,[ee[0]+2,ee[1]+2],he,0)}this._field[0].set(0,0,0);for(var _e=0;_e<ee[0];++_e)this._field[0].set(_e+1,0,_e);for(this._field[0].set(ee[0]+1,0,ee[0]-1),this._field[1].set(0,0,0),_e=0;_e<ee[1];++_e)this._field[1].set(0,_e+1,_e);this._field[1].set(0,ee[1]+1,ee[1]-1)}var Ce=this._field,Ee=f(t.mallocFloat(3*Ce[2].size*2),[3,ee[0]+2,ee[1]+2,2]);for(Q=0;Q<3;++Q)o(Ee.pick(Q),Ce[Q],"mirror");var Ae=f(t.mallocFloat(3*Ce[2].size),[ee[0]+2,ee[1]+2,3]);for(Q=0;Q<ee[0]+2;++Q)for(_e=0;_e<ee[1]+2;++_e){var ze=Ee.get(0,Q,_e,0),ve=Ee.get(0,Q,_e,1),Te=Ee.get(1,Q,_e,0),Ie=Ee.get(1,Q,_e,1),De=Ee.get(2,Q,_e,0),Fe=Ee.get(2,Q,_e,1),Ue=Te*Fe-Ie*De,qe=De*ve-Fe*ze,je=ze*Ie-ve*Te,rt=Math.sqrt(Ue*Ue+qe*qe+je*je);rt<1e-8?(rt=Math.max(Math.abs(Ue),Math.abs(qe),Math.abs(je)))<1e-8?(je=1,qe=Ue=0,rt=1):rt=1/rt:rt=1/Math.sqrt(rt),Ae.set(Q,_e,0,Ue*rt),Ae.set(Q,_e,1,qe*rt),Ae.set(Q,_e,2,je*rt)}t.free(Ee.data);var Ne=[1/0,1/0,1/0],Be=[-1/0,-1/0,-1/0],We=1/0,Ye=-1/0,mt=t.mallocFloat(e.nextPow2((ee[0]-1)*(ee[1]-1)*6*10)),Tt=0,It=0;for(Q=0;Q<ee[0]-1;++Q)e:for(_e=0;_e<ee[1]-1;++_e){for(var Ct=0;Ct<2;++Ct)for(var ct=0;ct<2;++ct)for(var at=0;at<3;++at){var St=this._field[at].get(1+Q+Ct,1+_e+ct);if(isNaN(St)||!isFinite(St))continue e}for(at=0;at<6;++at){var Xt=Q+I[at][0],tn=_e+I[at][1],hn=this._field[0].get(Xt+1,tn+1),cn=this._field[1].get(Xt+1,tn+1);St=this._field[2].get(Xt+1,tn+1),Ue=Ae.get(Xt+1,tn+1,0),qe=Ae.get(Xt+1,tn+1,1),je=Ae.get(Xt+1,tn+1,2),V.intensity&&(yn=V.intensity.get(Xt,tn));var yn=V.intensity?V.intensity.get(Xt,tn):St+this.objectOffset[2];mt[Tt++]=Xt,mt[Tt++]=tn,mt[Tt++]=hn,mt[Tt++]=cn,mt[Tt++]=St,mt[Tt++]=0,mt[Tt++]=yn,mt[Tt++]=Ue,mt[Tt++]=qe,mt[Tt++]=je,Ne[0]=Math.min(Ne[0],hn+this.objectOffset[0]),Ne[1]=Math.min(Ne[1],cn+this.objectOffset[1]),Ne[2]=Math.min(Ne[2],St+this.objectOffset[2]),We=Math.min(We,yn),Be[0]=Math.max(Be[0],hn+this.objectOffset[0]),Be[1]=Math.max(Be[1],cn+this.objectOffset[1]),Be[2]=Math.max(Be[2],St+this.objectOffset[2]),Ye=Math.max(Ye,yn),It+=1}}for(V.intensityBounds&&(We=+V.intensityBounds[0],Ye=+V.intensityBounds[1]),Q=6;Q<Tt;Q+=10)mt[Q]=(mt[Q]-We)/(Ye-We);this._vertexCount=It,this._coordinateBuffer.update(mt.subarray(0,Tt)),t.freeFloat(mt),t.free(Ae.data),this.bounds=[Ne,Be],this.intensity=V.intensity||this._field[2],this.intensityBounds[0]===We&&this.intensityBounds[1]===Ye||(ie=!0),this.intensityBounds=[We,Ye]}if("levels"in V){var en=V.levels;for(en=Array.isArray(en[0])?en.slice():[[],[],en],Q=0;Q<3;++Q)en[Q]=en[Q].slice(),en[Q].sort(function(nn,Kt){return nn-Kt});for(Q=0;Q<3;++Q)for(_e=0;_e<en[Q].length;++_e)en[Q][_e]-=this.objectOffset[Q];e:for(Q=0;Q<3;++Q){if(en[Q].length!==this.contourLevels[Q].length){ie=!0;break}for(_e=0;_e<en[Q].length;++_e)if(en[Q][_e]!==this.contourLevels[Q][_e]){ie=!0;break e}}this.contourLevels=en}if(ie){Ce=this._field,ee=this.shape;for(var Xe=[],tt=0;tt<3;++tt){var ye=this.contourLevels[tt],ke=[],Ve=[],Je=[0,0,0];for(Q=0;Q<ye.length;++Q){var nt=c(this._field[tt],ye[Q]);ke.push(Xe.length/5|0),It=0;e:for(_e=0;_e<nt.cells.length;++_e){var Ke=nt.cells[_e];for(at=0;at<2;++at){var vt=nt.positions[Ke[at]],gt=vt[0],Ot=0|Math.floor(gt),Vt=gt-Ot,ft=vt[1],bt=0|Math.floor(ft),Wt=ft-bt,Pt=!1;t:for(var Bt=0;Bt<3;++Bt){Je[Bt]=0;var Pe=(tt+Bt+1)%3;for(Ct=0;Ct<2;++Ct){var et=Ct?Vt:1-Vt;for(Xt=0|Math.min(Math.max(Ot+Ct,0),ee[0]),ct=0;ct<2;++ct){var dt=ct?Wt:1-Wt;if(tn=0|Math.min(Math.max(bt+ct,0),ee[1]),St=Bt<2?this._field[Pe].get(Xt,tn):(this.intensity.get(Xt,tn)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(St)||isNaN(St)){Pt=!0;break t}Je[Bt]+=et*dt*St}}}if(Pt){if(at>0){for(var Rt=0;Rt<5;++Rt)Xe.pop();It-=1}continue e}Xe.push(Je[0],Je[1],vt[0],vt[1],Je[2]),It+=1}}Ve.push(It)}this._contourOffsets[tt]=ke,this._contourCounts[tt]=Ve}var Yt=t.mallocFloat(Xe.length);for(Q=0;Q<Xe.length;++Q)Yt[Q]=Xe[Q];this._contourBuffer.update(Yt),t.freeFloat(Yt)}},C.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var V=0;V<3;++V)t.freeFloat(this._field[V].data)},C.highlight=function(V){var q,ie;if(!V)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(q=0;q<3;++q)this.highlightLevel[q]=this.enableHighlight[q]?V.level[q]:-1;for(ie=this.snapToData?V.dataCoordinate:V.position,q=0;q<3;++q)ie[q]-=this.objectOffset[q];if(this.enableDynamic[0]&&ie[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ie[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ie[2]!==this.dynamicLevel[2]){for(var H=0,ee=this.shape,Q=t.mallocFloat(12*ee[0]*ee[1]),oe=0;oe<3;++oe)if(this.enableDynamic[oe]){this.dynamicLevel[oe]=ie[oe];var be=this._field[(oe+1)%3],he=this._field[(oe+2)%3],_e=c(this._field[oe],ie[oe]),Ce=_e.cells,Ee=_e.positions;for(this._dynamicOffsets[oe]=H,q=0;q<Ce.length;++q)for(var Ae=Ce[q],ze=0;ze<2;++ze){var ve=Ee[Ae[ze]],Te=+ve[0],Ie=0|Te,De=0|Math.min(Ie+1,ee[0]),Fe=Te-Ie,Ue=1-Fe,qe=+ve[1],je=0|qe,rt=0|Math.min(je+1,ee[1]),Ne=qe-je,Be=1-Ne,We=Ue*Be,Ye=Ue*Ne,lt=Fe*Be,mt=Fe*Ne,Tt=We*be.get(Ie,je)+Ye*be.get(Ie,rt)+lt*be.get(De,je)+mt*be.get(De,rt),It=We*he.get(Ie,je)+Ye*he.get(Ie,rt)+lt*he.get(De,je)+mt*he.get(De,rt);if(isNaN(Tt)||isNaN(It)){ze&&(H-=1);break}Q[2*H+0]=Tt,Q[2*H+1]=It,H+=1}this._dynamicCounts[oe]=H-this._dynamicOffsets[oe]}else this.dynamicLevel[oe]=NaN,this._dynamicCounts[oe]=0;this._dynamicBuffer.update(Q.subarray(0,2*H)),t.freeFloat(Q)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(m,b,y){"use strict";var e=m("ndarray"),r=m("ndarray-ops"),n=m("typedarray-pool");b.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||s(_),"number"==typeof arguments[1])return x(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var w=arguments[1],M=i(w)?w:w.raw;if(M)return u(_,M,0|w.width,0|w.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(w.shape&&w.data&&w.stride)return T(_,w)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,t=null,p=null;function s(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],t=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],p=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function i(_){return typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement||typeof ImageData<"u"&&_ instanceof ImageData}var f=function(_,w){r.muls(_,w,255)};function c(_,w,M){var I=_.gl,S=I.getParameter(I.MAX_TEXTURE_SIZE);if(w<0||w>S||M<0||M>S)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[w,M],_.bind(),I.texImage2D(I.TEXTURE_2D,0,_.format,w,M,0,_.format,_.type,null),_._mipLevels=[0],_}function l(_,w,M,I,S,R){this.gl=_,this.handle=w,this.format=S,this.type=R,this._shape=[M,I],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var O=this,C=[this._wrapS,this._wrapT];Object.defineProperties(C,[{get:function(){return O._wrapS},set:function(B){return O.wrapS=B}},{get:function(){return O._wrapT},set:function(B){return O.wrapT=B}}]),this._wrapVector=C;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return O._shape[0]},set:function(B){return O.width=B}},{get:function(){return O._shape[1]},set:function(B){return O.height=B}}]),this._shapeVector=D}var h=l.prototype;function d(_,w){return 3===_.length?1===w[2]&&w[1]===_[0]*_[2]&&w[0]===_[2]:1===w[0]&&w[1]===_[0]}function o(_){var w=_.createTexture();return _.bindTexture(_.TEXTURE_2D,w),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),w}function x(_,w,M,I,S){var R=_.getParameter(_.MAX_TEXTURE_SIZE);if(w<0||w>R||M<0||M>R)throw new Error("gl-texture2d: Invalid texture shape");if(S===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var O=o(_);return _.texImage2D(_.TEXTURE_2D,0,I,w,M,0,I,S,null),new l(_,O,w,M,I,S)}function u(_,w,M,I,S,R){var O=o(_);return _.texImage2D(_.TEXTURE_2D,0,S,S,R,w),new l(_,O,M,I,S,R)}function T(_,w){var M=w.dtype,I=w.shape.slice(),S=_.getParameter(_.MAX_TEXTURE_SIZE);if(I[0]<0||I[0]>S||I[1]<0||I[1]>S)throw new Error("gl-texture2d: Invalid texture size");var R=d(I,w.stride.slice()),O=0;"float32"===M?O=_.FLOAT:"float64"===M?(O=_.FLOAT,R=!1,M="float32"):"uint8"===M?O=_.UNSIGNED_BYTE:(O=_.UNSIGNED_BYTE,R=!1,M="uint8");var C,D,B=0;if(2===I.length)B=_.LUMINANCE,w=e(w.data,I=[I[0],I[1],1],[w.stride[0],w.stride[1],1],w.offset);else{if(3!==I.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===I[2])B=_.ALPHA;else if(2===I[2])B=_.LUMINANCE_ALPHA;else if(3===I[2])B=_.RGB;else{if(4!==I[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");B=_.RGBA}}O!==_.FLOAT||_.getExtension("OES_texture_float")||(O=_.UNSIGNED_BYTE,R=!1);var z=w.size;if(R)C=0===w.offset&&w.data.length===z?w.data:w.data.subarray(w.offset,w.offset+z);else{var Y=[I[2],I[2]*I[0],1];D=n.malloc(z,M);var G=e(D,I,Y,0);"float32"!==M&&"float64"!==M||O!==_.UNSIGNED_BYTE?r.assign(G,w):f(G,w),C=D.subarray(0,z)}var J=o(_);return _.texImage2D(_.TEXTURE_2D,0,B,I[0],I[1],0,B,O,C),R||n.free(D),new l(_,J,I[0],I[1],B,O)}Object.defineProperties(h,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var w=this.gl;if(this.type===w.FLOAT&&a.indexOf(_)>=0&&(w.getExtension("OES_texture_float_linear")||(_=w.NEAREST)),t.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var w=this.gl;if(this.type===w.FLOAT&&a.indexOf(_)>=0&&(w.getExtension("OES_texture_float_linear")||(_=w.NEAREST)),t.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var w=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),w!==this._anisoSamples){var M=this.gl.getExtension("EXT_texture_filter_anisotropic");M&&this.gl.texParameterf(this.gl.TEXTURE_2D,M.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),p.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),p.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),2!==_.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var w=0;w<2;++w)if(p.indexOf(_[w])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var M=this.gl;return this.bind(),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,this._wrapS),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(2!==_.length)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return c(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return c(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return c(this,this._shape[0],_|=0),_}}}),h.bind=function(_){var w=this.gl;return void 0!==_&&w.activeTexture(w.TEXTURE0+(0|_)),w.bindTexture(w.TEXTURE_2D,this.handle),void 0!==_?0|_:w.getParameter(w.ACTIVE_TEXTURE)-w.TEXTURE0},h.dispose=function(){this.gl.deleteTexture(this.handle)},h.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),w=0;_>0;++w,_>>>=1)this._mipLevels.indexOf(w)<0&&this._mipLevels.push(w)},h.setPixels=function(_,w,M,I){var S=this.gl;this.bind(),Array.isArray(w)?(I=M,M=0|w[1],w=0|w[0]):(w=w||0,M=M||0),I=I||0;var R=i(_)?_:_.raw;if(R)this._mipLevels.indexOf(I)<0?(S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,this.type,R),this._mipLevels.push(I)):S.texSubImage2D(S.TEXTURE_2D,I,w,M,this.format,this.type,R);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||w+_.shape[1]>this._shape[1]>>>I||M+_.shape[0]>this._shape[0]>>>I||w<0||M<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(O,C,D,B,z,Y,G,J){var te=J.dtype,X=J.shape.slice();if(X.length<2||X.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var K=0,ae=0,U=d(X,J.stride.slice());if("float32"===te?K=O.FLOAT:"float64"===te?(K=O.FLOAT,U=!1,te="float32"):"uint8"===te?K=O.UNSIGNED_BYTE:(K=O.UNSIGNED_BYTE,U=!1,te="uint8"),2===X.length)ae=O.LUMINANCE,J=e(J.data,X=[X[0],X[1],1],[J.stride[0],J.stride[1],1],J.offset);else{if(3!==X.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===X[2])ae=O.ALPHA;else if(2===X[2])ae=O.LUMINANCE_ALPHA;else if(3===X[2])ae=O.RGB;else{if(4!==X[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");ae=O.RGBA}}if(ae!==O.LUMINANCE&&ae!==O.ALPHA||z!==O.LUMINANCE&&z!==O.ALPHA||(ae=z),ae!==z)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var V=J.size,q=G.indexOf(B)<0;if(q&&G.push(B),K===Y&&U)0===J.offset&&J.data.length===V?q?O.texImage2D(O.TEXTURE_2D,B,z,X[0],X[1],0,z,Y,J.data):O.texSubImage2D(O.TEXTURE_2D,B,C,D,X[0],X[1],z,Y,J.data):q?O.texImage2D(O.TEXTURE_2D,B,z,X[0],X[1],0,z,Y,J.data.subarray(J.offset,J.offset+V)):O.texSubImage2D(O.TEXTURE_2D,B,C,D,X[0],X[1],z,Y,J.data.subarray(J.offset,J.offset+V));else{var ie;ie=Y===O.FLOAT?n.mallocFloat32(V):n.mallocUint8(V);var H=e(ie,X,[X[2],X[2]*X[0],1]);K===O.FLOAT&&Y===O.UNSIGNED_BYTE?f(H,J):r.assign(H,J),q?O.texImage2D(O.TEXTURE_2D,B,z,X[0],X[1],0,z,Y,ie.subarray(0,V)):O.texSubImage2D(O.TEXTURE_2D,B,C,D,X[0],X[1],z,Y,ie.subarray(0,V)),Y===O.FLOAT?n.freeFloat32(ie):n.freeUint8(ie)}}(S,w,M,I,this.format,this.type,this._mipLevels,_)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(m,b,y){"use strict";b.exports=function(e,r,n){r?r.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var t=0;t<n.length;++t){var p=n[t];if(p.buffer){var i=p.size||4,f=p.type||e.FLOAT,c=!!p.normalized,l=p.stride||0,h=p.offset||0;p.buffer.bind(),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,i,f,c,l,h)}else{if("number"==typeof p)e.vertexAttrib1f(t,p);else if(1===p.length)e.vertexAttrib1f(t,p[0]);else if(2===p.length)e.vertexAttrib2f(t,p[0],p[1]);else if(3===p.length)e.vertexAttrib3f(t,p[0],p[1],p[2]);else{if(4!==p.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(t,p[0],p[1],p[2],p[3])}e.disableVertexAttribArray(t)}}for(;t<a;++t)e.disableVertexAttribArray(t)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),t=0;t<a;++t)e.disableVertexAttribArray(t)}},{}],148:[function(m,b,y){"use strict";var e=m("./do-bind.js");function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,a,t){this._elements=a,this._attributes=n,this._elementsType=t||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,a,t){t=t||0;var p=this.gl;this._elements?p.drawElements(n,a,this._elementsType,t):p.drawArrays(n,t,a)},b.exports=function(n){return new r(n)}},{"./do-bind.js":147}],149:[function(m,b,y){"use strict";var e=m("./do-bind.js");function r(a,t,p,s,i,f){this.location=a,this.dimension=t,this.a=p,this.b=s,this.c=i,this.d=f}function n(a,t,p){this.gl=a,this._ext=t,this.handle=p,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}r.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(a,t,p){if(this.bind(),e(this.gl,t,a),this.unbind(),this._attribs.length=0,a)for(var s=0;s<a.length;++s){var i=a[s];"number"==typeof i?this._attribs.push(new r(s,1,i)):Array.isArray(i)&&this._attribs.push(new r(s,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!t,this._elementsType=p||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(a,t,p){p=p||0;var s=this.gl;this._useElements?s.drawElements(a,t,this._elementsType,p):s.drawArrays(a,p,t)},b.exports=function(a,t){return new n(a,t,t.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(m,b,y){"use strict";var e=m("./lib/vao-native.js"),r=m("./lib/vao-emulated.js");function n(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}b.exports=function(a,t,p,s){var i,f=a.createVertexArray?new n(a):a.getExtension("OES_vertex_array_object");return(i=f?e(a,f):r(a)).update(t,p,s),i}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}},{}],152:[function(m,b,y){b.exports=function(a,t){var p=e(a[0],a[1],a[2]),s=e(t[0],t[1],t[2]);r(p,p),r(s,s);var i=n(p,s);return i>1?0:Math.acos(i)};var e=m("./fromValues"),r=m("./normalize"),n=m("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(m,b,y){b.exports=function(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}},{}],154:[function(m,b,y){b.exports=function(e){var r=new Float32Array(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},{}],155:[function(m,b,y){b.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},{}],156:[function(m,b,y){b.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],s=n[0],i=n[1],f=n[2];return e[0]=t*f-p*i,e[1]=p*s-a*f,e[2]=a*i-t*s,e}},{}],158:[function(m,b,y){b.exports=m("./distance")},{"./distance":159}],159:[function(m,b,y){b.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2];return Math.sqrt(n*n+a*a+t*t)}},{}],160:[function(m,b,y){b.exports=m("./divide")},{"./divide":161}],161:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e}},{}],162:[function(m,b,y){b.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}},{}],163:[function(m,b,y){b.exports=1e-6},{}],164:[function(m,b,y){b.exports=function(r,n){var a=r[0],t=r[1],p=r[2],s=n[0],i=n[1],f=n[2];return Math.abs(a-s)<=e*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(t-i)<=e*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(p-f)<=e*Math.max(1,Math.abs(p),Math.abs(f))};var e=m("./epsilon")},{"./epsilon":163}],165:[function(m,b,y){b.exports=function(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}},{}],166:[function(m,b,y){b.exports=function(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}},{}],167:[function(m,b,y){b.exports=function(r,n,a,t,p,s){var i,f;for(n||(n=3),a||(a=0),f=t?Math.min(t*n+a,r.length):r.length,i=a;i<f;i+=n)e[0]=r[i],e[1]=r[i+1],e[2]=r[i+2],p(e,e,s),r[i]=e[0],r[i+1]=e[1],r[i+2]=e[2];return r};var e=m("./create")()},{"./create":156}],168:[function(m,b,y){b.exports=function(e,r,n){var a=new Float32Array(3);return a[0]=e,a[1]=r,a[2]=n,a}},{}],169:[function(m,b,y){b.exports={EPSILON:m("./epsilon"),create:m("./create"),clone:m("./clone"),angle:m("./angle"),fromValues:m("./fromValues"),copy:m("./copy"),set:m("./set"),equals:m("./equals"),exactEquals:m("./exactEquals"),add:m("./add"),subtract:m("./subtract"),sub:m("./sub"),multiply:m("./multiply"),mul:m("./mul"),divide:m("./divide"),div:m("./div"),min:m("./min"),max:m("./max"),floor:m("./floor"),ceil:m("./ceil"),round:m("./round"),scale:m("./scale"),scaleAndAdd:m("./scaleAndAdd"),distance:m("./distance"),dist:m("./dist"),squaredDistance:m("./squaredDistance"),sqrDist:m("./sqrDist"),length:m("./length"),len:m("./len"),squaredLength:m("./squaredLength"),sqrLen:m("./sqrLen"),negate:m("./negate"),inverse:m("./inverse"),normalize:m("./normalize"),dot:m("./dot"),cross:m("./cross"),lerp:m("./lerp"),random:m("./random"),transformMat4:m("./transformMat4"),transformMat3:m("./transformMat3"),transformQuat:m("./transformQuat"),rotateX:m("./rotateX"),rotateY:m("./rotateY"),rotateZ:m("./rotateZ"),forEach:m("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(m,b,y){b.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}},{}],171:[function(m,b,y){b.exports=m("./length")},{"./length":172}],172:[function(m,b,y){b.exports=function(e){var r=e[0],n=e[1],a=e[2];return Math.sqrt(r*r+n*n+a*a)}},{}],173:[function(m,b,y){b.exports=function(e,r,n,a){var t=r[0],p=r[1],s=r[2];return e[0]=t+a*(n[0]-t),e[1]=p+a*(n[1]-p),e[2]=s+a*(n[2]-s),e}},{}],174:[function(m,b,y){b.exports=function(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e}},{}],175:[function(m,b,y){b.exports=function(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e}},{}],176:[function(m,b,y){b.exports=m("./multiply")},{"./multiply":177}],177:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e}},{}],178:[function(m,b,y){b.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}},{}],179:[function(m,b,y){b.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=n*n+a*a+t*t;return p>0&&(p=1/Math.sqrt(p),e[0]=r[0]*p,e[1]=r[1]*p,e[2]=r[2]*p),e}},{}],180:[function(m,b,y){b.exports=function(e,r){r=r||1;var n=2*Math.random()*Math.PI,a=2*Math.random()-1,t=Math.sqrt(1-a*a)*r;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e[2]=a*r,e}},{}],181:[function(m,b,y){b.exports=function(e,r,n,a){var t=n[1],p=n[2],s=r[1]-t,i=r[2]-p,f=Math.sin(a),c=Math.cos(a);return e[0]=r[0],e[1]=t+s*c-i*f,e[2]=p+s*f+i*c,e}},{}],182:[function(m,b,y){b.exports=function(e,r,n,a){var t=n[0],p=n[2],s=r[0]-t,i=r[2]-p,f=Math.sin(a),c=Math.cos(a);return e[0]=t+i*f+s*c,e[1]=r[1],e[2]=p+i*c-s*f,e}},{}],183:[function(m,b,y){b.exports=function(e,r,n,a){var t=n[0],p=n[1],s=r[0]-t,i=r[1]-p,f=Math.sin(a),c=Math.cos(a);return e[0]=t+s*c-i*f,e[1]=p+s*f+i*c,e[2]=r[2],e}},{}],184:[function(m,b,y){b.exports=function(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}},{}],185:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e}},{}],186:[function(m,b,y){b.exports=function(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e}},{}],187:[function(m,b,y){b.exports=function(e,r,n,a){return e[0]=r,e[1]=n,e[2]=a,e}},{}],188:[function(m,b,y){b.exports=m("./squaredDistance")},{"./squaredDistance":190}],189:[function(m,b,y){b.exports=m("./squaredLength")},{"./squaredLength":191}],190:[function(m,b,y){b.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2];return n*n+a*a+t*t}},{}],191:[function(m,b,y){b.exports=function(e){var r=e[0],n=e[1],a=e[2];return r*r+n*n+a*a}},{}],192:[function(m,b,y){b.exports=m("./subtract")},{"./subtract":193}],193:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e}},{}],194:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2];return e[0]=a*n[0]+t*n[3]+p*n[6],e[1]=a*n[1]+t*n[4]+p*n[7],e[2]=a*n[2]+t*n[5]+p*n[8],e}},{}],195:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],s=n[3]*a+n[7]*t+n[11]*p+n[15];return e[0]=(n[0]*a+n[4]*t+n[8]*p+n[12])/(s=s||1),e[1]=(n[1]*a+n[5]*t+n[9]*p+n[13])/s,e[2]=(n[2]*a+n[6]*t+n[10]*p+n[14])/s,e}},{}],196:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],s=n[0],i=n[1],f=n[2],c=n[3],l=c*a+i*p-f*t,h=c*t+f*a-s*p,d=c*p+s*t-i*a,o=-s*a-i*t-f*p;return e[0]=l*c+o*-s+h*-f-d*-i,e[1]=h*c+o*-i+d*-s-l*-f,e[2]=d*c+o*-f+l*-i-h*-s,e}},{}],197:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e}},{}],198:[function(m,b,y){b.exports=function(e){var r=new Float32Array(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},{}],199:[function(m,b,y){b.exports=function(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},{}],200:[function(m,b,y){b.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(m,b,y){b.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2],p=r[3]-e[3];return Math.sqrt(n*n+a*a+t*t+p*p)}},{}],202:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e[3]=r[3]/n[3],e}},{}],203:[function(m,b,y){b.exports=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}},{}],204:[function(m,b,y){b.exports=function(e,r,n,a){var t=new Float32Array(4);return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}},{}],205:[function(m,b,y){b.exports={create:m("./create"),clone:m("./clone"),fromValues:m("./fromValues"),copy:m("./copy"),set:m("./set"),add:m("./add"),subtract:m("./subtract"),multiply:m("./multiply"),divide:m("./divide"),min:m("./min"),max:m("./max"),scale:m("./scale"),scaleAndAdd:m("./scaleAndAdd"),distance:m("./distance"),squaredDistance:m("./squaredDistance"),length:m("./length"),squaredLength:m("./squaredLength"),negate:m("./negate"),inverse:m("./inverse"),normalize:m("./normalize"),dot:m("./dot"),lerp:m("./lerp"),random:m("./random"),transformMat4:m("./transformMat4"),transformQuat:m("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(m,b,y){b.exports=function(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}},{}],207:[function(m,b,y){b.exports=function(e){var r=e[0],n=e[1],a=e[2],t=e[3];return Math.sqrt(r*r+n*n+a*a+t*t)}},{}],208:[function(m,b,y){b.exports=function(e,r,n,a){var t=r[0],p=r[1],s=r[2],i=r[3];return e[0]=t+a*(n[0]-t),e[1]=p+a*(n[1]-p),e[2]=s+a*(n[2]-s),e[3]=i+a*(n[3]-i),e}},{}],209:[function(m,b,y){b.exports=function(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e[3]=Math.max(r[3],n[3]),e}},{}],210:[function(m,b,y){b.exports=function(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e[3]=Math.min(r[3],n[3]),e}},{}],211:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e[3]=r[3]*n[3],e}},{}],212:[function(m,b,y){b.exports=function(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}},{}],213:[function(m,b,y){b.exports=function(e,r){var n=r[0],a=r[1],t=r[2],p=r[3],s=n*n+a*a+t*t+p*p;return s>0&&(s=1/Math.sqrt(s),e[0]=n*s,e[1]=a*s,e[2]=t*s,e[3]=p*s),e}},{}],214:[function(m,b,y){var e=m("./normalize"),r=m("./scale");b.exports=function(n,a){return a=a||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),e(n,n),r(n,n,a),n}},{"./normalize":213,"./scale":215}],215:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e}},{}],216:[function(m,b,y){b.exports=function(e,r,n,a){return e[0]=r[0]+n[0]*a,e[1]=r[1]+n[1]*a,e[2]=r[2]+n[2]*a,e[3]=r[3]+n[3]*a,e}},{}],217:[function(m,b,y){b.exports=function(e,r,n,a,t){return e[0]=r,e[1]=n,e[2]=a,e[3]=t,e}},{}],218:[function(m,b,y){b.exports=function(e,r){var n=r[0]-e[0],a=r[1]-e[1],t=r[2]-e[2],p=r[3]-e[3];return n*n+a*a+t*t+p*p}},{}],219:[function(m,b,y){b.exports=function(e){var r=e[0],n=e[1],a=e[2],t=e[3];return r*r+n*n+a*a+t*t}},{}],220:[function(m,b,y){b.exports=function(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e}},{}],221:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],s=r[3];return e[0]=n[0]*a+n[4]*t+n[8]*p+n[12]*s,e[1]=n[1]*a+n[5]*t+n[9]*p+n[13]*s,e[2]=n[2]*a+n[6]*t+n[10]*p+n[14]*s,e[3]=n[3]*a+n[7]*t+n[11]*p+n[15]*s,e}},{}],222:[function(m,b,y){b.exports=function(e,r,n){var a=r[0],t=r[1],p=r[2],s=n[0],i=n[1],f=n[2],c=n[3],l=c*a+i*p-f*t,h=c*t+f*a-s*p,d=c*p+s*t-i*a,o=-s*a-i*t-f*p;return e[0]=l*c+o*-s+h*-f-d*-i,e[1]=h*c+o*-i+d*-s-l*-f,e[2]=d*c+o*-f+l*-i-h*-s,e[3]=r[3],e}},{}],223:[function(m,b,y){var e=m("glsl-tokenizer"),r=m("atob-lite");b.exports=function(n){for(var a=Array.isArray(n)?n:e(n),t=0;t<a.length;t++){var p=a[t];if("preprocessor"===p.type){var s=p.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var f=s[2];return(s[1]?r(f):f).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(m,b,y){b.exports=function(s){var i,f,c,l=0,h=0,d=999,o=[],x=[],u=1,T=0,_=0,w=!1,M=!1,I="",S=n,R=e;"300 es"===(s=s||{}).version&&(S=t,R=a);var O={},C={};for(l=0;l<S.length;l++)O[S[l]]=!0;for(l=0;l<R.length;l++)C[R[l]]=!0;return function(V){return x=[],null!==V?function(q){var ie;for(l=0,q.toString&&(q=q.toString()),I+=q.replace(/\r\n/g,"\n"),c=I.length;i=I[l],l<c;){switch(ie=l,d){case 0:l="/"===i&&"*"===f?(o.push(i),D(o.join("")),d=999,l+1):(o.push(i),f=i,l+1);break;case 1:case 2:l="\r"!==i&&"\n"!==i||"\\"===f?(o.push(i),f=i,l+1):(D(o.join("")),d=999,l);break;case 3:l=J();break;case 4:l="."===i||/[eE]/.test(i)?(o.push(i),d=5,f=i,l+1):"x"===i&&1===o.length&&"0"===o[0]?(d=11,o.push(i),f=i,l+1):/[^\d]/.test(i)?(D(o.join("")),d=999,l):(o.push(i),f=i,l+1);break;case 11:l=/[^a-fA-F0-9]/.test(i)?(D(o.join("")),d=999,l):(o.push(i),f=i,l+1);break;case 5:"f"===i&&(o.push(i),f=i,l+=1),l=/[eE]/.test(i)?(o.push(i),f=i,l+1):("-"!==i&&"+"!==i||!/[eE]/.test(f))&&/[^\d]/.test(i)?(D(o.join("")),d=999,l):(o.push(i),f=i,l+1);break;case 9999:l=U();break;case 9:l=/[^\s]/g.test(i)?(D(o.join("")),d=999,l):(o.push(i),f=i,l+1);break;case 999:o=o.length?[]:o,l="/"===f&&"*"===i?(_=h+l-1,d=0,f=i,l+1):"/"===f&&"/"===i?(_=h+l-1,d=1,f=i,l+1):"#"===i?(d=2,_=h+l,l):/\s/.test(i)?(d=9,_=h+l,l):(w=/\d/.test(i),M=/[^\w_]/.test(i),_=h+l,d=w?4:M?3:9999,l)}ie!==l&&("\n"===I[ie]?(T=0,++u):++T)}return h+=l,I=I.slice(l),x}(V):(o.length&&D(o.join("")),d=10,D("(eof)"),x)};function D(V){V.length&&x.push({type:p[d],data:V,position:_,line:u,column:T})}function J(){if("."===f&&/\d/.test(i))return d=5,l;if("/"===f&&"*"===i)return d=0,l;if("/"===f&&"/"===i)return d=1,l;if("."===i&&o.length){for(;te(o););return d=5,l}if(";"===i||")"===i||"("===i){if(o.length)for(;te(o););return D(i),d=999,l+1}var V=2===o.length&&"="!==i;if(/[\w_\d\s]/.test(i)||V){for(;te(o););return d=999,l}return o.push(i),f=i,l+1}function te(V){for(var q,ie,H=0;;){if(q=r.indexOf(V.slice(0,V.length+H).join("")),ie=r[q],-1===q){if(H--+V.length>0)continue;ie=V.slice(0,1).join("")}return D(ie),_+=ie.length,(o=o.slice(ie.length)).length}}function U(){if(/[^\d\w_]/.test(i)){var V=o.join("");return d=C[V]?8:O[V]?7:6,D(o.join("")),d=999,l}return o.push(i),f=i,l+1}};var e=m("./lib/literals"),r=m("./lib/operators"),n=m("./lib/builtins"),a=m("./lib/literals-300es"),t=m("./lib/builtins-300es"),p=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(m,b,y){var e=m("./builtins");e=e.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),b.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(m,b,y){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(m,b,y){var e=m("./literals");b.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(m,b,y){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(m,b,y){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(m,b,y){var e=m("./index");b.exports=function(r,n){var a=e(n),t=[];return(t=t.concat(a(r))).concat(a(null))}},{"./index":224}],231:[function(m,b,y){b.exports=function(e){"string"==typeof e&&(e=[e]);for(var r=[].slice.call(arguments,1),n=[],a=0;a<e.length-1;a++)n.push(e[a],r[a]||"");return n.push(e[a]),n.join("")}},{}],232:[function(m,b,y){"use strict";var e=m("is-browser");b.exports=e&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},{"is-browser":236}],233:[function(m,b,y){"use strict";b.exports=function(f,c){var l=f.length;if(0===l)throw new Error("Must have at least d+1 points");var h=f[0].length;if(l<=h)throw new Error("Must input at least d+1 points");var d=f.slice(0,h+1),o=e.apply(void 0,d);if(0===o)throw new Error("Input not in general position");for(var x=new Array(h+1),u=0;u<=h;++u)x[u]=u;o<0&&(x[0]=1,x[1]=0);var T=new n(x,new Array(h+1),!1),_=T.adjacent,w=new Array(h+2);for(u=0;u<=h;++u){for(var M=x.slice(),I=0;I<=h;++I)I===u&&(M[I]=-1);var S=M[0];M[0]=M[1],M[1]=S;var R=new n(M,new Array(h+1),!0);_[u]=R,w[u]=R}for(w[h+1]=T,u=0;u<=h;++u){M=_[u].vertices;var O=_[u].adjacent;for(I=0;I<=h;++I){var C=M[I];if(C<0)O[I]=T;else for(var D=0;D<=h;++D)_[D].vertices.indexOf(C)<0&&(O[I]=_[D])}}var B=new s(h,d,w),z=!!c;for(u=h+1;u<l;++u)B.insert(f[u],z);return B.boundary()};var e=m("robust-orientation"),r=m("simplicial-complex").compareCells;function n(f,c,l){this.vertices=f,this.adjacent=c,this.boundary=l,this.lastVisited=-1}function a(f,c,l){this.vertices=f,this.cell=c,this.index=l}function t(f,c){return r(f.vertices,c.vertices)}n.prototype.flip=function(){var f=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=f;var c=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=c};var p=[];function s(f,c,l){this.dimension=f,this.vertices=c,this.simplices=l,this.interior=l.filter(function(x){return!x.boundary}),this.tuple=new Array(f+1);for(var h=0;h<=f;++h)this.tuple[h]=this.vertices[h];var d,x,o=p[f];o||(o=p[f]=((d=e[f+1])||(d=e),x=d,function(){return x.apply(this,this.tuple)})),this.orient=o}var i=s.prototype;i.handleBoundaryDegeneracy=function(f,c){var l=this.dimension,h=this.vertices.length-1,d=this.tuple,o=this.vertices,x=[f];for(f.lastVisited=-h;x.length>0;)for(var u=(f=x.pop()).adjacent,T=0;T<=l;++T){var _=u[T];if(_.boundary&&!(_.lastVisited<=-h)){for(var w=_.vertices,M=0;M<=l;++M){var I=w[M];d[M]=I<0?c:o[I]}var S=this.orient();if(S>0)return _;_.lastVisited=-h,0===S&&x.push(_)}}return null},i.walk=function(f,c){var l=this.vertices.length-1,h=this.dimension,d=this.vertices,o=this.tuple,x=c?this.interior.length*Math.random()|0:this.interior.length-1,u=this.interior[x];e:for(;!u.boundary;){for(var T=u.vertices,_=u.adjacent,w=0;w<=h;++w)o[w]=d[T[w]];for(u.lastVisited=l,w=0;w<=h;++w){var M=_[w];if(!(M.lastVisited>=l)){var I=o[w];o[w]=f;var S=this.orient();if(o[w]=I,S<0){u=M;continue e}M.lastVisited=M.boundary?-l:l}}return}return u},i.addPeaks=function(f,c){var l=this.vertices.length-1,h=this.dimension,d=this.vertices,o=this.tuple,x=this.interior,u=this.simplices,T=[c];c.lastVisited=l,c.vertices[c.vertices.indexOf(-1)]=l,c.boundary=!1,x.push(c);for(var _=[];T.length>0;){var w=(c=T.pop()).vertices,M=c.adjacent,I=w.indexOf(l);if(!(I<0))for(var S=0;S<=h;++S)if(S!==I){var R=M[S];if(R.boundary&&!(R.lastVisited>=l)){var O=R.vertices;if(R.lastVisited!==-l){for(var C=0,D=0;D<=h;++D)O[D]<0?(C=D,o[D]=f):o[D]=d[O[D]];if(this.orient()>0){O[C]=l,R.boundary=!1,x.push(R),T.push(R),R.lastVisited=l;continue}R.lastVisited=-l}var B=R.adjacent,z=w.slice(),Y=M.slice(),G=new n(z,Y,!0);u.push(G);var J=B.indexOf(c);if(!(J<0))for(B[J]=G,Y[I]=R,z[S]=-1,Y[S]=c,M[S]=G,G.flip(),D=0;D<=h;++D){var te=z[D];if(!(te<0||te===l)){for(var X=new Array(h-1),K=0,ae=0;ae<=h;++ae){var U=z[ae];U<0||ae===D||(X[K++]=U)}_.push(new a(X,G,D))}}}}}for(_.sort(t),S=0;S+1<_.length;S+=2){var V=_[S],q=_[S+1];V.index<0||q.index<0||(V.cell.adjacent[V.index]=q.cell,q.cell.adjacent[q.index]=V.cell)}},i.insert=function(f,c){var l=this.vertices;l.push(f);var h=this.walk(f,c);if(h){for(var d=this.dimension,o=this.tuple,x=0;x<=d;++x){var u=h.vertices[x];o[x]=u<0?f:l[u]}var T=this.orient(o);T<0||(0!==T||(h=this.handleBoundaryDegeneracy(h,f)))&&this.addPeaks(f,h)}},i.boundary=function(){for(var f=this.dimension,c=[],l=this.simplices,h=l.length,d=0;d<h;++d){var o=l[d];if(o.boundary){for(var x=new Array(f),u=o.vertices,T=0,_=0,w=0;w<=f;++w)u[w]>=0?x[T++]=u[w]:_=1&w;if(_===(1&f)){var M=x[0];x[0]=x[1],x[1]=M}c.push(x)}}return c}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(m,b,y){"use strict";var e=m("binary-search-bounds");function r(T,_,w,M,I){this.mid=T,this.left=_,this.right=w,this.leftPoints=M,this.rightPoints=I,this.count=(_?_.count:0)+(w?w.count:0)+M.length}b.exports=function(T){return new x(T&&0!==T.length?o(T):null)};var n=r.prototype;function a(T,_){T.mid=_.mid,T.left=_.left,T.right=_.right,T.leftPoints=_.leftPoints,T.rightPoints=_.rightPoints,T.count=_.count}function t(T,_){var w=o(_);T.mid=w.mid,T.left=w.left,T.right=w.right,T.leftPoints=w.leftPoints,T.rightPoints=w.rightPoints,T.count=w.count}function p(T,_){var w=T.intervals([]);w.push(_),t(T,w)}function s(T,_){var w=T.intervals([]),M=w.indexOf(_);return M<0?0:(w.splice(M,1),t(T,w),1)}function i(T,_,w){for(var M=0;M<T.length&&T[M][0]<=_;++M){var I=w(T[M]);if(I)return I}}function f(T,_,w){for(var M=T.length-1;M>=0&&T[M][1]>=_;--M){var I=w(T[M]);if(I)return I}}function c(T,_){for(var w=0;w<T.length;++w){var M=_(T[w]);if(M)return M}}function l(T,_){return T-_}function h(T,_){return T[0]-_[0]||T[1]-_[1]}function d(T,_){return T[1]-_[1]||T[0]-_[0]}function o(T){if(0===T.length)return null;for(var _=[],w=0;w<T.length;++w)_.push(T[w][0],T[w][1]);_.sort(l);var M=_[_.length>>1],I=[],S=[],R=[];for(w=0;w<T.length;++w){var O=T[w];O[1]<M?I.push(O):M<O[0]?S.push(O):R.push(O)}var C=R,D=R.slice();return C.sort(h),D.sort(d),new r(M,o(I),o(S),C,D)}function x(T){this.root=T}n.intervals=function(T){return T.push.apply(T,this.leftPoints),this.left&&this.left.intervals(T),this.right&&this.right.intervals(T),T},n.insert=function(T){var _=this.count-this.leftPoints.length;if(this.count+=1,T[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?p(this,T):this.left.insert(T):this.left=o([T]);else if(T[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?p(this,T):this.right.insert(T):this.right=o([T]);else{var w=e.ge(this.leftPoints,T,h),M=e.ge(this.rightPoints,T,d);this.leftPoints.splice(w,0,T),this.rightPoints.splice(M,0,T)}},n.remove=function(T){var _=this.count-this.leftPoints;if(T[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?s(this,T):2===(S=this.left.remove(T))?(this.left=null,this.count-=1,1):(1===S&&(this.count-=1),S):0;if(T[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?s(this,T):2===(S=this.right.remove(T))?(this.right=null,this.count-=1,1):(1===S&&(this.count-=1),S):0;if(1===this.count)return this.leftPoints[0]===T?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===T){if(this.left&&this.right){for(var w=this,M=this.left;M.right;)w=M,M=M.right;if(w===this)M.right=this.right;else{var I=this.left,S=this.right;w.count-=M.count,w.right=M.left,M.left=I,M.right=S}a(this,M),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(I=e.ge(this.leftPoints,T,h);I<this.leftPoints.length&&this.leftPoints[I][0]===T[0];++I)if(this.leftPoints[I]===T)for(this.count-=1,this.leftPoints.splice(I,1),S=e.ge(this.rightPoints,T,d);S<this.rightPoints.length&&this.rightPoints[S][1]===T[1];++S)if(this.rightPoints[S]===T)return this.rightPoints.splice(S,1),1;return 0},n.queryPoint=function(T,_){return T<this.mid?this.left&&(w=this.left.queryPoint(T,_))?w:i(this.leftPoints,T,_):T>this.mid?this.right&&(w=this.right.queryPoint(T,_))?w:f(this.rightPoints,T,_):c(this.leftPoints,_);var w},n.queryInterval=function(T,_,w){var M;return T<this.mid&&this.left&&(M=this.left.queryInterval(T,_,w))||_>this.mid&&this.right&&(M=this.right.queryInterval(T,_,w))?M:_<this.mid?i(this.leftPoints,_,w):T>this.mid?f(this.rightPoints,T,w):c(this.leftPoints,w)};var u=x.prototype;u.insert=function(T){this.root?this.root.insert(T):this.root=new r(T[0],null,null,[T],[T])},u.remove=function(T){if(this.root){var _=this.root.remove(T);return 2===_&&(this.root=null),0!==_}return!1},u.queryPoint=function(T,_){if(this.root)return this.root.queryPoint(T,_)},u.queryInterval=function(T,_,w){if(T<=_&&this.root)return this.root.queryInterval(T,_,w)},Object.defineProperty(u,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(u,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(m,b,y){"use strict";b.exports=function(e){for(var r=new Array(e),n=0;n<e;++n)r[n]=n;return r}},{}],236:[function(m,b,y){b.exports=!0},{}],237:[function(m,b,y){function e(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}b.exports=function(r){return null!=r&&(e(r)||"function"==typeof(n=r).readFloatLE&&"function"==typeof n.slice&&e(n.slice(0,0))||!!r._isBuffer);var n}},{}],238:[function(m,b,y){"use strict";b.exports=n,b.exports.isMobile=n,b.exports.default=n;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function n(a){a||(a={});var t=a.ua;if(t||typeof navigator>"u"||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var p=a.tablet?r.test(t):e.test(t);return!p&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(p=!0),p}},{}],239:[function(m,b,y){"use strict";b.exports=function(e){for(var r,n=e.length,a=0;a<n;a++)if(((r=e.charCodeAt(a))<9||r>13)&&32!==r&&133!==r&&160!==r&&5760!==r&&6158!==r&&(r<8192||r>8205)&&8232!==r&&8233!==r&&8239!==r&&8287!==r&&8288!==r&&12288!==r&&65279!==r)return!1;return!0}},{}],240:[function(m,b,y){b.exports=function(e,r,n){return e*(1-n)+r*n}},{}],241:[function(m,b,y){var e=m("./normalize"),r=m("gl-mat4/create"),n=m("gl-mat4/clone"),a=m("gl-mat4/determinant"),t=m("gl-mat4/invert"),p=m("gl-mat4/transpose"),s={length:m("gl-vec3/length"),normalize:m("gl-vec3/normalize"),dot:m("gl-vec3/dot"),cross:m("gl-vec3/cross")},i=r(),f=r(),c=[0,0,0,0],l=[[0,0,0],[0,0,0],[0,0,0]],h=[0,0,0];function d(o,x,u,T,_){o[0]=x[0]*T+u[0]*_,o[1]=x[1]*T+u[1]*_,o[2]=x[2]*T+u[2]*_}b.exports=function(o,x,u,T,_,w){if(x||(x=[0,0,0]),u||(u=[0,0,0]),T||(T=[0,0,0]),_||(_=[0,0,0,1]),w||(w=[0,0,0,1]),!e(i,o)||(n(f,i),f[3]=0,f[7]=0,f[11]=0,f[15]=1,Math.abs(a(f)<1e-8)))return!1;var M,I,S,R,O,C,D,ae,U,B=i[3],z=i[7],Y=i[11],G=i[12],J=i[13],te=i[14],X=i[15];if(0!==B||0!==z||0!==Y){if(c[0]=B,c[1]=z,c[2]=Y,c[3]=X,!t(f,f))return!1;p(f,f),R=(I=c)[0],(M=_)[0]=(S=f)[0]*R+S[4]*(O=I[1])+S[8]*(C=I[2])+S[12]*(D=I[3]),M[1]=S[1]*R+S[5]*O+S[9]*C+S[13]*D,M[2]=S[2]*R+S[6]*O+S[10]*C+S[14]*D,M[3]=S[3]*R+S[7]*O+S[11]*C+S[15]*D}else _[0]=_[1]=_[2]=0,_[3]=1;if(x[0]=G,x[1]=J,x[2]=te,(ae=l)[0][0]=(U=i)[0],ae[0][1]=U[1],ae[0][2]=U[2],ae[1][0]=U[4],ae[1][1]=U[5],ae[1][2]=U[6],ae[2][0]=U[8],ae[2][1]=U[9],ae[2][2]=U[10],u[0]=s.length(l[0]),s.normalize(l[0],l[0]),T[0]=s.dot(l[0],l[1]),d(l[1],l[1],l[0],1,-T[0]),u[1]=s.length(l[1]),s.normalize(l[1],l[1]),T[0]/=u[1],T[1]=s.dot(l[0],l[2]),d(l[2],l[2],l[0],1,-T[1]),T[2]=s.dot(l[1],l[2]),d(l[2],l[2],l[1],1,-T[2]),u[2]=s.length(l[2]),s.normalize(l[2],l[2]),T[1]/=u[2],T[2]/=u[2],s.cross(h,l[1],l[2]),s.dot(l[0],h)<0)for(var K=0;K<3;K++)u[K]*=-1,l[K][0]*=-1,l[K][1]*=-1,l[K][2]*=-1;return w[0]=.5*Math.sqrt(Math.max(1+l[0][0]-l[1][1]-l[2][2],0)),w[1]=.5*Math.sqrt(Math.max(1-l[0][0]+l[1][1]-l[2][2],0)),w[2]=.5*Math.sqrt(Math.max(1-l[0][0]-l[1][1]+l[2][2],0)),w[3]=.5*Math.sqrt(Math.max(1+l[0][0]+l[1][1]+l[2][2],0)),l[2][1]>l[1][2]&&(w[0]=-w[0]),l[0][2]>l[2][0]&&(w[1]=-w[1]),l[1][0]>l[0][1]&&(w[2]=-w[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(m,b,y){b.exports=function(e,r){var n=r[15];if(0===n)return!1;for(var a=1/n,t=0;t<16;t++)e[t]=r[t]*a;return!0}},{}],243:[function(m,b,y){var e=m("gl-vec3/lerp"),r=m("mat4-recompose"),n=m("mat4-decompose"),a=m("gl-mat4/determinant"),t=m("quat-slerp"),p=f(),s=f(),i=f();function f(){return{translate:c(),scale:c(1),skew:c(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function c(l){return[l||0,l||0,l||0]}b.exports=function(l,h,d,o){if(0===a(h)||0===a(d))return!1;var x=n(h,p.translate,p.scale,p.skew,p.perspective,p.quaternion),u=n(d,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!x||!u||(e(i.translate,p.translate,s.translate,o),e(i.skew,p.skew,s.skew,o),e(i.scale,p.scale,s.scale,o),e(i.perspective,p.perspective,s.perspective,o),t(i.quaternion,p.quaternion,s.quaternion,o),r(l,i.translate,i.scale,i.skew,i.perspective,i.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(m,b,y){var e={identity:m("gl-mat4/identity"),translate:m("gl-mat4/translate"),multiply:m("gl-mat4/multiply"),create:m("gl-mat4/create"),scale:m("gl-mat4/scale"),fromRotationTranslation:m("gl-mat4/fromRotationTranslation")},r=(e.create(),e.create());b.exports=function(n,a,t,p,s,i){return e.identity(n),e.fromRotationTranslation(n,i,a),n[3]=s[0],n[7]=s[1],n[11]=s[2],n[15]=s[3],e.identity(r),0!==p[2]&&(r[9]=p[2],e.multiply(n,n,r)),0!==p[1]&&(r[9]=0,r[8]=p[1],e.multiply(n,n,r)),0!==p[0]&&(r[8]=0,r[4]=p[0],e.multiply(n,n,r)),e.scale(n,n,t),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(m,b,y){"use strict";var e=m("binary-search-bounds"),r=m("mat4-interpolate"),n=m("gl-mat4/invert"),a=m("gl-mat4/rotateX"),t=m("gl-mat4/rotateY"),p=m("gl-mat4/rotateZ"),s=m("gl-mat4/lookAt"),i=m("gl-mat4/translate"),f=(m("gl-mat4/scale"),m("gl-vec3/normalize")),c=[0,0,0];function l(o){this._components=o.slice(),this._time=[0],this.prevMatrix=o.slice(),this.nextMatrix=o.slice(),this.computedMatrix=o.slice(),this.computedInverse=o.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}b.exports=function(o){return new l((o=o||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var h=l.prototype;h.recalcMatrix=function(o){var x=this._time,u=e.le(x,o),T=this.computedMatrix;if(!(u<0)){var _=this._components;if(u===x.length-1)for(var w=16*u,M=0;M<16;++M)T[M]=_[w++];else{var I=x[u+1]-x[u],S=(w=16*u,this.prevMatrix),R=!0;for(M=0;M<16;++M)S[M]=_[w++];var O=this.nextMatrix;for(M=0;M<16;++M)O[M]=_[w++],R=R&&S[M]===O[M];if(I<1e-6||R)for(M=0;M<16;++M)T[M]=S[M];else r(T,S,O,(o-x[u])/I)}var C=this.computedUp;C[0]=T[1],C[1]=T[5],C[2]=T[9],f(C,C);var D=this.computedInverse;n(D,T);var B=this.computedEye,z=D[15];B[0]=D[12]/z,B[1]=D[13]/z,B[2]=D[14]/z;var Y=this.computedCenter,G=Math.exp(this.computedRadius[0]);for(M=0;M<3;++M)Y[M]=B[M]-T[2+4*M]*G}},h.idle=function(o){if(!(o<this.lastT())){for(var x=this._components,u=x.length-16,T=0;T<16;++T)x.push(x[u++]);this._time.push(o)}},h.flush=function(o){var x=e.gt(this._time,o)-2;x<0||(this._time.splice(0,x),this._components.splice(0,16*x))},h.lastT=function(){return this._time[this._time.length-1]},h.lookAt=function(o,x,u,T){this.recalcMatrix(o),this.setMatrix(o,s(this.computedMatrix,x=x||this.computedEye,u=u||c,T=T||this.computedUp));for(var _=0,w=0;w<3;++w)_+=Math.pow(u[w]-x[w],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},h.rotate=function(o,x,u,T){this.recalcMatrix(o);var _=this.computedInverse;x&&t(_,_,x),u&&a(_,_,u),T&&p(_,_,T),this.setMatrix(o,n(this.computedMatrix,_))};var d=[0,0,0];h.pan=function(o,x,u,T){d[0]=-(x||0),d[1]=-(u||0),d[2]=-(T||0),this.recalcMatrix(o);var _=this.computedInverse;i(_,_,d),this.setMatrix(o,n(_,_))},h.translate=function(o,x,u,T){d[0]=x||0,d[1]=u||0,d[2]=T||0,this.recalcMatrix(o);var _=this.computedMatrix;i(_,_,d),this.setMatrix(o,_)},h.setMatrix=function(o,x){if(!(o<this.lastT())){this._time.push(o);for(var u=0;u<16;++u)this._components.push(x[u])}},h.setDistance=function(o,x){this.computedRadius[0]=x},h.setDistanceLimits=function(o,x){var u=this._limits;u[0]=o,u[1]=x},h.getDistanceLimits=function(o){var x=this._limits;return o?(o[0]=x[0],o[1]=x[1],o):x}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(m,b,y){"use strict";b.exports=function(r){var n=r.length;if(n<3){for(var a=new Array(n),t=0;t<n;++t)a[t]=t;return 2===n&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:a}var p=new Array(n);for(t=0;t<n;++t)p[t]=t;p.sort(function(x,u){return r[x][0]-r[u][0]||r[x][1]-r[u][1]});var s=[p[0],p[1]],i=[p[0],p[1]];for(t=2;t<n;++t){for(var f=p[t],c=r[f],l=s.length;l>1&&e(r[s[l-2]],r[s[l-1]],c)<=0;)l-=1,s.pop();for(s.push(f),l=i.length;l>1&&e(r[i[l-2]],r[i[l-1]],c)>=0;)l-=1,i.pop();i.push(f)}a=new Array(i.length+s.length-2);for(var h=0,d=(t=0,s.length);t<d;++t)a[h++]=s[t];for(var o=i.length-2;o>0;--o)a[h++]=i[o];return a};var e=m("robust-orientation")[3]},{"robust-orientation":284}],247:[function(m,b,y){"use strict";b.exports=function(r,n){n||(n=r,r=window);var a=0,t=0,p=0,s={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function f(w){var M=!1;return"altKey"in w&&(M=M||w.altKey!==s.alt,s.alt=!!w.altKey),"shiftKey"in w&&(M=M||w.shiftKey!==s.shift,s.shift=!!w.shiftKey),"ctrlKey"in w&&(M=M||w.ctrlKey!==s.control,s.control=!!w.ctrlKey),"metaKey"in w&&(M=M||w.metaKey!==s.meta,s.meta=!!w.metaKey),M}function c(w,M){var I=e.x(M),S=e.y(M);"buttons"in M&&(w=0|M.buttons),(w!==a||I!==t||S!==p||f(M))&&(a=0|w,t=I||0,p=S||0,n&&n(a,t,p,s))}function l(w){c(0,w)}function h(){(a||t||p||s.shift||s.alt||s.meta||s.control)&&(t=p=0,a=0,s.shift=s.alt=s.control=s.meta=!1,n&&n(0,0,0,s))}function d(w){f(w)&&n&&n(a,t,p,s)}function o(w){0===e.buttons(w)?c(0,w):c(a,w)}function x(w){c(a|e.buttons(w),w)}function u(w){c(a&~e.buttons(w),w)}function T(){i||(i=!0,r.addEventListener("mousemove",o),r.addEventListener("mousedown",x),r.addEventListener("mouseup",u),r.addEventListener("mouseleave",l),r.addEventListener("mouseenter",l),r.addEventListener("mouseout",l),r.addEventListener("mouseover",l),r.addEventListener("blur",h),r.addEventListener("keyup",d),r.addEventListener("keydown",d),r.addEventListener("keypress",d),r!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}T();var _={element:r};return Object.defineProperties(_,{enabled:{get:function(){return i},set:function(w){w?T():!i||(i=!1,r.removeEventListener("mousemove",o),r.removeEventListener("mousedown",x),r.removeEventListener("mouseup",u),r.removeEventListener("mouseleave",l),r.removeEventListener("mouseenter",l),r.removeEventListener("mouseout",l),r.removeEventListener("mouseover",l),r.removeEventListener("blur",h),r.removeEventListener("keyup",d),r.removeEventListener("keydown",d),r.removeEventListener("keypress",d),r!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return t},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),_};var e=m("mouse-event")},{"mouse-event":249}],248:[function(m,b,y){var e={left:0,top:0};b.exports=function(r,n,a){n=n||r.currentTarget||r.srcElement,Array.isArray(a)||(a=[0,0]);var i,t=r.clientX||0,p=r.clientY||0,s=(i=n)===window||i===document||i===document.body?e:i.getBoundingClientRect();return a[0]=t-s.left,a[1]=p-s.top,a}},{}],249:[function(m,b,y){"use strict";function e(r){return r.target||r.srcElement||window}y.buttons=function(r){if("object"==typeof r){if("buttons"in r)return r.buttons;if("which"in r){if(2===(n=r.which))return 4;if(3===n)return 2;if(n>0)return 1<<n-1}else if("button"in r){var n;if(1===(n=r.button))return 4;if(2===n)return 2;if(n>=0)return 1<<n}}return 0},y.element=e,y.x=function(r){if("object"==typeof r){if("offsetX"in r)return r.offsetX;var n=e(r).getBoundingClientRect();return r.clientX-n.left}return 0},y.y=function(r){if("object"==typeof r){if("offsetY"in r)return r.offsetY;var n=e(r).getBoundingClientRect();return r.clientY-n.top}return 0}},{}],250:[function(m,b,y){"use strict";var e=m("to-px");b.exports=function(r,n,a){"function"==typeof r&&(a=!!n,n=r,r=window);var t=e("ex",r),p=function(s){a&&s.preventDefault();var i=s.deltaX||0,f=s.deltaY||0,c=s.deltaZ||0,l=1;switch(s.deltaMode){case 1:l=t;break;case 2:l=window.innerHeight}if(f*=l,c*=l,(i*=l)||f||c)return n(i,f,c,s)};return r.addEventListener("wheel",p),p}},{"to-px":304}],251:[function(m,b,y){"use strict";var e=m("typedarray-pool");b.exports=function(n){function a(l){throw new Error("ndarray-extract-contour: "+l)}"object"!=typeof n&&a("Must specify arguments");var t=n.order;Array.isArray(t)||a("Must specify order");var l,h,d,T,p=n.arrayArguments||1;p<1&&a("Must have at least one array argument"),(n.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof n.vertex&&a("Must specify vertex creation function"),"function"!=typeof n.cell&&a("Must specify cell creation function"),"function"!=typeof n.phase&&a("Must specify phase function");for(var i=n.getters||[],f=new Array(p),c=0;c<p;++c)f[c]=i.indexOf(c)>=0;return l=n.vertex,h=n.cell,d=n.phase,T=[f,t].join(","),(0,r[T])(l,h,d,e.mallocUint32,e.freeUint32)};var r={"false,0,1":function(n,a,t,p,s){return function(i,f,c,l){var h,d=0|i.shape[0],o=0|i.shape[1],x=i.data,T=0|i.stride[0],_=0|i.stride[1],w=0|i.offset,M=0|-T,I=0,S=0|-_,R=0,O=-T-_|0,C=0,D=0|T,B=_-T*d|0,z=0,Y=0,G=0,J=2*d|0,te=p(J),X=p(J),K=0,ae=0,U=-1,V=-1,q=0,ie=0|-d,H=0|d,ee=0,Q=-d-1|0,oe=d-1|0,le=0,de=0,fe=0;for(z=0;z<d;++z)te[K++]=t(x[w],f,c,l),w+=D;if(w+=B,o>0){if(Y=1,te[K++]=t(x[w],f,c,l),w+=D,d>0)for(z=1,ae=te[K]=t(h=x[w],f,c,l),ee=te[K+ie],le=te[K+Q],ae===(q=te[K+U])&&ae===ee&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,q,ee,le,f,c,l),de=X[K]=G++),K+=1,w+=D,z=2;z<d;++z)ae=te[K]=t(h=x[w],f,c,l),ee=te[K+ie],le=te[K+Q],ae===(q=te[K+U])&&ae===ee&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,q,ee,le,f,c,l),de=X[K]=G++,le!==q&&a(X[K+U],de,C,I,le,q,f,c,l)),K+=1,w+=D;for(w+=B,K=0,fe=U,U=V,V=fe,fe=ie,ie=H,H=fe,fe=Q,Q=oe,oe=fe,Y=2;Y<o;++Y){if(te[K++]=t(x[w],f,c,l),w+=D,d>0)for(z=1,ae=te[K]=t(h=x[w],f,c,l),ee=te[K+ie],le=te[K+Q],ae===(q=te[K+U])&&ae===ee&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,q,ee,le,f,c,l),de=X[K]=G++,le!==ee&&a(X[K+ie],de,R,C,ee,le,f,c,l)),K+=1,w+=D,z=2;z<d;++z)ae=te[K]=t(h=x[w],f,c,l),ee=te[K+ie],le=te[K+Q],ae===(q=te[K+U])&&ae===ee&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,q,ee,le,f,c,l),de=X[K]=G++,le!==ee&&a(X[K+ie],de,R,C,ee,le,f,c,l),le!==q&&a(X[K+U],de,C,I,le,q,f,c,l)),K+=1,w+=D;1&Y&&(K=0),fe=U,U=V,V=fe,fe=ie,ie=H,H=fe,fe=Q,Q=oe,oe=fe,w+=B}}s(X),s(te)}},"false,1,0":function(n,a,t,p,s){return function(i,f,c,l){var h,d=0|i.shape[0],o=0|i.shape[1],x=i.data,T=0|i.stride[0],_=0|i.stride[1],w=0|i.offset,M=0|-T,I=0,S=0|-_,R=0,O=-T-_|0,C=0,D=0|_,B=T-_*o|0,z=0,Y=0,G=0,J=2*o|0,te=p(J),X=p(J),K=0,ae=0,U=-1,V=-1,q=0,ie=0|-o,H=0|o,ee=0,Q=-o-1|0,oe=o-1|0,le=0,de=0,fe=0;for(Y=0;Y<o;++Y)te[K++]=t(x[w],f,c,l),w+=D;if(w+=B,d>0){if(z=1,te[K++]=t(x[w],f,c,l),w+=D,o>0)for(Y=1,ae=te[K]=t(h=x[w],f,c,l),q=te[K+U],le=te[K+Q],ae===(ee=te[K+ie])&&ae===q&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,ee,q,le,f,c,l),de=X[K]=G++),K+=1,w+=D,Y=2;Y<o;++Y)ae=te[K]=t(h=x[w],f,c,l),q=te[K+U],le=te[K+Q],ae===(ee=te[K+ie])&&ae===q&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,ee,q,le,f,c,l),de=X[K]=G++,le!==q&&a(X[K+U],de,R,C,q,le,f,c,l)),K+=1,w+=D;for(w+=B,K=0,fe=ie,ie=H,H=fe,fe=U,U=V,V=fe,fe=Q,Q=oe,oe=fe,z=2;z<d;++z){if(te[K++]=t(x[w],f,c,l),w+=D,o>0)for(Y=1,ae=te[K]=t(h=x[w],f,c,l),q=te[K+U],le=te[K+Q],ae===(ee=te[K+ie])&&ae===q&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,ee,q,le,f,c,l),de=X[K]=G++,le!==ee&&a(X[K+ie],de,C,I,le,ee,f,c,l)),K+=1,w+=D,Y=2;Y<o;++Y)ae=te[K]=t(h=x[w],f,c,l),q=te[K+U],le=te[K+Q],ae===(ee=te[K+ie])&&ae===q&&ae===le||(n(z,Y,h,I=x[w+M],R=x[w+S],C=x[w+O],ae,ee,q,le,f,c,l),de=X[K]=G++,le!==q&&a(X[K+U],de,R,C,q,le,f,c,l),le!==ee&&a(X[K+ie],de,C,I,le,ee,f,c,l)),K+=1,w+=D;1&z&&(K=0),fe=ie,ie=H,H=fe,fe=U,U=V,V=fe,fe=Q,Q=oe,oe=fe,w+=B}}s(X),s(te)}}}},{"typedarray-pool":308}],252:[function(m,b,y){"use strict";var e=m("dup"),r={zero:function(d,o,x,u){var T=d[0];u|=0;var _=0,w=x[0];for(_=0;_<T;++_)o[u]=0,u+=w},fdTemplate1:function(d,o,x,u,T,_,w){var M=d[0],I=x[0],S=-1*I,R=I;u|=0,w|=0;var O=0,C=I,D=_[0];for(O=0;O<M;++O)T[w]=.5*(o[u+S]-o[u+R]),u+=C,w+=D},fdTemplate2:function(d,o,x,u,T,_,w,M,I,S){var R=d[0],O=d[1],C=x[0],D=x[1],z=_[1],G=I[1],J=-1*C,te=C,X=-1*D,K=D;u|=0,w|=0,S|=0;var ae=0,U=0,V=D,q=C-O*D,ie=z,H=_[0]-O*z,ee=G,Q=I[0]-O*G;for(U=0;U<R;++U){for(ae=0;ae<O;++ae)T[w]=.5*(o[u+J]-o[u+te]),M[S]=.5*(o[u+X]-o[u+K]),u+=V,w+=ie,S+=ee;u+=q,w+=H,S+=Q}}},n={cdiff:function(d){var o={};return function(x,u,T){var _=x.dtype,w=x.order,M=u.dtype,I=u.order,S=T.dtype,R=T.order,O=[_,w.join(),M,I.join(),S,R.join()].join(),C=o[O];return C||(o[O]=C=d([_,w,M,I,S,R])),C(x.shape.slice(0),x.data,x.stride,0|x.offset,u.data,u.stride,0|u.offset,T.data,T.stride,0|T.offset)}},zero:function(d){var o={};return function(x){var u=x.dtype,T=x.order,_=[u,T.join()].join(),w=o[_];return w||(o[_]=w=d([u,T])),w(x.shape.slice(0),x.data,x.stride,0|x.offset)}},fdTemplate1:function(d){var o={};return function(x,u){var T=x.dtype,_=x.order,w=u.dtype,M=u.order,I=[T,_.join(),w,M.join()].join(),S=o[I];return S||(o[I]=S=d([T,_,w,M])),S(x.shape.slice(0),x.data,x.stride,0|x.offset,u.data,u.stride,0|u.offset)}},fdTemplate2:function(d){var o={};return function(x,u,T){var _=x.dtype,w=x.order,M=u.dtype,I=u.order,S=T.dtype,R=T.order,O=[_,w.join(),M,I.join(),S,R.join()].join(),C=o[O];return C||(o[O]=C=d([_,w,M,I,S,R])),C(x.shape.slice(0),x.data,x.stride,0|x.offset,u.data,u.stride,0|u.offset,T.data,T.stride,0|T.offset)}}};function a(d){return(0,n[d.funcName])(t.bind(void 0,d))}function t(d){return r[d.funcName]}function p(d){return a({funcName:d.funcName})}var s={},i={},f=p({funcName:"cdiff"}),c=p({funcName:"zero"});function l(d){return d in s?s[d]:s[d]=p({funcName:"fdTemplate"+d})}function h(d,o,x,u){return function(T,_){var w=_.shape.slice();return w[0]>2&&w[1]>2&&u(_.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),T.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),T.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(x(_.pick(0,-1).lo(1).hi(w[1]-2),T.pick(0,-1,1).lo(1).hi(w[1]-2)),o(T.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(x(_.pick(w[0]-1,-1).lo(1).hi(w[1]-2),T.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),o(T.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(x(_.pick(-1,0).lo(1).hi(w[0]-2),T.pick(-1,0,0).lo(1).hi(w[0]-2)),o(T.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(x(_.pick(-1,w[1]-1).lo(1).hi(w[0]-2),T.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),o(T.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),T.set(0,0,0,0),T.set(0,0,1,0),T.set(w[0]-1,0,0,0),T.set(w[0]-1,0,1,0),T.set(0,w[1]-1,0,0),T.set(0,w[1]-1,1,0),T.set(w[0]-1,w[1]-1,0,0),T.set(w[0]-1,w[1]-1,1,0),T}}b.exports=function(d,o,x){return Array.isArray(x)||(x=e(o.dimension,"string"==typeof x?x:"clamp")),0===o.size?d:0===o.dimension?(d.set(0),d):function(u){var T=u.join();if(I=i[T])return I;for(var _=u.length,w=[f,c],M=1;M<=_;++M)w.push(l(M));var I=h.apply(void 0,w);return i[T]=I,I}(x)(d,o)}},{dup:65}],253:[function(m,b,y){"use strict";function e(t,p){var s=Math.floor(p),i=p-s,c=0<=s+1&&s+1<t.shape[0];return(1-i)*(0<=s&&s<t.shape[0]?+t.get(s):0)+i*(c?+t.get(s+1):0)}function r(t,p,s){var i=Math.floor(p),f=p-i,c=0<=i&&i<t.shape[0],l=0<=i+1&&i+1<t.shape[0],h=Math.floor(s),d=s-h,o=0<=h&&h<t.shape[1],x=0<=h+1&&h+1<t.shape[1],u=c&&o?t.get(i,h):0,T=c&&x?t.get(i,h+1):0;return(1-d)*((1-f)*u+f*(l&&o?t.get(i+1,h):0))+d*((1-f)*T+f*(l&&x?t.get(i+1,h+1):0))}function n(t,p,s,i){var f=Math.floor(p),c=p-f,l=0<=f&&f<t.shape[0],h=0<=f+1&&f+1<t.shape[0],d=Math.floor(s),o=s-d,x=0<=d&&d<t.shape[1],u=0<=d+1&&d+1<t.shape[1],T=Math.floor(i),_=i-T,w=0<=T&&T<t.shape[2],M=0<=T+1&&T+1<t.shape[2],I=l&&x&&w?t.get(f,d,T):0,S=l&&u&&w?t.get(f,d+1,T):0,R=h&&x&&w?t.get(f+1,d,T):0,O=h&&u&&w?t.get(f+1,d+1,T):0,C=l&&x&&M?t.get(f,d,T+1):0,D=l&&u&&M?t.get(f,d+1,T+1):0;return(1-_)*((1-o)*((1-c)*I+c*R)+o*((1-c)*S+c*O))+_*((1-o)*((1-c)*C+c*(h&&x&&M?t.get(f+1,d,T+1):0))+o*((1-c)*D+c*(h&&u&&M?t.get(f+1,d+1,T+1):0)))}function a(t){var p,s,i=0|t.shape.length,f=new Array(i),c=new Array(i),l=new Array(i),h=new Array(i);for(p=0;p<i;++p)s=+arguments[p+1],f[p]=Math.floor(s),c[p]=s-f[p],l[p]=0<=f[p]&&f[p]<t.shape[p],h[p]=0<=f[p]+1&&f[p]+1<t.shape[p];var d,o,x,u=0;e:for(p=0;p<1<<i;++p){for(o=1,x=t.offset,d=0;d<i;++d)if(p&1<<d){if(!h[d])continue e;o*=c[d],x+=t.stride[d]*(f[d]+1)}else{if(!l[d])continue e;o*=1-c[d],x+=t.stride[d]*f[d]}u+=o*t.data[x]}return u}b.exports=function(t,p,s,i){switch(t.shape.length){case 0:return 0;case 1:return e(t,p);case 2:return r(t,p,s);case 3:return n(t,p,s,i);default:return a.apply(void 0,arguments)}},b.exports.d1=e,b.exports.d2=r,b.exports.d3=n},{}],254:[function(m,b,y){"use strict";var e={"float64,2,1,0":function(){return function(p,s,i,f,c){var l=p[0],h=p[1],d=p[2],x=i[1],u=i[2];f|=0;var T=0,_=0,w=0,M=u,I=x-d*u,S=i[0]-h*x;for(w=0;w<l;++w){for(_=0;_<h;++_){for(T=0;T<d;++T)s[f]/=c,f+=M;f+=I}f+=S}}},"uint8,2,0,1,float64,2,1,0":function(){return function(p,s,i,f,c,l,h,d){for(var o=p[0],x=p[1],u=p[2],T=i[0],_=i[1],w=i[2],M=l[0],I=l[1],S=l[2],R=f|=0,O=h|=0,C=0|p[0];C>0;){C<64?(o=C,C=0):(o=64,C-=64);for(var D=0|p[1];D>0;){D<64?(x=D,D=0):(x=64,D-=64),f=R+C*T+D*_,h=O+C*M+D*I;var B=0,z=0,Y=0,G=w,J=T-u*w,te=_-o*T,X=S,K=M-u*S,ae=I-o*M;for(Y=0;Y<x;++Y){for(z=0;z<o;++z){for(B=0;B<u;++B)s[f]=c[h]*d,f+=G,h+=X;f+=J,h+=K}f+=te,h+=ae}}}}},"float32,1,0,float32,1,0":function(){return function(p,s,i,f,c,l,h){var d=p[0],o=p[1],u=i[1],_=l[1];f|=0,h|=0;var w=0,M=0,I=u,S=i[0]-o*u,R=_,O=l[0]-o*_;for(M=0;M<d;++M){for(w=0;w<o;++w)s[f]=c[h],f+=I,h+=R;f+=S,h+=O}}},"float32,1,0,float32,0,1":function(){return function(p,s,i,f,c,l,h){for(var d=p[0],o=p[1],x=i[0],u=i[1],T=l[0],_=l[1],w=f|=0,M=h|=0,I=0|p[1];I>0;){I<64?(o=I,I=0):(o=64,I-=64);for(var S=0|p[0];S>0;){S<64?(d=S,S=0):(d=64,S-=64),f=w+I*u+S*x,h=M+I*_+S*T;var R=0,O=0,C=u,D=x-o*u,B=_,z=T-o*_;for(O=0;O<d;++O){for(R=0;R<o;++R)s[f]=c[h],f+=C,h+=B;f+=D,h+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(p,s,i,f,c,l,h){for(var d=p[0],o=p[1],x=p[2],u=i[0],T=i[1],_=i[2],w=l[0],M=l[1],I=l[2],S=f|=0,R=h|=0,O=0|p[2];O>0;){O<64?(x=O,O=0):(x=64,O-=64);for(var C=0|p[0];C>0;){C<64?(d=C,C=0):(d=64,C-=64);for(var D=0|p[1];D>0;){D<64?(o=D,D=0):(o=64,D-=64),f=S+O*_+C*u+D*T,h=R+O*I+C*w+D*M;var B=0,z=0,Y=0,G=_,J=u-x*_,te=T-d*u,X=I,K=w-x*I,ae=M-d*w;for(Y=0;Y<o;++Y){for(z=0;z<d;++z){for(B=0;B<x;++B)s[f]=c[h],f+=G,h+=X;f+=J,h+=K}f+=te,h+=ae}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(p,s,i,f,c,l,h){var d=p[0],o=p[1],x=p[2],u=i[0],_=i[2],w=l[0],I=l[2];f|=0,h|=0;var S=0,R=0,O=0,C=_,D=u-x*_,B=i[1]-d*u,z=I,Y=w-x*I,G=l[1]-d*w;for(O=0;O<o;++O){for(R=0;R<d;++R){for(S=0;S<x;++S)s[f]=c[h],f+=C,h+=z;f+=D,h+=Y}f+=B,h+=G}}}},r=function(p,s){var i=s.join(",");return(0,e[i])()},n={mul:function(p){var s={};return function(i,f,c){var l=i.dtype,h=i.order,d=f.dtype,o=f.order,x=c.dtype,u=c.order,T=[l,h.join(),d,o.join(),x,u.join()].join(),_=s[T];return _||(s[T]=_=p([l,h,d,o,x,u])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,c.data,c.stride,0|c.offset)}},muls:function(p){var s={};return function(i,f,c){var l=i.dtype,h=i.order,d=f.dtype,o=f.order,x=[l,h.join(),d,o.join()].join(),u=s[x];return u||(s[x]=u=p([l,h,d,o])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,c)}},mulseq:function(p){var s={};return function(i,f){var c=i.dtype,l=i.order,h=[c,l.join()].join(),d=s[h];return d||(s[h]=d=p([c,l])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,f)}},div:function(p){var s={};return function(i,f,c){var l=i.dtype,h=i.order,d=f.dtype,o=f.order,x=c.dtype,u=c.order,T=[l,h.join(),d,o.join(),x,u.join()].join(),_=s[T];return _||(s[T]=_=p([l,h,d,o,x,u])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,c.data,c.stride,0|c.offset)}},divs:function(p){var s={};return function(i,f,c){var l=i.dtype,h=i.order,d=f.dtype,o=f.order,x=[l,h.join(),d,o.join()].join(),u=s[x];return u||(s[x]=u=p([l,h,d,o])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset,c)}},divseq:function(p){var s={};return function(i,f){var c=i.dtype,l=i.order,h=[c,l.join()].join(),d=s[h];return d||(s[h]=d=p([c,l])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,f)}},assign:function(p){var s={};return function(i,f){var c=i.dtype,l=i.order,h=f.dtype,d=f.order,o=[c,l.join(),h,d.join()].join(),x=s[o];return x||(s[o]=x=p([c,l,h,d])),x(i.shape.slice(0),i.data,i.stride,0|i.offset,f.data,f.stride,0|f.offset)}}};function a(p){return(0,n[(s={funcName:p.funcName}).funcName])(r.bind(void 0,s));var s}var t={mul:"*",div:"/"};(function(){for(var p in t)y[p]=a({funcName:p}),y[p+"s"]=a({funcName:p+"s"}),y[p+"seq"]=a({funcName:p+"seq"})})(),y.assign=a({funcName:"assign"})},{}],255:[function(m,b,y){"use strict";var e=m("ndarray"),r=m("./doConvert.js");b.exports=function(n,a){for(var t=[],p=n,s=1;Array.isArray(p);)t.push(p.length),s*=p.length,p=p[0];return 0===t.length?e():(a||(a=e(new Float64Array(s),t)),r(a,n),a)}},{"./doConvert.js":256,ndarray:259}],256:[function(m,b,y){"use strict";var n,a;b.exports=(n=function(){return function(n,a,t,p,s){var i=n[0],f=n[1],c=n[2],h=t[1],d=t[2],o=[0,0,0];p|=0;var x=0,u=0,T=0,_=d,w=h-c*d,M=t[0]-f*h;for(T=0;T<i;++T){for(u=0;u<f;++u){for(x=0;x<c;++x){var I,S=s;for(I=0;I<o.length-1;++I)S=S[o[I]];a[p]=S[o[o.length-1]],p+=_,++o[2]}p+=w,o[2]-=c,++o[1]}p+=M,o[1]-=f,++o[0]}}}.bind(void 0,{funcName:"convert"}),a={},function(t,p){var s=t.dtype,i=t.order,f=[s,i.join()].join(),c=a[f];return c||(a[f]=c=n([s,i])),c(t.shape.slice(0),t.data,t.stride,0|t.offset,p)})},{}],257:[function(m,b,y){"use strict";var e=m("typedarray-pool");function r(p){return"uint32"===p?[e.mallocUint32,e.freeUint32]:null}var n={"uint32,1,0":function(p,s){return function(i,f,c,l,h,d,o,x,u,T,_){var w,M,I,S,R,O,C,D,B=i*h+l,z=p(x);for(w=i+1;w<=f;++w){for(M=w,I=B+=h,R=0,O=B,S=0;S<x;++S)z[R++]=c[O],O+=u;e:for(;M-- >i;){R=0,O=I-h;t:for(S=0;S<x;++S){if((C=c[O])<(D=z[R]))break e;if(C>D)break t;O+=T,R+=_}for(R=I,O=I-h,S=0;S<x;++S)c[R]=c[O],R+=u,O+=u;I-=h}for(R=I,O=0,S=0;S<x;++S)c[R]=z[O++],R+=u}s(z)}}},a={"uint32,1,0":function(p,s,i){return function f(c,l,h,d,o,x,u,T,_,w,M){var I,S,O,C,D,B,z,Y,G,J,te,X,K,ae,U,V,q,ie,H,ee,Q,oe,le,de,fe=(l-c+1)/6|0,be=c+fe,he=l-fe,_e=c+l>>1,Ce=_e-fe,Ee=_e+fe,Ae=be,ze=Ce,ve=_e,Te=Ee,Ie=he,De=c+1,Fe=l-1,Ue=!0,qe=0,je=0,rt=0,Ne=T,Be=s(Ne),We=s(Ne);J=o*Ae,te=o*ze,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=Ae,Ae=ze,ze=S;break e}if(rt<0)break e;de+=w}J=o*Te,te=o*Ie,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=Te,Te=Ie,Ie=S;break e}if(rt<0)break e;de+=w}J=o*Ae,te=o*ve,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=Ae,Ae=ve,ve=S;break e}if(rt<0)break e;de+=w}J=o*ze,te=o*ve,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=ze,ze=ve,ve=S;break e}if(rt<0)break e;de+=w}J=o*Ae,te=o*Te,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=Ae,Ae=Te,Te=S;break e}if(rt<0)break e;de+=w}J=o*ve,te=o*Te,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=ve,ve=Te,Te=S;break e}if(rt<0)break e;de+=w}J=o*ze,te=o*Ie,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=ze,ze=Ie,Ie=S;break e}if(rt<0)break e;de+=w}J=o*ze,te=o*ve,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=ze,ze=ve,ve=S;break e}if(rt<0)break e;de+=w}J=o*Te,te=o*Ie,de=d;e:for(G=0;G<T;++G){if((rt=h[B=J+de]-h[z=te+de])>0){S=Te,Te=Ie,Ie=S;break e}if(rt<0)break e;de+=w}for(J=o*Ae,te=o*ze,X=o*ve,K=o*Te,ae=o*Ie,U=o*be,V=o*_e,q=o*he,le=0,de=d,G=0;G<T;++G)B=J+de,Y=X+de,ie=K+de,H=ae+de,ee=U+de,Q=V+de,oe=q+de,Be[le]=h[z=te+de],We[le]=h[ie],Ue=Ue&&Be[le]===We[le],O=h[Y],C=h[H],h[ee]=h[B],h[Q]=O,h[oe]=C,++le,de+=_;for(J=o*Ce,te=o*c,de=d,G=0;G<T;++G)h[B=J+de]=h[z=te+de],de+=_;for(J=o*Ee,te=o*l,de=d,G=0;G<T;++G)h[B=J+de]=h[z=te+de],de+=_;if(Ue)for(D=De;D<=Fe;++D){for(B=d+D*o,le=0,G=0;G<T&&0==(rt=h[B]-Be[le]);++G)le+=M,B+=w;if(0!==rt)if(rt<0){if(D!==De)for(J=o*D,te=o*De,de=d,G=0;G<T;++G)I=h[B=J+de],h[B]=h[z=te+de],h[z]=I,de+=_;++De}else for(;;){for(B=d+Fe*o,le=0,G=0;G<T&&0==(rt=h[B]-Be[le]);++G)le+=M,B+=w;if(!(rt>0)){if(rt<0){for(J=o*D,te=o*De,X=o*Fe,de=d,G=0;G<T;++G)Y=X+de,I=h[B=J+de],h[B]=h[z=te+de],h[z]=h[Y],h[Y]=I,de+=_;++De,--Fe;break}for(J=o*D,te=o*Fe,de=d,G=0;G<T;++G)I=h[B=J+de],h[B]=h[z=te+de],h[z]=I,de+=_;--Fe;break}Fe--}}else for(D=De;D<=Fe;++D){for(B=d+D*o,le=0,G=0;G<T&&0==(qe=h[B]-Be[le]);++G)le+=M,B+=w;if(qe<0){if(D!==De)for(J=o*D,te=o*De,de=d,G=0;G<T;++G)I=h[B=J+de],h[B]=h[z=te+de],h[z]=I,de+=_;++De}else{for(B=d+D*o,le=0,G=0;G<T&&0==(je=h[B]-We[le]);++G)le+=M,B+=w;if(je>0)for(;;){for(B=d+Fe*o,le=0,G=0;G<T&&0==(rt=h[B]-We[le]);++G)le+=M,B+=w;if(!(rt>0)){for(B=d+Fe*o,le=0,G=0;G<T&&0==(rt=h[B]-Be[le]);++G)le+=M,B+=w;if(rt<0){for(J=o*D,te=o*De,X=o*Fe,de=d,G=0;G<T;++G)Y=X+de,I=h[B=J+de],h[B]=h[z=te+de],h[z]=h[Y],h[Y]=I,de+=_;++De,--Fe}else{for(J=o*D,te=o*Fe,de=d,G=0;G<T;++G)I=h[B=J+de],h[B]=h[z=te+de],h[z]=I,de+=_;--Fe}break}if(--Fe<D)break}}}for(J=o*c,te=o*(De-1),le=0,de=d,G=0;G<T;++G)h[B=J+de]=h[z=te+de],h[z]=Be[le],++le,de+=_;for(J=o*l,te=o*(Fe+1),le=0,de=d,G=0;G<T;++G)h[B=J+de]=h[z=te+de],h[z]=We[le],++le,de+=_;if(De-2-c<=32?p(c,De-2,h,d,o,x,u,T,_,w,M):f(c,De-2,h,d,o,x,u,T,_,w,M),l-(Fe+2)<=32?p(Fe+2,l,h,d,o,x,u,T,_,w,M):f(Fe+2,l,h,d,o,x,u,T,_,w,M),Ue)return i(Be),void i(We);if(De<be&&Fe>he){e:for(;;){for(B=d+De*o,le=0,de=d,G=0;G<T;++G){if(h[B]!==Be[le])break e;++le,B+=_}++De}e:for(;;){for(B=d+Fe*o,le=0,de=d,G=0;G<T;++G){if(h[B]!==We[le])break e;++le,B+=_}--Fe}for(D=De;D<=Fe;++D){for(B=d+D*o,le=0,G=0;G<T&&0==(qe=h[B]-Be[le]);++G)le+=M,B+=w;if(0===qe){if(D!==De)for(J=o*D,te=o*De,de=d,G=0;G<T;++G)I=h[B=J+de],h[B]=h[z=te+de],h[z]=I,de+=_;++De}else{for(B=d+D*o,le=0,G=0;G<T&&0==(je=h[B]-We[le]);++G)le+=M,B+=w;if(0===je)for(;;){for(B=d+Fe*o,le=0,G=0;G<T&&0==(rt=h[B]-We[le]);++G)le+=M,B+=w;if(0!==rt){for(B=d+Fe*o,le=0,G=0;G<T&&0==(rt=h[B]-Be[le]);++G)le+=M,B+=w;if(rt<0){for(J=o*D,te=o*De,X=o*Fe,de=d,G=0;G<T;++G)Y=X+de,I=h[B=J+de],h[B]=h[z=te+de],h[z]=h[Y],h[Y]=I,de+=_;++De,--Fe}else{for(J=o*D,te=o*Fe,de=d,G=0;G<T;++G)I=h[B=J+de],h[B]=h[z=te+de],h[z]=I,de+=_;--Fe}break}if(--Fe<D)break}}}}i(Be),i(We),Fe-De<=32?p(De,Fe,h,d,o,x,u,T,_,w,M):f(De,Fe,h,d,o,x,u,T,_,w,M)}}},t={"uint32,1,0":function(p,s){return function(i){var f=i.data,c=0|i.offset,l=i.shape,h=i.stride,d=0|h[0],o=0|l[0],x=0|h[1],u=0|l[1],T=x,_=x;o<=32?p(0,o-1,f,c,d,x,o,u,T,_,1):s(0,o-1,f,c,d,x,o,u,T,_,1)}}};b.exports=function(p,s){var h,d,o,x,u,i=[s,p].join(","),f=t[i],c=(h=p,o=r(d=s),x=[d,h].join(","),u=n[x],o?u(o[0],o[1]):u()),l=function(h,d,o){var x=r(d),u=[d,h].join(","),T=a[u];return h.length>1&&x?T(o,x[0],x[1]):T(o)}(p,s,c);return f(c,l)}},{"typedarray-pool":308}],258:[function(m,b,y){"use strict";var e=m("./lib/compile_sort.js"),r={};b.exports=function(n){var a=n.order,t=n.dtype,p=[a,t].join(":"),s=r[p];return s||(r[p]=s=e(a,t)),s(n),n}},{"./lib/compile_sort.js":257}],259:[function(m,b,y){var e=m("is-buffer"),r=typeof Float64Array<"u";function n(i,f){return i[0]-f[0]}function a(){var i,f=this.stride,c=new Array(f.length);for(i=0;i<c.length;++i)c[i]=[Math.abs(f[i]),i];c.sort(n);var l=new Array(c.length);for(i=0;i<l.length;++i)l[i]=c[i][1];return l}var t={T:function(i){function f(l){this.data=l}var c=f.prototype;return c.dtype=i,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new f(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(l){return new f(l)}},0:function(i,f){function c(h,d){this.data=h,this.offset=d}var l=c.prototype;return l.dtype=i,l.index=function(){return this.offset},l.dimension=0,l.size=1,l.shape=l.stride=l.order=[],l.lo=l.hi=l.transpose=l.step=function(){return new c(this.data,this.offset)},l.pick=function(){return f(this.data)},l.valueOf=l.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},l.set=function(h){return"generic"===i?this.data.set(this.offset,h):this.data[this.offset]=h},function(h,d,o,x){return new c(h,x)}},1:function(i,f,c){function l(d,o,x,u){this.data=d,this.shape=[o],this.stride=[x],this.offset=0|u}var h=l.prototype;return h.dtype=i,h.dimension=1,Object.defineProperty(h,"size",{get:function(){return this.shape[0]}}),h.order=[0],h.set=function(d,o){return"generic"===i?this.data.set(this.offset+this.stride[0]*d,o):this.data[this.offset+this.stride[0]*d]=o},h.get=function(d){return"generic"===i?this.data.get(this.offset+this.stride[0]*d):this.data[this.offset+this.stride[0]*d]},h.index=function(d){return this.offset+this.stride[0]*d},h.hi=function(d){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,this.stride[0],this.offset)},h.lo=function(d){var o=this.offset,x=0,u=this.shape[0],T=this.stride[0];return"number"==typeof d&&d>=0&&(o+=T*(x=0|d),u-=x),new l(this.data,u,T,o)},h.step=function(d){var o=this.shape[0],x=this.stride[0],u=this.offset,T=0,_=Math.ceil;return"number"==typeof d&&((T=0|d)<0?(u+=x*(o-1),o=_(-o/T)):o=_(o/T),x*=T),new l(this.data,o,x,u)},h.transpose=function(d){return new l(this.data,this.shape[d=void 0===d?0:0|d],this.stride[d],this.offset)},h.pick=function(d){var o=[],x=[],u=this.offset;return"number"==typeof d&&d>=0?u=u+this.stride[0]*d|0:(o.push(this.shape[0]),x.push(this.stride[0])),(0,f[o.length+1])(this.data,o,x,u)},function(d,o,x,u){return new l(d,o[0],x[0],u)}},2:function(i,f,c){function l(d,o,x,u,T,_){this.data=d,this.shape=[o,x],this.stride=[u,T],this.offset=0|_}var h=l.prototype;return h.dtype=i,h.dimension=2,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(h,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),h.set=function(d,o,x){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o,x):this.data[this.offset+this.stride[0]*d+this.stride[1]*o]=x},h.get=function(d,o){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o):this.data[this.offset+this.stride[0]*d+this.stride[1]*o]},h.index=function(d,o){return this.offset+this.stride[0]*d+this.stride[1]*o},h.hi=function(d,o){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,this.stride[0],this.stride[1],this.offset)},h.lo=function(d,o){var x=this.offset,u=0,T=this.shape[0],_=this.shape[1],w=this.stride[0],M=this.stride[1];return"number"==typeof d&&d>=0&&(x+=w*(u=0|d),T-=u),"number"==typeof o&&o>=0&&(x+=M*(u=0|o),_-=u),new l(this.data,T,_,w,M,x)},h.step=function(d,o){var x=this.shape[0],u=this.shape[1],T=this.stride[0],_=this.stride[1],w=this.offset,M=0,I=Math.ceil;return"number"==typeof d&&((M=0|d)<0?(w+=T*(x-1),x=I(-x/M)):x=I(x/M),T*=M),"number"==typeof o&&((M=0|o)<0?(w+=_*(u-1),u=I(-u/M)):u=I(u/M),_*=M),new l(this.data,x,u,T,_,w)},h.transpose=function(d,o){var x=this.shape,u=this.stride;return new l(this.data,x[d=void 0===d?0:0|d],x[o=void 0===o?1:0|o],u[d],u[o],this.offset)},h.pick=function(d,o){var x=[],u=[],T=this.offset;return"number"==typeof d&&d>=0?T=T+this.stride[0]*d|0:(x.push(this.shape[0]),u.push(this.stride[0])),"number"==typeof o&&o>=0?T=T+this.stride[1]*o|0:(x.push(this.shape[1]),u.push(this.stride[1])),(0,f[x.length+1])(this.data,x,u,T)},function(d,o,x,u){return new l(d,o[0],o[1],x[0],x[1],u)}},3:function(i,f,c){function l(d,o,x,u,T,_,w,M){this.data=d,this.shape=[o,x,u],this.stride=[T,_,w],this.offset=0|M}var h=l.prototype;return h.dtype=i,h.dimension=3,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(h,"order",{get:function(){var d=Math.abs(this.stride[0]),o=Math.abs(this.stride[1]),x=Math.abs(this.stride[2]);return d>o?o>x?[2,1,0]:d>x?[1,2,0]:[1,0,2]:d>x?[2,0,1]:x>o?[0,1,2]:[0,2,1]}}),h.set=function(d,o,x,u){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x,u):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x]=u},h.get=function(d,o,x){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x]},h.index=function(d,o,x){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x},h.hi=function(d,o,x){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof x||x<0?this.shape[2]:0|x,this.stride[0],this.stride[1],this.stride[2],this.offset)},h.lo=function(d,o,x){var u=this.offset,T=0,_=this.shape[0],w=this.shape[1],M=this.shape[2],I=this.stride[0],S=this.stride[1],R=this.stride[2];return"number"==typeof d&&d>=0&&(u+=I*(T=0|d),_-=T),"number"==typeof o&&o>=0&&(u+=S*(T=0|o),w-=T),"number"==typeof x&&x>=0&&(u+=R*(T=0|x),M-=T),new l(this.data,_,w,M,I,S,R,u)},h.step=function(d,o,x){var u=this.shape[0],T=this.shape[1],_=this.shape[2],w=this.stride[0],M=this.stride[1],I=this.stride[2],S=this.offset,R=0,O=Math.ceil;return"number"==typeof d&&((R=0|d)<0?(S+=w*(u-1),u=O(-u/R)):u=O(u/R),w*=R),"number"==typeof o&&((R=0|o)<0?(S+=M*(T-1),T=O(-T/R)):T=O(T/R),M*=R),"number"==typeof x&&((R=0|x)<0?(S+=I*(_-1),_=O(-_/R)):_=O(_/R),I*=R),new l(this.data,u,T,_,w,M,I,S)},h.transpose=function(d,o,x){var u=this.shape,T=this.stride;return new l(this.data,u[d=void 0===d?0:0|d],u[o=void 0===o?1:0|o],u[x=void 0===x?2:0|x],T[d],T[o],T[x],this.offset)},h.pick=function(d,o,x){var u=[],T=[],_=this.offset;return"number"==typeof d&&d>=0?_=_+this.stride[0]*d|0:(u.push(this.shape[0]),T.push(this.stride[0])),"number"==typeof o&&o>=0?_=_+this.stride[1]*o|0:(u.push(this.shape[1]),T.push(this.stride[1])),"number"==typeof x&&x>=0?_=_+this.stride[2]*x|0:(u.push(this.shape[2]),T.push(this.stride[2])),(0,f[u.length+1])(this.data,u,T,_)},function(d,o,x,u){return new l(d,o[0],o[1],o[2],x[0],x[1],x[2],u)}},4:function(i,f,c){function l(d,o,x,u,T,_,w,M,I,S){this.data=d,this.shape=[o,x,u,T],this.stride=[_,w,M,I],this.offset=0|S}var h=l.prototype;return h.dtype=i,h.dimension=4,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(h,"order",{get:c}),h.set=function(d,o,x,u,T){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u,T):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u]=T},h.get=function(d,o,x,u){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u]},h.index=function(d,o,x,u){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u},h.hi=function(d,o,x,u){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof u||u<0?this.shape[3]:0|u,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},h.lo=function(d,o,x,u){var T=this.offset,_=0,w=this.shape[0],M=this.shape[1],I=this.shape[2],S=this.shape[3],R=this.stride[0],O=this.stride[1],C=this.stride[2],D=this.stride[3];return"number"==typeof d&&d>=0&&(T+=R*(_=0|d),w-=_),"number"==typeof o&&o>=0&&(T+=O*(_=0|o),M-=_),"number"==typeof x&&x>=0&&(T+=C*(_=0|x),I-=_),"number"==typeof u&&u>=0&&(T+=D*(_=0|u),S-=_),new l(this.data,w,M,I,S,R,O,C,D,T)},h.step=function(d,o,x,u){var T=this.shape[0],_=this.shape[1],w=this.shape[2],M=this.shape[3],I=this.stride[0],S=this.stride[1],R=this.stride[2],O=this.stride[3],C=this.offset,D=0,B=Math.ceil;return"number"==typeof d&&((D=0|d)<0?(C+=I*(T-1),T=B(-T/D)):T=B(T/D),I*=D),"number"==typeof o&&((D=0|o)<0?(C+=S*(_-1),_=B(-_/D)):_=B(_/D),S*=D),"number"==typeof x&&((D=0|x)<0?(C+=R*(w-1),w=B(-w/D)):w=B(w/D),R*=D),"number"==typeof u&&((D=0|u)<0?(C+=O*(M-1),M=B(-M/D)):M=B(M/D),O*=D),new l(this.data,T,_,w,M,I,S,R,O,C)},h.transpose=function(d,o,x,u){var T=this.shape,_=this.stride;return new l(this.data,T[d=void 0===d?0:0|d],T[o=void 0===o?1:0|o],T[x=void 0===x?2:0|x],T[u=void 0===u?3:0|u],_[d],_[o],_[x],_[u],this.offset)},h.pick=function(d,o,x,u){var T=[],_=[],w=this.offset;return"number"==typeof d&&d>=0?w=w+this.stride[0]*d|0:(T.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof o&&o>=0?w=w+this.stride[1]*o|0:(T.push(this.shape[1]),_.push(this.stride[1])),"number"==typeof x&&x>=0?w=w+this.stride[2]*x|0:(T.push(this.shape[2]),_.push(this.stride[2])),"number"==typeof u&&u>=0?w=w+this.stride[3]*u|0:(T.push(this.shape[3]),_.push(this.stride[3])),(0,f[T.length+1])(this.data,T,_,w)},function(d,o,x,u){return new l(d,o[0],o[1],o[2],o[3],x[0],x[1],x[2],x[3],u)}},5:function(i,f,c){function l(d,o,x,u,T,_,w,M,I,S,R,O){this.data=d,this.shape=[o,x,u,T,_],this.stride=[w,M,I,S,R],this.offset=0|O}var h=l.prototype;return h.dtype=i,h.dimension=5,Object.defineProperty(h,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(h,"order",{get:c}),h.set=function(d,o,x,u,T,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u+this.stride[4]*T,_):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u+this.stride[4]*T]=_},h.get=function(d,o,x,u,T){return"generic"===i?this.data.get(this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u+this.stride[4]*T):this.data[this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u+this.stride[4]*T]},h.index=function(d,o,x,u,T){return this.offset+this.stride[0]*d+this.stride[1]*o+this.stride[2]*x+this.stride[3]*u+this.stride[4]*T},h.hi=function(d,o,x,u,T){return new l(this.data,"number"!=typeof d||d<0?this.shape[0]:0|d,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof u||u<0?this.shape[3]:0|u,"number"!=typeof T||T<0?this.shape[4]:0|T,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},h.lo=function(d,o,x,u,T){var _=this.offset,w=0,M=this.shape[0],I=this.shape[1],S=this.shape[2],R=this.shape[3],O=this.shape[4],C=this.stride[0],D=this.stride[1],B=this.stride[2],z=this.stride[3],Y=this.stride[4];return"number"==typeof d&&d>=0&&(_+=C*(w=0|d),M-=w),"number"==typeof o&&o>=0&&(_+=D*(w=0|o),I-=w),"number"==typeof x&&x>=0&&(_+=B*(w=0|x),S-=w),"number"==typeof u&&u>=0&&(_+=z*(w=0|u),R-=w),"number"==typeof T&&T>=0&&(_+=Y*(w=0|T),O-=w),new l(this.data,M,I,S,R,O,C,D,B,z,Y,_)},h.step=function(d,o,x,u,T){var _=this.shape[0],w=this.shape[1],M=this.shape[2],I=this.shape[3],S=this.shape[4],R=this.stride[0],O=this.stride[1],C=this.stride[2],D=this.stride[3],B=this.stride[4],z=this.offset,Y=0,G=Math.ceil;return"number"==typeof d&&((Y=0|d)<0?(z+=R*(_-1),_=G(-_/Y)):_=G(_/Y),R*=Y),"number"==typeof o&&((Y=0|o)<0?(z+=O*(w-1),w=G(-w/Y)):w=G(w/Y),O*=Y),"number"==typeof x&&((Y=0|x)<0?(z+=C*(M-1),M=G(-M/Y)):M=G(M/Y),C*=Y),"number"==typeof u&&((Y=0|u)<0?(z+=D*(I-1),I=G(-I/Y)):I=G(I/Y),D*=Y),"number"==typeof T&&((Y=0|T)<0?(z+=B*(S-1),S=G(-S/Y)):S=G(S/Y),B*=Y),new l(this.data,_,w,M,I,S,R,O,C,D,B,z)},h.transpose=function(d,o,x,u,T){var _=this.shape,w=this.stride;return new l(this.data,_[d=void 0===d?0:0|d],_[o=void 0===o?1:0|o],_[x=void 0===x?2:0|x],_[u=void 0===u?3:0|u],_[T=void 0===T?4:0|T],w[d],w[o],w[x],w[u],w[T],this.offset)},h.pick=function(d,o,x,u,T){var _=[],w=[],M=this.offset;return"number"==typeof d&&d>=0?M=M+this.stride[0]*d|0:(_.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof o&&o>=0?M=M+this.stride[1]*o|0:(_.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof x&&x>=0?M=M+this.stride[2]*x|0:(_.push(this.shape[2]),w.push(this.stride[2])),"number"==typeof u&&u>=0?M=M+this.stride[3]*u|0:(_.push(this.shape[3]),w.push(this.stride[3])),"number"==typeof T&&T>=0?M=M+this.stride[4]*T|0:(_.push(this.shape[4]),w.push(this.stride[4])),(0,f[_.length+1])(this.data,_,w,M)},function(d,o,x,u){return new l(d,o[0],o[1],o[2],o[3],o[4],x[0],x[1],x[2],x[3],x[4],u)}}};function p(i,f){var c=-1===f?"T":String(f),l=t[c];return-1===f?l(i):0===f?l(i,s[i][0]):l(i,s[i],a)}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};b.exports=function(i,f,c,l){if(void 0===i)return(0,s.array[0])([]);"number"==typeof i&&(i=[i]),void 0===f&&(f=[i.length]);var h=f.length;if(void 0===c){c=new Array(h);for(var d=h-1,o=1;d>=0;--d)c[d]=o,o*=f[d]}if(void 0===l)for(l=0,d=0;d<h;++d)c[d]<0&&(l-=(f[d]-1)*c[d]);for(var x=function(T){if(e(T))return"buffer";if(r)switch(Object.prototype.toString.call(T)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(T)?"array":"generic"}(i),u=s[x];u.length<=h+1;)u.push(p(x,u.length-1));return(0,u[h+1])(i,f,c,l)}},{"is-buffer":237}],260:[function(m,b,y){"use strict";var e=m("double-bits"),r=Math.pow(2,-1074);b.exports=function(n,a){if(isNaN(n)||isNaN(a))return NaN;if(n===a)return n;if(0===n)return a<0?-r:r;var t=e.hi(n),p=e.lo(n);return a>n==n>0?p===-1>>>0?(t+=1,p=0):p+=1:0===p?(p=-1>>>0,t-=1):p-=1,e.pack(p,t)}},{"double-bits":64}],261:[function(m,b,y){y.vertexNormals=function(e,r,n){for(var a=r.length,t=new Array(a),p=void 0===n?1e-6:n,s=0;s<a;++s)t[s]=[0,0,0];for(s=0;s<e.length;++s)for(var i=e[s],c=i[i.length-1],l=i[0],h=0;h<i.length;++h){for(var d=r[c],o=r[c=l],x=r[l=i[(h+1)%i.length]],u=new Array(3),T=0,_=new Array(3),w=0,M=0;M<3;++M)u[M]=d[M]-o[M],T+=u[M]*u[M],_[M]=x[M]-o[M],w+=_[M]*_[M];if(T*w>p){var I=t[c],S=1/Math.sqrt(T*w);for(M=0;M<3;++M){var R=(M+1)%3,O=(M+2)%3;I[M]+=S*(_[R]*u[O]-_[O]*u[R])}}}for(s=0;s<a;++s){I=t[s];var C=0;for(M=0;M<3;++M)C+=I[M]*I[M];if(C>p)for(S=1/Math.sqrt(C),M=0;M<3;++M)I[M]*=S;else for(M=0;M<3;++M)I[M]=0}return t},y.faceNormals=function(e,r,n){for(var a=e.length,t=new Array(a),p=void 0===n?1e-6:n,s=0;s<a;++s){for(var i=e[s],f=new Array(3),c=0;c<3;++c)f[c]=r[i[c]];var l=new Array(3),h=new Array(3);for(c=0;c<3;++c)l[c]=f[1][c]-f[0][c],h[c]=f[2][c]-f[0][c];var d=new Array(3),o=0;for(c=0;c<3;++c){var x=(c+1)%3,u=(c+2)%3;d[c]=l[x]*h[u]-l[u]*h[x],o+=d[c]*d[c]}for(o=o>p?1/Math.sqrt(o):0,c=0;c<3;++c)d[c]*=o;t[s]=d}return t}},{}],262:[function(m,b,y){"use strict";b.exports=function(e,r,n,a,t,p,s,i,f,c){var l=r+p+c;if(h>0){var h=Math.sqrt(l+1);e[0]=.5*(s-f)/h,e[1]=.5*(i-a)/h,e[2]=.5*(n-p)/h,e[3]=.5*h}else{var d=Math.max(r,p,c);h=Math.sqrt(2*d-l+1),r>=d?(e[0]=.5*h,e[1]=.5*(t+n)/h,e[2]=.5*(i+a)/h,e[3]=.5*(s-f)/h):p>=d?(e[0]=.5*(n+t)/h,e[1]=.5*h,e[2]=.5*(f+s)/h,e[3]=.5*(i-a)/h):(e[0]=.5*(a+i)/h,e[1]=.5*(s+f)/h,e[2]=.5*h,e[3]=.5*(n-t)/h)}return e}},{}],263:[function(m,b,y){"use strict";b.exports=function(l){var h=(l=l||{}).center||[0,0,0],d=l.rotation||[0,0,0,1],o=l.radius||1;h=[].slice.call(h,0,3),i(d=[].slice.call(d,0,4),d);var x=new f(d,h,Math.log(o));return x.setDistanceLimits(l.zoomMin,l.zoomMax),("eye"in l||"up"in l)&&x.lookAt(0,l.eye,l.center,l.up),x};var e=m("filtered-vector"),r=m("gl-mat4/lookAt"),n=m("gl-mat4/fromQuat"),a=m("gl-mat4/invert"),t=m("./lib/quatFromFrame");function p(l,h,d){return Math.sqrt(Math.pow(l,2)+Math.pow(h,2)+Math.pow(d,2))}function s(l,h,d,o){return Math.sqrt(Math.pow(l,2)+Math.pow(h,2)+Math.pow(d,2)+Math.pow(o,2))}function i(l,h){var d=h[0],o=h[1],x=h[2],u=h[3],T=s(d,o,x,u);T>1e-6?(l[0]=d/T,l[1]=o/T,l[2]=x/T,l[3]=u/T):(l[0]=l[1]=l[2]=0,l[3]=1)}function f(l,h,d){this.radius=e([d]),this.center=e(h),this.rotation=e(l),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=f.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(l){this.radius.curve(l),this.center.curve(l),this.rotation.curve(l);var h=this.computedRotation;i(h,h);var d=this.computedMatrix;n(d,h);var o=this.computedCenter,x=this.computedEye,u=this.computedUp,T=Math.exp(this.computedRadius[0]);x[0]=o[0]+T*d[2],x[1]=o[1]+T*d[6],x[2]=o[2]+T*d[10],u[0]=d[1],u[1]=d[5],u[2]=d[9];for(var _=0;_<3;++_){for(var w=0,M=0;M<3;++M)w+=d[_+4*M]*x[M];d[12+_]=-w}},c.getMatrix=function(l,h){this.recalcMatrix(l);var d=this.computedMatrix;if(h){for(var o=0;o<16;++o)h[o]=d[o];return h}return d},c.idle=function(l){this.center.idle(l),this.radius.idle(l),this.rotation.idle(l)},c.flush=function(l){this.center.flush(l),this.radius.flush(l),this.rotation.flush(l)},c.pan=function(l,h,d,o){h=h||0,d=d||0,o=o||0,this.recalcMatrix(l);var x=this.computedMatrix,u=x[1],T=x[5],_=x[9],w=p(u,T,_),M=x[0],I=x[4],S=x[8],R=M*(u/=w)+I*(T/=w)+S*(_/=w),O=p(M-=u*R,I-=T*R,S-=_*R),C=x[2],D=x[6],B=x[10],z=C*u+D*T+B*_,Y=C*(M/=O)+D*(I/=O)+B*(S/=O),G=p(C-=z*u+Y*M,D-=z*T+Y*I,B-=z*_+Y*S);C/=G,D/=G,B/=G,this.center.move(l,M*h+u*d,I*h+T*d,S*h+_*d);var K=Math.exp(this.computedRadius[0]);K=Math.max(1e-4,K+o),this.radius.set(l,Math.log(K))},c.rotate=function(l,h,d,o){this.recalcMatrix(l);var x=this.computedMatrix,S=x[2],R=x[6],O=x[10],C=(h=h||0)*x[0]+(d=d||0)*x[1],D=h*x[4]+d*x[5],B=h*x[8]+d*x[9],z=-(R*B-O*D),Y=-(O*C-S*B),G=-(S*D-R*C),J=Math.sqrt(Math.max(0,1-Math.pow(z,2)-Math.pow(Y,2)-Math.pow(G,2))),te=s(z,Y,G,J);te>1e-6?(z/=te,Y/=te,G/=te,J/=te):(z=Y=G=0,J=1);var X=this.computedRotation,K=X[0],ae=X[1],U=X[2],V=X[3],q=K*J+V*z+ae*G-U*Y,ie=ae*J+V*Y+U*z-K*G,H=U*J+V*G+K*Y-ae*z,ee=V*J-K*z-ae*Y-U*G;if(o){z=S,Y=R,G=O;var Q=Math.sin(o)/p(z,Y,G);z*=Q,Y*=Q,G*=Q,ee=ee*(J=Math.cos(h))-(q=q*J+ee*z+ie*G-H*Y)*z-(ie=ie*J+ee*Y+H*z-q*G)*Y-(H=H*J+ee*G+q*Y-ie*z)*G}var oe=s(q,ie,H,ee);oe>1e-6?(q/=oe,ie/=oe,H/=oe,ee/=oe):(q=ie=H=0,ee=1),this.rotation.set(l,q,ie,H,ee)},c.lookAt=function(l,h,d,o){this.recalcMatrix(l);var x=this.computedMatrix;r(x,h=h||this.computedEye,d=d||this.computedCenter,o=o||this.computedUp);var u=this.computedRotation;t(u,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),i(u,u),this.rotation.set(l,u[0],u[1],u[2],u[3]);for(var T=0,_=0;_<3;++_)T+=Math.pow(d[_]-h[_],2);this.radius.set(l,.5*Math.log(Math.max(T,1e-6))),this.center.set(l,d[0],d[1],d[2])},c.translate=function(l,h,d,o){this.center.move(l,h||0,d||0,o||0)},c.setMatrix=function(l,h){var d=this.computedRotation;t(d,h[0],h[1],h[2],h[4],h[5],h[6],h[8],h[9],h[10]),i(d,d),this.rotation.set(l,d[0],d[1],d[2],d[3]);var o=this.computedMatrix;a(o,h);var x=o[15];if(Math.abs(x)>1e-6){var u=o[12]/x,T=o[13]/x,_=o[14]/x;this.recalcMatrix(l);var w=Math.exp(this.computedRadius[0]);this.center.set(l,u-o[2]*w,T-o[6]*w,_-o[10]*w),this.radius.idle(l)}else this.center.idle(l),this.radius.idle(l)},c.setDistance=function(l,h){h>0&&this.radius.set(l,Math.log(h))},c.setDistanceLimits=function(l,h){l=l>0?Math.log(l):-1/0,h=h>0?Math.log(h):1/0,h=Math.max(h,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=h},c.getDistanceLimits=function(l){var h=this.radius.bounds;return l?(l[0]=Math.exp(h[0][0]),l[1]=Math.exp(h[1][0]),l):[Math.exp(h[0][0]),Math.exp(h[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(l){var h=this.lastT(),d=l.center;d&&this.center.set(h,d[0],d[1],d[2]);var o=l.rotation;o&&this.rotation.set(h,o[0],o[1],o[2],o[3]);var x=l.distance;x&&x>0&&this.radius.set(h,Math.log(x)),this.setDistanceLimits(l.zoomMin,l.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(m,b,y){"use strict";var e=m("repeat-string");b.exports=function(r,n,a){return e(a=void 0!==a?a+"":" ",n)+r}},{"repeat-string":277}],265:[function(m,b,y){b.exports=function(e,r){r||(r=[0,""]),e=String(e);var n=parseFloat(e,10);return r[0]=n,r[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},{}],266:[function(m,b,y){"use strict";b.exports=function(r,n){for(var a=0|n.length,t=r.length,p=[new Array(a),new Array(a)],s=0;s<a;++s)p[0][s]=[],p[1][s]=[];for(s=0;s<t;++s){var i=r[s];p[0][i[0]].push(i),p[1][i[1]].push(i)}var _,f=[];for(s=0;s<a;++s)p[0][s].length+p[1][s].length===0&&f.push([s]);function c(T,_){var w=p[_][T[_]];w.splice(w.indexOf(T),1)}function l(T,_,w){for(var M,I,S,R=0;R<2;++R)if(p[R][_].length>0){M=p[R][_][0],S=R;break}I=M[1^S];for(var O=0;O<2;++O)for(var C=p[O][_],D=0;D<C.length;++D){var B=C[D],z=B[1^O];e(n[T],n[_],n[I],n[z])>0&&(M=B,I=z,S=O)}return w||M&&c(M,S),I}function h(T,_){var w=p[_][T][0],M=[T];c(w,_);for(var I=w[1^_];;){for(;I!==T;)M.push(I),I=l(M[M.length-2],I,!1);if(p[0][T].length+p[1][T].length===0)break;var S=M[M.length-1],R=T,O=M[1],C=l(S,R,!0);if(e(n[S],n[R],n[O],n[C])<0)break;M.push(T),I=l(S,R)}return M}for(s=0;s<a;++s)for(var o=0;o<2;++o){for(var x=[];p[o][s].length>0;){var u=h(s,o);(_=u)[1]===_[_.length-1]?x.push.apply(x,u):(x.length>0&&f.push(x),x=u)}x.length>0&&f.push(x)}return f};var e=m("compare-angle")},{"compare-angle":54}],267:[function(m,b,y){"use strict";b.exports=function(r,n){for(var a=e(r,n.length),t=new Array(n.length),p=new Array(n.length),s=[],i=0;i<n.length;++i){var f=a[i].length;p[i]=f,t[i]=!0,f<=1&&s.push(i)}for(;s.length>0;){var c=s.pop();t[c]=!1;var l=a[c];for(i=0;i<l.length;++i){var h=l[i];0==--p[h]&&s.push(h)}}var d=new Array(n.length),o=[];for(i=0;i<n.length;++i)t[i]?(d[i]=c=o.length,o.push(n[i])):d[i]=-1;var x=[];for(i=0;i<r.length;++i){var u=r[i];t[u[0]]&&t[u[1]]&&x.push([d[u[0]],d[u[1]]])}return[x,o]};var e=m("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(m,b,y){"use strict";b.exports=function(f,c){for(var l=s(f,c),h=(c=l[1]).length,d=e(f=l[0],c.length),o=0;o<h;++o)if(d[o].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var x=r(f,c),u=(x=x.filter(function(fe){for(var be=fe.length,he=[0],_e=0;_e<be;++_e){var Ce=c[fe[_e]],Ee=c[fe[(_e+1)%be]],Ae=a(-Ce[0],Ce[1]),ze=a(-Ce[0],Ee[1]),ve=a(Ee[0],Ce[1]),Te=a(Ee[0],Ee[1]);he=t(he,t(t(Ae,ze),t(ve,Te)))}return he[he.length-1]>0})).length,T=new Array(u),_=new Array(u);for(o=0;o<u;++o){T[o]=o;var w=new Array(u),M=x[o].map(function(fe){return c[fe]}),I=n([M]),S=0;e:for(var R=0;R<u;++R)if(w[R]=0,o!==R){for(var O=(le=x[R]).length,C=0;C<O;++C){var D=I(c[le[C]]);if(0!==D){D<0&&(w[R]=1,S+=1);continue e}}w[R]=1,S+=1}_[o]=[S,o,w]}for(_.sort(function(fe,be){return be[0]-fe[0]}),o=0;o<u;++o){var B=(w=_[o])[1],z=w[2];for(R=0;R<u;++R)z[R]&&(T[R]=B)}var Y=function(fe){for(var be=new Array(fe),he=0;he<fe;++he)be[he]=[];return be}(u);for(o=0;o<u;++o)Y[o].push(T[o]),Y[T[o]].push(o);var G={},J=i(h,!1);for(o=0;o<u;++o)for(O=(le=x[o]).length,R=0;R<O;++R){var te=le[R],X=le[(R+1)%O],K=Math.min(te,X)+":"+Math.max(te,X);if(K in G){var ae=G[K];Y[ae].push(o),Y[o].push(ae),J[te]=J[X]=!0}else G[K]=o}function U(fe){for(var be=fe.length,he=0;he<be;++he)if(!J[fe[he]])return!1;return!0}var V=[],q=i(u,-1);for(o=0;o<u;++o)T[o]!==o||U(x[o])?q[o]=-1:(V.push(o),q[o]=0);for(l=[];V.length>0;){var ie=V.pop(),H=Y[ie];p(H,function(fe,be){return fe-be});var ee,Q=H.length,oe=q[ie];if(0===oe){var le=x[ie];ee=[le]}for(o=0;o<Q;++o){var de=H[o];q[de]>=0||(q[de]=1^oe,V.push(de),0===oe&&(U(le=x[de])||(le.reverse(),ee.push(le))))}0===oe&&l.push(ee)}return l};var e=m("edges-to-adjacency-list"),r=m("planar-dual"),n=m("point-in-big-polygon"),a=m("two-product"),t=m("robust-sum"),p=m("uniq"),s=m("./lib/trim-leaves");function i(f,c){for(var l=new Array(f),h=0;h<f;++h)l[h]=c;return l}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(m,b,y){b.exports=function(i){for(var f=i.length,c=[],l=[],h=0;h<f;++h)for(var d=i[h],o=d.length,x=o-1,u=0;u<o;x=u++){var T=d[x],_=d[u];T[0]===_[0]?l.push([T,_]):c.push([T,_])}if(0===c.length)return 0===l.length?s:(w=p(l),function(S){return w(S[0],S[1])?0:1});var w,S,R,M=r(c),I=(S=M.slabs,R=M.coordinates,function(O){var C=a.le(R,O[0]);if(C<0)return 1;var D=S[C];if(!D){if(!(C>0&&R[C]===O[0]))return 1;D=S[C-1]}for(var B=1;D;){var z=D.key,Y=e(O,z[0],z[1]);if(z[0][0]<z[1][0])if(Y<0)D=D.left;else{if(!(Y>0))return 0;B=-1,D=D.right}else if(Y>0)D=D.left;else{if(!(Y<0))return 0;B=1,D=D.right}}return B});return 0===l.length?I:function(S,R){return function(O){return S(O[0],O[1])?0:R(O)}}(p(l),I)};var e=m("robust-orientation")[3],r=m("slab-decomposition"),n=m("interval-tree-1d"),a=m("binary-search-bounds");function t(){return!0}function p(i){for(var f={},c=0;c<i.length;++c){var l=i[c],h=l[0][0],d=l[0][1],o=l[1][1],x=[Math.min(d,o),Math.max(d,o)];h in f?f[h].push(x):f[h]=[x]}var w,u={},T=Object.keys(f);for(c=0;c<T.length;++c)u[T[c]]=n(f[T[c]]);return w=u,function(M,I){var S=w[M];return!!S&&!!S.queryPoint(I,t)}}function s(i){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(m,b,y){"use strict";var e=new Float64Array(4),r=new Float64Array(4),n=new Float64Array(4);b.exports=function(a,t,p,s,i){e.length<s.length&&(e=new Float64Array(s.length),r=new Float64Array(s.length),n=new Float64Array(s.length));for(var f=0;f<s.length;++f)e[f]=a[f]-s[f],r[f]=t[f]-a[f],n[f]=p[f]-a[f];var c=0,l=0,h=0,d=0,o=0,x=0;for(f=0;f<s.length;++f){var u=r[f],T=n[f],_=e[f];c+=u*u,l+=u*T,h+=T*T,d+=_*u,o+=_*T,x+=_*_}var w,M,I,S,R,O=Math.abs(c*h-l*l),C=l*o-h*d,D=l*d-c*o;if(C+D<=O)if(C<0)D<0&&d<0?(D=0,-d>=c?(C=1,w=c+2*d+x):w=d*(C=-d/c)+x):(C=0,o>=0?(D=0,w=x):-o>=h?(D=1,w=h+2*o+x):w=o*(D=-o/h)+x);else if(D<0)D=0,d>=0?(C=0,w=x):-d>=c?(C=1,w=c+2*d+x):w=d*(C=-d/c)+x;else{var B=1/O;w=(C*=B)*(c*C+l*(D*=B)+2*d)+D*(l*C+h*D+2*o)+x}else C<0?(I=h+o)>(M=l+d)?(S=I-M)>=(R=c-2*l+h)?(C=1,D=0,w=c+2*d+x):w=(C=S/R)*(c*C+l*(D=1-C)+2*d)+D*(l*C+h*D+2*o)+x:(C=0,I<=0?(D=1,w=h+2*o+x):o>=0?(D=0,w=x):w=o*(D=-o/h)+x):D<0?(I=c+d)>(M=l+o)?(S=I-M)>=(R=c-2*l+h)?(D=1,C=0,w=h+2*o+x):w=(C=1-(D=S/R))*(c*C+l*D+2*d)+D*(l*C+h*D+2*o)+x:(D=0,I<=0?(C=1,w=c+2*d+x):d>=0?(C=0,w=x):w=d*(C=-d/c)+x):(S=h+o-l-d)<=0?(C=0,D=1,w=h+2*o+x):S>=(R=c-2*l+h)?(C=1,D=0,w=c+2*d+x):w=(C=S/R)*(c*C+l*(D=1-C)+2*d)+D*(l*C+h*D+2*o)+x;var z=1-C-D;for(f=0;f<s.length;++f)i[f]=z*a[f]+C*t[f]+D*p[f];return w<0?0:w}},{}],271:[function(m,b,y){b.exports=m("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(m,b,y){"use strict";var e=m("big-rat/add");b.exports=function(r,n){for(var a=r.length,t=new Array(a),p=0;p<a;++p)t[p]=e(r[p],n[p]);return t}},{"big-rat/add":15}],273:[function(m,b,y){"use strict";b.exports=function(r){for(var n=new Array(r.length),a=0;a<r.length;++a)n[a]=e(r[a]);return n};var e=m("big-rat")},{"big-rat":18}],274:[function(m,b,y){"use strict";var e=m("big-rat"),r=m("big-rat/mul");b.exports=function(n,a){for(var t=e(a),p=n.length,s=new Array(p),i=0;i<p;++i)s[i]=r(n[i],t);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(m,b,y){"use strict";var e=m("big-rat/sub");b.exports=function(r,n){for(var a=r.length,t=new Array(a),p=0;p<a;++p)t[p]=e(r[p],n[p]);return t}},{"big-rat/sub":29}],276:[function(m,b,y){"use strict";var e=m("compare-cell"),r=m("compare-oriented-cell"),n=m("cell-orientation");b.exports=function(a){a.sort(r);for(var t=a.length,p=0,s=0;s<t;++s){var i=a[s],f=n(i);if(0!==f){if(p>0){var c=a[p-1];if(0===e(i,c)&&n(c)!==f){p-=1;continue}}a[p++]=i}}return a.length=p,a}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(m,b,y){"use strict";var e,r="";b.exports=function(n,a){if("string"!=typeof n)throw new TypeError("expected a string");if(1===a)return n;if(2===a)return n+n;var t=n.length*a;if(e!==n||void 0===e)e=n,r="";else if(r.length>=t)return r.substr(0,t);for(;t>r.length&&a>1;)1&a&&(r+=n),a>>=1,n+=n;return r=(r+=n).substr(0,t)}},{}],278:[function(m,b,y){(function(e){(function(){b.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==g?g:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(m,b,y){"use strict";b.exports=function(e){for(var r=e.length,n=e[e.length-1],a=r,t=r-2;t>=0;--t){var p=n,s=e[t];(f=s-((n=p+s)-p))&&(e[--a]=n,n=f)}var i=0;for(t=a;t<r;++t){var f;(f=(s=n)-((n=(p=e[t])+s)-p))&&(e[i++]=f)}return e[i++]=n,e.length=i,e}},{}],280:[function(m,b,y){"use strict";var e=m("two-product"),r=m("robust-sum"),n=m("robust-scale"),a=m("robust-compress");function t(h,d,o,x){return function(u){return x(h(o(u[0][0],u[1][1]),o(-u[0][1],u[1][0])))}}function p(h,d,o,x){return function(u){return x(h(d(h(o(u[1][1],u[2][2]),o(-u[1][2],u[2][1])),u[0][0]),h(d(h(o(u[1][0],u[2][2]),o(-u[1][2],u[2][0])),-u[0][1]),d(h(o(u[1][0],u[2][1]),o(-u[1][1],u[2][0])),u[0][2]))))}}function s(h,d,o,x){return function(u){return x(h(h(d(h(d(h(o(u[2][2],u[3][3]),o(-u[2][3],u[3][2])),u[1][1]),h(d(h(o(u[2][1],u[3][3]),o(-u[2][3],u[3][1])),-u[1][2]),d(h(o(u[2][1],u[3][2]),o(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),d(h(d(h(o(u[2][2],u[3][3]),o(-u[2][3],u[3][2])),u[1][0]),h(d(h(o(u[2][0],u[3][3]),o(-u[2][3],u[3][0])),-u[1][2]),d(h(o(u[2][0],u[3][2]),o(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),h(d(h(d(h(o(u[2][1],u[3][3]),o(-u[2][3],u[3][1])),u[1][0]),h(d(h(o(u[2][0],u[3][3]),o(-u[2][3],u[3][0])),-u[1][1]),d(h(o(u[2][0],u[3][1]),o(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),d(h(d(h(o(u[2][1],u[3][2]),o(-u[2][2],u[3][1])),u[1][0]),h(d(h(o(u[2][0],u[3][2]),o(-u[2][2],u[3][0])),-u[1][1]),d(h(o(u[2][0],u[3][1]),o(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function i(h,d,o,x){return function(u){return x(h(h(d(h(h(d(h(d(h(o(u[3][3],u[4][4]),o(-u[3][4],u[4][3])),u[2][2]),h(d(h(o(u[3][2],u[4][4]),o(-u[3][4],u[4][2])),-u[2][3]),d(h(o(u[3][2],u[4][3]),o(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),d(h(d(h(o(u[3][3],u[4][4]),o(-u[3][4],u[4][3])),u[2][1]),h(d(h(o(u[3][1],u[4][4]),o(-u[3][4],u[4][1])),-u[2][3]),d(h(o(u[3][1],u[4][3]),o(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),h(d(h(d(h(o(u[3][2],u[4][4]),o(-u[3][4],u[4][2])),u[2][1]),h(d(h(o(u[3][1],u[4][4]),o(-u[3][4],u[4][1])),-u[2][2]),d(h(o(u[3][1],u[4][2]),o(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),d(h(d(h(o(u[3][2],u[4][3]),o(-u[3][3],u[4][2])),u[2][1]),h(d(h(o(u[3][1],u[4][3]),o(-u[3][3],u[4][1])),-u[2][2]),d(h(o(u[3][1],u[4][2]),o(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),d(h(h(d(h(d(h(o(u[3][3],u[4][4]),o(-u[3][4],u[4][3])),u[2][2]),h(d(h(o(u[3][2],u[4][4]),o(-u[3][4],u[4][2])),-u[2][3]),d(h(o(u[3][2],u[4][3]),o(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),d(h(d(h(o(u[3][3],u[4][4]),o(-u[3][4],u[4][3])),u[2][0]),h(d(h(o(u[3][0],u[4][4]),o(-u[3][4],u[4][0])),-u[2][3]),d(h(o(u[3][0],u[4][3]),o(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),h(d(h(d(h(o(u[3][2],u[4][4]),o(-u[3][4],u[4][2])),u[2][0]),h(d(h(o(u[3][0],u[4][4]),o(-u[3][4],u[4][0])),-u[2][2]),d(h(o(u[3][0],u[4][2]),o(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),d(h(d(h(o(u[3][2],u[4][3]),o(-u[3][3],u[4][2])),u[2][0]),h(d(h(o(u[3][0],u[4][3]),o(-u[3][3],u[4][0])),-u[2][2]),d(h(o(u[3][0],u[4][2]),o(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),h(d(h(h(d(h(d(h(o(u[3][3],u[4][4]),o(-u[3][4],u[4][3])),u[2][1]),h(d(h(o(u[3][1],u[4][4]),o(-u[3][4],u[4][1])),-u[2][3]),d(h(o(u[3][1],u[4][3]),o(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),d(h(d(h(o(u[3][3],u[4][4]),o(-u[3][4],u[4][3])),u[2][0]),h(d(h(o(u[3][0],u[4][4]),o(-u[3][4],u[4][0])),-u[2][3]),d(h(o(u[3][0],u[4][3]),o(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),h(d(h(d(h(o(u[3][1],u[4][4]),o(-u[3][4],u[4][1])),u[2][0]),h(d(h(o(u[3][0],u[4][4]),o(-u[3][4],u[4][0])),-u[2][1]),d(h(o(u[3][0],u[4][1]),o(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),d(h(d(h(o(u[3][1],u[4][3]),o(-u[3][3],u[4][1])),u[2][0]),h(d(h(o(u[3][0],u[4][3]),o(-u[3][3],u[4][0])),-u[2][1]),d(h(o(u[3][0],u[4][1]),o(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),h(d(h(h(d(h(d(h(o(u[3][2],u[4][4]),o(-u[3][4],u[4][2])),u[2][1]),h(d(h(o(u[3][1],u[4][4]),o(-u[3][4],u[4][1])),-u[2][2]),d(h(o(u[3][1],u[4][2]),o(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),d(h(d(h(o(u[3][2],u[4][4]),o(-u[3][4],u[4][2])),u[2][0]),h(d(h(o(u[3][0],u[4][4]),o(-u[3][4],u[4][0])),-u[2][2]),d(h(o(u[3][0],u[4][2]),o(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),h(d(h(d(h(o(u[3][1],u[4][4]),o(-u[3][4],u[4][1])),u[2][0]),h(d(h(o(u[3][0],u[4][4]),o(-u[3][4],u[4][0])),-u[2][1]),d(h(o(u[3][0],u[4][1]),o(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),d(h(d(h(o(u[3][1],u[4][2]),o(-u[3][2],u[4][1])),u[2][0]),h(d(h(o(u[3][0],u[4][2]),o(-u[3][2],u[4][0])),-u[2][1]),d(h(o(u[3][0],u[4][1]),o(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),d(h(h(d(h(d(h(o(u[3][2],u[4][3]),o(-u[3][3],u[4][2])),u[2][1]),h(d(h(o(u[3][1],u[4][3]),o(-u[3][3],u[4][1])),-u[2][2]),d(h(o(u[3][1],u[4][2]),o(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),d(h(d(h(o(u[3][2],u[4][3]),o(-u[3][3],u[4][2])),u[2][0]),h(d(h(o(u[3][0],u[4][3]),o(-u[3][3],u[4][0])),-u[2][2]),d(h(o(u[3][0],u[4][2]),o(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),h(d(h(d(h(o(u[3][1],u[4][3]),o(-u[3][3],u[4][1])),u[2][0]),h(d(h(o(u[3][0],u[4][3]),o(-u[3][3],u[4][0])),-u[2][1]),d(h(o(u[3][0],u[4][1]),o(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),d(h(d(h(o(u[3][1],u[4][2]),o(-u[3][2],u[4][1])),u[2][0]),h(d(h(o(u[3][0],u[4][2]),o(-u[3][2],u[4][0])),-u[2][1]),d(h(o(u[3][0],u[4][1]),o(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function f(h){return(2===h?t:3===h?p:4===h?s:5===h?i:void 0)(r,n,e,a)}var c=[function(){return[0]},function(h){return[h[0][0]]}];function l(h,d,o,x,u,T,_,w){return function(M){switch(M.length){case 0:return h(M);case 1:return d(M);case 2:return o(M);case 3:return x(M);case 4:return u(M);case 5:return T(M)}var I=_[M.length];return I||(I=_[M.length]=w(M.length)),I(M)}}!function(){for(;c.length<6;)c.push(f(c.length));b.exports=l.apply(void 0,c.concat([c,f]));for(var h=0;h<c.length;++h)b.exports[h]=c[h]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(m,b,y){"use strict";var e=m("two-product"),r=m("robust-sum");b.exports=function(n,a){for(var t=e(n[0],a[0]),p=1;p<n.length;++p)t=r(t,e(n[p],a[p]));return t}},{"robust-sum":289,"two-product":306}],282:[function(m,b,y){"use strict";var e=m("two-product"),r=m("robust-sum"),n=m("robust-subtract"),a=m("robust-scale");function t(d){return(3===d?p:4===d?s:5===d?i:f)(r,n,e,a)}function p(d,o,x,u){return function(T,_,w){var M=x(T[0],T[0]),I=u(M,_[0]),S=u(M,w[0]),R=x(_[0],_[0]),O=u(R,T[0]),C=u(R,w[0]),D=x(w[0],w[0]),B=u(D,T[0]),z=u(D,_[0]),Y=d(o(z,C),o(O,I)),G=o(B,S),J=o(Y,G);return J[J.length-1]}}function s(d,o,x,u){return function(T,_,w,M){var I=d(x(T[0],T[0]),x(T[1],T[1])),S=u(I,_[0]),R=u(I,w[0]),O=u(I,M[0]),C=d(x(_[0],_[0]),x(_[1],_[1])),D=u(C,T[0]),B=u(C,w[0]),z=u(C,M[0]),Y=d(x(w[0],w[0]),x(w[1],w[1])),G=u(Y,T[0]),J=u(Y,_[0]),te=u(Y,M[0]),X=d(x(M[0],M[0]),x(M[1],M[1])),K=u(X,T[0]),ae=u(X,_[0]),U=u(X,w[0]),V=d(d(u(o(U,te),_[1]),d(u(o(ae,z),-w[1]),u(o(J,B),M[1]))),d(u(o(ae,z),T[1]),d(u(o(K,O),-_[1]),u(o(D,S),M[1])))),q=d(d(u(o(U,te),T[1]),d(u(o(K,O),-w[1]),u(o(G,R),M[1]))),d(u(o(J,B),T[1]),d(u(o(G,R),-_[1]),u(o(D,S),w[1])))),ie=o(V,q);return ie[ie.length-1]}}function i(d,o,x,u){return function(T,_,w,M,I){var S=d(x(T[0],T[0]),d(x(T[1],T[1]),x(T[2],T[2]))),R=u(S,_[0]),O=u(S,w[0]),C=u(S,M[0]),D=u(S,I[0]),B=d(x(_[0],_[0]),d(x(_[1],_[1]),x(_[2],_[2]))),z=u(B,T[0]),Y=u(B,w[0]),G=u(B,M[0]),J=u(B,I[0]),te=d(x(w[0],w[0]),d(x(w[1],w[1]),x(w[2],w[2]))),X=u(te,T[0]),K=u(te,_[0]),ae=u(te,M[0]),U=u(te,I[0]),V=d(x(M[0],M[0]),d(x(M[1],M[1]),x(M[2],M[2]))),q=u(V,T[0]),ie=u(V,_[0]),H=u(V,w[0]),ee=u(V,I[0]),Q=d(x(I[0],I[0]),d(x(I[1],I[1]),x(I[2],I[2]))),oe=u(Q,T[0]),le=u(Q,_[0]),de=u(Q,w[0]),fe=u(Q,M[0]),be=d(d(d(u(d(u(o(fe,ee),w[1]),d(u(o(de,U),-M[1]),u(o(H,ae),I[1]))),_[2]),d(u(d(u(o(fe,ee),_[1]),d(u(o(le,J),-M[1]),u(o(ie,G),I[1]))),-w[2]),u(d(u(o(de,U),_[1]),d(u(o(le,J),-w[1]),u(o(K,Y),I[1]))),M[2]))),d(u(d(u(o(H,ae),_[1]),d(u(o(ie,G),-w[1]),u(o(K,Y),M[1]))),-I[2]),d(u(d(u(o(fe,ee),_[1]),d(u(o(le,J),-M[1]),u(o(ie,G),I[1]))),T[2]),u(d(u(o(fe,ee),T[1]),d(u(o(oe,D),-M[1]),u(o(q,C),I[1]))),-_[2])))),d(d(u(d(u(o(le,J),T[1]),d(u(o(oe,D),-_[1]),u(o(z,R),I[1]))),M[2]),d(u(d(u(o(ie,G),T[1]),d(u(o(q,C),-_[1]),u(o(z,R),M[1]))),-I[2]),u(d(u(o(H,ae),_[1]),d(u(o(ie,G),-w[1]),u(o(K,Y),M[1]))),T[2]))),d(u(d(u(o(H,ae),T[1]),d(u(o(q,C),-w[1]),u(o(X,O),M[1]))),-_[2]),d(u(d(u(o(ie,G),T[1]),d(u(o(q,C),-_[1]),u(o(z,R),M[1]))),w[2]),u(d(u(o(K,Y),T[1]),d(u(o(X,O),-_[1]),u(o(z,R),w[1]))),-M[2]))))),he=d(d(d(u(d(u(o(fe,ee),w[1]),d(u(o(de,U),-M[1]),u(o(H,ae),I[1]))),T[2]),u(d(u(o(fe,ee),T[1]),d(u(o(oe,D),-M[1]),u(o(q,C),I[1]))),-w[2])),d(u(d(u(o(de,U),T[1]),d(u(o(oe,D),-w[1]),u(o(X,O),I[1]))),M[2]),u(d(u(o(H,ae),T[1]),d(u(o(q,C),-w[1]),u(o(X,O),M[1]))),-I[2]))),d(d(u(d(u(o(de,U),_[1]),d(u(o(le,J),-w[1]),u(o(K,Y),I[1]))),T[2]),u(d(u(o(de,U),T[1]),d(u(o(oe,D),-w[1]),u(o(X,O),I[1]))),-_[2])),d(u(d(u(o(le,J),T[1]),d(u(o(oe,D),-_[1]),u(o(z,R),I[1]))),w[2]),u(d(u(o(K,Y),T[1]),d(u(o(X,O),-_[1]),u(o(z,R),w[1]))),-I[2])))),_e=o(be,he);return _e[_e.length-1]}}function f(d,o,x,u){return function(T,_,w,M,I,S){var R=d(d(x(T[0],T[0]),x(T[1],T[1])),d(x(T[2],T[2]),x(T[3],T[3]))),O=u(R,_[0]),C=u(R,w[0]),D=u(R,M[0]),B=u(R,I[0]),z=u(R,S[0]),Y=d(d(x(_[0],_[0]),x(_[1],_[1])),d(x(_[2],_[2]),x(_[3],_[3]))),G=u(Y,T[0]),J=u(Y,w[0]),te=u(Y,M[0]),X=u(Y,I[0]),K=u(Y,S[0]),ae=d(d(x(w[0],w[0]),x(w[1],w[1])),d(x(w[2],w[2]),x(w[3],w[3]))),U=u(ae,T[0]),V=u(ae,_[0]),q=u(ae,M[0]),ie=u(ae,I[0]),H=u(ae,S[0]),ee=d(d(x(M[0],M[0]),x(M[1],M[1])),d(x(M[2],M[2]),x(M[3],M[3]))),Q=u(ee,T[0]),oe=u(ee,_[0]),le=u(ee,w[0]),de=u(ee,I[0]),fe=u(ee,S[0]),be=d(d(x(I[0],I[0]),x(I[1],I[1])),d(x(I[2],I[2]),x(I[3],I[3]))),he=u(be,T[0]),_e=u(be,_[0]),Ce=u(be,w[0]),Ee=u(be,M[0]),Ae=u(be,S[0]),ze=d(d(x(S[0],S[0]),x(S[1],S[1])),d(x(S[2],S[2]),x(S[3],S[3]))),ve=u(ze,T[0]),Te=u(ze,_[0]),Ie=u(ze,w[0]),De=u(ze,M[0]),Fe=u(ze,I[0]),Ue=d(d(d(u(d(d(u(d(u(o(Fe,Ae),M[1]),d(u(o(De,fe),-I[1]),u(o(Ee,de),S[1]))),w[2]),u(d(u(o(Fe,Ae),w[1]),d(u(o(Ie,H),-I[1]),u(o(Ce,ie),S[1]))),-M[2])),d(u(d(u(o(De,fe),w[1]),d(u(o(Ie,H),-M[1]),u(o(le,q),S[1]))),I[2]),u(d(u(o(Ee,de),w[1]),d(u(o(Ce,ie),-M[1]),u(o(le,q),I[1]))),-S[2]))),_[3]),d(u(d(d(u(d(u(o(Fe,Ae),M[1]),d(u(o(De,fe),-I[1]),u(o(Ee,de),S[1]))),_[2]),u(d(u(o(Fe,Ae),_[1]),d(u(o(Te,K),-I[1]),u(o(_e,X),S[1]))),-M[2])),d(u(d(u(o(De,fe),_[1]),d(u(o(Te,K),-M[1]),u(o(oe,te),S[1]))),I[2]),u(d(u(o(Ee,de),_[1]),d(u(o(_e,X),-M[1]),u(o(oe,te),I[1]))),-S[2]))),-w[3]),u(d(d(u(d(u(o(Fe,Ae),w[1]),d(u(o(Ie,H),-I[1]),u(o(Ce,ie),S[1]))),_[2]),u(d(u(o(Fe,Ae),_[1]),d(u(o(Te,K),-I[1]),u(o(_e,X),S[1]))),-w[2])),d(u(d(u(o(Ie,H),_[1]),d(u(o(Te,K),-w[1]),u(o(V,J),S[1]))),I[2]),u(d(u(o(Ce,ie),_[1]),d(u(o(_e,X),-w[1]),u(o(V,J),I[1]))),-S[2]))),M[3]))),d(d(u(d(d(u(d(u(o(De,fe),w[1]),d(u(o(Ie,H),-M[1]),u(o(le,q),S[1]))),_[2]),u(d(u(o(De,fe),_[1]),d(u(o(Te,K),-M[1]),u(o(oe,te),S[1]))),-w[2])),d(u(d(u(o(Ie,H),_[1]),d(u(o(Te,K),-w[1]),u(o(V,J),S[1]))),M[2]),u(d(u(o(le,q),_[1]),d(u(o(oe,te),-w[1]),u(o(V,J),M[1]))),-S[2]))),-I[3]),u(d(d(u(d(u(o(Ee,de),w[1]),d(u(o(Ce,ie),-M[1]),u(o(le,q),I[1]))),_[2]),u(d(u(o(Ee,de),_[1]),d(u(o(_e,X),-M[1]),u(o(oe,te),I[1]))),-w[2])),d(u(d(u(o(Ce,ie),_[1]),d(u(o(_e,X),-w[1]),u(o(V,J),I[1]))),M[2]),u(d(u(o(le,q),_[1]),d(u(o(oe,te),-w[1]),u(o(V,J),M[1]))),-I[2]))),S[3])),d(u(d(d(u(d(u(o(Fe,Ae),M[1]),d(u(o(De,fe),-I[1]),u(o(Ee,de),S[1]))),_[2]),u(d(u(o(Fe,Ae),_[1]),d(u(o(Te,K),-I[1]),u(o(_e,X),S[1]))),-M[2])),d(u(d(u(o(De,fe),_[1]),d(u(o(Te,K),-M[1]),u(o(oe,te),S[1]))),I[2]),u(d(u(o(Ee,de),_[1]),d(u(o(_e,X),-M[1]),u(o(oe,te),I[1]))),-S[2]))),T[3]),u(d(d(u(d(u(o(Fe,Ae),M[1]),d(u(o(De,fe),-I[1]),u(o(Ee,de),S[1]))),T[2]),u(d(u(o(Fe,Ae),T[1]),d(u(o(ve,z),-I[1]),u(o(he,B),S[1]))),-M[2])),d(u(d(u(o(De,fe),T[1]),d(u(o(ve,z),-M[1]),u(o(Q,D),S[1]))),I[2]),u(d(u(o(Ee,de),T[1]),d(u(o(he,B),-M[1]),u(o(Q,D),I[1]))),-S[2]))),-_[3])))),d(d(d(u(d(d(u(d(u(o(Fe,Ae),_[1]),d(u(o(Te,K),-I[1]),u(o(_e,X),S[1]))),T[2]),u(d(u(o(Fe,Ae),T[1]),d(u(o(ve,z),-I[1]),u(o(he,B),S[1]))),-_[2])),d(u(d(u(o(Te,K),T[1]),d(u(o(ve,z),-_[1]),u(o(G,O),S[1]))),I[2]),u(d(u(o(_e,X),T[1]),d(u(o(he,B),-_[1]),u(o(G,O),I[1]))),-S[2]))),M[3]),u(d(d(u(d(u(o(De,fe),_[1]),d(u(o(Te,K),-M[1]),u(o(oe,te),S[1]))),T[2]),u(d(u(o(De,fe),T[1]),d(u(o(ve,z),-M[1]),u(o(Q,D),S[1]))),-_[2])),d(u(d(u(o(Te,K),T[1]),d(u(o(ve,z),-_[1]),u(o(G,O),S[1]))),M[2]),u(d(u(o(oe,te),T[1]),d(u(o(Q,D),-_[1]),u(o(G,O),M[1]))),-S[2]))),-I[3])),d(u(d(d(u(d(u(o(Ee,de),_[1]),d(u(o(_e,X),-M[1]),u(o(oe,te),I[1]))),T[2]),u(d(u(o(Ee,de),T[1]),d(u(o(he,B),-M[1]),u(o(Q,D),I[1]))),-_[2])),d(u(d(u(o(_e,X),T[1]),d(u(o(he,B),-_[1]),u(o(G,O),I[1]))),M[2]),u(d(u(o(oe,te),T[1]),d(u(o(Q,D),-_[1]),u(o(G,O),M[1]))),-I[2]))),S[3]),u(d(d(u(d(u(o(De,fe),w[1]),d(u(o(Ie,H),-M[1]),u(o(le,q),S[1]))),_[2]),u(d(u(o(De,fe),_[1]),d(u(o(Te,K),-M[1]),u(o(oe,te),S[1]))),-w[2])),d(u(d(u(o(Ie,H),_[1]),d(u(o(Te,K),-w[1]),u(o(V,J),S[1]))),M[2]),u(d(u(o(le,q),_[1]),d(u(o(oe,te),-w[1]),u(o(V,J),M[1]))),-S[2]))),T[3]))),d(d(u(d(d(u(d(u(o(De,fe),w[1]),d(u(o(Ie,H),-M[1]),u(o(le,q),S[1]))),T[2]),u(d(u(o(De,fe),T[1]),d(u(o(ve,z),-M[1]),u(o(Q,D),S[1]))),-w[2])),d(u(d(u(o(Ie,H),T[1]),d(u(o(ve,z),-w[1]),u(o(U,C),S[1]))),M[2]),u(d(u(o(le,q),T[1]),d(u(o(Q,D),-w[1]),u(o(U,C),M[1]))),-S[2]))),-_[3]),u(d(d(u(d(u(o(De,fe),_[1]),d(u(o(Te,K),-M[1]),u(o(oe,te),S[1]))),T[2]),u(d(u(o(De,fe),T[1]),d(u(o(ve,z),-M[1]),u(o(Q,D),S[1]))),-_[2])),d(u(d(u(o(Te,K),T[1]),d(u(o(ve,z),-_[1]),u(o(G,O),S[1]))),M[2]),u(d(u(o(oe,te),T[1]),d(u(o(Q,D),-_[1]),u(o(G,O),M[1]))),-S[2]))),w[3])),d(u(d(d(u(d(u(o(Ie,H),_[1]),d(u(o(Te,K),-w[1]),u(o(V,J),S[1]))),T[2]),u(d(u(o(Ie,H),T[1]),d(u(o(ve,z),-w[1]),u(o(U,C),S[1]))),-_[2])),d(u(d(u(o(Te,K),T[1]),d(u(o(ve,z),-_[1]),u(o(G,O),S[1]))),w[2]),u(d(u(o(V,J),T[1]),d(u(o(U,C),-_[1]),u(o(G,O),w[1]))),-S[2]))),-M[3]),u(d(d(u(d(u(o(le,q),_[1]),d(u(o(oe,te),-w[1]),u(o(V,J),M[1]))),T[2]),u(d(u(o(le,q),T[1]),d(u(o(Q,D),-w[1]),u(o(U,C),M[1]))),-_[2])),d(u(d(u(o(oe,te),T[1]),d(u(o(Q,D),-_[1]),u(o(G,O),M[1]))),w[2]),u(d(u(o(V,J),T[1]),d(u(o(U,C),-_[1]),u(o(G,O),w[1]))),-M[2]))),S[3]))))),qe=d(d(d(u(d(d(u(d(u(o(Fe,Ae),M[1]),d(u(o(De,fe),-I[1]),u(o(Ee,de),S[1]))),w[2]),u(d(u(o(Fe,Ae),w[1]),d(u(o(Ie,H),-I[1]),u(o(Ce,ie),S[1]))),-M[2])),d(u(d(u(o(De,fe),w[1]),d(u(o(Ie,H),-M[1]),u(o(le,q),S[1]))),I[2]),u(d(u(o(Ee,de),w[1]),d(u(o(Ce,ie),-M[1]),u(o(le,q),I[1]))),-S[2]))),T[3]),d(u(d(d(u(d(u(o(Fe,Ae),M[1]),d(u(o(De,fe),-I[1]),u(o(Ee,de),S[1]))),T[2]),u(d(u(o(Fe,Ae),T[1]),d(u(o(ve,z),-I[1]),u(o(he,B),S[1]))),-M[2])),d(u(d(u(o(De,fe),T[1]),d(u(o(ve,z),-M[1]),u(o(Q,D),S[1]))),I[2]),u(d(u(o(Ee,de),T[1]),d(u(o(he,B),-M[1]),u(o(Q,D),I[1]))),-S[2]))),-w[3]),u(d(d(u(d(u(o(Fe,Ae),w[1]),d(u(o(Ie,H),-I[1]),u(o(Ce,ie),S[1]))),T[2]),u(d(u(o(Fe,Ae),T[1]),d(u(o(ve,z),-I[1]),u(o(he,B),S[1]))),-w[2])),d(u(d(u(o(Ie,H),T[1]),d(u(o(ve,z),-w[1]),u(o(U,C),S[1]))),I[2]),u(d(u(o(Ce,ie),T[1]),d(u(o(he,B),-w[1]),u(o(U,C),I[1]))),-S[2]))),M[3]))),d(d(u(d(d(u(d(u(o(De,fe),w[1]),d(u(o(Ie,H),-M[1]),u(o(le,q),S[1]))),T[2]),u(d(u(o(De,fe),T[1]),d(u(o(ve,z),-M[1]),u(o(Q,D),S[1]))),-w[2])),d(u(d(u(o(Ie,H),T[1]),d(u(o(ve,z),-w[1]),u(o(U,C),S[1]))),M[2]),u(d(u(o(le,q),T[1]),d(u(o(Q,D),-w[1]),u(o(U,C),M[1]))),-S[2]))),-I[3]),u(d(d(u(d(u(o(Ee,de),w[1]),d(u(o(Ce,ie),-M[1]),u(o(le,q),I[1]))),T[2]),u(d(u(o(Ee,de),T[1]),d(u(o(he,B),-M[1]),u(o(Q,D),I[1]))),-w[2])),d(u(d(u(o(Ce,ie),T[1]),d(u(o(he,B),-w[1]),u(o(U,C),I[1]))),M[2]),u(d(u(o(le,q),T[1]),d(u(o(Q,D),-w[1]),u(o(U,C),M[1]))),-I[2]))),S[3])),d(u(d(d(u(d(u(o(Fe,Ae),w[1]),d(u(o(Ie,H),-I[1]),u(o(Ce,ie),S[1]))),_[2]),u(d(u(o(Fe,Ae),_[1]),d(u(o(Te,K),-I[1]),u(o(_e,X),S[1]))),-w[2])),d(u(d(u(o(Ie,H),_[1]),d(u(o(Te,K),-w[1]),u(o(V,J),S[1]))),I[2]),u(d(u(o(Ce,ie),_[1]),d(u(o(_e,X),-w[1]),u(o(V,J),I[1]))),-S[2]))),T[3]),u(d(d(u(d(u(o(Fe,Ae),w[1]),d(u(o(Ie,H),-I[1]),u(o(Ce,ie),S[1]))),T[2]),u(d(u(o(Fe,Ae),T[1]),d(u(o(ve,z),-I[1]),u(o(he,B),S[1]))),-w[2])),d(u(d(u(o(Ie,H),T[1]),d(u(o(ve,z),-w[1]),u(o(U,C),S[1]))),I[2]),u(d(u(o(Ce,ie),T[1]),d(u(o(he,B),-w[1]),u(o(U,C),I[1]))),-S[2]))),-_[3])))),d(d(d(u(d(d(u(d(u(o(Fe,Ae),_[1]),d(u(o(Te,K),-I[1]),u(o(_e,X),S[1]))),T[2]),u(d(u(o(Fe,Ae),T[1]),d(u(o(ve,z),-I[1]),u(o(he,B),S[1]))),-_[2])),d(u(d(u(o(Te,K),T[1]),d(u(o(ve,z),-_[1]),u(o(G,O),S[1]))),I[2]),u(d(u(o(_e,X),T[1]),d(u(o(he,B),-_[1]),u(o(G,O),I[1]))),-S[2]))),w[3]),u(d(d(u(d(u(o(Ie,H),_[1]),d(u(o(Te,K),-w[1]),u(o(V,J),S[1]))),T[2]),u(d(u(o(Ie,H),T[1]),d(u(o(ve,z),-w[1]),u(o(U,C),S[1]))),-_[2])),d(u(d(u(o(Te,K),T[1]),d(u(o(ve,z),-_[1]),u(o(G,O),S[1]))),w[2]),u(d(u(o(V,J),T[1]),d(u(o(U,C),-_[1]),u(o(G,O),w[1]))),-S[2]))),-I[3])),d(u(d(d(u(d(u(o(Ce,ie),_[1]),d(u(o(_e,X),-w[1]),u(o(V,J),I[1]))),T[2]),u(d(u(o(Ce,ie),T[1]),d(u(o(he,B),-w[1]),u(o(U,C),I[1]))),-_[2])),d(u(d(u(o(_e,X),T[1]),d(u(o(he,B),-_[1]),u(o(G,O),I[1]))),w[2]),u(d(u(o(V,J),T[1]),d(u(o(U,C),-_[1]),u(o(G,O),w[1]))),-I[2]))),S[3]),u(d(d(u(d(u(o(Ee,de),w[1]),d(u(o(Ce,ie),-M[1]),u(o(le,q),I[1]))),_[2]),u(d(u(o(Ee,de),_[1]),d(u(o(_e,X),-M[1]),u(o(oe,te),I[1]))),-w[2])),d(u(d(u(o(Ce,ie),_[1]),d(u(o(_e,X),-w[1]),u(o(V,J),I[1]))),M[2]),u(d(u(o(le,q),_[1]),d(u(o(oe,te),-w[1]),u(o(V,J),M[1]))),-I[2]))),T[3]))),d(d(u(d(d(u(d(u(o(Ee,de),w[1]),d(u(o(Ce,ie),-M[1]),u(o(le,q),I[1]))),T[2]),u(d(u(o(Ee,de),T[1]),d(u(o(he,B),-M[1]),u(o(Q,D),I[1]))),-w[2])),d(u(d(u(o(Ce,ie),T[1]),d(u(o(he,B),-w[1]),u(o(U,C),I[1]))),M[2]),u(d(u(o(le,q),T[1]),d(u(o(Q,D),-w[1]),u(o(U,C),M[1]))),-I[2]))),-_[3]),u(d(d(u(d(u(o(Ee,de),_[1]),d(u(o(_e,X),-M[1]),u(o(oe,te),I[1]))),T[2]),u(d(u(o(Ee,de),T[1]),d(u(o(he,B),-M[1]),u(o(Q,D),I[1]))),-_[2])),d(u(d(u(o(_e,X),T[1]),d(u(o(he,B),-_[1]),u(o(G,O),I[1]))),M[2]),u(d(u(o(oe,te),T[1]),d(u(o(Q,D),-_[1]),u(o(G,O),M[1]))),-I[2]))),w[3])),d(u(d(d(u(d(u(o(Ce,ie),_[1]),d(u(o(_e,X),-w[1]),u(o(V,J),I[1]))),T[2]),u(d(u(o(Ce,ie),T[1]),d(u(o(he,B),-w[1]),u(o(U,C),I[1]))),-_[2])),d(u(d(u(o(_e,X),T[1]),d(u(o(he,B),-_[1]),u(o(G,O),I[1]))),w[2]),u(d(u(o(V,J),T[1]),d(u(o(U,C),-_[1]),u(o(G,O),w[1]))),-I[2]))),-M[3]),u(d(d(u(d(u(o(le,q),_[1]),d(u(o(oe,te),-w[1]),u(o(V,J),M[1]))),T[2]),u(d(u(o(le,q),T[1]),d(u(o(Q,D),-w[1]),u(o(U,C),M[1]))),-_[2])),d(u(d(u(o(oe,te),T[1]),d(u(o(Q,D),-_[1]),u(o(G,O),M[1]))),w[2]),u(d(u(o(V,J),T[1]),d(u(o(U,C),-_[1]),u(o(G,O),w[1]))),-M[2]))),I[3]))))),je=o(Ue,qe);return je[je.length-1]}}var c=[function(){return 0},function(){return 0},function(){return 0}];function l(d){var o=c[d.length];return o||(o=c[d.length]=t(d.length)),o.apply(void 0,d)}function h(d,o,x,u,T,_,w,M){return function(I,S,R,O,C,D){switch(arguments.length){case 0:case 1:return 0;case 2:return u(I,S);case 3:return T(I,S,R);case 4:return _(I,S,R,O);case 5:return w(I,S,R,O,C);case 6:return M(I,S,R,O,C,D)}for(var B=new Array(arguments.length),z=0;z<arguments.length;++z)B[z]=arguments[z];return d(B)}}!function(){for(;c.length<=6;)c.push(t(c.length));b.exports=h.apply(void 0,[l].concat(c));for(var d=0;d<=6;++d)b.exports[d]=c[d]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(m,b,y){"use strict";var e=m("robust-determinant");function r(c){return(2===c?n:3===c?a:4===c?t:5===c?p:s)(c<6?e[c]:e)}function n(c){return function(l,h){return[c([[+h[0],+l[0][1]],[+h[1],+l[1][1]]]),c([[+l[0][0],+h[0]],[+l[1][0],+h[1]]]),c(l)]}}function a(c){return function(l,h){return[c([[+h[0],+l[0][1],+l[0][2]],[+h[1],+l[1][1],+l[1][2]],[+h[2],+l[2][1],+l[2][2]]]),c([[+l[0][0],+h[0],+l[0][2]],[+l[1][0],+h[1],+l[1][2]],[+l[2][0],+h[2],+l[2][2]]]),c([[+l[0][0],+l[0][1],+h[0]],[+l[1][0],+l[1][1],+h[1]],[+l[2][0],+l[2][1],+h[2]]]),c(l)]}}function t(c){return function(l,h){return[c([[+h[0],+l[0][1],+l[0][2],+l[0][3]],[+h[1],+l[1][1],+l[1][2],+l[1][3]],[+h[2],+l[2][1],+l[2][2],+l[2][3]],[+h[3],+l[3][1],+l[3][2],+l[3][3]]]),c([[+l[0][0],+h[0],+l[0][2],+l[0][3]],[+l[1][0],+h[1],+l[1][2],+l[1][3]],[+l[2][0],+h[2],+l[2][2],+l[2][3]],[+l[3][0],+h[3],+l[3][2],+l[3][3]]]),c([[+l[0][0],+l[0][1],+h[0],+l[0][3]],[+l[1][0],+l[1][1],+h[1],+l[1][3]],[+l[2][0],+l[2][1],+h[2],+l[2][3]],[+l[3][0],+l[3][1],+h[3],+l[3][3]]]),c([[+l[0][0],+l[0][1],+l[0][2],+h[0]],[+l[1][0],+l[1][1],+l[1][2],+h[1]],[+l[2][0],+l[2][1],+l[2][2],+h[2]],[+l[3][0],+l[3][1],+l[3][2],+h[3]]]),c(l)]}}function p(c){return function(l,h){return[c([[+h[0],+l[0][1],+l[0][2],+l[0][3],+l[0][4]],[+h[1],+l[1][1],+l[1][2],+l[1][3],+l[1][4]],[+h[2],+l[2][1],+l[2][2],+l[2][3],+l[2][4]],[+h[3],+l[3][1],+l[3][2],+l[3][3],+l[3][4]],[+h[4],+l[4][1],+l[4][2],+l[4][3],+l[4][4]]]),c([[+l[0][0],+h[0],+l[0][2],+l[0][3],+l[0][4]],[+l[1][0],+h[1],+l[1][2],+l[1][3],+l[1][4]],[+l[2][0],+h[2],+l[2][2],+l[2][3],+l[2][4]],[+l[3][0],+h[3],+l[3][2],+l[3][3],+l[3][4]],[+l[4][0],+h[4],+l[4][2],+l[4][3],+l[4][4]]]),c([[+l[0][0],+l[0][1],+h[0],+l[0][3],+l[0][4]],[+l[1][0],+l[1][1],+h[1],+l[1][3],+l[1][4]],[+l[2][0],+l[2][1],+h[2],+l[2][3],+l[2][4]],[+l[3][0],+l[3][1],+h[3],+l[3][3],+l[3][4]],[+l[4][0],+l[4][1],+h[4],+l[4][3],+l[4][4]]]),c([[+l[0][0],+l[0][1],+l[0][2],+h[0],+l[0][4]],[+l[1][0],+l[1][1],+l[1][2],+h[1],+l[1][4]],[+l[2][0],+l[2][1],+l[2][2],+h[2],+l[2][4]],[+l[3][0],+l[3][1],+l[3][2],+h[3],+l[3][4]],[+l[4][0],+l[4][1],+l[4][2],+h[4],+l[4][4]]]),c([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+h[0]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+h[1]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+h[2]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+h[3]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+h[4]]]),c(l)]}}function s(c){return function(l,h){return[c([[+h[0],+l[0][1],+l[0][2],+l[0][3],+l[0][4],+l[0][5]],[+h[1],+l[1][1],+l[1][2],+l[1][3],+l[1][4],+l[1][5]],[+h[2],+l[2][1],+l[2][2],+l[2][3],+l[2][4],+l[2][5]],[+h[3],+l[3][1],+l[3][2],+l[3][3],+l[3][4],+l[3][5]],[+h[4],+l[4][1],+l[4][2],+l[4][3],+l[4][4],+l[4][5]],[+h[5],+l[5][1],+l[5][2],+l[5][3],+l[5][4],+l[5][5]]]),c([[+l[0][0],+h[0],+l[0][2],+l[0][3],+l[0][4],+l[0][5]],[+l[1][0],+h[1],+l[1][2],+l[1][3],+l[1][4],+l[1][5]],[+l[2][0],+h[2],+l[2][2],+l[2][3],+l[2][4],+l[2][5]],[+l[3][0],+h[3],+l[3][2],+l[3][3],+l[3][4],+l[3][5]],[+l[4][0],+h[4],+l[4][2],+l[4][3],+l[4][4],+l[4][5]],[+l[5][0],+h[5],+l[5][2],+l[5][3],+l[5][4],+l[5][5]]]),c([[+l[0][0],+l[0][1],+h[0],+l[0][3],+l[0][4],+l[0][5]],[+l[1][0],+l[1][1],+h[1],+l[1][3],+l[1][4],+l[1][5]],[+l[2][0],+l[2][1],+h[2],+l[2][3],+l[2][4],+l[2][5]],[+l[3][0],+l[3][1],+h[3],+l[3][3],+l[3][4],+l[3][5]],[+l[4][0],+l[4][1],+h[4],+l[4][3],+l[4][4],+l[4][5]],[+l[5][0],+l[5][1],+h[5],+l[5][3],+l[5][4],+l[5][5]]]),c([[+l[0][0],+l[0][1],+l[0][2],+h[0],+l[0][4],+l[0][5]],[+l[1][0],+l[1][1],+l[1][2],+h[1],+l[1][4],+l[1][5]],[+l[2][0],+l[2][1],+l[2][2],+h[2],+l[2][4],+l[2][5]],[+l[3][0],+l[3][1],+l[3][2],+h[3],+l[3][4],+l[3][5]],[+l[4][0],+l[4][1],+l[4][2],+h[4],+l[4][4],+l[4][5]],[+l[5][0],+l[5][1],+l[5][2],+h[5],+l[5][4],+l[5][5]]]),c([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+h[0],+l[0][5]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+h[1],+l[1][5]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+h[2],+l[2][5]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+h[3],+l[3][5]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+h[4],+l[4][5]],[+l[5][0],+l[5][1],+l[5][2],+l[5][3],+h[5],+l[5][5]]]),c([[+l[0][0],+l[0][1],+l[0][2],+l[0][3],+l[0][4],+h[0]],[+l[1][0],+l[1][1],+l[1][2],+l[1][3],+l[1][4],+h[1]],[+l[2][0],+l[2][1],+l[2][2],+l[2][3],+l[2][4],+h[2]],[+l[3][0],+l[3][1],+l[3][2],+l[3][3],+l[3][4],+h[3]],[+l[4][0],+l[4][1],+l[4][2],+l[4][3],+l[4][4],+h[4]],[+l[5][0],+l[5][1],+l[5][2],+l[5][3],+l[5][4],+h[5]]]),c(l)]}}var i=[function(){return[[0]]},function(c,l){return[[l[0]],[c[0][0]]]}];function f(c,l,h,d,o,x,u,T){return function(_,w){switch(_.length){case 0:return c(_,w);case 1:return l(_,w);case 2:return h(_,w);case 3:return d(_,w);case 4:return o(_,w);case 5:return x(_,w)}var M=u[_.length];return M||(M=u[_.length]=T(_.length)),M(_,w)}}!function(){for(;i.length<6;)i.push(r(i.length));b.exports=f.apply(void 0,i.concat([i,r]));for(var c=0;c<6;++c)b.exports[c]=i[c]}()},{"robust-determinant":280}],284:[function(m,b,y){"use strict";var e=m("two-product"),r=m("robust-sum"),n=m("robust-scale"),a=m("robust-subtract");function t(o,x,u,T){return function(_,w,M){var I=o(o(x(w[1],M[0]),x(-M[1],w[0])),o(x(_[1],w[0]),x(-w[1],_[0]))),S=o(x(_[1],M[0]),x(-M[1],_[0])),R=T(I,S);return R[R.length-1]}}function p(o,x,u,T){return function(_,w,M,I){var S=o(o(u(o(x(M[1],I[0]),x(-I[1],M[0])),w[2]),o(u(o(x(w[1],I[0]),x(-I[1],w[0])),-M[2]),u(o(x(w[1],M[0]),x(-M[1],w[0])),I[2]))),o(u(o(x(w[1],I[0]),x(-I[1],w[0])),_[2]),o(u(o(x(_[1],I[0]),x(-I[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),I[2])))),R=o(o(u(o(x(M[1],I[0]),x(-I[1],M[0])),_[2]),o(u(o(x(_[1],I[0]),x(-I[1],_[0])),-M[2]),u(o(x(_[1],M[0]),x(-M[1],_[0])),I[2]))),o(u(o(x(w[1],M[0]),x(-M[1],w[0])),_[2]),o(u(o(x(_[1],M[0]),x(-M[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),M[2])))),O=T(S,R);return O[O.length-1]}}function s(o,x,u,T){return function(_,w,M,I,S){var R=o(o(o(u(o(u(o(x(I[1],S[0]),x(-S[1],I[0])),M[2]),o(u(o(x(M[1],S[0]),x(-S[1],M[0])),-I[2]),u(o(x(M[1],I[0]),x(-I[1],M[0])),S[2]))),w[3]),o(u(o(u(o(x(I[1],S[0]),x(-S[1],I[0])),w[2]),o(u(o(x(w[1],S[0]),x(-S[1],w[0])),-I[2]),u(o(x(w[1],I[0]),x(-I[1],w[0])),S[2]))),-M[3]),u(o(u(o(x(M[1],S[0]),x(-S[1],M[0])),w[2]),o(u(o(x(w[1],S[0]),x(-S[1],w[0])),-M[2]),u(o(x(w[1],M[0]),x(-M[1],w[0])),S[2]))),I[3]))),o(u(o(u(o(x(M[1],I[0]),x(-I[1],M[0])),w[2]),o(u(o(x(w[1],I[0]),x(-I[1],w[0])),-M[2]),u(o(x(w[1],M[0]),x(-M[1],w[0])),I[2]))),-S[3]),o(u(o(u(o(x(I[1],S[0]),x(-S[1],I[0])),w[2]),o(u(o(x(w[1],S[0]),x(-S[1],w[0])),-I[2]),u(o(x(w[1],I[0]),x(-I[1],w[0])),S[2]))),_[3]),u(o(u(o(x(I[1],S[0]),x(-S[1],I[0])),_[2]),o(u(o(x(_[1],S[0]),x(-S[1],_[0])),-I[2]),u(o(x(_[1],I[0]),x(-I[1],_[0])),S[2]))),-w[3])))),o(o(u(o(u(o(x(w[1],S[0]),x(-S[1],w[0])),_[2]),o(u(o(x(_[1],S[0]),x(-S[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),S[2]))),I[3]),o(u(o(u(o(x(w[1],I[0]),x(-I[1],w[0])),_[2]),o(u(o(x(_[1],I[0]),x(-I[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),I[2]))),-S[3]),u(o(u(o(x(M[1],I[0]),x(-I[1],M[0])),w[2]),o(u(o(x(w[1],I[0]),x(-I[1],w[0])),-M[2]),u(o(x(w[1],M[0]),x(-M[1],w[0])),I[2]))),_[3]))),o(u(o(u(o(x(M[1],I[0]),x(-I[1],M[0])),_[2]),o(u(o(x(_[1],I[0]),x(-I[1],_[0])),-M[2]),u(o(x(_[1],M[0]),x(-M[1],_[0])),I[2]))),-w[3]),o(u(o(u(o(x(w[1],I[0]),x(-I[1],w[0])),_[2]),o(u(o(x(_[1],I[0]),x(-I[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),I[2]))),M[3]),u(o(u(o(x(w[1],M[0]),x(-M[1],w[0])),_[2]),o(u(o(x(_[1],M[0]),x(-M[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),M[2]))),-I[3]))))),O=o(o(o(u(o(u(o(x(I[1],S[0]),x(-S[1],I[0])),M[2]),o(u(o(x(M[1],S[0]),x(-S[1],M[0])),-I[2]),u(o(x(M[1],I[0]),x(-I[1],M[0])),S[2]))),_[3]),u(o(u(o(x(I[1],S[0]),x(-S[1],I[0])),_[2]),o(u(o(x(_[1],S[0]),x(-S[1],_[0])),-I[2]),u(o(x(_[1],I[0]),x(-I[1],_[0])),S[2]))),-M[3])),o(u(o(u(o(x(M[1],S[0]),x(-S[1],M[0])),_[2]),o(u(o(x(_[1],S[0]),x(-S[1],_[0])),-M[2]),u(o(x(_[1],M[0]),x(-M[1],_[0])),S[2]))),I[3]),u(o(u(o(x(M[1],I[0]),x(-I[1],M[0])),_[2]),o(u(o(x(_[1],I[0]),x(-I[1],_[0])),-M[2]),u(o(x(_[1],M[0]),x(-M[1],_[0])),I[2]))),-S[3]))),o(o(u(o(u(o(x(M[1],S[0]),x(-S[1],M[0])),w[2]),o(u(o(x(w[1],S[0]),x(-S[1],w[0])),-M[2]),u(o(x(w[1],M[0]),x(-M[1],w[0])),S[2]))),_[3]),u(o(u(o(x(M[1],S[0]),x(-S[1],M[0])),_[2]),o(u(o(x(_[1],S[0]),x(-S[1],_[0])),-M[2]),u(o(x(_[1],M[0]),x(-M[1],_[0])),S[2]))),-w[3])),o(u(o(u(o(x(w[1],S[0]),x(-S[1],w[0])),_[2]),o(u(o(x(_[1],S[0]),x(-S[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),S[2]))),M[3]),u(o(u(o(x(w[1],M[0]),x(-M[1],w[0])),_[2]),o(u(o(x(_[1],M[0]),x(-M[1],_[0])),-w[2]),u(o(x(_[1],w[0]),x(-w[1],_[0])),M[2]))),-S[3])))),C=T(R,O);return C[C.length-1]}}function i(o){return(3===o?t:4===o?p:s)(r,e,n,a)}var f=i(3),c=i(4),l=[function(){return 0},function(){return 0},function(o,x){return x[0]-o[0]},function(o,x,u){var T,_=(o[1]-u[1])*(x[0]-u[0]),w=(o[0]-u[0])*(x[1]-u[1]),M=_-w;if(_>0){if(w<=0)return M;T=_+w}else{if(!(_<0)||w>=0)return M;T=-(_+w)}var I=33306690738754716e-32*T;return M>=I||M<=-I?M:f(o,x,u)},function(o,x,u,T){var _=o[0]-T[0],w=x[0]-T[0],M=u[0]-T[0],I=o[1]-T[1],S=x[1]-T[1],R=u[1]-T[1],O=o[2]-T[2],C=x[2]-T[2],D=u[2]-T[2],B=w*R,z=M*S,Y=M*I,G=_*R,J=_*S,te=w*I,X=O*(B-z)+C*(Y-G)+D*(J-te),K=7771561172376103e-31*((Math.abs(B)+Math.abs(z))*Math.abs(O)+(Math.abs(Y)+Math.abs(G))*Math.abs(C)+(Math.abs(J)+Math.abs(te))*Math.abs(D));return X>K||-X>K?X:c(o,x,u,T)}];function h(o){var x=l[o.length];return x||(x=l[o.length]=i(o.length)),x.apply(void 0,o)}function d(o,x,u,T,_,w,M){return function(I,S,R,O,C){switch(arguments.length){case 0:case 1:return 0;case 2:return T(I,S);case 3:return _(I,S,R);case 4:return w(I,S,R,O);case 5:return M(I,S,R,O,C)}for(var D=new Array(arguments.length),B=0;B<arguments.length;++B)D[B]=arguments[B];return o(D)}}!function(){for(;l.length<=5;)l.push(i(l.length));b.exports=d.apply(void 0,[h].concat(l));for(var o=0;o<=5;++o)b.exports[o]=l[o]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(m,b,y){"use strict";var e=m("robust-sum"),r=m("robust-scale");b.exports=function(n,a){if(1===n.length)return r(a,n[0]);if(1===a.length)return r(n,a[0]);if(0===n.length||0===a.length)return[0];var t=[0];if(n.length<a.length)for(var p=0;p<n.length;++p)t=e(t,r(a,n[p]));else for(p=0;p<a.length;++p)t=e(t,r(n,a[p]));return t}},{"robust-scale":286,"robust-sum":289}],286:[function(m,b,y){"use strict";var e=m("two-product"),r=m("two-sum");b.exports=function(n,a){var t=n.length;if(1===t){var p=e(n[0],a);return p[0]?p:[p[1]]}var s=new Array(2*t),i=[.1,.1],f=[.1,.1],c=0;e(n[0],a,i),i[0]&&(s[c++]=i[0]);for(var l=1;l<t;++l){e(n[l],a,f),r(i[1],f[0],i),i[0]&&(s[c++]=i[0]);var d=f[1],o=i[1],x=d+o,u=o-(x-d);i[1]=x,u&&(s[c++]=u)}return i[1]&&(s[c++]=i[1]),0===c&&(s[c++]=0),s.length=c,s}},{"two-product":306,"two-sum":307}],287:[function(m,b,y){"use strict";b.exports=function(r,n,a,t){var p=e(r,a,t),s=e(n,a,t);if(p>0&&s>0||p<0&&s<0)return!1;var i=e(a,r,n),f=e(t,r,n);return!(i>0&&f>0||i<0&&f<0)&&(0!==p||0!==s||0!==i||0!==f||function(c,l,h,d){for(var o=0;o<2;++o){var x=c[o],u=l[o],T=Math.min(x,u),_=Math.max(x,u),w=h[o],M=d[o],I=Math.min(w,M);if(Math.max(w,M)<T||_<I)return!1}return!0}(r,n,a,t))};var e=m("robust-orientation")[3]},{"robust-orientation":284}],288:[function(m,b,y){"use strict";b.exports=function(e,r){var R,O,C,D,B,n=0|e.length,a=0|r.length;if(1===n&&1===a)return(B=(R=e[0])-((C=R+(O=-r[0]))-(D=C-R))+(O-D))?[B,C]:[C];var t,p,s=new Array(n+a),i=0,f=0,c=0,l=Math.abs,h=e[f],d=l(h),o=-r[c],x=l(o);d<x?(p=h,(f+=1)<n&&(d=l(h=e[f]))):(p=o,(c+=1)<a&&(x=l(o=-r[c]))),f<n&&d<x||c>=a?(t=h,(f+=1)<n&&(d=l(h=e[f]))):(t=o,(c+=1)<a&&(x=l(o=-r[c])));for(var u,T,_=t+p,w=_-t,M=p-w,I=M,S=_;f<n&&c<a;)d<x?(t=h,(f+=1)<n&&(d=l(h=e[f]))):(t=o,(c+=1)<a&&(x=l(o=-r[c]))),(M=(p=I)-(w=(_=t+p)-t))&&(s[i++]=M),I=S-((u=S+_)-(T=u-S))+(_-T),S=u;for(;f<n;)(M=(p=I)-(w=(_=(t=h)+p)-t))&&(s[i++]=M),I=S-((u=S+_)-(T=u-S))+(_-T),S=u,(f+=1)<n&&(h=e[f]);for(;c<a;)(M=(p=I)-(w=(_=(t=o)+p)-t))&&(s[i++]=M),I=S-((u=S+_)-(T=u-S))+(_-T),S=u,(c+=1)<a&&(o=-r[c]);return I&&(s[i++]=I),S&&(s[i++]=S),i||(s[i++]=0),s.length=i,s}},{}],289:[function(m,b,y){"use strict";b.exports=function(e,r){var R,O,C,D,B,n=0|e.length,a=0|r.length;if(1===n&&1===a)return(B=(R=e[0])-((C=R+(O=r[0]))-(D=C-R))+(O-D))?[B,C]:[C];var t,p,s=new Array(n+a),i=0,f=0,c=0,l=Math.abs,h=e[f],d=l(h),o=r[c],x=l(o);d<x?(p=h,(f+=1)<n&&(d=l(h=e[f]))):(p=o,(c+=1)<a&&(x=l(o=r[c]))),f<n&&d<x||c>=a?(t=h,(f+=1)<n&&(d=l(h=e[f]))):(t=o,(c+=1)<a&&(x=l(o=r[c])));for(var u,T,_=t+p,w=_-t,M=p-w,I=M,S=_;f<n&&c<a;)d<x?(t=h,(f+=1)<n&&(d=l(h=e[f]))):(t=o,(c+=1)<a&&(x=l(o=r[c]))),(M=(p=I)-(w=(_=t+p)-t))&&(s[i++]=M),I=S-((u=S+_)-(T=u-S))+(_-T),S=u;for(;f<n;)(M=(p=I)-(w=(_=(t=h)+p)-t))&&(s[i++]=M),I=S-((u=S+_)-(T=u-S))+(_-T),S=u,(f+=1)<n&&(h=e[f]);for(;c<a;)(M=(p=I)-(w=(_=(t=o)+p)-t))&&(s[i++]=M),I=S-((u=S+_)-(T=u-S))+(_-T),S=u,(c+=1)<a&&(o=r[c]);return I&&(s[i++]=I),S&&(s[i++]=S),i||(s[i++]=0),s.length=i,s}},{}],290:[function(m,b,y){"use strict";b.exports=function(n){return r(e(n))};var e=m("boundary-cells"),r=m("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(m,b,y){"use strict";b.exports=function(t,p,s,i){if(s=s||0,void 0===i&&(i=function(u){for(var T=u.length,_=0,w=0;w<T;++w)_=0|Math.max(_,u[w].length);return _-1}(t)),0===t.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var f=function(u,T){for(var _=u.length,w=r.mallocUint8(_),M=0;M<_;++M)w[M]=u[M]<T|0;return w}(p,+s),c=function(u,T){for(var _=u.length,M=r.mallocUint32(2*(T*(T+1)/2*_|0)),I=0,S=0;S<_;++S)for(var R=u[S],O=(T=R.length,0);O<T;++O)for(var C=0;C<O;++C){var D=R[C],B=R[O];M[I++]=0|Math.min(D,B),M[I++]=0|Math.max(D,B)}n(e(M,[I/2|0,2]));var z=2;for(S=2;S<I;S+=2)M[S-2]===M[S]&&M[S-1]===M[S+1]||(M[z++]=M[S],M[z++]=M[S+1]);return e(M,[z/2|0,2])}(t,i),l=function(u,T,_,w){for(var M=u.data,I=u.shape[0],S=r.mallocDouble(I),R=0,O=0;O<I;++O){var C=M[2*O],D=M[2*O+1];if(_[C]!==_[D]){var B=T[C],z=T[D];M[2*R]=C,M[2*R+1]=D,S[R++]=(z-w)/(z-B)}}return u.shape[0]=R,e(S,[R])}(c,p,f,+s),h=function(u,T){var _=r.mallocInt32(2*T),w=u.shape[0],M=u.data;_[0]=0;for(var I=0,S=0;S<w;++S){var R=M[2*S];if(R!==I){for(_[2*I+1]=S;++I<R;)_[2*I]=S,_[2*I+1]=S;_[2*I]=S}}for(_[2*I+1]=w;++I<T;)_[2*I]=_[2*I+1]=w;return _}(c,0|p.length),d=a(i)(t,c.data,h,f),o=function(u){for(var T=0|u.shape[0],_=u.data,w=new Array(T),M=0;M<T;++M)w[M]=[_[2*M],_[2*M+1]];return w}(c),x=[].slice.call(l.data,0,l.shape[0]);return r.free(f),r.free(c.data),r.free(l.data),r.free(h),{cells:d,vertexIds:o,vertexWeights:x}};var e=m("ndarray"),r=m("typedarray-pool"),n=m("ndarray-sort"),a=m("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(m,b,y){"use strict";b.exports=function(r){return e[r]()};var e=[function(){return function(r,n,a,t){for(var p=r.length,s=0;s<p;++s);return[]}},function(){function r(n,a,t,p){for(var s=0|Math.min(t,p),i=0|Math.max(t,p),f=n[2*s],c=n[2*s+1];f<c;){var l=f+c>>1,h=a[2*l+1];if(h===i)return l;i<h?c=l:f=l+1}return f}return function(n,a,t,p){for(var s=n.length,i=[],f=0;f<s;++f){var c=n[f];if(2===c.length){var l=(p[c[0]]<<0)+(p[c[1]]<<1);if(0===l||3===l)continue;switch(l){case 0:break;case 1:i.push([r(t,a,c[0],c[1])]);break;case 2:i.push([r(t,a,c[1],c[0])])}}}return i}},function(){function r(n,a,t,p){for(var s=0|Math.min(t,p),i=0|Math.max(t,p),f=n[2*s],c=n[2*s+1];f<c;){var l=f+c>>1,h=a[2*l+1];if(h===i)return l;i<h?c=l:f=l+1}return f}return function(n,a,t,p){for(var s=n.length,i=[],f=0;f<s;++f){var c=n[f],l=c.length;if(3===l){if(0==(h=(p[c[0]]<<0)+(p[c[1]]<<1)+(p[c[2]]<<2))||7===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,c[0],c[2]),r(t,a,c[0],c[1])]);break;case 2:i.push([r(t,a,c[1],c[0]),r(t,a,c[1],c[2])]);break;case 3:i.push([r(t,a,c[0],c[2]),r(t,a,c[1],c[2])]);break;case 4:i.push([r(t,a,c[2],c[1]),r(t,a,c[2],c[0])]);break;case 5:i.push([r(t,a,c[2],c[1]),r(t,a,c[0],c[1])]);break;case 6:i.push([r(t,a,c[1],c[0]),r(t,a,c[2],c[0])])}}else if(2===l){var h;if(0==(h=(p[c[0]]<<0)+(p[c[1]]<<1))||3===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,c[0],c[1])]);break;case 2:i.push([r(t,a,c[1],c[0])])}}}return i}},function(){function r(n,a,t,p){for(var s=0|Math.min(t,p),i=0|Math.max(t,p),f=n[2*s],c=n[2*s+1];f<c;){var l=f+c>>1,h=a[2*l+1];if(h===i)return l;i<h?c=l:f=l+1}return f}return function(n,a,t,p){for(var s=n.length,i=[],f=0;f<s;++f){var c=n[f],l=c.length;if(4===l){if(0==(h=(p[c[0]]<<0)+(p[c[1]]<<1)+(p[c[2]]<<2)+(p[c[3]]<<3))||15===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,c[0],c[1]),r(t,a,c[0],c[2]),r(t,a,c[0],c[3])]);break;case 2:i.push([r(t,a,c[1],c[2]),r(t,a,c[1],c[0]),r(t,a,c[1],c[3])]);break;case 3:i.push([r(t,a,c[1],c[2]),r(t,a,c[0],c[2]),r(t,a,c[0],c[3])],[r(t,a,c[1],c[3]),r(t,a,c[1],c[2]),r(t,a,c[0],c[3])]);break;case 4:i.push([r(t,a,c[2],c[0]),r(t,a,c[2],c[1]),r(t,a,c[2],c[3])]);break;case 5:i.push([r(t,a,c[0],c[1]),r(t,a,c[2],c[1]),r(t,a,c[0],c[3])],[r(t,a,c[2],c[1]),r(t,a,c[2],c[3]),r(t,a,c[0],c[3])]);break;case 6:i.push([r(t,a,c[2],c[0]),r(t,a,c[1],c[0]),r(t,a,c[1],c[3])],[r(t,a,c[2],c[3]),r(t,a,c[2],c[0]),r(t,a,c[1],c[3])]);break;case 7:i.push([r(t,a,c[0],c[3]),r(t,a,c[1],c[3]),r(t,a,c[2],c[3])]);break;case 8:i.push([r(t,a,c[3],c[1]),r(t,a,c[3],c[0]),r(t,a,c[3],c[2])]);break;case 9:i.push([r(t,a,c[3],c[1]),r(t,a,c[0],c[1]),r(t,a,c[0],c[2])],[r(t,a,c[3],c[2]),r(t,a,c[3],c[1]),r(t,a,c[0],c[2])]);break;case 10:i.push([r(t,a,c[1],c[0]),r(t,a,c[3],c[0]),r(t,a,c[1],c[2])],[r(t,a,c[3],c[0]),r(t,a,c[3],c[2]),r(t,a,c[1],c[2])]);break;case 11:i.push([r(t,a,c[1],c[2]),r(t,a,c[0],c[2]),r(t,a,c[3],c[2])]);break;case 12:i.push([r(t,a,c[3],c[0]),r(t,a,c[2],c[0]),r(t,a,c[2],c[1])],[r(t,a,c[3],c[1]),r(t,a,c[3],c[0]),r(t,a,c[2],c[1])]);break;case 13:i.push([r(t,a,c[0],c[1]),r(t,a,c[2],c[1]),r(t,a,c[3],c[1])]);break;case 14:i.push([r(t,a,c[2],c[0]),r(t,a,c[1],c[0]),r(t,a,c[3],c[0])])}}else if(3===l){if(0==(h=(p[c[0]]<<0)+(p[c[1]]<<1)+(p[c[2]]<<2))||7===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,c[0],c[2]),r(t,a,c[0],c[1])]);break;case 2:i.push([r(t,a,c[1],c[0]),r(t,a,c[1],c[2])]);break;case 3:i.push([r(t,a,c[0],c[2]),r(t,a,c[1],c[2])]);break;case 4:i.push([r(t,a,c[2],c[1]),r(t,a,c[2],c[0])]);break;case 5:i.push([r(t,a,c[2],c[1]),r(t,a,c[0],c[1])]);break;case 6:i.push([r(t,a,c[1],c[0]),r(t,a,c[2],c[0])])}}else if(2===l){var h;if(0==(h=(p[c[0]]<<0)+(p[c[1]]<<1))||3===h)continue;switch(h){case 0:break;case 1:i.push([r(t,a,c[0],c[1])]);break;case 2:i.push([r(t,a,c[1],c[0])])}}}return i}}]},{}],293:[function(m,b,y){"use strict";var e=m("bit-twiddle"),r=m("union-find");function n(c,l){var h=c.length,d=c.length-l.length,o=Math.min;if(d)return d;switch(h){case 0:return 0;case 1:return c[0]-l[0];case 2:return(T=c[0]+c[1]-l[0]-l[1])||o(c[0],c[1])-o(l[0],l[1]);case 3:var x=c[0]+c[1],u=l[0]+l[1];if(T=x+c[2]-(u+l[2]))return T;var T,_=o(c[0],c[1]),w=o(l[0],l[1]);return(T=o(_,c[2])-o(w,l[2]))||o(_+c[2],x)-o(w+l[2],u);default:var M=c.slice(0);M.sort();var I=l.slice(0);I.sort();for(var S=0;S<h;++S)if(d=M[S]-I[S])return d;return 0}}function a(c,l){return n(c[0],l[0])}function t(c,l){if(l){for(var h=c.length,d=new Array(h),o=0;o<h;++o)d[o]=[c[o],l[o]];for(d.sort(a),o=0;o<h;++o)c[o]=d[o][0],l[o]=d[o][1];return c}return c.sort(n),c}function p(c){if(0===c.length)return[];for(var l=1,h=c.length,d=1;d<h;++d){var o=c[d];if(n(o,c[d-1])){if(d===l){l++;continue}c[l++]=o}}return c.length=l,c}function s(c,l){for(var h=0,d=c.length-1,o=-1;h<=d;){var x=h+d>>1,u=n(c[x],l);u<=0?(0===u&&(o=x),h=x+1):u>0&&(d=x-1)}return o}function i(c,l){for(var h=new Array(c.length),d=0,o=h.length;d<o;++d)h[d]=[];for(var x=[],u=(d=0,l.length);d<u;++d)for(var T=l[d],_=T.length,w=1,M=1<<_;w<M;++w){x.length=e.popCount(w);for(var I=0,S=0;S<_;++S)w&1<<S&&(x[I++]=T[S]);var R=s(c,x);if(!(R<0))for(;h[R++].push(d),!(R>=c.length||0!==n(c[R],x)););}return h}function f(c,l){if(l<0)return[];for(var h=[],d=(1<<l+1)-1,o=0;o<c.length;++o)for(var x=c[o],u=d;u<1<<x.length;u=e.nextCombination(u)){for(var T=new Array(l+1),_=0,w=0;w<x.length;++w)u&1<<w&&(T[_++]=x[w]);h.push(T)}return t(h)}y.dimension=function(c){for(var l=0,h=Math.max,d=0,o=c.length;d<o;++d)l=h(l,c[d].length);return l-1},y.countVertices=function(c){for(var l=-1,h=Math.max,d=0,o=c.length;d<o;++d)for(var x=c[d],u=0,T=x.length;u<T;++u)l=h(l,x[u]);return l+1},y.cloneCells=function(c){for(var l=new Array(c.length),h=0,d=c.length;h<d;++h)l[h]=c[h].slice(0);return l},y.compareCells=n,y.normalize=t,y.unique=p,y.findCell=s,y.incidence=i,y.dual=function(c,l){if(!l)return i(p(f(c,0)),c);for(var h=new Array(l),d=0;d<l;++d)h[d]=[];d=0;for(var o=c.length;d<o;++d)for(var x=c[d],u=0,T=x.length;u<T;++u)h[x[u]].push(d);return h},y.explode=function(c){for(var l=[],h=0,d=c.length;h<d;++h)for(var o=c[h],x=0|o.length,u=1,T=1<<x;u<T;++u){for(var _=[],w=0;w<x;++w)u>>>w&1&&_.push(o[w]);l.push(_)}return t(l)},y.skeleton=f,y.boundary=function(c){for(var l=[],h=0,d=c.length;h<d;++h)for(var o=c[h],x=0,u=o.length;x<u;++x){for(var T=new Array(o.length-1),_=0,w=0;_<u;++_)_!==x&&(T[w++]=o[_]);l.push(T)}return t(l)},y.connectedComponents=function(c,l){return l?function(h,d){for(var o=new r(d),x=0;x<h.length;++x)for(var u=h[x],T=0;T<u.length;++T)for(var _=T+1;_<u.length;++_)o.link(u[T],u[_]);var w=[],M=o.ranks;for(x=0;x<M.length;++x)M[x]=-1;for(x=0;x<h.length;++x){var I=o.find(h[x][0]);M[I]<0?(M[I]=w.length,w.push([h[x].slice(0)])):w[M[I]].push(h[x].slice(0))}return w}(c,l):function(h){for(var d=p(t(f(h,0))),o=new r(d.length),x=0;x<h.length;++x)for(var u=h[x],T=0;T<u.length;++T)for(var _=s(d,[u[T]]),w=T+1;w<u.length;++w)o.link(_,s(d,[u[w]]));var M=[],I=o.ranks;for(x=0;x<I.length;++x)I[x]=-1;for(x=0;x<h.length;++x){var S=o.find(s(d,[h[x][0]]));I[S]<0?(I[S]=M.length,M.push([h[x].slice(0)])):M[I[S]].push(h[x].slice(0))}return M}(c)}},{"bit-twiddle":32,"union-find":309}],294:[function(m,b,y){arguments[4][32][0].apply(y,arguments)},{dup:32}],295:[function(m,b,y){arguments[4][293][0].apply(y,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(m,b,y){"use strict";function e(r){this.roots=new Array(r),this.ranks=new Array(r);for(var n=0;n<r;++n)this.roots[n]=n,this.ranks[n]=0}b.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},e.prototype.find=function(r){for(var n=this.roots;n[r]!==r;){var a=n[r];n[r]=n[a],r=a}return r},e.prototype.link=function(r,n){var a=this.find(r),t=this.find(n);if(a!==t){var p=this.ranks,s=this.roots,i=p[a],f=p[t];i<f?s[a]=t:f<i?s[t]=a:(s[t]=a,++p[a])}}},{}],297:[function(m,b,y){"use strict";b.exports=function(n,a,t){for(var p=a.length,s=n.length,i=new Array(p),f=new Array(p),c=new Array(p),l=new Array(p),h=0;h<p;++h)i[h]=f[h]=-1,c[h]=1/0,l[h]=!1;for(h=0;h<s;++h){var d=n[h];if(2!==d.length)throw new Error("Input must be a graph");var o=d[1],x=d[0];f[x]=-1!==f[x]?-2:o,i[o]=-1!==i[o]?-2:x}function u(te){if(l[te])return 1/0;var K,ae,q=i[te],ie=f[te];return q<0||ie<0?1/0:(K=a[q],ae=a[ie],Math.abs(e(a[te],K,ae))/Math.sqrt(Math.pow(K[0]-ae[0],2)+Math.pow(K[1]-ae[1],2)))}function T(te,X){var K=C[te],ae=C[X];C[te]=ae,C[X]=K,D[K]=X,D[ae]=te}function _(te){return c[C[te]]}function w(te){return 1&te?te-1>>1:(te>>1)-1}function M(te){for(var X=_(te);;){var K=X,ae=2*te+1,U=2*(te+1),V=te;if(ae<B){var q=_(ae);q<K&&(V=ae,K=q)}if(U<B&&_(U)<K&&(V=U),V===te)return te;T(te,V),te=V}}function I(te){for(var X=_(te);te>0;){var K=w(te);if(!(K>=0&&X<_(K)))return te;T(te,K),te=K}}function S(){if(B>0){var te=C[0];return T(0,B-1),B-=1,M(0),te}return-1}function R(te,X){var K=C[te];return c[K]===X?te:(c[K]=-1/0,I(te),S(),c[K]=X,I((B+=1)-1))}function O(te){if(!l[te]){l[te]=!0;var X=i[te],K=f[te];i[K]>=0&&(i[K]=X),f[X]>=0&&(f[X]=K),D[X]>=0&&R(D[X],u(X)),D[K]>=0&&R(D[K],u(K))}}var C=[],D=new Array(p);for(h=0;h<p;++h)(c[h]=u(h))<1/0?(D[h]=C.length,C.push(h)):D[h]=-1;var B=C.length;for(h=B>>1;h>=0;--h)M(h);for(;;){var z=S();if(z<0||c[z]>t)break;O(z)}var Y=[];for(h=0;h<p;++h)l[h]||(D[h]=Y.length,Y.push(a[h].slice()));function G(te,X){if(te[X]<0)return X;var K=X,ae=X;do{var U=te[ae];if(!l[ae]||U<0||U===ae||(U=te[ae=U],!l[ae]||U<0||U===ae))break;ae=U,K=te[K]}while(K!==ae);for(var V=X;V!==ae;V=te[V])te[V]=ae;return ae}var J=[];return n.forEach(function(te){var X=G(i,te[0]),K=G(f,te[1]);if(X>=0&&K>=0&&X!==K){var ae=D[X],U=D[K];ae!==U&&J.push([ae,U])}}),r.unique(r.normalize(J)),{positions:Y,edges:J}};var e=m("robust-orientation"),r=m("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(m,b,y){"use strict";b.exports=function(n,a){var t,p,s,i;if(a[0][0]<a[1][0])t=a[0],p=a[1];else{if(!(a[0][0]>a[1][0]))return r(a,n);t=a[1],p=a[0]}if(n[0][0]<n[1][0])s=n[0],i=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,a);s=n[1],i=n[0]}var f=e(t,p,i),c=e(t,p,s);if(f<0){if(c<=0)return f}else if(f>0){if(c>=0)return f}else if(c)return c;if(f=e(i,s,p),c=e(i,s,t),f<0){if(c<=0)return f}else if(f>0){if(c>=0)return f}else if(c)return c;return p[0]-i[0]};var e=m("robust-orientation");function r(n,a){var t,p,s,i;if(a[0][0]<a[1][0])t=a[0],p=a[1];else{if(!(a[0][0]>a[1][0])){var f=Math.min(n[0][1],n[1][1]),c=Math.max(n[0][1],n[1][1]),l=Math.min(a[0][1],a[1][1]),h=Math.max(a[0][1],a[1][1]);return c<l?c-l:f>h?f-h:c-h}t=a[1],p=a[0]}n[0][1]<n[1][1]?(s=n[0],i=n[1]):(s=n[1],i=n[0]);var d=e(p,t,s);return d||(d=e(p,t,i))||i-p}},{"robust-orientation":284}],299:[function(m,b,y){"use strict";b.exports=function(c){for(var l=c.length,h=2*l,d=new Array(h),o=0;o<l;++o){var x=c[o],u=x[0][0]<x[1][0];d[2*o]=new f(x[0][0],x,u,o),d[2*o+1]=new f(x[1][0],x,!u,o)}d.sort(function(O,C){var D=O.x-C.x;return D||(D=O.create-C.create)||Math.min(O.segment[0][1],O.segment[1][1])-Math.min(C.segment[0][1],C.segment[1][1])});var T=r(a),_=[],w=[],M=[];for(o=0;o<h;){for(var I=d[o].x,S=[];o<h;){var R=d[o];if(R.x!==I)break;o+=1,R.segment[0][0]===R.x&&R.segment[1][0]===R.x?R.create&&(R.segment[0][1]<R.segment[1][1]?(S.push(new i(R.segment[0][1],R.index,!0,!0)),S.push(new i(R.segment[1][1],R.index,!1,!1))):(S.push(new i(R.segment[1][1],R.index,!0,!1)),S.push(new i(R.segment[0][1],R.index,!1,!0)))):T=R.create?T.insert(R.segment,R.index):T.remove(R.segment)}_.push(T.root),w.push(I),M.push(S)}return new t(_,w,M)};var e=m("binary-search-bounds"),r=m("functional-red-black-tree"),n=m("robust-orientation"),a=m("./lib/order-segments");function t(c,l,h){this.slabs=c,this.coordinates=l,this.horizontal=h}function p(c,l){return c.y-l}function s(c,l){for(var h=null;c;){var d,o,x=c.key;x[0][0]<x[1][0]?(d=x[0],o=x[1]):(d=x[1],o=x[0]);var u=n(d,o,l);if(u<0)c=c.left;else if(u>0)if(l[0]!==x[1][0])h=c,c=c.right;else{if(T=s(c.right,l))return T;c=c.left}else{if(l[0]!==x[1][0])return c;var T;if(T=s(c.right,l))return T;c=c.left}}return h}function i(c,l,h,d){this.y=c,this.index=l,this.start=h,this.closed=d}function f(c,l,h,d){this.x=c,this.segment=l,this.create=h,this.index=d}t.prototype.castUp=function(c){var l=e.le(this.coordinates,c[0]);if(l<0)return-1;var h=s(this.slabs[l],c),d=-1;if(h&&(d=h.value),this.coordinates[l]===c[0]){var o=null;if(h&&(o=h.key),l>0){var x=s(this.slabs[l-1],c);x&&(o?a(x.key,o)>0&&(o=x.key,d=x.value):(d=x.value,o=x.key))}var u=this.horizontal[l];if(u.length>0){var T=e.ge(u,c[1],p);if(T<u.length){var _=u[T];if(c[1]===_.y){if(_.closed)return _.index;for(;T<u.length-1&&u[T+1].y===c[1];)if((_=u[T+=1]).closed)return _.index;if(_.y===c[1]&&!_.start){if((T+=1)>=u.length)return d;_=u[T]}}if(_.start)if(o){var w=n(o[0],o[1],[c[0],_.y]);o[0][0]>o[1][0]&&(w=-w),w>0&&(d=_.index)}else d=_.index;else _.y!==c[1]&&(d=_.index)}}}return d}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(m,b,y){"use strict";var e=m("robust-dot-product"),r=m("robust-sum");function n(t,p){var s=r(e(t,p),[p[p.length-1]]);return s[s.length-1]}function a(t,p,s,i){var f=-p/(i-p);f<0?f=0:f>1&&(f=1);for(var c=1-f,l=t.length,h=new Array(l),d=0;d<l;++d)h[d]=f*t[d]+c*s[d];return h}b.exports=function(t,p){for(var s=[],i=[],f=n(t[t.length-1],p),c=t[t.length-1],l=t[0],h=0;h<t.length;++h,c=l){var d=n(l=t[h],p);if(f<0&&d>0||f>0&&d<0){var o=a(c,d,l,f);s.push(o),i.push(o.slice())}d<0?i.push(l.slice()):d>0?s.push(l.slice()):(s.push(l.slice()),i.push(l.slice())),f=d}return{positive:s,negative:i}},b.exports.positive=function(t,p){for(var s=[],i=n(t[t.length-1],p),f=t[t.length-1],c=t[0],l=0;l<t.length;++l,f=c){var h=n(c=t[l],p);(i<0&&h>0||i>0&&h<0)&&s.push(a(f,h,c,i)),h>=0&&s.push(c.slice()),i=h}return s},b.exports.negative=function(t,p){for(var s=[],i=n(t[t.length-1],p),f=t[t.length-1],c=t[0],l=0;l<t.length;++l,f=c){var h=n(c=t[l],p);(i<0&&h>0||i>0&&h<0)&&s.push(a(f,h,c,i)),h<=0&&s.push(c.slice()),i=h}return s}},{"robust-dot-product":281,"robust-sum":289}],301:[function(m,b,y){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(s){return a(p(s),arguments)}function n(s,i){return r.apply(null,[s].concat(i||[]))}function a(s,i){var f,c,l,h,d,o,x,u,T,_=1,w=s.length,M="";for(c=0;c<w;c++)if("string"==typeof s[c])M+=s[c];else if("object"==typeof s[c]){if((h=s[c]).keys)for(f=i[_],l=0;l<h.keys.length;l++){if(null==f)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',h.keys[l],h.keys[l-1]));f=f[h.keys[l]]}else f=h.param_no?i[h.param_no]:i[_++];if(e.not_type.test(h.type)&&e.not_primitive.test(h.type)&&f instanceof Function&&(f=f()),e.numeric_arg.test(h.type)&&"number"!=typeof f&&isNaN(f))throw new TypeError(r("[sprintf] expecting number but found %T",f));switch(e.number.test(h.type)&&(u=f>=0),h.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,h.width?parseInt(h.width):0);break;case"e":f=h.precision?parseFloat(f).toExponential(h.precision):parseFloat(f).toExponential();break;case"f":f=h.precision?parseFloat(f).toFixed(h.precision):parseFloat(f);break;case"g":f=h.precision?String(Number(f.toPrecision(h.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=h.precision?f.substring(0,h.precision):f;break;case"t":f=String(!!f),f=h.precision?f.substring(0,h.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=h.precision?f.substring(0,h.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=h.precision?f.substring(0,h.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase()}e.json.test(h.type)?M+=f:(!e.number.test(h.type)||u&&!h.sign?T="":(T=u?"+":"-",f=f.toString().replace(e.sign,"")),o=h.pad_char?"0"===h.pad_char?"0":h.pad_char.charAt(1):" ",x=h.width-(T+f).length,d=h.width&&x>0?o.repeat(x):"",M+=h.align?T+f+d:"0"===o?T+d+f:d+T+f)}return M}var t=Object.create(null);function p(s){if(t[s])return t[s];for(var i,f=s,c=[],l=0;f;){if(null!==(i=e.text.exec(f)))c.push(i[0]);else if(null!==(i=e.modulo.exec(f)))c.push("%");else{if(null===(i=e.placeholder.exec(f)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){l|=1;var h=[],d=i[2],o=[];if(null===(o=e.key.exec(d)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(h.push(o[1]);""!==(d=d.substring(o[0].length));)if(null!==(o=e.key_access.exec(d)))h.push(o[1]);else{if(null===(o=e.index_access.exec(d)))throw new SyntaxError("[sprintf] failed to parse named argument key");h.push(o[1])}i[2]=h}else l|=2;if(3===l)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}f=f.substring(i[0].length)}return t[s]=c}void 0!==y&&(y.sprintf=r,y.vsprintf=n),typeof window<"u"&&(window.sprintf=r,window.vsprintf=n)}()},{}],302:[function(m,b,y){"use strict";b.exports=function(t,p){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(f,c){for(var l=r(f,c),h=l.length,d=new Array(h),o=new Array(h),x=0;x<h;++x)d[x]=[l[x]],o[x]=[x];return{positions:d,cells:o}}(t,p);var s=t.order.join()+"-"+t.dtype,i=a[s];return p=+p||0,i||(i=a[s]=function(f,c){var h=n[f.length+"d"];if(h)return h(e,f,c)}(t.order,t.dtype)),i(t,p)};var e=m("ndarray-extract-contour"),r=m("zero-crossings"),n={"2d":function(t,p,s){var i=t({order:p,scalarArguments:3,getters:"generic"===s?[0]:void 0,phase:function(f,c,l,h){return f>h|0},vertex:function(f,c,l,h,d,o,x,u,T,_,w,M,I){var S=(x<<0)+(u<<1)+(T<<2)+(_<<3)|0;if(0!==S&&15!==S)switch(S){case 0:case 15:w.push([f-.5,c-.5]);break;case 1:w.push([f-.25-.25*(h+l-2*I)/(l-h),c-.25-.25*(d+l-2*I)/(l-d)]);break;case 2:w.push([f-.75-.25*(-h-l+2*I)/(h-l),c-.25-.25*(o+h-2*I)/(h-o)]);break;case 3:w.push([f-.5,c-.5-.5*(d+l+o+h-4*I)/(l-d+h-o)]);break;case 4:w.push([f-.25-.25*(o+d-2*I)/(d-o),c-.75-.25*(-d-l+2*I)/(d-l)]);break;case 5:w.push([f-.5-.5*(h+l+o+d-4*I)/(l-h+d-o),c-.5]);break;case 6:w.push([f-.5-.25*(-h-l+o+d)/(h-l+d-o),c-.5-.25*(-d-l+o+h)/(d-l+h-o)]);break;case 7:w.push([f-.75-.25*(o+d-2*I)/(d-o),c-.75-.25*(o+h-2*I)/(h-o)]);break;case 8:w.push([f-.75-.25*(-o-d+2*I)/(o-d),c-.75-.25*(-o-h+2*I)/(o-h)]);break;case 9:w.push([f-.5-.25*(h+l+-o-d)/(l-h+o-d),c-.5-.25*(d+l+-o-h)/(l-d+o-h)]);break;case 10:w.push([f-.5-.5*(-h-l-o-d+4*I)/(h-l+o-d),c-.5]);break;case 11:w.push([f-.25-.25*(-o-d+2*I)/(o-d),c-.75-.25*(d+l-2*I)/(l-d)]);break;case 12:w.push([f-.5,c-.5-.5*(-d-l-o-h+4*I)/(d-l+o-h)]);break;case 13:w.push([f-.75-.25*(h+l-2*I)/(l-h),c-.25-.25*(-o-h+2*I)/(o-h)]);break;case 14:w.push([f-.25-.25*(-h-l+2*I)/(h-l),c-.25-.25*(-d-l+2*I)/(d-l)])}},cell:function(f,c,l,h,d,o,x,u,T){u.push(d?[f,c]:[c,f])}});return function(f,c){var l=[],h=[];return i(f,l,h,c),{positions:l,cells:h}}}},a={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(m,b,y){(function(e){(function(){"use strict";b.exports=function t(p,s,i){i=i||{};var f=a[p];f||(f=a[p]={" ":{data:new Float32Array(0),shape:.2}});var c=f[s];if(!c)if(s.length<=1||!/\d/.test(s))c=f[s]=function(I){for(var S=I.cells,R=I.positions,O=new Float32Array(6*S.length),C=0,D=0,B=0;B<S.length;++B)for(var z=S[B],Y=0;Y<3;++Y){var G=R[z[Y]];O[C++]=G[0],O[C++]=G[1]+1.4,D=Math.max(G[0],D)}return{data:O,shape:D}}(r(s,{triangles:!0,font:p,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var l=s.split(/(\d|\s)/),h=new Array(l.length),d=0,o=0,x=0;x<l.length;++x)h[x]=t(p,l[x]),d+=h[x].data.length,o+=h[x].shape,x>0&&(o+=.02);var u=new Float32Array(d),T=0,_=-.5*o;for(x=0;x<h.length;++x){for(var w=h[x].data,M=0;M<w.length;M+=2)u[T++]=w[M]+_,u[T++]=w[M+1];_+=h[x].shape+.02}c=f[s]={data:u,shape:o}}return c};var r=m("vectorize-text"),n=window||e.global||{},a=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}}).call(this)}).call(this,m("_process"))},{_process:5,"vectorize-text":311}],304:[function(m,b,y){"use strict";var e=m("parse-unit");function r(a,t){var p=e(getComputedStyle(a).getPropertyValue(t));return p[0]*n(p[1],a)}function n(a,t){switch(t=t||document.body,a=(a||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),a){case"%":return t.clientHeight/100;case"ch":case"ex":return function(p,s){var i=document.createElement("div");i.style["font-size"]="128"+p,s.appendChild(i);var f=r(i,"font-size")/128;return s.removeChild(i),f}(a,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}b.exports=n},{"parse-unit":265}],305:[function(m,b,y){"use strict";b.exports=function(d){var o=(d=d||{}).center||[0,0,0],x=d.up||[0,1,0],u=d.right||f(x),T=d.radius||1,_=d.theta||0,w=d.phi||0;if(o=[].slice.call(o,0,3),x=[].slice.call(x,0,3),t(x,x),u=[].slice.call(u,0,3),t(u,u),"eye"in d){var M=d.eye,I=[M[0]-o[0],M[1]-o[1],M[2]-o[2]];a(u,I,x),s(u[0],u[1],u[2])<1e-6?u=f(x):t(u,u),T=s(I[0],I[1],I[2]);var S=p(x,I)/T,R=p(u,I)/T;w=Math.acos(S),_=Math.acos(R)}return T=Math.log(T),new c(d.zoomMin,d.zoomMax,o,x,u,T,_,w)};var e=m("filtered-vector"),r=m("gl-mat4/invert"),n=m("gl-mat4/rotate"),a=m("gl-vec3/cross"),t=m("gl-vec3/normalize"),p=m("gl-vec3/dot");function s(d,o,x){return Math.sqrt(Math.pow(d,2)+Math.pow(o,2)+Math.pow(x,2))}function i(d){return Math.min(1,Math.max(-1,d))}function f(d){var o=Math.abs(d[0]),x=Math.abs(d[1]),u=Math.abs(d[2]),T=[0,0,0];o>Math.max(x,u)?T[2]=1:x>Math.max(o,u)?T[0]=1:T[1]=1;for(var _=0,w=0,M=0;M<3;++M)_+=d[M]*d[M],w+=T[M]*d[M];for(M=0;M<3;++M)T[M]-=w/_*d[M];return t(T,T),T}function c(d,o,x,u,T,_,w,M){this.center=e(x),this.up=e(u),this.right=e(T),this.radius=e([_]),this.angle=e([w,M]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(d,o),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var I=0;I<16;++I)this.computedMatrix[I]=.5;this.recalcMatrix(0)}var l=c.prototype;l.setDistanceLimits=function(d,o){d=d>0?Math.log(d):-1/0,o=o>0?Math.log(o):1/0,o=Math.max(o,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=o},l.getDistanceLimits=function(d){var o=this.radius.bounds[0];return d?(d[0]=Math.exp(o[0][0]),d[1]=Math.exp(o[1][0]),d):[Math.exp(o[0][0]),Math.exp(o[1][0])]},l.recalcMatrix=function(d){this.center.curve(d),this.up.curve(d),this.right.curve(d),this.radius.curve(d),this.angle.curve(d);for(var o=this.computedUp,x=this.computedRight,u=0,T=0,_=0;_<3;++_)T+=o[_]*x[_],u+=o[_]*o[_];var w=Math.sqrt(u),M=0;for(_=0;_<3;++_)x[_]-=o[_]*T/u,M+=x[_]*x[_],o[_]/=w;var I=Math.sqrt(M);for(_=0;_<3;++_)x[_]/=I;var S=this.computedToward;a(S,o,x),t(S,S);var R=Math.exp(this.computedRadius[0]),O=this.computedAngle[0],C=this.computedAngle[1],D=Math.cos(O),B=Math.sin(O),z=Math.cos(C),Y=Math.sin(C),G=this.computedCenter,J=D*z,te=B*z,X=Y,K=-D*Y,ae=-B*Y,U=z,V=this.computedEye,q=this.computedMatrix;for(_=0;_<3;++_){var ie=J*x[_]+te*S[_]+X*o[_];q[4*_+1]=K*x[_]+ae*S[_]+U*o[_],q[4*_+2]=ie,q[4*_+3]=0}var H=q[1],ee=q[5],Q=q[9],oe=q[2],le=q[6],de=q[10],fe=ee*de-Q*le,be=Q*oe-H*de,he=H*le-ee*oe,_e=s(fe,be,he);for(be/=_e,he/=_e,q[0]=fe/=_e,q[4]=be,q[8]=he,_=0;_<3;++_)V[_]=G[_]+q[2+4*_]*R;for(_=0;_<3;++_){M=0;for(var Ce=0;Ce<3;++Ce)M+=q[_+4*Ce]*V[Ce];q[12+_]=-M}q[15]=1},l.getMatrix=function(d,o){this.recalcMatrix(d);var x=this.computedMatrix;if(o){for(var u=0;u<16;++u)o[u]=x[u];return o}return x};var h=[0,0,0];l.rotate=function(d,o,x,u){if(this.angle.move(d,o,x),u){this.recalcMatrix(d);var T=this.computedMatrix;h[0]=T[2],h[1]=T[6],h[2]=T[10];for(var _=this.computedUp,w=this.computedRight,M=this.computedToward,I=0;I<3;++I)T[4*I]=_[I],T[4*I+1]=w[I],T[4*I+2]=M[I];for(n(T,T,u,h),I=0;I<3;++I)_[I]=T[4*I],w[I]=T[4*I+1];this.up.set(d,_[0],_[1],_[2]),this.right.set(d,w[0],w[1],w[2])}},l.pan=function(d,o,x,u){o=o||0,x=x||0,u=u||0,this.recalcMatrix(d);var T=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),T[1]),w=T[5],M=T[9],I=s(_,w,M),S=T[0],R=T[4],O=T[8],C=S*(_/=I)+R*(w/=I)+O*(M/=I),D=s(S-=_*C,R-=w*C,O-=M*C),B=(S/=D)*o+_*x,z=(R/=D)*o+w*x,Y=(O/=D)*o+M*x;this.center.move(d,B,z,Y);var G=Math.exp(this.computedRadius[0]);G=Math.max(1e-4,G+u),this.radius.set(d,Math.log(G))},l.translate=function(d,o,x,u){this.center.move(d,o||0,x||0,u||0)},l.setMatrix=function(d,o,x,u){var T=1;"number"==typeof x&&(T=0|x),(T<0||T>3)&&(T=1);var _=(T+2)%3;o||(this.recalcMatrix(d),o=this.computedMatrix);var w=o[T],M=o[T+4],I=o[T+8];if(u){var S=Math.abs(w),R=Math.abs(M),O=Math.abs(I),C=Math.max(S,R,O);S===C?(w=w<0?-1:1,M=I=0):O===C?(I=I<0?-1:1,w=M=0):(M=M<0?-1:1,w=I=0)}else{var D=s(w,M,I);w/=D,M/=D,I/=D}var B,z,Y=o[_],G=o[_+4],J=o[_+8],te=Y*w+G*M+J*I,X=s(Y-=w*te,G-=M*te,J-=I*te),K=M*(J/=X)-I*(G/=X),ae=I*(Y/=X)-w*J,U=w*G-M*Y,V=s(K,ae,U);if(K/=V,ae/=V,U/=V,this.center.jump(d,ve,Te,Ie),this.radius.idle(d),this.up.jump(d,w,M,I),this.right.jump(d,Y,G,J),2===T){var q=o[1],ie=o[5],H=o[9];B=fe<0?-Math.PI/2:Math.PI/2,z=Math.atan2(q*K+ie*ae+H*U,q*Y+ie*G+H*J)}else{var oe=o[2],le=o[6],de=o[10],fe=oe*w+le*M+de*I,be=oe*Y+le*G+de*J,he=oe*K+le*ae+de*U;B=Math.asin(i(fe)),z=Math.atan2(he,be)}this.angle.jump(d,z,B),this.recalcMatrix(d);var _e=o[2],Ce=o[6],Ee=o[10],Ae=this.computedMatrix;r(Ae,o);var ze=Ae[15],ve=Ae[12]/ze,Te=Ae[13]/ze,Ie=Ae[14]/ze,De=Math.exp(this.computedRadius[0]);this.center.jump(d,ve-_e*De,Te-Ce*De,Ie-Ee*De)},l.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},l.idle=function(d){this.center.idle(d),this.up.idle(d),this.right.idle(d),this.radius.idle(d),this.angle.idle(d)},l.flush=function(d){this.center.flush(d),this.up.flush(d),this.right.flush(d),this.radius.flush(d),this.angle.flush(d)},l.setDistance=function(d,o){o>0&&this.radius.set(d,Math.log(o))},l.lookAt=function(d,o,x,u){this.recalcMatrix(d),o=o||this.computedEye,x=x||this.computedCenter;var T=(u=u||this.computedUp)[0],_=u[1],w=u[2],M=s(T,_,w);if(!(M<1e-6)){T/=M,_/=M,w/=M;var I=o[0]-x[0],S=o[1]-x[1],R=o[2]-x[2],O=s(I,S,R);if(!(O<1e-6)){I/=O,S/=O,R/=O;var C=this.computedRight,D=C[0],B=C[1],z=C[2],Y=T*D+_*B+w*z,G=s(D-=Y*T,B-=Y*_,z-=Y*w);if(!(G<.01&&(G=s(D=_*R-w*S,B=w*I-T*R,z=T*S-_*I))<1e-6)){D/=G,B/=G,z/=G,this.up.set(d,T,_,w),this.right.set(d,D,B,z),this.center.set(d,x[0],x[1],x[2]),this.radius.set(d,Math.log(O));var J=_*z-w*B,te=w*D-T*z,X=T*B-_*D,K=s(J,te,X),U=D*I+B*S+z*R,V=(J/=K)*I+(te/=K)*S+(X/=K)*R,q=Math.asin(i(T*I+_*S+w*R)),ie=Math.atan2(V,U),H=this.angle._state,ee=H[H.length-1],Q=H[H.length-2];ee%=2*Math.PI;var oe=Math.abs(ee+2*Math.PI-ie),le=Math.abs(ee-ie),de=Math.abs(ee-2*Math.PI-ie);oe<le&&(ee+=2*Math.PI),de<le&&(ee-=2*Math.PI),this.angle.jump(this.angle.lastT(),ee,Q),this.angle.set(d,ie,q)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(m,b,y){"use strict";b.exports=function(r,n,a){var t=r*n,p=e*r,s=p-(p-r),i=r-s,f=e*n,c=f-(f-n),l=n-c,h=i*l-(t-s*c-i*c-s*l);return a?(a[0]=h,a[1]=t,a):[h,t]};var e=+(Math.pow(2,27)+1)},{}],307:[function(m,b,y){"use strict";b.exports=function(e,r,n){var a=e+r,t=a-e,p=r-t,s=e-(a-t);return n?(n[0]=s+p,n[1]=a,n):[s+p,a]}},{}],308:[function(m,b,y){(function(e){(function(){"use strict";var r=m("bit-twiddle"),n=m("dup"),a=m("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var t=typeof Uint8ClampedArray<"u",p=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=n([32,0])),i.BIGUINT64||(i.BIGUINT64=n([32,0])),i.BIGINT64||(i.BIGINT64=n([32,0])),i.BUFFER||(i.BUFFER=n([32,0]));var f=i.DATA,c=i.BUFFER;function l(D){if(D){var z=r.log2(D.length||D.byteLength);f[z].push(D)}}function h(D){D=r.nextPow2(D);var B=r.log2(D),z=f[B];return z.length>0?z.pop():new ArrayBuffer(D)}function d(D){return new Uint8Array(h(D),0,D)}function o(D){return new Uint16Array(h(2*D),0,D)}function x(D){return new Uint32Array(h(4*D),0,D)}function u(D){return new Int8Array(h(D),0,D)}function T(D){return new Int16Array(h(2*D),0,D)}function _(D){return new Int32Array(h(4*D),0,D)}function w(D){return new Float32Array(h(4*D),0,D)}function M(D){return new Float64Array(h(8*D),0,D)}function I(D){return t?new Uint8ClampedArray(h(D),0,D):d(D)}function S(D){return p?new BigUint64Array(h(8*D),0,D):null}function R(D){return s?new BigInt64Array(h(8*D),0,D):null}function O(D){return new DataView(h(D),0,D)}function C(D){D=r.nextPow2(D);var B=r.log2(D),z=c[B];return z.length>0?z.pop():new a(D)}y.free=function(D){if(a.isBuffer(D))c[r.log2(D.length)].push(D);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(D)&&(D=D.buffer),!D)return;var z=0|r.log2(D.length||D.byteLength);f[z].push(D)}},y.freeUint8=y.freeUint16=y.freeUint32=y.freeBigUint64=y.freeInt8=y.freeInt16=y.freeInt32=y.freeBigInt64=y.freeFloat32=y.freeFloat=y.freeFloat64=y.freeDouble=y.freeUint8Clamped=y.freeDataView=function(D){l(D.buffer)},y.freeArrayBuffer=l,y.freeBuffer=function(D){c[r.log2(D.length)].push(D)},y.malloc=function(D,B){if(void 0===B||"arraybuffer"===B)return h(D);switch(B){case"uint8":return d(D);case"uint16":return o(D);case"uint32":return x(D);case"int8":return u(D);case"int16":return T(D);case"int32":return _(D);case"float":case"float32":return w(D);case"double":case"float64":return M(D);case"uint8_clamped":return I(D);case"bigint64":return R(D);case"biguint64":return S(D);case"buffer":return C(D);case"data":case"dataview":return O(D);default:return null}return null},y.mallocArrayBuffer=h,y.mallocUint8=d,y.mallocUint16=o,y.mallocUint32=x,y.mallocInt8=u,y.mallocInt16=T,y.mallocInt32=_,y.mallocFloat32=y.mallocFloat=w,y.mallocFloat64=y.mallocDouble=M,y.mallocUint8Clamped=I,y.mallocBigUint64=S,y.mallocBigInt64=R,y.mallocDataView=O,y.mallocBuffer=C,y.clearCache=function(){for(var D=0;D<32;++D)i.UINT8[D].length=0,i.UINT16[D].length=0,i.UINT32[D].length=0,i.INT8[D].length=0,i.INT16[D].length=0,i.INT32[D].length=0,i.FLOAT[D].length=0,i.DOUBLE[D].length=0,i.BIGUINT64[D].length=0,i.BIGINT64[D].length=0,i.UINT8C[D].length=0,f[D].length=0,c[D].length=0}}).call(this)}).call(this,void 0!==g?g:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(m,b,y){"use strict";function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var a=0;a<n;++a)this.roots[a]=a,this.ranks[a]=0}b.exports=e;var r=e.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},r.find=function(n){for(var a=n,t=this.roots;t[n]!==n;)n=t[n];for(;t[a]!==n;){var p=t[a];t[a]=n,a=p}return n},r.link=function(n,a){var t=this.find(n),p=this.find(a);if(t!==p){var s=this.ranks,i=this.roots,f=s[t],c=s[p];f<c?i[t]=p:c<f?i[p]=t:(i[p]=t,++s[t])}}},{}],310:[function(m,b,y){"use strict";b.exports=function(e,r,n){return 0===e.length?e:r?(n||e.sort(r),function(a,t){for(var p=1,s=a.length,i=a[0],f=a[0],c=1;c<s;++c)if(f=i,t(i=a[c],f)){if(c===p){p++;continue}a[p++]=i}return a.length=p,a}(e,r)):(n||e.sort(),function(a){for(var t=1,p=a.length,s=a[0],i=a[0],f=1;f<p;++f,i=s)if(i=s,(s=a[f])!==i){if(f===t){t++;continue}a[t++]=s}return a.length=t,a}(e))}},{}],311:[function(m,b,y){"use strict";b.exports=function(a,t){return"object"==typeof t&&null!==t||(t={}),e(a,t.canvas||r,t.context||n,t)};var e=m("./lib/vtext"),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},{"./lib/vtext":312}],312:[function(m,b,y){b.exports=function(l,h,d,o){var x=64,u=1.25,T={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return o&&(o.size&&o.size>0&&(x=o.size),o.lineSpacing&&o.lineSpacing>0&&(u=o.lineSpacing),o.styletags&&o.styletags.breaklines&&(T.breaklines=!!o.styletags.breaklines),o.styletags&&o.styletags.bolds&&(T.bolds=!!o.styletags.bolds),o.styletags&&o.styletags.italics&&(T.italics=!!o.styletags.italics),o.styletags&&o.styletags.subscripts&&(T.subscripts=!!o.styletags.subscripts),o.styletags&&o.styletags.superscripts&&(T.superscripts=!!o.styletags.superscripts)),d.font=[o.fontStyle,o.fontVariant,o.fontWeight,x+"px",o.font].filter(function(_){return _}).join(" "),d.textAlign="start",d.textBaseline="alphabetic",d.direction="ltr",c(function(_,w,M,I,S,R){M=(M=M.replace(/\n/g,"")).replace(/\<br\>/g,!0===R.breaklines?"\n":" ");var O="",C=[];for(Y=0;Y<M.length;++Y)C[Y]=O;!0===R.bolds&&(C=s("b","b|",M,C)),!0===R.italics&&(C=s("i","i|",M,C)),!0===R.superscripts&&(C=s("sup","+1",M,C)),!0===R.subscripts&&(C=s("sub","-1",M,C));var D=[],B="";for(Y=0;Y<M.length;++Y)null!==C[Y]&&(B+=M[Y],D.push(C[Y]));var z,Y,G,J,te,X=B.split("\n"),K=X.length,ae=Math.round(S*I),U=I,V=2*I,q=0,ie=K*ae+V;_.height<ie&&(_.height=ie),w.fillStyle="#000",w.fillRect(0,0,_.width,_.height),w.fillStyle="#fff";var H=0,ee="";function Q(){if(""!==ee){var Ce=w.measureText(ee).width;w.fillText(ee,U+G,V+J),G+=Ce}}function oe(){return Math.round(te)+"px "}function le(Ce,Ee){var Ae=""+w.font;if(!0===R.subscripts){var ze=Ce.indexOf("-"),ve=Ee.indexOf("-"),Te=ze>-1?parseInt(Ce[1+ze]):0,Ie=ve>-1?parseInt(Ee[1+ve]):0;Te!==Ie&&(Ae=Ae.replace(oe(),"?px "),te*=Math.pow(.75,Ie-Te),Ae=Ae.replace("?px ",oe())),J+=.25*ae*(Ie-Te)}if(!0===R.superscripts){var De=Ce.indexOf("+"),Fe=Ee.indexOf("+"),Ue=De>-1?parseInt(Ce[1+De]):0,qe=Fe>-1?parseInt(Ee[1+Fe]):0;Ue!==qe&&(Ae=Ae.replace(oe(),"?px "),te*=Math.pow(.75,qe-Ue),Ae=Ae.replace("?px ",oe())),J-=.25*ae*(qe-Ue)}if(!0===R.bolds){var je=Ce.indexOf("b|")>-1,rt=Ee.indexOf("b|")>-1;!je&&rt&&(Ae=Ne?Ae.replace("italic ","italic bold "):"bold "+Ae),je&&!rt&&(Ae=Ae.replace("bold ",""))}if(!0===R.italics){var Ne=Ce.indexOf("i|")>-1,Be=Ee.indexOf("i|")>-1;!Ne&&Be&&(Ae="italic "+Ae),Ne&&!Be&&(Ae=Ae.replace("italic ",""))}w.font=Ae}for(z=0;z<K;++z){var de=X[z]+"\n";for(G=0,J=z*ae,te=I,ee="",Y=0;Y<de.length;++Y){var fe=Y+H<D.length?D[Y+H]:D[D.length-1];O===fe?ee+=de[Y]:(Q(),ee=de[Y],void 0!==fe&&(le(O,fe),O=fe))}Q(),H+=de.length;var be=0|Math.round(G+2*U);q<be&&(q=be)}var he=q,_e=V+ae*K;return r(w.getImageData(0,0,he,_e).data,[_e,he,4]).pick(-1,-1,0).transpose(1,0)}(h,d,l,x,u,T),o,x)},b.exports.processPixels=c;var e=m("surface-nets"),r=m("ndarray"),n=m("simplify-planar-graph"),a=m("clean-pslg"),t=m("cdt2d"),p=m("planar-graph-to-polyline");function s(l,h,d,o){for(var x="<"+l+">",u="</"+l+">",T=x.length,_=u.length,w="+"===h[0]||"-"===h[0],M=0,I=-_;M>-1&&-1!==(M=d.indexOf(x,M))&&-1!==(I=d.indexOf(u,M+T))&&!(I<=M);){for(var S=M;S<I+_;++S)if(S<M+T||S>=I)o[S]=null,d=d.substr(0,S)+" "+d.substr(S+1);else if(null!==o[S]){var R=o[S].indexOf(h[0]);-1===R?o[S]+=h:w&&(o[S]=o[S].substr(0,R+1)+(1+parseInt(o[S][R+1]))+o[S].substr(R+2))}var O=M+T,C=d.substr(O,I-O).indexOf(x);M=-1!==C?C:I+_}return o}function f(l,h,d,o){var x=function i(l,h){var d=e(l,128);return h?n(d.cells,d.positions,.25):{edges:d.cells,positions:d.positions}}(l,o),u=function(z,Y,G){for(var J=Y.textAlign||"start",te=Y.textBaseline||"alphabetic",X=[1<<30,1<<30],K=[0,0],ae=z.length,U=0;U<ae;++U)for(var V=z[U],q=0;q<2;++q)X[q]=0|Math.min(X[q],V[q]),K[q]=0|Math.max(K[q],V[q]);var ie=0;switch(J){case"center":ie=-.5*(X[0]+K[0]);break;case"right":case"end":ie=-K[0];break;case"left":case"start":ie=-X[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+J+"'")}var H=0;switch(te){case"hanging":case"top":H=-X[1];break;case"middle":H=-.5*(X[1]+K[1]);break;case"alphabetic":case"ideographic":H=-3*G;break;case"bottom":H=-K[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+te+"'")}var ee=1/G;return"lineHeight"in Y?ee*=+Y.lineHeight:"width"in Y?ee=Y.width/(K[0]-X[0]):"height"in Y&&(ee=Y.height/(K[1]-X[1])),z.map(function(Q){return[ee*(Q[0]+ie),ee*(Q[1]+H)]})}(x.positions,h,d),T=x.edges,_="ccw"===h.orientation;if(a(u,T),h.polygons||h.polygon||h.polyline){for(var w=p(T,u),M=new Array(w.length),I=0;I<w.length;++I){for(var S=w[I],R=new Array(S.length),O=0;O<S.length;++O){for(var C=S[O],D=new Array(C.length),B=0;B<C.length;++B)D[B]=u[C[B]].slice();_&&D.reverse(),R[O]=D}M[I]=R}return M}return h.triangles||h.triangulate||h.triangle?{cells:t(u,T,{delaunay:!1,exterior:!1,interior:!0}),positions:u}:{edges:T,positions:u}}function c(l,h,d){try{return f(l,h,d,!0)}catch{}try{return f(l,h,d,!1)}catch{}return h.polygons||h.polyline||h.polygon?[]:h.triangles||h.triangulate||h.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(m,b,y){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=x);var e=!1;if("function"==typeof WeakMap){var r=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var n=new r,a=Object.freeze({});if(n.set(a,1),1===n.get(a))return void(b.exports=WeakMap);e=!0}}var t=Object.getOwnPropertyNames,p=Object.defineProperty,s=Object.isExtensible,i="weakmap:ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var f=new ArrayBuffer(25),c=new Uint8Array(f);crypto.getRandomValues(c),i="weakmap:rand:"+Array.prototype.map.call(c,function(M){return(M%36).toString(36)}).join("")+"___"}if(p(Object,"getOwnPropertyNames",{value:function(M){return t(M).filter(u)}}),"getPropertyNames"in Object){var l=Object.getPropertyNames;p(Object,"getPropertyNames",{value:function(M){return l(M).filter(u)}})}!function(){var M=Object.freeze;p(Object,"freeze",{value:function(R){return T(R),M(R)}});var I=Object.seal;p(Object,"seal",{value:function(R){return T(R),I(R)}});var S=Object.preventExtensions;p(Object,"preventExtensions",{value:function(R){return T(R),S(R)}})}();var h=!1,d=0,o=function(){this instanceof o||w();var M=[],I=[],S=d++;return Object.create(o.prototype,{get___:{value:_(function(R,O){var C,D=T(R);return D?S in D?D[S]:O:(C=M.indexOf(R))>=0?I[C]:O})},has___:{value:_(function(R){var O=T(R);return O?S in O:M.indexOf(R)>=0})},set___:{value:_(function(R,O){var C,D=T(R);return D?D[S]=O:(C=M.indexOf(R))>=0?I[C]=O:(I[C=M.length]=O,M[C]=R),this})},delete___:{value:_(function(R){var O,C,D=T(R);return D?S in D&&delete D[S]:!((O=M.indexOf(R))<0||(C=M.length-1,M[O]=void 0,I[O]=I[C],M[O]=M[C],M.length=C,I.length=C,0))})}})};o.prototype=Object.create(Object.prototype,{get:{value:function(M,I){return this.get___(M,I)},writable:!0,configurable:!0},has:{value:function(M){return this.has___(M)},writable:!0,configurable:!0},set:{value:function(M,I){return this.set___(M,I)},writable:!0,configurable:!0},delete:{value:function(M){return this.delete___(M)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function M(){this instanceof o||w();var I,S=new r,R=void 0,O=!1;return I=e?function(C,D){return S.set(C,D),S.has(C)||(R||(R=new o),R.set(C,D)),this}:function(C,D){if(O)try{S.set(C,D)}catch{R||(R=new o),R.set___(C,D)}else S.set(C,D);return this},Object.create(o.prototype,{get___:{value:_(function(C,D){return R?S.has(C)?S.get(C):R.get___(C,D):S.get(C,D)})},has___:{value:_(function(C){return S.has(C)||!!R&&R.has___(C)})},set___:{value:_(I)},delete___:{value:_(function(C){var D=!!S.delete(C);return R&&R.delete___(C)||D})},permitHostObjects___:{value:_(function(C){if(C!==x)throw new Error("bogus call to permitHostObjects___");O=!0})}})}e&&typeof Proxy<"u"&&(Proxy=void 0),M.prototype=o.prototype,b.exports=M,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),b.exports=o)}function x(M){M.permitHostObjects___&&M.permitHostObjects___(x)}function u(M){return!("weakmap:"==M.substr(0,8)&&"___"===M.substr(M.length-3))}function T(M){if(M!==Object(M))throw new TypeError("Not an object: "+M);var I=M[i];if(I&&I.key===M)return I;if(s(M)){I={key:M};try{return p(M,i,{value:I,writable:!1,enumerable:!1,configurable:!1}),I}catch{return}}}function _(M){return M.prototype=null,Object.freeze(M)}function w(){h||typeof console>"u"||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(m,b,y){var e=m("./hidden-store.js");b.exports=function(){var r={};return function(n){if(("object"!=typeof n||null===n)&&"function"!=typeof n)throw new Error("Weakmap-shim: Key must be object");var a=n.valueOf(r);return a&&a.identity===r?a:e(n,r)}}},{"./hidden-store.js":315}],315:[function(m,b,y){b.exports=function(e,r){var n={identity:r},a=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(t){return t!==r?a.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(m,b,y){var e=m("./create-store.js");b.exports=function(){var r=e();return{get:function(n,a){var t=r(n);return t.hasOwnProperty("value")?t.value:a},set:function(n,a){return r(n).value=a,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},{"./create-store.js":314}],317:[function(m,b,y){"use strict";var n,a;b.exports=(n=function(){return function(n,a,t,p,s,i){var f=n[0],c=t[0],l=[0],h=c;p|=0;var d=0,o=c;for(d=0;d<f;++d){var x=a[p]-i,u=a[p+h]-i;x>=0!=u>=0&&s.push(l[0]+.5+.5*(x+u)/(x-u)),p+=o,++l[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),a={},function(t,p,s){var i=t.dtype,f=t.order,c=[i,f.join()].join(),l=a[c];return l||(a[c]=l=n([i,f])),l(t.shape.slice(0),t.data,t.stride,0|t.offset,p,s)})},{}],318:[function(m,b,y){"use strict";b.exports=function(r,n){var a=[];return n=+n||0,e(r.hi(r.shape[0]-1),a,n),a};var e=m("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)}},Ph=>{Ph(Ph.s=133)}]);
"use strict";(self.webpackChunkfmt_charts=self.webpackChunkfmt_charts||[]).push([[429],{435:(ie,Ee,de)=>{de(583)},583:()=>{!function(e){const n=e.performance;function i(M){n&&n.mark&&n.mark(M)}function o(M,E){n&&n.measure&&n.measure(M,E)}i("Zone");const c=e.__Zone_symbol_prefix||"__zone_symbol__";function a(M){return c+M}const y=!0===e[a("forceDuplicateZoneCheck")];if(e.Zone){if(y||"function"!=typeof e.Zone.__symbol__)throw new Error("Zone already loaded.");return e.Zone}let d=(()=>{class M{constructor(t,r){this._parent=t,this._name=r?r.name||"unnamed":"<root>",this._properties=r&&r.properties||{},this._zoneDelegate=new v(this,this._parent&&this._parent._zoneDelegate,r)}static assertZonePatched(){if(e.Promise!==oe.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let t=M.current;for(;t.parent;)t=t.parent;return t}static get current(){return U.zone}static get currentTask(){return re}static __load_patch(t,r,k=!1){if(oe.hasOwnProperty(t)){if(!k&&y)throw Error("Already loaded patch: "+t)}else if(!e["__Zone_disable_"+t]){const C="Zone:"+t;i(C),oe[t]=r(e,M,z),o(C,C)}}get parent(){return this._parent}get name(){return this._name}get(t){const r=this.getZoneWith(t);if(r)return r._properties[t]}getZoneWith(t){let r=this;for(;r;){if(r._properties.hasOwnProperty(t))return r;r=r._parent}return null}fork(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}wrap(t,r){if("function"!=typeof t)throw new Error("Expecting function got: "+t);const k=this._zoneDelegate.intercept(this,t,r),C=this;return function(){return C.runGuarded(k,this,arguments,r)}}run(t,r,k,C){U={parent:U,zone:this};try{return this._zoneDelegate.invoke(this,t,r,k,C)}finally{U=U.parent}}runGuarded(t,r=null,k,C){U={parent:U,zone:this};try{try{return this._zoneDelegate.invoke(this,t,r,k,C)}catch($){if(this._zoneDelegate.handleError(this,$))throw $}}finally{U=U.parent}}runTask(t,r,k){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||K).name+"; Execution: "+this.name+")");if(t.state===x&&(t.type===Q||t.type===w))return;const C=t.state!=p;C&&t._transitionTo(p,j),t.runCount++;const $=re;re=t,U={parent:U,zone:this};try{t.type==w&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,r,k)}catch(l){if(this._zoneDelegate.handleError(this,l))throw l}}finally{t.state!==x&&t.state!==h&&(t.type==Q||t.data&&t.data.isPeriodic?C&&t._transitionTo(j,p):(t.runCount=0,this._updateTaskCount(t,-1),C&&t._transitionTo(x,p,x))),U=U.parent,re=$}}scheduleTask(t){if(t.zone&&t.zone!==this){let k=this;for(;k;){if(k===t.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${t.zone.name}`);k=k.parent}}t._transitionTo(X,x);const r=[];t._zoneDelegates=r,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(k){throw t._transitionTo(h,X,x),this._zoneDelegate.handleError(this,k),k}return t._zoneDelegates===r&&this._updateTaskCount(t,1),t.state==X&&t._transitionTo(j,X),t}scheduleMicroTask(t,r,k,C){return this.scheduleTask(new m(I,t,r,k,C,void 0))}scheduleMacroTask(t,r,k,C,$){return this.scheduleTask(new m(w,t,r,k,C,$))}scheduleEventTask(t,r,k,C,$){return this.scheduleTask(new m(Q,t,r,k,C,$))}cancelTask(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||K).name+"; Execution: "+this.name+")");t._transitionTo(G,j,p);try{this._zoneDelegate.cancelTask(this,t)}catch(r){throw t._transitionTo(h,G),this._zoneDelegate.handleError(this,r),r}return this._updateTaskCount(t,-1),t._transitionTo(x,G),t.runCount=0,t}_updateTaskCount(t,r){const k=t._zoneDelegates;-1==r&&(t._zoneDelegates=null);for(let C=0;C<k.length;C++)k[C]._updateTaskCount(t.type,r)}}return M.__symbol__=a,M})();const P={name:"",onHasTask:(M,E,t,r)=>M.hasTask(t,r),onScheduleTask:(M,E,t,r)=>M.scheduleTask(t,r),onInvokeTask:(M,E,t,r,k,C)=>M.invokeTask(t,r,k,C),onCancelTask:(M,E,t,r)=>M.cancelTask(t,r)};class v{constructor(E,t,r){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=E,this._parentDelegate=t,this._forkZS=r&&(r&&r.onFork?r:t._forkZS),this._forkDlgt=r&&(r.onFork?t:t._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:t._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:t._interceptZS),this._interceptDlgt=r&&(r.onIntercept?t:t._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:t._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:t._invokeZS),this._invokeDlgt=r&&(r.onInvoke?t:t._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:t._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:t._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?t:t._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:t._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:t._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?t:t._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:t._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:t._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?t:t._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:t._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:t._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?t:t._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:t._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const k=r&&r.onHasTask;(k||t&&t._hasTaskZS)&&(this._hasTaskZS=k?r:P,this._hasTaskDlgt=t,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=E,r.onScheduleTask||(this._scheduleTaskZS=P,this._scheduleTaskDlgt=t,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=P,this._invokeTaskDlgt=t,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=P,this._cancelTaskDlgt=t,this._cancelTaskCurrZone=this.zone))}fork(E,t){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,E,t):new d(E,t)}intercept(E,t,r){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,E,t,r):t}invoke(E,t,r,k,C){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,E,t,r,k,C):t.apply(r,k)}handleError(E,t){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,E,t)}scheduleTask(E,t){let r=t;if(this._scheduleTaskZS)this._hasTaskZS&&r._zoneDelegates.push(this._hasTaskDlgtOwner),r=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,E,t),r||(r=t);else if(t.scheduleFn)t.scheduleFn(t);else{if(t.type!=I)throw new Error("Task is missing scheduleFn.");R(t)}return r}invokeTask(E,t,r,k){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,E,t,r,k):t.callback.apply(r,k)}cancelTask(E,t){let r;if(this._cancelTaskZS)r=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,E,t);else{if(!t.cancelFn)throw Error("Task is not cancelable");r=t.cancelFn(t)}return r}hasTask(E,t){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,E,t)}catch(r){this.handleError(E,r)}}_updateTaskCount(E,t){const r=this._taskCounts,k=r[E],C=r[E]=k+t;if(C<0)throw new Error("More tasks executed then were scheduled.");0!=k&&0!=C||this.hasTask(this.zone,{microTask:r.microTask>0,macroTask:r.macroTask>0,eventTask:r.eventTask>0,change:E})}}class m{constructor(E,t,r,k,C,$){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=E,this.source=t,this.data=k,this.scheduleFn=C,this.cancelFn=$,!r)throw new Error("callback is not defined");this.callback=r;const l=this;this.invoke=E===Q&&k&&k.useG?m.invokeTask:function(){return m.invokeTask.call(e,l,this,arguments)}}static invokeTask(E,t,r){E||(E=this),ee++;try{return E.runCount++,E.zone.runTask(E,t,r)}finally{1==ee&&_(),ee--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(x,X)}_transitionTo(E,t,r){if(this._state!==t&&this._state!==r)throw new Error(`${this.type} '${this.source}': can not transition to '${E}', expecting state '${t}'${r?" or '"+r+"'":""}, was '${this._state}'.`);this._state=E,E==x&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const L=a("setTimeout"),Z=a("Promise"),N=a("then");let J,B=[],H=!1;function q(M){if(J||e[Z]&&(J=e[Z].resolve(0)),J){let E=J[N];E||(E=J.then),E.call(J,M)}else e[L](M,0)}function R(M){0===ee&&0===B.length&&q(_),M&&B.push(M)}function _(){if(!H){for(H=!0;B.length;){const M=B;B=[];for(let E=0;E<M.length;E++){const t=M[E];try{t.zone.runTask(t,null,null)}catch(r){z.onUnhandledError(r)}}}z.microtaskDrainDone(),H=!1}}const K={name:"NO ZONE"},x="notScheduled",X="scheduling",j="scheduled",p="running",G="canceling",h="unknown",I="microTask",w="macroTask",Q="eventTask",oe={},z={symbol:a,currentZoneFrame:()=>U,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:R,showUncaughtError:()=>!d[a("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:q};let U={parent:null,zone:new d(null,null)},re=null,ee=0;function W(){}o("Zone","Zone"),e.Zone=d}(typeof window<"u"&&window||typeof self<"u"&&self||global);const ie=Object.getOwnPropertyDescriptor,Ee=Object.defineProperty,de=Object.getPrototypeOf,ge=Object.create,Ve=Array.prototype.slice,Oe="addEventListener",Se="removeEventListener",Ze=Zone.__symbol__(Oe),Ne=Zone.__symbol__(Se),ce="true",ae="false",ke=Zone.__symbol__("");function Ie(e,n){return Zone.current.wrap(e,n)}function Me(e,n,i,o,c){return Zone.current.scheduleMacroTask(e,n,i,o,c)}const A=Zone.__symbol__,Pe=typeof window<"u",Te=Pe?window:void 0,Y=Pe&&Te||"object"==typeof self&&self||global;function Le(e,n){for(let i=e.length-1;i>=0;i--)"function"==typeof e[i]&&(e[i]=Ie(e[i],n+"_"+i));return e}function Fe(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const Be=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,we=!("nw"in Y)&&typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process),je=!we&&!Be&&!(!Pe||!Te.HTMLElement),Ue=typeof Y.process<"u"&&"[object process]"==={}.toString.call(Y.process)&&!Be&&!(!Pe||!Te.HTMLElement),Re={},We=function(e){if(!(e=e||Y.event))return;let n=Re[e.type];n||(n=Re[e.type]=A("ON_PROPERTY"+e.type));const i=this||e.target||Y,o=i[n];let c;if(je&&i===Te&&"error"===e.type){const a=e;c=o&&o.call(this,a.message,a.filename,a.lineno,a.colno,a.error),!0===c&&e.preventDefault()}else c=o&&o.apply(this,arguments),null!=c&&!c&&e.preventDefault();return c};function qe(e,n,i){let o=ie(e,n);if(!o&&i&&ie(i,n)&&(o={enumerable:!0,configurable:!0}),!o||!o.configurable)return;const c=A("on"+n+"patched");if(e.hasOwnProperty(c)&&e[c])return;delete o.writable,delete o.value;const a=o.get,y=o.set,d=n.slice(2);let P=Re[d];P||(P=Re[d]=A("ON_PROPERTY"+d)),o.set=function(v){let m=this;!m&&e===Y&&(m=Y),m&&("function"==typeof m[P]&&m.removeEventListener(d,We),y&&y.call(m,null),m[P]=v,"function"==typeof v&&m.addEventListener(d,We,!1))},o.get=function(){let v=this;if(!v&&e===Y&&(v=Y),!v)return null;const m=v[P];if(m)return m;if(a){let L=a.call(this);if(L)return o.set.call(this,L),"function"==typeof v.removeAttribute&&v.removeAttribute(n),L}return null},Ee(e,n,o),e[c]=!0}function Xe(e,n,i){if(n)for(let o=0;o<n.length;o++)qe(e,"on"+n[o],i);else{const o=[];for(const c in e)"on"==c.slice(0,2)&&o.push(c);for(let c=0;c<o.length;c++)qe(e,o[c],i)}}const ne=A("originalInstance");function ve(e){const n=Y[e];if(!n)return;Y[A(e)]=n,Y[e]=function(){const c=Le(arguments,e);switch(c.length){case 0:this[ne]=new n;break;case 1:this[ne]=new n(c[0]);break;case 2:this[ne]=new n(c[0],c[1]);break;case 3:this[ne]=new n(c[0],c[1],c[2]);break;case 4:this[ne]=new n(c[0],c[1],c[2],c[3]);break;default:throw new Error("Arg list too long.")}},ue(Y[e],n);const i=new n(function(){});let o;for(o in i)"XMLHttpRequest"===e&&"responseBlob"===o||function(c){"function"==typeof i[c]?Y[e].prototype[c]=function(){return this[ne][c].apply(this[ne],arguments)}:Ee(Y[e].prototype,c,{set:function(a){"function"==typeof a?(this[ne][c]=Ie(a,e+"."+c),ue(this[ne][c],a)):this[ne][c]=a},get:function(){return this[ne][c]}})}(o);for(o in n)"prototype"!==o&&n.hasOwnProperty(o)&&(Y[e][o]=n[o])}function le(e,n,i){let o=e;for(;o&&!o.hasOwnProperty(n);)o=de(o);!o&&e[n]&&(o=e);const c=A(n);let a=null;if(o&&(!(a=o[c])||!o.hasOwnProperty(c))&&(a=o[c]=o[n],Fe(o&&ie(o,n)))){const d=i(a,c,n);o[n]=function(){return d(this,arguments)},ue(o[n],a)}return a}function lt(e,n,i){let o=null;function c(a){const y=a.data;return y.args[y.cbIdx]=function(){a.invoke.apply(this,arguments)},o.apply(y.target,y.args),a}o=le(e,n,a=>function(y,d){const P=i(y,d);return P.cbIdx>=0&&"function"==typeof d[P.cbIdx]?Me(P.name,d[P.cbIdx],P,c):a.apply(y,d)})}function ue(e,n){e[A("OriginalDelegate")]=n}let ze=!1,Ae=!1;function ft(){if(ze)return Ae;ze=!0;try{const e=Te.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(Ae=!0)}catch{}return Ae}Zone.__load_patch("ZoneAwarePromise",(e,n,i)=>{const o=Object.getOwnPropertyDescriptor,c=Object.defineProperty,y=i.symbol,d=[],P=!0===e[y("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],v=y("Promise"),m=y("then");i.onUnhandledError=l=>{if(i.showUncaughtError()){const u=l&&l.rejection;u?console.error("Unhandled Promise rejection:",u instanceof Error?u.message:u,"; Zone:",l.zone.name,"; Task:",l.task&&l.task.source,"; Value:",u,u instanceof Error?u.stack:void 0):console.error(l)}},i.microtaskDrainDone=()=>{for(;d.length;){const l=d.shift();try{l.zone.runGuarded(()=>{throw l.throwOriginal?l.rejection:l})}catch(u){N(u)}}};const Z=y("unhandledPromiseRejectionHandler");function N(l){i.onUnhandledError(l);try{const u=n[Z];"function"==typeof u&&u.call(this,l)}catch{}}function B(l){return l&&l.then}function H(l){return l}function J(l){return t.reject(l)}const q=y("state"),R=y("value"),_=y("finally"),K=y("parentPromiseValue"),x=y("parentPromiseState"),j=null,p=!0,G=!1;function I(l,u){return s=>{try{z(l,u,s)}catch(f){z(l,!1,f)}}}const w=function(){let l=!1;return function(s){return function(){l||(l=!0,s.apply(null,arguments))}}},oe=y("currentTaskTrace");function z(l,u,s){const f=w();if(l===s)throw new TypeError("Promise resolved with itself");if(l[q]===j){let g=null;try{("object"==typeof s||"function"==typeof s)&&(g=s&&s.then)}catch(b){return f(()=>{z(l,!1,b)})(),l}if(u!==G&&s instanceof t&&s.hasOwnProperty(q)&&s.hasOwnProperty(R)&&s[q]!==j)re(s),z(l,s[q],s[R]);else if(u!==G&&"function"==typeof g)try{g.call(s,f(I(l,u)),f(I(l,!1)))}catch(b){f(()=>{z(l,!1,b)})()}else{l[q]=u;const b=l[R];if(l[R]=s,l[_]===_&&u===p&&(l[q]=l[x],l[R]=l[K]),u===G&&s instanceof Error){const T=n.currentTask&&n.currentTask.data&&n.currentTask.data.__creationTrace__;T&&c(s,oe,{configurable:!0,enumerable:!1,writable:!0,value:T})}for(let T=0;T<b.length;)ee(l,b[T++],b[T++],b[T++],b[T++]);if(0==b.length&&u==G){l[q]=0;let T=s;try{throw new Error("Uncaught (in promise): "+function a(l){return l&&l.toString===Object.prototype.toString?(l.constructor&&l.constructor.name||"")+": "+JSON.stringify(l):l?l.toString():Object.prototype.toString.call(l)}(s)+(s&&s.stack?"\n"+s.stack:""))}catch(D){T=D}P&&(T.throwOriginal=!0),T.rejection=s,T.promise=l,T.zone=n.current,T.task=n.currentTask,d.push(T),i.scheduleMicroTask()}}}return l}const U=y("rejectionHandledHandler");function re(l){if(0===l[q]){try{const u=n[U];u&&"function"==typeof u&&u.call(this,{rejection:l[R],promise:l})}catch{}l[q]=G;for(let u=0;u<d.length;u++)l===d[u].promise&&d.splice(u,1)}}function ee(l,u,s,f,g){re(l);const b=l[q],T=b?"function"==typeof f?f:H:"function"==typeof g?g:J;u.scheduleMicroTask("Promise.then",()=>{try{const D=l[R],O=!!s&&_===s[_];O&&(s[K]=D,s[x]=b);const S=u.run(T,void 0,O&&T!==J&&T!==H?[]:[D]);z(s,!0,S)}catch(D){z(s,!1,D)}},s)}const M=function(){},E=e.AggregateError;class t{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(u){return z(new this(null),p,u)}static reject(u){return z(new this(null),G,u)}static any(u){if(!u||"function"!=typeof u[Symbol.iterator])return Promise.reject(new E([],"All promises were rejected"));const s=[];let f=0;try{for(let T of u)f++,s.push(t.resolve(T))}catch{return Promise.reject(new E([],"All promises were rejected"))}if(0===f)return Promise.reject(new E([],"All promises were rejected"));let g=!1;const b=[];return new t((T,D)=>{for(let O=0;O<s.length;O++)s[O].then(S=>{g||(g=!0,T(S))},S=>{b.push(S),f--,0===f&&(g=!0,D(new E(b,"All promises were rejected")))})})}static race(u){let s,f,g=new this((D,O)=>{s=D,f=O});function b(D){s(D)}function T(D){f(D)}for(let D of u)B(D)||(D=this.resolve(D)),D.then(b,T);return g}static all(u){return t.allWithCallback(u)}static allSettled(u){return(this&&this.prototype instanceof t?this:t).allWithCallback(u,{thenCallback:f=>({status:"fulfilled",value:f}),errorCallback:f=>({status:"rejected",reason:f})})}static allWithCallback(u,s){let f,g,b=new this((S,V)=>{f=S,g=V}),T=2,D=0;const O=[];for(let S of u){B(S)||(S=this.resolve(S));const V=D;try{S.then(F=>{O[V]=s?s.thenCallback(F):F,T--,0===T&&f(O)},F=>{s?(O[V]=s.errorCallback(F),T--,0===T&&f(O)):g(F)})}catch(F){g(F)}T++,D++}return T-=2,0===T&&f(O),b}constructor(u){const s=this;if(!(s instanceof t))throw new Error("Must be an instanceof Promise.");s[q]=j,s[R]=[];try{const f=w();u&&u(f(I(s,p)),f(I(s,G)))}catch(f){z(s,!1,f)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return t}then(u,s){var f;let g=null===(f=this.constructor)||void 0===f?void 0:f[Symbol.species];(!g||"function"!=typeof g)&&(g=this.constructor||t);const b=new g(M),T=n.current;return this[q]==j?this[R].push(T,b,u,s):ee(this,T,b,u,s),b}catch(u){return this.then(null,u)}finally(u){var s;let f=null===(s=this.constructor)||void 0===s?void 0:s[Symbol.species];(!f||"function"!=typeof f)&&(f=t);const g=new f(M);g[_]=_;const b=n.current;return this[q]==j?this[R].push(b,g,u,u):ee(this,b,g,u,u),g}}t.resolve=t.resolve,t.reject=t.reject,t.race=t.race,t.all=t.all;const r=e[v]=e.Promise;e.Promise=t;const k=y("thenPatched");function C(l){const u=l.prototype,s=o(u,"then");if(s&&(!1===s.writable||!s.configurable))return;const f=u.then;u[m]=f,l.prototype.then=function(g,b){return new t((D,O)=>{f.call(this,D,O)}).then(g,b)},l[k]=!0}return i.patchThen=C,r&&(C(r),le(e,"fetch",l=>function $(l){return function(u,s){let f=l.apply(u,s);if(f instanceof t)return f;let g=f.constructor;return g[k]||C(g),f}}(l))),Promise[n.__symbol__("uncaughtPromiseErrors")]=d,t}),Zone.__load_patch("toString",e=>{const n=Function.prototype.toString,i=A("OriginalDelegate"),o=A("Promise"),c=A("Error"),a=function(){if("function"==typeof this){const v=this[i];if(v)return"function"==typeof v?n.call(v):Object.prototype.toString.call(v);if(this===Promise){const m=e[o];if(m)return n.call(m)}if(this===Error){const m=e[c];if(m)return n.call(m)}}return n.call(this)};a[i]=n,Function.prototype.toString=a;const y=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":y.call(this)}});let ye=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ye=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ye=!1}const ht={useG:!0},te={},Ye={},$e=new RegExp("^"+ke+"(\\w+)(true|false)$"),Ke=A("propagationStopped");function Je(e,n){const i=(n?n(e):e)+ae,o=(n?n(e):e)+ce,c=ke+i,a=ke+o;te[e]={},te[e][ae]=c,te[e][ce]=a}function dt(e,n,i,o){const c=o&&o.add||Oe,a=o&&o.rm||Se,y=o&&o.listeners||"eventListeners",d=o&&o.rmAll||"removeAllListeners",P=A(c),v="."+c+":",Z=function(R,_,K){if(R.isRemoved)return;const x=R.callback;let X;"object"==typeof x&&x.handleEvent&&(R.callback=p=>x.handleEvent(p),R.originalDelegate=x);try{R.invoke(R,_,[K])}catch(p){X=p}const j=R.options;return j&&"object"==typeof j&&j.once&&_[a].call(_,K.type,R.originalDelegate?R.originalDelegate:R.callback,j),X};function N(R,_,K){if(!(_=_||e.event))return;const x=R||_.target||e,X=x[te[_.type][K?ce:ae]];if(X){const j=[];if(1===X.length){const p=Z(X[0],x,_);p&&j.push(p)}else{const p=X.slice();for(let G=0;G<p.length&&(!_||!0!==_[Ke]);G++){const h=Z(p[G],x,_);h&&j.push(h)}}if(1===j.length)throw j[0];for(let p=0;p<j.length;p++){const G=j[p];n.nativeScheduleMicroTask(()=>{throw G})}}}const B=function(R){return N(this,R,!1)},H=function(R){return N(this,R,!0)};function J(R,_){if(!R)return!1;let K=!0;_&&void 0!==_.useG&&(K=_.useG);const x=_&&_.vh;let X=!0;_&&void 0!==_.chkDup&&(X=_.chkDup);let j=!1;_&&void 0!==_.rt&&(j=_.rt);let p=R;for(;p&&!p.hasOwnProperty(c);)p=de(p);if(!p&&R[c]&&(p=R),!p||p[P])return!1;const G=_&&_.eventNameToString,h={},I=p[P]=p[c],w=p[A(a)]=p[a],Q=p[A(y)]=p[y],oe=p[A(d)]=p[d];let z;function U(s,f){return!ye&&"object"==typeof s&&s?!!s.capture:ye&&f?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?Object.assign(Object.assign({},s),{passive:!0}):s:{passive:!0}:s}_&&_.prepend&&(z=p[A(_.prepend)]=p[_.prepend]);const t=K?function(s){if(!h.isExisting)return I.call(h.target,h.eventName,h.capture?H:B,h.options)}:function(s){return I.call(h.target,h.eventName,s.invoke,h.options)},r=K?function(s){if(!s.isRemoved){const f=te[s.eventName];let g;f&&(g=f[s.capture?ce:ae]);const b=g&&s.target[g];if(b)for(let T=0;T<b.length;T++)if(b[T]===s){b.splice(T,1),s.isRemoved=!0,0===b.length&&(s.allRemoved=!0,s.target[g]=null);break}}if(s.allRemoved)return w.call(s.target,s.eventName,s.capture?H:B,s.options)}:function(s){return w.call(s.target,s.eventName,s.invoke,s.options)},C=_&&_.diff?_.diff:function(s,f){const g=typeof f;return"function"===g&&s.callback===f||"object"===g&&s.originalDelegate===f},$=Zone[A("UNPATCHED_EVENTS")],l=e[A("PASSIVE_EVENTS")],u=function(s,f,g,b,T=!1,D=!1){return function(){const O=this||e;let S=arguments[0];_&&_.transferEventName&&(S=_.transferEventName(S));let V=arguments[1];if(!V)return s.apply(this,arguments);if(we&&"uncaughtException"===S)return s.apply(this,arguments);let F=!1;if("function"!=typeof V){if(!V.handleEvent)return s.apply(this,arguments);F=!0}if(x&&!x(s,V,O,arguments))return;const fe=ye&&!!l&&-1!==l.indexOf(S),se=U(arguments[2],fe);if($)for(let _e=0;_e<$.length;_e++)if(S===$[_e])return fe?s.call(O,S,V,se):s.apply(this,arguments);const xe=!!se&&("boolean"==typeof se||se.capture),nt=!(!se||"object"!=typeof se)&&se.once,gt=Zone.current;let Ge=te[S];Ge||(Je(S,G),Ge=te[S]);const rt=Ge[xe?ce:ae];let De,me=O[rt],ot=!1;if(me){if(ot=!0,X)for(let _e=0;_e<me.length;_e++)if(C(me[_e],V))return}else me=O[rt]=[];const st=O.constructor.name,it=Ye[st];it&&(De=it[S]),De||(De=st+f+(G?G(S):S)),h.options=se,nt&&(h.options.once=!1),h.target=O,h.capture=xe,h.eventName=S,h.isExisting=ot;const be=K?ht:void 0;be&&(be.taskData=h);const he=gt.scheduleEventTask(De,V,be,g,b);return h.target=null,be&&(be.taskData=null),nt&&(se.once=!0),!ye&&"boolean"==typeof he.options||(he.options=se),he.target=O,he.capture=xe,he.eventName=S,F&&(he.originalDelegate=V),D?me.unshift(he):me.push(he),T?O:void 0}};return p[c]=u(I,v,t,r,j),z&&(p.prependListener=u(z,".prependListener:",function(s){return z.call(h.target,h.eventName,s.invoke,h.options)},r,j,!0)),p[a]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=arguments[2],b=!!g&&("boolean"==typeof g||g.capture),T=arguments[1];if(!T)return w.apply(this,arguments);if(x&&!x(w,T,s,arguments))return;const D=te[f];let O;D&&(O=D[b?ce:ae]);const S=O&&s[O];if(S)for(let V=0;V<S.length;V++){const F=S[V];if(C(F,T))return S.splice(V,1),F.isRemoved=!0,0===S.length&&(F.allRemoved=!0,s[O]=null,"string"==typeof f)&&(s[ke+"ON_PROPERTY"+f]=null),F.zone.cancelTask(F),j?s:void 0}return w.apply(this,arguments)},p[y]=function(){const s=this||e;let f=arguments[0];_&&_.transferEventName&&(f=_.transferEventName(f));const g=[],b=Qe(s,G?G(f):f);for(let T=0;T<b.length;T++){const D=b[T];g.push(D.originalDelegate?D.originalDelegate:D.callback)}return g},p[d]=function(){const s=this||e;let f=arguments[0];if(f){_&&_.transferEventName&&(f=_.transferEventName(f));const g=te[f];if(g){const D=s[g[ae]],O=s[g[ce]];if(D){const S=D.slice();for(let V=0;V<S.length;V++){const F=S[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}if(O){const S=O.slice();for(let V=0;V<S.length;V++){const F=S[V];this[a].call(this,f,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}}}else{const g=Object.keys(s);for(let b=0;b<g.length;b++){const D=$e.exec(g[b]);let O=D&&D[1];O&&"removeListener"!==O&&this[d].call(this,O)}this[d].call(this,"removeListener")}if(j)return this},ue(p[c],I),ue(p[a],w),oe&&ue(p[d],oe),Q&&ue(p[y],Q),!0}let q=[];for(let R=0;R<i.length;R++)q[R]=J(i[R],o);return q}function Qe(e,n){if(!n){const a=[];for(let y in e){const d=$e.exec(y);let P=d&&d[1];if(P&&(!n||P===n)){const v=e[y];if(v)for(let m=0;m<v.length;m++)a.push(v[m])}}return a}let i=te[n];i||(Je(n),i=te[n]);const o=e[i[ae]],c=e[i[ce]];return o?c?o.concat(c):o.slice():c?c.slice():[]}function _t(e,n){const i=e.Event;i&&i.prototype&&n.patchMethod(i.prototype,"stopImmediatePropagation",o=>function(c,a){c[Ke]=!0,o&&o.apply(c,a)})}function Et(e,n,i,o,c){const a=Zone.__symbol__(o);if(n[a])return;const y=n[a]=n[o];n[o]=function(d,P,v){return P&&P.prototype&&c.forEach(function(m){const L=`${i}.${o}::`+m,Z=P.prototype;try{if(Z.hasOwnProperty(m)){const N=e.ObjectGetOwnPropertyDescriptor(Z,m);N&&N.value?(N.value=e.wrapWithCurrentZone(N.value,L),e._redefineProperty(P.prototype,m,N)):Z[m]&&(Z[m]=e.wrapWithCurrentZone(Z[m],L))}else Z[m]&&(Z[m]=e.wrapWithCurrentZone(Z[m],L))}catch{}}),y.call(n,d,P,v)},e.attachOriginToPatched(n[o],y)}function et(e,n,i){if(!i||0===i.length)return n;const o=i.filter(a=>a.target===e);if(!o||0===o.length)return n;const c=o[0].ignoreProperties;return n.filter(a=>-1===c.indexOf(a))}function tt(e,n,i,o){e&&Xe(e,et(e,n,i),o)}function He(e){return Object.getOwnPropertyNames(e).filter(n=>n.startsWith("on")&&n.length>2).map(n=>n.substring(2))}Zone.__load_patch("util",(e,n,i)=>{const o=He(e);i.patchOnProperties=Xe,i.patchMethod=le,i.bindArguments=Le,i.patchMacroTask=lt;const c=n.__symbol__("BLACK_LISTED_EVENTS"),a=n.__symbol__("UNPATCHED_EVENTS");e[a]&&(e[c]=e[a]),e[c]&&(n[c]=n[a]=e[c]),i.patchEventPrototype=_t,i.patchEventTarget=dt,i.isIEOrEdge=ft,i.ObjectDefineProperty=Ee,i.ObjectGetOwnPropertyDescriptor=ie,i.ObjectCreate=ge,i.ArraySlice=Ve,i.patchClass=ve,i.wrapWithCurrentZone=Ie,i.filterProperties=et,i.attachOriginToPatched=ue,i._redefineProperty=Object.defineProperty,i.patchCallbacks=Et,i.getGlobalObjects=()=>({globalSources:Ye,zoneSymbolEventNames:te,eventNames:o,isBrowser:je,isMix:Ue,isNode:we,TRUE_STR:ce,FALSE_STR:ae,ZONE_SYMBOL_PREFIX:ke,ADD_EVENT_LISTENER_STR:Oe,REMOVE_EVENT_LISTENER_STR:Se})});const Ce=A("zoneTask");function pe(e,n,i,o){let c=null,a=null;i+=o;const y={};function d(v){const m=v.data;return m.args[0]=function(){return v.invoke.apply(this,arguments)},m.handleId=c.apply(e,m.args),v}function P(v){return a.call(e,v.data.handleId)}c=le(e,n+=o,v=>function(m,L){if("function"==typeof L[0]){const Z={isPeriodic:"Interval"===o,delay:"Timeout"===o||"Interval"===o?L[1]||0:void 0,args:L},N=L[0];L[0]=function(){try{return N.apply(this,arguments)}finally{Z.isPeriodic||("number"==typeof Z.handleId?delete y[Z.handleId]:Z.handleId&&(Z.handleId[Ce]=null))}};const B=Me(n,L[0],Z,d,P);if(!B)return B;const H=B.data.handleId;return"number"==typeof H?y[H]=B:H&&(H[Ce]=B),H&&H.ref&&H.unref&&"function"==typeof H.ref&&"function"==typeof H.unref&&(B.ref=H.ref.bind(H),B.unref=H.unref.bind(H)),"number"==typeof H||H?H:B}return v.apply(e,L)}),a=le(e,i,v=>function(m,L){const Z=L[0];let N;"number"==typeof Z?N=y[Z]:(N=Z&&Z[Ce],N||(N=Z)),N&&"string"==typeof N.type?"notScheduled"!==N.state&&(N.cancelFn&&N.data.isPeriodic||0===N.runCount)&&("number"==typeof Z?delete y[Z]:Z&&(Z[Ce]=null),N.zone.cancelTask(N)):v.apply(e,L)})}Zone.__load_patch("legacy",e=>{const n=e[Zone.__symbol__("legacyPatch")];n&&n()}),Zone.__load_patch("queueMicrotask",(e,n,i)=>{i.patchMethod(e,"queueMicrotask",o=>function(c,a){n.current.scheduleMicroTask("queueMicrotask",a[0])})}),Zone.__load_patch("timers",e=>{const n="set",i="clear";pe(e,n,i,"Timeout"),pe(e,n,i,"Interval"),pe(e,n,i,"Immediate")}),Zone.__load_patch("requestAnimationFrame",e=>{pe(e,"request","cancel","AnimationFrame"),pe(e,"mozRequest","mozCancel","AnimationFrame"),pe(e,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(e,n)=>{const i=["alert","prompt","confirm"];for(let o=0;o<i.length;o++)le(e,i[o],(a,y,d)=>function(P,v){return n.current.run(a,e,v,d)})}),Zone.__load_patch("EventTarget",(e,n,i)=>{(function mt(e,n){n.patchEventPrototype(e,n)})(e,i),function pt(e,n){if(Zone[n.symbol("patchEventTarget")])return;const{eventNames:i,zoneSymbolEventNames:o,TRUE_STR:c,FALSE_STR:a,ZONE_SYMBOL_PREFIX:y}=n.getGlobalObjects();for(let P=0;P<i.length;P++){const v=i[P],Z=y+(v+a),N=y+(v+c);o[v]={},o[v][a]=Z,o[v][c]=N}const d=e.EventTarget;d&&d.prototype&&n.patchEventTarget(e,n,[d&&d.prototype])}(e,i);const o=e.XMLHttpRequestEventTarget;o&&o.prototype&&i.patchEventTarget(e,i,[o.prototype])}),Zone.__load_patch("MutationObserver",(e,n,i)=>{ve("MutationObserver"),ve("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(e,n,i)=>{ve("IntersectionObserver")}),Zone.__load_patch("FileReader",(e,n,i)=>{ve("FileReader")}),Zone.__load_patch("on_property",(e,n,i)=>{!function Tt(e,n){if(we&&!Ue||Zone[e.symbol("patchEvents")])return;const i=n.__Zone_ignore_on_properties;let o=[];if(je){const c=window;o=o.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const a=function ut(){try{const e=Te.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:c,ignoreProperties:["error"]}]:[];tt(c,He(c),i&&i.concat(a),de(c))}o=o.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let c=0;c<o.length;c++){const a=n[o[c]];a&&a.prototype&&tt(a.prototype,He(a.prototype),i)}}(i,e)}),Zone.__load_patch("customElements",(e,n,i)=>{!function yt(e,n){const{isBrowser:i,isMix:o}=n.getGlobalObjects();(i||o)&&e.customElements&&"customElements"in e&&n.patchCallbacks(n,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(e,i)}),Zone.__load_patch("XHR",(e,n)=>{!function P(v){const m=v.XMLHttpRequest;if(!m)return;const L=m.prototype;let N=L[Ze],B=L[Ne];if(!N){const h=v.XMLHttpRequestEventTarget;if(h){const I=h.prototype;N=I[Ze],B=I[Ne]}}const H="readystatechange",J="scheduled";function q(h){const I=h.data,w=I.target;w[a]=!1,w[d]=!1;const Q=w[c];N||(N=w[Ze],B=w[Ne]),Q&&B.call(w,H,Q);const oe=w[c]=()=>{if(w.readyState===w.DONE)if(!I.aborted&&w[a]&&h.state===J){const U=w[n.__symbol__("loadfalse")];if(0!==w.status&&U&&U.length>0){const re=h.invoke;h.invoke=function(){const ee=w[n.__symbol__("loadfalse")];for(let W=0;W<ee.length;W++)ee[W]===h&&ee.splice(W,1);!I.aborted&&h.state===J&&re.call(h)},U.push(h)}else h.invoke()}else!I.aborted&&!1===w[a]&&(w[d]=!0)};return N.call(w,H,oe),w[i]||(w[i]=h),p.apply(w,I.args),w[a]=!0,h}function R(){}function _(h){const I=h.data;return I.aborted=!0,G.apply(I.target,I.args)}const K=le(L,"open",()=>function(h,I){return h[o]=0==I[2],h[y]=I[1],K.apply(h,I)}),X=A("fetchTaskAborting"),j=A("fetchTaskScheduling"),p=le(L,"send",()=>function(h,I){if(!0===n.current[j]||h[o])return p.apply(h,I);{const w={target:h,url:h[y],isPeriodic:!1,args:I,aborted:!1},Q=Me("XMLHttpRequest.send",R,w,q,_);h&&!0===h[d]&&!w.aborted&&Q.state===J&&Q.invoke()}}),G=le(L,"abort",()=>function(h,I){const w=function Z(h){return h[i]}(h);if(w&&"string"==typeof w.type){if(null==w.cancelFn||w.data&&w.data.aborted)return;w.zone.cancelTask(w)}else if(!0===n.current[X])return G.apply(h,I)})}(e);const i=A("xhrTask"),o=A("xhrSync"),c=A("xhrListener"),a=A("xhrScheduled"),y=A("xhrURL"),d=A("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&function at(e,n){const i=e.constructor.name;for(let o=0;o<n.length;o++){const c=n[o],a=e[c];if(a){if(!Fe(ie(e,c)))continue;e[c]=(d=>{const P=function(){return d.apply(this,Le(arguments,i+"."+c))};return ue(P,d),P})(a)}}}(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(e,n)=>{function i(o){return function(c){Qe(e,o).forEach(y=>{const d=e.PromiseRejectionEvent;if(d){const P=new d(o,{promise:c.promise,reason:c.rejection});y.invoke(P)}})}}e.PromiseRejectionEvent&&(n[A("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),n[A("rejectionHandledHandler")]=i("rejectionhandled"))})}},ie=>{ie(ie.s=435)}]);